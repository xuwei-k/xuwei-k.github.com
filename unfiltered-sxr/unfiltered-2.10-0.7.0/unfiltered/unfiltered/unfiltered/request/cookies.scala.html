<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>unfiltered/unfiltered/unfiltered/request/cookies.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">import</span> unfiltered.Cookie

/** An implementation of a function used to map cookie names to their value as an Option. If there
 *  is no associated Cookie value. None will always be returned. */
<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.CookieValueParser.type" id="7460">CookieValueParser</a> <a href="#7461" title="unfiltered.request.CookieValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Map<span class="delimiter">[</span>String, Option<span class="delimiter">[</span>Cookie<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]" id="107407">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="107409">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="107413">vs</a> = <a href="#107409" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>
    <span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]" class="delimiter">[</span><span title="String">String</span>, <span title="Option[unfiltered.Cookie]">Option</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span><span class="delimiter">]</span> <a href="#107414" title="(z: scala.collection.immutable.Map[String,Option[unfiltered.Cookie]])(op: (scala.collection.immutable.Map[String,Option[unfiltered.Cookie]], unfiltered.Cookie) =&gt; scala.collection.immutable.Map[String,Option[unfiltered.Cookie]])scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]">/:</a> <a href="#107413" title="List[String]">vs</a>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[unfiltered.Cookie])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],unfiltered.Cookie,List[unfiltered.Cookie]])List[unfiltered.Cookie]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,unfiltered.Cookie,List[unfiltered.Cookie]]" class="delimiter">(</span><a href="#7571" title="unfiltered.request.FromCookies.type">FromCookies</a>.<a href="#107434" title="(cstr: String)Seq[unfiltered.Cookie]">apply</a> _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>
      <span class="delimiter">(</span><a title="scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]" id="107494">m</a>, <a title="unfiltered.Cookie" id="107495">c</a><span class="delimiter">)</span> =&gt; <a href="#107494" title="scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]">m</a> <span title="(kv: (String, Option[unfiltered.Cookie]))scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]">+</span> <span class="delimiter">(</span><a href="#107495" title="unfiltered.Cookie">c</a>.<a href="../cookies.scala.html#43178" title="(x: String)ArrowAssoc[String]">name</a> <span title="(y: Some[unfiltered.Cookie])(String, Some[unfiltered.Cookie])">-&gt;</span> <span title="(x: unfiltered.Cookie)Some[unfiltered.Cookie]">Some</span><span class="delimiter">(</span><a href="#107495" title="unfiltered.Cookie">c</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<span title="(d: Option[unfiltered.Cookie])scala.collection.immutable.Map[String,Option[unfiltered.Cookie]]">withDefaultValue</span><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

/** Primary Cookie extractor used for obtaining a collection cookies mapped
 *  to their names from the HTTP `Cookie` header */
<span class="keyword">object</span> <a title="unfiltered.request.Cookies.type" id="7448">Cookies</a> <a href="#7449" title="unfiltered.request.Cookies.type" class="keyword">extends</a> <a href="headers.scala.html#7705" title="unfiltered.request.MappedRequestHeader[String,Option[unfiltered.Cookie]]">MappedRequestHeader</a><span class="delimiter">[</span>String, Option<span class="delimiter">[</span>Cookie<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;Cookie&quot;)" class="string">&quot;Cookie&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#7460" title="unfiltered.request.CookieValueParser.type">CookieValueParser</a><span class="delimiter">)</span>

/** Module for Cookie deserialization.
 * Some optional cookie properties defined in http://tools.ietf.org/html/rfc2965 are not included in this implementation's
 * deserialized cookie representation. This list includes `Comment`, `CommentURL`, `Discard`, and `Port` */
<span class="keyword">object</span> <a title="unfiltered.request.FromCookies.type" id="7571">FromCookies</a> <a href="#7572" title="unfiltered.request.FromCookies.type" class="delimiter">{</a>
  <span class="keyword">import</span> unfiltered.<a href="../cookies.scala.html#7191" title="unfiltered.CookieKeys.type">CookieKeys</a>._
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="107432">Cutter</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;(?:\\s|[;,])*\\$*([^;=]+)(?:=(?:[\&quot;']((?:\\\\.|[^\&quot;])*)[\&quot;']|([^;,]*)))?(\\s*(?:[;,]+\\s*|$))&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="keyword">def</span> <a title="(cstr: String)Seq[unfiltered.Cookie]" id="107434">apply</a><span class="delimiter">(</span><a title="String" id="107435">cstr</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[unfiltered.Cookie]">Seq</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#125582" title="(x: (List[String], List[String]))(List[String], List[String])" class="delimiter">(</a><a href="#125580" title="List[String]" id="107582">names</a>, <a href="#125580" title="List[String]" id="107583">values</a><span class="delimiter">)</span> =
      <span class="delimiter">(</span><span class="delimiter">(</span><span title="(_1: List[String], _2: List[String], _3: Option[(String, String, String)])(List[String], List[String], Option[(String, String, String)])" class="delimiter">(</span><span title="scala.collection.immutable.List.type">List</span>.<span title="[A]=&gt; List[A]">empty</span><span title="List[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span>, <span title="scala.collection.immutable.List.type">List</span>.<span title="[A]=&gt; List[A]">empty</span><span title="List[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span>, <span class="delimiter">(</span><span title="None.type">None</span>: <span title="Option[(String, String, String)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String, String<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#107584" title="(z: (List[String], List[String], Option[(String, String, String)]))(op: ((List[String], List[String], Option[(String, String, String)]), String) =&gt; (List[String], List[String], Option[(String, String, String)]))(List[String], List[String], Option[(String, String, String)])">/:</a>
         <a href="#107432" title="=&gt; scala.util.matching.Regex">Cutter</a>.<span title="(source: CharSequence)scala.util.matching.Regex.MatchIterator">findAllIn</span><span class="delimiter">(</span><a href="#107435" title="String">cstr</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#125569" title="(List[String], List[String])" class="delimiter">{</a>
           <span class="delimiter">(</span><a title="(List[String], List[String], Option[(String, String, String)])" id="107610">a</a>, <a title="String" id="107611">e</a><span class="delimiter">)</span> =&gt; <a href="#125562" title="(_1: (List[String], List[String], Option[(String, String, String)]), _2: String)((List[String], List[String], Option[(String, String, String)]), String)" class="delimiter">(</a><a href="#107610" title="(List[String], List[String], Option[(String, String, String)])">a</a>, <a href="#107611" title="String">e</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
             <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125562" title="=&gt; (List[String], List[String], Option[(String, String, String)])" class="delimiter">(</a><a href="#125563" title="List[String]" id="107623">names</a>, <a href="#125563" title="List[String]" id="107624">values</a>, <a href="#125563" title="Option[(String, String, String)]" id="107625">prev</a><span class="delimiter">)</span>, <a href="#125562" title="String" id="107626">matchresult</a><span class="delimiter">)</span> =&gt;
               <a href="#125565" title="(x: (List[String], List[String], Option[(String, String, String)]))(List[String], List[String], Option[(String, String, String)])">matchresult</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                 <span class="keyword">case</span> <a href="#107432" title="(target: Any)Option[List[String]]">Cutter</a><span class="delimiter">(</span><a title="String" id="107628">cname</a>, <a title="String" id="107629">couldBeValue</a>, <a title="String" id="107630">cvalue</a>, <a title="String" id="107631">delim</a><span class="delimiter">)</span> =&gt;

                   <span class="keyword">val</span> <a href="#125499" title="(x: (String, String, String))(String, String, String)" class="delimiter">(</a><a href="#125497" title="String" id="107633">name</a>, <a href="#125497" title="String" id="107634">value</a>, <a href="#125497" title="String" id="107635">sep</a><span class="delimiter">)</span> = <a href="#125497" title="(_1: String, _2: String, _3: String)(String, String, String)" class="delimiter">(</a><a href="#107628" title="String">cname</a>, <a href="#107630" title="String">cvalue</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                     <span class="keyword">case</span> <a href="#125484" title="String" class="keyword">null</a> =&gt; <a href="#125489" title="(x: String)String">couldBeValue</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                       <span class="keyword">case</span> <a href="#125471" title="String" class="keyword">null</a> =&gt; <a href="#125476" title="(x: String)String">cvalue</a>
                       <span class="keyword">case</span> is =&gt; <a href="#125471" title="String">is</a>.<span title="(x$1: CharSequence, x$2: CharSequence)String">replace</span><span class="delimiter">(</span><span title="String(&quot;\\\&quot;&quot;)" class="string">&quot;\\\&quot;&quot;</span>, <span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>.<span title="(x$1: CharSequence, x$2: CharSequence)String">replace</span><a href="#125476" title="(x: String)String" class="delimiter">(</a><span title="String(&quot;\\\\&quot;)" class="string">&quot;\\\\&quot;</span>, <span title="String(&quot;\\&quot;)" class="string">&quot;\\&quot;</span><span class="delimiter">)</span>
                     <span class="delimiter">}</span>
                     <span class="keyword">case</span> v =&gt; <a href="#125489" title="(x: String)String">v</a>
                   <span class="delimiter">}</span>, <a href="#107631" title="String">delim</a><span class="delimiter">)</span>

                   <a href="#107625" title="Option[(String, String, String)]">prev</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                     <span class="keyword">case</span> <a href="#125503" title="(List[String], List[String], Option[(String, String, String)])">None</a> =&gt;
                       <a href="#125509" title="(x: (List[String], List[String], Option[(String, String, String)]))(List[String], List[String], Option[(String, String, String)])" class="delimiter">(</a><a href="#107623" title="List[String]">names</a>, <a href="#107624" title="List[String]">values</a>, <span title="(x: (String, String, String))Some[(String, String, String)]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: String, _3: String)(String, String, String)" class="delimiter">(</span><a href="#107633" title="String">name</a>, <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#107634" title="String">value</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>, <a href="#107635" title="String">sep</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                     <span class="keyword">case</span> Some<a href="#125503" title="(List[String], List[String], Option[(String, String, String)])" class="delimiter">(</a><a href="#125506" title="=&gt; (String, String, String)" class="delimiter">(</a><a href="#125505" title="String" id="107704">n0</a>, <a href="#125505" title="String" id="107705">v0</a>, <a href="#125505" title="String" id="107706">s0</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                       <a href="#125509" title="(x: (List[String], List[String], Option[(String, String, String)]))(List[String], List[String], Option[(String, String, String)])" class="keyword">if</a><span class="delimiter">(</span><a href="#107634" title="String">value</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
                          <a href="../cookies.scala.html#104665" title="=&gt; Seq[String]">KeyOnly</a>.<span title="(p: String =&gt; Boolean)Seq[String]">filter</span><span class="delimiter">(</span><a href="#107714" title="String">_</a>.<span title="(x$1: String)Boolean">equalsIgnoreCase</span><span class="delimiter">(</span><a href="#107633" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                         <span title="(_1: List[String], _2: List[String], _3: Some[(String, String, String)])(List[String], List[String], Some[(String, String, String)])" class="delimiter">(</span><a href="#107623" title="List[String]">names</a>, <a href="#107624" title="List[String]">values</a>, <span title="(x: (String, String, String))Some[(String, String, String)]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: String, _3: String)(String, String, String)" class="delimiter">(</span><a href="#107704" title="String">n0</a>, <a href="#107705" title="String">v0</a> <span title="(x$1: Any)String">+</span> <a href="#107706" title="String">s0</a> <span title="(x$1: Any)String">+</span> <a href="#107633" title="String">name</a>, <a href="#107635" title="String">sep</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                       <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                         <span title="(_1: List[String], _2: List[String], _3: Some[(String, String, String)])(List[String], List[String], Some[(String, String, String)])" class="delimiter">(</span><a href="#107704" title="String">n0</a> <a href="#107743" title="(x: String)List[String]">::</a> <a href="#107623" title="List[String]">names</a>, <a href="#107705" title="String">v0</a> <a href="#107749" title="(x: String)List[String]">::</a> <a href="#107624" title="List[String]">values</a>, <span title="(x: (String, String, String))Some[(String, String, String)]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: String, _3: String)(String, String, String)" class="delimiter">(</span><a href="#107633" title="String">name</a>, <a href="#107634" title="String">value</a>, <a href="#107631" title="String">delim</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                       <span class="delimiter">}</span>
                   <span class="delimiter">}</span>
               <span class="delimiter">}</span>
             <span class="delimiter">}</span>
         <span class="delimiter">}</span><span class="delimiter">)</span> <a href="#125580" title="(List[String], List[String]) @unchecked" class="keyword">match</a> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125569" title="List[String]" id="107773">ns</a>, <a href="#125569" title="List[String]" id="107774">vs</a>, Some<a href="#125569" title="=&gt; Option[(String, String, String)]" class="delimiter">(</a><a href="#125572" title="=&gt; (String, String, String)" class="delimiter">(</a><a href="#125571" title="String" id="107779">n</a>, <a href="#125571" title="String" id="107780">v</a>, _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#125575" title="(x: (List[String], List[String]))(List[String], List[String])" class="keyword">if</a><span class="delimiter">(</span><a href="#107779" title="String">n</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(_1: List[String], _2: List[String])(List[String], List[String])" class="delimiter">(</span><a href="#107773" title="List[String]">ns</a>.<span title="=&gt; List[String]">reverse</span>, <a href="#107774" title="List[String]">vs</a>.<span title="=&gt; List[String]">reverse</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="(_1: List[String], _2: List[String])(List[String], List[String])" class="delimiter">(</span><span class="delimiter">(</span><a href="#107779" title="String">n</a> <a href="#107795" title="(x: String)List[String]">::</a> <a href="#107773" title="List[String]">ns</a><span class="delimiter">)</span>.<span title="=&gt; List[String]">reverse</span>, <span class="delimiter">(</span><a href="#107780" title="String">v</a> <a href="#107811" title="(x: String)List[String]">::</a> <a href="#107774" title="List[String]">vs</a><span class="delimiter">)</span>.<span title="=&gt; List[String]">reverse</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt; sys.<span title="(message: String)Nothing">error</span><a href="#125575" title="(x: (List[String], List[String]))(List[String], List[String])" class="delimiter">(</a><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Error parsing cookie string %s&quot;</span> <span title="(args: Any*)String">format</span> <a href="#107435" title="String">cstr</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span title="Seq[unfiltered.Cookie]" class="keyword">if</span><span class="delimiter">(</span><a href="#107582" title="List[String]">names</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[unfiltered.Cookie]" class="delimiter">[</span><a href="../cookies.scala.html#7184" title="unfiltered.Cookie">Cookie</a><span class="delimiter">]</span> <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      // version may appear before name-value
      <span class="keyword">val</span> <a href="#125588" title="(x: (Int, Int))(Int, Int)" class="delimiter">(</a><a href="#125586" title="Int" id="107835">version</a>, <a href="#125586" title="Int" id="107836">startAt</a><span class="delimiter">)</span> =
        <a href="#125586" title="(Int, Int)" class="keyword">if</a><span class="delimiter">(</span><a href="#107582" title="(n: Int)String">names</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="(x$1: String)Boolean">equalsIgnoreCase</span><span class="delimiter">(</span><a href="../cookies.scala.html#104641" title="=&gt; String">Version</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">try</span> <span class="delimiter">{</span> <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Integer.type">Integer</span>.<span title="(x$1: String)Int">parseInt</span><span class="delimiter">(</span><a href="#107583" title="(n: Int)String">values</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="(Int, Int)">_</span>: <span title="NumberFormatException">NumberFormatException</span> =&gt; <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">else</span> <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

      <span title="Seq[unfiltered.Cookie]" class="keyword">if</span><span class="delimiter">(</span><a href="#107582" title="List[String]">names</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[unfiltered.Cookie]" class="delimiter">[</span><a href="../cookies.scala.html#7184" title="unfiltered.Cookie">Cookie</a><span class="delimiter">]</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        // baking the cookies.
        // Given a seq of names and a seq of values
        // iterate by one value, i, which creates a base cookie using a name, value combo
        // then fold over the rest of the names &amp; values building up the cookie
        // along with a flag that indicates of the a cookie has been build.
        // On each application of the fold, move the top level iterator's cursor
        // forword until a cookie is complete. We keep track of the completion flag
        // as a member of the fold to a) avoid introducing a mutable var, and b)
        // scala does not have a way to break from a for comprehention while still returning
        // a value. scala.util.control.Breakable is not an option here
        <span class="keyword">val</span> <a title="Iterator[Int]" id="107882">iter</a>: <span title="Iterator[Int]">Iterator</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#107836" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">startAt</a> <span title="(end: Int)scala.collection.immutable.Range">until</span> <a href="#107582" title="List[String]">names</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>.<span title="=&gt; Iterator[Int]">iterator</span>
        <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="107937">i</a> &lt;- <a href="#107882" title="(f: Int =&gt; (Boolean, unfiltered.Cookie))Iterator[(Boolean, unfiltered.Cookie)]">iter</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
          <span class="delimiter">(</span><span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="../cookies.scala.html#45023" title="(name: String, value: String, domain: Option[String], path: Option[String], maxAge: Option[Int], secure: Option[Boolean], httpOnly: Boolean, version: Int)unfiltered.Cookie">Cookie</a><span class="delimiter">(</span><a href="#107582" title="(n: Int)String">names</a><span class="delimiter">(</span><a href="#107937" title="Int">i</a><span class="delimiter">)</span>, <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#107583" title="(n: Int)String">values</a><span class="delimiter">(</span><a href="#107937" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#107938" title="(z: (Boolean, unfiltered.Cookie))(op: ((Boolean, unfiltered.Cookie), Int) =&gt; (Boolean, unfiltered.Cookie))(Boolean, unfiltered.Cookie)">/:</a> <span class="delimiter">(</span>
            <a href="#107937" title="Int">i</a> <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">+</span> <span title="Int(1)" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range">until</span> <a href="#107582" title="List[String]">names</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="(Boolean, unfiltered.Cookie)" id="108079">a</a>, <a title="Int" id="108080">j</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a href="#125594" title="(x: (Boolean, unfiltered.Cookie))(Boolean, unfiltered.Cookie)" class="delimiter">(</a><a href="#125592" title="Boolean" id="108082">complete</a>, <a href="#125592" title="unfiltered.Cookie" id="108083">cookie</a><span class="delimiter">)</span> = <a href="#108079" title="(Boolean, unfiltered.Cookie)">a</a>
            <span title="(Boolean, unfiltered.Cookie)" class="keyword">if</span><span class="delimiter">(</span><a href="#108082" title="Boolean">complete</a><span class="delimiter">)</span> <a href="#108079" title="(Boolean, unfiltered.Cookie)">a</a>
            <span class="keyword">else</span> <a href="#125598" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><a href="#107582" title="(n: Int)String">names</a><span class="delimiter">(</span><a href="#108080" title="Int">j</a><span class="delimiter">)</span>.<span title="()String">toLowerCase</span>, <a href="#107583" title="(n: Int)String">values</a><span class="delimiter">(</span><a href="#108080" title="Int">j</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCDiscard</a>,    _<span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a><span class="delimiter">)</span> // don't support
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCSecure</a>,     v<span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108142">copy</a><span class="delimiter">(</span>secure = <span title="(x: Boolean)Option[Boolean]">Option</span><a title="Option[Boolean]" id="108135" class="delimiter">(</a><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCHTTPOnly</a>,   v<span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108159">copy</a><span class="delimiter">(</span>httpOnly = <a title="Boolean" id="108152" class="keyword">true</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCComment</a>,    _<span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a><span class="delimiter">)</span> // don't support
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCCommentURL</a>, _<span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a><span class="delimiter">)</span> // don't support
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCDomain</a>,     <a href="#125598" title="String" id="108180">v</a><span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108195">copy</a><span class="delimiter">(</span>domain = <span title="(x: String)Option[String]">Option</span><a title="Option[String]" id="108188" class="delimiter">(</a><a href="#108180" title="String">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCPath</a>,       <a href="#125598" title="String" id="108200">v</a><span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108215">copy</a><span class="delimiter">(</span>path = <span title="(x: String)Option[String]">Option</span><a title="Option[String]" id="108208" class="delimiter">(</a><a href="#108200" title="String">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCExpires</a>,    <a href="#125598" title="String" id="108220">v</a><span class="delimiter">)</span> =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span class="keyword">try</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="Long" id="108225">maxMils</a> =
                  unfiltered.request.<a href="headers.scala.html#7487" title="unfiltered.request.DateFormatting.type">DateFormatting</a>.<a href="headers.scala.html#108234" title="(raw: String)Option[java.util.Date]">parseDate</a><span class="delimiter">(</span><a href="#108220" title="String">v</a><span class="delimiter">)</span>.<span title="=&gt; java.util.Date">get</span>.<span title="()Long">getTime</span> <span title="(x: Long)Long">-</span>
                    <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
                <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108288">copy</a><span class="delimiter">(</span>maxAge = <span title="(x: Int)Option[Int]">Option</span><a title="Option[Int]" id="108281" class="delimiter">(</a>
                  <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#108225" title="Long">maxMils</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>  <span title="Int(0)" class="int">0</span>
                  <span class="keyword">else</span> <span class="delimiter">(</span><a href="#108225" title="Long">maxMils</a> <span title="(x: Int)Long">/</span> <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>.<span title="=&gt; Int">toInt</span> <span title="(x: Int)Int">+</span> <span class="delimiter">(</span><span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#108225" title="Long">maxMils</a> <span title="(x: Int)Long">%</span> <span title="Int(1000)" class="int">1000</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="unfiltered.Cookie">_</span> =&gt; <a href="#108083" title="unfiltered.Cookie">cookie</a>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCMaxAge</a>, <a href="#125598" title="String" id="108293">v</a><span class="delimiter">)</span>     =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>;  <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span class="keyword">try</span> <span class="delimiter">{</span>
                <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108310">copy</a><span class="delimiter">(</span>maxAge = <span title="(x: Int)Option[Int]">Option</span><a title="Option[Int]" id="108303" class="delimiter">(</a><span title="Integer.type">Integer</span>.<span title="(x$1: String)Int">parseInt</span><span class="delimiter">(</span><a href="#108293" title="String">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="unfiltered.Cookie">_</span> =&gt; <a href="#108083" title="unfiltered.Cookie">cookie</a>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCVersion</a>, <a href="#125598" title="String" id="108315">v</a><span class="delimiter">)</span>    =&gt; <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>;  <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span class="keyword">try</span> <span class="delimiter">{</span>
                <a href="#108083" title="unfiltered.Cookie">cookie</a>.<a href="../cookies.scala.html#104726" title="String" id="108329">copy</a><span class="delimiter">(</span>version = <span title="Integer.type">Integer</span>.<span title="(x$1: String)Int">parseInt</span><a title="Int" id="108322" class="delimiter">(</a><a href="#108315" title="String">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span title="unfiltered.Cookie">_</span> =&gt; <a href="#108083" title="unfiltered.Cookie">cookie</a>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125598" title="=&gt; String">LCPort</a>, _<span class="delimiter">)</span>    =&gt;  <a href="#107882" title="Iterator[Int]">iter</a>.<span title="()Int">next</span>; <span title="(_1: Boolean, _2: unfiltered.Cookie)(Boolean, unfiltered.Cookie)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a><span class="delimiter">)</span> // don't support
              <span class="keyword">case</span> <span class="delimiter">(</span>pass, _<span class="delimiter">)</span>      =&gt;  <a href="#125671" title="(x: (Boolean, unfiltered.Cookie))(Boolean, unfiltered.Cookie)" class="delimiter">(</a><span title="Boolean(true)" class="keyword">true</span>, <a href="#108083" title="unfiltered.Cookie">cookie</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
        // discard completion statuses
        .<span title="(f: ((Boolean, unfiltered.Cookie)) =&gt; unfiltered.Cookie)Iterator[unfiltered.Cookie]">map</span><span class="delimiter">(</span><a href="#108354" title="(Boolean, unfiltered.Cookie)">_</a>.<span title="=&gt; unfiltered.Cookie">_2</span><span class="delimiter">)</span>.<span title="=&gt; Seq[unfiltered.Cookie]">toSeq</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>