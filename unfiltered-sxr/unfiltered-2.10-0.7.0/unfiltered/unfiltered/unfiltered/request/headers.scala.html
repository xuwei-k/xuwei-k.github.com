<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>unfiltered/unfiltered/unfiltered/request/headers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.request

<span class="keyword">import</span> scala.util.control.<span title="scala.util.control.Exception.type">Exception</span>.<span class="delimiter">{</span> allCatch, catching <span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait DateParser extends AnyRef with String =&gt; java.util.Date" id="7492">DateParser</a> <span class="keyword">extends</span> <span class="delimiter">(</span>String =&gt; java.util.Date<span class="delimiter">)</span>

<span class="keyword">object</span> <a title="unfiltered.request.DateFormatting.type" id="7487">DateFormatting</a> <a href="#7488" title="unfiltered.request.DateFormatting.type" class="delimiter">{</a>
  <span class="keyword">import</span> java.text.SimpleDateFormat
  <span class="keyword">import</span> java.util.<span class="delimiter">{</span> Date, Locale, TimeZone <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(date: java.util.Date)String" id="108229">format</a><span class="delimiter">(</span><a title="java.util.Date" id="108380">date</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> =
    <a href="#108381" title="java.text.SimpleDateFormat" class="keyword">new</a> <a title="anonymous class $anon extends java.text.SimpleDateFormat" id="108381">SimpleDateFormat</a><span class="delimiter">(</span><span title="String(&quot;E, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;E, dd MMM yyyy HH:mm:ss z&quot;</span>, <span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#108381" title="(x$1: java.util.TimeZone)Unit">setTimeZone</a><span class="delimiter">(</span><span title="java.util.TimeZone.type">TimeZone</span>.<span title="(x$1: String)java.util.TimeZone">getTimeZone</span><span class="delimiter">(</span><span title="String(&quot;GMT&quot;)" class="string">&quot;GMT&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="(x$1: java.util.Date)String">format</span><span class="delimiter">(</span><a href="#108380" title="java.util.Date">date</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(fmt: String)(value: String)Option[java.util.Date]" id="108230">parseAs</a><span class="delimiter">(</span><a title="String" id="108236">fmt</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="String" id="108237">value</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[java.util.Date]">Option</span><span class="delimiter">[</span>Date<span class="delimiter">]</span> =
    <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; java.util.Date)Option[java.util.Date]">opt</span><span class="delimiter">(</span><span title="(x$1: String, x$2: java.util.Locale)java.text.SimpleDateFormat" class="keyword">new</span> <span title="java.text.SimpleDateFormat">SimpleDateFormat</span><span class="delimiter">(</span><a href="#108236" title="String">fmt</a>, <span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">US</span><span class="delimiter">)</span>.<span title="(x$1: String)java.util.Date">parse</span><span class="delimiter">(</span><a href="#108237" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>

  /** Preferred HTTP date format Sun, 06 Nov 1994 08:49:37 GMT */
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="108231">RFC1123</a> = <a href="#108230" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#108239" title="String" class="delimiter">(</a><span title="String(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  /** Sunday, 06-Nov-94 08:49:37 GMT */
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="108232">RFC1036</a> = <a href="#108230" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#108246" title="String" class="delimiter">(</a><span title="String(&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;)" class="string">&quot;EEEEEE, dd-MMM-yy HH:mm:ss z&quot;</span><span class="delimiter">)</span>_

  /** Sun Nov  6 08:49:37 1994 */
  <span class="keyword">def</span> <a title="=&gt; String =&gt; Option[java.util.Date]" id="108233">ANSICTime</a> = <a href="#108230" title="(fmt: String)(value: String)Option[java.util.Date]">parseAs</a><a href="#108251" title="String" class="delimiter">(</a><span title="String(&quot;EEE MMM  d HH:mm:ss yyyy&quot;)" class="string">&quot;EEE MMM  d HH:mm:ss yyyy&quot;</span><span class="delimiter">)</span>_

  /** @return various date coersion formats falling back on None value */
  <span class="keyword">def</span> <a title="(raw: String)Option[java.util.Date]" id="108234">parseDate</a><span class="delimiter">(</span><a title="String" id="108235">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#108231" title="(v1: String)Option[java.util.Date]">RFC1123</a><span class="delimiter">(</span><a href="#108235" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#108232" title="(v1: String)Option[java.util.Date]">RFC1036</a><span class="delimiter">(</span><a href="#108235" title="String">raw</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[java.util.Date])Option[java.util.Date]">orElse</span> <a href="#108233" title="(v1: String)Option[java.util.Date]">ANSICTime</a><span class="delimiter">(</span><a href="#108235" title="String">raw</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** A header with values mapped to keys in a Map. */
<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class MappedRequestHeader[A, B] extends AnyRef" id="7705">MappedRequestHeader</a><span class="delimiter">[</span><a title="" id="12331">A</a>, <a title="" id="12332">B</a><span class="delimiter">]</span><a href="#7705" title="unfiltered.request.MappedRequestHeader[A,B]" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="107567">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; Map[A,B]" id="107568">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; Map<span class="delimiter">[</span>A, B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Some[Map[A,B]]" id="30027">unapply</a><span class="delimiter">[</span><a title="" id="30029">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="30034">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(x: Map[A,B])Some[Map[A,B]]">Some</span><span class="delimiter">(</span><a href="#107568" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#30034" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#107567" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Map[A,B]" id="30030">apply</a><span class="delimiter">[</span><a title="" id="30032">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="108428">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#107568" title="(v1: Iterator[String])Map[A,B]">parser</a><span class="delimiter">(</span><a href="#108428" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#107567" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** A header with comma delimited values. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/
<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class SeqRequestHeader[T] extends AnyRef" id="7987">SeqRequestHeader</a><span class="delimiter">[</span><a title="" id="12333">T</a><span class="delimiter">]</span><a href="#7987" title="unfiltered.request.SeqRequestHeader[T]" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="35489">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[T]" id="35490">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[A](req: unfiltered.request.HttpRequest[A])Option[List[T]]" id="35481">unapply</a><span class="delimiter">[</span><a title="" id="35483">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[A]" id="35501">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[A]">HttpRequest</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="(x: List[T])Some[List[T]]">Some</span><span class="delimiter">(</span><a href="#35490" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#35501" title="unfiltered.request.HttpRequest[A]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#35489" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(p: List[T] =&gt; Boolean)Option[List[T]]">filter</span> <span class="delimiter">{</span> <span title="=&gt; Boolean">!</span><a href="#35518" title="List[T]">_</a>.<span title="=&gt; Boolean">isEmpty</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])List[T]" id="35484">apply</a><span class="delimiter">[</span><a title="" id="35486">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="108434">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#35490" title="(v1: Iterator[String])List[T]">parser</a><span class="delimiter">(</span><a href="#108434" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#35489" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** A header with a single value. Implementations of this extractor
 * will not match requests for which the header `name` is not present.*/
<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RequestHeader[A] extends AnyRef" id="7975">RequestHeader</a><span class="delimiter">[</span><a title="" id="12334">A</a><span class="delimiter">]</span><a href="#7975" title="unfiltered.request.RequestHeader[A]" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="17616">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Iterator[String] =&gt; List[A]" id="17617">parser</a>: Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="17608">unapply</a><span class="delimiter">[</span><a title="" id="17610">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="17635">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#17617" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#17635" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#17616" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
   <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[A]" id="17611">apply</a><span class="delimiter">[</span><a title="" id="17613">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="59058">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#17617" title="(v1: Iterator[String])List[A]">parser</a><span class="delimiter">(</span><a href="#59058" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12738" title="(name: String)Iterator[String]">headers</a><span class="delimiter">(</span><a href="#17616" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.DateValueParser.type" id="7502">DateValueParser</a> <a href="#7503" title="unfiltered.request.DateValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.util.Date<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#7487" title="unfiltered.request.DateFormatting.type">DateFormatting</a>._
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.util.Date]" id="59052">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="108441">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#108441" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.util.Date])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.util.Date,List[java.util.Date]])List[java.util.Date]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.util.Date,List[java.util.Date]]" class="delimiter">(</span><a href="#108234" title="(xo: Option[java.util.Date])Iterable[java.util.Date]">parseDate</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.IntValueParser.type" id="7667">IntValueParser</a> <a href="#7668" title="unfiltered.request.IntValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(raw: String)Option[Int]" id="108509">tryInt</a><span class="delimiter">(</span><a title="String" id="108512">raw</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="(exceptions: Class[_]*)util.control.Exception.Catch[Nothing]">catching</span><span class="delimiter">(</span>classOf<span title="Class[NumberFormatException](classOf[java.lang.NumberFormatException])" class="delimiter">[</span>NumberFormatException<span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(body: =&gt; Int)Option[Int]">opt</span><span class="delimiter">(</span><a href="#108512" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">raw</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[Int]" id="108510">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="108539">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
     <a href="#108539" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[Int])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],Int,List[Int]])List[Int]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Int,List[Int]]" class="delimiter">(</span><a href="#108509" title="(xo: Option[Int])Iterable[Int]">tryInt</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.StringValueParser.type" id="8015">StringValueParser</a> <a href="#8016" title="unfiltered.request.StringValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="17629">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="108607">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#108607" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.UriValueParser.type" id="8060">UriValueParser</a> <a href="#8061" title="unfiltered.request.UriValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>java.net.URI<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> java.net.<span class="delimiter">{</span> URI, URISyntaxException <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(raw: String)Option[java.net.URI]" id="108613">toUri</a><span class="delimiter">(</span><a title="String" id="108616">raw</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <span title="(exceptions: Class[_]*)util.control.Exception.Catch[Nothing]">catching</span><span class="delimiter">(</span>classOf<span title="Class[java.net.URISyntaxException](classOf[java.net.URISyntaxException])" class="delimiter">[</span>URISyntaxException<span class="delimiter">]</span>, classOf<span title="Class[NullPointerException](classOf[java.lang.NullPointerException])" class="delimiter">[</span>NullPointerException<span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(body: =&gt; java.net.URI)Option[java.net.URI]">opt</span><span class="delimiter">(</span><span title="java.net.URI" class="keyword">new</span> <span title="java.net.URI">URI</span><span class="delimiter">(</span><a href="#108616" title="String">raw</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(values: Iterator[String])List[java.net.URI]" id="108614">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="108641">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#108641" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[java.net.URI])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.net.URI,List[java.net.URI]])List[java.net.URI]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.net.URI,List[java.net.URI]]" class="delimiter">(</span><a href="#108613" title="(xo: Option[java.net.URI])Iterable[java.net.URI]">toUri</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.SeqValueParser.type" id="8003">SeqValueParser</a> <a href="#8004" title="unfiltered.request.SeqValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
   <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="108709">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="108711">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
     <span class="keyword">def</span> <a title="(raw: String)List[String]" id="108715">split</a><span class="delimiter">(</span><a title="String" id="108716">raw</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
       <span class="delimiter">(</span><a href="#108716" title="String">raw</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</span> <span class="delimiter">{</span>
         <a href="#109112" title="String">_</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="(p: Char =&gt; Boolean)String">takeWhile</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">{</span> <a href="#109153" title="Char">_</a> <span title="(x: Char)Boolean">!=</span> <span title="Char(';')" class="char">';'</span> <span class="delimiter">}</span> <span title="=&gt; String">mkString</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
     <a href="#108711" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#108715" title="(raw: String)List[String]">split</a><span class="delimiter">)</span>
   <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span>  <span class="keyword">case class</span> <a title="class Conneg extends AnyRef with Product with Serializable" id="109338">Conneg</a><a href="#109338" title="Product" class="delimiter">(</a><a title="String" id="109855">value</a>: <span title="String">String</span>, <a title="Double" id="109339">qualifier</a>: <span title="Double">Double</span> = <span title="Double(1.0)" class="double">1.0</span><span class="delimiter">)</span>

<span class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span>  <span class="keyword">object</span> <a title="unfiltered.request.Conneg.type" id="109885">Conneg</a> <a href="#7422" title="unfiltered.request.Conneg.type" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="109334">EqualsMatcher</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;(\w*)=&quot;?([a-zA-Z\.0-9]*)&quot;?&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  <span class="keyword">def</span> <a title="(input: String)unfiltered.request.Conneg" id="109336">apply</a><span class="delimiter">(</span><a title="String" id="109389">input</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#109338" title="unfiltered.request.Conneg">Conneg</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="109391">split</a> = <a href="#109389" title="String">input</a>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,String]" id="109392">params</a> = <a href="#109391" title="List[String]">split</a>.<span title="=&gt; List[String]">tail</span>.<span title="(z: scala.collection.immutable.Map[String,Option[String]])(f: (scala.collection.immutable.Map[String,Option[String]], String) =&gt; scala.collection.immutable.Map[String,Option[String]])scala.collection.immutable.Map[String,Option[String]]">foldLeft</span><span class="delimiter">(</span><span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (String, Option[String])*)scala.collection.immutable.Map[String,Option[String]]" class="delimiter">[</span><span title="String">String</span>, <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#109487" title="(_1: scala.collection.immutable.Map[String,Option[String]], _2: String)(scala.collection.immutable.Map[String,Option[String]], String)" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="#125788" title="scala.collection.immutable.Map[String,Option[String]]" id="109497">map</a>, <a href="#125788" title="String" id="109498">s</a><span class="delimiter">)</span> =&gt; <a href="#125790" title="(x: scala.collection.immutable.Map[String,Option[String]])scala.collection.immutable.Map[String,Option[String]]" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="(String, Option[String])" id="109499">item</a> = <a href="#109498" title="String">s</a>.<span title="()String">trim</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#109334" title="(target: Any)Option[List[String]]">EqualsMatcher</a><span class="delimiter">(</span><a title="String" id="109501">a</a>, <a title="String" id="109502">b</a><span class="delimiter">)</span> =&gt; <a href="#125763" title="(x: (String, Option[String]))(String, Option[String])" class="delimiter">(</a><a href="#109501" title="String">a</a>.<span title="()String">trim</span>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#109502" title="String">b</a>.<span title="()String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt; <a href="#125763" title="(x: (String, Option[String]))(String, Option[String])" class="delimiter">(</a><a href="#109498" title="String">s</a>, <span title="None.type">None</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#109497" title="scala.collection.immutable.Map[String,Option[String]]">map</a> <span title="(kv: (String, Option[String]))scala.collection.immutable.Map[String,Option[String]]">+</span> <a href="#109499" title="(String, Option[String])">item</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="(pf: PartialFunction[(String, Option[String]),(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Option[String]],(String, String),scala.collection.immutable.Map[String,String]])scala.collection.immutable.Map[String,String]">collect</span><a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(String, Option[String]),(String, String)] with Serializable" id="109626" class="delimiter">{</a><span class="keyword">case</span> <span class="delimiter">(</span><a href="#125794" title="String" id="109615">a</a>, Some<a href="#125794" title="=&gt; Option[String]" class="delimiter">(</a><a href="#125796" title="String" id="109617">b</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#125798" title="(x: B1)B1" class="delimiter">(</a><a href="#109615" title="String">a</a>, <a href="#109617" title="String">b</a><span class="delimiter">)</span><span class="delimiter">}</span>

    <span title="unfiltered.request.Conneg" class="keyword">new</span> <a href="#109338" title="unfiltered.request.Conneg">Conneg</a><span class="delimiter">(</span><a href="#109391" title="List[String]">split</a>.<span title="=&gt; String">head</span>, <a href="#109392" title="scala.collection.immutable.Map[String,String]">params</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><span title="String(&quot;q&quot;)" class="string">&quot;q&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Double)Option[Double]">map</span><span class="delimiter">(</span><a href="#109845" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>.<span title="(default: =&gt; Double)Double">getOrElse</span><span class="delimiter">(</span><span title="Double(1.0)" class="double">1.0</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>request<span class="delimiter">]</span> <span class="keyword">object</span> <a title="unfiltered.request.ConnegValueParser.type" id="7442">ConnegValueParser</a> <a href="#7443" title="unfiltered.request.ConnegValueParser.type" class="keyword">extends</a> <span class="delimiter">(</span>Iterator<span class="delimiter">[</span>String<span class="delimiter">]</span> =&gt; List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(values: Iterator[String])List[String]" id="35495">apply</a><span class="delimiter">(</span><a title="Iterator[String]" id="109887">values</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String =&gt; List[unfiltered.request.Conneg]" id="109891">parse</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; scala.List<span class="delimiter">[</span>Conneg<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a title="String" id="109893">raw</a> =&gt; <a href="#109893" title="String">raw</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; unfiltered.request.Conneg)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],unfiltered.request.Conneg,Array[unfiltered.request.Conneg]])Array[unfiltered.request.Conneg]">map</span><span title="(xs: Array[unfiltered.request.Conneg])scala.collection.mutable.ArrayOps[unfiltered.request.Conneg]" class="delimiter">(</span><a href="#109336" title="(input: String)unfiltered.request.Conneg">Conneg</a><span class="delimiter">(</span><a href="#110287" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[unfiltered.request.Conneg]">toList</span>
    <span class="delimiter">}</span>
    <a href="#109887" title="Iterator[String]">values</a>.<span title="=&gt; List[String]">toList</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[unfiltered.request.Conneg])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],unfiltered.request.Conneg,List[unfiltered.request.Conneg]])List[unfiltered.request.Conneg]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,unfiltered.request.Conneg,List[unfiltered.request.Conneg]]" class="delimiter">(</span><a href="#109891" title="=&gt; String =&gt; List[unfiltered.request.Conneg]">parse</a><span class="delimiter">)</span>.<span title="(f: unfiltered.request.Conneg =&gt; Double)(implicit ord: scala.math.Ordering[Double])List[unfiltered.request.Conneg]">sortBy</span><span class="delimiter">(</span><a href="#110447" title="unfiltered.request.Conneg">_</a>.<a href="#109339" title="=&gt; Double">qualifier</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="=&gt; math.Ordering.type">Ordering</span>.<span title="Ordering.Double.type">Double</span>.<span title="=&gt; scala.math.Ordering[Double]">reverse</span><span class="delimiter">)</span>.<span title="(f: unfiltered.request.Conneg =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[unfiltered.request.Conneg],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#110476" title="unfiltered.request.Conneg">_</a>.<a href="#109855" title="=&gt; String">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

/** Header whose value should be a date and time. Parsing is attempted
 * for formats defined in the DateFormatting object, in this order:
 * RFC1123, RFC1036,  ANSICTime. */
<span class="keyword">class</span> <a title="class DateHeader extends unfiltered.request.RequestHeader[java.util.Date]" id="7489">DateHeader</a><a href="#7489" title="unfiltered.request.DateHeader" class="delimiter">(</a><a title="String" id="110513">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7975" title="unfiltered.request.RequestHeader[java.util.Date]">RequestHeader</a><span class="delimiter">(</span><a href="#110513" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#7502" title="unfiltered.request.DateValueParser.type">DateValueParser</a><span class="delimiter">)</span>
/** A repeatable header may be specified in more than one header k-v pair and
 *  whose values are a list delimited by comma
 *  see also [[http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2]] */
<span class="keyword">class</span> <a title="class RepeatableHeader extends unfiltered.request.SeqRequestHeader[String]" id="7966">RepeatableHeader</a><a href="#7966" title="unfiltered.request.RepeatableHeader" class="delimiter">(</a><a title="String" id="110532">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7987" title="unfiltered.request.SeqRequestHeader[String]">SeqRequestHeader</a><span class="delimiter">(</span><a href="#110532" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#8003" title="unfiltered.request.SeqValueParser.type">SeqValueParser</a><span class="delimiter">)</span>
/** Header whose value should be a valid URI. */
<span class="keyword">class</span> <a title="class UriHeader extends unfiltered.request.RequestHeader[java.net.URI]" id="8047">UriHeader</a><a href="#8047" title="unfiltered.request.UriHeader" class="delimiter">(</a><a title="String" id="110551">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7975" title="unfiltered.request.RequestHeader[java.net.URI]">RequestHeader</a><span class="delimiter">(</span><a href="#110551" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#8060" title="unfiltered.request.UriValueParser.type">UriValueParser</a><span class="delimiter">)</span>
/** Header whose value can be any string. */
<span class="keyword">class</span> <a title="class StringHeader extends unfiltered.request.RequestHeader[String]" id="8008">StringHeader</a><a href="#8008" title="unfiltered.request.StringHeader" class="delimiter">(</a><a title="String" id="110561">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7975" title="unfiltered.request.RequestHeader[String]">RequestHeader</a><span class="delimiter">(</span><a href="#110561" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#8015" title="unfiltered.request.StringValueParser.type">StringValueParser</a><span class="delimiter">)</span>
/** Header whose value should be an integer. (Is stored in an Int.) */
<span class="keyword">class</span> <a title="class IntHeader extends unfiltered.request.RequestHeader[Int]" id="7654">IntHeader</a><a href="#7654" title="unfiltered.request.IntHeader" class="delimiter">(</a><a title="String" id="110580">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7975" title="unfiltered.request.RequestHeader[Int]">RequestHeader</a><span class="delimiter">(</span><a href="#110580" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#7667" title="unfiltered.request.IntValueParser.type">IntValueParser</a><span class="delimiter">)</span>
/* Header where the value needs to be sorted by the qualifier attribute. */
<span class="keyword">class</span> <a title="class ConnegHeader extends unfiltered.request.SeqRequestHeader[String]" id="7423">ConnegHeader</a><a href="#7423" title="unfiltered.request.ConnegHeader" class="delimiter">(</a><a title="String" id="110590">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7987" title="unfiltered.request.SeqRequestHeader[String]">SeqRequestHeader</a><span class="delimiter">(</span><a href="#110590" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#7442" title="unfiltered.request.ConnegValueParser.type">ConnegValueParser</a><span class="delimiter">)</span>

// http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10

<span class="keyword">object</span> <a title="unfiltered.request.Accept.type" id="7250">Accept</a> <a href="#7251" title="unfiltered.request.Accept.type" class="keyword">extends</a> <a href="#7423" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="String(&quot;Accept&quot;)" class="string">&quot;Accept&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.AcceptCharset.type" id="7256">AcceptCharset</a> <a href="#7257" title="unfiltered.request.AcceptCharset.type" class="keyword">extends</a> <a href="#7423" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="String(&quot;Accept-Charset&quot;)" class="string">&quot;Accept-Charset&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.AcceptEncoding.type" id="7262">AcceptEncoding</a> <a href="#7263" title="unfiltered.request.AcceptEncoding.type" class="keyword">extends</a> <a href="#7423" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="String(&quot;Accept-Encoding&quot;)" class="string">&quot;Accept-Encoding&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.AcceptLanguage.type" id="7268">AcceptLanguage</a> <a href="#7269" title="unfiltered.request.AcceptLanguage.type" class="keyword">extends</a> <a href="#7423" title="unfiltered.request.ConnegHeader">ConnegHeader</a><span class="delimiter">(</span><span title="String(&quot;Accept-Language&quot;)" class="string">&quot;Accept-Language&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Authorization.type" id="7364">Authorization</a> <a href="#7365" title="unfiltered.request.Authorization.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Authorization&quot;)" class="string">&quot;Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Connection.type" id="7403">Connection</a> <a href="#7404" title="unfiltered.request.Connection.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Connection&quot;)" class="string">&quot;Connection&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.RequestContentType.type" id="7973">RequestContentType</a> <a href="#7974" title="unfiltered.request.RequestContentType.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Content-Type&quot;)" class="string">&quot;Content-Type&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Expect.type" id="7535">Expect</a> <a href="#7536" title="unfiltered.request.Expect.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Expect&quot;)" class="string">&quot;Expect&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.From.type" id="7544">From</a> <a href="#7545" title="unfiltered.request.From.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;From&quot;)" class="string">&quot;From&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Host.type" id="7589">Host</a> <a href="#7590" title="unfiltered.request.Host.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Host&quot;)" class="string">&quot;Host&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.IfMatch.type" id="7628">IfMatch</a> <a href="#7629" title="unfiltered.request.IfMatch.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;If-Match&quot;)" class="string">&quot;If-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.IfModifiedSince.type" id="7634">IfModifiedSince</a> <a href="#7635" title="unfiltered.request.IfModifiedSince.type" class="keyword">extends</a> <a href="#7489" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="String(&quot;If-Modified-Since&quot;)" class="string">&quot;If-Modified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.IfNoneMatch.type" id="7640">IfNoneMatch</a> <a href="#7641" title="unfiltered.request.IfNoneMatch.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;If-None-Match&quot;)" class="string">&quot;If-None-Match&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.IfRange.type" id="7646">IfRange</a> <a href="#7647" title="unfiltered.request.IfRange.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;If-Range&quot;)" class="string">&quot;If-Range&quot;</span><span class="delimiter">)</span> // can also be an http date
<span class="keyword">object</span> <a title="unfiltered.request.IfUnmodifiedSince.type" id="7652">IfUnmodifiedSince</a> <a href="#7653" title="unfiltered.request.IfUnmodifiedSince.type" class="keyword">extends</a> <a href="#7489" title="unfiltered.request.DateHeader">DateHeader</a><span class="delimiter">(</span><span title="String(&quot;If-Unmodified-Since&quot;)" class="string">&quot;If-Unmodified-Since&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.MaxForwards.type" id="7712">MaxForwards</a> <a href="#7713" title="unfiltered.request.MaxForwards.type" class="keyword">extends</a> <a href="#7654" title="unfiltered.request.IntHeader">IntHeader</a><span class="delimiter">(</span><span title="String(&quot;Max-Forwards&quot;)" class="string">&quot;Max-Forwards&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.ProxyAuthorization.type" id="7829">ProxyAuthorization</a> <a href="#7830" title="unfiltered.request.ProxyAuthorization.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;Proxy-Authorization&quot;)" class="string">&quot;Proxy-Authorization&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Range.type" id="7949">Range</a> <a href="#7950" title="unfiltered.request.Range.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;Range&quot;)" class="string">&quot;Range&quot;</span><span class="delimiter">)</span>// there more structure here
<span class="keyword">object</span> <a title="unfiltered.request.Referer.type" id="7955">Referer</a> <a href="#7956" title="unfiltered.request.Referer.type" class="keyword">extends</a> <a href="#8047" title="unfiltered.request.UriHeader">UriHeader</a><span class="delimiter">(</span><span title="String(&quot;Referer&quot;)" class="string">&quot;Referer&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.TE.type" id="8021">TE</a> <a href="#8022" title="unfiltered.request.TE.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;TE&quot;)" class="string">&quot;TE&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.Upgrade.type" id="8045">Upgrade</a> <a href="#8046" title="unfiltered.request.Upgrade.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;Upgrade&quot;)" class="string">&quot;Upgrade&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.UserAgent.type" id="8066">UserAgent</a> <a href="#8067" title="unfiltered.request.UserAgent.type" class="keyword">extends</a> <a href="#8008" title="unfiltered.request.StringHeader">StringHeader</a><span class="delimiter">(</span><span title="String(&quot;User-Agent&quot;)" class="string">&quot;User-Agent&quot;</span><span class="delimiter">)</span>// maybe a bit more structure here
<span class="keyword">object</span> <a title="unfiltered.request.Via.type" id="8072">Via</a> <a href="#8073" title="unfiltered.request.Via.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;Via&quot;)" class="string">&quot;Via&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="unfiltered.request.XForwardedFor.type" id="8078">XForwardedFor</a> <a href="#8079" title="unfiltered.request.XForwardedFor.type" class="keyword">extends</a> <a href="#7966" title="unfiltered.request.RepeatableHeader">RepeatableHeader</a><span class="delimiter">(</span><span title="String(&quot;X-Forwarded-For&quot;)" class="string">&quot;X-Forwarded-For&quot;</span><span class="delimiter">)</span>

/** Extracts the charset value from the Content-Type header, if present */
<span class="keyword">object</span> <a title="unfiltered.request.Charset.type" id="7391">Charset</a> <a href="#7392" title="unfiltered.request.Charset.type" class="delimiter">{</a>
  <span class="keyword">import</span> unfiltered.util.MIMEType
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[String]" id="70461">unapply</a><span class="delimiter">[</span><a title="" id="70463">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="70468">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a href="../../../../util/unfiltered/util/mime.scala.html#70480" title="(mt: String)Option[unfiltered.util.MIMEType]">MIMEType</a><span class="delimiter">(</span><a title="unfiltered.util.MIMEType" id="70503">mimeType</a><span class="delimiter">)</span> &lt;- <a href="#17611" title="(req: unfiltered.request.HttpRequest[T])Option[String]">RequestContentType</a><a href="#70477" title="(f: String =&gt; Option[String])Option[String]" class="delimiter">(</a><a href="#70468" title="unfiltered.request.HttpRequest[T]">req</a><span class="delimiter">)</span>
      <a title="String" id="70510">charset</a> &lt;- <a href="#70503" title="unfiltered.util.MIMEType">mimeType</a>.<a href="../../../../util/unfiltered/util/mime.scala.html#70490" title="=&gt; Map[String,String]">params</a>.<span title="(key: String)Option[String]">get</span><span title="(f: String =&gt; String)Option[String]" class="delimiter">(</span><span title="String(&quot;charset&quot;)" class="string">&quot;charset&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#70510" title="String">charset</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[String]" id="70464">apply</a><span class="delimiter">[</span><a title="" id="70466">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="70467">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#70461" title="(req: unfiltered.request.HttpRequest[T])Option[String]">unapply</a><span class="delimiter">(</span><a href="#70467" title="unfiltered.request.HttpRequest[T]">req</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** Extracts hostname and port separately from the Host header, setting
 * a default port of 80 or 443 when none is specified */
<span title="AnyRef" class="keyword">object</span> <a title="unfiltered.request.HostPort.type" id="7595">HostPort</a> <a href="#7596" title="unfiltered.request.HostPort.type" class="delimiter">{</a>
  <span class="keyword">import</span> unfiltered.util.Of
  <span class="keyword">def</span> <a title="[T](req: unfiltered.request.HttpRequest[T])Option[(String, Int)]" id="57250">unapply</a><span class="delimiter">[</span><a title="" id="57252">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="unfiltered.request.HttpRequest[T]" id="57253">req</a>: <a href="HttpRequest.scala.html#7615" title="unfiltered.request.HttpRequest[T]">HttpRequest</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[(String, Int)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, Int<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#57253" title="unfiltered.request.HttpRequest[T]">req</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#17608" title="(req: unfiltered.request.HttpRequest[T])Option[String]">Host</a><span class="delimiter">(</span><a title="String" id="110641">hostname</a><span class="delimiter">)</span> =&gt; <a href="#110641" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">hostname</a>.<span title="(separator: Char)Array[String]">split</span><a href="#125862" title="(x: Option[(String, Int)])Option[(String, Int)]" class="delimiter">(</a><span title="Char(':')" class="char">':'</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#125827" title="(x: Array[String])Option[IndexedSeq[String]]">Array</a><span class="delimiter">(</span><a title="String" id="110668">host</a>, <a href="../../../../util/unfiltered/util/utils.scala.html#12508" title="unfiltered.util.Of.type">Of</a>.<a href="../../../../util/unfiltered/util/utils.scala.html#110679" title="(str: String)Option[Int]">Int</a><span title="Int(1)" class="delimiter">(</span><a title="Int" id="110693">port</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><a href="#125833" title="(x: Option[(String, Int)])Option[(String, Int)]" class="delimiter">(</a><a href="#110668" title="String">host</a>, <a href="#110693" title="Int">port</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt; <span title="(x: (String, Int))Some[(String, Int)]">Some</span><a href="#125833" title="(x: Option[(String, Int)])Option[(String, Int)]" class="delimiter">(</a><a href="#110641" title="String">hostname</a>, <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#57253" title="unfiltered.request.HttpRequest[T]">req</a>.<a href="HttpRequest.scala.html#12739" title="=&gt; Boolean">isSecure</a><span class="delimiter">)</span> <span title="Int(443)" class="int">443</span> <span class="keyword">else</span> <span title="Int(80)" class="int">80</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> _ =&gt; <a href="#125862" title="(x: Option[(String, Int)])Option[(String, Int)]">None</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>