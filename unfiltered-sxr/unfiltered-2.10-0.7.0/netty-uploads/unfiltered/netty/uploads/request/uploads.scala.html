<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>netty-uploads/unfiltered/netty/uploads/request/uploads.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.netty.request

<span class="keyword">import</span> unfiltered.netty
<span class="keyword">import</span> unfiltered.netty._

<span class="keyword">import</span> scala.util.control.<span title="scala.util.control.Exception.type">Exception</span>.allCatch

<span class="keyword">import</span> unfiltered.netty.RequestBinding
<span class="keyword">import</span> unfiltered.request.HttpRequest
<span class="keyword">import</span> unfiltered.request.RequestContentType

<span class="keyword">import</span> unfiltered.request.<span class="delimiter">{</span>
  MultiPartMatcher,MultipartData, AbstractDiskFile, TupleGenerator,
  AbstractStreamedFile, StreamedExtractor, AbstractDiskExtractor,
  DiskExtractor <span class="delimiter">}</span>
<span class="keyword">import</span> unfiltered.util.control.NonFatal

<span class="keyword">import</span> org.jboss.<span class="delimiter">{</span>netty =&gt; jnetty<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>HttpRequest =&gt; NHttpRequest<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>InterfaceHttpData =&gt; IOInterfaceHttpData<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>Attribute =&gt; IOAttribute<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>FileUpload =&gt; IOFileUpload<span class="delimiter">}</span>

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File =&gt; JFile<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait MultiPartCallback extends AnyRef" id="10754">MultiPartCallback</a>
<span title="AnyRef" class="keyword">case class</span> <a title="class Decode extends AnyRef with unfiltered.netty.request.MultiPartCallback with Product with Serializable" id="67476">Decode</a><a href="#67476" title="Product" class="delimiter">(</a><a title="unfiltered.netty.request.MultiPartBinding" id="65273">binding</a>: <a href="#10751" title="unfiltered.netty.request.MultiPartBinding">MultiPartBinding</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#10754" title="unfiltered.netty.request.MultiPartCallback">MultiPartCallback</a>

<span class="keyword">class</span> <a title="class MultiPartBinding extends unfiltered.netty.RequestBinding" id="10751">MultiPartBinding</a><a href="#10751" title="unfiltered.netty.request.MultiPartBinding" class="delimiter">(</a><span class="keyword">val</span> <a title="Option[unfiltered.netty.request.PostDecoder]" id="65224">decoder</a>: <span title="Option[unfiltered.netty.request.PostDecoder]">Option</span><span class="delimiter">[</span>PostDecoder<span class="delimiter">]</span>, <a title="unfiltered.netty.ReceivedMessage" id="65225">msg</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9854" title="unfiltered.netty.ReceivedMessage">ReceivedMessage</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">(</span><a href="#65225" title="unfiltered.netty.ReceivedMessage">msg</a><span class="delimiter">)</span>

/** Matches requests that have multipart content */
<span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPart.type" id="10749">MultiPart</a> <a href="#10750" title="unfiltered.netty.request.MultiPart.type" class="keyword">extends</a> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#7735" title="unfiltered.request.MultiPartMatcher[unfiltered.netty.RequestBinding]">MultiPartMatcher</a><span class="delimiter">[</span>RequestBinding<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(req: unfiltered.netty.RequestBinding)Option[unfiltered.netty.RequestBinding]" id="65314">unapply</a><span class="delimiter">(</span><a title="unfiltered.netty.RequestBinding" id="65317">req</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../../../unfiltered/unfiltered/unfiltered/request/headers.scala.html#17611" title="(req: unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage])Option[String]">RequestContentType</a><span title="Option[unfiltered.netty.RequestBinding]" class="delimiter">(</span><a href="#65317" title="unfiltered.netty.RequestBinding">req</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#122534" title="Option[unfiltered.netty.RequestBinding]" class="delimiter">(</a><a href="#122535" title="String" id="65326">r</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#65315" title="(contentType: String)Boolean">isMultipart</a><span class="delimiter">(</span><a href="#65326" title="String">r</a><span class="delimiter">)</span> =&gt; <span title="(x: unfiltered.netty.RequestBinding)Some[unfiltered.netty.RequestBinding]">Some</span><a href="#122537" title="(x: Option[unfiltered.netty.RequestBinding])Option[unfiltered.netty.RequestBinding]" class="delimiter">(</a><a href="#65317" title="unfiltered.netty.RequestBinding">req</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; <a href="#122537" title="(x: Option[unfiltered.netty.RequestBinding])Option[unfiltered.netty.RequestBinding]">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Check the ContentType header value to determine whether the request is multipart */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(contentType: String)Boolean" id="65315">isMultipart</a><span class="delimiter">(</span><a title="String" id="65327">contentType</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="65330">Multipart</a> = <span title="String(&quot;multipart/form-data&quot;)" class="string">&quot;multipart/form-data&quot;</span>
    <span class="keyword">val</span> <a title="String" id="65331">Boundary</a> = <span title="String(&quot;boundary&quot;)" class="string">&quot;boundary&quot;</span>
    // Check if the Post is using &quot;multipart/form-data; boundary=--89421926422648&quot;
    <a href="#65316" title="(sb: String)(Option[String], Option[String])">splitContentTypeHeader</a><a href="#122542" title="Boolean" class="delimiter">(</a><a href="#65327" title="String">contentType</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>Some<a href="#122542" title="=&gt; Option[String]" class="delimiter">(</a><a href="#122545" title="String" id="65337">a</a><span class="delimiter">)</span>, Some<a href="#122542" title="=&gt; Option[String]" class="delimiter">(</a><a href="#122546" title="String" id="65339">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#65337" title="String">a</a>.<span title="()String">toLowerCase</span>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#65330" title="String">Multipart</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#65339" title="String">b</a>.<span title="()String">toLowerCase</span>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#65331" title="String">Boundary</a><span class="delimiter">)</span> =&gt;
        <a href="#65339" title="String">b</a>.<span title="(x$1: String)Array[String]">split</span><span class="delimiter">(</span><span title="String(&quot;=&quot;)" class="string">&quot;=&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Int">length</span> <a href="#122548" title="(x: Boolean)Boolean">==</a> <span title="Int(2)" class="int">2</span>
      <span class="keyword">case</span> _ =&gt; <a href="#122548" title="(x: Boolean)Boolean" class="keyword">false</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Split the Content-Type header value into two strings */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sb: String)(Option[String], Option[String])" id="65316">splitContentTypeHeader</a><span class="delimiter">(</span><a title="String" id="65332">sb</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="(Option[String], Option[String])">Tuple2</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>String<span class="delimiter">]</span>,Option<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: String)Option[String]" id="66538">nonEmpty</a><span class="delimiter">(</span><a title="String" id="66543">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#66543" title="String">s</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span title="None.type">None</span> <span class="keyword">else</span> <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#66543" title="String">s</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a href="#122555" title="(x: (String, String))(String, String)" class="delimiter">(</a><a href="#122553" title="String" id="66540">contentType</a>, <a href="#122553" title="String" id="66541">params</a><span class="delimiter">)</span> = <a href="#65332" title="String">sb</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</span>.<span title="(p: Char =&gt; Boolean)(String, String)">span</span><a href="#122553" title="(String, String) @unchecked" class="delimiter">(</a><span title="=&gt; Boolean">!</span><a href="#66591" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">_</a>.<span title="=&gt; Boolean">isWhitespace</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="66542">ct</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#66540" title="String">contentType</a>.<span title="(x$1: String)Boolean">endsWith</span><span class="delimiter">(</span><span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#66540" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">contentType</a>.<span title="(n: Int)String">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#66540" title="String">contentType</a>
    <span title="(_1: Option[String], _2: Option[String])(Option[String], Option[String])" class="delimiter">(</span><a href="#66538" title="(s: String)Option[String]">nonEmpty</a><span class="delimiter">(</span><a href="#66542" title="String">ct</a><span class="delimiter">)</span>, <a href="#66538" title="(s: String)Option[String]">nonEmpty</a><span class="delimiter">(</span><a href="#66541" title="String">params</a>.<span title="()String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPartParams.type" id="10836">MultiPartParams</a> <a href="#10837" title="unfiltered.netty.request.MultiPartParams.type" class="delimiter">{</a>

  /** Streamed multi-part data extractor */
  <span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPartParams.Streamed.type" id="66625">Streamed</a> <a href="#66626" title="unfiltered.netty.request.MultiPartParams.Streamed.type" class="keyword">extends</a> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#8005" title="unfiltered.request.StreamedExtractor[unfiltered.netty.RequestBinding]">StreamedExtractor</a><span class="delimiter">[</span>RequestBinding<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> java.util.<span class="delimiter">{</span>Iterator =&gt; JIterator<span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(req: unfiltered.netty.RequestBinding)unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractStreamedFile]]" id="66634">apply</a><span class="delimiter">(</span><a title="unfiltered.netty.RequestBinding" id="66636">req</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="Option[unfiltered.netty.request.PostDecoder]" id="66640">decoder</a> = <a href="#66636" title="unfiltered.netty.RequestBinding">req</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#122559" title="Option[unfiltered.netty.request.PostDecoder]">r</a>: MultiPartBinding =&gt; <a href="#122560" title="unfiltered.netty.request.MultiPartBinding">r</a>.<a href="#122562" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]">decoder</a>
        <span class="keyword">case</span> _ =&gt; <a href="decoder.scala.html#65368" title="(req: org.jboss.netty.handler.codec.http.HttpRequest, useDisk: Boolean)Option[unfiltered.netty.request.PostDecoder]">PostDecoder</a><a href="#122562" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]" class="delimiter">(</a><a href="#66636" title="unfiltered.netty.RequestBinding">req</a>.<a href="../../../../../unfiltered/unfiltered/unfiltered/request/HttpRequest.scala.html#12727" title="=&gt; unfiltered.netty.ReceivedMessage">underlying</a>.<a href="../../../../../netty/unfiltered/netty/bindings.scala.html#58640" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="List[org.jboss.netty.handler.codec.http.Attribute]" id="66641">params</a> = <a href="#66640" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.Attribute])Option[List[org.jboss.netty.handler.codec.http.Attribute]]">map</span><span class="delimiter">(</span><a href="#66650" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65435" title="=&gt; List[org.jboss.netty.handler.codec.http.Attribute]">parameters</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.Attribute])List[org.jboss.netty.handler.codec.http.Attribute]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[org.jboss.netty.handler.codec.http.FileUpload]" id="66642">files</a> = <a href="#66640" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.FileUpload])Option[List[org.jboss.netty.handler.codec.http.FileUpload]]">map</span><span class="delimiter">(</span><a href="#66667" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65434" title="=&gt; List[org.jboss.netty.handler.codec.http.FileUpload]">fileUploads</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.FileUpload])List[org.jboss.netty.handler.codec.http.FileUpload]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      /** attempt to extract the first named param from the stream */
      <span class="keyword">def</span> <a title="(name: String)Seq[String]" id="66643">extractParam</a><span class="delimiter">(</span><a title="String" id="66681">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <a href="#66641" title="List[org.jboss.netty.handler.codec.http.Attribute]">params</a>.<span title="(p: org.jboss.netty.handler.codec.http.Attribute =&gt; Boolean)List[org.jboss.netty.handler.codec.http.Attribute]">filter</span><span class="delimiter">(</span><a href="#66685" title="org.jboss.netty.handler.codec.http.Attribute">_</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#66681" title="String">name</a><span class="delimiter">)</span>.<span title="(f: org.jboss.netty.handler.codec.http.Attribute =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.Attribute],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#66725" title="org.jboss.netty.handler.codec.http.Attribute">_</a>.<a href="../org/jboss/netty/handler/codec/http/Attribute.java.html#66347" title="()String">getValue</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.Seq[String]">toSeq</span>
      <span class="delimiter">}</span>

      /** attempt to extract the first named file from the stream */
      <span class="keyword">def</span> <a title="(name: String)Seq[unfiltered.netty.request.StreamedFileWrapper]" id="66644">extractFile</a><span class="delimiter">(</span><a title="String" id="66767">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[unfiltered.netty.request.StreamedFileWrapper]">Seq</span><span class="delimiter">[</span>StreamedFileWrapper<span class="delimiter">]</span> = <span class="delimiter">{</span>
         <a href="#66642" title="List[org.jboss.netty.handler.codec.http.FileUpload]">files</a>.<span title="(p: org.jboss.netty.handler.codec.http.FileUpload =&gt; Boolean)List[org.jboss.netty.handler.codec.http.FileUpload]">filter</span><span class="delimiter">(</span><a href="#66771" title="org.jboss.netty.handler.codec.http.FileUpload">_</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#66767" title="String">name</a><span class="delimiter">)</span>.<span title="(f: org.jboss.netty.handler.codec.http.FileUpload =&gt; unfiltered.netty.request.StreamedFileWrapper)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.FileUpload],unfiltered.netty.request.StreamedFileWrapper,List[unfiltered.netty.request.StreamedFileWrapper]])List[unfiltered.netty.request.StreamedFileWrapper]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,unfiltered.netty.request.StreamedFileWrapper,List[unfiltered.netty.request.StreamedFileWrapper]]" class="delimiter">(</span><span title="unfiltered.netty.request.StreamedFileWrapper" class="keyword">new</span> <a href="#10886" title="unfiltered.netty.request.StreamedFileWrapper">StreamedFileWrapper</a><span class="delimiter">(</span><a href="#66810" title="org.jboss.netty.handler.codec.http.FileUpload">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.Seq[unfiltered.netty.request.StreamedFileWrapper]">toSeq</span>
      <span class="delimiter">}</span>
      <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#41330" title="(params: String =&gt; Seq[String], files: String =&gt; Seq[unfiltered.request.AbstractStreamedFile])unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractStreamedFile]]">MultipartData</a><span class="delimiter">(</span><a href="#66643" title="(name: String)Seq[String]">extractParam</a> _,<a href="#66644" title="(name: String)Seq[unfiltered.netty.request.StreamedFileWrapper]">extractFile</a> _<span class="delimiter">)</span>
      
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** On-disk multi-part form data extractor */
  <span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPartParams.Disk.type" id="66627">Disk</a> <a href="#66628" title="unfiltered.netty.request.MultiPartParams.Disk.type" class="keyword">extends</a> <a href="#10703" title="unfiltered.netty.request.AbstractDisk">AbstractDisk</a> <span class="keyword">with</span> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#7528" title="unfiltered.request.DiskExtractor">DiskExtractor</a>

  /** All in memory multi-part form data extractor.
      This exposes a very specific class of file references
      intended for use in environments such as GAE where writing
      to disk is prohibited.
      */
  <span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPartParams.Memory.type" id="66629">Memory</a> <a href="#66630" title="unfiltered.netty.request.MultiPartParams.Memory.type" class="keyword">extends</a> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#8005" title="unfiltered.request.StreamedExtractor[unfiltered.netty.RequestBinding]">StreamedExtractor</a><span class="delimiter">[</span>RequestBinding<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> java.util.<span class="delimiter">{</span>Iterator =&gt; JIterator<span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(req: unfiltered.netty.RequestBinding)unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractStreamedFile]]" id="66896">apply</a><span class="delimiter">(</span><a title="unfiltered.netty.RequestBinding" id="66898">req</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="Option[unfiltered.netty.request.PostDecoder]" id="66902">decoder</a> = <a href="#66898" title="unfiltered.netty.RequestBinding">req</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#122567" title="Option[unfiltered.netty.request.PostDecoder]">r</a>: MultiPartBinding =&gt; <a href="#122568" title="unfiltered.netty.request.MultiPartBinding">r</a>.<a href="#122570" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]">decoder</a>
        <span class="keyword">case</span> _ =&gt; <a href="decoder.scala.html#65368" title="(req: org.jboss.netty.handler.codec.http.HttpRequest, useDisk: Boolean)Option[unfiltered.netty.request.PostDecoder]">PostDecoder</a><a href="#122570" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]" class="delimiter">(</a><a href="#66898" title="unfiltered.netty.RequestBinding">req</a>.<a href="../../../../../unfiltered/unfiltered/unfiltered/request/HttpRequest.scala.html#12727" title="=&gt; unfiltered.netty.ReceivedMessage">underlying</a>.<a href="../../../../../netty/unfiltered/netty/bindings.scala.html#58640" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="List[org.jboss.netty.handler.codec.http.Attribute]" id="66903">params</a> = <a href="#66902" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.Attribute])Option[List[org.jboss.netty.handler.codec.http.Attribute]]">map</span><span class="delimiter">(</span><a href="#66912" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65435" title="=&gt; List[org.jboss.netty.handler.codec.http.Attribute]">parameters</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.Attribute])List[org.jboss.netty.handler.codec.http.Attribute]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[org.jboss.netty.handler.codec.http.FileUpload]" id="66904">files</a> = <a href="#66902" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.FileUpload])Option[List[org.jboss.netty.handler.codec.http.FileUpload]]">map</span><span class="delimiter">(</span><a href="#66929" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65434" title="=&gt; List[org.jboss.netty.handler.codec.http.FileUpload]">fileUploads</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.FileUpload])List[org.jboss.netty.handler.codec.http.FileUpload]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      /** attempt to extract the first named param from the stream */
      <span class="keyword">def</span> <a title="(name: String)Seq[String]" id="66905">extractParam</a><span class="delimiter">(</span><a title="String" id="66943">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <a href="#66903" title="List[org.jboss.netty.handler.codec.http.Attribute]">params</a>.<span title="(p: org.jboss.netty.handler.codec.http.Attribute =&gt; Boolean)List[org.jboss.netty.handler.codec.http.Attribute]">filter</span><span class="delimiter">(</span><a href="#66947" title="org.jboss.netty.handler.codec.http.Attribute">_</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#66943" title="String">name</a><span class="delimiter">)</span>.<span title="(f: org.jboss.netty.handler.codec.http.Attribute =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.Attribute],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#66972" title="org.jboss.netty.handler.codec.http.Attribute">_</a>.<a href="../org/jboss/netty/handler/codec/http/Attribute.java.html#66347" title="()String">getValue</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.Seq[String]">toSeq</span>
      <span class="delimiter">}</span>

      /** attempt to extract the first named file from the stream */
      <span class="keyword">def</span> <a title="(name: String)Seq[unfiltered.netty.request.StreamedFileWrapper]" id="66906">extractFile</a><span class="delimiter">(</span><a title="String" id="67002">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[unfiltered.netty.request.StreamedFileWrapper]">Seq</span><span class="delimiter">[</span>StreamedFileWrapper<span class="delimiter">]</span> = <span class="delimiter">{</span>
         <a href="#66904" title="List[org.jboss.netty.handler.codec.http.FileUpload]">files</a>.<span title="(p: org.jboss.netty.handler.codec.http.FileUpload =&gt; Boolean)List[org.jboss.netty.handler.codec.http.FileUpload]">filter</span><span class="delimiter">(</span><a href="#67006" title="org.jboss.netty.handler.codec.http.FileUpload">_</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#67002" title="String">name</a><span class="delimiter">)</span>.<span title="(f: org.jboss.netty.handler.codec.http.FileUpload =&gt; unfiltered.netty.request.MemoryFileWrapper)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.FileUpload],unfiltered.netty.request.MemoryFileWrapper,List[unfiltered.netty.request.MemoryFileWrapper]])List[unfiltered.netty.request.MemoryFileWrapper]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,unfiltered.netty.request.MemoryFileWrapper,List[unfiltered.netty.request.MemoryFileWrapper]]" class="delimiter">(</span><span title="unfiltered.netty.request.MemoryFileWrapper" class="keyword">new</span> <a href="#10739" title="unfiltered.netty.request.MemoryFileWrapper">MemoryFileWrapper</a><span class="delimiter">(</span><a href="#67031" title="org.jboss.netty.handler.codec.http.FileUpload">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.Seq[unfiltered.netty.request.MemoryFileWrapper]">toSeq</span>
      <span class="delimiter">}</span>
      <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#41330" title="(params: String =&gt; Seq[String], files: String =&gt; Seq[unfiltered.request.AbstractStreamedFile])unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractStreamedFile]]">MultipartData</a><span class="delimiter">(</span><a href="#66905" title="(name: String)Seq[String]">extractParam</a> _,<a href="#66906" title="(name: String)Seq[unfiltered.netty.request.StreamedFileWrapper]">extractFile</a> _<span class="delimiter">)</span>
      
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

/** Netty extractor for multi-part data destined for disk. */
<span title="AnyRef" class="keyword">trait</span> <a title="trait AbstractDisk extends AnyRef with unfiltered.request.AbstractDiskExtractor[unfiltered.netty.RequestBinding] with unfiltered.request.TupleGenerator" id="10703">AbstractDisk</a>
<span title="Unit" class="keyword">extends</span> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#7237" title="unfiltered.request.AbstractDiskExtractor[unfiltered.netty.RequestBinding]">AbstractDiskExtractor</a><span class="delimiter">[</span>RequestBinding<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#8032" title="unfiltered.request.TupleGenerator">TupleGenerator</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> java.util.<span class="delimiter">{</span>Iterator =&gt; JIterator<span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(req: unfiltered.netty.RequestBinding)unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractDiskFile]]" id="66891">apply</a><span class="delimiter">(</span><a title="unfiltered.netty.RequestBinding" id="67105">req</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData]" id="67109">items</a> = <a href="#67105" title="unfiltered.netty.RequestBinding">req</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#122575" title="Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData]">r</a>: MultiPartBinding =&gt; <a href="#122576" title="unfiltered.netty.request.MultiPartBinding">r</a>.<a href="#65224" title="=&gt; Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])Option[List[org.jboss.netty.handler.codec.http.InterfaceHttpData]]">map</span><span class="delimiter">(</span><a href="#67118" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65433" title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">items</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#122578" title="(x: Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData])Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData]">toIterator</a>
      <span class="keyword">case</span> _ =&gt; <a href="decoder.scala.html#65368" title="(req: org.jboss.netty.handler.codec.http.HttpRequest, useDisk: Boolean)Option[unfiltered.netty.request.PostDecoder]">PostDecoder</a><span class="delimiter">(</span><a href="#67105" title="unfiltered.netty.RequestBinding">req</a>.<a href="../../../../../unfiltered/unfiltered/unfiltered/request/HttpRequest.scala.html#12727" title="=&gt; unfiltered.netty.ReceivedMessage">underlying</a>.<a href="../../../../../netty/unfiltered/netty/bindings.scala.html#58640" title="=&gt; org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])Option[List[org.jboss.netty.handler.codec.http.InterfaceHttpData]]">map</span><span class="delimiter">(</span><a href="#67137" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="decoder.scala.html#65433" title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">items</a><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#122578" title="(x: Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData])Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData]">toIterator</a> 
    <span class="delimiter">}</span>  

    <span class="keyword">val</span> <a href="#122594" title="(x: (scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]]))(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]])" class="delimiter">(</a><a href="#122592" title="scala.collection.immutable.Map[String,List[String]]" id="67111">params</a>, <a href="#122592" title="scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]]" id="67112">files</a><span class="delimiter">)</span> = <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#41039" title="[A, B, C](iter: Iterator[C])(f: ((Map[String,List[A]], Map[String,List[B]]), C) =&gt; (Map[String,List[A]], Map[String,List[B]]))(scala.collection.immutable.Map[String,List[A]], scala.collection.immutable.Map[String,List[B]])">genTuple</a><span title="(iter: Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData])(f: ((Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]]), org.jboss.netty.handler.codec.http.InterfaceHttpData) =&gt; (Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]]))(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]])" class="delimiter">[</span><span title="String">String</span>, <a href="#10730" title="unfiltered.netty.request.DiskFileWrapper">DiskFileWrapper</a>, <a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#10241" title="org.jboss.netty.handler.codec.http.InterfaceHttpData">IOInterfaceHttpData</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#67109" title="Iterator[org.jboss.netty.handler.codec.http.InterfaceHttpData]">items</a><span class="delimiter">)</span> <a href="#122592" title="(scala.collection.immutable.Map[String,List[String]], scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]]) @unchecked" class="delimiter">(</a><span class="delimiter">(</span><a title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])" id="67164">maps</a>, <a title="org.jboss.netty.handler.codec.http.InterfaceHttpData" id="67165">item</a><span class="delimiter">)</span> =&gt; <a href="#67165" title="org.jboss.netty.handler.codec.http.InterfaceHttpData">item</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#122583" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">file</a>: IOFileUpload =&gt;
          <a href="#122587" title="(x: (Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]]))(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])" class="delimiter">(</a><a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[String]]">_1</span>, <a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[unfiltered.netty.request.DiskFileWrapper]]">_2</span> <span title="(kv: (String, List[unfiltered.netty.request.DiskFileWrapper]))scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]]">+</span> <span class="delimiter">(</span><a href="#122584" title="org.jboss.netty.handler.codec.http.FileUpload">file</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="(x: String)ArrowAssoc[String]">getName</a> <span title="(y: List[unfiltered.netty.request.DiskFileWrapper])(String, List[unfiltered.netty.request.DiskFileWrapper])">-&gt;</span> <span class="delimiter">(</span><span title="unfiltered.netty.request.DiskFileWrapper" class="keyword">new</span> <a href="#10730" title="unfiltered.netty.request.DiskFileWrapper">DiskFileWrapper</a><span class="delimiter">(</span><a href="#122584" title="org.jboss.netty.handler.codec.http.FileUpload">file</a><span class="delimiter">)</span> <a href="#67252" title="(x: unfiltered.netty.request.DiskFileWrapper)List[unfiltered.netty.request.DiskFileWrapper]">::</a> <a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="(key: String)List[unfiltered.netty.request.DiskFileWrapper]">_2</span><span class="delimiter">(</span><a href="#122584" title="org.jboss.netty.handler.codec.http.FileUpload">file</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#122583" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">attr</a>: IOAttribute =&gt;
          <a href="#122587" title="(x: (Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]]))(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])" class="delimiter">(</a><a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[String]]">_1</span> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span><a href="#122585" title="org.jboss.netty.handler.codec.http.Attribute">attr</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="(x: String)ArrowAssoc[String]">getName</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <span class="delimiter">(</span><a href="#122585" title="org.jboss.netty.handler.codec.http.Attribute">attr</a>.<a href="../org/jboss/netty/handler/codec/http/Attribute.java.html#66347" title="()String">getValue</a> <a href="#67359" title="(x: String)List[String]">::</a> <a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="(key: String)List[String]">_1</span><span class="delimiter">(</span><a href="#122585" title="org.jboss.netty.handler.codec.http.Attribute">attr</a>.<a href="../org/jboss/netty/handler/codec/http/InterfaceHttpData.java.html#66135" title="()String">getName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#67164" title="(Map[String,List[String]], Map[String,List[unfiltered.netty.request.DiskFileWrapper]])">maps</a>.<span title="=&gt; Map[String,List[unfiltered.netty.request.DiskFileWrapper]]">_2</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#41330" title="(params: String =&gt; Seq[String], files: String =&gt; Seq[unfiltered.request.AbstractDiskFile])unfiltered.request.MultipartData[Seq[unfiltered.request.AbstractDiskFile]]">MultipartData</a><span class="delimiter">(</span><a href="#67111" title="scala.collection.immutable.Map[String,List[String]]">params</a>, <a href="#67112" title="scala.collection.immutable.Map[String,List[unfiltered.netty.request.DiskFileWrapper]]">files</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class StreamedFileWrapper extends AnyRef with unfiltered.request.AbstractStreamedFile with unfiltered.request.io.FileIO" id="10886">StreamedFileWrapper</a><a href="#10886" title="unfiltered.netty.request.StreamedFileWrapper" class="delimiter">(</a><a title="org.jboss.netty.handler.codec.http.FileUpload" id="66825">item</a>: <a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#10181" title="org.jboss.netty.handler.codec.http.FileUpload">IOFileUpload</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#7243" title="unfiltered.request.AbstractStreamedFile">AbstractStreamedFile</a>
  <span class="keyword">with</span> unfiltered.request.io.<a href="../../../../../uploads/unfiltered/request/request/io/files.scala.html#12438" title="unfiltered.request.io.FileIO">FileIO</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> java.io.<span class="delimiter">{</span>FileInputStream =&gt; JFileInputStream<span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="java.io.FileInputStream" id="66815">bstm</a> = <span title="(x$1: java.io.File)java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">JFileInputStream</span><span class="delimiter">(</span><a href="#66825" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66253" title="()java.io.File">getFile</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(out: java.io.File)Option[java.io.File]" id="66817">write</a><span class="delimiter">(</span><a title="java.io.File" id="67409">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>JFile<span class="delimiter">]</span> = <span title="util.control.Exception.Catch[Nothing]">allCatch</span>.<span title="(body: =&gt; java.io.File)Option[java.io.File]">opt</span> <span class="delimiter">{</span>
    <a href="#66818" title="(v1: java.io.InputStream =&gt; java.io.File)java.io.File">stream</a> <span class="delimiter">{</span> <a title="java.io.InputStream" id="67421">stm</a> =&gt;
      <a href="../../../../../uploads/unfiltered/request/request/io/files.scala.html#41011" title="(from: java.io.InputStream)(to: java.io.File)Unit">toFile</a><span class="delimiter">(</span><a href="#67421" title="java.io.InputStream">stm</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#67409" title="java.io.File">out</a><span class="delimiter">)</span>
      <a href="#67409" title="java.io.File">out</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T]=&gt; (java.io.InputStream =&gt; T) =&gt; T" id="66818">stream</a><span class="delimiter">[</span><a title="" id="66820">T</a><span class="delimiter">]</span>: <span class="delimiter">(</span>java.io.InputStream =&gt; T<span class="delimiter">)</span> =&gt; T =
    <a href="#10836" title="unfiltered.netty.request.MultiPartParams.type">MultiPartParams</a>.<a href="#66625" title="unfiltered.netty.request.MultiPartParams.Streamed.type">Streamed</a>.<a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#41057" title="[T](istm: java.io.InputStream)(f: java.io.InputStream =&gt; T)T">withStreamedFile</a><span title="(istm: java.io.InputStream)(f: java.io.InputStream =&gt; T)T" class="delimiter">[</span><a href="#66820" title="T">T</a><span class="delimiter">]</span><a href="#67428" title="java.io.InputStream =&gt; T" class="delimiter">(</a><a href="#66815" title="=&gt; java.io.FileInputStream">bstm</a><span class="delimiter">)</span>_
  <span class="keyword">val</span> <a title="String" id="66821">name</a> = <a href="#66825" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#66255" title="()String">getFilename</a>
  <span class="keyword">val</span> <a title="String" id="66823">contentType</a> = <a href="#66825" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#66258" title="()String">getContentType</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class DiskFileWrapper extends AnyRef with unfiltered.request.AbstractDiskFile" id="10730">DiskFileWrapper</a><a href="#10730" title="unfiltered.netty.request.DiskFileWrapper" class="delimiter">(</a><a title="org.jboss.netty.handler.codec.http.FileUpload" id="67253">item</a>: <a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#10181" title="org.jboss.netty.handler.codec.http.FileUpload">IOFileUpload</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="../../../../../uploads/unfiltered/request/request/uploads.scala.html#7240" title="unfiltered.request.AbstractDiskFile">AbstractDiskFile</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(out: java.io.File)Option[java.io.File]" id="67153">write</a><span class="delimiter">(</span><a title="java.io.File" id="67432">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>JFile<span class="delimiter">]</span> = <a href="#122607" title="Option[java.io.File]" id="122605" class="keyword">try</a> <span class="delimiter">{</span>
    <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66251" title="(dest: java.io.File)Boolean">renameTo</a><span class="delimiter">(</span><a href="#67432" title="java.io.File">out</a><span class="delimiter">)</span>
    <span title="(x: java.io.File)Some[java.io.File]">Some</span><span class="delimiter">(</span><a href="#67432" title="java.io.File">out</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../../../../util/unfiltered/util/control/NonFatal.scala.html#40969" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#122607" title="(x: Option[java.io.File])Option[java.io.File]">None</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="67154">inMemory</a> = <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66252" title="()Boolean">isInMemory</a>
  <span class="keyword">def</span> <a title="=&gt; Array[Byte]" id="67155">bytes</a> = <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66244" title="()Array[Byte]">get</a>
  <span class="keyword">def</span> <a title="=&gt; Long" id="67156">size</a> = <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66242" title="()Long">length</a>
  <span class="keyword">val</span> <a title="String" id="67157">name</a> = <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#66255" title="()String">getFilename</a>
  <span class="keyword">val</span> <a title="String" id="67159">contentType</a> = <a href="#67253" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#66258" title="()String">getContentType</a>
<span class="delimiter">}</span>

/** Wrapper for an uploaded file with write functionality disabled. */
<span class="keyword">class</span> <a title="class MemoryFileWrapper extends unfiltered.netty.request.StreamedFileWrapper" id="10739">MemoryFileWrapper</a><a href="#10739" title="unfiltered.netty.request.MemoryFileWrapper" class="delimiter">(</a><a title="org.jboss.netty.handler.codec.http.FileUpload" id="67039">item</a>: <a href="../org/jboss/netty/handler/codec/http/FileUpload.java.html#10181" title="org.jboss.netty.handler.codec.http.FileUpload">IOFileUpload</a><span class="delimiter">)</span>
<span class="keyword">extends</span> <a href="#10886" title="unfiltered.netty.request.StreamedFileWrapper">StreamedFileWrapper</a><span class="delimiter">(</span><a href="#67039" title="org.jboss.netty.handler.codec.http.FileUpload">item</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(out: java.io.File)None.type" id="67035">write</a><span class="delimiter">(</span><a title="java.io.File" id="67454">out</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span> = <span class="delimiter">{</span> 
    //error(&quot;File writing is not permitted&quot;)
    <span title="None.type">None</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="67036">isInMemory</a> = <a href="#67039" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66252" title="()Boolean">isInMemory</a>
  <span class="keyword">def</span> <a title="=&gt; Array[Byte]" id="67037">bytes</a> = <a href="#67039" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66244" title="()Array[Byte]">get</a>
  <span class="keyword">def</span> <a title="=&gt; Long" id="67038">size</a> = <a href="#67039" title="org.jboss.netty.handler.codec.http.FileUpload">item</a>.<a href="../org/jboss/netty/handler/codec/http/HttpData.java.html#66242" title="()Long">length</a>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>