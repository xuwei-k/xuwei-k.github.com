<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>netty-uploads/unfiltered/netty/uploads/request/decoder.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> unfiltered.netty.request

<span class="keyword">import</span> unfiltered.netty.ReceivedMessage
<span class="keyword">import</span> unfiltered.netty.RequestBinding
<span class="keyword">import</span> unfiltered.netty.ExceptionHandler
<span class="keyword">import</span> unfiltered.request.<span class="delimiter">{</span>POST, HttpRequest<span class="delimiter">}</span>
<span class="keyword">import</span> unfiltered.response.<span class="delimiter">{</span>ResponseFunction, Pass =&gt; UPass<span class="delimiter">}</span>

<span class="keyword">import</span> org.jboss.<span class="delimiter">{</span>netty =&gt; jnetty<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>HttpRequest =&gt; NHttpRequest,
                                  HttpChunk =&gt; NHttpChunk,
                                  HttpResponse=&gt;NHttpResponse,
                                  HttpMessage =&gt; NHttpMessage<span class="delimiter">}</span>

<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>HttpPostRequestDecoder =&gt; IOHttpPostRequestDecoder<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>DefaultHttpDataFactory =&gt; IODefaultHttpDataFactory<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>InterfaceHttpData =&gt; IOInterfaceHttpData<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>Attribute =&gt; IOAttribute<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<span class="delimiter">{</span>FileUpload =&gt; IOFileUpload<span class="delimiter">}</span>
<span class="keyword">import</span> jnetty.handler.codec.http.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#10236" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder.type">HttpPostRequestDecoder</a>.<span class="delimiter">{</span>NotEnoughDataDecoderException =&gt; IONotEnoughDataDecoderException<span class="delimiter">}</span>

<span class="keyword">import</span> jnetty.channel._

/** A PostDecoder wraps a HttpPostRequestDecoder. */
<span class="keyword">class</span> <a title="class PostDecoder extends AnyRef" id="10874">PostDecoder</a><a href="#10874" title="unfiltered.netty.request.PostDecoder" class="delimiter">(</a><a title="org.jboss.netty.handler.codec.http.HttpRequest" id="65906">req</a>: <span title="org.jboss.netty.handler.codec.http.HttpRequest">NHttpRequest</span>, <a title="Boolean" id="65908">useDisk</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConversions.type">JavaConversions</span>._

  /** Build a post decoder and parse the request. This only works with POST requests. */
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]" id="65430">decoder</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.handler.codec.http.DefaultHttpDataFactory" id="65439">factory</a> = <a href="../org/jboss/netty/handler/codec/http/DefaultHttpDataFactory.java.html#65446" title="(useDisk: Boolean)org.jboss.netty.handler.codec.http.DefaultHttpDataFactory" class="keyword">new</a> <a href="../org/jboss/netty/handler/codec/http/DefaultHttpDataFactory.java.html#10172" title="org.jboss.netty.handler.codec.http.DefaultHttpDataFactory">IODefaultHttpDataFactory</a><span class="delimiter">(</span><a href="#65908" title="Boolean">useDisk</a><span class="delimiter">)</span>
    <span title="(x: org.jboss.netty.handler.codec.http.HttpPostRequestDecoder)Some[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">Some</span><span class="delimiter">(</span><a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65488" title="(factory: org.jboss.netty.handler.codec.http.HttpDataFactory, request: org.jboss.netty.handler.codec.http.HttpRequest)org.jboss.netty.handler.codec.http.HttpPostRequestDecoder" class="keyword">new</a> <a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#10235" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder">IOHttpPostRequestDecoder</a><span class="delimiter">(</span><a href="#65439" title="org.jboss.netty.handler.codec.http.DefaultHttpDataFactory">factory</a>, <a href="#65906" title="org.jboss.netty.handler.codec.http.HttpRequest">req</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    /** Would it be more useful to throw errors here? */
    <span class="keyword">case</span> <a title="None.type" id="65526">e</a>: IOHttpPostRequestDecoder.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65395" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder.ErrorDataDecoderException">ErrorDataDecoderException</a> =&gt; <span title="None.type">None</span>
    /** GET method. Can't create a decoder. */
    <span class="keyword">case</span> <a title="None.type" id="65532">e</a>: IOHttpPostRequestDecoder.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65398" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder.IncompatibleDataDecoderException">IncompatibleDataDecoderException</a> =&gt; <span title="None.type">None</span>
  <span class="delimiter">}</span>

  /** Whether the request is multi-part */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="65432">isMultipart</a>: <span title="Boolean">Boolean</span> = <a href="#65430" title="=&gt; Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">decoder</a>.<span title="(f: org.jboss.netty.handler.codec.http.HttpPostRequestDecoder =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a href="#65912" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder">_</a>.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65491" title="()Boolean">isMultipart</a><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  /** Returns a collection containing all the parts of the parsed request */
  <span class="keyword">def</span> <a title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]" id="65433">items</a>: <span title="List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">List</span><span class="delimiter">[</span>IOInterfaceHttpData<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span>
      <a href="#65430" title="=&gt; Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">decoder</a>.<span title="(f: org.jboss.netty.handler.codec.http.HttpPostRequestDecoder =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])Option[List[org.jboss.netty.handler.codec.http.InterfaceHttpData]]">map</span><span class="delimiter">(</span><a href="#65923" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder">_</a>.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65492" title="(l: java.util.List[org.jboss.netty.handler.codec.http.InterfaceHttpData])scala.collection.mutable.Buffer[org.jboss.netty.handler.codec.http.InterfaceHttpData]">getBodyHttpDatas</a>.<span title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">toList</span><span class="delimiter">)</span>.<span title="(default: =&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData])List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">getOrElse</span><span class="delimiter">(</span>List<span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="66194">e</a>: <a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65389" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder.NotEnoughDataDecoderException">IONotEnoughDataDecoderException</a> =&gt;
        sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;Tried to decode a multipart request before it was fully received. Make sure there is either a HttpChunkAggregator in the handler pipeline e.g. _.chunked() or use a MultiPartDecoder plan.&quot;)" class="string">&quot;Tried to decode a multipart request before it was fully received. Make sure there is either a HttpChunkAggregator in the handler pipeline e.g. _.chunked() or use a MultiPartDecoder plan.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Returns a collection of uploaded files found in the parsed request */
  <span class="keyword">def</span> <a title="=&gt; List[org.jboss.netty.handler.codec.http.FileUpload]" id="65434">fileUploads</a> = <a href="#65433" title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">items</a> <span title="(pf: PartialFunction[org.jboss.netty.handler.codec.http.InterfaceHttpData,org.jboss.netty.handler.codec.http.FileUpload])(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.InterfaceHttpData],org.jboss.netty.handler.codec.http.FileUpload,List[org.jboss.netty.handler.codec.http.FileUpload]])List[org.jboss.netty.handler.codec.http.FileUpload]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[org.jboss.netty.handler.codec.http.InterfaceHttpData,org.jboss.netty.handler.codec.http.FileUpload] with Serializable" id="66263" class="delimiter">{</a> <span class="keyword">case</span> <a href="#122410" title="B1">file</a>: IOFileUpload =&gt; <a href="#122413" title="(x: B1)B1">file</a> <span class="delimiter">}</span>

  /** Returns a collection of all the parts excluding file uploads from the parsed request */
  <span class="keyword">def</span> <a title="=&gt; List[org.jboss.netty.handler.codec.http.Attribute]" id="65435">parameters</a> = <a href="#65433" title="=&gt; List[org.jboss.netty.handler.codec.http.InterfaceHttpData]">items</a> <span title="(pf: PartialFunction[org.jboss.netty.handler.codec.http.InterfaceHttpData,org.jboss.netty.handler.codec.http.Attribute])(implicit bf: scala.collection.generic.CanBuildFrom[List[org.jboss.netty.handler.codec.http.InterfaceHttpData],org.jboss.netty.handler.codec.http.Attribute,List[org.jboss.netty.handler.codec.http.Attribute]])List[org.jboss.netty.handler.codec.http.Attribute]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[org.jboss.netty.handler.codec.http.InterfaceHttpData,org.jboss.netty.handler.codec.http.Attribute] with Serializable" id="66351" class="delimiter">{</a> <span class="keyword">case</span> <a href="#122424" title="B1">param</a>: IOAttribute =&gt; <a href="#122427" title="(x: B1)B1">param</a> <span class="delimiter">}</span>

  /** Add a received HttpChunk to the decoder */
  <span class="keyword">def</span> <a title="(chunk: org.jboss.netty.handler.codec.http.HttpChunk)Option[Unit]" id="65436">offer</a><span class="delimiter">(</span><a title="org.jboss.netty.handler.codec.http.HttpChunk" id="65438">chunk</a>: <span title="org.jboss.netty.handler.codec.http.HttpChunk">NHttpChunk</span><span class="delimiter">)</span> = <a href="#65430" title="=&gt; Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">decoder</a>.<span title="(f: org.jboss.netty.handler.codec.http.HttpPostRequestDecoder =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#65552" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder">_</a>.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65495" title="(chunk: org.jboss.netty.handler.codec.http.HttpChunk)Unit">offer</a><span class="delimiter">(</span><a href="#65438" title="org.jboss.netty.handler.codec.http.HttpChunk">chunk</a><span class="delimiter">)</span><span class="delimiter">)</span>

  /** Clean all HttpDatas (on Disk) for the current request */
  <span class="keyword">def</span> <a title="=&gt; Option[Unit]" id="65437">cleanFiles</a> = <a href="#65430" title="=&gt; Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">decoder</a>.<span title="(f: org.jboss.netty.handler.codec.http.HttpPostRequestDecoder =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#65590" title="org.jboss.netty.handler.codec.http.HttpPostRequestDecoder">_</a>.<a href="../org/jboss/netty/handler/codec/http/HttpPostRequestDecoder.java.html#65507" title="()Unit">cleanFiles</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="unfiltered.netty.request.PostDecoder.type" id="10875">PostDecoder</a><a href="#10876" title="unfiltered.netty.request.PostDecoder.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(req: org.jboss.netty.handler.codec.http.HttpRequest, useDisk: Boolean)Option[unfiltered.netty.request.PostDecoder]" id="65368">apply</a><span class="delimiter">(</span><a title="org.jboss.netty.handler.codec.http.HttpRequest" id="65369">req</a>: <span title="org.jboss.netty.handler.codec.http.HttpRequest">NHttpRequest</span>, <a title="Boolean" id="65371">useDisk</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Option[unfiltered.netty.request.PostDecoder]">Option</span><span class="delimiter">[</span>PostDecoder<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="unfiltered.netty.request.PostDecoder" id="66408">postDecoder</a> = <span title="unfiltered.netty.request.PostDecoder" class="keyword">new</span> <a href="#10874" title="unfiltered.netty.request.PostDecoder">PostDecoder</a><span class="delimiter">(</span><a href="#65369" title="org.jboss.netty.handler.codec.http.HttpRequest">req</a>, <a href="#65371" title="Boolean">useDisk</a><span class="delimiter">)</span>
    <a href="#66408" title="unfiltered.netty.request.PostDecoder">postDecoder</a>.<a href="#65430" title="=&gt; Option[org.jboss.netty.handler.codec.http.HttpPostRequestDecoder]">decoder</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#122438" title="Option[unfiltered.netty.request.PostDecoder]" class="delimiter">(</a>dec<span class="delimiter">)</span> =&gt; <span title="(x: unfiltered.netty.request.PostDecoder)Some[unfiltered.netty.request.PostDecoder]">Some</span><a href="#122441" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]" class="delimiter">(</a><a href="#66408" title="unfiltered.netty.request.PostDecoder">postDecoder</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; <a href="#122441" title="(x: Option[unfiltered.netty.request.PostDecoder])Option[unfiltered.netty.request.PostDecoder]">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

/** Provides storage for state when attached to a ChannelHandlerContext */
<span title="AnyRef" class="keyword">private</span> <span class="delimiter">[</span>netty<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class MultiPartChannelState extends AnyRef with Product with Serializable" id="66499">MultiPartChannelState</a><a href="#66499" title="Product" class="delimiter">(</a>
  <a title="Boolean" id="65559">readingChunks</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>,
  <a title="Option[org.jboss.netty.handler.codec.http.HttpRequest]" id="65560">originalReq</a>: <span title="Option[org.jboss.netty.handler.codec.http.HttpRequest]">Option</span><span class="delimiter">[</span>NHttpRequest<span class="delimiter">]</span> = <span title="None.type">None</span>,
  <a title="Option[unfiltered.netty.request.PostDecoder]" id="65561">decoder</a>: <span title="Option[unfiltered.netty.request.PostDecoder]">Option</span><span class="delimiter">[</span>PostDecoder<span class="delimiter">]</span> = <span title="None.type">None</span>
<span class="delimiter">)</span>

<span class="keyword">object</span> <a title="unfiltered.netty.request.MultiPartPass.type" id="10845">MultiPartPass</a> <a href="#10846" title="unfiltered.netty.request.MultiPartPass.type" class="delimiter">{</a>
  /** A pass handler serves as a means to forward a request upstream for
   *  unhandled patterns and protocol messages */
  <span class="keyword">type</span> <a title="(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelEvent) =&gt; Unit" id="65146">PassHandler</a> = <span class="delimiter">(</span>ChannelHandlerContext, ChannelEvent<span class="delimiter">)</span> =&gt; Unit

  /** A default implementation of a PassHandler which sends the message upstream */
  <span class="keyword">val</span> <a title="(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelEvent) =&gt; Unit" id="65147">DefaultPassHandler</a> = <span class="delimiter">(</span><span class="delimiter">{</span> <span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65619">ctx</a>, <a title="org.jboss.netty.channel.ChannelEvent" id="65620">event</a><span class="delimiter">)</span> =&gt;
    <a href="#65620" title="org.jboss.netty.channel.ChannelEvent">event</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#122471" title="Unit">me</a>: MessageEvent =&gt; <a href="#65619" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>.<span title="(x$1: org.jboss.netty.channel.ChannelEvent)Unit">sendUpstream</span><a href="#122474" title="(x: Unit)Unit" class="delimiter">(</a><a href="#65620" title="org.jboss.netty.channel.ChannelEvent">event</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; <a href="#122474" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span> // we really only care about MessageEvents but need to support the more generic ChannelEvent
    <span class="delimiter">}</span>
   <span class="delimiter">}</span>: <span title="(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelEvent) =&gt; Unit">PassHandler</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** Enriches a netty plan with multipart decoding capabilities. */
<span title="AnyRef" class="keyword">trait</span> <a title="trait AbstractMultiPartDecoder extends AnyRef with unfiltered.netty.request.CleanUp" id="10715">AbstractMultiPartDecoder</a> <span title="Unit" class="keyword">extends</span> <a href="#10721" title="unfiltered.netty.request.CleanUp">CleanUp</a> <span class="delimiter">{</span>

  /** Whether the ChannelBuffer used in decoding is allowed to write to disk */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Boolean" id="65046">useDisk</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
  /** Called when there are no more chunks to process. Implementation differs between cycle and async plans */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit" id="65048">complete</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65156">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.MessageEvent" id="65157">e</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span>

  /** A pass handler that should be supplied when the plan is created. Default is to send upstream */
  <span class="keyword">def</span> <a title="=&gt; (org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelEvent) =&gt; Unit" id="65049">pass</a>: MultiPartPass.<span title="(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelEvent) =&gt; Unit">PassHandler</span>

  /** Determine whether the intent could handle the request (without executing it). If so execute @param body, otherwise pass */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent, binding: unfiltered.netty.RequestBinding)(body: =&gt; Unit)Unit" id="65050">handleOrPass</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65069">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.MessageEvent" id="65070">e</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span>, <a title="unfiltered.netty.RequestBinding" id="65071">binding</a>: <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="65072">body</a>: =&gt; Unit<span class="delimiter">)</span>

  /** Provides multipart request handling common to both cycle and async plans.
      Should be called by onMessageReceived. */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit" id="65051">upgrade</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65292">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.MessageEvent" id="65293">e</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    /** Maintain state as explained here:
    http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelHandlerContext.html */
    <span class="keyword">val</span> <a title="unfiltered.netty.request.MultiPartChannelState" id="65296">channelState</a> = <a href="#10737" title="unfiltered.netty.request.Helpers.type">Helpers</a>.<a href="#65162" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)unfiltered.netty.request.MultiPartChannelState">channelState</a><span class="delimiter">(</span><a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>

    <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a> <a href="#122505" title="()Object">getMessage</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#122501" title="Unit">request</a>: NHttpRequest =&gt;
        <span class="keyword">val</span> <a title="unfiltered.netty.ReceivedMessage" id="65298">msg</a> = <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#65204" title="(request: org.jboss.netty.handler.codec.http.HttpRequest, context: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.MessageEvent)unfiltered.netty.ReceivedMessage">ReceivedMessage</a><span class="delimiter">(</span><a href="#122502" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a>, <a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="unfiltered.netty.RequestBinding" id="65299">binding</a> = <span title="unfiltered.netty.RequestBinding" class="keyword">new</span> <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">(</span><a href="#65298" title="unfiltered.netty.ReceivedMessage">msg</a><span class="delimiter">)</span>
        <a href="#65299" title="unfiltered.netty.RequestBinding">binding</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          // Should match the initial multipart request
          <span class="keyword">case</span> <a href="../../../../../unfiltered/unfiltered/unfiltered/request/methods.scala.html#34957" title="(req: unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage])Option[unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage]]">POST</a><span class="delimiter">(</span><a href="uploads.scala.html#65314" title="(req: unfiltered.netty.RequestBinding)Option[unfiltered.netty.RequestBinding]">MultiPart</a><a href="#122480" title="=&gt; unfiltered.request.HttpRequest[unfiltered.netty.ReceivedMessage]" class="delimiter">(</a>_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            // Determine whether the request is destined for this plan's intent and if not, pass
            <a href="#65050" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent, binding: unfiltered.netty.RequestBinding)(body: =&gt; Unit)Unit">handleOrPass</a><span class="delimiter">(</span><a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a>, <a href="#65299" title="unfiltered.netty.RequestBinding">binding</a><span class="delimiter">)</span> <a href="#122486" title="(x: Unit)Unit" class="delimiter">{</a>
              // The request is destined for this intent, so start to handle it
              <a href="#65052" title="(request: org.jboss.netty.handler.codec.http.HttpRequest, channelState: unfiltered.netty.request.MultiPartChannelState, ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit">start</a><span class="delimiter">(</span><a href="#122502" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a>, <a href="#65296" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>, <a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          // The request is not valid for this plan so send sendUpstream
          <span class="keyword">case</span> _ =&gt; <a href="#65049" title="(v1: org.jboss.netty.channel.ChannelHandlerContext, v2: org.jboss.netty.channel.ChannelEvent)Unit">pass</a><a href="#122486" title="(x: Unit)Unit" class="delimiter">(</a><a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      // Should match subsequent chunks of the same request
      <span class="keyword">case</span> <a href="#122501" title="Unit">chunk</a>: NHttpChunk =&gt;
        <a href="#65296" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#122505" title="(x: Unit)Unit">originalReq</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          // Ensure that multipart handling was started for the request
          <span class="keyword">case</span> Some<a href="#122493" title="Unit" class="delimiter">(</a><a href="#122494" title="org.jboss.netty.handler.codec.http.HttpRequest" id="65404">request</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="unfiltered.netty.ReceivedMessage" id="65405">msg</a> = <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#65204" title="(request: org.jboss.netty.handler.codec.http.HttpRequest, context: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.MessageEvent)unfiltered.netty.ReceivedMessage">ReceivedMessage</a><span class="delimiter">(</span><a href="#65404" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a>, <a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="unfiltered.netty.RequestBinding" id="65406">binding</a> = <span title="unfiltered.netty.RequestBinding" class="keyword">new</span> <a href="../../../../../netty/unfiltered/netty/bindings.scala.html#9863" title="unfiltered.netty.RequestBinding">RequestBinding</a><span class="delimiter">(</span><a href="#65405" title="unfiltered.netty.ReceivedMessage">msg</a><span class="delimiter">)</span>
            // Determine whether the chunk is destined for this plan's intent and if not, pass
            <a href="#65050" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent, binding: unfiltered.netty.RequestBinding)(body: =&gt; Unit)Unit">handleOrPass</a><span class="delimiter">(</span><a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a>, <a href="#65406" title="unfiltered.netty.RequestBinding">binding</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              // The chunk is destined for this intent, so handle it
              <a href="#65053" title="(chunk: org.jboss.netty.handler.codec.http.HttpChunk, channelState: unfiltered.netty.request.MultiPartChannelState, ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit">continue</a><span class="delimiter">(</span><a href="#122503" title="org.jboss.netty.handler.codec.http.HttpChunk">chunk</a>, <a href="#65296" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>, <a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> _ =&gt; <a href="#65049" title="(v1: org.jboss.netty.channel.ChannelHandlerContext, v2: org.jboss.netty.channel.ChannelEvent)Unit">pass</a><a href="#122496" title="(x: Unit)Unit" class="delimiter">(</a><a href="#65292" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65293" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Sets up for handling a multipart request */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(request: org.jboss.netty.handler.codec.http.HttpRequest, channelState: unfiltered.netty.request.MultiPartChannelState, ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit" id="65052">start</a><span class="delimiter">(</span><a title="org.jboss.netty.handler.codec.http.HttpRequest" id="65360">request</a>: <span title="org.jboss.netty.handler.codec.http.HttpRequest">NHttpRequest</span>,
                    <a title="unfiltered.netty.request.MultiPartChannelState" id="65361">channelState</a>: <a href="#66499" title="unfiltered.netty.request.MultiPartChannelState">MultiPartChannelState</a>,
                    <a title="org.jboss.netty.channel.ChannelHandlerContext" id="65362">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>,
                    <a title="org.jboss.netty.channel.MessageEvent" id="65363">e</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#65361" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#65559" title="=&gt; Boolean">readingChunks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      // Initialise the decoder
      <span class="keyword">val</span> <a title="Option[unfiltered.netty.request.PostDecoder]" id="65366">decoder</a> = <a href="#65368" title="(req: org.jboss.netty.handler.codec.http.HttpRequest, useDisk: Boolean)Option[unfiltered.netty.request.PostDecoder]">PostDecoder</a><span class="delimiter">(</span><a href="#65360" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a>, <a href="#65046" title="=&gt; Boolean">useDisk</a><span class="delimiter">)</span>
      // Store the initial state
      <a href="#65362" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>.<span title="(x$1: Any)Unit">setAttachment</span><span class="delimiter">(</span><a href="#66499" title="(readingChunks: Boolean, originalReq: Option[org.jboss.netty.handler.codec.http.HttpRequest], decoder: Option[unfiltered.netty.request.PostDecoder])unfiltered.netty.request.MultiPartChannelState">MultiPartChannelState</a><span class="delimiter">(</span><a href="#65361" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#65559" title="=&gt; Boolean">readingChunks</a>, <span title="(x: org.jboss.netty.handler.codec.http.HttpRequest)Some[org.jboss.netty.handler.codec.http.HttpRequest]">Some</span><span class="delimiter">(</span><a href="#65360" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>, <a href="#65366" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#65360" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a>.<span title="()Boolean">isChunked</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        // Update the state to readingChunks = true
        <a href="#65362" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>.<span title="(x$1: Any)Unit">setAttachment</span><span class="delimiter">(</span><a href="#66499" title="(readingChunks: Boolean, originalReq: Option[org.jboss.netty.handler.codec.http.HttpRequest], decoder: Option[unfiltered.netty.request.PostDecoder])unfiltered.netty.request.MultiPartChannelState">MultiPartChannelState</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <span title="(x: org.jboss.netty.handler.codec.http.HttpRequest)Some[org.jboss.netty.handler.codec.http.HttpRequest]">Some</span><span class="delimiter">(</span><a href="#65360" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span>, <a href="#65366" title="Option[unfiltered.netty.request.PostDecoder]">decoder</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        // This is not a chunked request (could be an aggregated multipart request),
        // so we should have received it all. Behave like a regular netty plan.
        <a href="#65048" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit">complete</a><span class="delimiter">(</span><a href="#65362" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65363" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
        <a href="#65043" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Unit">cleanUp</a><span class="delimiter">(</span><a href="#65362" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      // Shouldn't get here
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;HttpRequest received while reading chunks: %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#65360" title="org.jboss.netty.handler.codec.http.HttpRequest">request</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Handles incoming chunks belonging to the original request */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(chunk: org.jboss.netty.handler.codec.http.HttpChunk, channelState: unfiltered.netty.request.MultiPartChannelState, ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit" id="65053">continue</a><span class="delimiter">(</span><a title="org.jboss.netty.handler.codec.http.HttpChunk" id="65413">chunk</a>: <span title="org.jboss.netty.handler.codec.http.HttpChunk">NHttpChunk</span>,
                       <a title="unfiltered.netty.request.MultiPartChannelState" id="65414">channelState</a>: <a href="#66499" title="unfiltered.netty.request.MultiPartChannelState">MultiPartChannelState</a>,
                       <a title="org.jboss.netty.channel.ChannelHandlerContext" id="65415">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>,
                       <a title="org.jboss.netty.channel.MessageEvent" id="65416">e</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    // Should be reading chunks here
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#65414" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#65559" title="=&gt; Boolean">readingChunks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      // Give the chunk to the decoder
      <a href="#65414" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#65561" title="=&gt; Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; Option[Unit])Option[Option[Unit]]">map</span><span class="delimiter">(</span><a href="#65423" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="#65436" title="(chunk: org.jboss.netty.handler.codec.http.HttpChunk)Option[Unit]">offer</a><span class="delimiter">(</span><a href="#65413" title="org.jboss.netty.handler.codec.http.HttpChunk">chunk</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#65413" title="org.jboss.netty.handler.codec.http.HttpChunk">chunk</a>.<span title="()Boolean">isLast</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        // This was the last chunk so we can complete
        <a href="#65415" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>.<span title="(x$1: Any)Unit">setAttachment</span><span class="delimiter">(</span><a href="#65414" title="unfiltered.netty.request.MultiPartChannelState">channelState</a>.<a href="#66499" title="(readingChunks: Boolean, originalReq: Option[org.jboss.netty.handler.codec.http.HttpRequest], decoder: Option[unfiltered.netty.request.PostDecoder])unfiltered.netty.request.MultiPartChannelState">copy</a><span class="delimiter">(</span>readingChunks=<span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#65048" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.MessageEvent)Unit">complete</a><span class="delimiter">(</span><a href="#65415" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#65416" title="org.jboss.netty.channel.MessageEvent">e</a><span class="delimiter">)</span>
        <a href="#65043" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Unit">cleanUp</a><span class="delimiter">(</span><a href="#65415" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      // It shouldn't be possible to get here
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;HttpChunk received when not expected.&quot;)" class="string">&quot;HttpChunk received when not expected.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="unfiltered.netty.request.Helpers.type" id="10737">Helpers</a> <a href="#10738" title="unfiltered.netty.request.Helpers.type" class="delimiter">{</a>
  /** Retrieve the channel state */
  <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)unfiltered.netty.request.MultiPartChannelState" id="65162">channelState</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65163">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span><span class="delimiter">)</span> = <a href="#65163" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a> <span title="()Object">getAttachment</span> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#122510" title="unfiltered.netty.request.MultiPartChannelState">s</a>: MultiPartChannelState =&gt; <a href="#122513" title="(x: unfiltered.netty.request.MultiPartChannelState)unfiltered.netty.request.MultiPartChannelState">s</a>
    <span class="keyword">case</span> _ =&gt; <a href="#66499" title="(readingChunks: Boolean, originalReq: Option[org.jboss.netty.handler.codec.http.HttpRequest], decoder: Option[unfiltered.netty.request.PostDecoder])unfiltered.netty.request.MultiPartChannelState">MultiPartChannelState</a><a href="#122513" title="(x: unfiltered.netty.request.MultiPartChannelState)unfiltered.netty.request.MultiPartChannelState" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait CleanUp extends AnyRef" id="10721">CleanUp</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#10737" title="unfiltered.netty.request.Helpers.type">Helpers</a>._

  /** Erase the channel state in case the context gets recycled */
  <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Unit" id="65043">cleanUp</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65381">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span><span class="delimiter">)</span> = <a href="#65381" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>.<span title="(x$1: Any)Unit">setAttachment</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  /** Erase any temporary data that may be on disk */
  <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Option[Option[Unit]]" id="65044">cleanFiles</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="65580">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span><span class="delimiter">)</span> = <a href="#65162" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)unfiltered.netty.request.MultiPartChannelState">channelState</a><span class="delimiter">(</span><a href="#65580" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>.<a href="#65561" title="=&gt; Option[unfiltered.netty.request.PostDecoder]">decoder</a>.<span title="(f: unfiltered.netty.request.PostDecoder =&gt; Option[Unit])Option[Option[Unit]]">map</span><span class="delimiter">(</span><a href="#65585" title="unfiltered.netty.request.PostDecoder">_</a>.<a href="#65437" title="=&gt; Option[Unit]">cleanFiles</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

/** Ensure any state cleanup is done when an exception is caught */
<span title="AnyRef" class="keyword">trait</span> <a title="trait TidyExceptionHandler extends AnyRef with unfiltered.netty.ExceptionHandler with unfiltered.netty.request.CleanUp" id="10889">TidyExceptionHandler</a> <span title="Unit" class="keyword">extends</span> <a href="../../../../../netty/unfiltered/netty/exceptions.scala.html#9773" title="unfiltered.netty.ExceptionHandler">ExceptionHandler</a> <span class="keyword">with</span> <a href="#10721" title="unfiltered.netty.request.CleanUp">CleanUp</a> <span class="delimiter">{</span> self: SimpleChannelUpstreamHandler =&gt;
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.ExceptionEvent)Unit" id="65056">exceptionCaught</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="66457">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ExceptionEvent" id="66458">e</a>: <span title="org.jboss.netty.channel.ExceptionEvent">ExceptionEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#65044" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Option[Option[Unit]]">cleanFiles</a><span class="delimiter">(</span><a href="#66457" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>
    <a href="#65043" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext)Unit">cleanUp</a><span class="delimiter">(</span><a href="#66457" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a><span class="delimiter">)</span>
    <a href="#10889" title="&lt;root&gt; extends unfiltered.netty.request.TidyExceptionHandler with org.jboss.netty.channel.SimpleChannelUpstreamHandler" class="keyword">super</a>.<a href="../../../../../netty/unfiltered/netty/exceptions.scala.html#58553" title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, e: org.jboss.netty.channel.ExceptionEvent)Unit">exceptionCaught</a><span class="delimiter">(</span><a href="#66457" title="org.jboss.netty.channel.ChannelHandlerContext">ctx</a>, <a href="#66458" title="org.jboss.netty.channel.ExceptionEvent">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>