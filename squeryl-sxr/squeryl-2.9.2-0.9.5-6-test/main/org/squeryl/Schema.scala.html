<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>main/org/squeryl/Schema.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */</span>
<span class="keyword">package</span> org.squeryl

<span class="keyword">import</span> dsl._
<span class="keyword">import</span> ast._
<span class="keyword">import</span> internals._
<span class="keyword">import</span> reflect.<span class="delimiter">{</span>Manifest<span class="delimiter">}</span>
<span class="keyword">import</span> java.sql.SQLException
<span class="keyword">import</span> java.io.PrintWriter
<span class="keyword">import</span> collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, ArrayBuffer<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Schema extends java.lang.Object with ScalaObject" id="9839">Schema</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.Schema" id="14312">thisSchema</a> = <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>

  <span class="comment">/**
   * Contains all Table[_]s in this shema, and also all ManyToManyRelation[_,_,_]s (since they are also Table[_]s
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" id="14313">_tables</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">ArrayBuffer</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> 
  
  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.Table[_]]" id="14315">tables</a>: <span title="Seq[org.squeryl.Table[_]]">Seq</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#14313" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="=&gt; Seq[org.squeryl.Table[_]]">toSeq</span>
  
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]" id="14316">_tableTypes</a> = <span title="()scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">HashMap</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" id="14318">_oneToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">ArrayBuffer</span><span class="delimiter">[</span>OneToManyRelation<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" id="14320">_manyToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">ArrayBuffer</span><span class="delimiter">[</span>ManyToManyRelation<span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" id="14322">_columnGroupAttributeAssignments</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">ArrayBuffer</span><span class="delimiter">[</span>ColumnGroupAttributeAssignment<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[String]" id="14324">_namingScope</a> = <span title="()scala.collection.mutable.HashSet[String]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[String]">HashSet</span><span class="delimiter">[</span>String<span class="delimiter">]</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.OneToManyRelation[_, _])Unit" id="14326">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="34638">r</a>: <a href="dsl/ManyToMany.scala.html#10156" title="org.squeryl.dsl.OneToManyRelation[_, _]">OneToManyRelation</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#14318" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">_oneToManyRelations</a>.<span title="(elems: org.squeryl.dsl.OneToManyRelation[_, _]*)Unit">append</span><span class="delimiter">(</span><a href="#34638" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.ManyToManyRelation[_, _, _])Unit" id="14327">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="34653">r</a>: <a href="dsl/ManyToMany.scala.html#10163" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">ManyToManyRelation</a><span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#14320" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">_manyToManyRelations</a>.<span title="(elems: org.squeryl.dsl.ManyToManyRelation[_, _, _]*)Unit">append</span><span class="delimiter">(</span><a href="#34653" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.DatabaseAdapter" id="14328">_dbAdapter</a> = <a href="Session.scala.html#9848" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#34680" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#34691" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

  <span class="comment">/**
   *  @returns a tuple of (Table[_], Table[_], ForeignKeyDeclaration) where
   *  ._1 is the foreign key table,
   *  ._2 is the primary key table
   *  ._3 is the ForeignKeyDeclaration between _1 and _2
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="14329">_activeForeignKeySpecs</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="34820">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, ForeignKeyDeclaration<span class="delimiter">)</span><span class="delimiter">]</span>

    <span class="keyword">for</span><span class="delimiter">(</span> <a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="34845">r</a> &lt;- <a href="#14318" title="(f: org.squeryl.dsl.OneToManyRelation[_, _] =&gt; Unit)Unit">_oneToManyRelations</a> <span class="keyword">if</span> <a href="#34845" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34834" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#14088" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
      <a href="#34820" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$6], _2: org.squeryl.Table[_$5], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$6], org.squeryl.Table[_$5], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#34845" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34832" title="(=&gt; org.squeryl.Table[_$6]) forSome { type _$6 }">rightTable</a>, <a href="#34845" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34831" title="(=&gt; org.squeryl.Table[_$5]) forSome { type _$5 }">leftTable</a>, <a href="#34845" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34834" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="34907">r</a> &lt;- <a href="#14320" title="(f: org.squeryl.dsl.ManyToManyRelation[_, _, _] =&gt; Unit)Unit">_manyToManyRelations</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34911" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#14088" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#34820" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$7], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$7], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34910" title="(=&gt; org.squeryl.Table[_$9]) forSome { type _$9 }">thisTable</a>, <a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34831" title="(=&gt; org.squeryl.Table[_$7]) forSome { type _$7 }">leftTable</a> , <a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34911" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34912" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#14088" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#34820" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$8], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$8], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34910" title="(=&gt; org.squeryl.Table[_$9]) forSome { type _$9 }">thisTable</a>, <a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34832" title="(=&gt; org.squeryl.Table[_$8]) forSome { type _$8 }">rightTable</a>, <a href="#34907" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#34912" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#34820" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="[A](a: A)Iterable[org.squeryl.Table[A]]" id="14330">findTablesFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14332">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="34959">a</a>: <a href="#14332" title="A">A</a><span class="delimiter">)</span>: <span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Class[_ &lt;: AnyRef]" id="34962">c</a> = <a href="#34959" title="A">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()java.lang.Class[_]">getClass</span>
    <a href="#14313" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a href="#34970" title="org.squeryl.Table[_]">_</a>.<a href="View.scala.html#20455" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#34974" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#34962" title="java.lang.Class[_ &lt;: AnyRef]">c</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iterable[org.squeryl.Table[A]]" class="delimiter">[</span><span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[A](c: Class[A])Traversable[org.squeryl.Table[_]]" id="14333">findAllTablesFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14335">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[A]" id="35021">c</a>: <span title="Class[A]">Class</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#14313" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="35025">t</a> =&gt; <a href="#35021" title="Class[A]">c</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#35025" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#20455" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#34974" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Traversable[org.squeryl.Table[_]]" class="delimiter">[</span><span title="Traversable[org.squeryl.Table[_]]">Traversable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>


  <span class="keyword">object</span> <a title="object Schema.this.NamingConventionTransforms" id="14336">NamingConventionTransforms</a> <span title="ScalaObject" class="delimiter">{</span>
    
    @deprecated<span class="delimiter">(</span><span class="string">&quot;use snakify() instead as of 0.9.5beta&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(name: String)String" id="35032">camelCase2underScore</a><span class="delimiter">(</span><a title="String" id="35035">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#35035" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">name</a>.<span title="=&gt; List[Char]">toList</span>.<span title="(f: Char =&gt; Any)(implicit bf: scala.collection.generic.CanBuildFrom[List[Char],Any,List[Any]])List[Any]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Any,List[Any]]" class="delimiter">(</span><a title="Char" id="35671">c</a> =&gt; <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#35671" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">c</a>.<span title="=&gt; Boolean">isUpper</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#35671" title="Char">c</a> <span class="keyword">else</span> <a href="#35671" title="Char">c</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
      
    <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="35033">snakify</a><span class="delimiter">(</span><a title="String" id="37876">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#37876" title="String">name</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;^([^A-Za-z_])&quot;)" class="string">&quot;^([^A-Za-z_])&quot;</span>, <span title="java.lang.String(&quot;_$1&quot;)" class="string">&quot;_$1&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;([A-Z]+)([A-Z][a-z])&quot;)" class="string">&quot;([A-Z]+)([A-Z][a-z])&quot;</span>, <span title="java.lang.String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;([a-z0-9])([A-Z])&quot;)" class="string">&quot;([a-z0-9])([A-Z])&quot;</span>, <span title="java.lang.String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="()java.lang.String">toLowerCase</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(propertyName: String)String" id="14338">columnNameFromPropertyName</a><span class="delimiter">(</span><a title="String" id="38126">propertyName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#38126" title="String">propertyName</a>

  <span class="keyword">def</span> <a title="(tableName: String)String" id="14339">tableNameFromClassName</a><span class="delimiter">(</span><a title="String" id="38129">tableName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#38129" title="String">tableName</a>

  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="14340">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span>

  <span class="comment">/**
   * Prints the schema to standard output, it is simply : schema.printDdl(println(_))
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="14341">printDdl</a>: <span title="Unit">Unit</span> = <a href="#14343" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#38318" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(pw: java.io.PrintWriter)Unit" id="14342">printDdl</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="38142">pw</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14343" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><a href="#38142" title="java.io.PrintWriter">pw</a>.<span title="(x$1: java.lang.String)Unit">println</span><span class="delimiter">(</span><a href="#38326" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @arg statementHandler is a closure that receives every declaration in the schema.
   */</span>
  <span class="keyword">def</span> <a title="(statementHandler: String =&gt; Unit)Unit" id="14343">printDdl</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="38140">statementHandler</a>: String =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- table declarations :&quot;)" class="string">&quot;-- table declarations :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="38357">t</a> &lt;- <a href="#14313" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="38358">sw</a> = <span title="org.squeryl.internals.StatementWriter" class="keyword">new</span> <a href="internals/StatementWriter.scala.html#10817" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34748" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#38357" title="org.squeryl.Table[_]">t</a>, <a href="#38358" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#38358" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#38377" title="=&gt; java.lang.String">statement</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34774" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#38357" title="org.squeryl.Table[_]">t</a>, <span title="(x: String =&gt; Unit)Some[String =&gt; Unit]">Some</span><span class="delimiter">(</span><a href="#38140" title="String =&gt; Unit">statementHandler</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="List[String]" id="38359">indexDecl</a> = <a href="#14346" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span class="delimiter">(</span><a href="#38357" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38359" title="List[String]">indexDecl</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
        <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- indexes on &quot;)" class="string">&quot;-- indexes on &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#38357" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#20452" title="=&gt; java.lang.String">prefixedName</a><span class="delimiter">)</span>

      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="46876">i</a> &lt;- <a href="#38359" title="(f: String =&gt; Unit)Unit">indexDecl</a><span class="delimiter">)</span>
        <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#46876" title="String">i</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[java.lang.String]" id="38331">constraints</a> = <a href="#14353" title="=&gt; scala.collection.mutable.ArrayBuffer[java.lang.String]">_foreignKeyConstraints</a>.<span title="=&gt; List[java.lang.String]">toList</span>
    
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38331" title="List[java.lang.String]">constraints</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- foreign key constraints :&quot;)" class="string">&quot;-- foreign key constraints :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.String" id="47095">fkc</a> &lt;- <a href="#38331" title="(f: java.lang.String =&gt; Unit)Unit">constraints</a><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#47095" title="java.lang.String">fkc</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="38332">compositePKs</a> = <a href="#14356" title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">_allCompositePrimaryKeys</a>.<span title="=&gt; List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38332" title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">compositePKs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- composite key indexes :&quot;)" class="string">&quot;-- composite key indexes :&quot;</span><span class="delimiter">)</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="47220">cpk</a> &lt;- <a href="#38332" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Unit)Unit">compositePKs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="47221">createConstraintStmt</a> = <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34803" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])java.lang.String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#47220" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#47220" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#47221" title="java.lang.String">createConstraintStmt</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[String]" id="38333">columnGroupIndexes</a> = <a href="#14347" title="=&gt; Seq[String]">_writeColumnGroupAttributeAssignments</a>.<span title="=&gt; List[String]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38333" title="List[String]">columnGroupIndexes</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- column group indexes :&quot;)" class="string">&quot;-- column group indexes :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="47433">decl</a> &lt;- <a href="#38333" title="(f: String =&gt; Unit)Unit">columnGroupIndexes</a><span class="delimiter">)</span>
      <a href="#38140" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#47433" title="String">decl</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This will drop all tables and related sequences in the schema... it's a
   * dangerous operation, typically this is only useful for development
   * database instances, the method is protected in order to make it a little
   * less 'accessible'
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="14344">drop</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34800" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#14350" title="=&gt; Unit">_dropForeignKeyConstraints</a>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="47437">s</a> = <a href="Session.scala.html#9848" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#34680" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#34689" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="47438">con</a> = <a href="Session.scala.html#9848" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#34680" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#34689" title="=&gt; java.sql.Connection">connection</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="48181">t</a> &lt;- <a href="#14313" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34802" title="(t: org.squeryl.Table[_])Unit">dropTable</a><span class="delimiter">(</span><a href="#48181" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34775" title="(t: org.squeryl.Table[_])Unit">postDropTable</a><span class="delimiter">(</span><a href="#48181" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>  

  <span class="keyword">def</span> <a title="=&gt; Unit" id="14345">create</a> = <span class="delimiter">{</span>
    <a href="#14354" title="=&gt; Unit">_createTables</a>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34800" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#14351" title="=&gt; Unit">_declareForeignKeyConstraints</a>

    <a href="#14355" title="=&gt; Unit">_createConstraintsOfCompositePKs</a>

    <a href="#14349" title="=&gt; Unit">createColumnGroupConstraintsAndIndexes</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])List[String]" id="14346">_indexDeclarationsFor</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="46684">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[Option[String]]" id="46687">d0</a> =
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="46706">fmd</a> &lt;- <a href="#46684" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#20455" title="(=&gt; org.squeryl.internals.PosoMetaData[_$18]) forSome { type _$18 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#34988" title="(f: org.squeryl.internals.FieldMetaData =&gt; Option[String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.squeryl.internals.FieldMetaData],Option[String],Iterable[Option[String]]])Iterable[Option[String]]">fieldsMetaData</a><span class="delimiter">)</span>
        <span class="keyword">yield</span> <a href="#14348" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#46706" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="internals/FieldMetaData.scala.html#46124" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="=&gt; Seq[org.squeryl.internals.ColumnAttribute]">toSeq</span>, <span title="(elems: org.squeryl.internals.FieldMetaData*)Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">(</span><a href="#46706" title="org.squeryl.internals.FieldMetaData">fmd</a><span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span>

    <a href="#46687" title="Iterable[Option[String]]">d0</a>.<span title="(p: Option[String] =&gt; Boolean)Iterable[Option[String]]">filter</span><span class="delimiter">(</span><a href="#46759" title="Option[String]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>.<span title="(f: Option[String] =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Option[String]],String,Iterable[String]])Iterable[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,String,Iterable[String]]" class="delimiter">(</span><a href="#46787" title="Option[String]">_</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
  <span class="delimiter">}</span>
  

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Seq[String]" id="14347">_writeColumnGroupAttributeAssignments</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="48451">cgaa</a> &lt;- <a href="#14322" title="(f: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment],String,Seq[String]])Seq[String]">_columnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <span class="keyword">yield</span> <a href="#14348" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#48451" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#48470" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>, <a href="#48451" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#48473" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">columns</a>, <a href="#48451" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#48475" title="=&gt; Option[String]">name</a><span class="delimiter">)</span>.
        <span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span>org.squeryl.internals.<a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30502" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;)" class="string">&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]" id="14348">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a title="Seq[org.squeryl.internals.ColumnAttribute]" id="46707">columnAttributes</a>: <span title="Seq[org.squeryl.internals.ColumnAttribute]">Seq</span><span class="delimiter">[</span>ColumnAttribute<span class="delimiter">]</span>, <a title="Seq[org.squeryl.internals.FieldMetaData]" id="46708">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span>, <a title="Option[String]" id="46709">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="48868">unique</a> = <a href="#46707" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#48875" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#10689" title="org.squeryl.internals.Unique">Unique</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="48869">indexed</a> = <a href="#46707" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#48878" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#10695" title="org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">]</span><span class="delimiter">)</span>
  
    <span title="(_1: Option[org.squeryl.internals.ColumnAttribute], _2: Option[org.squeryl.internals.ColumnAttribute])(Option[org.squeryl.internals.ColumnAttribute], Option[org.squeryl.internals.ColumnAttribute])" class="delimiter">(</span><a href="#48868" title="Option[org.squeryl.internals.ColumnAttribute]">unique</a>, <a href="#48869" title="Option[org.squeryl.internals.ColumnAttribute]">indexed</a><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type" class="delimiter">(</span><span title="object None">None</span>,    <span title="object None">None</span><span class="delimiter">)</span>                   =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span>Some<span class="delimiter">(</span>_<span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span>                   =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34807" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#46708" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <span title="object None">None</span>,    <a href="#46709" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span><span title="object None">None</span>,    Some<span class="delimiter">(</span>Indexed<span class="delimiter">(</span><a title="Option[String]" id="49149">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34807" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#46708" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#49149" title="Option[String]">idxName</a>, <a href="#46709" title="Option[String]">name</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span>Some<span class="delimiter">(</span>_<span class="delimiter">)</span>, Some<span class="delimiter">(</span>Indexed<span class="delimiter">(</span><a title="Option[String]" id="49157">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34807" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#46708" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#49157" title="Option[String]">idxName</a>, <a href="#46709" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Unit" id="14349">createColumnGroupConstraintsAndIndexes</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="48423">statement</a> &lt;- <a href="#14347" title="(f: String =&gt; Boolean)Unit">_writeColumnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <a href="#14352" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#48423" title="String">statement</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="14350">_dropForeignKeyConstraints</a> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="47445">cs</a> = <a href="Session.scala.html#9848" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#34680" title="=&gt; org.squeryl.Session">currentSession</a>
    <span class="keyword">val</span> <a title="org.squeryl.internals.DatabaseAdapter" id="47446">dba</a> = <a href="#47445" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#34691" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="47471">fk</a> &lt;- <a href="#14329" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; Unit)Unit">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.sql.Statement" id="47472">s</a> = <a href="#47445" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#34689" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
      <a href="#47446" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#34798" title="(foreignKeyTable: org.squeryl.Table[_], fkName: String, session: org.squeryl.Session)Unit">dropForeignKeyStatement</a><span class="delimiter">(</span><a href="#47471" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#47446" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#34793" title="(foreignKeyTable: org.squeryl.Table[_], idWithinSchema: Int)java.lang.String">foreignKeyConstraintName</a><span class="delimiter">(</span><a href="#47471" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#47471" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>.<a href="KeyedEntity.scala.html#14078" title="=&gt; Int">idWithinSchema</a><span class="delimiter">)</span>, <a href="#47445" title="org.squeryl.Session">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="14351">_declareForeignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.String" id="48360">fk</a> &lt;- <a href="#14353" title="(f: java.lang.String =&gt; Boolean)Unit">_foreignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#14352" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#48360" title="java.lang.String">fk</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(statement: String)Boolean" id="14352">_executeDdl</a><span class="delimiter">(</span><a title="String" id="48269">statement</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="48272">cs</a> = <a href="Session.scala.html#9848" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#34680" title="=&gt; org.squeryl.Session">currentSession</a>
    <a href="#48272" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#34704" title="(s: String)Unit">log</a><span class="delimiter">(</span><a href="#48269" title="String">statement</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="48273">s</a> = <a href="#48272" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#34689" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#48273" title="java.sql.Statement">s</a>.<span title="(x$1: java.lang.String)Boolean">execute</span><span class="delimiter">(</span><a href="#48269" title="String">statement</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="48290">e</a>:<span title="java.sql.SQLException">SQLException</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;error executing &quot;)" class="string">&quot;error executing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#48269" title="String">statement</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#48290" title="java.sql.SQLException">e</a>, <a href="#48290" title="java.sql.SQLException">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#48273" title="java.sql.Statement">s</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[java.lang.String]" id="14353">_foreignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="46919">fk</a> &lt;- <a href="#14329" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)],java.lang.String,scala.collection.mutable.ArrayBuffer[java.lang.String]])scala.collection.mutable.ArrayBuffer[java.lang.String]">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="46920">fkDecl</a> = <a href="#46919" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>

      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34795" title="(foreignKeyTable: org.squeryl.Table[_], foreignKeyColumnName: String, primaryKeyTable: org.squeryl.Table[_], primaryKeyColumnName: String, referentialAction1: Option[org.squeryl.ReferentialAction], referentialAction2: Option[org.squeryl.ReferentialAction], fkId: Int)java.lang.String">writeForeignKeyDeclaration</a><span class="delimiter">(</span>
         <a href="#46919" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#46920" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#14080" title="=&gt; String">foreignKeyColumnName</a>,
         <a href="#46919" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_2</span>, <a href="#46920" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#14082" title="=&gt; String">referencedPrimaryKey</a>,
         <a href="#46920" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#14089" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction1</a>,
         <a href="#46920" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#14090" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction2</a>,
         <a href="#46920" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#14078" title="=&gt; Int">idWithinSchema</a>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="14354">_createTables</a> = <span class="delimiter">{</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="48257">t</a> &lt;- <a href="#14313" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="48258">sw</a> = <a href="internals/StatementWriter.scala.html#38368" title="(databaseAdapter: org.squeryl.internals.DatabaseAdapter)org.squeryl.internals.StatementWriter" class="keyword">new</a> <a href="internals/StatementWriter.scala.html#10817" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34748" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#48257" title="org.squeryl.Table[_]">t</a>, <a href="#48258" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#14352" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#48258" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#38377" title="=&gt; java.lang.String">statement</a><span class="delimiter">)</span>
      <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34774" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#48257" title="org.squeryl.Table[_]">t</a>, <span title="object None">None</span><span class="delimiter">)</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="48330">indexDecl</a> &lt;- <a href="#14346" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span title="(f: String =&gt; Boolean)Unit" class="delimiter">(</span><a href="#48257" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#14352" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#48330" title="String">indexDecl</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="14355">_createConstraintsOfCompositePKs</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="48389">cpk</a> &lt;- <a href="#14356" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Boolean)Unit">_allCompositePrimaryKeys</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="48390">createConstraintStmt</a> = <a href="#14328" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#34803" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])java.lang.String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#48389" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#48389" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#14352" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#48390" title="java.lang.String">createConstraintStmt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>  

  <span class="comment">/**
   * returns an Iterable of (Table[_],Iterable[FieldMetaData]), the list of
   * all tables whose PK is a composite, with the columns that are part of the PK : Iterable[FieldMetaData] 
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="14356">_allCompositePrimaryKeys</a> = <span class="delimiter">{</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="47100">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>,Iterable<span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="47119">t</a> &lt;- <a href="#14313" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a>
        <span class="keyword">if</span> classOf<span title="java.lang.Class[org.squeryl.KeyedEntity[_]](classOf[org.squeryl.KeyedEntity])" class="delimiter">[</span>KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#47119" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#20455" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#34974" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      <a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30497" title="(q: org.squeryl.Queryable[org.squeryl.KeyedEntity[_]], visitor: org.squeryl.KeyedEntity[_] =&gt; Unit)Unit">mapSampleObject</a><span class="delimiter">(</span>
        <a href="#47119" title="org.squeryl.Table[_]">t</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[org.squeryl.KeyedEntity[_]]" class="delimiter">[</span><a href="Table.scala.html#9866" title="org.squeryl.Table[org.squeryl.KeyedEntity[_]]">Table</a><span class="delimiter">[</span>KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>,
        <span class="delimiter">(</span>ke:<a href="KeyedEntity.scala.html#9788" title="org.squeryl.KeyedEntity[_]">KeyedEntity</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Any" id="47136">id</a> = <a href="#47132" title="org.squeryl.KeyedEntity[_]">ke</a>.<a href="KeyedEntity.scala.html#11285" title="=&gt; Any">id</a>
          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#47136" title="Any">id</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#10030" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Seq[org.squeryl.internals.FieldMetaData]" id="47137">compositeCols</a> = <a href="#47136" title="Any">id</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.CompositeKey" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#10030" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span>.<a href="dsl/CompositeKey.scala.html#18541" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">_fields</a>
            <a href="#47100" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>.<span title="(elems: (org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$1], _2: Seq[org.squeryl.internals.FieldMetaData])(org.squeryl.Table[_$1], Seq[org.squeryl.internals.FieldMetaData])" class="delimiter">(</span><a href="#47119" title="org.squeryl.Table[_]">t</a>, <a href="#47137" title="Seq[org.squeryl.internals.FieldMetaData]">compositeCols</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#47100" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Use this method to override the DatabaseAdapter's default column type for the given field
   * (FieldMetaData), returning None means that no override will take place.
   *
   * There are two levels at which db column type can be overriden, in order of precedence :
   *
   *   on(professors)(p =&gt; declare(
   *      s.yearlySalary is(dbType(&quot;real&quot;))
   *    ))
   *
   *  overrides (has precedence over) :
   *
   *  MySchema extends Schema {
   *    ...
   *    override def columnTypeFor(fieldMetaData: FieldMetaData, owner: Table[_]) =
   *      if(fieldMetaData.wrappedFieldType.isInstanceOf[Int)
   *        Some(&quot;number&quot;)
   *      else
   *        None
   *  }
   *
   */</span>
  <span class="keyword">def</span> <a title="(fieldMetaData: org.squeryl.internals.FieldMetaData, owner: org.squeryl.Table[_])Option[String]" id="14357">columnTypeFor</a><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="49161">fieldMetaData</a>: <a href="internals/FieldMetaData.scala.html#10742" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>, <a title="org.squeryl.Table[_]" id="49162">owner</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span>
  
  <span class="keyword">def</span> <a title="(c: Class[_])String" id="14358">tableNameFromClass</a><span class="delimiter">(</span><a title="Class[_]" id="49167">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>:<span title="String">String</span> =
    <a href="#49167" title="Class[_]">c</a>.<span title="()java.lang.String">getSimpleName</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="14359">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14361">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="49172">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#9866" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#14362" title="(name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span class="delimiter">(</span><a href="#14358" title="(c: Class[_])String">tableNameFromClass</a><span class="delimiter">(</span><a href="#49172" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#49172" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="14362">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14364">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="49186">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="49187">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#9866" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="49204">typeT</a> = <a href="#49187" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="49205">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#9866" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#49186" title="String">name</a>, <a href="#49204" title="Class[T]">typeT</a>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <span title="object None">None</span><span class="delimiter">)</span>
    <a href="#14368" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#49205" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#14369" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#49204" title="Class[T]">typeT</a>, <a href="#49205" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#49205" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String, prefix: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="14365">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14367">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="49179">name</a>: <span title="String">String</span>, <a title="String" id="49180">prefix</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="49181">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#9866" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="49263">typeT</a> = <a href="#49181" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="49264">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#9866" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#49179" title="String">name</a>, <a href="#49263" title="Class[T]">typeT</a>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#49180" title="String">prefix</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#14368" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#49264" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#14369" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#49263" title="Class[T]">typeT</a>, <a href="#49264" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#49264" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])Unit" id="14368">_addTable</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="49220">t</a>:<a href="Table.scala.html#9866" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#14313" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(elems: org.squeryl.Table[_]*)Unit">append</span><span class="delimiter">(</span><a href="#49220" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]" id="14369">_addTableType</a><span class="delimiter">(</span><a title="Class[_]" id="49229">typeT</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.squeryl.Table[_]" id="49230">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#14316" title="=&gt; scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(kv: (java.lang.Class[_], org.squeryl.Table[_]))Schema.this._tableTypes.type">+=</span> <span class="delimiter">(</span><span title="(_1: Class[_$26], _2: org.squeryl.Table[_$27])(Class[_$26], org.squeryl.Table[_$27])" class="delimiter">(</span><a href="#49229" title="Class[_]">typeT</a>, <a href="#49230" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]" id="14370">view</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14372">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="49282">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="View.scala.html#9874" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#14373" title="(name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]">view</a><span class="delimiter">(</span><a href="#14358" title="(c: Class[_])String">tableNameFromClass</a><span class="delimiter">(</span><a href="#49282" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#49282" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]" id="14373">view</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14375">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="49289">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="49290">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="View.scala.html#9874" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="View.scala.html#20447" title="(n: String)(implicit manifestT: Manifest[T])org.squeryl.View[T]" class="keyword">new</a> <a href="View.scala.html#9874" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#49289" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#49290" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>

  
  <span class="keyword">class</span> <a title="class ReferentialEvent extends java.lang.Object with ScalaObject" id="14376">ReferentialEvent</a><a href="#14376" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="49330">eventName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="49324">restrict</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#14377" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;restrict&quot;)" class="string">&quot;restrict&quot;</span>, <a href="#14376" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="49325">cascade</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#14377" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cascade&quot;)" class="string">&quot;cascade&quot;</span>, <a href="#14376" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="49326">noAction</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#14377" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;no action&quot;)" class="string">&quot;no action&quot;</span>, <a href="#14376" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="49327">setNull</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#14377" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;set null&quot;)" class="string">&quot;set null&quot;</span>, <a href="#14376" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ReferentialActionImpl extends java.lang.Object with org.squeryl.ReferentialAction with ScalaObject" id="14377">ReferentialActionImpl</a><a href="#14377" title="ScalaObject" class="delimiter">(</a><a title="String" id="49341">token</a>: <span title="String">String</span>, <a title="Schema.this.ReferentialEvent" id="49342">ev</a>: <a href="#14376" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="KeyedEntity.scala.html#9797" title="org.squeryl.ReferentialAction">ReferentialAction</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="49339">event</a> = <a href="#49342" title="Schema.this.ReferentialEvent">ev</a>.<a href="#49330" title="=&gt; String">eventName</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="49340">action</a> = <a href="#49341" title="String">token</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="14378">onUpdate</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#14376" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="java.lang.String(&quot;update&quot;)" class="string">&quot;update&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="14379">onDelete</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#14376" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="java.lang.String(&quot;delete&quot;)" class="string">&quot;delete&quot;</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="14381">_fkIdGen</a> = <span title="Int(1)" class="int">1</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(fkColName: String, pkColName: String)org.squeryl.ForeignKeyDeclaration" id="14383">_createForeignKeyDeclaration</a><span class="delimiter">(</span><a title="String" id="49367">fkColName</a>: <span title="String">String</span>, <a title="String" id="49368">pkColName</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="49371">fkd</a> = <span title="org.squeryl.ForeignKeyDeclaration" class="keyword">new</span> <a href="KeyedEntity.scala.html#9798" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">(</span><a href="#14381" title="=&gt; Int">_fkIdGen</a>, <a href="#49367" title="String">fkColName</a>, <a href="#49368" title="String">pkColName</a><span class="delimiter">)</span>
    <a href="#14381" title="(x$1: Int)Unit">_fkIdGen</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#14384" title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a href="#49371" title="org.squeryl.ForeignKeyDeclaration">fkd</a><span class="delimiter">)</span>
    <a href="#49371" title="org.squeryl.ForeignKeyDeclaration">fkd</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit" id="14384">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a title="org.squeryl.ForeignKeyDeclaration" id="49376">foreignKeyDeclaration</a>: <a href="KeyedEntity.scala.html#9798" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">)</span> =
    <a href="#49376" title="org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#14092" title="()(implicit ev: org.squeryl.Schema)Unit">constrainReference</a>

  <span class="comment">/**
   * @return a Tuple2 with (LengthOfDecimal, Scale) that will determine the storage
   * length of the database type that map fields of type java.lang.BigDecimal
   * Can be overridden by the Column Annotation, ex.: Column(length=22, scale=20)
   * default is (20,16)
   */</span>
  
  <span class="keyword">def</span> <a title="=&gt; (Int, Int)" id="14385">defaultSizeOfBigDecimal</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Int(20)" class="int">20</span>,<span title="Int(16)" class="int">16</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @return the default database storage (column) length for String columns for this Schema,
   * Can be overridden by the Column Annotation ex.: Column(length=256)
   * default is 128 
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="14386">defaultLengthOfString</a> = <span title="Int(128)" class="int">128</span>

  <span class="comment">/**
   * protected since table declarations must only be done inside a Schema
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[B](a: org.squeryl.dsl.ast.BaseColumnAttributeAssignment*)org.squeryl.dsl.ast.BaseColumnAttributeAssignment*" id="14387">declare</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14389">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*" id="49393">a</a>: <span title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">BaseColumnAttributeAssignment</span>*<span class="delimiter">)</span> = <a href="#49393" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">a</a>

  <span class="comment">/**
   * protected since table declarations must only be done inside a Schema
   */</span>  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])(declarations: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit" id="14390">on</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14392">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="49396">table</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">(</span><a title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="49397">declarations</a>: A=&gt;Seq<span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#49396" title="org.squeryl.Table[A]">table</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      org.squeryl.internals.<a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30502" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;on function called with null argument in &quot;)" class="string">&quot;on function called with null argument in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#9839" title="Schema.this.type" class="keyword">this</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot; tables must be initialized before declarations.&quot;)" class="string">&quot; tables must be initialized before declarations.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="49400">colAss</a>: <span title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">Seq</span><span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span> =
      <a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30497" title="(q: org.squeryl.Queryable[A], visitor: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">mapSampleObject</a><span class="delimiter">(</span><a href="#49396" title="org.squeryl.Table[A]">table</a>, <a href="#49397" title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">declarations</a><span class="delimiter">)</span>

    <span class="comment">// all fields that have a single 'is' declaration are first reset :</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="49439">ca</a> &lt;- <a href="#49400" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a> <span class="keyword">if</span> <a href="#49439" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#10287" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#49439" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#48453" title="=&gt; Unit">clearColumnAttributes</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="49459">ca</a> &lt;- <a href="#49400" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; AnyVal)Unit">colAss</a><span class="delimiter">)</span> <a href="#49459" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span title="AnyVal" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="49460">dva</a>:<a href="dsl/ast/ExpressionNode.scala.html#10288" title="org.squeryl.dsl.ast.DefaultValueAssignment">DefaultValueAssignment</a>    =&gt; <span class="delimiter">{</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <a href="#49460" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#49465" title="=&gt; org.squeryl.dsl.ast.TypedExpressionNode[_]">value</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#10294" title="org.squeryl.dsl.ast.ConstantExpressionNode[_]">ConstantExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30502" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;error in declaration of column &quot;)" class="string">&quot;error in declaration of column &quot;</span><span title="(x$1: Any)java.lang.String">+</span> <a href="#49396" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#20452" title="=&gt; java.lang.String">prefixedName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49460" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#49463" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46092" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                <span title="java.lang.String(&quot;only constant expressions are supported in \'defaultsTo\' declaration&quot;)" class="string">&quot;only constant expressions are supported in 'defaultsTo' declaration&quot;</span><span class="delimiter">)</span>

        <a href="#49460" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#49463" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46122" title="(x$1: Option[org.squeryl.dsl.ast.ConstantExpressionNode[_]])Unit">_defaultValue</a> = <span title="(x: org.squeryl.dsl.ast.ConstantExpressionNode[_$29])Some[org.squeryl.dsl.ast.ConstantExpressionNode[_$29]]">Some</span><span class="delimiter">(</span><a href="#49460" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#49465" title="=&gt; org.squeryl.dsl.ast.TypedExpressionNode[_]">value</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.ast.ConstantExpressionNode[_$29]" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#10294" title="org.squeryl.dsl.ast.ConstantExpressionNode[_]">ConstantExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="AnyVal" id="49492">caa</a>:<a href="dsl/ast/ExpressionNode.scala.html#10287" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a> =&gt; <span class="delimiter">{</span>

        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="49509">ca</a> &lt;- <a href="#49492" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49430" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Unit">columnAttributes</a><span class="delimiter">)</span>
          <span class="delimiter">(</span><a href="#49492" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49428" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46116" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#49509" title="org.squeryl.internals.ColumnAttribute">ca</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">//don't allow a KeyedEntity.id field to not have a uniqueness constraint :</span>
        <span title="AnyVal" class="keyword">if</span><span class="delimiter">(</span><a href="#49459" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#48455" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          <a href="#49492" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49428" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46116" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#14396" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="49567">ctaa</a>:<a href="dsl/ast/ExpressionNode.scala.html#10285" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a> =&gt; <span class="delimiter">{</span>

        <span class="comment">//don't allow a KeyedEntity.id field to not have a uniqueness constraint :</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#49459" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#48455" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          <a href="#49567" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ctaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#48471" title="(a: org.squeryl.internals.ColumnAttribute)Unit">addAttribute</a><span class="delimiter">(</span><a href="#14396" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>

        <a href="#14393" title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a href="#49567" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ctaa</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">case</span> <a title="Nothing" id="49576">a</a>:<span title="Any">Any</span> =&gt; org.squeryl.internals.<a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30502" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;did not match on &quot;)" class="string">&quot;did not match on &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49576" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">a</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

<span class="comment">//    for(ca &lt;- colAss.find(_.isIdFieldOfKeyedEntity))</span>
<span class="comment">//      assert(</span>
<span class="comment">//        ca.columnAttributes.exists(_.isInstanceOf[PrimaryKey]) ||</span>
<span class="comment">//        ca.columnAttributes.exists(_.isInstanceOf[Unique]),</span>
<span class="comment">//        &quot;Column 'id' of table '&quot; + table.name +</span>
<span class="comment">//        &quot;' must have a uniqueness constraint by having the column attribute 'primaryKey' or 'unique' to honor it's KeyedEntity trait&quot;</span>
<span class="comment">//      )</span>


    <span class="comment">// Validate that autoIncremented is not used on other fields than KeyedEntity[A].id :</span>
    <span class="comment">// since it is not yet unsupported :</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="49596">ca</a> &lt;- <a href="#49400" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a><span class="delimiter">)</span> <a href="#49596" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="49597">cga</a>:<a href="dsl/ast/ExpressionNode.scala.html#10286" title="org.squeryl.dsl.ast.CompositeKeyAttributeAssignment">CompositeKeyAttributeAssignment</a> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="49606">caa</a>:<a href="dsl/ast/ExpressionNode.scala.html#10287" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="49623">ca</a> &lt;- <a href="#49606" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49430" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Nothing)Unit">columnAttributes</a> <span class="keyword">if</span> <a href="#49623" title="org.squeryl.internals.ColumnAttribute">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#10692" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#49606" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49428" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46120" title="=&gt; Boolean">isIdFieldOfKeyedEntity</a><span class="delimiter">)</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#10829" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#30502" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Field &quot;)" class="string">&quot;Field &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49606" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#49428" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#46092" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; of table &quot;)" class="string">&quot; of table &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49396" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#20450" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span>
                <span title="java.lang.String(&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;)" class="string">&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="49625">dva</a>:<span title="Any">Any</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit" id="14393">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="49572">cga</a>: <a href="dsl/ast/ExpressionNode.scala.html#10285" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">)</span> =
    <a href="#14322" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">_columnGroupAttributeAssignments</a>.<span title="(elems: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment*)Unit">append</span><span class="delimiter">(</span><a href="#49572" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cga</a><span class="delimiter">)</span>;
  
  <span class="keyword">def</span> <a title="(typeOfIdField: Class[_])scala.collection.immutable.Set[_ &gt;: org.squeryl.internals.PrimaryKey &lt;: Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn]" id="14394">defaultColumnAttributesForKeyedEntityId</a><span class="delimiter">(</span><a title="Class[_]" id="49629">typeOfIdField</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="scala.collection.immutable.Set[_48]" class="keyword">if</span><span class="delimiter">(</span><a href="#49629" title="Class[_]">typeOfIdField</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.Long](classOf[java.lang.Long])" class="delimiter">[</span>java.lang.Long<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#49629" title="Class[_]">typeOfIdField</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.Integer](classOf[java.lang.Integer])" class="delimiter">[</span>java.lang.Integer<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(elems: Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn*)scala.collection.immutable.Set[Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#10698" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a>, <span title="org.squeryl.internals.AutoIncremented" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#10692" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="(elems: org.squeryl.internals.PrimaryKey*)scala.collection.immutable.Set[org.squeryl.internals.PrimaryKey]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#10698" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unique" id="14395">unique</a> = <a href="internals/ColumnAttribute.scala.html#53399" title="()org.squeryl.internals.Unique">Unique</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.PrimaryKey" id="14396">primaryKey</a> = <a href="internals/ColumnAttribute.scala.html#49550" title="()org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.AutoIncremented" id="14397">autoIncremented</a> = <a href="internals/ColumnAttribute.scala.html#53407" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sequenceName: String)org.squeryl.internals.AutoIncremented" id="14398">autoIncremented</a><span class="delimiter">(</span><a title="String" id="53414">sequenceName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#53407" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#53414" title="String">sequenceName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Indexed" id="14399">indexed</a> = <a href="internals/ColumnAttribute.scala.html#49129" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(indexName: String)org.squeryl.internals.Indexed" id="14400">indexed</a><span class="delimiter">(</span><a title="String" id="53430">indexName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#49129" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#53430" title="String">indexName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(declaration: String)org.squeryl.internals.DBType" id="14401">dbType</a><span class="delimiter">(</span><a title="String" id="53438">declaration</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#53443" title="(declaration: String)org.squeryl.internals.DBType">DBType</a><span class="delimiter">(</span><a href="#53438" title="String">declaration</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Uninsertable" id="14402">uninsertable</a> = <a href="internals/ColumnAttribute.scala.html#53460" title="()org.squeryl.internals.Uninsertable">Uninsertable</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unupdatable" id="14403">unupdatable</a> = <a href="internals/ColumnAttribute.scala.html#53469" title="()org.squeryl.internals.Unupdatable">Unupdatable</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)org.squeryl.internals.Named" id="14404">named</a><span class="delimiter">(</span><a title="String" id="53473">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#53478" title="(name: String)org.squeryl.internals.Named">Named</a><span class="delimiter">(</span><a href="#53473" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ColGroupDeclaration extends java.lang.Object with ScalaObject" id="14405">ColGroupDeclaration</a><a href="#14405" title="ScalaObject" class="delimiter">(</a><a title="Seq[org.squeryl.internals.FieldMetaData]" id="53491">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(columnAttributes: org.squeryl.internals.AttributeValidOnMultipleColumn*)org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="53488">are</a><span class="delimiter">(</span><a title="org.squeryl.internals.AttributeValidOnMultipleColumn*" id="53492">columnAttributes</a>: <span title="org.squeryl.internals.AttributeValidOnMultipleColumn*">AttributeValidOnMultipleColumn</span>*<span class="delimiter">)</span> =
      <span title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" class="keyword">new</span> <a href="dsl/ast/ExpressionNode.scala.html#10285" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a href="#53491" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#53492" title="org.squeryl.internals.AttributeValidOnMultipleColumn*">columnAttributes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(fieldList: org.squeryl.dsl.ast.TypedExpressionNode[_]*)Schema.this.ColGroupDeclaration" id="14406">columns</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.TypedExpressionNode[_]*" id="53497">fieldList</a>: <span title="org.squeryl.dsl.ast.TypedExpressionNode[_]*">TypedExpressionNode</span><span class="delimiter">[</span>_<span class="delimiter">]</span>*<span class="delimiter">)</span> = <span title="Schema.this.ColGroupDeclaration" class="keyword">new</span> <a href="#14405" title="Schema.this.ColGroupDeclaration">ColGroupDeclaration</a><span class="delimiter">(</span><a href="#53497" title="org.squeryl.dsl.ast.TypedExpressionNode[_]*">fieldList</a>.<span title="(f: org.squeryl.dsl.ast.TypedExpressionNode[_] =&gt; org.squeryl.internals.FieldMetaData)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.dsl.ast.TypedExpressionNode[_]],org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]])Seq[org.squeryl.internals.FieldMetaData]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]]" class="delimiter">(</span><a href="#53518" title="org.squeryl.dsl.ast.TypedExpressionNode[_]">_</a>.<a href="dsl/ast/ExpressionNode.scala.html#18119" title="=&gt; org.squeryl.internals.FieldMetaData">_fieldMetaData</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">// POSO Life Cycle Callbacks :</span>

  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]" id="14407">callbacks</a>: <span title="Seq[org.squeryl.internals.LifecycleEvent]">Seq</span><span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

<span class="comment">////2.9.x approach for LyfeCycle events :</span>
<span class="comment">//  def delayedInit(body: =&gt; Unit) = {</span>
<span class="comment">//</span>
<span class="comment">//    body</span>
<span class="comment">//</span>
<span class="comment">//    (for(cb &lt;- callbacks; t &lt;- cb.target) yield (t, cb))</span>
<span class="comment">//    .groupBy(_._1)</span>
<span class="comment">//    .mapValues(_.map(_._2))</span>
<span class="comment">//    .foreach(</span>
<span class="comment">//     (t:Tuple2[View[_],Seq[LifecycleEvent]]) =&gt; {</span>
<span class="comment">//       t._1._callbacks = new LifecycleEventInvoker(t._2, t._1)</span>
<span class="comment">//     }</span>
<span class="comment">//    )</span>
<span class="comment">//  }</span>

<span class="comment">////2.8.x approach for LyfeCycle events :</span>
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="14409">_callbacks</a>: <span title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">Map</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="53621">m</a> =
      <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.LifecycleEvent" id="53647">cb</a> &lt;- <a href="#14407" title="(f: org.squeryl.internals.LifecycleEvent =&gt; scala.collection.GenTraversableOnce[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.internals.LifecycleEvent],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">callbacks</a>; <a title="org.squeryl.View[_]" id="53666">t</a> &lt;- <a href="#53647" title="org.squeryl.internals.LifecycleEvent">cb</a>.<a href="internals/PosoLifecycleEvent.scala.html#53613" title="(f: org.squeryl.View[_] =&gt; (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 })(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[org.squeryl.View[_]],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">target</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span title="(_1: org.squeryl.View[_$7], _2: org.squeryl.internals.LifecycleEvent)(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent)" class="delimiter">(</span><a href="#53666" title="org.squeryl.View[_]">t</a>, <a href="#53647" title="org.squeryl.internals.LifecycleEvent">cb</a><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.View[_])scala.collection.immutable.Map[org.squeryl.View[_],Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]]">groupBy</span><span class="delimiter">(</span><a href="#53761" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="(=&gt; org.squeryl.View[_$7]) forSome { type _$7 }">_1</span><span class="delimiter">)</span>
      .<span title="(f: Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }] =&gt; Seq[org.squeryl.internals.LifecycleEvent])scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]]">mapValues</span><span class="delimiter">(</span><a href="#53789" title="Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">_</a>.<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.internals.LifecycleEvent)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }],org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]])Seq[org.squeryl.internals.LifecycleEvent]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]]" class="delimiter">(</span><a href="#53806" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="=&gt; org.squeryl.internals.LifecycleEvent">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: ((org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])) =&gt; (org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]],(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]]" class="delimiter">(</span>
       <span class="delimiter">(</span>t:<span title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">Tuple2</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,Seq<span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
         <span title="(_1: org.squeryl.View[_$33], _2: org.squeryl.internals.LifecycleEventInvoker)(org.squeryl.View[_$33], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span><a href="#53903" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span>, <span title="org.squeryl.internals.LifecycleEventInvoker" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10768" title="org.squeryl.internals.LifecycleEventInvoker">LifecycleEventInvoker</a><span class="delimiter">(</span><a href="#53903" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]">_2</span>, <a href="#53903" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">)</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>
      .<span title="(implicit ev: &lt;:&lt;[(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">toMap</span>
    <a href="#53621" title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">m</a>
  <span class="delimiter">}</span>

  <span class="keyword">import</span> internals.<a href="internals/PosoLifecycleEvent.scala.html#10766" title="object org.squeryl.internals.PosoLifecycleEvent">PosoLifecycleEvent</a>._

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14411">beforeInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14413">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54469">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54469" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54453" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14414">beforeInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14416">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54496">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54496" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54453" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14417">beforeUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14419">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54516">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54516" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54461" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14420">beforeUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14422">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54525">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54525" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54461" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14423">beforeDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14425">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54531">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" id="54532">ev</a> : A <span title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]">&lt;:&lt;</span> KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54531" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54457" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[K, A &lt;: org.squeryl.KeyedEntity[K]]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14426">beforeDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14429">K</a>, <a title="&gt;: Nothing &lt;: org.squeryl.KeyedEntity[K]" id="14430">A</a> &lt;: KeyedEntity<span class="delimiter">[</span>K<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54545">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54545" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54457" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14431">afterInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14433">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54551">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54551" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54455" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14434">afterInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14436">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54560">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54560" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54455" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14437">afterUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14439">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54566">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54566" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54463" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14440">afterUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14442">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54575">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54575" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54463" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="14443">afterDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14445">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54581">t</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10772" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54581" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#54459" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="14446">afterDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14448">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="54590">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10774" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54590" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#9839" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#54459" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])org.squeryl.internals.PosoFactoryPercursorTable[A]" id="14449">factoryFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14451">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="54596">table</a>: <a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.PosoFactoryPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#10770" title="org.squeryl.internals.PosoFactoryPercursorTable[A]">PosoFactoryPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#54596" title="org.squeryl.Table[A]">table</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a ActiveRecord instance for the given the object. That allows the user
   * to save the given object using the Active Record pattern.
   *
   * @return a instance of ActiveRecord associated to the given object.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](a: A)(implicit queryDsl: org.squeryl.dsl.QueryDsl, implicit m: scala.reflect.Manifest[A])Schema.this.ActiveRecord[A]" id="14452">anyRef2ActiveTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14454">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="54608">a</a>: <a href="#14454" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.squeryl.dsl.QueryDsl" id="54609">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#10196" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="54610">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="Schema.this.ActiveRecord[A]" class="keyword">new</span> <a href="#14455" title="Schema.this.ActiveRecord[A]">ActiveRecord</a><span class="delimiter">(</span><a href="#54608" title="A">a</a>, <a href="#54609" title="org.squeryl.dsl.QueryDsl">queryDsl</a>, <a href="#54610" title="scala.reflect.Manifest[A]">m</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Active Record pattern implementation. Enables the user to insert an object in its
   * existent table with a convenient {{{save}}} method.
   */</span>
  <span class="keyword">class</span> <a title="class ActiveRecord[A] extends java.lang.Object with ScalaObject" id="14455">ActiveRecord</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="14456">A</a><span class="delimiter">]</span><a href="#14455" title="ScalaObject" class="delimiter">(</a><a title="A" id="54624">a</a>: <a href="#14456" title="A">A</a>, <a title="org.squeryl.dsl.QueryDsl" id="54625">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#10196" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="54626">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]" id="54620">_performAction</a><span class="delimiter">(</span><a title="org.squeryl.Table[A] =&gt; Unit" id="54640">action</a>: <span class="delimiter">(</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> =
      <a href="#14316" title="=&gt; scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(key: java.lang.Class[_])Option[org.squeryl.Table[_]]">get</span> <span class="delimiter">(</span><a href="#54626" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span> <span title="(f: org.squeryl.Table[_] =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> table: <a href="Table.scala.html#9866" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <a href="#54625" title="org.squeryl.dsl.QueryDsl">queryDsl</a> <a href="dsl/QueryDsl.scala.html#15255" title="(a: =&gt; Unit)Unit">inTransaction</a> <span class="delimiter">(</span><a href="#54640" title="(v1: org.squeryl.Table[A])Unit">action</a><span class="delimiter">(</span><a href="#54659" title="org.squeryl.Table[_]">table</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[A]" class="delimiter">[</span><a href="Table.scala.html#9866" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Same as {{{table.insert(a)}}}
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Option[Unit]" id="54621">save</a> =
      <a href="#54620" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#55038" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#34602" title="(t: A)A">insert</a><span title="Unit" class="delimiter">(</span><a href="#54624" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Same as {{{table.update(a)}}}
     */</span>  
    <span class="keyword">def</span> <a title="(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])Option[Unit]" id="54622">update</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" id="55053">ev</a>: A <span title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]">&lt;:&lt;</span> KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#54620" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#55057" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#34607" title="(o: A)(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])Unit">update</a><a href="#55053" title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" class="delimiter">(</a><a href="#54624" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>