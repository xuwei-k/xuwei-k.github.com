<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>main/org/squeryl/logging/StatsSchema.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/</span>
<span class="keyword">package</span> org.squeryl.logging

<span class="keyword">import</span> org.squeryl.KeyedEntity
<span class="keyword">import</span> org.squeryl.Schema
<span class="keyword">import</span> org.squeryl.dsl.CompositeKey2
<span class="keyword">import</span> org.squeryl.<a href="../PrimitiveTypeMode.scala.html#9807" title="object org.squeryl.PrimitiveTypeMode">PrimitiveTypeMode</a>._

<span class="comment">/**
 * id is a UUID generatted by java.util.UUID
 */</span>
<span class="keyword">class</span> <a title="class StatementInvocation extends java.lang.Object with org.squeryl.KeyedEntity[String] with ScalaObject" id="10867">StatementInvocation</a><a href="#10867" title="ScalaObject" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="String" id="108987">id</a>: <span title="String">String</span>,
  <span class="keyword">val</span> <a title="Long" id="108988">start</a>: <span title="Long">Long</span>,
  <span class="keyword">val</span> <a title="Long" id="108989">end</a>: <span title="Long">Long</span>,
  <span class="keyword">val</span> <a title="Int" id="108990">statementHash</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="108991">statementHashCollisionNumber</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="108992">hostId</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="108993">sessionId</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Option[Int]" id="108994">rowCount</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="Option[Long]" id="108995">iterationEndTime</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../KeyedEntity.scala.html#9788" title="org.squeryl.KeyedEntity[String]">KeyedEntity</a><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(se: org.squeryl.logging.StatementInvocationEvent, _statementHash: Int, _hCollision: Int)org.squeryl.logging.StatementInvocation" id="105643" class="keyword">this</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="108984">se</a>: <a href="StatisticsListener.scala.html#10856" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a>, <a title="Int" id="108985">_statementHash</a>: <span title="Int">Int</span>, <a title="Int" id="108986">_hCollision</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <a href="#10867" title="StatementInvocation.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#108984" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#71680" title="=&gt; java.lang.String">uuid</a>, <a href="#108984" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#71671" title="=&gt; Long">start</a>, <a href="#108984" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#71673" title="=&gt; Long">end</a>, <a href="#108985" title="Int">_statementHash</a>, <a href="#108986" title="Int">_hCollision</a>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()org.squeryl.logging.StatementInvocation" id="105644" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> =
    <a href="#10867" title="StatementInvocation.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="Long(0L)" class="int">0</span>, <span title="Long(0L)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]" id="105645">statementId</a> =
    <span title="org.squeryl.dsl.CompositeKey2[Int,Int]" class="keyword">new</span> <a href="../dsl/CompositeKey.scala.html#10031" title="org.squeryl.dsl.CompositeKey2[Int,Int]">CompositeKey2</a><span class="delimiter">(</span><a href="#108990" title="=&gt; Int">statementHash</a>, <a href="#108991" title="=&gt; Int">statementHashCollisionNumber</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType]" id="105646">executeTime</a> =
    <a href="../dsl/DslFactory.scala.html#15196" title="implicit org.squeryl.dsl.DslFactory.long2ScalarLong : (l: org.squeryl.PrimitiveTypeMode.LongType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType]">end</a> <a href="../dsl/FieldTypes.scala.html#18169" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType]">minus</a> <a href="../dsl/DslFactory.scala.html#15196" title="implicit org.squeryl.dsl.DslFactory.long2ScalarLong : (l: org.squeryl.PrimitiveTypeMode.LongType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType]">start</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.StatementHasher" id="10868">StatementHasher</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class StatementCaseClass4HashGeneration extends java.lang.Object with ScalaObject with Product with Serializable" id="109541">StatementCaseClass4HashGeneration</a><a href="#109541" title="ScalaObject" class="delimiter">(</a><a title="String" id="109482">sql</a>: <span title="String">String</span>, <a title="String" id="109483">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(sql: String, definitionOrCallSite: String)Int" id="109384">hash</a><span class="delimiter">(</span><a title="String" id="109479">sql</a>: <span title="String">String</span>, <a title="String" id="109480">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span> =
    <a href="#109541" title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.StatementHasher.StatementCaseClass4HashGeneration">StatementCaseClass4HashGeneration</a><span class="delimiter">(</span><a href="#109479" title="String">sql</a>, <a href="#109480" title="String">definitionOrCallSite</a><span class="delimiter">)</span>.<a href="#109541" title="()Int">hashCode</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class Statement extends java.lang.Object with org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]] with ScalaObject" id="10870">Statement</a><a href="#10870" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="108632">sql</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="108633">definitionOrCallSite</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Int" id="108634">hash</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="108635">statementHashCollisionNumber</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../KeyedEntity.scala.html#9788" title="org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]]">KeyedEntity</a><span class="delimiter">[</span>CompositeKey2<span class="delimiter">[</span>Int,Int<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.Statement" id="104040" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="108630">sql</a>: <span title="String">String</span>, <a title="String" id="108631">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Unit" class="delimiter">{</span>
    <span class="comment">//TODO: support defining truncation rule in schena (on/declare)</span>
    <a href="#10870" title="Statement.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#108630" title="String">sql</a>, <a href="#108631" title="String">definitionOrCallSite</a>, <a href="#10868" title="object org.squeryl.logging.StatementHasher">StatementHasher</a>.<a href="#109384" title="(sql: String, definitionOrCallSite: String)Int">hash</a><span class="delimiter">(</span><a href="#108630" title="String">sql</a>, <a href="#108631" title="String">definitionOrCallSite</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()org.squeryl.logging.Statement" id="104041" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#10870" title="Statement.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]" id="104042">id</a> =
    <span title="org.squeryl.dsl.CompositeKey2[Int,Int]" class="keyword">new</span> <a href="../dsl/CompositeKey.scala.html#10031" title="org.squeryl.dsl.CompositeKey2[Int,Int]">CompositeKey2</a><span class="delimiter">(</span><a href="#108634" title="=&gt; Int">hash</a>, <a href="#108635" title="=&gt; Int">statementHashCollisionNumber</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class StatLine extends java.lang.Object with ScalaObject" id="10871">StatLine</a><a href="#10871" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="107356">statement</a>: <a href="#10870" title="org.squeryl.logging.Statement">Statement</a>, <span class="keyword">val</span> <a title="Double" id="107357">avgExecTime</a>: <span title="Double">Double</span>, <span class="keyword">val</span> <a title="Long" id="107358">invocationCount</a>: <span title="Long">Long</span>, <span class="keyword">val</span> <a title="Long" id="107359">cumulativeExecutionTime</a>: <span title="Long">Long</span>, <span class="keyword">val</span> <a title="Float" id="107360">avgRowCount</a>: <span title="Float">Float</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="104025">definitionSite</a> =
    <a href="#107356" title="=&gt; org.squeryl.logging.Statement">statement</a>.<a href="#108633" title="=&gt; String">definitionOrCallSite</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.Measure" id="10872">Measure</a> <span title="ScalaObject" class="keyword">extends</span> <span title="Enumeration">Enumeration</span> <span class="delimiter">{</span>
   <span class="keyword">type</span> <a title="org.squeryl.logging.Measure.Value" id="104943">Measure</a> = <span title="org.squeryl.logging.Measure.Value">Value</span>
   <span class="keyword">val</span> <a title="org.squeryl.logging.Measure.Value" id="104944">AvgExecTime</a>, <a title="org.squeryl.logging.Measure.Value" id="104946">InvocationCount</a>, <a title="org.squeryl.logging.Measure.Value" id="104948">CumulativeExecutionTime</a>, <a title="org.squeryl.logging.Measure.Value" id="104950">AvgResultSetSize</a> = <span title="=&gt; org.squeryl.logging.Measure.Value">Value</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.StatsSchema" id="10874">StatsSchema</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../Schema.scala.html#9839" title="org.squeryl.Schema">Schema</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="104927">drop</a> = <span class="keyword">super</span>.<a href="../Schema.scala.html#14344" title="=&gt; Unit">drop</a>

  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.logging.Statement]" id="104928">statements</a> = <a href="../Schema.scala.html#14362" title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span title="(name: String)(implicit manifestT: scala.reflect.Manifest[org.squeryl.logging.Statement])org.squeryl.Table[org.squeryl.logging.Statement]" class="delimiter">[</span><a href="#10870" title="org.squeryl.logging.Statement">Statement</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.squeryl.logging.Statement]" class="delimiter">(</span><span title="java.lang.String(&quot;Statementz&quot;)" class="string">&quot;Statementz&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.logging.StatementInvocation]" id="104930">statementInvocations</a> = <a href="../Schema.scala.html#14359" title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.logging.StatementInvocation])org.squeryl.Table[org.squeryl.logging.StatementInvocation]" class="delimiter">[</span><a href="#10867" title="org.squeryl.logging.StatementInvocation">StatementInvocation</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]" id="104932">invocationStats</a> =
    <a href="../dsl/boilerplate/FromSignatures.scala.html#15987" title="(t1: org.squeryl.Queryable[org.squeryl.logging.StatementInvocation])(f: org.squeryl.logging.StatementInvocation =&gt; org.squeryl.dsl.QueryYield[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]])org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]">from</a><span class="delimiter">(</span><a href="#104930" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocation" id="105674">si</a><span class="delimiter">)</span> =&gt;
      <a href="../dsl/boilerplate/GroupBySignatures.scala.html#15686" title="(e1: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.IntType], e2: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.fsm.GroupByState[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]]">groupBy</a><span class="delimiter">(</span><a href="#105674" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHash</a>, <a href="#105674" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
      <a href="../dsl/boilerplate/ComputeMeasuresSignaturesFromGroupByState.scala.html#86032" title="(e1: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.DoubleType]], e2: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.LongType], e3: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.LongType]], e4: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.FloatType])org.squeryl.dsl.fsm.ComputeStateFromGroupByState[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">compute</a><span class="delimiter">(</span><a href="../dsl/SqlFunctions.scala.html#15635" title="(e: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.UnaryAgregateFloatOp[org.squeryl.PrimitiveTypeMode.LongType]">avg</a><a href="../dsl/TypeArithmetic.scala.html#15052" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv3 : (op: org.squeryl.dsl.UnaryAgregateFloatOp[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.DoubleType]]" class="delimiter">(</a><a href="#105674" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/TypeArithmetic.scala.html#14776" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv23 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.LongType]">executeTime</a><span class="delimiter">)</span>, <a href="../dsl/SqlFunctions.scala.html#15656" title="=&gt; org.squeryl.PrimitiveTypeMode.CountFunction">count</a>, <a href="../dsl/SqlFunctions.scala.html#15632" title="(e: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.UnaryAgregateLengthNeutralOp[org.squeryl.PrimitiveTypeMode.LongType]">sum</a><a href="../dsl/TypeArithmetic.scala.html#15064" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv3 : (op: org.squeryl.dsl.UnaryAgregateLengthNeutralOp[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.LongType]]" class="delimiter">(</a><a href="#105674" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/TypeArithmetic.scala.html#14776" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv23 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.LongType]">executeTime</a><span class="delimiter">)</span>, <a href="../dsl/SqlFunctions.scala.html#15659" title="(a: org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.FloatType]], b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NvlFunctionNumerical[org.squeryl.PrimitiveTypeMode.FloatType,org.squeryl.PrimitiveTypeMode.IntType]">nvl</a><a href="../dsl/TypeArithmetic.scala.html#14787" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv32 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.FloatType,org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.FloatType]" class="delimiter">(</a><a href="../dsl/SqlFunctions.scala.html#15635" title="(e: org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.UnaryAgregateFloatOp[Option[org.squeryl.PrimitiveTypeMode.IntType]]">avg</a><a href="../dsl/TypeArithmetic.scala.html#15057" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv7 : (op: org.squeryl.dsl.UnaryAgregateFloatOp[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.FloatType]]" class="delimiter">(</a><a href="#105674" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15199" title="implicit org.squeryl.dsl.DslFactory.optionInt2ScalarInt : (i: Option[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]]">rowCount</a><span class="delimiter">)</span>,<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]" class="int">0</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="#10872" title="object org.squeryl.logging.Measure">Measure</a>._

  <span class="keyword">def</span> <a title="(topN: Int, measure: org.squeryl.logging.Measure.Measure)org.squeryl.Query[org.squeryl.logging.StatLine]" id="104934">topRankingStatements</a><span class="delimiter">(</span><a title="Int" id="104938">topN</a>: <span title="Int">Int</span>, <a title="org.squeryl.logging.Measure.Measure" id="104939">measure</a>: <span title="org.squeryl.logging.Measure.Measure">Measure</span><span class="delimiter">)</span> =
    <a href="../dsl/boilerplate/FromSignatures.scala.html#15992" title="(t1: org.squeryl.Queryable[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]], t2: org.squeryl.Queryable[org.squeryl.logging.Statement])(f: (org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]], org.squeryl.logging.Statement) =&gt; org.squeryl.dsl.QueryYield[org.squeryl.logging.StatLine])org.squeryl.Query[org.squeryl.logging.StatLine]">from</a><span class="delimiter">(</span><a href="#104932" title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]">invocationStats</a>, <a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]" id="107274">si</a>,<a title="org.squeryl.logging.Statement" id="107275">s</a><span class="delimiter">)</span>=&gt;
      <a href="../dsl/QueryDsl.scala.html#15264" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75834" title="=&gt; Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]">key</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">_1</a> <a href="../dsl/FieldTypes.scala.html#18121" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#107275" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a> <a href="../dsl/ast/ExpressionNode.scala.html#61744" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a> <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75834" title="=&gt; Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]">key</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">_2</a> <a href="../dsl/FieldTypes.scala.html#18121" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#107275" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
      <a href="../dsl/fsm/StartState.scala.html#15765" title="(yieldClosure: =&gt; org.squeryl.logging.StatLine)org.squeryl.dsl.fsm.SelectState[org.squeryl.logging.StatLine]">select</a><span class="delimiter">(</span><span title="org.squeryl.logging.StatLine" class="keyword">new</span> <a href="#10871" title="org.squeryl.logging.StatLine">StatLine</a><span class="delimiter">(</span><a href="#107275" title="org.squeryl.logging.Statement">s</a>, <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; Option[org.squeryl.PrimitiveTypeMode.DoubleType]">_1</span>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.DoubleType">get</span>, <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.LongType">_2</span>, <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; Option[org.squeryl.PrimitiveTypeMode.LongType]">_3</span>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.LongType">get</span>, <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.FloatType">_4</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../dsl/boilerplate/OrderBySignatures.scala.html#20509" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.logging.StatLine]">orderBy</a><span class="delimiter">(</span><a href="#104939" title="org.squeryl.logging.Measure.Measure">measure</a> <a href="../dsl/DslFactory.scala.html#15234" title="implicit org.squeryl.dsl.DslFactory.orderByArg2OrderByExpression : (a: org.squeryl.dsl.ast.OrderByArg)org.squeryl.dsl.ast.OrderByExpression" class="keyword">match</a> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#104944" title="org.squeryl.dsl.ast.OrderByArg">AvgExecTime</a> =&gt; <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#15231" title="(e: Option[org.squeryl.PrimitiveTypeMode.DoubleType])(implicit evidence$2: Option[org.squeryl.PrimitiveTypeMode.DoubleType] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_1</a>.<a href="../dsl/ast/ExpressionNode.scala.html#22707" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#104946" title="org.squeryl.dsl.ast.OrderByArg">InvocationCount</a> =&gt; <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#15231" title="(e: org.squeryl.PrimitiveTypeMode.LongType)(implicit evidence$2: org.squeryl.PrimitiveTypeMode.LongType =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_2</a>.<a href="../dsl/ast/ExpressionNode.scala.html#22707" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#104948" title="org.squeryl.dsl.ast.OrderByArg">CumulativeExecutionTime</a> =&gt; <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#15231" title="(e: Option[org.squeryl.PrimitiveTypeMode.LongType])(implicit evidence$2: Option[org.squeryl.PrimitiveTypeMode.LongType] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_3</a>.<a href="../dsl/ast/ExpressionNode.scala.html#22707" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#104950" title="org.squeryl.dsl.ast.OrderByArg">AvgResultSetSize</a> =&gt; <a href="#107274" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#75835" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#15231" title="(e: org.squeryl.PrimitiveTypeMode.FloatType)(implicit evidence$2: org.squeryl.PrimitiveTypeMode.FloatType =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_4</a>.<a href="../dsl/ast/ExpressionNode.scala.html#22707" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    .<a href="../Query.scala.html#14071" title="(offset: Int, pageLength: Int)org.squeryl.Query[org.squeryl.logging.StatLine]">page</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#104938" title="Int">topN</a><span class="delimiter">)</span>

  <a href="../Schema.scala.html#14390" title="(table: org.squeryl.Table[org.squeryl.logging.Statement])(declarations: org.squeryl.logging.Statement =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit">on</a><span class="delimiter">(</span><a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="109592">s</a>=&gt; <a href="../Schema.scala.html#14387" title="(a: org.squeryl.dsl.ast.BaseColumnAttributeAssignment*)org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">declare</a><span class="delimiter">(</span>
    <a href="#109592" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#15195" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">sql</a> <a href="../dsl/FieldTypes.scala.html#22756" title="(columnAttributes: org.squeryl.internals.AttributeValidOnNonNumericalColumn*)(implicit restrictUsageWithinSchema: org.squeryl.Schema)org.squeryl.dsl.ast.ColumnAttributeAssignment">is</a><span class="delimiter">(</span><a href="../Schema.scala.html#14401" title="(declaration: String)org.squeryl.internals.DBType">dbType</a><span class="delimiter">(</span><span title="java.lang.String(&quot;clob&quot;)" class="string">&quot;clob&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>,
    <a href="#109592" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#15195" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">definitionOrCallSite</a> <a href="../dsl/FieldTypes.scala.html#22756" title="(columnAttributes: org.squeryl.internals.AttributeValidOnNonNumericalColumn*)(implicit restrictUsageWithinSchema: org.squeryl.Schema)org.squeryl.dsl.ast.ColumnAttributeAssignment">is</a><span class="delimiter">(</span><a href="../Schema.scala.html#14401" title="(declaration: String)org.squeryl.internals.DBType">dbType</a><span class="delimiter">(</span><span title="java.lang.String(&quot;varchar(512)&quot;)" class="string">&quot;varchar(512)&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">)</span><span class="delimiter">)</span>  

  <span class="keyword">def</span> <a title="(sie: org.squeryl.logging.StatementInvocationEvent)String" id="104935">recordStatementInvocation</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="108617">sie</a>: <a href="StatisticsListener.scala.html#10856" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.dsl.CompositeKey2[Int,Int]" id="108620">statementK</a> = <a href="#104937" title="(se: org.squeryl.logging.StatementInvocationEvent)org.squeryl.dsl.CompositeKey2[Int,Int]">_lookupOrCreateStatementAndReturnKey</a><span class="delimiter">(</span><a href="#108617" title="org.squeryl.logging.StatementInvocationEvent">sie</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.squeryl.logging.StatementInvocation" id="108621">si</a> = <a href="#105643" title="(se: org.squeryl.logging.StatementInvocationEvent, _statementHash: Int, _hCollision: Int)org.squeryl.logging.StatementInvocation" class="keyword">new</a> <a href="#10867" title="org.squeryl.logging.StatementInvocation">StatementInvocation</a><span class="delimiter">(</span><a href="#108617" title="org.squeryl.logging.StatementInvocationEvent">sie</a>, <a href="#108620" title="org.squeryl.dsl.CompositeKey2[Int,Int]">statementK</a>.<a href="../dsl/CompositeKey.scala.html#19944" title="=&gt; Int">a1</a>, <a href="#108620" title="org.squeryl.dsl.CompositeKey2[Int,Int]">statementK</a>.<a href="../dsl/CompositeKey.scala.html#19946" title="=&gt; Int">a2</a><span class="delimiter">)</span>
    <a href="#104930" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a>.<a href="../Table.scala.html#34602" title="(t: org.squeryl.logging.StatementInvocation)org.squeryl.logging.StatementInvocation">insert</a><span class="delimiter">(</span><a href="#108621" title="org.squeryl.logging.StatementInvocation">si</a><span class="delimiter">)</span>
    <a href="#108621" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="#108987" title="=&gt; String">id</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(statementInvocationId: String, iterationEndTime: Long, rowCount: Int, iterationCompleted: Boolean)Int" id="104936">recordEndOfIteration</a><span class="delimiter">(</span><a title="String" id="109009">statementInvocationId</a>: <span title="String">String</span>, <a title="Long" id="109010">iterationEndTime</a>: <span title="Long">Long</span>, <a title="Int" id="109011">rowCount</a>: <span title="Int">Int</span>, <a title="Boolean" id="109012">iterationCompleted</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <a href="../dsl/QueryDsl.scala.html#15311" title="(t: org.squeryl.Table[org.squeryl.logging.StatementInvocation])(s: org.squeryl.logging.StatementInvocation =&gt; org.squeryl.dsl.ast.UpdateStatement)Int">update</a><span class="delimiter">(</span><a href="#104930" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocation" id="109023">si</a> =&gt;
      <a href="../dsl/QueryDsl.scala.html#15264" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#109023" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15195" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">id</a> <a href="../dsl/FieldTypes.scala.html#22738" title="(b: org.squeryl.dsl.NonNumericalExpression[org.squeryl.PrimitiveTypeMode.StringType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../dsl/DslFactory.scala.html#15195" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">statementInvocationId</a><span class="delimiter">)</span>
      <a href="../dsl/fsm/StartState.scala.html#15768" title="(updateAssignments: org.squeryl.dsl.ast.UpdateAssignment*)(implicit cond: =:=[org.squeryl.dsl.fsm.Conditioned,org.squeryl.dsl.fsm.Conditioned])org.squeryl.dsl.ast.UpdateStatement">set</a><span class="delimiter">(</span><a href="#109023" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15200" title="implicit org.squeryl.dsl.DslFactory.optionLong2ScalarLong : (i: Option[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.LongType]]">iterationEndTime</a> <a href="../dsl/ast/ExpressionNode.scala.html#18112" title="(b: Some[Long])(implicit evidence$1: Some[Long] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.LongType]])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#109010" title="Long">iterationEndTime</a><span class="delimiter">)</span>, <a href="#109023" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#15199" title="implicit org.squeryl.dsl.DslFactory.optionInt2ScalarInt : (i: Option[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]]">rowCount</a> <a href="../dsl/ast/ExpressionNode.scala.html#18112" title="(b: Some[Int])(implicit evidence$1: Some[Int] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#109011" title="Int">rowCount</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(se: org.squeryl.logging.StatementInvocationEvent)org.squeryl.dsl.CompositeKey2[Int,Int]" id="104937">_lookupOrCreateStatementAndReturnKey</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="108622">se</a>: <a href="StatisticsListener.scala.html#10856" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="108625">s</a> = <a href="#104040" title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.Statement" class="keyword">new</a> <a href="#10870" title="org.squeryl.logging.Statement">Statement</a><span class="delimiter">(</span><a href="#108622" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#71677" title="=&gt; String">jdbcStatement</a>, <a href="#108622" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#71682" title="=&gt; java.lang.String">definitionOrCallSite</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Option[org.squeryl.logging.Statement]" id="108626">storedStatement</a> = <a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../View.scala.html#20466" title="(k: org.squeryl.dsl.CompositeKey2[Int,Int])(implicit ev: &lt;:&lt;[org.squeryl.logging.Statement,org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]]], implicit dsl: org.squeryl.dsl.QueryDsl)Option[org.squeryl.logging.Statement]">lookup</a><a href="../dsl/QueryDsl.scala.html#15261" title="&lt;:&lt;[org.squeryl.logging.Statement,org.squeryl.logging.Statement]" class="delimiter">(</a><a href="#108625" title="org.squeryl.logging.Statement">s</a>.<a href="#104042" title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]">id</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="108627">result</a> =
      <span title="org.squeryl.logging.Statement" class="keyword">if</span><span class="delimiter">(</span><a href="#108626" title="Option[org.squeryl.logging.Statement]">storedStatement</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../Table.scala.html#34602" title="(t: org.squeryl.logging.Statement)org.squeryl.logging.Statement">insert</a><span class="delimiter">(</span><a href="#108625" title="org.squeryl.logging.Statement">s</a><span class="delimiter">)</span>
        <a href="#108625" title="org.squeryl.logging.Statement">s</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="org.squeryl.Query[org.squeryl.logging.Statement]" id="108673">q</a> =
          <a href="../dsl/boilerplate/FromSignatures.scala.html#15987" title="(t1: org.squeryl.Queryable[org.squeryl.logging.Statement])(f: org.squeryl.logging.Statement =&gt; org.squeryl.dsl.QueryYield[org.squeryl.logging.Statement])org.squeryl.Query[org.squeryl.logging.Statement]">from</a><span class="delimiter">(</span><a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="108820">st</a> =&gt;
            <a href="../dsl/QueryDsl.scala.html#15264" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#108820" title="org.squeryl.logging.Statement">st</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a> <a href="../dsl/FieldTypes.scala.html#18121" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#108625" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a><span class="delimiter">)</span>
            <a href="../dsl/fsm/StartState.scala.html#15765" title="(yieldClosure: =&gt; org.squeryl.logging.Statement)org.squeryl.dsl.fsm.SelectState[org.squeryl.logging.Statement]">select</a><span class="delimiter">(</span><a href="#108820" title="org.squeryl.logging.Statement">st</a><span class="delimiter">)</span>
            <a href="../dsl/boilerplate/OrderBySignatures.scala.html#20509" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.logging.Statement]">orderBy</a><span class="delimiter">(</span><a href="#108820" title="org.squeryl.logging.Statement">st</a>.<a href="../dsl/DslFactory.scala.html#15191" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">var</span> <a title="Int" id="108674">lastCollisionNum</a> = -<span title="Int(-1)" class="int">1</span>
        <span class="keyword">val</span> <a title="Option[org.squeryl.logging.Statement]" id="108675">mathingStatement</a> =
          <a href="#108673" title="org.squeryl.Query[org.squeryl.logging.Statement]">q</a>.<span title="(p: org.squeryl.logging.Statement =&gt; Boolean)Option[org.squeryl.logging.Statement]">find</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="108964">st</a> =&gt; <span class="delimiter">{</span>
            <a href="#108674" title="Int">lastCollisionNum</a> = <a href="#108964" title="org.squeryl.logging.Statement">st</a>.<a href="#108635" title="=&gt; Int">statementHashCollisionNumber</a>
            <a href="#108964" title="org.squeryl.logging.Statement">st</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#108625" title="org.squeryl.logging.Statement">s</a>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <span title="org.squeryl.logging.Statement" class="keyword">if</span><span class="delimiter">(</span><a href="#108675" title="Option[org.squeryl.logging.Statement]">mathingStatement</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
          <a href="#108675" title="Option[org.squeryl.logging.Statement]">mathingStatement</a>.<span title="=&gt; org.squeryl.logging.Statement">get</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#108625" title="org.squeryl.logging.Statement">s</a>.<a href="#108635" title="(x$1: Int)Unit">statementHashCollisionNumber</a> = <a href="#108674" title="Int">lastCollisionNum</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
          <a href="#104928" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../Table.scala.html#34602" title="(t: org.squeryl.logging.Statement)org.squeryl.logging.Statement">insert</a><span class="delimiter">(</span><a href="#108625" title="org.squeryl.logging.Statement">s</a><span class="delimiter">)</span>
          <a href="#108625" title="org.squeryl.logging.Statement">s</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <a href="#108627" title="org.squeryl.logging.Statement">result</a>.<a href="#104042" title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]">id</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>