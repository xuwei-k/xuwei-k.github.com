<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/squeryl/logging/StatsSchema.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/</span>
<span class="keyword">package</span> org.squeryl.logging

<span class="keyword">import</span> org.squeryl.KeyedEntity
<span class="keyword">import</span> org.squeryl.Schema
<span class="keyword">import</span> org.squeryl.dsl.CompositeKey2
<span class="keyword">import</span> org.squeryl.<a href="../PrimitiveTypeMode.scala.html#9971" title="object org.squeryl.PrimitiveTypeMode">PrimitiveTypeMode</a>._

<span class="comment">/**
 * id is a UUID generatted by java.util.UUID
 */</span>
<span class="keyword">class</span> <a title="class StatementInvocation extends java.lang.Object with org.squeryl.KeyedEntity[String] with ScalaObject" id="13464">StatementInvocation</a><a href="#13464" title="ScalaObject" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="String" id="111258">id</a>: <span title="String">String</span>,
  <span class="keyword">val</span> <a title="Long" id="111259">start</a>: <span title="Long">Long</span>,
  <span class="keyword">val</span> <a title="Long" id="111260">end</a>: <span title="Long">Long</span>,
  <span class="keyword">val</span> <a title="Int" id="111261">statementHash</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="111262">statementHashCollisionNumber</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="111263">hostId</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Int" id="111264">sessionId</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Option[Int]" id="111265">rowCount</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="Option[Long]" id="111266">iterationEndTime</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../KeyedEntity.scala.html#10195" title="org.squeryl.KeyedEntity[String]">KeyedEntity</a><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(se: org.squeryl.logging.StatementInvocationEvent, _statementHash: Int, _hCollision: Int)org.squeryl.logging.StatementInvocation" id="107914" class="keyword">this</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="111255">se</a>: <a href="StatisticsListener.scala.html#13449" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a>, <a title="Int" id="111256">_statementHash</a>: <span title="Int">Int</span>, <a title="Int" id="111257">_hCollision</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <a href="#13464" title="StatementInvocation.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#111255" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#73951" title="=&gt; java.lang.String">uuid</a>, <a href="#111255" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#73942" title="=&gt; Long">start</a>, <a href="#111255" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#73944" title="=&gt; Long">end</a>, <a href="#111256" title="Int">_statementHash</a>, <a href="#111257" title="Int">_hCollision</a>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()org.squeryl.logging.StatementInvocation" id="107915" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> =
    <a href="#13464" title="StatementInvocation.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="Long(0L)" class="int">0</span>, <span title="Long(0L)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span>, <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]" id="107916">statementId</a> =
    <span title="org.squeryl.dsl.CompositeKey2[Int,Int]" class="keyword">new</span> <a href="../dsl/CompositeKey.scala.html#10976" title="org.squeryl.dsl.CompositeKey2[Int,Int]">CompositeKey2</a><span class="delimiter">(</span><a href="#111261" title="=&gt; Int">statementHash</a>, <a href="#111262" title="=&gt; Int">statementHashCollisionNumber</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType]" id="107917">executeTime</a> =
    <a href="../dsl/DslFactory.scala.html#17471" title="implicit org.squeryl.dsl.DslFactory.long2ScalarLong : (l: org.squeryl.PrimitiveTypeMode.LongType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType]">end</a> <a href="../dsl/FieldTypes.scala.html#20444" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType]">minus</a> <a href="../dsl/DslFactory.scala.html#17471" title="implicit org.squeryl.dsl.DslFactory.long2ScalarLong : (l: org.squeryl.PrimitiveTypeMode.LongType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType]">start</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.StatementHasher" id="13363">StatementHasher</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class StatementCaseClass4HashGeneration extends java.lang.Object with ScalaObject with Product with Serializable" id="111812">StatementCaseClass4HashGeneration</a><a href="#111812" title="ScalaObject" class="delimiter">(</a><a title="String" id="111753">sql</a>: <span title="String">String</span>, <a title="String" id="111754">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(sql: String, definitionOrCallSite: String)Int" id="111655">hash</a><span class="delimiter">(</span><a title="String" id="111750">sql</a>: <span title="String">String</span>, <a title="String" id="111751">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span> =
    <a href="#111812" title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.StatementHasher.StatementCaseClass4HashGeneration">StatementCaseClass4HashGeneration</a><span class="delimiter">(</span><a href="#111750" title="String">sql</a>, <a href="#111751" title="String">definitionOrCallSite</a><span class="delimiter">)</span>.<a href="#111812" title="()Int">hashCode</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class Statement extends java.lang.Object with org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]] with ScalaObject" id="13404">Statement</a><a href="#13404" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="110903">sql</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="110904">definitionOrCallSite</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Int" id="110905">hash</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="110906">statementHashCollisionNumber</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../KeyedEntity.scala.html#10195" title="org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]]">KeyedEntity</a><span class="delimiter">[</span>CompositeKey2<span class="delimiter">[</span>Int,Int<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.Statement" id="106311" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="110901">sql</a>: <span title="String">String</span>, <a title="String" id="110902">definitionOrCallSite</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Unit" class="delimiter">{</span>
    <span class="comment">//TODO: support defining truncation rule in schena (on/declare)</span>
    <a href="#13404" title="Statement.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#110901" title="String">sql</a>, <a href="#110902" title="String">definitionOrCallSite</a>, <a href="#13363" title="object org.squeryl.logging.StatementHasher">StatementHasher</a>.<a href="#111655" title="(sql: String, definitionOrCallSite: String)Int">hash</a><span class="delimiter">(</span><a href="#110901" title="String">sql</a>, <a href="#110902" title="String">definitionOrCallSite</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()org.squeryl.logging.Statement" id="106312" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#13404" title="Statement.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]" id="106313">id</a> =
    <span title="org.squeryl.dsl.CompositeKey2[Int,Int]" class="keyword">new</span> <a href="../dsl/CompositeKey.scala.html#10976" title="org.squeryl.dsl.CompositeKey2[Int,Int]">CompositeKey2</a><span class="delimiter">(</span><a href="#110905" title="=&gt; Int">hash</a>, <a href="#110906" title="=&gt; Int">statementHashCollisionNumber</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class StatLine extends java.lang.Object with ScalaObject" id="13500">StatLine</a><a href="#13500" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="109627">statement</a>: <a href="#13404" title="org.squeryl.logging.Statement">Statement</a>, <span class="keyword">val</span> <a title="Double" id="109628">avgExecTime</a>: <span title="Double">Double</span>, <span class="keyword">val</span> <a title="Long" id="109629">invocationCount</a>: <span title="Long">Long</span>, <span class="keyword">val</span> <a title="Long" id="109630">cumulativeExecutionTime</a>: <span title="Long">Long</span>, <span class="keyword">val</span> <a title="Float" id="109631">avgRowCount</a>: <span title="Float">Float</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="106296">definitionSite</a> =
    <a href="#109627" title="=&gt; org.squeryl.logging.Statement">statement</a>.<a href="#110904" title="=&gt; String">definitionOrCallSite</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.Measure" id="13462">Measure</a> <span title="ScalaObject" class="keyword">extends</span> <span title="Enumeration">Enumeration</span> <span class="delimiter">{</span>
   <span class="keyword">type</span> <a title="org.squeryl.logging.Measure.Value" id="107214">Measure</a> = <span title="org.squeryl.logging.Measure.Value">Value</span>
   <span class="keyword">val</span> <a title="org.squeryl.logging.Measure.Value" id="107215">AvgExecTime</a>, <a title="org.squeryl.logging.Measure.Value" id="107217">InvocationCount</a>, <a title="org.squeryl.logging.Measure.Value" id="107219">CumulativeExecutionTime</a>, <a title="org.squeryl.logging.Measure.Value" id="107221">AvgResultSetSize</a> = <span title="=&gt; org.squeryl.logging.Measure.Value">Value</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.logging.StatsSchema" id="13426">StatsSchema</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../Schema.scala.html#10171" title="org.squeryl.Schema">Schema</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="107198">drop</a> = <span class="keyword">super</span>.<a href="../Schema.scala.html#16619" title="=&gt; Unit">drop</a>

  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.logging.Statement]" id="107199">statements</a> = <a href="../Schema.scala.html#16637" title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span title="(name: String)(implicit manifestT: scala.reflect.Manifest[org.squeryl.logging.Statement])org.squeryl.Table[org.squeryl.logging.Statement]" class="delimiter">[</span><a href="#13404" title="org.squeryl.logging.Statement">Statement</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.squeryl.logging.Statement]" class="delimiter">(</span><span title="java.lang.String(&quot;Statementz&quot;)" class="string">&quot;Statementz&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.logging.StatementInvocation]" id="107201">statementInvocations</a> = <a href="../Schema.scala.html#16634" title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.logging.StatementInvocation])org.squeryl.Table[org.squeryl.logging.StatementInvocation]" class="delimiter">[</span><a href="#13464" title="org.squeryl.logging.StatementInvocation">StatementInvocation</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]" id="107203">invocationStats</a> =
    <a href="../dsl/boilerplate/FromSignatures.scala.html#18262" title="(t1: org.squeryl.Queryable[org.squeryl.logging.StatementInvocation])(f: org.squeryl.logging.StatementInvocation =&gt; org.squeryl.dsl.QueryYield[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]])org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]">from</a><span class="delimiter">(</span><a href="#107201" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocation" id="107945">si</a><span class="delimiter">)</span> =&gt;
      <a href="../dsl/boilerplate/GroupBySignatures.scala.html#17961" title="(e1: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.IntType], e2: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.fsm.GroupByState[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]]">groupBy</a><span class="delimiter">(</span><a href="#107945" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHash</a>, <a href="#107945" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
      <a href="../dsl/boilerplate/ComputeMeasuresSignaturesFromGroupByState.scala.html#88303" title="(e1: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.DoubleType]], e2: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.LongType], e3: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.LongType]], e4: =&gt; org.squeryl.dsl.ast.TypedExpressionNode[org.squeryl.PrimitiveTypeMode.FloatType])org.squeryl.dsl.fsm.ComputeStateFromGroupByState[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">compute</a><span class="delimiter">(</span><a href="../dsl/SqlFunctions.scala.html#17910" title="(e: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.UnaryAgregateFloatOp[org.squeryl.PrimitiveTypeMode.LongType]">avg</a><a href="../dsl/TypeArithmetic.scala.html#17327" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv3 : (op: org.squeryl.dsl.UnaryAgregateFloatOp[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.DoubleType]]" class="delimiter">(</a><a href="#107945" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/TypeArithmetic.scala.html#17051" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv23 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.LongType]">executeTime</a><span class="delimiter">)</span>, <a href="../dsl/SqlFunctions.scala.html#17931" title="=&gt; org.squeryl.PrimitiveTypeMode.CountFunction">count</a>, <a href="../dsl/SqlFunctions.scala.html#17907" title="(e: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.UnaryAgregateLengthNeutralOp[org.squeryl.PrimitiveTypeMode.LongType]">sum</a><a href="../dsl/TypeArithmetic.scala.html#17339" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv3 : (op: org.squeryl.dsl.UnaryAgregateLengthNeutralOp[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.LongType]]" class="delimiter">(</a><a href="#107945" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/TypeArithmetic.scala.html#17051" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv23 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.LongType,org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.LongType]">executeTime</a><span class="delimiter">)</span>, <a href="../dsl/SqlFunctions.scala.html#17934" title="(a: org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.FloatType]], b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NvlFunctionNumerical[org.squeryl.PrimitiveTypeMode.FloatType,org.squeryl.PrimitiveTypeMode.IntType]">nvl</a><a href="../dsl/TypeArithmetic.scala.html#17062" title="implicit org.squeryl.dsl.TypeArithmetic.binaryOpConv32 : (op: org.squeryl.dsl.BinaryAMSOp[org.squeryl.PrimitiveTypeMode.FloatType,org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalTypeConversion[org.squeryl.PrimitiveTypeMode.FloatType]" class="delimiter">(</a><a href="../dsl/SqlFunctions.scala.html#17910" title="(e: org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.UnaryAgregateFloatOp[Option[org.squeryl.PrimitiveTypeMode.IntType]]">avg</a><a href="../dsl/TypeArithmetic.scala.html#17332" title="implicit org.squeryl.dsl.TypeArithmetic.unaryOpConv7 : (op: org.squeryl.dsl.UnaryAgregateFloatOp[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.NumericalTypeConversion[Option[org.squeryl.PrimitiveTypeMode.FloatType]]" class="delimiter">(</a><a href="#107945" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17474" title="implicit org.squeryl.dsl.DslFactory.optionInt2ScalarInt : (i: Option[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]]">rowCount</a><span class="delimiter">)</span>,<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]" class="int">0</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="#13462" title="object org.squeryl.logging.Measure">Measure</a>._

  <span class="keyword">def</span> <a title="(topN: Int, measure: org.squeryl.logging.Measure.Measure)org.squeryl.Query[org.squeryl.logging.StatLine]" id="107205">topRankingStatements</a><span class="delimiter">(</span><a title="Int" id="107209">topN</a>: <span title="Int">Int</span>, <a title="org.squeryl.logging.Measure.Measure" id="107210">measure</a>: <span title="org.squeryl.logging.Measure.Measure">Measure</span><span class="delimiter">)</span> =
    <a href="../dsl/boilerplate/FromSignatures.scala.html#18267" title="(t1: org.squeryl.Queryable[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]], t2: org.squeryl.Queryable[org.squeryl.logging.Statement])(f: (org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]], org.squeryl.logging.Statement) =&gt; org.squeryl.dsl.QueryYield[org.squeryl.logging.StatLine])org.squeryl.Query[org.squeryl.logging.StatLine]">from</a><span class="delimiter">(</span><a href="#107203" title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]]">invocationStats</a>, <a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]" id="109545">si</a>,<a title="org.squeryl.logging.Statement" id="109546">s</a><span class="delimiter">)</span>=&gt;
      <a href="../dsl/QueryDsl.scala.html#17539" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78105" title="=&gt; Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]">key</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">_1</a> <a href="../dsl/FieldTypes.scala.html#20396" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#109546" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a> <a href="../dsl/ast/ExpressionNode.scala.html#64017" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a> <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78105" title="=&gt; Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType]">key</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">_2</a> <a href="../dsl/FieldTypes.scala.html#20396" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#109546" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
      <a href="../dsl/fsm/StartState.scala.html#18040" title="(yieldClosure: =&gt; org.squeryl.logging.StatLine)org.squeryl.dsl.fsm.SelectState[org.squeryl.logging.StatLine]">select</a><span class="delimiter">(</span><span title="org.squeryl.logging.StatLine" class="keyword">new</span> <a href="#13500" title="org.squeryl.logging.StatLine">StatLine</a><span class="delimiter">(</span><a href="#109546" title="org.squeryl.logging.Statement">s</a>, <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; Option[org.squeryl.PrimitiveTypeMode.DoubleType]">_1</span>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.DoubleType">get</span>, <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.LongType">_2</span>, <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; Option[org.squeryl.PrimitiveTypeMode.LongType]">_3</span>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.LongType">get</span>, <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<span title="=&gt; org.squeryl.PrimitiveTypeMode.FloatType">_4</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../dsl/boilerplate/OrderBySignatures.scala.html#22782" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.logging.StatLine]">orderBy</a><span class="delimiter">(</span><a href="#107210" title="org.squeryl.logging.Measure.Measure">measure</a> <a href="../dsl/DslFactory.scala.html#17509" title="implicit org.squeryl.dsl.DslFactory.orderByArg2OrderByExpression : (a: org.squeryl.dsl.ast.OrderByArg)org.squeryl.dsl.ast.OrderByExpression" class="keyword">match</a> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#107215" title="org.squeryl.dsl.ast.OrderByArg">AvgExecTime</a> =&gt; <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#17506" title="(e: Option[org.squeryl.PrimitiveTypeMode.DoubleType])(implicit evidence$2: Option[org.squeryl.PrimitiveTypeMode.DoubleType] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_1</a>.<a href="../dsl/ast/ExpressionNode.scala.html#24980" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#107217" title="org.squeryl.dsl.ast.OrderByArg">InvocationCount</a> =&gt; <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#17506" title="(e: org.squeryl.PrimitiveTypeMode.LongType)(implicit evidence$2: org.squeryl.PrimitiveTypeMode.LongType =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_2</a>.<a href="../dsl/ast/ExpressionNode.scala.html#24980" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#107219" title="org.squeryl.dsl.ast.OrderByArg">CumulativeExecutionTime</a> =&gt; <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#17506" title="(e: Option[org.squeryl.PrimitiveTypeMode.LongType])(implicit evidence$2: Option[org.squeryl.PrimitiveTypeMode.LongType] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_3</a>.<a href="../dsl/ast/ExpressionNode.scala.html#24980" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
        <span class="keyword">case</span> <a href="#107221" title="org.squeryl.dsl.ast.OrderByArg">AvgResultSetSize</a> =&gt; <a href="#109545" title="org.squeryl.dsl.GroupWithMeasures[Product2[org.squeryl.PrimitiveTypeMode.IntType,org.squeryl.PrimitiveTypeMode.IntType],Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]]">si</a>.<a href="../dsl/Group.scala.html#78106" title="=&gt; Product4[Option[org.squeryl.PrimitiveTypeMode.DoubleType],org.squeryl.PrimitiveTypeMode.LongType,Option[org.squeryl.PrimitiveTypeMode.LongType],org.squeryl.PrimitiveTypeMode.FloatType]">measures</a>.<a href="../dsl/DslFactory.scala.html#17506" title="(e: org.squeryl.PrimitiveTypeMode.FloatType)(implicit evidence$2: org.squeryl.PrimitiveTypeMode.FloatType =&gt; org.squeryl.dsl.ast.TypedExpressionNode[_])org.squeryl.dsl.ast.OrderByArg">_4</a>.<a href="../dsl/ast/ExpressionNode.scala.html#24980" title="=&gt; org.squeryl.dsl.ast.OrderByArg">desc</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    .<a href="../Query.scala.html#16346" title="(offset: Int, pageLength: Int)org.squeryl.Query[org.squeryl.logging.StatLine]">page</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#107209" title="Int">topN</a><span class="delimiter">)</span>

  <a href="../Schema.scala.html#16665" title="(table: org.squeryl.Table[org.squeryl.logging.Statement])(declarations: org.squeryl.logging.Statement =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit">on</a><span class="delimiter">(</span><a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="111863">s</a>=&gt; <a href="../Schema.scala.html#16662" title="(a: org.squeryl.dsl.ast.BaseColumnAttributeAssignment*)org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">declare</a><span class="delimiter">(</span>
    <a href="#111863" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#17470" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">sql</a> <a href="../dsl/FieldTypes.scala.html#25029" title="(columnAttributes: org.squeryl.internals.AttributeValidOnNonNumericalColumn*)(implicit restrictUsageWithinSchema: org.squeryl.Schema)org.squeryl.dsl.ast.ColumnAttributeAssignment">is</a><span class="delimiter">(</span><a href="../Schema.scala.html#16676" title="(declaration: String)org.squeryl.internals.DBType">dbType</a><span class="delimiter">(</span><span title="java.lang.String(&quot;clob&quot;)" class="string">&quot;clob&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>,
    <a href="#111863" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#17470" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">definitionOrCallSite</a> <a href="../dsl/FieldTypes.scala.html#25029" title="(columnAttributes: org.squeryl.internals.AttributeValidOnNonNumericalColumn*)(implicit restrictUsageWithinSchema: org.squeryl.Schema)org.squeryl.dsl.ast.ColumnAttributeAssignment">is</a><span class="delimiter">(</span><a href="../Schema.scala.html#16676" title="(declaration: String)org.squeryl.internals.DBType">dbType</a><span class="delimiter">(</span><span title="java.lang.String(&quot;varchar(512)&quot;)" class="string">&quot;varchar(512)&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">)</span><span class="delimiter">)</span>  

  <span class="keyword">def</span> <a title="(sie: org.squeryl.logging.StatementInvocationEvent)String" id="107206">recordStatementInvocation</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="110888">sie</a>: <a href="StatisticsListener.scala.html#13449" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.dsl.CompositeKey2[Int,Int]" id="110891">statementK</a> = <a href="#107208" title="(se: org.squeryl.logging.StatementInvocationEvent)org.squeryl.dsl.CompositeKey2[Int,Int]">_lookupOrCreateStatementAndReturnKey</a><span class="delimiter">(</span><a href="#110888" title="org.squeryl.logging.StatementInvocationEvent">sie</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.squeryl.logging.StatementInvocation" id="110892">si</a> = <a href="#107914" title="(se: org.squeryl.logging.StatementInvocationEvent, _statementHash: Int, _hCollision: Int)org.squeryl.logging.StatementInvocation" class="keyword">new</a> <a href="#13464" title="org.squeryl.logging.StatementInvocation">StatementInvocation</a><span class="delimiter">(</span><a href="#110888" title="org.squeryl.logging.StatementInvocationEvent">sie</a>, <a href="#110891" title="org.squeryl.dsl.CompositeKey2[Int,Int]">statementK</a>.<a href="../dsl/CompositeKey.scala.html#22217" title="=&gt; Int">a1</a>, <a href="#110891" title="org.squeryl.dsl.CompositeKey2[Int,Int]">statementK</a>.<a href="../dsl/CompositeKey.scala.html#22219" title="=&gt; Int">a2</a><span class="delimiter">)</span>
    <a href="#107201" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a>.<a href="../Table.scala.html#36875" title="(t: org.squeryl.logging.StatementInvocation)org.squeryl.logging.StatementInvocation">insert</a><span class="delimiter">(</span><a href="#110892" title="org.squeryl.logging.StatementInvocation">si</a><span class="delimiter">)</span>
    <a href="#110892" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="#111258" title="=&gt; String">id</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(statementInvocationId: String, iterationEndTime: Long, rowCount: Int, iterationCompleted: Boolean)Int" id="107207">recordEndOfIteration</a><span class="delimiter">(</span><a title="String" id="111280">statementInvocationId</a>: <span title="String">String</span>, <a title="Long" id="111281">iterationEndTime</a>: <span title="Long">Long</span>, <a title="Int" id="111282">rowCount</a>: <span title="Int">Int</span>, <a title="Boolean" id="111283">iterationCompleted</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <a href="../dsl/QueryDsl.scala.html#17586" title="(t: org.squeryl.Table[org.squeryl.logging.StatementInvocation])(s: org.squeryl.logging.StatementInvocation =&gt; org.squeryl.dsl.ast.UpdateStatement)Int">update</a><span class="delimiter">(</span><a href="#107201" title="=&gt; org.squeryl.Table[org.squeryl.logging.StatementInvocation]">statementInvocations</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocation" id="111294">si</a> =&gt;
      <a href="../dsl/QueryDsl.scala.html#17539" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#111294" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17470" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">id</a> <a href="../dsl/FieldTypes.scala.html#25011" title="(b: org.squeryl.dsl.NonNumericalExpression[org.squeryl.PrimitiveTypeMode.StringType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../dsl/DslFactory.scala.html#17470" title="implicit org.squeryl.dsl.DslFactory.string2ScalarString : (s: org.squeryl.PrimitiveTypeMode.StringType)org.squeryl.dsl.StringExpression[org.squeryl.PrimitiveTypeMode.StringType]">statementInvocationId</a><span class="delimiter">)</span>
      <a href="../dsl/fsm/StartState.scala.html#18043" title="(updateAssignments: org.squeryl.dsl.ast.UpdateAssignment*)(implicit cond: =:=[org.squeryl.dsl.fsm.Conditioned,org.squeryl.dsl.fsm.Conditioned])org.squeryl.dsl.ast.UpdateStatement">set</a><span class="delimiter">(</span><a href="#111294" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17475" title="implicit org.squeryl.dsl.DslFactory.optionLong2ScalarLong : (i: Option[org.squeryl.PrimitiveTypeMode.LongType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.LongType]]">iterationEndTime</a> <a href="../dsl/ast/ExpressionNode.scala.html#20387" title="(b: Some[Long])(implicit evidence$1: Some[Long] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.LongType]])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#111281" title="Long">iterationEndTime</a><span class="delimiter">)</span>, <a href="#111294" title="org.squeryl.logging.StatementInvocation">si</a>.<a href="../dsl/DslFactory.scala.html#17474" title="implicit org.squeryl.dsl.DslFactory.optionInt2ScalarInt : (i: Option[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.NumericalExpression[Option[org.squeryl.PrimitiveTypeMode.IntType]]">rowCount</a> <a href="../dsl/ast/ExpressionNode.scala.html#20387" title="(b: Some[Int])(implicit evidence$1: Some[Int] =&gt; org.squeryl.dsl.ast.TypedExpressionNode[Option[org.squeryl.PrimitiveTypeMode.IntType]])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#111282" title="Int">rowCount</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(se: org.squeryl.logging.StatementInvocationEvent)org.squeryl.dsl.CompositeKey2[Int,Int]" id="107208">_lookupOrCreateStatementAndReturnKey</a><span class="delimiter">(</span><a title="org.squeryl.logging.StatementInvocationEvent" id="110893">se</a>: <a href="StatisticsListener.scala.html#13449" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="110896">s</a> = <a href="#106311" title="(sql: String, definitionOrCallSite: String)org.squeryl.logging.Statement" class="keyword">new</a> <a href="#13404" title="org.squeryl.logging.Statement">Statement</a><span class="delimiter">(</span><a href="#110893" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#73948" title="=&gt; String">jdbcStatement</a>, <a href="#110893" title="org.squeryl.logging.StatementInvocationEvent">se</a>.<a href="StatisticsListener.scala.html#73953" title="=&gt; java.lang.String">definitionOrCallSite</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Option[org.squeryl.logging.Statement]" id="110897">storedStatement</a> = <a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../View.scala.html#22739" title="(k: org.squeryl.dsl.CompositeKey2[Int,Int])(implicit ev: &lt;:&lt;[org.squeryl.logging.Statement,org.squeryl.KeyedEntity[org.squeryl.dsl.CompositeKey2[Int,Int]]], implicit dsl: org.squeryl.dsl.QueryDsl)Option[org.squeryl.logging.Statement]">lookup</a><a href="../dsl/QueryDsl.scala.html#17536" title="&lt;:&lt;[org.squeryl.logging.Statement,org.squeryl.logging.Statement]" class="delimiter">(</a><a href="#110896" title="org.squeryl.logging.Statement">s</a>.<a href="#106313" title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]">id</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.logging.Statement" id="110898">result</a> =
      <span title="org.squeryl.logging.Statement" class="keyword">if</span><span class="delimiter">(</span><a href="#110897" title="Option[org.squeryl.logging.Statement]">storedStatement</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../Table.scala.html#36875" title="(t: org.squeryl.logging.Statement)org.squeryl.logging.Statement">insert</a><span class="delimiter">(</span><a href="#110896" title="org.squeryl.logging.Statement">s</a><span class="delimiter">)</span>
        <a href="#110896" title="org.squeryl.logging.Statement">s</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="org.squeryl.Query[org.squeryl.logging.Statement]" id="110944">q</a> =
          <a href="../dsl/boilerplate/FromSignatures.scala.html#18262" title="(t1: org.squeryl.Queryable[org.squeryl.logging.Statement])(f: org.squeryl.logging.Statement =&gt; org.squeryl.dsl.QueryYield[org.squeryl.logging.Statement])org.squeryl.Query[org.squeryl.logging.Statement]">from</a><span class="delimiter">(</span><a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="111091">st</a> =&gt;
            <a href="../dsl/QueryDsl.scala.html#17539" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#111091" title="org.squeryl.logging.Statement">st</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a> <a href="../dsl/FieldTypes.scala.html#20396" title="(b: org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#110896" title="org.squeryl.logging.Statement">s</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">hash</a><span class="delimiter">)</span>
            <a href="../dsl/fsm/StartState.scala.html#18040" title="(yieldClosure: =&gt; org.squeryl.logging.Statement)org.squeryl.dsl.fsm.SelectState[org.squeryl.logging.Statement]">select</a><span class="delimiter">(</span><a href="#111091" title="org.squeryl.logging.Statement">st</a><span class="delimiter">)</span>
            <a href="../dsl/boilerplate/OrderBySignatures.scala.html#22782" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.logging.Statement]">orderBy</a><span class="delimiter">(</span><a href="#111091" title="org.squeryl.logging.Statement">st</a>.<a href="../dsl/DslFactory.scala.html#17466" title="implicit org.squeryl.dsl.DslFactory.int2ScalarInt : (i: org.squeryl.PrimitiveTypeMode.IntType)org.squeryl.dsl.NumericalExpression[org.squeryl.PrimitiveTypeMode.IntType]">statementHashCollisionNumber</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="keyword">var</span> <a title="Int" id="110945">lastCollisionNum</a> = -<span title="Int(-1)" class="int">1</span>
        <span class="keyword">val</span> <a title="Option[org.squeryl.logging.Statement]" id="110946">mathingStatement</a> =
          <a href="#110944" title="org.squeryl.Query[org.squeryl.logging.Statement]">q</a>.<span title="(p: org.squeryl.logging.Statement =&gt; Boolean)Option[org.squeryl.logging.Statement]">find</span><span class="delimiter">(</span><a title="org.squeryl.logging.Statement" id="111235">st</a> =&gt; <span class="delimiter">{</span>
            <a href="#110945" title="Int">lastCollisionNum</a> = <a href="#111235" title="org.squeryl.logging.Statement">st</a>.<a href="#110906" title="=&gt; Int">statementHashCollisionNumber</a>
            <a href="#111235" title="org.squeryl.logging.Statement">st</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#110896" title="org.squeryl.logging.Statement">s</a>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <span title="org.squeryl.logging.Statement" class="keyword">if</span><span class="delimiter">(</span><a href="#110946" title="Option[org.squeryl.logging.Statement]">mathingStatement</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
          <a href="#110946" title="Option[org.squeryl.logging.Statement]">mathingStatement</a>.<span title="=&gt; org.squeryl.logging.Statement">get</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#110896" title="org.squeryl.logging.Statement">s</a>.<a href="#110906" title="(x$1: Int)Unit">statementHashCollisionNumber</a> = <a href="#110945" title="Int">lastCollisionNum</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
          <a href="#107199" title="=&gt; org.squeryl.Table[org.squeryl.logging.Statement]">statements</a>.<a href="../Table.scala.html#36875" title="(t: org.squeryl.logging.Statement)org.squeryl.logging.Statement">insert</a><span class="delimiter">(</span><a href="#110896" title="org.squeryl.logging.Statement">s</a><span class="delimiter">)</span>
          <a href="#110896" title="org.squeryl.logging.Statement">s</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <a href="#110898" title="org.squeryl.logging.Statement">result</a>.<a href="#106313" title="=&gt; org.squeryl.dsl.CompositeKey2[Int,Int]">id</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>