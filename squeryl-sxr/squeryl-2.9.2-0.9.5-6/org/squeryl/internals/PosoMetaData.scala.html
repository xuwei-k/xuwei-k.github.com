<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/squeryl/internals/PosoMetaData.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */</span>
<span class="keyword">package</span> org.squeryl.internals
 

<span class="keyword">import</span> java.lang.Class
<span class="keyword">import</span> java.lang.annotation.Annotation
<span class="keyword">import</span> net.sf.cglib.proxy.<span class="delimiter">{</span>Factory, Callback, CallbackFilter, Enhancer, NoOp<span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.reflect.<span class="delimiter">{</span>Member, Constructor, Method, Field, Modifier<span class="delimiter">}</span>
<span class="keyword">import</span> collection.mutable.<span class="delimiter">{</span>HashSet, ArrayBuffer<span class="delimiter">}</span>
<span class="keyword">import</span> org.squeryl.annotations._
<span class="keyword">import</span> org.squeryl._
<span class="keyword">import</span> dsl.CompositeKey

<span class="keyword">class</span> <a title="class PosoMetaData[T] extends java.lang.Object with ScalaObject" id="12658">PosoMetaData</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13299">T</a><span class="delimiter">]</span><a href="#12658" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="java.lang.Class[T]" id="37280">clasz</a>: <span title="java.lang.Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="org.squeryl.Schema" id="37281">schema</a>: <a href="../Schema.scala.html#10171" title="org.squeryl.Schema">Schema</a>, <span class="keyword">val</span> <a title="org.squeryl.View[T]" id="37282">viewOrTable</a>: <a href="../View.scala.html#10081" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="37254">toString</a> =
    <span title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="symbol">'PosoMetaData</span> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getSimpleName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37261" title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">fieldsMetaData</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>,<span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: String)Option[org.squeryl.internals.FieldMetaData]" id="37255">findFieldMetaDataForProperty</a><span class="delimiter">(</span><a title="String" id="66832">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
     <a href="#37261" title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">fieldsMetaData</a>.<span title="(p: org.squeryl.internals.FieldMetaData =&gt; Boolean)Option[org.squeryl.internals.FieldMetaData]">find</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="66836">fmd</a> =&gt; <a href="#66836" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="FieldMetaData.scala.html#48365" title="=&gt; String">nameOfProperty</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#66832" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="Boolean" id="37256">isOptimistic</a> = classOf<span title="java.lang.Class[org.squeryl.Optimistic](classOf[org.squeryl.Optimistic])" class="delimiter">[</span>Optimistic<span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a><span class="delimiter">)</span>
  
  <span class="keyword">val</span> <a title="(java.lang.reflect.Constructor[_], Array[java.lang.Object])" id="37258">constructor</a> =
    <a href="#37266" title="=&gt; scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">_const</a>.<span title="=&gt; Option[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">headOption</span>.<span title="(alternative: =&gt; Option[(java.lang.reflect.Constructor[_], Array[java.lang.Object])])Option[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">orElse</span><span class="delimiter">(</span>org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot; must have a 0 param constructor or a constructor with only primitive types&quot;)" class="string">&quot; must have a 0 param constructor or a constructor with only primitive types&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">get</span>

  <span class="comment">/**
   * @arg fieldsMetaData the metadata of the persistent fields of this Poso
   * @arg primaryKey None if this Poso is not a KeyedEntity[], Either[a persistedField, a composite key]  
   */</span>
  <span class="keyword">val</span> <a href="#37261" title="(Iterable[org.squeryl.internals.FieldMetaData], Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]])" class="delimiter">(</a><a href="#37260" title="Iterable[org.squeryl.internals.FieldMetaData]" id="37261">fieldsMetaData</a>, <a href="#37260" title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]" id="37263">primaryKey</a><span class="delimiter">)</span>: <span title="(Iterable[org.squeryl.internals.FieldMetaData], Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]])" class="delimiter">(</span>Iterable<span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Either<span class="delimiter">[</span>FieldMetaData,Method<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData], Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]) @unchecked" class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Boolean" id="42798">isImplicitMode</a> = <a href="#37272" title="=&gt; Boolean">_isImplicitMode</a>

    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]" id="42799">setters</a> = <span title="()scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]">ArrayBuffer</span><span class="delimiter">[</span>Method<span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="AnyRef" id="42800">sampleInstance4OptionTypeDeduction</a> =
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; java.lang.reflect.Constructor[_]">_1</span>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; Array[java.lang.Object]">_2</span> :_*<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>;
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="43873">e</a>:<span title="IllegalArgumentException">IllegalArgumentException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;invalid constructor choice &quot;)" class="string">&quot;invalid constructor choice &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; java.lang.reflect.Constructor[_]">_1</span>, <a href="#43873" title="IllegalArgumentException">e</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="Nothing" id="43885">e</a>:<span title="Exception">Exception</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;exception occurred while invoking constructor : &quot;)" class="string">&quot;exception occurred while invoking constructor : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; java.lang.reflect.Constructor[_]">_1</span>, <a href="#43885" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]" id="42801">members</a> = <span title="()scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Member,HashSet<span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

    <a href="#37278" title="(clasz: java.lang.Class[_], members: scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])Unit">_fillWithMembers</a><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>, <a href="#42801" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">members</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[java.lang.String,scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]]" id="42802">name2MembersMap</a> =
      <a href="#42801" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">members</a>.<span title="(f: ((java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])) =&gt; java.lang.String)scala.collection.immutable.Map[java.lang.String,scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]]">groupBy</span><span class="delimiter">(</span><a title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" id="43903">m</a> =&gt; <span class="delimiter">{</span>

        <span class="keyword">val</span> <a title="java.lang.String" id="43904">n</a> = <a href="#43903" title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">m</a>.<span title="=&gt; java.lang.reflect.Member">_1</span>.<span title="()java.lang.String">getName</span>
        <span class="keyword">val</span> <a title="Int" id="43905">idx</a> = <a href="#43904" title="java.lang.String">n</a>.<span title="(x$1: java.lang.String)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_$eq&quot;)" class="string">&quot;_$eq&quot;</span><span class="delimiter">)</span>
        <span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><a href="#43905" title="Int">idx</a> <span title="(x: Int)Boolean">!=</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#43904" title="java.lang.String">n</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#43905" title="Int">idx</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#43904" title="java.lang.String">n</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]" id="42803">fmds</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]">ArrayBuffer</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span>;

    <span class="keyword">for</span><span class="delimiter">(</span><a title="(java.lang.String, scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])" id="44035">e</a> &lt;- <a href="#42802" title="(f: ((java.lang.String, scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])) =&gt; Unit)Unit">name2MembersMap</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="44036">name</a> = <a href="#44035" title="(java.lang.String, scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])">e</a>.<span title="=&gt; java.lang.String">_1</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]" id="44037">v</a> = <a href="#44035" title="(java.lang.String, scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])">e</a>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">_2</span>

      <span class="keyword">var</span> <a title="Set[java.lang.annotation.Annotation]" id="44038">a</a>:<span title="Set[java.lang.annotation.Annotation]">Set</span><span class="delimiter">[</span>Annotation<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[java.lang.annotation.Annotation]">empty</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" id="44120">memberWithAnnotationTuple</a> &lt;- <a href="#44037" title="(f: ((java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])) =&gt; Unit)Unit">v</a><span class="delimiter">)</span>
        <a href="#44038" title="Set[java.lang.annotation.Annotation]">a</a> = <a href="#44038" title="Set[java.lang.annotation.Annotation]">a</a>.<span title="(that: scala.collection.GenSet[java.lang.annotation.Annotation])scala.collection.immutable.Set[java.lang.annotation.Annotation]">union</span><span class="delimiter">(</span><a href="#44120" title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">memberWithAnnotationTuple</a>.<span title="=&gt; scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">_2</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]" id="44039">members</a> = <a href="#44037" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">v</a>.<span title="(f: ((java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])) =&gt; java.lang.reflect.Member)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])],java.lang.reflect.Member,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]])scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,java.lang.reflect.Member,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]]" class="delimiter">(</span><a title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" id="44172">t</a> =&gt; <a href="#44172" title="(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">t</a>.<span title="=&gt; java.lang.reflect.Member">_1</span><span class="delimiter">)</span>

      <span class="comment">// here we do a filter and not a find, because there can be more than one setter/getter/field</span>
      <span class="comment">// with the same name, we want one that is not an erased type, excluding return and input type</span>
      <span class="comment">// of java.lang.Object does it.</span>

      <span class="keyword">val</span> <a title="java.lang.Class[java.lang.Object]" id="44040">o</a> = classOf<span title="java.lang.Class[java.lang.Object](classOf[java.lang.Object])" class="delimiter">[</span>java.lang.Object<span class="delimiter">]</span>

      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Field]" id="44041">field</a> =
        <a href="#44039" title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">members</a>.<span title="(p: java.lang.reflect.Member =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Member" id="45147">m</a> =&gt; <a href="#45147" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="java.lang.reflect.Field">Field</span><span class="delimiter">]</span><span class="delimiter">)</span>.
           <span title="(f: java.lang.reflect.Member =&gt; java.lang.reflect.Field)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member],java.lang.reflect.Field,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Field]])scala.collection.mutable.ArrayBuffer[java.lang.reflect.Field]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,java.lang.reflect.Field,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Field]]" class="delimiter">(</span><a title="java.lang.reflect.Member" id="45277">m</a>=&gt; <a href="#45277" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.reflect.Field" class="delimiter">[</span><span title="java.lang.reflect.Field">Field</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(p: java.lang.reflect.Field =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Field]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="45332">f</a>=&gt; <a href="#45332" title="java.lang.reflect.Field">f</a>.<span title="()java.lang.Class[_]">getType</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#44040" title="java.lang.Class[java.lang.Object]">o</a><span class="delimiter">)</span>.<span title="=&gt; Option[java.lang.reflect.Field]">headOption</span>

      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="44042">getter</a> =
        <a href="#44039" title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">members</a>.<span title="(p: java.lang.reflect.Member =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Member" id="45342">m</a> =&gt; <a href="#45342" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="java.lang.reflect.Method">Method</span><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#45342" title="java.lang.reflect.Member">m</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#44036" title="java.lang.String">name</a><span class="delimiter">)</span>.
          <span title="(f: java.lang.reflect.Member =&gt; java.lang.reflect.Method)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member],java.lang.reflect.Method,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]])scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,java.lang.reflect.Method,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]]" class="delimiter">(</span><a title="java.lang.reflect.Member" id="45367">m</a>=&gt; <a href="#45367" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.reflect.Method" class="delimiter">[</span><span title="java.lang.reflect.Method">Method</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(p: java.lang.reflect.Method =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="45422">m</a>=&gt; <a href="#45422" title="java.lang.reflect.Method">m</a>.<span title="()java.lang.Class[_]">getReturnType</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#44040" title="java.lang.Class[java.lang.Object]">o</a><span class="delimiter">)</span>.<span title="=&gt; Option[java.lang.reflect.Method]">headOption</span>

      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="44043">setter</a> =
        <a href="#44039" title="scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">members</a>.<span title="(p: java.lang.reflect.Member =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Member" id="45432">m</a> =&gt; <a href="#45432" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="java.lang.reflect.Method">Method</span><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#45432" title="java.lang.reflect.Member">m</a>.<span title="()java.lang.String">getName</span>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;_$eq&quot;)" class="string">&quot;_$eq&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.
          <span title="(f: java.lang.reflect.Member =&gt; java.lang.reflect.Method)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[java.lang.reflect.Member],java.lang.reflect.Method,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]])scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,java.lang.reflect.Method,scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]]" class="delimiter">(</span><a title="java.lang.reflect.Member" id="45452">m</a>=&gt; <a href="#45452" title="java.lang.reflect.Member">m</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.reflect.Method" class="delimiter">[</span><span title="java.lang.reflect.Method">Method</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(p: java.lang.reflect.Method =&gt; Boolean)scala.collection.mutable.ArrayBuffer[java.lang.reflect.Method]">filter</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="45489">m</a>=&gt; <a href="#45489" title="java.lang.reflect.Method">m</a>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>.<span title="(i: Int)java.lang.Class[_]">apply</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#44040" title="java.lang.Class[java.lang.Object]">o</a><span class="delimiter">)</span>.<span title="=&gt; Option[java.lang.reflect.Method]">headOption</span>

      <span class="keyword">val</span> <a title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" id="44044">property</a> = <span title="(_1: Option[java.lang.reflect.Field], _2: Option[java.lang.reflect.Method], _3: Option[java.lang.reflect.Method], _4: Set[java.lang.annotation.Annotation])(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" class="delimiter">(</span><a href="#44041" title="Option[java.lang.reflect.Field]">field</a>, <a href="#44042" title="Option[java.lang.reflect.Method]">getter</a>, <a href="#44043" title="Option[java.lang.reflect.Method]">setter</a>, <a href="#44038" title="Set[java.lang.annotation.Annotation]">a</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#42798" title="Boolean">isImplicitMode</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#37273" title="(property: (Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation]))Boolean">_groupOfMembersIsProperty</a><span class="delimiter">(</span><a href="#44044" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a><span class="delimiter">)</span><span class="delimiter">)</span> 
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="#42803" title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]">fmds</a>.<span title="(elems: org.squeryl.internals.FieldMetaData*)Unit">append</span><span class="delimiter">(</span><a href="FieldMetaData.scala.html#12578" title="object org.squeryl.internals.FieldMetaData">FieldMetaData</a>.<a href="FieldMetaData.scala.html#45516" title="=&gt; java.lang.Object with org.squeryl.internals.FieldMetaDataFactory">factory</a>.<a href="FieldMetaData.scala.html#45536" title="(parentMetaData: org.squeryl.internals.PosoMetaData[_], name: String, property: (Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation]), sampleInstance4OptionTypeDeduction: AnyRef, isOptimisticCounter: Boolean)org.squeryl.internals.FieldMetaData">build</a><span class="delimiter">(</span><a href="#12658" title="org.squeryl.internals.PosoMetaData[T]" class="keyword">this</a>, <a href="#44036" title="java.lang.String">name</a>, <a href="#44044" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>, <a href="#42800" title="AnyRef">sampleInstance4OptionTypeDeduction</a>, <a href="#37256" title="=&gt; Boolean">isOptimistic</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#44036" title="java.lang.String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;occVersionNumber&quot;)" class="string">&quot;occVersionNumber&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Nothing" id="48496">e</a>:<span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span>
              <a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32753" title="(s: =&gt; String)String">failSafeString</a><span class="delimiter">(</span>
              <span title="java.lang.String(&quot;error while reflecting on metadata for &quot;)" class="string">&quot;error while reflecting on metadata for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#44044" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a> <span title="(x$1: Any)java.lang.String">+</span> 
              <span title="java.lang.String(&quot; of class &quot;)" class="string">&quot; of class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#12658" title="PosoMetaData.this.type" class="keyword">this</a>.<a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getCanonicalName</span><span class="delimiter">)</span>, <a href="#48496" title="Exception">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Option[org.squeryl.internals.FieldMetaData]" id="42804">k</a> = <a href="#42803" title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]">fmds</a>.<span title="(p: org.squeryl.internals.FieldMetaData =&gt; Boolean)Option[org.squeryl.internals.FieldMetaData]">find</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="48522">fmd</a> =&gt; <a href="#48522" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="FieldMetaData.scala.html#48393" title="=&gt; Boolean">isIdFieldOfKeyedEntity</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="42805">compositePrimaryKeyGetter</a>: <span title="Option[java.lang.reflect.Method]">Option</span><span class="delimiter">[</span>Method<span class="delimiter">]</span> =
      <span title="Option[java.lang.reflect.Method]" class="keyword">if</span><span class="delimiter">(</span><a href="#42804" title="Option[org.squeryl.internals.FieldMetaData]">k</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="comment">// can't have both PK Field and CompositePK</span>
        <span title="object None">None</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// verify if we have an 'id' method that is a composite key, in this case we need to construct a</span>
        <span class="comment">// FieldMetaData that will become the 'primaryKey' field of this PosoMetaData</span>
        <span class="keyword">val</span> <a title="Boolean" id="48553">isKE</a> = classOf<span title="java.lang.Class[org.squeryl.KeyedEntity[Any]](classOf[org.squeryl.KeyedEntity])" class="delimiter">[</span>KeyedEntity<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="48554">isIKE</a> = classOf<span title="java.lang.Class[org.squeryl.IndirectKeyedEntity[_, _]](classOf[org.squeryl.IndirectKeyedEntity])" class="delimiter">[</span>IndirectKeyedEntity<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a><span class="delimiter">)</span>
        <span title="Option[java.lang.reflect.Method]" class="keyword">if</span><span class="delimiter">(</span><a href="#48553" title="Boolean">isKE</a> <span title="(x: Boolean)Boolean">||</span> <a href="#48554" title="Boolean">isIKE</a><span class="delimiter">)</span> <span class="delimiter">{</span>

          <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="48565">pkMethod</a> =
            <span title="java.lang.reflect.Method" class="keyword">if</span><span class="delimiter">(</span><a href="#48553" title="Boolean">isKE</a><span class="delimiter">)</span>
              <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="java.lang.String(&quot;id&quot;)" class="string">&quot;id&quot;</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="java.lang.String(&quot;idField&quot;)" class="string">&quot;idField&quot;</span><span class="delimiter">)</span>

          <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#48565" title="java.lang.reflect.Method">pkMethod</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>, <span title="java.lang.String(&quot;method id or idField should exist in class &quot;)" class="string">&quot;method id or idField should exist in class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>

          <span title="(x: java.lang.reflect.Method)Some[java.lang.reflect.Method]">Some</span><span class="delimiter">(</span><a href="#48565" title="java.lang.reflect.Method">pkMethod</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span>
          <span title="object None">None</span>
      <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]" id="42806">metaDataForPk</a>: <span title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]">Option</span><span class="delimiter">[</span>Either<span class="delimiter">[</span>FieldMetaData,Method<span class="delimiter">]</span><span class="delimiter">]</span> =
      <span title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]" class="keyword">if</span><span class="delimiter">(</span><a href="#42804" title="Option[org.squeryl.internals.FieldMetaData]">k</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
        <span title="(x: Left[org.squeryl.internals.FieldMetaData,Nothing])Some[Left[org.squeryl.internals.FieldMetaData,Nothing]]">Some</span><span class="delimiter">(</span><span title="(a: org.squeryl.internals.FieldMetaData)Left[org.squeryl.internals.FieldMetaData,Nothing]">Left</span><span class="delimiter">(</span><a href="#42804" title="Option[org.squeryl.internals.FieldMetaData]">k</a>.<span title="=&gt; org.squeryl.internals.FieldMetaData">get</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]" class="keyword">if</span><span class="delimiter">(</span><a href="#42805" title="Option[java.lang.reflect.Method]">compositePrimaryKeyGetter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
        <span title="(x: Right[Nothing,java.lang.reflect.Method])Some[Right[Nothing,java.lang.reflect.Method]]">Some</span><span class="delimiter">(</span><span title="(b: java.lang.reflect.Method)Right[Nothing,java.lang.reflect.Method]">Right</span><span class="delimiter">(</span><a href="#42805" title="Option[java.lang.reflect.Method]">compositePrimaryKeyGetter</a>.<span title="=&gt; java.lang.reflect.Method">get</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <span title="object None">None</span>
    
    <span title="(_1: scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData], _2: Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]])(scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData], Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]])" class="delimiter">(</span><a href="#42803" title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.FieldMetaData]">fmds</a>, <a href="#42806" title="Option[Either[org.squeryl.internals.FieldMetaData,java.lang.reflect.Method]]">metaDataForPk</a><span class="delimiter">)</span> <span class="comment">//: (Iterable[FieldMetaData], Option[Either[FieldMetaData,Method]])</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Option[org.squeryl.internals.FieldMetaData]" id="37265">optimisticCounter</a> =
    <a href="#37261" title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">fieldsMetaData</a>.<span title="(p: org.squeryl.internals.FieldMetaData =&gt; Boolean)Option[org.squeryl.internals.FieldMetaData]">find</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="64007">fmd</a> =&gt; <a href="#64007" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="FieldMetaData.scala.html#48379" title="=&gt; Boolean">isOptimisticCounter</a><span class="delimiter">)</span>

  <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#37256" title="=&gt; Boolean">isOptimistic</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#37265" title="=&gt; Option[org.squeryl.internals.FieldMetaData]">optimisticCounter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]" id="37266">_const</a> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]" id="42944">r</a> = <span title="()scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Constructor<span class="delimiter">[</span>_<span class="delimiter">]</span>,Array<span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

<span class="comment">//    for(ct &lt;- clasz.getConstructors)</span>
<span class="comment">//      println(&quot;CT: &quot; + ct.getParameterTypes.map(c=&gt;c.getName).mkString(&quot;,&quot;))</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.reflect.Constructor[_]" id="43833">ct</a> &lt;- <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="(f: java.lang.reflect.Constructor[_] =&gt; Unit)Unit">getConstructors</span><span class="delimiter">)</span>
      <a href="#37267" title="(r: scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])], c: java.lang.reflect.Constructor[_])Unit">_tryToCreateParamArray</a><span class="delimiter">(</span><a href="#42944" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">r</a>, <a href="#43833" title="java.lang.reflect.Constructor[_]">ct</a><span class="delimiter">)</span>

    <a href="#42944" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">r</a>.<span title="(lt: ((java.lang.reflect.Constructor[_], Array[java.lang.Object]), (java.lang.reflect.Constructor[_], Array[java.lang.Object])) =&gt; Boolean)scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">sortWith</span><span class="delimiter">(</span>
      <span class="delimiter">(</span>a:<span title="(java.lang.reflect.Constructor[_], Array[java.lang.Object])" class="delimiter">(</span>Constructor<span class="delimiter">[</span>_<span class="delimiter">]</span>,Array<span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span>,
       b:<span title="(java.lang.reflect.Constructor[_], Array[java.lang.Object])" class="delimiter">(</span>Constructor<span class="delimiter">[</span>_<span class="delimiter">]</span>,Array<span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#43850" title="(java.lang.reflect.Constructor[_], Array[java.lang.Object])">a</a>.<span title="=&gt; Array[java.lang.Object]">_2</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#43851" title="(java.lang.reflect.Constructor[_], Array[java.lang.Object])">b</a>.<span title="=&gt; Array[java.lang.Object]">_2</span>.<span title="=&gt; Int">length</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(r: scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])], c: java.lang.reflect.Constructor[_])Unit" id="37267">_tryToCreateParamArray</a><span class="delimiter">(</span>
    <a title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]" id="43834">r</a>: <span title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Constructor<span class="delimiter">[</span>_<span class="delimiter">]</span>,Array<span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>,
    <a title="java.lang.reflect.Constructor[_]" id="43835">c</a>: <span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Array[java.lang.Class[_]]" id="102115">params</a>: <span title="Array[java.lang.Class[_]]">Array</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#43835" title="java.lang.reflect.Constructor[_]">c</a>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102115" title="Array[java.lang.Class[_]]">params</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="102128">cn</a> = <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getName</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="102129">test</a> = <a href="#102115" title="(i: Int)java.lang.Class[_]">params</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getSimpleName</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102128" title="java.lang.String">cn</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#102129" title="java.lang.String">test</a><span class="delimiter">)</span>
        org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;inner classes are not supported, except when outer class is a singleton (object)\012inner class is : &quot;)" class="string">&quot;inner classes are not supported, except when outer class is a singleton (object)\ninner class is : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#102128" title="java.lang.String">cn</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Array[java.lang.Object]" id="102116">res</a> = <span title="Array[java.lang.Object]" class="keyword">new</span> <span title="Array[java.lang.Object]">Array</span><span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">(</span><a href="#102115" title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">params</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="102497">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(f: Int =&gt; Unit)Unit">to</span> <a href="#102115" title="Array[java.lang.Class[_]]">params</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.Object" id="102498">v</a> = <a href="FieldMetaData.scala.html#12578" title="object org.squeryl.internals.FieldMetaData">FieldMetaData</a>.<a href="FieldMetaData.scala.html#45532" title="(member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.package.Column])java.lang.Object">createDefaultValue</a><span class="delimiter">(</span><a href="#43835" title="java.lang.reflect.Constructor[_]">c</a>, <a href="#102115" title="(i: Int)java.lang.Class[_]">params</a><span class="delimiter">(</span><a href="#102497" title="Int">i</a><span class="delimiter">)</span>, <span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
      <a href="#102116" title="(i: Int, x: java.lang.Object)Unit">res</a><span class="delimiter">(</span><a href="#102497" title="Int">i</a><span class="delimiter">)</span> = <a href="#102498" title="java.lang.Object">v</a>
    <span class="delimiter">}</span>

    <a href="#43834" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Constructor[_], Array[java.lang.Object])]">r</a>.<span title="(elems: (java.lang.reflect.Constructor[_], Array[java.lang.Object])*)Unit">append</span><span class="delimiter">(</span><span title="(_1: java.lang.reflect.Constructor[_$7], _2: Array[java.lang.Object])(java.lang.reflect.Constructor[_$7], Array[java.lang.Object])" class="delimiter">(</span><a href="#43835" title="java.lang.reflect.Constructor[_]">c</a>, <a href="#102116" title="Array[java.lang.Object]">res</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="37268">_noOptionalColumnDeclared</a> =
    org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;class &quot;)" class="string">&quot;class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has an Option[] member with no Column annotation with optionType declared.&quot;)" class="string">&quot; has an Option[] member with no Column annotation with optionType declared.&quot;</span><span class="delimiter">)</span>

  <span class="comment">//def createSamplePoso[T](vxn: ViewExpressionNode[T], classOfT: Class[T]): T = {</span>
    <span class="comment">//Enhancer.create(classOfT, new PosoPropertyAccessInterceptor(vxn)).asInstanceOf[T]</span>
  <span class="comment">//}</span>

  <span class="keyword">def</span> <a title="(cb: net.sf.cglib.proxy.Callback)T" id="37269">createSample</a><span class="delimiter">(</span><a title="net.sf.cglib.proxy.Callback" id="65426">cb</a>: <span title="net.sf.cglib.proxy.Callback">Callback</span><span class="delimiter">)</span> =
    <a href="FieldReferenceLinker.scala.html#12686" title="object org.squeryl.internals.FieldReferenceLinker">FieldReferenceLinker</a>.<a href="FieldReferenceLinker.scala.html#20485" title="(expressionWithSideEffectsASTConstructionThreadLocalState: =&gt; T)T">executeAndRestoreLastAccessedFieldReference</a><span class="delimiter">(</span><a href="#37270" title="(v1: net.sf.cglib.proxy.Callback)T">_builder</a><span class="delimiter">(</span><a href="#65426" title="net.sf.cglib.proxy.Callback">cb</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="net.sf.cglib.proxy.Callback =&gt; T" id="37270">_builder</a>: <span class="delimiter">(</span>Callback<span class="delimiter">)</span> =&gt; T = <span class="delimiter">{</span>


    <span class="keyword">val</span> <a title="net.sf.cglib.proxy.Enhancer" id="102519">e</a> = <span title="net.sf.cglib.proxy.Enhancer" class="keyword">new</span> <span title="net.sf.cglib.proxy.Enhancer">Enhancer</span>
    <a href="#102519" title="net.sf.cglib.proxy.Enhancer">e</a>.<span title="(x$1: java.lang.Class[_])Unit">setSuperclass</span><span class="delimiter">(</span><a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[java.lang.Class[_]]" id="102520">pc</a>: <span title="Array[java.lang.Class[_]]">Array</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; java.lang.reflect.Constructor[_]">_1</span>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>
    <span class="keyword">val</span> <a title="Array[java.lang.Object]" id="102521">args</a>:<span title="Array[java.lang.Object]">Array</span><span class="delimiter">[</span>Object<span class="delimiter">]</span> = <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; Array[java.lang.Object]">_2</span>
    <a href="#102519" title="net.sf.cglib.proxy.Enhancer">e</a>.<span title="(x$1: Boolean)Unit">setUseFactory</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

    <span class="delimiter">(</span>callB:<span title="net.sf.cglib.proxy.Callback">Callback</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="Array[net.sf.cglib.proxy.Callback]" id="102739">cb</a> = <span title="[T](xs: T*)(implicit evidence$2: scala.reflect.ClassManifest[T])Array[T]">Array</span><span title="(xs: net.sf.cglib.proxy.Callback*)(implicit evidence$2: scala.reflect.ClassManifest[net.sf.cglib.proxy.Callback])Array[net.sf.cglib.proxy.Callback]" class="delimiter">[</span><span title="net.sf.cglib.proxy.Callback">Callback</span><span class="delimiter">]</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[net.sf.cglib.proxy.Callback]" class="delimiter">(</span><a href="#102738" title="net.sf.cglib.proxy.Callback">callB</a>, <span title="object net.sf.cglib.proxy.NoOp">NoOp</span>.<span title="net.sf.cglib.proxy.NoOp">INSTANCE</span><span class="delimiter">)</span>
      <a href="#102519" title="net.sf.cglib.proxy.Enhancer">e</a>.<span title="(x$1: Array[net.sf.cglib.proxy.Callback])Unit">setCallbacks</span><span class="delimiter">(</span><a href="#102739" title="Array[net.sf.cglib.proxy.Callback]">cb</a><span class="delimiter">)</span>
      <a href="#102519" title="net.sf.cglib.proxy.Enhancer">e</a>.<span title="(x$1: net.sf.cglib.proxy.CallbackFilter)Unit">setCallbackFilter</span><span class="delimiter">(</span><a href="#12659" title="object org.squeryl.internals.PosoMetaData">PosoMetaData</a>.<a href="#102761" title="=&gt; java.lang.Object with net.sf.cglib.proxy.CallbackFilter">finalizeFilter</a><span class="delimiter">)</span>
      <span class="comment">//TODO : are we creating am unnecessary instance ?  </span>
      <span class="keyword">val</span> <a title="net.sf.cglib.proxy.Factory" id="102740">fac</a> = <a href="#102519" title="net.sf.cglib.proxy.Enhancer">e</a>.<span title="(x$1: Array[java.lang.Class[_]], x$2: Array[java.lang.Object])java.lang.Object">create</span><span class="delimiter">(</span><a href="#102520" title="Array[java.lang.Class[_]]">pc</a> , <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; Array[java.lang.Object]">_2</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="net.sf.cglib.proxy.Factory" class="delimiter">[</span><span title="net.sf.cglib.proxy.Factory">Factory</span><span class="delimiter">]</span>

      <a href="#102740" title="net.sf.cglib.proxy.Factory">fac</a>.<span title="(x$1: Array[java.lang.Class[_]], x$2: Array[java.lang.Object], x$3: Array[net.sf.cglib.proxy.Callback])java.lang.Object">newInstance</span><span class="delimiter">(</span><a href="#102520" title="Array[java.lang.Class[_]]">pc</a>, <a href="#37258" title="=&gt; (java.lang.reflect.Constructor[_], Array[java.lang.Object])">constructor</a>.<span title="=&gt; Array[java.lang.Object]">_2</span>, <a href="#102739" title="Array[net.sf.cglib.proxy.Callback]">cb</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#13299" title="T">T</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="37272">_isImplicitMode</a> = <span class="delimiter">{</span>
    
    <span class="keyword">val</span> <a title="org.squeryl.annotations.Row" id="42810">rowAnnotation</a> = <a href="#37280" title="=&gt; java.lang.Class[T]">clasz</a>.<span title="(x$1: java.lang.Class[org.squeryl.annotations.Row])org.squeryl.annotations.Row">getAnnotation</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[org.squeryl.annotations.Row](classOf[org.squeryl.annotations.Row])" class="delimiter">[</span>Row<span class="delimiter">]</span><span class="delimiter">)</span>

    <a href="#42810" title="org.squeryl.annotations.Row">rowAnnotation</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">||</span>
     <a href="#42810" title="org.squeryl.annotations.Row">rowAnnotation</a>.<a href="../annotations/Row.java.html#42817" title="()org.squeryl.annotations.FieldToColumnCorrespondanceMode">fieldToColumnCorrespondanceMode</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../annotations/FieldToColumnCorrespondanceMode.java.html#10561" title="object org.squeryl.annotations.FieldToColumnCorrespondanceMode">FieldToColumnCorrespondanceMode</a>.<a href="../annotations/FieldToColumnCorrespondanceMode.java.html#42860" title="org.squeryl.annotations.FieldToColumnCorrespondanceMode">IMPLICIT</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(property: (Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation]))Boolean" id="37273">_groupOfMembersIsProperty</a><span class="delimiter">(</span><a title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" id="45508">property</a>: <span title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" class="delimiter">(</span>Option<span class="delimiter">[</span>Field<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Set<span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>  = <span class="delimiter">{</span>
    
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Set[java.lang.annotation.Annotation]">_4</span>.<span title="(p: java.lang.annotation.Annotation =&gt; Boolean)Option[java.lang.annotation.Annotation]">find</span><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="102823">an</a> =&gt; <a href="#102823" title="java.lang.annotation.Annotation">an</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../annotations/Transient.java.html#10551" title="org.squeryl.annotations.Transient">Transient</a><span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>    

    <span class="keyword">val</span> <a title="Boolean" id="102812">hasAField</a> = <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Field]">_1</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span>
	
	<span class="keyword">val</span> <a title="Boolean" id="102813">isAStaticField</a> = <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Field]">_1</span>.<span title="(f: java.lang.reflect.Field =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="102837">f</a> =&gt; <span title="object java.lang.reflect.Modifier">Modifier</span>.<span title="(x$1: Int)Boolean">isStatic</span><span class="delimiter">(</span><a href="#102837" title="java.lang.reflect.Field">f</a>.<span title="()Int">getModifiers</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Boolean" id="102814">hasGetter</a> = <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span title="=&gt; Boolean">!</span> classOf<span title="java.lang.Class[java.lang.Void](classOf[java.lang.Void])" class="delimiter">[</span>java.lang.Void<span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="()java.lang.Class[_]">getReturnType</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span>

    <span class="keyword">val</span> <a title="Boolean" id="102815">hasSetter</a> = <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_3</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_3</span>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]" id="102816">memberTypes</a> = <span title="()scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">ArrayBuffer</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102812" title="Boolean">hasAField</a><span class="delimiter">)</span>
      <a href="#102816" title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">memberTypes</a>.<span title="(elems: java.lang.Class[_]*)Unit">append</span><span class="delimiter">(</span><a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Field]">_1</span>.<span title="=&gt; java.lang.reflect.Field">get</span>.<span title="()java.lang.Class[_]">getType</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102814" title="Boolean">hasGetter</a><span class="delimiter">)</span>
      <a href="#102816" title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">memberTypes</a>.<span title="(elems: java.lang.Class[_]*)Unit">append</span><span class="delimiter">(</span><a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="()java.lang.Class[_]">getReturnType</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102815" title="Boolean">hasSetter</a><span class="delimiter">)</span>
      <a href="#102816" title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">memberTypes</a>.<span title="(elems: java.lang.Class[_]*)Unit">append</span><span class="delimiter">(</span><a href="#45508" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_3</span>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="()Array[java.lang.Class[_]]">getParameterTypes</span>.<span title="(i: Int)java.lang.Class[_]">apply</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>    

    <span class="comment">//not a property if it has no getter, setter or field</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#102816" title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">memberTypes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>

    <span class="comment">//verify that all types are compatible :</span>
    <span class="keyword">val</span> <a title="java.lang.Class[_]" id="102817">c</a> = <a href="#102816" title="scala.collection.mutable.ArrayBuffer[java.lang.Class[_]]">memberTypes</a>.<span title="(n: Int)java.lang.Class[_]">remove</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.Class[_]" id="102961">c0</a> &lt;- <a href="#102816" title="(f: java.lang.Class[_] =&gt; Unit)Unit">memberTypes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#102961" title="java.lang.Class[_]">c0</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#102817" title="java.lang.Class[_]">c</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#102817" title="java.lang.Class[_]">c</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#102961" title="java.lang.Class[_]">c0</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    <span title="(_1: Boolean, _2: Boolean, _3: Boolean)(Boolean, Boolean, Boolean)" class="delimiter">(</span><a href="#102812" title="Boolean">hasAField</a>, <a href="#102814" title="Boolean">hasGetter</a>, <a href="#102815" title="Boolean">hasSetter</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>,  <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> =&gt; <span title="=&gt; Boolean">!</span><a href="#102813" title="Boolean">isAStaticField</a>
      <span class="keyword">case</span> <span title="Boolean(true)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(true)" class="keyword">true</span>,  <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>  =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Boolean(true)" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>,  <span title="Boolean(true)" class="keyword">true</span>,  <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>  =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Boolean(true)" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>,  <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>  =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <a title="Boolean(false)" id="102988">a</a>:<span title="Any">Any</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(a: java.lang.annotation.Annotation)Boolean" id="37274">_includeAnnotation</a><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="102989">a</a>: <span title="java.lang.annotation.Annotation">Annotation</span><span class="delimiter">)</span> =
   <a href="#102989" title="java.lang.annotation.Annotation">a</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../annotations/ColumnBase.java.html#10566" title="org.squeryl.annotations.ColumnBase">ColumnBase</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> <a href="#102989" title="java.lang.annotation.Annotation">a</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../annotations/Transient.java.html#10551" title="org.squeryl.annotations.Transient">Transient</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> <a href="#102989" title="java.lang.annotation.Annotation">a</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../annotations/OptionType.java.html#10563" title="org.squeryl.annotations.OptionType">OptionType</a><span class="delimiter">]</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: java.lang.reflect.Field, s: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])Unit" id="37275">_addAnnotations</a><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="102995">m</a>: <span title="java.lang.reflect.Field">Field</span>, <a title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]" id="102996">s</a>: <span title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">HashSet</span><span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="103184">a</a> &lt;- <a href="#102995" title="java.lang.reflect.Field">m</a>.<span title="(f: java.lang.annotation.Annotation =&gt; Boolean)Unit">getAnnotations</span> <span class="keyword">if</span> <a href="#37274" title="(a: java.lang.annotation.Annotation)Boolean">_includeAnnotation</a><span class="delimiter">(</span><a href="#103184" title="java.lang.annotation.Annotation">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#102996" title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">s</a>.<span title="(elem: java.lang.annotation.Annotation)Boolean">add</span><span class="delimiter">(</span><a href="#103184" title="java.lang.annotation.Annotation">a</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: java.lang.reflect.Method, s: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])Unit" id="37276">_addAnnotations</a><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="103189">m</a>: <span title="java.lang.reflect.Method">Method</span>, <a title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]" id="103190">s</a>: <span title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">HashSet</span><span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="103373">a</a> &lt;- <a href="#103189" title="java.lang.reflect.Method">m</a>.<span title="(f: java.lang.annotation.Annotation =&gt; Boolean)Unit">getAnnotations</span> <span class="keyword">if</span> <a href="#37274" title="(a: java.lang.annotation.Annotation)Boolean">_includeAnnotation</a><span class="delimiter">(</span><a href="#103373" title="java.lang.annotation.Annotation">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#103190" title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">s</a>.<span title="(elem: java.lang.annotation.Annotation)Boolean">add</span><span class="delimiter">(</span><a href="#103373" title="java.lang.annotation.Annotation">a</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(c: java.lang.Class[_])Boolean" id="37277">_includeFieldOrMethodType</a><span class="delimiter">(</span><a title="java.lang.Class[_]" id="103378">c</a>: <span title="java.lang.Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="FieldMetaData.scala.html#12578" title="object org.squeryl.internals.FieldMetaData">FieldMetaData</a>.<a href="FieldMetaData.scala.html#45516" title="=&gt; java.lang.Object with org.squeryl.internals.FieldMetaDataFactory">factory</a>.<a href="FieldMetaData.scala.html#45537" title="(c: Class[_])Boolean">isSupportedFieldType</a><span class="delimiter">(</span><a href="#103378" title="java.lang.Class[_]">c</a><span class="delimiter">)</span>
      <span class="comment">//! classOf[Query[_]].isAssignableFrom(c)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clasz: java.lang.Class[_], members: scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])Unit" id="37278">_fillWithMembers</a><span class="delimiter">(</span><a title="java.lang.Class[_]" id="43891">clasz</a>: <span title="java.lang.Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]" id="43892">members</a>: <span title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Member,HashSet<span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="103577">m</a> &lt;-<a href="#43891" title="java.lang.Class[_]">clasz</a>.<span title="(f: java.lang.reflect.Method =&gt; Unit)Unit">getMethods</span> <span class="keyword">if</span><span class="delimiter">(</span><a href="#103577" title="java.lang.reflect.Method">m</a>.<span title="()java.lang.Class[_]">getDeclaringClass</span> <span title="(x$1: AnyRef)Boolean">!=</span> classOf<span title="java.lang.Class[java.lang.Object](classOf[java.lang.Object])" class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#37277" title="(c: java.lang.Class[_])Boolean">_includeFieldOrMethodType</a><span class="delimiter">(</span><a href="#103577" title="java.lang.reflect.Method">m</a>.<span title="()java.lang.Class[_]">getReturnType</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#103577" title="java.lang.reflect.Method">m</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="(java.lang.reflect.Method, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" id="103578">t</a> = <span title="(_1: java.lang.reflect.Method, _2: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])(java.lang.reflect.Method, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" class="delimiter">(</span><a href="#103577" title="java.lang.reflect.Method">m</a>, <span title="()scala.collection.mutable.HashSet[java.lang.annotation.Annotation]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">HashSet</span><span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#37276" title="(m: java.lang.reflect.Method, s: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])Unit">_addAnnotations</a><span class="delimiter">(</span><a href="#103577" title="java.lang.reflect.Method">m</a>, <a href="#103578" title="(java.lang.reflect.Method, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">t</a>.<span title="=&gt; scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">_2</span><span class="delimiter">)</span>
      <a href="#43892" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">members</a>.<span title="(elems: (java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])*)Unit">append</span><span class="delimiter">(</span><a href="#103578" title="(java.lang.reflect.Method, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="103797">m</a> &lt;- <a href="#43891" title="java.lang.Class[_]">clasz</a>.<span title="(f: java.lang.reflect.Field =&gt; Unit)Unit">getDeclaredFields</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#103797" title="java.lang.reflect.Field">m</a>.<span title="()java.lang.String">getName</span>.<span title="(x$1: java.lang.String)Int">indexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#37277" title="(c: java.lang.Class[_])Boolean">_includeFieldOrMethodType</a><span class="delimiter">(</span><a href="#103797" title="java.lang.reflect.Field">m</a>.<span title="()java.lang.Class[_]">getType</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#103797" title="java.lang.reflect.Field">m</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="(java.lang.reflect.Field, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" id="103798">t</a> = <span title="(_1: java.lang.reflect.Field, _2: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])(java.lang.reflect.Field, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])" class="delimiter">(</span><a href="#103797" title="java.lang.reflect.Field">m</a>, <span title="()scala.collection.mutable.HashSet[java.lang.annotation.Annotation]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">HashSet</span><span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#37275" title="(m: java.lang.reflect.Field, s: scala.collection.mutable.HashSet[java.lang.annotation.Annotation])Unit">_addAnnotations</a><span class="delimiter">(</span><a href="#103797" title="java.lang.reflect.Field">m</a>, <a href="#103798" title="(java.lang.reflect.Field, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">t</a>.<span title="=&gt; scala.collection.mutable.HashSet[java.lang.annotation.Annotation]">_2</span><span class="delimiter">)</span>
      <a href="#43892" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">members</a>.<span title="(elems: (java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])*)Unit">append</span><span class="delimiter">(</span><a href="#103798" title="(java.lang.reflect.Field, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="java.lang.Class[_ &gt;: _$12]" id="103387">c</a> = <a href="#43891" title="java.lang.Class[_]">clasz</a>.<span title="(()java.lang.Class[_ &gt;: _$12]) forSome { type _$12; type _$12 }">getSuperclass</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#103387" title="java.lang.Class[_ &gt;: _$12]">c</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#37278" title="(clasz: java.lang.Class[_], members: scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])])Unit">_fillWithMembers</a><span class="delimiter">(</span><a href="#103387" title="java.lang.Class[_ &gt;: _$12]">c</a>, <a href="#43892" title="scala.collection.mutable.ArrayBuffer[(java.lang.reflect.Member, scala.collection.mutable.HashSet[java.lang.annotation.Annotation])]">members</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.internals.PosoMetaData" id="12659">PosoMetaData</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="finalizeFilter extends java.lang.Object with net.sf.cglib.proxy.CallbackFilter" id="102761">finalizeFilter</a> = <a href="#102763" title="java.lang.Object with net.sf.cglib.proxy.CallbackFilter" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with net.sf.cglib.proxy.CallbackFilter" id="102763">CallbackFilter</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(method: java.lang.reflect.Method)Int" id="102765">accept</a><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="102766">method</a>: <span title="java.lang.reflect.Method">Method</span><span class="delimiter">)</span>: <span title="Int">Int</span> =
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#102766" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;finalize&quot;)" class="string">&quot;finalize&quot;</span><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>



        </pre>
    </body>
</html>