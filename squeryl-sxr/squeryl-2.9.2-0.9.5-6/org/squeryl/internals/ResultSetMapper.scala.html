<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/squeryl/internals/ResultSetMapper.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */</span>
<span class="keyword">package</span> org.squeryl.internals

<span class="keyword">import</span> java.sql.ResultSet
<span class="keyword">import</span> collection.mutable.ArrayBuffer
<span class="keyword">import</span> org.squeryl.dsl.ast.SelectElement



<span class="keyword">trait</span> <a title="trait ResultSetUtils extends java.lang.Object with ScalaObject" id="12835">ResultSetUtils</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)String" id="20762">dumpRow</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="73976">rs</a>:<span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.ResultSetMetaData" id="73979">md</a> = <a href="#73976" title="java.sql.ResultSet">rs</a>.<span title="()java.sql.ResultSetMetaData">getMetaData</span>
   <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="74157">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]])scala.collection.immutable.IndexedSeq[java.lang.String]">to</span> <a href="#73979" title="java.sql.ResultSetMetaData">md</a>.<span title="()Int">getColumnCount</span><span class="delimiter">)</span>
      <span class="keyword">yield</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#73976" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#74157" title="Int">i</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#20763" title="(className: String)String">_simpleClassName</a><span class="delimiter">(</span><a href="#73979" title="java.sql.ResultSetMetaData">md</a>.<span title="(x$1: Int)java.lang.String">getColumnClassName</span><span class="delimiter">(</span><a href="#74157" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    .<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;ResultSetRow:[&quot;)" class="string">&quot;ResultSetRow:[&quot;</span>,<span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(className: String)String" id="20763">_simpleClassName</a><span class="delimiter">(</span><a title="String" id="74168">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="74171">idx</a> = <a href="#74168" title="String">className</a>.<span title="(x$1: java.lang.String)Int">lastIndexOf</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
    <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#74171" title="Int">idx</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#74168" title="String">className</a>
    <span class="keyword">else</span>
      <a href="#74168" title="String">className</a>.<span title="(x$1: Int, x$2: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#74171" title="Int">idx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#74168" title="String">className</a>.<span title="()Int">length</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)String" id="20764">dumpRowValues</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103832">rs</a>:<span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.ResultSetMetaData" id="103835">md</a> = <a href="#103832" title="java.sql.ResultSet">rs</a>.<span title="()java.sql.ResultSetMetaData">getMetaData</span>
   <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="103935">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],java.lang.String,scala.collection.immutable.IndexedSeq[java.lang.String]])scala.collection.immutable.IndexedSeq[java.lang.String]">to</span> <a href="#103835" title="java.sql.ResultSetMetaData">md</a>.<span title="()Int">getColumnCount</span><span class="delimiter">)</span>
      <span class="keyword">yield</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#103832" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#103935" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span>,<span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>  
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.internals.ResultSetUtils" id="12836">ResultSetUtils</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12835" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a>


<span class="keyword">trait</span> <a title="trait OutMapper[T] extends java.lang.Object with org.squeryl.internals.ResultSetUtils with ScalaObject" id="12946">OutMapper</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="13306">T</a><span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <a href="#12835" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="20766">toString</a> =
    <a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32753" title="(s: =&gt; String)String">failSafeString</a><span class="delimiter">(</span>
      <span title="java.lang.String(&quot;$OM(&quot;)" class="string">&quot;$OM(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#20768" title="=&gt; Int">index</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
      <a href="#20773" title="=&gt; java.lang.Class[_ &gt;: ?0 with ?0 &lt;: java.lang.Object]">jdbcClass</a>.<span title="()java.lang.String">getSimpleName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
      <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#20771" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="Int" id="20768">index</a>: <span title="Int">Int</span> = -<span title="Int(-1)" class="int">1</span>

  <span class="keyword">var</span> <a title="Boolean" id="20771">isActive</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; java.lang.Class[_ &gt;: ?0 with ?0 &lt;: java.lang.Object]" id="20773">jdbcClass</a> =
    <a href="#20777" title="=&gt; T">sample</a> <span title="java.lang.Class[_64]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.lang.Class[?0]">Some</span><span class="delimiter">(</span><a title="AnyRef" id="70054">x</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =&gt; <a href="#70054" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span>
      <span class="keyword">case</span> <a title="java.lang.Class[?0]" id="70057">x</a>:<span title="AnyRef">AnyRef</span>  =&gt; <a href="#70057" title="AnyRef">x</a>.<span title="()java.lang.Class[_]">getClass</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)T" id="20774">map</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103985">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#13306" title="T">T</a> =
    <span title="T" class="keyword">if</span><span class="delimiter">(</span><a href="#20771" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#20776" title="(rs: java.sql.ResultSet)T">doMap</a><span class="delimiter">(</span><a href="#103985" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="103987">e</a>:<span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span>
            <span title="java.lang.String(&quot;Exception while mapping column with OutMapper:\012&quot;)" class="string">&quot;Exception while mapping column with OutMapper:\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#12946" title="org.squeryl.internals.OutMapper[T]" class="keyword">this</a> <span title="(x$1: Any)java.lang.String">+</span> 
            <span title="java.lang.String(&quot;\012and resultSet :\012&quot;)" class="string">&quot;\nand resultSet :\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32753" title="(s: =&gt; String)String">failSafeString</a><span class="delimiter">(</span><a href="#20762" title="(rs: java.sql.ResultSet)String">dumpRow</a><span class="delimiter">(</span><a href="#103985" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>, 
            <a href="#103987" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <a href="#20777" title="=&gt; T">sample</a>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Boolean" id="20775">isNull</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103993">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> =
    <a href="#103993" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#20768" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)T" id="20776">doMap</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="32791">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#13306" title="T">T</a>

  <span class="keyword">def</span> <a title="=&gt; T" id="20777">sample</a>: <a href="#13306" title="T">T</a>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="20778">typeOfExpressionToString</a> = <a href="#20777" title="=&gt; T">sample</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.lang.Object" class="delimiter">[</span><span title="java.lang.Object">Object</span><span class="delimiter">]</span>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.squeryl.internals.NoOpOutMapper" id="12809">NoOpOutMapper</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12946" title="org.squeryl.internals.OutMapper[Any]">OutMapper</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Nothing" id="100335">doMap</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="104012">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <a href="#100336" title="=&gt; Nothing">sample</a>

  <span class="keyword">def</span> <a title="=&gt; Nothing" id="100336">sample</a> = org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot; cannot use NoOpOutMapper&quot;)" class="string">&quot; cannot use NoOpOutMapper&quot;</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="100337">typeOfExpressionToString</a> = <span title="java.lang.String(&quot;NoOpOutMapper&quot;)" class="string">&quot;NoOpOutMapper&quot;</span>  
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ColumnToFieldMapper extends java.lang.Object with ScalaObject" id="13018">ColumnToFieldMapper</a><a href="#13018" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="87421">index</a>: <span title="Int">Int</span>, <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMetaData" id="87422">fieldMetaData</a>: <a href="FieldMetaData.scala.html#12577" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>, <a title="org.squeryl.dsl.ast.SelectElement" id="87423">selectElement</a>: <a href="../dsl/ast/SelectElement.scala.html#11682" title="org.squeryl.dsl.ast.SelectElement">SelectElement</a><span class="delimiter">)</span>  <span class="delimiter">{</span>

  <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#87421" title="=&gt; Int">index</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;invalid Jdbc index &quot;)" class="string">&quot;invalid Jdbc index &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#87421" title="=&gt; Int">index</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(obj: AnyRef, rs: java.sql.ResultSet)Unit" id="87419">map</a><span class="delimiter">(</span><a title="AnyRef" id="104029">obj</a>: <span title="AnyRef">AnyRef</span>, <a title="java.sql.ResultSet" id="104030">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#87423" title="org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/SelectElement.scala.html#20679" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#87422" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#48415" title="(target: AnyRef, rs: java.sql.ResultSet, index: Int)Unit">setFromResultSet</a><span class="delimiter">(</span><a href="#104029" title="AnyRef">obj</a>, <a href="#104030" title="java.sql.ResultSet">rs</a>, <a href="#87421" title="=&gt; Int">index</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="87420">toString</a> =
    <span title="java.lang.String(&quot;$(&quot;)" class="string">&quot;$(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#87421" title="=&gt; Int">index</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-&gt;&quot;)" class="string">&quot;-&gt;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#87422" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ColumnToTupleMapper extends java.lang.Object with ScalaObject" id="12826">ColumnToTupleMapper</a><a href="#12826" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Array[org.squeryl.internals.OutMapper[_]]" id="93588">outMappers</a>: <span title="Array[org.squeryl.internals.OutMapper[_]]">Array</span><span class="delimiter">[</span>OutMapper<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="87309">toString</a> = <a href="#93588" title="(xs: Array[org.squeryl.internals.OutMapper[_]])scala.collection.mutable.ArrayOps[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>,<span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span> 

  <span class="keyword">def</span> <a title="(idx: Int)java.lang.String" id="87310">typeOfExpressionToString</a><span class="delimiter">(</span><a title="Int" id="87327">idx</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#93588" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#87327" title="Int">idx</a><span class="delimiter">)</span>.<a href="#20778" title="=&gt; java.lang.String">typeOfExpressionToString</a>

  <span class="keyword">def</span> <a title="(i: Int, jdbcIndex: Int)Unit" id="87311">activate</a><span class="delimiter">(</span><a title="Int" id="87347">i</a>: <span title="Int">Int</span>, <a title="Int" id="87348">jdbcIndex</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.internals.OutMapper[_]" id="87351">m</a> = <a href="#93588" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#87347" title="Int">i</a><span class="delimiter">)</span>
    <a href="#87351" title="org.squeryl.internals.OutMapper[_]">m</a>.<a href="#20771" title="(x$1: Boolean)Unit">isActive</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#87351" title="org.squeryl.internals.OutMapper[_]">m</a>.<a href="#20768" title="(x$1: Int)Unit">index</a> = <a href="#87348" title="Int">jdbcIndex</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int)Boolean" id="87312">isActive</a><span class="delimiter">(</span><a title="Int" id="104245">i</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#93588" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#104245" title="Int">i</a><span class="delimiter">)</span>.<a href="#20771" title="=&gt; Boolean">isActive</a>

  <span class="keyword">def</span> <a title="(i: Int, rs: java.sql.ResultSet)Boolean" id="87313">isNull</a><span class="delimiter">(</span><a title="Int" id="104249">i</a>:<span title="Int">Int</span>, <a title="java.sql.ResultSet" id="104250">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <a href="#93588" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#104249" title="Int">i</a><span class="delimiter">)</span>.<a href="#20775" title="(rs: java.sql.ResultSet)Boolean">isNull</a><span class="delimiter">(</span><a href="#104250" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="[T](rs: java.sql.ResultSet)T" id="87314">mapToTuple</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="87316">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.ResultSet" id="94193">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#87316" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="104254">size</a> = <a href="#93588" title="(xs: Array[org.squeryl.internals.OutMapper[_]])scala.collection.mutable.ArrayOps[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="=&gt; Int">size</span>
    <span class="keyword">val</span> <a title="Array[org.squeryl.internals.OutMapper[_]]" id="104255">m</a> = <a href="#93588" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>
    <span class="keyword">val</span> <a title="Any" id="104256">res</a> = <a href="#104254" title="Int">size</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="_$1" class="int">1</span> =&gt; <span class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1)" class="int">2</span> =&gt; <span title="(_1: _$1, _2: _$1)(_$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1, _$1)" class="int">3</span> =&gt; <span title="(_1: _$1, _2: _$1, _3: _$1)(_$1, _$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1, _$1, _$1)" class="int">4</span> =&gt; <span title="(_1: _$1, _2: _$1, _3: _$1, _4: _$1)(_$1, _$1, _$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1, _$1, _$1, _$1)" class="int">5</span> =&gt; <span title="(_1: _$1, _2: _$1, _3: _$1, _4: _$1, _5: _$1)(_$1, _$1, _$1, _$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1, _$1, _$1, _$1, _$1)" class="int">6</span> =&gt; <span title="(_1: _$1, _2: _$1, _3: _$1, _4: _$1, _5: _$1, _6: _$1)(_$1, _$1, _$1, _$1, _$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(_$1, _$1, _$1, _$1, _$1, _$1, _$1)" class="int">7</span> =&gt; <span title="(_1: _$1, _2: _$1, _3: _$1, _4: _$1, _5: _$1, _6: _$1, _7: _$1)(_$1, _$1, _$1, _$1, _$1, _$1, _$1)" class="delimiter">(</span><a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#104255" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(6)" class="int">6</span><span class="delimiter">)</span>.<a href="#20774" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#94193" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">//TODO: implement tuples results of size up to 22</span>
      <span class="keyword">case</span> <a title="Nothing" id="104529">z</a>:<span title="Any">Any</span> =&gt; org.squeryl.internals.<a href="Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;tuples of size &quot;)" class="string">&quot;tuples of size &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#104254" title="Int">size</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; and greater are not supported&quot;)" class="string">&quot; and greater are not supported&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#104256" title="Any">res</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#87316" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ResultSetMapper extends java.lang.Object with org.squeryl.internals.ResultSetUtils with ScalaObject" id="12886">ResultSetMapper</a> <a href="#12886" title="ScalaObject" class="keyword">extends</a> <a href="#12835" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a> <span class="delimiter">{</span>  

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]" id="34901">_yieldValuePushers</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]">ArrayBuffer</span><span class="delimiter">[</span>YieldValuePusher<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]" id="34903">_fieldMapper</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">ArrayBuffer</span><span class="delimiter">[</span>ColumnToFieldMapper<span class="delimiter">]</span>

  <span class="keyword">var</span> <a title="Option[org.squeryl.internals.ColumnToTupleMapper]" id="34906">groupKeysMapper</a>: <span title="Option[org.squeryl.internals.ColumnToTupleMapper]">Option</span><span class="delimiter">[</span>ColumnToTupleMapper<span class="delimiter">]</span> = <span title="object None">None</span>

  <span class="keyword">var</span> <a title="Option[org.squeryl.internals.ColumnToTupleMapper]" id="34909">groupMeasuresMapper</a>: <span title="Option[org.squeryl.internals.ColumnToTupleMapper]">Option</span><span class="delimiter">[</span>ColumnToTupleMapper<span class="delimiter">]</span> = <span title="object None">None</span>
  
<span class="comment">//  val createTrace = {</span>
<span class="comment">//    new Exception().getStackTrace.map(s=&gt;s.toString).mkString(&quot;\n&quot;)</span>
<span class="comment">//  }</span>

  <span class="keyword">var</span> <a title="Boolean" id="34912">isActive</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="34914">toString</a> =
    <span title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="symbol">'ResultSetMapper</span> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.lang.Integer">Integer</span>.<span title="(x$1: Int)java.lang.String">toHexString</span><span class="delimiter">(</span><span title="object java.lang.System">System</span>.<span title="(x$1: Any)Int">identityHashCode</span><span class="delimiter">(</span><a href="#12886" title="org.squeryl.internals.ResultSetMapper" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
     <a href="#34903" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span>,<span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#34906" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupKeysMapper</a>.<span title="(default: =&gt; java.lang.Object)java.lang.Object">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#34909" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupMeasuresMapper</a>.<span title="(default: =&gt; java.lang.Object)java.lang.Object">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#34912" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(cm: org.squeryl.internals.ColumnToFieldMapper)Unit" id="34915">addColumnMapper</a><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="87433">cm</a>: <a href="#13018" title="org.squeryl.internals.ColumnToFieldMapper">ColumnToFieldMapper</a><span class="delimiter">)</span> =
    <a href="#34903" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(elems: org.squeryl.internals.ColumnToFieldMapper*)Unit">append</span><span class="delimiter">(</span><a href="#87433" title="org.squeryl.internals.ColumnToFieldMapper">cm</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(yvp: org.squeryl.internals.YieldValuePusher)Unit" id="34916">addYieldValuePusher</a><span class="delimiter">(</span><a title="org.squeryl.internals.YieldValuePusher" id="87543">yvp</a>: <a href="#13012" title="org.squeryl.internals.YieldValuePusher">YieldValuePusher</a><span class="delimiter">)</span> =
    <a href="#34901" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]">_yieldValuePushers</a>.<span title="(elems: org.squeryl.internals.YieldValuePusher*)Unit">append</span><span class="delimiter">(</span><a href="#87543" title="org.squeryl.internals.YieldValuePusher">yvp</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(resultSet: java.sql.ResultSet)Unit" id="34917">pushYieldedValues</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="72977">resultSet</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>:<span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#34912" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.YieldValuePusher" id="104601">yvp</a> &lt;- <a href="#34901" title="(f: org.squeryl.internals.YieldValuePusher =&gt; Unit)Unit">_yieldValuePushers</a><span class="delimiter">)</span>
      <a href="#104601" title="org.squeryl.internals.YieldValuePusher">yvp</a>.<a href="#87512" title="(rs: java.sql.ResultSet)Unit">push</a><span class="delimiter">(</span><a href="#72977" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnToFieldMapper]" id="34919">_firstNonOption</a>: <span title="Option[org.squeryl.internals.ColumnToFieldMapper]">Option</span><span class="delimiter">[</span>ColumnToFieldMapper<span class="delimiter">]</span> =
    <a href="#34903" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(p: org.squeryl.internals.ColumnToFieldMapper =&gt; Boolean)Option[org.squeryl.internals.ColumnToFieldMapper]">find</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#104615" title="org.squeryl.internals.ColumnToFieldMapper">_</a>.<a href="#87422" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#48373" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Boolean" id="34920">isNoneInOuterJoin</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="74567">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>

    <span class="comment">//decide based on the nullity of the first non Option field :</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#34918" title="=&gt; Option[org.squeryl.internals.ColumnToFieldMapper]">_firstNonOption</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#74567" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#34918" title="=&gt; Option[org.squeryl.internals.ColumnToFieldMapper]">_firstNonOption</a>.<span title="=&gt; org.squeryl.internals.ColumnToFieldMapper">get</span>.<a href="#87421" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>

    <span class="comment">//if we get here all fields are optional, decide on the first Option that is not null :    </span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="104657">c2fm</a> &lt;- <a href="#34903" title="(f: org.squeryl.internals.ColumnToFieldMapper =&gt; Unit)Unit">_fieldMapper</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#104657" title="org.squeryl.internals.ColumnToFieldMapper">c2fm</a>.<a href="#87422" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#48373" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#74567" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#104657" title="org.squeryl.internals.ColumnToFieldMapper">c2fm</a>.<a href="#87421" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    <span class="comment">//outMappers</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToTupleMapper" id="104777">col2TupleMapper</a> &lt;- <span title="(xs: Option[org.squeryl.internals.ColumnToTupleMapper]*)List[Option[org.squeryl.internals.ColumnToTupleMapper]]">List</span><span class="delimiter">(</span><a href="#34906" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupKeysMapper</a>, <a href="#34909" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupMeasuresMapper</a><span class="delimiter">)</span>.<span title="(p: Option[org.squeryl.internals.ColumnToTupleMapper] =&gt; Boolean)List[Option[org.squeryl.internals.ColumnToTupleMapper]]">filter</span><span class="delimiter">(</span><a href="#104694" title="Option[org.squeryl.internals.ColumnToTupleMapper]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>.<span title="(f: Option[org.squeryl.internals.ColumnToTupleMapper] =&gt; org.squeryl.internals.ColumnToTupleMapper)(implicit bf: scala.collection.generic.CanBuildFrom[List[Option[org.squeryl.internals.ColumnToTupleMapper]],org.squeryl.internals.ColumnToTupleMapper,List[org.squeryl.internals.ColumnToTupleMapper]])List[org.squeryl.internals.ColumnToTupleMapper]">map</span><span title="(f: org.squeryl.internals.ColumnToTupleMapper =&gt; Unit)Unit" class="delimiter">(</span><a href="#104718" title="Option[org.squeryl.internals.ColumnToTupleMapper]">_</a>.<span title="=&gt; org.squeryl.internals.ColumnToTupleMapper">get</span><span class="delimiter">)</span>;
        <a title="org.squeryl.internals.OutMapper[_]" id="105554">outMapper</a> &lt;- <a href="#104777" title="org.squeryl.internals.ColumnToTupleMapper">col2TupleMapper</a>.<a href="#93588" title="(f: org.squeryl.internals.OutMapper[_] =&gt; Unit)Unit">outMappers</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#105554" title="org.squeryl.internals.OutMapper[_]">outMapper</a>.<a href="#20771" title="=&gt; Boolean">isActive</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#74567" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)java.lang.Object">getObject</span><span class="delimiter">(</span><a href="#105554" title="org.squeryl.internals.OutMapper[_]">outMapper</a>.<a href="#20768" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    <span class="comment">// if we get here we have matched on a row wit all nulls OR we haven't matched,</span>
    <span class="comment">// this is an extreme corner case, we will return None, in reality we should</span>
    <span class="comment">// sometimes return a Some with all fields None</span>
    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(o: AnyRef, resultSet: java.sql.ResultSet)Unit" id="34921">map</a><span class="delimiter">(</span><a title="AnyRef" id="66856">o</a>: <span title="AnyRef">AnyRef</span>, <a title="java.sql.ResultSet" id="66857">resultSet</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>:<span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#34912" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="105593">fm</a> &lt;- <a href="#34903" title="(f: org.squeryl.internals.ColumnToFieldMapper =&gt; Unit)Unit">_fieldMapper</a><span class="delimiter">)</span>
        <a href="#105593" title="org.squeryl.internals.ColumnToFieldMapper">fm</a>.<a href="#87419" title="(obj: AnyRef, rs: java.sql.ResultSet)Unit">map</a><span class="delimiter">(</span><a href="#66856" title="AnyRef">o</a>, <a href="#66857" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span>      
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="105595">e</a>:<span title="Exception">Exception</span>=&gt; <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;could not map row :\012&quot;)" class="string">&quot;could not map row :\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#20762" title="(rs: java.sql.ResultSet)String">dumpRow</a><span class="delimiter">(</span><a href="#66857" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012 with mapper :\012&quot;)" class="string">&quot;\n with mapper :\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#12886" title="org.squeryl.internals.ResultSetMapper" class="keyword">this</a>, <a href="#105595" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class YieldValuePusher extends java.lang.Object with ScalaObject" id="13012">YieldValuePusher</a><a href="#13012" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="87519">index</a>: <span title="Int">Int</span>, <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.SelectElement" id="87520">selectElement</a>: <a href="../dsl/ast/SelectElement.scala.html#11682" title="org.squeryl.dsl.ast.SelectElement">SelectElement</a>, <a title="org.squeryl.internals.OutMapper[_]" id="87521">mapper</a>: <a href="#12946" title="org.squeryl.internals.OutMapper[_]">OutMapper</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>  <span class="delimiter">{</span>


  <a href="#87521" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#20768" title="(x$1: Int)Unit">index</a> = <a href="#87519" title="=&gt; Int">index</a>
  <a href="#87521" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#20771" title="(x$1: Boolean)Unit">isActive</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Unit" id="87512">push</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="104602">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#87520" title="=&gt; org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/SelectElement.scala.html#20679" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Any" id="104605">v</a> = <a href="#87521" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#20774" title="(rs: java.sql.ResultSet)Any">map</a><span class="delimiter">(</span><a href="#104602" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
      <a href="FieldReferenceLinker.scala.html#12686" title="object org.squeryl.internals.FieldReferenceLinker">FieldReferenceLinker</a>.<a href="FieldReferenceLinker.scala.html#20474" title="(v: AnyRef)Unit">pushYieldValue</a><span class="delimiter">(</span><a href="#104605" title="Any">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="87513">toString</a> =
    <span title="java.lang.String(&quot;$(&quot;)" class="string">&quot;$(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#87519" title="=&gt; Int">index</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-&gt;&amp;(&quot;)" class="string">&quot;-&gt;&amp;(&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#87520" title="=&gt; org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/ExpressionNode.scala.html#20369" title="=&gt; String">writeToString</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#87521" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#20771" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>