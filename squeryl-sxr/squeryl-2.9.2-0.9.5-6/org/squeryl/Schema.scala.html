<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/squeryl/Schema.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */</span>
<span class="keyword">package</span> org.squeryl

<span class="keyword">import</span> dsl._
<span class="keyword">import</span> ast._
<span class="keyword">import</span> internals._
<span class="keyword">import</span> reflect.<span class="delimiter">{</span>Manifest<span class="delimiter">}</span>
<span class="keyword">import</span> java.sql.SQLException
<span class="keyword">import</span> java.io.PrintWriter
<span class="keyword">import</span> collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, ArrayBuffer<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Schema extends java.lang.Object with ScalaObject" id="10171">Schema</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.Schema" id="16587">thisSchema</a> = <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>

  <span class="comment">/**
   * Contains all Table[_]s in this shema, and also all ManyToManyRelation[_,_,_]s (since they are also Table[_]s
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" id="16588">_tables</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">ArrayBuffer</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> 
  
  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.Table[_]]" id="16590">tables</a>: <span title="Seq[org.squeryl.Table[_]]">Seq</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#16588" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="=&gt; Seq[org.squeryl.Table[_]]">toSeq</span>
  
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]" id="16591">_tableTypes</a> = <span title="()scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">HashMap</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" id="16593">_oneToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">ArrayBuffer</span><span class="delimiter">[</span>OneToManyRelation<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" id="16595">_manyToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">ArrayBuffer</span><span class="delimiter">[</span>ManyToManyRelation<span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" id="16597">_columnGroupAttributeAssignments</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">ArrayBuffer</span><span class="delimiter">[</span>ColumnGroupAttributeAssignment<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[String]" id="16599">_namingScope</a> = <span title="()scala.collection.mutable.HashSet[String]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[String]">HashSet</span><span class="delimiter">[</span>String<span class="delimiter">]</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.OneToManyRelation[_, _])Unit" id="16601">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="36911">r</a>: <a href="dsl/ManyToMany.scala.html#11195" title="org.squeryl.dsl.OneToManyRelation[_, _]">OneToManyRelation</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#16593" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">_oneToManyRelations</a>.<span title="(elems: org.squeryl.dsl.OneToManyRelation[_, _]*)Unit">append</span><span class="delimiter">(</span><a href="#36911" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.ManyToManyRelation[_, _, _])Unit" id="16602">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="36926">r</a>: <a href="dsl/ManyToMany.scala.html#10835" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">ManyToManyRelation</a><span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#16595" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">_manyToManyRelations</a>.<span title="(elems: org.squeryl.dsl.ManyToManyRelation[_, _, _]*)Unit">append</span><span class="delimiter">(</span><a href="#36926" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.DatabaseAdapter" id="16603">_dbAdapter</a> = <a href="Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#36964" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

  <span class="comment">/**
   *  @returns a tuple of (Table[_], Table[_], ForeignKeyDeclaration) where
   *  ._1 is the foreign key table,
   *  ._2 is the primary key table
   *  ._3 is the ForeignKeyDeclaration between _1 and _2
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="16604">_activeForeignKeySpecs</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="37093">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, ForeignKeyDeclaration<span class="delimiter">)</span><span class="delimiter">]</span>

    <span class="keyword">for</span><span class="delimiter">(</span> <a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="37118">r</a> &lt;- <a href="#16593" title="(f: org.squeryl.dsl.OneToManyRelation[_, _] =&gt; Unit)Unit">_oneToManyRelations</a> <span class="keyword">if</span> <a href="#37118" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37107" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#16363" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
      <a href="#37093" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$6], _2: org.squeryl.Table[_$5], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$6], org.squeryl.Table[_$5], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#37118" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37105" title="(=&gt; org.squeryl.Table[_$6]) forSome { type _$6 }">rightTable</a>, <a href="#37118" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37104" title="(=&gt; org.squeryl.Table[_$5]) forSome { type _$5 }">leftTable</a>, <a href="#37118" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37107" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="37180">r</a> &lt;- <a href="#16595" title="(f: org.squeryl.dsl.ManyToManyRelation[_, _, _] =&gt; Unit)Unit">_manyToManyRelations</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37184" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#16363" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#37093" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$7], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$7], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37183" title="(=&gt; org.squeryl.Table[_$9]) forSome { type _$9 }">thisTable</a>, <a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37104" title="(=&gt; org.squeryl.Table[_$7]) forSome { type _$7 }">leftTable</a> , <a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37184" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37185" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#16363" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#37093" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$8], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$8], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37183" title="(=&gt; org.squeryl.Table[_$9]) forSome { type _$9 }">thisTable</a>, <a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37105" title="(=&gt; org.squeryl.Table[_$8]) forSome { type _$8 }">rightTable</a>, <a href="#37180" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#37185" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#37093" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="[A](a: A)Iterable[org.squeryl.Table[A]]" id="16605">findTablesFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16607">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="37232">a</a>: <a href="#16607" title="A">A</a><span class="delimiter">)</span>: <span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Class[_ &lt;: AnyRef]" id="37235">c</a> = <a href="#37232" title="A">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()java.lang.Class[_]">getClass</span>
    <a href="#16588" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a href="#37243" title="org.squeryl.Table[_]">_</a>.<a href="View.scala.html#22728" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#37247" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#37235" title="java.lang.Class[_ &lt;: AnyRef]">c</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iterable[org.squeryl.Table[A]]" class="delimiter">[</span><span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[A](c: Class[A])Traversable[org.squeryl.Table[_]]" id="16608">findAllTablesFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16610">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[A]" id="37294">c</a>: <span title="Class[A]">Class</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#16588" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="37298">t</a> =&gt; <a href="#37294" title="Class[A]">c</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#37298" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#22728" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#37247" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Traversable[org.squeryl.Table[_]]" class="delimiter">[</span><span title="Traversable[org.squeryl.Table[_]]">Traversable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>


  <span class="keyword">object</span> <a title="object Schema.this.NamingConventionTransforms" id="16611">NamingConventionTransforms</a> <span title="ScalaObject" class="delimiter">{</span>
    
    @deprecated<span class="delimiter">(</span><span class="string">&quot;use snakify() instead as of 0.9.5beta&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(name: String)String" id="37305">camelCase2underScore</a><span class="delimiter">(</span><a title="String" id="37308">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#37308" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">name</a>.<span title="=&gt; List[Char]">toList</span>.<span title="(f: Char =&gt; Any)(implicit bf: scala.collection.generic.CanBuildFrom[List[Char],Any,List[Any]])List[Any]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Any,List[Any]]" class="delimiter">(</span><a title="Char" id="37944">c</a> =&gt; <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#37944" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">c</a>.<span title="=&gt; Boolean">isUpper</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#37944" title="Char">c</a> <span class="keyword">else</span> <a href="#37944" title="Char">c</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
      
    <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="37306">snakify</a><span class="delimiter">(</span><a title="String" id="40149">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#40149" title="String">name</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;^([^A-Za-z_])&quot;)" class="string">&quot;^([^A-Za-z_])&quot;</span>, <span title="java.lang.String(&quot;_$1&quot;)" class="string">&quot;_$1&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;([A-Z]+)([A-Z][a-z])&quot;)" class="string">&quot;([A-Z]+)([A-Z][a-z])&quot;</span>, <span title="java.lang.String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;([a-z0-9])([A-Z])&quot;)" class="string">&quot;([a-z0-9])([A-Z])&quot;</span>, <span title="java.lang.String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="()java.lang.String">toLowerCase</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(propertyName: String)String" id="16613">columnNameFromPropertyName</a><span class="delimiter">(</span><a title="String" id="40399">propertyName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#40399" title="String">propertyName</a>

  <span class="keyword">def</span> <a title="(tableName: String)String" id="16614">tableNameFromClassName</a><span class="delimiter">(</span><a title="String" id="40402">tableName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#40402" title="String">tableName</a>

  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="16615">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span>

  <span class="comment">/**
   * Prints the schema to standard output, it is simply : schema.printDdl(println(_))
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="16616">printDdl</a>: <span title="Unit">Unit</span> = <a href="#16618" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#40591" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(pw: java.io.PrintWriter)Unit" id="16617">printDdl</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="40415">pw</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#16618" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><a href="#40415" title="java.io.PrintWriter">pw</a>.<span title="(x$1: java.lang.String)Unit">println</span><span class="delimiter">(</span><a href="#40599" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @arg statementHandler is a closure that receives every declaration in the schema.
   */</span>
  <span class="keyword">def</span> <a title="(statementHandler: String =&gt; Unit)Unit" id="16618">printDdl</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="40413">statementHandler</a>: String =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- table declarations :&quot;)" class="string">&quot;-- table declarations :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="40630">t</a> &lt;- <a href="#16588" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="40631">sw</a> = <span title="org.squeryl.internals.StatementWriter" class="keyword">new</span> <a href="internals/StatementWriter.scala.html#12931" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37021" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#40630" title="org.squeryl.Table[_]">t</a>, <a href="#40631" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#40631" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#40650" title="=&gt; java.lang.String">statement</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37047" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#40630" title="org.squeryl.Table[_]">t</a>, <span title="(x: String =&gt; Unit)Some[String =&gt; Unit]">Some</span><span class="delimiter">(</span><a href="#40413" title="String =&gt; Unit">statementHandler</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="List[String]" id="40632">indexDecl</a> = <a href="#16621" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span class="delimiter">(</span><a href="#40630" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#40632" title="List[String]">indexDecl</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
        <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- indexes on &quot;)" class="string">&quot;-- indexes on &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#40630" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#22725" title="=&gt; java.lang.String">prefixedName</a><span class="delimiter">)</span>

      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="49149">i</a> &lt;- <a href="#40632" title="(f: String =&gt; Unit)Unit">indexDecl</a><span class="delimiter">)</span>
        <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#49149" title="String">i</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[java.lang.String]" id="40604">constraints</a> = <a href="#16628" title="=&gt; scala.collection.mutable.ArrayBuffer[java.lang.String]">_foreignKeyConstraints</a>.<span title="=&gt; List[java.lang.String]">toList</span>
    
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#40604" title="List[java.lang.String]">constraints</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- foreign key constraints :&quot;)" class="string">&quot;-- foreign key constraints :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.String" id="49368">fkc</a> &lt;- <a href="#40604" title="(f: java.lang.String =&gt; Unit)Unit">constraints</a><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#49368" title="java.lang.String">fkc</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="40605">compositePKs</a> = <a href="#16631" title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">_allCompositePrimaryKeys</a>.<span title="=&gt; List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#40605" title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">compositePKs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- composite key indexes :&quot;)" class="string">&quot;-- composite key indexes :&quot;</span><span class="delimiter">)</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="49493">cpk</a> &lt;- <a href="#40605" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Unit)Unit">compositePKs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="49494">createConstraintStmt</a> = <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37076" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])java.lang.String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#49493" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#49493" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#49494" title="java.lang.String">createConstraintStmt</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[String]" id="40606">columnGroupIndexes</a> = <a href="#16622" title="=&gt; Seq[String]">_writeColumnGroupAttributeAssignments</a>.<span title="=&gt; List[String]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#40606" title="List[String]">columnGroupIndexes</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="java.lang.String(&quot;-- column group indexes :&quot;)" class="string">&quot;-- column group indexes :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="49706">decl</a> &lt;- <a href="#40606" title="(f: String =&gt; Unit)Unit">columnGroupIndexes</a><span class="delimiter">)</span>
      <a href="#40413" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#49706" title="String">decl</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This will drop all tables and related sequences in the schema... it's a
   * dangerous operation, typically this is only useful for development
   * database instances, the method is protected in order to make it a little
   * less 'accessible'
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="16619">drop</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37073" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#16625" title="=&gt; Unit">_dropForeignKeyConstraints</a>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="49710">s</a> = <a href="Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#36962" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="49711">con</a> = <a href="Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#36962" title="=&gt; java.sql.Connection">connection</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="50454">t</a> &lt;- <a href="#16588" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37075" title="(t: org.squeryl.Table[_])Unit">dropTable</a><span class="delimiter">(</span><a href="#50454" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37048" title="(t: org.squeryl.Table[_])Unit">postDropTable</a><span class="delimiter">(</span><a href="#50454" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>  

  <span class="keyword">def</span> <a title="=&gt; Unit" id="16620">create</a> = <span class="delimiter">{</span>
    <a href="#16629" title="=&gt; Unit">_createTables</a>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37073" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#16626" title="=&gt; Unit">_declareForeignKeyConstraints</a>

    <a href="#16630" title="=&gt; Unit">_createConstraintsOfCompositePKs</a>

    <a href="#16624" title="=&gt; Unit">createColumnGroupConstraintsAndIndexes</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])List[String]" id="16621">_indexDeclarationsFor</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="48957">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[Option[String]]" id="48960">d0</a> =
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="48979">fmd</a> &lt;- <a href="#48957" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#22728" title="(=&gt; org.squeryl.internals.PosoMetaData[_$18]) forSome { type _$18 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#37261" title="(f: org.squeryl.internals.FieldMetaData =&gt; Option[String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.squeryl.internals.FieldMetaData],Option[String],Iterable[Option[String]]])Iterable[Option[String]]">fieldsMetaData</a><span class="delimiter">)</span>
        <span class="keyword">yield</span> <a href="#16623" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#48979" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="internals/FieldMetaData.scala.html#48397" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="=&gt; Seq[org.squeryl.internals.ColumnAttribute]">toSeq</span>, <span title="(elems: org.squeryl.internals.FieldMetaData*)Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">(</span><a href="#48979" title="org.squeryl.internals.FieldMetaData">fmd</a><span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span>

    <a href="#48960" title="Iterable[Option[String]]">d0</a>.<span title="(p: Option[String] =&gt; Boolean)Iterable[Option[String]]">filter</span><span class="delimiter">(</span><a href="#49032" title="Option[String]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>.<span title="(f: Option[String] =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Option[String]],String,Iterable[String]])Iterable[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,String,Iterable[String]]" class="delimiter">(</span><a href="#49060" title="Option[String]">_</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
  <span class="delimiter">}</span>
  

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Seq[String]" id="16622">_writeColumnGroupAttributeAssignments</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="50724">cgaa</a> &lt;- <a href="#16597" title="(f: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment],String,Seq[String]])Seq[String]">_columnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <span class="keyword">yield</span> <a href="#16623" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#50724" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#50743" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>, <a href="#50724" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#50746" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">columns</a>, <a href="#50724" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#50748" title="=&gt; Option[String]">name</a><span class="delimiter">)</span>.
        <span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span>org.squeryl.internals.<a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;)" class="string">&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]" id="16623">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a title="Seq[org.squeryl.internals.ColumnAttribute]" id="48980">columnAttributes</a>: <span title="Seq[org.squeryl.internals.ColumnAttribute]">Seq</span><span class="delimiter">[</span>ColumnAttribute<span class="delimiter">]</span>, <a title="Seq[org.squeryl.internals.FieldMetaData]" id="48981">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span>, <a title="Option[String]" id="48982">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="51141">unique</a> = <a href="#48980" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#51148" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#13213" title="org.squeryl.internals.Unique">Unique</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="51142">indexed</a> = <a href="#48980" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#51151" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#12610" title="org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">]</span><span class="delimiter">)</span>
  
    <span title="(_1: Option[org.squeryl.internals.ColumnAttribute], _2: Option[org.squeryl.internals.ColumnAttribute])(Option[org.squeryl.internals.ColumnAttribute], Option[org.squeryl.internals.ColumnAttribute])" class="delimiter">(</span><a href="#51141" title="Option[org.squeryl.internals.ColumnAttribute]">unique</a>, <a href="#51142" title="Option[org.squeryl.internals.ColumnAttribute]">indexed</a><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type" class="delimiter">(</span><span title="object None">None</span>,    <span title="object None">None</span><span class="delimiter">)</span>                   =&gt; <span title="object None">None</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span>Some<span class="delimiter">(</span>_<span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span>                   =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37080" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#48981" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <span title="object None">None</span>,    <a href="#48982" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span><span title="object None">None</span>,    Some<span class="delimiter">(</span>Indexed<span class="delimiter">(</span><a title="Option[String]" id="51422">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37080" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#48981" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#51422" title="Option[String]">idxName</a>, <a href="#48982" title="Option[String]">name</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[java.lang.String]" class="delimiter">(</span>Some<span class="delimiter">(</span>_<span class="delimiter">)</span>, Some<span class="delimiter">(</span>Indexed<span class="delimiter">(</span><a title="Option[String]" id="51430">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37080" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)java.lang.String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#48981" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#51430" title="Option[String]">idxName</a>, <a href="#48982" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Unit" id="16624">createColumnGroupConstraintsAndIndexes</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="50696">statement</a> &lt;- <a href="#16622" title="(f: String =&gt; Boolean)Unit">_writeColumnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <a href="#16627" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#50696" title="String">statement</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="16625">_dropForeignKeyConstraints</a> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="49718">cs</a> = <a href="Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>
    <span class="keyword">val</span> <a title="org.squeryl.internals.DatabaseAdapter" id="49719">dba</a> = <a href="#49718" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#36964" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="49744">fk</a> &lt;- <a href="#16604" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; Unit)Unit">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.sql.Statement" id="49745">s</a> = <a href="#49718" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#36962" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
      <a href="#49719" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#37071" title="(foreignKeyTable: org.squeryl.Table[_], fkName: String, session: org.squeryl.Session)Unit">dropForeignKeyStatement</a><span class="delimiter">(</span><a href="#49744" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#49719" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#37066" title="(foreignKeyTable: org.squeryl.Table[_], idWithinSchema: Int)java.lang.String">foreignKeyConstraintName</a><span class="delimiter">(</span><a href="#49744" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#49744" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>.<a href="KeyedEntity.scala.html#16353" title="=&gt; Int">idWithinSchema</a><span class="delimiter">)</span>, <a href="#49718" title="org.squeryl.Session">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="16626">_declareForeignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="java.lang.String" id="50633">fk</a> &lt;- <a href="#16628" title="(f: java.lang.String =&gt; Boolean)Unit">_foreignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#16627" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#50633" title="java.lang.String">fk</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(statement: String)Boolean" id="16627">_executeDdl</a><span class="delimiter">(</span><a title="String" id="50542">statement</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="50545">cs</a> = <a href="Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>
    <a href="#50545" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#36977" title="(s: String)Unit">log</a><span class="delimiter">(</span><a href="#50542" title="String">statement</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="50546">s</a> = <a href="#50545" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#36962" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#50546" title="java.sql.Statement">s</a>.<span title="(x$1: java.lang.String)Boolean">execute</span><span class="delimiter">(</span><a href="#50542" title="String">statement</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="50563">e</a>:<span title="java.sql.SQLException">SQLException</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;error executing &quot;)" class="string">&quot;error executing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#50542" title="String">statement</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#50563" title="java.sql.SQLException">e</a>, <a href="#50563" title="java.sql.SQLException">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#50546" title="java.sql.Statement">s</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[java.lang.String]" id="16628">_foreignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="49192">fk</a> &lt;- <a href="#16604" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)],java.lang.String,scala.collection.mutable.ArrayBuffer[java.lang.String]])scala.collection.mutable.ArrayBuffer[java.lang.String]">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="49193">fkDecl</a> = <a href="#49192" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>

      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37068" title="(foreignKeyTable: org.squeryl.Table[_], foreignKeyColumnName: String, primaryKeyTable: org.squeryl.Table[_], primaryKeyColumnName: String, referentialAction1: Option[org.squeryl.ReferentialAction], referentialAction2: Option[org.squeryl.ReferentialAction], fkId: Int)java.lang.String">writeForeignKeyDeclaration</a><span class="delimiter">(</span>
         <a href="#49192" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#49193" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#16355" title="=&gt; String">foreignKeyColumnName</a>,
         <a href="#49192" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_2</span>, <a href="#49193" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#16357" title="=&gt; String">referencedPrimaryKey</a>,
         <a href="#49193" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#16364" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction1</a>,
         <a href="#49193" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#16365" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction2</a>,
         <a href="#49193" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#16353" title="=&gt; Int">idWithinSchema</a>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="16629">_createTables</a> = <span class="delimiter">{</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="50530">t</a> &lt;- <a href="#16588" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="50531">sw</a> = <a href="internals/StatementWriter.scala.html#40641" title="(databaseAdapter: org.squeryl.internals.DatabaseAdapter)org.squeryl.internals.StatementWriter" class="keyword">new</a> <a href="internals/StatementWriter.scala.html#12931" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37021" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#50530" title="org.squeryl.Table[_]">t</a>, <a href="#50531" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#16627" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#50531" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#40650" title="=&gt; java.lang.String">statement</a><span class="delimiter">)</span>
      <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37047" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#50530" title="org.squeryl.Table[_]">t</a>, <span title="object None">None</span><span class="delimiter">)</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="50603">indexDecl</a> &lt;- <a href="#16621" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span title="(f: String =&gt; Boolean)Unit" class="delimiter">(</span><a href="#50530" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#16627" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#50603" title="String">indexDecl</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="16630">_createConstraintsOfCompositePKs</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="50662">cpk</a> &lt;- <a href="#16631" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Boolean)Unit">_allCompositePrimaryKeys</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="50663">createConstraintStmt</a> = <a href="#16603" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#37076" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])java.lang.String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#50662" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#50662" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#16627" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#50663" title="java.lang.String">createConstraintStmt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>  

  <span class="comment">/**
   * returns an Iterable of (Table[_],Iterable[FieldMetaData]), the list of
   * all tables whose PK is a composite, with the columns that are part of the PK : Iterable[FieldMetaData] 
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="16631">_allCompositePrimaryKeys</a> = <span class="delimiter">{</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="49373">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>,Iterable<span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="49392">t</a> &lt;- <a href="#16588" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a>
        <span class="keyword">if</span> classOf<span title="java.lang.Class[org.squeryl.KeyedEntity[_]](classOf[org.squeryl.KeyedEntity])" class="delimiter">[</span>KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#49392" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#22728" title="(=&gt; org.squeryl.internals.PosoMetaData[_$1]) forSome { type _$1 }">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#37247" title="(=&gt; java.lang.Class[_$1]) forSome { type _$1 }">clasz</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      <a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32770" title="(q: org.squeryl.Queryable[org.squeryl.KeyedEntity[_]], visitor: org.squeryl.KeyedEntity[_] =&gt; Unit)Unit">mapSampleObject</a><span class="delimiter">(</span>
        <a href="#49392" title="org.squeryl.Table[_]">t</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[org.squeryl.KeyedEntity[_]]" class="delimiter">[</span><a href="Table.scala.html#10243" title="org.squeryl.Table[org.squeryl.KeyedEntity[_]]">Table</a><span class="delimiter">[</span>KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>,
        <span class="delimiter">(</span>ke:<a href="KeyedEntity.scala.html#10195" title="org.squeryl.KeyedEntity[_]">KeyedEntity</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Any" id="49409">id</a> = <a href="#49405" title="org.squeryl.KeyedEntity[_]">ke</a>.<a href="KeyedEntity.scala.html#13560" title="=&gt; Any">id</a>
          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#49409" title="Any">id</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#11003" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Seq[org.squeryl.internals.FieldMetaData]" id="49410">compositeCols</a> = <a href="#49409" title="Any">id</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.CompositeKey" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#11003" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span>.<a href="dsl/CompositeKey.scala.html#20814" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">_fields</a>
            <a href="#49373" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>.<span title="(elems: (org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$1], _2: Seq[org.squeryl.internals.FieldMetaData])(org.squeryl.Table[_$1], Seq[org.squeryl.internals.FieldMetaData])" class="delimiter">(</span><a href="#49392" title="org.squeryl.Table[_]">t</a>, <a href="#49410" title="Seq[org.squeryl.internals.FieldMetaData]">compositeCols</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#49373" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Use this method to override the DatabaseAdapter's default column type for the given field
   * (FieldMetaData), returning None means that no override will take place.
   *
   * There are two levels at which db column type can be overriden, in order of precedence :
   *
   *   on(professors)(p =&gt; declare(
   *      s.yearlySalary is(dbType(&quot;real&quot;))
   *    ))
   *
   *  overrides (has precedence over) :
   *
   *  MySchema extends Schema {
   *    ...
   *    override def columnTypeFor(fieldMetaData: FieldMetaData, owner: Table[_]) =
   *      if(fieldMetaData.wrappedFieldType.isInstanceOf[Int)
   *        Some(&quot;number&quot;)
   *      else
   *        None
   *  }
   *
   */</span>
  <span class="keyword">def</span> <a title="(fieldMetaData: org.squeryl.internals.FieldMetaData, owner: org.squeryl.Table[_])Option[String]" id="16632">columnTypeFor</a><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="51434">fieldMetaData</a>: <a href="internals/FieldMetaData.scala.html#12577" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>, <a title="org.squeryl.Table[_]" id="51435">owner</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span>
  
  <span class="keyword">def</span> <a title="(c: Class[_])String" id="16633">tableNameFromClass</a><span class="delimiter">(</span><a title="Class[_]" id="51440">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>:<span title="String">String</span> =
    <a href="#51440" title="Class[_]">c</a>.<span title="()java.lang.String">getSimpleName</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="16634">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16636">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="51445">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#10243" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#16637" title="(name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]">table</a><span class="delimiter">(</span><a href="#16633" title="(c: Class[_])String">tableNameFromClass</a><span class="delimiter">(</span><a href="#51445" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#51445" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="16637">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16639">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="51459">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="51460">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#10243" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="51477">typeT</a> = <a href="#51460" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="51478">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#10243" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#51459" title="String">name</a>, <a href="#51477" title="Class[T]">typeT</a>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <span title="object None">None</span><span class="delimiter">)</span>
    <a href="#16643" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#51478" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#16644" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#51477" title="Class[T]">typeT</a>, <a href="#51478" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#51478" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String, prefix: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.Table[T]" id="16640">table</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16642">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="51452">name</a>: <span title="String">String</span>, <a title="String" id="51453">prefix</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="51454">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#10243" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="51536">typeT</a> = <a href="#51454" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="51537">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#10243" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#51452" title="String">name</a>, <a href="#51536" title="Class[T]">typeT</a>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#51453" title="String">prefix</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#16643" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#51537" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#16644" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#51536" title="Class[T]">typeT</a>, <a href="#51537" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#51537" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])Unit" id="16643">_addTable</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="51493">t</a>:<a href="Table.scala.html#10243" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#16588" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(elems: org.squeryl.Table[_]*)Unit">append</span><span class="delimiter">(</span><a href="#51493" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]" id="16644">_addTableType</a><span class="delimiter">(</span><a title="Class[_]" id="51502">typeT</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.squeryl.Table[_]" id="51503">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#16591" title="=&gt; scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(kv: (java.lang.Class[_], org.squeryl.Table[_]))Schema.this._tableTypes.type">+=</span> <span class="delimiter">(</span><span title="(_1: Class[_$26], _2: org.squeryl.Table[_$27])(Class[_$26], org.squeryl.Table[_$27])" class="delimiter">(</span><a href="#51502" title="Class[_]">typeT</a>, <a href="#51503" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T]()(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]" id="16645">view</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16647">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="51555">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="View.scala.html#10081" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#16648" title="(name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]">view</a><span class="delimiter">(</span><a href="#16633" title="(c: Class[_])String">tableNameFromClass</a><span class="delimiter">(</span><a href="#51555" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#51555" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T])org.squeryl.View[T]" id="16648">view</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16650">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="51562">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="51563">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="View.scala.html#10081" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="View.scala.html#22720" title="(n: String)(implicit manifestT: Manifest[T])org.squeryl.View[T]" class="keyword">new</a> <a href="View.scala.html#10081" title="org.squeryl.View[T]">View</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#51562" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#51563" title="scala.reflect.Manifest[T]">manifestT</a><span class="delimiter">)</span>

  
  <span class="keyword">class</span> <a title="class ReferentialEvent extends java.lang.Object with ScalaObject" id="16651">ReferentialEvent</a><a href="#16651" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="51603">eventName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="51597">restrict</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#16652" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;restrict&quot;)" class="string">&quot;restrict&quot;</span>, <a href="#16651" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="51598">cascade</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#16652" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cascade&quot;)" class="string">&quot;cascade&quot;</span>, <a href="#16651" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="51599">noAction</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#16652" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;no action&quot;)" class="string">&quot;no action&quot;</span>, <a href="#16651" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="51600">setNull</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#16652" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="java.lang.String(&quot;set null&quot;)" class="string">&quot;set null&quot;</span>, <a href="#16651" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ReferentialActionImpl extends java.lang.Object with org.squeryl.ReferentialAction with ScalaObject" id="16652">ReferentialActionImpl</a><a href="#16652" title="ScalaObject" class="delimiter">(</a><a title="String" id="51614">token</a>: <span title="String">String</span>, <a title="Schema.this.ReferentialEvent" id="51615">ev</a>: <a href="#16651" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="KeyedEntity.scala.html#10135" title="org.squeryl.ReferentialAction">ReferentialAction</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="51612">event</a> = <a href="#51615" title="Schema.this.ReferentialEvent">ev</a>.<a href="#51603" title="=&gt; String">eventName</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="51613">action</a> = <a href="#51614" title="String">token</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="16653">onUpdate</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#16651" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="java.lang.String(&quot;update&quot;)" class="string">&quot;update&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="16654">onDelete</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#16651" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="java.lang.String(&quot;delete&quot;)" class="string">&quot;delete&quot;</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="16656">_fkIdGen</a> = <span title="Int(1)" class="int">1</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(fkColName: String, pkColName: String)org.squeryl.ForeignKeyDeclaration" id="16658">_createForeignKeyDeclaration</a><span class="delimiter">(</span><a title="String" id="51640">fkColName</a>: <span title="String">String</span>, <a title="String" id="51641">pkColName</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="51644">fkd</a> = <span title="org.squeryl.ForeignKeyDeclaration" class="keyword">new</span> <a href="KeyedEntity.scala.html#10180" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">(</span><a href="#16656" title="=&gt; Int">_fkIdGen</a>, <a href="#51640" title="String">fkColName</a>, <a href="#51641" title="String">pkColName</a><span class="delimiter">)</span>
    <a href="#16656" title="(x$1: Int)Unit">_fkIdGen</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#16659" title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a href="#51644" title="org.squeryl.ForeignKeyDeclaration">fkd</a><span class="delimiter">)</span>
    <a href="#51644" title="org.squeryl.ForeignKeyDeclaration">fkd</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit" id="16659">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a title="org.squeryl.ForeignKeyDeclaration" id="51649">foreignKeyDeclaration</a>: <a href="KeyedEntity.scala.html#10180" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">)</span> =
    <a href="#51649" title="org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#16367" title="()(implicit ev: org.squeryl.Schema)Unit">constrainReference</a>

  <span class="comment">/**
   * @return a Tuple2 with (LengthOfDecimal, Scale) that will determine the storage
   * length of the database type that map fields of type java.lang.BigDecimal
   * Can be overridden by the Column Annotation, ex.: Column(length=22, scale=20)
   * default is (20,16)
   */</span>
  
  <span class="keyword">def</span> <a title="=&gt; (Int, Int)" id="16660">defaultSizeOfBigDecimal</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Int(20)" class="int">20</span>,<span title="Int(16)" class="int">16</span><span class="delimiter">)</span>

  <span class="comment">/**
   * @return the default database storage (column) length for String columns for this Schema,
   * Can be overridden by the Column Annotation ex.: Column(length=256)
   * default is 128 
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="16661">defaultLengthOfString</a> = <span title="Int(128)" class="int">128</span>

  <span class="comment">/**
   * protected since table declarations must only be done inside a Schema
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[B](a: org.squeryl.dsl.ast.BaseColumnAttributeAssignment*)org.squeryl.dsl.ast.BaseColumnAttributeAssignment*" id="16662">declare</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16664">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*" id="51666">a</a>: <span title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">BaseColumnAttributeAssignment</span>*<span class="delimiter">)</span> = <a href="#51666" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">a</a>

  <span class="comment">/**
   * protected since table declarations must only be done inside a Schema
   */</span>  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])(declarations: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit" id="16665">on</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16667">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="51669">table</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">(</span><a title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="51670">declarations</a>: A=&gt;Seq<span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#51669" title="org.squeryl.Table[A]">table</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      org.squeryl.internals.<a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;on function called with null argument in &quot;)" class="string">&quot;on function called with null argument in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#10171" title="Schema.this.type" class="keyword">this</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot; tables must be initialized before declarations.&quot;)" class="string">&quot; tables must be initialized before declarations.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="51673">colAss</a>: <span title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">Seq</span><span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span> =
      <a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32770" title="(q: org.squeryl.Queryable[A], visitor: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">mapSampleObject</a><span class="delimiter">(</span><a href="#51669" title="org.squeryl.Table[A]">table</a>, <a href="#51670" title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">declarations</a><span class="delimiter">)</span>

    <span class="comment">// all fields that have a single 'is' declaration are first reset :</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="51712">ca</a> &lt;- <a href="#51673" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a> <span class="keyword">if</span> <a href="#51712" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#11505" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#51712" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#50726" title="=&gt; Unit">clearColumnAttributes</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="51732">ca</a> &lt;- <a href="#51673" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; AnyVal)Unit">colAss</a><span class="delimiter">)</span> <a href="#51732" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span title="AnyVal" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="51733">dva</a>:<a href="dsl/ast/ExpressionNode.scala.html#11637" title="org.squeryl.dsl.ast.DefaultValueAssignment">DefaultValueAssignment</a>    =&gt; <span class="delimiter">{</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <a href="#51733" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#51738" title="=&gt; org.squeryl.dsl.ast.TypedExpressionNode[_]">value</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#11763" title="org.squeryl.dsl.ast.ConstantExpressionNode[_]">ConstantExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;error in declaration of column &quot;)" class="string">&quot;error in declaration of column &quot;</span><span title="(x$1: Any)java.lang.String">+</span> <a href="#51669" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#22725" title="=&gt; java.lang.String">prefixedName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51733" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#51736" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48365" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                <span title="java.lang.String(&quot;only constant expressions are supported in \'defaultsTo\' declaration&quot;)" class="string">&quot;only constant expressions are supported in 'defaultsTo' declaration&quot;</span><span class="delimiter">)</span>

        <a href="#51733" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#51736" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48395" title="(x$1: Option[org.squeryl.dsl.ast.ConstantExpressionNode[_]])Unit">_defaultValue</a> = <span title="(x: org.squeryl.dsl.ast.ConstantExpressionNode[_$29])Some[org.squeryl.dsl.ast.ConstantExpressionNode[_$29]]">Some</span><span class="delimiter">(</span><a href="#51733" title="org.squeryl.dsl.ast.DefaultValueAssignment">dva</a>.<a href="dsl/ast/ExpressionNode.scala.html#51738" title="=&gt; org.squeryl.dsl.ast.TypedExpressionNode[_]">value</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.ast.ConstantExpressionNode[_$29]" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#11763" title="org.squeryl.dsl.ast.ConstantExpressionNode[_]">ConstantExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="AnyVal" id="51765">caa</a>:<a href="dsl/ast/ExpressionNode.scala.html#11505" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a> =&gt; <span class="delimiter">{</span>

        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="51782">ca</a> &lt;- <a href="#51765" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51703" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Unit">columnAttributes</a><span class="delimiter">)</span>
          <span class="delimiter">(</span><a href="#51765" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51701" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48389" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#51782" title="org.squeryl.internals.ColumnAttribute">ca</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">//don't allow a KeyedEntity.id field to not have a uniqueness constraint :</span>
        <span title="AnyVal" class="keyword">if</span><span class="delimiter">(</span><a href="#51732" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#50728" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          <a href="#51765" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51701" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48389" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#16671" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="51840">ctaa</a>:<a href="dsl/ast/ExpressionNode.scala.html#11691" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a> =&gt; <span class="delimiter">{</span>

        <span class="comment">//don't allow a KeyedEntity.id field to not have a uniqueness constraint :</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#51732" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#50728" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          <a href="#51840" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ctaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#50744" title="(a: org.squeryl.internals.ColumnAttribute)Unit">addAttribute</a><span class="delimiter">(</span><a href="#16671" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>

        <a href="#16668" title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a href="#51840" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ctaa</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">case</span> <a title="Nothing" id="51849">a</a>:<span title="Any">Any</span> =&gt; org.squeryl.internals.<a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;did not match on &quot;)" class="string">&quot;did not match on &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51849" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">a</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

<span class="comment">//    for(ca &lt;- colAss.find(_.isIdFieldOfKeyedEntity))</span>
<span class="comment">//      assert(</span>
<span class="comment">//        ca.columnAttributes.exists(_.isInstanceOf[PrimaryKey]) ||</span>
<span class="comment">//        ca.columnAttributes.exists(_.isInstanceOf[Unique]),</span>
<span class="comment">//        &quot;Column 'id' of table '&quot; + table.name +</span>
<span class="comment">//        &quot;' must have a uniqueness constraint by having the column attribute 'primaryKey' or 'unique' to honor it's KeyedEntity trait&quot;</span>
<span class="comment">//      )</span>


    <span class="comment">// Validate that autoIncremented is not used on other fields than KeyedEntity[A].id :</span>
    <span class="comment">// since it is not yet unsupported :</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="51869">ca</a> &lt;- <a href="#51673" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a><span class="delimiter">)</span> <a href="#51869" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="51870">cga</a>:<a href="dsl/ast/ExpressionNode.scala.html#11775" title="org.squeryl.dsl.ast.CompositeKeyAttributeAssignment">CompositeKeyAttributeAssignment</a> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="51879">caa</a>:<a href="dsl/ast/ExpressionNode.scala.html#11505" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="51896">ca</a> &lt;- <a href="#51879" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51703" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Nothing)Unit">columnAttributes</a> <span class="keyword">if</span> <a href="#51896" title="org.squeryl.internals.ColumnAttribute">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#12958" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#51879" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51701" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48393" title="=&gt; Boolean">isIdFieldOfKeyedEntity</a><span class="delimiter">)</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Field &quot;)" class="string">&quot;Field &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51879" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">caa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51701" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#48365" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; of table &quot;)" class="string">&quot; of table &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51669" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#22723" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span>
                <span title="java.lang.String(&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;)" class="string">&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="51898">dva</a>:<span title="Any">Any</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit" id="16668">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="51845">cga</a>: <a href="dsl/ast/ExpressionNode.scala.html#11691" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">)</span> =
    <a href="#16597" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">_columnGroupAttributeAssignments</a>.<span title="(elems: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment*)Unit">append</span><span class="delimiter">(</span><a href="#51845" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cga</a><span class="delimiter">)</span>;
  
  <span class="keyword">def</span> <a title="(typeOfIdField: Class[_])scala.collection.immutable.Set[_ &gt;: org.squeryl.internals.PrimaryKey &lt;: Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn]" id="16669">defaultColumnAttributesForKeyedEntityId</a><span class="delimiter">(</span><a title="Class[_]" id="51902">typeOfIdField</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="scala.collection.immutable.Set[_48]" class="keyword">if</span><span class="delimiter">(</span><a href="#51902" title="Class[_]">typeOfIdField</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.Long](classOf[java.lang.Long])" class="delimiter">[</span>java.lang.Long<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#51902" title="Class[_]">typeOfIdField</a>.<span title="(x$1: java.lang.Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[java.lang.Integer](classOf[java.lang.Integer])" class="delimiter">[</span>java.lang.Integer<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(elems: Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn*)scala.collection.immutable.Set[Product with Serializable with org.squeryl.internals.AttributeValidOnNumericalColumn]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#12676" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a>, <span title="org.squeryl.internals.AutoIncremented" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#12958" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="(elems: org.squeryl.internals.PrimaryKey*)scala.collection.immutable.Set[org.squeryl.internals.PrimaryKey]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#12676" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unique" id="16670">unique</a> = <a href="internals/ColumnAttribute.scala.html#55672" title="()org.squeryl.internals.Unique">Unique</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.PrimaryKey" id="16671">primaryKey</a> = <a href="internals/ColumnAttribute.scala.html#51823" title="()org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.AutoIncremented" id="16672">autoIncremented</a> = <a href="internals/ColumnAttribute.scala.html#55680" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sequenceName: String)org.squeryl.internals.AutoIncremented" id="16673">autoIncremented</a><span class="delimiter">(</span><a title="String" id="55687">sequenceName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#55680" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#55687" title="String">sequenceName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Indexed" id="16674">indexed</a> = <a href="internals/ColumnAttribute.scala.html#51402" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(indexName: String)org.squeryl.internals.Indexed" id="16675">indexed</a><span class="delimiter">(</span><a title="String" id="55703">indexName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#51402" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#55703" title="String">indexName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(declaration: String)org.squeryl.internals.DBType" id="16676">dbType</a><span class="delimiter">(</span><a title="String" id="55711">declaration</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#55716" title="(declaration: String)org.squeryl.internals.DBType">DBType</a><span class="delimiter">(</span><a href="#55711" title="String">declaration</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Uninsertable" id="16677">uninsertable</a> = <a href="internals/ColumnAttribute.scala.html#55733" title="()org.squeryl.internals.Uninsertable">Uninsertable</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unupdatable" id="16678">unupdatable</a> = <a href="internals/ColumnAttribute.scala.html#55742" title="()org.squeryl.internals.Unupdatable">Unupdatable</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)org.squeryl.internals.Named" id="16679">named</a><span class="delimiter">(</span><a title="String" id="55746">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#55751" title="(name: String)org.squeryl.internals.Named">Named</a><span class="delimiter">(</span><a href="#55746" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ColGroupDeclaration extends java.lang.Object with ScalaObject" id="16680">ColGroupDeclaration</a><a href="#16680" title="ScalaObject" class="delimiter">(</a><a title="Seq[org.squeryl.internals.FieldMetaData]" id="55764">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(columnAttributes: org.squeryl.internals.AttributeValidOnMultipleColumn*)org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="55761">are</a><span class="delimiter">(</span><a title="org.squeryl.internals.AttributeValidOnMultipleColumn*" id="55765">columnAttributes</a>: <span title="org.squeryl.internals.AttributeValidOnMultipleColumn*">AttributeValidOnMultipleColumn</span>*<span class="delimiter">)</span> =
      <span title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" class="keyword">new</span> <a href="dsl/ast/ExpressionNode.scala.html#11691" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a href="#55764" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#55765" title="org.squeryl.internals.AttributeValidOnMultipleColumn*">columnAttributes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(fieldList: org.squeryl.dsl.ast.TypedExpressionNode[_]*)Schema.this.ColGroupDeclaration" id="16681">columns</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.TypedExpressionNode[_]*" id="55770">fieldList</a>: <span title="org.squeryl.dsl.ast.TypedExpressionNode[_]*">TypedExpressionNode</span><span class="delimiter">[</span>_<span class="delimiter">]</span>*<span class="delimiter">)</span> = <span title="Schema.this.ColGroupDeclaration" class="keyword">new</span> <a href="#16680" title="Schema.this.ColGroupDeclaration">ColGroupDeclaration</a><span class="delimiter">(</span><a href="#55770" title="org.squeryl.dsl.ast.TypedExpressionNode[_]*">fieldList</a>.<span title="(f: org.squeryl.dsl.ast.TypedExpressionNode[_] =&gt; org.squeryl.internals.FieldMetaData)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.dsl.ast.TypedExpressionNode[_]],org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]])Seq[org.squeryl.internals.FieldMetaData]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]]" class="delimiter">(</span><a href="#55791" title="org.squeryl.dsl.ast.TypedExpressionNode[_]">_</a>.<a href="dsl/ast/ExpressionNode.scala.html#20394" title="=&gt; org.squeryl.internals.FieldMetaData">_fieldMetaData</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">// POSO Life Cycle Callbacks :</span>

  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]" id="16682">callbacks</a>: <span title="Seq[org.squeryl.internals.LifecycleEvent]">Seq</span><span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span> = <span title="object Nil">Nil</span>

<span class="comment">////2.9.x approach for LyfeCycle events :</span>
<span class="comment">//  def delayedInit(body: =&gt; Unit) = {</span>
<span class="comment">//</span>
<span class="comment">//    body</span>
<span class="comment">//</span>
<span class="comment">//    (for(cb &lt;- callbacks; t &lt;- cb.target) yield (t, cb))</span>
<span class="comment">//    .groupBy(_._1)</span>
<span class="comment">//    .mapValues(_.map(_._2))</span>
<span class="comment">//    .foreach(</span>
<span class="comment">//     (t:Tuple2[View[_],Seq[LifecycleEvent]]) =&gt; {</span>
<span class="comment">//       t._1._callbacks = new LifecycleEventInvoker(t._2, t._1)</span>
<span class="comment">//     }</span>
<span class="comment">//    )</span>
<span class="comment">//  }</span>

<span class="comment">////2.8.x approach for LyfeCycle events :</span>
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="16684">_callbacks</a>: <span title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">Map</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="55894">m</a> =
      <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.LifecycleEvent" id="55920">cb</a> &lt;- <a href="#16682" title="(f: org.squeryl.internals.LifecycleEvent =&gt; scala.collection.GenTraversableOnce[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.internals.LifecycleEvent],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">callbacks</a>; <a title="org.squeryl.View[_]" id="55939">t</a> &lt;- <a href="#55920" title="org.squeryl.internals.LifecycleEvent">cb</a>.<a href="internals/PosoLifecycleEvent.scala.html#55886" title="(f: org.squeryl.View[_] =&gt; (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 })(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[org.squeryl.View[_]],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">target</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span title="(_1: org.squeryl.View[_$7], _2: org.squeryl.internals.LifecycleEvent)(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent)" class="delimiter">(</span><a href="#55939" title="org.squeryl.View[_]">t</a>, <a href="#55920" title="org.squeryl.internals.LifecycleEvent">cb</a><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.View[_])scala.collection.immutable.Map[org.squeryl.View[_],Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]]">groupBy</span><span class="delimiter">(</span><a href="#56034" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="(=&gt; org.squeryl.View[_$7]) forSome { type _$7 }">_1</span><span class="delimiter">)</span>
      .<span title="(f: Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }] =&gt; Seq[org.squeryl.internals.LifecycleEvent])scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]]">mapValues</span><span class="delimiter">(</span><a href="#56062" title="Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">_</a>.<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.internals.LifecycleEvent)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }],org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]])Seq[org.squeryl.internals.LifecycleEvent]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]]" class="delimiter">(</span><a href="#56079" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="=&gt; org.squeryl.internals.LifecycleEvent">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: ((org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])) =&gt; (org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]],(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]]" class="delimiter">(</span>
       <span class="delimiter">(</span>t:<span title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">Tuple2</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,Seq<span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
         <span title="(_1: org.squeryl.View[_$33], _2: org.squeryl.internals.LifecycleEventInvoker)(org.squeryl.View[_$33], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span><a href="#56176" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span>, <span title="org.squeryl.internals.LifecycleEventInvoker" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12994" title="org.squeryl.internals.LifecycleEventInvoker">LifecycleEventInvoker</a><span class="delimiter">(</span><a href="#56176" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]">_2</span>, <a href="#56176" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">)</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>
      .<span title="(implicit ev: &lt;:&lt;[(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">toMap</span>
    <a href="#55894" title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">m</a>
  <span class="delimiter">}</span>

  <span class="keyword">import</span> internals.<a href="internals/PosoLifecycleEvent.scala.html#12770" title="object org.squeryl.internals.PosoLifecycleEvent">PosoLifecycleEvent</a>._

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16686">beforeInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16688">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56742">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56742" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56726" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16689">beforeInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16691">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56769">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56769" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56726" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16692">beforeUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16694">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56789">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56789" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56734" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16695">beforeUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16697">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56798">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56798" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56734" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16698">beforeDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16700">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56804">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" id="56805">ev</a> : A <span title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]">&lt;:&lt;</span> KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56804" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56730" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[K, A &lt;: org.squeryl.KeyedEntity[K]]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16701">beforeDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16704">K</a>, <a title="&gt;: Nothing &lt;: org.squeryl.KeyedEntity[K]" id="16705">A</a> &lt;: KeyedEntity<span class="delimiter">[</span>K<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56818">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56818" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56730" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16706">afterInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16708">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56824">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56824" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56728" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16709">afterInsert</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16711">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56833">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56833" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56728" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16712">afterUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16714">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56839">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56839" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56736" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16715">afterUpdate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16717">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56848">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56848" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56736" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="16718">afterDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16720">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56854">t</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12916" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56854" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#56732" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="16721">afterDelete</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16723">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="56863">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12547" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56863" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>, <a href="#10171" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#56732" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])org.squeryl.internals.PosoFactoryPercursorTable[A]" id="16724">factoryFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16726">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="56869">table</a>: <a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.PosoFactoryPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#12481" title="org.squeryl.internals.PosoFactoryPercursorTable[A]">PosoFactoryPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#56869" title="org.squeryl.Table[A]">table</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a ActiveRecord instance for the given the object. That allows the user
   * to save the given object using the Active Record pattern.
   *
   * @return a instance of ActiveRecord associated to the given object.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](a: A)(implicit queryDsl: org.squeryl.dsl.QueryDsl, implicit m: scala.reflect.Manifest[A])Schema.this.ActiveRecord[A]" id="16727">anyRef2ActiveTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16729">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="56881">a</a>: <a href="#16729" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.squeryl.dsl.QueryDsl" id="56882">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#11288" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="56883">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="Schema.this.ActiveRecord[A]" class="keyword">new</span> <a href="#16730" title="Schema.this.ActiveRecord[A]">ActiveRecord</a><span class="delimiter">(</span><a href="#56881" title="A">a</a>, <a href="#56882" title="org.squeryl.dsl.QueryDsl">queryDsl</a>, <a href="#56883" title="scala.reflect.Manifest[A]">m</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Active Record pattern implementation. Enables the user to insert an object in its
   * existent table with a convenient {{{save}}} method.
   */</span>
  <span class="keyword">class</span> <a title="class ActiveRecord[A] extends java.lang.Object with ScalaObject" id="16730">ActiveRecord</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="16731">A</a><span class="delimiter">]</span><a href="#16730" title="ScalaObject" class="delimiter">(</a><a title="A" id="56897">a</a>: <a href="#16731" title="A">A</a>, <a title="org.squeryl.dsl.QueryDsl" id="56898">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#11288" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="56899">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]" id="56893">_performAction</a><span class="delimiter">(</span><a title="org.squeryl.Table[A] =&gt; Unit" id="56913">action</a>: <span class="delimiter">(</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> =
      <a href="#16591" title="=&gt; scala.collection.mutable.HashMap[java.lang.Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(key: java.lang.Class[_])Option[org.squeryl.Table[_]]">get</span> <span class="delimiter">(</span><a href="#56899" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span><span class="delimiter">)</span> <span title="(f: org.squeryl.Table[_] =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> table: <a href="Table.scala.html#10243" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <a href="#56898" title="org.squeryl.dsl.QueryDsl">queryDsl</a> <a href="dsl/QueryDsl.scala.html#17530" title="(a: =&gt; Unit)Unit">inTransaction</a> <span class="delimiter">(</span><a href="#56913" title="(v1: org.squeryl.Table[A])Unit">action</a><span class="delimiter">(</span><a href="#56932" title="org.squeryl.Table[_]">table</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[A]" class="delimiter">[</span><a href="Table.scala.html#10243" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Same as {{{table.insert(a)}}}
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Option[Unit]" id="56894">save</a> =
      <a href="#56893" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#57311" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#36875" title="(t: A)A">insert</a><span title="Unit" class="delimiter">(</span><a href="#56897" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Same as {{{table.update(a)}}}
     */</span>  
    <span class="keyword">def</span> <a title="(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])Option[Unit]" id="56895">update</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" id="57326">ev</a>: A <span title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]">&lt;:&lt;</span> KeyedEntity<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#56893" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#57330" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#36880" title="(o: A)(implicit ev: &lt;:&lt;[A,org.squeryl.KeyedEntity[_]])Unit">update</a><a href="#57326" title="&lt;:&lt;[A,org.squeryl.KeyedEntity[_]]" class="delimiter">(</a><a href="#56897" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>