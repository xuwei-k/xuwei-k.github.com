<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/squeryl/dsl/AbstractQuery.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */</span>
<span class="keyword">package</span> org.squeryl.dsl

<span class="keyword">import</span> ast._
<span class="keyword">import</span> internal.<span class="delimiter">{</span>InnerJoinedQueryable, OuterJoinedQueryable<span class="delimiter">}</span>
<span class="keyword">import</span> java.sql.ResultSet
<span class="keyword">import</span> org.squeryl.internals._
<span class="keyword">import</span> org.squeryl.<span class="delimiter">{</span>View, Queryable, Session, Query<span class="delimiter">}</span>
<span class="keyword">import</span> collection.mutable.ArrayBuffer
<span class="keyword">import</span> org.squeryl.logging._
<span class="keyword">import</span> java.io.Closeable

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AbstractQuery[R] extends java.lang.Object with org.squeryl.Query[R] with ScalaObject" id="10928">AbstractQuery</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="11319">R</a><span class="delimiter">]</span><a href="#10928" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="Boolean" id="72972">isRoot</a>:<span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../Query.scala.html#9943" title="org.squeryl.Query[R]">Query</a><span class="delimiter">[</span>R<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="72924">selectDistinct</a> = <span title="Boolean(false)" class="keyword">false</span>
  
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="72927">isForUpdate</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Option[(Int, Int)]" id="72930">page</a>: <span title="Option[(Int, Int)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Int,Int<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="object None">None</span>


  <span class="keyword">val</span> <a title="org.squeryl.internals.ResultSetMapper" id="72932">resultSetMapper</a> = <span title="org.squeryl.internals.ResultSetMapper" class="keyword">new</span> <a href="../internals/ResultSetMapper.scala.html#12886" title="org.squeryl.internals.ResultSetMapper">ResultSetMapper</a>

  <span class="keyword">val</span> <a title="java.lang.String" id="72934">name</a> = <span title="java.lang.String(&quot;query&quot;)" class="string">&quot;query&quot;</span>

  <span class="keyword">def</span> <a title="(rsm: org.squeryl.internals.ResultSetMapper, rs: java.sql.ResultSet)R" id="72936">give</a><span class="delimiter">(</span><a title="org.squeryl.internals.ResultSetMapper" id="72973">rsm</a>: <a href="../internals/ResultSetMapper.scala.html#12886" title="org.squeryl.internals.ResultSetMapper">ResultSetMapper</a>, <a title="java.sql.ResultSet" id="72974">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#11319" title="R">R</a> = <span class="delimiter">{</span>
    <a href="#72973" title="org.squeryl.internals.ResultSetMapper">rsm</a>.<a href="../internals/ResultSetMapper.scala.html#34917" title="(resultSet: java.sql.ResultSet)Unit">pushYieldedValues</a><span class="delimiter">(</span><a href="#72974" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="R" id="72976">r</a> = <a href="../Query.scala.html#16335" title="(rsm: org.squeryl.internals.ResultSetMapper, resultSet: java.sql.ResultSet)R">invokeYield</a><span class="delimiter">(</span><a href="#72973" title="org.squeryl.internals.ResultSetMapper">rsm</a>, <a href="#72974" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
    <a href="#72976" title="R">r</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Builds the AST tree of the this Query, *some state mutation of the AST nodes occurs
   * during AST construction, for example, the parent child relationship is set by this method,
   * unique IDs of node that needs them for example.
   *
   * After this call, the query (and it's AST) becomes immutable by virtue of the unaccessibility
   * of it's public methods 
   */</span>
  <span class="keyword">val</span> <a title="Option[java.lang.StackTraceElement]" id="72937">definitionSite</a>: <span title="Option[java.lang.StackTraceElement]">Option</span><span class="delimiter">[</span>StackTraceElement<span class="delimiter">]</span> =
    <span title="Option[java.lang.StackTraceElement]" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#72972" title="=&gt; Boolean">isRoot</a><span class="delimiter">)</span> <span title="object None">None</span>
    <span class="keyword">else</span> <span title="(x: java.lang.StackTraceElement)Some[java.lang.StackTraceElement]">Some</span><span class="delimiter">(</span><a href="#72939" title="=&gt; java.lang.StackTraceElement">_deduceDefinitionSite</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.lang.StackTraceElement" id="72939">_deduceDefinitionSite</a>: <span title="java.lang.StackTraceElement">StackTraceElement</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[java.lang.StackTraceElement]" id="72984">st</a> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>
    <span class="keyword">var</span> <a title="Int" id="72985">i</a> = <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#72985" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#72984" title="Array[java.lang.StackTraceElement]">st</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#72986" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="java.lang.StackTraceElement" id="72991">e</a> = <a href="#72984" title="(i: Int)java.lang.StackTraceElement">st</a><span class="delimiter">(</span><a href="#72985" title="Int">i</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="72992">cn</a> = <a href="#72991" title="java.lang.StackTraceElement">e</a>.<span title="()java.lang.String">getClassName</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#72992" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;org.squeryl.&quot;)" class="string">&quot;org.squeryl.&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#72992" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;org.squeryl.tests.&quot;)" class="string">&quot;org.squeryl.tests.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#72992" title="java.lang.String">cn</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scala.&quot;)" class="string">&quot;scala.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#72985" title="Int">i</a> = <a href="#72985" title="Int">i</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
      <span class="keyword">else</span>
        <span title="Nothing" class="keyword">return</span> <a href="#72991" title="java.lang.StackTraceElement">e</a>
    <span class="delimiter">}</span>
    <span title="java.lang.StackTraceElement" class="keyword">new</span> <span title="java.lang.StackTraceElement">StackTraceElement</span><span class="delimiter">(</span><span title="java.lang.String(&quot;unknown&quot;)" class="string">&quot;unknown&quot;</span>, <span title="java.lang.String(&quot;unknown&quot;)" class="string">&quot;unknown&quot;</span>, <span title="java.lang.String(&quot;unknown&quot;)" class="string">&quot;unknown&quot;</span>, -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(qy: org.squeryl.dsl.QueryYield[R], subQueryables: AbstractQuery.this.SubQueryable[_]*)org.squeryl.dsl.ast.QueryExpressionNode[R]" id="72940">buildAst</a><span class="delimiter">(</span><a title="org.squeryl.dsl.QueryYield[R]" id="73004">qy</a>: <a href="QueryYield.scala.html#11072" title="org.squeryl.dsl.QueryYield[R]">QueryYield</a><span class="delimiter">[</span>R<span class="delimiter">]</span>, <a title="AbstractQuery.this.SubQueryable[_]*" id="73005">subQueryables</a>: <span title="AbstractQuery.this.SubQueryable[_]*">SubQueryable</span><span class="delimiter">[</span>_<span class="delimiter">]</span>*<span class="delimiter">)</span> = <span class="delimiter">{</span>


    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.QueryableExpressionNode]" id="73008">subQueries</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.QueryableExpressionNode]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.QueryableExpressionNode]">ArrayBuffer</span><span class="delimiter">[</span>QueryableExpressionNode<span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ViewExpressionNode[_]]" id="73009">views</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ViewExpressionNode[_]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ViewExpressionNode[_]]">ArrayBuffer</span><span class="delimiter">[</span>ViewExpressionNode<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#73004" title="org.squeryl.dsl.QueryYield[R]">qy</a>.<a href="QueryYield.scala.html#22758" title="=&gt; Seq[() =&gt; org.squeryl.dsl.ast.LogicalBoolean]">joinExpressions</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object Nil">Nil</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Iterator[AbstractQuery.this.SubQueryable[_]]" id="73026">sqIterator</a> = <a href="#73005" title="AbstractQuery.this.SubQueryable[_]*">subQueryables</a>.<span title="=&gt; Iterator[AbstractQuery.this.SubQueryable[_]]">iterator</span>
      <span class="keyword">val</span> <a title="Iterator[() =&gt; org.squeryl.dsl.ast.LogicalBoolean]" id="73027">joinExprsIterator</a> = <a href="#73004" title="org.squeryl.dsl.QueryYield[R]">qy</a>.<a href="QueryYield.scala.html#22758" title="=&gt; Seq[() =&gt; org.squeryl.dsl.ast.LogicalBoolean]">joinExpressions</a>.<span title="=&gt; Iterator[() =&gt; org.squeryl.dsl.ast.LogicalBoolean]">iterator</span> 
      <a href="#73026" title="Iterator[AbstractQuery.this.SubQueryable[_]]">sqIterator</a>.<span title="()AbstractQuery.this.SubQueryable[_]">next</span> <span class="comment">// get rid of the first one</span>

      <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#73026" title="Iterator[AbstractQuery.this.SubQueryable[_]]">sqIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#73038" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="AbstractQuery.this.SubQueryable[_]" id="73039">nthQueryable</a> = <a href="#73026" title="Iterator[AbstractQuery.this.SubQueryable[_]]">sqIterator</a>.<span title="()AbstractQuery.this.SubQueryable[_]">next</span>
        <span class="keyword">val</span> <a title="() =&gt; org.squeryl.dsl.ast.LogicalBoolean" id="73040">nthJoinExpr</a> = <a href="#73027" title="Iterator[() =&gt; org.squeryl.dsl.ast.LogicalBoolean]">joinExprsIterator</a>.<span title="()() =&gt; org.squeryl.dsl.ast.LogicalBoolean">next</span>
        <a href="#73039" title="AbstractQuery.this.SubQueryable[_]">nthQueryable</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65375" title="(x$1: Option[org.squeryl.dsl.ast.LogicalBoolean])Unit">joinExpression</a> = <span title="(x: org.squeryl.dsl.ast.LogicalBoolean)Some[org.squeryl.dsl.ast.LogicalBoolean]">Some</span><span class="delimiter">(</span><a href="#73040" title="()org.squeryl.dsl.ast.LogicalBoolean">nthJoinExpr</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="AbstractQuery.this.SubQueryable[_]" id="73080">sq</a> &lt;- <a href="#73005" title="(f: AbstractQuery.this.SubQueryable[_] =&gt; Unit)Unit">subQueryables</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <a href="#73080" title="AbstractQuery.this.SubQueryable[_]">sq</a>.<a href="#74376" title="=&gt; Boolean">isQuery</a><span class="delimiter">)</span>
        <a href="#73009" title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ViewExpressionNode[_]]">views</a>.<span title="(elems: org.squeryl.dsl.ast.ViewExpressionNode[_]*)Unit">append</span><span class="delimiter">(</span><a href="#73080" title="AbstractQuery.this.SubQueryable[_]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.ast.ViewExpressionNode[_$3]" class="delimiter">[</span><a href="ast/ViewExpressionNode.scala.html#11532" title="org.squeryl.dsl.ast.ViewExpressionNode[_]">ViewExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="AbstractQuery.this.SubQueryable[_]" id="73098">sq</a> &lt;- <a href="#73005" title="(f: AbstractQuery.this.SubQueryable[_] =&gt; Unit)Unit">subQueryables</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#73098" title="AbstractQuery.this.SubQueryable[_]">sq</a>.<a href="#74376" title="=&gt; Boolean">isQuery</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.QueryExpressionNode[_]" id="73099">z</a> = <a href="#73098" title="AbstractQuery.this.SubQueryable[_]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.ast.QueryExpressionNode[_$4]" class="delimiter">[</span><a href="ast/QueryExpressionNode.scala.html#11772" title="org.squeryl.dsl.ast.QueryExpressionNode[_]">QueryExpressionNode</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span> <a href="#73099" title="org.squeryl.dsl.ast.QueryExpressionNode[_]">z</a>.<a href="ast/QueryExpressionNode.scala.html#73132" title="=&gt; Boolean">isUseableAsSubquery</a><span class="delimiter">)</span>
          org.squeryl.internals.<a href="../internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="../internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Sub query returns a primitive type or a Tuple of primitive type, and therefore is not useable as a subquery in a from or join clause, see \012http://squeryl.org/limitations.html&quot;)" class="string">&quot;Sub query returns a primitive type or a Tuple of primitive type, and therefore is not useable as a subquery in a from or join clause, see \nhttp://squeryl.org/limitations.html&quot;</span><span class="delimiter">)</span>
        <a href="#73008" title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.QueryableExpressionNode]">subQueries</a>.<span title="(elems: org.squeryl.dsl.ast.QueryableExpressionNode*)Unit">append</span><span class="delimiter">(</span><a href="#73099" title="org.squeryl.dsl.ast.QueryExpressionNode[_]">z</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.QueryExpressionNode[R]" id="73010">qen</a> = <span title="org.squeryl.dsl.ast.QueryExpressionNode[R]" class="keyword">new</span> <a href="ast/QueryExpressionNode.scala.html#11772" title="org.squeryl.dsl.ast.QueryExpressionNode[R]">QueryExpressionNode</a><span class="delimiter">[</span>R<span class="delimiter">]</span><span class="delimiter">(</span><a href="#10928" title="org.squeryl.dsl.AbstractQuery[R]" class="keyword">this</a>, <a href="#73004" title="org.squeryl.dsl.QueryYield[R]">qy</a>, <a href="#73008" title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.QueryableExpressionNode]">subQueries</a>, <a href="#73009" title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ViewExpressionNode[_]]">views</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a href="#73012" title="(Iterable[org.squeryl.dsl.ast.SelectElement], AnyRef)" class="delimiter">(</a><a href="#73011" title="Iterable[org.squeryl.dsl.ast.SelectElement]" id="73012">sl</a>,<a href="#73011" title="AnyRef" id="73013">d</a><span class="delimiter">)</span> = <a href="#73004" title="org.squeryl.dsl.QueryYield[R]">qy</a>.<a href="QueryYield.scala.html#22756" title="(q: org.squeryl.dsl.ast.QueryExpressionNode[_], rsm: org.squeryl.internals.ResultSetMapper)(Iterable[org.squeryl.dsl.ast.SelectElement], AnyRef)">invokeYieldForAst</a><span title="(Iterable[org.squeryl.dsl.ast.SelectElement], AnyRef) @unchecked" class="delimiter">(</span><a href="#73010" title="org.squeryl.dsl.ast.QueryExpressionNode[R]">qen</a>, <a href="#72932" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a><span class="delimiter">)</span>
    <a href="#73010" title="org.squeryl.dsl.ast.QueryExpressionNode[R]">qen</a>.<a href="ast/QueryExpressionNode.scala.html#73144" title="(sl: Iterable[org.squeryl.dsl.ast.SelectElement], s: AnyRef)Unit">setOutExpressionNodesAndSample</a><span class="delimiter">(</span><a href="#73012" title="Iterable[org.squeryl.dsl.ast.SelectElement]">sl</a>, <a href="#73013" title="AnyRef">d</a><span class="delimiter">)</span>

<span class="comment">//    sl.filter(_.isInstanceOf[ExportedSelectElement]).</span>
<span class="comment">//       map(_.asInstanceOf[ExportedSelectElement]).</span>
<span class="comment">//       foreach(_.buildReferencePath)</span>

    <a href="#73010" title="org.squeryl.dsl.ast.QueryExpressionNode[R]">qen</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[R]" id="72941">ast</a>: <a href="ast/QueryExpressionNode.scala.html#11772" title="org.squeryl.dsl.ast.QueryExpressionNode[R]">QueryExpressionNode</a><span class="delimiter">[</span>R<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]" id="72942">copy</a><span class="delimiter">(</span><a title="Boolean" id="73248">asRoot</a>:<span title="Boolean">Boolean</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[R]" id="73251">c</a> = <a href="#72943" title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]">createCopy</a><span class="delimiter">(</span><a href="#73248" title="Boolean">asRoot</a><span class="delimiter">)</span>
    <a href="#73251" title="org.squeryl.dsl.AbstractQuery[R]">c</a>.<a href="#72924" title="(x$1: Boolean)Unit">selectDistinct</a> = <a href="#72924" title="=&gt; Boolean">selectDistinct</a>
    <a href="#73251" title="org.squeryl.dsl.AbstractQuery[R]">c</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]" id="72943">createCopy</a><span class="delimiter">(</span><a title="Boolean" id="73252">asRoot</a>:<span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#10928" title="org.squeryl.dsl.AbstractQuery[R]">AbstractQuery</a><span class="delimiter">[</span>R<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="72944">dumpAst</a> = <a href="#72941" title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[R]">ast</a>.<a href="ast/ExpressionNode.scala.html#65388" title="=&gt; java.lang.String">dumpAst</a>

  <span class="keyword">def</span> <a title="=&gt; String" id="72945">statement</a>: <span title="String">String</span> = <a href="#72946" title="(forDisplay: Boolean)java.lang.String">_genStatement</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(forDisplay: Boolean)java.lang.String" id="72946">_genStatement</a><span class="delimiter">(</span><a title="Boolean" id="73647">forDisplay</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="73650">sw</a> = <span title="org.squeryl.internals.StatementWriter" class="keyword">new</span> <a href="../internals/StatementWriter.scala.html#12931" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><a href="#73647" title="Boolean">forDisplay</a>, <a href="../Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="../Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="../Session.scala.html#36964" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a><span class="delimiter">)</span>
    <a href="#72941" title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[R]">ast</a>.<a href="ast/ExpressionNode.scala.html#20367" title="(sw: org.squeryl.internals.StatementWriter)Unit">write</a><span class="delimiter">(</span><a href="#73650" title="org.squeryl.internals.StatementWriter">sw</a><span class="delimiter">)</span>
    <a href="#73650" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="../internals/StatementWriter.scala.html#40650" title="=&gt; java.lang.String">statement</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.AbstractQuery[R]" id="72947">distinct</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[R]" id="73656">c</a> = <a href="#72942" title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]">copy</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <a href="#73656" title="org.squeryl.dsl.AbstractQuery[R]">c</a>.<a href="#72924" title="(x$1: Boolean)Unit">selectDistinct</a> = <span title="Boolean(true)" class="keyword">true</span>;
    <a href="#73656" title="org.squeryl.dsl.AbstractQuery[R]">c</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(offset: Int, pageLength: Int)org.squeryl.Query[R]" id="72948">page</a><span class="delimiter">(</span><a title="Int" id="73657">offset</a>: <span title="Int">Int</span>, <a title="Int" id="73658">pageLength</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="../Query.scala.html#9943" title="org.squeryl.Query[R]">Query</a><span class="delimiter">[</span>R<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[R]" id="73660">c</a> = <a href="#72942" title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]">copy</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <a href="#73660" title="org.squeryl.dsl.AbstractQuery[R]">c</a>.<a href="#72930" title="(x$1: Option[(Int, Int)])Unit">page</a> = <span title="(x: (Int, Int))Some[(Int, Int)]">Some</span><span class="delimiter">(</span><span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#73657" title="Int">offset</a>, <a href="#73658" title="Int">pageLength</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#73660" title="org.squeryl.dsl.AbstractQuery[R]">c</a>    
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.dsl.AbstractQuery[R]" id="72949">forUpdate</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[R]" id="73675">c</a> = <a href="#72942" title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[R]">copy</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <a href="#73675" title="org.squeryl.dsl.AbstractQuery[R]">c</a>.<a href="#72927" title="(x$1: Boolean)Unit">isForUpdate</a> = <span title="Boolean(true)" class="keyword">true</span>;
    <a href="#73675" title="org.squeryl.dsl.AbstractQuery[R]">c</a>    
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.DatabaseAdapter" id="72950">_dbAdapter</a> = <a href="../Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="../Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="../Session.scala.html#36964" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.Object with Iterator[R] with java.io.Closeable" id="72951">iterator</a> = <a href="#73682" title="java.lang.Object with Iterator[R] with java.io.Closeable{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[R] with java.io.Closeable" id="73682">Iterator</a><span class="delimiter">[</span>R<span class="delimiter">]</span> <span class="keyword">with</span> <span title="java.io.Closeable">Closeable</span> <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="73853">sw</a> = <span title="org.squeryl.internals.StatementWriter" class="keyword">new</span> <a href="../internals/StatementWriter.scala.html#12931" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#72950" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
    <a href="#72941" title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[R]">ast</a>.<a href="ast/ExpressionNode.scala.html#20367" title="(sw: org.squeryl.internals.StatementWriter)Unit">write</a><span class="delimiter">(</span><a href="#73853" title="=&gt; org.squeryl.internals.StatementWriter">sw</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.squeryl.Session" id="73855">s</a> = <a href="../Session.scala.html#10079" title="object org.squeryl.Session">Session</a>.<a href="../Session.scala.html#36953" title="=&gt; org.squeryl.Session">currentSession</a>
    <span class="keyword">val</span> <a title="Long" id="73857">beforeQueryExecute</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
    <span class="keyword">val</span> <a href="#73860" title="(java.sql.ResultSet, java.sql.PreparedStatement)" class="delimiter">(</a><a href="#73859" title="java.sql.ResultSet" id="73860">rs</a>, <a href="#73859" title="java.sql.PreparedStatement" id="73862">stmt</a><span class="delimiter">)</span> = <a href="#72950" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="../internals/DatabaseAdapter.scala.html#37037" title="(s: org.squeryl.Session, sw: org.squeryl.internals.StatementWriter)(java.sql.ResultSet, java.sql.PreparedStatement)">executeQuery</a><span title="(java.sql.ResultSet, java.sql.PreparedStatement) @unchecked" class="delimiter">(</span><a href="#73855" title="=&gt; org.squeryl.Session">s</a>, <a href="#73853" title="=&gt; org.squeryl.internals.StatementWriter">sw</a><span class="delimiter">)</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.squeryl.logging.StatementInvocationEvent" id="73865">statEx</a> = <span title="org.squeryl.logging.StatementInvocationEvent" class="keyword">new</span> <a href="../logging/StatisticsListener.scala.html#13449" title="org.squeryl.logging.StatementInvocationEvent">StatementInvocationEvent</a><span class="delimiter">(</span><a href="#72937" title="=&gt; Option[java.lang.StackTraceElement]">definitionSite</a>.<span title="=&gt; java.lang.StackTraceElement">get</span>, <a href="#73857" title="=&gt; Long">beforeQueryExecute</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>, -<span title="Int(-1)" class="int">1</span>, <a href="#73853" title="=&gt; org.squeryl.internals.StatementWriter">sw</a>.<a href="../internals/StatementWriter.scala.html#40650" title="=&gt; java.lang.String">statement</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36966" title="=&gt; Option[org.squeryl.logging.StatisticsListener]">statisticsListener</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span>
      <a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36966" title="=&gt; Option[org.squeryl.logging.StatisticsListener]">statisticsListener</a>.<span title="=&gt; org.squeryl.logging.StatisticsListener">get</span>.<a href="../logging/StatisticsListener.scala.html#57393" title="(se: org.squeryl.logging.StatementInvocationEvent)Unit">queryExecuted</a><span class="delimiter">(</span><a href="#73864" title="=&gt; org.squeryl.logging.StatementInvocationEvent">statEx</a><span class="delimiter">)</span>

    <a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36985" title="(s: java.sql.Statement)Unit">_addStatement</a><span class="delimiter">(</span><a href="#73862" title="=&gt; java.sql.PreparedStatement">stmt</a><span class="delimiter">)</span> <span class="comment">// if the iteration doesn't get completed, we must hang on to the statement to clean it up at session end.</span>
    <a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36986" title="(rs: java.sql.ResultSet)Unit">_addResultSet</a><span class="delimiter">(</span><a href="#73860" title="=&gt; java.sql.ResultSet">rs</a><span class="delimiter">)</span> <span class="comment">// same for the result set</span>
    
    <span class="keyword">var</span> <a title="Boolean" id="73867">_nextCalled</a> = <span title="Boolean(false)" class="keyword">false</span>;
    <span class="keyword">var</span> <a title="Boolean" id="73870">_hasNext</a> = <span title="Boolean(false)" class="keyword">false</span>;

    <span class="keyword">var</span> <a title="Int" id="73873">rowCount</a> = <span title="Int(0)" class="int">0</span>
    
    <span class="keyword">def</span> <a title="()Unit" id="73875">close</a> <span class="delimiter">{</span>
      <a href="#73862" title="=&gt; java.sql.PreparedStatement">stmt</a>.<span title="()Unit">close</span>
      <a href="#73860" title="=&gt; java.sql.ResultSet">rs</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="73876">_next</a> = <span class="delimiter">{</span>
      <a href="#73870" title="(x$1: Boolean)Unit">_hasNext</a> = <a href="#73860" title="=&gt; java.sql.ResultSet">rs</a>.<span title="()Boolean">next</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#73870" title="=&gt; Boolean">_hasNext</a><span class="delimiter">)</span> <span class="delimiter">{</span><span class="comment">// close it since we've completed the iteration</span>
        <a href="../internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="../internals/Utils.scala.html#32757" title="(rs: java.sql.ResultSet)Unit">close</a><span class="delimiter">(</span><a href="#73860" title="=&gt; java.sql.ResultSet">rs</a><span class="delimiter">)</span>
        <a href="#73862" title="=&gt; java.sql.PreparedStatement">stmt</a>.<span title="()Unit">close</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36966" title="=&gt; Option[org.squeryl.logging.StatisticsListener]">statisticsListener</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36966" title="=&gt; Option[org.squeryl.logging.StatisticsListener]">statisticsListener</a>.<span title="=&gt; org.squeryl.logging.StatisticsListener">get</span>.<a href="../logging/StatisticsListener.scala.html#57394" title="(statementInvocationId: String, iterationEndTime: Long, rowCount: Int, iterationCompleted: Boolean)Unit">resultSetIterationEnded</a><span class="delimiter">(</span><a href="#73864" title="=&gt; org.squeryl.logging.StatementInvocationEvent">statEx</a>.<a href="../logging/StatisticsListener.scala.html#73951" title="=&gt; java.lang.String">uuid</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>, <a href="#73873" title="=&gt; Int">rowCount</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      
      <a href="#73873" title="(x$1: Int)Unit">rowCount</a> = <a href="#73873" title="=&gt; Int">rowCount</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
      <a href="#73867" title="(x$1: Boolean)Unit">_nextCalled</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="73877">hasNext</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#73867" title="=&gt; Boolean">_nextCalled</a><span class="delimiter">)</span>
        <a href="#73876" title="=&gt; Unit">_next</a>
      <a href="#73870" title="=&gt; Boolean">_hasNext</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="()R" id="73878">next</a>: <a href="#11319" title="R">R</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#73867" title="=&gt; Boolean">_nextCalled</a><span class="delimiter">)</span>
        <a href="#73876" title="=&gt; Unit">_next</a>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#73870" title="=&gt; Boolean">_hasNext</a><span class="delimiter">)</span>
        org.squeryl.internals.<a href="../internals/Utils.scala.html#13022" title="object org.squeryl.internals.Utils">Utils</a>.<a href="../internals/Utils.scala.html#32775" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;next called with no rows available&quot;)" class="string">&quot;next called with no rows available&quot;</span><span class="delimiter">)</span>
      <a href="#73867" title="(x$1: Boolean)Unit">_nextCalled</a> = <span title="Boolean(false)" class="keyword">false</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36976" title="=&gt; Boolean">isLoggingEnabled</a><span class="delimiter">)</span>
        <a href="#73855" title="=&gt; org.squeryl.Session">s</a>.<a href="../Session.scala.html#36977" title="(s: String)Unit">log</a><span class="delimiter">(</span><a href="../internals/ResultSetMapper.scala.html#12836" title="object org.squeryl.internals.ResultSetUtils">ResultSetUtils</a>.<a href="../internals/ResultSetMapper.scala.html#20762" title="(rs: java.sql.ResultSet)String">dumpRow</a><span class="delimiter">(</span><a href="#73860" title="=&gt; java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#72936" title="(rsm: org.squeryl.internals.ResultSetMapper, rs: java.sql.ResultSet)R">give</a><span class="delimiter">(</span><a href="#72932" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#73860" title="=&gt; java.sql.ResultSet">rs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="72952">toString</a> = <a href="#72944" title="=&gt; java.lang.String">dumpAst</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#72946" title="(forDisplay: Boolean)java.lang.String">_genStatement</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[U](q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]" id="72953">createSubQueryable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="72955">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Queryable[U]" id="74358">q</a>: <a href="../Queryable.scala.html#9880" title="org.squeryl.Queryable[U]">Queryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span> =
    <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">if</span><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../View.scala.html#10081" title="org.squeryl.View[_]">View</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.View[U]" id="74365">v</a> = <a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.View[U]" class="delimiter">[</span><a href="../View.scala.html#10081" title="org.squeryl.View[U]">View</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.ViewExpressionNode[U]" id="74366">vxn</a> = <span title="org.squeryl.dsl.ast.ViewExpressionNode[U]" class="keyword">new</span> <a href="ast/ViewExpressionNode.scala.html#11532" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">ViewExpressionNode</a><span class="delimiter">(</span><a href="#74365" title="org.squeryl.View[U]">v</a><span class="delimiter">)</span>
      <a href="#74366" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">vxn</a>.<a href="ast/ViewExpressionNode.scala.html#65407" title="(d: U)Unit">sample</a> =
        <a href="#74365" title="org.squeryl.View[U]">v</a>.<a href="../View.scala.html#22728" title="=&gt; org.squeryl.internals.PosoMetaData[U]">posoMetaData</a>.<a href="../internals/PosoMetaData.scala.html#37269" title="(cb: net.sf.cglib.proxy.Callback)U">createSample</a><span class="delimiter">(</span><a href="../internals/FieldReferenceLinker.scala.html#12686" title="object org.squeryl.internals.FieldReferenceLinker">FieldReferenceLinker</a>.<a href="../internals/FieldReferenceLinker.scala.html#20503" title="(v: org.squeryl.dsl.ast.ViewExpressionNode[_])net.sf.cglib.proxy.Callback">createCallBack</a><span class="delimiter">(</span><a href="#74366" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">vxn</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">new</span> <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">(</span><a href="#74365" title="org.squeryl.View[U]">v</a>, <a href="#74366" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">vxn</a>.<a href="ast/ViewExpressionNode.scala.html#65408" title="=&gt; U">sample</a>, <a href="#74366" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">vxn</a>.<a href="ast/ViewExpressionNode.scala.html#65400" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#74366" title="org.squeryl.dsl.ast.ViewExpressionNode[U]">vxn</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">if</span><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="OptionalQueryable.scala.html#11006" title="org.squeryl.dsl.OptionalQueryable[_]">OptionalQueryable</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.OptionalQueryable[U]" id="74392">oqr</a> = <a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.OptionalQueryable[U]" class="delimiter">[</span><a href="OptionalQueryable.scala.html#11006" title="org.squeryl.dsl.OptionalQueryable[U]">OptionalQueryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="AbstractQuery.this.SubQueryable[U]" id="74393">sq</a> = <a href="#72953" title="[U](q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]">createSubQueryable</a><span title="(q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#74392" title="org.squeryl.dsl.OptionalQueryable[U]">oqr</a>.<a href="OptionalQueryable.scala.html#22797" title="=&gt; org.squeryl.Queryable[U]">queryable</a><span class="delimiter">)</span>
      <a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65368" title="(b: Boolean)Unit">inhibited</a> = <a href="#74392" title="org.squeryl.dsl.OptionalQueryable[U]">oqr</a>.<a href="../Queryable.scala.html#22316" title="=&gt; Boolean">inhibited</a>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.OptionalQueryable[U]" id="74394">oqCopy</a> = <span title="org.squeryl.dsl.OptionalQueryable[U]" class="keyword">new</span> <a href="OptionalQueryable.scala.html#11006" title="org.squeryl.dsl.OptionalQueryable[U]">OptionalQueryable</a><span class="delimiter">(</span><a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a><span class="delimiter">)</span>
      <a href="#74394" title="org.squeryl.dsl.OptionalQueryable[U]">oqCopy</a>.<a href="../Queryable.scala.html#22317" title="(x$1: Boolean)Unit">inhibited</a> = <a href="#74392" title="org.squeryl.dsl.OptionalQueryable[U]">oqr</a>.<a href="../Queryable.scala.html#22316" title="=&gt; Boolean">inhibited</a>
      <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">new</span> <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">(</span><a href="#74394" title="org.squeryl.dsl.OptionalQueryable[U]">oqCopy</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Queryable[U]" class="delimiter">[</span><a href="../Queryable.scala.html#9880" title="org.squeryl.Queryable[U]">Queryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>, <span title="(x: U)Some[U]">Some</span><span class="delimiter">(</span><a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74374" title="=&gt; U">sample</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="U" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span>, <a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74376" title="=&gt; Boolean">isQuery</a>, <a href="#74393" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">if</span><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internal/JoinedQueryable.scala.html#12433" title="org.squeryl.dsl.internal.OuterJoinedQueryable[_]">OuterJoinedQueryable</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]" id="74432">ojq</a> = <a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]" class="delimiter">[</span><a href="internal/JoinedQueryable.scala.html#12433" title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]">OuterJoinedQueryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="AbstractQuery.this.SubQueryable[U]" id="74433">sq</a> = <a href="#72953" title="[U](q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]">createSubQueryable</a><span title="(q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#74432" title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]">ojq</a>.<a href="internal/JoinedQueryable.scala.html#74425" title="=&gt; org.squeryl.Queryable[U]">queryable</a><span class="delimiter">)</span>
      <a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65371" title="(x$1: Option[(String, String)])Unit">joinKind</a> = <span title="(x: (String, java.lang.String))Some[(String, java.lang.String)]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: java.lang.String)(String, java.lang.String)" class="delimiter">(</span><a href="#74432" title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]">ojq</a>.<a href="internal/JoinedQueryable.scala.html#74427" title="=&gt; String">leftRightOrFull</a>, <span title="java.lang.String(&quot;outer&quot;)" class="string">&quot;outer&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65368" title="(b: Boolean)Unit">inhibited</a> = <a href="#74432" title="org.squeryl.dsl.internal.OuterJoinedQueryable[U]">ojq</a>.<a href="../Queryable.scala.html#22316" title="=&gt; Boolean">inhibited</a>
      <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">new</span> <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">(</span><a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a>, <span title="(x: U)Some[U]">Some</span><span class="delimiter">(</span><a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74374" title="=&gt; U">sample</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="U" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span>, <a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74376" title="=&gt; Boolean">isQuery</a>, <a href="#74433" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">if</span><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internal/JoinedQueryable.scala.html#12439" title="org.squeryl.dsl.internal.InnerJoinedQueryable[_]">InnerJoinedQueryable</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.internal.InnerJoinedQueryable[U]" id="74463">ijq</a> = <a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.internal.InnerJoinedQueryable[U]" class="delimiter">[</span><a href="internal/JoinedQueryable.scala.html#12439" title="org.squeryl.dsl.internal.InnerJoinedQueryable[U]">InnerJoinedQueryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="AbstractQuery.this.SubQueryable[U]" id="74464">sq</a> = <a href="#72953" title="[U](q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]">createSubQueryable</a><span title="(q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#74463" title="org.squeryl.dsl.internal.InnerJoinedQueryable[U]">ijq</a>.<a href="internal/JoinedQueryable.scala.html#24933" title="=&gt; org.squeryl.Queryable[U]">queryable</a><span class="delimiter">)</span>
      <a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65371" title="(x$1: Option[(String, String)])Unit">joinKind</a> = <span title="(x: (String, java.lang.String))Some[(String, java.lang.String)]">Some</span><span class="delimiter">(</span><span title="(_1: String, _2: java.lang.String)(String, java.lang.String)" class="delimiter">(</span><a href="#74463" title="org.squeryl.dsl.internal.InnerJoinedQueryable[U]">ijq</a>.<a href="internal/JoinedQueryable.scala.html#24935" title="=&gt; String">leftRightOrFull</a>, <span title="java.lang.String(&quot;inner&quot;)" class="string">&quot;inner&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">new</span> <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">(</span><a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a>, <a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74374" title="=&gt; U">sample</a>, <a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74376" title="=&gt; Boolean">isQuery</a>, <a href="#74464" title="AbstractQuery.this.SubQueryable[U]">sq</a>.<a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">if</span><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="DelegateQuery.scala.html#10973" title="org.squeryl.dsl.DelegateQuery[_]">DelegateQuery</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#72953" title="(q: org.squeryl.Queryable[U])AbstractQuery.this.SubQueryable[U]">createSubQueryable</a><span class="delimiter">(</span><a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.DelegateQuery[U]" class="delimiter">[</span><a href="DelegateQuery.scala.html#10973" title="org.squeryl.dsl.DelegateQuery[U]">DelegateQuery</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="DelegateQuery.scala.html#74490" title="=&gt; org.squeryl.Query[U]">q</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>      
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[U]" id="74520">qr</a> = <a href="#74358" title="org.squeryl.Queryable[U]">q</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.AbstractQuery[U]" class="delimiter">[</span><a href="#10928" title="org.squeryl.dsl.AbstractQuery[U]">AbstractQuery</a><span class="delimiter">[</span>U<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="org.squeryl.dsl.AbstractQuery[U]" id="74521">copy</a> = <a href="#74520" title="org.squeryl.dsl.AbstractQuery[U]">qr</a>.<a href="#72942" title="(asRoot: Boolean)org.squeryl.dsl.AbstractQuery[U]">copy</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span title="AbstractQuery.this.SubQueryable[U]" class="keyword">new</span> <a href="#72956" title="AbstractQuery.this.SubQueryable[U]">SubQueryable</a><span class="delimiter">(</span><a href="#74521" title="org.squeryl.dsl.AbstractQuery[U]">copy</a>, <a href="#74521" title="org.squeryl.dsl.AbstractQuery[U]">copy</a>.<a href="#72941" title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[U]">ast</a>.<a href="ast/QueryExpressionNode.scala.html#73133" title="=&gt; AnyRef">sample</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="U" class="delimiter">[</span><a href="#72955" title="U">U</a><span class="delimiter">]</span>, <a href="#74521" title="org.squeryl.dsl.AbstractQuery[U]">copy</a>.<a href="#72932" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#74521" title="org.squeryl.dsl.AbstractQuery[U]">copy</a>.<a href="#72941" title="=&gt; org.squeryl.dsl.ast.QueryExpressionNode[U]">ast</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">class</span> <a title="class SubQueryable[U] extends java.lang.Object with ScalaObject" id="72956">SubQueryable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="72957">U</a><span class="delimiter">]</span>
    <span class="delimiter">(</span><span class="keyword">val</span> <a title="org.squeryl.Queryable[U]" id="74373">queryable</a>: <a href="../Queryable.scala.html#9880" title="org.squeryl.Queryable[U]">Queryable</a><span class="delimiter">[</span>U<span class="delimiter">]</span>,
     <span class="keyword">val</span> <a title="U" id="74374">sample</a>: <a href="#72957" title="U">U</a>,
     <span class="keyword">val</span> <a title="org.squeryl.internals.ResultSetMapper" id="74375">resultSetMapper</a>: <a href="../internals/ResultSetMapper.scala.html#12886" title="org.squeryl.internals.ResultSetMapper">ResultSetMapper</a>,
     <span class="keyword">val</span> <a title="Boolean" id="74376">isQuery</a>:<span title="Boolean">Boolean</span>,
     <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.QueryableExpressionNode" id="74377">node</a>: <a href="ast/ExpressionNode.scala.html#11499" title="org.squeryl.dsl.ast.QueryableExpressionNode">QueryableExpressionNode</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)U" id="73059">give</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="74545">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#72957" title="U">U</a> =
      <span title="U" class="keyword">if</span><span class="delimiter">(</span><a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65370" title="=&gt; Option[(String, String)]">joinKind</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="U" class="keyword">if</span><span class="delimiter">(</span><a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65373" title="=&gt; Boolean">isOuterJoined</a><span class="delimiter">)</span> <span class="delimiter">{</span>

          <span class="keyword">val</span> <a title="Boolean" id="74566">isNoneInOuterJoin</a> =
            <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#74376" title="=&gt; Boolean">isQuery</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>.<a href="../internals/ResultSetMapper.scala.html#34920" title="(rs: java.sql.ResultSet)Boolean">isNoneInOuterJoin</a><span class="delimiter">(</span><a href="#74545" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>

           <span title="U" class="keyword">if</span><span class="delimiter">(</span><a href="#74566" title="Boolean">isNoneInOuterJoin</a><span class="delimiter">)</span>
             <span title="object None">None</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="U" class="delimiter">[</span><a href="#72957" title="U">U</a><span class="delimiter">]</span>
           <span class="keyword">else</span>
             <span title="(x: U)Some[U]">Some</span><span class="delimiter">(</span><a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a>.<a href="../Queryable.scala.html#22319" title="(resultSetMapper: org.squeryl.internals.ResultSetMapper, rs: java.sql.ResultSet)U">give</a><span class="delimiter">(</span><a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74545" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="U" class="delimiter">[</span><a href="#72957" title="U">U</a><span class="delimiter">]</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span>
          <a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a>.<a href="../Queryable.scala.html#22319" title="(resultSetMapper: org.squeryl.internals.ResultSetMapper, rs: java.sql.ResultSet)U">give</a><span class="delimiter">(</span><a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74545" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span title="U" class="keyword">if</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#74377" title="=&gt; org.squeryl.dsl.ast.QueryableExpressionNode">node</a>.<a href="ast/ExpressionNode.scala.html#65380" title="=&gt; Boolean">isRightJoined</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>.<a href="../internals/ResultSetMapper.scala.html#34920" title="(rs: java.sql.ResultSet)Boolean">isNoneInOuterJoin</a><span class="delimiter">(</span><a href="#74545" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#74374" title="=&gt; U">sample</a>
      <span class="keyword">else</span>
        <a href="#74373" title="=&gt; org.squeryl.Queryable[U]">queryable</a>.<a href="../Queryable.scala.html#22319" title="(resultSetMapper: org.squeryl.internals.ResultSetMapper, rs: java.sql.ResultSet)U">give</a><span class="delimiter">(</span><a href="#74375" title="=&gt; org.squeryl.internals.ResultSetMapper">resultSetMapper</a>, <a href="#74545" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>