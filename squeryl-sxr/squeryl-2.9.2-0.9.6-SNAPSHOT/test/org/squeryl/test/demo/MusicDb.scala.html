<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>test/org/squeryl/test/demo/MusicDb.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.squeryl.test.demo

/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */
<span class="keyword">import</span> org.squeryl.test.<a href="../PrimitiveTypeModeForTests.scala.html#8432" title="org.squeryl.test.PrimitiveTypeModeForTests.type">PrimitiveTypeModeForTests</a>._
<span class="keyword">import</span> org.squeryl.<span class="delimiter">{</span>Query, Session, KeyedEntity, Schema<span class="delimiter">}</span>
<span class="keyword">import</span> org.squeryl.dsl.GroupWithMeasures
<span class="keyword">import</span> org.squeryl.framework.<span class="delimiter">{</span>RunTestsInsideTransaction, SchemaTester<span class="delimiter">}</span>

// The root object of the schema. Inheriting KeyedEntity[T] is not mandatory
// it just makes primary key methods available (delete and lookup) on tables.
<span class="keyword">class</span> <a title="class MusicDbObject extends Object with org.squeryl.KeyedEntity[Long]" id="8518">MusicDbObject</a> <a href="#8518" title="org.squeryl.test.demo.MusicDbObject" class="keyword">extends</a> <a href="../../../../../main/org/squeryl/KeyedEntity.scala.html#7126" title="org.squeryl.KeyedEntity[Long]">KeyedEntity</a><span class="delimiter">[</span>Long<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="Long" id="163637">id</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class Artist extends org.squeryl.test.demo.MusicDbObject with Product with Serializable" id="170036">Artist</a><a href="#170036" title="Product" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="170017">name</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#8518" title="org.squeryl.test.demo.MusicDbObject">MusicDbObject</a> <span class="delimiter">{</span>

  // this returns a Query[Song] which is also an Iterable[Song] :
  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[org.squeryl.test.demo.Song]" id="163644">songs</a> = <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>.<a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="164016">s</a> =&gt; <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#164016" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">artistId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span> <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#164016" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song" id="163645">newSong</a><span class="delimiter">(</span><a title="String" id="164128">title</a>: <span title="String">String</span>, <a title="Option[String]" id="164129">filePath</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Int" id="164130">year</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>.<a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Song)org.squeryl.test.demo.Song">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Song" class="keyword">new</span> <a href="#8522" title="org.squeryl.test.demo.Song">Song</a><span class="delimiter">(</span><a href="#164128" title="String">title</a>, <a href="#163637" title="=&gt; Long">id</a>, <a href="#164129" title="Option[String]">filePath</a>, <a href="#164130" title="Int">year</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

// Option[] members are mapped to nullable database columns,
// otherwise they have a NOT NULL constraint.
<span class="keyword">class</span> <a title="class Song extends org.squeryl.test.demo.MusicDbObject" id="8522">Song</a><a href="#8522" title="org.squeryl.test.demo.Song" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="164141">title</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Long" id="164142">artistId</a>: <span title="Long">Long</span>, <span class="keyword">val</span> <a title="Option[String]" id="164143">filePath</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="Int" id="164144">year</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#8518" title="org.squeryl.test.demo.MusicDbObject">MusicDbObject</a> <span class="delimiter">{</span>

  // IMPORTANT : currently classes with Option[] members *must* provide a zero arg
  // constructor where every Option[T] member gets initialized with Some(t:T).
  // or else Squeryl will not be able to reflect the type of the field, and an exception will
  // be thrown at table instantiation time.
  <span class="keyword">def</span> <a title="()org.squeryl.test.demo.Song" id="163823" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#8522" title="Song.this.type" class="keyword">this</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Long(0L)" class="int">0</span>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>,<span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  // the schema can be imported in the scope, to lighten the syntax :
  <span class="keyword">import</span> <a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>._
  
  // An alternative (shorter) syntax for single table queries :
  <span class="keyword">def</span> <a title="=&gt; org.squeryl.test.demo.Artist" id="163825">artist</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/Queryable.scala.html#24182" title="(whereClauseFunctor: org.squeryl.test.demo.Artist =&gt; org.squeryl.dsl.ast.LogicalBoolean)(implicit dsl: org.squeryl.dsl.QueryDsl)org.squeryl.Query[org.squeryl.test.demo.Artist]">where</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24549" title="=&gt; org.squeryl.dsl.QueryDsl" class="delimiter">(</a><a title="org.squeryl.test.demo.Artist" id="164375">a</a> =&gt; <a href="#164375" title="org.squeryl.test.demo.Artist">a</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">artistId</a><span class="delimiter">)</span>.<a href="../../../../../main/org/squeryl/Query.scala.html#24190" title="=&gt; org.squeryl.test.demo.Artist">single</a>

  // Another alternative for lookup by primary key, since Artist is a
  // KeyedEntity[Long], it's table has a lookup[Long](k: Long)
  // method available :
  <span class="keyword">def</span> <a title="=&gt; Option[org.squeryl.test.demo.Artist]" id="163826">lookupArtist</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/View.scala.html#37977" title="(k: Long)(implicit ked: org.squeryl.KeyedEntityDef[org.squeryl.test.demo.Artist,Long], implicit dsl: org.squeryl.dsl.QueryDsl)Option[org.squeryl.test.demo.Artist]">lookup</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="(implicit ev: &lt;:&lt;[org.squeryl.test.demo.Artist,org.squeryl.KeyedEntity[Long]], implicit m: Manifest[org.squeryl.test.demo.Artist])org.squeryl.KeyedEntityDef[org.squeryl.test.demo.Artist,Long]" class="delimiter">(</a><a href="#164142" title="=&gt; Long">artistId</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class Playlist extends org.squeryl.test.demo.MusicDbObject" id="8523">Playlist</a><a href="#8523" title="org.squeryl.test.demo.Playlist" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="164534">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="164535">path</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#8518" title="org.squeryl.test.demo.MusicDbObject">MusicDbObject</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>._

  // a two table join : 
  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[org.squeryl.test.demo.Song]" id="164523">songsInPlaylistOrder</a> =
    <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25273" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.PlaylistElement], t2: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: (org.squeryl.test.demo.PlaylistElement, org.squeryl.test.demo.Song) =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a>, <a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.PlaylistElement" id="164870">ple</a>, <a title="org.squeryl.test.demo.Song" id="164871">s</a><span class="delimiter">)</span> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#164870" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">playlistId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/ast/ExpressionNode.scala.html#63669" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a> <a href="#164870" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">songId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#164871" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#164871" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/OrderBySignatures.scala.html#36326" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song]">orderBy</a><span class="delimiter">(</span><a href="#164870" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24558" title="(e: Int)(implicit evidence$1: Int =&gt; org.squeryl.dsl.TypedExpression[_, _])org.squeryl.dsl.ast.OrderByArg">songNumber</a> <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24561" title="implicit org.squeryl.dsl.QueryDsl.orderByArg2OrderByExpression : (a: org.squeryl.dsl.ast.OrderByArg)org.squeryl.dsl.ast.OrderByExpression">asc</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement" id="164524">addSong</a><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="165270">s</a>: <a href="#8522" title="org.squeryl.test.demo.Song">Song</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

    // Note how this query can be implicitly converted to an Int since it returns
    // at most one row, this applies to all single column aggregate queries with no groupBy clause.
    // The nvl function in this example changed the return type to Int, from
    // Option[Int], since the 'max' function (like all aggregates, 'count' being the only exception).
    <span class="keyword">val</span> <a title="Int" id="165271">nextSongNumber</a>: <span title="Int">Int</span> =
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.PlaylistElement])(f: org.squeryl.test.demo.PlaylistElement =&gt; org.squeryl.dsl.QueryYield[org.squeryl.dsl.Measures[Int]])org.squeryl.Query[org.squeryl.dsl.Measures[Int]]">from</a><span class="delimiter">(</span><a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a><span class="delimiter">)</span><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24741" title="(cq: org.squeryl.Query[org.squeryl.dsl.Measures[Int]])Int" class="delimiter">(</a><a title="org.squeryl.test.demo.PlaylistElement" id="165416">ple</a> =&gt;
        <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#165416" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">playlistId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span>
        <a href="../../../../../main/org/squeryl/dsl/boilerplate/ComputeMeasuresSignaturesFromStartOrWhereState.scala.html#25053" title="(e1: =&gt; org.squeryl.dsl.TypedExpression[Int, _])org.squeryl.dsl.fsm.ComputeStateStartOrWhereState[Int]">compute</a><span class="delimiter">(</span><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24634" title="(a: org.squeryl.dsl.TypedExpression[Option[Int],org.squeryl.dsl.TOptionInt], b: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])(implicit d: org.squeryl.dsl.DeOptionizer[_, Int, org.squeryl.dsl.TInt, _, org.squeryl.dsl.TOptionInt])org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]">nvl</a><a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#24999" title="=&gt; org.squeryl.dsl.IntegralTypedExpressionFactory[Option[Int],org.squeryl.dsl.TOptionInt,Option[Float],org.squeryl.dsl.TOptionFloat] with org.squeryl.dsl.DeOptionizer[Int,Int,org.squeryl.dsl.TInt,Option[Int],org.squeryl.dsl.TOptionInt]{val deOptionizer: org.squeryl.dsl.IntegralTypedExpressionFactory[Int,org.squeryl.dsl.TInt,Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Int]{val sample: Int; val defaultColumnLength: Int; val floatifyer: org.squeryl.dsl.FloatTypedExpressionFactory[Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Float]{val sample: Float; val defaultColumnLength: Int}}; val floatifyer: org.squeryl.dsl.FloatTypedExpressionFactory[Option[Float],org.squeryl.dsl.TOptionFloat] with org.squeryl.dsl.DeOptionizer[Float,Float,org.squeryl.dsl.TFloat,Option[Float],org.squeryl.dsl.TOptionFloat]{val deOptionizer: org.squeryl.dsl.FloatTypedExpressionFactory[Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Float]{val sample: Float; val defaultColumnLength: Int}}}" class="delimiter">(</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24598" title="(b: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])(implicit f: org.squeryl.dsl.TypedExpressionFactory[Option[Int],org.squeryl.dsl.TOptionInt])org.squeryl.dsl.TypedExpressionConversion[Option[Int],org.squeryl.dsl.TOptionInt]">max</a><a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#24999" title="=&gt; org.squeryl.dsl.IntegralTypedExpressionFactory[Option[Int],org.squeryl.dsl.TOptionInt,Option[Float],org.squeryl.dsl.TOptionFloat] with org.squeryl.dsl.DeOptionizer[Int,Int,org.squeryl.dsl.TInt,Option[Int],org.squeryl.dsl.TOptionInt]{val deOptionizer: org.squeryl.dsl.IntegralTypedExpressionFactory[Int,org.squeryl.dsl.TInt,Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Int]{val sample: Int; val defaultColumnLength: Int; val floatifyer: org.squeryl.dsl.FloatTypedExpressionFactory[Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Float]{val sample: Float; val defaultColumnLength: Int}}; val floatifyer: org.squeryl.dsl.FloatTypedExpressionFactory[Option[Float],org.squeryl.dsl.TOptionFloat] with org.squeryl.dsl.DeOptionizer[Float,Float,org.squeryl.dsl.TFloat,Option[Float],org.squeryl.dsl.TOptionFloat]{val deOptionizer: org.squeryl.dsl.FloatTypedExpressionFactory[Float,org.squeryl.dsl.TFloat] with org.squeryl.dsl.PrimitiveJdbcMapper[Float]{val sample: Float; val defaultColumnLength: Int}}}" class="delimiter">(</a><a href="#165416" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]">songNumber</a><span class="delimiter">)</span>, <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]" class="int">0</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>    
    
    <a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.PlaylistElement)org.squeryl.test.demo.PlaylistElement">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.PlaylistElement" class="keyword">new</span> <a href="#8524" title="org.squeryl.test.demo.PlaylistElement">PlaylistElement</a><span class="delimiter">(</span><a href="#165271" title="Int">nextSongNumber</a>, <a href="#163637" title="=&gt; Long">id</a>, <a href="#165270" title="org.squeryl.test.demo.Song">s</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(song: org.squeryl.test.demo.Song)Int" id="164525">removeSong</a><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="165869">song</a>: <a href="#8522" title="org.squeryl.test.demo.Song">Song</a><span class="delimiter">)</span> =
    <a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#38008" title="(whereClause: org.squeryl.test.demo.PlaylistElement =&gt; org.squeryl.dsl.ast.LogicalBoolean)(implicit dsl: org.squeryl.dsl.QueryDsl)Int">deleteWhere</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24549" title="=&gt; org.squeryl.dsl.QueryDsl" class="delimiter">(</a><a title="org.squeryl.test.demo.PlaylistElement" id="165872">ple</a> =&gt; <a href="#165872" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">songId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#165869" title="org.squeryl.test.demo.Song">song</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(artist: org.squeryl.test.demo.Artist)Int" id="164526">removeSongOfArtist</a><span class="delimiter">(</span><a title="org.squeryl.test.demo.Artist" id="165984">artist</a>: <a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">)</span> =
    <a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#38008" title="(whereClause: org.squeryl.test.demo.PlaylistElement =&gt; org.squeryl.dsl.ast.LogicalBoolean)(implicit dsl: org.squeryl.dsl.QueryDsl)Int">deleteWhere</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24549" title="=&gt; org.squeryl.dsl.QueryDsl" class="delimiter">(</a><a title="org.squeryl.test.demo.PlaylistElement" id="165986">ple</a> =&gt;
      <span class="delimiter">(</span><a href="#165986" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">playlistId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span> <a href="../../../../../main/org/squeryl/dsl/ast/ExpressionNode.scala.html#63669" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a>
      <span class="delimiter">(</span><a href="#165986" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">songId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31870" title="(q: org.squeryl.Query[Long])(implicit cc: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,Nothing])org.squeryl.dsl.ast.LogicalBoolean">in</a> <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[Long])org.squeryl.Query[Long]">from</a><span class="delimiter">(</span><a href="#164530" title="(artistId: Long)org.squeryl.Query[org.squeryl.test.demo.Song]">songsOf</a><span class="delimiter">(</span><a href="#165984" title="org.squeryl.test.demo.Artist">artist</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="166741">s</a> =&gt; <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; Long)org.squeryl.dsl.fsm.SelectState[Long]">select</a><span class="delimiter">(</span><a href="#166741" title="org.squeryl.test.demo.Song">s</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  // New concept : a group query with aggregate functions return GroupWithMeasures[K,M]
  // where K and M are tuples whose members correspond to the group by list and compute list
  // respectively.
  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Long,Long]]" id="164527">_songCountByArtistId</a>: <a href="../../../../../main/org/squeryl/Query.scala.html#7162" title="org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Long,Long]]">Query</a><span class="delimiter">[</span>GroupWithMeasures<span class="delimiter">[</span>Long,Long<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25273" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Artist], t2: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: (org.squeryl.test.demo.Artist, org.squeryl.test.demo.Song) =&gt; org.squeryl.dsl.QueryYield[org.squeryl.dsl.GroupWithMeasures[Long,Long]])org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Long,Long]]">from</a><span class="delimiter">(</span><a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>, <a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Artist" id="166915">a</a>,<a title="org.squeryl.test.demo.Song" id="166916">s</a><span class="delimiter">)</span> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#166915" title="org.squeryl.test.demo.Artist">a</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#166916" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">artistId</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/GroupBySignatures.scala.html#24428" title="(e1: =&gt; org.squeryl.dsl.TypedExpression[Long, _])org.squeryl.dsl.fsm.GroupByState[Long]">groupBy</a><span class="delimiter">(</span><a href="#166915" title="org.squeryl.test.demo.Artist">a</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/ComputeMeasuresSignaturesFromGroupByState.scala.html#83661" title="(e1: =&gt; org.squeryl.dsl.TypedExpression[Long, _])org.squeryl.dsl.fsm.ComputeStateFromGroupByState[Long,Long]">compute</a><span class="delimiter">(</span><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24732" title="=&gt; org.squeryl.test.PrimitiveTypeModeForTests.CountFunction">count</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  // Queries are nestable just as they would in SQL
  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Query[(org.squeryl.test.demo.Artist, Long)]" id="164528">songCountForAllArtists</a>  =
    <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25273" title="(t1: org.squeryl.Queryable[org.squeryl.dsl.GroupWithMeasures[Long,Long]], t2: org.squeryl.Queryable[org.squeryl.test.demo.Artist])(f: (org.squeryl.dsl.GroupWithMeasures[Long,Long], org.squeryl.test.demo.Artist) =&gt; org.squeryl.dsl.QueryYield[(org.squeryl.test.demo.Artist, Long)])org.squeryl.Query[(org.squeryl.test.demo.Artist, Long)]">from</a><span class="delimiter">(</span><a href="#164527" title="=&gt; org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Long,Long]]">_songCountByArtistId</a>, <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.dsl.GroupWithMeasures[Long,Long]" id="167363">sca</a>,<a title="org.squeryl.test.demo.Artist" id="167364">a</a><span class="delimiter">)</span> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#167363" title="org.squeryl.dsl.GroupWithMeasures[Long,Long]">sca</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">key</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#167364" title="org.squeryl.test.demo.Artist">a</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; (org.squeryl.test.demo.Artist, Long))org.squeryl.dsl.fsm.SelectState[(org.squeryl.test.demo.Artist, Long)]">select</a><span class="delimiter">(</span><span title="(_1: org.squeryl.test.demo.Artist, _2: Long)(org.squeryl.test.demo.Artist, Long)" class="delimiter">(</span><a href="#167364" title="org.squeryl.test.demo.Artist">a</a>, <a href="#167363" title="org.squeryl.dsl.GroupWithMeasures[Long,Long]">sca</a>.<a href="../../../../../main/org/squeryl/dsl/Group.scala.html#74619" title="=&gt; Long">measures</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  // Unlike SQL, a function that returns a query can be nested
  // as if it were a query, notice the nesting of 'songsOf'
  // allowing DRY persistence layers as reuse is enhanced.
  <span class="keyword">def</span> <a title="(artistId: Long)Option[org.squeryl.test.demo.Song]" id="164529">latestSongFrom</a><span class="delimiter">(</span><a title="Long" id="167487">artistId</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
    <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#164530" title="(artistId: Long)org.squeryl.Query[org.squeryl.test.demo.Song]">songsOf</a><span class="delimiter">(</span><a href="#167487" title="Long">artistId</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="167632">s</a> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#167632" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/OrderBySignatures.scala.html#36326" title="(e1: =&gt; org.squeryl.dsl.ast.ExpressionNode)org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song]">orderBy</a><span class="delimiter">(</span><a href="#167632" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24558" title="(e: Long)(implicit evidence$1: Long =&gt; org.squeryl.dsl.TypedExpression[_, _])org.squeryl.dsl.ast.OrderByArg">id</a> <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24561" title="implicit org.squeryl.dsl.QueryDsl.orderByArg2OrderByExpression : (a: org.squeryl.dsl.ast.OrderByArg)org.squeryl.dsl.ast.OrderByExpression">desc</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<a href="../../../../../main/org/squeryl/Query.scala.html#24192" title="=&gt; Option[org.squeryl.test.demo.Song]">headOption</a>

  <span class="keyword">def</span> <a title="(artistId: Long)org.squeryl.Query[org.squeryl.test.demo.Song]" id="164530">songsOf</a><span class="delimiter">(</span><a title="Long" id="166276">artistId</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
    <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25273" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.PlaylistElement], t2: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: (org.squeryl.test.demo.PlaylistElement, org.squeryl.test.demo.Song) =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#163800" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]">playlistElements</a>, <a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.PlaylistElement" id="166425">ple</a>,<a title="org.squeryl.test.demo.Song" id="166426">s</a><span class="delimiter">)</span> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#166425" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">playlistId</a> <a href="../../../../../main/org/squeryl/dsl/ast/ExpressionNode.scala.html#63669" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a> <a href="#166425" title="org.squeryl.test.demo.PlaylistElement">ple</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">songId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#166426" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/ast/ExpressionNode.scala.html#63669" title="(b: org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.ast.BinaryOperatorNodeLogicalBoolean">and</a> <a href="#166426" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">artistId</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TLong])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">artistId</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#166426" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">class</span> <a title="class PlaylistElement extends Object" id="8524">PlaylistElement</a><a href="#8524" title="org.squeryl.test.demo.PlaylistElement" class="delimiter">(</a><span class="keyword">var</span> <a title="Int" id="165866">songNumber</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Long" id="165867">playlistId</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Long" id="165868">songId</a>: <span title="Long">Long</span><span class="delimiter">)</span>


<span title="Object" class="keyword">class</span> <a title="class Rating extends Object" id="8525">Rating</a><a href="#8525" title="org.squeryl.test.demo.Rating" class="delimiter">(</a><span class="keyword">var</span> <a title="Long" id="167775">userId</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Int" id="167776">appreciationScore</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="167777">songId</a>: <span title="Int">Int</span><span class="delimiter">)</span>


<span title="Object" class="keyword">object</span> <a title="org.squeryl.test.demo.MusicDb.type" id="8526">MusicDb</a> <a href="#8527" title="org.squeryl.test.demo.MusicDb.type" class="keyword">extends</a> <a href="../../../../../main/org/squeryl/Schema.scala.html#7184" title="org.squeryl.Schema">Schema</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.test.demo.Artist]" id="163794">artists</a> = <a href="../../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.test.demo.Artist], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.test.demo.Artist, _])org.squeryl.Table[org.squeryl.test.demo.Artist]" class="delimiter">[</a><a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.test.demo.Song]" id="163796">songs</a> = <a href="../../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.test.demo.Song], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.test.demo.Song, _])org.squeryl.Table[org.squeryl.test.demo.Song]" class="delimiter">[</a><a href="#8522" title="org.squeryl.test.demo.Song">Song</a><span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.test.demo.Playlist]" id="163798">playlists</a> = <a href="../../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.test.demo.Playlist], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.test.demo.Playlist, _])org.squeryl.Table[org.squeryl.test.demo.Playlist]" class="delimiter">[</a><a href="#8523" title="org.squeryl.test.demo.Playlist">Playlist</a><span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]" id="163800">playlistElements</a> = <a href="../../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#25409" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.test.demo.PlaylistElement], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.test.demo.PlaylistElement, _])org.squeryl.Table[org.squeryl.test.demo.PlaylistElement]" class="delimiter">[</a><a href="#8524" title="org.squeryl.test.demo.PlaylistElement">PlaylistElement</a><span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.test.demo.Rating]" id="163802">ratings</a> = <a href="../../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#25409" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.test.demo.Rating], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.test.demo.Rating, _])org.squeryl.Table[org.squeryl.test.demo.Rating]" class="delimiter">[</a><a href="#8525" title="org.squeryl.test.demo.Rating">Rating</a><span class="delimiter">]</span>

  // drop (schema) is normaly protected... for safety, here we live dangerously !
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="163804">drop</a> = <span class="keyword">super</span>.<a href="../../../../../main/org/squeryl/Schema.scala.html#24273" title="=&gt; Unit">drop</a>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class TestData extends Object" id="8528">TestData</a><a href="#8528" title="org.squeryl.test.demo.TestData" class="delimiter">{</a>
  <span class="keyword">import</span> <a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>._

  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Artist" id="168143">herbyHancock</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Artist)org.squeryl.test.demo.Artist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Artist" class="keyword">new</span> <a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">(</span><span title="String(&quot;Herby Hancock&quot;)" class="string">&quot;Herby Hancock&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Artist" id="168145">ponchoSanchez</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Artist)org.squeryl.test.demo.Artist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Artist" class="keyword">new</span> <a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">(</span><span title="String(&quot;Poncho Sanchez&quot;)" class="string">&quot;Poncho Sanchez&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Artist" id="168147">mongoSantaMaria</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Artist)org.squeryl.test.demo.Artist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Artist" class="keyword">new</span> <a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">(</span><span title="String(&quot;Mongo Santa Maria&quot;)" class="string">&quot;Mongo Santa Maria&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Artist" id="168149">theMeters</a> = <a href="#163794" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Artist]">artists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Artist)org.squeryl.test.demo.Artist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Artist" class="keyword">new</span> <a href="#170036" title="org.squeryl.test.demo.Artist">Artist</a><span class="delimiter">(</span><span title="String(&quot;The Meters&quot;)" class="string">&quot;The Meters&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Song" id="168151">watermelonMan</a> = <a href="#168143" title="=&gt; org.squeryl.test.demo.Artist">herbyHancock</a>.<a href="#163645" title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song">newSong</a><span class="delimiter">(</span><span title="String(&quot;Watermelon Man&quot;)" class="string">&quot;Watermelon Man&quot;</span>, <span title="None.type">None</span>, <span title="Int(1962)" class="int">1962</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Song" id="168153">besameMama</a> = <a href="#168147" title="=&gt; org.squeryl.test.demo.Artist">mongoSantaMaria</a>.<a href="#163645" title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song">newSong</a><span class="delimiter">(</span><span title="String(&quot;Besame Mama&quot;)" class="string">&quot;Besame Mama&quot;</span>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><span title="String(&quot;c:/MyMusic/besameMama.flac&quot;)" class="string">&quot;c:/MyMusic/besameMama.flac&quot;</span><span class="delimiter">)</span>, <span title="Int(1998)" class="int">1998</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Song" id="168155">freedomSound</a> = <a href="#168145" title="=&gt; org.squeryl.test.demo.Artist">ponchoSanchez</a>.<a href="#163645" title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song">newSong</a><span class="delimiter">(</span><span title="String(&quot;Freedom Sound&quot;)" class="string">&quot;Freedom Sound&quot;</span>, <span title="None.type">None</span>, <span title="Int(1997)" class="int">1997</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Song" id="168157">funkifyYouLife</a> = <a href="#168149" title="=&gt; org.squeryl.test.demo.Artist">theMeters</a>.<a href="#163645" title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song">newSong</a><span class="delimiter">(</span><span title="String(&quot;Funkify Your Life&quot;)" class="string">&quot;Funkify Your Life&quot;</span>, <span title="None.type">None</span>,<span title="Int(1969)" class="int">1969</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Song" id="168159">goodOldFunkyMusic</a> = <a href="#168149" title="=&gt; org.squeryl.test.demo.Artist">theMeters</a>.<a href="#163645" title="(title: String, filePath: Option[String], year: Int)org.squeryl.test.demo.Song">newSong</a><span class="delimiter">(</span><span title="String(&quot;Good old Funky Music&quot;)" class="string">&quot;Good old Funky Music&quot;</span>, <span title="None.type">None</span>, <span title="Int(1968)" class="int">1968</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="org.squeryl.test.demo.Playlist" id="168161">funkAndLatinJazz</a> = <a href="#163798" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Playlist]">playlists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Playlist)org.squeryl.test.demo.Playlist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Playlist" class="keyword">new</span> <a href="#8523" title="org.squeryl.test.demo.Playlist">Playlist</a><span class="delimiter">(</span><span title="String(&quot;Funk and Latin Jazz&quot;)" class="string">&quot;Funk and Latin Jazz&quot;</span>, <span title="String(&quot;c:/myPlayLists/funkAndLatinJazz&quot;)" class="string">&quot;c:/myPlayLists/funkAndLatinJazz&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">abstract</span> <span class="keyword">class</span> <a title="class KickTheTires extends org.squeryl.framework.SchemaTester with org.squeryl.framework.RunTestsInsideTransaction" id="8529">KickTheTires</a> <a href="#8529" title="org.squeryl.test.demo.KickTheTires" class="keyword">extends</a> <a href="../../framework/SchemaTester.scala.html#8315" title="org.squeryl.framework.SchemaTester">SchemaTester</a> <span class="keyword">with</span> <a href="../../framework/RunTestsInsideTransaction.scala.html#8306" title="org.squeryl.framework.RunTestsInsideTransaction">RunTestsInsideTransaction</a><span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="org.squeryl.test.demo.MusicDb.type" id="118682">schema</a> = <a href="#8526" title="org.squeryl.test.demo.MusicDb.type">MusicDb</a>

  <span class="keyword">import</span> <a href="#118682" title="=&gt; org.squeryl.test.demo.MusicDb.type">schema</a>._

  <span class="keyword">var</span> <a title="org.squeryl.test.demo.TestData" id="118686">sharedTestData</a> : <a href="#8528" title="org.squeryl.test.demo.TestData">TestData</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="118688">prePopulate</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">{</span>
    <a href="#118686" title="(x$1: org.squeryl.test.demo.TestData)Unit">sharedTestData</a> = <span title="org.squeryl.test.demo.TestData" class="keyword">new</span> <a href="#8528" title="org.squeryl.test.demo.TestData">TestData</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <a href="#8529" title="(testName: String, testTags: org.scalatest.Tag*)(testFun: =&gt; Unit)Unit">test</a><span class="delimiter">(</span><span title="String(&quot;kick tires&quot;)" class="string">&quot;kick tires&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.test.demo.TestData" id="168194">testData</a> = <a href="#118686" title="=&gt; org.squeryl.test.demo.TestData">sharedTestData</a>; <span class="keyword">import</span> <a href="#168194" title="org.squeryl.test.demo.TestData">testData</a>._

    <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168151" title="=&gt; org.squeryl.test.demo.Song">watermelonMan</a><span class="delimiter">)</span>
    <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168153" title="=&gt; org.squeryl.test.demo.Song">besameMama</a><span class="delimiter">)</span>
    <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168155" title="=&gt; org.squeryl.test.demo.Song">freedomSound</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.test.demo.Playlist" id="168196">decadeOf1960</a> = <a href="#163798" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Playlist]">playlists</a>.<a href="../../../../../main/org/squeryl/Table.scala.html#37997" title="(t: org.squeryl.test.demo.Playlist)org.squeryl.test.demo.Playlist">insert</a><span class="delimiter">(</span><span title="org.squeryl.test.demo.Playlist" class="keyword">new</span> <a href="#8523" title="org.squeryl.test.demo.Playlist">Playlist</a><span class="delimiter">(</span><span title="String(&quot;1960s&quot;)" class="string">&quot;1960s&quot;</span>, <span title="String(&quot;c:/myPlayLists/funkAndLatinJazz&quot;)" class="string">&quot;c:/myPlayLists/funkAndLatinJazz&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <a href="#168196" title="org.squeryl.test.demo.Playlist">decadeOf1960</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168151" title="=&gt; org.squeryl.test.demo.Song">watermelonMan</a><span class="delimiter">)</span>
    <a href="#168196" title="org.squeryl.test.demo.Playlist">decadeOf1960</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168157" title="=&gt; org.squeryl.test.demo.Song">funkifyYouLife</a><span class="delimiter">)</span>
    <a href="#168196" title="org.squeryl.test.demo.Playlist">decadeOf1960</a>.<a href="#164524" title="(s: org.squeryl.test.demo.Song)org.squeryl.test.demo.PlaylistElement">addSong</a><span class="delimiter">(</span><a href="#168159" title="=&gt; org.squeryl.test.demo.Song">goodOldFunkyMusic</a><span class="delimiter">)</span>

    //Session.currentSession.setLogger(m =&gt; println(m))

    // Nesting a query in a where clause : 
    <span class="keyword">val</span> <a title="org.squeryl.Query[org.squeryl.test.demo.Song]" id="168197">songsFromThe60sInFunkAndLatinJazzPlaylist</a> =
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="168353">s</a>=&gt;
        <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#168353" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31870" title="(q: org.squeryl.Query[Long])(implicit cc: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,Nothing])org.squeryl.dsl.ast.LogicalBoolean">in</a> <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[Long])org.squeryl.Query[Long]">from</a><span class="delimiter">(</span><a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164523" title="=&gt; org.squeryl.Query[org.squeryl.test.demo.Song]">songsInPlaylistOrder</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="168541">s2</a> =&gt; <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; Long)org.squeryl.dsl.fsm.SelectState[Long]">select</a><span class="delimiter">(</span><a href="#168541" title="org.squeryl.test.demo.Song">s2</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#168353" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[Long]" id="168198">songIds</a> =
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24522" title="(q: org.squeryl.Query[org.squeryl.test.demo.Song])Iterable[org.squeryl.test.demo.Song]">songsFromThe60sInFunkAndLatinJazzPlaylist</a>.<span title="(f: org.squeryl.test.demo.Song =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.squeryl.test.demo.Song],Long,Iterable[Long]])Iterable[Long]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Long,Iterable[Long]]" class="delimiter">(</span><a href="#168682" title="org.squeryl.test.demo.Song">_</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[Long]">toSet</span>

    <a href="#8529" title="(condition: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#168198" title="scala.collection.immutable.Set[Long]">songIds</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24522" title="(q: org.squeryl.Query[org.squeryl.test.demo.Song])Iterable[org.squeryl.test.demo.Song]">songsInPlaylistOrder</a>.<span title="(f: org.squeryl.test.demo.Song =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.squeryl.test.demo.Song],Long,Iterable[Long]])Iterable[Long]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,Long,Iterable[Long]]" class="delimiter">(</span><a href="#168832" title="org.squeryl.test.demo.Song">_</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[Long]">toSet</span><span class="delimiter">)</span>

    // Nesting in From clause :
    <span class="keyword">val</span> <a title="org.squeryl.Query[org.squeryl.test.demo.Song]" id="168199">songsFromThe60sInFunkAndLatinJazzPlaylist2</a> =
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/FromSignatures.scala.html#25268" title="(t1: org.squeryl.Queryable[org.squeryl.test.demo.Song])(f: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.QueryYield[org.squeryl.test.demo.Song])org.squeryl.Query[org.squeryl.test.demo.Song]">from</a><span class="delimiter">(</span><a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164523" title="=&gt; org.squeryl.Query[org.squeryl.test.demo.Song]">songsInPlaylistOrder</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="169008">s</a>=&gt;
        <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#169008" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TInt])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]" class="int">123</a><span class="delimiter">)</span>
        <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; org.squeryl.test.demo.Song)org.squeryl.dsl.fsm.SelectState[org.squeryl.test.demo.Song]">select</a><span class="delimiter">(</span><a href="#169008" title="org.squeryl.test.demo.Song">s</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    
    // Left Outer Join :
    <span class="keyword">var</span> <a title="org.squeryl.Query[(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])]" id="168200">ratingsForAllSongs</a> =
      <a href="../../../../../main/org/squeryl/dsl/boilerplate/JoinSignatures.scala.html#25132" title="(q: org.squeryl.Queryable[org.squeryl.test.demo.Song], q1: org.squeryl.dsl.internal.JoinedQueryable[Option[org.squeryl.test.demo.Rating]])(f: (org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating]) =&gt; org.squeryl.dsl.boilerplate.JoinQueryYield1[(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])])org.squeryl.Query[(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])]">join</a><span class="delimiter">(</span><a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a>, <a href="../../../../../main/org/squeryl/dsl/boilerplate/JoinSignatures.scala.html#25126" title="(q: org.squeryl.Queryable[org.squeryl.test.demo.Rating])org.squeryl.test.PrimitiveTypeModeForTests.JoinPrecursor[org.squeryl.test.demo.Rating]">ratings</a>.<a href="../../../../../main/org/squeryl/dsl/boilerplate/JoinSignatures.scala.html#35203" title="=&gt; org.squeryl.dsl.internal.OuterJoinedQueryable[org.squeryl.test.demo.Rating]">leftOuter</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="169278">s</a>,<a title="Option[org.squeryl.test.demo.Rating]" id="169279">r</a><span class="delimiter">)</span> =&gt;
        <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24510" title="(yieldClosure: =&gt; (org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating]))org.squeryl.dsl.fsm.SelectState[(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])]">select</a><span class="delimiter">(</span><span title="(_1: org.squeryl.test.demo.Song, _2: Option[org.squeryl.test.demo.Rating])(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])" class="delimiter">(</span><a href="#169278" title="org.squeryl.test.demo.Song">s</a>, <a href="#169279" title="Option[org.squeryl.test.demo.Rating]">r</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../../main/org/squeryl/dsl/QueryYield.scala.html#36309" title="(lb1: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.boilerplate.JoinQueryYield1[(org.squeryl.test.demo.Song, Option[org.squeryl.test.demo.Rating])]">on</a><span class="delimiter">(</span><a href="#169278" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25039" title="implicit org.squeryl.PrimitiveTypeMode.longToTE : (f: Long)org.squeryl.dsl.TypedExpression[Long,org.squeryl.dsl.TLong]">id</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[Option[Int],org.squeryl.dsl.TOptionInt])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TLong,org.squeryl.dsl.TOptionInt])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="#169279" title="Option[org.squeryl.test.demo.Rating]">r</a>.<span title="(f: org.squeryl.test.demo.Rating =&gt; Int)Option[Int]">map</span><a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25038" title="implicit org.squeryl.PrimitiveTypeMode.optionIntToTE : (f: Option[Int])org.squeryl.dsl.TypedExpression[Option[Int],org.squeryl.dsl.TOptionInt]" class="delimiter">(</a><a href="#169345" title="org.squeryl.test.demo.Rating">_</a>.<a href="#167777" title="=&gt; Int">songId</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>

//    for(sr &lt;- ratingsForAllSongs)
//      println(sr._1.title + &quot; rating is &quot; + sr._2.map(r =&gt; r.appreciationScore.toString).getOrElse(&quot;not rated&quot;))


    <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24749" title="(t: org.squeryl.Table[org.squeryl.test.demo.Song])(s: org.squeryl.test.demo.Song =&gt; org.squeryl.dsl.ast.UpdateStatement)Int">update</a><span class="delimiter">(</span><a href="#163796" title="=&gt; org.squeryl.Table[org.squeryl.test.demo.Song]">songs</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="169422">s</a> =&gt;
      <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24552" title="(b: =&gt; org.squeryl.dsl.ast.LogicalBoolean)org.squeryl.dsl.fsm.WhereState[org.squeryl.dsl.fsm.Conditioned]">where</a><span class="delimiter">(</span><a href="#169422" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25017" title="implicit org.squeryl.PrimitiveTypeMode.stringToTE : (s: String)org.squeryl.dsl.TypedExpression[String,org.squeryl.dsl.TString]">title</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31742" title="(b: org.squeryl.dsl.TypedExpression[String,org.squeryl.dsl.TString])(implicit ev: org.squeryl.dsl.CanCompare[org.squeryl.dsl.TString,org.squeryl.dsl.TString])org.squeryl.dsl.ast.EqualityExpression">===</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25017" title="implicit org.squeryl.PrimitiveTypeMode.stringToTE : (s: String)org.squeryl.dsl.TypedExpression[String,org.squeryl.dsl.TString]" class="string">&quot;Watermelon Man&quot;</a><span class="delimiter">)</span>
      <a href="../../../../../main/org/squeryl/dsl/fsm/StartState.scala.html#24513" title="(updateAssignments: org.squeryl.dsl.ast.UpdateAssignment*)(implicit cond: =:=[org.squeryl.dsl.fsm.Conditioned,org.squeryl.dsl.fsm.Conditioned])org.squeryl.dsl.ast.UpdateStatement">set</a><span class="delimiter">(</span><a href="#169422" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25017" title="implicit org.squeryl.PrimitiveTypeMode.stringToTE : (s: String)org.squeryl.dsl.TypedExpression[String,org.squeryl.dsl.TString]">title</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31888" title="(b: String)(implicit evidence$1: String =&gt; org.squeryl.dsl.TypedExpression[String,org.squeryl.dsl.TString])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <span title="String(&quot;The Watermelon Man&quot;)" class="string">&quot;The Watermelon Man&quot;</span>,
          <a href="#169422" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]">year</a>  <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31888" title="(b: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])(implicit evidence$1: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt] =&gt; org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])org.squeryl.dsl.ast.UpdateAssignment">:=</a> <a href="#169422" title="org.squeryl.test.demo.Song">s</a>.<a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]">year</a> <a href="../../../../../main/org/squeryl/dsl/TypedExpression.scala.html#31662" title="(e: org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt])(implicit f: org.squeryl.dsl.TypedExpressionFactory[Int,org.squeryl.dsl.TInt])org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]">plus</a> <a href="../../../../../main/org/squeryl/PrimitiveTypeMode.scala.html#25037" title="implicit org.squeryl.PrimitiveTypeMode.intToTE : (f: Int)org.squeryl.dsl.TypedExpression[Int,org.squeryl.dsl.TInt]" class="int">1</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.test.demo.Song" id="169932">s</a> &lt;- <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164530" title="(artistId: Long)org.squeryl.Query[org.squeryl.test.demo.Song]">songsOf</a><a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24522" title="(f: org.squeryl.test.demo.Song =&gt; Unit)Unit" class="delimiter">(</a><a href="#168143" title="=&gt; org.squeryl.test.demo.Artist">herbyHancock</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;herby &quot;)" class="string">&quot;herby &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#169932" title="org.squeryl.test.demo.Song">s</a>.<a href="#164141" title="=&gt; String">title</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="168201">c</a> = <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164526" title="(artist: org.squeryl.test.demo.Artist)Int">removeSongOfArtist</a><span class="delimiter">(</span><a href="#168143" title="=&gt; org.squeryl.test.demo.Artist">herbyHancock</a><span class="delimiter">)</span>

    <a href="#8529" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#168201" title="Int">c</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span>, <span title="String(&quot;expected 1, got &quot;)" class="string">&quot;expected 1, got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#168201" title="Int">c</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;playList.id:&quot;)" class="string">&quot;playList.id:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#163637" title="=&gt; Long">id</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, artist.id:&quot;)" class="string">&quot;, artist.id:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#168143" title="=&gt; org.squeryl.test.demo.Artist">herbyHancock</a>.<a href="#163637" title="=&gt; Long">id</a><span class="delimiter">)</span>


    <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24522" title="(q: org.squeryl.Query[org.squeryl.dsl.GroupWithMeasures[Long,Long]])Iterable[org.squeryl.dsl.GroupWithMeasures[Long,Long]]">_songCountByArtistId</a>.<span title="=&gt; List[org.squeryl.dsl.GroupWithMeasures[Long,Long]]">toList</span>

    
    <span class="keyword">val</span> <a title="org.squeryl.Query[(org.squeryl.test.demo.Artist, Long)]" id="168202">q</a> = <a href="#168161" title="=&gt; org.squeryl.test.demo.Playlist">funkAndLatinJazz</a>.<a href="#164528" title="=&gt; org.squeryl.Query[(org.squeryl.test.demo.Artist, Long)]">songCountForAllArtists</a>

    //println(q.dumpAst)
    
    <a href="../../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24522" title="(q: org.squeryl.Query[(org.squeryl.test.demo.Artist, Long)])Iterable[(org.squeryl.test.demo.Artist, Long)]">q</a>.<span title="=&gt; List[(org.squeryl.test.demo.Artist, Long)]">toList</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>