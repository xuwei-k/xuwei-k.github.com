<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>test/org/squeryl/dbagnostic/AnnotationTests.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.squeryl.dbagnostic

/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */

<span class="keyword">import</span> org.squeryl.KeyedEntity
<span class="keyword">import</span> org.squeryl.annotations.<span class="delimiter">{</span>Row, Column<span class="delimiter">}</span>
<span class="keyword">import</span> org.squeryl.Schema
<span class="keyword">import</span> java.util.Date
<span class="keyword">import</span> org.scalatest.FunSuite
<span class="keyword">import</span> org.scalatest.matchers.ShouldMatchers
<span class="keyword">import</span> org.squeryl.test.PrimitiveTypeModeForTests


@Row<span class="delimiter">(</span><span class="string">&quot;T_TOASTER&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class Toaster extends Object" id="8259">Toaster</a><a href="#8259" title="org.squeryl.dbagnostic.Toaster" class="delimiter">(</a>

  @Column<span class="delimiter">(</span>optionType=classOf<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Option[Int]" id="114556">yearOfManufacture</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,

// TODO: uncomment when scalac bug #3003 is resolved
//  @Column(optionType=classOf[String], length=25)
//  var countryOfOrigin: Option[String],

//  @Column(name=&quot;dateOfPurchase&quot;, optionType=classOf[java.util.Date])
//  var dateOfPurchase: Option[java.util.Date]

  @Column<span class="delimiter">(</span>length=<span class="int">25</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="String" id="114557">countryOfOrigin</a>: <span title="String">String</span>,

  @Column<span class="delimiter">(</span>name=<span class="string">&quot;BRAND_NAME&quot;</span>, length=<span class="int">32</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="String" id="114558">brandName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  @Column<span class="delimiter">(</span>name=<span class="string">&quot;WEIGHT&quot;</span>, optionType=classOf<span class="delimiter">[</span>Float<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Option[String]" id="114527">weightInGrams</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="None.type">None</span>

  @Column<span class="delimiter">(</span><span class="string">&quot;Zozo12&quot;</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="String" id="114530">zozo</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class NailCutter extends Object with org.squeryl.KeyedEntity[Long]" id="8260">NailCutter</a> <a href="#8260" title="org.squeryl.dbagnostic.NailCutter" class="keyword">extends</a> <a href="../../../../main/org/squeryl/KeyedEntity.scala.html#7126" title="org.squeryl.KeyedEntity[Long]">KeyedEntity</a><span class="delimiter">[</span>Long<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="Long" id="114573">id</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>
<span class="delimiter">}</span>


<span class="keyword">class</span> <a title="class KeyedObject extends Object with org.squeryl.KeyedEntity[Long]" id="8261">KeyedObject</a> <a href="#8261" title="org.squeryl.dbagnostic.KeyedObject" class="keyword">extends</a> <a href="../../../../main/org/squeryl/KeyedEntity.scala.html#7126" title="org.squeryl.KeyedEntity[Long]">KeyedEntity</a><span class="delimiter">[</span>Long<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="Long" id="114577">id</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class DescendantOfKeyedObject extends org.squeryl.dbagnostic.KeyedObject" id="8262">DescendantOfKeyedObject</a> <a href="#8262" title="org.squeryl.dbagnostic.DescendantOfKeyedObject" class="keyword">extends</a> <a href="#8261" title="org.squeryl.dbagnostic.KeyedObject">KeyedObject</a> <span class="delimiter">{</span>
  //val pouf = &quot;pouf&quot;
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class AnnotationTests extends Object with org.scalatest.FunSuite with org.scalatest.matchers.ShouldMatchers" id="8263">AnnotationTests</a> <a href="#8263" title="org.squeryl.dbagnostic.AnnotationTests" class="keyword">extends</a> <span title="org.scalatest.FunSuite">FunSuite</span> <span class="keyword">with</span> <span title="org.scalatest.matchers.ShouldMatchers">ShouldMatchers</span><span class="delimiter">{</span>


  <span class="keyword">class</span> <a title="class C extends Object" id="115076">C</a><a href="#115076" title="AnnotationTests.this.C" class="delimiter">(</a>
    @Column<span class="delimiter">(</span>optionType=classOf<span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">var</span> <a title="Option[Long]" id="116976">j</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span>,
    @Column<span class="delimiter">(</span>optionType=classOf<span class="delimiter">[</span>java.lang.String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">var</span> <a title="Option[String]" id="116977">k</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">(</span>

    @Column<span class="delimiter">(</span>optionType=classOf<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="Option[Int]" id="116978">i</a>:<span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>
  <span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Unit" id="115077">allTests</a> = <span title="Unit" class="delimiter">{</span>
    //rudimentaryTests
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ToastersInc extends org.squeryl.Schema" id="115078">ToastersInc</a> <a href="#115078" title="AnnotationTests.this.ToastersInc" class="keyword">extends</a> <a href="../../../../main/org/squeryl/Schema.scala.html#7184" title="org.squeryl.Schema">Schema</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../test/PrimitiveTypeModeForTests.scala.html#8432" title="org.squeryl.test.PrimitiveTypeModeForTests.type">PrimitiveTypeModeForTests</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">import</span> <a href="../test/PrimitiveTypeModeForTests.scala.html#8432" title="org.squeryl.test.PrimitiveTypeModeForTests.type">PrimitiveTypeModeForTests</a>._
    
    <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.dbagnostic.DescendantOfKeyedObject]" id="116993">descendantOfKeyedObjects</a> = <a href="../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.dbagnostic.DescendantOfKeyedObject], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.dbagnostic.DescendantOfKeyedObject, _])org.squeryl.Table[org.squeryl.dbagnostic.DescendantOfKeyedObject]" class="delimiter">[</a><a href="#8262" title="org.squeryl.dbagnostic.DescendantOfKeyedObject">DescendantOfKeyedObject</a><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.dbagnostic.NailCutter]" id="116995">nailCutters</a> = <a href="../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../main/org/squeryl/dsl/QueryDsl.scala.html#24517" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.dbagnostic.NailCutter], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.dbagnostic.NailCutter, _])org.squeryl.Table[org.squeryl.dbagnostic.NailCutter]" class="delimiter">[</a><a href="#8260" title="org.squeryl.dbagnostic.NailCutter">NailCutter</a><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="org.squeryl.Table[org.squeryl.dbagnostic.Toaster]" id="116997">toasters</a> = <a href="../../../../main/org/squeryl/Schema.scala.html#24288" title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><a href="../../../../main/org/squeryl/dsl/QueryDsl.scala.html#25409" title="()(implicit manifestT: scala.reflect.Manifest[org.squeryl.dbagnostic.Toaster], implicit ked: org.squeryl.OptionalKeyedEntityDef[org.squeryl.dbagnostic.Toaster, _])org.squeryl.Table[org.squeryl.dbagnostic.Toaster]" class="delimiter">[</a><a href="#8259" title="org.squeryl.dbagnostic.Toaster">Toaster</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  //test(&quot;MetaData&quot;){

  <span class="keyword">def</span> <a title="=&gt; Unit" id="115079">reflectionBrokenIn_2_9_0_RCx</a> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="AnnotationTests.this.ToastersInc" id="117564">ti</a> = <span title="AnnotationTests.this.ToastersInc" class="keyword">new</span> <a href="#115078" title="AnnotationTests.this.ToastersInc">ToastersInc</a>
    <span class="keyword">import</span> <a href="#117564" title="AnnotationTests.this.ToastersInc">ti</a>._


    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.FieldMetaData]" id="117566">_isPersistedFmd</a> = <a href="#116993" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.DescendantOfKeyedObject]">descendantOfKeyedObjects</a>.<a href="../../../../main/org/squeryl/View.scala.html#37966" title="=&gt; org.squeryl.internals.PosoMetaData[org.squeryl.dbagnostic.DescendantOfKeyedObject]">posoMetaData</a>.<a href="../../../../main/org/squeryl/internals/PosoMetaData.scala.html#38369" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;_isPersisted&quot;)" class="string">&quot;_isPersisted&quot;</span><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#117566" title="Option[org.squeryl.internals.FieldMetaData]">_isPersistedFmd</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>
      <a href="#8263" title="(message: String)Nothing">fail</a><span class="delimiter">(</span><span title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="symbol">'testMetaData</span> <span title="(other: String)String">+</span> <span title="String(&quot; failed, @transient annotation of field _isPersisted was not effective.&quot;)" class="string">&quot; failed, @transient annotation of field _isPersisted was not effective.&quot;</span><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#116993" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.DescendantOfKeyedObject]">descendantOfKeyedObjects</a>.<a href="../../../../main/org/squeryl/View.scala.html#37965" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;id&quot;)" class="string">&quot;id&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span>
      <a href="#8263" title="(message: String)Nothing">fail</a><span class="delimiter">(</span><span title="String(&quot;PosoMetaData has failed to build immutable field \'id\'.&quot;)" class="string">&quot;PosoMetaData has failed to build immutable field 'id'.&quot;</span><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#116995" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.NailCutter]">nailCutters</a>.<a href="../../../../main/org/squeryl/View.scala.html#37965" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;id&quot;)" class="string">&quot;id&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span>
      <a href="#8263" title="(message: String)Nothing">fail</a><span class="delimiter">(</span><span title="String(&quot;PosoMetaData has failed to build immutable field \'id\'.&quot;)" class="string">&quot;PosoMetaData has failed to build immutable field 'id'.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMetaData" id="117567">brandNameMD</a> = <a href="#116997" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.Toaster]">toasters</a>.<a href="../../../../main/org/squeryl/View.scala.html#37965" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;brandName&quot;)" class="string">&quot;brandName&quot;</span><span class="delimiter">)</span>.<span title="=&gt; org.squeryl.internals.FieldMetaData">get</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117567" title="org.squeryl.internals.FieldMetaData">brandNameMD</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;BRAND_NAME&quot;)" class="string">&quot;BRAND_NAME&quot;</span>, <span title="String(&quot;expected \'BRAND_NAME\' got &quot;)" class="string">&quot;expected 'BRAND_NAME' got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117567" title="org.squeryl.internals.FieldMetaData">brandNameMD</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a><span class="delimiter">)</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117567" title="org.squeryl.internals.FieldMetaData">brandNameMD</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49735" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <span title="Int(32)" class="int">32</span>, <span title="String(&quot;expected 32 got &quot;)" class="string">&quot;expected 32 got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117567" title="org.squeryl.internals.FieldMetaData">brandNameMD</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49735" title="=&gt; Int">length</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMetaData" id="117568">yearOfManufacture</a> = <a href="#116997" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.Toaster]">toasters</a>.<a href="../../../../main/org/squeryl/View.scala.html#37965" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;yearOfManufacture&quot;)" class="string">&quot;yearOfManufacture&quot;</span><span class="delimiter">)</span>.<span title="=&gt; org.squeryl.internals.FieldMetaData">get</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117568" title="org.squeryl.internals.FieldMetaData">yearOfManufacture</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;yearOfManufacture&quot;)" class="string">&quot;yearOfManufacture&quot;</span>, <span title="String(&quot;expected \'yearOfManufacture\' got &quot;)" class="string">&quot;expected 'yearOfManufacture' got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117568" title="org.squeryl.internals.FieldMetaData">yearOfManufacture</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a><span class="delimiter">)</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117568" title="org.squeryl.internals.FieldMetaData">yearOfManufacture</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49735" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span>, <span title="String(&quot;expected 4 got &quot;)" class="string">&quot;expected 4 got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117568" title="org.squeryl.internals.FieldMetaData">yearOfManufacture</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49735" title="=&gt; Int">length</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMetaData" id="117569">zozo</a> = <a href="#116997" title="=&gt; org.squeryl.Table[org.squeryl.dbagnostic.Toaster]">toasters</a>.<a href="../../../../main/org/squeryl/View.scala.html#37965" title="(name: String)Option[org.squeryl.internals.FieldMetaData]">findFieldMetaDataForProperty</a><span class="delimiter">(</span><span title="String(&quot;zozo&quot;)" class="string">&quot;zozo&quot;</span><span class="delimiter">)</span>.<span title="=&gt; org.squeryl.internals.FieldMetaData">get</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117569" title="org.squeryl.internals.FieldMetaData">zozo</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;Zozo12&quot;)" class="string">&quot;Zozo12&quot;</span>, <span title="String(&quot;expected \'zozo\' got &quot;)" class="string">&quot;expected 'zozo' got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117569" title="org.squeryl.internals.FieldMetaData">zozo</a>.<a href="../../../../main/org/squeryl/internals/FieldMetaData.scala.html#49738" title="=&gt; String">columnName</a><span class="delimiter">)</span>

// TODO: uncomment when scalac bug #3003 is resolved
//    val dateOfPurchase = toasters.findFieldMetaDataForProperty(&quot;dateOfPurchase&quot;).get
//    assert(dateOfPurchase.columnName == &quot;dateOfPurchase&quot;, &quot;expected 'dateOfPurchase' got &quot; + dateOfPurchase.columnName)
//    assert(dateOfPurchase.length == -1, &quot;expected -1 got &quot; + dateOfPurchase.length)

  <span class="delimiter">}</span>

  /**
   * There has been a Scala bug with obtaining a Class[_] member in annotations,
   * if this test fails, it means that Scala has regressed TODO: file a bug
   */
  <a href="#8263" title="(testName: String, testTags: org.scalatest.Tag*)(testFun: =&gt; Unit)Unit">test</a><span class="delimiter">(</span><span title="String(&quot;scalaReflectionTests&quot;)" class="string">&quot;scalaReflectionTests&quot;</span><span class="delimiter">)</span><span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[java.lang.annotation.Annotation]" id="117756">colAnotations</a> =
      classOf<span title="Class[AnnotationTests.this.C](classOf[org.squeryl.dbagnostic.AnnotationTests$C])" class="delimiter">[</span>C<span class="delimiter">]</span>.<span title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">getDeclaredFields</span>.<span title="=&gt; List[java.lang.reflect.Field]">toList</span>.<span title="(f: java.lang.reflect.Field =&gt; String)(implicit ord: scala.math.Ordering[String])List[java.lang.reflect.Field]">sortBy</span><span title="scala.math.Ordering.String.type" class="delimiter">(</span><a title="java.lang.reflect.Field" id="117836">f</a> =&gt; <a href="#117836" title="java.lang.reflect.Field">f</a>.<span title="()String">getName</span><span class="delimiter">)</span>.<span title="(f: java.lang.reflect.Field =&gt; List[java.lang.annotation.Annotation])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Field],List[java.lang.annotation.Annotation],List[List[java.lang.annotation.Annotation]]])List[List[java.lang.annotation.Annotation]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[java.lang.annotation.Annotation],List[List[java.lang.annotation.Annotation]]]" class="delimiter">(</span><a title="java.lang.reflect.Field" id="118323">f</a> =&gt; <a href="#118323" title="java.lang.reflect.Field">f</a>.<span title="(xs: Array[java.lang.annotation.Annotation])scala.collection.mutable.ArrayOps[java.lang.annotation.Annotation]">getAnnotations</span>.<span title="=&gt; List[java.lang.annotation.Annotation]">toList</span><span class="delimiter">)</span>.<span title="(implicit asTraversable: List[java.lang.annotation.Annotation] =&gt; scala.collection.GenTraversableOnce[java.lang.annotation.Annotation])List[java.lang.annotation.Annotation]">flatten</span>

    <span class="keyword">val</span> <a title="Int" id="117757">c</a> = <a href="#117756" title="List[java.lang.annotation.Annotation]">colAnotations</a>.<span title="=&gt; Int">size</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span><a href="#117757" title="Int">c</a> <span title="(x: Int)Boolean">==</span> <span title="Int(3)" class="int">3</span>, <span title="String(&quot;class &quot;)" class="string">&quot;class &quot;</span> <span title="(x$1: Any)String">+</span> classOf<span title="Class[AnnotationTests.this.C](classOf[org.squeryl.dbagnostic.AnnotationTests$C])" class="delimiter">[</span>C<span class="delimiter">]</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; has 3 field annotations of type Column that have failed to be reflected, &quot;)" class="string">&quot; has 3 field annotations of type Column that have failed to be reflected, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117757" title="Int">c</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; were reflected&quot;)" class="string">&quot; were reflected&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Class[_]" id="117758">t1</a> = <a href="#117756" title="List[java.lang.annotation.Annotation]">colAnotations</a>.<span title="(n: Int)java.lang.annotation.Annotation">apply</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.annotations.Column" class="delimiter">[</span><a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#7295" title="org.squeryl.annotations.Column">Column</a><span class="delimiter">]</span>.<a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#46908" title="()Class[_]">optionType</a>
    <span class="keyword">val</span> <a title="Class[_]" id="117759">t2</a> = <a href="#117756" title="List[java.lang.annotation.Annotation]">colAnotations</a>.<span title="(n: Int)java.lang.annotation.Annotation">apply</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.annotations.Column" class="delimiter">[</span><a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#7295" title="org.squeryl.annotations.Column">Column</a><span class="delimiter">]</span>.<a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#46908" title="()Class[_]">optionType</a>
    <span class="keyword">val</span> <a title="Class[_]" id="117760">t3</a> = <a href="#117756" title="List[java.lang.annotation.Annotation]">colAnotations</a>.<span title="(n: Int)java.lang.annotation.Annotation">apply</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.annotations.Column" class="delimiter">[</span><a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#7295" title="org.squeryl.annotations.Column">Column</a><span class="delimiter">]</span>.<a href="../../../../main/org/squeryl/annotations/ColumnBase.java.html#46908" title="()Class[_]">optionType</a>

    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span>classOf<span title="Class[Int](classOf[scala.Int])" class="delimiter">[</span>Int<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#117758" title="Class[_]">t1</a><span class="delimiter">)</span>, <span title="String(&quot;expected classOf[Int], got &quot;)" class="string">&quot;expected classOf[Int], got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117758" title="Class[_]">t1</a>.<span title="()String">getName</span><span class="delimiter">)</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span>classOf<span title="Class[Long](classOf[scala.Long])" class="delimiter">[</span>Long<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#117759" title="Class[_]">t2</a><span class="delimiter">)</span>, <span title="String(&quot;expected classOf[Long], got &quot;)" class="string">&quot;expected classOf[Long], got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117759" title="Class[_]">t2</a>.<span title="()String">getName</span><span class="delimiter">)</span>
    <a href="#8263" title="(condition: Boolean, clue: Any)Unit">assert</a><span class="delimiter">(</span>classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#117760" title="Class[_]">t3</a><span class="delimiter">)</span>, <span title="String(&quot;expected classOf[String], got &quot;)" class="string">&quot;expected classOf[String], got &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#117760" title="Class[_]">t3</a>.<span title="()String">getName</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>