<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>main/org/squeryl/Schema.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */
<span class="keyword">package</span> org.squeryl

<span class="keyword">import</span> dsl._
<span class="keyword">import</span> ast._
<span class="keyword">import</span> internals._
<span class="keyword">import</span> reflect.<span class="delimiter">{</span>Manifest<span class="delimiter">}</span>
<span class="keyword">import</span> java.sql.SQLException
<span class="keyword">import</span> java.io.PrintWriter
<span class="keyword">import</span> collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, ArrayBuffer<span class="delimiter">}</span>
<span class="keyword">import</span> org.squeryl.internals.FieldMapper

<span class="keyword">class</span> <a title="class Schema extends Object" id="7184">Schema</a><a href="#7184" title="org.squeryl.Schema" class="delimiter">(</a><span class="keyword">implicit</span> <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMapper" id="37943">fieldMapper</a>: <a href="internals/FieldMapper.scala.html#8065" title="org.squeryl.internals.FieldMapper">FieldMapper</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.Schema" id="24241">thisSchema</a> = <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>

  /**
   * Contains all Table[_]s in this shema, and also all ManyToManyRelation[_,_,_]s (since they are also Table[_]s
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" id="24242">_tables</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">ArrayBuffer</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> 
  
  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.Table[_]]" id="24244">tables</a>: <span title="Seq[org.squeryl.Table[_]]">Seq</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#24242" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="=&gt; Seq[org.squeryl.Table[_]]">toSeq</span>
  
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]" id="24245">_tableTypes</a> = <span title="()scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">HashMap</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" id="24247">_oneToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">ArrayBuffer</span><span class="delimiter">[</span>OneToManyRelation<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" id="24249">_manyToManyRelations</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">ArrayBuffer</span><span class="delimiter">[</span>ManyToManyRelation<span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" id="24251">_columnGroupAttributeAssignments</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">ArrayBuffer</span><span class="delimiter">[</span>ColumnGroupAttributeAssignment<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[String]" id="24253">_namingScope</a> = <span title="()scala.collection.mutable.HashSet[String]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[String]">HashSet</span><span class="delimiter">[</span>String<span class="delimiter">]</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.OneToManyRelation[_, _])Unit" id="24255">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="38032">r</a>: <a href="dsl/ManyToMany.scala.html#7471" title="org.squeryl.dsl.OneToManyRelation[_, _]">OneToManyRelation</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#24247" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.OneToManyRelation[_, _]]">_oneToManyRelations</a>.<span title="(elems: org.squeryl.dsl.OneToManyRelation[_, _]*)Unit">append</span><span class="delimiter">(</span><a href="#38032" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(r: org.squeryl.dsl.ManyToManyRelation[_, _, _])Unit" id="24256">_addRelation</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="38045">r</a>: <a href="dsl/ManyToMany.scala.html#7478" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">ManyToManyRelation</a><span class="delimiter">[</span>_,_,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#24249" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ManyToManyRelation[_, _, _]]">_manyToManyRelations</a>.<span title="(elems: org.squeryl.dsl.ManyToManyRelation[_, _, _]*)Unit">append</span><span class="delimiter">(</span><a href="#38045" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.DatabaseAdapter" id="24257">_dbAdapter</a> = <a href="Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#38076" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

  /**
   *  @returns a tuple of (Table[_], Table[_], ForeignKeyDeclaration) where
   *  ._1 is the foreign key table,
   *  ._2 is the primary key table
   *  ._3 is the ForeignKeyDeclaration between _1 and _2
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="24258">_activeForeignKeySpecs</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" id="38205">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, Table<span class="delimiter">[</span>_<span class="delimiter">]</span>, ForeignKeyDeclaration<span class="delimiter">)</span><span class="delimiter">]</span>

    <span class="keyword">for</span><span class="delimiter">(</span> <a title="org.squeryl.dsl.OneToManyRelation[_, _]" id="38230">r</a> &lt;- <a href="#24247" title="(f: org.squeryl.dsl.OneToManyRelation[_, _] =&gt; Unit)Unit">_oneToManyRelations</a> <span class="keyword">if</span> <a href="#38230" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38219" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#24214" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
      <a href="#38205" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$6], _2: org.squeryl.Table[_$5], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$6], org.squeryl.Table[_$5], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#38230" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38217" title="=&gt; org.squeryl.Table[_$6]">rightTable</a>, <a href="#38230" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38216" title="=&gt; org.squeryl.Table[_$5]">leftTable</a>, <a href="#38230" title="org.squeryl.dsl.OneToManyRelation[_, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38219" title="=&gt; org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ManyToManyRelation[_, _, _]" id="38292">r</a> &lt;- <a href="#24249" title="(f: org.squeryl.dsl.ManyToManyRelation[_, _, _] =&gt; Unit)Unit">_manyToManyRelations</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38296" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#24214" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#38205" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$7], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$7], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38295" title="=&gt; org.squeryl.Table[_$9]">thisTable</a>, <a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38216" title="=&gt; org.squeryl.Table[_$7]">leftTable</a> , <a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38296" title="=&gt; org.squeryl.ForeignKeyDeclaration">leftForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38297" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#24214" title="=&gt; Boolean">_isActive</a><span class="delimiter">)</span>
        <a href="#38205" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>.<span title="(elems: (org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$9], _2: org.squeryl.Table[_$8], _3: org.squeryl.ForeignKeyDeclaration)(org.squeryl.Table[_$9], org.squeryl.Table[_$8], org.squeryl.ForeignKeyDeclaration)" class="delimiter">(</span><a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38295" title="=&gt; org.squeryl.Table[_$9]">thisTable</a>, <a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38217" title="=&gt; org.squeryl.Table[_$8]">rightTable</a>, <a href="#38292" title="org.squeryl.dsl.ManyToManyRelation[_, _, _]">r</a>.<a href="dsl/ManyToMany.scala.html#38297" title="=&gt; org.squeryl.ForeignKeyDeclaration">rightForeignKeyDeclaration</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#38205" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)]">res</a>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="[A](a: A)Iterable[org.squeryl.Table[A]]" id="24259">findTablesFor</a><span class="delimiter">[</span><a title="" id="24261">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="38347">a</a>: <a href="#24261" title="A">A</a><span class="delimiter">)</span>: <span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[_ &lt;: AnyRef]" id="38349">c</a> = <a href="#38347" title="A">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()Class[_]">getClass</span>
    <a href="#24242" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a href="#38357" title="org.squeryl.Table[_]">_</a>.<a href="View.scala.html#37966" title="=&gt; org.squeryl.internals.PosoMetaData[_$1]">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#38361" title="=&gt; Class[_$1]">clasz</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#38349" title="Class[_ &lt;: AnyRef]">c</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Iterable[org.squeryl.Table[A]]" class="delimiter">[</span><span title="Iterable[org.squeryl.Table[A]]">Iterable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](c: Class[A])Traversable[org.squeryl.Table[_]]" id="24262">findAllTablesFor</a><span class="delimiter">[</span><a title="" id="24264">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[A]" id="38410">c</a>: <span title="Class[A]">Class</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#24242" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(p: org.squeryl.Table[_] =&gt; Boolean)scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">filter</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="38412">t</a> =&gt; <a href="#38410" title="Class[A]">c</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#38412" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#37966" title="=&gt; org.squeryl.internals.PosoMetaData[_$1]">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#38361" title="=&gt; Class[_$1]">clasz</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Traversable[org.squeryl.Table[_]]" class="delimiter">[</span><span title="Traversable[org.squeryl.Table[_]]">Traversable</span><span class="delimiter">[</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>


  <span class="keyword">object</span> <a title="Schema.this.NamingConventionTransforms.type" id="24265">NamingConventionTransforms</a> <a href="#24266" title="Schema.this.NamingConventionTransforms.type" class="delimiter">{</a>
    
    @deprecated<span class="delimiter">(</span><span class="string">&quot;use snakify() instead as of 0.9.5beta&quot;</span>,<span class="string">&quot;0.9.5&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(name: String)String" id="38419">camelCase2underScore</a><span class="delimiter">(</span><a title="String" id="38422">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#38422" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">name</a>.<span title="=&gt; List[Char]">toList</span>.<span title="(f: Char =&gt; Any)(implicit bf: scala.collection.generic.CanBuildFrom[List[Char],Any,List[Any]])List[Any]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Any,List[Any]]" class="delimiter">(</span><a title="Char" id="38828">c</a> =&gt; <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#38828" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">c</a>.<span title="=&gt; Boolean">isUpper</span><span class="delimiter">)</span> <span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#38828" title="Char">c</a> <span class="keyword">else</span> <a href="#38828" title="Char">c</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
      
    <span class="keyword">def</span> <a title="(name: String)String" id="38420">snakify</a><span class="delimiter">(</span><a title="String" id="41178">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <a href="#41178" title="String">name</a>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><span title="String(&quot;^([^A-Za-z_])&quot;)" class="string">&quot;^([^A-Za-z_])&quot;</span>, <span title="String(&quot;_$1&quot;)" class="string">&quot;_$1&quot;</span><span class="delimiter">)</span>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><span title="String(&quot;([A-Z]+)([A-Z][a-z])&quot;)" class="string">&quot;([A-Z]+)([A-Z][a-z])&quot;</span>, <span title="String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><span title="String(&quot;([a-z0-9])([A-Z])&quot;)" class="string">&quot;([a-z0-9])([A-Z])&quot;</span>, <span title="String(&quot;$1_$2&quot;)" class="string">&quot;$1_$2&quot;</span><span class="delimiter">)</span>.<span title="()String">toLowerCase</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(propertyName: String)String" id="24267">columnNameFromPropertyName</a><span class="delimiter">(</span><a title="String" id="41427">propertyName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#41427" title="String">propertyName</a>

  <span class="keyword">def</span> <a title="(tableName: String)String" id="24268">tableNameFromClassName</a><span class="delimiter">(</span><a title="String" id="41428">tableName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#41428" title="String">tableName</a>

  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="24269">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="None.type">None</span>

  /**
   * Prints the schema to standard output, it is simply : schema.printDdl(println(_))
   */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="24270">printDdl</a>: <span title="Unit">Unit</span> = <a href="#24272" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#41607" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(pw: java.io.PrintWriter)Unit" id="24271">printDdl</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="41434">pw</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#24272" title="(statementHandler: String =&gt; Unit)Unit">printDdl</a><span class="delimiter">(</span><a href="#41434" title="java.io.PrintWriter">pw</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#41615" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  /**
   * @arg statementHandler is a closure that receives every declaration in the schema.
   */
  <span class="keyword">def</span> <a title="(statementHandler: String =&gt; Unit)Unit" id="24272">printDdl</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="41433">statementHandler</a>: String =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="String(&quot;-- table declarations :&quot;)" class="string">&quot;-- table declarations :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="41644">t</a> &lt;- <a href="#24242" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="41645">sw</a> = <span title="org.squeryl.internals.StatementWriter" class="keyword">new</span> <a href="internals/StatementWriter.scala.html#8175" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38138" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#41644" title="org.squeryl.Table[_]">t</a>, <a href="#41645" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#41645" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#41664" title="=&gt; String">statement</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38164" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#41644" title="org.squeryl.Table[_]">t</a>, <span title="(x: String =&gt; Unit)Some[String =&gt; Unit]">Some</span><span class="delimiter">(</span><a href="#41433" title="String =&gt; Unit">statementHandler</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="List[String]" id="41646">indexDecl</a> = <a href="#24275" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span class="delimiter">(</span><a href="#41644" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#41646" title="List[String]">indexDecl</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
        <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="String(&quot;-- indexes on &quot;)" class="string">&quot;-- indexes on &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#41644" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#37963" title="=&gt; String">prefixedName</a><span class="delimiter">)</span>

      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="50476">i</a> &lt;- <a href="#41646" title="(f: String =&gt; Unit)Unit">indexDecl</a><span class="delimiter">)</span>
        <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#50476" title="String">i</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[String]" id="41620">constraints</a> = <a href="#24282" title="=&gt; scala.collection.mutable.ArrayBuffer[String]">_foreignKeyConstraints</a>.<span title="=&gt; List[String]">toList</span>
    
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#41620" title="List[String]">constraints</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="String(&quot;-- foreign key constraints :&quot;)" class="string">&quot;-- foreign key constraints :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="50690">fkc</a> &lt;- <a href="#41620" title="(f: String =&gt; Unit)Unit">constraints</a><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#50690" title="String">fkc</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="41621">compositePKs</a> = <a href="#24285" title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">_allCompositePrimaryKeys</a>.<span title="=&gt; List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#41621" title="List[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">compositePKs</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="String(&quot;-- composite key indexes :&quot;)" class="string">&quot;-- composite key indexes :&quot;</span><span class="delimiter">)</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="50814">cpk</a> &lt;- <a href="#41621" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Unit)Unit">compositePKs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="50815">createConstraintStmt</a> = <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38193" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#50814" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#50814" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#50815" title="String">createConstraintStmt</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[String]" id="41622">columnGroupIndexes</a> = <a href="#24276" title="=&gt; Seq[String]">_writeColumnGroupAttributeAssignments</a>.<span title="=&gt; List[String]">toList</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#41622" title="List[String]">columnGroupIndexes</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><span title="String(&quot;-- column group indexes :&quot;)" class="string">&quot;-- column group indexes :&quot;</span><span class="delimiter">)</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="51022">decl</a> &lt;- <a href="#41622" title="(f: String =&gt; Unit)Unit">columnGroupIndexes</a><span class="delimiter">)</span>
      <a href="#41433" title="(v1: String)Unit">statementHandler</a><span class="delimiter">(</span><a href="#51022" title="String">decl</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * This will drop all tables and related sequences in the schema... it's a
   * dangerous operation, typically this is only useful for development
   * database instances, the method is protected in order to make it a little
   * less 'accessible'
   */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="24273">drop</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38190" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#24279" title="=&gt; Unit">_dropForeignKeyConstraints</a>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="51024">s</a> = <a href="Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#38074" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="51025">con</a> = <a href="Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="Session.scala.html#38074" title="=&gt; java.sql.Connection">connection</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="51767">t</a> &lt;- <a href="#24242" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38192" title="(t: org.squeryl.Table[_])Unit">dropTable</a><span class="delimiter">(</span><a href="#51767" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38165" title="(t: org.squeryl.Table[_])Unit">postDropTable</a><span class="delimiter">(</span><a href="#51767" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>  

  <span class="keyword">def</span> <a title="=&gt; Unit" id="24274">create</a> = <span class="delimiter">{</span>
    <a href="#24283" title="=&gt; Unit">_createTables</a>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38190" title="=&gt; Boolean">supportsForeignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#24280" title="=&gt; Unit">_declareForeignKeyConstraints</a>

    <a href="#24284" title="=&gt; Unit">_createConstraintsOfCompositePKs</a>

    <a href="#24278" title="=&gt; Unit">createColumnGroupConstraintsAndIndexes</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])List[String]" id="24275">_indexDeclarationsFor</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="50278">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterable[Option[String]]" id="50279">d0</a> =
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="50302">fmd</a> &lt;- <a href="#50278" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#37966" title="=&gt; org.squeryl.internals.PosoMetaData[_$18]">posoMetaData</a>.<a href="internals/PosoMetaData.scala.html#38374" title="(f: org.squeryl.internals.FieldMetaData =&gt; Option[String])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.squeryl.internals.FieldMetaData],Option[String],Iterable[Option[String]]])Iterable[Option[String]]">fieldsMetaData</a><span class="delimiter">)</span>
        <span class="keyword">yield</span> <a href="#24277" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#50302" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="internals/FieldMetaData.scala.html#49730" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="=&gt; Seq[org.squeryl.internals.ColumnAttribute]">toSeq</span>, <span title="(elems: org.squeryl.internals.FieldMetaData*)Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">(</span><a href="#50302" title="org.squeryl.internals.FieldMetaData">fmd</a><span class="delimiter">)</span>, <span title="None.type">None</span><span class="delimiter">)</span>

    <a href="#50279" title="Iterable[Option[String]]">d0</a>.<span title="(p: Option[String] =&gt; Boolean)Iterable[Option[String]]">filter</span><span class="delimiter">(</span><a href="#50356" title="Option[String]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>.<span title="(f: Option[String] =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Option[String]],String,Iterable[String]])Iterable[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,String,Iterable[String]]" class="delimiter">(</span><a href="#50384" title="Option[String]">_</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span>
  <span class="delimiter">}</span>
  

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Seq[String]" id="24276">_writeColumnGroupAttributeAssignments</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="51966">cgaa</a> &lt;- <a href="#24251" title="(f: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment],String,Seq[String]])Seq[String]">_columnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <span class="keyword">yield</span> <a href="#24277" title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a href="#51966" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51985" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>, <a href="#51966" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51988" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">columns</a>, <a href="#51966" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cgaa</a>.<a href="dsl/ast/ExpressionNode.scala.html#51990" title="=&gt; Option[String]">name</a><span class="delimiter">)</span>.
        <span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span>org.squeryl.internals.<a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;)" class="string">&quot;emtpy attribute list should not be possible to create with DSL (Squeryl bug).&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(columnAttributes: Seq[org.squeryl.internals.ColumnAttribute], cols: Seq[org.squeryl.internals.FieldMetaData], name: Option[String])Option[String]" id="24277">_writeIndexDeclarationIfApplicable</a><span class="delimiter">(</span><a title="Seq[org.squeryl.internals.ColumnAttribute]" id="50303">columnAttributes</a>: <span title="Seq[org.squeryl.internals.ColumnAttribute]">Seq</span><span class="delimiter">[</span>ColumnAttribute<span class="delimiter">]</span>, <a title="Seq[org.squeryl.internals.FieldMetaData]" id="50304">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span>, <a title="Option[String]" id="50305">name</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="52391">unique</a> = <a href="#50303" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#52398" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#8015" title="org.squeryl.internals.Unique">Unique</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.Indexed]" id="52392">indexed</a> = <a href="#50303" title="Seq[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#52402" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#8021" title="org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: org.squeryl.internals.ColumnAttribute =&gt; Option[org.squeryl.internals.Indexed])Option[org.squeryl.internals.Indexed]">flatMap</span><span class="delimiter">{</span> <a title="org.squeryl.internals.ColumnAttribute" id="52412">i</a> =&gt; 
      <a href="#52412" title="org.squeryl.internals.ColumnAttribute">i</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#423958" title="Option[org.squeryl.internals.Indexed]" id="423959">idx</a>: Indexed =&gt; <span title="(x: org.squeryl.internals.Indexed)Some[org.squeryl.internals.Indexed]">Some</span><a href="#423961" title="(x: Option[org.squeryl.internals.Indexed])Option[org.squeryl.internals.Indexed]" class="delimiter">(</a>idx<span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt; <a href="#423961" title="(x: Option[org.squeryl.internals.Indexed])Option[org.squeryl.internals.Indexed]">None</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  
    <a href="#423966" title="(_1: Option[org.squeryl.internals.ColumnAttribute], _2: Option[org.squeryl.internals.Indexed])(Option[org.squeryl.internals.ColumnAttribute], Option[org.squeryl.internals.Indexed])" class="delimiter">(</a><a href="#52391" title="Option[org.squeryl.internals.ColumnAttribute]">unique</a>, <a href="#52392" title="Option[org.squeryl.internals.Indexed]">indexed</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="#423966" title="Option[org.squeryl.internals.ColumnAttribute]" id="423987">None</a>,    <a href="#423966" title="Option[org.squeryl.internals.Indexed]" id="423988">None</a><span class="delimiter">)</span>                   =&gt; <a href="#423992" title="(x: Option[String])Option[String]">None</a>
      <span class="keyword">case</span> <span class="delimiter">(</span>Some<a href="#423966" title="Option[org.squeryl.internals.ColumnAttribute]" id="423974" class="delimiter">(</a><a href="#423974" title="org.squeryl.internals.ColumnAttribute" id="423973">_</a><span class="delimiter">)</span>, <a href="#423966" title="Option[org.squeryl.internals.Indexed]" id="423989">None</a><span class="delimiter">)</span>                   =&gt; <span title="(x: String)Some[String]">Some</span><a href="#423992" title="(x: Option[String])Option[String]" class="delimiter">(</a><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38197" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#50304" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <span title="None.type">None</span>,    <a href="#50305" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="#423966" title="Option[org.squeryl.internals.ColumnAttribute]" id="423990">None</a>,    Some<a href="#423966" title="Option[org.squeryl.internals.Indexed]" id="423980" class="delimiter">(</a>Indexed<a href="#423980" title="org.squeryl.internals.Indexed" id="423979" class="delimiter">(</a><a href="internals/ColumnAttribute.scala.html#52404" title="Option[String]" id="52687">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><a href="#423992" title="(x: Option[String])Option[String]" class="delimiter">(</a><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38197" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#50304" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#52687" title="Option[String]">idxName</a>, <a href="#50305" title="Option[String]">name</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>Some<a href="#423966" title="Option[org.squeryl.internals.ColumnAttribute]" id="423984" class="delimiter">(</a><a href="#423984" title="org.squeryl.internals.ColumnAttribute" id="423983">_</a><span class="delimiter">)</span>, Some<a href="#423966" title="Option[org.squeryl.internals.Indexed]" id="423986" class="delimiter">(</a>Indexed<a href="#423986" title="org.squeryl.internals.Indexed" id="423985" class="delimiter">(</a><a href="internals/ColumnAttribute.scala.html#52404" title="Option[String]" id="52695">idxName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><a href="#423992" title="(x: Option[String])Option[String]" class="delimiter">(</a><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38197" title="(columnDefs: Seq[org.squeryl.internals.FieldMetaData], name: Option[String], nameOfCompositeKey: Option[String], isUnique: Boolean)String">writeIndexDeclaration</a><span class="delimiter">(</span><a href="#50304" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#52695" title="Option[String]">idxName</a>, <a href="#50305" title="Option[String]">name</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Unit" id="24278">createColumnGroupConstraintsAndIndexes</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="51947">statement</a> &lt;- <a href="#24276" title="(f: String =&gt; Boolean)Unit">_writeColumnGroupAttributeAssignments</a><span class="delimiter">)</span>
      <a href="#24281" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#51947" title="String">statement</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="24279">_dropForeignKeyConstraints</a> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="51026">cs</a> = <a href="Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>
    <span class="keyword">val</span> <a title="org.squeryl.internals.DatabaseAdapter" id="51027">dba</a> = <a href="#51026" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#38076" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="51050">fk</a> &lt;- <a href="#24258" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; Unit)Unit">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.sql.Statement" id="51051">s</a> = <a href="#51026" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#38074" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
      <a href="#51027" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#38188" title="(foreignKeyTable: org.squeryl.Table[_], fkName: String, session: org.squeryl.Session)Unit">dropForeignKeyStatement</a><span class="delimiter">(</span><a href="#51050" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#51027" title="org.squeryl.internals.DatabaseAdapter">dba</a>.<a href="internals/DatabaseAdapter.scala.html#38183" title="(foreignKeyTable: org.squeryl.Table[_], idWithinSchema: Int)String">foreignKeyConstraintName</a><span class="delimiter">(</span><a href="#51050" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#51050" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>.<a href="KeyedEntity.scala.html#24204" title="=&gt; Int">idWithinSchema</a><span class="delimiter">)</span>, <a href="#51026" title="org.squeryl.Session">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="24280">_declareForeignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="51892">fk</a> &lt;- <a href="#24282" title="(f: String =&gt; Boolean)Unit">_foreignKeyConstraints</a><span class="delimiter">)</span>
      <a href="#24281" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#51892" title="String">fk</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(statement: String)Boolean" id="24281">_executeDdl</a><span class="delimiter">(</span><a title="String" id="51808">statement</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.Session" id="51809">cs</a> = <a href="Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>
    <a href="#51809" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#38089" title="(s: String)Unit">log</a><span class="delimiter">(</span><a href="#51808" title="String">statement</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.sql.Statement" id="51810">s</a> = <a href="#51809" title="org.squeryl.Session">cs</a>.<a href="Session.scala.html#38074" title="=&gt; java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#51810" title="java.sql.Statement">s</a>.<span title="(x$1: String)Boolean">execute</span><span class="delimiter">(</span><a href="#51808" title="String">statement</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="51822">e</a>:<span title="java.sql.SQLException">SQLException</span> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="KeyedEntity.scala.html#15659" title="(message: String, cause: java.sql.SQLException)org.squeryl.SquerylSQLException">SquerylSQLException</a><span class="delimiter">(</span><span title="String(&quot;error executing &quot;)" class="string">&quot;error executing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#51808" title="String">statement</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#51822" title="java.sql.SQLException">e</a>, <a href="#51822" title="java.sql.SQLException">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#51810" title="java.sql.Statement">s</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[String]" id="24282">_foreignKeyConstraints</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)" id="50516">fk</a> &lt;- <a href="#24258" title="(f: ((org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)],String,scala.collection.mutable.ArrayBuffer[String]])scala.collection.mutable.ArrayBuffer[String]">_activeForeignKeySpecs</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="50517">fkDecl</a> = <a href="#50516" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.ForeignKeyDeclaration">_3</span>

      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38185" title="(foreignKeyTable: org.squeryl.Table[_], foreignKeyColumnName: String, primaryKeyTable: org.squeryl.Table[_], primaryKeyColumnName: String, referentialAction1: Option[org.squeryl.ReferentialAction], referentialAction2: Option[org.squeryl.ReferentialAction], fkId: Int)String">writeForeignKeyDeclaration</a><span class="delimiter">(</span>
         <a href="#50516" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#50517" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#24206" title="=&gt; String">foreignKeyColumnName</a>,
         <a href="#50516" title="(org.squeryl.Table[_], org.squeryl.Table[_], org.squeryl.ForeignKeyDeclaration)">fk</a>.<span title="=&gt; org.squeryl.Table[_]">_2</span>, <a href="#50517" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#24208" title="=&gt; String">referencedPrimaryKey</a>,
         <a href="#50517" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#24215" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction1</a>,
         <a href="#50517" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#24216" title="=&gt; Option[org.squeryl.ReferentialAction]">_referentialAction2</a>,
         <a href="#50517" title="org.squeryl.ForeignKeyDeclaration">fkDecl</a>.<a href="KeyedEntity.scala.html#24204" title="=&gt; Int">idWithinSchema</a>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="24283">_createTables</a> = <span class="delimiter">{</span>
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="51796">t</a> &lt;- <a href="#24242" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.internals.StatementWriter" id="51797">sw</a> = <a href="internals/StatementWriter.scala.html#41655" title="(databaseAdapter: org.squeryl.internals.DatabaseAdapter)org.squeryl.internals.StatementWriter" class="keyword">new</a> <a href="internals/StatementWriter.scala.html#8175" title="org.squeryl.internals.StatementWriter">StatementWriter</a><span class="delimiter">(</span><a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a><span class="delimiter">)</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38138" title="(t: org.squeryl.Table[_$1], sw: org.squeryl.internals.StatementWriter, schema: org.squeryl.Schema)Unit">writeCreateTable</a><span class="delimiter">(</span><a href="#51796" title="org.squeryl.Table[_]">t</a>, <a href="#51797" title="org.squeryl.internals.StatementWriter">sw</a>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a><span class="delimiter">)</span>
      <a href="#24281" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#51797" title="org.squeryl.internals.StatementWriter">sw</a>.<a href="internals/StatementWriter.scala.html#41664" title="=&gt; String">statement</a><span class="delimiter">)</span>
      <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38164" title="(t: org.squeryl.Table[_], printSinkWhenWriteOnlyMode: Option[String =&gt; Unit])Unit">postCreateTable</a><span class="delimiter">(</span><a href="#51796" title="org.squeryl.Table[_]">t</a>, <span title="None.type">None</span><span class="delimiter">)</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="String" id="51867">indexDecl</a> &lt;- <a href="#24275" title="(t: org.squeryl.Table[_])List[String]">_indexDeclarationsFor</a><span title="(f: String =&gt; Boolean)Unit" class="delimiter">(</span><a href="#51796" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#24281" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#51867" title="String">indexDecl</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="24284">_createConstraintsOfCompositePKs</a> =
    <span class="keyword">for</span><span class="delimiter">(</span><a title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])" id="51916">cpk</a> &lt;- <a href="#24285" title="(f: ((org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])) =&gt; Boolean)Unit">_allCompositePrimaryKeys</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="51917">createConstraintStmt</a> = <a href="#24257" title="=&gt; org.squeryl.internals.DatabaseAdapter">_dbAdapter</a>.<a href="internals/DatabaseAdapter.scala.html#38193" title="(t: org.squeryl.Table[_], cols: Iterable[org.squeryl.internals.FieldMetaData])String">writeCompositePrimaryKeyConstraint</a><span class="delimiter">(</span><a href="#51916" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; org.squeryl.Table[_]">_1</span>, <a href="#51916" title="(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])">cpk</a>.<span title="=&gt; Iterable[org.squeryl.internals.FieldMetaData]">_2</span><span class="delimiter">)</span>
      <a href="#24281" title="(statement: String)Boolean">_executeDdl</a><span class="delimiter">(</span><a href="#51917" title="String">createConstraintStmt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>  

  /**
   * returns an Iterable of (Table[_],Iterable[FieldMetaData]), the list of
   * all tables whose PK is a composite, with the columns that are part of the PK : Iterable[FieldMetaData] 
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="24285">_allCompositePrimaryKeys</a> = <span class="delimiter">{</span>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" id="50692">res</a> = <span title="()scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">ArrayBuffer</span><span class="delimiter">[</span><span class="delimiter">(</span>Table<span class="delimiter">[</span>_<span class="delimiter">]</span>,Iterable<span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>
    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="50717">t</a> &lt;- <a href="#24242" title="(f: org.squeryl.Table[_] =&gt; Unit)Unit">_tables</a>; <a title="org.squeryl.KeyedEntityDef[_$1, _]" id="50723">ked</a> &lt;- <a href="#50717" title="org.squeryl.Table[_]">t</a>.<a href="View.scala.html#37956" title="(f: org.squeryl.KeyedEntityDef[_$1, _] =&gt; Unit)Unit">ked</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      <a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32415" title="(q: org.squeryl.Queryable[AnyRef], visitor: AnyRef =&gt; Unit)Unit">mapSampleObject</a><span class="delimiter">(</span>
        <a href="#50717" title="org.squeryl.Table[_]">t</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[AnyRef]" class="delimiter">[</span><a href="Table.scala.html#7209" title="org.squeryl.Table[AnyRef]">Table</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>,
        <span class="delimiter">(</span>z:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="AnyRef" id="50734">id</a> = <a href="#50723" title="org.squeryl.KeyedEntityDef[_$1, _]">ked</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.KeyedEntityDef[AnyRef,AnyRef]" class="delimiter">[</span><a href="KeyedEntity.scala.html#7120" title="org.squeryl.KeyedEntityDef[AnyRef,AnyRef]">KeyedEntityDef</a><span class="delimiter">[</span>AnyRef,AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="KeyedEntity.scala.html#8838" title="(a: AnyRef)AnyRef">getId</a><span class="delimiter">(</span><a href="#50733" title="AnyRef">z</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50734" title="AnyRef">id</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#7375" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Seq[org.squeryl.internals.FieldMetaData]" id="50736">compositeCols</a> = <a href="#50734" title="AnyRef">id</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.CompositeKey" class="delimiter">[</span><a href="dsl/CompositeKey.scala.html#7375" title="org.squeryl.dsl.CompositeKey">CompositeKey</a><span class="delimiter">]</span>.<a href="dsl/CompositeKey.scala.html#33400" title="=&gt; Seq[org.squeryl.internals.FieldMetaData]">_fields</a>
            <a href="#50692" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>.<span title="(elems: (org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])*)Unit">append</span><span class="delimiter">(</span><span title="(_1: org.squeryl.Table[_$1], _2: Seq[org.squeryl.internals.FieldMetaData])(org.squeryl.Table[_$1], Seq[org.squeryl.internals.FieldMetaData])" class="delimiter">(</span><a href="#50717" title="org.squeryl.Table[_]">t</a>, <a href="#50736" title="Seq[org.squeryl.internals.FieldMetaData]">compositeCols</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#50692" title="scala.collection.mutable.ArrayBuffer[(org.squeryl.Table[_], Iterable[org.squeryl.internals.FieldMetaData])]">res</a>
  <span class="delimiter">}</span>

  /**
   * Use this method to override the DatabaseAdapter's default column type for the given field
   * (FieldMetaData), returning None means that no override will take place.
   *
   * There are two levels at which db column type can be overriden, in order of precedence :
   *
   *   on(professors)(p =&gt; declare(
   *      s.yearlySalary is(dbType(&quot;real&quot;))
   *    ))
   *
   *  overrides (has precedence over) :
   *
   *  MySchema extends Schema {
   *    ...
   *    override def columnTypeFor(fieldMetaData: FieldMetaData, owner: Table[_]) =
   *      if(fieldMetaData.wrappedFieldType.isInstanceOf[Int)
   *        Some(&quot;number&quot;)
   *      else
   *        None
   *  }
   *
   */
  <span class="keyword">def</span> <a title="(fieldMetaData: org.squeryl.internals.FieldMetaData, owner: org.squeryl.Table[_])Option[String]" id="24286">columnTypeFor</a><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMetaData" id="52699">fieldMetaData</a>: <a href="internals/FieldMetaData.scala.html#8086" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>, <a title="org.squeryl.Table[_]" id="52700">owner</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="None.type">None</span>
  
  <span class="keyword">def</span> <a title="(c: Class[_])String" id="24287">tableNameFromClass</a><span class="delimiter">(</span><a title="Class[_]" id="52704">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>:<span title="String">String</span> =
    <a href="#52704" title="Class[_]">c</a>.<span title="()String">getSimpleName</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T]()(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]" id="24288">table</a><span class="delimiter">[</span><a title="" id="24290">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="52708">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="org.squeryl.OptionalKeyedEntityDef[T, _]" id="52709">ked</a>: <a href="KeyedEntity.scala.html#7123" title="org.squeryl.OptionalKeyedEntityDef[T, _]">OptionalKeyedEntityDef</a><span class="delimiter">[</span>T,_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#7209" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#24291" title="(name: String)(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]">table</a><span class="delimiter">(</span><a href="#24287" title="(c: Class[_])String">tableNameFromClass</a><span class="delimiter">(</span><a href="#52708" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; Class[_]">erasure</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#52708" title="scala.reflect.Manifest[T]">manifestT</a>, <a href="#52709" title="org.squeryl.OptionalKeyedEntityDef[T, _]">ked</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String)(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]" id="24291">table</a><span class="delimiter">[</span><a title="" id="24293">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="52743">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="52744">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="org.squeryl.OptionalKeyedEntityDef[T, _]" id="52745">ked</a>: <a href="KeyedEntity.scala.html#7123" title="org.squeryl.OptionalKeyedEntityDef[T, _]">OptionalKeyedEntityDef</a><span class="delimiter">[</span>T,_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#7209" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="52788">typeT</a> = <a href="#52744" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="52789">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#7209" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#52743" title="String">name</a>, <a href="#52788" title="Class[T]">typeT</a>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <span title="None.type">None</span>, <a href="#52745" title="org.squeryl.OptionalKeyedEntityDef[T, _]">ked</a>.<a href="KeyedEntity.scala.html#8836" title="=&gt; Option[org.squeryl.KeyedEntityDef[T,_$23]]">keyedEntityDef</a><span class="delimiter">)</span>
    <a href="#24297" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#52789" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#24298" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#52788" title="Class[T]">typeT</a>, <a href="#52789" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#52789" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](name: String, prefix: String)(implicit manifestT: scala.reflect.Manifest[T], implicit ked: org.squeryl.OptionalKeyedEntityDef[T, _])org.squeryl.Table[T]" id="24294">table</a><span class="delimiter">[</span><a title="" id="24296">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="52730">name</a>: <span title="String">String</span>, <a title="String" id="52731">prefix</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="52732">manifestT</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="org.squeryl.OptionalKeyedEntityDef[T, _]" id="52733">ked</a>: <a href="KeyedEntity.scala.html#7123" title="org.squeryl.OptionalKeyedEntityDef[T, _]">OptionalKeyedEntityDef</a><span class="delimiter">[</span>T,_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Table.scala.html#7209" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[T]" id="52846">typeT</a> = <a href="#52732" title="scala.reflect.Manifest[T]">manifestT</a>.<span title="=&gt; Class[_]">erasure</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="org.squeryl.Table[T]" id="52847">t</a> = <span title="org.squeryl.Table[T]" class="keyword">new</span> <a href="Table.scala.html#7209" title="org.squeryl.Table[T]">Table</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#52730" title="String">name</a>, <a href="#52846" title="Class[T]">typeT</a>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#52731" title="String">prefix</a><span class="delimiter">)</span>, <a href="#52733" title="org.squeryl.OptionalKeyedEntityDef[T, _]">ked</a>.<a href="KeyedEntity.scala.html#8836" title="=&gt; Option[org.squeryl.KeyedEntityDef[T,_$24]]">keyedEntityDef</a><span class="delimiter">)</span>
    <a href="#24297" title="(t: org.squeryl.Table[_])Unit">_addTable</a><span class="delimiter">(</span><a href="#52847" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#24298" title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">_addTableType</a><span class="delimiter">(</span><a href="#52846" title="Class[T]">typeT</a>, <a href="#52847" title="org.squeryl.Table[T]">t</a><span class="delimiter">)</span>
    <a href="#52847" title="org.squeryl.Table[T]">t</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(t: org.squeryl.Table[_])Unit" id="24297">_addTable</a><span class="delimiter">(</span><a title="org.squeryl.Table[_]" id="52806">t</a>:<a href="Table.scala.html#7209" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#24242" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.Table[_]]">_tables</a>.<span title="(elems: org.squeryl.Table[_]*)Unit">append</span><span class="delimiter">(</span><a href="#52806" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span>
    
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(typeT: Class[_], t: org.squeryl.Table[_])scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]" id="24298">_addTableType</a><span class="delimiter">(</span><a title="Class[_]" id="52813">typeT</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.squeryl.Table[_]" id="52814">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#24245" title="=&gt; scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(kv: (Class[_], org.squeryl.Table[_]))Schema.this._tableTypes.type">+=</span> <span class="delimiter">(</span><span title="(_1: Class[_$26], _2: org.squeryl.Table[_$27])(Class[_$26], org.squeryl.Table[_$27])" class="delimiter">(</span><a href="#52813" title="Class[_]">typeT</a>, <a href="#52814" title="org.squeryl.Table[_]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ReferentialEvent extends Object" id="24299">ReferentialEvent</a><a href="#24299" title="Schema.this.ReferentialEvent" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="52876">eventName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="52870">restrict</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#24300" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="String(&quot;restrict&quot;)" class="string">&quot;restrict&quot;</span>, <a href="#24299" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="52871">cascade</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#24300" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="String(&quot;cascade&quot;)" class="string">&quot;cascade&quot;</span>, <a href="#24299" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="52872">noAction</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#24300" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="String(&quot;no action&quot;)" class="string">&quot;no action&quot;</span>, <a href="#24299" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialActionImpl" id="52873">setNull</a> = <span title="Schema.this.ReferentialActionImpl" class="keyword">new</span> <a href="#24300" title="Schema.this.ReferentialActionImpl">ReferentialActionImpl</a><span class="delimiter">(</span><span title="String(&quot;set null&quot;)" class="string">&quot;set null&quot;</span>, <a href="#24299" title="Schema.this.ReferentialEvent" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ReferentialActionImpl extends Object with org.squeryl.ReferentialAction" id="24300">ReferentialActionImpl</a><a href="#24300" title="Schema.this.ReferentialActionImpl" class="delimiter">(</a><a title="String" id="52884">token</a>: <span title="String">String</span>, <a title="Schema.this.ReferentialEvent" id="52885">ev</a>: <a href="#24299" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="KeyedEntity.scala.html#7138" title="org.squeryl.ReferentialAction">ReferentialAction</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="52882">event</a> = <a href="#52885" title="Schema.this.ReferentialEvent">ev</a>.<a href="#52876" title="=&gt; String">eventName</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="52883">action</a> = <a href="#52884" title="String">token</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="24301">onUpdate</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#24299" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="String(&quot;update&quot;)" class="string">&quot;update&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Schema.this.ReferentialEvent" id="24302">onDelete</a> = <span title="Schema.this.ReferentialEvent" class="keyword">new</span> <a href="#24299" title="Schema.this.ReferentialEvent">ReferentialEvent</a><span class="delimiter">(</span><span title="String(&quot;delete&quot;)" class="string">&quot;delete&quot;</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="24304">_fkIdGen</a> = <span title="Int(1)" class="int">1</span> 

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(fkColName: String, pkColName: String)org.squeryl.ForeignKeyDeclaration" id="24306">_createForeignKeyDeclaration</a><span class="delimiter">(</span><a title="String" id="52895">fkColName</a>: <span title="String">String</span>, <a title="String" id="52896">pkColName</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.ForeignKeyDeclaration" id="52897">fkd</a> = <span title="org.squeryl.ForeignKeyDeclaration" class="keyword">new</span> <a href="KeyedEntity.scala.html#7139" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">(</span><a href="#24304" title="=&gt; Int">_fkIdGen</a>, <a href="#52895" title="String">fkColName</a>, <a href="#52896" title="String">pkColName</a><span class="delimiter">)</span>
    <a href="#24304" title="(x$1: Int)Unit">_fkIdGen</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#24307" title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a href="#52897" title="org.squeryl.ForeignKeyDeclaration">fkd</a><span class="delimiter">)</span>
    <a href="#52897" title="org.squeryl.ForeignKeyDeclaration">fkd</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(foreignKeyDeclaration: org.squeryl.ForeignKeyDeclaration)Unit" id="24307">applyDefaultForeignKeyPolicy</a><span class="delimiter">(</span><a title="org.squeryl.ForeignKeyDeclaration" id="52904">foreignKeyDeclaration</a>: <a href="KeyedEntity.scala.html#7139" title="org.squeryl.ForeignKeyDeclaration">ForeignKeyDeclaration</a><span class="delimiter">)</span> =
    <a href="#52904" title="org.squeryl.ForeignKeyDeclaration">foreignKeyDeclaration</a>.<a href="KeyedEntity.scala.html#24218" title="()(implicit ev: org.squeryl.Schema)Unit">constrainReference</a>

  /**
   * @return a Tuple2 with (LengthOfDecimal, Scale) that will determine the storage
   * length of the database type that map fields of type java.lang.BigDecimal
   * Can be overridden by the Column Annotation, ex.: Column(length=22, scale=20)
   * default is (20,16)
   */
  
  <span class="keyword">def</span> <a title="=&gt; (Int, Int)" id="24308">defaultSizeOfBigDecimal</a> = <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><span title="Int(20)" class="int">20</span>,<span title="Int(16)" class="int">16</span><span class="delimiter">)</span>

  /**
   * @return the default database storage (column) length for String columns for this Schema,
   * Can be overridden by the Column Annotation ex.: Column(length=256)
   * default is 128 
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="24309">defaultLengthOfString</a> = <span title="Int(128)" class="int">128</span>

  /**
   * protected since table declarations must only be done inside a Schema
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[B](a: org.squeryl.dsl.ast.BaseColumnAttributeAssignment*)Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="24310">declare</a><span class="delimiter">[</span><a title="" id="24312">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*" id="52913">a</a>: <span title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">BaseColumnAttributeAssignment</span>*<span class="delimiter">)</span> = <a href="#52913" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment*">a</a>

  /**
   * protected since table declarations must only be done inside a Schema
   */  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])(declarations: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit" id="24313">on</a><span class="delimiter">[</span><a title="" id="24315">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="52914">table</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">(</span><a title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="52915">declarations</a>: A=&gt;Seq<span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#52914" title="org.squeryl.Table[A]">table</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      org.squeryl.internals.<a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;on function called with null argument in &quot;)" class="string">&quot;on function called with null argument in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#7184" title="Schema.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span>
            <span title="String(&quot; tables must be initialized before declarations.&quot;)" class="string">&quot; tables must be initialized before declarations.&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]" id="52916">colAss</a>: <span title="Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">Seq</span><span class="delimiter">[</span>BaseColumnAttributeAssignment<span class="delimiter">]</span> =
      <a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32415" title="(q: org.squeryl.Queryable[A], visitor: A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">mapSampleObject</a><span class="delimiter">(</span><a href="#52914" title="org.squeryl.Table[A]">table</a>, <a href="#52915" title="A =&gt; Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment]">declarations</a><span class="delimiter">)</span>

    // all fields that have a single 'is' declaration are first reset :
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="52946">ca</a> &lt;- <a href="#52916" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a> <span class="keyword">if</span> <a href="#52946" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#7656" title="org.squeryl.dsl.ast.ColumnAttributeAssignment">ColumnAttributeAssignment</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#52946" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#51968" title="=&gt; Unit">clearColumnAttributes</a>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="52964">ca</a> &lt;- <a href="#52916" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; AnyVal)Unit">colAss</a><span class="delimiter">)</span> <a href="#52964" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#424017" title="AnyVal" id="424018">dva</a>:DefaultValueAssignment    =&gt; <a href="#424023" title="(x: AnyVal)AnyVal" class="delimiter">{</a>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span> dva.<a href="dsl/ast/ExpressionNode.scala.html#52970" title="=&gt; org.squeryl.dsl.TypedExpression[_, _]">value</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#7660" title="org.squeryl.dsl.ast.ConstantTypedExpression[_, _]">ConstantTypedExpression</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;error in declaration of column &quot;)" class="string">&quot;error in declaration of column &quot;</span><span title="(x$1: Any)String">+</span> <a href="#52914" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#37963" title="=&gt; String">prefixedName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> dva.<a href="dsl/ast/ExpressionNode.scala.html#52968" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49696" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot;only constant expressions are supported in \'defaultsTo\' declaration&quot;)" class="string">&quot;only constant expressions are supported in 'defaultsTo' declaration&quot;</span><span class="delimiter">)</span>

        dva.<a href="dsl/ast/ExpressionNode.scala.html#52968" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49728" title="(x$1: Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]])Unit">_defaultValue</a> = <span title="(x: org.squeryl.dsl.ast.ConstantTypedExpression[_$30,_$31])Some[org.squeryl.dsl.ast.ConstantTypedExpression[_$30,_$31]]">Some</span><span class="delimiter">(</span>dva.<a href="dsl/ast/ExpressionNode.scala.html#52970" title="=&gt; org.squeryl.dsl.TypedExpression[_, _]">value</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.dsl.ast.ConstantTypedExpression[_$30,_$31]" class="delimiter">[</span><a href="dsl/ast/ExpressionNode.scala.html#7660" title="org.squeryl.dsl.ast.ConstantTypedExpression[_, _]">ConstantTypedExpression</a><span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="#424017" title="AnyVal" id="424019">caa</a>:ColumnAttributeAssignment =&gt; <a href="#424023" title="(x: AnyVal)AnyVal" class="delimiter">{</a>

        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="53047">ca</a> &lt;- caa.<a href="dsl/ast/ExpressionNode.scala.html#52937" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Unit">columnAttributes</a><span class="delimiter">)</span>
          <span class="delimiter">(</span>caa.<a href="dsl/ast/ExpressionNode.scala.html#52935" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49722" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#53047" title="org.squeryl.internals.ColumnAttribute">ca</a><span class="delimiter">)</span><span class="delimiter">)</span>

        //don't allow a KeyedEntity.id field to not have a uniqueness constraint :
        <span title="AnyVal" class="keyword">if</span><span class="delimiter">(</span><a href="#52964" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#51970" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          caa.<a href="dsl/ast/ExpressionNode.scala.html#52935" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49722" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#24319" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="#424017" title="AnyVal" id="424020">ctaa</a>:ColumnGroupAttributeAssignment =&gt; <a href="#424023" title="(x: AnyVal)AnyVal" class="delimiter">{</a>

        //don't allow a KeyedEntity.id field to not have a uniqueness constraint :
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#52964" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a>.<a href="dsl/ast/ExpressionNode.scala.html#51970" title="=&gt; Boolean">isIdFieldOfKeyedEntityWithoutUniquenessConstraint</a><span class="delimiter">)</span>
          ctaa.<a href="dsl/ast/ExpressionNode.scala.html#51986" title="(a: org.squeryl.internals.ColumnAttribute)Unit">addAttribute</a><span class="delimiter">(</span><a href="#24319" title="=&gt; org.squeryl.internals.PrimaryKey">primaryKey</a><span class="delimiter">)</span>

        <a href="#24316" title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span>ctaa<span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      <span class="keyword">case</span> <a href="#424017" title="AnyVal" id="424021">a</a>:Any =&gt; org.squeryl.internals.<a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><a href="#424023" title="(x: AnyVal)AnyVal" class="delimiter">(</a><span title="String(&quot;did not match on &quot;)" class="string">&quot;did not match on &quot;</span> <span title="(x$1: Any)String">+</span> a.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

//    for(ca &lt;- colAss.find(_.isIdFieldOfKeyedEntity))
//      assert(
//        ca.columnAttributes.exists(_.isInstanceOf[PrimaryKey]) ||
//        ca.columnAttributes.exists(_.isInstanceOf[Unique]),
//        &quot;Column 'id' of table '&quot; + table.name +
//        &quot;' must have a uniqueness constraint by having the column attribute 'primaryKey' or 'unique' to honor it's KeyedEntity trait&quot;
//      )


    // Validate that autoIncremented is not used on other fields than KeyedEntity[A].id :
    // since it is not yet unsupported :
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment" id="53115">ca</a> &lt;- <a href="#52916" title="(f: org.squeryl.dsl.ast.BaseColumnAttributeAssignment =&gt; Unit)Unit">colAss</a><span class="delimiter">)</span> <a href="#53115" title="org.squeryl.dsl.ast.BaseColumnAttributeAssignment">ca</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#424030" title="Unit" id="424031">cga</a>:CompositeKeyAttributeAssignment =&gt; <a href="#424035" title="(x: Unit)Unit" class="delimiter">{</a><span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="#424030" title="Unit" id="424032">caa</a>:ColumnAttributeAssignment =&gt; <span class="delimiter">{</span>
        <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="53142">ca</a> &lt;- caa.<a href="dsl/ast/ExpressionNode.scala.html#52937" title="(f: org.squeryl.internals.ColumnAttribute =&gt; Nothing)Unit">columnAttributes</a> <span class="keyword">if</span> <a href="#53142" title="org.squeryl.internals.ColumnAttribute">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="internals/ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span>caa.<a href="dsl/ast/ExpressionNode.scala.html#52935" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49726" title="=&gt; Boolean">isIdFieldOfKeyedEntity</a><span class="delimiter">)</span><span class="delimiter">)</span>
          org.squeryl.internals.<a href="internals/Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="internals/Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;Field &quot;)" class="string">&quot;Field &quot;</span> <span title="(x$1: Any)String">+</span> caa.<a href="dsl/ast/ExpressionNode.scala.html#52935" title="=&gt; org.squeryl.internals.FieldMetaData">left</a>.<a href="internals/FieldMetaData.scala.html#49696" title="=&gt; String">nameOfProperty</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; of table &quot;)" class="string">&quot; of table &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#52914" title="org.squeryl.Table[A]">table</a>.<a href="View.scala.html#37961" title="=&gt; String">name</a> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;)" class="string">&quot; is declared as autoIncremented, auto increment is currently only supported on KeyedEntity[A].id&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="#424030" title="Unit" id="424033">dva</a>:Any =&gt; <a href="#424035" title="(x: Unit)Unit" class="delimiter">{</a><span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cga: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment)Unit" id="24316">_addColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="53093">cga</a>: <a href="dsl/ast/ExpressionNode.scala.html#7654" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">)</span> =
    <a href="#24251" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.dsl.ast.ColumnGroupAttributeAssignment]">_columnGroupAttributeAssignments</a>.<span title="(elems: org.squeryl.dsl.ast.ColumnGroupAttributeAssignment*)Unit">append</span><span class="delimiter">(</span><a href="#53093" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">cga</a><span class="delimiter">)</span>;
  
  <span class="keyword">def</span> <a title="(typeOfIdField: Class[_])scala.collection.immutable.Set[_ &gt;: org.squeryl.internals.PrimaryKey &lt;: org.squeryl.internals.AttributeValidOnNumericalColumn with Product with Serializable]" id="24317">defaultColumnAttributesForKeyedEntityId</a><span class="delimiter">(</span><a title="Class[_]" id="53148">typeOfIdField</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="scala.collection.immutable.Set[_27]" class="keyword">if</span><span class="delimiter">(</span><a href="#53148" title="Class[_]">typeOfIdField</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[Long](classOf[java.lang.Long])" class="delimiter">[</span>java.lang.Long<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#53148" title="Class[_]">typeOfIdField</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[Integer](classOf[java.lang.Integer])" class="delimiter">[</span>java.lang.Integer<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(elems: org.squeryl.internals.AttributeValidOnNumericalColumn with Product with Serializable*)scala.collection.immutable.Set[org.squeryl.internals.AttributeValidOnNumericalColumn with Product with Serializable]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#8024" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a>, <span title="org.squeryl.internals.AutoIncremented" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="(elems: org.squeryl.internals.PrimaryKey*)scala.collection.immutable.Set[org.squeryl.internals.PrimaryKey]">Set</span><span class="delimiter">(</span><span title="org.squeryl.internals.PrimaryKey" class="keyword">new</span> <a href="internals/ColumnAttribute.scala.html#8024" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unique" id="24318">unique</a> = <a href="internals/ColumnAttribute.scala.html#56401" title="()org.squeryl.internals.Unique">Unique</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.PrimaryKey" id="24319">primaryKey</a> = <a href="internals/ColumnAttribute.scala.html#53080" title="()org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.AutoIncremented" id="24320">autoIncremented</a> = <a href="internals/ColumnAttribute.scala.html#56405" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sequenceName: String)org.squeryl.internals.AutoIncremented" id="24321">autoIncremented</a><span class="delimiter">(</span><a title="String" id="56411">sequenceName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#56405" title="(nameOfSequence: Option[String])org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#56411" title="String">sequenceName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Indexed" id="24322">indexed</a> = <a href="internals/ColumnAttribute.scala.html#52670" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(indexName: String)org.squeryl.internals.Indexed" id="24323">indexed</a><span class="delimiter">(</span><a title="String" id="56421">indexName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#52670" title="(nameOfIndex: Option[String])org.squeryl.internals.Indexed">Indexed</a><span class="delimiter">(</span><span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#56421" title="String">indexName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(declaration: String)org.squeryl.internals.DBType" id="24324">dbType</a><span class="delimiter">(</span><a title="String" id="56427">declaration</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#56430" title="(declaration: String)org.squeryl.internals.DBType">DBType</a><span class="delimiter">(</span><a href="#56427" title="String">declaration</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Uninsertable" id="24325">uninsertable</a> = <a href="internals/ColumnAttribute.scala.html#56443" title="()org.squeryl.internals.Uninsertable">Uninsertable</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.Unupdatable" id="24326">unupdatable</a> = <a href="internals/ColumnAttribute.scala.html#56449" title="()org.squeryl.internals.Unupdatable">Unupdatable</a><span class="delimiter">(</span><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)org.squeryl.internals.Named" id="24327">named</a><span class="delimiter">(</span><a title="String" id="56453">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="internals/ColumnAttribute.scala.html#56456" title="(name: String)org.squeryl.internals.Named">Named</a><span class="delimiter">(</span><a href="#56453" title="String">name</a><span class="delimiter">)</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.squeryl.internals.IsTransient" id="24328">transient</a> = <a href="internals/ColumnAttribute.scala.html#56464" title="()org.squeryl.internals.IsTransient">IsTransient</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class ColGroupDeclaration extends Object" id="24329">ColGroupDeclaration</a><a href="#24329" title="Schema.this.ColGroupDeclaration" class="delimiter">(</a><a title="Seq[org.squeryl.internals.FieldMetaData]" id="56472">cols</a>: <span title="Seq[org.squeryl.internals.FieldMetaData]">Seq</span><span class="delimiter">[</span>FieldMetaData<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(columnAttributes: org.squeryl.internals.AttributeValidOnMultipleColumn*)org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" id="56469">are</a><span class="delimiter">(</span><a title="org.squeryl.internals.AttributeValidOnMultipleColumn*" id="56473">columnAttributes</a>: <span title="org.squeryl.internals.AttributeValidOnMultipleColumn*">AttributeValidOnMultipleColumn</span>*<span class="delimiter">)</span> =
      <span title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment" class="keyword">new</span> <a href="dsl/ast/ExpressionNode.scala.html#7654" title="org.squeryl.dsl.ast.ColumnGroupAttributeAssignment">ColumnGroupAttributeAssignment</a><span class="delimiter">(</span><a href="#56472" title="Seq[org.squeryl.internals.FieldMetaData]">cols</a>, <a href="#56473" title="org.squeryl.internals.AttributeValidOnMultipleColumn*">columnAttributes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(fieldList: org.squeryl.dsl.TypedExpression[_, _]*)Schema.this.ColGroupDeclaration" id="24330">columns</a><span class="delimiter">(</span><a title="org.squeryl.dsl.TypedExpression[_, _]*" id="56476">fieldList</a>: <span title="org.squeryl.dsl.TypedExpression[_, _]*">TypedExpression</span><span class="delimiter">[</span>_,_<span class="delimiter">]</span>*<span class="delimiter">)</span> = <span title="Schema.this.ColGroupDeclaration" class="keyword">new</span> <a href="#24329" title="Schema.this.ColGroupDeclaration">ColGroupDeclaration</a><span class="delimiter">(</span><a href="#56476" title="org.squeryl.dsl.TypedExpression[_, _]*">fieldList</a>.<span title="(f: org.squeryl.dsl.TypedExpression[_, _] =&gt; org.squeryl.internals.FieldMetaData)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.dsl.TypedExpression[_, _]],org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]])Seq[org.squeryl.internals.FieldMetaData]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.FieldMetaData,Seq[org.squeryl.internals.FieldMetaData]]" class="delimiter">(</span><a href="#56497" title="org.squeryl.dsl.TypedExpression[_, _]">_</a>.<a href="dsl/TypedExpression.scala.html#31895" title="=&gt; org.squeryl.internals.FieldMetaData">_fieldMetaData</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // POSO Life Cycle Callbacks :

  <span class="keyword">def</span> <a title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]" id="24331">callbacks</a>: <span title="Seq[org.squeryl.internals.LifecycleEvent]">Seq</span><span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>

////2.9.x approach for LyfeCycle events :
//  def delayedInit(body: =&gt; Unit) = {
//
//    body
//
//    (for(cb &lt;- callbacks; t &lt;- cb.target) yield (t, cb))
//    .groupBy(_._1)
//    .mapValues(_.map(_._2))
//    .foreach(
//     (t:Tuple2[View[_],Seq[LifecycleEvent]]) =&gt; {
//       t._1._callbacks = new LifecycleEventInvoker(t._2, t._1)
//     }
//    )
//  }

////2.8.x approach for LyfeCycle events :
  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="24333">_callbacks</a>: <span title="Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">Map</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]" id="56673">m</a> =
      <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.LifecycleEvent" id="56701">cb</a> &lt;- <a href="#24331" title="(f: org.squeryl.internals.LifecycleEvent =&gt; scala.collection.GenTraversableOnce[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.squeryl.internals.LifecycleEvent],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">callbacks</a>; <a title="org.squeryl.View[_]" id="56720">t</a> &lt;- <a href="#56701" title="org.squeryl.internals.LifecycleEvent">cb</a>.<a href="internals/PosoLifecycleEvent.scala.html#56663" title="(f: org.squeryl.View[_] =&gt; (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 })(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[org.squeryl.View[_]],(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 },Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]])Traversable[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">target</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span title="(_1: org.squeryl.View[_$7], _2: org.squeryl.internals.LifecycleEvent)(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent)" class="delimiter">(</span><a href="#56720" title="org.squeryl.View[_]">t</a>, <a href="#56701" title="org.squeryl.internals.LifecycleEvent">cb</a><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.View[_])scala.collection.immutable.Map[org.squeryl.View[_],Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]]">groupBy</span><span class="delimiter">(</span><a href="#56822" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="=&gt; org.squeryl.View[_$7]">_1</span><span class="delimiter">)</span>
      .<span title="(f: Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }] =&gt; Seq[org.squeryl.internals.LifecycleEvent])scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]]">mapValues</span><span class="delimiter">(</span><a href="#56856" title="Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }]">_</a>.<span title="(f: (org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 } =&gt; org.squeryl.internals.LifecycleEvent)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }],org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]])Seq[org.squeryl.internals.LifecycleEvent]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.squeryl.internals.LifecycleEvent,Seq[org.squeryl.internals.LifecycleEvent]]" class="delimiter">(</span><a href="#56873" title="(org.squeryl.View[_$7], org.squeryl.internals.LifecycleEvent) forSome { type _$7 }">_</a>.<span title="=&gt; org.squeryl.internals.LifecycleEvent">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<span title="(f: ((org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])) =&gt; (org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.squeryl.View[_],Seq[org.squeryl.internals.LifecycleEvent]],(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map.Coll,(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]]" class="delimiter">(</span>
       <span class="delimiter">(</span>t:<span title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">Tuple2</span><span class="delimiter">[</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,Seq<span class="delimiter">[</span>LifecycleEvent<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
         <span title="(_1: org.squeryl.View[_$36], _2: org.squeryl.internals.LifecycleEventInvoker)(org.squeryl.View[_$36], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span><a href="#56976" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span>, <span title="org.squeryl.internals.LifecycleEventInvoker" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8128" title="org.squeryl.internals.LifecycleEventInvoker">LifecycleEventInvoker</a><span class="delimiter">(</span><a href="#56976" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; Seq[org.squeryl.internals.LifecycleEvent]">_2</span>, <a href="#56976" title="(org.squeryl.View[_], Seq[org.squeryl.internals.LifecycleEvent])">t</a>.<span title="=&gt; org.squeryl.View[_]">_1</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)" class="delimiter">(</span>View<span class="delimiter">[</span>_<span class="delimiter">]</span>,LifecycleEventInvoker<span class="delimiter">)</span>
       <span class="delimiter">}</span><span class="delimiter">)</span>
      .<span title="(implicit ev: &lt;:&lt;[(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker),(org.squeryl.View[_], org.squeryl.internals.LifecycleEventInvoker)])scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">toMap</span>
    <a href="#56673" title="scala.collection.immutable.Map[org.squeryl.View[_],org.squeryl.internals.LifecycleEventInvoker]">m</a>
  <span class="delimiter">}</span>

  <span class="keyword">import</span> internals.<a href="internals/PosoLifecycleEvent.scala.html#8126" title="org.squeryl.internals.PosoLifecycleEvent.type">PosoLifecycleEvent</a>._

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24335">beforeInsert</a><span class="delimiter">[</span><a title="" id="24337">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57582">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57582" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57566" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24338">beforeInsert</a><span class="delimiter">[</span><a title="" id="24340">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57607">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57607" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57566" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24341">beforeUpdate</a><span class="delimiter">[</span><a title="" id="24343">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57625">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57625" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57574" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24344">beforeUpdate</a><span class="delimiter">[</span><a title="" id="24346">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57632">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57632" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57574" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])(implicit ev: org.squeryl.KeyedEntityDef[A, _])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24347">beforeDelete</a><span class="delimiter">[</span><a title="" id="24349">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57636">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.squeryl.KeyedEntityDef[A, _]" id="57637">ev</a> : <a href="KeyedEntity.scala.html#7120" title="org.squeryl.KeyedEntityDef[A, _]">KeyedEntityDef</a><span class="delimiter">[</span>A,_<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57636" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57570" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[K, A]()(implicit m: scala.reflect.Manifest[A], implicit ked: org.squeryl.KeyedEntityDef[A,K])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24350">beforeDelete</a><span class="delimiter">[</span><a title="" id="24353">K</a>, <a title="" id="24354">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57649">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="org.squeryl.KeyedEntityDef[A,K]" id="57650">ked</a>: <a href="KeyedEntity.scala.html#7120" title="org.squeryl.KeyedEntityDef[A,K]">KeyedEntityDef</a><span class="delimiter">[</span>A,K<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57649" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57570" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">BeforeDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24355">afterInsert</a><span class="delimiter">[</span><a title="" id="24357">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57655">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57655" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57568" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24358">afterInsert</a><span class="delimiter">[</span><a title="" id="24360">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57662">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57662" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57568" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterInsert</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24361">afterUpdate</a><span class="delimiter">[</span><a title="" id="24363">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57666">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57666" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57576" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24364">afterUpdate</a><span class="delimiter">[</span><a title="" id="24366">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57673">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57673" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57576" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterUpdate</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](t: org.squeryl.Table[A])org.squeryl.internals.LifecycleEventPercursorTable[A]" id="24367">afterDelete</a><span class="delimiter">[</span><a title="" id="24369">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57677">t</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8132" title="org.squeryl.internals.LifecycleEventPercursorTable[A]">LifecycleEventPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57677" title="org.squeryl.Table[A]">t</a>, <a href="internals/PosoLifecycleEvent.scala.html#57572" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A]()(implicit m: scala.reflect.Manifest[A])org.squeryl.internals.LifecycleEventPercursorClass[A]" id="24370">afterDelete</a><span class="delimiter">[</span><a title="" id="24372">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[A]" id="57684">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.LifecycleEventPercursorClass[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8134" title="org.squeryl.internals.LifecycleEventPercursorClass[A]">LifecycleEventPercursorClass</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57684" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span>, <a href="#7184" title="org.squeryl.Schema" class="keyword">this</a>, <a href="internals/PosoLifecycleEvent.scala.html#57572" title="=&gt; org.squeryl.internals.PosoLifecycleEvent.Value">AfterDelete</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[A](table: org.squeryl.Table[A])org.squeryl.internals.PosoFactoryPercursorTable[A]" id="24373">factoryFor</a><span class="delimiter">[</span><a title="" id="24375">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.squeryl.Table[A]" id="57688">table</a>: <a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="org.squeryl.internals.PosoFactoryPercursorTable[A]" class="keyword">new</span> <a href="internals/PosoLifecycleEvent.scala.html#8130" title="org.squeryl.internals.PosoFactoryPercursorTable[A]">PosoFactoryPercursorTable</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#57688" title="org.squeryl.Table[A]">table</a><span class="delimiter">)</span>

  /**
   * Creates a ActiveRecord instance for the given the object. That allows the user
   * to save the given object using the Active Record pattern.
   *
   * @return a instance of ActiveRecord associated to the given object.
   */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](a: A)(implicit queryDsl: org.squeryl.dsl.QueryDsl, implicit m: scala.reflect.Manifest[A])Schema.this.ActiveRecord[A]" id="24376">anyRef2ActiveTransaction</a><span class="delimiter">[</span><a title="" id="24378">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="57698">a</a>: <a href="#24378" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.squeryl.dsl.QueryDsl" id="57699">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#7512" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="57700">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =
    <span title="Schema.this.ActiveRecord[A]" class="keyword">new</span> <a href="#24379" title="Schema.this.ActiveRecord[A]">ActiveRecord</a><span class="delimiter">(</span><a href="#57698" title="A">a</a>, <a href="#57699" title="org.squeryl.dsl.QueryDsl">queryDsl</a>, <a href="#57700" title="scala.reflect.Manifest[A]">m</a><span class="delimiter">)</span>

  /**
   * Active Record pattern implementation. Enables the user to insert an object in its
   * existent table with a convenient {{{save}}} method.
   */
  <span class="keyword">class</span> <a title="class ActiveRecord[A] extends Object" id="24379">ActiveRecord</a><span class="delimiter">[</span><a title="" id="24380">A</a><span class="delimiter">]</span><a href="#24379" title="Schema.this.ActiveRecord[A]" class="delimiter">(</a><a title="A" id="57712">a</a>: <a href="#24380" title="A">A</a>, <a title="org.squeryl.dsl.QueryDsl" id="57713">queryDsl</a>: <a href="dsl/QueryDsl.scala.html#7512" title="org.squeryl.dsl.QueryDsl">QueryDsl</a>, <a title="scala.reflect.Manifest[A]" id="57714">m</a>: <span title="scala.reflect.Manifest[A]">Manifest</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]" id="57708">_performAction</a><span class="delimiter">(</span><a title="org.squeryl.Table[A] =&gt; Unit" id="57728">action</a>: <span class="delimiter">(</span>Table<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> =
      <a href="#24245" title="=&gt; scala.collection.mutable.HashMap[Class[_],org.squeryl.Table[_]]">_tableTypes</a> <span title="(key: Class[_])Option[org.squeryl.Table[_]]">get</span> <span class="delimiter">(</span><a href="#57714" title="scala.reflect.Manifest[A]">m</a>.<span title="=&gt; Class[_]">erasure</span><span class="delimiter">)</span> <span title="(f: org.squeryl.Table[_] =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> table: <a href="Table.scala.html#7209" title="org.squeryl.Table[_]">Table</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
        <a href="#57713" title="org.squeryl.dsl.QueryDsl">queryDsl</a> <a href="dsl/QueryDsl.scala.html#24543" title="(a: =&gt; Unit)Unit">inTransaction</a> <span class="delimiter">(</span><a href="#57728" title="(v1: org.squeryl.Table[A])Unit">action</a><span class="delimiter">(</span><a href="#57745" title="org.squeryl.Table[_]">table</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.Table[A]" class="delimiter">[</span><a href="Table.scala.html#7209" title="org.squeryl.Table[A]">Table</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    
    /**
     * Same as {{{table.insert(a)}}}
     */
    <span class="keyword">def</span> <a title="=&gt; Option[Unit]" id="57709">save</a> =
      <a href="#57708" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#57847" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#37997" title="(t: A)A">insert</a><span title="Unit" class="delimiter">(</span><a href="#57712" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

    /**
     * Same as {{{table.update(a)}}}
     */  
    <span class="keyword">def</span> <a title="(implicit ked: org.squeryl.KeyedEntityDef[A, _])Option[Unit]" id="57710">update</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.squeryl.KeyedEntityDef[A, _]" id="57856">ked</a>: <a href="KeyedEntity.scala.html#7120" title="org.squeryl.KeyedEntityDef[A, _]">KeyedEntityDef</a><span class="delimiter">[</span>A,_<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#57708" title="(action: org.squeryl.Table[A] =&gt; Unit)Option[Unit]">_performAction</a><span class="delimiter">(</span><a href="#57858" title="org.squeryl.Table[A]">_</a>.<a href="Table.scala.html#38001" title="(o: A)(implicit ked: org.squeryl.KeyedEntityDef[A, _])Unit">update</a><a href="#57856" title="org.squeryl.KeyedEntityDef[A, _]" class="delimiter">(</a><a href="#57712" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
  <span class="delimiter">}</span>

<span title="Object" class="delimiter">}</span>

        </pre>
    </body>
</html>