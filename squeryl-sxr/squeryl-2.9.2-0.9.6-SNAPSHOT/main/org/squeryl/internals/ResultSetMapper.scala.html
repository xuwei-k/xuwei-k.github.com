<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>main/org/squeryl/internals/ResultSetMapper.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */
<span class="keyword">package</span> org.squeryl.internals

<span class="keyword">import</span> java.sql.ResultSet
<span class="keyword">import</span> collection.mutable.ArrayBuffer
<span class="keyword">import</span> org.squeryl.dsl.ast.SelectElement



<span class="keyword">trait</span> <a title="trait ResultSetUtils extends Object" id="8159">ResultSetUtils</a> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)String" id="35748">dumpRow</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="71167">rs</a>:<span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.ResultSetMetaData" id="71168">md</a> = <a href="#71167" title="java.sql.ResultSet">rs</a>.<span title="()java.sql.ResultSetMetaData">getMetaData</span>
   <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="71345">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],String,scala.collection.immutable.IndexedSeq[String]])scala.collection.immutable.IndexedSeq[String]">to</span> <a href="#71168" title="java.sql.ResultSetMetaData">md</a>.<span title="()Int">getColumnCount</span><span class="delimiter">)</span>
      <span class="keyword">yield</span> <span title="String(&quot;#&quot;)" class="string">&quot;#&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#71345" title="Int">i</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-&gt;&quot;)" class="string">&quot;-&gt;&quot;</span><span title="(x$1: Any)String">+</span><a href="#71167" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#71345" title="Int">i</a><span class="delimiter">)</span><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="#35749" title="(className: String)String">_simpleClassName</a><span class="delimiter">(</span><a href="#71168" title="java.sql.ResultSetMetaData">md</a>.<span title="(x$1: Int)String">getColumnClassName</span><span class="delimiter">(</span><a href="#71345" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    .<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;ResultSetRow:[&quot;)" class="string">&quot;ResultSetRow:[&quot;</span>,<span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(className: String)String" id="35749">_simpleClassName</a><span class="delimiter">(</span><a title="String" id="71356">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="71357">idx</a> = <a href="#71356" title="String">className</a>.<span title="(x$1: String)Int">lastIndexOf</span><span class="delimiter">(</span><span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
    <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#71357" title="Int">idx</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#71356" title="String">className</a>
    <span class="keyword">else</span>
      <a href="#71356" title="String">className</a>.<span title="(x$1: Int, x$2: Int)String">substring</span><span class="delimiter">(</span><a href="#71357" title="Int">idx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#71356" title="String">className</a>.<span title="()Int">length</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)String" id="35750">dumpRowValues</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103276">rs</a>:<span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.ResultSetMetaData" id="103277">md</a> = <a href="#103276" title="java.sql.ResultSet">rs</a>.<span title="()java.sql.ResultSetMetaData">getMetaData</span>
   <span class="delimiter">(</span><span class="keyword">for</span><span class="delimiter">(</span><a title="Int" id="103377">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],String,scala.collection.immutable.IndexedSeq[String]])scala.collection.immutable.IndexedSeq[String]">to</span> <a href="#103277" title="java.sql.ResultSetMetaData">md</a>.<span title="()Int">getColumnCount</span><span class="delimiter">)</span>
      <span class="keyword">yield</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span title="(x$1: Any)String">+</span><a href="#103276" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#103377" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;[&quot;)" class="string">&quot;[&quot;</span>,<span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>  
<span class="delimiter">}</span>

<span title="Object" class="keyword">object</span> <a title="org.squeryl.internals.ResultSetUtils.type" id="8160">ResultSetUtils</a> <a href="#8161" title="org.squeryl.internals.ResultSetUtils.type" class="keyword">extends</a> <a href="#8159" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a>


<span class="keyword">trait</span> <a title="trait OutMapper[T] extends Object with org.squeryl.internals.ResultSetUtils" id="8162">OutMapper</a><span class="delimiter">[</span><a title="" id="8163">T</a><span class="delimiter">]</span> <span title="Unit" class="keyword">extends</span> <a href="#8159" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="75831">toString</a> =
    <a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32398" title="(s: =&gt; String)String">failSafeString</a><span class="delimiter">(</span>
      <span title="String(&quot;$OM(&quot;)" class="string">&quot;$OM(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#75833" title="=&gt; Int">index</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span> <span title="(x$1: Any)String">+</span>
      <a href="#75838" title="=&gt; Class[_ &lt;: AnyRef]">jdbcClass</a>.<span title="()String">getSimpleName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span>
      <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#75836" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="Int" id="75833">index</a>: <span title="Int">Int</span> = -<span title="Int(-1)" class="int">1</span>

  <span class="keyword">var</span> <a title="Boolean" id="75836">isActive</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="=&gt; Class[_ &lt;: AnyRef]" id="75838">jdbcClass</a> =
    <a href="#75842" title="=&gt; T">sample</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#425103" title="Class[?0]" id="425104" class="delimiter">(</a><a href="#425104" title="Any" id="80788">x</a>:AnyRef<span class="delimiter">)</span> =&gt; x.<a href="#425110" title="(x: Class[?0])Class[?0]">getClass</a>
      <span class="keyword">case</span> <a href="#425103" title="Class[?0]" id="425108">x</a>:AnyRef  =&gt; x.<a href="#425110" title="(x: Class[?0])Class[?0]">getClass</a>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)T" id="75839">map</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103428">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#8163" title="T">T</a> =
    <span title="T" class="keyword">if</span><span class="delimiter">(</span><a href="#75836" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#75841" title="(rs: java.sql.ResultSet)T">doMap</a><span class="delimiter">(</span><a href="#103428" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="103430">e</a>:<span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String, x$2: Throwable)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span>
            <span title="String(&quot;Exception while mapping column with OutMapper:\n&quot;)" class="string">&quot;Exception while mapping column with OutMapper:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#8162" title="org.squeryl.internals.OutMapper[T]" class="keyword">this</a> <span title="(x$1: Any)String">+</span> 
            <span title="String(&quot;\nand resultSet :\n&quot;)" class="string">&quot;\nand resultSet :\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32398" title="(s: =&gt; String)String">failSafeString</a><span class="delimiter">(</span><a href="#35748" title="(rs: java.sql.ResultSet)String">dumpRow</a><span class="delimiter">(</span><a href="#103428" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>, 
            <a href="#103430" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <a href="#75842" title="=&gt; T">sample</a>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Boolean" id="75840">isNull</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103436">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> =
    <a href="#103436" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#75833" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)T" id="75841">doMap</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="80803">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#8163" title="T">T</a>

  <span class="keyword">def</span> <a title="=&gt; T" id="75842">sample</a>: <a href="#8163" title="T">T</a>

  <span class="keyword">def</span> <a title="=&gt; String" id="75843">typeOfExpressionToString</a> = <a href="#75842" title="=&gt; T">sample</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Object" class="delimiter">[</span><span title="Object">Object</span><span class="delimiter">]</span>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="org.squeryl.internals.NoOpOutMapper.type" id="8164">NoOpOutMapper</a> <a href="#8165" title="org.squeryl.internals.NoOpOutMapper.type" class="keyword">extends</a> <a href="#8162" title="org.squeryl.internals.OutMapper[Any]">OutMapper</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Nothing" id="81316">doMap</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103455">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <a href="#81317" title="=&gt; Nothing">sample</a>

  <span class="keyword">def</span> <a title="=&gt; Nothing" id="81317">sample</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="String(&quot; cannot use NoOpOutMapper&quot;)" class="string">&quot; cannot use NoOpOutMapper&quot;</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="81318">typeOfExpressionToString</a> = <span title="String(&quot;NoOpOutMapper&quot;)" class="string">&quot;NoOpOutMapper&quot;</span>  
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ColumnToFieldMapper extends Object" id="8166">ColumnToFieldMapper</a><a href="#8166" title="org.squeryl.internals.ColumnToFieldMapper" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="82773">index</a>: <span title="Int">Int</span>, <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMetaData" id="82774">fieldMetaData</a>: <a href="FieldMetaData.scala.html#8086" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>, <a title="org.squeryl.dsl.ast.SelectElement" id="82775">selectElement</a>: <a href="../dsl/ast/SelectElement.scala.html#7710" title="org.squeryl.dsl.ast.SelectElement">SelectElement</a><span class="delimiter">)</span>  <span class="delimiter">{</span>

  <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#82773" title="=&gt; Int">index</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;invalid Jdbc index &quot;)" class="string">&quot;invalid Jdbc index &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#82773" title="=&gt; Int">index</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(obj: AnyRef, rs: java.sql.ResultSet)Unit" id="82771">map</a><span class="delimiter">(</span><a title="AnyRef" id="103476">obj</a>: <span title="AnyRef">AnyRef</span>, <a title="java.sql.ResultSet" id="103477">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#82775" title="org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/SelectElement.scala.html#56555" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#82774" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#49751" title="(target: AnyRef, rs: java.sql.ResultSet, index: Int)Unit">setFromResultSet</a><span class="delimiter">(</span><a href="#103476" title="AnyRef">obj</a>, <a href="#103477" title="java.sql.ResultSet">rs</a>, <a href="#82773" title="=&gt; Int">index</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="82772">toString</a> =
    <span title="String(&quot;$(&quot;)" class="string">&quot;$(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#82773" title="=&gt; Int">index</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-&gt;&quot;)" class="string">&quot;-&gt;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#82774" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class ColumnToTupleMapper extends Object" id="8167">ColumnToTupleMapper</a><a href="#8167" title="org.squeryl.internals.ColumnToTupleMapper" class="delimiter">(</a><span class="keyword">val</span> <a title="Array[org.squeryl.internals.OutMapper[_]]" id="92758">outMappers</a>: <span title="Array[org.squeryl.internals.OutMapper[_]]">Array</span><span class="delimiter">[</span>OutMapper<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="82663">toString</a> = <a href="#92758" title="(xs: Array[org.squeryl.internals.OutMapper[_]])scala.collection.mutable.ArrayOps[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>,<span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span> 

  <span class="keyword">def</span> <a title="(idx: Int)String" id="82664">typeOfExpressionToString</a><span class="delimiter">(</span><a title="Int" id="82681">idx</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#92758" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#82681" title="Int">idx</a><span class="delimiter">)</span>.<a href="#75843" title="=&gt; String">typeOfExpressionToString</a>

  <span class="keyword">def</span> <a title="(i: Int, jdbcIndex: Int)Unit" id="82665">activate</a><span class="delimiter">(</span><a title="Int" id="82699">i</a>: <span title="Int">Int</span>, <a title="Int" id="82700">jdbcIndex</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.squeryl.internals.OutMapper[_]" id="82701">m</a> = <a href="#92758" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#82699" title="Int">i</a><span class="delimiter">)</span>
    <a href="#82701" title="org.squeryl.internals.OutMapper[_]">m</a>.<a href="#75836" title="(x$1: Boolean)Unit">isActive</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#82701" title="org.squeryl.internals.OutMapper[_]">m</a>.<a href="#75833" title="(x$1: Int)Unit">index</a> = <a href="#82700" title="Int">jdbcIndex</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(i: Int)Boolean" id="82666">isActive</a><span class="delimiter">(</span><a title="Int" id="103617">i</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#92758" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#103617" title="Int">i</a><span class="delimiter">)</span>.<a href="#75836" title="=&gt; Boolean">isActive</a>

  <span class="keyword">def</span> <a title="(i: Int, rs: java.sql.ResultSet)Boolean" id="82667">isNull</a><span class="delimiter">(</span><a title="Int" id="103619">i</a>:<span title="Int">Int</span>, <a title="java.sql.ResultSet" id="103620">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <a href="#92758" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="(i: Int)org.squeryl.internals.OutMapper[_]">apply</span><span class="delimiter">(</span><a href="#103619" title="Int">i</a><span class="delimiter">)</span>.<a href="#75840" title="(rs: java.sql.ResultSet)Boolean">isNull</a><span class="delimiter">(</span><a href="#103620" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="[T](rs: java.sql.ResultSet)T" id="82668">mapToTuple</a><span class="delimiter">[</span><a title="" id="82670">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.ResultSet" id="93391">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <a href="#82670" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="103622">size</a> = <a href="#92758" title="(xs: Array[org.squeryl.internals.OutMapper[_]])scala.collection.mutable.ArrayOps[org.squeryl.internals.OutMapper[_]]">outMappers</a>.<span title="=&gt; Int">size</span>
    <span class="keyword">val</span> <a title="Array[org.squeryl.internals.OutMapper[_]]" id="103623">m</a> = <a href="#92758" title="=&gt; Array[org.squeryl.internals.OutMapper[_]]">outMappers</a>
    <span class="keyword">val</span> <a title="Any" id="103624">res</a> = <a href="#103622" title="Int">size</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425130" class="int">1</a> =&gt; <span class="delimiter">(</span><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425131" class="int">2</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425132" class="int">3</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425133" class="int">4</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425134" class="int">5</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425135" class="int">6</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425136" class="int">7</a> =&gt; <a href="#425139" title="(x: Any)Any" class="delimiter">(</a><a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>, <a href="#103623" title="(i: Int)org.squeryl.internals.OutMapper[_]">m</a><span class="delimiter">(</span><span title="Int(6)" class="int">6</span><span class="delimiter">)</span>.<a href="#75839" title="(rs: java.sql.ResultSet)_$1">map</a><span class="delimiter">(</span><a href="#93391" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      //TODO: implement tuples results of size up to 22
      <span class="keyword">case</span> <a href="#425115" title="Any" id="425137">z</a>:Any =&gt; org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><a href="#425139" title="(x: Any)Any" class="delimiter">(</a><span title="String(&quot;tuples of size &quot;)" class="string">&quot;tuples of size &quot;</span><span title="(x$1: Any)String">+</span><a href="#103622" title="Int">size</a><span title="(x$1: Any)String">+</span><span title="String(&quot; and greater are not supported&quot;)" class="string">&quot; and greater are not supported&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <a href="#103624" title="Any">res</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#82670" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class ResultSetMapper extends Object with org.squeryl.internals.ResultSetUtils" id="8168">ResultSetMapper</a> <a href="#8168" title="org.squeryl.internals.ResultSetMapper" class="keyword">extends</a> <a href="#8159" title="org.squeryl.internals.ResultSetUtils">ResultSetUtils</a> <span class="delimiter">{</span>  

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]" id="35752">_yieldValuePushers</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]">ArrayBuffer</span><span class="delimiter">[</span>YieldValuePusher<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]" id="35754">_fieldMapper</a> = <span title="()scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]" class="keyword">new</span> <span title="scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">ArrayBuffer</span><span class="delimiter">[</span>ColumnToFieldMapper<span class="delimiter">]</span>

  <span class="keyword">var</span> <a title="Option[org.squeryl.internals.ColumnToTupleMapper]" id="35757">groupKeysMapper</a>: <span title="Option[org.squeryl.internals.ColumnToTupleMapper]">Option</span><span class="delimiter">[</span>ColumnToTupleMapper<span class="delimiter">]</span> = <span title="None.type">None</span>

  <span class="keyword">var</span> <a title="Option[org.squeryl.internals.ColumnToTupleMapper]" id="35760">groupMeasuresMapper</a>: <span title="Option[org.squeryl.internals.ColumnToTupleMapper]">Option</span><span class="delimiter">[</span>ColumnToTupleMapper<span class="delimiter">]</span> = <span title="None.type">None</span>
  
//  val createTrace = {
//    new Exception().getStackTrace.map(s=&gt;s.toString).mkString(&quot;\n&quot;)
//  }

  <span class="keyword">var</span> <a title="Boolean" id="35763">isActive</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="35765">toString</a> =
    <span title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="symbol">'ResultSetMapper</span> <span title="(other: String)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <span title="Integer.type">Integer</span>.<span title="(x$1: Int)String">toHexString</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="(x$1: Any)Int">identityHashCode</span><span class="delimiter">(</span><a href="#8168" title="org.squeryl.internals.ResultSetMapper" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
     <a href="#35754" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>,<span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>,<span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
    <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#35757" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupKeysMapper</a>.<span title="(default: =&gt; Object)Object">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
    <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#35760" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupMeasuresMapper</a>.<span title="(default: =&gt; Object)Object">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
    <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#35763" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(cm: org.squeryl.internals.ColumnToFieldMapper)Unit" id="35766">addColumnMapper</a><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="82785">cm</a>: <a href="#8166" title="org.squeryl.internals.ColumnToFieldMapper">ColumnToFieldMapper</a><span class="delimiter">)</span> =
    <a href="#35754" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(elems: org.squeryl.internals.ColumnToFieldMapper*)Unit">append</span><span class="delimiter">(</span><a href="#82785" title="org.squeryl.internals.ColumnToFieldMapper">cm</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(yvp: org.squeryl.internals.YieldValuePusher)Unit" id="35767">addYieldValuePusher</a><span class="delimiter">(</span><a title="org.squeryl.internals.YieldValuePusher" id="82891">yvp</a>: <a href="#8169" title="org.squeryl.internals.YieldValuePusher">YieldValuePusher</a><span class="delimiter">)</span> =
    <a href="#35752" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.YieldValuePusher]">_yieldValuePushers</a>.<span title="(elems: org.squeryl.internals.YieldValuePusher*)Unit">append</span><span class="delimiter">(</span><a href="#82891" title="org.squeryl.internals.YieldValuePusher">yvp</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(resultSet: java.sql.ResultSet)Unit" id="35768">pushYieldedValues</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="70171">resultSet</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>:<span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#35763" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span>

    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.YieldValuePusher" id="103903">yvp</a> &lt;- <a href="#35752" title="(f: org.squeryl.internals.YieldValuePusher =&gt; Unit)Unit">_yieldValuePushers</a><span class="delimiter">)</span>
      <a href="#103903" title="org.squeryl.internals.YieldValuePusher">yvp</a>.<a href="#82860" title="(rs: java.sql.ResultSet)Unit">push</a><span class="delimiter">(</span><a href="#70171" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnToFieldMapper]" id="35770">_firstNonOption</a>: <span title="Option[org.squeryl.internals.ColumnToFieldMapper]">Option</span><span class="delimiter">[</span>ColumnToFieldMapper<span class="delimiter">]</span> =
    <a href="#35754" title="=&gt; scala.collection.mutable.ArrayBuffer[org.squeryl.internals.ColumnToFieldMapper]">_fieldMapper</a>.<span title="(p: org.squeryl.internals.ColumnToFieldMapper =&gt; Boolean)Option[org.squeryl.internals.ColumnToFieldMapper]">find</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#103917" title="org.squeryl.internals.ColumnToFieldMapper">_</a>.<a href="#82774" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#49704" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Boolean" id="35771">isNoneInOuterJoin</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="71724">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>

    //decide based on the nullity of the first non Option field :

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#35769" title="=&gt; Option[org.squeryl.internals.ColumnToFieldMapper]">_firstNonOption</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#71724" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#35769" title="=&gt; Option[org.squeryl.internals.ColumnToFieldMapper]">_firstNonOption</a>.<span title="=&gt; org.squeryl.internals.ColumnToFieldMapper">get</span>.<a href="#82773" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>

    //if we get here all fields are optional, decide on the first Option that is not null :    
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="103957">c2fm</a> &lt;- <a href="#35754" title="(f: org.squeryl.internals.ColumnToFieldMapper =&gt; Unit)Unit">_fieldMapper</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#103957" title="org.squeryl.internals.ColumnToFieldMapper">c2fm</a>.<a href="#82774" title="=&gt; org.squeryl.internals.FieldMetaData">fieldMetaData</a>.<a href="FieldMetaData.scala.html#49704" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#71724" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#103957" title="org.squeryl.internals.ColumnToFieldMapper">c2fm</a>.<a href="#82773" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    //outMappers
    <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToTupleMapper" id="104079">col2TupleMapper</a> &lt;- <span title="(xs: Option[org.squeryl.internals.ColumnToTupleMapper]*)List[Option[org.squeryl.internals.ColumnToTupleMapper]]">List</span><span class="delimiter">(</span><a href="#35757" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupKeysMapper</a>, <a href="#35760" title="=&gt; Option[org.squeryl.internals.ColumnToTupleMapper]">groupMeasuresMapper</a><span class="delimiter">)</span>.<span title="(p: Option[org.squeryl.internals.ColumnToTupleMapper] =&gt; Boolean)List[Option[org.squeryl.internals.ColumnToTupleMapper]]">filter</span><span class="delimiter">(</span><a href="#103994" title="Option[org.squeryl.internals.ColumnToTupleMapper]">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>.<span title="(f: Option[org.squeryl.internals.ColumnToTupleMapper] =&gt; org.squeryl.internals.ColumnToTupleMapper)(implicit bf: scala.collection.generic.CanBuildFrom[List[Option[org.squeryl.internals.ColumnToTupleMapper]],org.squeryl.internals.ColumnToTupleMapper,List[org.squeryl.internals.ColumnToTupleMapper]])List[org.squeryl.internals.ColumnToTupleMapper]">map</span><span title="(f: org.squeryl.internals.ColumnToTupleMapper =&gt; Unit)Unit" class="delimiter">(</span><a href="#104018" title="Option[org.squeryl.internals.ColumnToTupleMapper]">_</a>.<span title="=&gt; org.squeryl.internals.ColumnToTupleMapper">get</span><span class="delimiter">)</span>;
        <a title="org.squeryl.internals.OutMapper[_]" id="104839">outMapper</a> &lt;- <a href="#104079" title="org.squeryl.internals.ColumnToTupleMapper">col2TupleMapper</a>.<a href="#92758" title="(f: org.squeryl.internals.OutMapper[_] =&gt; Unit)Unit">outMappers</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#104839" title="org.squeryl.internals.OutMapper[_]">outMapper</a>.<a href="#75836" title="=&gt; Boolean">isActive</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#71724" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Object">getObject</span><span class="delimiter">(</span><a href="#104839" title="org.squeryl.internals.OutMapper[_]">outMapper</a>.<a href="#75833" title="=&gt; Int">index</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    // if we get here we have matched on a row wit all nulls OR we haven't matched,
    // this is an extreme corner case, we will return None, in reality we should
    // sometimes return a Some with all fields None
    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(o: AnyRef, resultSet: java.sql.ResultSet)Unit" id="35772">map</a><span class="delimiter">(</span><a title="AnyRef" id="65624">o</a>: <span title="AnyRef">AnyRef</span>, <a title="java.sql.ResultSet" id="65625">resultSet</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span>:<span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#35763" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnToFieldMapper" id="104876">fm</a> &lt;- <a href="#35754" title="(f: org.squeryl.internals.ColumnToFieldMapper =&gt; Unit)Unit">_fieldMapper</a><span class="delimiter">)</span>
        <a href="#104876" title="org.squeryl.internals.ColumnToFieldMapper">fm</a>.<a href="#82771" title="(obj: AnyRef, rs: java.sql.ResultSet)Unit">map</a><span class="delimiter">(</span><a href="#65624" title="AnyRef">o</a>, <a href="#65625" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span>      
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="104878">e</a>:<span title="Exception">Exception</span>=&gt; <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String, x$2: Throwable)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;could not map row :\n&quot;)" class="string">&quot;could not map row :\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#35748" title="(rs: java.sql.ResultSet)String">dumpRow</a><span class="delimiter">(</span><a href="#65625" title="java.sql.ResultSet">resultSet</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n with mapper :\n&quot;)" class="string">&quot;\n with mapper :\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#8168" title="org.squeryl.internals.ResultSetMapper" class="keyword">this</a>, <a href="#104878" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class YieldValuePusher extends Object" id="8169">YieldValuePusher</a><a href="#8169" title="org.squeryl.internals.YieldValuePusher" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="82867">index</a>: <span title="Int">Int</span>, <span class="keyword">val</span> <a title="org.squeryl.dsl.ast.SelectElement" id="82868">selectElement</a>: <a href="../dsl/ast/SelectElement.scala.html#7710" title="org.squeryl.dsl.ast.SelectElement">SelectElement</a>, <a title="org.squeryl.internals.OutMapper[_]" id="82869">mapper</a>: <a href="#8162" title="org.squeryl.internals.OutMapper[_]">OutMapper</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>  <span class="delimiter">{</span>


  <a href="#82869" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#75833" title="(x$1: Int)Unit">index</a> = <a href="#82867" title="=&gt; Int">index</a>
  <a href="#82869" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#75836" title="(x$1: Boolean)Unit">isActive</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">def</span> <a title="(rs: java.sql.ResultSet)Unit" id="82860">push</a><span class="delimiter">(</span><a title="java.sql.ResultSet" id="103904">rs</a>: <span title="java.sql.ResultSet">ResultSet</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#82868" title="=&gt; org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/SelectElement.scala.html#56555" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Any" id="103905">v</a> = <a href="#82869" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#75839" title="(rs: java.sql.ResultSet)_$2">map</a><span class="delimiter">(</span><a href="#103904" title="java.sql.ResultSet">rs</a><span class="delimiter">)</span>
      <a href="FieldReferenceLinker.scala.html#8099" title="org.squeryl.internals.FieldReferenceLinker.type">FieldReferenceLinker</a>.<a href="FieldReferenceLinker.scala.html#65024" title="(v: AnyRef)Unit">pushYieldValue</a><span class="delimiter">(</span><a href="#103905" title="Any">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="82861">toString</a> =
    <span title="String(&quot;$(&quot;)" class="string">&quot;$(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#82867" title="=&gt; Int">index</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-&gt;&amp;(&quot;)" class="string">&quot;-&gt;&amp;(&quot;</span><span title="(x$1: Any)String">+</span><a href="#82868" title="=&gt; org.squeryl.dsl.ast.SelectElement">selectElement</a>.<a href="../dsl/ast/ExpressionNode.scala.html#31645" title="=&gt; String">writeToString</a><span title="(x$1: Any)String">+</span><span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span>
    <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#82869" title="org.squeryl.internals.OutMapper[_]">mapper</a>.<a href="#75836" title="=&gt; Boolean">isActive</a><span class="delimiter">)</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>