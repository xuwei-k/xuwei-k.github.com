<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>main/org/squeryl/internals/FieldMetaData.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*******************************************************************************
 * Copyright 2010 Maxime LÃ©vesque
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ***************************************************************************** */
<span class="keyword">package</span> org.squeryl.internals

<span class="keyword">import</span> java.lang.annotation.Annotation
<span class="keyword">import</span> java.lang.reflect.<span class="delimiter">{</span>Field, Method, Constructor, InvocationTargetException, Type, ParameterizedType<span class="delimiter">}</span>
<span class="keyword">import</span> java.sql.ResultSet
<span class="keyword">import</span> java.math.BigDecimal
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> org.squeryl.annotations.<span class="delimiter">{</span>ColumnBase, Column<span class="delimiter">}</span>
<span class="keyword">import</span> collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, ArrayBuffer<span class="delimiter">}</span>
<span class="keyword">import</span> org.squeryl.Session
<span class="keyword">import</span> org.squeryl.dsl.CompositeKey
<span class="keyword">import</span> org.squeryl.customtypes.CustomType
<span class="keyword">import</span> scala.tools.scalap.scalax.rules.scalasig.<span class="delimiter">{</span>ScalaSigAttributeParsers, ByteCode, ScalaSigPrinter<span class="delimiter">}</span>
<span class="keyword">import</span> java.io.ByteArrayOutputStream
<span class="keyword">import</span> java.io.PrintStream
<span class="keyword">import</span> java.lang.reflect.Member
<span class="keyword">import</span> scala.tools.scalap.scalax.rules.scalasig.ScalaSigParser
<span class="keyword">import</span> org.squeryl.dsl.ast.ConstantTypedExpression
<span class="keyword">import</span> org.squeryl.customtypes.CustomType

<span class="keyword">class</span> <a title="class FieldMetaData extends Object" id="8086">FieldMetaData</a><a href="#8086" title="org.squeryl.internals.FieldMetaData" class="delimiter">(</a>
        <span class="keyword">val</span> <a title="org.squeryl.internals.PosoMetaData[_]" id="49757">parentMetaData</a>: <a href="PosoMetaData.scala.html#8151" title="org.squeryl.internals.PosoMetaData[_]">PosoMetaData</a><span class="delimiter">[</span>_<span class="delimiter">]</span>,
        <span class="keyword">val</span> <a title="String" id="49758">nameOfProperty</a>:<span title="String">String</span>,
        <span class="keyword">val</span> <a title="Class[_]" id="49759">fieldType</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, // if isOption, this fieldType is the type param of Option, i.e. the T in Option[T]
        <span class="keyword">val</span> <a title="Class[_]" id="49760">wrappedFieldType</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, //in primitive type mode fieldType == wrappedFieldType, in custom type mode wrappedFieldType is the 'real'
        // type, i.e. the (primitive) type that jdbc understands
        <span class="keyword">val</span> <a title="Option[AnyRef =&gt; Product1[Any]]" id="49761">customTypeFactory</a>: <span title="Option[AnyRef =&gt; Product1[Any]]">Option</span><span class="delimiter">[</span>AnyRef =&gt; Product1<span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="keyword">with</span> AnyRef<span class="delimiter">]</span>,
        <span class="keyword">val</span> <a title="Boolean" id="49762">isOption</a>: <span title="Boolean">Boolean</span>,
        <a title="Option[java.lang.reflect.Method]" id="49763">getter</a>: <span title="Option[java.lang.reflect.Method]">Option</span><span class="delimiter">[</span>Method<span class="delimiter">]</span>,
        <a title="Option[java.lang.reflect.Method]" id="49764">setter</a>: <span title="Option[java.lang.reflect.Method]">Option</span><span class="delimiter">[</span>Method<span class="delimiter">]</span>,
        <a title="Option[java.lang.reflect.Field]" id="49765">field</a>:  <span title="Option[java.lang.reflect.Field]">Option</span><span class="delimiter">[</span>Field<span class="delimiter">]</span>,
        <a title="Option[org.squeryl.annotations.Column]" id="49766">columnAnnotation</a>: <span title="Option[org.squeryl.annotations.Column]">Option</span><span class="delimiter">[</span>Column<span class="delimiter">]</span>,
        <span class="keyword">val</span> <a title="Boolean" id="49767">isOptimisticCounter</a>: <span title="Boolean">Boolean</span>,
        <span class="keyword">val</span> <a title="Any" id="49768">sampleValue</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="=&gt; Class[_]" id="49715">nativeJdbcType</a> =
    <a href="#8086" title="FieldMetaData.this.type" class="keyword">this</a>.<a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24238" title="=&gt; org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25429" title="(c: Class[_])Class[_]">nativeJdbcTypeFor</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a><span class="delimiter">)</span>

  /**
   * None if this FieldMetaData is not an enumeration, Some(theParentEnumeration) otherwise
   */
  <span class="keyword">val</span> <a title="Option[Enumeration]" id="49716">enumeration</a>: <span title="Option[Enumeration]">Option</span><span class="delimiter">[</span>Enumeration<span class="delimiter">]</span> =
    <a href="#49768" title="=&gt; Any">sampleValue</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#424827" title="Option[Enumeration]" id="424828" class="delimiter">(</a><a href="#424828" title="Any" id="97009">e</a>: Enumeration#Value<span class="delimiter">)</span> =&gt; <span title="(x: Enumeration)Some[Enumeration]">Some</span><a href="#424832" title="(x: Option[Enumeration])Option[Enumeration]" class="delimiter">(</a><a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32421" title="(v: Enumeration#Value)Enumeration">enumerationForValue</a><span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#424827" title="Option[Enumeration]" id="424830">e</a>: Enumeration#Value =&gt; <span title="(x: Enumeration)Some[Enumeration]">Some</span><a href="#424832" title="(x: Option[Enumeration])Option[Enumeration]" class="delimiter">(</a><a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32421" title="(v: Enumeration#Value)Enumeration">enumerationForValue</a><span class="delimiter">(</span>e<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; <a href="#424832" title="(x: Option[Enumeration])Option[Enumeration]">None</a>
    <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(id: Int)Enumeration#Value" id="49718">canonicalEnumerationValueFor</a><span class="delimiter">(</span><a title="Int" id="63296">id</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
    <span title="Enumeration#Value" class="keyword">if</span><span class="delimiter">(</span><a href="#49768" title="=&gt; Any">sampleValue</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;classes with Enumerations must have a zero param constructor that assigns a sample to the enumeration field&quot;)" class="string">&quot;classes with Enumerations must have a zero param constructor that assigns a sample to the enumeration field&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="#49716" title="=&gt; Option[Enumeration]">enumeration</a> <span title="(f: Enumeration =&gt; Option[Enumeration#Value])Option[Enumeration#Value]">flatMap</span> <span class="delimiter">{</span> e: <span title="Enumeration">Enumeration</span> =&gt;
        <a href="#63301" title="Enumeration">e</a>.<span title="=&gt; e.ValueSet">values</span> <span title="(p: e.Value =&gt; Boolean)Option[e.Value]">find</span> <span class="delimiter">{</span> <a href="#63335" title="e.Value">_</a>.<span title="=&gt; Int">id</span> <span title="(x: Int)Boolean">==</span> <a href="#63296" title="Int">id</a> <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span title="=&gt; Enumeration#Value">get</span>

  /**
   * This field is mutable only by the Schema trait, and only during the Schema instantiation,
   * so it can safely be considered immutable (read only) by the columnAttributes accessor 
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]" id="49719">_columnAttributes</a> = <span title="()scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">HashSet</span><span class="delimiter">[</span>ColumnAttribute<span class="delimiter">]</span>


  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="49721">_clearColumnAttributes</a> = <span class="delimiter">{</span>
    <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="()Unit">clear</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(ca: org.squeryl.internals.ColumnAttribute)Boolean" id="49722">_addColumnAttribute</a><span class="delimiter">(</span><a title="org.squeryl.internals.ColumnAttribute" id="53048">ca</a>: <a href="ColumnAttribute.scala.html#8010" title="org.squeryl.internals.ColumnAttribute">ColumnAttribute</a><span class="delimiter">)</span> =
      <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="(elem: org.squeryl.internals.ColumnAttribute)Boolean">add</span><span class="delimiter">(</span><a href="#53048" title="org.squeryl.internals.ColumnAttribute">ca</a><span class="delimiter">)</span>

  /**
   * In some circumstances (like in the test suite) a Schema instance must run on multiple database types,
   * this Map keeps the sequence names 'per schema'
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Class[_],String]" id="49723">_sequenceNamePerDBAdapter</a> = <span title="()scala.collection.mutable.HashMap[Class[_],String]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Class[_],String]">HashMap</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span>,String<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="49725">sequenceName</a>: <span title="String">String</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="org.squeryl.internals.AutoIncremented" id="97021">ai</a> = <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#97027" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span><span class="delimiter">)</span>.
      <span title="(default: =&gt; org.squeryl.internals.ColumnAttribute)org.squeryl.internals.ColumnAttribute">getOrElse</span><span class="delimiter">(</span>org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><a href="#8086" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a> <span title="(other: String)String">+</span> <span title="String(&quot; is not declared as autoIncremented, hence it has no sequenceName&quot;)" class="string">&quot; is not declared as autoIncremented, hence it has no sequenceName&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.
        <span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.internals.AutoIncremented" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span>

    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#97021" title="org.squeryl.internals.AutoIncremented">ai</a>.<a href="ColumnAttribute.scala.html#53131" title="=&gt; Option[String]">nameOfSequence</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">return</span> <a href="#97021" title="org.squeryl.internals.AutoIncremented">ai</a>.<a href="ColumnAttribute.scala.html#53131" title="=&gt; Option[String]">nameOfSequence</a>.<span title="=&gt; String">get</span>
    <span class="delimiter">}</span>

    <a href="#8086" title="(x$1: Nothing)Nothing">synchronized</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Class[_ &lt;: org.squeryl.internals.DatabaseAdapter]" id="97042">c</a> = <a href="../Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="../Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="../Session.scala.html#38076" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>.<span title="()Class[_]">getClass</span>

      <span class="keyword">val</span> <a title="Option[String]" id="97043">s</a> = <a href="#49723" title="=&gt; scala.collection.mutable.HashMap[Class[_],String]">_sequenceNamePerDBAdapter</a>.<span title="(key: Class[_])Option[String]">get</span><span class="delimiter">(</span><a href="#97042" title="Class[_ &lt;: org.squeryl.internals.DatabaseAdapter]">c</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#97043" title="Option[String]">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <a href="#97043" title="Option[String]">s</a>.<span title="=&gt; String">get</span>

      <span class="keyword">val</span> <a title="String" id="97044">s0</a> = <a href="../Session.scala.html#7193" title="org.squeryl.Session.type">Session</a>.<a href="../Session.scala.html#38067" title="=&gt; org.squeryl.Session">currentSession</a>.<a href="../Session.scala.html#38076" title="=&gt; org.squeryl.internals.DatabaseAdapter">databaseAdapter</a>.<a href="DatabaseAdapter.scala.html#38166" title="(fmd: org.squeryl.internals.FieldMetaData)String">createSequenceName</a><span class="delimiter">(</span><a href="#8086" title="org.squeryl.internals.FieldMetaData" class="keyword">this</a><span class="delimiter">)</span>
      
      <a href="#49723" title="=&gt; scala.collection.mutable.HashMap[Class[_],String]">_sequenceNamePerDBAdapter</a>.<span title="(key: Class[_], value: String)Option[String]">put</span><span class="delimiter">(</span><a href="#97042" title="Class[_ &lt;: org.squeryl.internals.DatabaseAdapter]">c</a>, <a href="#97044" title="String">s0</a><span class="delimiter">)</span>

      <span title="Nothing" class="keyword">return</span> <a href="#97044" title="String">s0</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49726">isIdFieldOfKeyedEntity</a> =
    <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38365" title="=&gt; org.squeryl.View[_$1]">viewOrTable</a>.<a href="../View.scala.html#37956" title="=&gt; Option[org.squeryl.KeyedEntityDef[_$1, _]]">ked</a>.<span title="(f: org.squeryl.KeyedEntityDef[_$1, _] =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a href="#49856" title="org.squeryl.KeyedEntityDef[_$1, _]">_</a>.<a href="../KeyedEntity.scala.html#8840" title="=&gt; String">idPropertyName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#49758" title="=&gt; String">nameOfProperty</a><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#49726" title="=&gt; Boolean">isIdFieldOfKeyedEntity</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span> classOf<span title="Class[org.squeryl.dsl.CompositeKey](classOf[org.squeryl.dsl.CompositeKey])" class="delimiter">[</span>CompositeKey<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24317" title="(typeOfIdField: Class[_])scala.collection.immutable.Set[_ &gt;: org.squeryl.internals.PrimaryKey &lt;: org.squeryl.internals.AttributeValidOnNumericalColumn with Product with Serializable]">defaultColumnAttributesForKeyedEntityId</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a><span class="delimiter">)</span>.<span title="(f: _27 =&gt; Boolean)Unit">foreach</span><span class="delimiter">(</span><a title="_27" id="97118">ca</a> =&gt; <span class="delimiter">{</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#97118" title="_27">ca</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span> <span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[Long](classOf[java.lang.Long])" class="delimiter">[</span>java.lang.Long<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[Integer](classOf[java.lang.Integer])" class="delimiter">[</span>java.lang.Integer<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;Schema &quot;)" class="string">&quot;Schema &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; has method defaultColumnAttributesForKeyedEntityId returning AutoIncremented \nfor &quot;)" class="string">&quot; has method defaultColumnAttributesForKeyedEntityId returning AutoIncremented \nfor &quot;</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot; all KeyedEntity tables, while class &quot;)" class="string">&quot; all KeyedEntity tables, while class &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38361" title="=&gt; Class[_$1]">clasz</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\n has it\'s id field of type &quot;)" class="string">&quot;\n has it's id field of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49759" title="=&gt; Class[_]">fieldType</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, that is neither an Int or a Long, \n the only two types that can &quot;)" class="string">&quot;, that is neither an Int or a Long, \n the only two types that can &quot;</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;be auto incremented&quot;)" class="string">&quot;be auto incremented&quot;</span><span class="delimiter">)</span>

      <a href="#49722" title="(ca: org.squeryl.internals.ColumnAttribute)Boolean">_addColumnAttribute</a><span class="delimiter">(</span><a href="#97118" title="_27">ca</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="delimiter">[</span>squeryl<span class="delimiter">]</span> <span class="keyword">var</span> <a title="Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]]" id="49728">_defaultValue</a>: <span title="Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]]">Option</span><span class="delimiter">[</span>ConstantTypedExpression<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="None.type">None</span>

  <span class="keyword">def</span> <a title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]" id="49730">columnAttributes</a>: <span title="Iterable[org.squeryl.internals.ColumnAttribute]">Iterable</span><span class="delimiter">[</span>ColumnAttribute<span class="delimiter">]</span> = <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>

  <span class="keyword">def</span> <a title="=&gt; Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]]" id="49731">defaultValue</a>: <span title="Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]]">Option</span><span class="delimiter">[</span>ConstantTypedExpression<span class="delimiter">[</span>_,_<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#49728" title="=&gt; Option[org.squeryl.dsl.ast.ConstantTypedExpression[_, _]]">_defaultValue</a>

  /**
   * The db column type declaration overriden in the schema, if None, it means that it is the default value for
   * the adapter (see Correspondance of field types to database column types http://squeryl.org/schema-definition.html)  
   */
  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="49732">explicitDbTypeDeclaration</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[org.squeryl.internals.ColumnAttribute]" id="97144">dbt</a> = <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#97146" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8027" title="org.squeryl.internals.DBType">DBType</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span title="Option[String]" class="keyword">if</span><span class="delimiter">(</span><a href="#97144" title="Option[org.squeryl.internals.ColumnAttribute]">dbt</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span>
      <span title="None.type">None</span>
    <span class="keyword">else</span>
      <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#97144" title="Option[org.squeryl.internals.ColumnAttribute]">dbt</a>.<span title="=&gt; org.squeryl.internals.ColumnAttribute">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.internals.DBType" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8027" title="org.squeryl.internals.DBType">DBType</a><span class="delimiter">]</span>.<a href="ColumnAttribute.scala.html#56432" title="=&gt; String">declaration</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49733">isTransient</a> =
    <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#50189" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8039" title="org.squeryl.internals.IsTransient">IsTransient</a><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49734">isCustomType</a> = <a href="#49761" title="=&gt; Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span>

  /**
   * @return the length defined in org.squeryl.annotations.Column.length
   * if it is defined, or the default length for Java primitive types.
   * The unit of the length is dependent on the type, the convention is
   * that numeric types have a length in byte, boolean is bits
   * date has -1, and for string the lenght is in chars.  
   * double,long -&gt; 8, float,int -&gt; 4, byte -&gt; 1, boolean -&gt; 1
   * java.util.Date -&gt; -1.
   *
   * The use of this field is to help custom schema generators select
   * the most appropriate column type  
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49735">length</a>: <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span> <span title="(x: Boolean)Boolean">||</span> <a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a>.<span title="=&gt; org.squeryl.annotations.Column">get</span>.<a href="../annotations/ColumnBase.java.html#46906" title="()Int">length</a> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#8088" title="org.squeryl.internals.FieldMetaData.type">FieldMetaData</a>.<a href="#46844" title="(fieldType: Class[_], fmd: org.squeryl.internals.FieldMetaData)Int">defaultFieldLength</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>, <a href="#8086" title="org.squeryl.internals.FieldMetaData" class="keyword">this</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a>.<span title="=&gt; org.squeryl.annotations.Column">get</span>.<a href="../annotations/ColumnBase.java.html#46906" title="()Int">length</a>

  <span class="keyword">def</span> <a title="=&gt; Int" id="49736">scale</a>: <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span> <span title="(x: Boolean)Boolean">||</span> <a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a>.<span title="=&gt; org.squeryl.annotations.Column">get</span>.<a href="../annotations/ColumnBase.java.html#46907" title="()Int">scale</a> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
      <a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24308" title="=&gt; (Int, Int)">defaultSizeOfBigDecimal</a>.<span title="=&gt; Int">_2</span>
    <span class="keyword">else</span>
      <a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a>.<span title="=&gt; org.squeryl.annotations.Column">get</span>.<a href="../annotations/ColumnBase.java.html#46907" title="()Int">scale</a>   

  <span class="keyword">def</span> <a title="=&gt; org.squeryl.Schema" id="49737">schema</a> = <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38363" title="=&gt; org.squeryl.Schema">schema</a>

  /**
   * The name of the database column
   */
  <span class="keyword">def</span> <a title="=&gt; String" id="49738">columnName</a> =
    <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[String]" id="50872">nameDefinedInSchema</a> = <a href="#49719" title="=&gt; scala.collection.mutable.HashSet[org.squeryl.internals.ColumnAttribute]">_columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Option[org.squeryl.internals.ColumnAttribute]">find</span><span class="delimiter">(</span><a href="#50878" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8036" title="org.squeryl.internals.Named">Named</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: org.squeryl.internals.ColumnAttribute =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#50888" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.internals.Named" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8036" title="org.squeryl.internals.Named">Named</a><span class="delimiter">]</span>.<a href="ColumnAttribute.scala.html#50880" title="=&gt; String">name</a><span class="delimiter">)</span>      
      <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38363" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24267" title="(propertyName: String)String">columnNameFromPropertyName</a><span class="delimiter">(</span><a href="#50872" title="Option[String]">nameDefinedInSchema</a>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#49758" title="=&gt; String">nameOfProperty</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.squeryl.annotations.Column" id="50895">ca</a> = <a href="#49766" title="Option[org.squeryl.annotations.Column]">columnAnnotation</a>.<span title="=&gt; org.squeryl.annotations.Column">get</span>
      <span class="keyword">var</span> <a title="String" id="50896">res</a> = <a href="#50895" title="org.squeryl.annotations.Column">ca</a>.<a href="../annotations/ColumnBase.java.html#46905" title="()String">name</a>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50896" title="String">res</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <a href="#50896" title="String">res</a> = <a href="#50895" title="org.squeryl.annotations.Column">ca</a>.<a href="../annotations/ColumnBase.java.html#46904" title="()String">value</a>

      <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#50896" title="String">res</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38363" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24267" title="(propertyName: String)String">columnNameFromPropertyName</a><span class="delimiter">(</span><a href="#49758" title="=&gt; String">nameOfProperty</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <a href="#50896" title="String">res</a>
    <span class="delimiter">}</span>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; (java.sql.ResultSet, Int) =&gt; AnyRef" id="49739">createResultSetHandler</a> =
    <a href="#8086" title="FieldMetaData.this.type" class="keyword">this</a>.<a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24238" title="=&gt; org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25430" title="(c: Class[_])(java.sql.ResultSet, Int) =&gt; AnyRef">resultSetHandlerFor</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="(java.sql.ResultSet, Int) =&gt; AnyRef" id="49740">resultSetHandler</a> = <a href="#49739" title="=&gt; (java.sql.ResultSet, Int) =&gt; AnyRef">createResultSetHandler</a>
    
  <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#49734" title="=&gt; Boolean">isCustomType</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#49759" title="=&gt; Class[_]">fieldType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>,
      <span title="String(&quot;expected fieldType == wrappedFieldType in primitive type mode, got &quot;)" class="string">&quot;expected fieldType == wrappedFieldType in primitive type mode, got &quot;</span><span title="(x$1: Any)String">+</span>
      <a href="#49759" title="=&gt; Class[_]">fieldType</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; != &quot;)" class="string">&quot; != &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>.<span title="()String">getName</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="49742">toString</a> =
    <a href="#49757" title="=&gt; org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38361" title="=&gt; Class[_$1]">clasz</a>.<span title="()String">getSimpleName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49738" title="=&gt; String">columnName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49744" title="=&gt; String">displayType</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49743">isStringType</a> =
    <a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>  

  <span class="keyword">def</span> <a title="=&gt; String" id="49744">displayType</a> =
     <span class="delimiter">(</span><span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#49762" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>
        <span title="String(&quot;Option[&quot;)" class="string">&quot;Option[&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49759" title="=&gt; Class[_]">fieldType</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span>
      <span class="keyword">else</span>
        <a href="#49759" title="=&gt; Class[_]">fieldType</a>.<span title="()String">getName</span><span class="delimiter">)</span>

  /**
   * When true, will cause Schema generation to declare as PrimaryKey, Note that for
   * KeyedEntity[]s,  declaredAsPrimaryKeyInSchema is always true, and the cannot be made otherwise,
   * the inverse is not true, a field can be declared as primary key in the Shema without it being the
   * id of a KeyedEntity[], ex. :
   *  
   * &lt;pre&gt;
   * on(myTable)(t =&gt;declare(
   *   myField.is(primaryKey)  // myField doesn't need to be a KeyedEntity.id 
   * ))
   * &lt;/pre&gt;
   * 
   * &lt;pre&gt;
   * on(myKeyedEntityTable)(t =&gt;declare(
   *   id.is(autoIncremented)  // omiting primaryKey here has no effect, it is equivalent as id.is(primaryKey,autoIncremented)
   * ))
   * &lt;/pre&gt;
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49745">declaredAsPrimaryKeyInSchema</a> =
    <a href="#49730" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#50230" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8024" title="org.squeryl.internals.PrimaryKey">PrimaryKey</a><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49746">isAutoIncremented</a> =
    <a href="#49730" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#63266" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8018" title="org.squeryl.internals.AutoIncremented">AutoIncremented</a><span class="delimiter">]</span><span class="delimiter">)</span>

  /**
   * Inserts will only set values for a column if isInsertable is true
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49747">isInsertable</a> =
    <span title="=&gt; Boolean">!</span><a href="#49730" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#63448" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8030" title="org.squeryl.internals.Uninsertable">Uninsertable</a><span class="delimiter">]</span><span class="delimiter">)</span>

  /**
   * Updates will only set values for a column if isUpdatable is true
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="49748">isUpdatable</a> =
    <span title="=&gt; Boolean">!</span><a href="#49730" title="=&gt; Iterable[org.squeryl.internals.ColumnAttribute]">columnAttributes</a>.<span title="(p: org.squeryl.internals.ColumnAttribute =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#63691" title="org.squeryl.internals.ColumnAttribute">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="ColumnAttribute.scala.html#8033" title="org.squeryl.internals.Unupdatable">Unupdatable</a><span class="delimiter">]</span><span class="delimiter">)</span>

  /**
   *  gets the value of the field from the object.
   * Note that it will unwrap Option[] and return null instead of None, i.e.
   * if converts None and Some to null and some.get respectively 
   * @arg o the object that owns the field
   */
  <span class="keyword">def</span> <a title="(o: AnyRef)AnyRef" id="49749">get</a><span class="delimiter">(</span><a title="AnyRef" id="77996">o</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Object" id="97207">res</a> =
        <span title="Object" class="keyword">if</span><span class="delimiter">(</span><a href="#49763" title="Option[java.lang.reflect.Method]">getter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>
          <a href="#49753" title="(o: AnyRef)Object">_getFromGetter</a><span class="delimiter">(</span><a href="#77996" title="AnyRef">o</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#49755" title="(o: AnyRef)Object">_getFromField</a><span class="delimiter">(</span><a href="#77996" title="AnyRef">o</a><span class="delimiter">)</span>

      <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#49762" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#97207" title="Object">res</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span>
          <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span>
          <a href="#97207" title="Object">res</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[_$9]" class="delimiter">[</span><span title="Option[_]">Option</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; _$9">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span>
        <a href="#97207" title="Object">res</a>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="97223">e</a>: <span title="IllegalArgumentException">IllegalArgumentException</span> =&gt; org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; used on &quot;)" class="string">&quot; used on &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#77996" title="AnyRef">o</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
  <span class="keyword">def</span> <a title="(o: AnyRef)AnyRef" id="49750">getNativeJdbcValue</a><span class="delimiter">(</span><a title="AnyRef" id="63968">o</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="AnyRef" id="97226">r</a> = <a href="#49749" title="(o: AnyRef)AnyRef">get</a><span class="delimiter">(</span><a href="#63968" title="AnyRef">o</a><span class="delimiter">)</span>
    <a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24238" title="=&gt; org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25426" title="(nonNativeType: Class[_], r: AnyRef)AnyRef">nativeJdbcValueFor</a><span class="delimiter">(</span><a href="#49760" title="=&gt; Class[_]">wrappedFieldType</a>, <a href="#97226" title="AnyRef">r</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(target: AnyRef, rs: java.sql.ResultSet, index: Int)Unit" id="49751">setFromResultSet</a><span class="delimiter">(</span><a title="AnyRef" id="63270">target</a>: <span title="AnyRef">AnyRef</span>, <a title="java.sql.ResultSet" id="63271">rs</a>: <span title="java.sql.ResultSet">ResultSet</span>, <a title="Int" id="63272">index</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="AnyRef" id="63273">v</a> = <a href="#49740" title="(v1: java.sql.ResultSet, v2: Int)AnyRef">resultSetHandler</a><span class="delimiter">(</span><a href="#63271" title="java.sql.ResultSet">rs</a>, <a href="#63272" title="Int">index</a><span class="delimiter">)</span>
    <a href="#49752" title="(target: AnyRef, v: AnyRef)Unit">set</a><span class="delimiter">(</span><a href="#63270" title="AnyRef">target</a>, <a href="#63273" title="AnyRef">v</a><span class="delimiter">)</span>    
  <span class="delimiter">}</span>
  
  /**
   * Sets the value 'v' to the object, the value will be converted to Some or None
   * if the field is an Option[], (if isOption).   
   */
  <span class="keyword">def</span> <a title="(target: AnyRef, v: AnyRef)Unit" id="49752">set</a><span class="delimiter">(</span><a title="AnyRef" id="63283">target</a>: <span title="AnyRef">AnyRef</span>, <a title="AnyRef" id="63284">v</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="AnyRef" id="63285">v0</a>: <span title="AnyRef">AnyRef</span> =
        <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#63284" title="AnyRef">v</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#49716" title="=&gt; Option[Enumeration]">enumeration</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>
          <a href="#49718" title="(id: Int)Enumeration#Value">canonicalEnumerationValueFor</a><span class="delimiter">(</span><a href="#63284" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Integer" class="delimiter">[</span>java.lang.<span title="Integer">Integer</span><span class="delimiter">]</span>.<span title="()Int">intValue</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#49761" title="=&gt; Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span>
          <a href="#63284" title="AnyRef">v</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="AnyRef =&gt; Product1[Any]" id="63352">f</a> = <a href="#49761" title="=&gt; Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a>.<span title="=&gt; AnyRef =&gt; Product1[Any]">get</span>

          <span title="internals extends Product1[Any] with AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#63284" title="AnyRef">v</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../customtypes/CustomTypesMode.scala.html#7336" title="org.squeryl.customtypes.CustomType[_]">CustomType</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Any" id="63363">r</a> = <a href="#63284" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.customtypes.CustomType[_$11]" class="delimiter">[</span><a href="../customtypes/CustomTypesMode.scala.html#7336" title="org.squeryl.customtypes.CustomType[_]">CustomType</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="../customtypes/CustomTypesMode.scala.html#63357" title="=&gt; _$11">_1</a>
            <a href="#63352" title="(v1: AnyRef)Product1[Any]">f</a><span class="delimiter">(</span><span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#63363" title="Any">r</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#63363" title="Any">r</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>          
          <span class="keyword">else</span> <span class="delimiter">{</span>
           <a href="#63352" title="(v1: AnyRef)Product1[Any]">f</a><span class="delimiter">(</span><a href="#63284" title="AnyRef">v</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="AnyRef" id="63286">actualValue</a> =
        <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#49762" title="=&gt; Boolean">isOption</a><span class="delimiter">)</span>
          <a href="#63285" title="AnyRef">v0</a>
        <span class="keyword">else</span> <span title="Option[AnyRef]" class="keyword">if</span><span class="delimiter">(</span><a href="#63285" title="AnyRef">v0</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span title="None.type">None</span>
        <span class="keyword">else</span>
          <span title="(x: AnyRef)Some[AnyRef]">Some</span><span class="delimiter">(</span><a href="#63285" title="AnyRef">v0</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Any" id="63287">res</a> =
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#49764" title="Option[java.lang.reflect.Method]">setter</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span>
          <a href="#49754" title="(target: AnyRef, v: AnyRef)Object">_setWithSetter</a><span class="delimiter">(</span><a href="#63283" title="AnyRef">target</a>, <a href="#63286" title="AnyRef">actualValue</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#49756" title="(target: AnyRef, v: AnyRef)Unit">_setWithField</a><span class="delimiter">(</span><a href="#63283" title="AnyRef">target</a>, <a href="#63286" title="AnyRef">actualValue</a><span class="delimiter">)</span>
    <span title="Unit" class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="63407">e</a>: <span title="Exception">Exception</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String" id="63408">typeOfV</a> = <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#63284" title="AnyRef">v</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="String(&quot;null&quot;)" class="string">&quot;null&quot;</span> <span class="keyword">else</span> <a href="#63284" title="AnyRef">v</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getCanonicalName</span>
        org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span>
          <a href="#8086" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a> <span title="(other: String)String">+</span> <span title="String(&quot; was invoked with value \'&quot;)" class="string">&quot; was invoked with value '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#63284" title="AnyRef">v</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' of type &quot;)" class="string">&quot;' of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#63408" title="String">typeOfV</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; on object of type &quot;)" class="string">&quot; on object of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#63283" title="AnyRef">target</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; \n&quot;)" class="string">&quot; \n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#63407" title="Exception">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(o: AnyRef)Object" id="49753">_getFromGetter</a><span class="delimiter">(</span><a title="AnyRef" id="97212">o</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =
    <a href="#49763" title="Option[java.lang.reflect.Method]">getter</a>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#97212" title="AnyRef">o</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(target: AnyRef, v: AnyRef)Object" id="49754">_setWithSetter</a><span class="delimiter">(</span><a title="AnyRef" id="63398">target</a>: <span title="AnyRef">AnyRef</span>, <a title="AnyRef" id="63399">v</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =
    <a href="#49764" title="Option[java.lang.reflect.Method]">setter</a>.<span title="=&gt; java.lang.reflect.Method">get</span>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#63398" title="AnyRef">target</a>, <a href="#63399" title="AnyRef">v</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(o: AnyRef)Object" id="49755">_getFromField</a><span class="delimiter">(</span><a title="AnyRef" id="97213">o</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =
    <a href="#49765" title="Option[java.lang.reflect.Field]">field</a>.<span title="=&gt; java.lang.reflect.Field">get</span>.<span title="(x$1: Any)Object">get</span><span class="delimiter">(</span><a href="#97213" title="AnyRef">o</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(target: AnyRef, v: AnyRef)Unit" id="49756">_setWithField</a><span class="delimiter">(</span><a title="AnyRef" id="63400">target</a>: <span title="AnyRef">AnyRef</span>, <a title="AnyRef" id="63401">v</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =
    <a href="#49765" title="Option[java.lang.reflect.Field]">field</a>.<span title="=&gt; java.lang.reflect.Field">get</span>.<span title="(x$1: Any, x$2: Any)Unit">set</span><span class="delimiter">(</span><a href="#63400" title="AnyRef">target</a>, <a href="#63401" title="AnyRef">v</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">trait</span> <a title="trait FieldMetaDataFactory extends Object" id="8087">FieldMetaDataFactory</a> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(o: AnyRef, f: java.lang.reflect.Field)Boolean" id="46850">hideFromYieldInspection</a><span class="delimiter">(</span><a title="AnyRef" id="97230">o</a>: <span title="AnyRef">AnyRef</span>, <a title="java.lang.reflect.Field" id="97231">f</a>: <span title="java.lang.reflect.Field">Field</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="(parentMetaData: org.squeryl.internals.PosoMetaData[_], name: String, property: (Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation]), sampleInstance4OptionTypeDeduction: AnyRef, isOptimisticCounter: Boolean)org.squeryl.internals.FieldMetaData" id="46851">build</a><span class="delimiter">(</span><a title="org.squeryl.internals.PosoMetaData[_]" id="46869">parentMetaData</a>: <a href="PosoMetaData.scala.html#8151" title="org.squeryl.internals.PosoMetaData[_]">PosoMetaData</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="String" id="46870">name</a>: <span title="String">String</span>, <a title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" id="46871">property</a>: <span title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" class="delimiter">(</span>Option<span class="delimiter">[</span>Field<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Set<span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span>, <a title="AnyRef" id="46872">sampleInstance4OptionTypeDeduction</a>: <span title="AnyRef">AnyRef</span>, <a title="Boolean" id="46873">isOptimisticCounter</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#8086" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a>

  <span class="keyword">def</span> <a title="(posoMetaData: org.squeryl.internals.PosoMetaData[_])() =&gt; AnyRef" id="46852">createPosoFactory</a><span class="delimiter">(</span><a title="org.squeryl.internals.PosoMetaData[_]" id="46858">posoMetaData</a>: <a href="PosoMetaData.scala.html#8151" title="org.squeryl.internals.PosoMetaData[_]">PosoMetaData</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;AnyRef
<span class="delimiter">}</span>

<span title="Object" class="keyword">object</span> <a title="org.squeryl.internals.FieldMetaData.type" id="8088">FieldMetaData</a> <a href="#8089" title="org.squeryl.internals.FieldMetaData.type" class="delimiter">{</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Array[Object]" id="46838">_EMPTY_ARRAY</a> = <span title="Array[Object]" class="keyword">new</span> <span title="Array[Object]">Array</span><span class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  
  <span class="keyword">var</span> <a title="factory extends Object with org.squeryl.internals.FieldMetaDataFactory" id="46841">factory</a> = <a href="#46848" title="org.squeryl.internals.FieldMetaDataFactory" class="keyword">new</a> <a title="anonymous class $anon extends Object with org.squeryl.internals.FieldMetaDataFactory" id="46848">FieldMetaDataFactory</a> <span class="delimiter">{</span>   

    <span class="keyword">def</span> <a title="(posoMetaData: org.squeryl.internals.PosoMetaData[_])() =&gt; AnyRef" id="46854">createPosoFactory</a><span class="delimiter">(</span><a title="org.squeryl.internals.PosoMetaData[_]" id="46856">posoMetaData</a>: <a href="PosoMetaData.scala.html#8151" title="org.squeryl.internals.PosoMetaData[_]">PosoMetaData</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;AnyRef =
      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="(java.lang.reflect.Constructor[_], Array[Object])" id="49786">c</a> = <a href="#46856" title="org.squeryl.internals.PosoMetaData[_]">posoMetaData</a>.<a href="PosoMetaData.scala.html#38372" title="=&gt; (java.lang.reflect.Constructor[_], Array[Object])">constructor</a>
        <a href="#49786" title="(java.lang.reflect.Constructor[_], Array[Object])">c</a>.<span title="=&gt; java.lang.reflect.Constructor[_]">_1</span>.<span title="(x$1: &lt;repeated...&gt;[Object])_$1">newInstance</span><span class="delimiter">(</span><a href="#49786" title="(java.lang.reflect.Constructor[_], Array[Object])">c</a>.<span title="=&gt; Array[Object]">_2</span> :_*<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>;
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(parentMetaData: org.squeryl.internals.PosoMetaData[_], name: String, property: (Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation]), sampleInstance4OptionTypeDeduction: AnyRef, isOptimisticCounter: Boolean)org.squeryl.internals.FieldMetaData" id="46855">build</a><span class="delimiter">(</span><a title="org.squeryl.internals.PosoMetaData[_]" id="46863">parentMetaData</a>: <a href="PosoMetaData.scala.html#8151" title="org.squeryl.internals.PosoMetaData[_]">PosoMetaData</a><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="String" id="46864">name</a>: <span title="String">String</span>, <a title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" id="46865">property</a>: <span title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])" class="delimiter">(</span>Option<span class="delimiter">[</span>Field<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Method<span class="delimiter">]</span>, Set<span class="delimiter">[</span>Annotation<span class="delimiter">]</span><span class="delimiter">)</span>, <a title="AnyRef" id="46866">sampleInstance4OptionTypeDeduction</a>: <span title="AnyRef">AnyRef</span>, <a title="Boolean" id="46867">isOptimisticCounter</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="org.squeryl.internals.FieldMapper" id="46879">fieldMapper</a> = <a href="#46863" title="org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38363" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24238" title="=&gt; org.squeryl.internals.FieldMapper">fieldMapper</a> 
      
      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Field]" id="46880">field</a>  = <a href="#46865" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Field]">_1</span>
      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="46881">getter</a> = <a href="#46865" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_2</span>
      <span class="keyword">val</span> <a title="Option[java.lang.reflect.Method]" id="46882">setter</a> = <a href="#46865" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Option[java.lang.reflect.Method]">_3</span>
      <span class="keyword">val</span> <a title="Set[java.lang.annotation.Annotation]" id="46883">annotations</a> = <a href="#46865" title="(Option[java.lang.reflect.Field], Option[java.lang.reflect.Method], Option[java.lang.reflect.Method], Set[java.lang.annotation.Annotation])">property</a>.<span title="=&gt; Set[java.lang.annotation.Annotation]">_4</span>

      <span class="keyword">val</span> <a title="Option[org.squeryl.annotations.ColumnBase]" id="46884">colAnnotation</a> = <a href="#46883" title="Set[java.lang.annotation.Annotation]">annotations</a>.<span title="(p: java.lang.annotation.Annotation =&gt; Boolean)Option[java.lang.annotation.Annotation]">find</span><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="46901">a</a> =&gt; <a href="#46901" title="java.lang.annotation.Annotation">a</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../annotations/ColumnBase.java.html#7295" title="org.squeryl.annotations.ColumnBase">ColumnBase</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: java.lang.annotation.Annotation =&gt; org.squeryl.annotations.ColumnBase)Option[org.squeryl.annotations.ColumnBase]">map</span><span class="delimiter">(</span><a title="java.lang.annotation.Annotation" id="46913">a</a> =&gt; <a href="#46913" title="java.lang.annotation.Annotation">a</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.squeryl.annotations.ColumnBase" class="delimiter">[</span><a href="../annotations/ColumnBase.java.html#7295" title="org.squeryl.annotations.ColumnBase">ColumnBase</a><span class="delimiter">]</span><span class="delimiter">)</span>
      
      /*
       * Retrieve the member in use, its class and its generic type
       */
      <span class="keyword">var</span> <a href="#424840" title="(x: (java.lang.reflect.Member, Class[?0], java.lang.reflect.Type))(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type)" class="delimiter">(</a><a href="#424838" title="java.lang.reflect.Member" id="46886">member</a>, <a href="#424838" title="Class[?0]" id="46887">clsOfField</a>, <a href="#424838" title="java.lang.reflect.Type" id="46888">typeOfField</a><span class="delimiter">)</span> =
        <span class="delimiter">(</span><a href="#46882" title="Option[java.lang.reflect.Method]">setter</a>.<span title="(f: java.lang.reflect.Method =&gt; (java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 })Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }]">map</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="46919">s</a> =&gt; <span title="(_1: java.lang.reflect.Member, _2: Class[?0], _3: java.lang.reflect.Type)(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type)" class="delimiter">(</span><a href="#46919" title="java.lang.reflect.Method">s</a>: <span title="java.lang.reflect.Member">Member</span>, <a href="#46919" title="java.lang.reflect.Method">s</a>.<span title="(xs: Array[Class[_]])scala.collection.mutable.ArrayOps[Class[_]]">getParameterTypes</span>.<span title="=&gt; Class[_]">head</span>, <a href="#46919" title="java.lang.reflect.Method">s</a>.<span title="(xs: Array[java.lang.reflect.Type])scala.collection.mutable.ArrayOps[java.lang.reflect.Type]">getGenericParameterTypes</span>.<span title="=&gt; java.lang.reflect.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
          .<span title="(alternative: =&gt; Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }])Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }]">orElse</span><span class="delimiter">(</span><a href="#46881" title="Option[java.lang.reflect.Method]">getter</a>.<span title="(f: java.lang.reflect.Method =&gt; (java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 })Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }]">map</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="49397">g</a> =&gt; <span title="(_1: java.lang.reflect.Member, _2: Class[?0], _3: java.lang.reflect.Type)(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type)" class="delimiter">(</span><a href="#49397" title="java.lang.reflect.Method">g</a>: <span title="java.lang.reflect.Member">Member</span>, <a href="#49397" title="java.lang.reflect.Method">g</a>.<span title="()Class[_]">getReturnType</span>, <a href="#49397" title="java.lang.reflect.Method">g</a>.<span title="()java.lang.reflect.Type">getGenericReturnType</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          .<span title="(alternative: =&gt; Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }])Option[(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }]">orElse</span><span class="delimiter">(</span><a href="#46880" title="Option[java.lang.reflect.Field]">field</a>.<span title="(f: java.lang.reflect.Field =&gt; (java.lang.reflect.Member, Class[?0], Class[?0]) forSome { type ?0; type ?0 })Option[(java.lang.reflect.Member, Class[?0], Class[?0]) forSome { type ?0; type ?0 }]">map</span><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="49426">f</a> =&gt; <span title="(_1: java.lang.reflect.Member, _2: Class[?0], _3: Class[?0])(java.lang.reflect.Member, Class[?0], Class[?0])" class="delimiter">(</span><a href="#49426" title="java.lang.reflect.Field">f</a>: <span title="java.lang.reflect.Member">Member</span>, <a href="#49426" title="java.lang.reflect.Field">f</a>.<span title="()Class[_]">getType</span>, <a href="#49426" title="java.lang.reflect.Field">f</a>.<span title="()Class[_]">getType</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          .<span title="(default: =&gt; (java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 })(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) forSome { type ?0 }">getOrElse</span><a href="#424838" title="(java.lang.reflect.Member, Class[?0], java.lang.reflect.Type) @unchecked" class="delimiter">(</a>org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><span title="String(&quot;invalid field group&quot;)" class="string">&quot;invalid field group&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      /*
       * Look for a value in the sample type.  If one exists and
       * it is not None, we can use it to deduce the Option type.   
       */
      <span class="keyword">var</span> <a title="AnyRef" id="46889">v</a>: <span title="AnyRef">AnyRef</span> =
         <span title="AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#46866" title="AnyRef">sampleInstance4OptionTypeDeduction</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
           <a href="#46880" title="Option[java.lang.reflect.Field]">field</a> <span title="(f: java.lang.reflect.Field =&gt; Option[Object])Option[Object]">flatMap</span> <span class="delimiter">{</span> <a title="java.lang.reflect.Field" id="49501">f</a> =&gt;
             <a href="#49501" title="java.lang.reflect.Field">f</a>.<span title="(x$1: Any)Object">get</span><a href="#424845" title="Object" class="delimiter">(</a><a href="#46866" title="AnyRef">sampleInstance4OptionTypeDeduction</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
               <span class="keyword">case</span> <a href="#424844" title="Option[Object]" id="424845">a</a>: AnyRef =&gt; <span title="(x: Object)Some[Object]">Some</span><a href="#424847" title="(x: Option[Object])Option[Object]" class="delimiter">(</a>a<span class="delimiter">)</span>
               <span class="keyword">case</span> _ =&gt; <a href="#424847" title="(x: Option[Object])Option[Object]">None</a>
             <span class="delimiter">}</span>
           <span class="delimiter">}</span> <span title="(alternative: =&gt; Option[Object])Option[Object]">orElse</span> <span class="delimiter">{</span>
	             <a href="#46881" title="Option[java.lang.reflect.Method]">getter</a> <span title="(f: java.lang.reflect.Method =&gt; Option[Object])Option[Object]">flatMap</span> <span class="delimiter">{</span> <a href="#49525" title="java.lang.reflect.Method">_</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><a href="#424853" title="Object" class="delimiter">(</a><a href="#46866" title="AnyRef">sampleInstance4OptionTypeDeduction</a>, <a href="#46838" title="=&gt; Array[Object]">_EMPTY_ARRAY</a> : _*<span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
	               <span class="keyword">case</span> <a href="#424852" title="Option[Object]" id="424853">a</a>: AnyRef =&gt; <span title="(x: Object)Some[Object]">Some</span><a href="#424855" title="(x: Option[Object])Option[Object]" class="delimiter">(</a>a<span class="delimiter">)</span>
	               <span class="keyword">case</span> _ =&gt; <a href="#424855" title="(x: Option[Object])Option[Object]">None</a>
	             <span class="delimiter">}</span>
             <span class="delimiter">}</span>
           <span class="delimiter">}</span> <span title="(default: =&gt; Object)Object">getOrElse</span>
            <a href="#46847" title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object">createDefaultValue</a><span class="delimiter">(</span><a href="#46879" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#46886" title="java.lang.reflect.Member">member</a>, <a href="#46887" title="Class[_]">clsOfField</a>, <span title="(x: java.lang.reflect.Type)Some[java.lang.reflect.Type]">Some</span><span class="delimiter">(</span><a href="#46888" title="java.lang.reflect.Type">typeOfField</a><span class="delimiter">)</span>, <a href="#46884" title="Option[org.squeryl.annotations.ColumnBase]">colAnnotation</a><span class="delimiter">)</span>
         <span class="delimiter">}</span>
         <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#46889" title="AnyRef">v</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#46889" title="AnyRef">v</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="None.type">None</span><span class="delimiter">)</span> // can't deduce the type from None keep trying
        <a href="#46889" title="AnyRef">v</a> = <span title="Null(null)" class="keyword">null</span>

      <span class="keyword">val</span> <a title="AnyRef" id="46890">constructorSuppliedDefaultValue</a> = <a href="#46889" title="AnyRef">v</a>

      <span class="keyword">var</span> <a title="Option[AnyRef =&gt; Product1[Any]]" id="46891">customTypeFactory</a>: <span title="Option[AnyRef =&gt; Product1[Any]]">Option</span><span class="delimiter">[</span>AnyRef=&gt;Product1<span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="keyword">with</span> AnyRef<span class="delimiter">]</span> = <span title="None.type">None</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span>classOf<span title="Class[Product1[Any]](classOf[scala.Product1])" class="delimiter">[</span>Product1<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#46887" title="Class[_]">clsOfField</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#46891" title="Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a> = <a href="#46843" title="(fieldMapper: org.squeryl.internals.FieldMapper, ownerClass: Class[_], typeOfField: Class[_])Option[AnyRef =&gt; Product1[Any]]">_createCustomTypeFactory</a><span class="delimiter">(</span><a href="#46879" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#46863" title="org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38361" title="=&gt; Class[_$15]">clasz</a>, <a href="#46887" title="Class[_]">clsOfField</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#46891" title="Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="AnyRef =&gt; Product1[Any]" id="49617">f</a> = <a href="#46891" title="Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a>.<span title="=&gt; AnyRef =&gt; Product1[Any]">get</span>
        <a href="#46889" title="AnyRef">v</a> = <a href="#49617" title="(v1: AnyRef)Product1[Any]">f</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> // this creates a dummy (sample) field
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#46889" title="AnyRef">v</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        /*
         * If we have not yet been able to deduce the value of the field, delegate to createDefaultValue
         * in order to do so.
         */
        <a href="#46889" title="AnyRef">v</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
          <a href="#46847" title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object">createDefaultValue</a><span class="delimiter">(</span><a href="#46879" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#46886" title="java.lang.reflect.Member">member</a>, <a href="#46887" title="Class[_]">clsOfField</a>, <span title="(x: java.lang.reflect.Type)Some[java.lang.reflect.Type]">Some</span><span class="delimiter">(</span><a href="#46888" title="java.lang.reflect.Type">typeOfField</a><span class="delimiter">)</span>, <a href="#46884" title="Option[org.squeryl.annotations.ColumnBase]">colAnnotation</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Null(null)" id="49629">e</a>:<span title="Exception">Exception</span> =&gt; <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Boolean" id="46892">deductionFailed</a> =
        <a href="#46889" title="AnyRef">v</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Some<a href="#424860" title="Boolean" id="424862" class="delimiter">(</a><a href="#424862" title="Any" id="424864">None</a><span class="delimiter">)</span> =&gt; <a href="#424867" title="(x: Boolean)Boolean" class="keyword">true</a>
          <span class="keyword">case</span> <a href="#424860" title="Boolean" id="424865">a</a>:Any  =&gt; <span class="delimiter">(</span><a href="#46889" title="AnyRef">v</a> <a href="#424867" title="(x: Boolean)Boolean">==</a> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#46892" title="Boolean">deductionFailed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="String" id="49637">errorMessage</a> = <span title="String(&quot;Could not deduce Option[] type of field \'&quot;)" class="string">&quot;Could not deduce Option[] type of field '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#46864" title="String">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' of class &quot;)" class="string">&quot;' of class &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#46863" title="org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38361" title="=&gt; Class[_$15]">clasz</a>.<span title="()String">getName</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#46845" title="()Boolean">detectScalapOnClasspath</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#49637" title="String">errorMessage</a> <span title="(x$1: Any)String">+=</span> <span title="String(&quot;scalap option deduction not enabled. See: http://squeryl.org/scalap.html for more information.&quot;)" class="string">&quot;scalap option deduction not enabled. See: http://squeryl.org/scalap.html for more information.&quot;</span>
        org.squeryl.internals.<a href="Utils.scala.html#8187" title="org.squeryl.internals.Utils.type">Utils</a>.<a href="Utils.scala.html#32420" title="(msg: String)Nothing">throwError</a><span class="delimiter">(</span><a href="#49637" title="String">errorMessage</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Boolean" id="46893">isOption</a> = <a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Some[_]">Some</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>

      <span class="keyword">val</span> <a title="Class[_ &lt;: AnyRef]" id="46894">typeOfFieldOrTypeOfOption</a> =
        <span title="Class[?0]" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#46893" title="Boolean">isOption</a><span class="delimiter">)</span>
          <a href="#46889" title="AnyRef">v</a>.<span title="()Class[_]">getClass</span>
        <span class="keyword">else</span>
          <a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[AnyRef]" class="delimiter">[</span><span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; AnyRef">get</span>.<span title="()Class[_]">getClass</span>

      <span class="keyword">val</span> <a title="Class[_ &lt;: AnyRef]" id="46895">primitiveFieldType</a> =
        <span title="Class[?0]" class="keyword">if</span><span class="delimiter">(</span><a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Product1[_]">Product1</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
          <a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Product1[Any]" class="delimiter">[</span><span title="Product1[Any]">Product1</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Any">_1</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()Class[_]">getClass</span>
        <span class="keyword">else</span> <span title="Class[?0]" class="keyword">if</span><span class="delimiter">(</span><a href="#46893" title="Boolean">isOption</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[AnyRef]" class="delimiter">[</span><span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; AnyRef">get</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Product1[_]">Product1</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          //if we get here, customTypeFactory has not had a chance to get created
          <a href="#46891" title="Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a> = <a href="#46843" title="(fieldMapper: org.squeryl.internals.FieldMapper, ownerClass: Class[_], typeOfField: Class[_])Option[AnyRef =&gt; Product1[Any]]">_createCustomTypeFactory</a><span class="delimiter">(</span><a href="#46879" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#46863" title="org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>.<a href="PosoMetaData.scala.html#38361" title="=&gt; Class[_$15]">clasz</a>, <a href="#46894" title="Class[_ &lt;: AnyRef]">typeOfFieldOrTypeOfOption</a><span class="delimiter">)</span>
          <a href="#46889" title="AnyRef">v</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[AnyRef]" class="delimiter">[</span><span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; AnyRef">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Product1[Any]" class="delimiter">[</span><span title="Product1[Any]">Product1</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Any">_1</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>.<span title="()Class[_]">getClass</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span>
          <a href="#46894" title="Class[_ &lt;: AnyRef]">typeOfFieldOrTypeOfOption</a>


      <span title="org.squeryl.internals.FieldMetaData" class="keyword">new</span> <a href="#8086" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a><span class="delimiter">(</span>
        <a href="#46863" title="org.squeryl.internals.PosoMetaData[_]">parentMetaData</a>,
        <a href="#46864" title="String">name</a>,
        <a href="#46894" title="Class[_ &lt;: AnyRef]">typeOfFieldOrTypeOfOption</a>,
        <a href="#46895" title="Class[_ &lt;: AnyRef]">primitiveFieldType</a>,
        <a href="#46891" title="Option[AnyRef =&gt; Product1[Any]]">customTypeFactory</a>,
        <a href="#46893" title="Boolean">isOption</a>,
        <a href="#46881" title="Option[java.lang.reflect.Method]">getter</a>,
        <a href="#46882" title="Option[java.lang.reflect.Method]">setter</a>,
        <a href="#46880" title="Option[java.lang.reflect.Field]">field</a>,
        <a href="#46884" title="Option[org.squeryl.annotations.ColumnBase]">colAnnotation</a>,
        <a href="#46867" title="Boolean">isOptimisticCounter</a>,
        <a href="#46890" title="AnyRef">constructorSuppliedDefaultValue</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * creates a closure that takes a java.lang. primitive wrapper (ex.: java.lang.Integer) and
   * that creates an instance of a custom type with it, the factory accepts null to create
   * default values for non nullable primitive types (int, long, etc...)
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fieldMapper: org.squeryl.internals.FieldMapper, ownerClass: Class[_], typeOfField: Class[_])Option[AnyRef =&gt; Product1[Any]]" id="46843">_createCustomTypeFactory</a><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMapper" id="49600">fieldMapper</a>: <a href="FieldMapper.scala.html#8065" title="org.squeryl.internals.FieldMapper">FieldMapper</a>, <a title="Class[_]" id="49601">ownerClass</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="Class[_]" id="49602">typeOfField</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[AnyRef =&gt; Product1[Any]]">Option</span><span class="delimiter">[</span>AnyRef=&gt;Product1<span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="keyword">with</span> AnyRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
    // run through the given class hierarchy and return the first method
    // which is called &quot;value&quot; and doesn't return java.lang.Object
    @tailrec
    <span class="keyword">def</span> <a title="(c: Class[_])Option[java.lang.reflect.Method]" id="97238">find</a><span class="delimiter">(</span><a title="Class[_]" id="97240">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[java.lang.reflect.Method]">Option</span><span class="delimiter">[</span>Method<span class="delimiter">]</span> =
     <span title="Option[java.lang.reflect.Method]" class="keyword">if</span><span class="delimiter">(</span><a href="#97240" title="Class[_]">c</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
       <a href="#97240" title="Class[_]">c</a>.<span title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</span>.<span title="(p: java.lang.reflect.Method =&gt; Boolean)Option[java.lang.reflect.Method]">find</span><a href="#424880" title="(x: Option[java.lang.reflect.Method])Option[java.lang.reflect.Method]" class="delimiter">(</a><a title="java.lang.reflect.Method" id="97480">m</a> =&gt; <a href="#97480" title="java.lang.reflect.Method">m</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;value&quot;)" class="string">&quot;value&quot;</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#97480" title="java.lang.reflect.Method">m</a>.<span title="()Class[_]">getReturnType</span> <span title="(x$1: AnyRef)Boolean">!=</span> classOf<span title="Class[Object](classOf[java.lang.Object])" class="delimiter">[</span>java.lang.Object<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
         <span class="keyword">case</span> Some<a href="#424875" title="Option[java.lang.reflect.Method]" id="424876" class="delimiter">(</a><a href="#424876" title="java.lang.reflect.Method" id="97493">m</a><span class="delimiter">)</span> =&gt; <span title="(x: java.lang.reflect.Method)Some[java.lang.reflect.Method]">Some</span><a href="#424880" title="(x: Option[java.lang.reflect.Method])Option[java.lang.reflect.Method]" class="delimiter">(</a><a href="#97493" title="java.lang.reflect.Method">m</a><span class="delimiter">)</span>
         <span class="keyword">case</span> <a href="#424875" title="Option[java.lang.reflect.Method]" id="424878">None</a> =&gt; <a href="#97238" title="(c: Class[_])Option[java.lang.reflect.Method]">find</a><a href="#424880" title="(x: Option[java.lang.reflect.Method])Option[java.lang.reflect.Method]" class="delimiter">(</a><a href="#97240" title="Class[_]">c</a>.<span title="()Class[_ &gt;: _$21]">getSuperclass</span><span class="delimiter">)</span>
       <span class="delimiter">}</span>
     <span class="keyword">else</span> <span title="None.type">None</span>

     // invoke the given constructor and expose possible exceptions to the caller.
    <span class="keyword">def</span> <a title="(c: java.lang.reflect.Constructor[_], value: AnyRef)Product1[Any]" id="97239">invoke</a><span class="delimiter">(</span><a title="java.lang.reflect.Constructor[_]" id="97503">c</a>: <span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="AnyRef" id="97504">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#97503" title="java.lang.reflect.Constructor[_]">c</a>.<span title="(x$1: &lt;repeated...&gt;[Object])_$22">newInstance</span><span class="delimiter">(</span><a href="#97504" title="AnyRef">value</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="FieldMetaData extends Product1[Any] with AnyRef" class="delimiter">[</span><a href="#97508" title="FieldMetaData extends Product1[Any] with AnyRef">Product1</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="keyword">with</span> AnyRef<span class="delimiter">]</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="97509">ex</a>: <span title="java.lang.reflect.InvocationTargetException">InvocationTargetException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <a href="#97509" title="java.lang.reflect.InvocationTargetException">ex</a>.<span title="()Throwable">getTargetException</span>
      <span class="delimiter">}</span>

    <a href="#97238" title="(c: Class[_])Option[java.lang.reflect.Method]">find</a><span class="delimiter">(</span><a href="#49602" title="Class[_]">typeOfField</a><span class="delimiter">)</span> <span title="(f: java.lang.reflect.Method =&gt; Option[AnyRef =&gt; Product1[Any]])Option[AnyRef =&gt; Product1[Any]]">flatMap</span><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="97534">m</a> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Class[_]" id="97535">pType</a> = <a href="#97534" title="java.lang.reflect.Method">m</a>.<span title="()Class[_]">getReturnType</span>

      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#49600" title="org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25427" title="(c: Class[_])Boolean">isSupported</a><span class="delimiter">(</span><a href="#97535" title="Class[_]">pType</a><span class="delimiter">)</span>,
        <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;enclosed type %s of CustomType %s is not a supported field type!&quot;</span>
        .<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#97535" title="Class[_]">pType</a>.<span title="()String">getName</span>, <a href="#49602" title="Class[_]">typeOfField</a>.<span title="()String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="java.lang.reflect.Constructor[_]" id="97536">c</a> = <a href="#49602" title="Class[_]">typeOfField</a>.<span title="(x$1: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Constructor[_$20]">getConstructor</span><span class="delimiter">(</span><a href="#97535" title="Class[_]">pType</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Object" id="97537">defaultValue</a> = <a href="#46847" title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object">createDefaultValue</a><span class="delimiter">(</span><a href="#49600" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#97536" title="java.lang.reflect.Constructor[_]">c</a>, <a href="#97535" title="Class[_]">pType</a>, <span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span>

      <span title="Option[AnyRef =&gt; Product1[Any]]" class="keyword">if</span><span class="delimiter">(</span><a href="#97537" title="Object">defaultValue</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="None.type">None</span>
      <span class="keyword">else</span>
        <span title="(x: AnyRef =&gt; Product1[Any])Some[AnyRef =&gt; Product1[Any]]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span>i: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> =&gt;
          <span title="FieldMetaData extends Product1[Any] with AnyRef" class="keyword">if</span><span class="delimiter">(</span><a href="#97563" title="AnyRef">i</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#97239" title="(c: java.lang.reflect.Constructor[_], value: AnyRef)Product1[Any]">invoke</a><span class="delimiter">(</span><a href="#97536" title="java.lang.reflect.Constructor[_]">c</a>, <a href="#97537" title="Object">defaultValue</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#97239" title="(c: java.lang.reflect.Constructor[_], value: AnyRef)Product1[Any]">invoke</a><span class="delimiter">(</span><a href="#97536" title="java.lang.reflect.Constructor[_]">c</a>, <a href="#97563" title="AnyRef">i</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(fieldType: Class[_], fmd: org.squeryl.internals.FieldMetaData)Int" id="46844">defaultFieldLength</a><span class="delimiter">(</span><a title="Class[_]" id="97169">fieldType</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="org.squeryl.internals.FieldMetaData" id="97170">fmd</a>: <a href="#8086" title="org.squeryl.internals.FieldMetaData">FieldMetaData</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Int" class="keyword">if</span><span class="delimiter">(</span>classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#97169" title="Class[_]">fieldType</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#97170" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24309" title="=&gt; Int">defaultLengthOfString</a>      
    <span class="keyword">else</span> <span title="Int" class="keyword">if</span><span class="delimiter">(</span>classOf<span title="Class[java.math.BigDecimal](classOf[java.math.BigDecimal])" class="delimiter">[</span>java.math.BigDecimal<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#97169" title="Class[_]">fieldType</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> classOf<span title="Class[scala.math.BigDecimal](classOf[scala.math.BigDecimal])" class="delimiter">[</span>scala.math.BigDecimal<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#97169" title="Class[_]">fieldType</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#97170" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24308" title="=&gt; (Int, Int)">defaultSizeOfBigDecimal</a>.<span title="=&gt; Int">_1</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#97170" title="org.squeryl.internals.FieldMetaData">fmd</a>.<a href="#49737" title="=&gt; org.squeryl.Schema">schema</a>.<a href="../Schema.scala.html#24238" title="=&gt; org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25428" title="(c: Class[_])Int">defaultColumnLength</a><span class="delimiter">(</span><a href="#97169" title="Class[_]">fieldType</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Boolean" id="46845">detectScalapOnClasspath</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="Class.type">Class</span>.<span title="(x$1: String)Class[_]">forName</span><span class="delimiter">(</span><span title="String(&quot;scala.tools.scalap.scalax.rules.scalasig.ByteCode&quot;)" class="string">&quot;scala.tools.scalap.scalax.rules.scalasig.ByteCode&quot;</span><span class="delimiter">)</span>
      <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span><span class="keyword">catch</span><span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Boolean(false)" id="98206">cnfe</a> : <span title="ClassNotFoundException">ClassNotFoundException</span> =&gt;
        <span title="Boolean(false)" class="keyword">false</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(member: java.lang.reflect.Member)Option[Class[_]]" id="46846">optionTypeFromScalaSig</a><span class="delimiter">(</span><a title="java.lang.reflect.Member" id="98215">member</a>: <span title="java.lang.reflect.Member">Member</span><span class="delimiter">)</span>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[scala.tools.scalap.scalax.rules.scalasig.ScalaSig]" id="98220">scalaSigOption</a> = <span title="scala.tools.scalap.scalax.rules.scalasig.ScalaSigParser.type">ScalaSigParser</span>.<span title="(clazz: Class[_])Option[scala.tools.scalap.scalax.rules.scalasig.ScalaSig]">parse</span><span class="delimiter">(</span><a href="#98215" title="java.lang.reflect.Member">member</a>.<span title="()Class[_]">getDeclaringClass</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#98220" title="Option[scala.tools.scalap.scalax.rules.scalasig.ScalaSig]">scalaSigOption</a> <span title="(f: scala.tools.scalap.scalax.rules.scalasig.ScalaSig =&gt; Option[Class[_]])Option[Class[_]]">flatMap</span> <span class="delimiter">{</span> <a title="scala.tools.scalap.scalax.rules.scalasig.ScalaSig" id="98397">scalaSig</a> =&gt;
      <span class="keyword">val</span> <a title="List[scala.tools.scalap.scalax.rules.scalasig.ClassSymbol]" id="98398">syms</a> = <a href="#98397" title="scala.tools.scalap.scalax.rules.scalasig.ScalaSig">scalaSig</a>.<span title="=&gt; List[scala.tools.scalap.scalax.rules.scalasig.ClassSymbol]">topLevelClasses</span>
      // Print classes
      <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="98399">baos</a> = <span title="java.io.ByteArrayOutputStream" class="keyword">new</span> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span>
      <span class="keyword">val</span> <a title="java.io.PrintStream" id="98400">stream</a> = <span title="java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><a href="#98399" title="java.io.ByteArrayOutputStream">baos</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.tools.scalap.scalax.rules.scalasig.ScalaSigPrinter" id="98401">printer</a> = <span title="scala.tools.scalap.scalax.rules.scalasig.ScalaSigPrinter" class="keyword">new</span> <span title="scala.tools.scalap.scalax.rules.scalasig.ScalaSigPrinter">ScalaSigPrinter</span><span class="delimiter">(</span><a href="#98400" title="java.io.PrintStream">stream</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.scalap.scalax.rules.scalasig.ClassSymbol" id="99052">c</a> &lt;- <a href="#98398" title="(f: scala.tools.scalap.scalax.rules.scalasig.ClassSymbol =&gt; Unit)Unit">syms</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#99052" title="scala.tools.scalap.scalax.rules.scalasig.ClassSymbol">c</a>.<span title="=&gt; String">path</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#98215" title="java.lang.reflect.Member">member</a>.<span title="()Class[_]">getDeclaringClass</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        	<a href="#98401" title="scala.tools.scalap.scalax.rules.scalasig.ScalaSigPrinter">printer</a>.<span title="(symbol: scala.tools.scalap.scalax.rules.scalasig.Symbol)Unit">printSymbol</span><span class="delimiter">(</span><a href="#99052" title="scala.tools.scalap.scalax.rules.scalasig.ClassSymbol">c</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="String" id="98402">fullSig</a> = <a href="#98399" title="java.io.ByteArrayOutputStream">baos</a>.<span title="()String">toString</span>
      <span class="keyword">val</span> <a title="java.util.regex.Matcher" id="98403">matcher</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;\s%s : scala.Option\[scala\.(\w+)\]?&quot;&quot;&quot;</span>.<span title="(args: Any*)String">format</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</span><a href="#98215" title="java.lang.reflect.Member">member</a>.<span title="()String">getName</span><span class="delimiter">)</span>.<span title="=&gt; scala.util.matching.Regex">r</span>.<span title="=&gt; java.util.regex.Pattern">pattern</span>.<span title="(x$1: CharSequence)java.util.regex.Matcher">matcher</span><span class="delimiter">(</span><a href="#98402" title="String">fullSig</a><span class="delimiter">)</span>
      <span title="Option[Class[_]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#98403" title="java.util.regex.Matcher">matcher</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#98403" title="java.util.regex.Matcher">matcher</a>.<span title="(x$1: Int)String">group</span><span title="Option[Class[_]]" class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424905" class="string">&quot;Int&quot;</a> =&gt; <span title="(x: Class[Int])Some[Class[Int]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Int](classOf[scala.Int])" class="delimiter">[</span>scala.Int<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424906" class="string">&quot;Short&quot;</a> =&gt; <span title="(x: Class[Short])Some[Class[Short]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Short](classOf[scala.Short])" class="delimiter">[</span>scala.Short<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424907" class="string">&quot;Long&quot;</a> =&gt; <span title="(x: Class[Long])Some[Class[Long]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Long](classOf[scala.Long])" class="delimiter">[</span>scala.Long<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424908" class="string">&quot;Double&quot;</a> =&gt; <span title="(x: Class[Double])Some[Class[Double]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Double](classOf[scala.Double])" class="delimiter">[</span>scala.Double<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424909" class="string">&quot;Float&quot;</a> =&gt; <span title="(x: Class[Float])Some[Class[Float]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Float](classOf[scala.Float])" class="delimiter">[</span>scala.Float<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424910" class="string">&quot;Boolean&quot;</a> =&gt; <span title="(x: Class[Boolean])Some[Class[Boolean]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Boolean](classOf[scala.Boolean])" class="delimiter">[</span>scala.Boolean<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424911" class="string">&quot;Byte&quot;</a> =&gt; <span title="(x: Class[Byte])Some[Class[Byte]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Byte](classOf[scala.Byte])" class="delimiter">[</span>scala.Byte<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#424888" title="Option[Class[_]]" id="424912" class="string">&quot;Char&quot;</a> =&gt; <span title="(x: Class[Char])Some[Class[Char]]">Some</span><a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Char](classOf[scala.Char])" class="delimiter">[</span>scala.Char<span class="delimiter">]</span><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt; <a href="#424914" title="(x: Option[Class[_]])Option[Class[_]]">None</a> //Unknown scala primitive type?
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span>
        <span title="None.type">None</span> //Pattern was not found anywhere in the signature
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object" id="46847">createDefaultValue</a><span class="delimiter">(</span><a title="org.squeryl.internals.FieldMapper" id="49548">fieldMapper</a>: <a href="FieldMapper.scala.html#8065" title="org.squeryl.internals.FieldMapper">FieldMapper</a>, <a title="java.lang.reflect.Member" id="49549">member</a>: <span title="java.lang.reflect.Member">Member</span>, <a title="Class[_]" id="49550">p</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="Option[java.lang.reflect.Type]" id="49551">t</a>: <span title="Option[java.lang.reflect.Type]">Option</span><span class="delimiter">[</span>Type<span class="delimiter">]</span>, <a title="Option[org.squeryl.annotations.Column]" id="49552">optionFieldsInfo</a>: <span title="Option[org.squeryl.annotations.Column]">Option</span><span class="delimiter">[</span>Column<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Object">Object</span> = <span class="delimiter">{</span>
    <span title="Object" class="keyword">if</span> <span class="delimiter">(</span><a href="#49550" title="Class[_]">p</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span>classOf<span title="Class[Option[Any]](classOf[scala.Option])" class="delimiter">[</span>Option<span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      /*
       * First we'll look at the annotation if it exists as it's the lowest cost.
       */
       <a href="#49552" title="Option[org.squeryl.annotations.Column]">optionFieldsInfo</a>.<span title="(f: org.squeryl.annotations.Column =&gt; Option[Object])Option[Object]">flatMap</span><span class="delimiter">(</span><a title="org.squeryl.annotations.Column" id="99757">ann</a> =&gt; 
         <span title="Option[Object]" class="keyword">if</span><span class="delimiter">(</span><a href="#99757" title="org.squeryl.annotations.Column">ann</a>.<a href="../annotations/ColumnBase.java.html#46908" title="()Class[_]">optionType</a> <span title="(x$1: AnyRef)Boolean">!=</span> classOf<span title="Class[Object](classOf[java.lang.Object])" class="delimiter">[</span>Object<span class="delimiter">]</span><span class="delimiter">)</span>
           <span title="(x: Object)Some[Object]">Some</span><span class="delimiter">(</span><a href="#46847" title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object">createDefaultValue</a><span class="delimiter">(</span><a href="#49548" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#49549" title="java.lang.reflect.Member">member</a>, <a href="#99757" title="org.squeryl.annotations.Column">ann</a>.<a href="../annotations/ColumnBase.java.html#46908" title="()Class[_]">optionType</a>, <span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="None.type">None</span><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[Object])Option[Object]">orElse</span><span class="delimiter">{</span>
	      /*
	       * Next we'll try the Java generic type.  This will fail if the generic parameter is a primitive as
	       * we'll see Object instead of scala.X
	       */
	      <a href="#49551" title="Option[java.lang.reflect.Type]">t</a> <span class="keyword">match</span> <span class="delimiter">{</span>
	        <span class="keyword">case</span> Some<a href="#424964" title="Option[Object]" id="424965" class="delimiter">(</a><a href="#424965" title="java.lang.reflect.Type" id="99790">pt</a>: ParameterizedType<span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
	          pt.<span title="(xs: Array[java.lang.reflect.Type])scala.collection.mutable.ArrayOps[java.lang.reflect.Type]">getActualTypeArguments</span>.<a href="#424968" title="(x: Option[Object])Option[Object]">toList</a> <span class="keyword">match</span> <span class="delimiter">{</span>
	            <span class="keyword">case</span> <a href="#424952" title="java.lang.reflect.Type" id="99923">oType</a> <a href="#424950" title="Option[Object]" id="424952">::</a> <a href="#424952" title="List[java.lang.reflect.Type]" id="424954">Nil</a> =&gt; <span class="delimiter">{</span>
	              <a href="#424956" title="(x: Option[Object])Option[Object]" class="keyword">if</a><span class="delimiter">(</span>classOf<span title="Class[Class[_]](classOf[java.lang.Class])" class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(x$1: Any)Boolean">isInstance</span><span class="delimiter">(</span><a href="#99923" title="java.lang.reflect.Type">oType</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	                /*
	                 * Primitive types are seen by Java reflection as classOf[Object], 
	                 * if that's what we find then we need to get the real value from @ScalaSignature
	                 */
	                <span class="keyword">val</span> <a title="Option[Class[_]]" id="99928">trueTypeOption</a> = 
	                  <span title="Option[Class[_]]" class="keyword">if</span> <span class="delimiter">(</span>classOf<span title="Class[Object](classOf[java.lang.Object])" class="delimiter">[</span>Object<span class="delimiter">]</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#99923" title="java.lang.reflect.Type">oType</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#46845" title="()Boolean">detectScalapOnClasspath</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#46846" title="(member: java.lang.reflect.Member)Option[Class[_]]">optionTypeFromScalaSig</a><span class="delimiter">(</span><a href="#49549" title="java.lang.reflect.Member">member</a><span class="delimiter">)</span> 
	                  <span class="keyword">else</span> <span title="(x: Class[_$27])Some[Class[_$27]]">Some</span><span class="delimiter">(</span><a href="#99923" title="java.lang.reflect.Type">oType</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$27]" class="delimiter">[</span><span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
	                <a href="#99928" title="Option[Class[_]]">trueTypeOption</a> <span title="(f: Class[_] =&gt; Option[Object])Option[Object]">flatMap</span> <span class="delimiter">{</span> <a title="Class[_]" id="99948">trueType</a> =&gt;
	                  <span class="keyword">val</span> <a title="Object" id="99949">deduced</a> = <a href="#46847" title="(fieldMapper: org.squeryl.internals.FieldMapper, member: java.lang.reflect.Member, p: Class[_], t: Option[java.lang.reflect.Type], optionFieldsInfo: Option[org.squeryl.annotations.Column])Object">createDefaultValue</a><span class="delimiter">(</span><a href="#49548" title="org.squeryl.internals.FieldMapper">fieldMapper</a>, <a href="#49549" title="java.lang.reflect.Member">member</a>, <a href="#99948" title="Class[_]">trueType</a>, <span title="None.type">None</span>, <a href="#49552" title="Option[org.squeryl.annotations.Column]">optionFieldsInfo</a><span class="delimiter">)</span>
	                  <span title="Option[Object]" class="keyword">if</span> <span class="delimiter">(</span><a href="#99949" title="Object">deduced</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
	                    <span title="(x: Object)Some[Object]">Some</span><span class="delimiter">(</span><a href="#99949" title="Object">deduced</a><span class="delimiter">)</span>
	                  <span class="keyword">else</span>
	                    <span title="None.type">None</span> //Couldn't create default for type param
	                <span class="delimiter">}</span>
	              <span class="delimiter">}</span> <span class="keyword">else</span><span class="delimiter">{</span>
	            	  <span title="None.type">None</span> //Type parameter is not a Class
	              <span class="delimiter">}</span>
	            <span class="delimiter">}</span>
	            <span class="keyword">case</span> _ =&gt; <a href="#424956" title="(x: Option[Object])Option[Object]">None</a> //Not a single type parameter
	          <span class="delimiter">}</span>
	        <span class="delimiter">}</span>
	        <span class="keyword">case</span> _ =&gt; <a href="#424968" title="(x: Option[Object])Option[Object]">None</a> //Not a parameterized type
	      <span class="delimiter">}</span> 
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> 
    <span class="keyword">else</span> <span class="delimiter">{</span>      
      <a href="#49548" title="org.squeryl.internals.FieldMapper">fieldMapper</a>.<a href="FieldMapper.scala.html#25433" title="(c: Class[_])AnyRef">trySampleValueFor</a><span class="delimiter">(</span><a href="#49550" title="Class[_]">p</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>