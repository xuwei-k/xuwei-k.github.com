<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/servlet/FileUploadSupport.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra.servlet

import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
import java.util.<span class="delimiter">{</span>HashMap =&gt; JHashMap, Map =&gt; JMap<span class="delimiter">}</span>
import org.scalatra.ScalatraBase
import org.scalatra.util._
import java.io.<span class="delimiter">{</span> File, FileOutputStream <span class="delimiter">}</span>
import javax.servlet.http._
import org.scalatra.util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._
import scala.io.Codec
import org.scalatra.util.io

<span class="comment">/** FileUploadSupport can be mixed into a [[org.scalatra.ScalatraFilter]]
  * or [[org.scalatra.ScalatraServlet]] to provide easy access to data
  * submitted as part of a multipart HTTP request.  Commonly this is used for
  * retrieving uploaded files.
  *
  * Once the trait has been mixed into your handler, you need to enable multipart
  * configuration in your ''web.xml'' or by using `@MultipartConfig` annotation. To
  * configure in ''web.xml'' add `&lt;multipart-config /&gt;` to your `&lt;servlet&gt;` element. If you
  * prefer annotations instead, place `@MultipartConfig` to your handler. Both ways
  * provide some further configuration options, such as specifying the max total request size
  * and max size for invidual files in the request. You might want to set these to prevent
  * users from uploading too large files.
  *
  * When the configuration has been done, you can access any files using
  * `fileParams(&quot;myFile&quot;)` where ''myFile'' is the name
  * of the parameter used to upload the file being retrieved. If you are
  * expecting multiple files with the same name, you can use
  * `fileMultiParams(&quot;files[]&quot;)` to access them all.
  *
  * To handle any errors that are caused by multipart handling, you need
  * to configure an error handler to your handler class:
  *
  * {{{
  * import org.scalatra.servlet.SizeLimitExceededException
  * import org.scalatra.servlet.FileUploadSupport
  *
  * @MultipartConfig(maxFileSize=1024*1024)
  * class FileEaterServlet extends ScalatraServlet with FileUploadSupport {
  *   error {
  *     case e: SizeConstrainttExceededException =&gt; &quot;Oh, too much! Can't take it all.&quot;
  *     case e: IOException                      =&gt; &quot;Server denied me my meal, thanks anyway.&quot;
  *   }
  *
  *   post(&quot;/eatfile&quot;) {
  *     &quot;Thanks! You just provided me &quot; + fileParams(&quot;lunch&quot;).size + &quot; bytes for a lunch.&quot;
  *   }
  * }
  * }}}
  *
  }}* @note Once any handler with FileUploadSupport has accessed the request, the
  *       fileParams returned by FileUploadSupport will remain fixed for the
  *       lifetime of the request.
  *
  * @note Will not work on Jetty versions prior to 8.1.3.  See
  * https://bugs.eclipse.org/bugs/show_bug.cgi?id=376324.  The old
  * scalatra-fileupload module still works for earlier versions
  * of Jetty.
  */</span>
trait <a title="trait FileUploadSupport extends AnyRef with org.scalatra.servlet.ServletBase with org.scalatra.servlet.HasMultipartConfig" id="org.scalatra.servlet;FileUploadSupport">FileUploadSupport</a> extends <a href="ServletBase.scala.html#org.scalatra.servlet;ServletBase" title="org.scalatra.servlet.ServletBase">ServletBase</a> with <a href="HasMultipartConfig.scala.html#org.scalatra.servlet;HasMultipartConfig" title="org.scalatra.servlet.HasMultipartConfig">HasMultipartConfig</a> <span class="delimiter">{</span>

  import <a href="#org.scalatra.servlet.FileUploadSupport" title="org.scalatra.servlet.FileUploadSupport.type">FileUploadSupport</a>._

  <span class="comment">/* Called for any exceptions thrown by handling file uploads
   * to detect whether it signifies a too large file being
   * uploaded or a too large request in general.
   *
   * This can be overriden for the container being used if it
   * doesn't throw `IllegalStateException` or if it throws
   * `IllegalStateException` for some other reason.
   */</span>
  protected def <a title="(e: Exception)Boolean" id="org.scalatra.servlet;FileUploadSupport.isSizeConstraintException">isSizeConstraintException</a><span class="delimiter">(</span><a title="Exception" id="org.scalatra.servlet;FileUploadSupport.isSizeConstraintException.e">e</a>: <span title="Exception">Exception</span><span class="delimiter">)</span> = <a href="#org.scalatra.servlet;FileUploadSupport.isSizeConstraintException.e" title="Exception">e</a> match <span class="delimiter">{</span>
    case _: <span title="IllegalStateException">IllegalStateException</span> =&gt; true
    case _ =&gt; false
  <span class="delimiter">}</span>

  override def <a title="(req: javax.servlet.http.HttpServletRequest, res: javax.servlet.http.HttpServletResponse)Unit" id="org.scalatra.servlet;FileUploadSupport.handle">handle</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.handle.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.servlet;FileUploadSupport.handle.res">res</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.handle.req2">req2</a> = try <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.isMultipartRequest" title="(req: javax.servlet.http.HttpServletRequest)Boolean">isMultipartRequest</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="org.scalatra.servlet.FileUploadSupport.BodyParams" id="org.scalatra.servlet;FileUploadSupport.handle.req2.bodyParams">bodyParams</a> = <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams" title="(req: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileUploadSupport.BodyParams">extractMultipartParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span>
        val <a title="Map[String,List[String]]" id="org.scalatra.servlet;FileUploadSupport.handle.req2.mergedFormParams">mergedFormParams</a> = <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString" title="(req: javax.servlet.http.HttpServletRequest, bodyParams: org.scalatra.servlet.FileUploadSupport.BodyParams)Map[String,List[String]]">mergeFormParamsWithQueryString</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>, <a href="#org.scalatra.servlet;FileUploadSupport.handle.req2.bodyParams" title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</a><span class="delimiter">)</span>

        <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest" title="(req: javax.servlet.http.HttpServletRequest, formMap: Map[String,Seq[String]])javax.servlet.http.HttpServletRequestWrapper">wrapRequest</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>, <a href="#org.scalatra.servlet;FileUploadSupport.handle.req2.mergedFormParams" title="Map[String,List[String]]">mergedFormParams</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Exception" id="org.scalatra.servlet;FileUploadSupport.handle.req2.e">e</a>: <span title="Exception">Exception</span> =&gt; <span class="delimiter">{</span>
        <a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="(x$1: String, x$2: Any)Unit">setAttribute</span><span class="delimiter">(</span><a href="../ScalatraBase.scala.html#org.scalatra.ScalatraBase" title="org.scalatra.ScalatraBase.type">ScalatraBase</a>.<a href="../ScalatraBase.scala.html#org.scalatra.ScalatraBase.PrehandleExceptionKey" title="=&gt; String">PrehandleExceptionKey</a>, <a href="#org.scalatra.servlet;FileUploadSupport.handle.req2.e" title="Exception">e</a><span class="delimiter">)</span>
        <a href="#org.scalatra.servlet;FileUploadSupport.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    super.<a href="ServletBase.scala.html#org.scalatra.servlet;ServletBase.handle" title="(request: javax.servlet.http.HttpServletRequest, response: javax.servlet.http.HttpServletResponse)Unit">handle</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.handle.req2" title="javax.servlet.http.HttpServletRequest">req2</a>, <a href="#org.scalatra.servlet;FileUploadSupport.handle.res" title="javax.servlet.http.HttpServletResponse">res</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(req: javax.servlet.http.HttpServletRequest)Boolean" id="org.scalatra.servlet;FileUploadSupport.isMultipartRequest">isMultipartRequest</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.isMultipartRequest.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val <a title="Boolean" id="org.scalatra.servlet;FileUploadSupport.isMultipartRequest.isPostOrPut">isPostOrPut</a> = <span title="(elems: String*)scala.collection.immutable.Set[String]">Set</span><span class="delimiter">(</span><span title="String(&quot;POST&quot;)" class="string">&quot;POST&quot;</span>, <span title="String(&quot;PUT&quot;)" class="string">&quot;PUT&quot;</span>, <span title="String(&quot;PATCH&quot;)" class="string">&quot;PATCH&quot;</span><span class="delimiter">)</span>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.isMultipartRequest.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getMethod</span><span class="delimiter">)</span>
    <a href="#org.scalatra.servlet;FileUploadSupport.isMultipartRequest.isPostOrPut" title="Boolean">isPostOrPut</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">req</a>.<a href="RichRequest.scala.html#org.scalatra.servlet;RichRequest.contentType" title="=&gt; Option[String]">contentType</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.isMultipartRequest.contentType">contentType</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.servlet;FileUploadSupport.isMultipartRequest.contentType" title="String">contentType</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;multipart/&quot;)" class="string">&quot;multipart/&quot;</span><span class="delimiter">)</span>
      case _ =&gt; false
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(req: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileUploadSupport.BodyParams" id="org.scalatra.servlet;FileUploadSupport.extractMultipartParams">extractMultipartParams</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.extractMultipartParams.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="org.scalatra.servlet.FileUploadSupport.BodyParams">BodyParams</a> = <span class="delimiter">{</span>
    <a href="ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">req</a>.<a href="AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileUploadSupport.BodyParamsKey" title="=&gt; String">BodyParamsKey</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[org.scalatra.servlet.FileUploadSupport.BodyParams]" class="delimiter">[</span><span title="Option[org.scalatra.servlet.FileUploadSupport.BodyParams]">Option</span><span class="delimiter">[</span>BodyParams<span class="delimiter">]</span><span class="delimiter">]</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><span title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</span><span class="delimiter">)</span> =&gt;
        <span title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</span>

      case <span title="None.type">None</span> =&gt; <span class="delimiter">{</span>
        val <span title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</span> = <a href="#org.scalatra.servlet;FileUploadSupport.getParts" title="(req: javax.servlet.http.HttpServletRequest)Iterable[javax.servlet.http.Part]">getParts</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span>.<span title="(z: org.scalatra.servlet.FileUploadSupport.BodyParams)(op: (javax.servlet.http.Part, org.scalatra.servlet.FileUploadSupport.BodyParams) =&gt; org.scalatra.servlet.FileUploadSupport.BodyParams)org.scalatra.servlet.FileUploadSupport.BodyParams">foldRight</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="(fileParams: org.scalatra.servlet.FileMultiParams, formParams: Map[String,List[String]])org.scalatra.servlet.FileUploadSupport.BodyParams">BodyParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileMultiParams.apply(accba7d523)" title="()org.scalatra.servlet.FileMultiParams">FileMultiParams</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="delimiter">(</span><a title="javax.servlet.http.Part" id="org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.part">part</a>, <a title="org.scalatra.servlet.FileUploadSupport.BodyParams" id="org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params">params</a><span class="delimiter">)</span> =&gt;
            val <a title="org.scalatra.servlet.FileItem" id="org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item">item</a> = <a href="#org.scalatra.servlet.FileItem.readResolve" title="(part: javax.servlet.http.Part)org.scalatra.servlet.FileItem">FileItem</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.part" title="javax.servlet.http.Part">part</a><span class="delimiter">)</span>

            if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.isFormField" title="=&gt; Boolean">isFormField</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="(fileParams: org.scalatra.servlet.FileMultiParams, formParams: Map[String,List[String]])org.scalatra.servlet.FileUploadSupport.BodyParams">BodyParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.fileParams" title="=&gt; org.scalatra.servlet.FileMultiParams">fileParams</a> <a href="#org.scalatra.servlet;FileMultiParams.+(ad66b68194)" title="(kv: (String, Seq[org.scalatra.servlet.FileItem]))org.scalatra.servlet.FileMultiParams">+</a> <span class="delimiter">(</span><span title="(_1: String, _2: Seq[org.scalatra.servlet.FileItem])(String, Seq[org.scalatra.servlet.FileItem])" class="delimiter">(</span>
                <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.getFieldName" title="=&gt; String">getFieldName</a>, <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a> <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.x$1" title="(elem: org.scalatra.servlet.FileItem)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.scalatra.servlet.FileItem],org.scalatra.servlet.FileItem,Seq[org.scalatra.servlet.FileItem]])Seq[org.scalatra.servlet.FileItem]">+:</a> <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.fileParams" title="=&gt; org.scalatra.servlet.FileMultiParams">fileParams</a>.<span title="(key: String, default: =&gt; Seq[org.scalatra.servlet.FileItem])Seq[org.scalatra.servlet.FileItem]">getOrElse</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.getFieldName" title="=&gt; String">getFieldName</a>, List<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.formParams" title="=&gt; Map[String,List[String]]">formParams</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="(fileParams: org.scalatra.servlet.FileMultiParams, formParams: Map[String,List[String]])org.scalatra.servlet.FileUploadSupport.BodyParams">BodyParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.fileParams" title="=&gt; org.scalatra.servlet.FileMultiParams">fileParams</a>, <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.formParams" title="=&gt; Map[String,List[String]]">formParams</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+</span> <span class="delimiter">(</span>
                <span title="(_1: String, _2: List[String])(String, List[String])" class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.getFieldName" title="=&gt; String">getFieldName</a>, <a href="#org.scalatra.servlet;FileUploadSupport.fileItemToString" title="(item: org.scalatra.servlet.FileItem)String">fileItemToString</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a><span class="delimiter">)</span> <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.x$2" title="(x: String)List[String]">::</a>
                  <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.params" title="org.scalatra.servlet.FileUploadSupport.BodyParams">params</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.formParams" title="=&gt; Map[String,List[String]]">formParams</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.bodyParams.$anonfun.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.getFieldName" title="=&gt; String">getFieldName</a>, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="delimiter">)</span>
                <span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="(x$1: String, x$2: Any)Unit">setAttribute</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileUploadSupport.BodyParamsKey" title="=&gt; String">BodyParamsKey</a>, <span title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</span><span class="delimiter">)</span>
        <span title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(req: javax.servlet.http.HttpServletRequest)Iterable[javax.servlet.http.Part]" id="org.scalatra.servlet;FileUploadSupport.getParts">getParts</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.getParts.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.isMultipartRequest" title="(req: javax.servlet.http.HttpServletRequest)Boolean">isMultipartRequest</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.getParts.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#org.scalatra.servlet;FileUploadSupport.getParts.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="(i: java.util.Collection[javax.servlet.http.Part])scala.collection.convert.Decorators.AsScala[Iterable[javax.servlet.http.Part]]">getParts</span>.<span title="=&gt; Iterable[javax.servlet.http.Part]">asScala</span> else <span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[javax.servlet.http.Part]" class="delimiter">[</span><span title="javax.servlet.http.Part">Part</span><span class="delimiter">]</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Exception" id="org.scalatra.servlet;FileUploadSupport.getParts.e">e</a>: <span title="Exception">Exception</span> if <a href="#org.scalatra.servlet;FileUploadSupport.isSizeConstraintException" title="(e: Exception)Boolean">isSizeConstraintException</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.getParts.e" title="Exception">e</a><span class="delimiter">)</span> =&gt; throw new <a href="SizeConstraintExceededException.scala.html#org.scalatra.servlet;SizeConstraintExceededException" title="org.scalatra.servlet.SizeConstraintExceededException">SizeConstraintExceededException</a><span class="delimiter">(</span><span title="String(&quot;Too large request or file&quot;)" class="string">&quot;Too large request or file&quot;</span>, <a href="#org.scalatra.servlet;FileUploadSupport.getParts.e" title="Exception">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(item: org.scalatra.servlet.FileItem)String" id="org.scalatra.servlet;FileUploadSupport.fileItemToString">fileItemToString</a><span class="delimiter">(</span><a title="org.scalatra.servlet.FileItem" id="org.scalatra.servlet;FileUploadSupport.fileItemToString.item">item</a>: <a href="#org.scalatra.servlet.FileItem.readResolve" title="org.scalatra.servlet.FileItem">FileItem</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
<span class="comment">//    val charset = item.charset getOrElse defaultCharacterEncoding</span>
    new <span title="String">String</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileItemToString.item" title="org.scalatra.servlet.FileItem">item</a>.<a href="#org.scalatra.servlet;FileItem.get" title="()Array[Byte]">get</a><span title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: Byte =&gt; Char)(implicit bf: scala.collection.generic.CanBuildFrom[Array[Byte],Char,Array[Char]])Array[Char]">map</span><span title="(implicit t: scala.reflect.ClassTag[Char])scala.collection.generic.CanBuildFrom[Array[_],Char,Array[Char]]" class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileItemToString.$anonfun.x$3" title="Byte">_</a>.<span title="=&gt; Char">toChar</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(req: javax.servlet.http.HttpServletRequest, bodyParams: org.scalatra.servlet.FileUploadSupport.BodyParams)Map[String,List[String]]" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString">mergeFormParamsWithQueryString</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="org.scalatra.servlet.FileUploadSupport.BodyParams" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.bodyParams">bodyParams</a>: <a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="org.scalatra.servlet.FileUploadSupport.BodyParams">BodyParams</a><span class="delimiter">)</span>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    var <a title="Map[String,List[String]]" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.mergedParams">mergedParams</a> = <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.bodyParams" title="org.scalatra.servlet.FileUploadSupport.BodyParams">bodyParams</a>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.formParams" title="=&gt; Map[String,List[String]]">formParams</a>
    <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="(m: java.util.Map[String,Array[String]])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,Array[String]]]">getParameterMap</span>.<span title="=&gt; scala.collection.mutable.Map[String,Array[String]]">asScala</span> <span title="(f: ((String, Array[String])) =&gt; Unit)Unit">foreach</span> <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.name">name</a>, <a title="Array[String]" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.values">values</a><span class="delimiter">)</span> =&gt;
        val <a title="List[String]" id="org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.formValues">formValues</a> = <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.mergedParams" title="Map[String,List[String]]">mergedParams</a>.<span title="(key: String, default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.name" title="String">name</a>, <span title="scala.collection.immutable.List.type">List</span>.<span title="List[Nothing]">empty</span><span class="delimiter">)</span>
        <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.mergedParams" title="Map[String,List[String]]">mergedParams</a> <span title="(kv: (String, List[String]))scala.collection.immutable.Map[String,List[String]]">+=</span> <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.name" title="(self: String)ArrowAssoc[String]">name</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.values" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">values</a>.<span title="=&gt; List[String]">toList</span> <span title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">++</span> <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.$anonfun.formValues" title="List[String]">formValues</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#org.scalatra.servlet;FileUploadSupport.mergeFormParamsWithQueryString.mergedParams" title="Map[String,List[String]]">mergedParams</a>
  <span class="delimiter">}</span>

  private def <a title="(req: javax.servlet.http.HttpServletRequest, formMap: Map[String,Seq[String]])javax.servlet.http.HttpServletRequestWrapper" id="org.scalatra.servlet;FileUploadSupport.wrapRequest">wrapRequest</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="Map[String,Seq[String]]" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.formMap">formMap</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="javax.servlet.http.HttpServletRequestWrapper" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped">wrapped</a> = new <a title="&lt;$anon: javax.servlet.http.HttpServletRequestWrapper&gt; extends javax.servlet.http.HttpServletRequestWrapper" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon">HttpServletRequestWrapper</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      override def <a title="(name: String)String" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameter">getParameter</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameter.name">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.formMap" title="Map[String,Seq[String]]">formMap</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameter.name" title="String">name</a><span class="delimiter">)</span> <span title="(f: Seq[String] =&gt; String)Option[String]">map</span> <span class="delimiter">{</span>
        <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameter.$anonfun.x$4" title="Seq[String]">_</a>.<span title="=&gt; String">head</span>
      <span class="delimiter">}</span> <span title="(default: =&gt; String)String">getOrElse</span> null

      override def <a title="()java.util.Enumeration[String]" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterNames">getParameterNames</a> = <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.formMap" title="Map[String,Seq[String]]">formMap</a>.<span title="(i: Iterator[String])scala.collection.convert.Decorators.AsJavaEnumeration[String]">keysIterator</span>.<span title="=&gt; java.util.Enumeration[String]">asJavaEnumeration</span>

      override def <a title="(name: String)Array[String]" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterValues">getParameterValues</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterValues.name">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.formMap" title="Map[String,Seq[String]]">formMap</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterValues.name" title="String">name</a><span class="delimiter">)</span> <span title="(f: Seq[String] =&gt; Array[String])Option[Array[String]]">map</span> <span class="delimiter">{</span>
        <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterValues.$anonfun.x$5" title="Seq[String]">_</a>.<span title="(implicit evidence$1: scala.reflect.ClassTag[String])Array[String]">toArray</span>
      <span class="delimiter">}</span> <span title="(default: =&gt; Array[String])Array[String]">getOrElse</span> null

      override def <a title="()java.util.Map[String,Array[String]]" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterMap">getParameterMap</a> = <span class="delimiter">(</span>new <span title="java.util.HashMap[String,Array[String]]">JHashMap</span><span class="delimiter">[</span>String, Array<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; scala.collection.mutable.Map[String,Array[String]]">asScala</span> <span title="(m: scala.collection.mutable.Map[String,Array[String]])scala.collection.convert.Decorators.AsJava[java.util.Map[String,Array[String]]]">++</span> <span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.formMap" title="Map[String,Seq[String]]">formMap</a> <span title="(f: (String, Seq[String]) =&gt; Array[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Seq[String]],(String, Array[String]),scala.collection.immutable.Map[String,Array[String]]])scala.collection.immutable.Map[String,Array[String]]">transform</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterMap.$anonfun.k">k</a>, <a title="Seq[String]" id="org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterMap.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped;$anon.getParameterMap.$anonfun.v" title="Seq[String]">v</a>.<span title="(implicit evidence$1: scala.reflect.ClassTag[String])Array[String]">toArray</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; java.util.Map[String,Array[String]]">asJava</span>
    <span class="delimiter">}</span>
    <a href="#org.scalatra.servlet;FileUploadSupport.wrapRequest.wrapped" title="javax.servlet.http.HttpServletRequestWrapper">wrapped</a>
  <span class="delimiter">}</span>

  def <a title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet;FileUploadSupport.fileMultiParams(c7bc103bc3)">fileMultiParams</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.fileMultiParams(c7bc103bc3).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a> = <a href="#org.scalatra.servlet;FileUploadSupport.extractMultipartParams" title="(req: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileUploadSupport.BodyParams">extractMultipartParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileMultiParams(c7bc103bc3).request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span>.<a href="#org.scalatra.servlet.FileUploadSupport;BodyParams.fileParams" title="=&gt; org.scalatra.servlet.FileMultiParams">fileParams</a>
  def <a title="(key: String)(implicit request: javax.servlet.http.HttpServletRequest)Seq[org.scalatra.servlet.FileItem]" id="org.scalatra.servlet;FileUploadSupport.fileMultiParams(166c5a1ac6)">fileMultiParams</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.fileMultiParams(166c5a1ac6).key">key</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.fileMultiParams(166c5a1ac6).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <span title="Seq[org.scalatra.servlet.FileItem]">Seq</span><span class="delimiter">[</span>FileItem<span class="delimiter">]</span> = <a href="#org.scalatra.servlet;FileUploadSupport.fileMultiParams(c7bc103bc3)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileMultiParams">fileMultiParams</a><span title="(key: String)Seq[org.scalatra.servlet.FileItem]" class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileMultiParams(166c5a1ac6).request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileMultiParams(166c5a1ac6).key" title="String">key</a><span class="delimiter">)</span>

  <span class="comment">/**
   * @return a Map, keyed on the names of multipart file upload parameters,
   *         of all multipart files submitted with the request
   */</span>
  def <a title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.util.MultiMapHeadView[String,org.scalatra.servlet.FileItem]" id="org.scalatra.servlet;FileUploadSupport.fileParams(dc54d2a0fe)">fileParams</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.fileParams(dc54d2a0fe).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> = new <a title="&lt;$anon: String =&gt; org.scalatra.servlet.FileItem&gt; extends AnyRef with org.scalatra.util.MultiMapHeadView[String,org.scalatra.servlet.FileItem]" id="org.scalatra.servlet;FileUploadSupport.fileParams(dc54d2a0fe);$anon">MultiMapHeadView</a><span class="delimiter">[</span>String, FileItem<span class="delimiter">]</span> <span class="delimiter">{</span>
    protected def <a title="=&gt; org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet;FileUploadSupport.fileParams(dc54d2a0fe);$anon.multiMap">multiMap</a> = <a href="#org.scalatra.servlet;FileUploadSupport.fileMultiParams(c7bc103bc3)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileMultiParams">fileMultiParams</a>
  <span class="delimiter">}</span>

  def <a title="(key: String)(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.FileItem" id="org.scalatra.servlet;FileUploadSupport.fileParams(b9576bdea7)">fileParams</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileUploadSupport.fileParams(b9576bdea7).key">key</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;FileUploadSupport.fileParams(b9576bdea7).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="#org.scalatra.servlet.FileItem.readResolve" title="org.scalatra.servlet.FileItem">FileItem</a> = <a href="#org.scalatra.servlet;FileUploadSupport.fileParams(dc54d2a0fe)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.util.MultiMapHeadView[String,org.scalatra.servlet.FileItem]">fileParams</a><span title="(key: String)org.scalatra.servlet.FileItem" class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileParams(b9576bdea7).request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileUploadSupport.fileParams(b9576bdea7).key" title="String">key</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

object <a title="org.scalatra.servlet.FileUploadSupport.type" id="org.scalatra.servlet.FileUploadSupport">FileUploadSupport</a> <a href="#org.scalatra.servlet.FileUploadSupport" title="org.scalatra.servlet.FileUploadSupport.type" class="delimiter">{</a>
  private val <a title="String" id="org.scalatra.servlet.FileUploadSupport.BodyParamsKey">BodyParamsKey</a> = <span title="String(&quot;org.scalatra.fileupload.bodyParams&quot;)" class="string">&quot;org.scalatra.fileupload.bodyParams&quot;</span>

  case class <a title="class BodyParams extends AnyRef with Product with Serializable" id="org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve">BodyParams</a><a href="#org.scalatra.servlet.FileUploadSupport.BodyParams.readResolve" title="Product" class="delimiter">(</a><a title="org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet.FileUploadSupport;BodyParams.fileParams">fileParams</a>: <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a>, <a title="Map[String,List[String]]" id="org.scalatra.servlet.FileUploadSupport;BodyParams.formParams">formParams</a>: <span title="Map[String,List[String]]">Map</span><span class="delimiter">[</span>String, List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

class <a title="class FileMultiParams extends AnyRef with Map[String,Seq[org.scalatra.servlet.FileItem]]" id="org.scalatra.servlet;FileMultiParams">FileMultiParams</a><a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams" class="delimiter">(</a><a title="Map[String,Seq[org.scalatra.servlet.FileItem]]" id="org.scalatra.servlet.FileMultiParams.<init>$default$1">wrapped</a>: <span title="Map[String,Seq[org.scalatra.servlet.FileItem]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span> extends <a href="#org.scalatra.servlet;FileMultiParams" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">Map</a><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>

  def <a title="(key: String)Option[Seq[org.scalatra.servlet.FileItem]]" id="org.scalatra.servlet;FileMultiParams.get(151fee64ec)">get</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileMultiParams.get(151fee64ec).key">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Seq[org.scalatra.servlet.FileItem]]">Option</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a>.<span title="(key: String)Option[Seq[org.scalatra.servlet.FileItem]]">get</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileMultiParams.get(151fee64ec).key" title="String">key</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[Seq[org.scalatra.servlet.FileItem]])Option[Seq[org.scalatra.servlet.FileItem]]">orElse</span> <a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a>.<span title="(key: String)Option[Seq[org.scalatra.servlet.FileItem]]">get</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileMultiParams.get(151fee64ec).key" title="String">key</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;[]&quot;)" class="string">&quot;[]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(key: Symbol)Option[Seq[org.scalatra.servlet.FileItem]]" id="org.scalatra.servlet;FileMultiParams.get(645d70a029)">get</a><span class="delimiter">(</span><a title="Symbol" id="org.scalatra.servlet;FileMultiParams.get(645d70a029).key">key</a>: <span title="Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Option[Seq[org.scalatra.servlet.FileItem]]">Option</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#org.scalatra.servlet;FileMultiParams.get(151fee64ec)" title="(key: String)Option[Seq[org.scalatra.servlet.FileItem]]">get</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileMultiParams.get(645d70a029).key" title="Symbol">key</a>.<span title="=&gt; String">name</span><span class="delimiter">)</span>

  def <a title="[B1 &gt;: Seq[org.scalatra.servlet.FileItem]](kv: (String, B1))org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet;FileMultiParams.+(ad66b68194)">+</a><span class="delimiter">[</span><a title=" &gt;: Seq[org.scalatra.servlet.FileItem]" id="org.scalatra.servlet;FileMultiParams.+(ad66b68194);B1">B1</a> &gt;: Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="(String, B1)" id="org.scalatra.servlet;FileMultiParams.+(ad66b68194).kv">kv</a>: <span title="(String, B1)" class="delimiter">(</span>String, B1<span class="delimiter">)</span><span class="delimiter">)</span> =
    new <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a> <span title="(kv: (String, Seq[org.scalatra.servlet.FileItem]))scala.collection.immutable.Map[String,Seq[org.scalatra.servlet.FileItem]]">+</span> <a href="#org.scalatra.servlet;FileMultiParams.+(ad66b68194).kv" title="(String, B1)">kv</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="(String, Seq[org.scalatra.servlet.FileItem])" class="delimiter">[</span><span title="(String, Seq[org.scalatra.servlet.FileItem])" class="delimiter">(</span>String, Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>

  def <a title="(key: String)org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet;FileMultiParams.-(2fa3819904)">-</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileMultiParams.-(2fa3819904).key">key</a>: <span title="String">String</span><span class="delimiter">)</span> = new <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a> <span title="(key: String)scala.collection.immutable.Map[String,Seq[org.scalatra.servlet.FileItem]]">-</span> <a href="#org.scalatra.servlet;FileMultiParams.-(2fa3819904).key" title="String">key</a><span class="delimiter">)</span>

  def <a title="=&gt; Iterator[(String, Seq[org.scalatra.servlet.FileItem])]" id="org.scalatra.servlet;FileMultiParams.iterator">iterator</a> = <a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a>.<span title="=&gt; Iterator[(String, Seq[org.scalatra.servlet.FileItem])]">iterator</span>

  override def <a title="(a: String)Seq[org.scalatra.servlet.FileItem]" id="org.scalatra.servlet;FileMultiParams.default">default</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileMultiParams.default.a">a</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[org.scalatra.servlet.FileItem]">Seq</span><span class="delimiter">[</span>FileItem<span class="delimiter">]</span> = <a href="#org.scalatra.servlet.FileMultiParams.<init>$default$1" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a>.<span title="(key: String)Seq[org.scalatra.servlet.FileItem]">default</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileMultiParams.default.a" title="String">a</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

object <a title="org.scalatra.servlet.FileMultiParams.type" id="org.scalatra.servlet.FileMultiParams">FileMultiParams</a> <a href="#org.scalatra.servlet.FileMultiParams" title="org.scalatra.servlet.FileMultiParams.type" class="delimiter">{</a>
  def <a title="()org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet.FileMultiParams.apply(accba7d523)">apply</a><span class="delimiter">(</span><span class="delimiter">)</span> = new <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a>

  def <a title="[SeqType &lt;: Seq[org.scalatra.servlet.FileItem]](wrapped: Map[String,Seq[org.scalatra.servlet.FileItem]])org.scalatra.servlet.FileMultiParams" id="org.scalatra.servlet.FileMultiParams.apply(7312297ae1)">apply</a><span class="delimiter">[</span><a title=" &lt;: Seq[org.scalatra.servlet.FileItem]" id="org.scalatra.servlet.FileMultiParams.apply(7312297ae1);SeqType">SeqType</a> &lt;: Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="Map[String,Seq[org.scalatra.servlet.FileItem]]" id="org.scalatra.servlet.FileMultiParams.apply(7312297ae1).wrapped">wrapped</a>: <span title="Map[String,Seq[org.scalatra.servlet.FileItem]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>FileItem<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> =
    new <a href="#org.scalatra.servlet;FileMultiParams" title="org.scalatra.servlet.FileMultiParams">FileMultiParams</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.FileMultiParams.apply(7312297ae1).wrapped" title="Map[String,Seq[org.scalatra.servlet.FileItem]]">wrapped</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

case class <a title="class FileItem extends AnyRef with Product with Serializable" id="org.scalatra.servlet.FileItem.readResolve">FileItem</a><a href="#org.scalatra.servlet.FileItem.readResolve" title="Product" class="delimiter">(</a><a title="javax.servlet.http.Part" id="org.scalatra.servlet;FileItem.part">part</a>: <span title="javax.servlet.http.Part">Part</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  val <a title="Long" id="org.scalatra.servlet;FileItem.size">size</a> = <a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>.<span title="()Long">getSize</span>
  val <a title="String" id="org.scalatra.servlet;FileItem.fieldName">fieldName</a> = <a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>.<span title="()String">getName</span>
  val <a title="String" id="org.scalatra.servlet;FileItem.name">name</a> = <a href="#org.scalatra.servlet.Util" title="org.scalatra.servlet.Util.type">Util</a>.<a href="#org.scalatra.servlet.Util.partAttribute" title="(part: javax.servlet.http.Part, headerName: String, attributeName: String, defaultValue: String)String">partAttribute</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>, <span title="String(&quot;content-disposition&quot;)" class="string">&quot;content-disposition&quot;</span>, <span title="String(&quot;filename&quot;)" class="string">&quot;filename&quot;</span><span class="delimiter">)</span>
  val <a title="Option[String]" id="org.scalatra.servlet;FileItem.contentType">contentType</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">getContentType</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a>
  val <a title="Option[String]" id="org.scalatra.servlet;FileItem.charset">charset</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#org.scalatra.servlet.Util" title="org.scalatra.servlet.Util.type">Util</a>.<a href="#org.scalatra.servlet.Util.partAttribute" title="(part: javax.servlet.http.Part, headerName: String, attributeName: String, defaultValue: String)String">partAttribute</a><a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString" class="delimiter">(</a><a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>, <span title="String(&quot;content-type&quot;)" class="string">&quot;content-type&quot;</span>, <span title="String(&quot;charset&quot;)" class="string">&quot;charset&quot;</span><span class="delimiter">)</span>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a>

  def <a title="=&gt; String" id="org.scalatra.servlet;FileItem.getName">getName</a> = <a href="#org.scalatra.servlet;FileItem.name" title="=&gt; String">name</a>

  def <a title="=&gt; String" id="org.scalatra.servlet;FileItem.getFieldName">getFieldName</a> = <a href="#org.scalatra.servlet;FileItem.fieldName" title="=&gt; String">fieldName</a>

  def <a title="=&gt; Long" id="org.scalatra.servlet;FileItem.getSize">getSize</a> = <a href="#org.scalatra.servlet;FileItem.size" title="=&gt; Long">size</a>

  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;FileItem.getContentType">getContentType</a> = <a href="#org.scalatra.servlet;FileItem.contentType" title="=&gt; Option[String]">contentType</a>.<span title="(alternative: =&gt; Option[String])Option[String]">orElse</span><span class="delimiter">(</span>null<span class="delimiter">)</span>

  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;FileItem.getCharset">getCharset</a> = <a href="#org.scalatra.servlet;FileItem.charset" title="=&gt; Option[String]">charset</a>.<span title="(alternative: =&gt; Option[String])Option[String]">orElse</span><span class="delimiter">(</span>null<span class="delimiter">)</span>

  def <a title="(file: java.io.File)Unit" id="org.scalatra.servlet;FileItem.write(e3f9ce1f75)">write</a><span class="delimiter">(</span><a title="java.io.File" id="org.scalatra.servlet;FileItem.write(e3f9ce1f75).file">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../util/package.scala.html#org.scalatra.util.package.using" title="(closeable: java.io.FileOutputStream)(f: java.io.FileOutputStream =&gt; Unit)Unit">using</a><span class="delimiter">(</span>new <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.write(e3f9ce1f75).file" title="java.io.File">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.FileOutputStream" id="org.scalatra.servlet;FileItem.write(e3f9ce1f75).$anonfun.out">out</a> =&gt;
      io.<a href="../util/io/package.scala.html#org.scalatra.util.io.package.copy" title="(in: java.io.InputStream, out: java.io.OutputStream, bufferSize: Int)Unit">copy</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.getInputStream" title="=&gt; java.io.InputStream">getInputStream</a>, <a href="#org.scalatra.servlet;FileItem.write(e3f9ce1f75).$anonfun.out" title="java.io.FileOutputStream">out</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(fileName: String)Unit" id="org.scalatra.servlet;FileItem.write(4869160a85)">write</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;FileItem.write(4869160a85).fileName">fileName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>.<span title="(x$1: String)Unit">write</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.write(4869160a85).fileName" title="String">fileName</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Array[Byte]" id="org.scalatra.servlet;FileItem.get">get</a><span class="delimiter">(</span><span class="delimiter">)</span> = org.scalatra.util.io.<a href="../util/io/package.scala.html#org.scalatra.util.io.package.readBytes" title="(in: java.io.InputStream)Array[Byte]">readBytes</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.getInputStream" title="=&gt; java.io.InputStream">getInputStream</a><span class="delimiter">)</span>

  def <a title="=&gt; Boolean" id="org.scalatra.servlet;FileItem.isFormField">isFormField</a> = <span class="delimiter">(</span><a href="#org.scalatra.servlet;FileItem.name" title="=&gt; String">name</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span>

  def <a title="=&gt; java.io.InputStream" id="org.scalatra.servlet;FileItem.getInputStream">getInputStream</a> = <a href="#org.scalatra.servlet;FileItem.part" title="=&gt; javax.servlet.http.Part">part</a>.<span title="()java.io.InputStream">getInputStream</span>
<span class="delimiter">}</span>

object <a title="org.scalatra.servlet.Util.type" id="org.scalatra.servlet.Util">Util</a> <a href="#org.scalatra.servlet.Util" title="org.scalatra.servlet.Util.type" class="delimiter">{</a>
  def <a title="(part: javax.servlet.http.Part, headerName: String, attributeName: String, defaultValue: String)String" id="org.scalatra.servlet.Util.partAttribute">partAttribute</a><span class="delimiter">(</span><a title="javax.servlet.http.Part" id="org.scalatra.servlet.Util.partAttribute.part">part</a>: <span title="javax.servlet.http.Part">Part</span>,
                    <a title="String" id="org.scalatra.servlet.Util.partAttribute.headerName">headerName</a>: <span title="String">String</span>, <a title="String" id="org.scalatra.servlet.Util.partAttribute.attributeName">attributeName</a>: <span title="String">String</span>,
                    <a title="String" id="org.scalatra.servlet.Util.partAttribute$default$4">defaultValue</a>: <span title="String">String</span> = null<span class="delimiter">)</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.Util.partAttribute.part" title="javax.servlet.http.Part">part</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.Util.partAttribute.headerName" title="String">headerName</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case Some<span class="delimiter">(</span><a title="String" id="org.scalatra.servlet.Util.partAttribute.value">value</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#org.scalatra.servlet.Util.partAttribute.value" title="String">value</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">find</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.Util.partAttribute.$anonfun.x$6" title="String">_</a>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.Util.partAttribute.attributeName" title="String">attributeName</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case Some<span class="delimiter">(</span><a title="String" id="org.scalatra.servlet.Util.partAttribute.attributeValue">attributeValue</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.servlet.Util.partAttribute.attributeValue" title="String">attributeValue</a>.<span title="(x$1: Int)String">substring</span><span class="delimiter">(</span><a href="#org.scalatra.servlet.Util.partAttribute.attributeValue" title="String">attributeValue</a>.<span title="(x$1: Int)Int">indexOf</span><span class="delimiter">(</span><span title="Int(61)" class="char">'='</span><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: CharSequence, x$2: CharSequence)String">replace</span><span class="delimiter">(</span><span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        case _ =&gt; <a href="#org.scalatra.servlet.Util.partAttribute$default$4" title="String">defaultValue</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    case _ =&gt; <a href="#org.scalatra.servlet.Util.partAttribute$default$4" title="String">defaultValue</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
