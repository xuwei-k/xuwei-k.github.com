<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/servlet/RichRequest.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra
package servlet

import scala.collection.<span class="delimiter">{</span>Map =&gt; CMap<span class="delimiter">}</span>
import scala.collection.immutable.DefaultMap
import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
import scala.io.Source
import java.net.URI
import javax.servlet.http.HttpServletRequest
import java.io.InputStream
import util.<span class="delimiter">{</span>MultiMap, MultiMapHeadView<span class="delimiter">}</span>
import util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._

object <a title="org.scalatra.servlet.RichRequest.type" id="org.scalatra.servlet.RichRequest.readResolve">RichRequest</a> <a href="#org.scalatra.servlet.RichRequest.readResolve" title="org.scalatra.servlet.RichRequest.type" class="delimiter">{</a>
  private val <a title="String" id="org.scalatra.servlet.RichRequest.cachedBodyKey">cachedBodyKey</a> = <span title="String(&quot;org.scalatra.RichRequest.cachedBody&quot;)" class="string">&quot;org.scalatra.RichRequest.cachedBody&quot;</span>
<span class="delimiter">}</span>

case class <a title="(r: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest" id="org.scalatra.servlet;RichRequest.productIterator">RichRequest</a><span title="Product" class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;RichRequest.copy$default$1">r</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> extends <a href="AttributesMap.scala.html#org.scalatra.servlet;AttributesMap" title="org.scalatra.servlet.AttributesMap">AttributesMap</a> <span class="delimiter">{</span>
  import <a href="#org.scalatra.servlet.RichRequest.readResolve" title="org.scalatra.servlet.RichRequest.type">RichRequest</a>.cachedBodyKey

  <span class="comment">/**
   * The version of the protocol the client used to send the request.
   * Typically this will be something like &quot;HTTP/1.0&quot;  or &quot;HTTP/1.1&quot; and may
   * be used by the application to determine how to treat any HTTP request
   * headers.
   */</span>
  def <a title="=&gt; org.scalatra.HttpVersion" id="org.scalatra.servlet;RichRequest.serverProtocol">serverProtocol</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getProtocol</span> match <span class="delimiter">{</span>
    case <span title="String(&quot;HTTP/1.1&quot;)" class="string">&quot;HTTP/1.1&quot;</span> =&gt; <a href="../HttpVersion.scala.html#org.scalatra.Http11" title="org.scalatra.Http11.type">Http11</a>
    case <span title="String(&quot;HTTP/1.0&quot;)" class="string">&quot;HTTP/1.0&quot;</span> =&gt; <a href="../HttpVersion.scala.html#org.scalatra.Http10" title="org.scalatra.Http10.type">Http10</a>
  <span class="delimiter">}</span>

  def <a title="=&gt; java.net.URI" id="org.scalatra.servlet;RichRequest.uri">uri</a> = new <span title="java.net.URI">URI</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()StringBuffer">getRequestURL</span>.<span title="()String">toString</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Http or Https, depending on the request URL.
   */</span>
  def <a title="=&gt; Product with Serializable with org.scalatra.Scheme" id="org.scalatra.servlet;RichRequest.urlScheme">urlScheme</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getScheme</span> match <span class="delimiter">{</span>
    case <span title="String(&quot;http&quot;)" class="string">&quot;http&quot;</span> =&gt; <a href="../Scheme.scala.html#org.scalatra.Http" title="org.scalatra.Http.type">Http</a>
    case <span title="String(&quot;https&quot;)" class="string">&quot;https&quot;</span> =&gt; <a href="../Scheme.scala.html#org.scalatra.Https" title="org.scalatra.Https.type">Https</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The HTTP request method, such as GET or POST
   */</span>
  def <a title="=&gt; org.scalatra.HttpMethod" id="org.scalatra.servlet;RichRequest.requestMethod">requestMethod</a> = <a href="../HttpMethod.scala.html#org.scalatra.HttpMethod.apply" title="(name: String)org.scalatra.HttpMethod">HttpMethod</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getMethod</span><span class="delimiter">)</span>

  <span class="comment">// Moved to conform with what similar specs call it</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use requestMethod&quot;</span>, <span class="string">&quot;2.1.0&quot;</span><span class="delimiter">)</span>
  def <a title="=&gt; org.scalatra.HttpMethod" id="org.scalatra.servlet;RichRequest.method">method</a> = <a href="#org.scalatra.servlet;RichRequest.requestMethod" title="=&gt; org.scalatra.HttpMethod">requestMethod</a>

  <span class="comment">/**
   * The remainder of the request URL's &quot;path&quot;, designating the virtual
   * &quot;location&quot; of the request's target within the application. This may be
   * an empty string, if the request URL targets the application root and
   * does not have a trailing slash.
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.pathInfo">pathInfo</a>: <span title="String">String</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getPathInfo</span><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * The initial portion of the request URL's &quot;path&quot; that corresponds to
   * the application object, so that the application knows its virtual
   * &quot;location&quot;. This may be an empty string, if the application corresponds
   * to the &quot;root&quot; of the server.
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.scriptName">scriptName</a>: <span title="String">String</span> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getServletPath</span>

  <span class="comment">/**
   * The portion of the request URL that follows the ?, if any. May be
   * empty, but is always required!
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.queryString">queryString</a>: <span title="String">String</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getQueryString</span><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * A Map of the parameters of this request. Parameters are contained in
   * the query string or posted form data.
   */</span>
  def <a title="=&gt; org.scalatra.MultiParams" id="org.scalatra.servlet;RichRequest.multiParameters">multiParameters</a>: <a href="../util/MultiMap.scala.html#org.scalatra.util;MultiMap" title="org.scalatra.MultiParams">MultiParams</a> = <span class="delimiter">{</span>
    <span class="comment">// At the very least in jetty 8 we see problems under load related to this</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">getQueryString</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.nonBlank" title="=&gt; Boolean">nonBlank</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()java.util.Map[String,Array[String]]">getParameterMap</span>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="scala.collection.immutable.Map[String,List[String]]" id="org.scalatra.servlet;RichRequest.multiParameters.qs">qs</a> = rl.<span title="rl.MapQueryString.type">MapQueryString</span>.<span title="(rw: String)scala.collection.immutable.Map[String,List[String]]">parseString</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getQueryString</span><span class="delimiter">)</span>
      val <a title="scala.collection.immutable.Map[_ &lt;: String, List[String]]" id="org.scalatra.servlet;RichRequest.multiParameters.bd">bd</a> = if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../HttpMethod.scala.html#org.scalatra.HttpMethod.apply" title="(name: String)org.scalatra.HttpMethod">HttpMethod</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getMethod</span><span class="delimiter">)</span>.<a href="../HttpMethod.scala.html#org.scalatra;HttpMethod.isSafe" title="=&gt; Boolean">isSafe</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><span title="String(&quot;Content-Type&quot;)" class="string">&quot;Content-Type&quot;</span><span class="delimiter">)</span>.<span title="(x$1: String)Boolean">equalsIgnoreCase</span><span class="delimiter">(</span><span title="String(&quot;APPLICATION/X-WWW-FORM-URLENCODED&quot;)" class="string">&quot;APPLICATION/X-WWW-FORM-URLENCODED&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        rl.<span title="rl.MapQueryString.type">MapQueryString</span>.<span title="(rw: String)scala.collection.immutable.Map[String,List[String]]">parseString</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.body" title="=&gt; String">body</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[Nothing,Nothing]">empty</span>
      <a href="#org.scalatra.servlet;RichRequest.multiParameters.qs" title="scala.collection.immutable.Map[String,List[String]]">qs</a> <a href="../util/MultiMap.scala.html#org.scalatra.util.MultiMap.map2MultiMap" title="implicit org.scalatra.util.MultiMap.map2MultiMap : (map: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap">++</a> <a href="#org.scalatra.servlet;RichRequest.multiParameters.bd" title="scala.collection.immutable.Map[_ &lt;: String, List[String]]">bd</a>
    <span class="delimiter">}</span> else <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(m: java.util.Map[String,Array[String]])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,Array[String]]]">getParameterMap</span>.<span title="=&gt; scala.collection.mutable.Map[String,Array[String]]">asScala</span>.<span title="(implicit ev: &lt;:&lt;[(String, Array[String]),(String, Array[String])])scala.collection.immutable.Map[String,Array[String]]">toMap</span>.<span title="(f: (String, Array[String]) =&gt; Seq[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Array[String]],(String, Seq[String]),scala.collection.immutable.Map[String,Seq[String]]])scala.collection.immutable.Map[String,Seq[String]]">transform</span> <a href="../util/MultiMap.scala.html#org.scalatra.util.MultiMap.map2MultiMap" title="implicit org.scalatra.util.MultiMap.map2MultiMap : (map: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap" class="delimiter">{</a> <span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;RichRequest.multiParameters.$anonfun.k">k</a>, <a title="Array[String]" id="org.scalatra.servlet;RichRequest.multiParameters.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.servlet;RichRequest.multiParameters.$anonfun.v" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">v</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  object <a title="RichRequest.this.parameters.type" id="org.scalatra.servlet;RichRequest.parameters">parameters</a> extends <a href="../util/MultiMapHeadView.scala.html#org.scalatra.util;MultiMapHeadView" title="org.scalatra.util.MultiMapHeadView[String,String]">MultiMapHeadView</a><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">{</span>
    protected def <a title="=&gt; org.scalatra.MultiParams" id="org.scalatra.servlet;RichRequest.parameters.multiMap">multiMap</a> = <a href="#org.scalatra.servlet;RichRequest.multiParameters" title="=&gt; org.scalatra.MultiParams">multiParameters</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A map of headers.  Multiple header values are separated by a ','
   * character.  The keys of this map are case-insensitive.
   */</span>
  object <a title="RichRequest.this.headers.type" id="org.scalatra.servlet;RichRequest.headers">headers</a> extends <span title="scala.collection.immutable.DefaultMap[String,String]">DefaultMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">{</span>
    def <a title="(name: String)Option[String]" id="org.scalatra.servlet;RichRequest.headers.get">get</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;RichRequest.headers.get.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.get.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>

    private<span class="delimiter">[</span>scalatra<span class="delimiter">]</span> def <a title="(key: String)Seq[String]" id="org.scalatra.servlet;RichRequest.headers.getMulti">getMulti</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;RichRequest.headers.getMulti.key">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
      <a href="#org.scalatra.servlet;RichRequest.headers.get" title="(name: String)Option[String]">get</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.getMulti.key" title="String">key</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Seq[String])Option[Seq[String]]">map</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.getMulti.$anonfun.x$1" title="String">_</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Seq[String]">toSeq</span>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.getMulti.$anonfun.$anonfun.x$2" title="String">_</a>.<span title="()String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; Seq[String])Seq[String]">getOrElse</span><span class="delimiter">(</span><span title="scala.collection.Seq.type">Seq</span>.<span title="Seq[Nothing]">empty</span><span class="delimiter">)</span>

    def <a title="=&gt; Iterator[(String, String)]" id="org.scalatra.servlet;RichRequest.headers.iterator">iterator</a>: <span title="Iterator[(String, String)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> =
      <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(i: java.util.Enumeration[String])scala.collection.convert.Decorators.AsScala[Iterator[String]]">getHeaderNames</span>.<span title="=&gt; Iterator[String]">asScala</span> <span title="(f: String =&gt; (String, String))Iterator[(String, String)]">map</span> <span class="delimiter">{</span> <a title="String" id="org.scalatra.servlet;RichRequest.headers.iterator.$anonfun.name">name</a> =&gt; <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.iterator.$anonfun.name" title="String">name</a>, <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.headers.iterator.$anonfun.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(name: String)Option[String]" id="org.scalatra.servlet;RichRequest.header">header</a><span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;RichRequest.header.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.header.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the name of the character encoding of the body, or None if no
   * character encoding is specified.
   */</span>
  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;RichRequest.characterEncoding">characterEncoding</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getCharacterEncoding</span><span class="delimiter">)</span>

  def <a title="(encoding: Option[String])Unit" id="org.scalatra.servlet;RichRequest.characterEncoding_=">characterEncoding_=</a><span class="delimiter">(</span><a title="Option[String]" id="org.scalatra.servlet;RichRequest.characterEncoding_=.encoding">encoding</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)Unit">setCharacterEncoding</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.characterEncoding_=.encoding" title="Option[String]">encoding</a> <span title="(default: =&gt; String)String">getOrElse</span> null<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The content of the Content-Type header, or None if absent.
   */</span>
  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;RichRequest.contentType">contentType</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getContentType</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns the length, in bytes, of the body, or None if not known.
   */</span>
  def <a title="=&gt; Option[Long]" id="org.scalatra.servlet;RichRequest.contentLength">contentLength</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()Int">getContentLength</span> match <span class="delimiter">{</span>
    case <span title="Int(-1)">-</span><span class="int">1</span> =&gt; <span title="None.type">None</span>
    case <a title="Int" id="org.scalatra.servlet;RichRequest.contentLength.length">length</a> =&gt; <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.contentLength.length" title="=&gt; Long">length</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * When combined with scriptName, pathInfo, and serverPort, can be used to
   * complete the URL.  Note, however, that the &quot;Host&quot; header, if present,
   * should be used in preference to serverName for reconstructing the request
   * URL.
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.serverName">serverName</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getServerName</span>

  @deprecated<span class="delimiter">(</span>message = <span class="string">&quot;Use HttpServletRequest.serverName instead&quot;</span>, since = <span class="string">&quot;2.0.0&quot;</span><span class="delimiter">)</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.host">host</a> = <a href="#org.scalatra.servlet;RichRequest.serverName" title="=&gt; String">serverName</a>

  <span class="comment">/**
   * When combined with scriptName, pathInfo, and serverName, can be used to
   * complete the URL.  See serverName for more details.
   */</span>
  def <a title="=&gt; Int" id="org.scalatra.servlet;RichRequest.serverPort">serverPort</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()Int">getServerPort</span>

  @deprecated<span class="delimiter">(</span>message = <span class="string">&quot;Use HttpServletRequest.serverPort instead&quot;</span>, since = <span class="string">&quot;2.0.0&quot;</span><span class="delimiter">)</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.port">port</a> = <span title="Integer.type">Integer</span>.<span title="(x$1: Int)String">toString</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()Int">getServerPort</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Optionally returns the HTTP referrer.
   *
   * @return the `Referer` header, or None if not set
   */</span>
  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;RichRequest.referrer">referrer</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><span title="String(&quot;Referer&quot;)" class="string">&quot;Referer&quot;</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case <a title="String" id="org.scalatra.servlet;RichRequest.referrer.s">s</a>: <span title="String">String</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.referrer.s" title="String">s</a><span class="delimiter">)</span>
    case null =&gt; <span title="None.type">None</span>
  <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use referrer&quot;</span>, <span class="string">&quot;2.0.0&quot;</span><span class="delimiter">)</span>
  def <a title="=&gt; Option[String]" id="org.scalatra.servlet;RichRequest.referer">referer</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#org.scalatra.servlet;RichRequest.referrer" title="=&gt; Option[String]">referrer</a>

  <span class="comment">/**
   * Caches and returns the body of the response.  The method is idempotent
   * for any given request.  The result is cached in memory regardless of size,
   * so be careful.  Calling this method consumes the request's input stream.
   *
   * @return the message body as a string according to the request's encoding
   * (defult ISO-8859-1).
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.body">body</a>:<span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#org.scalatra.servlet;RichRequest.cachedBody" title="=&gt; Option[String]">cachedBody</a> <span title="(default: =&gt; String)String">getOrElse</span> <span class="delimiter">{</span>
      val <a title="String" id="org.scalatra.servlet;RichRequest.body.encoding">encoding</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getCharacterEncoding</span>
      val <a title="String" id="org.scalatra.servlet;RichRequest.body.enc">enc</a> = if<span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.body.encoding" title="String">encoding</a> <span title="(x$1: Any)Boolean">==</span> null <span title="(x: Boolean)Boolean">||</span> <a href="#org.scalatra.servlet;RichRequest.body.encoding" title="String">encoding</a>.<span title="()String">trim</span>.<span title="()Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.contentType" title="=&gt; Option[String]">contentType</a>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.body.enc.$anonfun.x$3" title="String">_</a> <span title="(x$1: String)Boolean">equalsIgnoreCase</span> <span title="String(&quot;application/json&quot;)" class="string">&quot;application/json&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>  else <span title="String(&quot;ISO-8859-1&quot;)" class="string">&quot;ISO-8859-1&quot;</span>
      <span class="delimiter">}</span> else <a href="#org.scalatra.servlet;RichRequest.body.encoding" title="String">encoding</a>
      val <a title="String" id="org.scalatra.servlet;RichRequest.body.body">body</a> = <span title="scala.io.Source.type">Source</span>.<span title="(is: java.io.InputStream, enc: String)scala.io.BufferedSource">fromInputStream</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()javax.servlet.ServletInputStream">getInputStream</span>, <a href="#org.scalatra.servlet;RichRequest.body.enc" title="String">enc</a><span class="delimiter">)</span>.<span title="=&gt; String">mkString</span>
      <a href="#org.scalatra.servlet;RichRequest.productIterator" title="(key: String, value: Any)Unit">update</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.RichRequest.cachedBodyKey" title="=&gt; String">cachedBodyKey</a>, <a href="#org.scalatra.servlet;RichRequest.body.body" title="String">body</a><span class="delimiter">)</span>
      <a href="#org.scalatra.servlet;RichRequest.body.body" title="String">body</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="=&gt; Option[String]" id="org.scalatra.servlet;RichRequest.cachedBody">cachedBody</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    <a href="AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.servlet.RichRequest.cachedBodyKey" title="=&gt; String">cachedBodyKey</a><span class="delimiter">)</span>.<span title="(f: Any =&gt; Option[String])Option[String]">flatMap</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.cachedBody.$anonfun.x$4" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString" class="delimiter">[</a><span title="String">String</span><span class="delimiter">]</span>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns true if the request is an AJAX request
   */</span>
  def <a title="=&gt; Boolean" id="org.scalatra.servlet;RichRequest.isAjax">isAjax</a>: <span title="Boolean">Boolean</span> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="(x$1: String)String">getHeader</span><span class="delimiter">(</span><span title="String(&quot;X-Requested-With&quot;)" class="string">&quot;X-Requested-With&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> null

  <span class="comment">/**
   * Returns true if the request's method is not &quot;safe&quot; per RFC 2616.
   */</span>
  def <a title="=&gt; Boolean" id="org.scalatra.servlet;RichRequest.isWrite">isWrite</a>: <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="../HttpMethod.scala.html#org.scalatra.HttpMethod.apply" title="(name: String)org.scalatra.HttpMethod">HttpMethod</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getMethod</span><span class="delimiter">)</span>.<a href="../HttpMethod.scala.html#org.scalatra;HttpMethod.isSafe" title="=&gt; Boolean">isSafe</a>

  <span class="comment">/**
   * Returns a map of cookie names to lists of their values.  The default
   * value of the map is the empty sequence.
   */</span>
  def <a title="=&gt; org.scalatra.util.MultiMap" id="org.scalatra.servlet;RichRequest.multiCookies">multiCookies</a>: <a href="../util/MultiMap.scala.html#org.scalatra.util;MultiMap" title="org.scalatra.util.MultiMap">MultiMap</a> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.Map[String,Seq[String]]" id="org.scalatra.servlet;RichRequest.multiCookies.rr">rr</a> = <span title="(x: Array[javax.servlet.http.Cookie])Option[Array[javax.servlet.http.Cookie]]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()Array[javax.servlet.http.Cookie]">getCookies</span><span class="delimiter">)</span>.<span title="(default: =&gt; Array[javax.servlet.http.Cookie])Array[javax.servlet.http.Cookie]">getOrElse</span><span title="(xs: Array[javax.servlet.http.Cookie])scala.collection.mutable.ArrayOps[javax.servlet.http.Cookie]" class="delimiter">(</span><span title="(xs: javax.servlet.http.Cookie*)(implicit evidence$2: scala.reflect.ClassTag[javax.servlet.http.Cookie])Array[javax.servlet.http.Cookie]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[javax.servlet.http.Cookie]" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Seq[javax.servlet.http.Cookie]">toSeq</span>.
      <span title="(f: javax.servlet.http.Cookie =&gt; String)scala.collection.immutable.Map[String,Seq[javax.servlet.http.Cookie]]">groupBy</span> <span class="delimiter">{</span> <a href="#org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.x$5" title="javax.servlet.http.Cookie">_</a>.<span title="()String">getName</span> <span class="delimiter">}</span>.
      <span title="(f: (String, Seq[javax.servlet.http.Cookie]) =&gt; Seq[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Seq[javax.servlet.http.Cookie]],(String, Seq[String]),scala.collection.immutable.Map[String,Seq[String]]])scala.collection.immutable.Map[String,Seq[String]]">transform</span> <a href="#org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.x0$1" title="Seq[String]" class="delimiter">{</a> case<span class="delimiter">(</span><a title="String" id="org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.k">k</a>, <a title="Seq[javax.servlet.http.Cookie]" id="org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.v" title="Seq[javax.servlet.http.Cookie]">v</a> <span title="(f: javax.servlet.http.Cookie =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[javax.servlet.http.Cookie],String,Seq[String]])Seq[String]">map</span> <span class="delimiter">{</span> <a href="#org.scalatra.servlet;RichRequest.multiCookies.rr.$anonfun.$anonfun.x$6" title="javax.servlet.http.Cookie">_</a>.<span title="()String">getValue</span> <span class="delimiter">}</span><span class="delimiter">}</span>.
      <span title="(d: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">withDefaultValue</span><span class="delimiter">(</span><span title="scala.collection.Seq.type">Seq</span>.<span title="Seq[Nothing]">empty</span><span class="delimiter">)</span>
    <a href="../util/MultiMap.scala.html#org.scalatra.util.MultiMap.apply(9c778827ef)" title="(wrapped: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap">MultiMap</a><span class="delimiter">(</span><a href="#org.scalatra.servlet;RichRequest.multiCookies.rr" title="scala.collection.immutable.Map[String,Seq[String]]">rr</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a map of cookie names to values.  If multiple values are present
   * for a given cookie, the value is the first cookie of that name.
   */</span>
  def <a title="=&gt; scala.collection.Map[String,String]" id="org.scalatra.servlet;RichRequest.cookies">cookies</a>: <span title="scala.collection.Map[String,String]">CMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = new <a title="&lt;$anon: String =&gt; String&gt; extends AnyRef with org.scalatra.util.MultiMapHeadView[String,String]" id="org.scalatra.servlet;RichRequest.cookies;$anon">MultiMapHeadView</a><span class="delimiter">[</span>String, String<span class="delimiter">]</span> <span class="delimiter">{</span> protected def <a title="=&gt; org.scalatra.util.MultiMap" id="org.scalatra.servlet;RichRequest.cookies;$anon.multiMap">multiMap</a> = <a href="#org.scalatra.servlet;RichRequest.multiCookies" title="=&gt; org.scalatra.util.MultiMap">multiCookies</a> <span class="delimiter">}</span>

  protected<span class="delimiter">[</span>scalatra<span class="delimiter">]</span> def <a title="=&gt; javax.servlet.http.HttpServletRequest" id="org.scalatra.servlet;RichRequest.attributes">attributes</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>

  <span class="comment">/**
   * The input stream is an InputStream which contains the raw HTTP POST
   * data.  The caller should not close this stream.
   *
   * In contrast to Rack, this stream is not rewindable.
   */</span>
  def <a title="=&gt; java.io.InputStream" id="org.scalatra.servlet;RichRequest.inputStream">inputStream</a>: <span title="java.io.InputStream">InputStream</span> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()javax.servlet.ServletInputStream">getInputStream</span>

  <span class="comment">/**
   * The remote address the client is connected from.
   * This takes the load balancing header X-Forwarded-For into account
   * @return the client ip address
   */</span>
  def <a title="=&gt; String" id="org.scalatra.servlet;RichRequest.remoteAddress">remoteAddress</a> = <a href="#org.scalatra.servlet;RichRequest.header" title="(name: String)Option[String]">header</a><span class="delimiter">(</span><span title="String(&quot;X-FORWARDED-FOR&quot;)" class="string">&quot;X-FORWARDED-FOR&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Option[String])Option[String]">flatMap</span><span class="delimiter">(</span><a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">_</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()String">getRemoteAddr</span>

  def <a title="=&gt; java.util.Locale" id="org.scalatra.servlet;RichRequest.locale">locale</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()java.util.Locale">getLocale</span>

  def <a title="=&gt; java.util.Enumeration[java.util.Locale]" id="org.scalatra.servlet;RichRequest.locales">locales</a> = <a href="#org.scalatra.servlet;RichRequest.copy$default$1" title="=&gt; javax.servlet.http.HttpServletRequest">r</a>.<span title="()java.util.Enumeration[java.util.Locale]">getLocales</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>
