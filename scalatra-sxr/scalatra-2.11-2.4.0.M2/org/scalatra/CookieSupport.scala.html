<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/CookieSupport.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra

import collection._
import java.util.<span class="delimiter">{</span>Calendar, TimeZone, Date, Locale<span class="delimiter">}</span>
import javax.servlet.http.<span class="delimiter">{</span>HttpServletRequest, HttpServletResponse, Cookie =&gt; ServletCookie<span class="delimiter">}</span>
import servlet.ServletApiImplicits
import util.DateUtil
import util.<a href="util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._

case class <a title="class CookieOptions extends AnyRef with Product with Serializable" id="org.scalatra.CookieOptions.readResolve">CookieOptions</a><a href="#org.scalatra.CookieOptions.readResolve" title="Product" class="delimiter">(</a>
        <a title="String" id="org.scalatra.CookieOptions.apply$default$1">domain</a>  : <span title="String">String</span>  = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="String" id="org.scalatra.CookieOptions.apply$default$2">path</a>    : <span title="String">String</span>  = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="Int" id="org.scalatra.CookieOptions.apply$default$3">maxAge</a>  : <span title="Int">Int</span>     = -<span title="Int(-1)" class="int">1</span>,
        <a title="Boolean" id="org.scalatra.CookieOptions.apply$default$4">secure</a>  : <span title="Boolean">Boolean</span> = false,
        <a title="String" id="org.scalatra.CookieOptions.apply$default$5">comment</a> : <span title="String">String</span>  = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>,
        <a title="Boolean" id="org.scalatra.CookieOptions.apply$default$6">httpOnly</a>: <span title="Boolean">Boolean</span> = false,
        <a title="Int" id="org.scalatra.CookieOptions.apply$default$7">version</a> : <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>,
        <a title="String" id="org.scalatra.CookieOptions.apply$default$8">encoding</a>: <span title="String">String</span>  = <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span><span class="delimiter">)</span>

object <a title="org.scalatra.Cookie.type" id="org.scalatra.Cookie.readResolve">Cookie</a> <a href="#org.scalatra.Cookie.readResolve" title="org.scalatra.Cookie.type" class="delimiter">{</a>
  @volatile private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Option[Long]" id="org.scalatra.Cookie._currentTimeMillis">_currentTimeMillis</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <span title="None.type">None</span>
  def <a title="=&gt; Long" id="org.scalatra.Cookie.currentTimeMillis">currentTimeMillis</a> = <a href="#org.scalatra.Cookie._currentTimeMillis" title="Option[Long]">_currentTimeMillis</a> <span title="(default: =&gt; Long)Long">getOrElse</span> <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
  def <a title="(ct: Long)Unit" id="org.scalatra.Cookie.currentTimeMillis_=">currentTimeMillis_=</a><span class="delimiter">(</span><a title="Long" id="org.scalatra.Cookie.currentTimeMillis_=.ct">ct</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="#org.scalatra.Cookie._currentTimeMillis" title="Option[Long]">_currentTimeMillis</a> = <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.Cookie.currentTimeMillis_=.ct" title="Long">ct</a><span class="delimiter">)</span>
  def <a title="()Unit" id="org.scalatra.Cookie.freezeTime">freezeTime</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#org.scalatra.Cookie._currentTimeMillis" title="Option[Long]">_currentTimeMillis</a> = <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  def <a title="()Unit" id="org.scalatra.Cookie.unfreezeTime">unfreezeTime</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#org.scalatra.Cookie._currentTimeMillis" title="Option[Long]">_currentTimeMillis</a> = <span title="None.type">None</span>
  def <a title="(date: java.util.Date)String" id="org.scalatra.Cookie.formatExpires">formatExpires</a><span class="delimiter">(</span><a title="java.util.Date" id="org.scalatra.Cookie.formatExpires.date">date</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> = <a href="util/DateUtil.scala.html#org.scalatra.util.DateUtil" title="org.scalatra.util.DateUtil.type">DateUtil</a>.<a href="util/DateUtil.scala.html#org.scalatra.util.DateUtil.formatDate" title="(date: java.util.Date, format: String, timeZone: java.util.TimeZone, locale: java.util.Locale)String">formatDate</a><span class="delimiter">(</span><a href="#org.scalatra.Cookie.formatExpires.date" title="java.util.Date">date</a>, <span title="String(&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>
case class <a title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie" id="org.scalatra;Cookie.equals">Cookie</a><a href="#org.scalatra;Cookie.equals" title="Product" class="delimiter">(</a><a title="String" id="org.scalatra;Cookie.copy$default$1">name</a>: <span title="String">String</span>, <a title="String" id="org.scalatra;Cookie.copy$default$2">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;Cookie.copy.cookieOptions">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  import <a href="#org.scalatra.Cookie.readResolve" title="org.scalatra.Cookie.type">Cookie</a>._

  val <a title="org.scalatra.CookieOptions" id="org.scalatra;Cookie.options">options</a> = <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>

  def <a title="=&gt; String" id="org.scalatra;Cookie.toCookieString">toCookieString</a> = <span class="delimiter">{</span>
    val <a title="StringBuffer" id="org.scalatra;Cookie.toCookieString.sb">sb</a> = new <span title="StringBuffer">StringBuffer</span>
    <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <a href="#org.scalatra;Cookie.copy$default$1" title="=&gt; String">name</a> <span title="(x$1: String)StringBuffer">append</span> <span title="String(&quot;=&quot;)" class="string">&quot;=&quot;</span>
    <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <a href="#org.scalatra;Cookie.copy$default$2" title="=&gt; String">value</a>

    if<span class="delimiter">(</span><a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">domain</a>.<a href="util/RicherString.scala.html#org.scalatra.util;RicherString.nonBlank" title="=&gt; Boolean">nonBlank</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$1" title="=&gt; String">domain</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;localhost&quot;)" class="string">&quot;localhost&quot;</span><span class="delimiter">)</span>
      <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a>.<span title="(x$1: String)StringBuffer">append</span><span class="delimiter">(</span><span title="String(&quot;; Domain=&quot;)" class="string">&quot;; Domain=&quot;</span><span class="delimiter">)</span>.<span title="(x$1: String)StringBuffer">append</span><span class="delimiter">(</span>
        <span class="delimiter">(</span>if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$1" title="=&gt; String">domain</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$1" title="=&gt; String">domain</a> else <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$1" title="=&gt; String">domain</a><span class="delimiter">)</span>.<span title="(x$1: java.util.Locale)String">toLowerCase</span><span class="delimiter">(</span><span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    val <a title="String" id="org.scalatra;Cookie.toCookieString.pth">pth</a> = <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$2" title="=&gt; String">path</a>
    if<span class="delimiter">(</span><a href="util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">pth</a>.<a href="util/RicherString.scala.html#org.scalatra.util;RicherString.nonBlank" title="=&gt; Boolean">nonBlank</a><span class="delimiter">)</span> <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <span title="String(&quot;; Path=&quot;)" class="string">&quot;; Path=&quot;</span> <span title="(x$1: String)StringBuffer">append</span> <span class="delimiter">(</span>if<span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.scalatra;Cookie.toCookieString.pth" title="String">pth</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.scalatra;Cookie.toCookieString.pth" title="String">pth</a>
    <span class="delimiter">}</span> else <span class="delimiter">{</span> <a href="#org.scalatra;Cookie.toCookieString.pth" title="String">pth</a> <span class="delimiter">}</span><span class="delimiter">)</span>

    if<span class="delimiter">(</span><a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">comment</a>.<a href="util/RicherString.scala.html#org.scalatra.util;RicherString.nonBlank" title="=&gt; Boolean">nonBlank</a><span class="delimiter">)</span> <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <span class="delimiter">(</span><span title="String(&quot;; Comment=&quot;)" class="string">&quot;; Comment=&quot;</span><span class="delimiter">)</span> <span title="(x$1: String)StringBuffer">append</span> <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$5" title="=&gt; String">comment</a>

    <a href="#org.scalatra;Cookie.appendMaxAge" title="(sb: StringBuffer, maxAge: Int, version: Int)StringBuffer">appendMaxAge</a><span class="delimiter">(</span><a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a>, <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$3" title="=&gt; Int">maxAge</a>, <a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$7" title="=&gt; Int">version</a><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$4" title="=&gt; Boolean">secure</a><span class="delimiter">)</span> <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <span title="String(&quot;; Secure&quot;)" class="string">&quot;; Secure&quot;</span>
    if <span class="delimiter">(</span><a href="#org.scalatra;Cookie.copy.cookieOptions" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$6" title="=&gt; Boolean">httpOnly</a><span class="delimiter">)</span> <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span> <span title="String(&quot;; HttpOnly&quot;)" class="string">&quot;; HttpOnly&quot;</span>
    <a href="#org.scalatra;Cookie.toCookieString.sb" title="StringBuffer">sb</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(sb: StringBuffer, maxAge: Int, version: Int)StringBuffer" id="org.scalatra;Cookie.appendMaxAge">appendMaxAge</a><span class="delimiter">(</span><a title="StringBuffer" id="org.scalatra;Cookie.appendMaxAge.sb">sb</a>: <span title="StringBuffer">StringBuffer</span>, <a title="Int" id="org.scalatra;Cookie.appendMaxAge.maxAge">maxAge</a>: <span title="Int">Int</span>, <a title="Int" id="org.scalatra;Cookie.appendMaxAge.version">version</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="Option[Long]" id="org.scalatra;Cookie.appendMaxAge.dateInMillis">dateInMillis</a> = <a href="#org.scalatra;Cookie.appendMaxAge.maxAge" title="Int">maxAge</a> match <span class="delimiter">{</span>
       case <span title="Int">a</span> if <span title="Int">a</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> =&gt; <span title="None.type">None</span> <span class="comment">// we don't do anything for max-age when it's &lt; 0 then it becomes a session cookie</span>
       case <span title="Int(0)" class="int">0</span> =&gt; <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span class="comment">// Set the date to the min date for the system</span>
       case <span title="Int">a</span> =&gt; <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.Cookie.currentTimeMillis" title="=&gt; Long">currentTimeMillis</a> <span title="(x: Int)Long">+</span> <span title="Int">a</span> <span title="(x: Int)Int">*</span> <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// This used to be Max-Age but IE is not always very happy with that</span>
    <span class="comment">// see: http://mrcoles.com/blog/cookies-max-age-vs-expires/</span>
    <span class="comment">// see Q1: http://blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspx</span>
    val bOpt = <a href="#org.scalatra;Cookie.appendMaxAge.dateInMillis" title="Option[Long]">dateInMillis</a> <a title="Option[StringBuffer]" id="org.scalatra;Cookie.appendMaxAge.bOpt">map</a> <span class="delimiter">(</span><a title="Long" id="org.scalatra;Cookie.appendMaxAge.bOpt.$anonfun.ms">ms</a> =&gt; <a href="#org.scalatra;Cookie.appendExpires" title="(sb: StringBuffer, expires: java.util.Date)StringBuffer">appendExpires</a><span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendMaxAge.sb" title="StringBuffer">sb</a>, new <span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendMaxAge.bOpt.$anonfun.ms" title="Long">ms</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="Option[StringBuffer]" id="org.scalatra;Cookie.appendMaxAge.agedOpt">agedOpt</a> = if <span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendMaxAge.version" title="Int">version</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#org.scalatra;Cookie.appendMaxAge.bOpt" title="Option[StringBuffer]">bOpt</a> <span title="(f: StringBuffer =&gt; StringBuffer)Option[StringBuffer]">map</span> <span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendMaxAge.agedOpt.$anonfun.x$1" title="StringBuffer">_</a>.<span title="(x$1: String)StringBuffer">append</span><span class="delimiter">(</span><span title="String(&quot;; Max-Age=&quot;)" class="string">&quot;; Max-Age=&quot;</span><span class="delimiter">)</span>.<span title="(x$1: Int)StringBuffer">append</span><span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendMaxAge.maxAge" title="Int">maxAge</a><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="#org.scalatra;Cookie.appendMaxAge.bOpt" title="Option[StringBuffer]">bOpt</a>
    <a href="#org.scalatra;Cookie.appendMaxAge.agedOpt" title="Option[StringBuffer]">agedOpt</a> <span title="(default: =&gt; StringBuffer)StringBuffer">getOrElse</span> <a href="#org.scalatra;Cookie.appendMaxAge.sb" title="StringBuffer">sb</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(sb: StringBuffer, expires: java.util.Date)StringBuffer" id="org.scalatra;Cookie.appendExpires">appendExpires</a><span class="delimiter">(</span><a title="StringBuffer" id="org.scalatra;Cookie.appendExpires.sb">sb</a>: <span title="StringBuffer">StringBuffer</span>, <a title="java.util.Date" id="org.scalatra;Cookie.appendExpires.expires">expires</a>: <span title="java.util.Date">Date</span><span class="delimiter">)</span> =
    <a href="#org.scalatra;Cookie.appendExpires.sb" title="StringBuffer">sb</a> <span title="(x$1: String)StringBuffer">append</span>  <span title="String(&quot;; Expires=&quot;)" class="string">&quot;; Expires=&quot;</span> <span title="(x$1: String)StringBuffer">append</span> <a href="#org.scalatra.Cookie.formatExpires" title="(date: java.util.Date)String">formatExpires</a><span class="delimiter">(</span><a href="#org.scalatra;Cookie.appendExpires.expires" title="java.util.Date">expires</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


class <a title="class SweetCookies extends AnyRef with org.scalatra.servlet.ServletApiImplicits" id="org.scalatra;SweetCookies">SweetCookies</a><a href="#org.scalatra;SweetCookies" title="org.scalatra.SweetCookies" class="delimiter">(</a>private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="scala.collection.Map[String,String]" id="org.scalatra;SweetCookies.reqCookies">reqCookies</a>: <span title="scala.collection.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>, private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra;SweetCookies.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> extends <a href="servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits" title="org.scalatra.servlet.ServletApiImplicits">ServletApiImplicits</a> <span class="delimiter">{</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> lazy val cookies = mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</span><span title="(elems: (String, String)*)scala.collection.mutable.HashMap[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a title="scala.collection.mutable.Map[String,String]" id="org.scalatra;SweetCookies.cookies">++</a> <a href="#org.scalatra;SweetCookies.reqCookies" title="scala.collection.Map[String,String]">reqCookies</a>

  def <a title="(key: String)Option[String]" id="org.scalatra;SweetCookies.get">get</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.get.key">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#org.scalatra;SweetCookies.cookies" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.get.key" title="String">key</a><span class="delimiter">)</span>

  def <a title="(key: String)String" id="org.scalatra;SweetCookies.apply">apply</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.apply.key">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#org.scalatra;SweetCookies.cookies" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.apply.key" title="String">key</a><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span class="delimiter">(</span>throw new <span title="Exception">Exception</span><span class="delimiter">(</span><span title="String(&quot;No cookie could be found for the specified key&quot;)" class="string">&quot;No cookie could be found for the specified key&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie" id="org.scalatra;SweetCookies.update">update</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.update$default$3.name">name</a>: <span title="String">String</span>, <a title="String" id="org.scalatra;SweetCookies.update$default$3.value">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.update$default$3">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a>=<a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.scalatra;SweetCookies.cookies" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a> <span title="(kv: (String, String))SweetCookies.this.cookies.type">+=</span> <a href="#org.scalatra;SweetCookies.update$default$3.name" title="(self: String)ArrowAssoc[String]">name</a> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra;SweetCookies.update$default$3.value" title="String">value</a>
    <a href="#org.scalatra;SweetCookies.addCookie" title="(name: String, value: String, options: org.scalatra.CookieOptions)org.scalatra.Cookie">addCookie</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.update$default$3.name" title="String">name</a>, <a href="#org.scalatra;SweetCookies.update$default$3.value" title="String">value</a>, <a href="#org.scalatra;SweetCookies.update$default$3" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie" id="org.scalatra;SweetCookies.set">set</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.set$default$3.name">name</a>: <span title="String">String</span>, <a title="String" id="org.scalatra;SweetCookies.set$default$3.value">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.set$default$3">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a>=<a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    this.<a href="#org.scalatra;SweetCookies.update" title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie">update</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.set$default$3.name" title="String">name</a>, <a href="#org.scalatra;SweetCookies.set$default$3.value" title="String">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.set$default$3" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(name: String)(implicit cookieOptions: org.scalatra.CookieOptions)Unit" id="org.scalatra;SweetCookies.delete">delete</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.delete$default$2.name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.delete$default$2">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra;SweetCookies.cookies" title="=&gt; scala.collection.mutable.Map[String,String]">cookies</a> <span title="(key: String)SweetCookies.this.cookies.type">-=</span> <a href="#org.scalatra;SweetCookies.delete$default$2.name" title="String">name</a>
    <a href="#org.scalatra;SweetCookies.addCookie" title="(name: String, value: String, options: org.scalatra.CookieOptions)org.scalatra.Cookie">addCookie</a><span title="Unit" class="delimiter">(</span><a href="#org.scalatra;SweetCookies.delete$default$2.name" title="String">name</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a href="#org.scalatra;SweetCookies.delete$default$2" title="org.scalatra.CookieOptions">cookieOptions</a>.<a href="#org.scalatra.CookieOptions.apply$default$1" title="String" id="org.scalatra;SweetCookies.delete.x$9">copy</a><span class="delimiter">(</span>maxAge = <a title="Int" id="org.scalatra;SweetCookies.delete.x$2" class="int">0</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(keyValuePair: (String, String))(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie" id="org.scalatra;SweetCookies.+=">+=</a><span class="delimiter">(</span><a title="(String, String)" id="org.scalatra;SweetCookies.+=$default$2.keyValuePair">keyValuePair</a>: <span title="(String, String)" class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.+=$default$2">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    this.<a href="#org.scalatra;SweetCookies.update" title="(name: String, value: String)(implicit cookieOptions: org.scalatra.CookieOptions)org.scalatra.Cookie">update</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.+=$default$2.keyValuePair" title="(String, String)">keyValuePair</a>.<span title="=&gt; String">_1</span>, <a href="#org.scalatra;SweetCookies.+=$default$2.keyValuePair" title="(String, String)">keyValuePair</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.+=$default$2" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(key: String)(implicit cookieOptions: org.scalatra.CookieOptions)Unit" id="org.scalatra;SweetCookies.-=">-=</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.-=$default$2.key">key</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.-=$default$2">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="#org.scalatra.CookieOptions.readResolve" title="(domain: String, path: String, maxAge: Int, secure: Boolean, comment: String, httpOnly: Boolean, version: Int, encoding: String)org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra;SweetCookies.delete" title="(name: String)(implicit cookieOptions: org.scalatra.CookieOptions)Unit">delete</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.-=$default$2.key" title="String">key</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.-=$default$2" title="org.scalatra.CookieOptions">cookieOptions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(name: String, value: String, options: org.scalatra.CookieOptions)org.scalatra.Cookie" id="org.scalatra;SweetCookies.addCookie">addCookie</a><span class="delimiter">(</span><a title="String" id="org.scalatra;SweetCookies.addCookie.name">name</a>: <span title="String">String</span>, <a title="String" id="org.scalatra;SweetCookies.addCookie.value">value</a>: <span title="String">String</span>, <a title="org.scalatra.CookieOptions" id="org.scalatra;SweetCookies.addCookie.options">options</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="org.scalatra.Cookie" id="org.scalatra;SweetCookies.addCookie.cookie">cookie</a> = new <a href="#org.scalatra;Cookie.equals" title="org.scalatra.Cookie">Cookie</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.addCookie.name" title="String">name</a>, <a href="#org.scalatra;SweetCookies.addCookie.value" title="String">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.addCookie.options" title="org.scalatra.CookieOptions">options</a><span class="delimiter">)</span>
    <a href="servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichResponse" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichResponse : (response: javax.servlet.http.HttpServletResponse)org.scalatra.servlet.RichResponse">response</a>.<a href="servlet/RichResponse.scala.html#org.scalatra.servlet;RichResponse.addCookie" title="(cookie: org.scalatra.Cookie)Unit">addCookie</a><span class="delimiter">(</span><a href="#org.scalatra;SweetCookies.addCookie.cookie" title="org.scalatra.Cookie">cookie</a><span class="delimiter">)</span>
    <a href="#org.scalatra;SweetCookies.addCookie.cookie" title="org.scalatra.Cookie">cookie</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="org.scalatra.CookieSupport.type" id="org.scalatra.CookieSupport">CookieSupport</a> <a href="#org.scalatra.CookieSupport" title="org.scalatra.CookieSupport.type" class="delimiter">{</a>
  val <a title="String" id="org.scalatra.CookieSupport.SweetCookiesKey">SweetCookiesKey</a> = <span title="String(&quot;org.scalatra.SweetCookies&quot;)" class="string">&quot;org.scalatra.SweetCookies&quot;</span>
  val <a title="String" id="org.scalatra.CookieSupport.CookieOptionsKey">CookieOptionsKey</a> = <span title="String(&quot;org.scalatra.CookieOptions&quot;)" class="string">&quot;org.scalatra.CookieOptions&quot;</span>
<span class="delimiter">}</span>

trait <a title="trait CookieContext extends AnyRef" id="org.scalatra;CookieContext">CookieContext</a> <span title="Unit" class="delimiter">{</span> self: ScalatraContext =&gt;
  import <a href="#org.scalatra.CookieSupport" title="org.scalatra.CookieSupport.type">CookieSupport</a>._
  implicit def <a title="=&gt; org.scalatra.CookieOptions" id="org.scalatra;CookieContext.cookieOptions">cookieOptions</a>: <a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a> = <a href="servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichServletContext" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichServletContext : (servletContext: javax.servlet.ServletContext)org.scalatra.servlet.RichServletContext">servletContext</a>.<a href="servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.CookieSupport.CookieOptionsKey" title="=&gt; String">CookieOptionsKey</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,Any])Any">orNull</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.CookieOptions" class="delimiter">[</span><a href="#org.scalatra.CookieOptions.readResolve" title="org.scalatra.CookieOptions">CookieOptions</a><span class="delimiter">]</span>

  def <a title="=&gt; org.scalatra.SweetCookies" id="org.scalatra;CookieContext.cookies">cookies</a> = <a href="servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.CookieSupport.SweetCookiesKey" title="=&gt; String">SweetCookiesKey</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,Any])Any">orNull</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.SweetCookies" class="delimiter">[</span><a href="#org.scalatra;SweetCookies" title="org.scalatra.SweetCookies">SweetCookies</a><span class="delimiter">]</span>

<span class="delimiter">}</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;You can remove this mixin, it's included in core by default&quot;</span>, <span class="string">&quot;2.2&quot;</span><span class="delimiter">)</span>
trait <a title="trait CookieSupport extends AnyRef" id="org.scalatra;CookieSupport">CookieSupport</a> <span class="delimiter">{</span> self: ScalatraBase =&gt;
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
