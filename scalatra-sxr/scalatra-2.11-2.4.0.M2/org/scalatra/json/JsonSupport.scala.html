<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/json/JsonSupport.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra
package json

import java.io.<span class="delimiter">{</span>InputStreamReader, InputStream<span class="delimiter">}</span>
import org.json4s._
import <span title="org.json4s.Xml.type">Xml</span>._
import javax.servlet.http.HttpServletRequest
import org.slf4j.LoggerFactory
import util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._

object <a title="org.scalatra.json.JsonSupport.type" id="org.scalatra.json.JsonSupport">JsonSupport</a> <a href="#org.scalatra.json.JsonSupport" title="org.scalatra.json.JsonSupport.type" class="delimiter">{</a>

  val <a title="String" id="org.scalatra.json.JsonSupport.ParsedBodyKey">ParsedBodyKey</a> = <span title="String(&quot;org.scalatra.json.ParsedBody&quot;)" class="string">&quot;org.scalatra.json.ParsedBody&quot;</span>
<span class="delimiter">}</span>

trait <a title="trait JsonSupport[T] extends AnyRef with org.scalatra.json.JsonOutput[T]" id="org.scalatra.json;JsonSupport">JsonSupport</a><span class="delimiter">[</span><a title="" id="org.scalatra.json;JsonSupport;T">T</a><span class="delimiter">]</span> extends <a href="JsonOutput.scala.html#org.scalatra.json;JsonOutput" title="org.scalatra.json.JsonOutput[T]">JsonOutput</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

  import <a href="#org.scalatra.json.JsonSupport" title="org.scalatra.json.JsonSupport.type">JsonSupport</a>._

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="org.slf4j.Logger" id="org.scalatra.json;JsonSupport.logger">logger</a> = <span title="org.slf4j.LoggerFactory.type">LoggerFactory</span>.<span title="(x$1: Class[_])org.slf4j.Logger">getLogger</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport" title="()Class[_]">getClass</a><span class="delimiter">)</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="Boolean" id="org.scalatra.json;JsonSupport._defaultCacheRequestBody">_defaultCacheRequestBody</a> = true
  protected def <a title="=&gt; Boolean" id="org.scalatra.json;JsonSupport.cacheRequestBodyAsString">cacheRequestBodyAsString</a>: <span title="Boolean">Boolean</span> = <a href="#org.scalatra.json;JsonSupport._defaultCacheRequestBody" title="Boolean">_defaultCacheRequestBody</a>
  protected def <a title="(format: String)(implicit request: javax.servlet.http.HttpServletRequest)org.json4s.JValue" id="org.scalatra.json;JsonSupport.parseRequestBody">parseRequestBody</a><span class="delimiter">(</span><a title="String" id="org.scalatra.json;JsonSupport.parseRequestBody.format">format</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.json;JsonSupport.parseRequestBody.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> = try <span class="delimiter">{</span>
    val ct = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.contentType" title="=&gt; Option[String]">contentType</a> <a title="String" id="org.scalatra.json;JsonSupport.parseRequestBody.ct">getOrElse</a> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parseRequestBody.format" title="String">format</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;json&quot;)" class="string">&quot;json&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <span title="org.json4s.JValue">bd</span>  = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parseRequestBody.ct" title="String">ct</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;application/x-www-form-urlencoded&quot;)" class="string">&quot;application/x-www-form-urlencoded&quot;</span><span class="delimiter">)</span> <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.multiParams(53d1ef321f)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams">multiParams</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="=&gt; Option[String]">headOption</span> <span title="(f: String =&gt; org.json4s.JValue)Option[org.json4s.JValue]">map</span> <a href="#org.scalatra.json;JsonSupport.readJsonFromBody" title="(bd: String)org.json4s.JValue">readJsonFromBody</a> <span title="(default: =&gt; org.json4s.JValue)org.json4s.JValue">getOrElse</span> <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
        else if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.cacheRequestBodyAsString" title="=&gt; Boolean">cacheRequestBodyAsString</a><span class="delimiter">)</span> <a href="#org.scalatra.json;JsonSupport.readJsonFromBody" title="(bd: String)org.json4s.JValue">readJsonFromBody</a><span class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.body" title="=&gt; String">body</a><span class="delimiter">)</span>
        else <a href="#org.scalatra.json;JsonSupport.readJsonFromStreamWithCharset" title="(stream: java.io.InputStream, charset: String)org.json4s.JValue">readJsonFromStreamWithCharset</a><span class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.inputStream" title="=&gt; java.io.InputStream">inputStream</a>, <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.characterEncoding" title="=&gt; Option[String]">characterEncoding</a> <span title="(default: =&gt; String)String">getOrElse</span> <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.defaultCharacterEncoding" title="=&gt; String">defaultCharacterEncoding</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#org.scalatra.json;JsonSupport.transformRequestBody" title="(body: org.json4s.JValue)org.json4s.JValue">transformRequestBody</a><span class="delimiter">(</span><span title="org.json4s.JValue">bd</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parseRequestBody.format" title="String">format</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <span title="org.json4s.JValue">bd</span> = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parseRequestBody.ct" title="String">ct</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;application/x-www-form-urlencoded&quot;)" class="string">&quot;application/x-www-form-urlencoded&quot;</span><span class="delimiter">)</span> <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.multiParams(53d1ef321f)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams">multiParams</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="=&gt; Option[String]">headOption</span> <span title="(f: String =&gt; org.json4s.JValue)Option[org.json4s.JValue]">map</span> <a href="#org.scalatra.json;JsonSupport.readXmlFromBody" title="(bd: String)org.json4s.JValue">readXmlFromBody</a> <span title="(default: =&gt; org.json4s.JValue)org.json4s.JValue">getOrElse</span> <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
        else if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.cacheRequestBodyAsString" title="=&gt; Boolean">cacheRequestBodyAsString</a><span class="delimiter">)</span> <a href="#org.scalatra.json;JsonSupport.readXmlFromBody" title="(bd: String)org.json4s.JValue">readXmlFromBody</a><span class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.body" title="=&gt; String">body</a><span class="delimiter">)</span>
        else <a href="#org.scalatra.json;JsonSupport.readXmlFromStream" title="(stream: java.io.InputStream)org.json4s.JValue">readXmlFromStream</a><span class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.inputStream" title="=&gt; java.io.InputStream">inputStream</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#org.scalatra.json;JsonSupport.transformRequestBody" title="(body: org.json4s.JValue)org.json4s.JValue">transformRequestBody</a><span class="delimiter">(</span><span title="org.json4s.JValue">bd</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
  <span class="delimiter">}</span> catch <span class="delimiter">{</span>
    case <a title="Throwable" id="org.scalatra.json;JsonSupport.parseRequestBody.t">t</a>: <span title="Throwable">Throwable</span> â‡’ <span class="delimiter">{</span>
      <a href="#org.scalatra.json;JsonSupport.logger" title="org.slf4j.Logger">logger</a>.<span title="(x$1: String, x$2: Throwable)Unit">error</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Parsing the request body failed, because:&quot;)" class="string">Parsing the request body failed, because:&quot;</span>, <a href="#org.scalatra.json;JsonSupport.parseRequestBody.t" title="Throwable">t</a><span class="delimiter">)</span>
      <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected def <a title="(bd: String)org.json4s.JValue" id="org.scalatra.json;JsonSupport.readJsonFromBody">readJsonFromBody</a><span class="delimiter">(</span><a title="String" id="org.scalatra.json;JsonSupport.readJsonFromBody.bd">bd</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span>
  protected def <a title="(stream: java.io.InputStream, charset: String)org.json4s.JValue" id="org.scalatra.json;JsonSupport.readJsonFromStreamWithCharset">readJsonFromStreamWithCharset</a><span class="delimiter">(</span><a title="java.io.InputStream" id="org.scalatra.json;JsonSupport.readJsonFromStreamWithCharset.stream">stream</a>: <span title="java.io.InputStream">InputStream</span>, <a title="String" id="org.scalatra.json;JsonSupport.readJsonFromStreamWithCharset.charset">charset</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span>
  protected def <a title="(stream: java.io.InputStream)org.json4s.JValue" id="org.scalatra.json;JsonSupport.readJsonFromStream">readJsonFromStream</a><span class="delimiter">(</span><a title="java.io.InputStream" id="org.scalatra.json;JsonSupport.readJsonFromStream.stream">stream</a>: <span title="java.io.InputStream">InputStream</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span> = <a href="#org.scalatra.json;JsonSupport.readJsonFromStreamWithCharset" title="(stream: java.io.InputStream, charset: String)org.json4s.JValue">readJsonFromStreamWithCharset</a><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.readJsonFromStream.stream" title="java.io.InputStream">stream</a>, <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.defaultCharacterEncoding" title="=&gt; String">defaultCharacterEncoding</a><span class="delimiter">)</span>
  protected def <a title="(bd: String)org.json4s.JValue" id="org.scalatra.json;JsonSupport.readXmlFromBody">readXmlFromBody</a><span class="delimiter">(</span><a title="String" id="org.scalatra.json;JsonSupport.readXmlFromBody.bd">bd</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">bd</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.nonBlank" title="=&gt; Boolean">nonBlank</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val JObject<a href="#org.scalatra.json;JsonSupport.readXmlFromBody.jv.jv" title="org.json4s.JsonAST.JValue" id="org.scalatra.json;JsonSupport.readXmlFromBody.jv" class="delimiter">(</a><a href="#org.scalatra.json;JsonSupport.readXmlFromBody.jv.<unapply-selector>" title="(f: org.json4s.JsonAST.JField)Option[(String, org.json4s.JsonAST.JValue)]">JField</a><span class="delimiter">(</span>_, <a title="org.json4s.JsonAST.JValue" id="org.scalatra.json;JsonSupport.readXmlFromBody.jv.jv">jv</a><span class="delimiter">)</span> :: <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> = <span title="(xml: scala.xml.NodeSeq)org.json4s.JValue">toJson</span><span title="org.json4s.JValue @unchecked" class="delimiter">(</span>scala.xml.<span title="scala.xml.XML.type">XML</span>.<span title="(string: String)scala.xml.Elem">loadString</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.readXmlFromBody.bd" title="String">bd</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#org.scalatra.json;JsonSupport.readXmlFromBody.jv" title="org.json4s.JsonAST.JValue">jv</a>
    <span class="delimiter">}</span> else <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
  <span class="delimiter">}</span>
  protected def <a title="(stream: java.io.InputStream)org.json4s.JValue" id="org.scalatra.json;JsonSupport.readXmlFromStream">readXmlFromStream</a><span class="delimiter">(</span><a title="java.io.InputStream" id="org.scalatra.json;JsonSupport.readXmlFromStream.stream">stream</a>: <span title="java.io.InputStream">InputStream</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span> = <span class="delimiter">{</span>
    val <a title="java.io.InputStreamReader" id="org.scalatra.json;JsonSupport.readXmlFromStream.rdr">rdr</a> = new <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.readXmlFromStream.stream" title="java.io.InputStream">stream</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.readXmlFromStream.rdr" title="java.io.InputStreamReader">rdr</a>.<span title="()Boolean">ready</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val JObject<a href="#org.scalatra.json;JsonSupport.readXmlFromStream.jv.jv" title="org.json4s.JsonAST.JValue" id="org.scalatra.json;JsonSupport.readXmlFromStream.jv" class="delimiter">(</a><a href="#org.scalatra.json;JsonSupport.readXmlFromStream.jv.<unapply-selector>" title="(f: org.json4s.JsonAST.JField)Option[(String, org.json4s.JsonAST.JValue)]">JField</a><span class="delimiter">(</span>_, <a title="org.json4s.JsonAST.JValue" id="org.scalatra.json;JsonSupport.readXmlFromStream.jv.jv">jv</a><span class="delimiter">)</span> :: <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> = <span title="(xml: scala.xml.NodeSeq)org.json4s.JValue">toJson</span><span title="org.json4s.JValue @unchecked" class="delimiter">(</span>scala.xml.<span title="scala.xml.XML.type">XML</span>.<span title="(reader: java.io.Reader)scala.xml.Elem">load</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.readXmlFromStream.rdr" title="java.io.InputStreamReader">rdr</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#org.scalatra.json;JsonSupport.readXmlFromStream.jv" title="org.json4s.JsonAST.JValue">jv</a>
    <span class="delimiter">}</span> else <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
  <span class="delimiter">}</span>
  protected def <a title="(body: org.json4s.JValue)org.json4s.JValue" id="org.scalatra.json;JsonSupport.transformRequestBody">transformRequestBody</a><span class="delimiter">(</span><a title="org.json4s.JValue" id="org.scalatra.json;JsonSupport.transformRequestBody.body">body</a>: <span title="org.json4s.JValue">JValue</span><span class="delimiter">)</span> = <a href="#org.scalatra.json;JsonSupport.transformRequestBody.body" title="org.json4s.JValue">body</a>


  override protected def <a title="(matchedRoute: org.scalatra.MatchedRoute)Option[Any]" id="org.scalatra.json;JsonSupport.invoke">invoke</a><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.json;JsonSupport.invoke.matchedRoute">matchedRoute</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../ApiFormats.scala.html#org.scalatra;ApiFormats.withRouteMultiParams" title="(matchedRoute: Option[org.scalatra.MatchedRoute])(thunk: =&gt; Option[Any])Option[Any]">withRouteMultiParams</a><span class="delimiter">(</span><span title="(x: org.scalatra.MatchedRoute)Some[org.scalatra.MatchedRoute]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.invoke.matchedRoute" title="org.scalatra.MatchedRoute">matchedRoute</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="String" id="org.scalatra.json;JsonSupport.invoke.mt">mt</a> = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.contentType" title="=&gt; Option[String]">contentType</a>.<span title="(ifEmpty: =&gt; String)(f: String =&gt; String)String">fold</span><span class="delimiter">(</span><span title="String(&quot;application/x-www-form-urlencoded&quot;)" class="string">&quot;application/x-www-form-urlencoded&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.invoke.mt.$anonfun.x$1" title="String">_</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">head</span><span class="delimiter">)</span>
      val fmt = <a href="../ApiFormats.scala.html#org.scalatra;ApiFormats.mimeTypes" title="=&gt; scala.collection.concurrent.Map[String,String]">mimeTypes</a> <span title="(key: String)Option[String]">get</span> <a href="#org.scalatra.json;JsonSupport.invoke.mt" title="String">mt</a> <a title="String" id="org.scalatra.json;JsonSupport.invoke.fmt">getOrElse</a> <span title="String(&quot;html&quot;)" class="string">&quot;html&quot;</span>
      if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.shouldParseBody" title="(fmt: String)(implicit request: javax.servlet.http.HttpServletRequest)Boolean">shouldParseBody</a><a href="../DynamicScope.scala.html#org.scalatra;DynamicScope.request" title="=&gt; javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.json;JsonSupport.invoke.fmt" title="String">fmt</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.json.JsonSupport.ParsedBodyKey" title="=&gt; String">ParsedBodyKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.json;JsonSupport.parseRequestBody" title="(format: String)(implicit request: javax.servlet.http.HttpServletRequest)org.json4s.JValue">parseRequestBody</a><a href="../DynamicScope.scala.html#org.scalatra;DynamicScope.request" title="=&gt; javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.json;JsonSupport.invoke.fmt" title="String">fmt</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
      <span class="delimiter">}</span>
      super.<a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.invoke" title="(matchedRoute: org.scalatra.MatchedRoute)Option[Any]">invoke</a><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.invoke.matchedRoute" title="org.scalatra.MatchedRoute">matchedRoute</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected def <a title="(fmt: String)(implicit request: javax.servlet.http.HttpServletRequest)Boolean" id="org.scalatra.json;JsonSupport.shouldParseBody">shouldParseBody</a><span class="delimiter">(</span><a title="String" id="org.scalatra.json;JsonSupport.shouldParseBody.fmt">fmt</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.json;JsonSupport.shouldParseBody.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> =
    <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.shouldParseBody.fmt" title="String">fmt</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;json&quot;)" class="string">&quot;json&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#org.scalatra.json;JsonSupport.shouldParseBody.fmt" title="String">fmt</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.requestMethod" title="=&gt; org.scalatra.HttpMethod">requestMethod</a>.<a href="../HttpMethod.scala.html#org.scalatra;HttpMethod.isSafe" title="=&gt; Boolean">isSafe</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.scalatra.json;JsonSupport.parsedBody" title="(implicit request: javax.servlet.http.HttpServletRequest)org.json4s.JValue">parsedBody</a> <span title="(x$1: Any)Boolean">==</span> <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>

  def <a title="(implicit request: javax.servlet.http.HttpServletRequest)org.json4s.JValue" id="org.scalatra.json;JsonSupport.parsedBody">parsedBody</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.json;JsonSupport.parsedBody.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <span title="org.json4s.JValue">JValue</span> = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.json.JsonSupport.ParsedBodyKey" title="=&gt; String">ParsedBodyKey</a><span class="delimiter">)</span>.<span title="(ifEmpty: =&gt; org.json4s.JValue)(f: Any =&gt; org.json4s.JValue)org.json4s.JValue">fold</span><span class="delimiter">(</span><span class="delimiter">{</span>
    val <a title="String" id="org.scalatra.json;JsonSupport.parsedBody.fmt">fmt</a> = <a href="../ApiFormats.scala.html#org.scalatra;ApiFormats.requestFormat" title="(implicit request: javax.servlet.http.HttpServletRequest)String">requestFormat</a>
    var <a title="org.json4s.JValue" id="org.scalatra.json;JsonSupport.parsedBody.bd">bd</a>: <span title="org.json4s.JValue">JValue</span> = <span title="=&gt; org.json4s.JsonAST.JNothing.type">JNothing</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parsedBody.fmt" title="String">fmt</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;json&quot;)" class="string">&quot;json&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#org.scalatra.json;JsonSupport.parsedBody.fmt" title="String">fmt</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#org.scalatra.json;JsonSupport.parsedBody.bd" title="org.json4s.JValue">bd</a> = <a href="#org.scalatra.json;JsonSupport.parseRequestBody" title="(format: String)(implicit request: javax.servlet.http.HttpServletRequest)org.json4s.JValue">parseRequestBody</a><a href="#org.scalatra.json;JsonSupport.parsedBody.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.json;JsonSupport.parsedBody.fmt" title="String">fmt</a><span class="delimiter">)</span>
      <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.json.JsonSupport.ParsedBodyKey" title="=&gt; String">ParsedBodyKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.json;JsonSupport.parsedBody.bd" title="org.json4s.JValue">bd</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
    <span class="delimiter">}</span>
    <a href="#org.scalatra.json;JsonSupport.parsedBody.bd" title="org.json4s.JValue">bd</a>
  <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra.json;JsonSupport.parsedBody.$anonfun.x$2" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.json4s.JValue" class="delimiter">[</span><span title="org.json4s.JValue">JValue</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
