<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/slf4j/ScalatraSlf4jRequestLogging.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra
package slf4j

import org.scalatra.util.MultiMap
import org.slf4j.MDC
import java.util.<span class="delimiter">{</span> Map ⇒ JMap <span class="delimiter">}</span>
import grizzled.slf4j.<span class="delimiter">{</span>Logger, Logging<span class="delimiter">}</span>
import javax.servlet.http.<span class="delimiter">{</span>HttpServletResponse, HttpServletRequest<span class="delimiter">}</span>
import collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
import org.scalatra.util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._

object <a title="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.type" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging">ScalatraSlf4jRequestLogging</a> <a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging" title="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.type" class="delimiter">{</a>

  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.CgiParamsKey">CgiParamsKey</a> = <span title="String(&quot;org.scalatra.slf4j.ScalatraSlf4jSupport&quot;)" class="string">&quot;org.scalatra.slf4j.ScalatraSlf4jSupport&quot;</span>
  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestPath">RequestPath</a> = <span title="String(&quot;REQUEST_PATH&quot;)" class="string">&quot;REQUEST_PATH&quot;</span>
  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestApp">RequestApp</a> = <span title="String(&quot;REQUEST_APP&quot;)" class="string">&quot;REQUEST_APP&quot;</span> <span class="comment">// maps to a scalatra servlet</span>
  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestParams">RequestParams</a> = <span title="String(&quot;REQUEST_PARAMS&quot;)" class="string">&quot;REQUEST_PARAMS&quot;</span>
  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.SessionParams">SessionParams</a> = <span title="String(&quot;SESSION_PARAMS&quot;)" class="string">&quot;SESSION_PARAMS&quot;</span>
  val <a title="String" id="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.CgiParams">CgiParams</a> = <span title="String(&quot;CGI_PARAMS&quot;)" class="string">&quot;CGI_PARAMS&quot;</span>

<span class="delimiter">}</span>

trait <a title="trait ScalatraSlf4jRequestLogging extends AnyRef with org.scalatra.ScalatraBase with org.scalatra.Handler" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging">ScalatraSlf4jRequestLogging</a> extends <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase" title="org.scalatra.ScalatraBase">ScalatraBase</a> with <a href="../Handler.scala.html#org.scalatra;Handler" title="org.scalatra.Handler">Handler</a> <span class="delimiter">{</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="grizzled.slf4j.Logger" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logger">logger</a> = <span title="(name: String)grizzled.slf4j.Logger">Logger</span><span class="delimiter">(</span><span title="String(&quot;REQUEST&quot;)" class="string">&quot;REQUEST&quot;</span><span class="delimiter">)</span>
  import <a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging" title="org.scalatra.slf4j.ScalatraSlf4jRequestLogging.type">ScalatraSlf4jRequestLogging</a>._

  abstract override def <a title="(req: javax.servlet.http.HttpServletRequest, res: javax.servlet.http.HttpServletResponse)Unit" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle">handle</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.res">res</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val realMultiParams = <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="(m: java.util.Map[String,Array[String]])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,Array[String]]]">getParameterMap</span>.<span title="=&gt; scala.collection.mutable.Map[String,Array[String]]">asScala</span>.<span title="(implicit ev: &lt;:&lt;[(String, Array[String]),(String, Array[String])])scala.collection.immutable.Map[String,Array[String]]">toMap</span> <a title="scala.collection.immutable.Map[String,Seq[String]]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.realMultiParams">transform</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="String" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.realMultiParams.$anonfun.k">k</a>, <a title="Array[String]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.realMultiParams.$anonfun.v">v</a><span class="delimiter">)</span> ⇒ <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.realMultiParams.$anonfun.v" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">v</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">}</span>
    <a href="../DynamicScope.scala.html#org.scalatra;DynamicScope.withRequest" title="(request: javax.servlet.http.HttpServletRequest)(f: =&gt; Unit)Unit">withRequest</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="../util/MultiMap.scala.html#org.scalatra.util.MultiMap.apply(9c778827ef)" title="(wrapped: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap">MultiMap</a><span class="delimiter">(</span><span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.realMultiParams" title="scala.collection.immutable.Map[String,Seq[String]]">realMultiParams</a><span class="delimiter">)</span>
      <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.CgiParamsKey" title="=&gt; String">CgiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams" title="(req: javax.servlet.http.HttpServletRequest)scala.collection.immutable.Map[String,String]">readCgiParams</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span>
      <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc" title="()Unit">fillMdc</a><span class="delimiter">(</span><span class="delimiter">)</span>
      super.<a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.handle" title="(request: javax.servlet.http.HttpServletRequest, response: javax.servlet.http.HttpServletResponse)Unit">handle</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.req" title="javax.servlet.http.HttpServletRequest">req</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.handle.res" title="javax.servlet.http.HttpServletResponse">res</a><span class="delimiter">)</span>
      <span title="org.slf4j.MDC.type">MDC</span>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected def <a title="()Unit" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logRequest">logRequest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">info</span><span class="delimiter">(</span><span title="org.slf4j.MDC.type">MDC</span>.<span title="(m: java.util.Map[String,String])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,String]]">getCopyOfContextMap</span>.<span title="=&gt; scala.collection.mutable.Map[String,String]">asScala</span>.<span title="(f: ((String, String)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[String,String],String,scala.collection.mutable.Iterable[String]])scala.collection.mutable.Iterable[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Iterable.Coll,String,scala.collection.mutable.Iterable[String]]" class="delimiter">(</span><a title="(String, String)" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logRequest.$anonfun.kv">kv</a> =&gt; <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logRequest.$anonfun.kv" title="(String, String)">kv</a>.<span title="=&gt; String">_1</span>.<span title="()String">toString</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logRequest.$anonfun.kv" title="(String, String)">kv</a>.<span title="=&gt; String">_2</span>.<span title="()String">toString</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;{&quot;)" class="string">&quot;{&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot; }&quot;)" class="string">&quot; }&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override protected def <a title="[S](matchedRoute: Option[org.scalatra.MatchedRoute])(thunk: =&gt; S)S" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams">withRouteMultiParams</a><span class="delimiter">[</span><a title="" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams;S">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[org.scalatra.MatchedRoute]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.matchedRoute">matchedRoute</a>: <span title="Option[org.scalatra.MatchedRoute]">Option</span><span class="delimiter">[</span>MatchedRoute<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; S" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.thunk">thunk</a>: ⇒ S<span class="delimiter">)</span>: <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams;S" title="S">S</a> = <span class="delimiter">{</span>
    val <a title="org.scalatra.MultiParams" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.originalParams">originalParams</a> = <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.multiParams(53d1ef321f)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams">multiParams</a>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.originalParams" title="org.scalatra.MultiParams">originalParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.matchedRoute" title="Option[org.scalatra.MatchedRoute]">matchedRoute</a>.<span title="(f: org.scalatra.MatchedRoute =&gt; org.scalatra.MultiParams)Option[org.scalatra.MultiParams]">map</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.$anonfun.x$1" title="org.scalatra.MatchedRoute">_</a>.<a href="../route.scala.html#org.scalatra;MatchedRoute.multiParams" title="=&gt; org.scalatra.MultiParams">multiParams</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.collection.immutable.Map[_ &lt;: String, Seq[String]])scala.collection.immutable.Map[_ &lt;: String, Seq[String]]">getOrElse</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[Nothing,Nothing]">empty</span><span class="delimiter">)</span>
    <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc" title="()Unit">fillMdc</a><span class="delimiter">(</span><span class="delimiter">)</span>
    try <span class="delimiter">{</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.thunk" title="=&gt; S">thunk</a> <span class="delimiter">}</span> finally <span class="delimiter">{</span> <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.withRouteMultiParams.originalParams" title="org.scalatra.MultiParams">originalParams</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="()Unit" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc">fillMdc</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// Do this twice so that we get all the route params if they are available and applicable</span>
    <span title="org.slf4j.MDC.type">MDC</span>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="org.slf4j.MDC.type">MDC</span>.<span title="(x$1: String, x$2: String)Unit">put</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestPath" title="=&gt; String">RequestPath</a>, <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.requestPath" title="(implicit request: javax.servlet.http.HttpServletRequest)String">requestPath</a><span class="delimiter">)</span>
    <span title="org.slf4j.MDC.type">MDC</span>.<span title="(x$1: String, x$2: String)Unit">put</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestApp" title="=&gt; String">RequestApp</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging" title="()Class[_]">getClass</a>.<span title="()String">getSimpleName</span><span class="delimiter">)</span>
    <span title="org.slf4j.MDC.type">MDC</span>.<span title="(x$1: String, x$2: String)Unit">put</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.RequestParams" title="=&gt; String">RequestParams</a>, <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.multiParams(53d1ef321f)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams">multiParams</a> <span title="(f: ((String, Seq[String])) =&gt; Seq[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Seq[String]],Seq[String],scala.collection.immutable.Iterable[Seq[String]]])scala.collection.immutable.Iterable[Seq[String]]">map</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.x0$1" title="Seq[String]" class="delimiter">{</a> case <span class="delimiter">(</span><span title="String">k</span>, <a title="Seq[String]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.vl">vl</a><span class="delimiter">)</span> ⇒ <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.vl" title="Seq[String]">vl</a>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a title="String" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.$anonfun.v">v</a> ⇒ <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s=%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><span title="String">k</span><span class="delimiter">)</span>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.$anonfun.v" title="String">v</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(sep: String)String">mkString</span> <span title="String(&quot;&amp;&quot;)" class="string">&quot;&amp;&quot;</span><span class="delimiter">)</span>
    this match <span class="delimiter">{</span>
      case <a title="org.scalatra.slf4j.ScalatraSlf4jRequestLogging" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.a">a</a>: <a href="../SessionSupport.scala.html#org.scalatra;SessionSupport" title="org.scalatra.SessionSupport">SessionSupport</a> =&gt;
        <span title="org.slf4j.MDC.type">MDC</span>.<span title="(x$1: String, x$2: String)Unit">put</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.SessionParams" title="=&gt; String">SessionParams</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.a" title="org.scalatra.slf4j.ScalatraSlf4jRequestLogging">a</a>.<a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichSession" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichSession : (session: javax.servlet.http.HttpSession)org.scalatra.servlet.RichSession">session</a> <span title="(f: ((String, Any)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[String,Any],String,scala.collection.mutable.Iterable[String]])scala.collection.mutable.Iterable[String]">map</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.x0$2" title="String" class="delimiter">{</a> case <span class="delimiter">(</span><span title="String">k</span>, <span title="Any">v</span><span class="delimiter">)</span> ⇒ <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s=%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><span title="String">k</span><span class="delimiter">)</span>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><span title="Any">v</span>.<span title="()String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(sep: String)String">mkString</span> <span title="String(&quot;&amp;&quot;)" class="string">&quot;&amp;&quot;</span><span class="delimiter">)</span>
      case _ =&gt;
    <span class="delimiter">}</span>

    <span title="org.slf4j.MDC.type">MDC</span>.<span title="(x$1: String, x$2: String)Unit">put</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.CgiParams" title="=&gt; String">CgiParams</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.cgiParams" title="=&gt; Map[String,String]">cgiParams</a> <span title="(f: ((String, String)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,String],String,scala.collection.immutable.Iterable[String]])scala.collection.immutable.Iterable[String]">map</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.fillMdc.$anonfun.x0$3" title="String" class="delimiter">{</a> case <span class="delimiter">(</span><span title="String">k</span>, <span title="String">v</span><span class="delimiter">)</span> ⇒ <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s=%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><span title="String">k</span><span class="delimiter">)</span>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-" title="(s: String)String">%-</a><span class="delimiter">(</span><span title="String">v</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(sep: String)String">mkString</span> <span title="String(&quot;&amp;&quot;)" class="string">&quot;&amp;&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="=&gt; Map[String,String]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.cgiParams">cgiParams</a> = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a> <a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a> <a href="#org.scalatra.slf4j.ScalatraSlf4jRequestLogging.CgiParamsKey" title="=&gt; String">CgiParamsKey</a> <span title="(f: Any =&gt; Map[String,String])Option[Map[String,String]]">map</span> <span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.cgiParams.$anonfun.x$2" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Map[String,String]" class="delimiter">[</span><span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span title="(default: =&gt; Map[String,String])Map[String,String]">getOrElse</span> <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(req: javax.servlet.http.HttpServletRequest)scala.collection.immutable.Map[String,String]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams">readCgiParams</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req">req</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> = <span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]">Map</span><span class="delimiter">(</span>
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;AUTH_TYPE&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getAuthType</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;CONTENT_LENGTH&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()Int">getContentLength</span>.<span title="()String">toString</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;CONTENT_TYPE&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getContentType</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;DOCUMENT_ROOT&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.servletContext" title="=&gt; javax.servlet.ServletContext">servletContext</a>.<span title="(x$1: String)String">getRealPath</span><span class="delimiter">(</span><a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.servletContext" title="=&gt; javax.servlet.ServletContext">servletContext</a>.<span title="()String">getContextPath</span><span class="delimiter">)</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;PATH_INFO&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getPathInfo</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;PATH_TRANSLATED&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getPathTranslated</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;QUERY_STRING&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getQueryString</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;REMOTE_ADDR&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getRemoteAddr</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;REMOTE_HOST&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getRemoteHost</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;REMOTE_USER&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getRemoteUser</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;REQUEST_METHOD&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getMethod</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;SCRIPT_NAME&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getServletPath</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;SERVER_NAME&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getServerName</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;SERVER_PORT&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()Int">getServerPort</span>.<span title="()String">toString</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;SERVER_PROTOCOL&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.readCgiParams.req" title="javax.servlet.http.HttpServletRequest">req</a>.<span title="()String">getProtocol</span>,
    <span title="(self: String)ArrowAssoc[String]" class="string">&quot;SERVER_SOFTWARE&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.servletContext" title="=&gt; javax.servlet.ServletContext">servletContext</a>.<span title="()String">getServerInfo</span><span class="delimiter">)</span>

  private def <a title="(s: String)String" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-">%-</a><span class="delimiter">(</span><a title="String" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.%-.s">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">s</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a> <span title="(f: String =&gt; String)Option[String]">map</span> <span class="delimiter">(</span><a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">_</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.urlEncode(3bf7c90be7)" title="=&gt; String">urlEncode</a><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * Prepends a new route for the given HTTP method.
   *
   * Can be overriden so that subtraits can use their own logic.
   * Possible examples:
   * $ - restricting protocols
   * $ - namespace routes based on class name
   * $ - raising errors on overlapping entries.
   *
   * This is the method invoked by get(), post() etc.
   *
   * @see org.scalatra.ScalatraKernel#removeRoute
   */</span>
  override protected def <a title="(method: org.scalatra.HttpMethod, transformers: Seq[org.scalatra.RouteTransformer], action: =&gt; Any)org.scalatra.Route" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute">addRoute</a><span class="delimiter">(</span><a title="org.scalatra.HttpMethod" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.method">method</a>: <a href="../HttpMethod.scala.html#org.scalatra;HttpMethod" title="org.scalatra.HttpMethod">HttpMethod</a>, <a title="Seq[org.scalatra.RouteTransformer]" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.transformers">transformers</a>: <span title="Seq[org.scalatra.RouteTransformer]">Seq</span><span class="delimiter">[</span>_root_.org.scalatra.RouteTransformer<span class="delimiter">]</span>, <a title="=&gt; Any" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.action">action</a>: =&gt; Any<span class="delimiter">)</span>: <a href="../route.scala.html#org.scalatra;Route" title="org.scalatra.Route">Route</a> = <span class="delimiter">{</span>
    val <a title="() =&gt; Any" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.newAction">newAction</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      try <span class="delimiter">{</span> <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.logRequest" title="()Unit">logRequest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span> catch <span class="delimiter">{</span> case _: <span title="Throwable">Throwable</span> =&gt; <span class="delimiter">}</span>
      <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.action" title="=&gt; Any">action</a>
    <span class="delimiter">}</span>
    val <a title="org.scalatra.Route" id="org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.route">route</a> = <a href="../route.scala.html#org.scalatra.Route.apply(50c0ab7852)" title="(transformers: Seq[org.scalatra.RouteTransformer], action: org.scalatra.Action, contextPath: javax.servlet.http.HttpServletRequest =&gt; String)org.scalatra.Route">Route</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.transformers" title="Seq[org.scalatra.RouteTransformer]">transformers</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.newAction" title="() =&gt; Any">newAction</a>, <span class="delimiter">(</span>req: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> =&gt; <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.routeBasePath" title="(implicit request: javax.servlet.http.HttpServletRequest)String">routeBasePath</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.route.$anonfun.req" title="javax.servlet.http.HttpServletRequest">req</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.routes" title="=&gt; org.scalatra.RouteRegistry">routes</a>.<a href="../RouteRegistry.scala.html#org.scalatra;RouteRegistry.prependRoute" title="(method: org.scalatra.HttpMethod, route: org.scalatra.Route)Unit">prependRoute</a><span class="delimiter">(</span><a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.method" title="org.scalatra.HttpMethod">method</a>, <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.route" title="org.scalatra.Route">route</a><span class="delimiter">)</span>
    <a href="#org.scalatra.slf4j;ScalatraSlf4jRequestLogging.addRoute.route" title="org.scalatra.Route">route</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
