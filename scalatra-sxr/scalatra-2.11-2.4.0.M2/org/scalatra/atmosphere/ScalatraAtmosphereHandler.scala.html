<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/atmosphere/ScalatraAtmosphereHandler.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra
package atmosphere

import org.atmosphere.handler.AbstractReflectorAtmosphereHandler
import org.atmosphere.cpr._
import org.scalatra.servlet.<a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet.ServletApiImplicits" title="org.scalatra.servlet.ServletApiImplicits.type">ServletApiImplicits</a>._
import org.json4s.Formats
import java.nio.CharBuffer
import org.scalatra.util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._
import javax.servlet.http.<span class="delimiter">{</span>HttpServletRequest, HttpSession<span class="delimiter">}</span>
import org.atmosphere.cpr.<span title="org.atmosphere.cpr.AtmosphereResource.type">AtmosphereResource</span>.<span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT.type">TRANSPORT</span>._
import org.atmosphere.cpr.<span title="org.atmosphere.cpr.AtmosphereResource.type">AtmosphereResource</span>.TRANSPORT
import grizzled.slf4j.Logger

object <a title="org.scalatra.atmosphere.ScalatraAtmosphereHandler.type" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler">ScalatraAtmosphereHandler</a> <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler" title="org.scalatra.atmosphere.ScalatraAtmosphereHandler.type" class="delimiter">{</a>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `org.scalatra.atmosphere.AtmosphereClientKey` instead&quot;</span>, <span class="string">&quot;2.2.1&quot;</span><span class="delimiter">)</span>
  val <a title="String" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler.AtmosphereClientKey">AtmosphereClientKey</a> = org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `org.scalatra.atmosphere.AtmosphereRouteKey` instead&quot;</span>, <span class="string">&quot;2.2.1&quot;</span><span class="delimiter">)</span>
  val <a title="String" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler.AtmosphereRouteKey">AtmosphereRouteKey</a> = org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereRouteKey" title="=&gt; String">AtmosphereRouteKey</a>

  private class <a title="class ScalatraResourceEventListener extends Object with org.atmosphere.cpr.AtmosphereResourceEventListener" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener">ScalatraResourceEventListener</a> extends <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener" title="org.atmosphere.cpr.AtmosphereResourceEventListener">AtmosphereResourceEventListener</a> <span class="delimiter">{</span>
    def <a title="(resource: org.atmosphere.cpr.AtmosphereResource)Option[org.scalatra.atmosphere.AtmosphereClient]" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client">client</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> =
      <span title="(x: javax.servlet.http.HttpSession)Option[javax.servlet.http.HttpSession]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()javax.servlet.http.HttpSession">session</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: javax.servlet.http.HttpSession =&gt; Option[Any])Option[Any]">flatMap</span><span class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichSession" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichSession : (session: javax.servlet.http.HttpSession)org.scalatra.servlet.RichSession">_</a>.<a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: Any =&gt; org.scalatra.atmosphere.AtmosphereClient)Option[org.scalatra.atmosphere.AtmosphereClient]">map</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client.$anonfun.x$2" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.atmosphere.AtmosphereClient" class="delimiter">[</span><a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a><span class="delimiter">]</span><span class="delimiter">)</span>


    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onPreSuspend">onPreSuspend</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onPreSuspend.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast">onBroadcast</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast.resource">resource</a> = <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()org.atmosphere.cpr.AtmosphereResource">getResource</span>
        <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereResource.TRANSPORT">transport</span> match <span class="delimiter">{</span>
          case <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(JSONP)">JSONP</span> | <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(AJAX)">AJAX</span> | <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(LONG_POLLING)">LONG_POLLING</span> =&gt;
          case _ =&gt; <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onBroadcast.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereResponse">getResponse</span>.<span title="()Unit">flushBuffer</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect">onDisconnect</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="&lt;refinement of Product with org.scalatra.atmosphere.Disconnector&gt; extends Product with Serializable with org.scalatra.atmosphere.Disconnector" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.disconnector">disconnector</a> = if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()Boolean">isCancelled</span><span class="delimiter">)</span> <a href="messages.scala.html#org.scalatra.atmosphere.ClientDisconnected" title="org.scalatra.atmosphere.ClientDisconnected.type">ClientDisconnected</a> else <a href="messages.scala.html#org.scalatra.atmosphere.ServerDisconnected" title="org.scalatra.atmosphere.ServerDisconnected.type">ServerDisconnected</a>
      <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client" title="(resource: org.atmosphere.cpr.AtmosphereResource)Option[org.scalatra.atmosphere.AtmosphereClient]">client</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()org.atmosphere.cpr.AtmosphereResource">getResource</span><span class="delimiter">)</span> <span title="(f: org.scalatra.atmosphere.AtmosphereClient =&gt; Option[Unit])Unit">foreach</span> <span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.$anonfun.x$3" title="org.scalatra.atmosphere.AtmosphereClient">_</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.receive" title="=&gt; org.scalatra.atmosphere.AtmoReceive">receive</a>.<span title="(v1: org.scalatra.atmosphere.InboundMessage)Option[Unit]">lift</span><span class="delimiter">(</span><a href="messages.scala.html#org.scalatra.atmosphere;Disconnected" title="(who: org.scalatra.atmosphere.Disconnector, cause: Option[Throwable])org.scalatra.atmosphere.Disconnected">Disconnected</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.disconnector" title="&lt;refinement of Product with org.scalatra.atmosphere.Disconnector&gt; extends Product with Serializable with org.scalatra.atmosphere.Disconnector">disconnector</a>, <span title="(x: Throwable)Option[Throwable]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()Throwable">throwable</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="comment">//      if (!event.getResource.isResumed) {</span>
<span class="comment">//        event.getResource.session.invalidate()</span>
<span class="comment">//      } else {</span>
        <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onDisconnect.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()org.atmosphere.cpr.AtmosphereResource">getResource</span>.<span title="()javax.servlet.http.HttpSession">session</span>.<span title="(x$1: String)Unit">removeAttribute</span><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a><span class="delimiter">)</span>
<span class="comment">//      }</span>
    <span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onResume">onResume</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onResume.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onSuspend">onSuspend</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onSuspend.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onThrowable">onThrowable</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onThrowable.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.client" title="(resource: org.atmosphere.cpr.AtmosphereResource)Option[org.scalatra.atmosphere.AtmosphereClient]">client</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onThrowable.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()org.atmosphere.cpr.AtmosphereResource">getResource</span><span class="delimiter">)</span> <span title="(f: org.scalatra.atmosphere.AtmosphereClient =&gt; Option[Unit])Unit">foreach</span> <span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onThrowable.$anonfun.x$4" title="org.scalatra.atmosphere.AtmosphereClient">_</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.receive" title="=&gt; org.scalatra.atmosphere.AtmoReceive">receive</a>.<span title="(v1: org.scalatra.atmosphere.InboundMessage)Option[Unit]">lift</span><span class="delimiter">(</span><a href="messages.scala.html#org.scalatra.atmosphere;Error" title="(cause: Option[Throwable])org.scalatra.atmosphere.Error">Error</a><span class="delimiter">(</span><span title="(x: Throwable)Option[Throwable]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onThrowable.event" title="org.atmosphere.cpr.AtmosphereResourceEvent">event</a>.<span title="()Throwable">throwable</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(event: org.atmosphere.cpr.AtmosphereResourceEvent)Unit" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onClose">onClose</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResourceEvent" id="org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener.onClose.event">event</a>: <span title="org.atmosphere.cpr.AtmosphereResourceEvent">AtmosphereResourceEvent</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

class <a title="class ScalatraAtmosphereException extends org.scalatra.ScalatraException" id="org.scalatra.atmosphere;ScalatraAtmosphereException">ScalatraAtmosphereException</a><a href="#org.scalatra.atmosphere;ScalatraAtmosphereException" title="org.scalatra.atmosphere.ScalatraAtmosphereException" class="delimiter">(</a><a title="String" id="org.scalatra.atmosphere;ScalatraAtmosphereException.message">message</a>: <span title="String">String</span><span class="delimiter">)</span> extends <a href="../exceptions.scala.html#org.scalatra;ScalatraException" title="org.scalatra.ScalatraException">ScalatraException</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereException.message" title="String">message</a><span class="delimiter">)</span>
class <a title="class ScalatraAtmosphereHandler extends org.atmosphere.handler.AbstractReflectorAtmosphereHandler" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler">ScalatraAtmosphereHandler</a><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler" title="org.scalatra.atmosphere.ScalatraAtmosphereHandler" class="delimiter">(</a>implicit <a title="org.scalatra.atmosphere.WireFormat" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.wireFormat">wireFormat</a>: <a href="wire_format.scala.html#org.scalatra.atmosphere;WireFormat" title="org.scalatra.atmosphere.WireFormat">WireFormat</a><span class="delimiter">)</span> extends <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler" title="org.atmosphere.handler.AbstractReflectorAtmosphereHandler">AbstractReflectorAtmosphereHandler</a> <span class="delimiter">{</span>
  import <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler" title="org.scalatra.atmosphere.ScalatraAtmosphereHandler.type">ScalatraAtmosphereHandler</a>._

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="grizzled.slf4j.Logger" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.internalLogger">internalLogger</a> = <span title="(cls: Class[_])grizzled.slf4j.Logger">Logger</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler" title="()Class[_]">getClass</a><span class="delimiter">)</span>

  def <a title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest">onRequest</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.atmosphere.cpr.AtmosphereRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.req">req</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereRequest">getRequest</span>
    val <a title="Option[org.scalatra.MatchedRoute]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.route">route</a> = <span title="(x: Object)Option[Object]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.req" title="org.atmosphere.cpr.AtmosphereRequest">req</a>.<span title="(x$1: String)Object">getAttribute</span><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereRouteKey" title="=&gt; String">AtmosphereRouteKey</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: Object =&gt; org.scalatra.MatchedRoute)Option[org.scalatra.MatchedRoute]">map</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.route.$anonfun.x$5" title="Object">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.MatchedRoute" class="delimiter">[</span><a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a><span class="delimiter">]</span><span class="delimiter">)</span>
    var <a title="javax.servlet.http.HttpSession" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.session">session</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()javax.servlet.http.HttpSession">session</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="Boolean" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.isNew">isNew</a> = <span title="=&gt; Boolean">!</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichSession" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichSession : (session: javax.servlet.http.HttpSession)org.scalatra.servlet.RichSession">session</a>.<span title="(key: String)Boolean">contains</span><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a><span class="delimiter">)</span>

    <span title="(_1: org.scalatra.HttpMethod, _2: Boolean)(org.scalatra.HttpMethod, Boolean)" class="delimiter">(</span><a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">req</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.requestMethod" title="=&gt; org.scalatra.HttpMethod">requestMethod</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.route" title="Option[org.scalatra.MatchedRoute]">route</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span class="delimiter">(</span><a href="../HttpMethod.scala.html#org.scalatra.Post" title="org.scalatra.Post.type">Post</a>, _<span class="delimiter">)</span> =&gt;
        var <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.client">client</a> : <a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a> = null
        if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.isNew" title="Boolean">isNew</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.session" title="javax.servlet.http.HttpSession">session</a> = <span title="org.atmosphere.cpr.AtmosphereResourceFactory.type">AtmosphereResourceFactory</span>.<span title="()org.atmosphere.cpr.AtmosphereResourceFactory">getDefault</span>.<span title="(x$1: String)org.atmosphere.cpr.AtmosphereResource">find</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()String">uuid</span><span class="delimiter">)</span>.<span title="()javax.servlet.http.HttpSession">session</span>
        <span class="delimiter">}</span>

        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.client" title="org.scalatra.atmosphere.AtmosphereClient">client</a> = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichSession" title="(key: String)Any">session</a><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.atmosphere.AtmosphereClient" class="delimiter">[</span><a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a><span class="delimiter">]</span>
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage" title="(req: org.atmosphere.cpr.AtmosphereRequest, client: org.scalatra.atmosphere.AtmosphereClient)Unit">handleIncomingMessage</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.req" title="org.atmosphere.cpr.AtmosphereRequest">req</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.client" title="org.scalatra.atmosphere.AtmosphereClient">client</a><span class="delimiter">)</span>
      case <span class="delimiter">(</span>_, true<span class="delimiter">)</span> =&gt;
        val <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.cl">cl</a> = if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.isNew" title="Boolean">isNew</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34)" title="(route: org.scalatra.MatchedRoute, session: javax.servlet.http.HttpSession, resource: org.atmosphere.cpr.AtmosphereResource)org.scalatra.atmosphere.AtmosphereClient">createClient</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.route" title="Option[org.scalatra.MatchedRoute]">route</a>.<span title="=&gt; org.scalatra.MatchedRoute">get</span>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.session" title="javax.servlet.http.HttpSession">session</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> else null

        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.addEventListener" title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit">addEventListener</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a><span class="delimiter">)</span>
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.resumeIfNeeded" title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit">resumeIfNeeded</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a><span class="delimiter">)</span>
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster" title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit">configureBroadcaster</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.isNew" title="Boolean">isNew</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.cl" title="org.scalatra.atmosphere.AtmosphereClient">cl</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.cl" title="org.scalatra.atmosphere.AtmosphereClient">cl</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.receive" title="=&gt; org.scalatra.atmosphere.AtmoReceive">receive</a>.<span title="(v1: org.scalatra.atmosphere.InboundMessage)Option[Unit]">lift</span><span class="delimiter">(</span><a href="messages.scala.html#org.scalatra.atmosphere.Connected" title="org.scalatra.atmosphere.Connected.type">Connected</a><span class="delimiter">)</span>
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereResource">suspend</span>
      case _ =&gt;
        val <a title="org.scalatra.atmosphere.ScalatraAtmosphereException" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.ex">ex</a> = new <a href="#org.scalatra.atmosphere;ScalatraAtmosphereException" title="org.scalatra.atmosphere.ScalatraAtmosphereException">ScalatraAtmosphereException</a><span class="delimiter">(</span><span title="String(&quot;There is no atmosphere route defined for &quot;)" class="string">&quot;There is no atmosphere route defined for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.req" title="org.atmosphere.cpr.AtmosphereRequest">req</a>.<span title="()String">getRequestURI</span><span class="delimiter">)</span>
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.internalLogger" title="grizzled.slf4j.Logger">internalLogger</a>.<span title="(msg: =&gt; Any)Unit">warn</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.ex" title="org.scalatra.atmosphere.ScalatraAtmosphereException">ex</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
        throw <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.onRequest.ex" title="org.scalatra.atmosphere.ScalatraAtmosphereException">ex</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(route: org.scalatra.MatchedRoute, session: javax.servlet.http.HttpSession, resource: org.atmosphere.cpr.AtmosphereResource)org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34)">createClient</a><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).route">route</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a>, <a title="javax.servlet.http.HttpSession" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).session">session</a>: <span title="javax.servlet.http.HttpSession">HttpSession</span>, <a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams" title="(matchedRoute: org.scalatra.MatchedRoute, request: javax.servlet.http.HttpServletRequest)(thunk: =&gt; org.scalatra.atmosphere.AtmosphereClient)org.scalatra.atmosphere.AtmosphereClient">withRouteMultiParams</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).route" title="org.scalatra.MatchedRoute">route</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereRequest">getRequest</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).client">client</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.clientForRoute" title="(route: org.scalatra.MatchedRoute)org.scalatra.atmosphere.AtmosphereClient">clientForRoute</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).route" title="org.scalatra.MatchedRoute">route</a><span class="delimiter">)</span>
      <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichSession" title="(key: String, value: Any)Unit">session</a><span class="delimiter">(</span>org.scalatra.atmosphere.<a href="package.scala.html#org.scalatra.atmosphere.package.AtmosphereClientKey" title="=&gt; String">AtmosphereClientKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.resource_=" title="(x$1: org.atmosphere.cpr.AtmosphereResource)Unit">resource</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(9a7b0c6f34).client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(route: org.scalatra.MatchedRoute, resource: org.atmosphere.cpr.AtmosphereResource)org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588)">createClient</a><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).route">route</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a>, <a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams" title="(matchedRoute: org.scalatra.MatchedRoute, request: javax.servlet.http.HttpServletRequest)(thunk: =&gt; org.scalatra.atmosphere.AtmosphereClient)org.scalatra.atmosphere.AtmosphereClient">withRouteMultiParams</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).route" title="org.scalatra.MatchedRoute">route</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereRequest">getRequest</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).client">client</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.clientForRoute" title="(route: org.scalatra.MatchedRoute)org.scalatra.atmosphere.AtmosphereClient">clientForRoute</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).route" title="org.scalatra.MatchedRoute">route</a><span class="delimiter">)</span>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.resource_=" title="(x$1: org.atmosphere.cpr.AtmosphereResource)Unit">resource</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.createClient(b6cd6fd588).client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(route: org.scalatra.MatchedRoute)org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.clientForRoute">clientForRoute</a><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.clientForRoute.route">route</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a><span class="delimiter">)</span>: <a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a> = <span class="delimiter">{</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction" title="(action: org.scalatra.Action)Option[org.scalatra.atmosphere.AtmosphereClient]">liftAction</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.clientForRoute.route" title="org.scalatra.MatchedRoute">route</a>.<a href="../route.scala.html#org.scalatra;MatchedRoute.action" title="=&gt; org.scalatra.Action">action</a><span class="delimiter">)</span> <span title="(default: =&gt; org.scalatra.atmosphere.AtmosphereClient)org.scalatra.atmosphere.AtmosphereClient">getOrElse</span> <span class="delimiter">{</span>
      throw new <a href="../exceptions.scala.html#org.scalatra;ScalatraException" title="org.scalatra.ScalatraException">ScalatraException</a><span class="delimiter">(</span><span title="String(&quot;An atmosphere route should return an atmosphere client&quot;)" class="string">&quot;An atmosphere route should return an atmosphere client&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(resource: org.atmosphere.cpr.AtmosphereResource)String" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri">requestUri</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val u = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereRequest">getRequest</span>.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">getRequestURI</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a> <a title="String" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.u">getOrElse</a> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.u" title="String">u</a>.<span title="(x$1: String)Boolean">endsWith</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.u" title="String">u</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> else <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri.u" title="String">u</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;/*&quot;)" class="string">&quot;/*&quot;</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster">configureBroadcaster</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.atmosphere.cpr.Broadcaster" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster.bc">bc</a> = <span title="org.atmosphere.cpr.BroadcasterFactory.type">BroadcasterFactory</span>.<span title="()org.atmosphere.cpr.BroadcasterFactory">getDefault</span>.<span title="(x$1: Any)org.atmosphere.cpr.Broadcaster">get</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.requestUri" title="(resource: org.atmosphere.cpr.AtmosphereResource)String">requestUri</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="(x$1: org.atmosphere.cpr.Broadcaster)org.atmosphere.cpr.AtmosphereResource">setBroadcaster</span><span title="Unit" class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.configureBroadcaster.bc" title="org.atmosphere.cpr.Broadcaster">bc</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(req: org.atmosphere.cpr.AtmosphereRequest, client: org.scalatra.atmosphere.AtmosphereClient)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage">handleIncomingMessage</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.req">req</a>: <span title="org.atmosphere.cpr.AtmosphereRequest">AtmosphereRequest</span>, <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.client">client</a>: <a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.scalatra.atmosphere.InboundMessage" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.parsed">parsed</a>: <a href="messages.scala.html#org.scalatra.atmosphere;InboundMessage" title="org.scalatra.atmosphere.InboundMessage">InboundMessage</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.wireFormat" title="org.scalatra.atmosphere.WireFormat">wireFormat</a>.<a href="wire_format.scala.html#org.scalatra.atmosphere;WireFormat.parseInMessage" title="(message: String)org.scalatra.atmosphere.InboundMessage">parseInMessage</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody" title="(req: org.atmosphere.cpr.AtmosphereRequest)String">readBody</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.req" title="org.atmosphere.cpr.AtmosphereRequest">req</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.client" title="org.scalatra.atmosphere.AtmosphereClient">client</a>.<a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient.receive" title="=&gt; org.scalatra.atmosphere.AtmoReceive">receive</a>.<span title="(v1: org.scalatra.atmosphere.InboundMessage)Option[Unit]">lift</span><span title="Unit" class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.handleIncomingMessage.parsed" title="org.scalatra.atmosphere.InboundMessage">parsed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(req: org.atmosphere.cpr.AtmosphereRequest)String" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody">readBody</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.req">req</a>: <span title="org.atmosphere.cpr.AtmosphereRequest">AtmosphereRequest</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="java.nio.CharBuffer" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.buff">buff</a> = <span title="java.nio.CharBuffer.type">CharBuffer</span>.<span title="(x$1: Int)java.nio.CharBuffer">allocate</span><span class="delimiter">(</span><span title="Int(8192)" class="int">8192</span><span class="delimiter">)</span>
    val <a title="StringBuilder" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.body">body</a> = new <span title="StringBuilder">StringBuilder</span>
    val <a title="java.io.BufferedReader" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.rdr">rdr</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.req" title="org.atmosphere.cpr.AtmosphereRequest">req</a>.<span title="()java.io.BufferedReader">getReader</span>
    while <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.rdr" title="java.io.BufferedReader">rdr</a>.<span title="(x$1: java.nio.CharBuffer)Int">read</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.buff" title="java.nio.CharBuffer">buff</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.while$1" title="()Unit" class="delimiter">{</a>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.body" title="StringBuilder">body</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.buff" title="java.nio.CharBuffer">buff</a>.<span title="()java.nio.Buffer">flip</span>.<span title="()String">toString</span><span class="delimiter">)</span>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.buff" title="java.nio.CharBuffer">buff</a>.<span title="()java.nio.Buffer">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.readBody.body" title="StringBuilder">body</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def  <a title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.addEventListener">addEventListener</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.addEventListener.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.addEventListener.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="(x$1: org.atmosphere.cpr.AtmosphereResourceEventListener)org.atmosphere.cpr.AtmosphereResource">addEventListener</span><span title="Unit" class="delimiter">(</span>new <a href="#org.scalatra.atmosphere.ScalatraAtmosphereHandler;ScalatraResourceEventListener" title="org.scalatra.atmosphere.ScalatraAtmosphereHandler.ScalatraResourceEventListener">ScalatraResourceEventListener</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * The current multiparams.  Multiparams are a result of merging the
   * standard request params (query string or post params) with the route
   * parameters extracted from the route matchers of the current route.
   * The default value for an unknown param is the empty sequence.  Invalid
   * outside `handle`.
   */</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams">multiParams</a><span class="delimiter">(</span><a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="../util/MultiMap.scala.html#org.scalatra.util;MultiMap" title="org.scalatra.MultiParams">MultiParams</a> = <span class="delimiter">{</span>
    val <a title="Boolean" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.read">read</a> = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<span title="(key: String)Boolean">contains</span><span class="delimiter">(</span><span title="String(&quot;MultiParamsRead&quot;)" class="string">&quot;MultiParamsRead&quot;</span><span class="delimiter">)</span>
    val found = <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> <a title="Option[scala.collection.immutable.Map[String,Seq[String]]]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.found">map</a> <span class="delimiter">(</span>
     <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.found.$anonfun.x$6" title="Any">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatra.MultiParams" class="delimiter">[</span><a href="../util/MultiMap.scala.html#org.scalatra.util;MultiMap" title="org.scalatra.MultiParams">MultiParams</a><span class="delimiter">]</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.read" title="Boolean">read</a><span class="delimiter">)</span> <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[Nothing,Nothing]">empty</span> else <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.multiParameters" title="=&gt; org.scalatra.MultiParams">multiParameters</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    val multi = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.found" title="Option[scala.collection.immutable.Map[String,Seq[String]]]">found</a> <a title="scala.collection.immutable.Map[String,Seq[String]]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.multi">getOrElse</a> <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/RichRequest.scala.html#org.scalatra.servlet;RichRequest.multiParameters" title="=&gt; org.scalatra.MultiParams">multiParameters</a>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><span title="String(&quot;MultiParamsRead&quot;)" class="string">&quot;MultiParamsRead&quot;</span><span class="delimiter">)</span> = new <a title="&lt;$anon: AnyRef&gt; extends AnyRef" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams;$anon" class="delimiter">{</a><span class="delimiter">}</span>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.multi" title="scala.collection.immutable.Map[String,Seq[String]]">multi</a>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams.multi" title="scala.collection.immutable.Map[String,Seq[String]]">multi</a>.<span title="(d: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">withDefaultValue</span><a href="../util/MultiMap.scala.html#org.scalatra.util.MultiMap.map2MultiMap" title="implicit org.scalatra.util.MultiMap.map2MultiMap : (map: scala.collection.immutable.Map[String,Seq[String]])org.scalatra.util.MultiMap" class="delimiter">(</a><span title="scala.collection.Seq.type">Seq</span>.<span title="Seq[Nothing]">empty</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="[S](matchedRoute: org.scalatra.MatchedRoute, request: javax.servlet.http.HttpServletRequest)(thunk: =&gt; S)S" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams">withRouteMultiParams</a><span class="delimiter">[</span><a title="" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams;S">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.matchedRoute">matchedRoute</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a>, <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; S" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.thunk">thunk</a>: =&gt; S<span class="delimiter">)</span>: <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams;S" title="S">S</a> = <span class="delimiter">{</span>
    val <a title="org.scalatra.MultiParams" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.originalParams">originalParams</a> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.multiParams" title="(request: javax.servlet.http.HttpServletRequest)org.scalatra.MultiParams">multiParams</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams" title="(matchedRoute: org.scalatra.MatchedRoute, originalParams: org.scalatra.MultiParams, request: javax.servlet.http.HttpServletRequest)Unit">setMultiparams</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.matchedRoute" title="org.scalatra.MatchedRoute">matchedRoute</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.originalParams" title="org.scalatra.MultiParams">originalParams</a>, <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span>
    try <span class="delimiter">{</span>
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.thunk" title="=&gt; S">thunk</a>
    <span class="delimiter">}</span> finally <span class="delimiter">{</span>
      <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.withRouteMultiParams.originalParams" title="org.scalatra.MultiParams">originalParams</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="[S](matchedRoute: org.scalatra.MatchedRoute, originalParams: org.scalatra.MultiParams, request: javax.servlet.http.HttpServletRequest)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams">setMultiparams</a><span class="delimiter">[</span><a title="" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams;S">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="org.scalatra.MatchedRoute" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.matchedRoute">matchedRoute</a>: <a href="../route.scala.html#org.scalatra;MatchedRoute" title="org.scalatra.MatchedRoute">MatchedRoute</a>, <a title="org.scalatra.MultiParams" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.originalParams">originalParams</a>: <a href="../util/MultiMap.scala.html#org.scalatra.util;MultiMap" title="org.scalatra.MultiParams">MultiParams</a>, <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val routeParams = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.matchedRoute" title="org.scalatra.MatchedRoute">matchedRoute</a>.<a href="../route.scala.html#org.scalatra;MatchedRoute.multiParams" title="=&gt; org.scalatra.MultiParams">multiParams</a> <a title="scala.collection.immutable.Map[String,Seq[String]]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams">map</a> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.x0$1" title="(String, Seq[String])" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="String" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.key">key</a>, <a title="Seq[String]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.values">values</a><span class="delimiter">)</span> =&gt;
        <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.key" title="(self: String)ArrowAssoc[String]">key</a> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.values" title="Seq[String]">values</a>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="../ScalatraBase.scala.html#org.scalatra.UriDecoder" title="org.scalatra.UriDecoder.type">UriDecoder</a>.<a href="../ScalatraBase.scala.html#org.scalatra.UriDecoder.secondStep" title="(uri: String)String">secondStep</a><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams.$anonfun.$anonfun.x$7" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="../package.scala.html#org.scalatra.package.MultiParamsKey" title="=&gt; String">MultiParamsKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.originalParams" title="org.scalatra.MultiParams">originalParams</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">++</span> <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.setMultiparams.routeParams" title="scala.collection.immutable.Map[String,Seq[String]]">routeParams</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(action: org.scalatra.Action)Option[org.scalatra.atmosphere.AtmosphereClient]" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction">liftAction</a><span class="delimiter">(</span><a title="org.scalatra.Action" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.action">action</a>: org.scalatra.<span title="org.scalatra.Action">Action</span><span class="delimiter">)</span> = try <span class="delimiter">{</span>
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.action" title="()Any">action</a><span class="delimiter">(</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <a title="org.scalatra.atmosphere.AtmosphereClient" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.cl">cl</a>: <a href="AtmosphereClient.scala.html#org.scalatra.atmosphere;AtmosphereClient" title="org.scalatra.atmosphere.AtmosphereClient">AtmosphereClient</a> =&gt; <span title="(x: org.scalatra.atmosphere.AtmosphereClient)Some[org.scalatra.atmosphere.AtmosphereClient]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.cl" title="org.scalatra.atmosphere.AtmosphereClient">cl</a><span class="delimiter">)</span>
      case _ =&gt; <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> catch <span class="delimiter">{</span>
    case <a title="Throwable" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.t">t</a>: <span title="Throwable">Throwable</span> =&gt;
      <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.liftAction.t" title="Throwable">t</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="None.type">None</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(resource: org.atmosphere.cpr.AtmosphereResource)Unit" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.resumeIfNeeded">resumeIfNeeded</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.scalatra.atmosphere;ScalatraAtmosphereHandler.resumeIfNeeded.resource">resource</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    import <span title="org.atmosphere.cpr.AtmosphereResource.type">AtmosphereResource</span>.<span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT.type">TRANSPORT</span>._
    <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.resumeIfNeeded.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="()org.atmosphere.cpr.AtmosphereResource.TRANSPORT">transport</span> match <span class="delimiter">{</span>
      case <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(JSONP)">JSONP</span> | <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(AJAX)">AJAX</span> | <span title="org.atmosphere.cpr.AtmosphereResource.TRANSPORT(LONG_POLLING)">LONG_POLLING</span> =&gt; <a href="#org.scalatra.atmosphere;ScalatraAtmosphereHandler.resumeIfNeeded.resource" title="org.atmosphere.cpr.AtmosphereResource">resource</a>.<span title="(x$1: Boolean)org.atmosphere.cpr.AtmosphereResource">resumeOnBroadcast</span><span title="Unit" class="delimiter">(</span>true<span class="delimiter">)</span>
      case _ =&gt;
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
