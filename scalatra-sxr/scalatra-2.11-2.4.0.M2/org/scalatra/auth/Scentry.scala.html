<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/scalatra/auth/Scentry.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.scalatra
package auth

import <a href="ScentryAuthStore.scala.html#org.scalatra.auth.ScentryAuthStore" title="org.scalatra.auth.ScentryAuthStore.type">ScentryAuthStore</a>.ScentryAuthStore
import collection.mutable
import grizzled.slf4j.Logger
import org.scalatra.util.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString" title="org.scalatra.util.RicherString.type">RicherString</a>._
import javax.servlet.http.<span class="delimiter">{</span>HttpServletResponse, HttpServletRequest<span class="delimiter">}</span>
import servlet.<a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet.ServletApiImplicits" title="org.scalatra.servlet.ServletApiImplicits.type">ServletApiImplicits</a>._


object <a title="org.scalatra.auth.Scentry.type" id="org.scalatra.auth.Scentry">Scentry</a> <a href="#org.scalatra.auth.Scentry" title="org.scalatra.auth.Scentry.type" class="delimiter">{</a>

  type <a title="[UserType &lt;: AnyRef]org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[UserType]" id="org.scalatra.auth.Scentry;StrategyFactory">StrategyFactory</a><span class="delimiter">[</span><a title=" &lt;: AnyRef" id="org.scalatra.auth.Scentry;StrategyFactory;UserType">UserType</a> &lt;: AnyRef<span class="delimiter">]</span> = ScalatraBase â‡’ ScentryStrategy<span class="delimiter">[</span>UserType<span class="delimiter">]</span>

  private val <a title="scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]" id="org.scalatra.auth.Scentry._globalStrategies">_globalStrategies</a> = new mutable.<span title="scala.collection.mutable.HashMap[String,org.scalatra.auth.Scentry.StrategyFactory[_ &lt;: AnyRef]]">HashMap</span><span class="delimiter">[</span>String, StrategyFactory<span class="delimiter">[</span>_ &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use method `register` with strings instead.&quot;</span>, <span class="string">&quot;2.0&quot;</span><span class="delimiter">)</span>
  def <a title="[UserType &lt;: AnyRef](name: Symbol, strategyFactory: org.scalatra.auth.Scentry.StrategyFactory[UserType])Unit" id="org.scalatra.auth.Scentry.registerStrategy">registerStrategy</a><span class="delimiter">[</span><a title=" &lt;: AnyRef" id="org.scalatra.auth.Scentry.registerStrategy;UserType">UserType</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="Symbol" id="org.scalatra.auth.Scentry.registerStrategy.name">name</a>: <span title="Symbol">Symbol</span>, <a title="org.scalatra.auth.Scentry.StrategyFactory[UserType]" id="org.scalatra.auth.Scentry.registerStrategy.strategyFactory">strategyFactory</a>: <span title="org.scalatra.auth.Scentry.StrategyFactory[UserType]">StrategyFactory</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth.Scentry._globalStrategies" title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">_globalStrategies</a> <span title="(kv: (String, org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }))org.scalatra.auth.Scentry._globalStrategies.type">+=</span> <span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.registerStrategy.name" title="Symbol">name</a>.<span title="(self: String)ArrowAssoc[String]">name</span> <span title="(y: org.scalatra.auth.Scentry.StrategyFactory[UserType])(String, org.scalatra.auth.Scentry.StrategyFactory[UserType])">-&gt;</span> <a href="#org.scalatra.auth.Scentry.registerStrategy.strategyFactory" title="org.scalatra.auth.Scentry.StrategyFactory[UserType]">strategyFactory</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="[UserType &lt;: AnyRef](name: String, strategyFactory: org.scalatra.auth.Scentry.StrategyFactory[UserType])Unit" id="org.scalatra.auth.Scentry.register">register</a><span class="delimiter">[</span><a title=" &lt;: AnyRef" id="org.scalatra.auth.Scentry.register;UserType">UserType</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="org.scalatra.auth.Scentry.register.name">name</a>: <span title="String">String</span>, <a title="org.scalatra.auth.Scentry.StrategyFactory[UserType]" id="org.scalatra.auth.Scentry.register.strategyFactory">strategyFactory</a>: <span title="org.scalatra.auth.Scentry.StrategyFactory[UserType]">StrategyFactory</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth.Scentry._globalStrategies" title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">_globalStrategies</a> <span title="(kv: (String, org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }))org.scalatra.auth.Scentry._globalStrategies.type">+=</span> <span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.register.name" title="(self: String)ArrowAssoc[String]">name</a> <span title="(y: org.scalatra.auth.Scentry.StrategyFactory[UserType])(String, org.scalatra.auth.Scentry.StrategyFactory[UserType])">-&gt;</span> <a href="#org.scalatra.auth.Scentry.register.strategyFactory" title="org.scalatra.auth.Scentry.StrategyFactory[UserType]">strategyFactory</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]" id="org.scalatra.auth.Scentry.globalStrategies">globalStrategies</a> = <a href="#org.scalatra.auth.Scentry._globalStrategies" title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">_globalStrategies</a>
  def <a title="()Unit" id="org.scalatra.auth.Scentry.clearGlobalStrategies">clearGlobalStrategies</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth.Scentry._globalStrategies" title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">_globalStrategies</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  val <a title="String" id="org.scalatra.auth.Scentry.scentryAuthKey">scentryAuthKey</a> = <span title="String(&quot;scentry.auth.default.user&quot;)" class="string">&quot;scentry.auth.default.user&quot;</span>
  val <a title="String" id="org.scalatra.auth.Scentry.ScentryRequestKey">ScentryRequestKey</a> = <span title="String(&quot;org.scalatra.auth.Scentry&quot;)" class="string">&quot;org.scalatra.auth.Scentry&quot;</span>
<span class="delimiter">}</span>

class <a title="class Scentry[UserType &lt;: AnyRef] extends AnyRef" id="org.scalatra.auth;Scentry">Scentry</a><span class="delimiter">[</span><a title=" &lt;: AnyRef" id="org.scalatra.auth;Scentry;UserType">UserType</a> &lt;: AnyRef<span class="delimiter">]</span><a href="#org.scalatra.auth;Scentry" title="org.scalatra.auth.Scentry[UserType]" class="delimiter">(</a>
    <a title="org.scalatra.ScalatraBase" id="org.scalatra.auth;Scentry.app">app</a>: <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase" title="org.scalatra.ScalatraBase">ScalatraBase</a>,
    <a title="PartialFunction[UserType,String]" id="org.scalatra.auth;Scentry.serialize">serialize</a>: <span title="PartialFunction[UserType,String]">PartialFunction</span><span class="delimiter">[</span>UserType, String<span class="delimiter">]</span>,
    <a title="PartialFunction[String,UserType]" id="org.scalatra.auth;Scentry.deserialize">deserialize</a>: <span title="PartialFunction[String,UserType]">PartialFunction</span><span class="delimiter">[</span>String, UserType<span class="delimiter">]</span>,
    private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore" id="org.scalatra.auth;Scentry._store">_store</a>: <a href="ScentryAuthStore.scala.html#org.scalatra.auth.ScentryAuthStore;ScentryAuthStore" title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">ScentryAuthStore</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> lazy val <a title="grizzled.slf4j.Logger" id="org.scalatra.auth;Scentry.logger">logger</a> = <span title="(cls: Class[_])grizzled.slf4j.Logger">Logger</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry" title="()Class[_]">getClass</a><span class="delimiter">)</span>
  type <a title="org.scalatra.auth.ScentryStrategy[UserType]" id="org.scalatra.auth;Scentry;StrategyType">StrategyType</a> = <a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy" title="org.scalatra.auth.ScentryStrategy[UserType]">ScentryStrategy</a><span class="delimiter">[</span>UserType<span class="delimiter">]</span>
  type <a title="org.scalatra.ScalatraBase =&gt; Scentry.this.StrategyType" id="org.scalatra.auth;Scentry;StrategyFactory">StrategyFactory</a> = ScalatraBase â‡’ StrategyType

  import <a href="#org.scalatra.auth.Scentry" title="org.scalatra.auth.Scentry.type">Scentry</a>._

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="scala.collection.mutable.HashMap[String,Scentry.this.StrategyFactory]" id="org.scalatra.auth;Scentry._strategies">_strategies</a> = new mutable.<span title="scala.collection.mutable.HashMap[String,Scentry.this.StrategyFactory]">HashMap</span><span class="delimiter">[</span>String, StrategyFactory<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(implicit request: javax.servlet.http.HttpServletRequest)UserType" id="org.scalatra.auth;Scentry._user">_user</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry._user.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="#org.scalatra.auth;Scentry;UserType" title="UserType">UserType</a> =
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a>.<a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.get(adc3586498)" title="(key: String)Option[Any]">get</a><span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.scentryAuthKey" title="=&gt; String">scentryAuthKey</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,Any])Any">orNull</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="UserType" class="delimiter">[</span><a href="#org.scalatra.auth;Scentry;UserType" title="UserType">UserType</a><span class="delimiter">]</span>

  def <a title="=&gt; org.scalatra.auth.ScentryAuthStore.ScentryAuthStore" id="org.scalatra.auth;Scentry.store">store</a> = <a href="#org.scalatra.auth;Scentry._store" title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">_store</a>
  def <a title="(newStore: org.scalatra.auth.ScentryAuthStore.ScentryAuthStore)Unit" id="org.scalatra.auth;Scentry.store_=">store_=</a><span class="delimiter">(</span><a title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore" id="org.scalatra.auth;Scentry.store_=.newStore">newStore</a>: <a href="ScentryAuthStore.scala.html#org.scalatra.auth.ScentryAuthStore;ScentryAuthStore" title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">ScentryAuthStore</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry._store" title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">_store</a> = <a href="#org.scalatra.auth;Scentry.store_=.newStore" title="org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">newStore</a>
  <span class="delimiter">}</span>

  def <a title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Boolean" id="org.scalatra.auth;Scentry.isAuthenticated">isAuthenticated</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.isAuthenticated.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.isAuthenticated.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry.userOption" title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]">userOption</a>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  <span class="comment">//def session = app.session</span>
  def <a title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.Params" id="org.scalatra.auth;Scentry.params">params</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.params.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span><span class="delimiter">)</span>: <a href="../package.scala.html#org.scalatra.package;<refinement>" title="org.scalatra.Params">Params</a> = <a href="#org.scalatra.auth;Scentry.app" title="org.scalatra.ScalatraBase">app</a>.<a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.params(253444d747)" title="(implicit request: javax.servlet.http.HttpServletRequest)org.scalatra.Params">params</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.params.request" title="javax.servlet.http.HttpServletRequest">request</a><span class="delimiter">)</span>
  def <a title="(uri: String)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit" id="org.scalatra.auth;Scentry.redirect">redirect</a><span class="delimiter">(</span><a title="String" id="org.scalatra.auth;Scentry.redirect.uri">uri</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.redirect.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.redirect.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry.app" title="org.scalatra.ScalatraBase">app</a>.<a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase.redirect" title="(uri: String)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Nothing">redirect</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.redirect.uri" title="String">uri</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.redirect.request" title="javax.servlet.http.HttpServletRequest">request</a>, <a href="#org.scalatra.auth;Scentry.redirect.response" title="javax.servlet.http.HttpServletResponse">response</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(strategy: =&gt; org.scalatra.auth.ScentryStrategy[UserType])Unit" id="org.scalatra.auth;Scentry.register(a29a5d1c5a)">register</a><span class="delimiter">(</span><a title="=&gt; org.scalatra.auth.ScentryStrategy[UserType]" id="org.scalatra.auth;Scentry.register(a29a5d1c5a).strategy">strategy</a>: =&gt; ScentryStrategy<span class="delimiter">[</span>UserType<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry.register(9df02d53f2)" title="(name: String, strategyFactory: Scentry.this.StrategyFactory)Unit">register</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.register(a29a5d1c5a).strategy" title="=&gt; org.scalatra.auth.ScentryStrategy[UserType]">strategy</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.name" title="=&gt; String">name</a>, <span class="delimiter">(</span><span class="delimiter">(</span>_: <a href="../ScalatraBase.scala.html#org.scalatra;ScalatraBase" title="org.scalatra.ScalatraBase">ScalatraBase</a><span class="delimiter">)</span> =&gt; <a href="#org.scalatra.auth;Scentry.register(a29a5d1c5a).strategy" title="=&gt; org.scalatra.auth.ScentryStrategy[UserType]">strategy</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  def <a title="(name: String, strategyFactory: Scentry.this.StrategyFactory)Unit" id="org.scalatra.auth;Scentry.register(9df02d53f2)">register</a><span class="delimiter">(</span><a title="String" id="org.scalatra.auth;Scentry.register(9df02d53f2).name">name</a>: <span title="String">String</span>, <a title="Scentry.this.StrategyFactory" id="org.scalatra.auth;Scentry.register(9df02d53f2).strategyFactory">strategyFactory</a>: <span title="Scentry.this.StrategyFactory">StrategyFactory</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry._strategies" title="scala.collection.mutable.HashMap[String,Scentry.this.StrategyFactory]">_strategies</a> <span title="(kv: (String, Scentry.this.StrategyFactory))Scentry.this._strategies.type">+=</span> <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.register(9df02d53f2).name" title="(self: String)ArrowAssoc[String]">name</a> <span title="(y: Scentry.this.StrategyFactory)(String, Scentry.this.StrategyFactory)">-&gt;</span> <a href="#org.scalatra.auth;Scentry.register(9df02d53f2).strategyFactory" title="Scentry.this.StrategyFactory">strategyFactory</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]" id="org.scalatra.auth;Scentry.strategies">strategies</a>: mutable.<span title="scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">Map</span><span class="delimiter">[</span>String, ScentryStrategy<span class="delimiter">[</span>UserType<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.globalStrategies" title="=&gt; scala.collection.mutable.HashMap[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">globalStrategies</a> <span title="(xs: scala.collection.GenTraversableOnce[(String, org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef })])scala.collection.mutable.Map[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }]">++</span> <a href="#org.scalatra.auth;Scentry._strategies" title="scala.collection.mutable.HashMap[String,Scentry.this.StrategyFactory]">_strategies</a><span class="delimiter">)</span> <span title="(f: ((String, org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef })) =&gt; (String, Scentry.this.StrategyType))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[String,org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }],(String, Scentry.this.StrategyType),scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]])scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">map</span> <a href="#org.scalatra.auth;Scentry.strategies.$anonfun.x0$1" title="(String, Scentry.this.StrategyType)" class="delimiter">{</a> case <span class="delimiter">(</span><a title="String" id="org.scalatra.auth;Scentry.strategies.$anonfun.nm">nm</a>, <a title="org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }" id="org.scalatra.auth;Scentry.strategies.$anonfun.fact">fact</a><span class="delimiter">)</span> â‡’ <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.strategies.$anonfun.nm" title="(self: String)ArrowAssoc[String]">nm</a> <span title="(y: Scentry.this.StrategyType)(String, Scentry.this.StrategyType)">-&gt;</span> <a href="#org.scalatra.auth;Scentry.strategies.$anonfun.fact" title="org.scalatra.ScalatraBase =&gt; org.scalatra.auth.ScentryStrategy[_$1] forSome { type _$1 &lt;: AnyRef }">fact</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="(v1: org.scalatra.ScalatraBase)Scentry.this.StrategyType" class="delimiter">[</span><span title="Scentry.this.StrategyFactory">StrategyFactory</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.app" title="org.scalatra.ScalatraBase">app</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  def <a title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]" id="org.scalatra.auth;Scentry.userOption">userOption</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.userOption.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.userOption.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span>: <span title="Option[UserType]">Option</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span> =
    <span title="(x: UserType)Option[UserType]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry._user" title="(implicit request: javax.servlet.http.HttpServletRequest)UserType">_user</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[UserType])Option[UserType]">orElse</span> <span class="delimiter">{</span>
      <a href="#org.scalatra.auth;Scentry.store" title="=&gt; org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">store</a>.<a href="../util/RicherString.scala.html#org.scalatra.util.RicherString.stringToRicherString" title="implicit org.scalatra.util.RicherString.stringToRicherString : (s: String)org.scalatra.util.RicherString">get</a>.<a href="../util/RicherString.scala.html#org.scalatra.util;RicherString.blankOption" title="=&gt; Option[String]">blankOption</a> <span title="(f: String =&gt; Option[UserType])Option[UserType]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="org.scalatra.auth;Scentry.userOption.$anonfun.key">key</a> =&gt;
        <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.$anonfun.x$2" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.beforeFetch" title="(userId: String)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">beforeFetch</a><a href="#org.scalatra.auth;Scentry.userOption.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.userOption.$anonfun.key" title="String">key</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        val o = <a href="#org.scalatra.auth;Scentry.fromSession" title="=&gt; PartialFunction[String,UserType]">fromSession</a> <span title="(v1: String)Option[UserType]">lift</span> <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.key" title="String">key</a> <span title="(f: UserType =&gt; Option[UserType])Option[UserType]">flatMap</span> <span class="delimiter">(</span><span title="(x: UserType)Option[UserType]">Option</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.x$3" title="UserType">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <a title="Option[UserType]" id="org.scalatra.auth;Scentry.userOption.$anonfun.o">map</a> <span class="delimiter">{</span> <a title="UserType" id="org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.res">res</a> =&gt;
          <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.$anonfun.x$4" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.afterFetch" title="(user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">afterFetch</a><a href="#org.scalatra.auth;Scentry.userOption.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.res" title="UserType">res</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.scentryAuthKey" title="=&gt; String">scentryAuthKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.res" title="UserType">res</a>
          <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o.$anonfun.res" title="UserType">res</a>
        <span class="delimiter">}</span>
        if <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o" title="Option[UserType]">o</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.scentryAuthKey" title="=&gt; String">scentryAuthKey</a><span class="delimiter">)</span> = null
        <a href="#org.scalatra.auth;Scentry.userOption.$anonfun.o" title="Option[UserType]">o</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  def <a title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)UserType" id="org.scalatra.auth;Scentry.user">user</a><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.user.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.user.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span>: <a href="#org.scalatra.auth;Scentry;UserType" title="UserType">UserType</a> =
    <a href="#org.scalatra.auth;Scentry.userOption" title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]">userOption</a> <span title="(default: =&gt; UserType)UserType">getOrElse</span> null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="UserType" class="delimiter">[</span><a href="#org.scalatra.auth;Scentry;UserType" title="UserType">UserType</a><span class="delimiter">]</span>

  def <a title="(v: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)String" id="org.scalatra.auth;Scentry.user_=">user_=</a><span class="delimiter">(</span><a title="UserType" id="org.scalatra.auth;Scentry.user_=.v">v</a>: <a href="#org.scalatra.auth;Scentry;UserType" title="UserType">UserType</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.user_=.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.user_=.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="(key: String, value: Any)Unit">request</a><span class="delimiter">(</span><a href="#org.scalatra.auth.Scentry.scentryAuthKey" title="=&gt; String">scentryAuthKey</a><span class="delimiter">)</span> = <a href="#org.scalatra.auth;Scentry.user_=.v" title="UserType">v</a>
    if <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.user_=.v" title="UserType">v</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.user_=.$anonfun.x$5" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.beforeSetUser" title="(user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">beforeSetUser</a><a href="#org.scalatra.auth;Scentry.user_=.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.user_=.v" title="UserType">v</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      val <a title="String" id="org.scalatra.auth;Scentry.user_=.res">res</a> = <a href="#org.scalatra.auth;Scentry.toSession" title="(v1: UserType)String">toSession</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.user_=.v" title="UserType">v</a><span class="delimiter">)</span>
      <a href="#org.scalatra.auth;Scentry.store" title="=&gt; org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">store</a>.<a href="ScentryAuthStore.scala.html#org.scalatra.auth.ScentryAuthStore;ScentryAuthStore.set" title="(value: String)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">set</a><a href="#org.scalatra.auth;Scentry.user_=.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.user_=.res" title="String">res</a><span class="delimiter">)</span>
      <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.user_=.$anonfun.x$6" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.afterSetUser" title="(user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">afterSetUser</a><a href="#org.scalatra.auth;Scentry.user_=.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.user_=.v" title="UserType">v</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#org.scalatra.auth;Scentry.user_=.res" title="String">res</a>
    <span class="delimiter">}</span> else <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; PartialFunction[String,UserType]" id="org.scalatra.auth;Scentry.fromSession">fromSession</a>: <span title="PartialFunction[String,UserType]">PartialFunction</span><span class="delimiter">[</span>String, UserType<span class="delimiter">]</span> = <a href="#org.scalatra.auth;Scentry.deserialize" title="PartialFunction[String,UserType]">deserialize</a> <span title="(that: PartialFunction[String,UserType])PartialFunction[String,UserType]">orElse</span> <a href="#org.scalatra.auth;Scentry.missingDeserializer" title="=&gt; PartialFunction[String,UserType]">missingDeserializer</a>

  def <a title="=&gt; PartialFunction[UserType,String]" id="org.scalatra.auth;Scentry.toSession">toSession</a>: <span title="PartialFunction[UserType,String]">PartialFunction</span><span class="delimiter">[</span>UserType, String<span class="delimiter">]</span> = <a href="#org.scalatra.auth;Scentry.serialize" title="PartialFunction[UserType,String]">serialize</a> <span title="(that: PartialFunction[UserType,String])PartialFunction[UserType,String]">orElse</span> <a href="#org.scalatra.auth;Scentry.missingSerializer" title="=&gt; PartialFunction[UserType,String]">missingSerializer</a>

  private def <a title="=&gt; PartialFunction[UserType,String]" id="org.scalatra.auth;Scentry.missingSerializer">missingSerializer</a>: <span title="PartialFunction[UserType,String]">PartialFunction</span><span class="delimiter">[</span>UserType, String<span class="delimiter">]</span> = <a title="&lt;$anon: UserType =&gt; String&gt; extends scala.runtime.AbstractPartialFunction[UserType,String] with Serializable" id="org.scalatra.auth;Scentry.missingSerializer;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case _ â‡’ throw new <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;You need to provide a session serializer for Scentry&quot;)" class="string">&quot;You need to provide a session serializer for Scentry&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="=&gt; PartialFunction[String,UserType]" id="org.scalatra.auth;Scentry.missingDeserializer">missingDeserializer</a>: <span title="PartialFunction[String,UserType]">PartialFunction</span><span class="delimiter">[</span>String, UserType<span class="delimiter">]</span> = <a title="&lt;$anon: String =&gt; UserType&gt; extends scala.runtime.AbstractPartialFunction[String,UserType] with Serializable" id="org.scalatra.auth;Scentry.missingDeserializer;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case _ â‡’ throw new <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;You need to provide a session deserializer for Scentry&quot;)" class="string">&quot;You need to provide a session deserializer for Scentry&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use the version that uses string keys instead&quot;</span>, <span class="string">&quot;2.2&quot;</span><span class="delimiter">)</span>
  def <a title="(name: Symbol, names: Symbol*)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]" id="org.scalatra.auth;Scentry.authenticate(9a6ffe7b49)">authenticate</a><span class="delimiter">(</span><a title="Symbol" id="org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).name">name</a>: <span title="Symbol">Symbol</span>, <a title="Symbol*" id="org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).names">names</a>: <span title="Symbol*">Symbol</span>*<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span>: <span title="Option[UserType]">Option</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span> =
    <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f)" title="(names: String*)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]">authenticate</a><a href="#org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><span class="delimiter">(</span><span title="(elems: Symbol*)Seq[Symbol]">Seq</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).name" title="Symbol">name</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Symbol],Symbol,Seq[Symbol]])Seq[Symbol]">++</span> <a href="#org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).names" title="Symbol*">names</a>.<span title="=&gt; Seq[Symbol]">toSeq</span><span class="delimiter">)</span>.<span title="(f: Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Symbol],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.authenticate(9a6ffe7b49).$anonfun.x$7" title="Symbol">_</a>.<span title="=&gt; String">name</span><span class="delimiter">)</span>:_*<span class="delimiter">)</span>

  def <a title="(names: String*)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f)">authenticate</a><span class="delimiter">(</span><a title="String*" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).names">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span>: <span title="Option[UserType]">Option</span><span class="delimiter">[</span>UserType<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val r = <a href="#org.scalatra.auth;Scentry.runAuthentication" title="(names: String*)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[(String, UserType)]">runAuthentication</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).names" title="String*">names</a>: _*<span class="delimiter">)</span> <a title="Option[UserType]" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r">map</a> <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.x0$2" title="UserType" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="String" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.stratName">stratName</a>, <a title="UserType" id="org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.usr">usr</a><span class="delimiter">)</span> â‡’
        <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.$anonfun.x$8" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.afterAuthenticate" title="(winningStrategy: String, user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">afterAuthenticate</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.stratName" title="String">stratName</a>, <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.usr" title="UserType">usr</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <a href="#org.scalatra.auth;Scentry.user_=" title="(v: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)String">user_=</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r.$anonfun.usr" title="UserType">usr</a><span class="delimiter">)</span>
        <a href="#org.scalatra.auth;Scentry.user" title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)UserType">user</a>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).names" title="String*">names</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r" title="Option[UserType]">r</a> <span title="(alternative: =&gt; Option[UserType])Option[UserType]">orElse</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.defaultUnauthenticated" title="Option[() =&gt; Unit]">defaultUnauthenticated</a> <span title="(f: (() =&gt; Unit) =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).$anonfun.x$9" title="() =&gt; Unit">_</a>.<span title="()Unit">apply</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>; <span title="None.type">None</span> <span class="delimiter">}</span>
    else <a href="#org.scalatra.auth;Scentry.authenticate(1fbf7e616f).r" title="Option[UserType]">r</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(names: String*)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[(String, UserType)]" id="org.scalatra.auth;Scentry.runAuthentication">runAuthentication</a><span class="delimiter">(</span><a title="String*" id="org.scalatra.auth;Scentry.runAuthentication.names">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.runAuthentication.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.runAuthentication.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="Iterable[org.scalatra.auth.ScentryStrategy[UserType]]" id="org.scalatra.auth;Scentry.runAuthentication.subset">subset</a> = if <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.names" title="String*">names</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#org.scalatra.auth;Scentry.strategies" title="=&gt; scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">strategies</a>.<span title="=&gt; Iterable[org.scalatra.auth.ScentryStrategy[UserType]]">values</span> else <a href="#org.scalatra.auth;Scentry.strategies" title="=&gt; scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">strategies</a>.<span title="(p: String =&gt; Boolean)scala.collection.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">filterKeys</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.names" title="String*">names</a>.<a href="#org.scalatra.auth;Scentry.runAuthentication.subset.$anonfun.elem" title="(elem: Any)Boolean">contains</a><span class="delimiter">)</span>.<span title="=&gt; Iterable[org.scalatra.auth.ScentryStrategy[UserType]]">values</span>
    <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.subset" title="Iterable[org.scalatra.auth.ScentryStrategy[UserType]]">subset</a> <span title="(p: org.scalatra.auth.ScentryStrategy[UserType] =&gt; Boolean)Iterable[org.scalatra.auth.ScentryStrategy[UserType]]">filter</span> <span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.x$10" title="org.scalatra.auth.ScentryStrategy[UserType]">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.isValid" title="(implicit request: javax.servlet.http.HttpServletRequest)Boolean">isValid</a><span class="delimiter">)</span> <span title="(f: org.scalatra.auth.ScentryStrategy[UserType] =&gt; Option[(String, UserType)])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[org.scalatra.auth.ScentryStrategy[UserType]],Option[(String, UserType)],Iterable[Option[(String, UserType)]]])Iterable[Option[(String, UserType)]]">map</span> <span class="delimiter">{</span> <a title="org.scalatra.auth.ScentryStrategy[UserType]" id="org.scalatra.auth;Scentry.runAuthentication.$anonfun.strat">strat</a> =&gt;
      <a href="#org.scalatra.auth;Scentry.logger" title="=&gt; grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">debug</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Authenticating with: %s&quot;</span> <span title="(args: Any*)String">format</span> <a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.strat" title="org.scalatra.auth.ScentryStrategy[UserType]">strat</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.name" title="=&gt; String">name</a><span class="delimiter">)</span>
      <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.$anonfun.x$11" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.isValid" title="(implicit request: javax.servlet.http.HttpServletRequest)Boolean">isValid</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.$anonfun.x$12" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.beforeAuthenticate" title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">beforeAuthenticate</a> <span class="delimiter">}</span>
      <a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.strat" title="org.scalatra.auth.ScentryStrategy[UserType]">strat</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.authenticate" title="()(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Option[UserType]">authenticate</a><a href="#org.scalatra.auth;Scentry.runAuthentication.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case Some<span class="delimiter">(</span><a title="UserType" id="org.scalatra.auth;Scentry.runAuthentication.$anonfun.usr">usr</a><span class="delimiter">)</span> â‡’ <span title="(x: (String, UserType))Some[(String, UserType)]">Some</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.strat" title="org.scalatra.auth.ScentryStrategy[UserType]">strat</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.name" title="(self: String)ArrowAssoc[String]">name</a> <span title="(y: UserType)(String, UserType)">-&gt;</span> <a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.usr" title="UserType">usr</a><span class="delimiter">)</span>
        case _         â‡’
          <a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.strat" title="org.scalatra.auth.ScentryStrategy[UserType]">strat</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.unauthenticated" title="()(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">unauthenticated</a><a href="#org.scalatra.auth;Scentry.runAuthentication.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><span class="delimiter">)</span>
          <span title="None.type">None</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(p: Option[(String, UserType)] =&gt; Boolean)Option[Option[(String, UserType)]]">find</span><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runAuthentication.$anonfun.x$13" title="Option[(String, UserType)]">_</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span title="(default: =&gt; Option[(String, UserType)])Option[(String, UserType)]">getOrElse</span> <span title="None.type">None</span>
  <span class="delimiter">}</span>


  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Option[() =&gt; Unit]" id="org.scalatra.auth;Scentry.defaultUnauthenticated">defaultUnauthenticated</a>: <span title="Option[() =&gt; Unit]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">)</span> â‡’ Unit<span class="delimiter">]</span> = <span title="None.type">None</span>

  def <a title="(callback: =&gt; Unit)Unit" id="org.scalatra.auth;Scentry.unauthenticated">unauthenticated</a><span class="delimiter">(</span><a title="=&gt; Unit" id="org.scalatra.auth;Scentry.unauthenticated.callback">callback</a>: â‡’ Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry.defaultUnauthenticated" title="Option[() =&gt; Unit]">defaultUnauthenticated</a> = <span title="(x: () =&gt; Unit)Some[() =&gt; Unit]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> â‡’ <a href="#org.scalatra.auth;Scentry.unauthenticated.callback" title="=&gt; Unit">callback</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit" id="org.scalatra.auth;Scentry.logout">logout</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="javax.servlet.http.HttpServletRequest" id="org.scalatra.auth;Scentry.logout.request">request</a>: <span title="javax.servlet.http.HttpServletRequest">HttpServletRequest</span>, <a title="javax.servlet.http.HttpServletResponse" id="org.scalatra.auth;Scentry.logout.response">response</a>: <span title="javax.servlet.http.HttpServletResponse">HttpServletResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="UserType" id="org.scalatra.auth;Scentry.logout.usr">usr</a> = <a href="#org.scalatra.auth;Scentry.user" title="(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)UserType">user</a>
    <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.logout.$anonfun.x$14" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.beforeLogout" title="(user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">beforeLogout</a><a href="#org.scalatra.auth;Scentry.logout.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.logout.usr" title="UserType">usr</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="../servlet/ServletApiImplicits.scala.html#org.scalatra.servlet;ServletApiImplicits.enrichRequest" title="implicit org.scalatra.servlet.ServletApiImplicits.enrichRequest : (request: javax.servlet.http.HttpServletRequest)org.scalatra.servlet.RichRequest">request</a> <a href="../servlet/AttributesMap.scala.html#org.scalatra.servlet;AttributesMap.-=(129474666f)" title="(key: String)org.scalatra.servlet.RichRequest">-=</a> <a href="#org.scalatra.auth.Scentry.scentryAuthKey" title="=&gt; String">scentryAuthKey</a>
    <a href="#org.scalatra.auth;Scentry.store" title="=&gt; org.scalatra.auth.ScentryAuthStore.ScentryAuthStore">store</a>.<a href="ScentryAuthStore.scala.html#org.scalatra.auth.ScentryAuthStore;ScentryAuthStore.invalidate" title="()(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">invalidate</a><a href="#org.scalatra.auth;Scentry.logout.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><span class="delimiter">)</span>
    <a href="#org.scalatra.auth;Scentry.runCallbacks" title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit">runCallbacks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#org.scalatra.auth;Scentry.logout.$anonfun.x$15" title="Scentry.this.StrategyType">_</a>.<a href="ScentryStrategy.scala.html#org.scalatra.auth;ScentryStrategy.afterLogout" title="(user: UserType)(implicit request: javax.servlet.http.HttpServletRequest, implicit response: javax.servlet.http.HttpServletResponse)Unit">afterLogout</a><a href="#org.scalatra.auth;Scentry.logout.request" title="javax.servlet.http.HttpServletRequest" class="delimiter">(</a><a href="#org.scalatra.auth;Scentry.logout.usr" title="UserType">usr</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(guard: Scentry.this.StrategyType =&gt; Boolean)(which: Scentry.this.StrategyType =&gt; Unit)Unit" id="org.scalatra.auth;Scentry.runCallbacks">runCallbacks</a><span class="delimiter">(</span><a title="Scentry.this.StrategyType =&gt; Boolean" id="org.scalatra.auth;Scentry.runCallbacks$default$1">guard</a>: StrategyType â‡’ Boolean = <a title="Scentry.this.StrategyType" id="org.scalatra.auth;Scentry.runCallbacks$default$1.$anonfun.s">s</a> â‡’ true<span class="delimiter">)</span><span class="delimiter">(</span><a title="Scentry.this.StrategyType =&gt; Unit" id="org.scalatra.auth;Scentry.runCallbacks.which">which</a>: StrategyType â‡’ Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.scalatra.auth;Scentry.strategies" title="=&gt; scala.collection.mutable.Map[String,org.scalatra.auth.ScentryStrategy[UserType]]">strategies</a> <span title="(f: ((String, org.scalatra.auth.ScentryStrategy[UserType])) =&gt; Unit)Unit">foreach</span> <a href="#org.scalatra.auth;Scentry.runCallbacks.$anonfun.x0$3" title="Unit" class="delimiter">{</a>
      case <span class="delimiter">(</span>_, <a title="org.scalatra.auth.ScentryStrategy[UserType]" id="org.scalatra.auth;Scentry.runCallbacks.$anonfun.v">v</a><span class="delimiter">)</span> if <a href="#org.scalatra.auth;Scentry.runCallbacks$default$1" title="(v1: Scentry.this.StrategyType)Boolean">guard</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runCallbacks.$anonfun.v" title="org.scalatra.auth.ScentryStrategy[UserType]">v</a><span class="delimiter">)</span> â‡’ <a href="#org.scalatra.auth;Scentry.runCallbacks.which" title="(v1: Scentry.this.StrategyType)Unit">which</a><span class="delimiter">(</span><a href="#org.scalatra.auth;Scentry.runCallbacks.$anonfun.v" title="org.scalatra.auth.ScentryStrategy[UserType]">v</a><span class="delimiter">)</span>
      case _                  â‡’ <span class="comment">// guard failed</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
