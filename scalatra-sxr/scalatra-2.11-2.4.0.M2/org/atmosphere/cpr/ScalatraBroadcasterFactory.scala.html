<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/atmosphere/cpr/ScalatraBroadcasterFactory.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.atmosphere.cpr

import akka.actor.ActorSystem
import grizzled.slf4j.Logger
import java.util.concurrent.ConcurrentHashMap
import java.util.UUID
import org.scalatra.atmosphere.<span class="delimiter">{</span>WireFormat, ScalatraBroadcaster<span class="delimiter">}</span>
import collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
import scala.collection.concurrent.<span class="delimiter">{</span>Map =&gt; ConcurrentMap<span class="delimiter">}</span>

object <a title="org.atmosphere.cpr.ScalatraBroadcasterFactory.type" id="org.atmosphere.cpr.ScalatraBroadcasterFactory">ScalatraBroadcasterFactory</a> <a href="#org.atmosphere.cpr.ScalatraBroadcasterFactory" title="org.atmosphere.cpr.ScalatraBroadcasterFactory.type" class="delimiter">{</a>
<span class="delimiter">}</span>

class <a title="class ScalatraBroadcasterFactory extends org.atmosphere.cpr.BroadcasterFactory" id="org.atmosphere.cpr;ScalatraBroadcasterFactory">ScalatraBroadcasterFactory</a><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory" title="org.atmosphere.cpr.ScalatraBroadcasterFactory" class="delimiter">(</a><a title="org.atmosphere.cpr.AtmosphereConfig" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg">cfg</a>: <span title="org.atmosphere.cpr.AtmosphereConfig">AtmosphereConfig</span>, <a title="org.atmosphere.cpr.BroadcasterConf" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.bCfg">bCfg</a>: <a href="broadcaster_configs.scala.html#org.atmosphere.cpr;BroadcasterConf" title="org.atmosphere.cpr.BroadcasterConf">BroadcasterConf</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="org.scalatra.atmosphere.WireFormat" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.wireFormat">wireFormat</a>: <a href="../../scalatra/atmosphere/wire_format.scala.html#org.scalatra.atmosphere;WireFormat" title="org.scalatra.atmosphere.WireFormat">WireFormat</a>, <a title="akka.actor.ActorSystem" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.system">system</a>: <span title="akka.actor.ActorSystem">ActorSystem</span><span class="delimiter">)</span> extends <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory" title="org.atmosphere.cpr.BroadcasterFactory">BroadcasterFactory</a> <span class="delimiter">{</span>
  <span title="org.atmosphere.cpr.BroadcasterFactory.type">BroadcasterFactory</span>.<span title="(x$1: org.atmosphere.cpr.BroadcasterFactory, x$2: org.atmosphere.cpr.AtmosphereConfig)Unit">setBroadcasterFactory</span><span class="delimiter">(</span>this, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a><span class="delimiter">)</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="grizzled.slf4j.Logger" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.logger">logger</a> = <span title="[C]()(implicit evidence$1: scala.reflect.ClassTag[C])grizzled.slf4j.Logger">Logger</span><span title="()(implicit evidence$1: scala.reflect.ClassTag[org.atmosphere.cpr.ScalatraBroadcasterFactory])grizzled.slf4j.Logger" class="delimiter">[</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory" title="org.atmosphere.cpr.ScalatraBroadcasterFactory">ScalatraBroadcasterFactory</a><span class="delimiter">]</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.store">store</a>: <span title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">ConcurrentMap</span><span class="delimiter">[</span>Any, Broadcaster<span class="delimiter">]</span> = new <span title="java.util.concurrent.ConcurrentHashMap[Any,org.atmosphere.cpr.Broadcaster]">ConcurrentHashMap</span><span class="delimiter">[</span>Any, Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">asScala</span>

  private def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](c: Class[T], id: Any)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster">createBroadcaster</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster;T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.c">c</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster;T" title="T">T</a> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      val <a title="T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b">b</a>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster;T" title="T">T</a> = if <span class="delimiter">(</span>classOf<span title="Class[org.scalatra.atmosphere.ScalatraBroadcaster](classOf[org.scalatra.atmosphere.ScalatraBroadcaster])" class="delimiter">[</span>ScalatraBroadcaster<span class="delimiter">]</span>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.c" title="Class[T]">c</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.bCfg" title="org.atmosphere.cpr.BroadcasterConf">bCfg</a>.<a href="broadcaster_configs.scala.html#org.atmosphere.cpr;BroadcasterConf.broadcasterClass" title="=&gt; Class[_ &lt;: org.scalatra.atmosphere.ScalatraBroadcaster]">broadcasterClass</a>.<span title="(x$1: Class[_]*)java.lang.reflect.Constructor[_$1]">getConstructor</span><span class="delimiter">(</span>classOf<span title="Class[org.scalatra.atmosphere.WireFormat](classOf[org.scalatra.atmosphere.WireFormat])" class="delimiter">[</span>WireFormat<span class="delimiter">]</span>, classOf<span title="Class[akka.actor.ActorSystem](classOf[akka.actor.ActorSystem])" class="delimiter">[</span>ActorSystem<span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(x$1: Object*)_$1">newInstance</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.wireFormat" title="org.scalatra.atmosphere.WireFormat">wireFormat</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster;T" title="T">T</a><span class="delimiter">]</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a>.<span title="()org.atmosphere.cpr.AtmosphereFramework">framework</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Class[T], x$2: Class[T])T">newClassInstance</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.c" title="Class[T]">c</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.c" title="Class[T]">c</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="(x$1: String, x$2: java.net.URI, x$3: org.atmosphere.cpr.AtmosphereConfig)org.atmosphere.cpr.Broadcaster">initialize</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.id" title="Any">id</a>.<span title="()String">toString</span>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.bCfg" title="org.atmosphere.cpr.BroadcasterConf">bCfg</a>.<a href="broadcaster_configs.scala.html#org.atmosphere.cpr;BroadcasterConf.uri" title="=&gt; java.net.URI">uri</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a><span class="delimiter">)</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.bCfg" title="org.atmosphere.cpr.BroadcasterConf">bCfg</a>.<a href="broadcaster_configs.scala.html#org.atmosphere.cpr;BroadcasterConf.extraSetup" title="(v1: org.atmosphere.cpr.Broadcaster)Unit">extraSetup</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a><span class="delimiter">)</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="(x$1: Long, x$2: org.atmosphere.cpr.Broadcaster.POLICY)Unit">setSuspendPolicy</span><span class="delimiter">(</span>-<span title="Long(-1L)" class="int">1</span>, Broadcaster.POLICY.<span title="org.atmosphere.cpr.Broadcaster.POLICY(FIFO)">FIFO</span><span class="delimiter">)</span>

      if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="()org.atmosphere.cpr.BroadcasterConfig">getBroadcasterConfig</span> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="(x$1: org.atmosphere.cpr.BroadcasterConfig)Unit">setBroadcasterConfig</span><span class="delimiter">(</span>new <span title="org.atmosphere.cpr.BroadcasterConfig">BroadcasterConfig</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a>.<span title="()org.atmosphere.cpr.AtmosphereFramework">framework</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="java.util.List[String]">broadcasterFilters</span>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.id" title="Any">id</a>.<span title="()String">toString</span><span class="delimiter">)</span>.<span title="()org.atmosphere.cpr.BroadcasterConfig">init</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="(x$1: org.atmosphere.cpr.BroadcasterLifeCyclePolicy)Unit">setBroadcasterLifeCyclePolicy</span><span class="delimiter">(</span><span title="org.atmosphere.cpr.BroadcasterLifeCyclePolicy.type">BroadcasterLifeCyclePolicy</span>.<span title="org.atmosphere.cpr.BroadcasterLifeCyclePolicy">NEVER</span><span class="delimiter">)</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory" title="(i: java.util.Collection[org.atmosphere.cpr.BroadcasterListener])scala.collection.convert.Decorators.AsScala[Iterable[org.atmosphere.cpr.BroadcasterListener]]">broadcasterListeners</a>.<span title="=&gt; Iterable[org.atmosphere.cpr.BroadcasterListener]">asScala</span> <span title="(f: org.atmosphere.cpr.BroadcasterListener =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="org.atmosphere.cpr.BroadcasterListener" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.$anonfun.l">l</a> =&gt;
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>.<span title="(x$1: org.atmosphere.cpr.BroadcasterListener)org.atmosphere.cpr.Broadcaster">addBroadcasterListener</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.$anonfun.l" title="org.atmosphere.cpr.BroadcasterListener">l</a><span class="delimiter">)</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.$anonfun.l" title="org.atmosphere.cpr.BroadcasterListener">l</a>.<span title="(x$1: org.atmosphere.cpr.Broadcaster)Unit">onPostCreate</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.b" title="T">b</a>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Exception" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.ex">ex</a>: <span title="Exception">Exception</span> =&gt; throw new <span title="org.atmosphere.cpr.DefaultBroadcasterFactory.type">DefaultBroadcasterFactory</span>.<span title="org.atmosphere.cpr.DefaultBroadcasterFactory.BroadcasterCreationException">BroadcasterCreationException</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster.ex" title="Exception">ex</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(b: org.atmosphere.cpr.Broadcaster, id: Any)Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.add">add</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.add.b">b</a>: <span title="org.atmosphere.cpr.Broadcaster">Broadcaster</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.add.id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(key: Any, value: org.atmosphere.cpr.Broadcaster)Option[org.atmosphere.cpr.Broadcaster]">put</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.add.id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.add.b" title="org.atmosphere.cpr.Broadcaster">b</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span>

  def <a title="()Unit" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="String" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.s">s</a> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.cfg" title="org.atmosphere.cpr.AtmosphereConfig">cfg</a>.<span title="(x$1: String)String">getInitParameter</span><span class="delimiter">(</span>ApplicationConfig.<span title="String(&quot;org.atmosphere.runtime.shared&quot;)">SHARED</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.s" title="String">s</a> <span title="(x$1: Any)Boolean">!=</span> null <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.s" title="String">s</a>.<span title="(x$1: String)Boolean">equalsIgnoreCase</span><span class="delimiter">(</span><span title="String(&quot;TRUE&quot;)" class="string">&quot;TRUE&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">warn</span><span class="delimiter">(</span><span class="string">&quot;Factory shared, will not be destroyed. That can possibly cause memory leaks if&quot;</span> <span title="String(&quot;Factory shared, will not be destroyed. That can possibly cause memory leaks ifBroadcaster where created. Make sure you destroy them manually.&quot;)">+</span>
                <span class="string">&quot;Broadcaster where created. Make sure you destroy them manually.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    var <a title="org.atmosphere.cpr.BroadcasterConfig" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.bc">bc</a>: <span title="org.atmosphere.cpr.BroadcasterConfig">BroadcasterConfig</span> = null
    <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a> <span title="(f: ((Any, org.atmosphere.cpr.Broadcaster)) =&gt; Unit)Unit">foreach</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.x0$1" title="Unit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.k">k</a>, <a title="org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.b">b</a><span class="delimiter">)</span> =&gt;
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.b" title="org.atmosphere.cpr.Broadcaster">b</a>.<span title="()Unit">resumeAll</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.b" title="org.atmosphere.cpr.Broadcaster">b</a>.<span title="()Unit">destroy</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.bc" title="org.atmosphere.cpr.BroadcasterConfig">bc</a> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.$anonfun.b" title="org.atmosphere.cpr.Broadcaster">b</a>.<span title="()org.atmosphere.cpr.BroadcasterConfig">getBroadcasterConfig</span>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.bc" title="org.atmosphere.cpr.BroadcasterConfig">bc</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.destroy.bc" title="org.atmosphere.cpr.BroadcasterConfig">bc</a>.<span title="()Unit">forceDestroy</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="org.atmosphere.cpr.BroadcasterFactory.type">BroadcasterFactory</span>.<span title="org.atmosphere.cpr.BroadcasterFactory">factory</span> = null
  <span class="delimiter">}</span>

  def <a title="()org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(052cdb98a5)">get</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="org.atmosphere.cpr.Broadcaster">Broadcaster</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f)" title="(id: Any)Nothing">lookup</a><span class="delimiter">(</span><span title="java.util.UUID.type">UUID</span>.<span title="()java.util.UUID">randomUUID</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()String">toString</span><span class="delimiter">)</span>

  def <a title="(id: Any)org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(8a644ab29c)">get</a><span class="delimiter">(</span><a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(8a644ab29c).id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="org.atmosphere.cpr.Broadcaster">Broadcaster</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f)" title="(id: Any, createIfNull: Boolean)Nothing">lookup</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.get(8a644ab29c).id" title="Any">id</a>, createIfNull = true<span class="delimiter">)</span>

  def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](c: Class[T], id: Any)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a)">get</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a);T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a).c">c</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a).id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a);T" title="T">T</a> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a)" title="(c: Class[T], id: Any)T">lookup</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a).c" title="Class[T]">c</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.get(f1433dcb8a).id" title="Any">id</a><span class="delimiter">)</span>

  def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](c: Class[T], id: Any)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a)">lookup</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a);T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a).c">c</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a).id">id</a>: scala.<span title="Any">Any</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a);T" title="T">T</a> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81)" title="(c: Class[T], id: Any, createIfNull: Boolean)T">lookup</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a).c" title="Class[T]">c</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(f1433dcb8a).id" title="Any">id</a>, false<span class="delimiter">)</span>

  def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](c: Class[T], id: Any, createIfNull: Boolean)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81)">lookup</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81);T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).c">c</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id">id</a>: scala.<span title="Any">Any</span>, <a title="Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).createIfNull">createIfNull</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81);T" title="T">T</a> = <span class="delimiter">{</span>
    val bOpt = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a> <a title="Option[org.atmosphere.cpr.Broadcaster]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt">get</a> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id" title="Any">id</a>
    if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).c" title="Class[T]">c</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; org.atmosphere.cpr.Broadcaster">get</span>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val msg = <span title="String(&quot;Invalid lookup class &quot;)" class="string">&quot;Invalid lookup class &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).c" title="Class[T]">c</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;. Cached class is: &quot;)" class="string">&quot;. Cached class is: &quot;</span> <a title="String" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).msg">+</a> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; org.atmosphere.cpr.Broadcaster">get</span>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span>
      <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">warn</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).msg" title="String">msg</a><span class="delimiter">)</span>
      throw new <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).msg" title="String">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).createIfNull" title="Boolean">createIfNull</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; org.atmosphere.cpr.Broadcaster">get</span>.<span title="()Boolean">isDestroyed</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <span title="org.atmosphere.cpr.Broadcaster">b</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).bOpt" title="Option[org.atmosphere.cpr.Broadcaster]">bOpt</a>.<span title="=&gt; org.atmosphere.cpr.Broadcaster">get</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">debug</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Removing destroyed Broadcaster %s&quot;</span> <span title="(args: Any*)String">format</span> <span title="org.atmosphere.cpr.Broadcaster">b</span>.<span title="()String">getID</span><span class="delimiter">)</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(k: Any, v: org.atmosphere.cpr.Broadcaster)Boolean">remove</span><span class="delimiter">(</span><span title="org.atmosphere.cpr.Broadcaster">b</span>.<span title="()String">getID</span>, <span title="org.atmosphere.cpr.Broadcaster">b</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(k: Any, v: org.atmosphere.cpr.Broadcaster)Option[org.atmosphere.cpr.Broadcaster]">putIfAbsent</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.createBroadcaster" title="(c: Class[T], id: Any)T">createBroadcaster</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).c" title="Class[T]">c</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id" title="Any">id</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">debug</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Added Broadcaster %s. Factory size: %s.&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>
    <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(key: Any)Option[org.atmosphere.cpr.Broadcaster]">get</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81).id" title="Any">id</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><span title="org.atmosphere.cpr.Broadcaster">b</span><span class="delimiter">)</span> =&gt; <span title="org.atmosphere.cpr.Broadcaster">b</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81);T" title="T">T</a><span class="delimiter">]</span>
      case <span title="None.type">None</span> =&gt; null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81);T" title="T">T</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](id: Any)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f)">lookup</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f);T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f).id">id</a>: scala.<span title="Any">Any</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f);T" title="T">T</a> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f)" title="(id: Any, createIfNull: Boolean)Nothing">lookup</a><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(2c09e00e2f).id" title="Any">id</a>, createIfNull = false<span class="delimiter">)</span>

  def <a title="[T &lt;: org.atmosphere.cpr.Broadcaster](id: Any, createIfNull: Boolean)T" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f)">lookup</a><span class="delimiter">[</span><a title=" &lt;: org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f);T">T</a> &lt;: Broadcaster<span class="delimiter">]</span><span class="delimiter">(</span><a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f).id">id</a>: scala.<span title="Any">Any</span>, <a title="Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f).createIfNull">createIfNull</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f);T" title="T">T</a> = <span class="delimiter">{</span>
    <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(ae7b1efa81)" title="(c: Class[org.scalatra.atmosphere.ScalatraBroadcaster], id: Any, createIfNull: Boolean)org.scalatra.atmosphere.ScalatraBroadcaster">lookup</a><span class="delimiter">(</span>classOf<span title="Class[org.scalatra.atmosphere.ScalatraBroadcaster](classOf[org.scalatra.atmosphere.ScalatraBroadcaster])" class="delimiter">[</span>ScalatraBroadcaster<span class="delimiter">]</span>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f).id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f).createIfNull" title="Boolean">createIfNull</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.lookup(3bff6c194f);T" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  def <a title="()java.util.Collection[org.atmosphere.cpr.Broadcaster]" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.lookupAll">lookupAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.util.<span title="java.util.Collection[org.atmosphere.cpr.Broadcaster]">Collection</span><span class="delimiter">[</span>Broadcaster<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="=&gt; Iterable[org.atmosphere.cpr.Broadcaster]">values</span>.<span title="(i: Iterable[org.atmosphere.cpr.Broadcaster])scala.collection.convert.Decorators.AsJavaCollection[org.atmosphere.cpr.Broadcaster]">toList</span>.<span title="=&gt; java.util.Collection[org.atmosphere.cpr.Broadcaster]">asJavaCollection</span>
  <span class="delimiter">}</span>

  def <a title="(b: org.atmosphere.cpr.Broadcaster, id: Any)Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7)">remove</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).b">b</a>: <span title="org.atmosphere.cpr.Broadcaster">Broadcaster</span>, <a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val <a title="Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).removed">removed</a>: <span title="Boolean">Boolean</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(k: Any, v: org.atmosphere.cpr.Broadcaster)Boolean">remove</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).b" title="org.atmosphere.cpr.Broadcaster">b</a><span class="delimiter">)</span>
     if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).removed" title="Boolean">removed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
       <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any)Unit">debug</span><span title="(_1: String, _2: Any, _3: Int)(String, Any, Int)" class="delimiter">(</span><span title="String(&quot;Removing Broadcaster {} factory size now {} &quot;)" class="string">&quot;Removing Broadcaster {} factory size now {} &quot;</span>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).id" title="Any">id</a>, <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
     <span class="delimiter">}</span>
     <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(192a1636e7).removed" title="Boolean">removed</a>
  <span class="delimiter">}</span>

  def <a title="(id: Any)Boolean" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(4ca838e1a9)">remove</a><span class="delimiter">(</span><a title="Any" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(4ca838e1a9).id">id</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="(key: Any)Option[org.atmosphere.cpr.Broadcaster]">remove</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.remove(4ca838e1a9).id" title="Any">id</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>

  def <a title="(r: org.atmosphere.cpr.AtmosphereResource)Unit" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource">removeAllAtmosphereResource</a><span class="delimiter">(</span><a title="org.atmosphere.cpr.AtmosphereResource" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.r">r</a>: <span title="org.atmosphere.cpr.AtmosphereResource">AtmosphereResource</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Remove inside all Broadcaster as well.</span>
    try <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        try <span class="delimiter">{</span>
          <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.store" title="scala.collection.concurrent.Map[Any,org.atmosphere.cpr.Broadcaster]">store</a>.<span title="=&gt; Iterator[org.atmosphere.cpr.Broadcaster]">valuesIterator</span> <span title="(f: org.atmosphere.cpr.Broadcaster =&gt; Any)Unit">foreach</span> <span class="delimiter">{</span> <a title="org.atmosphere.cpr.Broadcaster" id="org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.$anonfun.b">b</a> =&gt;
            if <span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.$anonfun.b" title="org.atmosphere.cpr.Broadcaster">b</a>.<span title="()java.util.Collection[org.atmosphere.cpr.AtmosphereResource]">getAtmosphereResources</span>.<span title="(x$1: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.r" title="org.atmosphere.cpr.AtmosphereResource">r</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.$anonfun.b" title="org.atmosphere.cpr.Broadcaster">b</a>.<span title="(x$1: org.atmosphere.cpr.AtmosphereResource)org.atmosphere.cpr.Broadcaster">removeAtmosphereResource</span><span class="delimiter">(</span><a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.removeAllAtmosphereResource.r" title="org.atmosphere.cpr.AtmosphereResource">r</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <span title="IllegalStateException">ex</span>: <span title="IllegalStateException">IllegalStateException</span> =&gt; <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any, t: =&gt; Throwable)Unit">debug</span><span class="delimiter">(</span><span title="IllegalStateException">ex</span>.<span title="()String">getMessage</span>, <span title="IllegalStateException">ex</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <span title="Exception">ex</span>: <span title="Exception">Exception</span> =&gt; <span class="delimiter">{</span>
        <a href="#org.atmosphere.cpr;ScalatraBroadcasterFactory.logger" title="grizzled.slf4j.Logger">logger</a>.<span title="(msg: =&gt; Any, t: =&gt; Throwable)Unit">warn</span><span class="delimiter">(</span><span title="Exception">ex</span>.<span title="()String">getMessage</span>, <span title="Exception">ex</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
