<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/stream/impl/fusing/Ops.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.stream.impl.fusing

import scala.collection.immutable
import akka.stream.OverflowStrategy
import akka.stream.impl.FixedSizeBuffer
import akka.stream.stage._

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Map.productElement.x$1" title="class Map[In, Out] extends akka.stream.stage.PushStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.Map.readResolve">Map</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Map;In">In</a>, <a title="" id="akka.stream.impl.fusing;Map;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="In =&gt; Out" id="akka.stream.impl.fusing;Map.f">f</a>: In ⇒ Out<span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[In,Out]">PushStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  override def <a title="(elem: In, ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Map.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Map.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Map;In" title="In">In</a>, <a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Map.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <a href="#akka.stream.impl.fusing;Map.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Map.f" title="(v1: In)Out">f</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Map.onPush.elem" title="In">elem</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Filter.productElement.x$1" title="class Filter[T] extends akka.stream.stage.PushStage[T,T] with Product with Serializable" id="akka.stream.impl.fusing.Filter.readResolve">Filter</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Filter;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="T =&gt; Boolean" id="akka.stream.impl.fusing;Filter.p">p</a>: T ⇒ Boolean<span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[T,T]">PushStage</a><span class="delimiter">[</span>T, T<span class="delimiter">]</span> <span class="delimiter">{</span>
  override def <a title="(elem: T, ctx: akka.stream.stage.Context[T])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Filter.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Filter.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Filter;T" title="T">T</a>, <a title="akka.stream.stage.Context[T]" id="akka.stream.impl.fusing;Filter.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[T]">Context</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Filter.p" title="(v1: T)Boolean">p</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Filter.onPush.elem" title="T">elem</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Filter.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: T)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Filter.onPush.elem" title="T">elem</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Filter.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final object <a title="akka.stream.impl.fusing.Collect.type" id="akka.stream.impl.fusing.Collect.readResolve">Collect</a> <a href="#akka.stream.impl.fusing.Collect.readResolve" title="akka.stream.impl.fusing.Collect.type" class="delimiter">{</a>
  <span class="comment">// Cached function that can be used with PartialFunction.applyOrElse to ensure that A) the guard is only applied once,</span>
  <span class="comment">// and the caller can check the returned value with Collect.notApplied to query whether the PF was applied or not.</span>
  <span class="comment">// Prior art: https://github.com/scala/scala/blob/v2.11.4/src/library/scala/collection/immutable/List.scala#L458</span>
  final val <a title="Any =&gt; Any" id="akka.stream.impl.fusing.Collect.NotApplied">NotApplied</a>: Any ⇒ Any = <a title="Any" id="akka.stream.impl.fusing.Collect.NotApplied.$anonfun.x$1">_</a> ⇒ <a href="#akka.stream.impl.fusing.Collect.readResolve" title="akka.stream.impl.fusing.Collect.type">Collect</a>.<a href="#akka.stream.impl.fusing.Collect.NotApplied" title="=&gt; Any =&gt; Any">NotApplied</a>
<span class="delimiter">}</span>

private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Collect.copy$default$1" title="[In, Out](pf: PartialFunction[In,Out])akka.stream.impl.fusing.Collect[In,Out]" id="akka.stream.impl.fusing;Collect.equals">Collect</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Collect.copy$default$1;In">In</a>, <a title="" id="akka.stream.impl.fusing;Collect.copy$default$1;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="PartialFunction[In,Out]" id="akka.stream.impl.fusing;Collect.copy$default$1">pf</a>: <span title="PartialFunction[In,Out]">PartialFunction</span><span class="delimiter">[</span>In, Out<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[In,Out]">PushStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  import <a href="#akka.stream.impl.fusing.Collect.readResolve" title="akka.stream.impl.fusing.Collect.type">Collect</a>.NotApplied
  override def <a title="(elem: In, ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Collect.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Collect.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Collect.copy$default$1;In" title="In">In</a>, <a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Collect.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    <a href="#akka.stream.impl.fusing;Collect.copy$default$1" title="=&gt; PartialFunction[In,Out]">pf</a>.<span title="(x: In, default: In =&gt; Any)Any">applyOrElse</span><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Collect.onPush.elem" title="In">elem</a>, <a href="#akka.stream.impl.fusing.Collect.NotApplied" title="=&gt; Any =&gt; Any">NotApplied</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <a href="#akka.stream.impl.fusing.Collect.NotApplied" title="=&gt; Any =&gt; Any">NotApplied</a>  ⇒ <a href="#akka.stream.impl.fusing;Collect.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <a title="Out" id="akka.stream.impl.fusing;Collect.onPush.result">result</a>: <a href="#akka.stream.impl.fusing;Collect.copy$default$1;Out" title="Out">Out</a> ⇒ <a href="#akka.stream.impl.fusing;Collect.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Collect.onPush.result" title="Out">result</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;MapConcat.productElement.x$1" title="class MapConcat[In, Out] extends akka.stream.stage.PushPullStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.MapConcat.readResolve">MapConcat</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;MapConcat;In">In</a>, <a title="" id="akka.stream.impl.fusing;MapConcat;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="In =&gt; scala.collection.immutable.Seq[Out]" id="akka.stream.impl.fusing;MapConcat.f">f</a>: In ⇒ immutable.Seq<span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[In,Out]">PushPullStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Iterator[Out]" id="akka.stream.impl.fusing;MapConcat.currentIterator_=">currentIterator</a>: <span title="Iterator[Out]">Iterator</span><span class="delimiter">[</span>Out<span class="delimiter">]</span> = <span title="=&gt; collection.Iterator.type">Iterator</span>.<span title="=&gt; Iterator[Nothing]">empty</span>

  override def <a title="(elem: In, ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;MapConcat.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;MapConcat.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;MapConcat;In" title="In">In</a>, <a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;MapConcat.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;MapConcat.currentIterator_=" title="(x$1: Iterator[Out])Unit">currentIterator</a> = <a href="#akka.stream.impl.fusing;MapConcat.f" title="(v1: In)scala.collection.immutable.Seq[Out]">f</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.onPush.elem" title="In">elem</a><span class="delimiter">)</span>.<span title="=&gt; Iterator[Out]">iterator</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.currentIterator_=" title="=&gt; Iterator[Out]">currentIterator</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;MapConcat.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;MapConcat.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.currentIterator_=" title="=&gt; Iterator[Out]">currentIterator</a>.<span title="()Out">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;MapConcat.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;MapConcat.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.currentIterator_=" title="=&gt; Iterator[Out]">currentIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;MapConcat.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.currentIterator_=" title="=&gt; Iterator[Out]">currentIterator</a>.<span title="()Out">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;MapConcat.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;MapConcat.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;MapConcat.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;MapConcat.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;MapConcat.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> =
    <a href="#akka.stream.impl.fusing;MapConcat.onUpstreamFinish.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Take.productElement.x$1" title="class Take[T] extends akka.stream.stage.PushStage[T,T] with Product with Serializable" id="akka.stream.impl.fusing.Take.readResolve">Take</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Take;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Int" id="akka.stream.impl.fusing;Take.count">count</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[T,T]">PushStage</a><span class="delimiter">[</span>T, T<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Int" id="akka.stream.impl.fusing;Take.left_=">left</a>: <span title="Int">Int</span> = <a href="#akka.stream.impl.fusing;Take.count" title="=&gt; Int">count</a>

  override def <a title="(elem: T, ctx: akka.stream.stage.Context[T])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Take.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Take.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Take;T" title="T">T</a>, <a title="akka.stream.stage.Context[T]" id="akka.stream.impl.fusing;Take.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[T]">Context</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Take.left_=" title="(x$1: Int)Unit">left</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Take.left_=" title="=&gt; Int">left</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Take.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: T)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Take.onPush.elem" title="T">elem</a><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Take.left_=" title="=&gt; Int">left</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Take.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: T)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Take.onPush.elem" title="T">elem</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Take.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">//Handle negative take counts</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Drop.productElement.x$1" title="class Drop[T] extends akka.stream.stage.PushStage[T,T] with Product with Serializable" id="akka.stream.impl.fusing.Drop.readResolve">Drop</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Drop;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Int" id="akka.stream.impl.fusing;Drop.count">count</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[T,T]">PushStage</a><span class="delimiter">[</span>T, T<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Int" id="akka.stream.impl.fusing;Drop.left_=">left</a>: <span title="Int">Int</span> = <a href="#akka.stream.impl.fusing;Drop.count" title="=&gt; Int">count</a>
  override def <a title="(elem: T, ctx: akka.stream.stage.Context[T])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Drop.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Drop.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Drop;T" title="T">T</a>, <a title="akka.stream.stage.Context[T]" id="akka.stream.impl.fusing;Drop.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[T]">Context</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Drop.left_=" title="=&gt; Int">left</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.stream.impl.fusing;Drop.left_=" title="(x$1: Int)Unit">left</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.stream.impl.fusing;Drop.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <a href="#akka.stream.impl.fusing;Drop.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: T)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Drop.onPush.elem" title="T">elem</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Scan.productElement.x$1" title="class Scan[In, Out] extends akka.stream.stage.PushPullStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.Scan.readResolve">Scan</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Scan;In">In</a>, <a title="" id="akka.stream.impl.fusing;Scan;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Out" id="akka.stream.impl.fusing;Scan.zero">zero</a>: <a href="#akka.stream.impl.fusing;Scan;Out" title="Out">Out</a>, <a title="(Out, In) =&gt; Out" id="akka.stream.impl.fusing;Scan.f">f</a>: <span class="delimiter">(</span>Out, In<span class="delimiter">)</span> ⇒ Out<span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[In,Out]">PushPullStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Out" id="akka.stream.impl.fusing;Scan.aggregator_=">aggregator</a> = <a href="#akka.stream.impl.fusing;Scan.zero" title="=&gt; Out">zero</a>

  override def <a title="(elem: In, ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Scan.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Scan.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Scan;In" title="In">In</a>, <a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Scan.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    val <a title="Out" id="akka.stream.impl.fusing;Scan.onPush.old">old</a> = <a href="#akka.stream.impl.fusing;Scan.aggregator_=" title="=&gt; Out">aggregator</a>
    <a href="#akka.stream.impl.fusing;Scan.aggregator_=" title="(x$1: Out)Unit">aggregator</a> = <a href="#akka.stream.impl.fusing;Scan.f" title="(v1: Out, v2: In)Out">f</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Scan.onPush.old" title="Out">old</a>, <a href="#akka.stream.impl.fusing;Scan.onPush.elem" title="In">elem</a><span class="delimiter">)</span>
    <a href="#akka.stream.impl.fusing;Scan.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Scan.onPush.old" title="Out">old</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Scan.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Scan.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Scan.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Scan.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: Out)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Scan.aggregator_=" title="=&gt; Out">aggregator</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Scan.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Scan.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Scan.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> = <a href="#akka.stream.impl.fusing;Scan.onUpstreamFinish.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Fold.productElement.x$1" title="class Fold[In, Out] extends akka.stream.stage.PushPullStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.Fold.readResolve">Fold</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Fold;In">In</a>, <a title="" id="akka.stream.impl.fusing;Fold;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Out" id="akka.stream.impl.fusing;Fold.zero">zero</a>: <a href="#akka.stream.impl.fusing;Fold;Out" title="Out">Out</a>, <a title="(Out, In) =&gt; Out" id="akka.stream.impl.fusing;Fold.f">f</a>: <span class="delimiter">(</span>Out, In<span class="delimiter">)</span> ⇒ Out<span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[In,Out]">PushPullStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Out" id="akka.stream.impl.fusing;Fold.aggregator_=">aggregator</a> = <a href="#akka.stream.impl.fusing;Fold.zero" title="=&gt; Out">zero</a>

  override def <a title="(elem: In, ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Fold.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Fold.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Fold;In" title="In">In</a>, <a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Fold.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Fold.aggregator_=" title="(x$1: Out)Unit">aggregator</a> = <a href="#akka.stream.impl.fusing;Fold.f" title="(v1: Out, v2: In)Out">f</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Fold.aggregator_=" title="=&gt; Out">aggregator</a>, <a href="#akka.stream.impl.fusing;Fold.onPush.elem" title="In">elem</a><span class="delimiter">)</span>
    <a href="#akka.stream.impl.fusing;Fold.onPush.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Fold.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Fold.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Fold.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Fold.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: Out)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Fold.aggregator_=" title="=&gt; Out">aggregator</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Fold.onPull.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>

  override def <a title="(ctx: akka.stream.stage.Context[Out])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Fold.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[Out]" id="akka.stream.impl.fusing;Fold.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[Out]">Context</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> = <a href="#akka.stream.impl.fusing;Fold.onUpstreamFinish.ctx" title="akka.stream.stage.Context[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Grouped.productElement.x$1" title="class Grouped[T] extends akka.stream.stage.PushPullStage[T,scala.collection.immutable.Seq[T]] with Product with Serializable" id="akka.stream.impl.fusing.Grouped.readResolve">Grouped</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Grouped;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Int" id="akka.stream.impl.fusing;Grouped.n">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[T,scala.collection.immutable.Seq[T]]">PushPullStage</a><span class="delimiter">[</span>T, immutable.Seq<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
  private val <a title="scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]" id="akka.stream.impl.fusing;Grouped.buf">buf</a> = <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]" id="akka.stream.impl.fusing;Grouped.buf.b">b</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="[A]=&gt; scala.collection.mutable.Builder[A,scala.collection.immutable.Vector[A]]">newBuilder</span><span title="scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Grouped;T" title="T">T</a><span class="delimiter">]</span>
    <a href="#akka.stream.impl.fusing;Grouped.buf.b" title="scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">b</a>.<span title="(size: Int)Unit">sizeHint</span><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.n" title="=&gt; Int">n</a><span class="delimiter">)</span>
    <a href="#akka.stream.impl.fusing;Grouped.buf.b" title="scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">b</a>
  <span class="delimiter">}</span>
  private var <a title="Int" id="akka.stream.impl.fusing;Grouped.left_=">left</a> = <a href="#akka.stream.impl.fusing;Grouped.n" title="=&gt; Int">n</a>

  override def <a title="(elem: T, ctx: akka.stream.stage.Context[scala.collection.immutable.Seq[T]])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Grouped.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Grouped.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Grouped;T" title="T">T</a>, <a title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]" id="akka.stream.impl.fusing;Grouped.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">Context</a><span class="delimiter">[</span>immutable.Seq<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Grouped.buf" title="=&gt; scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">buf</a> <span title="(elem: T)Grouped.this.buf.type">+=</span> <a href="#akka.stream.impl.fusing;Grouped.onPush.elem" title="T">elem</a>
    <a href="#akka.stream.impl.fusing;Grouped.left_=" title="(x$1: Int)Unit">left</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.left_=" title="=&gt; Int">left</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="scala.collection.immutable.Vector[T]" id="akka.stream.impl.fusing;Grouped.onPush.emit">emit</a> = <a href="#akka.stream.impl.fusing;Grouped.buf" title="=&gt; scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">buf</a>.<span title="()scala.collection.immutable.Vector[T]">result</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.impl.fusing;Grouped.buf" title="=&gt; scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">buf</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.impl.fusing;Grouped.left_=" title="(x$1: Int)Unit">left</a> = <a href="#akka.stream.impl.fusing;Grouped.n" title="=&gt; Int">n</a>
      <a href="#akka.stream.impl.fusing;Grouped.onPush.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: scala.collection.immutable.Seq[T])akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.onPush.emit" title="scala.collection.immutable.Vector[T]">emit</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <a href="#akka.stream.impl.fusing;Grouped.onPush.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[scala.collection.immutable.Seq[T]])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Grouped.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]" id="akka.stream.impl.fusing;Grouped.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">Context</a><span class="delimiter">[</span>immutable.Seq<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.onPull.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="scala.collection.immutable.Vector[T]" id="akka.stream.impl.fusing;Grouped.onPull.elem">elem</a> = <a href="#akka.stream.impl.fusing;Grouped.buf" title="=&gt; scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">buf</a>.<span title="()scala.collection.immutable.Vector[T]">result</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.impl.fusing;Grouped.buf" title="=&gt; scala.collection.mutable.Builder[T,scala.collection.immutable.Vector[T]]">buf</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">//FIXME null out the reference to the `buf`?</span>
      <a href="#akka.stream.impl.fusing;Grouped.left_=" title="(x$1: Int)Unit">left</a> = <a href="#akka.stream.impl.fusing;Grouped.n" title="=&gt; Int">n</a>
      <a href="#akka.stream.impl.fusing;Grouped.onPull.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: scala.collection.immutable.Seq[T])akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.onPull.elem" title="scala.collection.immutable.Vector[T]">elem</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <a href="#akka.stream.impl.fusing;Grouped.onPull.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>

  override def <a title="(ctx: akka.stream.stage.Context[scala.collection.immutable.Seq[T]])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Grouped.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]" id="akka.stream.impl.fusing;Grouped.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">Context</a><span class="delimiter">[</span>immutable.Seq<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Grouped.left_=" title="=&gt; Int">left</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.stream.impl.fusing;Grouped.n" title="=&gt; Int">n</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Grouped.onUpstreamFinish.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Grouped.onUpstreamFinish.ctx" title="akka.stream.stage.Context[scala.collection.immutable.Seq[T]]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Buffer.productElement.x$1" title="class Buffer[T] extends akka.stream.stage.DetachedStage[T,T] with Product with Serializable" id="akka.stream.impl.fusing.Buffer.readResolve">Buffer</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Buffer;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Int" id="akka.stream.impl.fusing;Buffer.size">size</a>: <span title="Int">Int</span>, <a title="akka.stream.OverflowStrategy" id="akka.stream.impl.fusing;Buffer.overflowStrategy">overflowStrategy</a>: <a href="../../OverflowStrategy.scala.html#akka.stream;OverflowStrategy" title="akka.stream.OverflowStrategy">OverflowStrategy</a><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedStage" title="akka.stream.stage.DetachedStage[T,T]">DetachedStage</a><span class="delimiter">[</span>T, T<span class="delimiter">]</span> <span class="delimiter">{</span>
  import <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy" title="akka.stream.OverflowStrategy.type">OverflowStrategy</a>._

  private val <a title="akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer" id="akka.stream.impl.fusing;Buffer.buffer">buffer</a> = <a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer.apply" title="(size: Int)akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">FixedSizeBuffer</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.size" title="=&gt; Int">size</a><span class="delimiter">)</span>

  override def <a title="(elem: T, ctx: akka.stream.stage.DetachedContext[T])akka.stream.stage.UpstreamDirective" id="akka.stream.impl.fusing;Buffer.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Buffer.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Buffer;T" title="T">T</a>, <a title="akka.stream.stage.DetachedContext[T]" id="akka.stream.impl.fusing;Buffer.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[T]">DetachedContext</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;UpstreamDirective" title="akka.stream.stage.UpstreamDirective">UpstreamDirective</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPush.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.isHolding" title="=&gt; Boolean">isHolding</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.onPush.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.pushAndPull" title="(elem: T)akka.stream.stage.FreeDirective">pushAndPull</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPush.elem" title="T">elem</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Buffer.enqueueAction" title="(v1: akka.stream.stage.DetachedContext[T], v2: T)akka.stream.stage.UpstreamDirective">enqueueAction</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPush.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>, <a href="#akka.stream.impl.fusing;Buffer.onPush.elem" title="T">elem</a><span class="delimiter">)</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[T])akka.stream.stage.DownstreamDirective" id="akka.stream.impl.fusing;Buffer.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[T]" id="akka.stream.impl.fusing;Buffer.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[T]">DetachedContext</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DownstreamDirective" title="akka.stream.stage.DownstreamDirective">DownstreamDirective</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="T" id="akka.stream.impl.fusing;Buffer.onPull.elem">elem</a> = <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.dequeue" title="()Any">dequeue</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Buffer;T" title="T">T</a><span class="delimiter">]</span>
      if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: T)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPull.elem" title="T">elem</a><span class="delimiter">)</span>
      else <a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: T)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPull.elem" title="T">elem</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.isHolding" title="=&gt; Boolean">isHolding</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.pushAndPull" title="(elem: T)akka.stream.stage.FreeDirective">pushAndPull</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.dequeue" title="()Any">dequeue</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Buffer;T" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.hold" title="()akka.stream.stage.FreeDirective">hold</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Buffer.onPull.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: T)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.dequeue" title="()Any">dequeue</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Buffer;T" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[T])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Buffer.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[T]" id="akka.stream.impl.fusing;Buffer.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[T]">DetachedContext</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> =
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.onUpstreamFinish.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Buffer.onUpstreamFinish.ctx" title="akka.stream.stage.DetachedContext[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>

  val <a title="(akka.stream.stage.DetachedContext[T], T) =&gt; akka.stream.stage.UpstreamDirective" id="akka.stream.impl.fusing;Buffer.enqueueAction">enqueueAction</a>: <span class="delimiter">(</span>DetachedContext<span class="delimiter">[</span>T<span class="delimiter">]</span>, T<span class="delimiter">)</span> ⇒ UpstreamDirective = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Buffer.overflowStrategy" title="=&gt; akka.stream.OverflowStrategy">overflowStrategy</a> match <span class="delimiter">{</span>
      case <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.DropHead" title="akka.stream.OverflowStrategy.DropHead.type">DropHead</a> ⇒ <span class="delimiter">{</span> <span class="delimiter">(</span><span title="akka.stream.stage.DetachedContext[T]">ctx</span>, <span title="T">elem</span><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isFull" title="=&gt; Boolean">isFull</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.dropHead" title="()Unit">dropHead</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.enqueue" title="(elem: Any)Unit">enqueue</a><span class="delimiter">(</span><span title="T">elem</span><span class="delimiter">)</span>
        <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      case <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.DropTail" title="akka.stream.OverflowStrategy.DropTail.type">DropTail</a> ⇒ <span class="delimiter">{</span> <span class="delimiter">(</span><span title="akka.stream.stage.DetachedContext[T]">ctx</span>, <span title="T">elem</span><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isFull" title="=&gt; Boolean">isFull</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.dropTail" title="()Unit">dropTail</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.enqueue" title="(elem: Any)Unit">enqueue</a><span class="delimiter">(</span><span title="T">elem</span><span class="delimiter">)</span>
        <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      case <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.DropBuffer" title="akka.stream.OverflowStrategy.DropBuffer.type">DropBuffer</a> ⇒ <span class="delimiter">{</span> <span class="delimiter">(</span><span title="akka.stream.stage.DetachedContext[T]">ctx</span>, <span title="T">elem</span><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isFull" title="=&gt; Boolean">isFull</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.enqueue" title="(elem: Any)Unit">enqueue</a><span class="delimiter">(</span><span title="T">elem</span><span class="delimiter">)</span>
        <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      case <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.Backpressure" title="akka.stream.OverflowStrategy.Backpressure.type">Backpressure</a> ⇒ <span class="delimiter">{</span> <span class="delimiter">(</span><span title="akka.stream.stage.DetachedContext[T]">ctx</span>, <span title="T">elem</span><span class="delimiter">)</span> ⇒
        <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.enqueue" title="(elem: Any)Unit">enqueue</a><span class="delimiter">(</span><span title="T">elem</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isFull" title="=&gt; Boolean">isFull</a><span class="delimiter">)</span> <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.hold" title="()akka.stream.stage.FreeDirective">hold</a><span class="delimiter">(</span><span class="delimiter">)</span>
        else <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      case <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.Error" title="akka.stream.OverflowStrategy.Error.type">Error</a> ⇒ <span class="delimiter">{</span> <span class="delimiter">(</span><span title="akka.stream.stage.DetachedContext[T]">ctx</span>, <span title="T">elem</span><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.isFull" title="=&gt; Boolean">isFull</a><span class="delimiter">)</span> <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.fail" title="(cause: Throwable)akka.stream.stage.FreeDirective">fail</a><span class="delimiter">(</span>new <a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.Error" title="akka.stream.OverflowStrategy.Error.type">Error</a>.<a href="../../OverflowStrategy.scala.html#akka.stream.OverflowStrategy.Error;BufferOverflowException" title="akka.stream.OverflowStrategy.Error.BufferOverflowException">BufferOverflowException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Buffer overflow (max capacity was: &quot;)">Buffer overflow (max capacity was: $</span><a href="#akka.stream.impl.fusing;Buffer.size" title="=&gt; Int">size</a><span title="String(&quot;)!&quot;)" class="string">)!&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        else <span class="delimiter">{</span>
          <a href="#akka.stream.impl.fusing;Buffer.buffer" title="=&gt; akka.stream.impl.FixedSizeBuffer.FixedSizeBuffer">buffer</a>.<a href="../FixedSizeBuffer.scala.html#akka.stream.impl.FixedSizeBuffer;FixedSizeBuffer.enqueue" title="(elem: Any)Unit">enqueue</a><span class="delimiter">(</span><span title="T">elem</span><span class="delimiter">)</span>
          <span title="akka.stream.stage.DetachedContext[T]">ctx</span>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Completed.productElement.x$1" title="class Completed[T] extends akka.stream.stage.PushPullStage[T,T] with Product with Serializable" id="akka.stream.impl.fusing.Completed.readResolve">Completed</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Completed;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[T,T]">PushPullStage</a><span class="delimiter">[</span>T, T<span class="delimiter">]</span> <span class="delimiter">{</span>
  override def <a title="(elem: T, ctx: akka.stream.stage.Context[T])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Completed.onPush">onPush</a><span class="delimiter">(</span><a title="T" id="akka.stream.impl.fusing;Completed.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Completed;T" title="T">T</a>, <a title="akka.stream.stage.Context[T]" id="akka.stream.impl.fusing;Completed.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[T]">Context</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <a href="#akka.stream.impl.fusing;Completed.onPush.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
  override def <a title="(ctx: akka.stream.stage.Context[T])akka.stream.stage.Directive" id="akka.stream.impl.fusing;Completed.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[T]" id="akka.stream.impl.fusing;Completed.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[T]">Context</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <a href="#akka.stream.impl.fusing;Completed.onPull.ctx" title="akka.stream.stage.Context[T]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Conflate.productElement.x$1" title="class Conflate[In, Out] extends akka.stream.stage.DetachedStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.Conflate.readResolve">Conflate</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Conflate;In">In</a>, <a title="" id="akka.stream.impl.fusing;Conflate;Out">Out</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="In =&gt; Out" id="akka.stream.impl.fusing;Conflate.seed">seed</a>: In ⇒ Out, <a title="(Out, In) =&gt; Out" id="akka.stream.impl.fusing;Conflate.aggregate">aggregate</a>: <span class="delimiter">(</span>Out, In<span class="delimiter">)</span> ⇒ Out<span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedStage" title="akka.stream.stage.DetachedStage[In,Out]">DetachedStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Any" id="akka.stream.impl.fusing;Conflate.agg_=">agg</a>: <span title="Any">Any</span> = null

  override def <a title="(elem: In, ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.UpstreamDirective" id="akka.stream.impl.fusing;Conflate.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Conflate.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Conflate;In" title="In">In</a>, <a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Conflate.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;UpstreamDirective" title="akka.stream.stage.UpstreamDirective">UpstreamDirective</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="(x$1: Any)Unit">agg</a> = if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Conflate.seed" title="(v1: In)Out">seed</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.onPush.elem" title="In">elem</a><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Conflate.aggregate" title="(v1: Out, v2: In)Out">aggregate</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Out" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Conflate;Out" title="Out">Out</a><span class="delimiter">]</span>, <a href="#akka.stream.impl.fusing;Conflate.onPush.elem" title="In">elem</a><span class="delimiter">)</span>

    if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.stream.impl.fusing;Conflate.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.isHolding" title="=&gt; Boolean">isHolding</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Conflate.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <span class="delimiter">{</span>
      val <a title="Out" id="akka.stream.impl.fusing;Conflate.onPush.result">result</a> = <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Out" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Conflate;Out" title="Out">Out</a><span class="delimiter">]</span>
      <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="(x$1: Any)Unit">agg</a> = null
      <a href="#akka.stream.impl.fusing;Conflate.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.pushAndPull" title="(elem: Out)akka.stream.stage.FreeDirective">pushAndPull</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.onPush.result" title="Out">result</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.DownstreamDirective" id="akka.stream.impl.fusing;Conflate.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Conflate.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DownstreamDirective" title="akka.stream.stage.DownstreamDirective">DownstreamDirective</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Conflate.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else <span class="delimiter">{</span>
        val <span title="Out">result</span> = <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Out" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Conflate;Out" title="Out">Out</a><span class="delimiter">]</span>
        <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="(x$1: Any)Unit">agg</a> = null
        <a href="#akka.stream.impl.fusing;Conflate.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: Out)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><span title="Out">result</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Conflate.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.hold" title="()akka.stream.stage.FreeDirective">hold</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <span class="delimiter">{</span>
      val <span title="Out">result</span> = <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="=&gt; Any">agg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Out" class="delimiter">[</span><a href="#akka.stream.impl.fusing;Conflate;Out" title="Out">Out</a><span class="delimiter">]</span>
      <a href="#akka.stream.impl.fusing;Conflate.agg_=" title="(x$1: Any)Unit">agg</a> = null
      <a href="#akka.stream.impl.fusing;Conflate.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><span title="Out">result</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Conflate.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Conflate.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> = <a href="#akka.stream.impl.fusing;Conflate.onUpstreamFinish.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final case class <a href="#akka.stream.impl.fusing;Expand.productElement.x$1" title="class Expand[In, Out, Seed] extends akka.stream.stage.DetachedStage[In,Out] with Product with Serializable" id="akka.stream.impl.fusing.Expand.readResolve">Expand</a><span class="delimiter">[</span><a title="" id="akka.stream.impl.fusing;Expand;In">In</a>, <a title="" id="akka.stream.impl.fusing;Expand;Out">Out</a>, <a title="" id="akka.stream.impl.fusing;Expand;Seed">Seed</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="In =&gt; Seed" id="akka.stream.impl.fusing;Expand.seed">seed</a>: In ⇒ Seed, <a title="Seed =&gt; (Out, Seed)" id="akka.stream.impl.fusing;Expand.extrapolate">extrapolate</a>: Seed ⇒ <span class="delimiter">(</span>Out, Seed<span class="delimiter">)</span><span class="delimiter">)</span> extends <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedStage" title="akka.stream.stage.DetachedStage[In,Out]">DetachedStage</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> <span class="delimiter">{</span>
  private var <a title="Seed" id="akka.stream.impl.fusing;Expand.s_=">s</a>: <a href="#akka.stream.impl.fusing;Expand;Seed" title="Seed">Seed</a> = _
  private var <a title="Boolean" id="akka.stream.impl.fusing;Expand.started_=">started</a>: <span title="Boolean">Boolean</span> = false
  private var <a title="Boolean" id="akka.stream.impl.fusing;Expand.expanded_=">expanded</a>: <span title="Boolean">Boolean</span> = false

  override def <a title="(elem: In, ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.UpstreamDirective" id="akka.stream.impl.fusing;Expand.onPush">onPush</a><span class="delimiter">(</span><a title="In" id="akka.stream.impl.fusing;Expand.onPush.elem">elem</a>: <a href="#akka.stream.impl.fusing;Expand;In" title="In">In</a>, <a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Expand.onPush.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;UpstreamDirective" title="akka.stream.stage.UpstreamDirective">UpstreamDirective</a> = <span class="delimiter">{</span>
    <a href="#akka.stream.impl.fusing;Expand.s_=" title="(x$1: Seed)Unit">s</a> = <a href="#akka.stream.impl.fusing;Expand.seed" title="(v1: In)Seed">seed</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPush.elem" title="In">elem</a><span class="delimiter">)</span>
    <a href="#akka.stream.impl.fusing;Expand.started_=" title="(x$1: Boolean)Unit">started</a> = true
    <a href="#akka.stream.impl.fusing;Expand.expanded_=" title="(x$1: Boolean)Unit">expanded</a> = false
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.isHolding" title="=&gt; Boolean">isHolding</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a href="#akka.stream.impl.fusing;Expand.onPush.emit" title="(Out, Seed)" class="delimiter">(</a><a href="#akka.stream.impl.fusing;Expand.onPush.x$2" title="Out" id="akka.stream.impl.fusing;Expand.onPush.emit">emit</a>, <a href="#akka.stream.impl.fusing;Expand.onPush.x$2" title="Seed" id="akka.stream.impl.fusing;Expand.onPush.newS">newS</a><span class="delimiter">)</span> = <a href="#akka.stream.impl.fusing;Expand.extrapolate" title="(v1: Seed)(Out, Seed)">extrapolate</a><span title="(Out, Seed) @unchecked" class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.s_=" title="=&gt; Seed">s</a><span class="delimiter">)</span>
      <a href="#akka.stream.impl.fusing;Expand.s_=" title="(x$1: Seed)Unit">s</a> = <a href="#akka.stream.impl.fusing;Expand.onPush.newS" title="Seed">newS</a>
      <a href="#akka.stream.impl.fusing;Expand.expanded_=" title="(x$1: Boolean)Unit">expanded</a> = true
      <a href="#akka.stream.impl.fusing;Expand.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.pushAndPull" title="(elem: Out)akka.stream.stage.FreeDirective">pushAndPull</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPush.emit" title="Out">emit</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <a href="#akka.stream.impl.fusing;Expand.onPush.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.hold" title="()akka.stream.stage.FreeDirective">hold</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.DownstreamDirective" id="akka.stream.impl.fusing;Expand.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Expand.onPull.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DownstreamDirective" title="akka.stream.stage.DownstreamDirective">DownstreamDirective</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.stream.impl.fusing;Expand.started_=" title="=&gt; Boolean">started</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else <a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: Out)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.extrapolate" title="(v1: Seed)(Out, Seed)">extrapolate</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.s_=" title="=&gt; Seed">s</a><span class="delimiter">)</span>.<span title="=&gt; Out">_1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.stream.impl.fusing;Expand.started_=" title="=&gt; Boolean">started</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.hold" title="()akka.stream.stage.FreeDirective">hold</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <span class="delimiter">{</span>
      val <a href="#akka.stream.impl.fusing;Expand.onPull.emit" title="(Out, Seed)" class="delimiter">(</a><a href="#akka.stream.impl.fusing;Expand.onPull.x$3" title="Out" id="akka.stream.impl.fusing;Expand.onPull.emit">emit</a>, <a href="#akka.stream.impl.fusing;Expand.onPull.x$3" title="Seed" id="akka.stream.impl.fusing;Expand.onPull.newS">newS</a><span class="delimiter">)</span> = <a href="#akka.stream.impl.fusing;Expand.extrapolate" title="(v1: Seed)(Out, Seed)">extrapolate</a><span title="(Out, Seed) @unchecked" class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.s_=" title="=&gt; Seed">s</a><span class="delimiter">)</span>
      <a href="#akka.stream.impl.fusing;Expand.s_=" title="(x$1: Seed)Unit">s</a> = <a href="#akka.stream.impl.fusing;Expand.onPull.newS" title="Seed">newS</a>
      <a href="#akka.stream.impl.fusing;Expand.expanded_=" title="(x$1: Boolean)Unit">expanded</a> = true
      if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.isHolding" title="=&gt; Boolean">isHolding</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext.pushAndPull" title="(elem: Out)akka.stream.stage.FreeDirective">pushAndPull</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPull.emit" title="Out">emit</a><span class="delimiter">)</span>
      else <a href="#akka.stream.impl.fusing;Expand.onPull.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: Out)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.onPull.emit" title="Out">emit</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.DetachedContext[Out])akka.stream.stage.TerminationDirective" id="akka.stream.impl.fusing;Expand.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.DetachedContext[Out]" id="akka.stream.impl.fusing;Expand.onUpstreamFinish.ctx">ctx</a>: <a href="../../stage/Stage.scala.html#akka.stream.stage;DetachedContext" title="akka.stream.stage.DetachedContext[Out]">DetachedContext</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.stream.impl.fusing;Expand.expanded_=" title="=&gt; Boolean">expanded</a><span class="delimiter">)</span> <a href="#akka.stream.impl.fusing;Expand.onUpstreamFinish.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.stream.impl.fusing;Expand.onUpstreamFinish.ctx" title="akka.stream.stage.DetachedContext[Out]">ctx</a>.<a href="../../stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
