<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/stream/io/TcpConnectionStream.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.stream.io

import java.net.InetSocketAddress

import akka.io.<span class="delimiter">{</span> IO, Tcp <span class="delimiter">}</span>
import scala.concurrent.Promise
import scala.util.control.NoStackTrace
import akka.actor.<span class="delimiter">{</span> ActorRefFactory, Actor, Props, ActorRef, Status <span class="delimiter">}</span>
import akka.stream.impl._
import akka.util.ByteString
import akka.io.<span title="akka.io.Tcp.type">Tcp</span>._
import akka.stream.MaterializerSettings
import org.reactivestreams.Processor
import akka.actor.Stash

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> object <a title="akka.stream.io.TcpStreamActor.type" id="akka.stream.io.TcpStreamActor">TcpStreamActor</a> <a href="#akka.stream.io.TcpStreamActor" title="akka.stream.io.TcpStreamActor.type" class="delimiter">{</a>
  case object <a href="#akka.stream.io.TcpStreamActor.WriteAck.productElement.x$1" title="akka.stream.io.TcpStreamActor.WriteAck.type" id="akka.stream.io.TcpStreamActor.WriteAck.readResolve">WriteAck</a> extends Tcp.<span title="akka.io.Tcp.Event">Event</span>
  class <a title="class TcpStreamException extends RuntimeException with scala.util.control.NoStackTrace" id="akka.stream.io.TcpStreamActor;TcpStreamException">TcpStreamException</a><a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="akka.stream.io.TcpStreamActor.TcpStreamException" class="delimiter">(</a><a title="String" id="akka.stream.io.TcpStreamActor;TcpStreamException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> extends <a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="RuntimeException">RuntimeException</a><span class="delimiter">(</span><a href="#akka.stream.io.TcpStreamActor;TcpStreamException.msg" title="String">msg</a><span class="delimiter">)</span> with <span title="scala.util.control.NoStackTrace">NoStackTrace</span>

  def <a title="(processorPromise: scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]], localAddressPromise: scala.concurrent.Promise[java.net.InetSocketAddress], connectCmd: akka.io.Tcp.Connect, materializerSettings: akka.stream.MaterializerSettings)akka.actor.Props" id="akka.stream.io.TcpStreamActor.outboundProps">outboundProps</a><span class="delimiter">(</span><a title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]" id="akka.stream.io.TcpStreamActor.outboundProps.processorPromise">processorPromise</a>: <span title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]">Promise</span><span class="delimiter">[</span>Processor<span class="delimiter">[</span>ByteString, ByteString<span class="delimiter">]</span><span class="delimiter">]</span>,
                    <a title="scala.concurrent.Promise[java.net.InetSocketAddress]" id="akka.stream.io.TcpStreamActor.outboundProps.localAddressPromise">localAddressPromise</a>: <span title="scala.concurrent.Promise[java.net.InetSocketAddress]">Promise</span><span class="delimiter">[</span>InetSocketAddress<span class="delimiter">]</span>,
                    <a title="akka.io.Tcp.Connect" id="akka.stream.io.TcpStreamActor.outboundProps.connectCmd">connectCmd</a>: <span title="akka.io.Tcp.Connect">Connect</span>,
                    <a title="akka.stream.MaterializerSettings" id="akka.stream.io.TcpStreamActor.outboundProps.materializerSettings">materializerSettings</a>: <a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings" title="akka.stream.MaterializerSettings">MaterializerSettings</a><span class="delimiter">)</span>: <span title="akka.actor.Props">Props</span> =
    <span title="(creator: =&gt; akka.stream.io.OutboundTcpStreamActor)(implicit evidence$2: scala.reflect.ClassTag[akka.stream.io.OutboundTcpStreamActor])akka.actor.Props">Props</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.stream.io.OutboundTcpStreamActor]" class="delimiter">(</span>new <a href="#akka.stream.io;OutboundTcpStreamActor" title="akka.stream.io.OutboundTcpStreamActor">OutboundTcpStreamActor</a><span class="delimiter">(</span><a href="#akka.stream.io.TcpStreamActor.outboundProps.processorPromise" title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]">processorPromise</a>, <a href="#akka.stream.io.TcpStreamActor.outboundProps.localAddressPromise" title="scala.concurrent.Promise[java.net.InetSocketAddress]">localAddressPromise</a>, <a href="#akka.stream.io.TcpStreamActor.outboundProps.connectCmd" title="akka.io.Tcp.Connect">connectCmd</a>,
      <a href="#akka.stream.io.TcpStreamActor.outboundProps.materializerSettings" title="akka.stream.MaterializerSettings">materializerSettings</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(d: String)akka.actor.Props">withDispatcher</span><span class="delimiter">(</span><a href="#akka.stream.io.TcpStreamActor.outboundProps.materializerSettings" title="akka.stream.MaterializerSettings">materializerSettings</a>.<a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>

  def <a title="(connection: akka.actor.ActorRef, settings: akka.stream.MaterializerSettings)akka.actor.Props" id="akka.stream.io.TcpStreamActor.inboundProps">inboundProps</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.stream.io.TcpStreamActor.inboundProps.connection">connection</a>: <span title="akka.actor.ActorRef">ActorRef</span>, <a title="akka.stream.MaterializerSettings" id="akka.stream.io.TcpStreamActor.inboundProps.settings">settings</a>: <a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings" title="akka.stream.MaterializerSettings">MaterializerSettings</a><span class="delimiter">)</span>: <span title="akka.actor.Props">Props</span> =
    <span title="(creator: =&gt; akka.stream.io.InboundTcpStreamActor)(implicit evidence$2: scala.reflect.ClassTag[akka.stream.io.InboundTcpStreamActor])akka.actor.Props">Props</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.stream.io.InboundTcpStreamActor]" class="delimiter">(</span>new <a href="#akka.stream.io;InboundTcpStreamActor" title="akka.stream.io.InboundTcpStreamActor">InboundTcpStreamActor</a><span class="delimiter">(</span><a href="#akka.stream.io.TcpStreamActor.inboundProps.connection" title="akka.actor.ActorRef">connection</a>, <a href="#akka.stream.io.TcpStreamActor.inboundProps.settings" title="akka.stream.MaterializerSettings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(d: String)akka.actor.Props">withDispatcher</span><span class="delimiter">(</span><a href="#akka.stream.io.TcpStreamActor.inboundProps.settings" title="akka.stream.MaterializerSettings">settings</a>.<a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> abstract class <a title="class TcpStreamActor extends AnyRef with akka.actor.Actor with akka.actor.Stash" id="akka.stream.io;TcpStreamActor">TcpStreamActor</a><a href="#akka.stream.io;TcpStreamActor" title="akka.stream.io.TcpStreamActor" class="delimiter">(</a>val <a title="akka.stream.MaterializerSettings" id="akka.stream.io;TcpStreamActor.settings">settings</a>: <a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings" title="akka.stream.MaterializerSettings">MaterializerSettings</a><span class="delimiter">)</span> extends <a href="#akka.stream.io;TcpStreamActor" title="akka.actor.Actor">Actor</a> with <span title="akka.actor.Stash">Stash</span> <span class="delimiter">{</span>

  import <a href="#akka.stream.io.TcpStreamActor" title="akka.stream.io.TcpStreamActor.type">TcpStreamActor</a>._

  val <a title="akka.stream.impl.Inputs" id="akka.stream.io;TcpStreamActor.primaryInputs">primaryInputs</a>: <a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs" title="akka.stream.impl.Inputs">Inputs</a> = new <a href="../impl/ActorProcessor.scala.html#akka.stream.impl;BatchingInputBuffer" title="&lt;$anon: akka.stream.impl.BatchingInputBuffer&gt; extends akka.stream.impl.BatchingInputBuffer" id="akka.stream.io;TcpStreamActor.primaryInputs;$anon">BatchingInputBuffer</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.settings" title="=&gt; akka.stream.MaterializerSettings">settings</a>.<a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings.initialInputBufferSize" title="=&gt; Int">initialInputBufferSize</a>, <a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    override def <a title="(e: Throwable)Unit" id="akka.stream.io;TcpStreamActor.primaryInputs;$anon.inputOnError">inputOnError</a><span class="delimiter">(</span><a title="Throwable" id="akka.stream.io;TcpStreamActor.primaryInputs;$anon.inputOnError.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.primaryInputs;$anon.inputOnError.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  val <a title="akka.stream.impl.Outputs" id="akka.stream.io;TcpStreamActor.primaryOutputs">primaryOutputs</a>: <a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs" title="akka.stream.impl.Outputs">Outputs</a> = new <a href="../impl/ActorProcessor.scala.html#akka.stream.impl;SimpleOutputs" title="akka.stream.impl.SimpleOutputs">SimpleOutputs</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a><span class="delimiter">)</span>

  object <a title="TcpStreamActor.this.tcpInputs.type" id="akka.stream.io;TcpStreamActor.tcpInputs">tcpInputs</a> extends <a href="../impl/Transfer.scala.html#akka.stream.impl;DefaultInputTransferStates" title="akka.stream.impl.DefaultInputTransferStates">DefaultInputTransferStates</a> <span class="delimiter">{</span>
    private var <a title="Boolean" id="akka.stream.io;TcpStreamActor.tcpInputs.closed_=">closed</a>: <span title="Boolean">Boolean</span> = false
    private var <a title="akka.util.ByteString" id="akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=">pendingElement</a>: <span title="akka.util.ByteString">ByteString</span> = null
    private var <a title="akka.actor.ActorRef" id="akka.stream.io;TcpStreamActor.tcpInputs.connection_=">connection</a>: <span title="akka.actor.ActorRef">ActorRef</span> = _

    val <a title="akka.stream.impl.SubReceive" id="akka.stream.io;TcpStreamActor.tcpInputs.subreceive">subreceive</a> = new <a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive" title="akka.stream.impl.SubReceive">SubReceive</a><span class="delimiter">(</span><span title="akka.actor.Actor.type">Actor</span>.<span title="akka.actor.Actor.emptyBehavior.type">emptyBehavior</span><span class="delimiter">)</span>

    def <a title="(c: akka.actor.ActorRef)Unit" id="akka.stream.io;TcpStreamActor.tcpInputs.setConnection">setConnection</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.stream.io;TcpStreamActor.tcpInputs.setConnection.c">c</a>: <span title="akka.actor.ActorRef">ActorRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.connection_=" title="(x$1: akka.actor.ActorRef)Unit">connection</a> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.setConnection.c" title="akka.actor.ActorRef">c</a>
      <span class="comment">// Prefetch</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.setConnection.c" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">c</a> <a href="#akka.stream.io;TcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.io.Tcp.ResumeReading.type">ResumeReading</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive.become" title="(newBehavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs.handleRead" title="=&gt; TcpStreamActor.this.Receive">handleRead</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="=&gt; TcpStreamActor.this.Receive" id="akka.stream.io;TcpStreamActor.tcpInputs.handleRead">handleRead</a>: <span title="TcpStreamActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case Received<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.data">data</a><span class="delimiter">)</span> ⇒
        <a href="#akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=" title="(x$1: akka.util.ByteString)Unit">pendingElement</a> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.data" title="akka.util.ByteString">data</a>
        <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <span title="akka.io.Tcp.Closed.type">Closed</span> ⇒
        <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
        <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.complete" title="()Unit">complete</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <span title="akka.io.Tcp.ConfirmedClosed.type">ConfirmedClosed</span> ⇒
        <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
        <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <span title="akka.io.Tcp.PeerClosed.type">PeerClosed</span> ⇒
        <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
        <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case ErrorClosed<span class="delimiter">(</span><a title="String" id="akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.cause">cause</a><span class="delimiter">)</span> ⇒ <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span title="Boolean(true)" class="delimiter">(</span>new <a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="akka.stream.io.TcpStreamActor.TcpStreamException">TcpStreamException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;The connection closed with error &quot;)">The connection closed with error $</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.cause" title="String">cause</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case CommandFailed<span class="delimiter">(</span><a title="akka.io.Tcp.Command" id="akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.cmd">cmd</a><span class="delimiter">)</span> ⇒ <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span title="Boolean(true)" class="delimiter">(</span>new <a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="akka.stream.io.TcpStreamActor.TcpStreamException">TcpStreamException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Tcp command [&quot;)">Tcp command [$</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs.handleRead;$anonfun.isDefinedAt.cmd" title="akka.io.Tcp.Command">cmd</a><span title="String(&quot;] failed&quot;)" class="string">] failed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case <span title="akka.io.Tcp.Aborted.type">Aborted</span>            ⇒ <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span title="Boolean(true)" class="delimiter">(</span>new <a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="akka.stream.io.TcpStreamActor.TcpStreamException">TcpStreamException</a><span class="delimiter">(</span><span title="String(&quot;The connection has been aborted&quot;)" class="string">&quot;The connection has been aborted&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    override def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpInputs.inputsAvailable">inputsAvailable</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=" title="=&gt; akka.util.ByteString">pendingElement</a> <span title="(x$1: AnyRef)Boolean">ne</span> null
    override def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpInputs.inputsDepleted">inputsDepleted</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs.inputsAvailable" title="=&gt; Boolean">inputsAvailable</a>
    override def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpInputs.isClosed">isClosed</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="=&gt; Boolean">closed</a>

    override def <a title="()Unit" id="akka.stream.io;TcpStreamActor.tcpInputs.cancel">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=" title="(x$1: akka.util.ByteString)Unit">pendingElement</a> = null
    <span class="delimiter">}</span>

    override def <a title="()Any" id="akka.stream.io;TcpStreamActor.tcpInputs.dequeueInputElement">dequeueInputElement</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
      val <a title="akka.util.ByteString" id="akka.stream.io;TcpStreamActor.tcpInputs.dequeueInputElement.elem">elem</a> = <a href="#akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=" title="=&gt; akka.util.ByteString">pendingElement</a>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.pendingElement_=" title="(x$1: akka.util.ByteString)Unit">pendingElement</a> = null
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.connection_=" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;TcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.io.Tcp.ResumeReading.type">ResumeReading</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs.dequeueInputElement.elem" title="akka.util.ByteString">elem</a>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  object <a title="TcpStreamActor.this.tcpOutputs.type" id="akka.stream.io;TcpStreamActor.tcpOutputs">tcpOutputs</a> extends <a href="../impl/Transfer.scala.html#akka.stream.impl;DefaultOutputTransferStates" title="akka.stream.impl.DefaultOutputTransferStates">DefaultOutputTransferStates</a> <span class="delimiter">{</span>
    private var <a title="Boolean" id="akka.stream.io;TcpStreamActor.tcpOutputs.closed_=">closed</a>: <span title="Boolean">Boolean</span> = false
    private var <a title="Boolean" id="akka.stream.io;TcpStreamActor.tcpOutputs.pendingDemand_=">pendingDemand</a> = true
    private var <a title="akka.actor.ActorRef" id="akka.stream.io;TcpStreamActor.tcpOutputs.connection_=">connection</a>: <span title="akka.actor.ActorRef">ActorRef</span> = _

    private def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpOutputs.initialized">initialized</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.connection_=" title="=&gt; akka.actor.ActorRef">connection</a> <span title="(x$1: AnyRef)Boolean">ne</span> null

    def <a title="(c: akka.actor.ActorRef)Unit" id="akka.stream.io;TcpStreamActor.tcpOutputs.setConnection">setConnection</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.stream.io;TcpStreamActor.tcpOutputs.setConnection.c">c</a>: <span title="akka.actor.ActorRef">ActorRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.connection_=" title="(x$1: akka.actor.ActorRef)Unit">connection</a> = <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.setConnection.c" title="akka.actor.ActorRef">c</a>
      <a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive.become" title="(newBehavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.tcpOutputs.handleWrite" title="=&gt; TcpStreamActor.this.Receive">handleWrite</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    val <a title="akka.stream.impl.SubReceive" id="akka.stream.io;TcpStreamActor.tcpOutputs.subreceive">subreceive</a> = new <a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive" title="akka.stream.impl.SubReceive">SubReceive</a><span class="delimiter">(</span><span title="akka.actor.Actor.type">Actor</span>.<span title="akka.actor.Actor.emptyBehavior.type">emptyBehavior</span><span class="delimiter">)</span>

    def <a title="=&gt; TcpStreamActor.this.Receive" id="akka.stream.io;TcpStreamActor.tcpOutputs.handleWrite">handleWrite</a>: <span title="TcpStreamActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.stream.io;TcpStreamActor.tcpOutputs.handleWrite;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a href="#akka.stream.io.TcpStreamActor.WriteAck.readResolve" title="akka.stream.io.TcpStreamActor.WriteAck.type">WriteAck</a> ⇒
        <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.pendingDemand_=" title="(x$1: Boolean)Unit">pendingDemand</a> = true
        <a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.pump" title="()Unit">pump</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="delimiter">}</span>

    override def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpOutputs.isClosed">isClosed</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.closed_=" title="=&gt; Boolean">closed</a>
    override def <a title="(e: Throwable)Unit" id="akka.stream.io;TcpStreamActor.tcpOutputs.cancel">cancel</a><span class="delimiter">(</span><a title="Throwable" id="akka.stream.io;TcpStreamActor.tcpOutputs.cancel.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.stream.io;TcpStreamActor.tcpOutputs.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.initialized" title="=&gt; Boolean">initialized</a><span class="delimiter">)</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.connection_=" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;TcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.io.Tcp.Abort.type">Abort</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
    <span class="delimiter">}</span>
    override def <a title="()Unit" id="akka.stream.io;TcpStreamActor.tcpOutputs.complete">complete</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.stream.io;TcpStreamActor.tcpOutputs.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.initialized" title="=&gt; Boolean">initialized</a><span class="delimiter">)</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.connection_=" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;TcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.io.Tcp.ConfirmedClose.type">ConfirmedClose</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.closed_=" title="(x$1: Boolean)Unit">closed</a> = true
    <span class="delimiter">}</span>
    override def <a title="(elem: Any)Unit" id="akka.stream.io;TcpStreamActor.tcpOutputs.enqueueOutputElement">enqueueOutputElement</a><span class="delimiter">(</span><a title="Any" id="akka.stream.io;TcpStreamActor.tcpOutputs.enqueueOutputElement.elem">elem</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.connection_=" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;TcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="(data: akka.util.ByteString, ack: akka.io.Tcp.Event)akka.io.Tcp.Write">Write</span><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.tcpOutputs.enqueueOutputElement.elem" title="Any">elem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.util.ByteString" class="delimiter">[</span><span title="akka.util.ByteString">ByteString</span><span class="delimiter">]</span>, <a href="#akka.stream.io.TcpStreamActor.WriteAck.readResolve" title="akka.stream.io.TcpStreamActor.WriteAck.type">WriteAck</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.pendingDemand_=" title="(x$1: Boolean)Unit">pendingDemand</a> = false
    <span class="delimiter">}</span>

    override def <a title="=&gt; Boolean" id="akka.stream.io;TcpStreamActor.tcpOutputs.demandAvailable">demandAvailable</a>: <span title="Boolean">Boolean</span> = <a href="#akka.stream.io;TcpStreamActor.tcpOutputs.pendingDemand_=" title="=&gt; Boolean">pendingDemand</a>
  <span class="delimiter">}</span>

  object <a title="TcpStreamActor.this.writePump.type" id="akka.stream.io;TcpStreamActor.writePump">writePump</a> extends <a href="../impl/Transfer.scala.html#akka.stream.impl;Pump" title="akka.stream.impl.Pump">Pump</a> <span class="delimiter">{</span>

    def <a title="=&gt; akka.stream.impl.TransferPhase" id="akka.stream.io;TcpStreamActor.writePump.running">running</a> = <a href="../impl/Transfer.scala.html#akka.stream.impl;TransferPhase" title="(precondition: akka.stream.impl.TransferState)(action: () =&gt; Unit)akka.stream.impl.TransferPhase">TransferPhase</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.NeedsInput" title="=&gt; akka.stream.impl.TransferState">NeedsInput</a> <a href="../impl/Transfer.scala.html#akka.stream.impl;TransferState.&&" title="(other: akka.stream.impl.TransferState)akka.stream.impl.TransferState">&amp;&amp;</a> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;DefaultOutputTransferStates.NeedsDemand" title="=&gt; akka.stream.impl.TransferState">NeedsDemand</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> ⇒
      var <a title="akka.util.ByteString" id="akka.stream.io;TcpStreamActor.writePump.running.$anonfun.batch">batch</a> = <span title="akka.util.ByteString.type">ByteString</span>.<span title="=&gt; akka.util.ByteString">empty</span>
      while <span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.inputsAvailable" title="=&gt; Boolean">inputsAvailable</a><span class="delimiter">)</span> <a href="#akka.stream.io;TcpStreamActor.writePump.running.$anonfun.batch" title="akka.util.ByteString">batch</a> <a href="#akka.stream.io;TcpStreamActor.writePump.running.$anonfun.while$1" title="(that: akka.util.ByteString)akka.util.ByteString">++=</a> <a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.dequeueInputElement" title="()Any">dequeueInputElement</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.util.ByteString" class="delimiter">[</span><span title="akka.util.ByteString">ByteString</span><span class="delimiter">]</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.enqueueOutputElement" title="(elem: Any)Unit">enqueueOutputElement</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.writePump.running.$anonfun.batch" title="akka.util.ByteString">batch</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    override protected def <a title="()Unit" id="akka.stream.io;TcpStreamActor.writePump.pumpFinished">pumpFinished</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.complete" title="()Unit">complete</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tryShutdown" title="()Unit">tryShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    override protected def <a title="(e: Throwable)Unit" id="akka.stream.io;TcpStreamActor.writePump.pumpFailed">pumpFailed</a><span class="delimiter">(</span><a title="Throwable" id="akka.stream.io;TcpStreamActor.writePump.pumpFailed.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.writePump.pumpFailed.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  object <a title="TcpStreamActor.this.readPump.type" id="akka.stream.io;TcpStreamActor.readPump">readPump</a> extends <a href="../impl/Transfer.scala.html#akka.stream.impl;Pump" title="akka.stream.impl.Pump">Pump</a> <span class="delimiter">{</span>

    def <a title="=&gt; akka.stream.impl.TransferPhase" id="akka.stream.io;TcpStreamActor.readPump.running">running</a> = <a href="../impl/Transfer.scala.html#akka.stream.impl;TransferPhase" title="(precondition: akka.stream.impl.TransferState)(action: () =&gt; Unit)akka.stream.impl.TransferPhase">TransferPhase</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;DefaultInputTransferStates.NeedsInput" title="=&gt; akka.stream.impl.TransferState">NeedsInput</a> <a href="../impl/Transfer.scala.html#akka.stream.impl;TransferState.&&" title="(other: akka.stream.impl.TransferState)akka.stream.impl.TransferState">&amp;&amp;</a> <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs.NeedsDemand" title="=&gt; akka.stream.impl.TransferState">NeedsDemand</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> ⇒
      <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs.enqueueOutputElement" title="(elem: Any)Unit">enqueueOutputElement</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.dequeueInputElement" title="()Any">dequeueInputElement</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    override protected def <a title="()Unit" id="akka.stream.io;TcpStreamActor.readPump.pumpFinished">pumpFinished</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.cancel" title="()Unit">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs.complete" title="()Unit">complete</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tryShutdown" title="()Unit">tryShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    override protected def <a title="(e: Throwable)Unit" id="akka.stream.io;TcpStreamActor.readPump.pumpFailed">pumpFailed</a><span class="delimiter">(</span><a title="Throwable" id="akka.stream.io;TcpStreamActor.readPump.pumpFailed.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.readPump.pumpFailed.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  final override def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.stream.io;TcpStreamActor.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.stream.io;TcpStreamActor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="comment">// FIXME using Stash mailbox is not the best for performance, we probably want a better solution to this</span>
    case <a title="akka.stream.impl.ExposedPublisher" id="akka.stream.io;TcpStreamActor.receive;$anonfun.isDefinedAt.ep">ep</a>: <a href="../impl/Messages.scala.html#akka.stream.impl;ExposedPublisher" title="akka.stream.impl.ExposedPublisher">ExposedPublisher</a> ⇒
      <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive.apply" title="(msg: Any)Unit">subreceive</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.receive;$anonfun.isDefinedAt.ep" title="akka.stream.impl.ExposedPublisher">ep</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor" title="=&gt; akka.actor.ActorContext">context</a> <span title="(behavior: akka.actor.Actor.Receive)Unit">become</span> <a href="#akka.stream.io;TcpStreamActor.activeReceive" title="=&gt; PartialFunction[Any,Unit]">activeReceive</a>
      <a href="#akka.stream.io;TcpStreamActor" title="()Unit">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
    case _ ⇒ <a href="#akka.stream.io;TcpStreamActor" title="()Unit">stash</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.stream.io;TcpStreamActor.activeReceive">activeReceive</a> =
    <a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.subreceive" title="=&gt; akka.stream.impl.SubReceive">subreceive</a>

  <a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.nextPhase" title="(phase: akka.stream.impl.TransferPhase)Unit">nextPhase</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.readPump" title="TcpStreamActor.this.readPump.type">readPump</a>.<a href="#akka.stream.io;TcpStreamActor.readPump.running" title="=&gt; akka.stream.impl.TransferPhase">running</a><span class="delimiter">)</span>
  <a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Pump.nextPhase" title="(phase: akka.stream.impl.TransferPhase)Unit">nextPhase</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.writePump" title="TcpStreamActor.this.writePump.type">writePump</a>.<a href="#akka.stream.io;TcpStreamActor.writePump.running" title="=&gt; akka.stream.impl.TransferPhase">running</a><span class="delimiter">)</span>

  def <a title="(e: Throwable)Unit" id="akka.stream.io;TcpStreamActor.fail">fail</a><span class="delimiter">(</span><a title="Throwable" id="akka.stream.io;TcpStreamActor.fail.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.cancel" title="()Unit">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.cancel" title="(e: Throwable)Unit">cancel</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.fail.e" title="Throwable">e</a><span class="delimiter">)</span>
    <a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.cancel" title="()Unit">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.stream.io;TcpStreamActor.primaryOutputs" title="=&gt; akka.stream.impl.Outputs">primaryOutputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Outputs.cancel" title="(e: Throwable)Unit">cancel</a><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.fail.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Unit" id="akka.stream.io;TcpStreamActor.tryShutdown">tryShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = if <span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor.primaryInputs" title="=&gt; akka.stream.impl.Inputs">primaryInputs</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;Inputs.isClosed" title="=&gt; Boolean">isClosed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="TcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.isClosed" title="=&gt; Boolean">isClosed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="TcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.isClosed" title="=&gt; Boolean">isClosed</a><span class="delimiter">)</span> <a href="#akka.stream.io;TcpStreamActor" title="=&gt; akka.actor.ActorContext">context</a>.<span title="(actor: akka.actor.ActorRef)Unit">stop</span><span class="delimiter">(</span><a href="#akka.stream.io;TcpStreamActor" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class InboundTcpStreamActor extends akka.stream.io.TcpStreamActor" id="akka.stream.io;InboundTcpStreamActor">InboundTcpStreamActor</a><a href="#akka.stream.io;InboundTcpStreamActor" title="akka.stream.io.InboundTcpStreamActor" class="delimiter">(</a>
  val <a title="akka.actor.ActorRef" id="akka.stream.io;InboundTcpStreamActor.connection">connection</a>: <span title="akka.actor.ActorRef">ActorRef</span>, <a title="akka.stream.MaterializerSettings" id="akka.stream.io;InboundTcpStreamActor._settings">_settings</a>: <a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings" title="akka.stream.MaterializerSettings">MaterializerSettings</a><span class="delimiter">)</span>
  extends <a href="#akka.stream.io;TcpStreamActor" title="akka.stream.io.TcpStreamActor">TcpStreamActor</a><span class="delimiter">(</span><a href="#akka.stream.io;InboundTcpStreamActor._settings" title="akka.stream.MaterializerSettings">_settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <a href="#akka.stream.io;InboundTcpStreamActor.connection" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;InboundTcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="(handler: akka.actor.ActorRef, keepOpenOnPeerClosed: Boolean, useResumeWriting: Boolean)akka.io.Tcp.Register">Register</span><span class="delimiter">(</span><a href="#akka.stream.io;InboundTcpStreamActor" title="=&gt; akka.actor.ActorRef">self</a>, keepOpenOnPeerClosed = true, useResumeWriting = false<span class="delimiter">)</span>
  <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="InboundTcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.setConnection" title="(c: akka.actor.ActorRef)Unit">setConnection</a><span class="delimiter">(</span><a href="#akka.stream.io;InboundTcpStreamActor.connection" title="=&gt; akka.actor.ActorRef">connection</a><span class="delimiter">)</span>
  <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="InboundTcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.setConnection" title="(c: akka.actor.ActorRef)Unit">setConnection</a><span class="delimiter">(</span><a href="#akka.stream.io;InboundTcpStreamActor.connection" title="=&gt; akka.actor.ActorRef">connection</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class OutboundTcpStreamActor extends akka.stream.io.TcpStreamActor" id="akka.stream.io;OutboundTcpStreamActor">OutboundTcpStreamActor</a><a href="#akka.stream.io;OutboundTcpStreamActor" title="akka.stream.io.OutboundTcpStreamActor" class="delimiter">(</a><a title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]" id="akka.stream.io;OutboundTcpStreamActor.processorPromise">processorPromise</a>: <span title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]">Promise</span><span class="delimiter">[</span>Processor<span class="delimiter">[</span>ByteString, ByteString<span class="delimiter">]</span><span class="delimiter">]</span>,
                                           <a title="scala.concurrent.Promise[java.net.InetSocketAddress]" id="akka.stream.io;OutboundTcpStreamActor.localAddressPromise">localAddressPromise</a>: <span title="scala.concurrent.Promise[java.net.InetSocketAddress]">Promise</span><span class="delimiter">[</span>InetSocketAddress<span class="delimiter">]</span>,
                                           val <a title="akka.io.Tcp.Connect" id="akka.stream.io;OutboundTcpStreamActor.connectCmd">connectCmd</a>: <span title="akka.io.Tcp.Connect">Connect</span>, <a title="akka.stream.MaterializerSettings" id="akka.stream.io;OutboundTcpStreamActor._settings">_settings</a>: <a href="../FlowMaterializer.scala.html#akka.stream;MaterializerSettings" title="akka.stream.MaterializerSettings">MaterializerSettings</a><span class="delimiter">)</span>
  extends <a href="#akka.stream.io;TcpStreamActor" title="akka.stream.io.TcpStreamActor">TcpStreamActor</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor._settings" title="akka.stream.MaterializerSettings">_settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  import <a href="#akka.stream.io.TcpStreamActor" title="akka.stream.io.TcpStreamActor.type">TcpStreamActor</a>._
  import <a href="#akka.stream.io;OutboundTcpStreamActor" title="=&gt; akka.actor.ActorContext">context</a>.system

  val <a title="akka.stream.impl.SubReceive" id="akka.stream.io;OutboundTcpStreamActor.initSteps">initSteps</a> = new <a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive" title="akka.stream.impl.SubReceive">SubReceive</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitingExposedProcessor" title="=&gt; OutboundTcpStreamActor.this.Receive">waitingExposedProcessor</a><span class="delimiter">)</span>

  override def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.stream.io;OutboundTcpStreamActor.activeReceive">activeReceive</a> = <a href="#akka.stream.io;OutboundTcpStreamActor.initSteps" title="=&gt; akka.stream.impl.SubReceive">initSteps</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> super.<a href="#akka.stream.io;TcpStreamActor.activeReceive" title="=&gt; PartialFunction[Any,Unit]">activeReceive</a>

  def <a title="=&gt; OutboundTcpStreamActor.this.Receive" id="akka.stream.io;OutboundTcpStreamActor.waitingExposedProcessor">waitingExposedProcessor</a>: <span title="OutboundTcpStreamActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.stream.io;OutboundTcpStreamActor.waitingExposedProcessor;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case StreamTcpManager.ExposedProcessor<span class="delimiter">(</span><a title="org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]" id="akka.stream.io;OutboundTcpStreamActor.waitingExposedProcessor;$anonfun.isDefinedAt.processor">processor</a><span class="delimiter">)</span> ⇒
      <span title="(key: akka.actor.ExtensionId[akka.io.TcpExt])(implicit system: akka.actor.ActorSystem)akka.actor.ActorRef">IO</span><a href="#akka.stream.io;OutboundTcpStreamActor" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span title="akka.io.Tcp.type">Tcp</span><span class="delimiter">)</span> <a href="#akka.stream.io;OutboundTcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.stream.io;OutboundTcpStreamActor.connectCmd" title="=&gt; akka.io.Tcp.Connect">connectCmd</a>
      <a href="#akka.stream.io;OutboundTcpStreamActor.initSteps" title="=&gt; akka.stream.impl.SubReceive">initSteps</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive.become" title="(newBehavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection" title="(exposedProcessor: org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString])OutboundTcpStreamActor.this.Receive">waitConnection</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitingExposedProcessor;$anonfun.isDefinedAt.processor" title="org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]">processor</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(exposedProcessor: org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString])OutboundTcpStreamActor.this.Receive" id="akka.stream.io;OutboundTcpStreamActor.waitConnection">waitConnection</a><span class="delimiter">(</span><a title="org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]" id="akka.stream.io;OutboundTcpStreamActor.waitConnection.exposedProcessor">exposedProcessor</a>: <span title="org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]">Processor</span><span class="delimiter">[</span>ByteString, ByteString<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="OutboundTcpStreamActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case Connected<span class="delimiter">(</span><a title="java.net.InetSocketAddress" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.isDefinedAt.remoteAddress">remoteAddress</a>, <a title="java.net.InetSocketAddress" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.isDefinedAt.localAddress">localAddress</a><span class="delimiter">)</span> ⇒
      val <a title="akka.actor.ActorRef" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.connection">connection</a> = <a href="#akka.stream.io;OutboundTcpStreamActor" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.connection" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">connection</a> <a href="#akka.stream.io;OutboundTcpStreamActor" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="(handler: akka.actor.ActorRef, keepOpenOnPeerClosed: Boolean, useResumeWriting: Boolean)akka.io.Tcp.Register">Register</span><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor" title="=&gt; akka.actor.ActorRef">self</a>, keepOpenOnPeerClosed = true, useResumeWriting = false<span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpOutputs" title="OutboundTcpStreamActor.this.tcpOutputs.type">tcpOutputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpOutputs.setConnection" title="(c: akka.actor.ActorRef)Unit">setConnection</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.connection" title="akka.actor.ActorRef">connection</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.tcpInputs" title="OutboundTcpStreamActor.this.tcpInputs.type">tcpInputs</a>.<a href="#akka.stream.io;TcpStreamActor.tcpInputs.setConnection" title="(c: akka.actor.ActorRef)Unit">setConnection</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.connection" title="akka.actor.ActorRef">connection</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.localAddressPromise" title="scala.concurrent.Promise[java.net.InetSocketAddress]">localAddressPromise</a>.<span title="(value: java.net.InetSocketAddress)OutboundTcpStreamActor.this.localAddressPromise.type">success</span><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.isDefinedAt.localAddress" title="java.net.InetSocketAddress">localAddress</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.processorPromise" title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]">processorPromise</a>.<span title="(value: org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString])OutboundTcpStreamActor.this.processorPromise.type">success</span><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection.exposedProcessor" title="org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]">exposedProcessor</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.initSteps" title="=&gt; akka.stream.impl.SubReceive">initSteps</a>.<a href="../impl/Transfer.scala.html#akka.stream.impl;SubReceive.become" title="(newBehavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><span title="akka.actor.Actor.type">Actor</span>.<span title="akka.actor.Actor.emptyBehavior.type">emptyBehavior</span><span class="delimiter">)</span>

    case <a title="akka.io.Tcp.CommandFailed" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.isDefinedAt.f">f</a>: <span title="akka.io.Tcp.CommandFailed">CommandFailed</span> ⇒
      val <a title="akka.stream.io.TcpStreamActor.TcpStreamException" id="akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.ex">ex</a> = new <a href="#akka.stream.io.TcpStreamActor;TcpStreamException" title="akka.stream.io.TcpStreamActor.TcpStreamException">TcpStreamException</a><span class="delimiter">(</span><span title="String(&quot;Connection failed.&quot;)" class="string">&quot;Connection failed.&quot;</span><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.localAddressPromise" title="scala.concurrent.Promise[java.net.InetSocketAddress]">localAddressPromise</a>.<span title="(cause: Throwable)OutboundTcpStreamActor.this.localAddressPromise.type">failure</span><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.ex" title="akka.stream.io.TcpStreamActor.TcpStreamException">ex</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;OutboundTcpStreamActor.processorPromise" title="scala.concurrent.Promise[org.reactivestreams.Processor[akka.util.ByteString,akka.util.ByteString]]">processorPromise</a>.<span title="(cause: Throwable)OutboundTcpStreamActor.this.processorPromise.type">failure</span><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.ex" title="akka.stream.io.TcpStreamActor.TcpStreamException">ex</a><span class="delimiter">)</span>
      <a href="#akka.stream.io;TcpStreamActor.fail" title="(e: Throwable)Unit">fail</a><span class="delimiter">(</span><a href="#akka.stream.io;OutboundTcpStreamActor.waitConnection;$anonfun.applyOrElse.ex" title="akka.stream.io.TcpStreamActor.TcpStreamException">ex</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
