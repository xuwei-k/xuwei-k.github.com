<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/marshallers/xml/ScalaXmlSupport.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.marshallers.xml

import java.io.<span class="delimiter">{</span> ByteArrayInputStream, InputStreamReader <span class="delimiter">}</span>
import scala.collection.immutable
import scala.concurrent.ExecutionContext
import scala.xml.<span class="delimiter">{</span> XML, NodeSeq <span class="delimiter">}</span>
import akka.stream.FlowMaterializer
import akka.http.unmarshalling._
import akka.http.marshalling._
import akka.http.model._
import <a href="../../model/MediaType.scala.html#akka.http.model.MediaTypes" title="akka.http.model.MediaTypes.type">MediaTypes</a>._

trait <a title="trait ScalaXmlSupport extends AnyRef" id="akka.http.marshallers.xml;ScalaXmlSupport">ScalaXmlSupport</a> <span title="Unit" class="delimiter">{</span>
  implicit def <a title="implicit akka.http.marshallers.xml.ScalaXmlSupport.defaultNodeSeqMarshaller : (implicit ec: scala.concurrent.ExecutionContext)akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]" id="akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqMarshaller">defaultNodeSeqMarshaller</a><span class="delimiter">(</span>implicit <a title="scala.concurrent.ExecutionContext" id="akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqMarshaller.ec">ec</a>: <span title="scala.concurrent.ExecutionContext">ExecutionContext</span><span class="delimiter">)</span>: <a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling;Marshaller" title="akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]">ToEntityMarshaller</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling.Marshaller" title="akka.http.marshalling.Marshaller.type">Marshaller</a>.<a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling.Marshaller.oneOf(f45328aa0f)" title="(marshallers: akka.http.marshalling.Marshaller[scala.xml.NodeSeq,akka.http.model.MessageEntity]*)(implicit ec: scala.concurrent.ExecutionContext)akka.http.marshalling.Marshaller[scala.xml.NodeSeq,akka.http.model.MessageEntity]">oneOf</a><a href="#akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqMarshaller.ec" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#akka.http.marshallers.xml.ScalaXmlSupport" title="akka.http.marshallers.xml.ScalaXmlSupport.type">ScalaXmlSupport</a>.<a href="#akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypes" title="=&gt; scala.collection.immutable.Seq[akka.http.model.ContentType]">nodeSeqContentTypes</a>.<span title="(f: akka.http.model.ContentType =&gt; akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[akka.http.model.ContentType],akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq],scala.collection.immutable.Seq[akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]]])scala.collection.immutable.Seq[akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq],scala.collection.immutable.Seq[akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]]]" class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller" title="(contentType: akka.http.model.ContentType)(implicit ec: scala.concurrent.ExecutionContext)akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]">nodeSeqMarshaller</a><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

  def <a title="(contentType: akka.http.model.ContentType)(implicit ec: scala.concurrent.ExecutionContext)akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller">nodeSeqMarshaller</a><span class="delimiter">(</span><a title="akka.http.model.ContentType" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller.contentType">contentType</a>: <a href="../../model/ContentType.scala.html#akka.http.model;ContentType" title="akka.http.model.ContentType">ContentType</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.concurrent.ExecutionContext" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller.ec">ec</a>: <span title="scala.concurrent.ExecutionContext">ExecutionContext</span><span class="delimiter">)</span>: <a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling;Marshaller" title="akka.http.marshalling.ToEntityMarshaller[scala.xml.NodeSeq]">ToEntityMarshaller</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling.Marshaller" title="akka.http.marshalling.Marshaller.type">Marshaller</a>.<a href="../../marshalling/PredefinedToEntityMarshallers.scala.html#akka.http.marshalling;PredefinedToEntityMarshallers.StringMarshaller" title="=&gt; akka.http.marshalling.ToEntityMarshaller[String]">StringMarshaller</a>.<a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling;Marshaller.wrap" title="(contentType: akka.http.model.ContentType)(f: scala.xml.NodeSeq =&gt; String)(implicit ec: scala.concurrent.ExecutionContext, implicit mto: akka.http.marshalling.MediaTypeOverrider[akka.http.model.MessageEntity])akka.http.marshalling.Marshaller[scala.xml.NodeSeq,akka.http.model.MessageEntity]">wrap</a><span class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller.contentType" title="akka.http.model.ContentType">contentType</a><span class="delimiter">)</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller.ec" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqMarshaller.$anonfun.x$1" title="scala.xml.NodeSeq">_</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  implicit def <a title="implicit akka.http.marshallers.xml.ScalaXmlSupport.defaultNodeSeqUnmarshaller : (implicit fm: akka.stream.FlowMaterializer, implicit ec: scala.concurrent.ExecutionContext)akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]" id="akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqUnmarshaller">defaultNodeSeqUnmarshaller</a><span class="delimiter">(</span>implicit <a title="akka.stream.FlowMaterializer" id="akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqUnmarshaller.fm">fm</a>: <a href="../../../stream/FlowMaterializer.scala.html#akka.stream;FlowMaterializer" title="akka.stream.FlowMaterializer">FlowMaterializer</a>,
                                          <a title="scala.concurrent.ExecutionContext" id="akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqUnmarshaller.ec">ec</a>: <span title="scala.concurrent.ExecutionContext">ExecutionContext</span><span class="delimiter">)</span>: <a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling;Unmarshaller" title="akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]">FromEntityUnmarshaller</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller" title="(ranges: akka.http.model.ContentTypeRange*)(implicit fm: akka.stream.FlowMaterializer, implicit ec: scala.concurrent.ExecutionContext)akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]">nodeSeqUnmarshaller</a><a href="#akka.http.marshallers.xml;ScalaXmlSupport.defaultNodeSeqUnmarshaller.fm" title="akka.stream.FlowMaterializer" class="delimiter">(</a><a href="#akka.http.marshallers.xml.ScalaXmlSupport" title="akka.http.marshallers.xml.ScalaXmlSupport.type">ScalaXmlSupport</a>.<a href="#akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypeRanges" title="=&gt; scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]">nodeSeqContentTypeRanges</a>: _*<span class="delimiter">)</span>

  def <a title="(ranges: akka.http.model.ContentTypeRange*)(implicit fm: akka.stream.FlowMaterializer, implicit ec: scala.concurrent.ExecutionContext)akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller">nodeSeqUnmarshaller</a><span class="delimiter">(</span><a title="akka.http.model.ContentTypeRange*" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.ranges">ranges</a>: <span title="akka.http.model.ContentTypeRange*">ContentTypeRange</span>*<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.stream.FlowMaterializer" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.fm">fm</a>: <a href="../../../stream/FlowMaterializer.scala.html#akka.stream;FlowMaterializer" title="akka.stream.FlowMaterializer">FlowMaterializer</a>,
                                                     <a title="scala.concurrent.ExecutionContext" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.ec">ec</a>: <span title="scala.concurrent.ExecutionContext">ExecutionContext</span><span class="delimiter">)</span>: <a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling;Unmarshaller" title="akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]">FromEntityUnmarshaller</a><span class="delimiter">[</span>NodeSeq<span class="delimiter">]</span> =
    <a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling.Unmarshaller" title="akka.http.unmarshalling.Unmarshaller.type">Unmarshaller</a>.<a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling.Unmarshaller.EnhancedFromEntityUnmarshaller(722ca1ffb2)" title="(underlying: akka.http.unmarshalling.FromEntityUnmarshaller[Array[Byte]])akka.http.unmarshalling.Unmarshaller.EnhancedFromEntityUnmarshaller[Array[Byte]]">byteArrayUnmarshaller</a>.<a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling.Unmarshaller;EnhancedFromEntityUnmarshaller.forContentTypes" title="(ranges: akka.http.model.ContentTypeRange*)(implicit ec: scala.concurrent.ExecutionContext)akka.http.unmarshalling.FromEntityUnmarshaller[Array[Byte]]">forContentTypes</a><a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling.Unmarshaller.EnhancedFromEntityUnmarshaller(722ca1ffb2)" title="(underlying: akka.http.unmarshalling.FromEntityUnmarshaller[Array[Byte]])akka.http.unmarshalling.Unmarshaller.EnhancedFromEntityUnmarshaller[Array[Byte]]" class="delimiter">(</a><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.ranges" title="akka.http.model.ContentTypeRange*">ranges</a>: _*<span class="delimiter">)</span>.<a href="../../unmarshalling/Unmarshaller.scala.html#akka.http.unmarshalling.Unmarshaller;EnhancedFromEntityUnmarshaller.mapWithCharset" title="(f: (Array[Byte], akka.http.model.HttpCharset) =&gt; scala.xml.NodeSeq)(implicit ec: scala.concurrent.ExecutionContext)akka.http.unmarshalling.FromEntityUnmarshaller[scala.xml.NodeSeq]">mapWithCharset</a> <a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.ec" title="scala.concurrent.ExecutionContext" class="delimiter">{</a> <span class="delimiter">(</span><a title="Array[Byte]" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.bytes">bytes</a>, <a title="akka.http.model.HttpCharset" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.charset">charset</a><span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.bytes" title="Array[Byte]">bytes</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="scala.xml.SAXParser" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.parser">parser</a> = <span title="scala.xml.XML.type">XML</span>.<span title="=&gt; scala.xml.SAXParser">parser</span>
        try <a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.parser" title="scala.xml.SAXParser">parser</a>.<span title="(x$1: String, x$2: Any)Unit">setProperty</span><span class="delimiter">(</span><span title="String(&quot;http://apache.org/xml/properties/locale&quot;)" class="string">&quot;http://apache.org/xml/properties/locale&quot;</span>, java.util.<span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">ROOT</span><span class="delimiter">)</span>
        catch <span class="delimiter">{</span> case <a title="org.xml.sax.SAXNotRecognizedException" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.e">e</a>: org.xml.sax.<span title="org.xml.sax.SAXNotRecognizedException">SAXNotRecognizedException</span> ⇒ <span class="comment">/* property is not needed */</span> <span class="delimiter">}</span>
        val <a title="java.io.InputStreamReader" id="akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.reader">reader</a> = new <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span>new <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span>, <a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.charset" title="akka.http.model.HttpCharset">charset</a>.<a href="../../model/HttpCharset.scala.html#akka.http.model;HttpCharset.nioCharset" title="=&gt; java.nio.charset.Charset">nioCharset</a><span class="delimiter">)</span>
        <span title="scala.xml.XML.type">XML</span>.<span title="(p: scala.xml.SAXParser)scala.xml.factory.XMLLoader[scala.xml.Elem]">withSAXParser</span><span class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.parser" title="scala.xml.SAXParser">parser</a><span class="delimiter">)</span>.<span title="(reader: java.io.Reader)scala.xml.Elem">load</span><span class="delimiter">(</span><a href="#akka.http.marshallers.xml;ScalaXmlSupport.nodeSeqUnmarshaller.$anonfun.reader" title="java.io.InputStreamReader">reader</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> <span class="comment">// blocking call! Ideally we'd have a `loadToFuture`</span>
      <span class="delimiter">}</span> else <span title="scala.xml.NodeSeq.type">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>
object <a title="akka.http.marshallers.xml.ScalaXmlSupport.type" id="akka.http.marshallers.xml.ScalaXmlSupport">ScalaXmlSupport</a> extends <a href="#akka.http.marshallers.xml;ScalaXmlSupport" title="akka.http.marshallers.xml.ScalaXmlSupport">ScalaXmlSupport</a> <span class="delimiter">{</span>
  val <a title="scala.collection.immutable.Seq[akka.http.model.ContentType]" id="akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypes">nodeSeqContentTypes</a>: immutable.<span title="scala.collection.immutable.Seq[akka.http.model.ContentType]">Seq</span><span class="delimiter">[</span>ContentType<span class="delimiter">]</span> = <span title="(xs: akka.http.model.ContentType*)List[akka.http.model.ContentType]">List</span><span class="delimiter">(</span><a href="../../model/ContentType.scala.html#akka.http.model.ContentType.apply(f1dbd43f8a)" title="implicit akka.http.model.ContentType.apply : (mediaType: akka.http.model.MediaType)akka.http.model.ContentType">`text/xml`</a>, <a href="../../model/ContentType.scala.html#akka.http.model.ContentType.apply(f1dbd43f8a)" title="implicit akka.http.model.ContentType.apply : (mediaType: akka.http.model.MediaType)akka.http.model.ContentType">`application/xml`</a>, <a href="../../model/ContentType.scala.html#akka.http.model.ContentType.apply(f1dbd43f8a)" title="implicit akka.http.model.ContentType.apply : (mediaType: akka.http.model.MediaType)akka.http.model.ContentType">`text/html`</a>, <a href="../../model/ContentType.scala.html#akka.http.model.ContentType.apply(f1dbd43f8a)" title="implicit akka.http.model.ContentType.apply : (mediaType: akka.http.model.MediaType)akka.http.model.ContentType">`application/xhtml+xml`</a><span class="delimiter">)</span>
  val <a title="scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]" id="akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypeRanges">nodeSeqContentTypeRanges</a>: immutable.<span title="scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]">Seq</span><span class="delimiter">[</span>ContentTypeRange<span class="delimiter">]</span> = <a href="#akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypes" title="=&gt; scala.collection.immutable.Seq[akka.http.model.ContentType]">nodeSeqContentTypes</a>.<span title="(f: akka.http.model.ContentType =&gt; akka.http.model.ContentTypeRange)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[akka.http.model.ContentType],akka.http.model.ContentTypeRange,scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]])scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq.Coll,akka.http.model.ContentTypeRange,scala.collection.immutable.Seq[akka.http.model.ContentTypeRange]]" class="delimiter">(</span><a href="../../model/ContentType.scala.html#akka.http.model.ContentTypeRange.apply(58a6b3c14a)" title="implicit akka.http.model.ContentTypeRange.apply : (contentType: akka.http.model.ContentType)akka.http.model.ContentTypeRange">ContentTypeRange</a><span class="delimiter">(</span><a href="#akka.http.marshallers.xml.ScalaXmlSupport.nodeSeqContentTypeRanges.$anonfun.x$2" title="akka.http.model.ContentType">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
