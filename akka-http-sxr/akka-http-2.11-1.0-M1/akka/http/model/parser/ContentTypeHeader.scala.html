<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/model/parser/ContentTypeHeader.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.model
package parser

import scala.annotation.tailrec
import akka.parboiled2.Parser
import headers._

private<span class="delimiter">[</span>parser<span class="delimiter">]</span> trait <a title="trait ContentTypeHeader extends AnyRef" id="akka.http.model.parser;ContentTypeHeader">ContentTypeHeader</a> <span title="Unit" class="delimiter">{</span> this: Parser with CommonRules with CommonActions ⇒

  <span class="comment">// http://tools.ietf.org/html/rfc7231#section-3.1.1.5</span>
  def <a title="=&gt; akka.parboiled2.Rule[akka.shapeless.HNil,akka.shapeless.::[akka.http.model.headers.Content-Type,akka.shapeless.HNil]]" id="akka.http.model.parser;ContentTypeHeader.content-type">`content-type`</a> = rule <a title="akka.parboiled2.Rule[akka.shapeless.HNil,akka.shapeless.::[akka.http.model.headers.Content-Type,akka.shapeless.HNil]]" id="akka.http.model.parser;ContentTypeHeader.content-type.matched.main" class="delimiter">{</a>
    <a href="CommonRules.scala.html#akka.http.model.parser;CommonRules.media-type" title="=&gt; akka.parboiled2.RuleN[akka.shapeless.::[String,akka.shapeless.::[String,akka.shapeless.::[Seq[(String, String)],akka.shapeless.HNil]]]]">`media-type`</a> ~ <a href="#akka.http.model.parser;ContentTypeHeader" title="=&gt; Char">EOI</a> ~&gt; <span class="delimiter">(</span><span class="delimiter">(</span>main, sub, params<span class="delimiter">)</span> ⇒ <a href="../headers/headers.scala.html#akka.http.model.headers;Content-Type" title="(contentType: akka.http.model.ContentType)akka.http.model.headers.Content-Type">`Content-Type`</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType" title="(main: String, sub: String, params: Seq[(String, String)], charset: Option[akka.http.model.HttpCharset], builder: ContentTypeHeader.this.StringMapBuilder)akka.http.model.ContentType">contentType</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.content-type.matched.main" title="String">main</a>, <a href="#akka.http.model.parser;ContentTypeHeader.content-type.matched.main" title="String">sub</a>, <a href="#akka.http.model.parser;ContentTypeHeader.content-type.matched.main" title="Seq[(String, String)]">params</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @tailrec private def <a title="(main: String, sub: String, params: Seq[(String, String)], charset: Option[akka.http.model.HttpCharset], builder: ContentTypeHeader.this.StringMapBuilder)akka.http.model.ContentType" id="akka.http.model.parser;ContentTypeHeader.contentType">contentType</a><span class="delimiter">(</span><a title="String" id="akka.http.model.parser;ContentTypeHeader.contentType.main">main</a>: <span title="String">String</span>,
                                   <a title="String" id="akka.http.model.parser;ContentTypeHeader.contentType.sub">sub</a>: <span title="String">String</span>,
                                   <a title="Seq[(String, String)]" id="akka.http.model.parser;ContentTypeHeader.contentType.params">params</a>: <span title="Seq[(String, String)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span>,
                                   <a title="Option[akka.http.model.HttpCharset]" id="akka.http.model.parser;ContentTypeHeader.contentType$default$4">charset</a>: <span title="Option[akka.http.model.HttpCharset]">Option</span><span class="delimiter">[</span>HttpCharset<span class="delimiter">]</span> = <span title="None.type">None</span>,
                                   <a title="ContentTypeHeader.this.StringMapBuilder" id="akka.http.model.parser;ContentTypeHeader.contentType$default$5">builder</a>: <span title="ContentTypeHeader.this.StringMapBuilder">StringMapBuilder</span> = null<span class="delimiter">)</span>: <a href="../ContentType.scala.html#akka.http.model;ContentType" title="akka.http.model.ContentType">ContentType</a> =
    <a href="#akka.http.model.parser;ContentTypeHeader.contentType.params" title="Seq[(String, String)]">params</a> match <span class="delimiter">{</span>
      case <span title="scala.collection.immutable.Nil.type">Nil</span> ⇒
        val <a title="scala.collection.immutable.Map[String,String]" id="akka.http.model.parser;ContentTypeHeader.contentType.parameters">parameters</a> = if <span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$5" title="ContentTypeHeader.this.StringMapBuilder">builder</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,String]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span> else <a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$5" title="ContentTypeHeader.this.StringMapBuilder">builder</a>.<span title="()Map[String,String]">result</span><span class="delimiter">(</span><span class="delimiter">)</span>
        val <a title="akka.http.model.MediaType" id="akka.http.model.parser;ContentTypeHeader.contentType.mediaType">mediaType</a> = <a href="CommonActions.scala.html#akka.http.model.parser;CommonActions.getMediaType" title="(mainType: String, subType: String, params: Map[String,String])akka.http.model.MediaType">getMediaType</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType.main" title="String">main</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType.sub" title="String">sub</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType.parameters" title="scala.collection.immutable.Map[String,String]">parameters</a><span class="delimiter">)</span>
        <a href="../ContentType.scala.html#akka.http.model;ContentType" title="(mediaType: akka.http.model.MediaType, definedCharset: Option[akka.http.model.HttpCharset])akka.http.model.ContentType">ContentType</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType.mediaType" title="akka.http.model.MediaType">mediaType</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$4" title="Option[akka.http.model.HttpCharset]">charset</a><span class="delimiter">)</span>

      case <a href="#akka.http.model.parser;ContentTypeHeader.contentType.<unapply-selector>" title="(x: Seq[(String, String)])Some[Seq[(String, String)]]">Seq</a><span class="delimiter">(</span><span class="delimiter">(</span><span title="String(&quot;charset&quot;)" class="string">&quot;charset&quot;</span>, <a title="String" id="akka.http.model.parser;ContentTypeHeader.contentType.value">value</a><span class="delimiter">)</span>, <span title="Seq[(String, String)]">tail</span> @ _*<span class="delimiter">)</span> ⇒
        <a href="#akka.http.model.parser;ContentTypeHeader.contentType" title="(main: String, sub: String, params: Seq[(String, String)], charset: Option[akka.http.model.HttpCharset], builder: ContentTypeHeader.this.StringMapBuilder)akka.http.model.ContentType">contentType</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType.main" title="String">main</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType.sub" title="String">sub</a>, <span title="Seq[(String, String)]">tail</span>, <span title="(x: akka.http.model.HttpCharset)Some[akka.http.model.HttpCharset]">Some</span><span class="delimiter">(</span><a href="CommonActions.scala.html#akka.http.model.parser;CommonActions.getCharset" title="(name: String)akka.http.model.HttpCharset">getCharset</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType.value" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$5" title="ContentTypeHeader.this.StringMapBuilder">builder</a><span class="delimiter">)</span>

      case <a href="#akka.http.model.parser;ContentTypeHeader.contentType.<unapply-selector>" title="(x: Seq[(String, String)])Some[Seq[(String, String)]]">Seq</a><span class="delimiter">(</span><a title="(String, String)" id="akka.http.model.parser;ContentTypeHeader.contentType.kvp">kvp</a>, <span title="Seq[(String, String)]">tail</span> @ _*<span class="delimiter">)</span> ⇒
        val <a title="scala.collection.mutable.Builder[(String, String),scala.collection.immutable.Map[String,String]]" id="akka.http.model.parser;ContentTypeHeader.contentType.b">b</a> = if <span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$5" title="ContentTypeHeader.this.StringMapBuilder">builder</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.mutable.Builder[(A, B),scala.collection.immutable.Map[A,B]]">newBuilder</span><span title="scala.collection.mutable.Builder[(String, String),scala.collection.immutable.Map[String,String]]" class="delimiter">[</span><span title="String">String</span>, <span title="String">String</span><span class="delimiter">]</span> else <a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$5" title="ContentTypeHeader.this.StringMapBuilder">builder</a>
        <a href="#akka.http.model.parser;ContentTypeHeader.contentType.b" title="scala.collection.mutable.Builder[(String, String),scala.collection.immutable.Map[String,String]]">b</a> <span title="(elem: (String, String))b.type">+=</span> <a href="#akka.http.model.parser;ContentTypeHeader.contentType.kvp" title="(String, String)">kvp</a>
        <a href="#akka.http.model.parser;ContentTypeHeader.contentType" title="(main: String, sub: String, params: Seq[(String, String)], charset: Option[akka.http.model.HttpCharset], builder: ContentTypeHeader.this.StringMapBuilder)akka.http.model.ContentType">contentType</a><span class="delimiter">(</span><a href="#akka.http.model.parser;ContentTypeHeader.contentType.main" title="String">main</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType.sub" title="String">sub</a>, <span title="Seq[(String, String)]">tail</span>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType$default$4" title="Option[akka.http.model.HttpCharset]">charset</a>, <a href="#akka.http.model.parser;ContentTypeHeader.contentType.b" title="scala.collection.mutable.Builder[(String, String),scala.collection.immutable.Map[String,String]]">b</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
