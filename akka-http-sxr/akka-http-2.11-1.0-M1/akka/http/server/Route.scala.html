<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/server/Route.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.server

import scala.concurrent.Future
import akka.stream.scaladsl.Flow
import akka.http.model.<span class="delimiter">{</span> HttpRequest, HttpResponse <span class="delimiter">}</span>
import akka.http.util.<a href="../util/FastFuture.scala.html#akka.http.util.FastFuture" title="akka.http.util.FastFuture.type">FastFuture</a>._

object <a title="akka.http.server.Route.type" id="akka.http.server.Route">Route</a> <a href="#akka.http.server.Route" title="akka.http.server.Route.type" class="delimiter">{</a>

  <span class="comment">/**
   * Helper for constructing a Route from a function literal.
   */</span>
  def <a title="(f: akka.http.server.Route)akka.http.server.Route" id="akka.http.server.Route.apply">apply</a><span class="delimiter">(</span><a title="akka.http.server.Route" id="akka.http.server.Route.apply.f">f</a>: <span title="akka.http.server.Route">Route</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> = <a href="#akka.http.server.Route.apply.f" title="akka.http.server.Route">f</a>

  <span class="comment">/**
   * &quot;Seals&quot; a route by wrapping it with exception handling and rejection conversion.
   */</span>
  def <a title="(route: akka.http.server.Route)(implicit setup: akka.http.server.RoutingSetup)akka.http.server.Route" id="akka.http.server.Route.seal">seal</a><span class="delimiter">(</span><a title="akka.http.server.Route" id="akka.http.server.Route.seal.route">route</a>: <span title="akka.http.server.Route">Route</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.http.server.RoutingSetup" id="akka.http.server.Route.seal.setup">setup</a>: <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup" title="akka.http.server.RoutingSetup">RoutingSetup</a><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> = <span class="delimiter">{</span>
    import directives.<a href="directives/ExecutionDirectives.scala.html#akka.http.server.directives.ExecutionDirectives" title="akka.http.server.directives.ExecutionDirectives.type">ExecutionDirectives</a>._
    import <a href="#akka.http.server.Route.seal.setup" title="akka.http.server.RoutingSetup">setup</a>._
    val <a title="PartialFunction[Throwable,akka.http.server.Route]" id="akka.http.server.Route.seal.sealedExceptionHandler">sealedExceptionHandler</a> =
      if <span class="delimiter">(</span><a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.exceptionHandler" title="=&gt; akka.http.server.ExceptionHandler">exceptionHandler</a>.<a href="ExceptionHandler.scala.html#akka.http.server;ExceptionHandler.isDefault" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span> <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.exceptionHandler" title="=&gt; akka.http.server.ExceptionHandler">exceptionHandler</a>
      else <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.exceptionHandler" title="=&gt; akka.http.server.ExceptionHandler">exceptionHandler</a> <span title="(that: PartialFunction[Throwable,akka.http.server.Route])PartialFunction[Throwable,akka.http.server.Route]">orElse</span> <a href="ExceptionHandler.scala.html#akka.http.server.ExceptionHandler" title="akka.http.server.ExceptionHandler.type">ExceptionHandler</a>.<a href="ExceptionHandler.scala.html#akka.http.server.ExceptionHandler.default" title="(settings: akka.http.server.RoutingSettings)(implicit ec: scala.concurrent.ExecutionContext)akka.http.server.ExceptionHandler">default</a><a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.executor" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.settings" title="=&gt; akka.http.server.RoutingSettings">settings</a><span class="delimiter">)</span>
    val <a title="PartialFunction[scala.collection.immutable.Seq[akka.http.server.Rejection],akka.http.server.Route]" id="akka.http.server.Route.seal.sealedRejectionHandler">sealedRejectionHandler</a> =
      if <span class="delimiter">(</span><a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.rejectionHandler" title="=&gt; akka.http.server.RejectionHandler">rejectionHandler</a>.<a href="RejectionHandler.scala.html#akka.http.server;RejectionHandler.isDefault" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span> <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.rejectionHandler" title="=&gt; akka.http.server.RejectionHandler">rejectionHandler</a>
      else <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.rejectionHandler" title="=&gt; akka.http.server.RejectionHandler">rejectionHandler</a> <span title="(that: PartialFunction[scala.collection.immutable.Seq[akka.http.server.Rejection],akka.http.server.Route])PartialFunction[scala.collection.immutable.Seq[akka.http.server.Rejection],akka.http.server.Route]">orElse</span> <a href="RejectionHandler.scala.html#akka.http.server.RejectionHandler" title="akka.http.server.RejectionHandler.type">RejectionHandler</a>.<a href="RejectionHandler.scala.html#akka.http.server.RejectionHandler.default" title="(implicit ec: scala.concurrent.ExecutionContext)akka.http.server.RejectionHandler">default</a>
    <a href="directives/ExecutionDirectives.scala.html#akka.http.server.directives;ExecutionDirectives.handleExceptions" title="(handler: akka.http.server.ExceptionHandler)akka.http.server.Directive0">handleExceptions</a><a href="Directive.scala.html#akka.http.server.Directive.addByNameNullaryApply" title="(v1: =&gt; akka.http.server.Route)akka.http.server.Route" class="delimiter">(</a><a href="ExceptionHandler.scala.html#akka.http.server.ExceptionHandler.apply(f9ecf54249)" title="implicit akka.http.server.ExceptionHandler.apply : (pf: akka.http.server.ExceptionHandler.PF)akka.http.server.ExceptionHandler">sealedExceptionHandler</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="directives/ExecutionDirectives.scala.html#akka.http.server.directives;ExecutionDirectives.handleRejections" title="(handler: akka.http.server.RejectionHandler)akka.http.server.Directive0">handleRejections</a><a href="Directive.scala.html#akka.http.server.Directive.addByNameNullaryApply" title="(v1: =&gt; akka.http.server.Route)akka.http.server.Route" class="delimiter">(</a><a href="RejectionHandler.scala.html#akka.http.server.RejectionHandler.apply(448d517ace)" title="implicit akka.http.server.RejectionHandler.apply : (pf: akka.http.server.RejectionHandler.PF)akka.http.server.RejectionHandler">sealedRejectionHandler</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.http.server.Route.seal.route" title="akka.http.server.Route">route</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Turns a `Route` into an server flow.
   */</span>
  def <a title="(route: akka.http.server.Route)(implicit setup: akka.http.server.RoutingSetup)akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpResponse]" id="akka.http.server.Route.handlerFlow">handlerFlow</a><span class="delimiter">(</span><a title="akka.http.server.Route" id="akka.http.server.Route.handlerFlow.route">route</a>: <span title="akka.http.server.Route">Route</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.http.server.RoutingSetup" id="akka.http.server.Route.handlerFlow.setup">setup</a>: <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup" title="akka.http.server.RoutingSetup">RoutingSetup</a><span class="delimiter">)</span>: <a href="../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow" title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpResponse]">Flow</a><span class="delimiter">[</span>HttpRequest, HttpResponse<span class="delimiter">]</span> =
    <a href="../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl.Flow.apply(25a994e6fb)" title="[T]=&gt; akka.stream.scaladsl.Flow[T,T]">Flow</a><span title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpRequest]" class="delimiter">[</span><a href="../model/HttpMessage.scala.html#akka.http.model;HttpRequest" title="akka.http.model.HttpRequest">HttpRequest</a><span class="delimiter">]</span>.<a href="../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.mapAsync" title="(f: akka.http.model.HttpRequest =&gt; scala.concurrent.Future[akka.http.model.HttpResponse])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpRequest]#Repr[akka.http.model.HttpResponse]">mapAsync</a><span class="delimiter">(</span><a href="#akka.http.server.Route.asyncHandler" title="(route: akka.http.server.Route)(implicit setup: akka.http.server.RoutingSetup)akka.http.model.HttpRequest =&gt; scala.concurrent.Future[akka.http.model.HttpResponse]">asyncHandler</a><a href="#akka.http.server.Route.handlerFlow.setup" title="akka.http.server.RoutingSetup" class="delimiter">(</a><a href="#akka.http.server.Route.handlerFlow.route" title="akka.http.server.Route">route</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Turns a `Route` into an async handler function.
   */</span>
  def <a title="(route: akka.http.server.Route)(implicit setup: akka.http.server.RoutingSetup)akka.http.model.HttpRequest =&gt; scala.concurrent.Future[akka.http.model.HttpResponse]" id="akka.http.server.Route.asyncHandler">asyncHandler</a><span class="delimiter">(</span><a title="akka.http.server.Route" id="akka.http.server.Route.asyncHandler.route">route</a>: <span title="akka.http.server.Route">Route</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.http.server.RoutingSetup" id="akka.http.server.Route.asyncHandler.setup">setup</a>: <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup" title="akka.http.server.RoutingSetup">RoutingSetup</a><span class="delimiter">)</span>: HttpRequest ⇒ Future<span class="delimiter">[</span>HttpResponse<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import <a href="#akka.http.server.Route.asyncHandler.setup" title="akka.http.server.RoutingSetup">setup</a>._
    val <a title="akka.http.server.Route" id="akka.http.server.Route.asyncHandler.sealedRoute">sealedRoute</a> = <a href="#akka.http.server.Route.seal" title="(route: akka.http.server.Route)(implicit setup: akka.http.server.RoutingSetup)akka.http.server.Route">seal</a><a href="#akka.http.server.Route.asyncHandler.setup" title="akka.http.server.RoutingSetup" class="delimiter">(</a><a href="#akka.http.server.Route.asyncHandler.route" title="akka.http.server.Route">route</a><span class="delimiter">)</span>
    <a title="akka.http.model.HttpRequest" id="akka.http.server.Route.asyncHandler.$anonfun.request">request</a> ⇒
      <a href="#akka.http.server.Route.asyncHandler.sealedRoute" title="(v1: akka.http.server.RequestContext)scala.concurrent.Future[akka.http.server.RouteResult]">sealedRoute</a><a href="../util/FastFuture.scala.html#akka.http.util.FastFuture.EnhancedFuture(70d292f3d1)" title="(future: scala.concurrent.Future[akka.http.server.RouteResult])akka.http.util.FastFuture.EnhancedFuture[akka.http.server.RouteResult]" class="delimiter">(</a>new <a href="RequestContextImpl.scala.html#akka.http.server;RequestContextImpl" title="akka.http.server.RequestContextImpl">RequestContextImpl</a><span class="delimiter">(</span><a href="#akka.http.server.Route.asyncHandler.$anonfun.request" title="akka.http.model.HttpRequest">request</a>, <a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.routingLog" title="=&gt; akka.http.server.RoutingLog">routingLog</a>.<a href="RoutingSetup.scala.html#akka.http.server;RoutingLog.requestLog" title="(request: akka.http.model.HttpRequest)akka.event.LoggingAdapter">requestLog</a><span class="delimiter">(</span><a href="#akka.http.server.Route.asyncHandler.$anonfun.request" title="akka.http.model.HttpRequest">request</a><span class="delimiter">)</span>, <a href="#akka.http.server.Route.asyncHandler.setup" title="akka.http.server.RoutingSetup">setup</a>.<a href="RoutingSetup.scala.html#akka.http.server;RoutingSetup.settings" title="=&gt; akka.http.server.RoutingSettings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../util/FastFuture.scala.html#akka.http.util.FastFuture;EnhancedFuture.fast" title="=&gt; akka.http.util.FastFuture[akka.http.server.RouteResult]">fast</a>.<a href="../util/FastFuture.scala.html#akka.http.util;FastFuture.map" title="(f: akka.http.server.RouteResult =&gt; akka.http.model.HttpResponse)(implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.http.model.HttpResponse]">map</a> <a href="#akka.http.server.Route.asyncHandler.$anonfun.$anonfun.x0$1" title="akka.http.model.HttpResponse" class="delimiter">{</a>
        case RouteResult.Complete<span class="delimiter">(</span><a title="akka.http.model.HttpResponse" id="akka.http.server.Route.asyncHandler.$anonfun.$anonfun.response">response</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.Route.asyncHandler.$anonfun.$anonfun.response" title="akka.http.model.HttpResponse">response</a>
        case RouteResult.Rejected<span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.http.server.Rejection]" id="akka.http.server.Route.asyncHandler.$anonfun.$anonfun.rejected">rejected</a><span class="delimiter">)</span> ⇒ throw new <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Unhandled rejections \'&quot;)">Unhandled rejections '$</span><a href="#akka.http.server.Route.asyncHandler.$anonfun.$anonfun.rejected" title="scala.collection.immutable.Seq[akka.http.server.Rejection]">rejected</a><span title="String(&quot;\', unsealed RejectionHandler?!&quot;)" class="string">', unsealed RejectionHandler?!&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
