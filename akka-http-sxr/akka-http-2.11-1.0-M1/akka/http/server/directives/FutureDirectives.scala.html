<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/server/directives/FutureDirectives.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.server
package directives

import scala.concurrent.Future
import scala.util.<span class="delimiter">{</span> Failure, Success, Try <span class="delimiter">}</span>
import akka.http.marshalling.ToResponseMarshaller
import akka.http.server.util.Tupler
import akka.http.util.FastFuture
import <a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture" title="akka.http.util.FastFuture.type">FastFuture</a>._

<span class="comment">// format: OFF</span>

trait <a title="trait FutureDirectives extends AnyRef" id="akka.http.server.directives;FutureDirectives">FutureDirectives</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * &quot;Unwraps&quot; a ``Future[T]`` and runs its inner route after future
   * completion with the future's value as an extraction of type ``Try[T]``.
   */</span>
  def <a title="[T](future: =&gt; scala.concurrent.Future[T])akka.http.server.Directive1[scala.util.Try[T]]" id="akka.http.server.directives;FutureDirectives.onComplete">onComplete</a><span class="delimiter">[</span><a title="" id="akka.http.server.directives;FutureDirectives.onComplete;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.concurrent.Future[T]" id="akka.http.server.directives;FutureDirectives.onComplete.future">future</a>: ⇒ Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive1[scala.util.Try[T]]">Directive1</a><span class="delimiter">[</span>Try<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="../Directive.scala.html#akka.http.server.Directive.apply" title="(f: (((scala.util.Try[T],)) =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[(scala.util.Try[T],)])akka.http.server.Directive[(scala.util.Try[T],)]">Directive</a> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forTuple1" title="akka.http.server.util.Tuple[(scala.util.Try[T],)]" class="delimiter">{</a> <a title="((scala.util.Try[T],)) =&gt; akka.http.server.Route" id="akka.http.server.directives;FutureDirectives.onComplete.$anonfun.inner">inner</a> ⇒ <a title="akka.http.server.RequestContext" id="akka.http.server.directives;FutureDirectives.onComplete.$anonfun.$anonfun.ctx">ctx</a> ⇒
        import <a href="#akka.http.server.directives;FutureDirectives.onComplete.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.executionContext
        <a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture.EnhancedFuture(70d292f3d1)" title="(future: scala.concurrent.Future[T])akka.http.util.FastFuture.EnhancedFuture[T]">future</a>.<a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture;EnhancedFuture.fast" title="=&gt; akka.http.util.FastFuture[T]">fast</a>.<a href="../../util/FastFuture.scala.html#akka.http.util;FastFuture.transformWith(8c87ab2d8f)" title="(f: scala.util.Try[T] =&gt; scala.concurrent.Future[akka.http.server.RouteResult])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.http.server.RouteResult]">transformWith</a><a href="../RequestContext.scala.html#akka.http.server;RequestContext.executionContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">(</a><a title="scala.util.Try[T]" id="akka.http.server.directives;FutureDirectives.onComplete.$anonfun.$anonfun.$anonfun.t">t</a> ⇒ <a href="#akka.http.server.directives;FutureDirectives.onComplete.$anonfun.inner" title="(v1: (scala.util.Try[T],))akka.http.server.Route">inner</a><span title="(v1: akka.http.server.RequestContext)scala.concurrent.Future[akka.http.server.RouteResult]" class="delimiter">(</span><span title="(_1: scala.util.Try[T])(scala.util.Try[T],)">Tuple1</span><span class="delimiter">(</span><a href="#akka.http.server.directives;FutureDirectives.onComplete.$anonfun.$anonfun.$anonfun.t" title="scala.util.Try[T]">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives;FutureDirectives.onComplete.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * &quot;Unwraps&quot; a ``Future[T]`` and runs its inner route after future
   * completion with the future's value as an extraction of type ``T``.
   * If the future fails its failure Throwable is bubbled up to the nearest
   * ExceptionHandler.
   * If type ``T`` is already a Tuple it is directly expanded into the respective
   * number of extractions.
   */</span>
  def <a title="(magnet: akka.http.server.directives.OnSuccessMagnet)akka.http.server.Directive[magnet.Out]" id="akka.http.server.directives;FutureDirectives.onSuccess">onSuccess</a><span class="delimiter">(</span><a title="akka.http.server.directives.OnSuccessMagnet" id="akka.http.server.directives;FutureDirectives.onSuccess.magnet">magnet</a>: <a href="#akka.http.server.directives;OnSuccessMagnet" title="akka.http.server.directives.OnSuccessMagnet">OnSuccessMagnet</a><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive[magnet.Out]">Directive</a><span class="delimiter">[</span>magnet.Out<span class="delimiter">]</span> = <a href="#akka.http.server.directives;FutureDirectives.onSuccess.magnet" title="akka.http.server.directives.OnSuccessMagnet">magnet</a>.<a href="#akka.http.server.directives;OnSuccessMagnet.directive" title="=&gt; akka.http.server.Directive[magnet.Out]">directive</a>

  <span class="comment">/**
   * &quot;Unwraps&quot; a ``Future[T]`` and runs its inner route when the future has failed
   * with the future's failure exception as an extraction of type ``Throwable``.
   * If the future succeeds the request is completed using the values marshaller
   * (This directive therefore requires a marshaller for the futures type to be
   * implicitly available.)
   */</span>
  def <a title="(magnet: akka.http.server.directives.CompleteOrRecoverWithMagnet)akka.http.server.Directive1[Throwable]" id="akka.http.server.directives;FutureDirectives.completeOrRecoverWith">completeOrRecoverWith</a><span class="delimiter">(</span><a title="akka.http.server.directives.CompleteOrRecoverWithMagnet" id="akka.http.server.directives;FutureDirectives.completeOrRecoverWith.magnet">magnet</a>: <a href="#akka.http.server.directives;CompleteOrRecoverWithMagnet" title="akka.http.server.directives.CompleteOrRecoverWithMagnet">CompleteOrRecoverWithMagnet</a><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive1[Throwable]">Directive1</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span> = <a href="#akka.http.server.directives;FutureDirectives.completeOrRecoverWith.magnet" title="akka.http.server.directives.CompleteOrRecoverWithMagnet">magnet</a>.<a href="#akka.http.server.directives;CompleteOrRecoverWithMagnet.directive" title="=&gt; akka.http.server.Directive1[Throwable]">directive</a>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.FutureDirectives.type" id="akka.http.server.directives.FutureDirectives">FutureDirectives</a> extends <a href="#akka.http.server.directives;FutureDirectives" title="akka.http.server.directives.FutureDirectives">FutureDirectives</a>

trait <a title="trait OnSuccessMagnet extends AnyRef" id="akka.http.server.directives;OnSuccessMagnet">OnSuccessMagnet</a> <span class="delimiter">{</span>
  type <a title="" id="akka.http.server.directives;OnSuccessMagnet;Out">Out</a>
  def <a title="=&gt; akka.http.server.Directive[OnSuccessMagnet.this.Out]" id="akka.http.server.directives;OnSuccessMagnet.directive">directive</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive[OnSuccessMagnet.this.Out]">Directive</a><span class="delimiter">[</span>Out<span class="delimiter">]</span>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.OnSuccessMagnet.type" id="akka.http.server.directives.OnSuccessMagnet">OnSuccessMagnet</a> <a href="#akka.http.server.directives.OnSuccessMagnet" title="akka.http.server.directives.OnSuccessMagnet.type" class="delimiter">{</a>
  implicit def <a title="[T](future: =&gt; scala.concurrent.Future[T])(implicit tupler: akka.http.server.util.Tupler[T])akka.http.server.directives.OnSuccessMagnet{type Out = tupler.Out; val directive: akka.http.server.Directive[tupler.Out]}" id="akka.http.server.directives.OnSuccessMagnet.apply">apply</a><span class="delimiter">[</span><a title="" id="akka.http.server.directives.OnSuccessMagnet.apply;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.concurrent.Future[T]" id="akka.http.server.directives.OnSuccessMagnet.apply.future">future</a>: ⇒ Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.http.server.util.Tupler[T]" id="akka.http.server.directives.OnSuccessMagnet.apply.tupler">tupler</a>: <a href="../util/Tupler.scala.html#akka.http.server.util;Tupler" title="akka.http.server.util.Tupler[T]">Tupler</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    new <a title="&lt;$anon: akka.http.server.directives.OnSuccessMagnet&gt; extends AnyRef with akka.http.server.directives.OnSuccessMagnet" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon">OnSuccessMagnet</a> <span class="delimiter">{</span>
      type <a title="tupler.Out" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon;Out">Out</a> = tupler.<a href="../util/Tupler.scala.html#akka.http.server.util;Tupler;Out" title="tupler.Out">Out</a>
      val <a title="akka.http.server.Directive[tupler.Out]" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive">directive</a> = <a href="../Directive.scala.html#akka.http.server.Directive.apply" title="[T](f: (T =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[T])akka.http.server.Directive[T]">Directive</a><span title="(f: (tupler.Out =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[tupler.Out])akka.http.server.Directive[tupler.Out]" class="delimiter">[</span>tupler.<a href="../util/Tupler.scala.html#akka.http.server.util;Tupler;Out" title="tupler.Out">Out</a><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="tupler.Out =&gt; akka.http.server.Route" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.inner">inner</a> ⇒ <a title="akka.http.server.RequestContext" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx">ctx</a> ⇒
        import <a href="#akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.executionContext
        <a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture.EnhancedFuture(70d292f3d1)" title="(future: scala.concurrent.Future[T])akka.http.util.FastFuture.EnhancedFuture[T]">future</a>.<a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture;EnhancedFuture.fast" title="=&gt; akka.http.util.FastFuture[T]">fast</a>.<a href="../../util/FastFuture.scala.html#akka.http.util;FastFuture.flatMap" title="(f: T =&gt; scala.concurrent.Future[akka.http.server.RouteResult])(implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.http.server.RouteResult]">flatMap</a><a href="../RequestContext.scala.html#akka.http.server;RequestContext.executionContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">(</a><a title="T" id="akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.t">t</a> ⇒ <a href="#akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.inner" title="(v1: tupler.Out)akka.http.server.Route">inner</a><span title="(v1: akka.http.server.RequestContext)scala.concurrent.Future[akka.http.server.RouteResult]" class="delimiter">(</span><a href="../util/Tupler.scala.html#akka.http.server.util;Tupler.apply" title="(value: T)tupler.Out">tupler</a><span class="delimiter">(</span><a href="#akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.t" title="T">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives.OnSuccessMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">(</span><a href="#akka.http.server.directives.OnSuccessMagnet.apply.tupler" title="akka.http.server.util.Tupler[T]">tupler</a>.<a href="../util/Tupler.scala.html#akka.http.server.util;Tupler.OutIsTuple" title="=&gt; akka.http.server.util.Tuple[tupler.Out]">OutIsTuple</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

trait <a title="trait CompleteOrRecoverWithMagnet extends AnyRef" id="akka.http.server.directives;CompleteOrRecoverWithMagnet">CompleteOrRecoverWithMagnet</a> <span class="delimiter">{</span>
  def <a title="=&gt; akka.http.server.Directive1[Throwable]" id="akka.http.server.directives;CompleteOrRecoverWithMagnet.directive">directive</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive1[Throwable]">Directive1</a><span class="delimiter">[</span>Throwable<span class="delimiter">]</span>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.CompleteOrRecoverWithMagnet.type" id="akka.http.server.directives.CompleteOrRecoverWithMagnet">CompleteOrRecoverWithMagnet</a> <a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet" title="akka.http.server.directives.CompleteOrRecoverWithMagnet.type" class="delimiter">{</a>
  implicit def <a title="[T](future: =&gt; scala.concurrent.Future[T])(implicit m: akka.http.marshalling.ToResponseMarshaller[T])akka.http.server.directives.CompleteOrRecoverWithMagnet{val directive: akka.http.server.Directive[(Throwable,)]}" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply">apply</a><span class="delimiter">[</span><a title="" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.concurrent.Future[T]" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply.future">future</a>: ⇒ Future<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.http.marshalling.ToResponseMarshaller[T]" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply.m">m</a>: <a href="../../marshalling/Marshaller.scala.html#akka.http.marshalling;Marshaller" title="akka.http.marshalling.ToResponseMarshaller[T]">ToResponseMarshaller</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    new <a title="&lt;$anon: akka.http.server.directives.CompleteOrRecoverWithMagnet&gt; extends AnyRef with akka.http.server.directives.CompleteOrRecoverWithMagnet" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon">CompleteOrRecoverWithMagnet</a> <span class="delimiter">{</span>
      val <a title="akka.http.server.Directive[(Throwable,)]" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive">directive</a> = <a href="../Directive.scala.html#akka.http.server.Directive.apply" title="[T](f: (T =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[T])akka.http.server.Directive[T]">Directive</a><span title="(f: (((Throwable,)) =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[(Throwable,)])akka.http.server.Directive[(Throwable,)]" class="delimiter">[</span><span title="(Throwable,)">Tuple1</span><span class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">]</span> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forTuple1" title="akka.http.server.util.Tuple[(Throwable,)]" class="delimiter">{</a> <a title="((Throwable,)) =&gt; akka.http.server.Route" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.inner">inner</a> ⇒ <a title="akka.http.server.RequestContext" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx">ctx</a> ⇒
        import <a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.executionContext
        <a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture.EnhancedFuture(70d292f3d1)" title="(future: scala.concurrent.Future[T])akka.http.util.FastFuture.EnhancedFuture[T]">future</a>.<a href="../../util/FastFuture.scala.html#akka.http.util.FastFuture;EnhancedFuture.fast" title="=&gt; akka.http.util.FastFuture[T]">fast</a>.<a href="../../util/FastFuture.scala.html#akka.http.util;FastFuture.transformWith(8c87ab2d8f)" title="(f: scala.util.Try[T] =&gt; scala.concurrent.Future[akka.http.server.RouteResult])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.http.server.RouteResult]">transformWith</a> <a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.x0$1" title="scala.concurrent.Future[akka.http.server.RouteResult]" class="delimiter">{</a>
          case Success<span class="delimiter">(</span><a title="T" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.res">res</a><span class="delimiter">)</span>   ⇒ <a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.complete" title="(obj: akka.http.marshalling.ToResponseMarshallable)scala.concurrent.Future[akka.http.server.RouteResult]">complete</a><span class="delimiter">(</span><a href="../../marshalling/ToResponseMarshallable.scala.html#akka.http.marshalling.ToResponseMarshallable.apply" title="(_value: T)(implicit _marshaller: akka.http.marshalling.ToResponseMarshaller[T])akka.http.marshalling.ToResponseMarshallable">res</a><span class="delimiter">)</span>
          case Failure<span class="delimiter">(</span><a title="Throwable" id="akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.error">error</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.inner" title="(v1: (Throwable,))akka.http.server.Route">inner</a><span title="(v1: akka.http.server.RequestContext)scala.concurrent.Future[akka.http.server.RouteResult]" class="delimiter">(</span><span title="(_1: Throwable)(Throwable,)">Tuple1</span><span class="delimiter">(</span><a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.$anonfun.error" title="Throwable">error</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives.CompleteOrRecoverWithMagnet.apply;$anon.directive.$anonfun.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
