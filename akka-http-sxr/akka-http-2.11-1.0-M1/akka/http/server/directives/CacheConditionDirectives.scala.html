<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/server/directives/CacheConditionDirectives.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.server
package directives

import akka.http.model._
import akka.http.util.DateTime
import headers._
import <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>._
import <a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>._
import <a href="../../model/headers/EntityTag.scala.html#akka.http.model.headers.EntityTag" title="akka.http.model.headers.EntityTag.type">EntityTag</a>._

trait <a title="trait CacheConditionDirectives extends AnyRef" id="akka.http.server.directives;CacheConditionDirectives">CacheConditionDirectives</a> <span title="Unit" class="delimiter">{</span>
  import <a href="BasicDirectives.scala.html#akka.http.server.directives.BasicDirectives" title="akka.http.server.directives.BasicDirectives.type">BasicDirectives</a>._
  import <a href="RouteDirectives.scala.html#akka.http.server.directives.RouteDirectives" title="akka.http.server.directives.RouteDirectives.type">RouteDirectives</a>._

  <span class="comment">/**
   * Wraps its inner route with support for Conditional Requests as defined
   * by tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-26
   *
   * In particular the algorithm defined by tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-26#section-6
   * is implemented by this directive.
   *
   * Note: if you want to combine this directive with `withRangeSupport(...)` you need to put
   * it on the *outside* of the `withRangeSupport(...)` directive, i.e. `withRangeSupport(...)`
   * must be on a deeper level in your route structure in order to function correctly.
   */</span>
  def <a title="(eTag: akka.http.model.headers.EntityTag, lastModified: akka.http.util.DateTime)akka.http.server.Directive0" id="akka.http.server.directives;CacheConditionDirectives.conditional">conditional</a><span class="delimiter">(</span><a title="akka.http.model.headers.EntityTag" id="akka.http.server.directives;CacheConditionDirectives.conditional.eTag">eTag</a>: <a href="../../model/headers/EntityTag.scala.html#akka.http.model.headers;EntityTag" title="akka.http.model.headers.EntityTag">EntityTag</a>, <a title="akka.http.util.DateTime" id="akka.http.server.directives;CacheConditionDirectives.conditional.lastModified">lastModified</a>: <a href="../../util/DateTime.scala.html#akka.http.util;DateTime" title="akka.http.util.DateTime">DateTime</a><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> = <span class="delimiter">{</span>
    def <a title="=&gt; akka.http.server.Directive0" id="akka.http.server.directives;CacheConditionDirectives.conditional.addResponseHeaders">addResponseHeaders</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
      <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.mapResponse" title="(f: akka.http.model.HttpResponse =&gt; akka.http.model.HttpResponse)akka.http.server.Directive0">mapResponse</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.addResponseHeaders.$anonfun.x$1" title="akka.http.model.HttpResponse">_</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.withDefaultHeaders" title="(defaultHeaders: scala.collection.immutable.Seq[akka.http.model.HttpHeader])akka.http.model.HttpResponse">withDefaultHeaders</a><span class="delimiter">(</span><span title="(xs: akka.http.model.headers.ModeledHeader with Product*)List[akka.http.model.headers.ModeledHeader with Product]">List</span><span class="delimiter">(</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;ETag" title="(etag: akka.http.model.headers.EntityTag)akka.http.model.headers.ETag">ETag</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.eTag" title="akka.http.model.headers.EntityTag">eTag</a><span class="delimiter">)</span>, <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Last-Modified" title="(date: akka.http.util.DateTime)akka.http.model.headers.Last-Modified">`Last-Modified`</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.lastModified" title="akka.http.util.DateTime">lastModified</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// TODO: also handle Cache-Control and Vary</span>
    def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.complete304">complete304</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> = <a href="../Directive.scala.html#akka.http.server.Directive.addByNameNullaryApply" title="(v1: =&gt; akka.http.server.Route)akka.http.server.Route">addResponseHeaders</a><span class="delimiter">(</span><a href="RouteDirectives.scala.html#akka.http.server.directives;RouteDirectives.complete" title="(m: =&gt; akka.http.marshalling.ToResponseMarshallable)akka.http.server.StandardRoute">complete</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse" title="(status: akka.http.model.StatusCode, headers: scala.collection.immutable.Seq[akka.http.model.HttpHeader], entity: akka.http.model.ResponseEntity, protocol: akka.http.model.HttpProtocol)akka.http.model.HttpResponse">HttpResponse</a><a href="../../marshalling/ToResponseMarshallable.scala.html#akka.http.marshalling.ToResponseMarshallable.apply" title="(_value: akka.http.model.HttpResponse)(implicit _marshaller: akka.http.marshalling.ToResponseMarshaller[akka.http.model.HttpResponse])akka.http.marshalling.ToResponseMarshallable" class="delimiter">(</a><a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.NotModified" title="=&gt; akka.http.model.StatusCodes.Redirection">NotModified</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.complete412">complete412</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> = <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete412.$anonfun.x$2" title="akka.http.server.RequestContext">_</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.complete" title="(obj: akka.http.marshalling.ToResponseMarshallable)scala.concurrent.Future[akka.http.server.RouteResult]">complete</a><span class="delimiter">(</span><a href="../../marshalling/ToResponseMarshallable.scala.html#akka.http.marshalling.ToResponseMarshallable.apply" title="(_value: akka.http.model.StatusCodes.ClientError)(implicit _marshaller: akka.http.marshalling.ToResponseMarshaller[akka.http.model.StatusCodes.ClientError])akka.http.marshalling.ToResponseMarshallable">PreconditionFailed</a><span class="delimiter">)</span>

    <a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[akka.http.model.HttpRequest])akka.http.server.Directive.SingleValueModifiers[akka.http.model.HttpRequest]">extractRequest</a>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: akka.http.model.HttpRequest =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">{</a> <a title="akka.http.model.HttpRequest" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.request">request</a> ⇒
      import <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.request" title="akka.http.model.HttpRequest">request</a>._
      <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.mapInnerRoute" title="(f: akka.http.server.Route =&gt; akka.http.server.Route)akka.http.server.Directive0">mapInnerRoute</a> <span class="delimiter">{</span> <a title="akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.route">route</a> ⇒
        def <a title="=&gt; akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut">innerRouteWithRangeHeaderFilteredOut</a>: <span title="akka.http.server.Route">Route</span> =
          <span class="delimiter">(</span><a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.mapRequest" title="(f: akka.http.model.HttpRequest =&gt; akka.http.model.HttpRequest)akka.http.server.Directive0">mapRequest</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut.$anonfun.x$3" title="akka.http.model.HttpRequest">_</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.mapHeaders" title="(f: scala.collection.immutable.Seq[akka.http.model.HttpHeader] =&gt; scala.collection.immutable.Seq[akka.http.model.HttpHeader])akka.http.model.HttpRequest">mapHeaders</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut.$anonfun.$anonfun.x$4" title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]">_</a>.<span title="(p: akka.http.model.HttpHeader =&gt; Boolean)scala.collection.immutable.Seq[akka.http.model.HttpHeader]">filterNot</span><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut.$anonfun.$anonfun.$anonfun.x$5" title="akka.http.model.HttpHeader">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;Range" title="akka.http.model.headers.Range">Range</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Directive.scala.html#akka.http.server.Directive.addByNameNullaryApply" title="(v1: =&gt; akka.http.server.Route)akka.http.server.Route">&amp;</a>
            <a href="../Directive.scala.html#akka.http.server.ConjunctionMagnet.fromDirective" title="(other: akka.http.server.Directive[Unit])(implicit join: akka.http.server.util.TupleOps.Join[Unit,Unit])akka.http.server.ConjunctionMagnet[Unit]{type Out = akka.http.server.Directive[join.Out]}">addResponseHeaders</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.route" title="akka.http.server.Route">route</a><span class="delimiter">)</span>

        def <a title="=&gt; Boolean" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.isGetOrHead">isGetOrHead</a> = <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.method" title="=&gt; akka.http.model.HttpMethod">method</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.HEAD" title="=&gt; akka.http.model.HttpMethod">HEAD</a> <span title="(x: Boolean)Boolean">||</span> <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.method" title="=&gt; akka.http.model.HttpMethod">method</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.GET" title="=&gt; akka.http.model.HttpMethod">GET</a>
        def <a title="(ifModifiedSince: akka.http.util.DateTime)Boolean" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified">unmodified</a><span class="delimiter">(</span><a title="akka.http.util.DateTime" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified.ifModifiedSince">ifModifiedSince</a>: <a href="../../util/DateTime.scala.html#akka.http.util;DateTime" title="akka.http.util.DateTime">DateTime</a><span class="delimiter">)</span> =
          <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.lastModified" title="akka.http.util.DateTime">lastModified</a> <span title="(that: akka.http.util.DateTime)Boolean">&lt;=</span> <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified.ifModifiedSince" title="akka.http.util.DateTime">ifModifiedSince</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified.ifModifiedSince" title="akka.http.util.DateTime">ifModifiedSince</a>.<a href="../../util/DateTime.scala.html#akka.http.util;DateTime.clicks" title="=&gt; Long">clicks</a> <span title="(x: Long)Boolean">&lt;</span> <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>

        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step1">step1</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> =
          <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.If-Match])Option[akka.http.model.headers.If-Match]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;If-Match" title="akka.http.model.headers.If-Match">`If-Match`</a><span class="delimiter">]</span> match <span class="delimiter">{</span>
            case Some<span class="delimiter">(</span>`If-Match`<span class="delimiter">(</span><a title="akka.http.model.headers.EntityTagRange" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step1.im">im</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ if <span class="delimiter">(</span><a href="../../model/headers/EntityTag.scala.html#akka.http.model.headers.EntityTag.matchesRange" title="(eTag: akka.http.model.headers.EntityTag, entityTagRange: akka.http.model.headers.EntityTagRange, weak: Boolean)Boolean">matchesRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.eTag" title="akka.http.model.headers.EntityTag">eTag</a>, <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step1.im" title="akka.http.model.headers.EntityTagRange">im</a>, weak = false<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step3" title="()akka.http.server.Route">step3</a><span class="delimiter">(</span><span class="delimiter">)</span> else <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete412" title="()akka.http.server.Route">complete412</a><span class="delimiter">(</span><span class="delimiter">)</span>
            case <span title="None.type">None</span>                 ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step2" title="()akka.http.server.Route">step2</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step2">step2</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> =
          <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.If-Unmodified-Since])Option[akka.http.model.headers.If-Unmodified-Since]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;If-Unmodified-Since" title="akka.http.model.headers.If-Unmodified-Since">`If-Unmodified-Since`</a><span class="delimiter">]</span> match <span class="delimiter">{</span>
            case Some<span class="delimiter">(</span>`If-Unmodified-Since`<span class="delimiter">(</span><a title="akka.http.util.DateTime" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step2.ius">ius</a><span class="delimiter">)</span><span class="delimiter">)</span> if <span title="=&gt; Boolean">!</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified" title="(ifModifiedSince: akka.http.util.DateTime)Boolean">unmodified</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step2.ius" title="akka.http.util.DateTime">ius</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete412" title="()akka.http.server.Route">complete412</a><span class="delimiter">(</span><span class="delimiter">)</span>
            case _ ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step3" title="()akka.http.server.Route">step3</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step3">step3</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> =
          <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.If-None-Match])Option[akka.http.model.headers.If-None-Match]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;If-None-Match" title="akka.http.model.headers.If-None-Match">`If-None-Match`</a><span class="delimiter">]</span> match <span class="delimiter">{</span>
            case Some<span class="delimiter">(</span>`If-None-Match`<span class="delimiter">(</span><a title="akka.http.model.headers.EntityTagRange" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step3.inm">inm</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
              if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../model/headers/EntityTag.scala.html#akka.http.model.headers.EntityTag.matchesRange" title="(eTag: akka.http.model.headers.EntityTag, entityTagRange: akka.http.model.headers.EntityTagRange, weak: Boolean)Boolean">matchesRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.eTag" title="akka.http.model.headers.EntityTag">eTag</a>, <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step3.inm" title="akka.http.model.headers.EntityTagRange">inm</a>, weak = true<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5" title="()akka.http.server.Route">step5</a><span class="delimiter">(</span><span class="delimiter">)</span>
              else if <span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.isGetOrHead" title="=&gt; Boolean">isGetOrHead</a><span class="delimiter">)</span> <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete304" title="()akka.http.server.Route">complete304</a><span class="delimiter">(</span><span class="delimiter">)</span> else <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete412" title="()akka.http.server.Route">complete412</a><span class="delimiter">(</span><span class="delimiter">)</span>
            case <span title="None.type">None</span> ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step4" title="()akka.http.server.Route">step4</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step4">step4</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> =
          if <span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.isGetOrHead" title="=&gt; Boolean">isGetOrHead</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.If-Modified-Since])Option[akka.http.model.headers.If-Modified-Since]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;If-Modified-Since" title="akka.http.model.headers.If-Modified-Since">`If-Modified-Since`</a><span class="delimiter">]</span> match <span class="delimiter">{</span>
              case Some<span class="delimiter">(</span>`If-Modified-Since`<span class="delimiter">(</span><a title="akka.http.util.DateTime" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step4.ims">ims</a><span class="delimiter">)</span><span class="delimiter">)</span> if <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified" title="(ifModifiedSince: akka.http.util.DateTime)Boolean">unmodified</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step4.ims" title="akka.http.util.DateTime">ims</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.complete304" title="()akka.http.server.Route">complete304</a><span class="delimiter">(</span><span class="delimiter">)</span>
              case _ ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5" title="()akka.http.server.Route">step5</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5" title="()akka.http.server.Route">step5</a><span class="delimiter">(</span><span class="delimiter">)</span>
        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5">step5</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> =
          if <span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.method" title="=&gt; akka.http.model.HttpMethod">method</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.GET" title="=&gt; akka.http.model.HttpMethod">GET</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.Range])Option[akka.http.model.headers.Range]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;Range" title="akka.http.model.headers.Range">Range</a><span class="delimiter">]</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>
            <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.If-Range])Option[akka.http.model.headers.If-Range]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;If-Range" title="akka.http.model.headers.If-Range">`If-Range`</a><span class="delimiter">]</span> match <span class="delimiter">{</span>
              case Some<span class="delimiter">(</span>`If-Range`<span class="delimiter">(</span>Left<span class="delimiter">(</span><a title="akka.http.model.headers.EntityTag" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5.tag">tag</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> if <span title="=&gt; Boolean">!</span><a href="../../model/headers/EntityTag.scala.html#akka.http.model.headers.EntityTag.matches" title="(eTag: akka.http.model.headers.EntityTag, other: akka.http.model.headers.EntityTag, weak: Boolean)Boolean">matches</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.eTag" title="akka.http.model.headers.EntityTag">eTag</a>, <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5.tag" title="akka.http.model.headers.EntityTag">tag</a>, weak = false<span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut" title="=&gt; akka.http.server.Route">innerRouteWithRangeHeaderFilteredOut</a>
              case Some<span class="delimiter">(</span>`If-Range`<span class="delimiter">(</span>Right<span class="delimiter">(</span><a title="akka.http.util.DateTime" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5.ims">ims</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> if <span title="=&gt; Boolean">!</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.unmodified" title="(ifModifiedSince: akka.http.util.DateTime)Boolean">unmodified</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step5.ims" title="akka.http.util.DateTime">ims</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.innerRouteWithRangeHeaderFilteredOut" title="=&gt; akka.http.server.Route">innerRouteWithRangeHeaderFilteredOut</a>
              case _ ⇒ <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step6" title="()akka.http.server.Route">step6</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          else <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step6" title="()akka.http.server.Route">step6</a><span class="delimiter">(</span><span class="delimiter">)</span>
        def <a title="()akka.http.server.Route" id="akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step6">step6</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="akka.http.server.Route">Route</span> = <a href="../Directive.scala.html#akka.http.server.Directive.addByNameNullaryApply" title="(v1: =&gt; akka.http.server.Route)akka.http.server.Route">addResponseHeaders</a><span class="delimiter">(</span><a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.route" title="akka.http.server.Route">route</a><span class="delimiter">)</span>

        <a href="#akka.http.server.directives;CacheConditionDirectives.conditional.$anonfun.$anonfun.step1" title="()akka.http.server.Route">step1</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.CacheConditionDirectives.type" id="akka.http.server.directives.CacheConditionDirectives">CacheConditionDirectives</a> extends <a href="#akka.http.server.directives;CacheConditionDirectives" title="akka.http.server.directives.CacheConditionDirectives">CacheConditionDirectives</a>

        </pre>
    </body>
</html>
