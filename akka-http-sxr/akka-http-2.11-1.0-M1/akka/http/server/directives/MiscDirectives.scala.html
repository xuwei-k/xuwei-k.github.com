<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/server/directives/MiscDirectives.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.server
package directives

import akka.http.model._
import headers._

trait <a title="trait MiscDirectives extends AnyRef" id="akka.http.server.directives;MiscDirectives">MiscDirectives</a> <span title="Unit" class="delimiter">{</span>
  import <a href="RouteDirectives.scala.html#akka.http.server.directives.RouteDirectives" title="akka.http.server.directives.RouteDirectives.type">RouteDirectives</a>._

  <span class="comment">/**
   * Returns a Directive which checks the given condition before passing on the [[spray.routing.RequestContext]] to
   * its inner Route. If the condition fails the route is rejected with a [[spray.routing.ValidationRejection]].
   */</span>
  def <a title="(check: =&gt; Boolean, errorMsg: String)akka.http.server.Directive0" id="akka.http.server.directives;MiscDirectives.validate">validate</a><span class="delimiter">(</span><a title="=&gt; Boolean" id="akka.http.server.directives;MiscDirectives.validate.check">check</a>: ⇒ Boolean, <a title="String" id="akka.http.server.directives;MiscDirectives.validate.errorMsg">errorMsg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="../Directive.scala.html#akka.http.server.Directive.apply" title="(f: (Unit =&gt; akka.http.server.Route) =&gt; akka.http.server.Route)(implicit evidence$4: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">Directive</a> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">{</a> <a title="Unit =&gt; akka.http.server.Route" id="akka.http.server.directives;MiscDirectives.validate.$anonfun.inner">inner</a> ⇒ if <span class="delimiter">(</span><a href="#akka.http.server.directives;MiscDirectives.validate.check" title="=&gt; Boolean">check</a><span class="delimiter">)</span> <a href="#akka.http.server.directives;MiscDirectives.validate.$anonfun.inner" title="(v1: Unit)akka.http.server.Route">inner</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> else <a href="RouteDirectives.scala.html#akka.http.server.directives;RouteDirectives.reject(6cf95b673e)" title="(rejections: akka.http.server.Rejection*)akka.http.server.StandardRoute">reject</a><span class="delimiter">(</span><a href="../Rejection.scala.html#akka.http.server;ValidationRejection" title="(message: String, cause: Option[Throwable])akka.http.server.ValidationRejection">ValidationRejection</a><span class="delimiter">(</span><a href="#akka.http.server.directives;MiscDirectives.validate.errorMsg" title="String">errorMsg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="comment">/**
   * Directive extracting the IP of the client from either the X-Forwarded-For, Remote-Address or X-Real-IP header
   * (in that order of priority).
   */</span>
  def <a title="=&gt; akka.http.server.Directive1[akka.http.model.RemoteAddress]" id="akka.http.server.directives;MiscDirectives.extractClientIP">extractClientIP</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive1[akka.http.model.RemoteAddress]">Directive1</a><span class="delimiter">[</span>RemoteAddress<span class="delimiter">]</span> = <a href="#akka.http.server.directives.MiscDirectives" title="akka.http.server.directives.MiscDirectives.type">MiscDirectives</a>.<a href="#akka.http.server.directives.MiscDirectives._extractClientIP" title="=&gt; akka.http.server.Directive1[akka.http.model.RemoteAddress]">_extractClientIP</a>

  <span class="comment">/**
   * Rejects the request if its entity is not empty.
   */</span>
  def <a title="=&gt; akka.http.server.Directive0" id="akka.http.server.directives;MiscDirectives.requestEntityEmpty">requestEntityEmpty</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> = <a href="#akka.http.server.directives.MiscDirectives" title="akka.http.server.directives.MiscDirectives.type">MiscDirectives</a>.<a href="#akka.http.server.directives.MiscDirectives._requestEntityEmpty" title="=&gt; akka.http.server.Directive0">_requestEntityEmpty</a>

  <span class="comment">/**
   * Rejects empty requests with a RequestEntityExpectedRejection.
   * Non-empty requests are passed on unchanged to the inner route.
   */</span>
  def <a title="=&gt; akka.http.server.Directive0" id="akka.http.server.directives;MiscDirectives.requestEntityPresent">requestEntityPresent</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> = <a href="#akka.http.server.directives.MiscDirectives" title="akka.http.server.directives.MiscDirectives.type">MiscDirectives</a>.<a href="#akka.http.server.directives.MiscDirectives._requestEntityPresent" title="=&gt; akka.http.server.Directive0">_requestEntityPresent</a>

  <span class="comment">/**
   * Converts responses with an empty entity into (empty) rejections.
   * This way you can, for example, have the marshalling of a ''None'' option be treated as if the request could
   * not be matched.
   */</span>
  def <a title="=&gt; akka.http.server.Directive0" id="akka.http.server.directives;MiscDirectives.rejectEmptyResponse">rejectEmptyResponse</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> = <a href="#akka.http.server.directives.MiscDirectives" title="akka.http.server.directives.MiscDirectives.type">MiscDirectives</a>.<a href="#akka.http.server.directives.MiscDirectives._rejectEmptyResponse" title="=&gt; akka.http.server.Directive0">_rejectEmptyResponse</a>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.MiscDirectives.type" id="akka.http.server.directives.MiscDirectives">MiscDirectives</a> extends <a href="#akka.http.server.directives;MiscDirectives" title="akka.http.server.directives.MiscDirectives">MiscDirectives</a> <span class="delimiter">{</span>
  import <a href="BasicDirectives.scala.html#akka.http.server.directives.BasicDirectives" title="akka.http.server.directives.BasicDirectives.type">BasicDirectives</a>._
  import <a href="HeaderDirectives.scala.html#akka.http.server.directives.HeaderDirectives" title="akka.http.server.directives.HeaderDirectives.type">HeaderDirectives</a>._
  import <a href="RouteDirectives.scala.html#akka.http.server.directives.RouteDirectives" title="akka.http.server.directives.RouteDirectives.type">RouteDirectives</a>._
  import <a href="../RouteResult.scala.html#akka.http.server.RouteResult" title="akka.http.server.RouteResult.type">RouteResult</a>._

  private val _extractClientIP: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive1[akka.http.model.RemoteAddress]">Directive1</a><span class="delimiter">[</span>RemoteAddress<span class="delimiter">]</span> =
    <a href="HeaderDirectives.scala.html#akka.http.server.directives;HeaderDirectives.headerValuePF" title="(pf: PartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress])akka.http.server.Directive1[akka.http.model.RemoteAddress]">headerValuePF</a> <span title="&lt;$anon: akka.http.model.HttpHeader =&gt; akka.http.model.RemoteAddress&gt; extends scala.runtime.AbstractPartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress] with Serializable" class="delimiter">{</span> case `X-Forwarded-For`<span class="delimiter">(</span><a href="#akka.http.server.directives.MiscDirectives._extractClientIP;$anonfun.applyOrElse.<unapply-selector>" title="(x: Seq[akka.http.model.RemoteAddress])Some[Seq[akka.http.model.RemoteAddress]]">Seq</a><span class="delimiter">(</span><span title="akka.http.model.RemoteAddress">address</span>, _*<span class="delimiter">)</span><span class="delimiter">)</span> ⇒ <span title="akka.http.model.RemoteAddress">address</span> <span class="delimiter">}</span> <a href="../Directive.scala.html#akka.http.server;Directive.|" title="(that: akka.http.server.Directive[(akka.http.model.RemoteAddress,)])akka.http.server.Directive[(akka.http.model.RemoteAddress,)]">|</a>
      <a href="HeaderDirectives.scala.html#akka.http.server.directives;HeaderDirectives.headerValuePF" title="(pf: PartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress])akka.http.server.Directive1[akka.http.model.RemoteAddress]">headerValuePF</a> <span title="&lt;$anon: akka.http.model.HttpHeader =&gt; akka.http.model.RemoteAddress&gt; extends scala.runtime.AbstractPartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress] with Serializable" class="delimiter">{</span> case `Remote-Address`<span class="delimiter">(</span><span title="akka.http.model.RemoteAddress">address</span><span class="delimiter">)</span> ⇒ <span title="akka.http.model.RemoteAddress">address</span> <span class="delimiter">}</span> <a href="../Directive.scala.html#akka.http.server;Directive.|" title="akka.http.server.Directive1[akka.http.model.RemoteAddress]" id="akka.http.server.directives.MiscDirectives._extractClientIP">|</a>
      <a href="HeaderDirectives.scala.html#akka.http.server.directives;HeaderDirectives.headerValuePF" title="(pf: PartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress])akka.http.server.Directive1[akka.http.model.RemoteAddress]">headerValuePF</a> <span title="&lt;$anon: akka.http.model.HttpHeader =&gt; akka.http.model.RemoteAddress&gt; extends scala.runtime.AbstractPartialFunction[akka.http.model.HttpHeader,akka.http.model.RemoteAddress] with Serializable" class="delimiter">{</span> case <a title="akka.http.model.HttpHeader" id="akka.http.server.directives.MiscDirectives._extractClientIP;$anonfun.isDefinedAt.h">h</a> if <a href="#akka.http.server.directives.MiscDirectives._extractClientIP;$anonfun.isDefinedAt.h" title="akka.http.model.HttpHeader">h</a>.<a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a><span class="delimiter">(</span><span title="String(&quot;x-real-ip&quot;)" class="string">&quot;x-real-ip&quot;</span><span class="delimiter">)</span> ⇒ <a href="../../model/RemoteAddress.scala.html#akka.http.model.RemoteAddress.apply(919f124fe5)" title="(s: String)akka.http.model.RemoteAddress">RemoteAddress</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.http.server.directives.MiscDirectives._extractClientIP;$anonfun.isDefinedAt.h" title="akka.http.model.HttpHeader">h</a>.<a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.value" title="()String">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  private val <a title="akka.http.server.Directive0" id="akka.http.server.directives.MiscDirectives._requestEntityEmpty">_requestEntityEmpty</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.extract" title="(f: akka.http.server.RequestContext =&gt; Boolean)akka.http.server.Directive1[Boolean]">extract</a><a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[Boolean])akka.http.server.Directive.SingleValueModifiers[Boolean]" class="delimiter">(</a><a href="#akka.http.server.directives.MiscDirectives._requestEntityEmpty.$anonfun.x$1" title="akka.http.server.RequestContext">_</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.request" title="=&gt; akka.http.model.HttpRequest">request</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.entity" title="=&gt; akka.http.model.RequestEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isKnownEmpty" title="()Boolean">isKnownEmpty</a><span class="delimiter">)</span>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: Boolean =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a><a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">(</a>if <span class="delimiter">(</span><a href="#akka.http.server.directives.MiscDirectives._requestEntityEmpty.$anonfun.x$2" title="Boolean">_</a><span class="delimiter">)</span> <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.pass" title="=&gt; akka.http.server.Directive0">pass</a> else <a href="../StandardRoute.scala.html#akka.http.server.StandardRoute.toDirective" title="(route: akka.http.server.StandardRoute)(implicit evidence$2: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">reject</a><span class="delimiter">)</span>

  private val <a title="akka.http.server.Directive0" id="akka.http.server.directives.MiscDirectives._requestEntityPresent">_requestEntityPresent</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.extract" title="(f: akka.http.server.RequestContext =&gt; Boolean)akka.http.server.Directive1[Boolean]">extract</a><a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[Boolean])akka.http.server.Directive.SingleValueModifiers[Boolean]" class="delimiter">(</a><a href="#akka.http.server.directives.MiscDirectives._requestEntityPresent.$anonfun.x$3" title="akka.http.server.RequestContext">_</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.request" title="=&gt; akka.http.model.HttpRequest">request</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.entity" title="=&gt; akka.http.model.RequestEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isKnownEmpty" title="()Boolean">isKnownEmpty</a><span class="delimiter">)</span>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: Boolean =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a><a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">(</a>if <span class="delimiter">(</span><a href="#akka.http.server.directives.MiscDirectives._requestEntityPresent.$anonfun.x$4" title="Boolean">_</a><span class="delimiter">)</span> <a href="../StandardRoute.scala.html#akka.http.server.StandardRoute.toDirective" title="(route: akka.http.server.StandardRoute)(implicit evidence$2: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">reject</a> else <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.pass" title="=&gt; akka.http.server.Directive0">pass</a><span class="delimiter">)</span>

  private val <a title="akka.http.server.Directive0" id="akka.http.server.directives.MiscDirectives._rejectEmptyResponse">_rejectEmptyResponse</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.mapRouteResult" title="(f: akka.http.server.RouteResult =&gt; akka.http.server.RouteResult)akka.http.server.Directive0">mapRouteResult</a> <a href="#akka.http.server.directives.MiscDirectives._rejectEmptyResponse.$anonfun.x0$1" title="akka.http.server.RouteResult" class="delimiter">{</a>
      case Complete<span class="delimiter">(</span><a title="akka.http.model.HttpResponse" id="akka.http.server.directives.MiscDirectives._rejectEmptyResponse.$anonfun.response">response</a><span class="delimiter">)</span> if <a href="#akka.http.server.directives.MiscDirectives._rejectEmptyResponse.$anonfun.response" title="akka.http.model.HttpResponse">response</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.entity" title="=&gt; akka.http.model.ResponseEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isKnownEmpty" title="()Boolean">isKnownEmpty</a> ⇒ <a href="../RouteResult.scala.html#akka.http.server.RouteResult;Rejected" title="(rejections: scala.collection.immutable.Seq[akka.http.server.Rejection])akka.http.server.RouteResult.Rejected">Rejected</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
      case <a title="akka.http.server.RouteResult" id="akka.http.server.directives.MiscDirectives._rejectEmptyResponse.$anonfun.x">x</a> ⇒ <a href="#akka.http.server.directives.MiscDirectives._rejectEmptyResponse.$anonfun.x" title="akka.http.server.RouteResult">x</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
