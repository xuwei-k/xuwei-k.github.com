<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/server/directives/RangeDirectives.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.server
package directives

import akka.http.model.<a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>._
import akka.http.model._
import akka.http.model.headers._
import akka.http.server.<a href="../RouteResult.scala.html#akka.http.server.RouteResult" title="akka.http.server.RouteResult.type">RouteResult</a>.Complete
import akka.http.util._
import akka.stream.scaladsl.Source

import scala.collection.immutable

trait <a title="trait RangeDirectives extends AnyRef" id="akka.http.server.directives;RangeDirectives">RangeDirectives</a> <span title="Unit" class="delimiter">{</span>
  import akka.http.server.directives.<a href="BasicDirectives.scala.html#akka.http.server.directives.BasicDirectives" title="akka.http.server.directives.BasicDirectives.type">BasicDirectives</a>._
  import akka.http.server.directives.<a href="RouteDirectives.scala.html#akka.http.server.directives.RouteDirectives" title="akka.http.server.directives.RouteDirectives.type">RouteDirectives</a>._

  <span class="comment">/**
   * Answers GET requests with an `Accept-Ranges: bytes` header and converts HttpResponses coming back from its inner
   * route into partial responses if the initial request contained a valid `Range` request header. The requested
   * byte-ranges may be coalesced.
   * This directive is transparent to non-GET requests
   * Rejects requests with unsatisfiable ranges `UnsatisfiableRangeRejection`.
   * Rejects requests with too many expected ranges.
   *
   * Note: if you want to combine this directive with `conditional(...)` you need to put
   * it on the *inside* of the `conditional(...)` directive, i.e. `conditional(...)` must be
   * on a higher level in your route structure in order to function correctly.
   *
   * @see https://tools.ietf.org/html/rfc7233
   */</span>
  def <a title="=&gt; akka.http.server.Directive0" id="akka.http.server.directives;RangeDirectives.withRangeSupport">withRangeSupport</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[akka.http.server.RequestContext])akka.http.server.Directive.SingleValueModifiers[akka.http.server.RequestContext]">extractRequestContext</a>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: akka.http.server.RequestContext =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">{</a> <a title="akka.http.server.RequestContext" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.ctx">ctx</a> ⇒
      import <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.flowMaterializer
      val <a title="akka.http.server.RoutingSettings" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.settings">settings</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.settings" title="=&gt; akka.http.server.RoutingSettings">settings</a>
      implicit val <a title="akka.event.LoggingAdapter" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.log">log</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.log" title="=&gt; akka.event.LoggingAdapter">log</a>
      import <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.settings" title="akka.http.server.RoutingSettings">settings</a>.<span class="delimiter">{</span> rangeCountLimit, rangeCoalescingThreshold <span class="delimiter">}</span>

      class <a title="class IndexRange extends AnyRef" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange">IndexRange</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange" class="delimiter">(</a>val <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start">start</a>: <span title="Long">Long</span>, val <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.end">end</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        def <a title="=&gt; Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length">length</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.end" title="=&gt; Long">end</a> <span title="(x: Long)Long">-</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a>
        def <a title="(entity: akka.http.model.UniversalEntity)akka.http.model.UniversalEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.apply">apply</a><span class="delimiter">(</span><a title="akka.http.model.UniversalEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.apply.entity">entity</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity" title="akka.http.model.UniversalEntity">UniversalEntity</a><span class="delimiter">)</span>: <a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity" title="akka.http.model.UniversalEntity">UniversalEntity</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.apply.entity" title="akka.http.model.UniversalEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity.transformDataBytes(f92dd4a96d)" title="(newContentLength: Long, transformer: akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString])akka.http.model.UniversalEntity">transformDataBytes</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a>, <a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils" title="akka.http.util.StreamUtils.type">StreamUtils</a>.<a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils.sliceBytesTransformer" title="(start: Long, length: Long)akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]">sliceBytesTransformer</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
        def <a title="(other: IndexRange)Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance">distance</a><span class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance.other">other</a>: <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">)</span> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedEnd" title="(other: IndexRange)Long">mergedEnd</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance.other" title="IndexRange">other</a><span class="delimiter">)</span> <span title="(x: Long)Long">-</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedStart" title="(other: IndexRange)Long">mergedStart</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance.other" title="IndexRange">other</a><span class="delimiter">)</span> <span title="(x: Long)Long">-</span> <span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a> <span title="(x: Long)Long">+</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance.other" title="IndexRange">other</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a><span class="delimiter">)</span>
        def <a title="(other: IndexRange)IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergeWith">mergeWith</a><span class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergeWith.other">other</a>: <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">)</span> = new <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedStart" title="(other: IndexRange)Long">mergedStart</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergeWith.other" title="IndexRange">other</a><span class="delimiter">)</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedEnd" title="(other: IndexRange)Long">mergedEnd</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergeWith.other" title="IndexRange">other</a><span class="delimiter">)</span><span class="delimiter">)</span>
        def <a title="(entityLength: Long)akka.http.model.ContentRange.Default" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.contentRange">contentRange</a><span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.contentRange.entityLength">entityLength</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="../../model/ContentRange.scala.html#akka.http.model.ContentRange.apply(4905cd9b25)" title="(first: Long, last: Long, instanceLength: Long)akka.http.model.ContentRange.Default">ContentRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.end" title="=&gt; Long">end</a> <span title="(x: Int)Long">-</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.contentRange.entityLength" title="Long">entityLength</a><span class="delimiter">)</span>
        private def <a title="(other: IndexRange)Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedStart">mergedStart</a><span class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedStart.other">other</a>: <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">)</span> = math.<span title="(x: Long, y: Long)Long">min</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedStart.other" title="IndexRange">other</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a><span class="delimiter">)</span>
        private def <a title="(other: IndexRange)Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedEnd">mergedEnd</a><span class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedEnd.other">other</a>: <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">)</span> = math.<span title="(x: Long, y: Long)Long">max</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.end" title="=&gt; Long">end</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergedEnd.other" title="IndexRange">other</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.end" title="=&gt; Long">end</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="(entityLength: Long)(range: akka.http.model.headers.ByteRange)IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange">indexRange</a><span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.entityLength">entityLength</a>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.http.model.headers.ByteRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.range">range</a>: <a href="../../model/headers/ByteRange.scala.html#akka.http.model.headers;ByteRange" title="akka.http.model.headers.ByteRange">ByteRange</a><span class="delimiter">)</span>: <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a> =
        <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.range" title="akka.http.model.headers.ByteRange">range</a> match <span class="delimiter">{</span>
          case ByteRange.Slice<span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.start">start</a>, <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.end">end</a><span class="delimiter">)</span>    ⇒ new <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.start" title="Long">start</a>, math.<span title="(x: Long, y: Long)Long">min</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.end" title="Long">end</a> <span title="(x: Int)Long">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.entityLength" title="Long">entityLength</a><span class="delimiter">)</span><span class="delimiter">)</span>
          case ByteRange.FromOffset<span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.first">first</a><span class="delimiter">)</span>    ⇒ new <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.first" title="Long">first</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.entityLength" title="Long">entityLength</a><span class="delimiter">)</span>
          case ByteRange.Suffix<span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.suffixLength">suffixLength</a><span class="delimiter">)</span> ⇒ new <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">(</span>math.<span title="(x: Long, y: Long)Long">max</span><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.entityLength" title="Long">entityLength</a> <span title="(x: Long)Long">-</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.suffixLength" title="Long">suffixLength</a><span class="delimiter">)</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange.entityLength" title="Long">entityLength</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="comment">// See comment of the `range-coalescing-threshold` setting in `reference.conf` for the rationale of this behavior.</span>
      def <a title="(iRanges: Seq[IndexRange])Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges">coalesceRanges</a><span class="delimiter">(</span><a title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.iRanges">iRanges</a>: <span title="Seq[IndexRange]">Seq</span><span class="delimiter">[</span>IndexRange<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[IndexRange]">Seq</span><span class="delimiter">[</span>IndexRange<span class="delimiter">]</span> =
        <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.iRanges" title="Seq[IndexRange]">iRanges</a>.<span title="(z: Seq[IndexRange])(op: (Seq[IndexRange], IndexRange) =&gt; Seq[IndexRange])Seq[IndexRange]">foldLeft</span><span class="delimiter">(</span><span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[IndexRange]" class="delimiter">[</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange" title="IndexRange">IndexRange</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.acc">acc</a>, <a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.iRange">iRange</a><span class="delimiter">)</span> ⇒
          val <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.mergeCandidates" title="(Seq[IndexRange], Seq[IndexRange])" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.x$2" title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.mergeCandidates">mergeCandidates</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.x$2" title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.otherCandidates">otherCandidates</a><span class="delimiter">)</span> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.acc" title="Seq[IndexRange]">acc</a>.<span title="(p: IndexRange =&gt; Boolean)(Seq[IndexRange], Seq[IndexRange])">partition</span><span title="(Seq[IndexRange], Seq[IndexRange]) @unchecked" class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.x$2.$anonfun.x$1" title="IndexRange">_</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.distance" title="(other: IndexRange)Long">distance</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.iRange" title="IndexRange">iRange</a><span class="delimiter">)</span> <span title="(x: Long)Boolean">&lt;=</span> <a href="../RoutingSettings.scala.html#akka.http.server;RoutingSettings.rangeCoalescingThreshold" title="=&gt; Long">rangeCoalescingThreshold</a><span class="delimiter">)</span>
          val <a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.merged">merged</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.mergeCandidates" title="Seq[IndexRange]">mergeCandidates</a>.<span title="(z: IndexRange)(op: (IndexRange, IndexRange) =&gt; IndexRange)IndexRange">foldLeft</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.iRange" title="IndexRange">iRange</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.merged.$anonfun.x$3" title="IndexRange">_</a> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.mergeWith" title="(other: IndexRange)IndexRange">mergeWith</a> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.merged.$anonfun.x$4" title="IndexRange">_</a><span class="delimiter">)</span>
          <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.otherCandidates" title="Seq[IndexRange]">otherCandidates</a> <span title="(elem: IndexRange)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[IndexRange],IndexRange,Seq[IndexRange]])Seq[IndexRange]">:+</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges.$anonfun.merged" title="IndexRange">merged</a>
        <span class="delimiter">}</span>

      def <a title="(ranges: Seq[akka.http.model.headers.ByteRange], entity: akka.http.model.UniversalEntity)akka.http.model.Multipart.ByteRanges" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges">multipartRanges</a><span class="delimiter">(</span><a title="Seq[akka.http.model.headers.ByteRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.ranges">ranges</a>: <span title="Seq[akka.http.model.headers.ByteRange]">Seq</span><span class="delimiter">[</span>ByteRange<span class="delimiter">]</span>, <a title="akka.http.model.UniversalEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.entity">entity</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity" title="akka.http.model.UniversalEntity">UniversalEntity</a><span class="delimiter">)</span>: Multipart.<a href="../../model/Multipart.scala.html#akka.http.model.Multipart;ByteRanges" title="akka.http.model.Multipart.ByteRanges">ByteRanges</a> = <span class="delimiter">{</span>
        val <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.length">length</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.entity" title="akka.http.model.UniversalEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity.contentLength" title="=&gt; Long">contentLength</a>
        val <a title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.iRanges">iRanges</a>: <span title="Seq[IndexRange]">Seq</span><span class="delimiter">[</span>IndexRange<span class="delimiter">]</span> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.ranges" title="Seq[akka.http.model.headers.ByteRange]">ranges</a>.<span title="(f: akka.http.model.headers.ByteRange =&gt; IndexRange)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[akka.http.model.headers.ByteRange],IndexRange,Seq[IndexRange]])Seq[IndexRange]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,IndexRange,Seq[IndexRange]]" class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange" title="(entityLength: Long)(range: akka.http.model.headers.ByteRange)IndexRange">indexRange</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.iRanges.$anonfun.range" title="akka.http.model.headers.ByteRange" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.length" title="Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">// It's only possible to run once over the input entity data stream because it's not known if the</span>
        <span class="comment">// source is reusable.</span>
        <span class="comment">// Therefore, ranges need to be sorted to prevent that some selected ranges already start to accumulate data</span>
        <span class="comment">// but cannot be sent out because another range is blocking the queue.</span>
        val <a title="Seq[IndexRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.coalescedRanges">coalescedRanges</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.coalesceRanges" title="(iRanges: Seq[IndexRange])Seq[IndexRange]">coalesceRanges</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.iRanges" title="Seq[IndexRange]">iRanges</a><span class="delimiter">)</span>.<span title="(f: IndexRange =&gt; Long)(implicit ord: scala.math.Ordering[Long])Seq[IndexRange]">sortBy</span><span title="scala.math.Ordering.Long.type" class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.coalescedRanges.$anonfun.x$5" title="IndexRange">_</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a><span class="delimiter">)</span>
        val <a title="Vector[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartTransformers">bodyPartTransformers</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.coalescedRanges" title="Seq[IndexRange]">coalescedRanges</a>.<span title="(f: IndexRange =&gt; akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[IndexRange],akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString],Seq[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]])Seq[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString],Seq[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]]" class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartTransformers.$anonfun.ir">ir</a> ⇒ <a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils" title="akka.http.util.StreamUtils.type">StreamUtils</a>.<a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils.sliceBytesTransformer" title="(start: Long, length: Long)akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]">sliceBytesTransformer</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartTransformers.$anonfun.ir" title="IndexRange">ir</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.start" title="=&gt; Long">start</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartTransformers.$anonfun.ir" title="IndexRange">ir</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]">toVector</span>
        val <a title="scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartByteStreams">bodyPartByteStreams</a> = <a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils" title="akka.http.util.StreamUtils.type">StreamUtils</a>.<a href="../../util/StreamUtils.scala.html#akka.http.util.StreamUtils.transformMultiple" title="(input: akka.stream.scaladsl.Source[akka.util.ByteString], transformers: scala.collection.immutable.Seq[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]])(implicit materializer: akka.stream.FlowMaterializer)scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]">transformMultiple</a><a href="../RequestContext.scala.html#akka.http.server;RequestContext.flowMaterializer" title="=&gt; akka.stream.FlowMaterializer" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.entity" title="akka.http.model.UniversalEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.dataBytes" title="=&gt; akka.stream.scaladsl.Source[akka.util.ByteString]">dataBytes</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartTransformers" title="Vector[akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]]">bodyPartTransformers</a><span class="delimiter">)</span>
        val <a title="Seq[akka.http.model.Multipart.ByteRanges.BodyPart]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts">bodyParts</a> = <span title="(x: (Seq[IndexRange], scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]))runtime.Tuple2Zipped.Ops[Seq[IndexRange],scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]]" class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.coalescedRanges" title="Seq[IndexRange]">coalescedRanges</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyPartByteStreams" title="scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]">bodyPartByteStreams</a><span class="delimiter">)</span>.<span title="(implicit w1: Seq[IndexRange] =&gt; scala.collection.TraversableLike[IndexRange,Seq[IndexRange]], implicit w2: scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]] =&gt; scala.collection.IterableLike[akka.stream.scaladsl.Source[akka.util.ByteString],scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]])scala.runtime.Tuple2Zipped[IndexRange,Seq[IndexRange],akka.stream.scaladsl.Source[akka.util.ByteString],scala.collection.immutable.Seq[akka.stream.scaladsl.Source[akka.util.ByteString]]]">zipped</span>.<span title="(f: (IndexRange, akka.stream.scaladsl.Source[akka.util.ByteString]) =&gt; akka.http.model.Multipart.ByteRanges.BodyPart)(implicit cbf: scala.collection.generic.CanBuildFrom[Seq[IndexRange],akka.http.model.Multipart.ByteRanges.BodyPart,Seq[akka.http.model.Multipart.ByteRanges.BodyPart]])Seq[akka.http.model.Multipart.ByteRanges.BodyPart]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,akka.http.model.Multipart.ByteRanges.BodyPart,Seq[akka.http.model.Multipart.ByteRanges.BodyPart]]" class="delimiter">{</span> <span class="delimiter">(</span><a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts.$anonfun.range">range</a>, <a title="akka.stream.scaladsl.Source[akka.util.ByteString]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts.$anonfun.bytes">bytes</a><span class="delimiter">)</span> ⇒
          <a href="../../model/Multipart.scala.html#akka.http.model.Multipart" title="akka.http.model.Multipart.type">Multipart</a>.<a href="../../model/Multipart.scala.html#akka.http.model.Multipart.ByteRanges" title="akka.http.model.Multipart.ByteRanges.type">ByteRanges</a>.<a href="../../model/Multipart.scala.html#akka.http.model.Multipart.ByteRanges.BodyPart.apply" title="(_contentRange: akka.http.model.ContentRange, _entity: akka.http.model.BodyPartEntity, _rangeUnit: akka.http.model.headers.RangeUnit, _additionalHeaders: scala.collection.immutable.Seq[akka.http.model.HttpHeader])akka.http.model.Multipart.ByteRanges.BodyPart">BodyPart</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts.$anonfun.range" title="IndexRange">range</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.contentRange" title="(entityLength: Long)akka.http.model.ContentRange.Default">contentRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.length" title="Long">length</a><span class="delimiter">)</span>, <a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity.apply(f8dab08092)" title="(contentType: akka.http.model.ContentType, contentLength: Long, data: akka.stream.scaladsl.Source[akka.util.ByteString])akka.http.model.UniversalEntity">HttpEntity</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.entity" title="akka.http.model.UniversalEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.contentType" title="()akka.http.model.ContentType">contentType</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts.$anonfun.range" title="IndexRange">range</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.length" title="=&gt; Long">length</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts.$anonfun.bytes" title="akka.stream.scaladsl.Source[akka.util.ByteString]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="../../model/Multipart.scala.html#akka.http.model.Multipart" title="akka.http.model.Multipart.type">Multipart</a>.<a href="../../model/Multipart.scala.html#akka.http.model.Multipart.ByteRanges.apply(2f1561bd80)" title="(_parts: akka.stream.scaladsl.Source[akka.http.model.Multipart.ByteRanges.BodyPart])akka.http.model.Multipart.ByteRanges">ByteRanges</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl.Source.apply(46ac5f8ce6)" title="(iterable: scala.collection.immutable.Iterable[akka.http.model.Multipart.ByteRanges.BodyPart])akka.stream.scaladsl.Source[akka.http.model.Multipart.ByteRanges.BodyPart]">Source</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges.bodyParts" title="Seq[akka.http.model.Multipart.ByteRanges.BodyPart]">bodyParts</a>.<span title="=&gt; Vector[akka.http.model.Multipart.ByteRanges.BodyPart]">toVector</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="(range: akka.http.model.headers.ByteRange, entity: akka.http.model.UniversalEntity, length: Long, headers: scala.collection.immutable.Seq[akka.http.model.HttpHeader])akka.http.model.HttpResponse" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse">rangeResponse</a><span class="delimiter">(</span><a title="akka.http.model.headers.ByteRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.range">range</a>: <a href="../../model/headers/ByteRange.scala.html#akka.http.model.headers;ByteRange" title="akka.http.model.headers.ByteRange">ByteRange</a>, <a title="akka.http.model.UniversalEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.entity">entity</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity" title="akka.http.model.UniversalEntity">UniversalEntity</a>, <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.length">length</a>: <span title="Long">Long</span>, <a title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.headers">headers</a>: immutable.<span title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]">Seq</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a title="IndexRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.aiRange">aiRange</a> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.indexRange" title="(entityLength: Long)(range: akka.http.model.headers.ByteRange)IndexRange">indexRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.length" title="Long">length</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.range" title="akka.http.model.headers.ByteRange">range</a><span class="delimiter">)</span>
        <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse" title="(status: akka.http.model.StatusCode, headers: scala.collection.immutable.Seq[akka.http.model.HttpHeader], entity: akka.http.model.ResponseEntity, protocol: akka.http.model.HttpProtocol)akka.http.model.HttpResponse">HttpResponse</a><span class="delimiter">(</span><a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.PartialContent" title="=&gt; akka.http.model.StatusCodes.Success">PartialContent</a>, <a href="../../model/headers/headers.scala.html#akka.http.model.headers.Content-Range.apply(094c41cb50)" title="(byteContentRange: akka.http.model.ByteContentRange)akka.http.model.headers.Content-Range">`Content-Range`</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.aiRange" title="IndexRange">aiRange</a>.<a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.contentRange" title="(entityLength: Long)akka.http.model.ContentRange.Default">contentRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.length" title="Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.x$6" title="(elem: akka.http.model.HttpHeader)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[akka.http.model.HttpHeader],akka.http.model.HttpHeader,scala.collection.immutable.Seq[akka.http.model.HttpHeader]])scala.collection.immutable.Seq[akka.http.model.HttpHeader]">+:</a> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.headers" title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun;IndexRange.apply" title="(entity: akka.http.model.UniversalEntity)akka.http.model.UniversalEntity">aiRange</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse.entity" title="akka.http.model.UniversalEntity">entity</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="(entityLength: Long)(range: akka.http.model.headers.ByteRange)Boolean" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable">satisfiable</a><span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.entityLength">entityLength</a>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.http.model.headers.ByteRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.range">range</a>: <a href="../../model/headers/ByteRange.scala.html#akka.http.model.headers;ByteRange" title="akka.http.model.headers.ByteRange">ByteRange</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
        <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.range" title="akka.http.model.headers.ByteRange">range</a> match <span class="delimiter">{</span>
          case ByteRange.Slice<span class="delimiter">(</span><span title="Long">firstPos</span>, _<span class="delimiter">)</span>   ⇒ <span title="Long">firstPos</span> <span title="(x: Long)Boolean">&lt;</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.entityLength" title="Long">entityLength</a>
          case ByteRange.FromOffset<span class="delimiter">(</span><span title="Long">firstPos</span><span class="delimiter">)</span> ⇒ <span title="Long">firstPos</span> <span title="(x: Long)Boolean">&lt;</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.entityLength" title="Long">entityLength</a>
          case ByteRange.Suffix<span class="delimiter">(</span><a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.length">length</a><span class="delimiter">)</span>       ⇒ <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable.length" title="Long">length</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>
        <span class="delimiter">}</span>
      def <a title="(entity: akka.http.model.HttpEntity)Option[akka.http.model.UniversalEntity]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal">universal</a><span class="delimiter">(</span><a title="akka.http.model.HttpEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal.entity">entity</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity" title="akka.http.model.HttpEntity">HttpEntity</a><span class="delimiter">)</span>: <span title="Option[akka.http.model.UniversalEntity]">Option</span><span class="delimiter">[</span>UniversalEntity<span class="delimiter">]</span> = <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal.entity" title="akka.http.model.HttpEntity">entity</a> match <span class="delimiter">{</span>
        case <a title="akka.http.model.UniversalEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal.u">u</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity" title="akka.http.model.UniversalEntity">UniversalEntity</a> ⇒ <span title="(x: akka.http.model.UniversalEntity)Some[akka.http.model.UniversalEntity]">Some</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal.u" title="akka.http.model.UniversalEntity">u</a><span class="delimiter">)</span>
        case _                  ⇒ <span title="None.type">None</span>
      <span class="delimiter">}</span>

      def <a title="(ranges: Seq[akka.http.model.headers.ByteRange])akka.http.server.Directive0" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges">applyRanges</a><span class="delimiter">(</span><a title="Seq[akka.http.model.headers.ByteRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.ranges">ranges</a>: <span title="Seq[akka.http.model.headers.ByteRange]">Seq</span><span class="delimiter">[</span>ByteRange<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
        <a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[akka.http.server.RequestContext])akka.http.server.Directive.SingleValueModifiers[akka.http.server.RequestContext]">extractRequestContext</a>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: akka.http.server.RequestContext =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a> <a href="../util/Tuple.scala.html#akka.http.server.util.Tuple.forUnit" title="akka.http.server.util.Tuple[Unit]" class="delimiter">{</a> <a title="akka.http.server.RequestContext" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx">ctx</a> ⇒
          import <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.executionContext
          <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.mapRouteResultWithPF" title="(f: PartialFunction[akka.http.server.RouteResult,scala.concurrent.Future[akka.http.server.RouteResult]])akka.http.server.Directive0">mapRouteResultWithPF</a> <a title="&lt;$anon: akka.http.server.RouteResult =&gt; scala.concurrent.Future[akka.http.server.RouteResult]&gt; extends scala.runtime.AbstractPartialFunction[akka.http.server.RouteResult,scala.concurrent.Future[akka.http.server.RouteResult]] with Serializable" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
            case Complete<span class="delimiter">(</span>HttpResponse<span class="delimiter">(</span><a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.OK" title="=&gt; akka.http.model.StatusCodes.Success">OK</a>, <a title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.headers">headers</a>, <a title="akka.http.model.ResponseEntity" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.entity">entity</a>, <a title="akka.http.model.HttpProtocol" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.protocol">protocol</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
              <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.universal" title="(entity: akka.http.model.HttpEntity)Option[akka.http.model.UniversalEntity]">universal</a><span class="delimiter">(</span><span title="akka.http.model.ResponseEntity">entity</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
                case Some<span class="delimiter">(</span><span title="akka.http.model.UniversalEntity">entity</span><span class="delimiter">)</span> ⇒
                  val <a title="Long" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.length">length</a> = <span title="akka.http.model.UniversalEntity">entity</span>.<a href="../../model/HttpEntity.scala.html#akka.http.model;UniversalEntity.contentLength" title="=&gt; Long">contentLength</a>
                  <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.ranges" title="Seq[akka.http.model.headers.ByteRange]">ranges</a>.<span title="(p: akka.http.model.headers.ByteRange =&gt; Boolean)Seq[akka.http.model.headers.ByteRange]">filter</span><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.satisfiable" title="(entityLength: Long)(range: akka.http.model.headers.ByteRange)Boolean">satisfiable</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.$anonfun.range" title="akka.http.model.headers.ByteRange" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.length" title="Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
                    case <span title="scala.collection.immutable.Nil.type">Nil</span>                   ⇒ <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.reject" title="(rejections: akka.http.server.Rejection*)scala.concurrent.Future[akka.http.server.RouteResult]">reject</a><span class="delimiter">(</span><a href="../Rejection.scala.html#akka.http.server;UnsatisfiableRangeRejection" title="(unsatisfiableRanges: Seq[akka.http.model.headers.ByteRange], actualEntityLength: Long)akka.http.server.UnsatisfiableRangeRejection">UnsatisfiableRangeRejection</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.ranges" title="Seq[akka.http.model.headers.ByteRange]">ranges</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.length" title="Long">length</a><span class="delimiter">)</span><span class="delimiter">)</span>
                    case <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.<unapply-selector>" title="(x: Seq[akka.http.model.headers.ByteRange])Some[Seq[akka.http.model.headers.ByteRange]]">Seq</a><span class="delimiter">(</span><a title="akka.http.model.headers.ByteRange" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.satisfiableRange">satisfiableRange</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.complete" title="(obj: akka.http.marshalling.ToResponseMarshallable)scala.concurrent.Future[akka.http.server.RouteResult]">complete</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeResponse" title="(range: akka.http.model.headers.ByteRange, entity: akka.http.model.UniversalEntity, length: Long, headers: scala.collection.immutable.Seq[akka.http.model.HttpHeader])akka.http.model.HttpResponse">rangeResponse</a><a href="../../marshalling/ToResponseMarshallable.scala.html#akka.http.marshalling.ToResponseMarshallable.apply" title="(_value: akka.http.model.HttpResponse)(implicit _marshaller: akka.http.marshalling.ToResponseMarshaller[akka.http.model.HttpResponse])akka.http.marshalling.ToResponseMarshallable" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.satisfiableRange" title="akka.http.model.headers.ByteRange">satisfiableRange</a>, <span title="akka.http.model.UniversalEntity">entity</span>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.length" title="Long">length</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.headers" title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a><span class="delimiter">)</span><span class="delimiter">)</span>
                    case <a title="Seq[akka.http.model.headers.ByteRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.satisfiableRanges">satisfiableRanges</a> ⇒
                      <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.complete" title="(obj: akka.http.marshalling.ToResponseMarshallable)scala.concurrent.Future[akka.http.server.RouteResult]">complete</a><a href="../../marshalling/ToResponseMarshallable.scala.html#akka.http.marshalling.ToResponseMarshallable.apply" title="(_value: (akka.http.model.StatusCodes.Success, scala.collection.immutable.Seq[akka.http.model.HttpHeader], akka.http.model.Multipart.ByteRanges))(implicit _marshaller: akka.http.marshalling.ToResponseMarshaller[(akka.http.model.StatusCodes.Success, scala.collection.immutable.Seq[akka.http.model.HttpHeader], akka.http.model.Multipart.ByteRanges)])akka.http.marshalling.ToResponseMarshallable" class="delimiter">(</a><a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.PartialContent" title="=&gt; akka.http.model.StatusCodes.Success">PartialContent</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.isDefinedAt.headers" title="scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.multipartRanges" title="(ranges: Seq[akka.http.model.headers.ByteRange], entity: akka.http.model.UniversalEntity)akka.http.model.Multipart.ByteRanges">multipartRanges</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun;$anonfun.applyOrElse.satisfiableRanges" title="Seq[akka.http.model.headers.ByteRange]">satisfiableRanges</a>, <span title="akka.http.model.UniversalEntity">entity</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                case <span title="None.type">None</span> ⇒
                  <span class="comment">// Ranges not supported for Chunked or CloseDelimited responses</span>
                  <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.$anonfun.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.reject" title="(rejections: akka.http.server.Rejection*)scala.concurrent.Future[akka.http.server.RouteResult]">reject</a><span class="delimiter">(</span><a href="../Rejection.scala.html#akka.http.server;UnsatisfiableRangeRejection" title="(unsatisfiableRanges: Seq[akka.http.model.headers.ByteRange], actualEntityLength: Long)akka.http.server.UnsatisfiableRangeRejection">UnsatisfiableRangeRejection</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges.ranges" title="Seq[akka.http.model.headers.ByteRange]">ranges</a>, -<span title="Long(-1L)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// FIXME: provide better error</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      def <a title="(ctx: akka.http.server.RequestContext)Option[akka.http.model.headers.Range]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeHeaderOfGetRequests">rangeHeaderOfGetRequests</a><span class="delimiter">(</span><a title="akka.http.server.RequestContext" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeHeaderOfGetRequests.ctx">ctx</a>: <a href="../RequestContext.scala.html#akka.http.server;RequestContext" title="akka.http.server.RequestContext">RequestContext</a><span class="delimiter">)</span>: <span title="Option[akka.http.model.headers.Range]">Option</span><span class="delimiter">[</span>Range<span class="delimiter">]</span> =
        if <span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeHeaderOfGetRequests.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.request" title="=&gt; akka.http.model.HttpRequest">request</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.method" title="=&gt; akka.http.model.HttpMethod">method</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.GET" title="=&gt; akka.http.model.HttpMethod">GET</a><span class="delimiter">)</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeHeaderOfGetRequests.ctx" title="akka.http.server.RequestContext">ctx</a>.<a href="../RequestContext.scala.html#akka.http.server;RequestContext.request" title="=&gt; akka.http.model.HttpRequest">request</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpMessage.header" title="[T &lt;: akka.http.model.japi.HttpHeader](implicit evidence$1: scala.reflect.ClassTag[T])Option[T]">header</a><span title="(implicit evidence$1: scala.reflect.ClassTag[akka.http.model.headers.Range])Option[akka.http.model.headers.Range]" class="delimiter">[</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers;Range" title="akka.http.model.headers.Range">Range</a><span class="delimiter">]</span> else <span title="None.type">None</span>

      <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.extract" title="(f: akka.http.server.RequestContext =&gt; Option[akka.http.model.headers.Range])akka.http.server.Directive1[Option[akka.http.model.headers.Range]]">extract</a><a href="../Directive.scala.html#akka.http.server.Directive.SingleValueModifiers" title="(underlying: akka.http.server.Directive1[Option[akka.http.model.headers.Range]])akka.http.server.Directive.SingleValueModifiers[Option[akka.http.model.headers.Range]]" class="delimiter">(</a><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.rangeHeaderOfGetRequests" title="(ctx: akka.http.server.RequestContext)Option[akka.http.model.headers.Range]">rangeHeaderOfGetRequests</a><span class="delimiter">)</span>.<a href="../Directive.scala.html#akka.http.server.Directive;SingleValueModifiers.flatMap" title="(f: Option[akka.http.model.headers.Range] =&gt; akka.http.server.Directive[Unit])(implicit evidence$5: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]">flatMap</a> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.$anonfun.x0$1" title="akka.http.server.Directive[Unit]" class="delimiter">{</a>
        case Some<span class="delimiter">(</span>Range<span class="delimiter">(</span><a href="../../model/headers/RangeUnit.scala.html#akka.http.model.headers.RangeUnits" title="akka.http.model.headers.RangeUnits.type">RangeUnits</a>.<a href="../../model/headers/RangeUnit.scala.html#akka.http.model.headers.RangeUnits.Bytes" title="akka.http.model.headers.RangeUnits.Bytes.type">Bytes</a>, <a title="scala.collection.immutable.Seq[akka.http.model.headers.ByteRange]" id="akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.$anonfun.ranges">ranges</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          if <span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.$anonfun.ranges" title="scala.collection.immutable.Seq[akka.http.model.headers.ByteRange]">ranges</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;=</span> <a href="../RoutingSettings.scala.html#akka.http.server;RoutingSettings.rangeCountLimit" title="=&gt; Int">rangeCountLimit</a><span class="delimiter">)</span> <a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.applyRanges" title="(ranges: Seq[akka.http.model.headers.ByteRange])akka.http.server.Directive0">applyRanges</a><span class="delimiter">(</span><a href="#akka.http.server.directives;RangeDirectives.withRangeSupport.$anonfun.$anonfun.ranges" title="scala.collection.immutable.Seq[akka.http.model.headers.ByteRange]">ranges</a><span class="delimiter">)</span> <a href="../Directive.scala.html#akka.http.server;Directive.&" title="(magnet: akka.http.server.ConjunctionMagnet[Unit])magnet.Out">&amp;</a> <a href="#akka.http.server.directives.RangeDirectives" title="akka.http.server.directives.RangeDirectives.type">RangeDirectives</a>.<a href="../Directive.scala.html#akka.http.server.ConjunctionMagnet.fromDirective" title="(other: akka.http.server.Directive[Unit])(implicit join: akka.http.server.util.TupleOps.Join[Unit,Unit])akka.http.server.ConjunctionMagnet[Unit]{type Out = akka.http.server.Directive[join.Out]}">respondWithAcceptByteRangesHeader</a>
          else <a href="RouteDirectives.scala.html#akka.http.server.directives;RouteDirectives.reject(6cf95b673e)" title="(rejections: akka.http.server.Rejection*)akka.http.server.StandardRoute">reject</a><a href="../StandardRoute.scala.html#akka.http.server.StandardRoute.toDirective" title="(route: akka.http.server.StandardRoute)(implicit evidence$2: akka.http.server.util.Tuple[Unit])akka.http.server.Directive[Unit]" class="delimiter">(</a><a href="../Rejection.scala.html#akka.http.server;TooManyRangesRejection" title="(maxRanges: Int)akka.http.server.TooManyRangesRejection">TooManyRangesRejection</a><span class="delimiter">(</span><a href="../RoutingSettings.scala.html#akka.http.server;RoutingSettings.rangeCountLimit" title="=&gt; Int">rangeCountLimit</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case _ ⇒ <a href="MethodDirectives.scala.html#akka.http.server.directives.MethodDirectives" title="akka.http.server.directives.MethodDirectives.type">MethodDirectives</a>.<a href="MethodDirectives.scala.html#akka.http.server.directives;MethodDirectives.get" title="=&gt; akka.http.server.Directive0">get</a> <a href="../Directive.scala.html#akka.http.server;Directive.&" title="(magnet: akka.http.server.ConjunctionMagnet[Unit])magnet.Out">&amp;</a> <a href="#akka.http.server.directives.RangeDirectives" title="akka.http.server.directives.RangeDirectives.type">RangeDirectives</a>.<a href="../Directive.scala.html#akka.http.server.ConjunctionMagnet.fromDirective" title="(other: akka.http.server.Directive[Unit])(implicit join: akka.http.server.util.TupleOps.Join[Unit,Unit])akka.http.server.ConjunctionMagnet[Unit]{type Out = akka.http.server.Directive[join.Out]}">respondWithAcceptByteRangesHeader</a> <a href="../Directive.scala.html#akka.http.server;Directive.|" title="(that: akka.http.server.Directive[Unit])akka.http.server.Directive[Unit]">|</a> <a href="BasicDirectives.scala.html#akka.http.server.directives;BasicDirectives.pass" title="=&gt; akka.http.server.Directive0">pass</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="akka.http.server.directives.RangeDirectives.type" id="akka.http.server.directives.RangeDirectives">RangeDirectives</a> extends <a href="#akka.http.server.directives;RangeDirectives" title="akka.http.server.directives.RangeDirectives">RangeDirectives</a> <span class="delimiter">{</span>
  private val <a title="akka.http.server.Directive0" id="akka.http.server.directives.RangeDirectives.respondWithAcceptByteRangesHeader">respondWithAcceptByteRangesHeader</a>: <a href="../Directive.scala.html#akka.http.server;Directive" title="akka.http.server.Directive0">Directive0</a> =
    <a href="RespondWithDirectives.scala.html#akka.http.server.directives.RespondWithDirectives" title="akka.http.server.directives.RespondWithDirectives.type">RespondWithDirectives</a>.<a href="RespondWithDirectives.scala.html#akka.http.server.directives;RespondWithDirectives.respondWithHeader" title="(responseHeader: akka.http.model.HttpHeader)akka.http.server.Directive0">respondWithHeader</a><span class="delimiter">(</span><a href="../../model/headers/headers.scala.html#akka.http.model.headers.Accept-Ranges.apply(184b34a77a)" title="(rangeUnits: akka.http.model.headers.RangeUnit*)akka.http.model.headers.Accept-Ranges">`Accept-Ranges`</a><span class="delimiter">(</span><a href="../../model/headers/RangeUnit.scala.html#akka.http.model.headers.RangeUnits" title="akka.http.model.headers.RangeUnits.type">RangeUnits</a>.<a href="../../model/headers/RangeUnit.scala.html#akka.http.model.headers.RangeUnits.Bytes" title="akka.http.model.headers.RangeUnits.Bytes.type">Bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
