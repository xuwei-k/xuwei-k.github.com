<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/engine/client/HttpClient.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.engine.client

import java.net.InetSocketAddress
import scala.collection.immutable.Queue
import akka.util.ByteString
import akka.event.LoggingAdapter
import akka.stream.FlattenStrategy
import akka.stream.scaladsl._
import akka.stream.scaladsl.<a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes" title="akka.stream.scaladsl.OperationAttributes.type">OperationAttributes</a>._
import akka.http.model.<span class="delimiter">{</span> HttpMethod, HttpRequest, HttpResponse <span class="delimiter">}</span>
import akka.http.engine.rendering.<span class="delimiter">{</span> RequestRenderingContext, HttpRequestRendererFactory <span class="delimiter">}</span>
import akka.http.engine.parsing.<span class="delimiter">{</span> HttpHeaderParser, HttpResponseParser <span class="delimiter">}</span>
import akka.http.engine.parsing.<a href="../parsing/ParserOutput.scala.html#akka.http.engine.parsing.ParserOutput" title="akka.http.engine.parsing.ParserOutput.type">ParserOutput</a>._
import akka.http.util._

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> object <a title="akka.http.engine.client.HttpClient.type" id="akka.http.engine.client.HttpClient">HttpClient</a> <a href="#akka.http.engine.client.HttpClient" title="akka.http.engine.client.HttpClient.type" class="delimiter">{</a>

  def <a title="(transport: akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString], remoteAddress: java.net.InetSocketAddress, settings: akka.http.engine.client.ClientConnectionSettings, log: akka.event.LoggingAdapter)akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpResponse]" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow">transportToConnectionClientFlow</a><span class="delimiter">(</span><a title="akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.transport">transport</a>: <a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow" title="akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]">Flow</a><span class="delimiter">[</span>ByteString, ByteString<span class="delimiter">]</span>,
                                      <a title="java.net.InetSocketAddress" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.remoteAddress">remoteAddress</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span>,
                                      <a title="akka.http.engine.client.ClientConnectionSettings" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.settings">settings</a>: <a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings" title="akka.http.engine.client.ClientConnectionSettings">ClientConnectionSettings</a>,
                                      <a title="akka.event.LoggingAdapter" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.log">log</a>: <span title="akka.event.LoggingAdapter">LoggingAdapter</span><span class="delimiter">)</span>: <a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow" title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpResponse]">Flow</a><span class="delimiter">[</span>HttpRequest, HttpResponse<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.settings" title="akka.http.engine.client.ClientConnectionSettings">settings</a>._

    <span class="comment">// the initial header parser we initially use for every connection,</span>
    <span class="comment">// will not be mutated, all &quot;shared copy&quot; parsers copy on first-write into the header cache</span>
    val <a title="akka.http.engine.parsing.HttpResponseParser" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.rootParser">rootParser</a> = new <a href="../parsing/HttpResponseParser.scala.html#akka.http.engine.parsing;HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser">HttpResponseParser</a><span class="delimiter">(</span>
      <a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings.parserSettings" title="=&gt; akka.http.engine.parsing.ParserSettings">parserSettings</a>,
      <a href="../parsing/HttpHeaderParser.scala.html#akka.http.engine.parsing.HttpHeaderParser.apply" title="(settings: akka.http.engine.parsing.HttpHeaderParser.Settings)(warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a><span class="delimiter">(</span><a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings.parserSettings" title="=&gt; akka.http.engine.parsing.ParserSettings">parserSettings</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="akka.http.model.ErrorInfo" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.rootParser.$anonfun.errorInfo">errorInfo</a> ⇒
        if <span class="delimiter">(</span><a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings.parserSettings" title="=&gt; akka.http.engine.parsing.ParserSettings">parserSettings</a>.<a href="../parsing/ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.illegalHeaderWarnings" title="=&gt; Boolean">illegalHeaderWarnings</a><span class="delimiter">)</span> <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.log" title="akka.event.LoggingAdapter">log</a>.<span title="(message: String)Unit">warning</span><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.rootParser.$anonfun.errorInfo" title="akka.http.model.ErrorInfo">errorInfo</a>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.withSummaryPrepended" title="(prefix: String)akka.http.model.ErrorInfo">withSummaryPrepended</a><span class="delimiter">(</span><span title="String(&quot;Illegal response header&quot;)" class="string">&quot;Illegal response header&quot;</span><span class="delimiter">)</span>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.formatPretty" title="=&gt; String">formatPretty</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    val <a title="akka.http.engine.rendering.HttpRequestRendererFactory" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.requestRendererFactory">requestRendererFactory</a> = new <a href="../rendering/HttpRequestRendererFactory.scala.html#akka.http.engine.rendering;HttpRequestRendererFactory" title="akka.http.engine.rendering.HttpRequestRendererFactory">HttpRequestRendererFactory</a><span class="delimiter">(</span><a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings.userAgentHeader" title="=&gt; Option[akka.http.model.headers.User-Agent]">userAgentHeader</a>, <a href="ClientConnectionSettings.scala.html#akka.http.engine.client;ClientConnectionSettings.requestHeaderSizeHint" title="=&gt; Int">requestHeaderSizeHint</a>, <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.log" title="akka.event.LoggingAdapter">log</a><span class="delimiter">)</span>
    val <a title="akka.http.engine.client.HttpClient.RequestMethodByPass" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow.requestMethodByPass">requestMethodByPass</a> = new <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass" title="akka.http.engine.client.HttpClient.RequestMethodByPass">RequestMethodByPass</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.remoteAddress" title="java.net.InetSocketAddress">remoteAddress</a><span class="delimiter">)</span>

    <a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl.Flow.apply(25a994e6fb)" title="[T]=&gt; akka.stream.scaladsl.Flow[T,T]">Flow</a><span title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpRequest]" class="delimiter">[</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest" title="akka.http.model.HttpRequest">HttpRequest</a><span class="delimiter">]</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.map" title="(f: akka.http.model.HttpRequest =&gt; akka.http.engine.rendering.RequestRenderingContext)akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.model.HttpRequest]#Repr[akka.http.engine.rendering.RequestRenderingContext]">map</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.requestMethodByPass" title="akka.http.engine.client.HttpClient.RequestMethodByPass">requestMethodByPass</a><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow.section" title="(attributes: akka.stream.scaladsl.OperationAttributes)(section: akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.engine.rendering.RequestRenderingContext] =&gt; akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.stream.scaladsl.Source[akka.util.ByteString]])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.stream.scaladsl.Source[akka.util.ByteString]]">section</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes.name" title="(name: String)akka.stream.scaladsl.OperationAttributes">name</a><span class="delimiter">(</span><span title="String(&quot;renderer&quot;)" class="string">&quot;renderer&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.$anonfun.x$1" title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.engine.rendering.RequestRenderingContext]">_</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.transform" title="(mkStage: () =&gt; akka.stream.stage.Stage[akka.http.engine.rendering.RequestRenderingContext,akka.stream.scaladsl.Source[akka.util.ByteString]])x$1.Repr[akka.stream.scaladsl.Source[akka.util.ByteString]]">transform</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.requestRendererFactory" title="akka.http.engine.rendering.HttpRequestRendererFactory">requestRendererFactory</a>.<a href="../rendering/HttpRequestRendererFactory.scala.html#akka.http.engine.rendering;HttpRequestRendererFactory.newRenderer" title="=&gt; requestRendererFactory.HttpRequestRenderer">newRenderer</a><span class="delimiter">)</span><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.flatten" title="(strategy: akka.stream.FlattenStrategy[akka.stream.scaladsl.Source[akka.util.ByteString],akka.util.ByteString])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.stream.scaladsl.Source[akka.util.ByteString]]#Repr[akka.util.ByteString]">flatten</a><span class="delimiter">(</span><a href="../../../stream/FlattenStrategy.scala.html#akka.stream.FlattenStrategy" title="akka.stream.FlattenStrategy.type">FlattenStrategy</a>.<a href="../../../stream/FlattenStrategy.scala.html#akka.stream.FlattenStrategy.concat" title="akka.stream.FlattenStrategy[akka.stream.scaladsl.Source[akka.util.ByteString],akka.util.ByteString]">concat</a><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow.section" title="(attributes: akka.stream.scaladsl.OperationAttributes)(section: akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString] =&gt; akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString]">section</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes.name" title="(name: String)akka.stream.scaladsl.OperationAttributes">name</a><span class="delimiter">(</span><span title="String(&quot;errorLogger&quot;)" class="string">&quot;errorLogger&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.$anonfun.x$2" title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString]">_</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.transform" title="(mkStage: () =&gt; akka.stream.stage.Stage[akka.util.ByteString,akka.util.ByteString])x$2.Repr[akka.util.ByteString]">transform</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="../../util/package.scala.html#akka.http.util.package.errorLogger" title="(log: akka.event.LoggingAdapter, msg: String)akka.stream.stage.PushStage[akka.util.ByteString,akka.util.ByteString]">errorLogger</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.log" title="akka.event.LoggingAdapter">log</a>, <span title="String(&quot;Outgoing request stream error&quot;)" class="string">&quot;Outgoing request stream error&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow.via" title="(flow: akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString]">via</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.transport" title="akka.stream.scaladsl.Flow[akka.util.ByteString,akka.util.ByteString]">transport</a><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;Flow.section" title="(attributes: akka.stream.scaladsl.OperationAttributes)(section: akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString] =&gt; akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.engine.parsing.ParserOutput.ResponseOutput])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.engine.parsing.ParserOutput.ResponseOutput]">section</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes.name" title="(name: String)akka.stream.scaladsl.OperationAttributes">name</a><span class="delimiter">(</span><span title="String(&quot;rootParser&quot;)" class="string">&quot;rootParser&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.$anonfun.x$3" title="akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.util.ByteString]">_</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.transform" title="(mkStage: () =&gt; akka.stream.stage.Stage[akka.util.ByteString,akka.http.engine.parsing.ParserOutput.ResponseOutput])x$3.Repr[akka.http.engine.parsing.ParserOutput.ResponseOutput]">transform</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒
        <span class="comment">// each connection uses a single (private) response parser instance for all its responses</span>
        <span class="comment">// which builds a cache of all header instances seen on that connection</span>
        <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.rootParser" title="akka.http.engine.parsing.HttpResponseParser">rootParser</a>.<a href="../parsing/HttpResponseParser.scala.html#akka.http.engine.parsing;HttpResponseParser.createShallowCopy" title="(dequeueRequestMethodForNextResponse: () =&gt; akka.http.model.HttpMethod)akka.http.engine.parsing.HttpResponseParser">createShallowCopy</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.requestMethodByPass" title="akka.http.engine.client.HttpClient.RequestMethodByPass">requestMethodByPass</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.splitWhen" title="(p: akka.http.engine.parsing.ParserOutput.ResponseOutput =&gt; Boolean)akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.http.engine.parsing.ParserOutput.ResponseOutput]#Repr[akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]]">splitWhen</a><a href="../../util/package.scala.html#akka.http.util.package.FlowWithHeadAndTail(5e2dd08046)" title="(underlying: akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]])akka.http.util.FlowWithHeadAndTail[akka.http.model.HttpRequest,akka.http.engine.parsing.ParserOutput.ResponseOutput]" class="delimiter">(</a><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow.$anonfun.x$4" title="akka.http.engine.parsing.ParserOutput.ResponseOutput">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../parsing/ParserOutput.scala.html#akka.http.engine.parsing.ParserOutput;MessageStart" title="akka.http.engine.parsing.ParserOutput.MessageStart">MessageStart</a><span class="delimiter">]</span><span class="delimiter">)</span>
      .<a href="../../util/package.scala.html#akka.http.util.package;FlowWithHeadAndTail.headAndTail" title="=&gt; akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,(akka.http.engine.parsing.ParserOutput.ResponseOutput, akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput])]">headAndTail</a>
      .<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.collect" title="(pf: PartialFunction[(akka.http.engine.parsing.ParserOutput.ResponseOutput, akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]),akka.http.model.HttpResponse])akka.stream.scaladsl.Flow[akka.http.model.HttpRequest,(akka.http.engine.parsing.ParserOutput.ResponseOutput, akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput])]#Repr[akka.http.model.HttpResponse]">collect</a> <a title="&lt;$anon: ((akka.http.engine.parsing.ParserOutput.ResponseOutput, akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput])) =&gt; akka.http.model.HttpResponse&gt; extends scala.runtime.AbstractPartialFunction[(akka.http.engine.parsing.ParserOutput.ResponseOutput, akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]),akka.http.model.HttpResponse] with Serializable" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        case <span class="delimiter">(</span>ResponseStart<span class="delimiter">(</span><a title="akka.http.model.StatusCode" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.statusCode">statusCode</a>, <a title="akka.http.model.HttpProtocol" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.protocol">protocol</a>, <a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.headers">headers</a>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.createEntity">createEntity</a>, _<span class="delimiter">)</span>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]" id="akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.entityParts">entityParts</a><span class="delimiter">)</span> ⇒
          <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse" title="(status: akka.http.model.StatusCode, headers: scala.collection.immutable.Seq[akka.http.model.HttpHeader], entity: akka.http.model.ResponseEntity, protocol: akka.http.model.HttpProtocol)akka.http.model.HttpResponse">HttpResponse</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.statusCode" title="akka.http.model.StatusCode">statusCode</a>, <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.createEntity" title="(v1: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput])akka.http.model.ResponseEntity">createEntity</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.entityParts" title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]">entityParts</a><span class="delimiter">)</span>, <a href="#akka.http.engine.client.HttpClient.transportToConnectionClientFlow;$anonfun.isDefinedAt.protocol" title="akka.http.model.HttpProtocol">protocol</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// FIXME: refactor to a pure-stream design that allows us to get rid of this ad-hoc queue here</span>
  class <a title="class RequestMethodByPass extends AnyRef with akka.http.model.HttpRequest =&gt; akka.http.engine.rendering.RequestRenderingContext with () =&gt; akka.http.model.HttpMethod" id="akka.http.engine.client.HttpClient;RequestMethodByPass">RequestMethodByPass</a><a href="#akka.http.engine.client.HttpClient;RequestMethodByPass" title="akka.http.engine.client.HttpClient.RequestMethodByPass" class="delimiter">(</a><a title="java.net.InetSocketAddress" id="akka.http.engine.client.HttpClient;RequestMethodByPass.serverAddress">serverAddress</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">)</span>
    extends <span class="delimiter">(</span>HttpRequest ⇒ RequestRenderingContext<span class="delimiter">)</span> with <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ HttpMethod<span class="delimiter">)</span> <span class="delimiter">{</span>
    private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]" id="akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods">requestMethods</a> = <span title="scala.collection.immutable.Queue.type">Queue</span>.<span title="[A]=&gt; scala.collection.immutable.Queue[A]">empty</span><span title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]" class="delimiter">[</span><a href="../../model/HttpMethod.scala.html#akka.http.model;HttpMethod" title="akka.http.model.HttpMethod">HttpMethod</a><span class="delimiter">]</span>
    def <a title="(request: akka.http.model.HttpRequest)akka.http.engine.rendering.RequestRenderingContext" id="akka.http.engine.client.HttpClient;RequestMethodByPass.apply(01176f1b96)">apply</a><span class="delimiter">(</span><a title="akka.http.model.HttpRequest" id="akka.http.engine.client.HttpClient;RequestMethodByPass.apply(01176f1b96).request">request</a>: <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest" title="akka.http.model.HttpRequest">HttpRequest</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a> = <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a>.<span title="(elem: akka.http.model.HttpMethod)scala.collection.immutable.Queue[akka.http.model.HttpMethod]">enqueue</span><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.apply(01176f1b96).request" title="akka.http.model.HttpRequest">request</a>.<a href="../../model/HttpMessage.scala.html#akka.http.model;HttpRequest.method" title="=&gt; akka.http.model.HttpMethod">method</a><span class="delimiter">)</span>
      <a href="../rendering/HttpRequestRendererFactory.scala.html#akka.http.engine.rendering;RequestRenderingContext" title="(request: akka.http.model.HttpRequest, serverAddress: java.net.InetSocketAddress)akka.http.engine.rendering.RequestRenderingContext">RequestRenderingContext</a><span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.apply(01176f1b96).request" title="akka.http.model.HttpRequest">request</a>, <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.serverAddress" title="java.net.InetSocketAddress">serverAddress</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    def <a title="()akka.http.model.HttpMethod" id="akka.http.engine.client.HttpClient;RequestMethodByPass.apply(66e67d3d91)">apply</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../model/HttpMethod.scala.html#akka.http.model;HttpMethod" title="akka.http.model.HttpMethod">HttpMethod</a> =
      if <span class="delimiter">(</span><a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="akka.http.model.HttpMethod" id="akka.http.engine.client.HttpClient;RequestMethodByPass.apply(66e67d3d91).method">method</a> = <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a>.<span title="=&gt; akka.http.model.HttpMethod">head</span>
        <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a> = <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.requestMethods" title="scala.collection.immutable.Queue[akka.http.model.HttpMethod]">requestMethods</a>.<span title="=&gt; scala.collection.immutable.Queue[akka.http.model.HttpMethod]">tail</span>
        <a href="#akka.http.engine.client.HttpClient;RequestMethodByPass.apply(66e67d3d91).method" title="akka.http.model.HttpMethod">method</a>
      <span class="delimiter">}</span> else <a href="../parsing/HttpResponseParser.scala.html#akka.http.engine.parsing.HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser.type">HttpResponseParser</a>.<a href="../parsing/HttpResponseParser.scala.html#akka.http.engine.parsing.HttpResponseParser.NoMethod" title="=&gt; akka.http.model.HttpMethod">NoMethod</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
