<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/engine/rendering/HttpResponseRendererFactory.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.engine.rendering

import scala.annotation.tailrec
import akka.event.LoggingAdapter
import akka.util.ByteString
import akka.stream.scaladsl.<a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes" title="akka.stream.scaladsl.OperationAttributes.type">OperationAttributes</a>._
import akka.stream.scaladsl.Source
import akka.stream.stage._
import akka.http.model._
import akka.http.util._
import <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport" title="akka.http.engine.rendering.RenderSupport.type">RenderSupport</a>._
import <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols" title="akka.http.model.HttpProtocols.type">HttpProtocols</a>._
import headers._

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> class <a title="class HttpResponseRendererFactory extends AnyRef" id="akka.http.engine.rendering;HttpResponseRendererFactory">HttpResponseRendererFactory</a><a href="#akka.http.engine.rendering;HttpResponseRendererFactory" title="akka.http.engine.rendering.HttpResponseRendererFactory" class="delimiter">(</a><a title="Option[akka.http.model.headers.Server]" id="akka.http.engine.rendering;HttpResponseRendererFactory.serverHeader">serverHeader</a>: <span title="Option[akka.http.model.headers.Server]">Option</span><span class="delimiter">[</span>headers.Server<span class="delimiter">]</span>,
                                                <a title="Int" id="akka.http.engine.rendering;HttpResponseRendererFactory.responseHeaderSizeHint">responseHeaderSizeHint</a>: <span title="Int">Int</span>,
                                                <a title="akka.event.LoggingAdapter" id="akka.http.engine.rendering;HttpResponseRendererFactory.log">log</a>: <span title="akka.event.LoggingAdapter">LoggingAdapter</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  private val <a title="akka.http.util.Rendering =&gt; Unit" id="akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader">renderDefaultServerHeader</a>: Rendering ⇒ Unit =
    <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.serverHeader" title="Option[akka.http.model.headers.Server]">serverHeader</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="akka.http.model.headers.Server" id="akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.h">h</a><span class="delimiter">)</span> ⇒
        val <a title="Array[Byte]" id="akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.bytes">bytes</a> = <span class="delimiter">(</span>new <a href="../../util/Rendering.scala.html#akka.http.util;ByteArrayRendering" title="akka.http.util.ByteArrayRendering">ByteArrayRendering</a><span class="delimiter">(</span><span title="Int(32)" class="int">32</span><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Server)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Server])akka.http.util.ByteArrayRendering">~~</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.h" title="akka.http.model.headers.Server">h</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])akka.http.util.ByteArrayRendering">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a><span class="delimiter">)</span>.<a href="../../util/Rendering.scala.html#akka.http.util;ByteArrayRendering.get" title="=&gt; Array[Byte]">get</a>
        <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.$anonfun.x$1" title="akka.http.util.Rendering">_</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(773be6397a)" title="(bytes: Array[Byte])x$1.type">~~</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.bytes" title="Array[Byte]">bytes</a>
      case <span title="None.type">None</span> ⇒ <a title="akka.http.util.Rendering" id="akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader.$anonfun.x$2">_</a> ⇒ <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">// as an optimization we cache the Date header of the last second here</span>
  @volatile private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="(Long, Array[Byte])" id="akka.http.engine.rendering;HttpResponseRendererFactory.cachedDateHeader">cachedDateHeader</a>: <span title="(Long, Array[Byte])" class="delimiter">(</span>Long, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(_1: Long, _2: Null)(Long, Null)" class="delimiter">(</span><span title="Long(0L)" class="long">0L</span>, null<span class="delimiter">)</span>

  private def <a title="=&gt; Array[Byte]" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader">dateHeader</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    var <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedSeconds" title="(Long, Array[Byte])" class="delimiter">(</a><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.x$3" title="Long" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedSeconds">cachedSeconds</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.x$3" title="Array[Byte]" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedBytes">cachedBytes</a><span class="delimiter">)</span> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.cachedDateHeader" title="(Long, Array[Byte])">cachedDateHeader</a>
    val <a title="Long" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.now">now</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.now" title="Long">now</a> <span title="(x: Int)Long">-</span> <span title="Int(1000)" class="int">1000</span> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedSeconds" title="Long">cachedSeconds</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedSeconds" title="Long">cachedSeconds</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.now" title="Long">now</a> <span title="(x: Int)Long">/</span> <span title="Int(1000)" class="int">1000</span>
      val <a title="akka.http.util.ByteArrayRendering" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.r">r</a> = new <a href="../../util/Rendering.scala.html#akka.http.util;ByteArrayRendering" title="akka.http.util.ByteArrayRendering">ByteArrayRendering</a><span class="delimiter">(</span><span title="Int(48)" class="int">48</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateTime" title="(now: Long)akka.http.util.DateTime">dateTime</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.now" title="Long">now</a><span class="delimiter">)</span>.<a href="../../util/DateTime.scala.html#akka.http.util;DateTime.renderRfc1123DateTimeString" title="(r: akka.http.util.ByteArrayRendering)r.type">renderRfc1123DateTimeString</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.r" title="akka.http.util.ByteArrayRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Date.type)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Date.type])r.type">~~</a> headers.<a href="../../model/headers/headers.scala.html#akka.http.model.headers.Date" title="akka.http.model.headers.Date.type">Date</a><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
      <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedBytes" title="Array[Byte]">cachedBytes</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.r" title="akka.http.util.ByteArrayRendering">r</a>.<a href="../../util/Rendering.scala.html#akka.http.util;ByteArrayRendering.get" title="=&gt; Array[Byte]">get</a>
      <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.cachedDateHeader" title="(Long, Array[Byte])">cachedDateHeader</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedSeconds" title="(self: Long)ArrowAssoc[Long]">cachedSeconds</a> <span title="(y: Array[Byte])(Long, Array[Byte])">-&gt;</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedBytes" title="Array[Byte]">cachedBytes</a>
    <span class="delimiter">}</span>
    <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader.cachedBytes" title="Array[Byte]">cachedBytes</a>
  <span class="delimiter">}</span>

  protected def <a title="(now: Long)akka.http.util.DateTime" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateTime">dateTime</a><span class="delimiter">(</span><a title="Long" id="akka.http.engine.rendering;HttpResponseRendererFactory.dateTime.now">now</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="../../util/DateTime.scala.html#akka.http.util.DateTime.apply(556d5254e4)" title="(clicks: Long)akka.http.util.DateTime">DateTime</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateTime.now" title="Long">now</a><span class="delimiter">)</span> <span class="comment">// split out so we can stabilize by overriding in tests</span>

  def <a title="=&gt; HttpResponseRendererFactory.this.HttpResponseRenderer" id="akka.http.engine.rendering;HttpResponseRendererFactory.newRenderer">newRenderer</a>: <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer" title="HttpResponseRendererFactory.this.HttpResponseRenderer">HttpResponseRenderer</a> = new <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer" title="HttpResponseRendererFactory.this.HttpResponseRenderer">HttpResponseRenderer</a>

  final class <a title="class HttpResponseRenderer extends akka.stream.stage.PushStage[akka.http.engine.rendering.ResponseRenderingContext,akka.stream.scaladsl.Source[akka.util.ByteString]]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer">HttpResponseRenderer</a> extends <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;PushStage" title="akka.stream.stage.PushStage[akka.http.engine.rendering.ResponseRenderingContext,akka.stream.scaladsl.Source[akka.util.ByteString]]">PushStage</a><span class="delimiter">[</span>ResponseRenderingContext, Source<span class="delimiter">[</span>ByteString<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>

    private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close">close</a> = false <span class="comment">// signals whether the connection is to be closed after the current response</span>

    <span class="comment">// need this for testing</span>
    private<span class="delimiter">[</span>http<span class="delimiter">]</span> def <a title="=&gt; Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.isComplete">isComplete</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close" title="Boolean">close</a>

    override def <a title="(ctx: akka.http.engine.rendering.ResponseRenderingContext, opCtx: akka.stream.stage.Context[akka.stream.scaladsl.Source[akka.util.ByteString]])akka.stream.stage.Directive" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush">onPush</a><span class="delimiter">(</span><a title="akka.http.engine.rendering.ResponseRenderingContext" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx">ctx</a>: <a href="#akka.http.engine.rendering.ResponseRenderingContext.readResolve" title="akka.http.engine.rendering.ResponseRenderingContext">ResponseRenderingContext</a>, <a title="akka.stream.stage.Context[akka.stream.scaladsl.Source[akka.util.ByteString]]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.opCtx">opCtx</a>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[akka.stream.scaladsl.Source[akka.util.ByteString]]">Context</a><span class="delimiter">[</span>Source<span class="delimiter">[</span>ByteString<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
      val <a title="akka.http.util.ByteStringRendering" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r">r</a> = new <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering" title="akka.http.util.ByteStringRendering">ByteStringRendering</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.responseHeaderSizeHint" title="Int">responseHeaderSizeHint</a><span class="delimiter">)</span>

      import <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering;ResponseRenderingContext.response" title="=&gt; akka.http.model.HttpResponse">response</a>._
      val noEntity = <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.entity" title="=&gt; akka.http.model.ResponseEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isKnownEmpty" title="()Boolean">isKnownEmpty</a> <a title="Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.noEntity">||</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$2" title="=&gt; akka.http.model.HttpMethod">requestMethod</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.HEAD" title="=&gt; akka.http.model.HttpMethod">HEAD</a>

      def <a title="()Unit" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderStatusLine">renderStatusLine</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
        if <span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.status" title="=&gt; akka.http.model.StatusCode">status</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>.<a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.OK" title="=&gt; akka.http.model.StatusCodes.Success">OK</a><span class="delimiter">)</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.DefaultStatusLineBytes" title="=&gt; Array[Byte]">DefaultStatusLineBytes</a> else <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.StatusLineStartBytes" title="=&gt; Array[Byte]">StatusLineStartBytes</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.StatusCode)(implicit ev: akka.http.util.Renderer[akka.http.model.StatusCode])r.type">~~</a> <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.status" title="=&gt; akka.http.model.StatusCode">status</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>

      def <a title="(h: akka.http.model.HttpHeader)akka.http.util.ByteStringRendering" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render">render</a><span class="delimiter">(</span><a title="akka.http.model.HttpHeader" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render.h">h</a>: <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader" title="akka.http.model.HttpHeader">HttpHeader</a><span class="delimiter">)</span> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.HttpHeader)(implicit ev: akka.http.util.Renderer[akka.http.model.HttpHeader])r.type">~~</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render.h" title="akka.http.model.HttpHeader">h</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>

      def <a title="=&gt; Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.mustRenderTransferEncodingChunkedHeader">mustRenderTransferEncodingChunkedHeader</a> =
        <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.entity" title="=&gt; akka.http.model.ResponseEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isChunked" title="()Boolean">isChunked</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.entity" title="=&gt; akka.http.model.ResponseEntity">entity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model;HttpEntity.isKnownEmpty" title="()Boolean">isKnownEmpty</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$2" title="=&gt; akka.http.model.HttpMethod">requestMethod</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.HEAD" title="=&gt; akka.http.model.HttpMethod">HEAD</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$3" title="=&gt; akka.http.model.HttpProtocol">requestProtocol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols.HTTP/1.1" title="=&gt; akka.http.model.HttpProtocol">`HTTP/1.1`</a><span class="delimiter">)</span>

      @tailrec def <a title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders">renderHeaders</a><span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.remaining">remaining</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, <a title="Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2">alwaysClose</a>: <span title="Boolean">Boolean</span> = false,
                                 <a title="akka.http.model.headers.Connection" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3">connHeader</a>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection" title="akka.http.model.headers.Connection">Connection</a> = null, <a title="Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4">serverHeaderSeen</a>: <span title="Boolean">Boolean</span> = false,
                                 <a title="Boolean" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5">transferEncodingSeen</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
        <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.remaining" title="List[akka.http.model.HttpHeader]">remaining</a> match <span class="delimiter">{</span>
          case <a title="akka.http.model.HttpHeader" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.head">head</a> :: <a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail">tail</a> ⇒ <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.head" title="akka.http.model.HttpHeader">head</a> match <span class="delimiter">{</span>
            case <span title="akka.http.model.headers.Content-Length">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Content-Length" title="akka.http.model.headers.Content-Length">`Content-Length`</a> ⇒
              <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.suppressionWarning" title="(log: akka.event.LoggingAdapter, h: akka.http.model.HttpHeader, msg: String)Unit">suppressionWarning</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.log" title="akka.event.LoggingAdapter">log</a>, <span title="akka.http.model.headers.Content-Length">x</span>, <span title="String(&quot;explicit `Content-Length` header is not allowed. Use the appropriate HttpEntity subtype.&quot;)" class="string">&quot;explicit `Content-Length` header is not allowed. Use the appropriate HttpEntity subtype.&quot;</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.headers.Content-Type">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Content-Type" title="akka.http.model.headers.Content-Type">`Content-Type`</a> ⇒
              <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.suppressionWarning" title="(log: akka.event.LoggingAdapter, h: akka.http.model.HttpHeader, msg: String)Unit">suppressionWarning</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.log" title="akka.event.LoggingAdapter">log</a>, <span title="akka.http.model.headers.Content-Type">x</span>, <span title="String(&quot;explicit `Content-Type` header is not allowed. Set `HttpResponse.entity.contentType` instead.&quot;)" class="string">&quot;explicit `Content-Type` header is not allowed. Set `HttpResponse.entity.contentType` instead.&quot;</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case Date<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
              <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.suppressionWarning" title="(log: akka.event.LoggingAdapter, h: akka.http.model.HttpHeader, msg: String)Unit">suppressionWarning</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.log" title="akka.event.LoggingAdapter">log</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.head" title="akka.http.model.HttpHeader">head</a><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.headers.Transfer-Encoding">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Transfer-Encoding" title="akka.http.model.headers.Transfer-Encoding">`Transfer-Encoding`</a> ⇒
              <span title="akka.http.model.headers.Transfer-Encoding">x</span>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Transfer-Encoding.withChunkedPeeled" title="=&gt; Option[akka.http.model.headers.Transfer-Encoding]">withChunkedPeeled</a> match <span class="delimiter">{</span>
                case <span title="None.type">None</span> ⇒
                  <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.suppressionWarning" title="(log: akka.event.LoggingAdapter, h: akka.http.model.HttpHeader, msg: String)Unit">suppressionWarning</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.log" title="akka.event.LoggingAdapter">log</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.head" title="akka.http.model.HttpHeader">head</a><span class="delimiter">)</span>
                  <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>
                case Some<span class="delimiter">(</span><a title="akka.http.model.headers.Transfer-Encoding" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.te">te</a><span class="delimiter">)</span> ⇒
                  <span class="comment">// if the user applied some custom transfer-encoding we need to keep the header</span>
                  <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render" title="(h: akka.http.model.HttpHeader)akka.http.util.ByteStringRendering">render</a><span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.mustRenderTransferEncodingChunkedHeader" title="=&gt; Boolean">mustRenderTransferEncodingChunkedHeader</a><span class="delimiter">)</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.te" title="akka.http.model.headers.Transfer-Encoding">te</a>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Transfer-Encoding.withChunked" title="=&gt; akka.http.model.headers.Transfer-Encoding">withChunked</a> else <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.te" title="akka.http.model.headers.Transfer-Encoding">te</a><span class="delimiter">)</span>
                  <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, transferEncodingSeen = true<span class="delimiter">)</span>
              <span class="delimiter">}</span>

            case <span title="akka.http.model.headers.Connection">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection" title="akka.http.model.headers.Connection">`Connection`</a> ⇒
              val <a title="akka.http.model.headers.Connection" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.connectionHeader">connectionHeader</a> = if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span title="akka.http.model.headers.Connection">x</span> else <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection" title="(tokens: scala.collection.immutable.Seq[String])akka.http.model.headers.Connection">Connection</a><span class="delimiter">(</span><span title="akka.http.model.headers.Connection">x</span>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection.tokens" title="=&gt; scala.collection.immutable.Seq[String]">tokens</a> <span title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[String],String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]">++</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection.tokens" title="=&gt; scala.collection.immutable.Seq[String]">tokens</a><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.connectionHeader" title="akka.http.model.headers.Connection">connectionHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.headers.Server">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Server" title="akka.http.model.headers.Server">`Server`</a> ⇒
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render" title="(h: akka.http.model.HttpHeader)akka.http.util.ByteStringRendering">render</a><span class="delimiter">(</span><span title="akka.http.model.headers.Server">x</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, serverHeaderSeen = true, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.headers.CustomHeader">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;CustomHeader" title="akka.http.model.headers.CustomHeader">CustomHeader</a> ⇒
              if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><span title="akka.http.model.headers.CustomHeader">x</span>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;CustomHeader.suppressRendering" title="()Boolean">suppressRendering</a><span class="delimiter">)</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render" title="(h: akka.http.model.HttpHeader)akka.http.util.ByteStringRendering">render</a><span class="delimiter">(</span><span title="akka.http.model.headers.CustomHeader">x</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.headers.RawHeader">x</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;RawHeader" title="akka.http.model.headers.RawHeader">RawHeader</a> if <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;content-type&quot;)" class="string">&quot;content-type&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;content-length&quot;)" class="string">&quot;content-length&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;transfer-encoding&quot;)" class="string">&quot;transfer-encoding&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
              <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;date&quot;)" class="string">&quot;date&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;server&quot;)" class="string">&quot;server&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><span title="akka.http.model.headers.RawHeader">x</span> <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader.is" title="(nameInLowerCase: String)Boolean">is</a> <span title="String(&quot;connection&quot;)" class="string">&quot;connection&quot;</span><span class="delimiter">)</span> ⇒
              <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.suppressionWarning" title="(log: akka.event.LoggingAdapter, h: akka.http.model.HttpHeader, msg: String)Unit">suppressionWarning</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory.log" title="akka.event.LoggingAdapter">log</a>, <span title="akka.http.model.headers.RawHeader">x</span>, <span title="String(&quot;illegal RawHeader&quot;)" class="string">&quot;illegal RawHeader&quot;</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>

            case <span title="akka.http.model.HttpHeader">x</span> ⇒
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.render" title="(h: akka.http.model.HttpHeader)akka.http.util.ByteStringRendering">render</a><span class="delimiter">(</span><span title="akka.http.model.HttpHeader">x</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders.tail" title="List[akka.http.model.HttpHeader]">tail</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          case <span title="scala.collection.immutable.Nil.type">Nil</span> ⇒
            if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$4" title="Boolean">serverHeaderSeen</a><span class="delimiter">)</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.renderDefaultServerHeader" title="(v1: akka.http.util.Rendering)Unit">renderDefaultServerHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a><span class="delimiter">)</span>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory.dateHeader" title="=&gt; Array[Byte]">dateHeader</a>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close" title="Boolean">close</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$2" title="Boolean">alwaysClose</a> <span title="(x: Boolean)Boolean">||</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$4" title="=&gt; Boolean">closeAfterResponseCompletion</a> <span title="(x: Boolean)Boolean">||</span> <span class="comment">// request wants to close</span>
              <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a> <span title="(x$1: Any)Boolean">!=</span> null <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$3" title="akka.http.model.headers.Connection">connHeader</a>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Connection.hasClose" title="=&gt; Boolean">hasClose</a><span class="delimiter">)</span> <span class="comment">// application wants to close</span>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$3" title="=&gt; akka.http.model.HttpProtocol">requestProtocol</a> match <span class="delimiter">{</span>
              case <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols.HTTP/1.0" title="=&gt; akka.http.model.HttpProtocol">`HTTP/1.0`</a> if <span title="=&gt; Boolean">!</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close" title="Boolean">close</a> ⇒ <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Connection.type)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Connection.type])r.type">~~</a> <a href="../../model/headers/headers.scala.html#akka.http.model.headers.Connection" title="akka.http.model.headers.Connection.type">Connection</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.KeepAliveBytes" title="=&gt; Array[Byte]">KeepAliveBytes</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
              case <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols.HTTP/1.1" title="=&gt; akka.http.model.HttpProtocol">`HTTP/1.1`</a> if <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close" title="Boolean">close</a>  ⇒ <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Connection.type)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Connection.type])r.type">~~</a> <a href="../../model/headers/headers.scala.html#akka.http.model.headers.Connection" title="akka.http.model.headers.Connection.type">Connection</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CloseBytes" title="=&gt; Array[Byte]">CloseBytes</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
              case _                    ⇒ <span class="comment">// no need for rendering</span>
            <span class="delimiter">}</span>
            if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.mustRenderTransferEncodingChunkedHeader" title="=&gt; Boolean">mustRenderTransferEncodingChunkedHeader</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders$default$5" title="Boolean">transferEncodingSeen</a><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Transfer-Encoding.type)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Transfer-Encoding.type])r.type">~~</a> <a href="../../model/headers/headers.scala.html#akka.http.model.headers.Transfer-Encoding" title="akka.http.model.headers.Transfer-Encoding.type">`Transfer-Encoding`</a> <a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.~~(a312de4790)" title="(bytes: Array[Byte])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.ChunkedBytes" title="=&gt; Array[Byte]">ChunkedBytes</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
        <span class="delimiter">}</span>

      def <a title="(contentLength: Long)akka.http.util.ByteStringRendering" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderContentLengthHeader">renderContentLengthHeader</a><span class="delimiter">(</span><a title="Long" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderContentLengthHeader.contentLength">contentLength</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
        if <span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.status" title="=&gt; akka.http.model.StatusCode">status</a>.<a href="../../model/StatusCode.scala.html#akka.http.model;StatusCode.allowsEntity" title="()Boolean">allowsEntity</a><span class="delimiter">)</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.model.headers.Content-Length.type)(implicit ev: akka.http.util.Renderer[akka.http.model.headers.Content-Length.type])r.type">~~</a> <a href="../../model/headers/headers.scala.html#akka.http.model.headers.Content-Length" title="akka.http.model.headers.Content-Length.type">`Content-Length`</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(c84bb6324f)" title="(l: Long)r.type">~~</a> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderContentLengthHeader.contentLength" title="Long">contentLength</a> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])r.type">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a> else <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>

      def <a title="(entityBytes: =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings">byteStrings</a><span class="delimiter">(</span><a title="=&gt; akka.stream.scaladsl.Source[akka.util.ByteString]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings.entityBytes">entityBytes</a>: ⇒ Source<span class="delimiter">[</span>ByteString<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl;Source" title="akka.stream.scaladsl.Source[akka.util.ByteString]">Source</a><span class="delimiter">[</span>ByteString<span class="delimiter">]</span> =
        <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.renderByteStrings" title="(r: akka.http.util.ByteStringRendering, entityBytes: =&gt; akka.stream.scaladsl.Source[akka.util.ByteString], skipEntity: Boolean)akka.stream.scaladsl.Source[akka.util.ByteString]">renderByteStrings</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings.entityBytes" title="=&gt; akka.stream.scaladsl.Source[akka.util.ByteString]">entityBytes</a>, skipEntity = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.noEntity" title="Boolean">noEntity</a><span class="delimiter">)</span>

      def <a title="(entity: akka.http.model.ResponseEntity)akka.stream.scaladsl.Source[akka.util.ByteString]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering">completeResponseRendering</a><span class="delimiter">(</span><a title="akka.http.model.ResponseEntity" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity">entity</a>: <a href="../../model/HttpEntity.scala.html#akka.http.model;ResponseEntity" title="akka.http.model.ResponseEntity">ResponseEntity</a><span class="delimiter">)</span>: <a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl;Source" title="akka.stream.scaladsl.Source[akka.util.ByteString]">Source</a><span class="delimiter">[</span>ByteString<span class="delimiter">]</span> =
        <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity" title="akka.http.model.ResponseEntity">entity</a> match <span class="delimiter">{</span>
          case HttpEntity.Strict<span class="delimiter">(</span>_, <span title="akka.util.ByteString">data</span><span class="delimiter">)</span> ⇒
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.headers" title="=&gt; scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>.<span title="=&gt; List[akka.http.model.HttpHeader]">toList</span><span class="delimiter">)</span>
            <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.renderEntityContentType" title="(r: akka.http.util.Rendering, entity: akka.http.model.HttpEntity)akka.http.util.Rendering">renderEntityContentType</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity" title="akka.http.model.ResponseEntity">entity</a><span class="delimiter">)</span>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderContentLengthHeader" title="(contentLength: Long)akka.http.util.ByteStringRendering">renderContentLengthHeader</a><span class="delimiter">(</span><span title="akka.util.ByteString">data</span>.<span title="=&gt; Long">length</span><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])akka.http.util.ByteStringRendering">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
            val <a title="akka.util.ByteString" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entityBytes">entityBytes</a> = if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.noEntity" title="Boolean">noEntity</a><span class="delimiter">)</span> <span title="akka.util.ByteString.type">ByteString</span>.<span title="=&gt; akka.util.ByteString">empty</span> else <span title="akka.util.ByteString">data</span>
            <a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl.Source" title="akka.stream.scaladsl.Source.type">Source</a>.<a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl.Source.singleton" title="(element: akka.util.ByteString)akka.stream.scaladsl.Source[akka.util.ByteString]">singleton</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>.<a href="../../util/Rendering.scala.html#akka.http.util;ByteStringRendering.get" title="=&gt; akka.util.ByteString">get</a> <span title="(that: akka.util.ByteString)akka.util.ByteString">++</span> <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entityBytes" title="akka.util.ByteString">entityBytes</a><span class="delimiter">)</span>

          case HttpEntity.Default<span class="delimiter">(</span>_, <a title="Long" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.contentLength">contentLength</a>, <span title="akka.stream.scaladsl.Source[akka.util.ByteString]">data</span><span class="delimiter">)</span> ⇒
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.headers" title="=&gt; scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>.<span title="=&gt; List[akka.http.model.HttpHeader]">toList</span><span class="delimiter">)</span>
            <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.renderEntityContentType" title="(r: akka.http.util.Rendering, entity: akka.http.model.HttpEntity)akka.http.util.Rendering">renderEntityContentType</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity" title="akka.http.model.ResponseEntity">entity</a><span class="delimiter">)</span>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderContentLengthHeader" title="(contentLength: Long)akka.http.util.ByteStringRendering">renderContentLengthHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.contentLength" title="Long">contentLength</a><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])akka.http.util.ByteStringRendering">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings" title="(entityBytes: =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]">byteStrings</a><span class="delimiter">(</span><span title="akka.stream.scaladsl.Source[akka.util.ByteString]">data</span>.<a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl;Source.section" title="(attributes: akka.stream.scaladsl.OperationAttributes)(section: akka.stream.scaladsl.Source[akka.util.ByteString] =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]">section</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes.name" title="(name: String)akka.stream.scaladsl.OperationAttributes">name</a><span class="delimiter">(</span><span title="String(&quot;checkContentLength&quot;)" class="string">&quot;checkContentLength&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.$anonfun.x$4" title="akka.stream.scaladsl.Source[akka.util.ByteString]">_</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.transform" title="(mkStage: () =&gt; akka.stream.stage.Stage[akka.util.ByteString,akka.util.ByteString])x$4.Repr[akka.util.ByteString]">transform</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ new <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport;CheckContentLengthTransformer" title="akka.http.engine.rendering.RenderSupport.CheckContentLengthTransformer">CheckContentLengthTransformer</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.contentLength" title="Long">contentLength</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

          case HttpEntity.CloseDelimited<span class="delimiter">(</span>_, <span title="akka.stream.scaladsl.Source[akka.util.ByteString]">data</span><span class="delimiter">)</span> ⇒
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.headers" title="=&gt; scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>.<span title="=&gt; List[akka.http.model.HttpHeader]">toList</span>, alwaysClose = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$2" title="=&gt; akka.http.model.HttpMethod">requestMethod</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.HEAD" title="=&gt; akka.http.model.HttpMethod">HEAD</a><span class="delimiter">)</span>
            <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.renderEntityContentType" title="(r: akka.http.util.Rendering, entity: akka.http.model.HttpEntity)akka.http.util.Rendering">renderEntityContentType</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity" title="akka.http.model.ResponseEntity">entity</a><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])akka.http.util.Rendering">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
            <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings" title="(entityBytes: =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]">byteStrings</a><span class="delimiter">(</span><span title="akka.stream.scaladsl.Source[akka.util.ByteString]">data</span><span class="delimiter">)</span>

          case HttpEntity.Chunked<span class="delimiter">(</span><a title="akka.http.model.ContentType" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.contentType">contentType</a>, <a title="akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.chunks">chunks</a><span class="delimiter">)</span> ⇒
            if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.ctx" title="akka.http.engine.rendering.ResponseRenderingContext">ctx</a>.<a href="#akka.http.engine.rendering.ResponseRenderingContext.apply$default$3" title="=&gt; akka.http.model.HttpProtocol">requestProtocol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols.HTTP/1.0" title="=&gt; akka.http.model.HttpProtocol">`HTTP/1.0`</a><span class="delimiter">)</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering" title="(entity: akka.http.model.ResponseEntity)akka.stream.scaladsl.Source[akka.util.ByteString]">completeResponseRendering</a><span class="delimiter">(</span><a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity" title="akka.http.model.HttpEntity.type">HttpEntity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity;CloseDelimited" title="(contentType: akka.http.model.ContentType, data: akka.stream.scaladsl.Source[akka.util.ByteString])akka.http.model.HttpEntity.CloseDelimited">CloseDelimited</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.contentType" title="akka.http.model.ContentType">contentType</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.chunks" title="akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart]">chunks</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.map" title="(f: akka.http.model.HttpEntity.ChunkStreamPart =&gt; akka.util.ByteString)chunks.Repr[akka.util.ByteString]">map</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.$anonfun.x$5" title="akka.http.model.HttpEntity.ChunkStreamPart">_</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity;ChunkStreamPart.data" title="()akka.util.ByteString">data</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            else <span class="delimiter">{</span>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderHeaders" title="(remaining: List[akka.http.model.HttpHeader], alwaysClose: Boolean, connHeader: akka.http.model.headers.Connection, serverHeaderSeen: Boolean, transferEncodingSeen: Boolean)Unit">renderHeaders</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.headers" title="=&gt; scala.collection.immutable.Seq[akka.http.model.HttpHeader]">headers</a>.<span title="=&gt; List[akka.http.model.HttpHeader]">toList</span><span class="delimiter">)</span>
              <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.renderEntityContentType" title="(r: akka.http.util.Rendering, entity: akka.http.model.HttpEntity)akka.http.util.Rendering">renderEntityContentType</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.r" title="akka.http.util.ByteStringRendering">r</a>, <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.entity" title="akka.http.model.ResponseEntity">entity</a><span class="delimiter">)</span> <a href="../../util/Rendering.scala.html#akka.http.util;Rendering.~~(f8b31a61d8)" title="(value: akka.http.util.Rendering.CrLf.type)(implicit ev: akka.http.util.Renderer[akka.http.util.Rendering.CrLf.type])akka.http.util.Rendering">~~</a> <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport.CrLf" title="=&gt; akka.http.util.Rendering.CrLf.type">CrLf</a>
              <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.byteStrings" title="(entityBytes: =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]">byteStrings</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.chunks" title="akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart]">chunks</a>.<a href="../../../stream/scaladsl/Source.scala.html#akka.stream.scaladsl;Source.section" title="(attributes: akka.stream.scaladsl.OperationAttributes)(section: akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart] =&gt; akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.scaladsl.Source[akka.util.ByteString]">section</a><span class="delimiter">(</span><a href="../../../stream/scaladsl/OperationAttributes.scala.html#akka.stream.scaladsl.OperationAttributes.name" title="(name: String)akka.stream.scaladsl.OperationAttributes">name</a><span class="delimiter">(</span><span title="String(&quot;renderChunks&quot;)" class="string">&quot;renderChunks&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering.$anonfun.x$6" title="akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart]">_</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.transform" title="(mkStage: () =&gt; akka.stream.stage.Stage[akka.http.model.HttpEntity.ChunkStreamPart,akka.util.ByteString])x$6.Repr[akka.util.ByteString]">transform</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ new <a href="RenderSupport.scala.html#akka.http.engine.rendering.RenderSupport;ChunkTransformer" title="akka.http.engine.rendering.RenderSupport.ChunkTransformer">ChunkTransformer</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.renderStatusLine" title="()Unit">renderStatusLine</a><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="akka.stream.scaladsl.Source[akka.util.ByteString]" id="akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.result">result</a> = <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.completeResponseRendering" title="(entity: akka.http.model.ResponseEntity)akka.stream.scaladsl.Source[akka.util.ByteString]">completeResponseRendering</a><span class="delimiter">(</span><a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse.entity" title="=&gt; akka.http.model.ResponseEntity">entity</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.close" title="Boolean">close</a><span class="delimiter">)</span>
        <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.opCtx" title="akka.stream.stage.Context[akka.stream.scaladsl.Source[akka.util.ByteString]]">opCtx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.result" title="akka.stream.scaladsl.Source[akka.util.ByteString]">result</a><span class="delimiter">)</span>
      else
        <a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.opCtx" title="akka.stream.stage.Context[akka.stream.scaladsl.Source[akka.util.ByteString]]">opCtx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: akka.stream.scaladsl.Source[akka.util.ByteString])akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.http.engine.rendering;HttpResponseRendererFactory;HttpResponseRenderer.onPush.result" title="akka.stream.scaladsl.Source[akka.util.ByteString]">result</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> final case class <a title="class ResponseRenderingContext extends AnyRef with Product with Serializable" id="akka.http.engine.rendering.ResponseRenderingContext.readResolve">ResponseRenderingContext</a><a href="#akka.http.engine.rendering.ResponseRenderingContext.readResolve" title="Product" class="delimiter">(</a>
  <a title="akka.http.model.HttpResponse" id="akka.http.engine.rendering;ResponseRenderingContext.response">response</a>: <a href="../../model/HttpMessage.scala.html#akka.http.model;HttpResponse" title="akka.http.model.HttpResponse">HttpResponse</a>,
  <a title="akka.http.model.HttpMethod" id="akka.http.engine.rendering.ResponseRenderingContext.apply$default$2">requestMethod</a>: <a href="../../model/HttpMethod.scala.html#akka.http.model;HttpMethod" title="akka.http.model.HttpMethod">HttpMethod</a> = <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.GET" title="=&gt; akka.http.model.HttpMethod">GET</a>,
  <a title="akka.http.model.HttpProtocol" id="akka.http.engine.rendering.ResponseRenderingContext.apply$default$3">requestProtocol</a>: <a href="../../model/HttpProtocol.scala.html#akka.http.model;HttpProtocol" title="akka.http.model.HttpProtocol">HttpProtocol</a> = <a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols" title="akka.http.model.HttpProtocols.type">HttpProtocols</a>.<a href="../../model/HttpProtocol.scala.html#akka.http.model.HttpProtocols.HTTP/1.1" title="=&gt; akka.http.model.HttpProtocol">`HTTP/1.1`</a>,
  <a title="Boolean" id="akka.http.engine.rendering.ResponseRenderingContext.apply$default$4">closeAfterResponseCompletion</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span>

        </pre>
    </body>
</html>
