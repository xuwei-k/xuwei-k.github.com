<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/engine/parsing/HttpHeaderParser.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.engine.parsing

import java.util.<span title="java.util.Arrays.type">Arrays</span>.copyOf
import java.lang.<span class="delimiter">{</span> StringBuilder ⇒ JStringBuilder <span class="delimiter">}</span>
import scala.annotation.tailrec
import akka.parboiled2.CharUtils
import akka.util.ByteString
import akka.http.util._
import akka.http.model.<span class="delimiter">{</span> IllegalHeaderException, StatusCodes, HttpHeader, ErrorInfo <span class="delimiter">}</span>
import akka.http.model.headers.RawHeader
import akka.http.model.parser.HeaderParser
import akka.http.model.parser.<a href="../../model/parser/CharacterClasses.scala.html#akka.http.model.parser.CharacterClasses" title="akka.http.model.parser.CharacterClasses.type">CharacterClasses</a>._

<span class="comment">/**
 * INTERNAL API
 *
 * Provides for time- and space-efficient parsing of an HTTP header line in an HTTP message.
 * It keeps a cache of all headers encountered in a previous request, so as to avoid reparsing and recreation of header
 * model instances.
 * For the life-time of one HTTP connection an instance of this class is owned by the connection, i.e. not shared
 * with other connections. After the connection is closed it may be used by subsequent connections.
 *
 * The core of this parser/cache is a mutable space-efficient ternary trie (prefix tree) structure, whose data are
 * split across three arrays. The tree supports node addition and update, but no deletion (i.e. we never remove
 * entries).
 *
 * The `nodes` array keeps the main data of the trie nodes. One node is formed of a char (2 bytes) of which the
 * LSB (least significant byte) is an ASCII octet and the MSB either 0 or an index into the `branchData` array.
 * There are three types of nodes:
 *
 * 1. Simple nodes: non-branching, non-leaf nodes (the most frequent kind of node) have an MSB of zero and exactly
 *    one logical sub-node which is the next node in the `nodes` array (i.e. the one at index n + 1).
 * 2. Branching nodes: have 2 or three children and a non-zero MSB. (MSB value - 1)*3 is the row index into the
 *    `branchData` array, which contains the branching data.
 * 3. Leaf nodes: have no sub-nodes and no character value. They merely &quot;stop&quot; the node chain and point to a value.
 *    The LSB of leaf nodes is zero and the (MSB value - 1) is an index into the values array.
 *
 * This design has the following consequences:
 *  - Since only leaf nodes can have values the trie cannot store keys that are prefixes of other stored keys.
 *  - If the trie stores n values it has less than n branching nodes (adding the first value does not create a
 *    branching node, the addition of every subsequent value creates at most one additional branching node).
 *  - If the trie has n branching nodes it stores at least n * 2 and at most n * 3 values.
 *
 * The `branchData` array keeps the branching data for branching nodes in the trie.
 * It's a flattened two-dimensional array with a row consisting of the following 3 signed 16-bit integers:
 * row-index + 0: if non-zero: index into the `nodes` array for the &quot;lesser&quot; child of the node
 * row-index + 1: if non-zero: index into the `nodes` array for the &quot;equal&quot; child of the node
 * row-index + 2: if non-zero: index into the `nodes` array for the &quot;greater&quot; child of the node
 * The array has a fixed size of 254 rows (since we can address at most 256 - 1 values with the node MSB and
 * we always have fewer branching nodes than values).
 *
 * The `values` array contains the payload data addressed by trie leaf nodes.
 * Since we address them via the nodes MSB and zero is reserved the trie
 * cannot hold more then 255 items, so this array has a fixed size of 255.
 */</span>
private<span class="delimiter">[</span>engine<span class="delimiter">]</span> final class <a title="class HttpHeaderParser extends AnyRef" id="akka.http.engine.parsing;HttpHeaderParser">HttpHeaderParser</a> private <span class="delimiter">(</span>
  val <a title="akka.http.engine.parsing.HttpHeaderParser.Settings" id="akka.http.engine.parsing;HttpHeaderParser.settings">settings</a>: HttpHeaderParser.<a href="#akka.http.engine.parsing.HttpHeaderParser;Settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">Settings</a>,
  <a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing;HttpHeaderParser.warnOnIllegalHeader">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit,
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Array[Char]" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$3">nodes</a>: <span title="Array[Char]">Array</span><span class="delimiter">[</span>Char<span class="delimiter">]</span> = new <span title="Array[Char]">Array</span><span class="delimiter">(</span><span title="Int(512)" class="int">512</span><span class="delimiter">)</span>, <span class="comment">// initial size, can grow as needed</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$4">nodeCount</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>,
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Array[Short]" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$5">branchData</a>: <span title="Array[Short]">Array</span><span class="delimiter">[</span>Short<span class="delimiter">]</span> = new <span title="Array[Short]">Array</span><span class="delimiter">(</span><span class="int">254</span> <span title="Int(762)">*</span> <span class="int">3</span><span class="delimiter">)</span>,
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$6">branchDataCount</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>,
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Array[AnyRef]" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$7">values</a>: <span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = new <span title="Array[AnyRef]">Array</span><span class="delimiter">(</span><span title="Int(255)" class="int">255</span><span class="delimiter">)</span>, <span class="comment">// fixed size of 255</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$8">valueCount</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>,
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Boolean" id="akka.http.engine.parsing.HttpHeaderParser.<init>$default$9">trieIsPrivate</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// signals the trie data can be mutated w/o having to copy first</span>

  <span class="comment">// TODO: evaluate whether switching to a value-class-based approach allows us to improve code readability without sacrificing performance</span>

  import <a href="#akka.http.engine.parsing.HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser.type">HttpHeaderParser</a>._
  import <a href="#akka.http.engine.parsing;HttpHeaderParser.settings" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>._

  <span class="comment">/**
   * Contains the parsed header instance after a call to `parseHeaderLine`.
   */</span>
  var <a title="akka.http.model.HttpHeader" id="akka.http.engine.parsing;HttpHeaderParser.resultHeader_=">resultHeader</a>: <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader" title="akka.http.model.HttpHeader">HttpHeader</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader" title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type">EmptyHeader</a>

  def <a title="=&gt; Boolean" id="akka.http.engine.parsing;HttpHeaderParser.isEmpty">isEmpty</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span>

  <span class="comment">/**
   * Returns a copy of this parser that shares the trie data with this instance.
   */</span>
  def <a title="()akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing;HttpHeaderParser.createShallowCopy">createShallowCopy</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a> =
    new <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.settings" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.warnOnIllegalHeader" title="akka.http.model.ErrorInfo =&gt; Unit">warnOnIllegalHeader</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="Array[Short]">branchData</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$6" title="Int">branchDataCount</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="Array[AnyRef]">values</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$8" title="Int">valueCount</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Parses a header line and returns the line start index of the subsequent line.
   * The parsed header instance is written to the `resultHeader` member.
   * If the trie still has space for this type of header (and as a whole) the parsed header is cached.
   * Throws a `NotEnoughDataException` if the given input doesn't contain enough data to fully parse the given header
   * line. Note that there must be at least one byte available after a CRLF sequence, in order to distinguish a true
   * line ending from a line fold.
   * If the header is invalid a respective `ParsingException` is thrown.
   */</span>
  @tailrec
  def <a title="(input: akka.util.ByteString, lineStart: Int)(cursor: Int, nodeIx: Int)Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine">parseHeaderLine</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart">lineStart</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3">cursor</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int">lineStart</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4">nodeIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    def <a title="(rootValueIx: Int, valueParser: akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser)Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch">startValueBranch</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.rootValueIx">rootValueIx</a>: <span title="Int">Int</span>, <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.valueParser">valueParser</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.header" title="(akka.http.model.HttpHeader, Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$1" title="akka.http.model.HttpHeader" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.header">header</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$1" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.endIx">endIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply" title="(input: akka.util.ByteString, valueStart: Int, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)(akka.http.model.HttpHeader, Int)">valueParser</a><span title="(akka.http.model.HttpHeader, Int) @unchecked" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.warnOnIllegalHeader" title="akka.http.model.ErrorInfo =&gt; Unit">warnOnIllegalHeader</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.cachingEnabled" title="=&gt; Boolean">cachingEnabled</a><span class="delimiter">)</span>
        try <span class="delimiter">{</span>
          val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.valueIx">valueIx</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex" title="=&gt; Int">newValueIndex</a> <span class="comment">// compute early in order to trigger OutOfTrieSpaceExceptions before any change</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.unshareIfRequired" title="()Unit">unshareIfRequired</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int, x: AnyRef)Unit">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.rootValueIx" title="Int">rootValueIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.ValueBranch.readResolve" title="(valueIx: Int, parser: akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser, branchRootNodeIx: Int, valueCount: Int)akka.http.engine.parsing.HttpHeaderParser.ValueBranch">ValueBranch</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.rootValueIx" title="Int">rootValueIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a>, branchRootNodeIx = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a>, valueCount = <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser" title="HttpHeaderParser.this.type">insertRemainingCharsAsNewNodes</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$23" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$18">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.header" title="akka.http.model.HttpHeader" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$19">header</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$20">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.endIx" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$21">endIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.valueIx" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.x$22">valueIx</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span> case <a href="#akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.type">OutOfTrieSpaceException</a> ⇒ <span class="comment">/* if we cannot insert then we simply don't */</span> <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.resultHeader_=" title="(x$1: akka.http.model.HttpHeader)Unit">resultHeader</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.header" title="akka.http.model.HttpHeader">header</a>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch.endIx" title="Int">endIx</a>
    <span class="delimiter">}</span>
    val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.node">node</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int)Char">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4" title="Int">nodeIx</a><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.node" title="Char">node</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span> match <span class="delimiter">{</span>
      case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// leaf node (or intermediate ValueBranch pointer)</span>
        val valueIx = <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span> <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.valueIx">-</a> <span title="Int(1)" class="int">1</span>
        <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int)AnyRef">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.valueIx" title="Int">valueIx</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case <a title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.branch">branch</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser.ValueBranch.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">ValueBranch</a>            ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser" title="HttpHeaderParser.this.type">parseHeaderValue</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.x$28" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.x$24">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.x$25">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.x$26">branch</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
          case <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.valueParser">valueParser</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.startValueBranch" title="(rootValueIx: Int, valueParser: akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser)Int">startValueBranch</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.valueIx" title="Int">valueIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a><span class="delimiter">)</span> <span class="comment">// no header yet of this type</span>
          case <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader" title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type">EmptyHeader</a>                    ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.resultHeader_=" title="(x$1: akka.http.model.HttpHeader)Unit">resultHeader</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader" title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type">EmptyHeader</a>; <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a>
        <span class="delimiter">}</span>
      case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.nodeChar">nodeChar</a> ⇒
        val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.char">char</a> = <span title="akka.parboiled2.CharUtils.type">CharUtils</span>.<span title="(c: Char)Char">toLowerCase</span><span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a><span class="delimiter">)</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.char" title="Char">char</a> <span title="(x: Char)Boolean">==</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.node" title="Char">node</a><span class="delimiter">)</span> <span class="comment">// fast match, advance and descend</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine" title="(input: akka.util.ByteString, lineStart: Int)(cursor: Int, nodeIx: Int)Int">parseHeaderLine</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int">lineStart</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        else <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span> match <span class="delimiter">{</span>
          case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// header doesn't exist yet and has no model (since we have not yet seen a colon)</span>
            <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader" title="(input: akka.util.ByteString, lineStart: Int, cursor: Int, nodeIx: Int)Int">parseRawHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int">lineStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4" title="Int">nodeIx</a><span class="delimiter">)</span>
          case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.msb">msb</a> ⇒ <span class="comment">// branching node</span>
            val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.signum">signum</a> = math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.char" title="Char">char</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.nodeChar" title="Int">nodeChar</a><span class="delimiter">)</span>
            <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx" title="(msb: Int)Int">rowIx</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.msb" title="Int">msb</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.signum" title="Int">signum</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
              case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// header doesn't exist yet and has no model (otherwise we'd arrive at a value)</span>
                <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader" title="(input: akka.util.ByteString, lineStart: Int, cursor: Int, nodeIx: Int)Int">parseRawHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int">lineStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4" title="Int">nodeIx</a><span class="delimiter">)</span>
              case <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.subNodeIx">subNodeIx</a> ⇒ <span class="comment">// descend into branch and advance on char matches (otherwise descend but don't advance)</span>
                <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine" title="(input: akka.util.ByteString, lineStart: Int)(cursor: Int, nodeIx: Int)Int">parseHeaderLine</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int">lineStart</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">-</span> math.<span title="(x: Int)Int">abs</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.signum" title="Int">signum</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine.subNodeIx" title="=&gt; Int">subNodeIx</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(input: akka.util.ByteString, lineStart: Int, cursor: Int, nodeIx: Int)Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader">parseRawHeader</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.lineStart">lineStart</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.cursor">cursor</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.nodeIx">nodeIx</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx">colonIx</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon" title="(input: akka.util.ByteString, start: Int, maxHeaderNameEndIx: Int)(ix: Int)Int">scanHeaderNameAndReturnIndexOfColon</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.lineStart" title="Int">lineStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.lineStart" title="Int">lineStart</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderNameLength" title="=&gt; Int">maxHeaderNameLength</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.cursor" title="Int">cursor</a><span class="delimiter">)</span>
    val <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerName">headerName</a> = <a href="package.scala.html#akka.http.engine.parsing.package.asciiString" title="(input: akka.util.ByteString, start: Int, end: Int)String">asciiString</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.lineStart" title="Int">lineStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx" title="Int">colonIx</a><span class="delimiter">)</span>
    try <span class="delimiter">{</span>
      val <a title="akka.http.engine.parsing.HttpHeaderParser.RawHeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.valueParser">valueParser</a> = new <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.RawHeaderValueParser">RawHeaderValueParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderValueLength" title="=&gt; Int">maxHeaderValueLength</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.headerValueCacheLimit" title="(headerName: String)Int">headerValueCacheLimit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerName" title="String">headerName</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.RawHeaderValueParser">valueParser</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.cursor" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx" title="Int">colonIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.nodeIx" title="Int">nodeIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx" title="Int">colonIx</a><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine" title="(input: akka.util.ByteString, lineStart: Int)(cursor: Int, nodeIx: Int)Int">parseHeaderLine</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.lineStart" title="Int">lineStart</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.cursor" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.nodeIx" title="Int">nodeIx</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a href="#akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.type">OutOfTrieSpaceException</a> ⇒ <span class="comment">// if we cannot insert we drop back to simply creating new header instances</span>
        val <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerValue" title="(String, Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2" title="String" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerValue">headerValue</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.endIx">endIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser.type">scanHeaderValue</a><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2.x$33" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.input" title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2.x$29">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx" title="Int">colonIx</a> <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2.x$30">+</a> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.colonIx" title="Int">colonIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.x$2.x$31">+</a> <a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderValueLength" title="=&gt; Int">maxHeaderValueLength</a><span class="delimiter">)</span><span title="(String, Int) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;HttpHeaderParser.resultHeader_=" title="(x$1: akka.http.model.HttpHeader)Unit">resultHeader</a> = <a href="../../model/headers/headers.scala.html#akka.http.model.headers;RawHeader" title="(name: String, value: String)akka.http.model.headers.RawHeader">RawHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.headerValue" title="String">headerValue</a>.<span title="()String">trim</span><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;HttpHeaderParser.parseRawHeader.endIx" title="Int">endIx</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec
  private def <a title="(input: akka.util.ByteString, valueStart: Int, branch: akka.http.engine.parsing.HttpHeaderParser.ValueBranch)(cursor: Int, nodeIx: Int)Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue">parseHeaderValue</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.valueStart">valueStart</a>: <span title="Int">Int</span>, <a title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch">branch</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser.ValueBranch.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">ValueBranch</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4">cursor</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.valueStart" title="Int">valueStart</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5">nodeIx</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.branchRootNodeIx" title="=&gt; Int">branchRootNodeIx</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    def <a title="()Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader">parseAndInsertHeader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.header" title="(akka.http.model.HttpHeader, Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.x$3" title="akka.http.model.HttpHeader" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.header">header</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.x$3" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.endIx">endIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply" title="(input: akka.util.ByteString, valueStart: Int, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)(akka.http.model.HttpHeader, Int)">parser</a><span title="(akka.http.model.HttpHeader, Int) @unchecked" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.valueStart" title="Int">valueStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.warnOnIllegalHeader" title="akka.http.model.ErrorInfo =&gt; Unit">warnOnIllegalHeader</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.spaceLeft" title="=&gt; Boolean">spaceLeft</a><span class="delimiter">)</span>
        try <span class="delimiter">{</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.header" title="akka.http.model.HttpHeader">header</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.endIx" title="Int">endIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5" title="Int">nodeIx</a>, colonIx = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int, x: AnyRef)Unit">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueIx" title="=&gt; Int">valueIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.withValueCountIncreased" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.ValueBranch">withValueCountIncreased</a>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span> case <a href="#akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.type">OutOfTrieSpaceException</a> ⇒ <span class="comment">/* if we cannot insert then we simply don't */</span> <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.resultHeader_=" title="(x$1: akka.http.model.HttpHeader)Unit">resultHeader</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.header" title="akka.http.model.HttpHeader">header</a>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader.endIx" title="Int">endIx</a>
    <span class="delimiter">}</span>
    val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.char">char</a> = <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int">cursor</a><span class="delimiter">)</span>
    val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.node">node</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int)Char">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5" title="Int">nodeIx</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.char" title="Char">char</a> <span title="(x: Char)Boolean">==</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.node" title="Char">node</a><span class="delimiter">)</span> <span class="comment">// fast match, descend</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue" title="(input: akka.util.ByteString, valueStart: Int, branch: akka.http.engine.parsing.HttpHeaderParser.ValueBranch)(cursor: Int, nodeIx: Int)Int">parseHeaderValue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.valueStart" title="Int">valueStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    else <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span> match <span class="delimiter">{</span>
      case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader" title="()Int">parseAndInsertHeader</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.msb">msb</a> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.node" title="Char">node</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span> match <span class="delimiter">{</span>
        case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// leaf node</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.resultHeader_=" title="(x$1: akka.http.model.HttpHeader)Unit">resultHeader</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int)AnyRef">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.msb" title="Int">msb</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.http.model.HttpHeader" class="delimiter">[</span><a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader" title="akka.http.model.HttpHeader">HttpHeader</a><span class="delimiter">]</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int">cursor</a>
        case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.nodeChar">nodeChar</a> ⇒ <span class="comment">// branching node</span>
          val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.signum">signum</a> = math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.char" title="Char">char</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.nodeChar" title="Int">nodeChar</a><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx" title="(msb: Int)Int">rowIx</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.msb" title="Int">msb</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.signum" title="Int">signum</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.parseAndInsertHeader" title="()Int">parseAndInsertHeader</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// header doesn't exist yet</span>
            case <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.subNodeIx">subNodeIx</a> ⇒ <span class="comment">// descend into branch and advance on char matches (otherwise descend but don't advance)</span>
              <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue" title="(input: akka.util.ByteString, valueStart: Int, branch: akka.http.engine.parsing.HttpHeaderParser.ValueBranch)(cursor: Int, nodeIx: Int)Int">parseHeaderValue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.valueStart" title="Int">valueStart</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$5.branch" title="akka.http.engine.parsing.HttpHeaderParser.ValueBranch">branch</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue$default$4" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">-</span> math.<span title="(x: Int)Int">abs</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.signum" title="Int">signum</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderValue.subNodeIx" title="=&gt; Int">subNodeIx</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a value into the cache trie.
   * CAUTION: this method must only be called if:
   *  - the trie is not empty (use `insertRemainingCharsAsNewNodes` for inserting the very first value)
   *  - the input does not contain illegal characters
   *  - the input is not a prefix of an already stored value, i.e. the input must be properly terminated (CRLF or colon)
   */</span>
  @tailrec
  private def <a title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit" id="akka.http.engine.parsing;HttpHeaderParser.insert">insert</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="AnyRef" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$3">cursor</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$4">endIx</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">length</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$5">nodeIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert$default$6">colonIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.insert.char">char</a> =
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6" title="Int">colonIx</a><span class="delimiter">)</span> <span title="akka.parboiled2.CharUtils.type">CharUtils</span>.<span title="(c: Char)Char">toLowerCase</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="(idx: Int)Byte">input</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span><span class="delimiter">)</span>
      else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="(idx: Int)Byte">input</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span>
      else <span title="Char('\00')" class="char">'\u0000'</span>
    val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.insert.node">node</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int)Char">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$5" title="Int">nodeIx</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.char" title="Char">char</a> <span title="(x: Char)Boolean">==</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.node" title="Char">node</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value" title="AnyRef">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$5" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6" title="Int">colonIx</a><span class="delimiter">)</span> <span class="comment">// fast match, descend into only subnode</span>
    else <span class="delimiter">{</span>
      val nodeChar = <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.node" title="Char">node</a> <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert.nodeChar">&amp;</a> <span title="Int(255)" class="int">0xFF</span>
      val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert.signum">signum</a> = math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.char" title="Char">char</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.nodeChar" title="Int">nodeChar</a><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span> match <span class="delimiter">{</span>
        case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// input doesn't exist yet in the trie, insert</span>
          val <span title="Int">valueIx</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex" title="=&gt; Int">newValueIndex</a> <span class="comment">// compute early in order to trigger OutOfTrieSpaceExceptions before any change</span>
          val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert.rowIx">rowIx</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newBranchDataRowIndex" title="=&gt; Int">newBranchDataRowIndex</a>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.unshareIfRequired" title="()Unit">unshareIfRequired</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int, x: Char)Unit">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$5" title="Int">nodeIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.nodeBits" title="(rowIx: Int, char: Int)Char">nodeBits</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.rowIx" title="Int">rowIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.nodeChar" title="Int">nodeChar</a><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int, x: Short)Unit">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.rowIx" title="Int">rowIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$5" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Short">toShort</span>
          <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int, x: Short)Unit">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.rowIx" title="Int">rowIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.signum" title="Int">signum</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a>.<span title="=&gt; Short">toShort</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit">insertRemainingCharsAsNewNodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value" title="AnyRef">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a>, <span title="Int">valueIx</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6" title="Int">colonIx</a><span class="delimiter">)</span>
        case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert.msb">msb</a> ⇒
          if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.nodeChar" title="Int">nodeChar</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// leaf node</span>
            <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a>, <span title="String(&quot;Cannot insert key of which a prefix already has a value&quot;)" class="string">&quot;Cannot insert key of which a prefix already has a value&quot;</span><span class="delimiter">)</span>
            <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int, x: AnyRef)Unit">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.msb" title="Int">msb</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value" title="AnyRef">value</a> <span class="comment">// override existing entry</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            val branchIndex = <a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx" title="(msb: Int)Int">rowIx</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.msb" title="Int">msb</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insert.branchIndex">+</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.signum" title="Int">signum</a>
            <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.branchIndex" title="Int">branchIndex</a><span class="delimiter">)</span> match <span class="delimiter">{</span> <span class="comment">// branching node</span>
              case <span title="Int(0)" class="int">0</span> ⇒ <span class="comment">// branch doesn't exist yet, create</span>
                val <span title="Int">valueIx</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex" title="=&gt; Int">newValueIndex</a> <span class="comment">// compute early in order to trigger OutOfTrieSpaceExceptions before any change</span>
                <a href="#akka.http.engine.parsing;HttpHeaderParser.unshareIfRequired" title="()Unit">unshareIfRequired</a><span class="delimiter">(</span><span class="delimiter">)</span>
                <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int, x: Short)Unit">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.branchIndex" title="Int">branchIndex</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a>.<span title="=&gt; Short">toShort</span> <span class="comment">// make the previously implicit &quot;equals&quot; sub node explicit</span>
                <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit">insertRemainingCharsAsNewNodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value" title="AnyRef">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a>, <span title="Int">valueIx</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6" title="Int">colonIx</a><span class="delimiter">)</span>
              case <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.insert.subNodeIx">subNodeIx</a> ⇒ <span class="comment">// descend, but advance only on match</span>
                <a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6.value" title="AnyRef">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">-</span> math.<span title="(x: Int)Int">abs</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insert.signum" title="Int">signum</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$4" title="Int">endIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert.subNodeIx" title="=&gt; Int">subNodeIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$6" title="Int">colonIx</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts a value into the cache trie as new nodes.
   * CAUTION: this method must only be called if the trie data have already been &quot;unshared&quot;!
   */</span>
  @tailrec
  private def <a title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes">insertRemainingCharsAsNewNodes</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="AnyRef" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.value">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3">cursor</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$4">endIx</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">length</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$5">valueIx</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex" title="=&gt; Int">newValueIndex</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6">colonIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.newNodeIx">newNodeIx</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newNodeIndex" title="=&gt; Int">newNodeIndex</a>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int">cursor</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$4" title="Int">endIx</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.c">c</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.input" title="(idx: Int)Byte">input</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int">cursor</a><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span>
      val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.char">char</a> = if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int">cursor</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6" title="Int">colonIx</a><span class="delimiter">)</span> <span title="akka.parboiled2.CharUtils.type">CharUtils</span>.<span title="(c: Char)Char">toLowerCase</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.c" title="Char">c</a><span class="delimiter">)</span> else <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.c" title="Char">c</a>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int, x: Char)Unit">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.newNodeIx" title="Int">newNodeIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.char" title="Char">char</a>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit">insertRemainingCharsAsNewNodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.value" title="AnyRef">value</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$4" title="Int">endIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$5" title="Int">valueIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6" title="Int">colonIx</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int, x: AnyRef)Unit">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$5" title="Int">valueIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$6.value" title="AnyRef">value</a>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int, x: Char)Unit">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes.newNodeIx" title="Int">newNodeIx</a><span class="delimiter">)</span> = <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$5" title="Int">valueIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="()Unit" id="akka.http.engine.parsing;HttpHeaderParser.unshareIfRequired">unshareIfRequired</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$9" title="Boolean">trieIsPrivate</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a> = <span title="(x$1: Array[Char], x$2: Int)Array[Char]">copyOf</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="Array[Short]">branchData</a> = <span title="(x$1: Array[Short], x$2: Int)Array[Short]">copyOf</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="Array[Short]">branchData</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="Array[Short]">branchData</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="Array[AnyRef]">values</a> = <span title="(x$1: Array[AnyRef], x$2: Int)Array[AnyRef]">copyOf</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="Array[AnyRef]">values</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="Array[AnyRef]">values</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$9" title="Boolean">trieIsPrivate</a> = true
    <span class="delimiter">}</span>

  private def <a title="=&gt; Int" id="akka.http.engine.parsing;HttpHeaderParser.newNodeIndex">newNodeIndex</a>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.newNodeIndex.index">index</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.newNodeIndex.index" title="Int">index</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a> = <span title="(x$1: Array[Char], x$2: Int)Array[Char]">copyOf</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="Array[Char]">nodes</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.newNodeIndex.index" title="Int">index</a> <span title="(x: Int)Int">*</span> <span title="Int(3)" class="int">3</span> <span title="(x: Int)Int">/</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newNodeIndex.index" title="Int">index</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.newNodeIndex.index" title="Int">index</a>
  <span class="delimiter">}</span>

  private def <a title="=&gt; Int" id="akka.http.engine.parsing;HttpHeaderParser.newBranchDataRowIndex">newBranchDataRowIndex</a>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.newBranchDataRowIndex.index">index</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$6" title="Int">branchDataCount</a>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$6" title="Int">branchDataCount</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newBranchDataRowIndex.index" title="Int">index</a> <span title="(x: Int)Int">+</span> <span title="Int(3)" class="int">3</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.newBranchDataRowIndex.index" title="Int">index</a>
  <span class="delimiter">}</span>

  private def <a title="=&gt; Int" id="akka.http.engine.parsing;HttpHeaderParser.newValueIndex">newValueIndex</a>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.newValueIndex.index">index</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$8" title="Int">valueCount</a>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex.index" title="Int">index</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="Array[AnyRef]">values</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$8" title="Int">valueCount</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex.index" title="Int">index</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.newValueIndex.index" title="Int">index</a>
    <span class="delimiter">}</span> else throw <a href="#akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.readResolve" title="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.type">OutOfTrieSpaceException</a>
  <span class="delimiter">}</span>

  private def <a title="(msb: Int)Int" id="akka.http.engine.parsing;HttpHeaderParser.rowIx">rowIx</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.rowIx.msb">msb</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx.msb" title="Int">msb</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <span title="Int(3)" class="int">3</span>
  private def <a title="(rowIx: Int, char: Int)Char" id="akka.http.engine.parsing;HttpHeaderParser.nodeBits">nodeBits</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.nodeBits.rowIx">rowIx</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.nodeBits.char">char</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.nodeBits.rowIx" title="Int">rowIx</a> <span title="(x: Int)Int">/</span> <span title="Int(3)" class="int">3</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span> <span title="(x: Int)Int">|</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.nodeBits.char" title="Int">char</a><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span>

  <span class="comment">/**
   * Renders the trie structure into an ASCII representation.
   */</span>
  def <a title="=&gt; String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie">formatTrie</a>: <span title="String">String</span> = <span class="delimiter">{</span>
    def <a title="(nodeIx: Int)(Seq[List[String]], Int)" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse">recurse</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse$default$1">nodeIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>: <span title="(Seq[List[String]], Int)" class="delimiter">(</span>Seq<span class="delimiter">[</span>List<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
      def <a title="(subNodeIx: Int, p1: String, p2: String, p3: String)(Seq[List[String]], Int)" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines">recurseAndPrefixLines</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.subNodeIx">subNodeIx</a>: <span title="Int">Int</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p1">p1</a>: <span title="String">String</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p2">p2</a>: <span title="String">String</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p3">p3</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.lines" title="(Seq[List[String]], Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.x$4" title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.lines">lines</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.x$4" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.mainIx">mainIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse" title="(nodeIx: Int)(Seq[List[String]], Int)">recurse</a><span title="(Seq[List[String]], Int) @unchecked" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.subNodeIx" title="Int">subNodeIx</a><span class="delimiter">)</span>
        val prefixedLines = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.lines" title="Seq[List[String]]">lines</a>.<span title="(implicit bf: scala.collection.generic.CanBuildFrom[Seq[List[String]],(List[String], Int),Seq[(List[String], Int)]])Seq[(List[String], Int)]">zipWithIndex</span> <a title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines">map</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.x0$1" title="List[String]" class="delimiter">{</a>
          case <span class="delimiter">(</span><a title="List[String]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.line">line</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.ix">ix</a><span class="delimiter">)</span> ⇒ <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.ix" title="Int">ix</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.mainIx" title="Int">mainIx</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p1" title="String">p1</a> else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.ix" title="Int">ix</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.mainIx" title="Int">mainIx</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p3" title="String">p3</a> else <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.p2" title="String">p2</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.x$5" title="(x: String)List[String]">::</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines.$anonfun.line" title="List[String]">line</a>
        <span class="delimiter">}</span>
        <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.prefixedLines" title="(self: Seq[List[String]])ArrowAssoc[Seq[List[String]]]">prefixedLines</a> <span title="(y: Int)(Seq[List[String]], Int)">-&gt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines.mainIx" title="Int">mainIx</a>
      <span class="delimiter">}</span>
      def <a title="(dataIx: Int, p1: String, p2: String, p3: String)Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines">branchLines</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.dataIx">dataIx</a>: <span title="Int">Int</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p1">p1</a>: <span title="String">String</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p2">p2</a>: <span title="String">String</span>, <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p3">p3</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.dataIx" title="Int">dataIx</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span title="Int(0)" class="int">0</span>         ⇒ <span title="scala.collection.Seq.type">Seq</span>.<span title="Seq[Nothing]">empty</span>
        case <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.subNodeIx">subNodeIx</a> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines" title="(subNodeIx: Int, p1: String, p2: String, p3: String)(Seq[List[String]], Int)">recurseAndPrefixLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.subNodeIx" title="=&gt; Int">subNodeIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p1" title="String">p1</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p2" title="String">p2</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines.p3" title="String">p3</a><span class="delimiter">)</span>.<span title="=&gt; Seq[List[String]]">_1</span>
      <span class="delimiter">}</span>
      val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.node">node</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int)Char">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse$default$1" title="Int">nodeIx</a><span class="delimiter">)</span>
      val <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.char">char</a> = <a href="package.scala.html#akka.http.engine.parsing.package.escape" title="(c: Char)String">escape</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.node" title="Char">node</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span> match <span class="delimiter">{</span>
        case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines" title="(subNodeIx: Int, p1: String, p2: String, p3: String)(Seq[List[String]], Int)">recurseAndPrefixLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse$default$1" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.char" title="String">char</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span>, <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span><span class="delimiter">)</span>
        case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.msb">msb</a> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.node" title="Char">node</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span> match <span class="delimiter">{</span>
          case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int)AnyRef">values</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.msb" title="Int">msb</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case ValueBranch<span class="delimiter">(</span>_, <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.valueParser">valueParser</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchRootNodeIx">branchRootNodeIx</a>, _<span class="delimiter">)</span> ⇒
              val pad = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; &quot;</span> <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.pad">*</a> <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="=&gt; String">headerName</a>.<span title="()Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
              <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines" title="(subNodeIx: Int, p1: String, p2: String, p3: String)(Seq[List[String]], Int)">recurseAndPrefixLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchRootNodeIx" title="Int">branchRootNodeIx</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.pad" title="String">pad</a>, <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="=&gt; String">headerName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)-&quot;)" class="string">&quot;)-&quot;</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.pad" title="String">pad</a><span class="delimiter">)</span>
            case <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.vp">vp</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a> ⇒ <span title="(elems: List[String]*)Seq[List[String]]">Seq</span><span title="(self: Seq[List[String]])ArrowAssoc[Seq[List[String]]]" class="delimiter">(</span><span title="String(&quot; (&quot;)" class="string">&quot; (&quot;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$8" title="(x: String)List[String]">::</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.vp" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">vp</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="=&gt; String">headerName</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$7" title="(x: String)List[String]">::</a> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$6" title="(x: String)List[String]">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span title="(y: Int)(Seq[List[String]], Int)">-&gt;</span> <span title="Int(0)" class="int">0</span>
            case <span title="akka.http.model.headers.RawHeader">value</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;RawHeader" title="akka.http.model.headers.RawHeader">RawHeader</a>      ⇒ <span title="(elems: List[String]*)Seq[List[String]]">Seq</span><span title="(self: Seq[List[String]])ArrowAssoc[Seq[List[String]]]" class="delimiter">(</span><span title="String(&quot; *&quot;)" class="string">&quot; *&quot;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$10" title="(x: String)List[String]">::</a> <span title="akka.http.model.headers.RawHeader">value</span>.<a href="../../util/Rendering.scala.html#akka.http.util;ToStringRenderable.toString" title="()String">toString</a> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$9" title="(x: String)List[String]">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span title="(y: Int)(Seq[List[String]], Int)">-&gt;</span> <span title="Int(0)" class="int">0</span>
            case <span title="AnyRef">value</span>                 ⇒ <span title="(elems: List[String]*)Seq[List[String]]">Seq</span><span title="(self: Seq[List[String]])ArrowAssoc[Seq[List[String]]]" class="delimiter">(</span><span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$12" title="(x: String)List[String]">::</a> <span title="AnyRef">value</span>.<span title="()String">toString</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$11" title="(x: String)List[String]">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span title="(y: Int)(Seq[List[String]], Int)">-&gt;</span> <span title="Int(0)" class="int">0</span>
          <span class="delimiter">}</span>
          case <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.nodeChar">nodeChar</a> ⇒
            val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.rix">rix</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx" title="(msb: Int)Int">rowIx</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.msb" title="Int">msb</a><span class="delimiter">)</span>
            val <a title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.preLines">preLines</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines" title="(dataIx: Int, p1: String, p2: String, p3: String)Seq[List[String]]">branchLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.rix" title="Int">rix</a>, <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span>, <span title="String(&quot;┌─&quot;)" class="string">&quot;┌─&quot;</span>, <span title="String(&quot;| &quot;)" class="string">&quot;| &quot;</span><span class="delimiter">)</span>
            val <a title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.postLines">postLines</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.branchLines" title="(dataIx: Int, p1: String, p2: String, p3: String)Seq[List[String]]">branchLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.rix" title="Int">rix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span>, <span title="String(&quot;| &quot;)" class="string">&quot;| &quot;</span>, <span title="String(&quot;└─&quot;)" class="string">&quot;└─&quot;</span>, <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span><span class="delimiter">)</span>
            val <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.p1">p1</a> = if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.preLines" title="Seq[List[String]]">preLines</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span title="String(&quot;| &quot;)" class="string">&quot;| &quot;</span> else <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span>
            val <a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.p3">p3</a> = if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.postLines" title="Seq[List[String]]">postLines</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span title="String(&quot;| &quot;)" class="string">&quot;| &quot;</span> else <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span>
            val <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.matchLines" title="(Seq[List[String]], Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$13" title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.matchLines">matchLines</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.x$13" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.mainLineIx">mainLineIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.recurseAndPrefixLines" title="(subNodeIx: Int, p1: String, p2: String, p3: String)(Seq[List[String]], Int)">recurseAndPrefixLines</a><span title="(Seq[List[String]], Int) @unchecked" class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span title="=&gt; Int" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.rix" title="Int">rix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.p1" title="String">p1</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.char" title="String">char</a> <span title="(x$1: Any)String">+</span> <span title="Char('-')" class="char">'-'</span>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.p3" title="String">p3</a><span class="delimiter">)</span>
            <span title="(_1: Seq[List[String]], _2: Int)(Seq[List[String]], Int)" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.preLines" title="Seq[List[String]]">preLines</a> <span title="(that: scala.collection.GenTraversableOnce[List[String]])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[List[String]],List[String],Seq[List[String]]])Seq[List[String]]">++</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.matchLines" title="Seq[List[String]]">matchLines</a> <span title="(that: scala.collection.GenTraversableOnce[List[String]])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[List[String]],List[String],Seq[List[String]]])Seq[List[String]]">++</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.postLines" title="Seq[List[String]]">postLines</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.mainLineIx" title="Int">mainLineIx</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse.preLines" title="Seq[List[String]]">preLines</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    val <a title="StringBuilder" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.sb">sb</a> = new <span title="StringBuilder">JStringBuilder</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.lines" title="(Seq[List[String]], Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.x$14" title="Seq[List[String]]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.lines">lines</a>, <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.x$14" title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.mainLineIx">mainLineIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.recurse" title="(nodeIx: Int)(Seq[List[String]], Int)">recurse</a><span title="(Seq[List[String]], Int) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.lines" title="Seq[List[String]]">lines</a>.<span title="(implicit bf: scala.collection.generic.CanBuildFrom[Seq[List[String]],(List[String], Int),Seq[(List[String], Int)]])Seq[(List[String], Int)]">zipWithIndex</span> <span title="(f: ((List[String], Int)) =&gt; StringBuilder)Unit">foreach</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.x0$2" title="StringBuilder" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="List[String]" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.line">line</a>, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.ix">ix</a><span class="delimiter">)</span> ⇒
        <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.sb" title="StringBuilder">sb</a>.<span title="(x$1: Char)StringBuilder">append</span><span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.ix" title="Int">ix</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.mainLineIx" title="Int">mainLineIx</a><span class="delimiter">)</span> <span title="Char('-')" class="char">'-'</span> else <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.line" title="List[String]">line</a> <span title="(f: String =&gt; StringBuilder)Unit">foreach</span> <span class="delimiter">(</span><a title="String" id="akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.$anonfun.s">s</a> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.sb" title="StringBuilder">sb</a>.<span title="(x$1: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.$anonfun.$anonfun.s" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.sb" title="StringBuilder">sb</a>.<span title="(x$1: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char('\n')" class="char">'\n'</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.formatTrie.sb" title="StringBuilder">sb</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the number of header values stored per header type.
   */</span>
  def <a title="=&gt; Map[String,Int]" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram">contentHistogram</a>: <span title="Map[String,Int]">Map</span><span class="delimiter">[</span>String, Int<span class="delimiter">]</span> = <span class="delimiter">{</span>
    def <a title="(nodeIx: Int)Map[String,Int]" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build">build</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build$default$1">nodeIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>: <span title="Map[String,Int]">Map</span><span class="delimiter">[</span>String, Int<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val <a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.node">node</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="(i: Int)Char">nodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build$default$1" title="Int">nodeIx</a><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.node" title="Char">node</a> <span title="(x: Int)Int">&gt;&gt;&gt;</span> <span title="Int(8)" class="int">8</span> match <span class="delimiter">{</span>
        case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build" title="(nodeIx: Int)Map[String,Int]">build</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build$default$1" title="Int">nodeIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        case <span title="Int">msb</span> if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.node" title="Char">node</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(i: Int)AnyRef">values</a><span class="delimiter">(</span><span title="Int">msb</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case ValueBranch<span class="delimiter">(</span>_, <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.parser">parser</a>, _, <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.count">count</a><span class="delimiter">)</span> ⇒ <span title="(elems: (String, Int)*)scala.collection.immutable.Map[String,Int]">Map</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.parser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">parser</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="(self: String)ArrowAssoc[String]">headerName</a> <span title="(y: Int)(String, Int)">-&gt;</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.count" title="Int">count</a><span class="delimiter">)</span>
          case _                                ⇒ <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>
        <span class="delimiter">}</span>
        case <span title="Int">msb</span> ⇒
          def <a title="(ix: Int)Map[String,Int]" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch">branch</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch.ix">ix</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Map[String,Int]">Map</span><span class="delimiter">[</span>String, Int<span class="delimiter">]</span> = if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch.ix" title="Int">ix</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build" title="(nodeIx: Int)Map[String,Int]">build</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch.ix" title="Int">ix</a><span class="delimiter">)</span> else <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span>
          val <a title="Int" id="akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.rix">rix</a> = <a href="#akka.http.engine.parsing;HttpHeaderParser.rowIx" title="(msb: Int)Int">rowIx</a><span class="delimiter">(</span><span title="Int">msb</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch" title="(ix: Int)Map[String,Int]">branch</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span title="=&gt; Int" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.rix" title="Int">rix</a> <span title="(x: Int)Int">+</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, Int)])scala.collection.immutable.Map[String,Int]">++</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch" title="(ix: Int)Map[String,Int]">branch</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span title="=&gt; Int" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.rix" title="Int">rix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(String, Int)])scala.collection.immutable.Map[String,Int]">++</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.branch" title="(ix: Int)Map[String,Int]">branch</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="(i: Int)Short">branchData</a><span title="=&gt; Int" class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build.rix" title="Int">rix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#akka.http.engine.parsing;HttpHeaderParser.contentHistogram.build" title="(nodeIx: Int)Map[String,Int]">build</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a string representation of the raw trie data.
   */</span>
  def <a title="=&gt; String" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie">formatRawTrie</a>: <span title="String">String</span> = <span class="delimiter">{</span>
    def <a title="(c: Char)String" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char">char</a><span class="delimiter">(</span><a title="Char" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char.c">c</a>: <span title="Char">Char</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char.c" title="Char">c</a> <span title="(x: Int)Int">&gt;&gt;</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span>.<span title="()String">toString</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char.c" title="Char">c</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char.c" title="Char">c</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span> else <span title="String(&quot;/Ω&quot;)" class="string">&quot;/Ω&quot;</span><span class="delimiter">)</span>
    <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;nodes: &quot;)">nodes: $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$3" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">nodes</a> <span title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">take</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.char" title="(c: Char)String">char</a> <span title="(sep: String)String">mkString</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">}</span><span title="String(&quot;\\n&quot;)" class="string">\n&quot;</span> <span title="(x$1: Any)String">+</span>
      <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;branchData: &quot;)">branchData: $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$5" title="implicit scala.Predef.shortArrayOps : (xs: Array[Short])scala.collection.mutable.ArrayOps[Short]">branchData</a> <span title="implicit scala.Predef.shortArrayOps : (xs: Array[Short])scala.collection.mutable.ArrayOps[Short]">take</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$6" title="Int">branchDataCount</a> <span title="(size: Int)Iterator[Array[Short]]">grouped</span> <span title="Int(3)" class="int">3</span> <span title="(f: Array[Short] =&gt; String)Iterator[String]">map</span> <a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.x0$3" title="String" class="delimiter">{</a> case <a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.<unapply-selector>" title="(x: Array[Short])Option[IndexedSeq[Short]]">Array</a><span class="delimiter">(</span><a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.a">a</a>, <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.b">b</a>, <a title="Short" id="akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.c">c</a><span class="delimiter">)</span> ⇒ <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.a" title="Short">a</a><span title="String(&quot;/&quot;)">/$</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.b" title="Short">b</a><span title="String(&quot;/&quot;)">/$</span><a href="#akka.http.engine.parsing;HttpHeaderParser.formatRawTrie.$anonfun.c" title="Short">c</a><span title="String(&quot;&quot;)" class="string">&quot;</span> <span class="delimiter">}</span> <span title="(sep: String)String">mkString</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">}</span><span title="String(&quot;\\n&quot;)" class="string">\n&quot;</span> <span title="(x$1: Any)String">+</span>
      <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;values: &quot;)">values: $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$7" title="(xs: Array[AnyRef])scala.collection.mutable.ArrayOps[AnyRef]">values</a> <span title="(xs: Array[AnyRef])scala.collection.mutable.ArrayOps[AnyRef]">take</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$8" title="Int">valueCount</a> <span title="(sep: String)String">mkString</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a string representation of the trie structure size.
   */</span>
  def <a title="=&gt; String" id="akka.http.engine.parsing;HttpHeaderParser.formatSizes">formatSizes</a>: <span title="String">String</span> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$4" title="Int">nodeCount</a><span title="String(&quot; nodes, &quot;)"> nodes, $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$6" title="Int">branchDataCount</a> <span title="(x: Int)Int">/</span> <span title="Int(3)" class="int">3</span><span class="delimiter">}</span><span title="String(&quot; branchData rows, &quot;)"> branchData rows, $</span><a href="#akka.http.engine.parsing.HttpHeaderParser.<init>$default$8" title="Int">valueCount</a><span title="String(&quot; values&quot;)" class="string"> values&quot;</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> object <a title="akka.http.engine.parsing.HttpHeaderParser.type" id="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a> <a href="#akka.http.engine.parsing.HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser.type" class="delimiter">{</a>
  import <a href="SpecializedHeaderValueParsers.scala.html#akka.http.engine.parsing.SpecializedHeaderValueParsers" title="akka.http.engine.parsing.SpecializedHeaderValueParsers.type">SpecializedHeaderValueParsers</a>._

  trait <a title="trait Settings extends AnyRef" id="akka.http.engine.parsing.HttpHeaderParser;Settings">Settings</a> <span class="delimiter">{</span>
    def <a title="=&gt; Int" id="akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderNameLength">maxHeaderNameLength</a>: <span title="Int">Int</span>
    def <a title="=&gt; Int" id="akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderValueLength">maxHeaderValueLength</a>: <span title="Int">Int</span>
    def <a title="=&gt; Int" id="akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderCount">maxHeaderCount</a>: <span title="Int">Int</span>
    def <a title="(headerName: String)Int" id="akka.http.engine.parsing.HttpHeaderParser;Settings.headerValueCacheLimit">headerValueCacheLimit</a><span class="delimiter">(</span><a title="String" id="akka.http.engine.parsing.HttpHeaderParser;Settings.headerValueCacheLimit.headerName">headerName</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Int">Int</span>
  <span class="delimiter">}</span>

  object <a title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader">EmptyHeader</a> extends <a href="../../model/HttpHeader.scala.html#akka.http.model;HttpHeader" title="akka.http.model.HttpHeader">HttpHeader</a> <span class="delimiter">{</span>
    def <a title="()String" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.name">name</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    def <a title="()String" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.lowercaseName">lowercaseName</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    def <a title="()String" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.value">value</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    def <a title="[R &lt;: akka.http.util.Rendering](r: R)r.type" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.render">render</a><span class="delimiter">[</span><a title=" &lt;: akka.http.util.Rendering" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.render;R">R</a> &lt;: Rendering<span class="delimiter">]</span><span class="delimiter">(</span><a title="R" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.render.r">r</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.render;R" title="R">R</a><span class="delimiter">)</span>: r.type = <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.render.r" title="R">r</a>
    override def <a title="()String" id="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.toString">toString</a> = <span title="String(&quot;EmptyHeader&quot;)" class="string">&quot;EmptyHeader&quot;</span>
  <span class="delimiter">}</span>

  private def <a title="=&gt; Seq[String]" id="akka.http.engine.parsing.HttpHeaderParser.predefinedHeaders">predefinedHeaders</a> = <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span>
    <span title="String(&quot;Accept: *&quot;)" class="string">&quot;Accept: *&quot;</span>,
    <span title="String(&quot;Accept: */*&quot;)" class="string">&quot;Accept: */*&quot;</span>,
    <span title="String(&quot;Connection: Keep-Alive&quot;)" class="string">&quot;Connection: Keep-Alive&quot;</span>,
    <span title="String(&quot;Connection: close&quot;)" class="string">&quot;Connection: close&quot;</span>,
    <span title="String(&quot;Connection: keep-alive&quot;)" class="string">&quot;Connection: keep-alive&quot;</span>,
    <span title="String(&quot;Content-Length: 0&quot;)" class="string">&quot;Content-Length: 0&quot;</span>,
    <span title="String(&quot;Cache-Control: max-age=0&quot;)" class="string">&quot;Cache-Control: max-age=0&quot;</span>,
    <span title="String(&quot;Cache-Control: no-cache&quot;)" class="string">&quot;Cache-Control: no-cache&quot;</span>,
    <span title="String(&quot;Expect: 100-continue&quot;)" class="string">&quot;Expect: 100-continue&quot;</span><span class="delimiter">)</span>

  def <a title="(settings: akka.http.engine.parsing.HttpHeaderParser.Settings)(warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.apply">apply</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.HttpHeaderParser.Settings" id="akka.http.engine.parsing.HttpHeaderParser.apply$default$2.settings">settings</a>: HttpHeaderParser.<a href="#akka.http.engine.parsing.HttpHeaderParser;Settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">Settings</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing.HttpHeaderParser.apply$default$2">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit = <a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing.HttpHeaderParser.apply$default$2.$anonfun.info">info</a> ⇒ throw new <a href="../../model/ErrorInfo.scala.html#akka.http.model;IllegalHeaderException" title="akka.http.model.IllegalHeaderException">IllegalHeaderException</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.apply$default$2.$anonfun.info" title="akka.http.model.ErrorInfo">info</a><span class="delimiter">)</span><span class="delimiter">)</span> =
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime" title="(parser: akka.http.engine.parsing.HttpHeaderParser)akka.http.engine.parsing.HttpHeaderParser">prime</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.unprimed" title="(settings: akka.http.engine.parsing.HttpHeaderParser.Settings, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)akka.http.engine.parsing.HttpHeaderParser">unprimed</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.apply$default$2.settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.apply$default$2" title="akka.http.model.ErrorInfo =&gt; Unit">warnOnIllegalHeader</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(settings: akka.http.engine.parsing.HttpHeaderParser.Settings, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.unprimed">unprimed</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.HttpHeaderParser.Settings" id="akka.http.engine.parsing.HttpHeaderParser.unprimed.settings">settings</a>: HttpHeaderParser.<a href="#akka.http.engine.parsing.HttpHeaderParser;Settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">Settings</a>, <a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing.HttpHeaderParser.unprimed.warnOnIllegalHeader">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit<span class="delimiter">)</span> =
    new <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.unprimed.settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.unprimed.warnOnIllegalHeader" title="akka.http.model.ErrorInfo =&gt; Unit">warnOnIllegalHeader</a><span class="delimiter">)</span>

  def <a title="(parser: akka.http.engine.parsing.HttpHeaderParser)akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.prime">prime</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.prime.parser">parser</a>: <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a> = <span class="delimiter">{</span>
    val <a title="Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]" id="akka.http.engine.parsing.HttpHeaderParser.prime.valueParsers">valueParsers</a>: <span title="Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]">Seq</span><span class="delimiter">[</span>HeaderValueParser<span class="delimiter">]</span> =
      <a href="../../model/parser/HeaderParser.scala.html#akka.http.model.parser.HeaderParser" title="akka.http.model.parser.HeaderParser.type">HeaderParser</a>.<a href="../../model/parser/HeaderParser.scala.html#akka.http.model.parser.HeaderParser.ruleNames" title="=&gt; scala.collection.immutable.Seq[String]">ruleNames</a>.<span title="(f: String =&gt; akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[String],akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser,Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]])Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]">map</span> <span class="delimiter">{</span> <a title="String" id="akka.http.engine.parsing.HttpHeaderParser.prime.valueParsers.$anonfun.name">name</a> ⇒
        new <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser">ModelledHeaderValueParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.valueParsers.$anonfun.name" title="String">name</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.settings" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.maxHeaderValueLength" title="=&gt; Int">maxHeaderValueLength</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.settings" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.Settings">settings</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;Settings.headerValueCacheLimit" title="(headerName: String)Int">headerValueCacheLimit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.valueParsers.$anonfun.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser,Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[String],akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser,Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]]">breakOut</span><span class="delimiter">)</span>
    def <a title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder">insertInGoodOrder</a><span class="delimiter">(</span><a title="Seq[Any]" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3.items">items</a>: <span title="Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2">startIx</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3">endIx</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3.items" title="Seq[Any]">items</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3" title="Int">endIx</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int">startIx</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val pivot = <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int">startIx</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3" title="Int">endIx</a><span class="delimiter">)</span> <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.pivot">/</a> <span title="Int(2)" class="int">2</span>
        <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3.items" title="(idx: Int)Any">items</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.pivot" title="Int">pivot</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.valueParser">valueParser</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a> ⇒
            val insertName = <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">valueParser</a>.<a href="../../util/package.scala.html#akka.http.util.package.enhanceString_" title="implicit akka.http.util.package.enhanceString_ : (s: String)akka.http.util.EnhancedString">headerName</a>.<a href="../../util/EnhancedString.scala.html#akka.http.util;EnhancedString.toRootLowerCase" title="=&gt; String">toRootLowerCase</a> <a title="String" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.insertName">+</a> <span title="Char(':')" class="char">':'</span>
            if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit">insertRemainingCharsAsNewNodes</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$43" class="delimiter">(</a><span title="(string: String)akka.util.ByteString">ByteString</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$38" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.insertName" title="String">insertName</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$39">valueParser</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
            else <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$49" class="delimiter">(</a><span title="(string: String)akka.util.ByteString">ByteString</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$44" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.insertName" title="String">insertName</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.valueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$45">valueParser</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
          case <a title="String" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.header">header</a>: <span title="String">String</span> ⇒
            <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$4.lineStart" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$51">parseHeaderLine</a><a href="#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$53" class="delimiter">(</a><span title="(string: String)akka.util.ByteString">ByteString</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.x$50" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.header" title="String">header</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\r\nx&quot;)" class="string">&quot;\r\nx&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder" title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit">insertInGoodOrder</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3.items" title="Seq[Any]">items</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int">startIx</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.pivot" title="Int">pivot</a><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder" title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit">insertInGoodOrder</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3.items" title="Seq[Any]">items</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder.pivot" title="Int">pivot</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$3" title="Int">endIx</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder" title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit">insertInGoodOrder</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$56" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.valueParsers" title="Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]">valueParsers</a>.<span title="(f: akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser =&gt; String)(implicit ord: scala.math.Ordering[String])Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser]">sortBy</span><a title="Seq[akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$54" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.x$54.$anonfun.x$15" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">_</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="=&gt; String">headerName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder" title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit">insertInGoodOrder</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$59" class="delimiter">(</a><a href="SpecializedHeaderValueParsers.scala.html#akka.http.engine.parsing.SpecializedHeaderValueParsers.specializedHeaderValueParsers" title="Seq[akka.http.engine.parsing.SpecializedHeaderValueParsers.ContentLengthParser.type] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$57">specializedHeaderValueParsers</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder" title="(items: Seq[Any])(startIx: Int, endIx: Int)Unit">insertInGoodOrder</a><a href="#akka.http.engine.parsing.HttpHeaderParser.prime.insertInGoodOrder$default$2" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$62" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.predefinedHeaders" title="=&gt; Seq[String]">predefinedHeaders</a>.<a title="Seq[String] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$60">sorted</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$68" class="delimiter">(</a><span title="(string: String)akka.util.ByteString">ByteString</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$63" class="delimiter">(</a><span title="String(&quot;\r\n&quot;)" class="string">&quot;\r\n&quot;</span><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader" title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type" id="akka.http.engine.parsing.HttpHeaderParser.prime.x$64">EmptyHeader</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing.HttpHeaderParser.prime.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>
  <span class="delimiter">}</span>

  <span class="comment">// helper forwarders for testing</span>
  def <a title="(parser: akka.http.engine.parsing.HttpHeaderParser, input: akka.util.ByteString, value: AnyRef)Unit" id="akka.http.engine.parsing.HttpHeaderParser.insert">insert</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.insert.parser">parser</a>: <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.insert.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="AnyRef" id="akka.http.engine.parsing.HttpHeaderParser.insert.value">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.http.engine.parsing.HttpHeaderParser.insert.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.insert" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, nodeIx: Int, colonIx: Int)Unit">insert</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insert$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.insert.x$74" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.insert.input" title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.insert.x$69">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.insert.value" title="AnyRef" id="akka.http.engine.parsing.HttpHeaderParser.insert.x$70">value</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
  def <a title="(parser: akka.http.engine.parsing.HttpHeaderParser, input: akka.util.ByteString, value: AnyRef)Unit" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes">insertRemainingCharsAsNewNodes</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.parser">parser</a>: <a href="#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="AnyRef" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.value">value</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.parser" title="akka.http.engine.parsing.HttpHeaderParser">parser</a>.<a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes" title="(input: akka.util.ByteString, value: AnyRef)(cursor: Int, endIx: Int, valueIx: Int, colonIx: Int)Unit">insertRemainingCharsAsNewNodes</a><a href="#akka.http.engine.parsing;HttpHeaderParser.insertRemainingCharsAsNewNodes$default$3" title="Int" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.x$80" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.input" title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.x$75">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.value" title="AnyRef" id="akka.http.engine.parsing.HttpHeaderParser.insertRemainingCharsAsNewNodes.x$76">value</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>

  abstract class <a title="class HeaderValueParser extends AnyRef" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser">HeaderValueParser</a><a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" class="delimiter">(</a>val <a title="String" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName">headerName</a>: <span title="String">String</span>, val <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.maxValueCount">maxValueCount</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(input: akka.util.ByteString, valueStart: Int, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)(akka.http.model.HttpHeader, Int)" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply">apply</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply.valueStart">valueStart</a>: <span title="Int">Int</span>, <a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.apply.warnOnIllegalHeader">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit<span class="delimiter">)</span>: <span title="(akka.http.model.HttpHeader, Int)" class="delimiter">(</span>HttpHeader, Int<span class="delimiter">)</span>
    override def <a title="()String" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.toString">toString</a>: <span title="String">String</span> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;HeaderValueParser[&quot;)">HeaderValueParser[$</span><a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.headerName" title="=&gt; String">headerName</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span>
    def <a title="=&gt; Boolean" id="akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.cachingEnabled">cachingEnabled</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.maxValueCount" title="=&gt; Int">maxValueCount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>

  class <a title="class ModelledHeaderValueParser extends akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser">ModelledHeaderValueParser</a><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.ModelledHeaderValueParser" class="delimiter">(</a><a title="String" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.headerName">headerName</a>: <span title="String">String</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.maxHeaderValueLength">maxHeaderValueLength</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.maxValueCount">maxValueCount</a>: <span title="Int">Int</span><span class="delimiter">)</span>
    extends <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.maxValueCount" title="Int">maxValueCount</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(input: akka.util.ByteString, valueStart: Int, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)(akka.http.model.HttpHeader, Int)" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply">apply</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.valueStart">valueStart</a>: <span title="Int">Int</span>, <a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.warnOnIllegalHeader">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit<span class="delimiter">)</span>: <span title="(akka.http.model.HttpHeader, Int)" class="delimiter">(</span>HttpHeader, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// TODO: optimize by running the header value parser directly on the input ByteString (rather than an extracted String)</span>
      val <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.headerValue" title="(String, Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16" title="String" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.headerValue">headerValue</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16" title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.endIx">endIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue" title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)">scanHeaderValue</a><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16.x$85" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.input" title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16.x$81">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.valueStart" title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16.x$82">valueStart</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.valueStart" title="Int">valueStart</a> <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.x$16.x$83">+</a> <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.maxHeaderValueLength" title="Int">maxHeaderValueLength</a><span class="delimiter">)</span><span title="(String, Int) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="String" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.trimmedHeaderValue">trimmedHeaderValue</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.headerValue" title="String">headerValue</a>.<span title="()String">trim</span>
      val <a title="akka.http.model.HttpHeader" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header">header</a> = <a href="../../model/parser/HeaderParser.scala.html#akka.http.model.parser.HeaderParser" title="akka.http.model.parser.HeaderParser.type">HeaderParser</a>.<a href="../../model/parser/HeaderParser.scala.html#akka.http.model.parser.HeaderParser.dispatch" title="(handler: akka.parboiled2.DynamicRuleHandler[akka.http.model.parser.HeaderParser,akka.shapeless.::[akka.http.model.HttpHeader,akka.shapeless.HNil]], ruleName: String)handler.Result">dispatch</a><span class="delimiter">(</span>new <a href="../../model/parser/HeaderParser.scala.html#akka.http.model.parser;HeaderParser" title="akka.http.model.parser.HeaderParser">HeaderParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.trimmedHeaderValue" title="implicit akka.parboiled2.ParserInput.apply : (string: String)akka.parboiled2.ParserInput.StringBasedParserInput">trimmedHeaderValue</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.headerName" title="String">headerName</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case Right<span class="delimiter">(</span><a title="akka.http.model.HttpHeader" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header.h">h</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header.h" title="akka.http.model.HttpHeader">h</a>
        case Left<span class="delimiter">(</span><a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header.error">error</a><span class="delimiter">)</span> ⇒
          <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.warnOnIllegalHeader" title="(v1: akka.http.model.ErrorInfo)Unit">warnOnIllegalHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header.error" title="akka.http.model.ErrorInfo">error</a>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.withSummaryPrepended" title="(prefix: String)akka.http.model.ErrorInfo">withSummaryPrepended</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Illegal \'&quot;)">Illegal '$</span><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.headerName" title="String">headerName</a><span title="String(&quot;\' header&quot;)" class="string">' header&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../model/headers/headers.scala.html#akka.http.model.headers;RawHeader" title="(name: String, value: String)akka.http.model.headers.RawHeader">RawHeader</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.trimmedHeaderValue" title="String">trimmedHeaderValue</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.header" title="(self: akka.http.model.HttpHeader)ArrowAssoc[akka.http.model.HttpHeader]">header</a> <span title="(y: Int)(akka.http.model.HttpHeader, Int)">-&gt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser;ModelledHeaderValueParser.apply.endIx" title="Int">endIx</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  class <a title="class RawHeaderValueParser extends akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser">RawHeaderValueParser</a><a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.RawHeaderValueParser" class="delimiter">(</a><a title="String" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.headerName">headerName</a>: <span title="String">String</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.maxHeaderValueLength">maxHeaderValueLength</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.maxValueCount">maxValueCount</a>: <span title="Int">Int</span><span class="delimiter">)</span>
    extends <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.maxValueCount" title="Int">maxValueCount</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(input: akka.util.ByteString, valueStart: Int, warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)(akka.http.model.HttpHeader, Int)" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply">apply</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.valueStart">valueStart</a>: <span title="Int">Int</span>, <a title="akka.http.model.ErrorInfo =&gt; Unit" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.warnOnIllegalHeader">warnOnIllegalHeader</a>: ErrorInfo ⇒ Unit<span class="delimiter">)</span>: <span title="(akka.http.model.HttpHeader, Int)" class="delimiter">(</span>HttpHeader, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.headerValue" title="(String, Int)" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17" title="String" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.headerValue">headerValue</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17" title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.endIx">endIx</a><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue" title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)">scanHeaderValue</a><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17.x$90" class="delimiter">(</a><a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.input" title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17.x$86">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.valueStart" title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17.x$87">valueStart</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.valueStart" title="Int">valueStart</a> <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.x$17.x$88">+</a> <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.maxHeaderValueLength" title="Int">maxHeaderValueLength</a><span class="delimiter">)</span><span title="(String, Int) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../model/headers/headers.scala.html#akka.http.model.headers;RawHeader" title="(name: String, value: String)akka.http.model.headers.RawHeader">RawHeader</a><span title="(self: akka.http.model.headers.RawHeader)ArrowAssoc[akka.http.model.headers.RawHeader]" class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.headerName" title="String">headerName</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.headerValue" title="String">headerValue</a>.<span title="()String">trim</span><span class="delimiter">)</span> <span title="(y: Int)(akka.http.model.headers.RawHeader, Int)">-&gt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser;RawHeaderValueParser.apply.endIx" title="Int">endIx</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec private def <a title="(input: akka.util.ByteString, start: Int, maxHeaderNameEndIx: Int)(ix: Int)Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon">scanHeaderNameAndReturnIndexOfColon</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.start">start</a>: <span title="Int">Int</span>,
                                                           <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.maxHeaderNameEndIx">maxHeaderNameEndIx</a>: <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4">ix</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.start" title="Int">start</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4" title="Int">ix</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.maxHeaderNameEndIx" title="Int">maxHeaderNameEndIx</a><span class="delimiter">)</span>
      <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4" title="Int">ix</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span title="Char(':')" class="char">':'</span>           ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4" title="Int">ix</a>
        case <span title="Char">c</span> if <a href="../../model/parser/CharacterClasses.scala.html#akka.http.model.parser.CharacterClasses.tchar" title="(v1: Char)Boolean">tchar</a><span class="delimiter">(</span><span title="Char">c</span><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon" title="(input: akka.util.ByteString, start: Int, maxHeaderNameEndIx: Int)(ix: Int)Int">scanHeaderNameAndReturnIndexOfColon</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.maxHeaderNameEndIx" title="Int">maxHeaderNameEndIx</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        case <span title="Char">c</span>             ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.fail" title="(summary: String)Nothing">fail</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Illegal character \'&quot;)">Illegal character '$</span><span class="delimiter">{</span><a href="package.scala.html#akka.http.engine.parsing.package.escape" title="(c: Char)String">escape</a><span class="delimiter">(</span><span title="Char">c</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;\' in header name&quot;)" class="string">' in header name&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    else <a href="#akka.http.engine.parsing.HttpHeaderParser.fail" title="(summary: String)Nothing">fail</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;HTTP header name exceeds the configured limit of &quot;)">HTTP header name exceeds the configured limit of $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.maxHeaderNameEndIx" title="Int">maxHeaderNameEndIx</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderNameAndReturnIndexOfColon$default$4.start" title="Int">start</a><span class="delimiter">}</span><span title="String(&quot; characters&quot;)" class="string"> characters&quot;</span><span class="delimiter">)</span>

  @tailrec private def <a title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue">scanHeaderValue</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start">start</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx">maxHeaderValueEndIx</a>: <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="StringBuilder" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4">sb</a>: <span title="StringBuilder">JStringBuilder</span> = null, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5">ix</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a><span class="delimiter">)</span>: <span title="(String, Int)" class="delimiter">(</span>String, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    def <a title="=&gt; StringBuilder" id="akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue.spaceAppended">spaceAppended</a> = <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a> else new <span title="StringBuilder">JStringBuilder</span><span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.asciiString" title="(input: akka.util.ByteString, start: Int, end: Int)String">asciiString</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(x$1: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx" title="Int">maxHeaderValueEndIx</a><span class="delimiter">)</span>
      <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span title="Char('\t')" class="char">'\t'</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue" title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)">scanHeaderValue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx" title="Int">maxHeaderValueEndIx</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue.spaceAppended" title="=&gt; StringBuilder">spaceAppended</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        case <span title="Char('\r')" class="char">'\r'</span> if <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('\n')" class="char">'\n'</span> ⇒
          if <span class="delimiter">(</span><a href="../../model/parser/CharacterClasses.scala.html#akka.http.model.parser.CharacterClasses.WSP" title="(v1: Char)Boolean">WSP</a><span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue" title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)">scanHeaderValue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx" title="Int">maxHeaderValueEndIx</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue.spaceAppended" title="=&gt; StringBuilder">spaceAppended</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
          else <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a>.<span title="()String">toString</span> else <a href="package.scala.html#akka.http.engine.parsing.package.asciiString" title="(input: akka.util.ByteString, start: Int, end: Int)String">asciiString</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        case <span title="Char">c</span> if <span title="Char">c</span> <span title="(x: Char)Boolean">&gt;=</span> <span title="Char(' ')" class="char">' '</span> ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue" title="(input: akka.util.ByteString, start: Int, maxHeaderValueEndIx: Int)(sb: StringBuilder, ix: Int)(String, Int)">scanHeaderValue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx" title="Int">maxHeaderValueEndIx</a><span class="delimiter">)</span><span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a>.<span title="(x$1: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char">c</span><span class="delimiter">)</span> else <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$4" title="StringBuilder">sb</a>, <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        case <span title="Char">c</span>             ⇒ <a href="#akka.http.engine.parsing.HttpHeaderParser.fail" title="(summary: String)Nothing">fail</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Illegal character \'&quot;)">Illegal character '$</span><span class="delimiter">{</span><a href="package.scala.html#akka.http.engine.parsing.package.escape" title="(c: Char)String">escape</a><span class="delimiter">(</span><span title="Char">c</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;\' in header name&quot;)" class="string">' in header name&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    else <a href="#akka.http.engine.parsing.HttpHeaderParser.fail" title="(summary: String)Nothing">fail</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;HTTP header value exceeds the configured limit of &quot;)">HTTP header value exceeds the configured limit of $</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.maxHeaderValueEndIx" title="Int">maxHeaderValueEndIx</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing.HttpHeaderParser.scanHeaderValue$default$5.start" title="Int">start</a><span class="delimiter">}</span><span title="String(&quot; characters&quot;)" class="string"> characters&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(summary: String)Nothing" id="akka.http.engine.parsing.HttpHeaderParser.fail">fail</a><span class="delimiter">(</span><a title="String" id="akka.http.engine.parsing.HttpHeaderParser.fail.summary">summary</a>: <span title="String">String</span><span class="delimiter">)</span> = throw new <a href="package.scala.html#akka.http.engine.parsing;ParsingException" title="akka.http.engine.parsing.ParsingException">ParsingException</a><span class="delimiter">(</span><a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>.<a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.BadRequest" title="=&gt; akka.http.model.StatusCodes.ClientError">BadRequest</a>, <a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="(summary: String, detail: String)akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.HttpHeaderParser.fail.summary" title="String">summary</a><span class="delimiter">)</span><span class="delimiter">)</span>

  private object <a title="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.type" id="akka.http.engine.parsing.HttpHeaderParser.OutOfTrieSpaceException.readResolve">OutOfTrieSpaceException</a> extends <a href="../../util/SingletonException.scala.html#akka.http.util;SingletonException" title="akka.http.util.SingletonException">SingletonException</a>

  <span class="comment">/**
   * Instances of this class are added as &quot;intermediate&quot; values into the trie at the point where the header name has
   * been parsed (so we know the header type).
   * These instances behave like regular values (i.e. they live in the `values` array) but encapsulate meta information
   * about the trie header-type-specific branch below them.
   *
   * @param valueIx The index into the `values` array that contains this instance (kind of a &quot;self&quot; pointer)
   * @param parser The parser instance used to create the actual header model class for headers of this type
   * @param branchRootNodeIx the nodeIx for the root node of the trie branch holding all cached header values of this type
   * @param valueCount the number of values already stored in this header-type-specific branch
   */</span>
  private final case class <a title="class ValueBranch extends AnyRef with Product with Serializable" id="akka.http.engine.parsing.HttpHeaderParser.ValueBranch.readResolve">ValueBranch</a><a href="#akka.http.engine.parsing.HttpHeaderParser.ValueBranch.readResolve" title="Product" class="delimiter">(</a><a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueIx">valueIx</a>: <span title="Int">Int</span>, <a title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.parser">parser</a>: <a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser" title="akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">HeaderValueParser</a>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.branchRootNodeIx">branchRootNodeIx</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueCount">valueCount</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="=&gt; akka.http.engine.parsing.HttpHeaderParser.ValueBranch" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.withValueCountIncreased">withValueCountIncreased</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueIx" title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.withValueCountIncreased.x$37">copy</a><span class="delimiter">(</span>valueCount = <a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueCount" title="=&gt; Int">valueCount</a> <a title="Int" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.withValueCountIncreased.x$34">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    def <a title="=&gt; Boolean" id="akka.http.engine.parsing.HttpHeaderParser;ValueBranch.spaceLeft">spaceLeft</a> = <a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.valueCount" title="=&gt; Int">valueCount</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing.HttpHeaderParser;ValueBranch.parser" title="=&gt; akka.http.engine.parsing.HttpHeaderParser.HeaderValueParser">parser</a>.<a href="#akka.http.engine.parsing.HttpHeaderParser;HeaderValueParser.maxValueCount" title="=&gt; Int">maxValueCount</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
