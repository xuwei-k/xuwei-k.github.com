<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/engine/parsing/HttpResponseParser.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.engine.parsing

import scala.annotation.tailrec
import akka.http.model.parser.CharacterClasses
import akka.stream.scaladsl.Source
import akka.util.ByteString
import akka.http.model._
import headers._
import <a href="#akka.http.engine.parsing.HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser.type">HttpResponseParser</a>.NoMethod
import <a href="ParserOutput.scala.html#akka.http.engine.parsing.ParserOutput" title="akka.http.engine.parsing.ParserOutput.type">ParserOutput</a>._

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> class <a title="class HttpResponseParser extends akka.http.engine.parsing.HttpMessageParser[akka.http.engine.parsing.ParserOutput.ResponseOutput]" id="akka.http.engine.parsing;HttpResponseParser">HttpResponseParser</a><a href="#akka.http.engine.parsing;HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser" class="delimiter">(</a><a title="akka.http.engine.parsing.ParserSettings" id="akka.http.engine.parsing;HttpResponseParser._settings">_settings</a>: <a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings" title="akka.http.engine.parsing.ParserSettings">ParserSettings</a>,
                                       <a title="akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing;HttpResponseParser._headerParser">_headerParser</a>: <a href="HttpHeaderParser.scala.html#akka.http.engine.parsing;HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a>,
                                       <a title="() =&gt; akka.http.model.HttpMethod" id="akka.http.engine.parsing.HttpResponseParser.<init>$default$3">dequeueRequestMethodForNextResponse</a>: <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ HttpMethod = <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing.HttpResponseParser.NoMethod" title="=&gt; akka.http.model.HttpMethod">NoMethod</a><span class="delimiter">)</span>
  extends <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser" title="akka.http.engine.parsing.HttpMessageParser[akka.http.engine.parsing.ParserOutput.ResponseOutput]">HttpMessageParser</a><span class="delimiter">[</span>ResponseOutput<span class="delimiter">]</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser._settings" title="akka.http.engine.parsing.ParserSettings">_settings</a>, <a href="#akka.http.engine.parsing;HttpResponseParser._headerParser" title="akka.http.engine.parsing.HttpHeaderParser">_headerParser</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  import <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.settings" title="=&gt; akka.http.engine.parsing.ParserSettings">settings</a>._

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="akka.http.model.HttpMethod" id="akka.http.engine.parsing;HttpResponseParser.requestMethodForCurrentResponse">requestMethodForCurrentResponse</a>: <a href="../../model/HttpMethod.scala.html#akka.http.model;HttpMethod" title="akka.http.model.HttpMethod">HttpMethod</a> = <a href="#akka.http.engine.parsing.HttpResponseParser.NoMethod" title="=&gt; akka.http.model.HttpMethod">NoMethod</a>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="akka.http.model.StatusCode" id="akka.http.engine.parsing;HttpResponseParser.statusCode">statusCode</a>: <a href="../../model/StatusCode.scala.html#akka.http.model;StatusCode" title="akka.http.model.StatusCode">StatusCode</a> = <a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>.<a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.OK" title="=&gt; akka.http.model.StatusCodes.Success">OK</a>

  def <a title="(dequeueRequestMethodForNextResponse: () =&gt; akka.http.model.HttpMethod)akka.http.engine.parsing.HttpResponseParser" id="akka.http.engine.parsing;HttpResponseParser.createShallowCopy">createShallowCopy</a><span class="delimiter">(</span><a title="() =&gt; akka.http.model.HttpMethod" id="akka.http.engine.parsing;HttpResponseParser.createShallowCopy.dequeueRequestMethodForNextResponse">dequeueRequestMethodForNextResponse</a>: <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ HttpMethod<span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser">HttpResponseParser</a> =
    new <a href="#akka.http.engine.parsing;HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser">HttpResponseParser</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.settings" title="=&gt; akka.http.engine.parsing.ParserSettings">settings</a>, <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.headerParser" title="=&gt; akka.http.engine.parsing.HttpHeaderParser">headerParser</a>.<a href="HttpHeaderParser.scala.html#akka.http.engine.parsing;HttpHeaderParser.createShallowCopy" title="()akka.http.engine.parsing.HttpHeaderParser">createShallowCopy</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpResponseParser.createShallowCopy.dequeueRequestMethodForNextResponse" title="() =&gt; akka.http.model.HttpMethod">dequeueRequestMethodForNextResponse</a><span class="delimiter">)</span>

  override def <a title="(input: akka.util.ByteString, offset: Int)HttpResponseParser.this.StateResult" id="akka.http.engine.parsing;HttpResponseParser.startNewMessage">startNewMessage</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.startNewMessage.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.startNewMessage.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser;StateResult" title="HttpResponseParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;HttpResponseParser.requestMethodForCurrentResponse" title="akka.http.model.HttpMethod">requestMethodForCurrentResponse</a> = <a href="#akka.http.engine.parsing.HttpResponseParser.<init>$default$3" title="()akka.http.model.HttpMethod">dequeueRequestMethodForNextResponse</a><span class="delimiter">(</span><span class="delimiter">)</span>
    super.<a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.startNewMessage" title="(input: akka.util.ByteString, offset: Int)HttpResponseParser.this.StateResult">startNewMessage</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.startNewMessage.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.startNewMessage.offset" title="Int">offset</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(input: akka.util.ByteString, offset: Int)HttpResponseParser.this.StateResult" id="akka.http.engine.parsing;HttpResponseParser.parseMessage">parseMessage</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser;StateResult" title="HttpResponseParser.this.StateResult">StateResult</a> =
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.requestMethodForCurrentResponse" title="akka.http.model.HttpMethod">requestMethodForCurrentResponse</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.http.engine.parsing.HttpResponseParser.NoMethod" title="=&gt; akka.http.model.HttpMethod">NoMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      var <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor">cursor</a> = <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.parseProtocol" title="(input: akka.util.ByteString, cursor: Int)Int">parseProtocol</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.offset" title="Int">offset</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int">cursor</a><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int">cursor</a> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode" title="(input: akka.util.ByteString, cursor: Int)Int">parseStatusCode</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int">cursor</a> = <a href="#akka.http.engine.parsing;HttpResponseParser" title="HttpResponseParser.this.type">parseReason</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.x$3" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.x$1">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseMessage.x$2">cursor</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, ch: Option[akka.http.model.headers.Connection], clh: Option[akka.http.model.headers.Content-Length], cth: Option[akka.http.model.headers.Content-Type], teh: Option[akka.http.model.headers.Transfer-Encoding], e100c: Boolean, hh: Boolean)HttpResponseParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.cursor" title="Int">cursor</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;HttpResponseParser.badProtocol" title="=&gt; Nothing">badProtocol</a>
    <span class="delimiter">}</span> else <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.failMessageStart(86b0139b2e)" title="(summary: String, detail: String)HttpResponseParser.this.StateResult">failMessageStart</a><span class="delimiter">(</span><span title="String(&quot;Unexpected server response&quot;)" class="string">&quot;Unexpected server response&quot;</span>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.input" title="akka.util.ByteString">input</a>.<span title="(n: Int)akka.util.ByteString">drop</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseMessage.offset" title="Int">offset</a><span class="delimiter">)</span>.<span title="=&gt; String">utf8String</span><span class="delimiter">)</span>

  def <a title="=&gt; Nothing" id="akka.http.engine.parsing;HttpResponseParser.badProtocol">badProtocol</a> = throw new <a href="package.scala.html#akka.http.engine.parsing;ParsingException" title="akka.http.engine.parsing.ParsingException">ParsingException</a><span class="delimiter">(</span><span title="String(&quot;The server-side HTTP version is not supported&quot;)" class="string">&quot;The server-side HTTP version is not supported&quot;</span><span class="delimiter">)</span>

  def <a title="(input: akka.util.ByteString, cursor: Int)Int" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode">parseStatusCode</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.cursor">cursor</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    def <a title="=&gt; Nothing" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.badStatusCode">badStatusCode</a> = throw new <a href="package.scala.html#akka.http.engine.parsing;ParsingException" title="akka.http.engine.parsing.ParsingException">ParsingException</a><span class="delimiter">(</span><span title="String(&quot;Illegal response status code&quot;)" class="string">&quot;Illegal response status code&quot;</span><span class="delimiter">)</span>
    def <a title="(offset: Int)Int" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue">intValue</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      val <a title="Char" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue.c">c</a> = <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.cursor" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue.offset" title="Int">offset</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="../../model/parser/CharacterClasses.scala.html#akka.http.model.parser.CharacterClasses" title="akka.http.model.parser.CharacterClasses.type">CharacterClasses</a>.<a href="../../model/parser/CharacterClasses.scala.html#akka.http.model.parser.CharacterClasses.DIGIT" title="(v1: Char)Boolean">DIGIT</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue.c" title="Char">c</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue.c" title="Char">c</a> <span title="(x: Char)Int">-</span> <span title="Char('0')" class="char">'0'</span> else <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.badStatusCode" title="=&gt; Nothing">badStatusCode</a>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.cursor" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val code = <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue" title="(offset: Int)Int">intValue</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <span title="Int(100)" class="int">100</span> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue" title="(offset: Int)Int">intValue</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <span title="Int(10)" class="int">10</span> <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.code">+</a> <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.intValue" title="(offset: Int)Int">intValue</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpResponseParser.statusCode" title="akka.http.model.StatusCode">statusCode</a> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.code" title="Int">code</a> match <span class="delimiter">{</span>
        case <span title="Int(200)" class="int">200</span> ⇒ <a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>.<a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes.OK" title="=&gt; akka.http.model.StatusCodes.Success">OK</a>
        case _ ⇒ <a href="../../model/StatusCode.scala.html#akka.http.model.StatusCodes" title="akka.http.model.StatusCodes.type">StatusCodes</a>.<a href="../../util/ObjectRegistry.scala.html#akka.http.util;ObjectRegistry.getForKey" title="(key: Int)Option[akka.http.model.StatusCode]">getForKey</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.code" title="Int">code</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case Some<span class="delimiter">(</span><a title="akka.http.model.StatusCode" id="akka.http.engine.parsing;HttpResponseParser.parseStatusCode.x">x</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.x" title="akka.http.model.StatusCode">x</a>
          case <span title="None.type">None</span>    ⇒ <a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.customStatusCodes" title="(v1: Int)Option[akka.http.model.StatusCode]">customStatusCodes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.code" title="Int">code</a><span class="delimiter">)</span> <span title="(default: =&gt; akka.http.model.StatusCode)akka.http.model.StatusCode">getOrElse</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.badStatusCode" title="=&gt; Nothing">badStatusCode</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.cursor" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(4)" class="int">4</span>
    <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;HttpResponseParser.parseStatusCode.badStatusCode" title="=&gt; Nothing">badStatusCode</a>
  <span class="delimiter">}</span>

  @tailrec private def <a title="(input: akka.util.ByteString, startIx: Int)(cursor: Int)Int" id="akka.http.engine.parsing;HttpResponseParser.parseReason">parseReason</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.startIx">startIx</a>: <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseReason$default$3">cursor</a>: <span title="Int">Int</span> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.startIx" title="Int">startIx</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int">cursor</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.startIx" title="Int">startIx</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.maxResponseReasonLength" title="=&gt; Int">maxResponseReasonLength</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int">cursor</a><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('\r')" class="char">'\r'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('\n')" class="char">'\n'</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span>
      else <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason" title="(input: akka.util.ByteString, startIx: Int)(cursor: Int)Int">parseReason</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3.startIx" title="Int">startIx</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseReason$default$3" title="Int">cursor</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    else throw new <a href="package.scala.html#akka.http.engine.parsing;ParsingException" title="akka.http.engine.parsing.ParsingException">ParsingException</a><span class="delimiter">(</span><span title="String(&quot;Response reason phrase exceeds the configured limit of &quot;)" class="string">&quot;Response reason phrase exceeds the configured limit of &quot;</span> <span title="(x$1: Any)String">+</span>
      <a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.maxResponseReasonLength" title="=&gt; Int">maxResponseReasonLength</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; characters&quot;)" class="string">&quot; characters&quot;</span><span class="delimiter">)</span>

  <span class="comment">// http://tools.ietf.org/html/rfc7230#section-3.3</span>
  def <a title="(headers: List[akka.http.model.HttpHeader], protocol: akka.http.model.HttpProtocol, input: akka.util.ByteString, bodyStart: Int, clh: Option[akka.http.model.headers.Content-Length], cth: Option[akka.http.model.headers.Content-Type], teh: Option[akka.http.model.headers.Transfer-Encoding], expect100continue: Boolean, hostHeaderPresent: Boolean, closeAfterResponseCompletion: Boolean)HttpResponseParser.this.StateResult" id="akka.http.engine.parsing;HttpResponseParser.parseEntity">parseEntity</a><span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.headers">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, <a title="akka.http.model.HttpProtocol" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.protocol">protocol</a>: <a href="../../model/HttpProtocol.scala.html#akka.http.model;HttpProtocol" title="akka.http.model.HttpProtocol">HttpProtocol</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart">bodyStart</a>: <span title="Int">Int</span>,
                  <a title="Option[akka.http.model.headers.Content-Length]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.clh">clh</a>: <span title="Option[akka.http.model.headers.Content-Length]">Option</span><span class="delimiter">[</span>`Content-Length`<span class="delimiter">]</span>, <a title="Option[akka.http.model.headers.Content-Type]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.cth">cth</a>: <span title="Option[akka.http.model.headers.Content-Type]">Option</span><span class="delimiter">[</span>`Content-Type`<span class="delimiter">]</span>, <a title="Option[akka.http.model.headers.Transfer-Encoding]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.teh">teh</a>: <span title="Option[akka.http.model.headers.Transfer-Encoding]">Option</span><span class="delimiter">[</span>`Transfer-Encoding`<span class="delimiter">]</span>,
                  <a title="Boolean" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.expect100continue">expect100continue</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.hostHeaderPresent">hostHeaderPresent</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.closeAfterResponseCompletion">closeAfterResponseCompletion</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser;StateResult" title="HttpResponseParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    def <a title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart">emitResponseStart</a><span class="delimiter">(</span><a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart.createEntity">createEntity</a>: Source<span class="delimiter">[</span>ResponseOutput<span class="delimiter">]</span> ⇒ ResponseEntity,
                          <a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart$default$2">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart$default$2" title="List[akka.http.model.HttpHeader]">headers</a><span class="delimiter">)</span> =
      <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.emit" title="(output: akka.http.engine.parsing.ParserOutput.ResponseOutput)Unit">emit</a><span class="delimiter">(</span><a href="ParserOutput.scala.html#akka.http.engine.parsing.ParserOutput;ResponseStart" title="(statusCode: akka.http.model.StatusCode, protocol: akka.http.model.HttpProtocol, headers: List[akka.http.model.HttpHeader], createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, closeAfterResponseCompletion: Boolean)akka.http.engine.parsing.ParserOutput.ResponseStart">ResponseStart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.statusCode" title="akka.http.model.StatusCode">statusCode</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.protocol" title="akka.http.model.HttpProtocol">protocol</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart$default$2" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart.createEntity" title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity">createEntity</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.closeAfterResponseCompletion" title="Boolean">closeAfterResponseCompletion</a><span class="delimiter">)</span><span class="delimiter">)</span>
    def <a title="()HttpResponseParser.this.StateResult" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.finishEmptyResponse">finishEmptyResponse</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart" title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit">emitResponseStart</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.emptyEntity" title="(cth: Option[akka.http.model.headers.Content-Type])(entityParts: Any)akka.http.model.UniversalEntity">emptyEntity</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.finishEmptyResponse.$anonfun.entityParts" title="Any" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.setCompletionHandling" title="(completionHandling: akka.http.engine.parsing.HttpMessageParser.CompletionHandling)Unit">setCompletionHandling</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser" title="akka.http.engine.parsing.HttpMessageParser.type">HttpMessageParser</a>.<a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser.CompletionOk" title="=&gt; akka.http.engine.parsing.HttpMessageParser.CompletionHandling">CompletionOk</a><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;HttpResponseParser.startNewMessage" title="(input: akka.util.ByteString, offset: Int)HttpResponseParser.this.StateResult">startNewMessage</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.statusCode" title="akka.http.model.StatusCode">statusCode</a>.<a href="../../model/StatusCode.scala.html#akka.http.model;StatusCode.allowsEntity" title="()Boolean">allowsEntity</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.requestMethodForCurrentResponse" title="akka.http.model.HttpMethod">requestMethodForCurrentResponse</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods" title="akka.http.model.HttpMethods.type">HttpMethods</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethods.HEAD" title="=&gt; akka.http.model.HttpMethod">HEAD</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.teh" title="Option[akka.http.model.headers.Transfer-Encoding]">teh</a> match <span class="delimiter">{</span>
        case <span title="None.type">None</span> ⇒ <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.clh" title="Option[akka.http.model.headers.Content-Length]">clh</a> match <span class="delimiter">{</span>
          case Some<span class="delimiter">(</span>`Content-Length`<span class="delimiter">(</span><a title="Long" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength">contentLength</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
            if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a> <span title="(x: Long)Boolean">&gt;</span> <a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.maxContentLength" title="=&gt; Long">maxContentLength</a><span class="delimiter">)</span>
              <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.failMessageStart(040a762081)" title="(summary: String)HttpResponseParser.this.StateResult">failMessageStart</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Response Content-Length &quot;)">Response Content-Length $</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a><span title="String(&quot; exceeds the configured limit of &quot;)"> exceeds the configured limit of $</span><a href="ParserSettings.scala.html#akka.http.engine.parsing;ParserSettings.maxContentLength" title="=&gt; Long">maxContentLength</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.finishEmptyResponse" title="()HttpResponseParser.this.StateResult">finishEmptyResponse</a><span class="delimiter">(</span><span class="delimiter">)</span>
            else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.cl">cl</a> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a>.<span title="=&gt; Int">toInt</span>
              <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart" title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit">emitResponseStart</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.strictEntity" title="(cth: Option[akka.http.model.headers.Content-Type], input: akka.util.ByteString, bodyStart: Int, contentLength: Int)(entityParts: Any)akka.http.model.UniversalEntity">strictEntity</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.entityParts" title="Any" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cl" title="Int">cl</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.setCompletionHandling" title="(completionHandling: akka.http.engine.parsing.HttpMessageParser.CompletionHandling)Unit">setCompletionHandling</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser" title="akka.http.engine.parsing.HttpMessageParser.type">HttpMessageParser</a>.<a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser.CompletionOk" title="=&gt; akka.http.engine.parsing.HttpMessageParser.CompletionHandling">CompletionOk</a><span class="delimiter">)</span>
              <a href="#akka.http.engine.parsing;HttpResponseParser.startNewMessage" title="(input: akka.util.ByteString, offset: Int)HttpResponseParser.this.StateResult">startNewMessage</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cl" title="Int">cl</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart" title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit">emitResponseStart</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.defaultEntity$default$3" title="=&gt; akka.stream.scaladsl.Source[akka.util.ByteString] =&gt; akka.stream.scaladsl.Source[akka.util.ByteString]">defaultEntity</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.entityParts" title="akka.stream.scaladsl.Source[_ &lt;: akka.http.engine.parsing.ParserOutput]" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.parseFixedLengthBody" title="(remainingBodyBytes: Long, isLastMessage: Boolean)(input: akka.util.ByteString, bodyStart: Int)HttpResponseParser.this.StateResult">parseFixedLengthBody</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.contentLength" title="Long">contentLength</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.closeAfterResponseCompletion" title="Boolean">closeAfterResponseCompletion</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          case <span title="None.type">None</span> ⇒
            <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart" title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit">emitResponseStart</a> <span class="delimiter">{</span> <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.entityParts">entityParts</a> ⇒
              val <a title="entityParts.Repr[akka.util.ByteString]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.data">data</a> = <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.entityParts" title="akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput]">entityParts</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.collect" title="(pf: PartialFunction[akka.http.engine.parsing.ParserOutput.ResponseOutput,akka.util.ByteString])entityParts.Repr[akka.util.ByteString]">collect</a> <a title="&lt;$anon: akka.http.engine.parsing.ParserOutput.ResponseOutput =&gt; akka.util.ByteString&gt; extends scala.runtime.AbstractPartialFunction[akka.http.engine.parsing.ParserOutput.ResponseOutput,akka.util.ByteString] with Serializable" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.data;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case EntityPart<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.data;$anonfun.isDefinedAt.bytes">bytes</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.data;$anonfun.isDefinedAt.bytes" title="akka.util.ByteString">bytes</a> <span class="delimiter">}</span>
              <a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity" title="akka.http.model.HttpEntity.type">HttpEntity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity;CloseDelimited" title="(contentType: akka.http.model.ContentType, data: akka.stream.scaladsl.Source[akka.util.ByteString])akka.http.model.HttpEntity.CloseDelimited">CloseDelimited</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.contentType" title="(cth: Option[akka.http.model.headers.Content-Type])akka.http.model.ContentType">contentType</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.data" title="entityParts.Repr[akka.util.ByteString]">data</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.setCompletionHandling" title="(completionHandling: akka.http.engine.parsing.HttpMessageParser.CompletionHandling)Unit">setCompletionHandling</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser" title="akka.http.engine.parsing.HttpMessageParser.type">HttpMessageParser</a>.<a href="HttpMessageParser.scala.html#akka.http.engine.parsing.HttpMessageParser.CompletionOk" title="=&gt; akka.http.engine.parsing.HttpMessageParser.CompletionHandling">CompletionOk</a><span class="delimiter">)</span>
            <a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody" title="(input: akka.util.ByteString, bodyStart: Int)HttpResponseParser.this.StateResult">parseToCloseBody</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        case Some<span class="delimiter">(</span><a title="akka.http.model.headers.Transfer-Encoding" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.te">te</a><span class="delimiter">)</span> ⇒
          val <a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;HttpResponseParser.parseEntity.completedHeaders">completedHeaders</a> = <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.addTransferEncodingWithChunkedPeeled" title="(headers: List[akka.http.model.HttpHeader], teh: akka.http.model.headers.Transfer-Encoding)List[akka.http.model.HttpHeader]">addTransferEncodingWithChunkedPeeled</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.te" title="akka.http.model.headers.Transfer-Encoding">te</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.te" title="akka.http.model.headers.Transfer-Encoding">te</a>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Transfer-Encoding.isChunked" title="=&gt; Boolean">isChunked</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.clh" title="Option[akka.http.model.headers.Content-Length]">clh</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.emitResponseStart" title="(createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.ParserOutput.ResponseOutput] =&gt; akka.http.model.ResponseEntity, headers: List[akka.http.model.HttpHeader])Unit">emitResponseStart</a><span class="delimiter">(</span><a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.chunkedEntity$default$2" title="=&gt; akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart] =&gt; akka.stream.scaladsl.Source[akka.http.model.HttpEntity.ChunkStreamPart]">chunkedEntity</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.$anonfun.entityChunks" title="akka.stream.scaladsl.Source[_ &lt;: akka.http.engine.parsing.ParserOutput]" class="delimiter">(</a><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.completedHeaders" title="List[akka.http.model.HttpHeader]">completedHeaders</a><span class="delimiter">)</span>
              <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.parseChunk" title="(input: akka.util.ByteString, offset: Int, isLastMessage: Boolean)HttpResponseParser.this.StateResult">parseChunk</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.closeAfterResponseCompletion" title="Boolean">closeAfterResponseCompletion</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.failMessageStart(040a762081)" title="(summary: String)HttpResponseParser.this.StateResult">failMessageStart</a><span class="delimiter">(</span><span title="String(&quot;A chunked response must not contain a Content-Length header.&quot;)" class="string">&quot;A chunked response must not contain a Content-Length header.&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity" title="(headers: List[akka.http.model.HttpHeader], protocol: akka.http.model.HttpProtocol, input: akka.util.ByteString, bodyStart: Int, clh: Option[akka.http.model.headers.Content-Length], cth: Option[akka.http.model.headers.Content-Type], teh: Option[akka.http.model.headers.Transfer-Encoding], expect100continue: Boolean, hostHeaderPresent: Boolean, closeAfterResponseCompletion: Boolean)HttpResponseParser.this.StateResult">parseEntity</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.completedHeaders" title="List[akka.http.model.HttpHeader]">completedHeaders</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.protocol" title="akka.http.model.HttpProtocol">protocol</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.bodyStart" title="Int">bodyStart</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.clh" title="Option[akka.http.model.headers.Content-Length]">clh</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a>, teh = <span title="None.type">None</span>,
            <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.expect100continue" title="Boolean">expect100continue</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.hostHeaderPresent" title="Boolean">hostHeaderPresent</a>, <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.closeAfterResponseCompletion" title="Boolean">closeAfterResponseCompletion</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;HttpResponseParser.parseEntity.finishEmptyResponse" title="()HttpResponseParser.this.StateResult">finishEmptyResponse</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// currently we do not check for `settings.maxContentLength` overflow</span>
  def <a title="(input: akka.util.ByteString, bodyStart: Int)HttpResponseParser.this.StateResult" id="akka.http.engine.parsing;HttpResponseParser.parseToCloseBody">parseToCloseBody</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.bodyStart">bodyStart</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser;StateResult" title="HttpResponseParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span>
      <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.emit" title="(output: akka.http.engine.parsing.ParserOutput.ResponseOutput)Unit">emit</a><span class="delimiter">(</span><a href="ParserOutput.scala.html#akka.http.engine.parsing.ParserOutput;EntityPart" title="(data: akka.util.ByteString)akka.http.engine.parsing.ParserOutput.EntityPart">EntityPart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.input" title="akka.util.ByteString">input</a> <span title="(n: Int)akka.util.ByteString">drop</span> <a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody.bodyStart" title="Int">bodyStart</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="HttpMessageParser.scala.html#akka.http.engine.parsing;HttpMessageParser.continue(48527e365c)" title="(next: (akka.util.ByteString, Int) =&gt; HttpResponseParser.this.StateResult)HttpResponseParser.this.StateResult">continue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;HttpResponseParser.parseToCloseBody" title="(input: akka.util.ByteString, bodyStart: Int)HttpResponseParser.this.StateResult">parseToCloseBody</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> object <a title="akka.http.engine.parsing.HttpResponseParser.type" id="akka.http.engine.parsing.HttpResponseParser">HttpResponseParser</a> <a href="#akka.http.engine.parsing.HttpResponseParser" title="akka.http.engine.parsing.HttpResponseParser.type" class="delimiter">{</a>
  val <a title="akka.http.model.HttpMethod" id="akka.http.engine.parsing.HttpResponseParser.NoMethod">NoMethod</a> = <a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethod" title="akka.http.model.HttpMethod.type">HttpMethod</a>.<a href="../../model/HttpMethod.scala.html#akka.http.model.HttpMethod.custom(329067c407)" title="(name: String, safe: Boolean, idempotent: Boolean, entityAccepted: Boolean)akka.http.model.HttpMethod">custom</a><span class="delimiter">(</span><span title="String(&quot;NONE&quot;)" class="string">&quot;NONE&quot;</span>, safe = false, idempotent = false, entityAccepted = false<span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
