<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka/http/engine/parsing/BodyPartParser.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.http.engine.parsing

import scala.annotation.tailrec
import scala.collection.mutable.ListBuffer
import akka.event.LoggingAdapter
import akka.parboiled2.CharPredicate
import akka.stream.scaladsl.Source
import akka.stream.stage._
import akka.util.ByteString
import akka.http.model._
import akka.http.util._
import headers._

<span class="comment">/**
 * INTERNAL API
 *
 * see: http://tools.ietf.org/html/rfc2046#section-5.1.1
 */</span>
private<span class="delimiter">[</span>http<span class="delimiter">]</span> final class <a title="class BodyPartParser extends akka.stream.stage.PushPullStage[akka.util.ByteString,akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser">BodyPartParser</a><a href="#akka.http.engine.parsing;BodyPartParser" title="akka.http.engine.parsing.BodyPartParser" class="delimiter">(</a><a title="akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.defaultContentType">defaultContentType</a>: <a href="../../model/ContentType.scala.html#akka.http.model;ContentType" title="akka.http.model.ContentType">ContentType</a>,
                                         <a title="String" id="akka.http.engine.parsing;BodyPartParser.boundary">boundary</a>: <span title="String">String</span>,
                                         <a title="akka.event.LoggingAdapter" id="akka.http.engine.parsing;BodyPartParser.log">log</a>: <span title="akka.event.LoggingAdapter">LoggingAdapter</span>,
                                         <a title="akka.http.engine.parsing.BodyPartParser.Settings" id="akka.http.engine.parsing.BodyPartParser.<init>$default$4">settings</a>: BodyPartParser.<a href="#akka.http.engine.parsing.BodyPartParser.Settings.readResolve" title="akka.http.engine.parsing.BodyPartParser.Settings">Settings</a> = <a href="#akka.http.engine.parsing.BodyPartParser" title="akka.http.engine.parsing.BodyPartParser.type">BodyPartParser</a>.<a href="#akka.http.engine.parsing.BodyPartParser.defaultSettings" title="=&gt; akka.http.engine.parsing.BodyPartParser.Settings">defaultSettings</a><span class="delimiter">)</span>
  extends <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;PushPullStage" title="akka.stream.stage.PushPullStage[akka.util.ByteString,akka.http.engine.parsing.BodyPartParser.Output]">PushPullStage</a><span class="delimiter">[</span>ByteString, BodyPartParser.Output<span class="delimiter">]</span> <span class="delimiter">{</span>
  import <a href="#akka.http.engine.parsing.BodyPartParser" title="akka.http.engine.parsing.BodyPartParser.type">BodyPartParser</a>._
  import <a href="#akka.http.engine.parsing.BodyPartParser.<init>$default$4" title="akka.http.engine.parsing.BodyPartParser.Settings">settings</a>._

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">boundary</a>.<span title="=&gt; Boolean">nonEmpty</span>, <span title="String(&quot;\'boundary\' parameter of multipart Content-Type must be non-empty&quot;)" class="string">&quot;'boundary' parameter of multipart Content-Type must be non-empty&quot;</span><span class="delimiter">)</span>
  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="String">boundary</a>.<span title="(x$1: Int)Char">charAt</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="String">boundary</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">!=</span> <span title="Char(' ')" class="char">' '</span>, <span title="String(&quot;\'boundary\' parameter of multipart Content-Type must not end with a space char&quot;)" class="string">&quot;'boundary' parameter of multipart Content-Type must not end with a space char&quot;</span><span class="delimiter">)</span>
  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.boundaryCharNoSpace" title="=&gt; akka.parboiled2.CharPredicate">boundaryCharNoSpace</a> <span title="(string: String)Boolean">matchesAll</span> <a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="String">boundary</a>,
    <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;\'boundary\' parameter of multipart Content-Type contains illegal character \'&quot;)">'boundary' parameter of multipart Content-Type contains illegal character '$</span><span class="delimiter">{</span><a href="#akka.http.engine.parsing.BodyPartParser.boundaryCharNoSpace" title="=&gt; akka.parboiled2.CharPredicate">boundaryCharNoSpace</a>.<span title="(string: String)Option[Char]">firstMismatch</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="String">boundary</a><span class="delimiter">)</span>.<span title="=&gt; Char">get</span><span class="delimiter">}</span><span title="String(&quot;\'&quot;)" class="string">'&quot;</span><span class="delimiter">)</span>

  sealed trait <a title="trait StateResult extends AnyRef" id="akka.http.engine.parsing;BodyPartParser;StateResult">StateResult</a> <span class="comment">// phantom type for ensuring soundness of our parsing method setup</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="Array[Byte]" id="akka.http.engine.parsing;BodyPartParser.needle">needle</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="Array[Byte]" id="akka.http.engine.parsing;BodyPartParser.needle.array">array</a> = new <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary" title="String">boundary</a>.<span title="()Int">length</span> <span title="(x: Int)Int">+</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="(i: Int, x: Byte)Unit">array</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> = <span title="Char('\r')" class="char">'\r'</span>.<span title="=&gt; Byte">toByte</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="(i: Int, x: Byte)Unit">array</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <span title="Char('\n')" class="char">'\n'</span>.<span title="=&gt; Byte">toByte</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="(i: Int, x: Byte)Unit">array</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span> = <span title="Char('-')" class="char">'-'</span>.<span title="=&gt; Byte">toByte</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="(i: Int, x: Byte)Unit">array</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span> = <span title="Char('-')" class="char">'-'</span>.<span title="=&gt; Byte">toByte</span>
    <a href="../../util/package.scala.html#akka.http.util.package.enhanceString_" title="implicit akka.http.util.package.enhanceString_ : (s: String)akka.http.util.EnhancedString">boundary</a>.<a href="../../util/EnhancedString.scala.html#akka.http.util;EnhancedString.getAsciiBytes" title="(array: Array[Byte], offset: Int)Unit">getAsciiBytes</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="Array[Byte]">array</a>, <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.needle.array" title="Array[Byte]">array</a>
  <span class="delimiter">}</span>

  <span class="comment">// we use the Boyer-Moore string search algorithm for finding the boundaries in the multipart entity,</span>
  <span class="comment">// TODO: evaluate whether an upgrade to the more efficient FJS is worth the implementation cost</span>
  <span class="comment">// see: http://www.cgjennings.ca/fjs/ and http://ijes.info/4/1/42544103.pdf</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="akka.http.engine.parsing.BoyerMoore" id="akka.http.engine.parsing;BodyPartParser.boyerMoore">boyerMoore</a> = new <a href="BoyerMoore.scala.html#akka.http.engine.parsing;BoyerMoore" title="akka.http.engine.parsing.BoyerMoore">BoyerMoore</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a><span class="delimiter">)</span>

  <span class="comment">// TODO: prevent re-priming header parser from scratch</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="akka.http.engine.parsing.HttpHeaderParser" id="akka.http.engine.parsing;BodyPartParser.headerParser">headerParser</a> = <a href="HttpHeaderParser.scala.html#akka.http.engine.parsing.HttpHeaderParser.apply" title="(settings: akka.http.engine.parsing.HttpHeaderParser.Settings)(warnOnIllegalHeader: akka.http.model.ErrorInfo =&gt; Unit)akka.http.engine.parsing.HttpHeaderParser">HttpHeaderParser</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.<init>$default$4" title="akka.http.engine.parsing.BodyPartParser.Settings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing;BodyPartParser.headerParser.$anonfun.errorInfo">errorInfo</a> ⇒
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.illegalHeaderWarnings" title="=&gt; Boolean">illegalHeaderWarnings</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.log" title="akka.event.LoggingAdapter">log</a>.<span title="(message: String)Unit">warning</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.headerParser.$anonfun.errorInfo" title="akka.http.model.ErrorInfo">errorInfo</a>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.withSummaryPrepended" title="(prefix: String)akka.http.model.ErrorInfo">withSummaryPrepended</a><span class="delimiter">(</span><span title="String(&quot;Illegal multipart header&quot;)" class="string">&quot;Illegal multipart header&quot;</span><span class="delimiter">)</span>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.formatPretty" title="=&gt; String">formatPretty</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="scala.collection.mutable.ListBuffer[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.result">result</a> = new <span title="scala.collection.mutable.ListBuffer[akka.http.engine.parsing.BodyPartParser.Output]">ListBuffer</span><span class="delimiter">[</span>Output<span class="delimiter">]</span> <span class="comment">// transformer op is currently optimized for LinearSeqs</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.resultIterator">resultIterator</a>: <span title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">Iterator</span><span class="delimiter">[</span>Output<span class="delimiter">]</span> = <span title="=&gt; collection.Iterator.type">Iterator</span>.<span title="=&gt; Iterator[Nothing]">empty</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="akka.util.ByteString =&gt; BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.state">state</a>: ByteString ⇒ StateResult = <a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary" title="(input: akka.util.ByteString)BodyPartParser.this.StateResult">tryParseInitialBoundary</a>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Boolean" id="akka.http.engine.parsing;BodyPartParser.receivedInitialBoundary">receivedInitialBoundary</a> = false
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Boolean" id="akka.http.engine.parsing;BodyPartParser.terminated">terminated</a> = false

  def <a title="(errorInfo: akka.http.model.ErrorInfo)Unit" id="akka.http.engine.parsing;BodyPartParser.warnOnIllegalHeader">warnOnIllegalHeader</a><span class="delimiter">(</span><a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing;BodyPartParser.warnOnIllegalHeader.errorInfo">errorInfo</a>: <a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.illegalHeaderWarnings" title="=&gt; Boolean">illegalHeaderWarnings</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.log" title="akka.event.LoggingAdapter">log</a>.<span title="(message: String)Unit">warning</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.warnOnIllegalHeader.errorInfo" title="akka.http.model.ErrorInfo">errorInfo</a>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.withSummaryPrepended" title="(prefix: String)akka.http.model.ErrorInfo">withSummaryPrepended</a><span class="delimiter">(</span><span title="String(&quot;Illegal multipart header&quot;)" class="string">&quot;Illegal multipart header&quot;</span><span class="delimiter">)</span>.<a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo.formatPretty" title="=&gt; String">formatPretty</a><span class="delimiter">)</span>

  override def <a title="(input: akka.util.ByteString, ctx: akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output])akka.stream.stage.Directive" id="akka.http.engine.parsing;BodyPartParser.onPush">onPush</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.onPush.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.onPush.ctx">ctx</a>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">Context</a><span class="delimiter">[</span>Output<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.result" title="scala.collection.mutable.ListBuffer[akka.http.engine.parsing.BodyPartParser.Output]">result</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    try <a href="#akka.http.engine.parsing;BodyPartParser.state" title="(v1: akka.util.ByteString)BodyPartParser.this.StateResult">state</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.onPush.input" title="akka.util.ByteString">input</a><span class="delimiter">)</span>
    catch <span class="delimiter">{</span>
      case <a title="akka.http.engine.parsing.ParsingException" id="akka.http.engine.parsing;BodyPartParser.onPush.e">e</a>: <a href="package.scala.html#akka.http.engine.parsing;ParsingException" title="akka.http.engine.parsing.ParsingException">ParsingException</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.fail(a39e394601)" title="(info: akka.http.model.ErrorInfo)BodyPartParser.this.StateResult">fail</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.onPush.e" title="akka.http.engine.parsing.ParsingException">e</a>.<a href="package.scala.html#akka.http.engine.parsing;ParsingException.info" title="=&gt; akka.http.model.ErrorInfo">info</a><span class="delimiter">)</span>
      case <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a> ⇒
        <span class="comment">// we are missing a try/catch{continue} wrapper somewhere</span>
        throw new <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;unexpected NotEnoughDataException&quot;)" class="string">&quot;unexpected NotEnoughDataException&quot;</span>, <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.resultIterator" title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">resultIterator</a> = <a href="#akka.http.engine.parsing;BodyPartParser.result" title="scala.collection.mutable.ListBuffer[akka.http.engine.parsing.BodyPartParser.Output]">result</a>.<span title="=&gt; Iterator[akka.http.engine.parsing.BodyPartParser.Output]">iterator</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.resultIterator" title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">resultIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.onPush.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: akka.http.engine.parsing.BodyPartParser.Output)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.resultIterator" title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">resultIterator</a>.<span title="()akka.http.engine.parsing.BodyPartParser.Output">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.http.engine.parsing;BodyPartParser.terminated" title="Boolean">terminated</a><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.onPush.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#akka.http.engine.parsing;BodyPartParser.onPush.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output])akka.stream.stage.Directive" id="akka.http.engine.parsing;BodyPartParser.onPull">onPull</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.onPull.ctx">ctx</a>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">Context</a><span class="delimiter">[</span>Output<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Directive" title="akka.stream.stage.Directive">Directive</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.resultIterator" title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">resultIterator</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span>
      <a href="#akka.http.engine.parsing;BodyPartParser.onPull.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.push" title="(elem: akka.http.engine.parsing.BodyPartParser.Output)akka.stream.stage.DownstreamDirective">push</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.resultIterator" title="Iterator[akka.http.engine.parsing.BodyPartParser.Output]">resultIterator</a>.<span title="()akka.http.engine.parsing.BodyPartParser.Output">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.onPull.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.isFinishing" title="=&gt; Boolean">isFinishing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.terminated" title="Boolean">terminated</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#akka.http.engine.parsing;BodyPartParser.receivedInitialBoundary" title="Boolean">receivedInitialBoundary</a><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;BodyPartParser.onPull.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.finish" title="()akka.stream.stage.FreeDirective">finish</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else
        <a href="#akka.http.engine.parsing;BodyPartParser.onPull.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.pushAndFinish" title="(elem: akka.http.engine.parsing.BodyPartParser.Output)akka.stream.stage.DownstreamDirective">pushAndFinish</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.ParseError.readResolve" title="(info: akka.http.model.ErrorInfo)akka.http.engine.parsing.BodyPartParser.ParseError">ParseError</a><span class="delimiter">(</span><a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="(summary: String, detail: String)akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">(</span><span title="String(&quot;Unexpected end of multipart entity&quot;)" class="string">&quot;Unexpected end of multipart entity&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else
      <a href="#akka.http.engine.parsing;BodyPartParser.onPull.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.pull" title="()akka.stream.stage.UpstreamDirective">pull</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(ctx: akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output])akka.stream.stage.TerminationDirective" id="akka.http.engine.parsing;BodyPartParser.onUpstreamFinish">onUpstreamFinish</a><span class="delimiter">(</span><a title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.onUpstreamFinish.ctx">ctx</a>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">Context</a><span class="delimiter">[</span>Output<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;TerminationDirective" title="akka.stream.stage.TerminationDirective">TerminationDirective</a> = <a href="#akka.http.engine.parsing;BodyPartParser.onUpstreamFinish.ctx" title="akka.stream.stage.Context[akka.http.engine.parsing.BodyPartParser.Output]">ctx</a>.<a href="../../../stream/stage/Stage.scala.html#akka.stream.stage;Context.absorbTermination" title="()akka.stream.stage.TerminationDirective">absorbTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>

  def <a title="(input: akka.util.ByteString)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary">tryParseInitialBoundary</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input">input</a>: <span title="akka.util.ByteString">ByteString</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> =
    <span class="comment">// we don't use boyerMoore here because we are testing for the boundary *without* a</span>
    <span class="comment">// preceding CRLF and at a known location (the very beginning of the entity)</span>
    try <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79)" title="(input: akka.util.ByteString, offset: Int, ix: Int)Boolean">boundary</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="Int" id="akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.ix">ix</a> = <a href="#akka.http.engine.parsing;BodyPartParser.boundaryLength" title="=&gt; Int">boundaryLength</a>
        if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf" title="(input: akka.util.ByteString, offset: Int)Boolean">crlf</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.ix" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.receivedInitialBoundary" title="Boolean">receivedInitialBoundary</a> = true
          <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.ix" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash" title="(input: akka.util.ByteString, offset: Int)Boolean">doubleDash</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.ix" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.terminate" title="()BodyPartParser.this.StateResult">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
        else <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble" title="(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult">parsePreamble</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble" title="(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult">parsePreamble</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.input" title="akka.util.ByteString">input</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.continue(b33a236128)" title="(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult">continue</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.$anonfun.input">input</a>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.$anonfun.x$1">_</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary" title="(input: akka.util.ByteString)BodyPartParser.this.StateResult">tryParseInitialBoundary</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.tryParseInitialBoundary.$anonfun.input" title="akka.util.ByteString">input</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  def <a title="(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parsePreamble">parsePreamble</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parsePreamble.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parsePreamble.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      @tailrec def <a title="(index: Int)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parsePreamble.rec">rec</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.index">index</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
        val needleEnd = <a href="#akka.http.engine.parsing;BodyPartParser.boyerMoore" title="akka.http.engine.parsing.BoyerMoore">boyerMoore</a>.<a href="BoyerMoore.scala.html#akka.http.engine.parsing;BoyerMoore.nextIndex" title="(haystack: akka.util.ByteString, offset: Int)Int">nextIndex</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.index" title="Int">index</a><span class="delimiter">)</span> <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.needleEnd">+</a> <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span>
        if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf" title="(input: akka.util.ByteString, offset: Int)Boolean">crlf</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.needleEnd" title="Int">needleEnd</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash" title="(input: akka.util.ByteString, offset: Int)Boolean">doubleDash</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.terminate" title="()BodyPartParser.this.StateResult">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
        else <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec" title="(index: Int)BodyPartParser.this.StateResult">rec</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.rec" title="(index: Int)BodyPartParser.this.StateResult">rec</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.offset" title="Int">offset</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d)" title="(input: akka.util.ByteString, offset: Int)(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult">continue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble.input" title="akka.util.ByteString">input</a>.<span title="(n: Int)akka.util.ByteString">takeRight</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parsePreamble" title="(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult">parsePreamble</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec def <a title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines">parseHeaderLines</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineStart">lineStart</a>: <span title="Int">Int</span>, <a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>,
                                <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4">headerCount</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Option[akka.http.model.headers.Content-Type]" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5">cth</a>: <span title="Option[akka.http.model.headers.Content-Type]">Option</span><span class="delimiter">[</span>`Content-Type`<span class="delimiter">]</span> = <span title="None.type">None</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    def <a title="=&gt; akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.contentType">contentType</a> =
      <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a> match <span class="delimiter">{</span>
        case Some<span class="delimiter">(</span><a title="akka.http.model.headers.Content-Type" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.contentType.x">x</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.contentType.x" title="akka.http.model.headers.Content-Type">x</a>.<a href="../../model/headers/headers.scala.html#akka.http.model.headers;Content-Type.contentType" title="=&gt; akka.http.model.ContentType">contentType</a>
        case <span title="None.type">None</span>    ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.defaultContentType" title="akka.http.model.ContentType">defaultContentType</a>
      <span class="delimiter">}</span>

    if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79)" title="(input: akka.util.ByteString, offset: Int, ix: Int)Boolean">boundary</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineStart" title="Int">lineStart</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)" title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.BodyPartStart.readResolve" title="(headers: List[akka.http.model.HttpHeader], createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output] =&gt; akka.http.model.BodyPartEntity)akka.http.engine.parsing.BodyPartParser.BodyPartStart">BodyPartStart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.$anonfun.x$2">_</a> ⇒ <a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity" title="akka.http.model.HttpEntity.type">HttpEntity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity.empty" title="(contentType: akka.http.model.ContentType)akka.http.model.HttpEntity.Strict">empty</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.contentType" title="=&gt; akka.http.model.ContentType">contentType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      val ix = <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineStart" title="Int">lineStart</a> <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.ix">+</a> <a href="#akka.http.engine.parsing;BodyPartParser.boundaryLength" title="=&gt; Int">boundaryLength</a>
      if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf" title="(input: akka.util.ByteString, offset: Int)Boolean">crlf</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.ix" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.ix" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
      else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash" title="(input: akka.util.ByteString, offset: Int)Boolean">doubleDash</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.ix" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.terminate" title="()BodyPartParser.this.StateResult">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else <a href="#akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86)" title="(summary: String)BodyPartParser.this.StateResult">fail</a><span class="delimiter">(</span><span title="String(&quot;Illegal multipart boundary in message content&quot;)" class="string">&quot;Illegal multipart boundary in message content&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      var <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd">lineEnd</a> = <span title="Int(0)" class="int">0</span>
      val <a title="akka.http.model.HttpHeader" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.resultHeader">resultHeader</a> =
        try <span class="delimiter">{</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd" title="Int">lineEnd</a> = <a href="#akka.http.engine.parsing;BodyPartParser.headerParser" title="akka.http.engine.parsing.HttpHeaderParser">headerParser</a>.<a href="HttpHeaderParser.scala.html#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine" title="(input: akka.util.ByteString, lineStart: Int)(cursor: Int, nodeIx: Int)Int">parseHeaderLine</a><a href="HttpHeaderParser.scala.html#akka.http.engine.parsing;HttpHeaderParser.parseHeaderLine$default$3" title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.resultHeader.x$12" class="delimiter">(</a><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.resultHeader.x$9">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineStart" title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLines.resultHeader.x$10">lineStart</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.headerParser" title="akka.http.engine.parsing.HttpHeaderParser">headerParser</a>.<a href="HttpHeaderParser.scala.html#akka.http.engine.parsing;HttpHeaderParser.resultHeader" title="=&gt; akka.http.model.HttpHeader">resultHeader</a>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a> ⇒ null
        <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.resultHeader" title="akka.http.model.HttpHeader">resultHeader</a> match <span class="delimiter">{</span>
        case null                         ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d)" title="(input: akka.util.ByteString, offset: Int)(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult">continue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineStart" title="Int">lineStart</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux" title="(headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])(input: akka.util.ByteString, lineStart: Int)BodyPartParser.this.StateResult">parseHeaderLinesAux</a><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.$anonfun.input" title="akka.util.ByteString" class="delimiter">(</a><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4" title="Int">headerCount</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case <a href="HttpHeaderParser.scala.html#akka.http.engine.parsing.HttpHeaderParser" title="akka.http.engine.parsing.HttpHeaderParser.type">HttpHeaderParser</a>.<a href="HttpHeaderParser.scala.html#akka.http.engine.parsing.HttpHeaderParser.EmptyHeader" title="akka.http.engine.parsing.HttpHeaderParser.EmptyHeader.type">EmptyHeader</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity" title="(headers: List[akka.http.model.HttpHeader], contentType: akka.http.model.ContentType, emitPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit, emitFinalPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit)(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult">parseEntity</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.contentType" title="=&gt; akka.http.model.ContentType">contentType</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd" title="Int">lineEnd</a><span class="delimiter">)</span>

        case <span title="akka.http.model.headers.Content-Type">h</span>: <a href="../../model/headers/headers.scala.html#akka.http.model.headers;Content-Type" title="akka.http.model.headers.Content-Type">`Content-Type`</a> ⇒
          if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd" title="Int">lineEnd</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4" title="Int">headerCount</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <span title="(x: akka.http.model.headers.Content-Type)Some[akka.http.model.headers.Content-Type]">Some</span><span class="delimiter">(</span><span title="akka.http.model.headers.Content-Type">h</span><span class="delimiter">)</span><span class="delimiter">)</span>
          else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a>.<span title="=&gt; akka.http.model.headers.Content-Type">get</span> <span title="(x$1: Any)Boolean">==</span> <span title="akka.http.model.headers.Content-Type">h</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd" title="Int">lineEnd</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4" title="Int">headerCount</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span>
          else <a href="#akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86)" title="(summary: String)BodyPartParser.this.StateResult">fail</a><span class="delimiter">(</span><span title="String(&quot;multipart part must not contain more than one Content-Type header&quot;)" class="string">&quot;multipart part must not contain more than one Content-Type header&quot;</span><span class="delimiter">)</span>

        case <span title="akka.http.model.HttpHeader">h</span> if <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4" title="Int">headerCount</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderCount" title="=&gt; Int">maxHeaderCount</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.lineEnd" title="Int">lineEnd</a>, <span title="akka.http.model.HttpHeader">h</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines.x$3" title="(x: akka.http.model.HttpHeader)List[akka.http.model.HttpHeader]">::</a> <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$3" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$4" title="Int">headerCount</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines$default$5" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span>

        case _                                 ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86)" title="(summary: String)BodyPartParser.this.StateResult">fail</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;multipart part contains more than the configured limit of &quot;)">multipart part contains more than the configured limit of $</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderCount" title="=&gt; Int">maxHeaderCount</a><span title="String(&quot; headers&quot;)" class="string"> headers&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// work-around for compiler complaining about non-tail-recursion if we inline this method</span>
  def <a title="(headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])(input: akka.util.ByteString, lineStart: Int)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux">parseHeaderLinesAux</a><span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.headers">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.headerCount">headerCount</a>: <span title="Int">Int</span>,
                          <a title="Option[akka.http.model.headers.Content-Type]" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.cth">cth</a>: <span title="Option[akka.http.model.headers.Content-Type]">Option</span><span class="delimiter">[</span>`Content-Type`<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.lineStart">lineStart</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> =
    <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.lineStart" title="Int">lineStart</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.headerCount" title="Int">headerCount</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLinesAux.cth" title="Option[akka.http.model.headers.Content-Type]">cth</a><span class="delimiter">)</span>

  def <a title="(headers: List[akka.http.model.HttpHeader], contentType: akka.http.model.ContentType, emitPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit, emitFinalPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit)(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parseEntity">parseEntity</a><span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseEntity.headers">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, <a title="akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.parseEntity.contentType">contentType</a>: <a href="../../model/ContentType.scala.html#akka.http.model;ContentType" title="akka.http.model.ContentType">ContentType</a>,
                  <a title="(List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3">emitPartChunk</a>: <span class="delimiter">(</span>List<span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, ContentType, ByteString<span class="delimiter">)</span> ⇒ Unit = <span class="delimiter">{</span>
                    <span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.headers">headers</a>, <a title="akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.ct">ct</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.bytes">bytes</a><span class="delimiter">)</span> ⇒
                      <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)" title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.BodyPartStart.readResolve" title="(headers: List[akka.http.model.HttpHeader], createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output] =&gt; akka.http.model.BodyPartEntity)akka.http.engine.parsing.BodyPartParser.BodyPartStart">BodyPartStart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.$anonfun.entityParts">entityParts</a> ⇒ <a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity" title="akka.http.model.HttpEntity.type">HttpEntity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity;IndefiniteLength" title="(contentType: akka.http.model.ContentType, data: akka.stream.scaladsl.Source[akka.util.ByteString])akka.http.model.HttpEntity.IndefiniteLength">IndefiniteLength</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.ct" title="akka.http.model.ContentType">ct</a>,
                        <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.$anonfun.entityParts" title="akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output]">entityParts</a>.<a href="../../../stream/scaladsl/Flow.scala.html#akka.stream.scaladsl;FlowOps.collect" title="(pf: PartialFunction[akka.http.engine.parsing.BodyPartParser.Output,akka.util.ByteString])entityParts.Repr[akka.util.ByteString]">collect</a> <a title="&lt;$anon: akka.http.engine.parsing.BodyPartParser.Output =&gt; akka.util.ByteString&gt; extends scala.runtime.AbstractPartialFunction[akka.http.engine.parsing.BodyPartParser.Output,akka.util.ByteString] with Serializable" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.$anonfun;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case EntityPart<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.$anonfun;$anonfun.isDefinedAt.data">data</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.$anonfun;$anonfun.isDefinedAt.data" title="akka.util.ByteString">data</a> <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                      <a href="#akka.http.engine.parsing;BodyPartParser.emit(62410bfaff)" title="(bytes: akka.util.ByteString)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3.$anonfun.bytes" title="akka.util.ByteString">bytes</a><span class="delimiter">)</span>
                  <span class="delimiter">}</span>,
                  <a title="(List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$4">emitFinalPartChunk</a>: <span class="delimiter">(</span>List<span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, ContentType, ByteString<span class="delimiter">)</span> ⇒ Unit = <span class="delimiter">{</span>
                    <span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.headers">headers</a>, <a title="akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.ct">ct</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.bytes">bytes</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)" title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.BodyPartStart.readResolve" title="(headers: List[akka.http.model.HttpHeader], createEntity: akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output] =&gt; akka.http.model.BodyPartEntity)akka.http.engine.parsing.BodyPartParser.BodyPartStart">BodyPartStart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output]" id="akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.$anonfun.x$4">_</a> ⇒ <a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity" title="akka.http.model.HttpEntity.type">HttpEntity</a>.<a href="../../model/HttpEntity.scala.html#akka.http.model.HttpEntity;Strict" title="(contentType: akka.http.model.ContentType, data: akka.util.ByteString)akka.http.model.HttpEntity.Strict">Strict</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.ct" title="akka.http.model.ContentType">ct</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$4.$anonfun.bytes" title="akka.util.ByteString">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseEntity.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseEntity.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> =
    try <span class="delimiter">{</span>
      @tailrec def <a title="(index: Int)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.parseEntity.rec">rec</a><span class="delimiter">(</span><a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseEntity.rec.index">index</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
        val <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseEntity.rec.currentPartEnd">currentPartEnd</a> = <a href="#akka.http.engine.parsing;BodyPartParser.boyerMoore" title="akka.http.engine.parsing.BoyerMoore">boyerMoore</a>.<a href="BoyerMoore.scala.html#akka.http.engine.parsing;BoyerMoore.nextIndex" title="(haystack: akka.util.ByteString, offset: Int)Int">nextIndex</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.index" title="Int">index</a><span class="delimiter">)</span>
        def <a title="()Unit" id="akka.http.engine.parsing;BodyPartParser.parseEntity.rec.emitFinalChunk">emitFinalChunk</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$4" title="(v1: List[akka.http.model.HttpHeader], v2: akka.http.model.ContentType, v3: akka.util.ByteString)Unit">emitFinalPartChunk</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.contentType" title="akka.http.model.ContentType">contentType</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>.<span title="(from: Int, until: Int)akka.util.ByteString">slice</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.offset" title="Int">offset</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.currentPartEnd" title="Int">currentPartEnd</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val needleEnd = <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.currentPartEnd" title="Int">currentPartEnd</a> <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseEntity.rec.needleEnd">+</a> <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span>
        if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf" title="(input: akka.util.ByteString, offset: Int)Boolean">crlf</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.emitFinalChunk" title="()Unit">emitFinalChunk</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.parseHeaderLines" title="(input: akka.util.ByteString, lineStart: Int, headers: List[akka.http.model.HttpHeader], headerCount: Int, cth: Option[akka.http.model.headers.Content-Type])BodyPartParser.this.StateResult">parseHeaderLines</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.needleEnd" title="Int">needleEnd</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash" title="(input: akka.util.ByteString, offset: Int)Boolean">doubleDash</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.emitFinalChunk" title="()Unit">emitFinalChunk</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.http.engine.parsing;BodyPartParser.terminate" title="()BodyPartParser.this.StateResult">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec" title="(index: Int)BodyPartParser.this.StateResult">rec</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec.needleEnd" title="Int">needleEnd</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.rec" title="(index: Int)BodyPartParser.this.StateResult">rec</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.offset" title="Int">offset</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a href="package.scala.html#akka.http.engine.parsing.NotEnoughDataException" title="akka.http.engine.parsing.NotEnoughDataException.type">NotEnoughDataException</a> ⇒
        <span class="comment">// we cannot emit all input bytes since the end of the input might be the start of the next boundary</span>
        val <a title="Int" id="akka.http.engine.parsing;BodyPartParser.parseEntity.emitEnd">emitEnd</a> = math.<span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.offset" title="Int">offset</a><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity$default$3" title="(v1: List[akka.http.model.HttpHeader], v2: akka.http.model.ContentType, v3: akka.util.ByteString)Unit">emitPartChunk</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.headers" title="List[akka.http.model.HttpHeader]">headers</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.contentType" title="akka.http.model.ContentType">contentType</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a>.<span title="(from: Int, until: Int)akka.util.ByteString">slice</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.offset" title="Int">offset</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.emitEnd" title="Int">emitEnd</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="(List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit" id="akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit">simpleEmit</a>: <span class="delimiter">(</span>List<span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, ContentType, ByteString<span class="delimiter">)</span> ⇒ Unit = <span class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit.$anonfun.x$5">_</a>, <a title="akka.http.model.ContentType" id="akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit.$anonfun.x$6">_</a>, <a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit.$anonfun.bytes">bytes</a><span class="delimiter">)</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.emit(62410bfaff)" title="(bytes: akka.util.ByteString)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit.$anonfun.bytes" title="akka.util.ByteString">bytes</a><span class="delimiter">)</span>
        <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d)" title="(input: akka.util.ByteString, offset: Int)(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult">continue</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.input" title="akka.util.ByteString">input</a> <span title="(n: Int)akka.util.ByteString">drop</span> <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.emitEnd" title="Int">emitEnd</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity" title="(headers: List[akka.http.model.HttpHeader], contentType: akka.http.model.ContentType, emitPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit, emitFinalPartChunk: (List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit)(input: akka.util.ByteString, offset: Int)BodyPartParser.this.StateResult">parseEntity</a><a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.$anonfun.input" title="akka.util.ByteString" class="delimiter">(</a>null, null, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit" title="(List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit">simpleEmit</a>, <a href="#akka.http.engine.parsing;BodyPartParser.parseEntity.simpleEmit" title="(List[akka.http.model.HttpHeader], akka.http.model.ContentType, akka.util.ByteString) =&gt; Unit">simpleEmit</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  def <a title="(bytes: akka.util.ByteString)Unit" id="akka.http.engine.parsing;BodyPartParser.emit(62410bfaff)">emit</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.emit(62410bfaff).bytes">bytes</a>: <span title="akka.util.ByteString">ByteString</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = if <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.emit(62410bfaff).bytes" title="akka.util.ByteString">bytes</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)" title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.EntityPart.readResolve" title="(data: akka.util.ByteString)akka.http.engine.parsing.BodyPartParser.EntityPart">EntityPart</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.emit(62410bfaff).bytes" title="akka.util.ByteString">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit" id="akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)">emit</a><span class="delimiter">(</span><a title="akka.http.engine.parsing.BodyPartParser.Output" id="akka.http.engine.parsing;BodyPartParser.emit(6747bac37b).output">output</a>: <a href="#akka.http.engine.parsing.BodyPartParser;Output" title="akka.http.engine.parsing.BodyPartParser.Output">Output</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.http.engine.parsing;BodyPartParser.result" title="scala.collection.mutable.ListBuffer[akka.http.engine.parsing.BodyPartParser.Output]">result</a> <span title="(x: akka.http.engine.parsing.BodyPartParser.Output)BodyPartParser.this.result.type">+=</span> <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b).output" title="akka.http.engine.parsing.BodyPartParser.Output">output</a>

  def <a title="(input: akka.util.ByteString, offset: Int)(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d)">continue</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="(akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).next">next</a>: <span class="delimiter">(</span>ByteString, Int<span class="delimiter">)</span> ⇒ StateResult<span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.state" title="akka.util.ByteString =&gt; BodyPartParser.this.StateResult">state</a> =
      math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).offset" title="Int">offset</a> <span title="(x: Int)Int">-</span> <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).input" title="akka.util.ByteString">input</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span title="Int(-1)">-</span><span class="int">1</span> ⇒ <a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).$anonfun.more">more</a> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).next" title="(v1: akka.util.ByteString, v2: Int)BodyPartParser.this.StateResult">next</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).input" title="akka.util.ByteString">input</a> <span title="(that: akka.util.ByteString)akka.util.ByteString">++</span> <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).$anonfun.more" title="akka.util.ByteString">more</a>, <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).offset" title="Int">offset</a><span class="delimiter">)</span>
        case <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).next" title="(v1: akka.util.ByteString, v2: Int)BodyPartParser.this.StateResult">next</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.continue(58a66eb45d).$anonfun.x$7" title="akka.util.ByteString">_</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
        case <span title="Int(1)" class="int">1</span> ⇒ throw new <span title="IllegalStateException">IllegalStateException</span>
      <span class="delimiter">}</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.done" title="()BodyPartParser.this.StateResult">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(next: (akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.continue(b33a236128)">continue</a><span class="delimiter">(</span><a title="(akka.util.ByteString, Int) =&gt; BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.continue(b33a236128).next">next</a>: <span class="delimiter">(</span>ByteString, Int<span class="delimiter">)</span> ⇒ StateResult<span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.state" title="akka.util.ByteString =&gt; BodyPartParser.this.StateResult">state</a> = <a href="#akka.http.engine.parsing;BodyPartParser.continue(b33a236128).next" title="(v1: akka.util.ByteString, v2: Int)BodyPartParser.this.StateResult">next</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.continue(b33a236128).$anonfun.x$8" title="akka.util.ByteString">_</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.done" title="()BodyPartParser.this.StateResult">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(summary: String)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86)">fail</a><span class="delimiter">(</span><a title="String" id="akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86).summary">summary</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <a href="#akka.http.engine.parsing;BodyPartParser.fail(a39e394601)" title="(info: akka.http.model.ErrorInfo)BodyPartParser.this.StateResult">fail</a><span class="delimiter">(</span><a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="(summary: String, detail: String)akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.fail(dc9076ba86).summary" title="String">summary</a><span class="delimiter">)</span><span class="delimiter">)</span>
  def <a title="(info: akka.http.model.ErrorInfo)BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.fail(a39e394601)">fail</a><span class="delimiter">(</span><a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing;BodyPartParser.fail(a39e394601).info">info</a>: <a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.emit(6747bac37b)" title="(output: akka.http.engine.parsing.BodyPartParser.Output)Unit">emit</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser.ParseError.readResolve" title="(info: akka.http.model.ErrorInfo)akka.http.engine.parsing.BodyPartParser.ParseError">ParseError</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.fail(a39e394601).info" title="akka.http.model.ErrorInfo">info</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.terminate" title="()BodyPartParser.this.StateResult">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.terminate">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = <span class="delimiter">{</span>
    <a href="#akka.http.engine.parsing;BodyPartParser.terminated" title="Boolean">terminated</a> = true
    <a href="#akka.http.engine.parsing;BodyPartParser.done" title="()BodyPartParser.this.StateResult">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()BodyPartParser.this.StateResult" id="akka.http.engine.parsing;BodyPartParser.done">done</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.http.engine.parsing;BodyPartParser;StateResult" title="BodyPartParser.this.StateResult">StateResult</a> = null <span class="comment">// StateResult is a phantom type</span>

  <span class="comment">// the length of the needle without the preceding CRLF</span>
  def <a title="=&gt; Int" id="akka.http.engine.parsing;BodyPartParser.boundaryLength">boundaryLength</a> = <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span>

  @tailrec def <a title="(input: akka.util.ByteString, offset: Int, ix: Int)Boolean" id="akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79)">boundary</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).offset">offset</a>: <span title="Int">Int</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.boundary$default$3">ix</a>: <span title="Int">Int</span> = <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary$default$3" title="Int">ix</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="Array[Byte]">needle</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="package.scala.html#akka.http.engine.parsing.package.byteAt" title="(input: akka.util.ByteString, ix: Int)Byte">byteAt</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <a href="#akka.http.engine.parsing;BodyPartParser.boundary$default$3" title="Int">ix</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span title="(x: Byte)Boolean">==</span> <a href="#akka.http.engine.parsing;BodyPartParser.needle" title="(i: Int)Byte">needle</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary$default$3" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79)" title="(input: akka.util.ByteString, offset: Int, ix: Int)Boolean">boundary</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.boundary(2fcdac2b79).offset" title="Int">offset</a>, <a href="#akka.http.engine.parsing;BodyPartParser.boundary$default$3" title="Int">ix</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  def <a title="(input: akka.util.ByteString, offset: Int)Boolean" id="akka.http.engine.parsing;BodyPartParser.crlf">crlf</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.crlf.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.crlf.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.crlf.offset" title="Int">offset</a><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('\r')" class="char">'\r'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.crlf.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.crlf.offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('\n')" class="char">'\n'</span>

  def <a title="(input: akka.util.ByteString, offset: Int)Boolean" id="akka.http.engine.parsing;BodyPartParser.doubleDash">doubleDash</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing;BodyPartParser.doubleDash.input">input</a>: <span title="akka.util.ByteString">ByteString</span>, <a title="Int" id="akka.http.engine.parsing;BodyPartParser.doubleDash.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.doubleDash.offset" title="Int">offset</a><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('-')" class="char">'-'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="package.scala.html#akka.http.engine.parsing.package.byteChar" title="(input: akka.util.ByteString, ix: Int)Char">byteChar</a><span class="delimiter">(</span><a href="#akka.http.engine.parsing;BodyPartParser.doubleDash.input" title="akka.util.ByteString">input</a>, <a href="#akka.http.engine.parsing;BodyPartParser.doubleDash.offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Char)Boolean">==</span> <span title="Char('-')" class="char">'-'</span>

<span class="delimiter">}</span>

private<span class="delimiter">[</span>http<span class="delimiter">]</span> object <a title="akka.http.engine.parsing.BodyPartParser.type" id="akka.http.engine.parsing.BodyPartParser">BodyPartParser</a> <a href="#akka.http.engine.parsing.BodyPartParser" title="akka.http.engine.parsing.BodyPartParser.type" class="delimiter">{</a>
  <span class="comment">// http://tools.ietf.org/html/rfc2046#section-5.1.1</span>
  val boundaryCharNoSpace = <span title="akka.parboiled2.CharPredicate.type">CharPredicate</span>.<span title="=&gt; akka.parboiled2.CharPredicate">Digit</span> <span title="(that: akka.parboiled2.CharPredicate)akka.parboiled2.CharPredicate">++</span> <span title="akka.parboiled2.CharPredicate.type">CharPredicate</span>.<span title="=&gt; akka.parboiled2.CharPredicate">Alpha</span> <a title="akka.parboiled2.CharPredicate" id="akka.http.engine.parsing.BodyPartParser.boundaryCharNoSpace">++</a> <span title="String(&quot;\'()+_,-./:=?&quot;)" class="string">&quot;'()+_,-./:=?&quot;</span>

  sealed trait <a title="trait Output extends AnyRef" id="akka.http.engine.parsing.BodyPartParser;Output">Output</a>
  final case class <a title="class BodyPartStart extends AnyRef with akka.http.engine.parsing.BodyPartParser.Output with Product with Serializable" id="akka.http.engine.parsing.BodyPartParser.BodyPartStart.readResolve">BodyPartStart</a><span title="Product" class="delimiter">(</span><a title="List[akka.http.model.HttpHeader]" id="akka.http.engine.parsing.BodyPartParser;BodyPartStart.headers">headers</a>: <span title="List[akka.http.model.HttpHeader]">List</span><span class="delimiter">[</span>HttpHeader<span class="delimiter">]</span>, <a title="akka.stream.scaladsl.Source[akka.http.engine.parsing.BodyPartParser.Output] =&gt; akka.http.model.BodyPartEntity" id="akka.http.engine.parsing.BodyPartParser;BodyPartStart.createEntity">createEntity</a>: Source<span class="delimiter">[</span>Output<span class="delimiter">]</span> ⇒ BodyPartEntity<span class="delimiter">)</span> extends <a href="#akka.http.engine.parsing.BodyPartParser;Output" title="akka.http.engine.parsing.BodyPartParser.Output">Output</a>
  final case class <a title="class EntityPart extends AnyRef with akka.http.engine.parsing.BodyPartParser.Output with Product with Serializable" id="akka.http.engine.parsing.BodyPartParser.EntityPart.readResolve">EntityPart</a><span title="Product" class="delimiter">(</span><a title="akka.util.ByteString" id="akka.http.engine.parsing.BodyPartParser;EntityPart.data">data</a>: <span title="akka.util.ByteString">ByteString</span><span class="delimiter">)</span> extends <a href="#akka.http.engine.parsing.BodyPartParser;Output" title="akka.http.engine.parsing.BodyPartParser.Output">Output</a>
  final case class <a title="class ParseError extends AnyRef with akka.http.engine.parsing.BodyPartParser.Output with Product with Serializable" id="akka.http.engine.parsing.BodyPartParser.ParseError.readResolve">ParseError</a><span title="Product" class="delimiter">(</span><a title="akka.http.model.ErrorInfo" id="akka.http.engine.parsing.BodyPartParser;ParseError.info">info</a>: <a href="../../model/ErrorInfo.scala.html#akka.http.model;ErrorInfo" title="akka.http.model.ErrorInfo">ErrorInfo</a><span class="delimiter">)</span> extends <a href="#akka.http.engine.parsing.BodyPartParser;Output" title="akka.http.engine.parsing.BodyPartParser.Output">Output</a>

  final case class <a title="class Settings extends AnyRef with akka.http.engine.parsing.HttpHeaderParser.Settings with Product with Serializable" id="akka.http.engine.parsing.BodyPartParser.Settings.readResolve">Settings</a><span title="Product" class="delimiter">(</span>
    <a title="Int" id="akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderNameLength">maxHeaderNameLength</a>: <span title="Int">Int</span>,
    <a title="Int" id="akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderValueLength">maxHeaderValueLength</a>: <span title="Int">Int</span>,
    <a title="Int" id="akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderCount">maxHeaderCount</a>: <span title="Int">Int</span>,
    <a title="Boolean" id="akka.http.engine.parsing.BodyPartParser;Settings.illegalHeaderWarnings">illegalHeaderWarnings</a>: <span title="Boolean">Boolean</span>,
    <a title="Int" id="akka.http.engine.parsing.BodyPartParser;Settings.headerValueCacheLimit">headerValueCacheLimit</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends HttpHeaderParser.<a href="HttpHeaderParser.scala.html#akka.http.engine.parsing.HttpHeaderParser;Settings" title="akka.http.engine.parsing.HttpHeaderParser.Settings">Settings</a> <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderNameLength" title="=&gt; Int">maxHeaderNameLength</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;maxHeaderNameLength must be &gt; 0&quot;)" class="string">&quot;maxHeaderNameLength must be &gt; 0&quot;</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderValueLength" title="=&gt; Int">maxHeaderValueLength</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;maxHeaderValueLength must be &gt; 0&quot;)" class="string">&quot;maxHeaderValueLength must be &gt; 0&quot;</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.maxHeaderCount" title="=&gt; Int">maxHeaderCount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;maxHeaderCount must be &gt; 0&quot;)" class="string">&quot;maxHeaderCount must be &gt; 0&quot;</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.http.engine.parsing.BodyPartParser;Settings.headerValueCacheLimit" title="=&gt; Int">headerValueCacheLimit</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;headerValueCacheLimit must be &gt;= 0&quot;)" class="string">&quot;headerValueCacheLimit must be &gt;= 0&quot;</span><span class="delimiter">)</span>
    def <a title="(headerName: String)Int" id="akka.http.engine.parsing.BodyPartParser;Settings.headerValueCacheLimit(b7fa6b0738)">headerValueCacheLimit</a><span class="delimiter">(</span><a title="String" id="akka.http.engine.parsing.BodyPartParser;Settings.headerValueCacheLimit(b7fa6b0738).headerName">headerName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#akka.http.engine.parsing.BodyPartParser;Settings.headerValueCacheLimit" title="=&gt; Int">headerValueCacheLimit</a>
  <span class="delimiter">}</span>

  <span class="comment">// TODO: load from config</span>
  val <a title="akka.http.engine.parsing.BodyPartParser.Settings" id="akka.http.engine.parsing.BodyPartParser.defaultSettings">defaultSettings</a> = <a href="#akka.http.engine.parsing.BodyPartParser.Settings.readResolve" title="(maxHeaderNameLength: Int, maxHeaderValueLength: Int, maxHeaderCount: Int, illegalHeaderWarnings: Boolean, headerValueCacheLimit: Int)akka.http.engine.parsing.BodyPartParser.Settings">Settings</a><span class="delimiter">(</span>
    maxHeaderNameLength = <span title="Int(64)" class="int">64</span>,
    maxHeaderValueLength = <span title="Int(8192)" class="int">8192</span>,
    maxHeaderCount = <span title="Int(64)" class="int">64</span>,
    illegalHeaderWarnings = true,
    headerValueCacheLimit = <span title="Int(8)" class="int">8</span><span class="delimiter">)</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
