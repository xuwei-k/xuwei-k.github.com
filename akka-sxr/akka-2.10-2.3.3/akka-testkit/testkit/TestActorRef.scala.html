<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-testkit/testkit/TestActorRef.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.testkit

<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> java.util.concurrent.atomic.AtomicLong
<span class="keyword">import</span> akka.dispatch._
<span class="keyword">import</span> scala.concurrent.Await
<span class="keyword">import</span> scala.reflect.ClassTag
<span class="keyword">import</span> akka.pattern.ask

<span class="comment">/**
 * This special ActorRef is exclusively for use during unit testing in a single-threaded environment. Therefore, it
 * overrides the dispatcher to CallingThreadDispatcher and sets the receiveTimeout to None. Otherwise,
 * it acts just like a normal ActorRef. You may retrieve a reference to the underlying actor to test internal logic.
 *
 * @since 1.1
 */</span>
<span class="keyword">class</span> <a title="class TestActorRef[T &lt;: akka.actor.Actor] extends akka.actor.LocalActorRef" id="akka.testkit;TestActorRef">TestActorRef</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit;TestActorRef;T">T</a> &lt;: Actor<span class="delimiter">]</span><a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]" class="delimiter">(</a>
  <a title="akka.actor.ActorSystem" id="akka.testkit;TestActorRef._system">_system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>,
  <a title="akka.actor.Props" id="akka.testkit;TestActorRef._props">_props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
  <a title="akka.actor.ActorRef" id="akka.testkit;TestActorRef._supervisor">_supervisor</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
  <a title="String" id="akka.testkit;TestActorRef.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.testkit;TestActorRef.props">props</a> =
      <a href="#akka.testkit;TestActorRef._props" title="akka.actor.Props">_props</a>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span>
        <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.testkit;TestActorRef._props" title="akka.actor.Props">_props</a>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.deploy" title="=&gt; akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.dispatcher" title="=&gt; String">dispatcher</a> <span title="(x$1: AnyRef)Boolean">==</span> Deploy.<span title="String(&quot;&quot;)">NoDispatcherGiven</span><span class="delimiter">)</span> <a href="CallingThreadDispatcher.scala.html#akka.testkit.CallingThreadDispatcher" title="akka.testkit.CallingThreadDispatcher.type">CallingThreadDispatcher</a>.<a href="CallingThreadDispatcher.scala.html#akka.testkit.CallingThreadDispatcher.Id" title="=&gt; String">Id</a>
        <span class="keyword">else</span> <a href="#akka.testkit;TestActorRef._props" title="akka.actor.Props">_props</a>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.dispatch.MessageDispatcher" id="akka.testkit;TestActorRef.dispatcher">dispatcher</a> = <a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatchers" title="=&gt; akka.dispatch.Dispatchers">dispatchers</a>.<a href="../../akka-actor/dispatch/Dispatchers.scala.html#akka.dispatch;Dispatchers.lookup" title="(id: String)akka.dispatch.MessageDispatcher">lookup</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.props" title="akka.actor.Props">props</a>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="AnyVal" id="akka.testkit;TestActorRef.disregard">disregard</a> = <a href="#akka.testkit;TestActorRef._supervisor" title="akka.actor.ActorRef">_supervisor</a> <span title="AnyVal" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.actor.LocalActorRef" id="akka.testkit;TestActorRef.disregard.l">l</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef" title="akka.actor.LocalActorRef">LocalActorRef</a> ⇒ <a href="#akka.testkit;TestActorRef.disregard.l" title="akka.actor.LocalActorRef">l</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/dungeon/Children.scala.html#akka.actor.dungeon;Children.reserveChild" title="(name: String)Boolean">reserveChild</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.name" title="String">name</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.actor.RepointableActorRef" id="akka.testkit;TestActorRef.disregard.r">r</a>: <a href="../../akka-actor/actor/RepointableActorRef.scala.html#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef">RepointableActorRef</a> ⇒ <a href="#akka.testkit;TestActorRef.disregard.r" title="akka.actor.RepointableActorRef">r</a>.<a href="../../akka-actor/actor/RepointableActorRef.scala.html#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a> <span title="AnyVal" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="akka.actor.UnstartedCell" id="akka.testkit;TestActorRef.disregard.u">u</a>: <a href="../../akka-actor/actor/RepointableActorRef.scala.html#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell">UnstartedCell</a> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;cannot attach a TestActor to an unstarted top-level actor, ensure that it is started by sending a message and observing the reply&quot;)" class="string">&quot;cannot attach a TestActor to an unstarted top-level actor, ensure that it is started by sending a message and observing the reply&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="akka.actor.ActorCell" id="akka.testkit;TestActorRef.disregard.c">c</a>: <a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a>     ⇒ <a href="#akka.testkit;TestActorRef.disregard.c" title="akka.actor.ActorCell">c</a>.<a href="../../akka-actor/actor/dungeon/Children.scala.html#akka.actor.dungeon;Children.reserveChild" title="(name: String)Boolean">reserveChild</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.name" title="String">name</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="akka.actor.Cell" id="akka.testkit;TestActorRef.disregard.o">o</a>                ⇒ <a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;trying to attach child {} to unknown type of supervisor cell {}, this is not going to end well&quot;)" class="string">&quot;trying to attach child {} to unknown type of supervisor cell {}, this is not going to end well&quot;</span>, <a href="#akka.testkit;TestActorRef.name" title="String">name</a>, <a href="#akka.testkit;TestActorRef.disregard.o" title="akka.actor.Cell">o</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="akka.actor.ActorRef" id="akka.testkit;TestActorRef.disregard.s">s</a> ⇒ <a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;trying to attach child {} to unknown type of supervisor {}, this is not going to end well&quot;)" class="string">&quot;trying to attach child {} to unknown type of supervisor {}, this is not going to end well&quot;</span>, <a href="#akka.testkit;TestActorRef.name" title="String">name</a>, <a href="#akka.testkit;TestActorRef.disregard.s" title="akka.actor.ActorRef">s</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="keyword">with</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef" title="akka.actor.LocalActorRef">LocalActorRef</a><span class="delimiter">(</span>
    <a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorSystemImpl" class="delimiter">[</span><a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">]</span>,
    <a href="#akka.testkit;TestActorRef.props" title="akka.actor.Props">props</a>,
    <a href="#akka.testkit;TestActorRef.dispatcher" title="akka.dispatch.MessageDispatcher">dispatcher</a>,
    <a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.mailboxes" title="=&gt; akka.dispatch.Mailboxes">mailboxes</a>.<a href="../../akka-actor/dispatch/Mailboxes.scala.html#akka.dispatch;Mailboxes.getMailboxType" title="(props: akka.actor.Props, dispatcherConfig: com.typesafe.config.Config)akka.dispatch.MailboxType">getMailboxType</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.props" title="akka.actor.Props">props</a>, <a href="#akka.testkit;TestActorRef.dispatcher" title="akka.dispatch.MessageDispatcher">dispatcher</a>.<a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher.configurator" title="=&gt; akka.dispatch.MessageDispatcherConfigurator">configurator</a>.<a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcherConfigurator.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span>,
    <a href="#akka.testkit;TestActorRef._supervisor" title="akka.actor.ActorRef">_supervisor</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>,
    <a href="#akka.testkit;TestActorRef._supervisor" title="akka.actor.ActorRef">_supervisor</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a> <a href="../../akka-actor/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <a href="#akka.testkit;TestActorRef.name" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">// we need to start ourselves since the creation of an actor has been split into initialization and starting</span>
  <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.start" title="()akka.actor.ActorCell">start</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="#akka.testkit.TestActorRef.readResolve" title="akka.testkit.TestActorRef.type">TestActorRef</a>.InternalGetActor

  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ActorSystemImpl, ref: akka.actor.InternalActorRef, props: akka.actor.Props, dispatcher: akka.dispatch.MessageDispatcher, supervisor: akka.actor.InternalActorRef)akka.actor.ActorCell" id="akka.testkit;TestActorRef.newActorCell">newActorCell</a><span class="delimiter">(</span><a title="akka.actor.ActorSystemImpl" id="akka.testkit;TestActorRef.newActorCell.system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>, <a title="akka.actor.InternalActorRef" id="akka.testkit;TestActorRef.newActorCell.ref">ref</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>, <a title="akka.actor.Props" id="akka.testkit;TestActorRef.newActorCell.props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
                                      <a title="akka.dispatch.MessageDispatcher" id="akka.testkit;TestActorRef.newActorCell.dispatcher">dispatcher</a>: <a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher" title="akka.dispatch.MessageDispatcher">MessageDispatcher</a>, <a title="akka.actor.InternalActorRef" id="akka.testkit;TestActorRef.newActorCell.supervisor">supervisor</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">)</span>: <a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a> =
    <a href="#akka.testkit;TestActorRef.newActorCell;$anon" title="akka.actor.ActorCell" class="keyword">new</a> <a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell" title="anonymous class $anon extends akka.actor.ActorCell" id="akka.testkit;TestActorRef.newActorCell;$anon">ActorCell</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.newActorCell.system" title="akka.actor.ActorSystemImpl">system</a>, <a href="#akka.testkit;TestActorRef.newActorCell.ref" title="akka.actor.InternalActorRef">ref</a>, <a href="#akka.testkit;TestActorRef.newActorCell.props" title="akka.actor.Props">props</a>, <a href="#akka.testkit;TestActorRef.newActorCell.dispatcher" title="akka.dispatch.MessageDispatcher">dispatcher</a>, <a href="#akka.testkit;TestActorRef.newActorCell.supervisor" title="akka.actor.InternalActorRef">supervisor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(msg: akka.dispatch.Envelope)Unit" id="akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage">autoReceiveMessage</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.msg">msg</a>: <a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.msg" title="akka.dispatch.Envelope">msg</a>.<a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#akka.testkit.TestActorRef.InternalGetActor.readResolve" title="akka.testkit.TestActorRef.InternalGetActor.type">InternalGetActor</a> ⇒ <a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.sender" title="()akka.actor.ActorRef">sender</a><a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.qual$1" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.x$2">!</a> <a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.actor" title="akka.actor.Actor" id="akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.x$1">actor</a>
          <span class="keyword">case</span> _                ⇒ <a href="#akka.testkit;TestActorRef.newActorCell;$anon" title="akka.actor.ActorCell" class="keyword">super</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.autoReceiveMessage" title="(msg: akka.dispatch.Envelope)Unit">autoReceiveMessage</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.newActorCell;$anon.autoReceiveMessage.msg" title="akka.dispatch.Envelope">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Directly inject messages into actor receive behavior. Any exceptions
   * thrown will be available to you, while still being able to use
   * become/unbecome.
   */</span>
  <span class="keyword">def</span> <a title="(o: Any)Unit" id="akka.testkit;TestActorRef.receive(1ada5f558e)">receive</a><span class="delimiter">(</span><a title="Any" id="akka.testkit;TestActorRef.receive(1ada5f558e).o">o</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.testkit;TestActorRef.receive(8e281b5ecb)" title="(o: Any, sender: akka.actor.ActorRef)Unit">receive</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.receive(1ada5f558e).o" title="Any">o</a>, <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Directly inject messages into actor receive behavior. Any exceptions
   * thrown will be available to you, while still being able to use
   * become/unbecome.
   */</span>
  <span class="keyword">def</span> <a title="(o: Any, sender: akka.actor.ActorRef)Unit" id="akka.testkit;TestActorRef.receive(8e281b5ecb)">receive</a><span class="delimiter">(</span><a title="Any" id="akka.testkit;TestActorRef.receive(8e281b5ecb).o">o</a>: <span title="Any">Any</span>, <a title="akka.actor.ActorRef" id="akka.testkit;TestActorRef.receive(8e281b5ecb).sender">sender</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
    <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.currentMessage_=" title="(x$1: akka.dispatch.Envelope)Unit">currentMessage</a> = <a href="../../akka-actor/dispatch/AbstractDispatcher.scala.html#akka.dispatch.Envelope.apply(fd4a9d0721)" title="(message: Any, sender: akka.actor.ActorRef, system: akka.actor.ActorSystem)akka.dispatch.Envelope">Envelope</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.receive(8e281b5ecb).o" title="Any">o</a>, <span title="akka.actor.ActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.receive(8e281b5ecb).sender" title="akka.actor.ActorRef">sender</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a> <span class="keyword">else</span> <a href="#akka.testkit;TestActorRef.receive(8e281b5ecb).sender" title="akka.actor.ActorRef">sender</a>, <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>
    <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.receiveMessage" title="(msg: Any)Unit">receiveMessage</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.receive(8e281b5ecb).o" title="Any">o</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">finally</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.currentMessage_=" title="(x$1: akka.dispatch.Envelope)Unit">currentMessage</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">/**
   * Retrieve reference to the underlying actor, where the static type matches the factory used inside the
   * constructor. Beware that this reference is discarded by the ActorRef upon restarting the actor (should this
   * reference be linked to a supervisor). The old Actor may of course still be used in post-mortem assertions.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; T" id="akka.testkit;TestActorRef.underlyingActor">underlyingActor</a>: <a href="#akka.testkit;TestActorRef;T" title="T">T</a> = <span class="delimiter">{</span>
    <span class="comment">// volatile mailbox read to bring in actor field</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.IllegalActorStateException" class="keyword">new</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;IllegalActorStateException" title="akka.actor.IllegalActorStateException">IllegalActorStateException</a><span class="delimiter">(</span><span title="String(&quot;underlying actor is terminated&quot;)" class="string">&quot;underlying actor is terminated&quot;</span><span class="delimiter">)</span>
    <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.testkit;TestActorRef;T" title="T">T</a><span class="delimiter">]</span> <span title="T" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒
        <span class="keyword">val</span> <a title="akka.util.Timeout" id="akka.testkit;TestActorRef.underlyingActor.t">t</a> = <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.testkit.TestKitSettings">TestKitExtension</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef._system" title="akka.actor.ActorSystem">_system</a><span class="delimiter">)</span>.<a href="TestKitExtension.scala.html#akka.testkit;TestKitSettings.DefaultTimeout" title="=&gt; akka.util.Timeout">DefaultTimeout</a>
        <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[Any], atMost: scala.concurrent.duration.Duration)Any">result</span><span class="delimiter">(</span><a href="../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef" class="keyword">this</a>.<a href="../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.InternalGetActor.readResolve" title="akka.testkit.TestActorRef.InternalGetActor.type">InternalGetActor</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.underlyingActor.t" title="akka.util.Timeout">t</a><span class="delimiter">)</span>, <a href="#akka.testkit;TestActorRef.underlyingActor.t" title="akka.util.Timeout">t</a>.<a href="../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.testkit;TestActorRef;T" title="T">T</a><span class="delimiter">]</span>
      <span class="keyword">case</span> <a title="T" id="akka.testkit;TestActorRef.underlyingActor.ref">ref</a> ⇒ <a href="#akka.testkit;TestActorRef.underlyingActor.ref" title="T">ref</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Registers this actor to be a death monitor of the provided ActorRef
   * This means that this actor will get a Terminated()-message when the provided actor
   * is permanently terminated.
   *
   * @return the same ActorRef that is provided to it, to allow for cleaner invocations
   */</span>
  <span class="keyword">def</span> <a title="(subject: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.testkit;TestActorRef.watch">watch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestActorRef.watch.subject">subject</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.watch.subject" title="akka.actor.ActorRef">subject</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Deregisters this actor from being a death monitor of the provided ActorRef
   * This means that this actor will not get a Terminated()-message when the provided actor
   * is permanently terminated.
   *
   * @return the same ActorRef that is provided to it, to allow for cleaner invocations
   */</span>
  <span class="keyword">def</span> <a title="(subject: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.testkit;TestActorRef.unwatch">unwatch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestActorRef.unwatch.subject">subject</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.underlying" title="=&gt; akka.actor.ActorCell">underlying</a>.<a href="../../akka-actor/actor/dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.unwatch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">unwatch</a><span class="delimiter">(</span><a href="#akka.testkit;TestActorRef.unwatch.subject" title="akka.actor.ActorRef">subject</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="akka.testkit;TestActorRef.toString">toString</a> = <span title="String(&quot;TestActor[&quot;)" class="string">&quot;TestActor[&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalActorRef.path" title="=&gt; akka.actor.ActorPath">path</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="akka.testkit.TestActorRef.type" id="akka.testkit.TestActorRef.readResolve">TestActorRef</a> <a href="#akka.testkit.TestActorRef.readResolve" title="akka.testkit.TestActorRef.type" class="delimiter">{</a>

  <span class="keyword">private</span> <span class="keyword">case object</span> <a href="#akka.testkit.TestActorRef.InternalGetActor.productElement.x$1" title="akka.testkit.TestActorRef.InternalGetActor.type" id="akka.testkit.TestActorRef.InternalGetActor.readResolve">InternalGetActor</a> <span title="Product" class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;AutoReceivedMessage" title="akka.actor.AutoReceivedMessage">AutoReceivedMessage</a> <span class="keyword">with</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;PossiblyHarmful" title="akka.actor.PossiblyHarmful">PossiblyHarmful</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicLong" id="akka.testkit.TestActorRef.number">number</a> = <span title="()java.util.concurrent.atomic.AtomicLong" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicLong">AtomicLong</span>
  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; String" id="akka.testkit.TestActorRef.randomName">randomName</a>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="akka.testkit.TestActorRef.randomName.l">l</a> = <a href="#akka.testkit.TestActorRef.number" title="=&gt; java.util.concurrent.atomic.AtomicLong">number</a>.<span title="()Long">getAndIncrement</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)String">+</span> akka.util.<a href="../../akka-actor/util/Helpers.scala.html#akka.util.Helpers" title="akka.util.Helpers.type">Helpers</a>.<a href="../../akka-actor/util/Helpers.scala.html#akka.util.Helpers.base64" title="(l: Long, sb: StringBuilder)String">base64</a><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.randomName.l" title="Long">l</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](factory: =&gt; T)(implicit evidence$1: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(8082f11ce3)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(8082f11ce3);T">T</a> &lt;: Actor: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit.TestActorRef.apply(8082f11ce3).factory">factory</a>: ⇒ T<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(8082f11ce3).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(947f25288b)" title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(8082f11ce3);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(8082f11ce3).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; T)(implicit evidence$2: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><a href="#akka.testkit.TestActorRef.apply(8082f11ce3).evidence$1" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.apply(8082f11ce3).factory" title="=&gt; T">factory</a><span class="delimiter">)</span>, <a href="#akka.testkit.TestActorRef.randomName" title="=&gt; String">randomName</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](factory: =&gt; T, name: String)(implicit evidence$2: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(8bf91e6cdf)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(8bf91e6cdf);T">T</a> &lt;: Actor: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit.TestActorRef.apply(8bf91e6cdf).factory">factory</a>: ⇒ T, <a title="String" id="akka.testkit.TestActorRef.apply(8bf91e6cdf).name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(8bf91e6cdf).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(947f25288b)" title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(8bf91e6cdf);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(8bf91e6cdf).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; T)(implicit evidence$2: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><a href="#akka.testkit.TestActorRef.apply(8bf91e6cdf).evidence$2" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.apply(8bf91e6cdf).factory" title="=&gt; T">factory</a><span class="delimiter">)</span>, <a href="#akka.testkit.TestActorRef.apply(8bf91e6cdf).name" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](props: akka.actor.Props)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(864568f393)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(864568f393);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.testkit.TestActorRef.apply(864568f393).props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(864568f393).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(947f25288b)" title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(864568f393);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(864568f393).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.apply(864568f393).props" title="akka.actor.Props">props</a>, <a href="#akka.testkit.TestActorRef.randomName" title="=&gt; String">randomName</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(947f25288b)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(947f25288b);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.testkit.TestActorRef.apply(947f25288b).props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="String" id="akka.testkit.TestActorRef.apply(947f25288b).name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(947f25288b).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#akka.testkit.TestActorRef.apply(d8e3946e64)" title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, supervisor: akka.actor.ActorRef, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(props: akka.actor.Props, supervisor: akka.actor.ActorRef, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(947f25288b);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(947f25288b).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.apply(947f25288b).props" title="akka.actor.Props">props</a>, <a href="#akka.testkit.TestActorRef.apply(947f25288b).system" title="akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorSystemImpl" class="delimiter">[</span><a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">]</span>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.guardian" title="=&gt; akka.actor.LocalActorRef">guardian</a>, <a href="#akka.testkit.TestActorRef.apply(947f25288b).name" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, supervisor: akka.actor.ActorRef, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(d8e3946e64)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(d8e3946e64);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.testkit.TestActorRef.apply(d8e3946e64).props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="akka.actor.ActorRef" id="akka.testkit.TestActorRef.apply(d8e3946e64).supervisor">supervisor</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="String" id="akka.testkit.TestActorRef.apply(d8e3946e64).name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(d8e3946e64).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorSystemImpl" id="akka.testkit.TestActorRef.apply(d8e3946e64).sysImpl">sysImpl</a> = <a href="#akka.testkit.TestActorRef.apply(d8e3946e64).system" title="akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorSystemImpl" class="delimiter">[</span><a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">]</span>
    <span title="akka.testkit.TestActorRef[T]" class="keyword">new</span> <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.apply(d8e3946e64).sysImpl" title="akka.actor.ActorSystemImpl">sysImpl</a>, <a href="#akka.testkit.TestActorRef.apply(d8e3946e64).props" title="akka.actor.Props">props</a>, <a href="#akka.testkit.TestActorRef.apply(d8e3946e64).supervisor" title="akka.actor.ActorRef">supervisor</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>, <a href="#akka.testkit.TestActorRef.apply(d8e3946e64).name" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](implicit t: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(2b4c36cea4)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(2b4c36cea4);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.ClassTag[T]" id="akka.testkit.TestActorRef.apply(2b4c36cea4).t">t</a>: <span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(2b4c36cea4).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(f4b2de1699)" title="[T &lt;: akka.actor.Actor](name: String)(implicit t: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(name: String)(implicit t: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(2b4c36cea4);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(2b4c36cea4).t" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.randomName" title="=&gt; String">randomName</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](name: String)(implicit t: scala.reflect.ClassTag[T], implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.apply(f4b2de1699)">apply</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.apply(f4b2de1699);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="akka.testkit.TestActorRef.apply(f4b2de1699).name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.ClassTag[T]" id="akka.testkit.TestActorRef.apply(f4b2de1699).t">t</a>: <span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.apply(f4b2de1699).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(947f25288b)" title="[T &lt;: akka.actor.Actor](props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span title="(props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(f4b2de1699);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(f4b2de1699).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; T)(implicit evidence$2: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><a href="#akka.testkit.TestActorRef.apply(f4b2de1699).t" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><span class="delimiter">{</span>
    <a href="#akka.testkit.TestActorRef.apply(f4b2de1699).system" title="akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ExtendedActorSystem" class="delimiter">[</span><a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">]</span>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.dynamicAccess" title="=&gt; akka.actor.DynamicAccess">dynamicAccess</a>.<a href="../../akka-actor/actor/DynamicAccess.scala.html#akka.actor;DynamicAccess.createInstanceFor(6c30f0241b)" title="[T](clazz: Class[_], args: scala.collection.immutable.Seq[(Class[_], AnyRef)])(implicit evidence$1: scala.reflect.ClassTag[T])scala.util.Try[T]">createInstanceFor</a><span title="(clazz: Class[_], args: scala.collection.immutable.Seq[(Class[_], AnyRef)])(implicit evidence$1: scala.reflect.ClassTag[T])scala.util.Try[T]" class="delimiter">[</span><a href="#akka.testkit.TestActorRef.apply(f4b2de1699);T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.TestActorRef.apply(f4b2de1699).t" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#akka.testkit.TestActorRef.apply(f4b2de1699).t" title="scala.reflect.ClassTag[T]">t</a>.<span title="=&gt; Class[_]">runtimeClass</span>, <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>.<span title="(f: PartialFunction[Throwable,T])scala.util.Try[T]">recover</span><span class="delimiter">(</span><a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,Nothing] with Serializable" id="akka.testkit.TestActorRef.apply(f4b2de1699);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Throwable" id="akka.testkit.TestActorRef.apply(f4b2de1699);$anonfun.isDefinedAt.exception">exception</a> ⇒ <span title="Nothing" class="keyword">throw</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor.ActorInitializationException.apply(933b2725f8)" title="(actor: akka.actor.ActorRef, message: String, cause: Throwable)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>,
        <span class="string">&quot;Could not instantiate Actor&quot;</span> +
          <span class="string">&quot;\nMake sure Actor is NOT defined inside a class/trait,&quot;</span> +
          <span class="string">&quot;\nif so put it outside the class/trait, f.e. in a companion object,&quot;</span> <span title="String(&quot;Could not instantiate Actor\nMake sure Actor is NOT defined inside a class/trait,\nif so put it outside the class/trait, f.e. in a companion object,\nOR try to change: \'actorOf(Props[MyActor]\' to \'actorOf(Props(new MyActor)\'.&quot;)">+</span>
          <span class="string">&quot;\nOR try to change: 'actorOf(Props[MyActor]' to 'actorOf(Props(new MyActor)'.&quot;</span>, <a href="#akka.testkit.TestActorRef.apply(f4b2de1699);$anonfun.isDefinedAt.exception" title="Throwable">exception</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; T">get</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>, <a href="#akka.testkit.TestActorRef.apply(f4b2de1699).name" title="String">name</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: create a TestActorRef in the given system for the given props,
   * with the given name.
   */</span>
  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](system: akka.actor.ActorSystem, props: akka.actor.Props, name: String)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.create(7538d167fd)">create</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.create(7538d167fd);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.create(7538d167fd).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="akka.actor.Props" id="akka.testkit.TestActorRef.create(7538d167fd).props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="String" id="akka.testkit.TestActorRef.create(7538d167fd).name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(947f25288b)" title="(props: akka.actor.Props, name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.create(7538d167fd).props" title="akka.actor.Props">props</a>, <a href="#akka.testkit.TestActorRef.create(7538d167fd).name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.create(7538d167fd).system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: create a TestActorRef in the given system for the given props,
   * with a random name.
   */</span>
  <span class="keyword">def</span> <a title="[T &lt;: akka.actor.Actor](system: akka.actor.ActorSystem, props: akka.actor.Props)akka.testkit.TestActorRef[T]" id="akka.testkit.TestActorRef.create(b603c621d0)">create</a><span class="delimiter">[</span><a title=" &lt;: akka.actor.Actor" id="akka.testkit.TestActorRef.create(b603c621d0);T">T</a> &lt;: Actor<span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.testkit.TestActorRef.create(b603c621d0).system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="akka.actor.Props" id="akka.testkit.TestActorRef.create(b603c621d0).props">props</a>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestActorRef" title="akka.testkit.TestActorRef[T]">TestActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit.TestActorRef.apply(864568f393)" title="(props: akka.actor.Props)(implicit system: akka.actor.ActorSystem)akka.testkit.TestActorRef[T]">apply</a><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.create(b603c621d0).props" title="akka.actor.Props">props</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit.TestActorRef.create(b603c621d0).system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
