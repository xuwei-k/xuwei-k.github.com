<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-multi-node-testkit/remote/testconductor/Player.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.remote.testconductor

<span class="keyword">import</span> <span title="language.type">language</span>.postfixOps

<span class="keyword">import</span> java.util.concurrent.TimeoutException
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.remote.testconductor.<a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection" title="akka.remote.testconductor.RemoteConnection.type">RemoteConnection</a>.getAddrString
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.<span class="delimiter">{</span> ExecutionContext, Await, Future <span class="delimiter">}</span>
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> scala.util.control.NoStackTrace
<span class="keyword">import</span> scala.reflect.classTag
<span class="keyword">import</span> akka.util.Timeout
<span class="keyword">import</span> org.jboss.netty.channel.<span class="delimiter">{</span> Channel, SimpleChannelUpstreamHandler, ChannelHandlerContext, ChannelStateEvent, MessageEvent, WriteCompletionEvent, ExceptionEvent <span class="delimiter">}</span>
<span class="keyword">import</span> akka.pattern.<span class="delimiter">{</span> ask, pipe, AskTimeoutException <span class="delimiter">}</span>
<span class="keyword">import</span> akka.event.<span class="delimiter">{</span> LoggingAdapter, Logging <span class="delimiter">}</span>
<span class="keyword">import</span> java.net.<span class="delimiter">{</span> InetSocketAddress, ConnectException <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.transport.<a href="../../../akka-remote/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter" title="akka.remote.transport.ThrottlerTransportAdapter.type">ThrottlerTransportAdapter</a>.<span class="delimiter">{</span> SetThrottle, TokenBucket, Blackhole, Unthrottled <span class="delimiter">}</span>
<span class="keyword">import</span> akka.dispatch.<span class="delimiter">{</span> UnboundedMessageQueueSemantics, RequiresMessageQueue <span class="delimiter">}</span>

<span class="comment">/**
 * The Player is the client component of the
 * [[akka.remote.testconductor.TestConductorExt]] extension. It registers with
 * the [[akka.remote.testconductor.Conductor]]’s [[akka.remote.testconductor.Controller]]
 * in order to participate in barriers and enable network failure injection.
 */</span>
<span class="keyword">trait</span> <a title="trait Player extends AnyRef" id="akka.remote.testconductor;Player">Player</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: TestConductorExt ⇒

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Player._client_=">_client</a>: <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.remote.testconductor;Player.client">client</a> = <a href="#akka.remote.testconductor;Player._client_=" title="=&gt; akka.actor.ActorRef">_client</a> <span title="akka.actor.ActorRef" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span>                     ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;TestConductor client not yet started&quot;)" class="string">&quot;TestConductor client not yet started&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _ <span class="keyword">if</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.isTerminated" title="=&gt; Boolean">isTerminated</a> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;TestConductor unavailable because system is shutdown; you need to startNewSystem() before this point&quot;)" class="string">&quot;TestConductor unavailable because system is shutdown; you need to startNewSystem() before this point&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.client.x">x</a>                        ⇒ <a href="#akka.remote.testconductor;Player.client.x" title="akka.actor.ActorRef">x</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Connect to the conductor on the given port (the host is taken from setting
   * `akka.testconductor.host`). The connection is made asynchronously, but you
   * should await completion of the returned Future because that implies that
   * all expected participants of this test have successfully connected (i.e.
   * this is a first barrier in itself). The number of expected participants is
   * set in [[akka.remote.testconductor.Conductor]]`.startController()`.
   */</span>
  <span class="keyword">def</span> <a title="(name: akka.remote.testconductor.RoleName, controllerAddr: java.net.InetSocketAddress)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Player.startClient">startClient</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Player.startClient.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;Player.startClient.controllerAddr">controllerAddr</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#akka.remote.testconductor.ClientFSM" title="akka.remote.testconductor.ClientFSM.type">ClientFSM</a>._
    <span class="keyword">import</span> akka.actor.<a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM" title="akka.actor.FSM.type">FSM</a>._
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Player.this.Settings.type">Settings</a>.BarrierTimeout

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Player._client_=" title="=&gt; akka.actor.ActorRef">_client</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;TestConductorClient already started&quot;)" class="string">&quot;TestConductorClient already started&quot;</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;Player._client_=" title="(x$1: akka.actor.ActorRef)Unit">_client</a> = <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.testconductor.ClientFSM](classOf[akka.remote.testconductor.ClientFSM])" class="delimiter">[</span>ClientFSM<span class="delimiter">]</span>, <a href="#akka.remote.testconductor;Player.startClient.name" title="akka.remote.testconductor.RoleName">name</a>, <a href="#akka.remote.testconductor;Player.startClient.controllerAddr" title="java.net.InetSocketAddress">controllerAddr</a><span class="delimiter">)</span>, <span title="String(&quot;TestConductorClient&quot;)" class="string">&quot;TestConductorClient&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.startClient.a">a</a> = <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]{def waiting: akka.actor.ActorRef; def waiting_=(x$1: akka.actor.ActorRef): Unit})(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]{def waiting: akka.actor.ActorRef; def waiting_=(x$1: akka.actor.ActorRef): Unit}])akka.actor.Props">Props</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]{def waiting: akka.actor.ActorRef; def waiting_=(x$1: akka.actor.ActorRef): Unit}]" class="delimiter">(</span><a href="#akka.remote.testconductor;Player.startClient.a;$anon" title="akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]{def waiting: akka.actor.ActorRef; def waiting_=(x$1: akka.actor.ActorRef): Unit}" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.remote.testconductor;Player.startClient.a;$anon">Actor</a> <span class="keyword">with</span> <a href="../../../akka-actor/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.startClient.a;$anon.waiting_=">waiting</a>: <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _
      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.remote.testconductor;Player.startClient.a;$anon.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote.testconductor;Player.startClient.a;$anon.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.startClient.a;$anon.receive;$anonfun.isDefinedAt.fsm">fsm</a>: <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> ⇒
          <a href="#akka.remote.testconductor;Player.startClient.a;$anon.waiting_=" title="(x$1: akka.actor.ActorRef)Unit">waiting</a> = <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">fsm</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;SubscribeTransitionCallBack" title="(actorRef: akka.actor.ActorRef)akka.actor.FSM.SubscribeTransitionCallBack">SubscribeTransitionCallBack</a><span class="delimiter">(</span><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
        <span class="keyword">case</span> Transition<span class="delimiter">(</span>_, <span title="akka.remote.testconductor.ClientFSM.State">f</span>: ClientFSM.<a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>, <span title="akka.remote.testconductor.ClientFSM.State">t</span>: ClientFSM.<a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><span title="akka.remote.testconductor.ClientFSM.State">f</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.ClientFSM.Connecting.readResolve" title="akka.remote.testconductor.ClientFSM.Connecting.type">Connecting</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="akka.remote.testconductor.ClientFSM.State">t</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.ClientFSM.AwaitDone.readResolve" title="akka.remote.testconductor.ClientFSM.AwaitDone.type">AwaitDone</a><span class="delimiter">)</span> ⇒ <span class="comment">// step 1, not there yet // // SI-5900 workaround</span>
        <span class="keyword">case</span> Transition<span class="delimiter">(</span>_, <span title="akka.remote.testconductor.ClientFSM.State">f</span>: ClientFSM.<a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>, <span title="akka.remote.testconductor.ClientFSM.State">t</span>: ClientFSM.<a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><span title="akka.remote.testconductor.ClientFSM.State">f</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.ClientFSM.AwaitDone.readResolve" title="akka.remote.testconductor.ClientFSM.AwaitDone.type">AwaitDone</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="akka.remote.testconductor.ClientFSM.State">t</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.ClientFSM.Connected.readResolve" title="akka.remote.testconductor.ClientFSM.Connected.type">Connected</a><span class="delimiter">)</span> ⇒ <span class="comment">// SI-5900 workaround</span>
          <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">waiting</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a>; <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> <span title="akka.actor.FSM.Transition[_]">t</span>: <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;Transition" title="akka.actor.FSM.Transition[_]">Transition</a><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
          <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">waiting</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;unexpected transition: &quot;)" class="string">&quot;unexpected transition: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="akka.actor.FSM.Transition[_]">t</span><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> CurrentState<span class="delimiter">(</span>_, <a title="akka.remote.testconductor.ClientFSM.State" id="akka.remote.testconductor;Player.startClient.a;$anon.receive;$anonfun.isDefinedAt.s">s</a>: ClientFSM.<a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.startClient.a;$anon.receive;$anonfun.isDefinedAt.s" title="akka.remote.testconductor.ClientFSM.State">s</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.ClientFSM.Connected.readResolve" title="akka.remote.testconductor.ClientFSM.Connected.type">Connected</a><span class="delimiter">)</span> ⇒ <span class="comment">// SI-5900 workaround</span>
          <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">waiting</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a>; <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> _: <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;CurrentState" title="akka.actor.FSM.CurrentState[_]">CurrentState</a><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">a</a> <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.remote.testconductor;Player.client" title="=&gt; akka.actor.ActorRef">client</a> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Enter the named barriers, one after the other, in the order given. Will
   * throw an exception in case of timeouts or other errors.
   */</span>
  <span class="keyword">def</span> <a title="(name: String*)Unit" id="akka.remote.testconductor;Player.enter(1cd06a1b2b)">enter</a><span class="delimiter">(</span><a title="String*" id="akka.remote.testconductor;Player.enter(1cd06a1b2b).name">name</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote.testconductor;Player.enter(09b82f7b61)" title="(timeout: akka.util.Timeout, name: scala.collection.immutable.Seq[String])Unit">enter</a><span class="delimiter">(</span><a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Player.this.Settings.type">Settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>, <a href="#akka.remote.testconductor;Player.enter(1cd06a1b2b).name" title="String*">name</a>.<span title="[Col[_]](implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,String,Col[String]])Col[String]">to</span><span title="(implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq">Seq</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Enter the named barriers, one after the other, in the order given. Will
   * throw an exception in case of timeouts or other errors.
   */</span>
  <span class="keyword">def</span> <a title="(timeout: akka.util.Timeout, name: scala.collection.immutable.Seq[String])Unit" id="akka.remote.testconductor;Player.enter(09b82f7b61)">enter</a><span class="delimiter">(</span><a title="akka.util.Timeout" id="akka.remote.testconductor;Player.enter(09b82f7b61).timeout">timeout</a>: <a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout" title="akka.util.Timeout">Timeout</a>, <a title="scala.collection.immutable.Seq[String]" id="akka.remote.testconductor;Player.enter(09b82f7b61).name">name</a>: immutable.<span title="scala.collection.immutable.Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;entering barriers &quot;)" class="string">&quot;entering barriers &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).name" title="scala.collection.immutable.Seq[String]">name</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;Player.enter(09b82f7b61).stop">stop</a> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).timeout" title="akka.util.Timeout">timeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a>
    <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).name" title="scala.collection.immutable.Seq[String]">name</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="String" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b">b</a> ⇒
      <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.barrierTimeout">barrierTimeout</a> = <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).stop" title="scala.concurrent.duration.Deadline">stop</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.barrierTimeout" title="scala.concurrent.duration.FiniteDuration">barrierTimeout</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.qual$1">client</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.x$2">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToServer" title="(msg: akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToServer">ToServer</a><a title="akka.remote.testconductor.ToServer" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.x$1" class="delimiter">(</a><a href="DataTypes.scala.html#akka.remote.testconductor;FailBarrier" title="(name: String)akka.remote.testconductor.FailBarrier">FailBarrier</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)java.util.concurrent.TimeoutException" class="keyword">new</span> <span title="java.util.concurrent.TimeoutException">TimeoutException</span><span class="delimiter">(</span><span title="String(&quot;Server timed out while waiting for barrier &quot;)" class="string">&quot;Server timed out while waiting for barrier &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="akka.util.Timeout" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.timeout">timeout</a> = <a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout" title="(duration: scala.concurrent.duration.FiniteDuration)akka.util.Timeout">Timeout</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.barrierTimeout" title="scala.concurrent.duration.FiniteDuration">barrierTimeout</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">+</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Player.this.Settings.type">Settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.QueryTimeout" title="=&gt; akka.util.Timeout">QueryTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span>
        <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[Any], atMost: scala.concurrent.duration.Duration)Any">result</span><span class="delimiter">(</span><a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">client</a> <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToServer" title="(msg: akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToServer">ToServer</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;EnterBarrier" title="(name: String, timeout: Option[scala.concurrent.duration.FiniteDuration])akka.remote.testconductor.EnterBarrier">EnterBarrier</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a>, <span title="(x: scala.concurrent.duration.FiniteDuration)Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.barrierTimeout" title="scala.concurrent.duration.FiniteDuration">barrierTimeout</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="akka.pattern.AskTimeoutException" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.e">e</a>: <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskTimeoutException" title="akka.pattern.AskTimeoutException">AskTimeoutException</a> ⇒
          <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.qual$2">client</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.x$4">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToServer" title="(msg: akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToServer">ToServer</a><a title="akka.remote.testconductor.ToServer" id="akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.x$3" class="delimiter">(</a><a href="DataTypes.scala.html#akka.remote.testconductor;FailBarrier" title="(name: String)akka.remote.testconductor.FailBarrier">FailBarrier</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// Why don't TimeoutException have a constructor that takes a cause?</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)java.util.concurrent.TimeoutException" class="keyword">new</span> <span title="java.util.concurrent.TimeoutException">TimeoutException</span><span class="delimiter">(</span><span title="String(&quot;Client timed out while waiting for barrier &quot;)" class="string">&quot;Client timed out while waiting for barrier &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>
      <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;passed barrier {}&quot;)" class="string">&quot;passed barrier {}&quot;</span>, <a href="#akka.remote.testconductor;Player.enter(09b82f7b61).$anonfun.b" title="String">b</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Query remote transport address of named node.
   */</span>
  <span class="keyword">def</span> <a title="(name: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.actor.Address]" id="akka.remote.testconductor;Player.getAddressFor">getAddressFor</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Player.getAddressFor.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.actor.Address]">Future</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Player.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">client</a> <a href="../../../akka-actor/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToServer" title="(msg: akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToServer">ToServer</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;GetAddress" title="(node: akka.remote.testconductor.RoleName)akka.remote.testconductor.GetAddress">GetAddress</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Player.getAddressFor.name" title="akka.remote.testconductor.RoleName">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.actor.Address])scala.concurrent.Future[akka.actor.Address]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.actor.Address])scala.reflect.ClassTag[akka.actor.Address]" class="delimiter">[</span><a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.testconductor.ClientFSM.type" id="akka.remote.testconductor.ClientFSM">ClientFSM</a> <a href="#akka.remote.testconductor.ClientFSM" title="akka.remote.testconductor.ClientFSM.type" class="delimiter">{</a>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait State extends AnyRef" id="akka.remote.testconductor.ClientFSM;State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ClientFSM.Connecting.productElement.x$1" title="akka.remote.testconductor.ClientFSM.Connecting.type" id="akka.remote.testconductor.ClientFSM.Connecting.readResolve">Connecting</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ClientFSM.AwaitDone.productElement.x$1" title="akka.remote.testconductor.ClientFSM.AwaitDone.type" id="akka.remote.testconductor.ClientFSM.AwaitDone.readResolve">AwaitDone</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ClientFSM.Connected.productElement.x$1" title="akka.remote.testconductor.ClientFSM.Connected.type" id="akka.remote.testconductor.ClientFSM.Connected.readResolve">Connected</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ClientFSM.Failed.productElement.x$1" title="akka.remote.testconductor.ClientFSM.Failed.type" id="akka.remote.testconductor.ClientFSM.Failed.readResolve">Failed</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ClientFSM;State" title="akka.remote.testconductor.ClientFSM.State">State</a>

  <span class="keyword">case class</span> <a title="class Data extends AnyRef with Product with Serializable" id="akka.remote.testconductor.ClientFSM.Data.readResolve">Data</a><a href="#akka.remote.testconductor.ClientFSM.Data.readResolve" title="Product" class="delimiter">(</a><a title="Option[org.jboss.netty.channel.Channel]" id="akka.remote.testconductor.ClientFSM;Data.channel">channel</a>: <span title="Option[org.jboss.netty.channel.Channel]">Option</span><span class="delimiter">[</span>Channel<span class="delimiter">]</span>, <a title="Option[(String, akka.actor.ActorRef)]" id="akka.remote.testconductor.ClientFSM;Data.runningOp">runningOp</a>: <span title="Option[(String, akka.actor.ActorRef)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>String, ActorRef<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">case class</span> <a title="(channel: org.jboss.netty.channel.Channel)akka.remote.testconductor.ClientFSM.Connected" id="akka.remote.testconductor.ClientFSM;Connected.equals">Connected</a><a href="#akka.remote.testconductor.ClientFSM;Connected.equals" title="Product" class="delimiter">(</a><a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor.ClientFSM;Connected.copy$default$1">channel</a>: <span title="org.jboss.netty.channel.Channel">Channel</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  <span class="keyword">case class</span> <a title="class ConnectionFailure extends RuntimeException with scala.util.control.NoStackTrace with Product with Serializable" id="akka.remote.testconductor.ClientFSM.ConnectionFailure.readResolve">ConnectionFailure</a><a href="#akka.remote.testconductor.ClientFSM.ConnectionFailure.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.remote.testconductor.ClientFSM;ConnectionFailure.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM;ConnectionFailure.msg" title="String">msg</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ClientFSM.Disconnected.productElement.x$1" title="akka.remote.testconductor.ClientFSM.Disconnected.type" id="akka.remote.testconductor.ClientFSM.Disconnected.readResolve">Disconnected</a>
<a href="#akka.remote.testconductor.ClientFSM.Disconnected.readResolve" title="akka.remote.testconductor.ClientFSM.Disconnected.type" class="delimiter">}</a>

<span class="comment">/**
 * This is the controlling entity on the [[akka.remote.testconductor.Player]]
 * side: in a first step it registers itself with a symbolic name and its remote
 * address at the [[akka.remote.testconductor.Controller]], then waits for the
 * `Done` message which signals that all other expected test participants have
 * done the same. After that, it will pass barrier requests to and from the
 * coordinator and react to the [[akka.remote.testconductor.Conductor]]’s
 * requests for failure injection.
 *
 * Note that you can't perform requests concurrently, e.g. enter barrier
 * from one thread and ask for node address from another thread.
 *
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ClientFSM extends AnyRef with akka.actor.Actor with akka.actor.LoggingFSM[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data] with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.remote.testconductor;ClientFSM">ClientFSM</a><a href="#akka.remote.testconductor;ClientFSM" title="akka.remote.testconductor.ClientFSM" class="delimiter">(</a><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;ClientFSM.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;ClientFSM.controllerAddr">controllerAddr</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a>
  <span class="keyword">with</span> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;LoggingFSM" title="akka.actor.LoggingFSM[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">LoggingFSM</a><span class="delimiter">[</span>ClientFSM.State, ClientFSM.Data<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../akka-actor/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.ClientFSM" title="akka.remote.testconductor.ClientFSM.type">ClientFSM</a>._

  <span class="keyword">val</span> <a title="akka.remote.testconductor.TestConductorExt#Settings.type" id="akka.remote.testconductor;ClientFSM.settings">settings</a> = <a href="Extension.scala.html#akka.remote.testconductor.TestConductor.apply(36904ac776)" title="()(implicit ctx: akka.actor.ActorContext)akka.remote.testconductor.TestConductorExt">TestConductor</a><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><span class="delimiter">)</span>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>

  <span class="keyword">val</span> <a title="akka.remote.testconductor.PlayerHandler" id="akka.remote.testconductor;ClientFSM.handler">handler</a> = <span title="akka.remote.testconductor.PlayerHandler" class="keyword">new</span> <a href="#akka.remote.testconductor;PlayerHandler" title="akka.remote.testconductor.PlayerHandler">PlayerHandler</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.controllerAddr" title="java.net.InetSocketAddress">controllerAddr</a>, <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.ClientReconnects" title="=&gt; Int">ClientReconnects</a>, <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.ReconnectBackoff" title="=&gt; scala.concurrent.duration.FiniteDuration">ReconnectBackoff</a>,
    <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.ClientSocketWorkerPoolSize" title="=&gt; Int">ClientSocketWorkerPoolSize</a>, <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="../../../akka-actor/event/Logging.scala.html#akka.event.Logging.apply(882ba4a885)" title="(system: akka.actor.ActorSystem, logSource: String)(implicit evidence$3: akka.event.LogSource[String])akka.event.LoggingAdapter">Logging</a><a href="../../../akka-actor/event/Logging.scala.html#akka.event.LogSource.fromString" title="=&gt; akka.event.LogSource[String]" class="delimiter">(</a><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>, <span title="String(&quot;PlayerHandler&quot;)" class="string">&quot;PlayerHandler&quot;</span><span class="delimiter">)</span>,
    <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor">dispatcher</a><span class="delimiter">)</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.startWith" title="(stateName: akka.remote.testconductor.ClientFSM.State, stateData: akka.remote.testconductor.ClientFSM.Data, timeout: ClientFSM.this.Timeout)Unit">startWith</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Connecting.readResolve" title="akka.remote.testconductor.ClientFSM.Connecting.type">Connecting</a>, <a href="#akka.remote.testconductor.ClientFSM.Data.readResolve" title="(channel: Option[org.jboss.netty.channel.Channel], runningOp: Option[(String, akka.actor.ActorRef)])akka.remote.testconductor.ClientFSM.Data">Data</a><span class="delimiter">(</span><span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ClientFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ClientFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Connecting.readResolve" title="akka.remote.testconductor.ClientFSM.Connecting.type">Connecting</a>, stateTimeout = <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.ConnectTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">ConnectTimeout</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ClientFSM.this.Event,ClientFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.ClientOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;ClientOp" title="akka.remote.testconductor.ClientOp">ClientOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">replying</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;not connected yet&quot;)" class="string">&quot;not connected yet&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>Connected<span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <span title="org.jboss.netty.channel.Channel">channel</span>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;Hello" title="(name: String, addr: akka.actor.Address)akka.remote.testconductor.Hello">Hello</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.name" title="akka.remote.testconductor.RoleName">name</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a>, <a href="Extension.scala.html#akka.remote.testconductor.TestConductor.apply(36904ac776)" title="()(implicit ctx: akka.actor.ActorContext)akka.remote.testconductor.TestConductorExt">TestConductor</a><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><span class="delimiter">)</span>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.AwaitDone.readResolve" title="akka.remote.testconductor.ClientFSM.AwaitDone.type">AwaitDone</a><span class="delimiter">)</span> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.ClientFSM.Data)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">using</a> <a href="#akka.remote.testconductor.ClientFSM.Data.readResolve" title="(channel: Option[org.jboss.netty.channel.Channel], runningOp: Option[(String, akka.actor.ActorRef)])akka.remote.testconductor.ClientFSM.Data">Data</a><span class="delimiter">(</span><span title="(x: org.jboss.netty.channel.Channel)Some[org.jboss.netty.channel.Channel]">Some</span><span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, <span title="None.type">None</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>_: <a href="#akka.remote.testconductor.ClientFSM.ConnectionFailure.readResolve" title="akka.remote.testconductor.ClientFSM.ConnectionFailure">ConnectionFailure</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Failed.readResolve" title="akka.remote.testconductor.ClientFSM.Failed.type">Failed</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(cc2e600322)" title="(message: String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;connect timeout to TestConductor&quot;)" class="string">&quot;connect timeout to TestConductor&quot;</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Failed.readResolve" title="akka.remote.testconductor.ClientFSM.Failed.type">Failed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ClientFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ClientFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.AwaitDone.readResolve" title="akka.remote.testconductor.ClientFSM.AwaitDone.type">AwaitDone</a>, stateTimeout = <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ClientFSM.this.Event,ClientFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;received Done: starting test&quot;)" class="string">&quot;received Done: starting test&quot;</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Connected.readResolve" title="akka.remote.testconductor.ClientFSM.Connected.type">Connected</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.NetworkOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(dc73c33c91)" title="(template: String, arg1: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;received {} instead of Done&quot;)" class="string">&quot;received {} instead of Done&quot;</span>, <span title="akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Failed.readResolve" title="akka.remote.testconductor.ClientFSM.Failed.type">Failed</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.ServerOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;ServerOp" title="akka.remote.testconductor.ServerOp">ServerOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">replying</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;not connected yet&quot;)" class="string">&quot;not connected yet&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(cc2e600322)" title="(message: String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;connect timeout to TestConductor&quot;)" class="string">&quot;connect timeout to TestConductor&quot;</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ClientFSM.State)ClientFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Failed.readResolve" title="akka.remote.testconductor.ClientFSM.Failed.type">Failed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ClientFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ClientFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Connected.readResolve" title="akka.remote.testconductor.ClientFSM.Connected.type">Connected</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ClientFSM.this.Event,ClientFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Disconnected.readResolve" title="akka.remote.testconductor.ClientFSM.Disconnected.type">Disconnected</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.info(cc2e600322)" title="(message: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;disconnected from TestConductor&quot;)" class="string">&quot;disconnected from TestConductor&quot;</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.testconductor.ClientFSM.ConnectionFailure" class="keyword">new</span> <a href="#akka.remote.testconductor.ClientFSM.ConnectionFailure.readResolve" title="akka.remote.testconductor.ClientFSM.ConnectionFailure">ConnectionFailure</a><span class="delimiter">(</span><span title="String(&quot;disconnect&quot;)" class="string">&quot;disconnect&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToServer<span class="delimiter">(</span>_: <a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">)</span>, Data<span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="org.jboss.netty.channel.Channel">channel</span>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToServer<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.ClientFSM.Data">d</span> @ Data<span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="org.jboss.netty.channel.Channel">channel</span>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <span title="String">token</span> = <span title="testconductor extends akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp">msg</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> EnterBarrier<span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.token.barrier">barrier</a>, <a title="Option[scala.concurrent.duration.FiniteDuration]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.token.timeout">timeout</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.token.barrier" title="String">barrier</a>
        <span class="keyword">case</span> GetAddress<span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.token.node">node</a><span class="delimiter">)</span>               ⇒ <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.token.node" title="akka.remote.testconductor.RoleName">node</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a>
      <span class="delimiter">}</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.ClientFSM.Data)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">using</a> <span title="akka.remote.testconductor.ClientFSM.Data">d</span>.<a href="#akka.remote.testconductor.ClientFSM;Data.channel" title="Option[org.jboss.netty.channel.Channel]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$6">copy</a><span class="delimiter">(</span>runningOp = <span title="(x: (String, akka.actor.ActorRef))Some[(String, akka.actor.ActorRef)]">Some</span><a title="Some[(String, akka.actor.ActorRef)]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$5" class="delimiter">(</a><span title="(x: String)ArrowAssoc[String]">token</span> <span title="(y: akka.actor.ActorRef)(String, akka.actor.ActorRef)">-&gt;</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToServer<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp">op</span><span class="delimiter">)</span>, Data<span class="delimiter">(</span><span title="Option[org.jboss.netty.channel.Channel]">channel</span>, Some<span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.isDefinedAt.token">token</a>, _<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;cannot write {} while waiting for {}&quot;)" class="string">&quot;cannot write {} while waiting for {}&quot;</span>, <span title="testconductor extends akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp">op</span>, <span title="String">token</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.ClientOp">op</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;ClientOp" title="akka.remote.testconductor.ClientOp">ClientOp</a>, <span title="akka.remote.testconductor.ClientFSM.Data">d</span> @ Data<span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, <a title="Option[(String, akka.actor.ActorRef)]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.isDefinedAt.runningOp">runningOp</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="akka.remote.testconductor.ClientOp">op</span> <span title="ClientFSM.this.State" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> BarrierResult<span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.b">b</a>, <a title="Boolean" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.success">success</a><span class="delimiter">)</span> ⇒
          <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.isDefinedAt.runningOp" title="Option[(String, akka.actor.ActorRef)]">runningOp</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.barrier">barrier</a>, <span title="akka.actor.ActorRef">requester</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
              <span class="keyword">val</span> <a title="&lt;root&gt; extends Object with java.io.Serializable" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.response">response</a> =
                <span title="&lt;root&gt; extends Object with java.io.Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.b" title="String">b</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.barrier" title="String">barrier</a><span class="delimiter">)</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;wrong barrier &quot;)" class="string">&quot;wrong barrier &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.b" title="String">b</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; received while waiting for &quot;)" class="string">&quot; received while waiting for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.barrier" title="String">barrier</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="keyword">else</span> <span title="&lt;root&gt; extends Object with java.io.Serializable" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.success" title="Boolean">success</a><span class="delimiter">)</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;barrier failed: &quot;)" class="string">&quot;barrier failed: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.b" title="String">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="keyword">else</span> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.b" title="String">b</a>
              <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">requester</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.response" title="&lt;root&gt; extends Object with java.io.Serializable">response</a>
            <span class="keyword">case</span> <span title="None.type">None</span> ⇒
              <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;did not expect {}&quot;)" class="string">&quot;did not expect {}&quot;</span>, <span title="akka.remote.testconductor.ClientOp">op</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.ClientFSM.Data)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">using</a> <span title="akka.remote.testconductor.ClientFSM.Data">d</span>.<a href="#akka.remote.testconductor.ClientFSM;Data.channel" title="Option[org.jboss.netty.channel.Channel]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$8">copy</a><span class="delimiter">(</span>runningOp = <a title="None.type" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$7">None</a><span class="delimiter">)</span>
        <span class="keyword">case</span> AddressReply<span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.node">node</a>, <a title="akka.actor.Address" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.addr">addr</a><span class="delimiter">)</span> ⇒
          <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.isDefinedAt.runningOp" title="Option[(String, akka.actor.ActorRef)]">runningOp</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><span class="delimiter">(</span>_, <span title="akka.actor.ActorRef">requester</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">requester</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.addr" title="akka.actor.Address">addr</a>
            <span class="keyword">case</span> <span title="None.type">None</span>                 ⇒ <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;did not expect {}&quot;)" class="string">&quot;did not expect {}&quot;</span>, <span title="akka.remote.testconductor.ClientOp">op</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.ClientFSM.Data)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">using</a> <span title="akka.remote.testconductor.ClientFSM.Data">d</span>.<a href="#akka.remote.testconductor.ClientFSM;Data.channel" title="Option[org.jboss.netty.channel.Channel]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$10">copy</a><span class="delimiter">(</span>runningOp = <a title="None.type" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.x$9">None</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="akka.remote.testconductor.ThrottleMsg" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t">t</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg" title="akka.remote.testconductor.ThrottleMsg">ThrottleMsg</a> ⇒
          <span class="keyword">import</span> <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.QueryTimeout
          <span class="keyword">import</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher <span class="comment">// FIXME is this the right EC for the future below?</span>
          <span class="keyword">val</span> <a title="&lt;root&gt; extends akka.remote.transport.ThrottlerTransportAdapter.ThrottleMode with Product with Serializable" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.mode">mode</a> = <span title="&lt;root&gt; extends akka.remote.transport.ThrottlerTransportAdapter.ThrottleMode with Product with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t" title="akka.remote.testconductor.ThrottleMsg">t</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg.rateMBit" title="=&gt; Float">rateMBit</a> <span title="(x: Float)Boolean">&lt;</span> <span title="Float(0.0)" class="float">0.0f</span><span class="delimiter">)</span> <a href="../../../akka-remote/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter.Unthrottled" title="akka.remote.transport.ThrottlerTransportAdapter.Unthrottled.type">Unthrottled</a>
          <span class="keyword">else</span> <span title="&lt;root&gt; extends akka.remote.transport.ThrottlerTransportAdapter.ThrottleMode with Product with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t" title="akka.remote.testconductor.ThrottleMsg">t</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg.rateMBit" title="=&gt; Float">rateMBit</a> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0f</span><span class="delimiter">)</span> <a href="../../../akka-remote/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter.Blackhole" title="akka.remote.transport.ThrottlerTransportAdapter.Blackhole.type">Blackhole</a>
          <span class="comment">// Conversion needed as the TokenBucket measures in octets: 125000 Octets/s = 1Mbit/s</span>
          <span class="comment">// FIXME: Initial capacity should be carefully chosen</span>
          <span class="keyword">else</span> <a href="../../../akka-remote/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter;TokenBucket" title="(capacity: Int, tokensPerSecond: Double, nanoTimeOfLastSend: Long, availableTokens: Int)akka.remote.transport.ThrottlerTransportAdapter.TokenBucket">TokenBucket</a><span class="delimiter">(</span>capacity = <span title="Int(1000)" class="int">1000</span>, tokensPerSecond = <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t" title="akka.remote.testconductor.ThrottleMsg">t</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg.rateMBit" title="=&gt; Float">rateMBit</a> <span title="(x: Double)Double">*</span> <span title="Double(125000.0)" class="double">125000.0</span>, nanoTimeOfLastSend = <span title="Long(0L)" class="int">0</span>, availableTokens = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="scala.concurrent.Future[Boolean]" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.cmdFuture">cmdFuture</a> = <a href="Extension.scala.html#akka.remote.testconductor.TestConductor.apply(36904ac776)" title="()(implicit ctx: akka.actor.ActorContext)akka.remote.testconductor.TestConductorExt">TestConductor</a><a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><span class="delimiter">)</span>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.transport" title="=&gt; akka.remote.RemoteTransport">transport</a>.<a href="../../../akka-remote/remote/RemoteTransport.scala.html#akka.remote;RemoteTransport.managementCommand" title="(cmd: Any)scala.concurrent.Future[Boolean]">managementCommand</a><span class="delimiter">(</span><a href="../../../akka-remote/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter;SetThrottle" title="(address: akka.actor.Address, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, mode: akka.remote.transport.ThrottlerTransportAdapter.ThrottleMode)akka.remote.transport.ThrottlerTransportAdapter.SetThrottle">SetThrottle</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t" title="akka.remote.testconductor.ThrottleMsg">t</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg.target" title="=&gt; akka.actor.Address">target</a>, <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.t" title="akka.remote.testconductor.ThrottleMsg">t</a>.<a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg.direction" title="=&gt; akka.remote.transport.ThrottlerTransportAdapter.Direction">direction</a>, <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.mode" title="&lt;root&gt; extends akka.remote.transport.ThrottlerTransportAdapter.ThrottleMode with Product with Serializable">mode</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.cmdFuture" title="scala.concurrent.Future[Boolean]">cmdFuture</a> <a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="(pf: PartialFunction[Boolean,Unit])(implicit executor: scala.concurrent.ExecutionContext)Unit">onSuccess</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Boolean,Unit] with Serializable" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
            <span class="keyword">case</span> <span title="Boolean(true)" class="keyword">true</span> ⇒ <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToServer" title="(msg: akka.remote.testconductor.ServerOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToServer">ToServer</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a><span class="delimiter">)</span>
            <span class="keyword">case</span> _ ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span class="string">&quot;Throttle was requested from the TestConductor, but no transport &quot;</span> <span title="String(&quot;Throttle was requested from the TestConductor, but no transport adapters available that support throttling. Specify `testTransport(on = true)` in your MultiNodeConfig&quot;)">+</span>
              <span class="string">&quot;adapters available that support throttling. Specify `testTransport(on = true)` in your MultiNodeConfig&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
        <span class="keyword">case</span> <span title="akka.remote.testconductor.DisconnectMsg">d</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;DisconnectMsg" title="akka.remote.testconductor.DisconnectMsg">DisconnectMsg</a> ⇒
          <span class="keyword">import</span> <a href="#akka.remote.testconductor;ClientFSM.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.QueryTimeout
          <span class="keyword">import</span> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher <span class="comment">// FIXME is this the right EC for the future below?</span>
          <span class="comment">// FIXME: Currently ignoring, needs support from Remoting</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
        <span class="keyword">case</span> TerminateMsg<span class="delimiter">(</span>Left<span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.shutdown" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
        <span class="keyword">case</span> TerminateMsg<span class="delimiter">(</span>Left<span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorSystemImpl" class="delimiter">[</span><a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">]</span>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.abort" title="()Unit">abort</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
        <span class="keyword">case</span> TerminateMsg<span class="delimiter">(</span>Right<span class="delimiter">(</span><a title="Int" id="akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.exitValue">exitValue</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <span title="System.type">System</span>.<span title="(x$1: Int)Unit">exit</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;ClientFSM.<local ClientFSM>;$anonfun.applyOrElse.exitValue" title="Int">exitValue</a><span class="delimiter">)</span>
          <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <span class="comment">// needed because Java doesn’t have Nothing</span>
        <span class="keyword">case</span> _: <a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a> ⇒ <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <span class="comment">//FIXME what should happen?</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ClientFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ClientFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ClientFSM.Failed.readResolve" title="akka.remote.testconductor.ClientFSM.Failed.type">Failed</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ClientFSM.this.Event,ClientFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.ClientOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;ClientOp" title="akka.remote.testconductor.ClientOp">ClientOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a> <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.ClientFSM.State,akka.remote.testconductor.ClientFSM.Data]">replying</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;cannot do &quot;)" class="string">&quot;cannot do &quot;</span> <span title="(x$1: Any)String">+</span> <span title="akka.remote.testconductor.ClientOp">msg</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; while Failed&quot;)" class="string">&quot; while Failed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.NetworkOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;ignoring network message {} while Failed&quot;)" class="string">&quot;ignoring network message {} while Failed&quot;</span>, <span title="akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ClientFSM.this.State">stay</a>
  <span class="delimiter">}</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.onTermination" title="(terminationHandler: PartialFunction[ClientFSM.this.StopEvent,Unit])Unit">onTermination</a> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ClientFSM.this.StopEvent,Unit] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> StopEvent<span class="delimiter">(</span>_, _, Data<span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="org.jboss.netty.channel.Channel">channel</span><span class="delimiter">)</span>, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="org.jboss.netty.channel.Channel">channel</span>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../akka-actor/actor/FSM.scala.html#akka.actor;FSM.initialize" title="()Unit">initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This handler only forwards messages received from the conductor to the [[akka.remote.testconductor.ClientFSM]].
 *
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class PlayerHandler extends org.jboss.netty.channel.SimpleChannelUpstreamHandler" id="akka.remote.testconductor;PlayerHandler">PlayerHandler</a><a href="#akka.remote.testconductor;PlayerHandler" title="akka.remote.testconductor.PlayerHandler" class="delimiter">(</a>
  <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;PlayerHandler.server">server</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span>,
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="akka.remote.testconductor;PlayerHandler.reconnects">reconnects</a>: <span title="Int">Int</span>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.remote.testconductor;PlayerHandler.backoff">backoff</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
  <a title="Int" id="akka.remote.testconductor;PlayerHandler.poolSize">poolSize</a>: <span title="Int">Int</span>,
  <a title="akka.actor.ActorRef" id="akka.remote.testconductor;PlayerHandler.fsm">fsm</a>: <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
  <a title="akka.event.LoggingAdapter" id="akka.remote.testconductor;PlayerHandler.log">log</a>: <a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a>,
  <a title="akka.actor.Scheduler" id="akka.remote.testconductor;PlayerHandler.scheduler">scheduler</a>: <a href="../../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler" title="akka.actor.Scheduler">Scheduler</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.concurrent.ExecutionContext" id="akka.remote.testconductor;PlayerHandler.executor">executor</a>: <span title="scala.concurrent.ExecutionContext">ExecutionContext</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <span title="org.jboss.netty.channel.SimpleChannelUpstreamHandler">SimpleChannelUpstreamHandler</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.remote.testconductor.ClientFSM" title="akka.remote.testconductor.ClientFSM.type">ClientFSM</a>._

  <a href="#akka.remote.testconductor;PlayerHandler.reconnect" title="()Unit">reconnect</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;PlayerHandler.nextAttempt_=">nextAttempt</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span> = _

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelOpen">channelOpen</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelOpen.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelOpen.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} open&quot;)" class="string">&quot;channel {} open&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.channelOpen.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelClosed">channelClosed</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelClosed.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelClosed.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} closed&quot;)" class="string">&quot;channel {} closed&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.channelClosed.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelBound">channelBound</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelBound.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelBound.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} bound&quot;)" class="string">&quot;channel {} bound&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.channelBound.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelUnbound">channelUnbound</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelUnbound.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelUnbound.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} unbound&quot;)" class="string">&quot;channel {} unbound&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.channelUnbound.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.WriteCompletionEvent)Unit" id="akka.remote.testconductor;PlayerHandler.writeComplete">writeComplete</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.writeComplete.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.WriteCompletionEvent" id="akka.remote.testconductor;PlayerHandler.writeComplete.event">event</a>: <span title="org.jboss.netty.channel.WriteCompletionEvent">WriteCompletionEvent</span><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} written {}&quot;)" class="string">&quot;channel {} written {}&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.writeComplete.event" title="org.jboss.netty.channel.WriteCompletionEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>, <a href="#akka.remote.testconductor;PlayerHandler.writeComplete.event" title="org.jboss.netty.channel.WriteCompletionEvent">event</a>.<span title="()Long">getWrittenAmount</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ExceptionEvent)Unit" id="akka.remote.testconductor;PlayerHandler.exceptionCaught">exceptionCaught</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ExceptionEvent" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.event">event</a>: <span title="org.jboss.netty.channel.ExceptionEvent">ExceptionEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;channel {} exception {}&quot;)" class="string">&quot;channel {} exception {}&quot;</span>, <a href="#akka.remote.testconductor;PlayerHandler.exceptionCaught.event" title="org.jboss.netty.channel.ExceptionEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>, <a href="#akka.remote.testconductor;PlayerHandler.exceptionCaught.event" title="org.jboss.netty.channel.ExceptionEvent">event</a>.<span title="()Throwable">getCause</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;PlayerHandler.exceptionCaught.event" title="org.jboss.netty.channel.ExceptionEvent">event</a>.<span title="()Throwable">getCause</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="java.net.ConnectException" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.c">c</a>: <span title="java.net.ConnectException">ConnectException</span> <span class="keyword">if</span> <a href="#akka.remote.testconductor;PlayerHandler.reconnects" title="=&gt; Int">reconnects</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> ⇒
        <a href="#akka.remote.testconductor;PlayerHandler.reconnects" title="(x$1: Int)Unit">reconnects</a> <span title="(x: Int)Int">-=</span> <span title="Int(1)" class="int">1</span>
        <a href="#akka.remote.testconductor;PlayerHandler.scheduler" title="akka.actor.Scheduler">scheduler</a>.<a href="../../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(066d40b78a)" title="(delay: scala.concurrent.duration.FiniteDuration)(f: =&gt; Unit)(implicit executor: scala.concurrent.ExecutionContext)akka.actor.Cancellable">scheduleOnce</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.nextAttempt_=" title="=&gt; scala.concurrent.duration.Deadline">nextAttempt</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span><span class="delimiter">)</span><a href="#akka.remote.testconductor;PlayerHandler.executor" title="scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#akka.remote.testconductor;PlayerHandler.reconnect" title="()Unit">reconnect</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Throwable" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.e">e</a> ⇒ <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.qual$3">fsm</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.x$12">!</a> <a href="#akka.remote.testconductor.ClientFSM.ConnectionFailure.readResolve" title="(msg: String)akka.remote.testconductor.ClientFSM.ConnectionFailure">ConnectionFailure</a><a title="akka.remote.testconductor.ClientFSM.ConnectionFailure" id="akka.remote.testconductor;PlayerHandler.exceptionCaught.x$11" class="delimiter">(</a><a href="#akka.remote.testconductor;PlayerHandler.exceptionCaught.e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testconductor;PlayerHandler.reconnect">reconnect</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote.testconductor;PlayerHandler.nextAttempt_=" title="(x$1: scala.concurrent.duration.Deadline)Unit">nextAttempt</a> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.remote.testconductor;PlayerHandler.backoff" title="scala.concurrent.duration.FiniteDuration">backoff</a>
    <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.apply" title="(role: akka.remote.testconductor.Role, sockaddr: java.net.InetSocketAddress, poolSize: Int, handler: org.jboss.netty.channel.ChannelUpstreamHandler)org.jboss.netty.channel.Channel">RemoteConnection</a><span title="Unit" class="delimiter">(</span><a href="RemoteConnection.scala.html#akka.remote.testconductor.Client" title="akka.remote.testconductor.Client.type">Client</a>, <a href="#akka.remote.testconductor;PlayerHandler.server" title="java.net.InetSocketAddress">server</a>, <a href="#akka.remote.testconductor;PlayerHandler.poolSize" title="Int">poolSize</a>, <a href="#akka.remote.testconductor;PlayerHandler" title="akka.remote.testconductor.PlayerHandler" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelConnected">channelConnected</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelConnected.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelConnected.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;PlayerHandler.channelConnected.ch">ch</a> = <a href="#akka.remote.testconductor;PlayerHandler.channelConnected.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;connected to {}&quot;)" class="string">&quot;connected to {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.channelConnected.ch" title="org.jboss.netty.channel.Channel">ch</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;PlayerHandler.channelConnected.qual$4">fsm</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;PlayerHandler.channelConnected.x$14">!</a> <a href="#akka.remote.testconductor.ClientFSM;Connected.equals" title="(channel: org.jboss.netty.channel.Channel)akka.remote.testconductor.ClientFSM.Connected">Connected</a><a title="akka.remote.testconductor.ClientFSM.Connected" id="akka.remote.testconductor;PlayerHandler.channelConnected.x$13" class="delimiter">(</a><a href="#akka.remote.testconductor;PlayerHandler.channelConnected.ch" title="org.jboss.netty.channel.Channel">ch</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;PlayerHandler.channelDisconnected">channelDisconnected</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.channel">channel</a> = <a href="#akka.remote.testconductor;PlayerHandler.channelDisconnected.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;disconnected from {}&quot;)" class="string">&quot;disconnected from {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.channelDisconnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.qual$5">fsm</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.x$16">!</a> <a href="../../../akka-actor/actor/Actor.scala.html#akka.actor.PoisonPill" title="akka.actor.PoisonPill.type" id="akka.remote.testconductor;PlayerHandler.channelDisconnected.x$15">PoisonPill</a>
    <a href="#akka.remote.testconductor;PlayerHandler.executor" title="scala.concurrent.ExecutionContext">executor</a>.<span title="(runnable: Runnable)Unit">execute</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.channelDisconnected;$anon" title="Runnable" class="keyword">new</a> <a title="anonymous class $anon extends Object with Runnable" id="akka.remote.testconductor;PlayerHandler.channelDisconnected;$anon">Runnable</a> <span class="delimiter">{</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testconductor;PlayerHandler.channelDisconnected;$anon.run">run</a> = <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection" title="akka.remote.testconductor.RemoteConnection.type">RemoteConnection</a>.<a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.shutdown" title="(channel: org.jboss.netty.channel.Channel)org.jboss.netty.channel.ChannelFuture">shutdown</a><span title="Unit" class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.channelDisconnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span> <span class="comment">// Must be shutdown outside of the Netty IO pool</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.MessageEvent)Unit" id="akka.remote.testconductor;PlayerHandler.messageReceived">messageReceived</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;PlayerHandler.messageReceived.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.MessageEvent" id="akka.remote.testconductor;PlayerHandler.messageReceived.event">event</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;PlayerHandler.messageReceived.channel">channel</a> = <a href="#akka.remote.testconductor;PlayerHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;message from {}: {}&quot;)" class="string">&quot;message from {}: {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <a href="#akka.remote.testconductor;PlayerHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()Object">getMessage</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;PlayerHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()Object">getMessage</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="akka.remote.testconductor.NetworkOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a> ⇒
        <a href="../../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;PlayerHandler.messageReceived.qual$6">fsm</a> <a href="../../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;PlayerHandler.messageReceived.x$18">!</a> <a title="akka.remote.testconductor.NetworkOp" id="akka.remote.testconductor;PlayerHandler.messageReceived.x$17">msg</a>
      <span class="keyword">case</span> <span title="Object">msg</span> ⇒
        <a href="#akka.remote.testconductor;PlayerHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.info(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;server {} sent garbage \'{}\', disconnecting&quot;)" class="string">&quot;server {} sent garbage '{}', disconnecting&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;PlayerHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <span title="Object">msg</span><span class="delimiter">)</span>
        <a href="#akka.remote.testconductor;PlayerHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
