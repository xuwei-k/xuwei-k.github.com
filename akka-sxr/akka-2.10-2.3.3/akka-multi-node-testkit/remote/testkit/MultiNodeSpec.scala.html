<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-multi-node-testkit/remote/testkit/MultiNodeSpec.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.remote.testkit

<span class="keyword">import</span> <span title="language.type">language</span>.implicitConversions
<span class="keyword">import</span> <span title="language.type">language</span>.postfixOps
<span class="keyword">import</span> java.net.<span class="delimiter">{</span> InetAddress, InetSocketAddress <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.TimeoutException
<span class="keyword">import</span> com.typesafe.config.<span class="delimiter">{</span> ConfigObject, ConfigFactory, Config <span class="delimiter">}</span>
<span class="keyword">import</span> scala.concurrent.<span class="delimiter">{</span> Await, Awaitable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.util.Timeout
<span class="keyword">import</span> akka.remote.testconductor.<span class="delimiter">{</span> TestConductorExt, TestConductor, RoleName <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.RemoteActorRefProvider
<span class="keyword">import</span> akka.testkit._
<span class="keyword">import</span> akka.testkit.<a href="../../../akka-testkit/testkit/TestEventListener.scala.html#akka.testkit.TestEvent" title="akka.testkit.TestEvent.type">TestEvent</a>._
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> akka.remote.testconductor.RoleName
<span class="keyword">import</span> akka.actor.RootActorPath
<span class="keyword">import</span> akka.event.<span class="delimiter">{</span> Logging, LoggingAdapter <span class="delimiter">}</span>

<span class="comment">/**
 * Configure the role names and participants of the test, including configuration settings.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class MultiNodeConfig extends AnyRef" id="akka.remote.testkit;MultiNodeConfig">MultiNodeConfig</a> <a href="#akka.remote.testkit;MultiNodeConfig" title="akka.remote.testkit.MultiNodeConfig" class="delimiter">{</a>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[com.typesafe.config.Config]" id="akka.remote.testkit;MultiNodeConfig._commonConf_=">_commonConf</a>: <span title="Option[com.typesafe.config.Config]">Option</span><span class="delimiter">[</span>Config<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.immutable.Map[akka.remote.testconductor.RoleName,com.typesafe.config.Config]" id="akka.remote.testkit;MultiNodeConfig._nodeConf_=">_nodeConf</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (akka.remote.testconductor.RoleName, com.typesafe.config.Config)*)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,com.typesafe.config.Config]" class="delimiter">[</span><a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <span title="com.typesafe.config.Config">Config</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]" id="akka.remote.testkit;MultiNodeConfig._roles_=">_roles</a> = <span title="[A](elems: A*)scala.collection.immutable.Vector[A]">Vector</span><span title="(elems: akka.remote.testconductor.RoleName*)scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]" class="delimiter">[</span><a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]]" id="akka.remote.testkit;MultiNodeConfig._deployments_=">_deployments</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (akka.remote.testconductor.RoleName, scala.collection.immutable.Seq[String])*)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]]" class="delimiter">[</span><a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, immutable.<span title="scala.collection.immutable.Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.immutable.Vector[String]" id="akka.remote.testkit;MultiNodeConfig._allDeploy_=">_allDeploy</a> = <span title="[A](elems: A*)scala.collection.immutable.Vector[A]">Vector</span><span title="(elems: String*)scala.collection.immutable.Vector[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="akka.remote.testkit;MultiNodeConfig._testTransport_=">_testTransport</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Register a common base config for all test participants, if so desired.
   */</span>
  <span class="keyword">def</span> <a title="(config: com.typesafe.config.Config)Unit" id="akka.remote.testkit;MultiNodeConfig.commonConfig">commonConfig</a><span class="delimiter">(</span><a title="com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeConfig.commonConfig.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote.testkit;MultiNodeConfig._commonConf_=" title="(x$1: Option[com.typesafe.config.Config])Unit">_commonConf</a> = <span title="(x: com.typesafe.config.Config)Some[com.typesafe.config.Config]">Some</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.commonConfig.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Register a config override for a specific participant.
   */</span>
  <span class="keyword">def</span> <a title="(roles: akka.remote.testconductor.RoleName*)(configs: com.typesafe.config.Config*)Unit" id="akka.remote.testkit;MultiNodeConfig.nodeConfig">nodeConfig</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName*" id="akka.remote.testkit;MultiNodeConfig.nodeConfig.roles">roles</a>: <span title="akka.remote.testconductor.RoleName*">RoleName</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="com.typesafe.config.Config*" id="akka.remote.testkit;MultiNodeConfig.nodeConfig.configs">configs</a>: <span title="com.typesafe.config.Config*">Config</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeConfig.nodeConfig.c">c</a> = <a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.configs" title="com.typesafe.config.Config*">configs</a>.<span title="(op: (com.typesafe.config.Config, com.typesafe.config.Config) =&gt; com.typesafe.config.Config)com.typesafe.config.Config">reduceLeft</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.c.$anonfun.x$1" title="com.typesafe.config.Config">_</a> <span title="(x$1: com.typesafe.config.ConfigMergeable)com.typesafe.config.Config">withFallback</span> <a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.c.$anonfun.x$2" title="com.typesafe.config.Config">_</a><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeConfig._nodeConf_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,com.typesafe.config.Config])Unit">_nodeConf</a> <span title="(xs: scala.collection.GenTraversableOnce[(akka.remote.testconductor.RoleName, com.typesafe.config.Config)])scala.collection.immutable.Map[akka.remote.testconductor.RoleName,com.typesafe.config.Config]">++=</span> <a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.roles" title="akka.remote.testconductor.RoleName*">roles</a> <span title="(f: akka.remote.testconductor.RoleName =&gt; (akka.remote.testconductor.RoleName, com.typesafe.config.Config))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[akka.remote.testconductor.RoleName],(akka.remote.testconductor.RoleName, com.typesafe.config.Config),Seq[(akka.remote.testconductor.RoleName, com.typesafe.config.Config)]])Seq[(akka.remote.testconductor.RoleName, com.typesafe.config.Config)]">map</span> <span class="delimiter">{</span> <a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.$anonfun.x$3" title="(x: akka.remote.testconductor.RoleName)ArrowAssoc[akka.remote.testconductor.RoleName]">_</a> <span title="(y: com.typesafe.config.Config)(akka.remote.testconductor.RoleName, com.typesafe.config.Config)">-&gt;</span> <a href="#akka.remote.testkit;MultiNodeConfig.nodeConfig.c" title="com.typesafe.config.Config">c</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Include for verbose debug logging
   * @param on when `true` debug Config is returned, otherwise config with info logging
   */</span>
  <span class="keyword">def</span> <a title="(on: Boolean)com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeConfig.debugConfig">debugConfig</a><span class="delimiter">(</span><a title="Boolean" id="akka.remote.testkit;MultiNodeConfig.debugConfig.on">on</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="com.typesafe.config.Config">Config</span> =
    <span title="com.typesafe.config.Config" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.debugConfig.on" title="Boolean">on</a><span class="delimiter">)</span>
      <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span><span title="String(&quot;\n        akka.loglevel = DEBUG\n        akka.remote {\n          log-received-messages = on\n          log-sent-messages = on\n        }\n        akka.actor.debug {\n          receive = on\n          fsm = on\n        }\n        akka.remote.log-remote-lifecycle-events = on\n        &quot;)" class="string">&quot;&quot;&quot;
        akka.loglevel = DEBUG
        akka.remote {
          log-received-messages = on
          log-sent-messages = on
        }
        akka.actor.debug {
          receive = on
          fsm = on
        }
        akka.remote.log-remote-lifecycle-events = on
        &quot;&quot;&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="()com.typesafe.config.Config">empty</span>

  <span class="comment">/**
   * Construct a RoleName and return it, to be used as an identifier in the
   * test. Registration of a role name creates a role which then needs to be
   * filled.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeConfig.role">role</a><span class="delimiter">(</span><a title="String" id="akka.remote.testkit;MultiNodeConfig.role.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._roles_=" title="=&gt; scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]">_roles</a> <span title="(p: akka.remote.testconductor.RoleName =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.role.$anonfun.x$4" title="akka.remote.testconductor.RoleName">_</a>.<a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testkit;MultiNodeConfig.role.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;non-unique role name &quot;)" class="string">&quot;non-unique role name &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit;MultiNodeConfig.role.name" title="String">name</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeConfig.role.r">r</a> = <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="(name: String)akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.role.name" title="String">name</a><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeConfig._roles_=" title="(x$1: scala.collection.immutable.Vector[akka.remote.testconductor.RoleName])Unit">_roles</a> <span title="(elem: akka.remote.testconductor.RoleName)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.remote.testconductor.RoleName],akka.remote.testconductor.RoleName,scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]])scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]">:+=</span> <a href="#akka.remote.testkit;MultiNodeConfig.role.r" title="akka.remote.testconductor.RoleName">r</a>
    <a href="#akka.remote.testkit;MultiNodeConfig.role.r" title="akka.remote.testconductor.RoleName">r</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(role: akka.remote.testconductor.RoleName, deployment: String)Unit" id="akka.remote.testkit;MultiNodeConfig.deployOn">deployOn</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeConfig.deployOn.role">role</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="String" id="akka.remote.testkit;MultiNodeConfig.deployOn.deployment">deployment</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.remote.testkit;MultiNodeConfig._deployments_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]])Unit">_deployments</a> <span title="(kv: (akka.remote.testconductor.RoleName, scala.collection.immutable.Seq[String]))scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]]">+=</span> <a href="#akka.remote.testkit;MultiNodeConfig.deployOn.role" title="(x: akka.remote.testconductor.RoleName)ArrowAssoc[akka.remote.testconductor.RoleName]">role</a> <span title="(y: scala.collection.immutable.Seq[String])(akka.remote.testconductor.RoleName, scala.collection.immutable.Seq[String])">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._deployments_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]]">_deployments</a> <span title="(key: akka.remote.testconductor.RoleName)Option[scala.collection.immutable.Seq[String]]">get</span> <a href="#akka.remote.testkit;MultiNodeConfig.deployOn.role" title="akka.remote.testconductor.RoleName">role</a> <span title="(default: =&gt; scala.collection.immutable.Seq[String])scala.collection.immutable.Seq[String]">getOrElse</span> <span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[String],String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]">:+</span> <a href="#akka.remote.testkit;MultiNodeConfig.deployOn.deployment" title="String">deployment</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(deployment: String)Unit" id="akka.remote.testkit;MultiNodeConfig.deployOnAll">deployOnAll</a><span class="delimiter">(</span><a title="String" id="akka.remote.testkit;MultiNodeConfig.deployOnAll.deployment">deployment</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote.testkit;MultiNodeConfig._allDeploy_=" title="(x$1: scala.collection.immutable.Vector[String])Unit">_allDeploy</a> <span title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[String],String,scala.collection.immutable.Vector[String]])scala.collection.immutable.Vector[String]">:+=</span> <a href="#akka.remote.testkit;MultiNodeConfig.deployOnAll.deployment" title="String">deployment</a>

  <span class="comment">/**
   * To be able to use `blackhole`, `passThrough`, and `throttle` you must
   * activate the failure injector and throttler transport adapters by
   * specifying `testTransport(on = true)` in your MultiNodeConfig.
   */</span>
  <span class="keyword">def</span> <a title="(on: Boolean)Unit" id="akka.remote.testkit;MultiNodeConfig.testTransport">testTransport</a><span class="delimiter">(</span><a title="Boolean" id="akka.remote.testkit;MultiNodeConfig.testTransport.on">on</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote.testkit;MultiNodeConfig._testTransport_=" title="(x$1: Boolean)Unit">_testTransport</a> = <a href="#akka.remote.testkit;MultiNodeConfig.testTransport.on" title="Boolean">on</a>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeConfig.myself">myself</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._roles_=" title="=&gt; scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]">_roles</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>.<a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="implicit scala.Predef.Integer2int : (x: Integer)Int">selfIndex</a>, <span title="String(&quot;not enough roles declared for this test&quot;)" class="string">&quot;not enough roles declared for this test&quot;</span><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeConfig._roles_=" title="(index: Int)akka.remote.testconductor.RoleName">_roles</a><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>.<a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="implicit scala.Predef.Integer2int : (x: Integer)Int">selfIndex</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeConfig.config">config</a>: <span title="com.typesafe.config.Config">Config</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeConfig.config.transportConfig">transportConfig</a> =
      <span title="com.typesafe.config.Config" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._testTransport_=" title="=&gt; Boolean">_testTransport</a><span class="delimiter">)</span> <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span>
        <span title="String(&quot;\n           akka.remote.netty.tcp.applied-adapters = [trttl, gremlin]\n        &quot;)" class="string">&quot;&quot;&quot;
           akka.remote.netty.tcp.applied-adapters = [trttl, gremlin]
        &quot;&quot;&quot;</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="()com.typesafe.config.Config">empty</span>

    <span class="keyword">val</span> <a title="List[com.typesafe.config.Config]" id="akka.remote.testkit;MultiNodeConfig.config.configs">configs</a> = <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._nodeConf_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,com.typesafe.config.Config]">_nodeConf</a> <span title="(key: akka.remote.testconductor.RoleName)Option[com.typesafe.config.Config]">get</span> <a href="#akka.remote.testkit;MultiNodeConfig.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a><span class="delimiter">)</span>.<span title="=&gt; List[com.typesafe.config.Config]">toList</span> <a href="#akka.remote.testkit;MultiNodeConfig.config.configs.x$9" title="(prefix: List[com.typesafe.config.Config])List[com.typesafe.config.Config]">:::</a> <a href="#akka.remote.testkit;MultiNodeConfig._commonConf_=" title="=&gt; Option[com.typesafe.config.Config]">_commonConf</a>.<span title="=&gt; List[com.typesafe.config.Config]">toList</span> <a href="#akka.remote.testkit;MultiNodeConfig.config.configs.x$8" title="(prefix: List[com.typesafe.config.Config])List[com.typesafe.config.Config]">:::</a> <a href="#akka.remote.testkit;MultiNodeConfig.config.transportConfig" title="com.typesafe.config.Config">transportConfig</a> <a href="#akka.remote.testkit;MultiNodeConfig.config.configs.x$7" title="(x: com.typesafe.config.Config)List[com.typesafe.config.Config]">::</a> <a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>.<a href="#akka.remote.testkit.MultiNodeSpec.nodeConfig" title="=&gt; com.typesafe.config.Config">nodeConfig</a> <a href="#akka.remote.testkit;MultiNodeConfig.config.configs.x$6" title="(x: com.typesafe.config.Config)List[com.typesafe.config.Config]">::</a> <a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>.<a href="#akka.remote.testkit.MultiNodeSpec.baseConfig" title="=&gt; com.typesafe.config.Config">baseConfig</a> <a href="#akka.remote.testkit;MultiNodeConfig.config.configs.x$5" title="(x: com.typesafe.config.Config)List[com.typesafe.config.Config]">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <a href="#akka.remote.testkit;MultiNodeConfig.config.configs" title="List[com.typesafe.config.Config]">configs</a> <span title="(f: (com.typesafe.config.Config, com.typesafe.config.Config) =&gt; com.typesafe.config.Config)com.typesafe.config.Config">reduceLeft</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig.config.$anonfun.x$10" title="com.typesafe.config.Config">_</a> <span title="(x$1: com.typesafe.config.ConfigMergeable)com.typesafe.config.Config">withFallback</span> <a href="#akka.remote.testkit;MultiNodeConfig.config.$anonfun.x$11" title="com.typesafe.config.Config">_</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName)scala.collection.immutable.Seq[String]" id="akka.remote.testkit;MultiNodeConfig.deployments">deployments</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeConfig.deployments.node">node</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeConfig._deployments_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,scala.collection.immutable.Seq[String]]">_deployments</a> <span title="(key: akka.remote.testconductor.RoleName)Option[scala.collection.immutable.Seq[String]]">get</span> <a href="#akka.remote.testkit;MultiNodeConfig.deployments.node" title="akka.remote.testconductor.RoleName">node</a> <span title="(default: =&gt; scala.collection.immutable.Seq[String])scala.collection.immutable.Seq[String]">getOrElse</span> <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[String],String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]">++</span> <a href="#akka.remote.testkit;MultiNodeConfig._allDeploy_=" title="=&gt; scala.collection.immutable.Vector[String]">_allDeploy</a>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]" id="akka.remote.testkit;MultiNodeConfig.roles">roles</a>: immutable.<span title="scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">Seq</span><span class="delimiter">[</span>RoleName<span class="delimiter">]</span> = <a href="#akka.remote.testkit;MultiNodeConfig._roles_=" title="=&gt; scala.collection.immutable.Vector[akka.remote.testconductor.RoleName]">_roles</a>

<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">object</span> <a title="akka.remote.testkit.MultiNodeSpec.type" id="akka.remote.testkit.MultiNodeSpec">MultiNodeSpec</a> <a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type" class="delimiter">{</a>

  <span class="comment">/**
   * Number of nodes node taking part in this test.
   *
   * {{{
   * -Dmultinode.max-nodes=4
   * }}}
   */</span>
  <span class="keyword">val</span> <a title="Int" id="akka.remote.testkit.MultiNodeSpec.maxNodes">maxNodes</a>: <span title="Int">Int</span> = <span title="(x: Integer)Option[Integer]">Option</span><span class="delimiter">(</span><span title="Integer.type">Integer</span>.<span title="(x$1: String)Integer">getInteger</span><span class="delimiter">(</span><span title="String(&quot;multinode.max-nodes&quot;)" class="string">&quot;multinode.max-nodes&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="implicit scala.Predef.Integer2int : (x: Integer)Int">getOrElse</span>
    <span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;need system property multinode.max-nodes to be set&quot;)" class="string">&quot;need system property multinode.max-nodes to be set&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.maxNodes" title="=&gt; Int">maxNodes</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;multinode.max-nodes must be greater than 0&quot;)" class="string">&quot;multinode.max-nodes must be greater than 0&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Name (or IP address; must be resolvable using InetAddress.getByName)
   * of the host this node is running on.
   *
   * {{{
   * -Dmultinode.host=host.example.com
   * }}}
   *
   * InetAddress.getLocalHost.getHostAddress is used if empty or &quot;localhost&quot;
   * is defined as system property &quot;multinode.host&quot;.
   */</span>
  <span class="keyword">val</span> <a title="String" id="akka.remote.testkit.MultiNodeSpec.selfName">selfName</a>: <span title="String">String</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="(x$1: String)String">getProperty</span><span class="delimiter">(</span><span title="String(&quot;multinode.host&quot;)" class="string">&quot;multinode.host&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type">None</span>       ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;need system property multinode.host to be set&quot;)" class="string">&quot;need system property multinode.host to be set&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>   ⇒ <span title="java.net.InetAddress.type">InetAddress</span>.<span title="()java.net.InetAddress">getLocalHost</span>.<span title="()String">getHostAddress</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="akka.remote.testkit.MultiNodeSpec.selfName.host">host</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote.testkit.MultiNodeSpec.selfName.host" title="String">host</a>
  <span class="delimiter">}</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.selfName" title="=&gt; String">selfName</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;multinode.host must not be empty&quot;)" class="string">&quot;multinode.host must not be empty&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Port number of this node. Defaults to 0 which means a random port.
   *
   * {{{
   * -Dmultinode.port=0
   * }}}
   */</span>
  <span class="keyword">val</span> <a title="Int" id="akka.remote.testkit.MultiNodeSpec.selfPort">selfPort</a>: <span title="Int">Int</span> = <span title="Integer.type">Integer</span>.<span title="(x$1: String, x$2: Int)Integer">getInteger</span><span title="implicit scala.Predef.Integer2int : (x: Integer)Int" class="delimiter">(</span><span title="String(&quot;multinode.port&quot;)" class="string">&quot;multinode.port&quot;</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.selfPort" title="=&gt; Int">selfPort</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfPort" title="=&gt; Int">selfPort</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(65535)" class="int">65535</span>, <span title="String(&quot;multinode.port is out of bounds: &quot;)" class="string">&quot;multinode.port is out of bounds: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfPort" title="=&gt; Int">selfPort</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Name (or IP address; must be resolvable using InetAddress.getByName)
   * of the host that the server node is running on.
   *
   * {{{
   * -Dmultinode.server-host=server.example.com
   * }}}
   */</span>
  <span class="keyword">val</span> <a title="String" id="akka.remote.testkit.MultiNodeSpec.serverName">serverName</a>: <span title="String">String</span> = <span title="(x: String)Option[String]">Option</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="(x$1: String)String">getProperty</span><span class="delimiter">(</span><span title="String(&quot;multinode.server-host&quot;)" class="string">&quot;multinode.server-host&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(default: =&gt; String)String">getOrElse</span>
    <span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;need system property multinode.server-host to be set&quot;)" class="string">&quot;need system property multinode.server-host to be set&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.serverName" title="=&gt; String">serverName</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;multinode.server-host must not be empty&quot;)" class="string">&quot;multinode.server-host must not be empty&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Port number of the node that's running the server system. Defaults to 4711.
   *
   * {{{
   * -Dmultinode.server-port=4711
   * }}}
   */</span>
  <span class="keyword">val</span> <a title="Int" id="akka.remote.testkit.MultiNodeSpec.serverPort">serverPort</a>: <span title="Int">Int</span> = <span title="Integer.type">Integer</span>.<span title="(x$1: String, x$2: Int)Integer">getInteger</span><span title="implicit scala.Predef.Integer2int : (x: Integer)Int" class="delimiter">(</span><span title="String(&quot;multinode.server-port&quot;)" class="string">&quot;multinode.server-port&quot;</span>, <span title="Int(4711)" class="int">4711</span><span class="delimiter">)</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.serverPort" title="=&gt; Int">serverPort</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote.testkit.MultiNodeSpec.serverPort" title="=&gt; Int">serverPort</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(65535)" class="int">65535</span>, <span title="String(&quot;multinode.server-port is out of bounds: &quot;)" class="string">&quot;multinode.server-port is out of bounds: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit.MultiNodeSpec.serverPort" title="=&gt; Int">serverPort</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Index of this node in the roles sequence. The TestConductor
   * is started in “controller” mode on selfIndex 0, i.e. there you can inject
   * failures and shutdown other nodes etc.
   *
   * {{{
   * -Dmultinode.index=0
   * }}}
   */</span>
  <span class="keyword">val</span> <a title="Integer" id="akka.remote.testkit.MultiNodeSpec.selfIndex">selfIndex</a> = <span title="(x: Integer)Option[Integer]">Option</span><span class="delimiter">(</span><span title="Integer.type">Integer</span>.<span title="(x$1: String)Integer">getInteger</span><span class="delimiter">(</span><span title="String(&quot;multinode.index&quot;)" class="string">&quot;multinode.index&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(default: =&gt; Integer)Integer">getOrElse</span>
    <span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;need system property multinode.index to be set&quot;)" class="string">&quot;need system property multinode.index to be set&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="implicit scala.Predef.Integer2int : (x: Integer)Int">selfIndex</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="implicit scala.Predef.Integer2int : (x: Integer)Int">selfIndex</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.remote.testkit.MultiNodeSpec.maxNodes" title="=&gt; Int">maxNodes</a>, <span title="String(&quot;multinode.index is out of bounds: &quot;)" class="string">&quot;multinode.index is out of bounds: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="=&gt; Integer">selfIndex</a><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.remote.testkit.MultiNodeSpec.nodeConfig">nodeConfig</a> = <a href="#akka.remote.testkit.MultiNodeSpec.mapToConfig" title="(map: Map[String,Any])com.typesafe.config.Config">mapToConfig</a><span class="delimiter">(</span><span title="(elems: (String, Any)*)scala.collection.immutable.Map[String,Any]">Map</span><span class="delimiter">(</span>
    <span title="(x: String)ArrowAssoc[String]" class="string">&quot;akka.actor.provider&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <span title="String(&quot;akka.remote.RemoteActorRefProvider&quot;)" class="string">&quot;akka.remote.RemoteActorRefProvider&quot;</span>,
    <span title="(x: String)ArrowAssoc[String]" class="string">&quot;akka.remote.netty.tcp.hostname&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfName" title="=&gt; String">selfName</a>,
    <span title="(x: String)ArrowAssoc[String]" class="string">&quot;akka.remote.netty.tcp.port&quot;</span> <span title="(y: Int)(String, Int)">-&gt;</span> <a href="#akka.remote.testkit.MultiNodeSpec.selfPort" title="=&gt; Int">selfPort</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span>testkit<span class="delimiter">]</span> <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.remote.testkit.MultiNodeSpec.baseConfig">baseConfig</a>: <span title="com.typesafe.config.Config">Config</span> = <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span><span title="String(&quot;\n      akka {\n        loggers = [\&quot;akka.testkit.TestEventListener\&quot;]\n        loglevel = \&quot;WARNING\&quot;\n        stdout-loglevel = \&quot;WARNING\&quot;\n        actor {\n          default-dispatcher {\n            executor = \&quot;fork-join-executor\&quot;\n            fork-join-executor {\n              parallelism-min = 8\n              parallelism-factor = 2.0\n              parallelism-max = 8\n            }\n          }\n        }\n      }\n      &quot;)" class="string">&quot;&quot;&quot;
      akka {
        loggers = [&quot;akka.testkit.TestEventListener&quot;]
        loglevel = &quot;WARNING&quot;
        stdout-loglevel = &quot;WARNING&quot;
        actor {
          default-dispatcher {
            executor = &quot;fork-join-executor&quot;
            fork-join-executor {
              parallelism-min = 8
              parallelism-factor = 2.0
              parallelism-max = 8
            }
          }
        }
      }
      &quot;&quot;&quot;</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(map: Map[String,Any])com.typesafe.config.Config" id="akka.remote.testkit.MultiNodeSpec.mapToConfig">mapToConfig</a><span class="delimiter">(</span><a title="Map[String,Any]" id="akka.remote.testkit.MultiNodeSpec.mapToConfig.map">map</a>: <span title="Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="com.typesafe.config.Config">Config</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: java.util.Map[String, _])com.typesafe.config.Config">parseMap</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.mapToConfig.map" title="(m: scala.collection.Map[String,Any])scala.collection.convert.Decorators.AsJava[java.util.Map[String,Any]]">map</a>.<span title="=&gt; java.util.Map[String,Any]">asJava</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: Class[_])String" id="akka.remote.testkit.MultiNodeSpec.getCallerName">getCallerName</a><span class="delimiter">(</span><a title="Class[_]" id="akka.remote.testkit.MultiNodeSpec.getCallerName.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[String]" id="akka.remote.testkit.MultiNodeSpec.getCallerName.s">s</a> = <span title="Thread.type">Thread</span>.<span title="()Thread">currentThread</span>.<span title="(xs: Array[StackTraceElement])scala.collection.mutable.ArrayOps[StackTraceElement]">getStackTrace</span> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</span> <span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.s.$anonfun.x$12" title="StackTraceElement">_</a>.<span title="()String">getClassName</span><span class="delimiter">)</span> <span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">drop</span> <span title="Int(1)" class="int">1</span> <span title="(p: String =&gt; Boolean)Array[String]">dropWhile</span> <span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.s.$anonfun.x$13" title="String">_</a> <span title="(x$1: String)Boolean">matches</span> <span title="String(&quot;.*MultiNodeSpec.?$&quot;)" class="string">&quot;.*MultiNodeSpec.?$&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[String]" id="akka.remote.testkit.MultiNodeSpec.getCallerName.reduced">reduced</a> = <a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.s" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">s</a>.<span title="(p: String =&gt; Boolean)Int">lastIndexWhere</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.reduced.$anonfun.x$14" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.clazz" title="Class[_]">clazz</a>.<span title="()String">getName</span><span class="delimiter">)</span> <span title="Array[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span> ⇒ <a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.s" title="Array[String]">s</a>
      <span class="keyword">case</span> <a title="Int" id="akka.remote.testkit.MultiNodeSpec.getCallerName.reduced.z">z</a>  ⇒ <a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.s" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">s</a> <span title="(n: Int)Array[String]">drop</span> <span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.reduced.z" title="Int">z</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.remote.testkit.MultiNodeSpec.getCallerName.reduced" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">reduced</a>.<span title="=&gt; String">head</span>.<span title="(x$1: String, x$2: String)String">replaceFirst</span><span class="delimiter">(</span><span title="String(&quot;.*\\.&quot;)" class="string">&quot;&quot;&quot;.*\.&quot;&quot;&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><span title="String(&quot;[^a-zA-Z_0-9]&quot;)" class="string">&quot;[^a-zA-Z_0-9]&quot;</span>, <span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Note: To be able to run tests with everything ignored or excluded by tags
 * you must not use `testconductor`, or helper methods that use `testconductor`,
 * from the constructor of your test class. Otherwise the controller node might
 * be shutdown before other nodes have completed and you will see errors like:
 * `AskTimeoutException: sending to terminated ref breaks promises`. Using lazy
 * val is fine.
 */</span>
<span title="AnyRef" class="keyword">abstract</span> <span class="keyword">class</span> <a title="class MultiNodeSpec extends akka.testkit.TestKit with akka.remote.testkit.MultiNodeSpecCallbacks" id="akka.remote.testkit;MultiNodeSpec">MultiNodeSpec</a><a href="#akka.remote.testkit;MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec" class="delimiter">(</a><span class="keyword">val</span> <a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeSpec.myself">myself</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.actor.ActorSystem" id="akka.remote.testkit;MultiNodeSpec._system">_system</a>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]" id="akka.remote.testkit;MultiNodeSpec._roles">_roles</a>: immutable.<span title="scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">Seq</span><span class="delimiter">[</span>RoleName<span class="delimiter">]</span>, <a title="akka.remote.testconductor.RoleName =&gt; Seq[String]" id="akka.remote.testkit;MultiNodeSpec.deployments">deployments</a>: RoleName ⇒ Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit" title="akka.testkit.TestKit">TestKit</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec._system" title="akka.actor.ActorSystem">_system</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#akka.remote.testkit;MultiNodeSpecCallbacks" title="akka.remote.testkit.MultiNodeSpecCallbacks">MultiNodeSpecCallbacks</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>._

  <span class="keyword">def</span> <a title="(config: akka.remote.testkit.MultiNodeConfig)akka.remote.testkit.MultiNodeSpec" id="akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca)" class="keyword">this</a><span class="delimiter">(</span><a title="akka.remote.testkit.MultiNodeConfig" id="akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca).config">config</a>: <a href="#akka.remote.testkit;MultiNodeConfig" title="akka.remote.testkit.MultiNodeConfig">MultiNodeConfig</a><span class="delimiter">)</span> =
    <a href="#akka.remote.testkit;MultiNodeSpec" title="MultiNodeSpec.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca).config" title="akka.remote.testkit.MultiNodeConfig">config</a>.<a href="#akka.remote.testkit;MultiNodeConfig.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a>, <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem.apply(a7879b7629)" title="(name: String, config: com.typesafe.config.Config)akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec" title="akka.remote.testkit.MultiNodeSpec.type">MultiNodeSpec</a>.<a href="#akka.remote.testkit.MultiNodeSpec.getCallerName" title="(clazz: Class[_])String">getCallerName</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.testkit.MultiNodeSpec](classOf[akka.remote.testkit.MultiNodeSpec])" class="delimiter">[</span>MultiNodeSpec<span class="delimiter">]</span><span class="delimiter">)</span>, <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: com.typesafe.config.Config)com.typesafe.config.Config">load</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca).config" title="akka.remote.testkit.MultiNodeConfig">config</a>.<a href="#akka.remote.testkit;MultiNodeConfig.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span><span class="delimiter">)</span>,
      <a href="#akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca).config" title="akka.remote.testkit.MultiNodeConfig">config</a>.<a href="#akka.remote.testkit;MultiNodeConfig.roles" title="=&gt; scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">roles</a>, <a href="#akka.remote.testkit;MultiNodeSpec.<init>(54a1ad91ca).config" title="akka.remote.testkit.MultiNodeConfig">config</a>.<a href="#akka.remote.testkit;MultiNodeConfig.deployments" title="(node: akka.remote.testconductor.RoleName)scala.collection.immutable.Seq[String]">deployments</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="akka.event.LoggingAdapter" id="akka.remote.testkit;MultiNodeSpec.log">log</a>: <a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a> = <a href="../../../akka-actor/event/Logging.scala.html#akka.event.Logging.apply(882ba4a885)" title="(system: akka.actor.ActorSystem, logSource: Class[?0])(implicit evidence$3: akka.event.LogSource[Class[?0]])akka.event.LoggingAdapter">Logging</a><a href="../../../akka-actor/event/Logging.scala.html#akka.event.LogSource.fromAnyClass" title="akka.event.LogSource[Class[?0]]" class="delimiter">(</a><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a>, <a href="#akka.remote.testkit;MultiNodeSpec" title="MultiNodeSpec.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Enrich `.await()` onto all Awaitables, using remaining duration from the innermost
   * enclosing `within` block or QueryTimeout.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](w: scala.concurrent.Awaitable[T])MultiNodeSpec.this.AwaitHelper[T]" id="akka.remote.testkit;MultiNodeSpec.awaitHelper">awaitHelper</a><span class="delimiter">[</span><a title="" id="akka.remote.testkit;MultiNodeSpec.awaitHelper;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.Awaitable[T]" id="akka.remote.testkit;MultiNodeSpec.awaitHelper.w">w</a>: <span title="scala.concurrent.Awaitable[T]">Awaitable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="MultiNodeSpec.this.AwaitHelper[T]" class="keyword">new</span> <a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper" title="MultiNodeSpec.this.AwaitHelper[T]">AwaitHelper</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.awaitHelper.w" title="scala.concurrent.Awaitable[T]">w</a><span class="delimiter">)</span>
  <span class="keyword">class</span> <a title="class AwaitHelper[T] extends AnyRef" id="akka.remote.testkit;MultiNodeSpec;AwaitHelper">AwaitHelper</a><span class="delimiter">[</span><a title="" id="akka.remote.testkit;MultiNodeSpec;AwaitHelper;T">T</a><span class="delimiter">]</span><a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper" title="MultiNodeSpec.this.AwaitHelper[T]" class="delimiter">(</a><a title="scala.concurrent.Awaitable[T]" id="akka.remote.testkit;MultiNodeSpec;AwaitHelper.w">w</a>: <span title="scala.concurrent.Awaitable[T]">Awaitable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; T" id="akka.remote.testkit;MultiNodeSpec;AwaitHelper.await">await</a>: <a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper;T" title="T">T</a> = <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[T], atMost: scala.concurrent.duration.Duration)T">result</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper.w" title="scala.concurrent.Awaitable[T]">w</a>, <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKitBase.remainingOr" title="(duration: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">remainingOr</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.QueryTimeout" title="=&gt; akka.util.Timeout">QueryTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpec.multiNodeSpecBeforeAll">multiNodeSpecBeforeAll</a> <span class="delimiter">{</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.atStartup" title="()Unit">atStartup</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpec.multiNodeSpecAfterAll">multiNodeSpecAfterAll</a> <span class="delimiter">{</span>
    <span class="comment">// wait for all nodes to remove themselves before we shut the conductor down</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="=&gt; Integer">selfIndex</a> <span title="(x$1: Any)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Conductor.scala.html#akka.remote.testconductor;Conductor.removeNode" title="(node: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.remote.testconductor.Done]">removeNode</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a><span class="delimiter">)</span>
      <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKitBase.within(4d29560fcd)" title="(max: scala.concurrent.duration.FiniteDuration)(f: =&gt; Unit)Unit">within</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKitBase.awaitCond" title="(p: =&gt; Boolean, max: scala.concurrent.duration.Duration, interval: scala.concurrent.duration.Duration, message: String)Unit">awaitCond</a> <span class="delimiter">{</span>
          <span class="comment">// Await.result(testConductor.getNodes, remaining).filterNot(_ == myself).isEmpty</span>
          <a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="#akka.remote.testkit;MultiNodeSpec.awaitHelper" title="(w: scala.concurrent.Awaitable[Iterable[akka.remote.testconductor.RoleName]])MultiNodeSpec.this.AwaitHelper[Iterable[akka.remote.testconductor.RoleName]]">getNodes</a>.<a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper.await" title="=&gt; Iterable[akka.remote.testconductor.RoleName]">await</a>.<span title="(p: akka.remote.testconductor.RoleName =&gt; Boolean)Iterable[akka.remote.testconductor.RoleName]">filterNot</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.multiNodeSpecAfterAll.$anonfun.x$15" title="akka.remote.testconductor.RoleName">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKitBase.shutdown" title="(actorSystem: akka.actor.ActorSystem, duration: scala.concurrent.duration.Duration, verifySystemShutdown: Boolean)Unit">shutdown</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.afterTermination" title="()Unit">afterTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.duration.FiniteDuration" id="akka.remote.testkit;MultiNodeSpec.shutdownTimeout">shutdownTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">5</span>.<a href="../../../akka-testkit/testkit/package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">seconds</a>.<a href="../../../akka-testkit/testkit/package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>

  <span class="comment">/**
   * Override this and return `true` to assert that the
   * shutdown of the `ActorSystem` was done properly.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.remote.testkit;MultiNodeSpec.verifySystemShutdown">verifySystemShutdown</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/*
  * Test Class Interface
  */</span>

  <span class="comment">/**
   * Override this method to do something when the whole test is starting up.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpec.atStartup">atStartup</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Override this method to do something when the whole test is terminating.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpec.afterTermination">afterTermination</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * All registered roles
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]" id="akka.remote.testkit;MultiNodeSpec.roles">roles</a>: immutable.<span title="scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">Seq</span><span class="delimiter">[</span>RoleName<span class="delimiter">]</span> = <a href="#akka.remote.testkit;MultiNodeSpec._roles" title="scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">_roles</a>

  <span class="comment">/**
   * TO BE DEFINED BY USER: Defines the number of participants required for starting the test. This
   * might not be equals to the number of nodes available to the test.
   *
   * Must be a `def`:
   * {{{
   * def initialParticipants = 5
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="akka.remote.testkit;MultiNodeSpec.initialParticipants">initialParticipants</a>: <span title="Int">Int</span>
  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.initialParticipants" title="=&gt; Int">initialParticipants</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;initialParticipants must be a \'def\' or early initializer, and it must be greater zero&quot;)" class="string">&quot;initialParticipants must be a 'def' or early initializer, and it must be greater zero&quot;</span><span class="delimiter">)</span>
  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.initialParticipants" title="=&gt; Int">initialParticipants</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#akka.remote.testkit.MultiNodeSpec.maxNodes" title="=&gt; Int">maxNodes</a>, <span title="String(&quot;not enough nodes to run this test&quot;)" class="string">&quot;not enough nodes to run this test&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Access to the barriers, failure injection, etc. The extension will have
   * been started either in Conductor or Player mode when the constructor of
   * MultiNodeSpec finishes, i.e. do not call the start*() methods yourself!
   */</span>
  <span class="keyword">var</span> <a title="akka.remote.testconductor.TestConductorExt" id="akka.remote.testkit;MultiNodeSpec.testConductor_=">testConductor</a>: <a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt" title="akka.remote.testconductor.TestConductorExt">TestConductorExt</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="comment">/**
   * Execute the given block of code only on the given nodes (names according
   * to the `roleMap`).
   */</span>
  <span class="keyword">def</span> <a title="(nodes: akka.remote.testconductor.RoleName*)(thunk: =&gt; Unit)Unit" id="akka.remote.testkit;MultiNodeSpec.runOn">runOn</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName*" id="akka.remote.testkit;MultiNodeSpec.runOn.nodes">nodes</a>: <span title="akka.remote.testconductor.RoleName*">RoleName</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="akka.remote.testkit;MultiNodeSpec.runOn.thunk">thunk</a>: ⇒ Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.isNode" title="(nodes: akka.remote.testconductor.RoleName*)Boolean">isNode</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.runOn.nodes" title="akka.remote.testconductor.RoleName*">nodes</a>: _*<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote.testkit;MultiNodeSpec.runOn.thunk" title="=&gt; Unit">thunk</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Verify that the running node matches one of the given nodes
   */</span>
  <span class="keyword">def</span> <a title="(nodes: akka.remote.testconductor.RoleName*)Boolean" id="akka.remote.testkit;MultiNodeSpec.isNode">isNode</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName*" id="akka.remote.testkit;MultiNodeSpec.isNode.nodes">nodes</a>: <span title="akka.remote.testconductor.RoleName*">RoleName</span>*<span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.remote.testkit;MultiNodeSpec.isNode.nodes" title="akka.remote.testconductor.RoleName*">nodes</a> <span title="(elem: Any)Boolean">contains</span> <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a>

  <span class="comment">/**
   * Enter the named barriers in the order given. Use the remaining duration from
   * the innermost enclosing `within` block or the default `BarrierTimeout`
   */</span>
  <span class="keyword">def</span> <a title="(name: String*)Unit" id="akka.remote.testkit;MultiNodeSpec.enterBarrier">enterBarrier</a><span class="delimiter">(</span><a title="String*" id="akka.remote.testkit;MultiNodeSpec.enterBarrier.name">name</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Player.scala.html#akka.remote.testconductor;Player.enter(09b82f7b61)" title="(timeout: akka.util.Timeout, name: scala.collection.immutable.Seq[String])Unit">enter</a><span class="delimiter">(</span>
      <a href="../../../akka-actor/util/Timeout.scala.html#akka.util.Timeout" title="akka.util.Timeout.type">Timeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util.Timeout.durationToTimeout" title="implicit akka.util.Timeout.durationToTimeout : (duration: scala.concurrent.duration.FiniteDuration)akka.util.Timeout">durationToTimeout</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKitBase.remainingOr" title="(duration: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">remainingOr</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span><span class="delimiter">)</span>,
      <a href="#akka.remote.testkit;MultiNodeSpec.enterBarrier.name" title="String*">name</a>.<span title="[Col[_]](implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,String,Col[String]])Col[String]">to</span><span title="(implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,String,scala.collection.immutable.Seq[String]])scala.collection.immutable.Seq[String]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq">Seq</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Query the controller for the transport address of the given node (by role name) and
   * return that as an ActorPath for easy composition:
   *
   * {{{
   * val serviceA = system.actorSelection(node(&quot;master&quot;) / &quot;user&quot; / &quot;serviceA&quot;)
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="(role: akka.remote.testconductor.RoleName)akka.actor.ActorPath" id="akka.remote.testkit;MultiNodeSpec.node">node</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeSpec.node.role">role</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <a href="../../../akka-actor/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a> = <a href="../../../akka-actor/actor/ActorPath.scala.html#akka.actor;RootActorPath" title="(address: akka.actor.Address, name: String)akka.actor.RootActorPath">RootActorPath</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="=&gt; akka.remote.testconductor.TestConductorExt">testConductor</a>.<a href="../testconductor/Player.scala.html#akka.remote.testconductor;Player.getAddressFor" title="(name: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.actor.Address]">getAddressFor</a><a href="#akka.remote.testkit;MultiNodeSpec.awaitHelper" title="(w: scala.concurrent.Awaitable[akka.actor.Address])MultiNodeSpec.this.AwaitHelper[akka.actor.Address]" class="delimiter">(</a><a href="#akka.remote.testkit;MultiNodeSpec.node.role" title="akka.remote.testconductor.RoleName">role</a><span class="delimiter">)</span>.<a href="#akka.remote.testkit;MultiNodeSpec;AwaitHelper.await" title="=&gt; akka.actor.Address">await</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(messageClasses: Class[_]*)(sys: akka.actor.ActorSystem)Unit" id="akka.remote.testkit;MultiNodeSpec.muteDeadLetters">muteDeadLetters</a><span class="delimiter">(</span><a title="Class[_]*" id="akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2.messageClasses">messageClasses</a>: <span title="Class[_]*">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2">sys</a>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a> = <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2" title="akka.actor.ActorSystem">sys</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.isDebugEnabled" title="=&gt; Boolean">isDebugEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(clazz: Class[_])Unit" id="akka.remote.testkit;MultiNodeSpec.muteDeadLetters.mute">mute</a><span class="delimiter">(</span><a title="Class[_]" id="akka.remote.testkit;MultiNodeSpec.muteDeadLetters.mute.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
        <a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2" title="akka.actor.ActorSystem">sys</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../akka-actor/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestEventListener.scala.html#akka.testkit.TestEvent.Mute.apply(124da2f0be)" title="(filter: akka.testkit.EventFilter, filters: akka.testkit.EventFilter*)akka.testkit.TestEvent.Mute">Mute</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestEventListener.scala.html#akka.testkit;DeadLettersFilter" title="(messageClass: Class[_])(occurrences: Int)akka.testkit.DeadLettersFilter">DeadLettersFilter</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters.mute.clazz" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">(</span>occurrences = Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2.messageClasses" title="Class[_]*">messageClasses</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters.mute" title="(clazz: Class[_])Unit">mute</a><span class="delimiter">(</span>classOf<span title="Class[AnyRef](classOf[java.lang.Object])" class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters$default$2.messageClasses" title="Class[_]*">messageClasses</a> <span title="(f: Class[_] =&gt; Unit)Unit">foreach</span> <a href="#akka.remote.testkit;MultiNodeSpec.muteDeadLetters.mute" title="(clazz: Class[_])Unit">mute</a>
    <span class="delimiter">}</span>

  <span class="comment">/*
   * Implementation (i.e. wait for start etc.)
   */</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.net.InetSocketAddress" id="akka.remote.testkit;MultiNodeSpec.controllerAddr">controllerAddr</a> = <span title="(x$1: String, x$2: Int)java.net.InetSocketAddress" class="keyword">new</span> <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.serverName" title="=&gt; String">serverName</a>, <a href="#akka.remote.testkit.MultiNodeSpec.serverPort" title="=&gt; Int">serverPort</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tc: akka.remote.testconductor.TestConductorExt)Unit" id="akka.remote.testkit;MultiNodeSpec.attachConductor">attachConductor</a><span class="delimiter">(</span><a title="akka.remote.testconductor.TestConductorExt" id="akka.remote.testkit;MultiNodeSpec.attachConductor.tc">tc</a>: <a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt" title="akka.remote.testconductor.TestConductorExt">TestConductorExt</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.remote.testkit;MultiNodeSpec.attachConductor.timeout">timeout</a> = <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.tc" title="akka.remote.testconductor.TestConductorExt">tc</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="tc.Settings.type">Settings</a>.<a href="../testconductor/Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>.<a href="../../../akka-actor/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a>
    <span class="keyword">val</span> <a title="scala.concurrent.Future[Object]" id="akka.remote.testkit;MultiNodeSpec.attachConductor.startFuture">startFuture</a> =
      <span title="scala.concurrent.Future[Object]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testkit.MultiNodeSpec.selfIndex" title="=&gt; Integer">selfIndex</a> <span title="(x$1: Any)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.tc" title="akka.remote.testconductor.TestConductorExt">tc</a>.<a href="../testconductor/Conductor.scala.html#akka.remote.testconductor;Conductor.startController" title="(participants: Int, name: akka.remote.testconductor.RoleName, controllerPort: java.net.InetSocketAddress)scala.concurrent.Future[java.net.InetSocketAddress]">startController</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.initialParticipants" title="=&gt; Int">initialParticipants</a>, <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a>, <a href="#akka.remote.testkit;MultiNodeSpec.controllerAddr" title="=&gt; java.net.InetSocketAddress">controllerAddr</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.tc" title="akka.remote.testconductor.TestConductorExt">tc</a>.<a href="../testconductor/Player.scala.html#akka.remote.testconductor;Player.startClient" title="(name: akka.remote.testconductor.RoleName, controllerAddr: java.net.InetSocketAddress)scala.concurrent.Future[akka.remote.testconductor.Done]">startClient</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a>, <a href="#akka.remote.testkit;MultiNodeSpec.controllerAddr" title="=&gt; java.net.InetSocketAddress">controllerAddr</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[Object], atMost: scala.concurrent.duration.Duration)Object">result</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.startFuture" title="scala.concurrent.Future[Object]">startFuture</a>, <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.timeout" title="scala.concurrent.duration.FiniteDuration">timeout</a><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote.testkit;MultiNodeSpec.attachConductor.x">x</a><span class="delimiter">)</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String, x$2: Throwable)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;failure while attaching new conductor&quot;)" class="string">&quot;failure while attaching new conductor&quot;</span>, <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.x" title="Throwable">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.testConductor_=" title="(x$1: akka.remote.testconductor.TestConductorExt)Unit">testConductor</a> = <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor.tc" title="akka.remote.testconductor.TestConductorExt">tc</a>
  <span class="delimiter">}</span>

  <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor" title="(tc: akka.remote.testconductor.TestConductorExt)Unit">attachConductor</a><span class="delimiter">(</span><a href="../../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.testconductor.TestConductorExt">TestConductor</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">// now add deployments, if so desired</span>

  <span class="keyword">private</span> <span class="keyword">case class</span> <a title="class Replacement extends AnyRef with Product with Serializable" id="akka.remote.testkit;MultiNodeSpec.Replacement.readResolve">Replacement</a><a href="#akka.remote.testkit;MultiNodeSpec.Replacement.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.remote.testkit;MultiNodeSpec;Replacement.tag">tag</a>: <span title="String">String</span>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeSpec;Replacement.role">role</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="akka.remote.testkit;MultiNodeSpec;Replacement.addr">addr</a> = <a href="#akka.remote.testkit;MultiNodeSpec.node" title="(role: akka.remote.testconductor.RoleName)akka.actor.ActorPath">node</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec;Replacement.role" title="=&gt; akka.remote.testconductor.RoleName">role</a><span class="delimiter">)</span>.<a href="../../../akka-actor/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.toString" title="=&gt; String">toString</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Seq[MultiNodeSpec.this.Replacement]" id="akka.remote.testkit;MultiNodeSpec.replacements">replacements</a> = <a href="#akka.remote.testkit;MultiNodeSpec.roles" title="=&gt; scala.collection.immutable.Seq[akka.remote.testconductor.RoleName]">roles</a> <span title="(f: akka.remote.testconductor.RoleName =&gt; MultiNodeSpec.this.Replacement)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[akka.remote.testconductor.RoleName],MultiNodeSpec.this.Replacement,scala.collection.immutable.Seq[MultiNodeSpec.this.Replacement]])scala.collection.immutable.Seq[MultiNodeSpec.this.Replacement]">map</span> <span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeSpec.replacements.$anonfun.r">r</a> ⇒ <a href="#akka.remote.testkit;MultiNodeSpec.Replacement.readResolve" title="(tag: String, role: akka.remote.testconductor.RoleName)MultiNodeSpec.this.Replacement">Replacement</a><span class="delimiter">(</span><span title="String(&quot;@&quot;)" class="string">&quot;@&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit;MultiNodeSpec.replacements.$anonfun.r" title="akka.remote.testconductor.RoleName">r</a>.<a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;@&quot;)" class="string">&quot;@&quot;</span>, <a href="#akka.remote.testkit;MultiNodeSpec.replacements.$anonfun.r" title="akka.remote.testconductor.RoleName">r</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sys: akka.actor.ActorSystem, role: akka.remote.testconductor.RoleName)Unit" id="akka.remote.testkit;MultiNodeSpec.injectDeployments">injectDeployments</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.sys">sys</a>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.role">role</a>: <a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Deployer" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.deployer">deployer</a> = <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.sys" title="akka.actor.ActorSystem">sys</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ExtendedActorSystem" class="delimiter">[</span><a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">]</span>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.deployer" title="=&gt; akka.actor.Deployer">deployer</a>
    <a href="#akka.remote.testkit;MultiNodeSpec.deployments" title="(v1: akka.remote.testconductor.RoleName)Seq[String]">deployments</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.role" title="akka.remote.testconductor.RoleName">role</a><span class="delimiter">)</span> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.str">str</a> ⇒
      <span class="keyword">val</span> <a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString">deployString</a> = <span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.str" title="String">str</a> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.x$16" title="(z: String)(op: (String, MultiNodeSpec.this.Replacement) =&gt; String)String">/:</a> <a href="#akka.remote.testkit;MultiNodeSpec.replacements" title="=&gt; scala.collection.immutable.Seq[MultiNodeSpec.this.Replacement]">replacements</a><span class="delimiter">)</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.x0$1" title="String" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.base">base</a>, <a title="MultiNodeSpec.this.Replacement" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.r">r</a> @ Replacement<span class="delimiter">(</span><a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.tag">tag</a>, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.base" title="String">base</a>.<span title="(x$1: String)Int">indexOf</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.tag" title="String">tag</a><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span> ⇒ <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.base" title="String">base</a>
            <span class="keyword">case</span> <a title="Int" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.start">start</a> ⇒
              <span class="keyword">val</span> <a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith">replaceWith</a> = <span class="keyword">try</span>
                <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.r" title="MultiNodeSpec.this.Replacement">r</a>.<a href="#akka.remote.testkit;MultiNodeSpec;Replacement.addr" title="=&gt; String">addr</a>
              <span class="keyword">catch</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.e">e</a><span class="delimiter">)</span> ⇒
                  <span class="comment">// might happen if all test cases are ignored (excluded) and</span>
                  <span class="comment">// controller node is finished/exited before r.addr is run</span>
                  <span class="comment">// on the other nodes</span>
                  <span class="keyword">val</span> <a title="String" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.unresolved">unresolved</a> = <span title="String(&quot;akka://unresolved-replacement-&quot;)" class="string">&quot;akka://unresolved-replacement-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.r" title="MultiNodeSpec.this.Replacement">r</a>.<a href="#akka.remote.testkit;MultiNodeSpec;Replacement.role" title="=&gt; akka.remote.testconductor.RoleName">role</a>.<a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a>
                  <a href="#akka.remote.testkit;MultiNodeSpec.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(cc2e600322)" title="(message: String)Unit">warning</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.unresolved" title="String">unresolved</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; due to: &quot;)" class="string">&quot; due to: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
                  <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith.unresolved" title="String">unresolved</a>
              <span class="delimiter">}</span>
              <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.base" title="String">base</a>.<span title="(x$1: CharSequence, x$2: CharSequence)String">replace</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.tag" title="String">tag</a>, <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString.$anonfun.replaceWith" title="String">replaceWith</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
      <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.deployString" title="String">deployString</a><span class="delimiter">)</span>.<span title="(m: java.util.Map[String,com.typesafe.config.ConfigValue])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,com.typesafe.config.ConfigValue]]">root</span>.<span title="=&gt; scala.collection.mutable.Map[String,com.typesafe.config.ConfigValue]">asScala</span> <span title="(f: ((String, com.typesafe.config.ConfigValue)) =&gt; Unit)Unit">foreach</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.$anonfun.x0$2" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><span title="String">key</span>, <a title="com.typesafe.config.ConfigObject" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.$anonfun.value">value</a>: <span title="com.typesafe.config.ConfigObject">ConfigObject</span><span class="delimiter">)</span> ⇒ <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.deployer" title="akka.actor.Deployer">deployer</a>.<a href="../../../akka-actor/actor/Deployer.scala.html#akka.actor;Deployer.parseConfig" title="(key: String, config: com.typesafe.config.Config)Option[akka.actor.Deploy]">parseConfig</a><span class="delimiter">(</span><span title="String">key</span>, <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.$anonfun.value" title="com.typesafe.config.ConfigObject">value</a>.<span title="()com.typesafe.config.Config">toConfig</span><span class="delimiter">)</span> <span title="(f: akka.actor.Deploy =&gt; Unit)Unit">foreach</span> <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.deployer" title="akka.actor.Deployer">deployer</a>.<a href="../../../akka-actor/actor/Deployer.scala.html#akka.actor;Deployer.deploy" title="(d: akka.actor.Deploy)Unit">deploy</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><span title="String">key</span>, <a title="com.typesafe.config.ConfigValue" id="akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.$anonfun.x">x</a><span class="delimiter">)</span>                   ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;key &quot;)">key $</span><span title="String">key</span><span title="String(&quot; must map to deployment section, not simple value &quot;)"> must map to deployment section, not simple value $</span><a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments.$anonfun.$anonfun.x" title="com.typesafe.config.ConfigValue">x</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments" title="(sys: akka.actor.ActorSystem, role: akka.remote.testconductor.RoleName)Unit">injectDeployments</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a>, <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.remote.testkit;MultiNodeSpec.myAddress">myAddress</a> = <a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ExtendedActorSystem" class="delimiter">[</span><a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">]</span>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.getDefaultAddress" title="=&gt; akka.actor.Address">getDefaultAddress</a>

  <span class="comment">// useful to see which jvm is running which role, used by LogRoleReplace utility</span>
  <a href="#akka.remote.testkit;MultiNodeSpec.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.info(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Role [{}] started with address [{}]&quot;)" class="string">&quot;Role [{}] started with address [{}]&quot;</span>, <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a>.<a href="../testconductor/DataTypes.scala.html#akka.remote.testconductor;RoleName.name" title="=&gt; String">name</a>, <a href="#akka.remote.testkit;MultiNodeSpec.myAddress" title="=&gt; akka.actor.Address">myAddress</a><span class="delimiter">)</span>

  <span class="comment">/**
   * This method starts a new ActorSystem with the same configuration as the
   * previous one on the current node, including deployments. It also creates
   * a new TestConductor client and registers itself with the conductor so
   * that it is possible to use barriers etc. normally after this method has
   * been called.
   *
   * NOTICE: you MUST start a new system before trying to enter a barrier or
   * otherwise using the TestConductor after having terminated this node’s
   * system.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()akka.actor.ActorSystem" id="akka.remote.testkit;MultiNodeSpec.startNewSystem">startNewSystem</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.remote.testkit;MultiNodeSpec.startNewSystem.config">config</a> = <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;akka.remote.netty.tcp{port=&quot;)">akka.remote.netty.tcp{port=$</span><span class="delimiter">{</span><a href="#akka.remote.testkit;MultiNodeSpec.myAddress" title="=&gt; akka.actor.Address">myAddress</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.port" title="=&gt; Option[Int]">port</a>.<span title="=&gt; Int">get</span><span class="delimiter">}</span><span title="String(&quot;\\nhostname=&quot;)">\nhostname=$</span><span class="delimiter">{</span><a href="#akka.remote.testkit;MultiNodeSpec.myAddress" title="=&gt; akka.actor.Address">myAddress</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.host" title="=&gt; Option[String]">host</a>.<span title="=&gt; String">get</span><span class="delimiter">}</span><span title="String(&quot;}&quot;)" class="string">}&quot;</span><span class="delimiter">)</span>
      .<span title="(x$1: com.typesafe.config.ConfigMergeable)com.typesafe.config.Config">withFallback</span><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorSystem" id="akka.remote.testkit;MultiNodeSpec.startNewSystem.sys">sys</a> = <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem.apply(a7879b7629)" title="(name: String, config: com.typesafe.config.Config)akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">(</span><a href="../../../akka-testkit/testkit/TestKit.scala.html#akka.testkit;TestKit.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.name" title="=&gt; String">name</a>, <a href="#akka.remote.testkit;MultiNodeSpec.startNewSystem.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.injectDeployments" title="(sys: akka.actor.ActorSystem, role: akka.remote.testconductor.RoleName)Unit">injectDeployments</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.startNewSystem.sys" title="akka.actor.ActorSystem">sys</a>, <a href="#akka.remote.testkit;MultiNodeSpec.myself" title="=&gt; akka.remote.testconductor.RoleName">myself</a><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.attachConductor" title="(tc: akka.remote.testconductor.TestConductorExt)Unit">attachConductor</a><span class="delimiter">(</span><a href="../../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.testconductor.TestConductorExt">TestConductor</a><span class="delimiter">(</span><a href="#akka.remote.testkit;MultiNodeSpec.startNewSystem.sys" title="akka.actor.ActorSystem">sys</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.remote.testkit;MultiNodeSpec.startNewSystem.sys" title="akka.actor.ActorSystem">sys</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Use this to hook MultiNodeSpec into your test framework lifecycle, either by having your test extend MultiNodeSpec
 * and call these methods or by creating a trait that calls them and then mixing that trait with your test together
 * with MultiNodeSpec.
 *
 * Example trait for MultiNodeSpec with ScalaTest
 *
 * {{{
 * trait STMultiNodeSpec extends MultiNodeSpecCallbacks with WordSpecLike with MustMatchers with BeforeAndAfterAll {
 *   override def beforeAll() = multiNodeSpecBeforeAll()
 *   override def afterAll() = multiNodeSpecAfterAll()
 * }
 * }}}
 */</span>
<span class="keyword">trait</span> <a title="trait MultiNodeSpecCallbacks extends AnyRef" id="akka.remote.testkit;MultiNodeSpecCallbacks">MultiNodeSpecCallbacks</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * Call this before the start of the test run. NOT before every test case.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpecCallbacks.multiNodeSpecBeforeAll">multiNodeSpecBeforeAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Call this after the all test cases have run. NOT after every test case.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testkit;MultiNodeSpecCallbacks.multiNodeSpecAfterAll">multiNodeSpecAfterAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
