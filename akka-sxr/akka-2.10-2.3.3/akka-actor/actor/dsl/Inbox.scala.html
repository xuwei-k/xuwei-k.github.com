<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-actor/actor/dsl/Inbox.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.actor.dsl

<span class="keyword">import</span> scala.concurrent.Await
<span class="keyword">import</span> akka.actor.ActorLogging
<span class="keyword">import</span> scala.collection.immutable.TreeSet
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> akka.actor.Cancellable
<span class="keyword">import</span> akka.actor.Actor
<span class="keyword">import</span> scala.collection.mutable.Queue
<span class="keyword">import</span> akka.actor.ActorSystem
<span class="keyword">import</span> akka.actor.ActorRef
<span class="keyword">import</span> akka.util.Timeout
<span class="keyword">import</span> akka.actor.Status
<span class="keyword">import</span> java.util.concurrent.TimeoutException
<span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger
<span class="keyword">import</span> akka.pattern.ask
<span class="keyword">import</span> akka.actor.ActorDSL
<span class="keyword">import</span> akka.actor.Props

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.actor.dsl.Inbox.type" id="akka.actor.dsl.Inbox">Inbox</a> <a href="#akka.actor.dsl.Inbox" title="akka.actor.dsl.Inbox.type" class="delimiter">{</a>

  <span class="keyword">private</span> <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Query extends AnyRef" id="akka.actor.dsl.Inbox;Query">Query</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; scala.concurrent.duration.Deadline" id="akka.actor.dsl.Inbox;Query.deadline">deadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span>
    <span class="keyword">def</span> <a title="(c: akka.actor.ActorRef)akka.actor.dsl.Inbox.Query" id="akka.actor.dsl.Inbox;Query.withClient">withClient</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Query.withClient.c">c</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a>
    <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Query.client">client</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">case class</span> <a title="class Get extends AnyRef with akka.actor.dsl.Inbox.Query with Product with Serializable" id="akka.actor.dsl.Inbox.Get.readResolve">Get</a><a href="#akka.actor.dsl.Inbox.Get.readResolve" title="Product" class="delimiter">(</a><a title="scala.concurrent.duration.Deadline" id="akka.actor.dsl.Inbox;Get.deadline">deadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span>, <a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox.Get.apply$default$2">client</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(c: akka.actor.ActorRef)akka.actor.dsl.Inbox.Get" id="akka.actor.dsl.Inbox;Get.withClient">withClient</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Get.withClient.c">c</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.actor.dsl.Inbox;Get.deadline" title="scala.concurrent.duration.Deadline" id="akka.actor.dsl.Inbox;Get.withClient.x$3">copy</a><span class="delimiter">(</span>client = <a href="#akka.actor.dsl.Inbox;Get.withClient.c" title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Get.withClient.x$2">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">case class</span> <a title="class Select extends AnyRef with akka.actor.dsl.Inbox.Query with Product with Serializable" id="akka.actor.dsl.Inbox.Select.readResolve">Select</a><a href="#akka.actor.dsl.Inbox.Select.readResolve" title="Product" class="delimiter">(</a><a title="scala.concurrent.duration.Deadline" id="akka.actor.dsl.Inbox;Select.deadline">deadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span>, <a title="PartialFunction[Any,Any]" id="akka.actor.dsl.Inbox;Select.predicate">predicate</a>: <span title="PartialFunction[Any,Any]">PartialFunction</span><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>, <a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox.Select.apply$default$3">client</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(c: akka.actor.ActorRef)akka.actor.dsl.Inbox.Select" id="akka.actor.dsl.Inbox;Select.withClient">withClient</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Select.withClient.c">c</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.actor.dsl.Inbox;Select.deadline" title="scala.concurrent.duration.Deadline" id="akka.actor.dsl.Inbox;Select.withClient.x$6">copy</a><span class="delimiter">(</span>client = <a href="#akka.actor.dsl.Inbox;Select.withClient.c" title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;Select.withClient.x$4">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">case class</span> <a title="class StartWatch extends AnyRef with Product with Serializable" id="akka.actor.dsl.Inbox.StartWatch.readResolve">StartWatch</a><a href="#akka.actor.dsl.Inbox.StartWatch.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.actor.dsl.Inbox;StartWatch.target">target</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">case object</span> <a href="#akka.actor.dsl.Inbox.Kick.productElement.x$1" title="akka.actor.dsl.Inbox.Kick.type" id="akka.actor.dsl.Inbox.Kick.readResolve">Kick</a>

<a href="#akka.actor.dsl.Inbox.Kick.readResolve" title="akka.actor.dsl.Inbox.Kick.type" class="delimiter">}</a>

<span title="AnyRef" class="keyword">trait</span> <a title="trait Inbox extends AnyRef" id="akka.actor.dsl;Inbox">Inbox</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: ActorDSL.<span class="keyword">type</span> ⇒

  <span class="keyword">import</span> <a href="#akka.actor.dsl.Inbox" title="akka.actor.dsl.Inbox.type">Inbox</a>._

  <span class="keyword">protected</span> <span class="keyword">trait</span> <a title="trait InboxExtension extends AnyRef" id="akka.actor.dsl;Inbox;InboxExtension">InboxExtension</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: Extension ⇒
    <span class="keyword">val</span> <a title="Int" id="akka.actor.dsl;Inbox;InboxExtension.DSLInboxQueueSize">DSLInboxQueueSize</a> = <a href="../ActorDSL.scala.html#akka.actor.ActorDSL;Extension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;inbox-size&quot;)" class="string">&quot;inbox-size&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicInteger" id="akka.actor.dsl;Inbox;InboxExtension.inboxNr">inboxNr</a> = <span title="()java.util.concurrent.atomic.AtomicInteger" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicInteger">AtomicInteger</span>
    <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.actor.dsl;Inbox;InboxExtension.inboxProps">inboxProps</a> = <a href="../Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[Inbox.this.InboxActor](classOf[akka.actor.dsl.Inbox$InboxActor])" class="delimiter">[</span>InboxActor<span class="delimiter">]</span>, <a href="../ActorDSL.scala.html#akka.actor.ActorDSL" title="akka.actor.ActorDSL.type">ActorDSL</a>, <a href="#akka.actor.dsl;Inbox;InboxExtension.DSLInboxQueueSize" title="=&gt; Int">DSLInboxQueueSize</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.actor.dsl;Inbox;InboxExtension.newReceiver">newReceiver</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../ActorDSL.scala.html#akka.actor.ActorDSL;Extension.mkChild" title="(p: akka.actor.Props, name: String)akka.actor.ActorRef">mkChild</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxExtension.inboxProps" title="=&gt; akka.actor.Props">inboxProps</a>, <span title="String(&quot;inbox-&quot;)" class="string">&quot;inbox-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.dsl;Inbox;InboxExtension.inboxNr" title="=&gt; java.util.concurrent.atomic.AtomicInteger">inboxNr</a>.<span title="()Int">incrementAndGet</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="Ordering[akka.actor.dsl.Inbox.Query]" id="akka.actor.dsl;Inbox.deadlineOrder">deadlineOrder</a>: <span title="Ordering[akka.actor.dsl.Inbox.Query]">Ordering</span><span class="delimiter">[</span>Query<span class="delimiter">]</span> = <a href="#akka.actor.dsl;Inbox.deadlineOrder;$anon" title="Ordering[akka.actor.dsl.Inbox.Query]" class="keyword">new</a> <a title="anonymous class $anon extends Object with Ordering[akka.actor.dsl.Inbox.Query]" id="akka.actor.dsl;Inbox.deadlineOrder;$anon">Ordering</a><span class="delimiter">[</span>Query<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(left: akka.actor.dsl.Inbox.Query, right: akka.actor.dsl.Inbox.Query)Int" id="akka.actor.dsl;Inbox.deadlineOrder;$anon.compare">compare</a><span class="delimiter">(</span><a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox.deadlineOrder;$anon.compare.left">left</a>: <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a>, <a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox.deadlineOrder;$anon.compare.right">right</a>: <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#akka.actor.dsl;Inbox.deadlineOrder;$anon.compare.left" title="akka.actor.dsl.Inbox.Query">left</a>.<a href="#akka.actor.dsl.Inbox;Query.deadline" title="=&gt; scala.concurrent.duration.Deadline">deadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">time</span> <span title="(other: scala.concurrent.duration.Duration)Int">compare</span> <a href="#akka.actor.dsl;Inbox.deadlineOrder;$anon.compare.right" title="akka.actor.dsl.Inbox.Query">right</a>.<a href="#akka.actor.dsl.Inbox;Query.deadline" title="=&gt; scala.concurrent.duration.Deadline">deadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">time</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class InboxActor extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.actor.dsl;Inbox;InboxActor">InboxActor</a><a href="#akka.actor.dsl;Inbox;InboxActor" title="Inbox.this.InboxActor" class="delimiter">(</a><a title="Int" id="akka.actor.dsl;Inbox;InboxActor.size">size</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]" id="akka.actor.dsl;Inbox;InboxActor.clients_=">clients</a> = <span title="scala.collection.mutable.Queue.type">Queue</span>.<span title="[A]=&gt; scala.collection.mutable.Queue[A]">empty</span><span title="scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]" class="delimiter">[</span><a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Queue[Any]" id="akka.actor.dsl;Inbox;InboxActor.messages">messages</a> = <span title="scala.collection.mutable.Queue.type">Queue</span>.<span title="[A]=&gt; scala.collection.mutable.Queue[A]">empty</span><span title="scala.collection.mutable.Queue[Any]" class="delimiter">[</span><span title="Any">Any</span><span class="delimiter">]</span>
    <span class="keyword">var</span> <a title="scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]" id="akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=">clientsByTimeout</a> = <span title="scala.collection.immutable.TreeSet.type">TreeSet</span>.<span title="[A](implicit ordering: Ordering[A])scala.collection.immutable.TreeSet[A]">empty</span><a href="#akka.actor.dsl;Inbox.deadlineOrder" title="(implicit ordering: Ordering[akka.actor.dsl.Inbox.Query])scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]" class="delimiter">[</a><a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a><span class="delimiter">]</span>
    <span class="keyword">var</span> <a title="Boolean" id="akka.actor.dsl;Inbox;InboxActor.printedWarning_=">printedWarning</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">def</span> <a title="(q: akka.actor.dsl.Inbox.Query)Unit" id="akka.actor.dsl;Inbox;InboxActor.enqueueQuery">enqueueQuery</a><span class="delimiter">(</span><a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox;InboxActor.enqueueQuery.q">q</a>: <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox;InboxActor.enqueueQuery.query">query</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery.q" title="akka.actor.dsl.Inbox.Query">q</a> <a href="#akka.actor.dsl.Inbox;Query.withClient" title="(c: akka.actor.ActorRef)akka.actor.dsl.Inbox.Query">withClient</a> <a href="../Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">clients</a> <span title="(elems: akka.actor.dsl.Inbox.Query*)Unit">enqueue</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery.query" title="akka.actor.dsl.Inbox.Query">query</a>
      <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="(x$1: scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query])Unit">clientsByTimeout</a> <span title="(elem: akka.actor.dsl.Inbox.Query)scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">+=</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery.query" title="akka.actor.dsl.Inbox.Query">query</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(msg: Any)Unit" id="akka.actor.dsl;Inbox;InboxActor.enqueueMessage">enqueueMessage</a><span class="delimiter">(</span><a title="Any" id="akka.actor.dsl;Inbox;InboxActor.enqueueMessage.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.actor.dsl;Inbox;InboxActor.size" title="Int">size</a><span class="delimiter">)</span> <a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a> <span title="(elems: Any*)Unit">enqueue</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueMessage.msg" title="Any">msg</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.dsl;Inbox;InboxActor.printedWarning_=" title="=&gt; Boolean">printedWarning</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../event/Logging.scala.html#akka.event;LoggingAdapter.warning(cc2e600322)" title="(message: String)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;dropping message: either your program is buggy or you might want to increase akka.actor.dsl.inbox-size, current value is &quot;)" class="string">&quot;dropping message: either your program is buggy or you might want to increase akka.actor.dsl.inbox-size, current value is &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.dsl;Inbox;InboxActor.size" title="Int">size</a><span class="delimiter">)</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.printedWarning_=" title="(x$1: Boolean)Unit">printedWarning</a> = <span title="Boolean(true)" class="keyword">true</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="Any" id="akka.actor.dsl;Inbox;InboxActor.currentMsg_=">currentMsg</a>: <span title="Any">Any</span> = _
    <span class="keyword">val</span> <a title="akka.actor.dsl.Inbox.Query =&gt; Boolean" id="akka.actor.dsl;Inbox;InboxActor.clientPredicate">clientPredicate</a>: <span class="delimiter">(</span>Query<span class="delimiter">)</span> ⇒ Boolean = <a href="#akka.actor.dsl;Inbox;InboxActor.clientPredicate.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> _: <a href="#akka.actor.dsl.Inbox.Get.readResolve" title="akka.actor.dsl.Inbox.Get">Get</a>          ⇒ <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> Select<span class="delimiter">(</span>_, <a title="PartialFunction[Any,Any]" id="akka.actor.dsl;Inbox;InboxActor.clientPredicate.$anonfun.p">p</a>, _<span class="delimiter">)</span> ⇒ <a href="#akka.actor.dsl;Inbox;InboxActor.clientPredicate.$anonfun.p" title="PartialFunction[Any,Any]">p</a> <span title="(x: Any)Boolean">isDefinedAt</span> <a href="#akka.actor.dsl;Inbox;InboxActor.currentMsg_=" title="=&gt; Any">currentMsg</a>
      <span class="keyword">case</span> _               ⇒ <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>

    <span class="keyword">var</span> <a title="akka.actor.dsl.Inbox.Select" id="akka.actor.dsl;Inbox;InboxActor.currentSelect_=">currentSelect</a>: <a href="#akka.actor.dsl.Inbox.Select.readResolve" title="akka.actor.dsl.Inbox.Select">Select</a> = _
    <span class="keyword">val</span> <a title="Any =&gt; Boolean" id="akka.actor.dsl;Inbox;InboxActor.messagePredicate">messagePredicate</a>: <span class="delimiter">(</span>Any ⇒ Boolean<span class="delimiter">)</span> = <span class="delimiter">(</span><a title="Any" id="akka.actor.dsl;Inbox;InboxActor.messagePredicate.$anonfun.msg">msg</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dsl;Inbox;InboxActor.currentSelect_=" title="=&gt; akka.actor.dsl.Inbox.Select">currentSelect</a>.<a href="#akka.actor.dsl.Inbox;Select.predicate" title="=&gt; PartialFunction[Any,Any]">predicate</a>.<span title="(x: Any)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.messagePredicate.$anonfun.msg" title="Any">msg</a><span class="delimiter">)</span>

    <span class="keyword">var</span> <a title="Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]" id="akka.actor.dsl;Inbox;InboxActor.currentDeadline_=">currentDeadline</a>: <span title="Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Deadline, Cancellable<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="None.type">None</span>

    <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.actor.dsl;Inbox;InboxActor.receive">receive</a> = <span class="delimiter">(</span><a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="akka.actor.dsl.Inbox.Get" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.g">g</a>: <a href="#akka.actor.dsl.Inbox.Get.readResolve" title="akka.actor.dsl.Inbox.Get">Get</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery" title="(q: akka.actor.dsl.Inbox.Query)Unit">enqueueQuery</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.g" title="akka.actor.dsl.Inbox.Get">g</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="../Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a>.<span title="()Any">dequeue</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.actor.dsl.Inbox.Select" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.s">s</a> @ Select<span class="delimiter">(</span>_, <a title="PartialFunction[Any,Any]" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.predicate">predicate</a>, _<span class="delimiter">)</span> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery" title="(q: akka.actor.dsl.Inbox.Query)Unit">enqueueQuery</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.s" title="akka.actor.dsl.Inbox.Select">s</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentSelect_=" title="(x$1: akka.actor.dsl.Inbox.Select)Unit">currentSelect</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.s" title="akka.actor.dsl.Inbox.Select">s</a>
          <a href="#akka.actor.dsl;Inbox;InboxActor.messages" title="=&gt; scala.collection.mutable.Queue[Any]">messages</a>.<span title="(p: Any =&gt; Boolean)Option[Any]">dequeueFirst</span><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.messagePredicate" title="=&gt; Any =&gt; Boolean">messagePredicate</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span> ⇒ <a href="../Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="Any">msg</span>
            <span class="keyword">case</span> <span title="None.type">None</span>      ⇒ <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueQuery" title="(q: akka.actor.dsl.Inbox.Query)Unit">enqueueQuery</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.s" title="akka.actor.dsl.Inbox.Select">s</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentSelect_=" title="(x$1: akka.actor.dsl.Inbox.Select)Unit">currentSelect</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> StartWatch<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.target">target</a><span class="delimiter">)</span> ⇒ <a href="../Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a> <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.target" title="akka.actor.ActorRef">target</a>
      <span class="keyword">case</span> <a href="#akka.actor.dsl.Inbox.Kick.readResolve" title="akka.actor.dsl.Inbox.Kick.type">Kick</a> ⇒
        <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.now">now</a> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span>
        <span class="keyword">val</span> <a title="akka.actor.dsl.Inbox.Query =&gt; Boolean" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.pred">pred</a> = <span class="delimiter">(</span>q: <a href="#akka.actor.dsl.Inbox;Query" title="akka.actor.dsl.Inbox.Query">Query</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.pred.$anonfun.q" title="akka.actor.dsl.Inbox.Query">q</a>.<a href="#akka.actor.dsl.Inbox;Query.deadline" title="=&gt; scala.concurrent.duration.Deadline">deadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">time</span> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;</span> <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.now" title="scala.concurrent.duration.Deadline">now</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">time</span>
        <span class="keyword">val</span> <a title="Iterator[akka.actor.dsl.Inbox.Query]" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.overdue">overdue</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">clientsByTimeout</a>.<span title="=&gt; Iterator[akka.actor.dsl.Inbox.Query]">iterator</span>.<span title="(p: akka.actor.dsl.Inbox.Query =&gt; Boolean)Iterator[akka.actor.dsl.Inbox.Query]">takeWhile</span><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.pred" title="akka.actor.dsl.Inbox.Query =&gt; Boolean">pred</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.overdue" title="Iterator[akka.actor.dsl.Inbox.Query]">overdue</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.while$1" title="()Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.toKick">toKick</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.overdue" title="Iterator[akka.actor.dsl.Inbox.Query]">overdue</a>.<span title="()akka.actor.dsl.Inbox.Query">next</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.toKick" title="akka.actor.dsl.Inbox.Query">toKick</a>.<a href="../package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">client</a> <a href="../ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="(x$1: String)java.util.concurrent.TimeoutException" class="keyword">new</span> <span title="java.util.concurrent.TimeoutException">TimeoutException</span><span class="delimiter">(</span><span title="String(&quot;deadline passed&quot;)" class="string">&quot;deadline passed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="comment">// TODO: this wants to lose the `Queue.empty ++=` part when SI-6208 is fixed</span>
        <a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="(x$1: scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query])Unit">clients</a> = <span title="scala.collection.mutable.Queue.type">Queue</span>.<span title="scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">empty</span> <span title="(xs: scala.collection.TraversableOnce[akka.actor.dsl.Inbox.Query])scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">++=</span> <a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">clients</a>.<span title="(p: akka.actor.dsl.Inbox.Query =&gt; Boolean)scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">filterNot</span><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.pred" title="akka.actor.dsl.Inbox.Query =&gt; Boolean">pred</a><span class="delimiter">)</span>
        <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="(x$1: scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query])Unit">clientsByTimeout</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">clientsByTimeout</a>.<span title="(from: akka.actor.dsl.Inbox.Query)scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">from</span><span class="delimiter">(</span><a href="#akka.actor.dsl.Inbox.Get.readResolve" title="(deadline: scala.concurrent.duration.Deadline, client: akka.actor.ActorRef)akka.actor.dsl.Inbox.Get">Get</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.now" title="scala.concurrent.duration.Deadline">now</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Any" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.isDefinedAt.msg">msg</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">clients</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueMessage" title="(msg: Any)Unit">enqueueMessage</a><span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentMsg_=" title="(x$1: Any)Unit">currentMsg</a> = <span title="Any">msg</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">clients</a>.<span title="(p: akka.actor.dsl.Inbox.Query =&gt; Boolean)Option[akka.actor.dsl.Inbox.Query]">dequeueFirst</span><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.clientPredicate" title="=&gt; akka.actor.dsl.Inbox.Query =&gt; Boolean">clientPredicate</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.dsl.Inbox.Query" id="akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.q">q</a><span class="delimiter">)</span> ⇒ <span class="delimiter">{</span> <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="(x$1: scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query])Unit">clientsByTimeout</a> <span title="(elem: akka.actor.dsl.Inbox.Query)scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">-=</span> <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.q" title="akka.actor.dsl.Inbox.Query">q</a>; <a href="#akka.actor.dsl;Inbox;InboxActor.receive;$anonfun.applyOrElse.q" title="akka.actor.dsl.Inbox.Query">q</a>.<a href="../package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">client</a> <a href="../ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="Any">msg</span> <span class="delimiter">}</span>
            <span class="keyword">case</span> <span title="None.type">None</span>    ⇒ <a href="#akka.actor.dsl;Inbox;InboxActor.enqueueMessage" title="(msg: Any)Unit">enqueueMessage</a><span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentMsg_=" title="(x$1: Any)Unit">currentMsg</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>: <span title="InboxActor.this.Receive">Receive</span><span class="delimiter">)</span> <span title="(k: Unit =&gt; Unit)PartialFunction[Any,Unit]">andThen</span> <span class="delimiter">{</span> <a title="Unit" id="akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.x$1">_</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.clients_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.dsl.Inbox.Query]">clients</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="=&gt; Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">currentDeadline</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="=&gt; Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">currentDeadline</a>.<span title="=&gt; (scala.concurrent.duration.Deadline, akka.actor.Cancellable)">get</span>.<span title="=&gt; akka.actor.Cancellable">_2</span>.<a href="../Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="(x$1: Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)])Unit">currentDeadline</a> = <span title="None.type">None</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.next">next</a> = <a href="#akka.actor.dsl;Inbox;InboxActor.clientsByTimeout_=" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.dsl.Inbox.Query]">clientsByTimeout</a>.<span title="=&gt; akka.actor.dsl.Inbox.Query">head</span>.<a href="#akka.actor.dsl.Inbox;Query.deadline" title="=&gt; scala.concurrent.duration.Deadline">deadline</a>
        <span class="keyword">import</span> <a href="../Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="=&gt; Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">currentDeadline</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="(x$1: Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)])Unit">currentDeadline</a> = <span title="(x: (scala.concurrent.duration.Deadline, akka.actor.Cancellable))Some[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">Some</span><span class="delimiter">(</span><span title="(_1: scala.concurrent.duration.Deadline, _2: akka.actor.Cancellable)(scala.concurrent.duration.Deadline, akka.actor.Cancellable)" class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.next" title="scala.concurrent.duration.Deadline">next</a>, <a href="../Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.next" title="scala.concurrent.duration.Deadline">next</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span>, <a href="../Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.actor.dsl.Inbox.Kick.readResolve" title="akka.actor.dsl.Inbox.Kick.type">Kick</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="comment">// must not rely on the Scheduler to not fire early (for robustness)</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="=&gt; Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">currentDeadline</a>.<span title="=&gt; (scala.concurrent.duration.Deadline, akka.actor.Cancellable)">get</span>.<span title="=&gt; akka.actor.Cancellable">_2</span>.<a href="../Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.actor.dsl;Inbox;InboxActor.currentDeadline_=" title="(x$1: Option[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)])Unit">currentDeadline</a> = <span title="(x: (scala.concurrent.duration.Deadline, akka.actor.Cancellable))Some[(scala.concurrent.duration.Deadline, akka.actor.Cancellable)]">Some</span><span class="delimiter">(</span><span title="(_1: scala.concurrent.duration.Deadline, _2: akka.actor.Cancellable)(scala.concurrent.duration.Deadline, akka.actor.Cancellable)" class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.next" title="scala.concurrent.duration.Deadline">next</a>, <a href="../Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.actor.dsl;Inbox;InboxActor.receive.$anonfun.next" title="scala.concurrent.duration.Deadline">next</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span>, <a href="../Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.actor.dsl.Inbox.Kick.readResolve" title="akka.actor.dsl.Inbox.Kick.type">Kick</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
   * make sure that AskTimeout does not accidentally mess up message reception
   * by adding this extra time to the real timeout
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.actor.dsl;Inbox.extraTime">extraTime</a> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">minute</span>

  <span class="comment">/**
   * Create a new actor which will internally queue up messages it gets so that
   * they can be interrogated with the [[akka.actor.dsl.Inbox!.Inbox!.receive]]
   * and [[akka.actor.dsl.Inbox!.Inbox!.select]] methods. It will be created as
   * a system actor in the ActorSystem which is implicitly (or explicitly)
   * supplied.
   */</span>
  <span class="keyword">def</span> <a title="()(implicit system: akka.actor.ActorSystem)Inbox.this.Inbox" id="akka.actor.dsl;Inbox.inbox">inbox</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorSystem" id="akka.actor.dsl;Inbox.inbox.system">system</a>: <a href="../ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.actor.dsl;Inbox;Inbox" title="Inbox.this.Inbox">Inbox</a> = <span title="Inbox.this.Inbox" class="keyword">new</span> <a href="#akka.actor.dsl;Inbox;Inbox" title="Inbox.this.Inbox">Inbox</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox.inbox.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class Inbox extends akka.actor.Inbox" id="akka.actor.dsl;Inbox;Inbox">Inbox</a><a href="#akka.actor.dsl;Inbox;Inbox" title="Inbox.this.Inbox" class="delimiter">(</a><a title="akka.actor.ActorSystem" id="akka.actor.dsl;Inbox;Inbox.system">system</a>: <a href="../ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span> <span class="keyword">extends</span> akka.actor.<a href="../ActorDSL.scala.html#akka.actor;Inbox" title="akka.actor.Inbox">Inbox</a> <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.actor.dsl;Inbox;Inbox.receiver">receiver</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)Inbox.this.Extension">Extension</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="#akka.actor.dsl;Inbox;InboxExtension.newReceiver" title="=&gt; akka.actor.ActorRef">newReceiver</a>

    <span class="comment">// Java API</span>
    <span class="keyword">def</span> <a title="()akka.actor.ActorRef" id="akka.actor.dsl;Inbox;Inbox.getRef">getRef</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.actor.dsl;Inbox;Inbox.receiver" title="=&gt; akka.actor.ActorRef">receiver</a>
    <span class="keyword">def</span> <a title="(target: akka.actor.ActorRef, msg: AnyRef)Unit" id="akka.actor.dsl;Inbox;Inbox.send">send</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl;Inbox;Inbox.send.target">target</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="AnyRef" id="akka.actor.dsl;Inbox;Inbox.send.msg">msg</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.dsl;Inbox;Inbox.send.target" title="akka.actor.ActorRef">target</a>.<a href="../ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.send.msg" title="AnyRef">msg</a>, <a href="#akka.actor.dsl;Inbox;Inbox.receiver" title="=&gt; akka.actor.ActorRef">receiver</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.actor.dsl;Inbox;Inbox.defaultTimeout">defaultTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="../Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)Inbox.this.Extension">Extension</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="../ActorDSL.scala.html#akka.actor.ActorDSL;Extension.DSLDefaultTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">DSLDefaultTimeout</a>

    <span class="comment">/**
     * Receive a single message from the internal `receiver` actor. The supplied
     * timeout is used for cleanup purposes and its precision is subject to the
     * resolution of the system’s scheduler (usually 100ms, but configurable).
     *
     * &lt;b&gt;Warning:&lt;/b&gt; This method blocks the current thread until a message is
     * received, thus it can introduce dead-locks (directly as well as
     * indirectly by causing starvation of the thread pool). &lt;b&gt;Do not use
     * this method within an actor!&lt;/b&gt;
     */</span>
    <span class="keyword">def</span> <a title="(timeout: scala.concurrent.duration.FiniteDuration)Any" id="akka.actor.dsl;Inbox;Inbox.receive">receive</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.actor.dsl;Inbox;Inbox.receive$default$1">timeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.actor.dsl;Inbox;Inbox.defaultTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">defaultTimeout</a><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
      <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="akka.util.Timeout" id="akka.actor.dsl;Inbox;Inbox.receive.t">t</a> = <a href="../../util/Timeout.scala.html#akka.util;Timeout" title="(duration: scala.concurrent.duration.FiniteDuration)akka.util.Timeout">Timeout</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.receive$default$1" title="scala.concurrent.duration.FiniteDuration">timeout</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">+</span> <a href="#akka.actor.dsl;Inbox.extraTime" title="=&gt; scala.concurrent.duration.FiniteDuration">extraTime</a><span class="delimiter">)</span>
      <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[Any], atMost: scala.concurrent.duration.Duration)Any">result</span><span class="delimiter">(</span><a href="../../pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">receiver</a> <a href="../../pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.actor.dsl.Inbox.Get.readResolve" title="(deadline: scala.concurrent.duration.Deadline, client: akka.actor.ActorRef)akka.actor.dsl.Inbox.Get">Get</a><span class="delimiter">(</span><span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.actor.dsl;Inbox;Inbox.receive$default$1" title="scala.concurrent.duration.FiniteDuration">timeout</a><span class="delimiter">)</span>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Receive a single message for which the given partial function is defined
     * and return the transformed result, using the internal `receiver` actor.
     * The supplied timeout is used for cleanup purposes and its precision is
     * subject to the resolution of the system’s scheduler (usually 100ms, but
     * configurable).
     *
     * &lt;b&gt;Warning:&lt;/b&gt; This method blocks the current thread until a message is
     * received, thus it can introduce dead-locks (directly as well as
     * indirectly by causing starvation of the thread pool). &lt;b&gt;Do not use
     * this method within an actor!&lt;/b&gt;
     */</span>
    <span class="keyword">def</span> <a title="[T](timeout: scala.concurrent.duration.FiniteDuration)(predicate: PartialFunction[Any,T])T" id="akka.actor.dsl;Inbox;Inbox.select">select</a><span class="delimiter">[</span><a title="" id="akka.actor.dsl;Inbox;Inbox.select$default$1;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.actor.dsl;Inbox;Inbox.select$default$1">timeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.actor.dsl;Inbox;Inbox.defaultTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">defaultTimeout</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,T]" id="akka.actor.dsl;Inbox;Inbox.select.predicate">predicate</a>: <span title="PartialFunction[Any,T]">PartialFunction</span><span class="delimiter">[</span>Any, T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.actor.dsl;Inbox;Inbox.select$default$1;T" title="T">T</a> = <span class="delimiter">{</span>
      <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="akka.util.Timeout" id="akka.actor.dsl;Inbox;Inbox.select.t">t</a> = <a href="../../util/Timeout.scala.html#akka.util;Timeout" title="(duration: scala.concurrent.duration.FiniteDuration)akka.util.Timeout">Timeout</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.select$default$1" title="scala.concurrent.duration.FiniteDuration">timeout</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">+</span> <a href="#akka.actor.dsl;Inbox.extraTime" title="=&gt; scala.concurrent.duration.FiniteDuration">extraTime</a><span class="delimiter">)</span>
      <a href="#akka.actor.dsl;Inbox;Inbox.select.predicate" title="(v1: Any)T">predicate</a><span class="delimiter">(</span><span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[Any], atMost: scala.concurrent.duration.Duration)Any">result</span><span class="delimiter">(</span><a href="../../pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">receiver</a> <a href="../../pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.actor.dsl.Inbox.Select.readResolve" title="(deadline: scala.concurrent.duration.Deadline, predicate: PartialFunction[Any,Any], client: akka.actor.ActorRef)akka.actor.dsl.Inbox.Select">Select</a><span class="delimiter">(</span><span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.actor.dsl;Inbox;Inbox.select$default$1" title="scala.concurrent.duration.FiniteDuration">timeout</a>, <a href="#akka.actor.dsl;Inbox;Inbox.select.predicate" title="PartialFunction[Any,T]">predicate</a><span class="delimiter">)</span>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Make the inbox’s actor watch the target actor such that reception of the
     * Terminated message can then be awaited.
     */</span>
    <span class="keyword">def</span> <a title="(target: akka.actor.ActorRef)Unit" id="akka.actor.dsl;Inbox;Inbox.watch">watch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dsl;Inbox;Inbox.watch.target">target</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.actor.dsl;Inbox;Inbox.watch.qual$1">receiver</a> <a href="../ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.actor.dsl;Inbox;Inbox.watch.x$8">!</a> <a href="#akka.actor.dsl.Inbox.StartWatch.readResolve" title="(target: akka.actor.ActorRef)akka.actor.dsl.Inbox.StartWatch">StartWatch</a><a title="akka.actor.dsl.Inbox.StartWatch" id="akka.actor.dsl;Inbox;Inbox.watch.x$7" class="delimiter">(</a><a href="#akka.actor.dsl;Inbox;Inbox.watch.target" title="akka.actor.ActorRef">target</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Overridden finalizer which will try to stop the actor once this Inbox
     * is no longer referenced.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.actor.dsl;Inbox;Inbox.finalize">finalize</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.actor.dsl;Inbox;Inbox.system" title="akka.actor.ActorSystem">system</a>.<a href="../ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="#akka.actor.dsl;Inbox;Inbox.receiver" title="=&gt; akka.actor.ActorRef">receiver</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit akka.actor.dsl.Inbox.senderFromInbox : (implicit inbox: Inbox.this.Inbox)akka.actor.ActorRef" id="akka.actor.dsl;Inbox.senderFromInbox">senderFromInbox</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Inbox.this.Inbox" id="akka.actor.dsl;Inbox.senderFromInbox.inbox">inbox</a>: <a href="#akka.actor.dsl;Inbox;Inbox" title="Inbox.this.Inbox">Inbox</a><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.actor.dsl;Inbox.senderFromInbox.inbox" title="Inbox.this.Inbox">inbox</a>.<a href="#akka.actor.dsl;Inbox;Inbox.receiver" title="=&gt; akka.actor.ActorRef">receiver</a>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
