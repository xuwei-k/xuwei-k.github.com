<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-actor/actor/dungeon/Children.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.actor.dungeon

<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.actor.<a href="../ActorPath.scala.html#akka.actor.ActorPath" title="akka.actor.ActorPath.type">ActorPath</a>.ElementRegex
<span class="keyword">import</span> akka.serialization.SerializationExtension
<span class="keyword">import</span> akka.util.<span class="delimiter">{</span> Unsafe, Helpers <span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait Children extends AnyRef" id="akka.actor.dungeon;Children">Children</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: ActorCell ⇒

  <span class="keyword">import</span> <a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.type">ChildrenContainer</a>._

  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children._childrenRefsDoNotCallMeDirectly_=">_childrenRefsDoNotCallMeDirectly</a>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a> = <a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer.EmptyChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.EmptyChildrenContainer.type">EmptyChildrenContainer</a>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.childrenRefs">childrenRefs</a>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a> =
    <a href="../../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long)Object">getObjectVolatile</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <span title="akka.actor.dungeon.AbstractActorCell.type">AbstractActorCell</span>.<span title="Long">childrenOffset</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.dungeon.ChildrenContainer" class="delimiter">[</span><a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a><span class="delimiter">]</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]" id="akka.actor.dungeon;Children.children">children</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.children" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]">children</a>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Iterable[akka.actor.ActorRef]" id="akka.actor.dungeon;Children.getChildren">getChildren</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.lang.<span title="Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> =
    scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(i: Iterable[akka.actor.ActorRef])scala.collection.convert.Decorators.AsJava[Iterable[akka.actor.ActorRef]]">asJavaIterableConverter</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.children" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]">children</a><span class="delimiter">)</span>.<span title="=&gt; Iterable[akka.actor.ActorRef]">asJava</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(name: String)Option[akka.actor.ActorRef]" id="akka.actor.dungeon;Children.child">child</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.child.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span title="(x: akka.actor.ActorRef)Option[akka.actor.ActorRef]">Option</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getChild" title="(name: String)akka.actor.ActorRef">getChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.child.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(name: String)akka.actor.ActorRef" id="akka.actor.dungeon;Children.getChild">getChild</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.getChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.getByName" title="(name: String)Option[akka.actor.ChildStats]">getByName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getChild.name" title="String">name</a><span class="delimiter">)</span> <span title="akka.actor.ActorRef" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ChildRestartStats" id="akka.actor.dungeon;Children.getChild.s">s</a>: <a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats" title="akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dungeon;Children.getChild.s" title="akka.actor.ChildRestartStats">s</a>.<a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats.child" title="=&gt; akka.actor.ActorRef">child</a>
    <span class="keyword">case</span> _                          ⇒ <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(props: akka.actor.Props)akka.actor.ActorRef" id="akka.actor.dungeon;Children.actorOf(59f1e43182)">actorOf</a><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.actor.dungeon;Children.actorOf(59f1e43182).props">props</a>: <a href="../Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> =
    <a href="#akka.actor.dungeon;Children.makeChild" title="(cell: akka.actor.ActorCell, props: akka.actor.Props, name: String, async: Boolean, systemService: Boolean)akka.actor.ActorRef">makeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <a href="#akka.actor.dungeon;Children.actorOf(59f1e43182).props" title="akka.actor.Props">props</a>, <a href="#akka.actor.dungeon;Children.randomName" title="()String">randomName</a><span class="delimiter">(</span><span class="delimiter">)</span>, async = <span title="Boolean(false)" class="keyword">false</span>, systemService = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(props: akka.actor.Props, name: String)akka.actor.ActorRef" id="akka.actor.dungeon;Children.actorOf(874c98419a)">actorOf</a><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.actor.dungeon;Children.actorOf(874c98419a).props">props</a>: <a href="../Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="String" id="akka.actor.dungeon;Children.actorOf(874c98419a).name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> =
    <a href="#akka.actor.dungeon;Children.makeChild" title="(cell: akka.actor.ActorCell, props: akka.actor.Props, name: String, async: Boolean, systemService: Boolean)akka.actor.ActorRef">makeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <a href="#akka.actor.dungeon;Children.actorOf(874c98419a).props" title="akka.actor.Props">props</a>, <a href="#akka.actor.dungeon;Children.checkName" title="(name: String)String">checkName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.actorOf(874c98419a).name" title="String">name</a><span class="delimiter">)</span>, async = <span title="Boolean(false)" class="keyword">false</span>, systemService = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(props: akka.actor.Props, systemService: Boolean)akka.actor.ActorRef" id="akka.actor.dungeon;Children.attachChild(78acc2cc6f)">attachChild</a><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.actor.dungeon;Children.attachChild(78acc2cc6f).props">props</a>: <a href="../Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="Boolean" id="akka.actor.dungeon;Children.attachChild(78acc2cc6f).systemService">systemService</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> =
    <a href="#akka.actor.dungeon;Children.makeChild" title="(cell: akka.actor.ActorCell, props: akka.actor.Props, name: String, async: Boolean, systemService: Boolean)akka.actor.ActorRef">makeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <a href="#akka.actor.dungeon;Children.attachChild(78acc2cc6f).props" title="akka.actor.Props">props</a>, <a href="#akka.actor.dungeon;Children.randomName" title="()String">randomName</a><span class="delimiter">(</span><span class="delimiter">)</span>, async = <span title="Boolean(true)" class="keyword">true</span>, systemService = <a href="#akka.actor.dungeon;Children.attachChild(78acc2cc6f).systemService" title="Boolean">systemService</a><span class="delimiter">)</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(props: akka.actor.Props, name: String, systemService: Boolean)akka.actor.ActorRef" id="akka.actor.dungeon;Children.attachChild(f2c4c88db4)">attachChild</a><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.actor.dungeon;Children.attachChild(f2c4c88db4).props">props</a>: <a href="../Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="String" id="akka.actor.dungeon;Children.attachChild(f2c4c88db4).name">name</a>: <span title="String">String</span>, <a title="Boolean" id="akka.actor.dungeon;Children.attachChild(f2c4c88db4).systemService">systemService</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> =
    <a href="#akka.actor.dungeon;Children.makeChild" title="(cell: akka.actor.ActorCell, props: akka.actor.Props, name: String, async: Boolean, systemService: Boolean)akka.actor.ActorRef">makeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <a href="#akka.actor.dungeon;Children.attachChild(f2c4c88db4).props" title="akka.actor.Props">props</a>, <a href="#akka.actor.dungeon;Children.checkName" title="(name: String)String">checkName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.attachChild(f2c4c88db4).name" title="String">name</a><span class="delimiter">)</span>, async = <span title="Boolean(true)" class="keyword">true</span>, systemService = <a href="#akka.actor.dungeon;Children.attachChild(f2c4c88db4).systemService" title="Boolean">systemService</a><span class="delimiter">)</span>

  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.dungeon;Children._nextNameDoNotCallMeDirectly_=">_nextNameDoNotCallMeDirectly</a> = <span title="Long(0L)" class="long">0L</span>
  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()String" id="akka.actor.dungeon;Children.randomName">randomName</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="()Long" id="akka.actor.dungeon;Children.randomName.inc">inc</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Long" id="akka.actor.dungeon;Children.randomName.inc.current">current</a> = <a href="../../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long)Long">getLongVolatile</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <span title="akka.actor.dungeon.AbstractActorCell.type">AbstractActorCell</span>.<span title="Long">nextNameOffset</span><span class="delimiter">)</span>
      <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="../../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long, x$3: Long, x$4: Long)Boolean">compareAndSwapLong</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <span title="akka.actor.dungeon.AbstractActorCell.type">AbstractActorCell</span>.<span title="Long">nextNameOffset</span>, <a href="#akka.actor.dungeon;Children.randomName.inc.current" title="Long">current</a>, <a href="#akka.actor.dungeon;Children.randomName.inc.current" title="Long">current</a> <span title="(x: Int)Long">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.dungeon;Children.randomName.inc.current" title="Long">current</a>
      <span class="keyword">else</span> <a href="#akka.actor.dungeon;Children.randomName.inc" title="()Long">inc</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="../../util/Helpers.scala.html#akka.util.Helpers" title="akka.util.Helpers.type">Helpers</a>.<a href="../../util/Helpers.scala.html#akka.util.Helpers.base64" title="(l: Long, sb: StringBuilder)String">base64</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.randomName.inc" title="()Long">inc</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(actor: akka.actor.ActorRef)Unit" id="akka.actor.dungeon;Children.stop">stop</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.stop.actor">actor</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.getByRef" title="(actor: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]">getByRef</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      @tailrec <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)Boolean" id="akka.actor.dungeon;Children.stop.shallDie">shallDie</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.stop.shallDie.ref">ref</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.stop.shallDie.c">c</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>
        <a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.shallDie.c" title="akka.actor.dungeon.ChildrenContainer">c</a>, <a href="#akka.actor.dungeon;Children.stop.shallDie.c" title="akka.actor.dungeon.ChildrenContainer">c</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.shallDie" title="(actor: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer">shallDie</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.shallDie.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.dungeon;Children.stop.shallDie" title="(ref: akka.actor.ActorRef)Boolean">shallDie</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.shallDie.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.actor" title="akka.actor.ActorRef">actor</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="actor extends akka.actor.ActorRef with akka.actor.RepointableRef" id="akka.actor.dungeon;Children.stop.r">r</a>: <a href="../ActorRef.scala.html#akka.actor;RepointableRef" title="akka.actor.RepointableRef">RepointableRef</a> ⇒ <a href="#akka.actor.dungeon;Children.stop.r" title="actor extends akka.actor.ActorRef with akka.actor.RepointableRef">r</a>.<a href="../ActorRef.scala.html#akka.actor;RepointableRef.isStarted" title="=&gt; Boolean">isStarted</a>
        <span class="keyword">case</span> _                 ⇒ <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span><span class="delimiter">)</span> <a href="#akka.actor.dungeon;Children.stop.shallDie" title="(ref: akka.actor.ActorRef)Boolean">shallDie</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.stop.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.actor.dungeon;Children.stop.actor" title="akka.actor.ActorRef">actor</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>.<a href="../ActorRef.scala.html#akka.actor;InternalActorRef.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
   * low level CAS helpers
   */</span>
  @inline <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean" id="akka.actor.dungeon;Children.swapChildrenRefs">swapChildrenRefs</a><span class="delimiter">(</span><a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.swapChildrenRefs.oldChildren">oldChildren</a>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a>, <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.swapChildrenRefs.newChildren">newChildren</a>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="../../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long, x$3: Any, x$4: Any)Boolean">compareAndSwapObject</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <span title="akka.actor.dungeon.AbstractActorCell.type">AbstractActorCell</span>.<span title="Long">childrenOffset</span>, <a href="#akka.actor.dungeon;Children.swapChildrenRefs.oldChildren" title="akka.actor.dungeon.ChildrenContainer">oldChildren</a>, <a href="#akka.actor.dungeon;Children.swapChildrenRefs.newChildren" title="akka.actor.dungeon.ChildrenContainer">newChildren</a><span class="delimiter">)</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="akka.actor.dungeon;Children.reserveChild">reserveChild</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.reserveChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.reserveChild.c">c</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>
    <a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.reserveChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>, <a href="#akka.actor.dungeon;Children.reserveChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.reserve" title="(name: String)akka.actor.dungeon.ChildrenContainer">reserve</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.reserveChild.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.dungeon;Children.reserveChild" title="(name: String)Boolean">reserveChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.reserveChild.name" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: String)Boolean" id="akka.actor.dungeon;Children.unreserveChild">unreserveChild</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.unreserveChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.unreserveChild.c">c</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>
    <a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.unreserveChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>, <a href="#akka.actor.dungeon;Children.unreserveChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.unreserve" title="(name: String)akka.actor.dungeon.ChildrenContainer">unreserve</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.unreserveChild.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.dungeon;Children.unreserveChild" title="(name: String)Boolean">unreserveChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.unreserveChild.name" title="String">name</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]" id="akka.actor.dungeon;Children.initChild">initChild</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.initChild.ref">ref</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Option[akka.actor.ChildRestartStats]">Option</span><span class="delimiter">[</span>ChildRestartStats<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.initChild.cc">cc</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>
    <a href="#akka.actor.dungeon;Children.initChild.cc" title="akka.actor.dungeon.ChildrenContainer">cc</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.getByName" title="(name: String)Option[akka.actor.ChildStats]">getByName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.ref" title="akka.actor.ActorRef">ref</a>.<a href="../ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../ActorPath.scala.html#akka.actor;ActorPath.name" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="Option[akka.actor.ChildRestartStats]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Some[akka.actor.ChildStats]" id="akka.actor.dungeon;Children.initChild.old">old</a> @ Some<span class="delimiter">(</span>_: <a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats" title="akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dungeon;Children.initChild.old" title="Some[akka.actor.ChildStats]">old</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[akka.actor.ChildRestartStats]" class="delimiter">[</span><span title="Option[akka.actor.ChildRestartStats]">Option</span><span class="delimiter">[</span>ChildRestartStats<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a href="../FaultHandling.scala.html#akka.actor.ChildNameReserved" title="akka.actor.ChildNameReserved.type">ChildNameReserved</a><span class="delimiter">)</span> ⇒
        <span class="keyword">val</span> <a title="akka.actor.ChildRestartStats" id="akka.actor.dungeon;Children.initChild.crs">crs</a> = <a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats" title="(child: akka.actor.ActorRef, maxNrOfRetriesCount: Int, restartTimeWindowStartNanos: Long)akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="akka.actor.dungeon;Children.initChild.name">name</a> = <a href="#akka.actor.dungeon;Children.initChild.ref" title="akka.actor.ActorRef">ref</a>.<a href="../ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../ActorPath.scala.html#akka.actor;ActorPath.name" title="=&gt; String">name</a>
        <span title="Option[akka.actor.ChildRestartStats]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.cc" title="akka.actor.dungeon.ChildrenContainer">cc</a>, <a href="#akka.actor.dungeon;Children.initChild.cc" title="akka.actor.dungeon.ChildrenContainer">cc</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.add" title="(name: String, stats: akka.actor.ChildRestartStats)akka.actor.dungeon.ChildrenContainer">add</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.name" title="String">name</a>, <a href="#akka.actor.dungeon;Children.initChild.crs" title="akka.actor.ChildRestartStats">crs</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: akka.actor.ChildRestartStats)Some[akka.actor.ChildRestartStats]">Some</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.crs" title="akka.actor.ChildRestartStats">crs</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#akka.actor.dungeon;Children.initChild" title="(ref: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]">initChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.initChild.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒ <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(reason: akka.actor.dungeon.ChildrenContainer.SuspendReason)Boolean" id="akka.actor.dungeon;Children.setChildrenTerminationReason">setChildrenTerminationReason</a><span class="delimiter">(</span><a title="akka.actor.dungeon.ChildrenContainer.SuspendReason" id="akka.actor.dungeon;Children.setChildrenTerminationReason.reason">reason</a>: ChildrenContainer.<a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer;SuspendReason" title="akka.actor.dungeon.ChildrenContainer.SuspendReason">SuspendReason</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.actor.dungeon.ChildrenContainer.TerminatingChildrenContainer" id="akka.actor.dungeon;Children.setChildrenTerminationReason.c">c</a>: ChildrenContainer.<a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer;TerminatingChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.TerminatingChildrenContainer">TerminatingChildrenContainer</a> ⇒
        <a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.setChildrenTerminationReason.c" title="akka.actor.dungeon.ChildrenContainer.TerminatingChildrenContainer">c</a>, <a href="#akka.actor.dungeon;Children.setChildrenTerminationReason.c" title="akka.actor.dungeon.ChildrenContainer.TerminatingChildrenContainer">c</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer;TerminatingChildrenContainer.copy$default$1" title="scala.collection.immutable.TreeMap[String,akka.actor.ChildStats]" id="akka.actor.dungeon;Children.setChildrenTerminationReason.x$4">copy</a><span class="delimiter">(</span>reason = <a href="#akka.actor.dungeon;Children.setChildrenTerminationReason.reason" title="akka.actor.dungeon.ChildrenContainer.SuspendReason" id="akka.actor.dungeon;Children.setChildrenTerminationReason.x$2">reason</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.dungeon;Children.setChildrenTerminationReason" title="(reason: akka.actor.dungeon.ChildrenContainer.SuspendReason)Boolean">setChildrenTerminationReason</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.setChildrenTerminationReason.reason" title="akka.actor.dungeon.ChildrenContainer.SuspendReason">reason</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒ <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="akka.actor.dungeon;Children.setTerminated">setTerminated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long, x$3: Any)Unit">putObjectVolatile</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children" title="akka.actor.ActorCell" class="keyword">this</a>, <span title="akka.actor.dungeon.AbstractActorCell.type">AbstractActorCell</span>.<span title="Long">childrenOffset</span>, <a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer.TerminatedChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.TerminatedChildrenContainer.type">TerminatedChildrenContainer</a><span class="delimiter">)</span>

  <span class="comment">/*
   * ActorCell-internal API
   */</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor.dungeon;Children.isNormal">isNormal</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.isNormal" title="=&gt; Boolean">isNormal</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor.dungeon;Children.isTerminating">isTerminating</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.isTerminating" title="=&gt; Boolean">isTerminating</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.dungeon.ChildrenContainer.SuspendReason with akka.actor.dungeon.ChildrenContainer.WaitingForChildren" id="akka.actor.dungeon;Children.waitingForChildrenOrNull">waitingForChildrenOrNull</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a> <span title="dungeon extends akka.actor.dungeon.ChildrenContainer.SuspendReason with akka.actor.dungeon.ChildrenContainer.WaitingForChildren" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> TerminatingChildrenContainer<span class="delimiter">(</span>_, _, <a title="dungeon extends akka.actor.dungeon.ChildrenContainer.SuspendReason with akka.actor.dungeon.ChildrenContainer.WaitingForChildren" id="akka.actor.dungeon;Children.waitingForChildrenOrNull.w">w</a>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer;WaitingForChildren" title="akka.actor.dungeon.ChildrenContainer.WaitingForChildren">WaitingForChildren</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dungeon;Children.waitingForChildrenOrNull.w" title="dungeon extends akka.actor.dungeon.ChildrenContainer.SuspendReason with akka.actor.dungeon.ChildrenContainer.WaitingForChildren">w</a>
    <span class="keyword">case</span> _ ⇒ <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(exceptFor: Set[akka.actor.ActorRef])Unit" id="akka.actor.dungeon;Children.suspendChildren">suspendChildren</a><span class="delimiter">(</span><a title="Set[akka.actor.ActorRef]" id="akka.actor.dungeon;Children.suspendChildren$default$1">exceptFor</a>: <span title="Set[akka.actor.ActorRef]">Set</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[akka.actor.ActorRef]">empty</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.stats" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ChildRestartStats]">stats</a> <span title="(f: akka.actor.ChildRestartStats =&gt; Unit)Unit">foreach</span> <a href="#akka.actor.dungeon;Children.suspendChildren.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> ChildRestartStats<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.suspendChildren.$anonfun.child">child</a>, _, _<span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.suspendChildren$default$1" title="Set[akka.actor.ActorRef]">exceptFor</a> <span title="(elem: akka.actor.ActorRef)Boolean">contains</span> <a href="#akka.actor.dungeon;Children.suspendChildren.$anonfun.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dungeon;Children.suspendChildren.$anonfun.child" title="akka.actor.ActorRef">child</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>.<a href="../ActorRef.scala.html#akka.actor;InternalActorRef.suspend" title="()Unit">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒
    <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(causedByFailure: Throwable, perp: akka.actor.ActorRef)Unit" id="akka.actor.dungeon;Children.resumeChildren">resumeChildren</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor.dungeon;Children.resumeChildren.causedByFailure">causedByFailure</a>: <span title="Throwable">Throwable</span>, <a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.resumeChildren.perp">perp</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.stats" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ChildRestartStats]">stats</a> <span title="(f: akka.actor.ChildRestartStats =&gt; Unit)Unit">foreach</span> <a href="#akka.actor.dungeon;Children.resumeChildren.$anonfun.x0$2" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> ChildRestartStats<span class="delimiter">(</span><a title="akka.actor.InternalActorRef" id="akka.actor.dungeon;Children.resumeChildren.$anonfun.child">child</a>: <a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>, _, _<span class="delimiter">)</span> ⇒
        <a href="#akka.actor.dungeon;Children.resumeChildren.$anonfun.child" title="akka.actor.InternalActorRef">child</a>.<a href="../ActorRef.scala.html#akka.actor;InternalActorRef.resume" title="(causedByFailure: Throwable)Unit">resume</a><span class="delimiter">(</span><span title="Throwable" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.resumeChildren.perp" title="akka.actor.ActorRef">perp</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.actor.dungeon;Children.resumeChildren.$anonfun.child" title="akka.actor.InternalActorRef">child</a><span class="delimiter">)</span> <a href="#akka.actor.dungeon;Children.resumeChildren.causedByFailure" title="Throwable">causedByFailure</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)Option[akka.actor.ChildStats]" id="akka.actor.dungeon;Children.getChildByName">getChildByName</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.getChildByName.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.ChildStats]">Option</span><span class="delimiter">[</span>ChildStats<span class="delimiter">]</span> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.getByName" title="(name: String)Option[akka.actor.ChildStats]">getByName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getChildByName.name" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]" id="akka.actor.dungeon;Children.getChildByRef">getChildByRef</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.getChildByRef.ref">ref</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Option[akka.actor.ChildRestartStats]">Option</span><span class="delimiter">[</span>ChildRestartStats<span class="delimiter">]</span> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.getByRef" title="(actor: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]">getByRef</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getChildByRef.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[akka.actor.ChildRestartStats]" id="akka.actor.dungeon;Children.getAllChildStats">getAllChildStats</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ChildRestartStats]">Iterable</span><span class="delimiter">[</span>ChildRestartStats<span class="delimiter">]</span> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.stats" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ChildRestartStats]">stats</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)akka.actor.InternalActorRef" id="akka.actor.dungeon;Children.getSingleChild">getSingleChild</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.getSingleChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> =
    <span title="akka.actor.InternalActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getSingleChild.name" title="String">name</a>.<span title="(x$1: Int)Int">indexOf</span><span class="delimiter">(</span><span title="Int(35)" class="char">'#'</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// optimization for the non-uid case</span>
      <a href="#akka.actor.dungeon;Children.getChildByName" title="(name: String)Option[akka.actor.ChildStats]">getChildByName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getSingleChild.name" title="String">name</a><span class="delimiter">)</span> <span title="akka.actor.InternalActorRef" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ChildRestartStats">crs</span>: <a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats" title="akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">)</span> ⇒ <span title="akka.actor.ChildRestartStats">crs</span>.<a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats.child" title="=&gt; akka.actor.ActorRef">child</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>
        <span class="keyword">case</span> _                            ⇒ <a href="../ActorRef.scala.html#akka.actor.Nobody" title="akka.actor.Nobody.type">Nobody</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#akka.actor.dungeon;Children.getSingleChild.childName" title="(String, Int)" class="delimiter">(</a><a href="#akka.actor.dungeon;Children.getSingleChild.x$1" title="String" id="akka.actor.dungeon;Children.getSingleChild.childName">childName</a>, <a href="#akka.actor.dungeon;Children.getSingleChild.x$1" title="Int" id="akka.actor.dungeon;Children.getSingleChild.uid">uid</a><span class="delimiter">)</span> = <a href="../ActorCell.scala.html#akka.actor.ActorCell" title="akka.actor.ActorCell.type">ActorCell</a>.<a href="../ActorCell.scala.html#akka.actor.ActorCell.splitNameAndUid" title="(name: String)(String, Int)">splitNameAndUid</a><span title="(String, Int) @unchecked" class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getSingleChild.name" title="String">name</a><span class="delimiter">)</span>
      <a href="#akka.actor.dungeon;Children.getChildByName" title="(name: String)Option[akka.actor.ChildStats]">getChildByName</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.getSingleChild.childName" title="String">childName</a><span class="delimiter">)</span> <span title="akka.actor.InternalActorRef" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ChildRestartStats">crs</span>: <a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats" title="akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.actor.dungeon;Children.getSingleChild.uid" title="Int">uid</a> <span title="(x: Int)Boolean">==</span> ActorCell.<span title="Int(0)">undefinedUid</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.dungeon;Children.getSingleChild.uid" title="Int">uid</a> <span title="(x: Int)Boolean">==</span> <span title="akka.actor.ChildRestartStats">crs</span>.<a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats.uid" title="=&gt; Int">uid</a> ⇒
          <span title="akka.actor.ChildRestartStats">crs</span>.<a href="../FaultHandling.scala.html#akka.actor;ChildRestartStats.child" title="=&gt; akka.actor.ActorRef">child</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="../ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>
        <span class="keyword">case</span> _ ⇒ <a href="../ActorRef.scala.html#akka.actor.Nobody" title="akka.actor.Nobody.type">Nobody</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(child: akka.actor.ActorRef)Option[akka.actor.dungeon.ChildrenContainer.SuspendReason]" id="akka.actor.dungeon;Children.removeChildAndGetStateChange">removeChildAndGetStateChange</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.child">child</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Option[akka.actor.dungeon.ChildrenContainer.SuspendReason]">Option</span><span class="delimiter">[</span>SuspendReason<span class="delimiter">]</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild">removeChild</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.ref">ref</a>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.c">c</a> = <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>
      <span class="keyword">val</span> <a title="akka.actor.dungeon.ChildrenContainer" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.n">n</a> = <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.remove" title="(child: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer">remove</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
      <span title="akka.actor.dungeon.ChildrenContainer" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.swapChildrenRefs" title="(oldChildren: akka.actor.dungeon.ChildrenContainer, newChildren: akka.actor.dungeon.ChildrenContainer)Boolean">swapChildrenRefs</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.c" title="akka.actor.dungeon.ChildrenContainer">c</a>, <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.n" title="akka.actor.dungeon.ChildrenContainer">n</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.n" title="akka.actor.dungeon.ChildrenContainer">n</a> <span class="keyword">else</span> <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild" title="(ref: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer">removeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a> <span title="Option[akka.actor.dungeon.ChildrenContainer.SuspendReason]" class="keyword">match</span> <span class="delimiter">{</span> <span class="comment">// The match must be performed BEFORE the removeChild</span>
      <span class="keyword">case</span> TerminatingChildrenContainer<span class="delimiter">(</span>_, _, <a title="akka.actor.dungeon.ChildrenContainer.SuspendReason" id="akka.actor.dungeon;Children.removeChildAndGetStateChange.reason">reason</a><span class="delimiter">)</span> ⇒
        <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild" title="(ref: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer">removeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span> <span title="Option[akka.actor.dungeon.ChildrenContainer.SuspendReason]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> _: <a href="ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer;TerminatingChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.TerminatingChildrenContainer">TerminatingChildrenContainer</a> ⇒ <span title="None.type">None</span>
          <span class="keyword">case</span> _                               ⇒ <span title="(x: akka.actor.dungeon.ChildrenContainer.SuspendReason)Some[akka.actor.dungeon.ChildrenContainer.SuspendReason]">Some</span><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.reason" title="akka.actor.dungeon.ChildrenContainer.SuspendReason">reason</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> _ ⇒
        <a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.removeChild" title="(ref: akka.actor.ActorRef)akka.actor.dungeon.ChildrenContainer">removeChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.removeChildAndGetStateChange.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span>
        <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
   * Private helpers
   */</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: String)String" id="akka.actor.dungeon;Children.checkName">checkName</a><span class="delimiter">(</span><a title="String" id="akka.actor.dungeon;Children.checkName.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.dungeon;Children.checkName.name" title="String">name</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span>           ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.InvalidActorNameException" class="keyword">new</span> <a href="../Actor.scala.html#akka.actor;InvalidActorNameException" title="akka.actor.InvalidActorNameException">InvalidActorNameException</a><span class="delimiter">(</span><span title="String(&quot;actor name must not be null&quot;)" class="string">&quot;actor name must not be null&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>             ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.InvalidActorNameException" class="keyword">new</span> <a href="../Actor.scala.html#akka.actor;InvalidActorNameException" title="akka.actor.InvalidActorNameException">InvalidActorNameException</a><span class="delimiter">(</span><span title="String(&quot;actor name must not be empty&quot;)" class="string">&quot;actor name must not be empty&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../ActorPath.scala.html#akka.actor.ActorPath.ElementRegex" title="(target: Any)Option[List[String]]">ElementRegex</a><span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="#akka.actor.dungeon;Children.checkName.name" title="String">name</a>
      <span class="keyword">case</span> _              ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.InvalidActorNameException" class="keyword">new</span> <a href="../Actor.scala.html#akka.actor;InvalidActorNameException" title="akka.actor.InvalidActorNameException">InvalidActorNameException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;illegal actor name [&quot;)">illegal actor name [$</span><a href="#akka.actor.dungeon;Children.checkName.name" title="String">name</a><span title="String(&quot;], must conform to &quot;)">], must conform to $</span><a href="../ActorPath.scala.html#akka.actor.ActorPath.ElementRegex" title="=&gt; scala.util.matching.Regex">ElementRegex</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cell: akka.actor.ActorCell, props: akka.actor.Props, name: String, async: Boolean, systemService: Boolean)akka.actor.ActorRef" id="akka.actor.dungeon;Children.makeChild">makeChild</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.actor.dungeon;Children.makeChild.cell">cell</a>: <a href="../ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a>, <a title="akka.actor.Props" id="akka.actor.dungeon;Children.makeChild.props">props</a>: <a href="../Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="String" id="akka.actor.dungeon;Children.makeChild.name">name</a>: <span title="String">String</span>, <a title="Boolean" id="akka.actor.dungeon;Children.makeChild.async">async</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="akka.actor.dungeon;Children.makeChild.systemService">systemService</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="../ActorSystem.scala.html#akka.actor;ActorSystemImpl.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../ActorSystem.scala.html#akka.actor.ActorSystem;Settings.SerializeAllCreators" title="=&gt; Boolean">SerializeAllCreators</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.actor.dungeon;Children.makeChild.systemService" title="Boolean">systemService</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor.dungeon;Children.makeChild.props" title="akka.actor.Props">props</a>.<a href="../Props.scala.html#akka.actor;Props.deploy" title="=&gt; akka.actor.Deploy">deploy</a>.<a href="../Deployer.scala.html#akka.actor;Deploy.scope" title="=&gt; akka.actor.Scope">scope</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../Deployer.scala.html#akka.actor.LocalScope" title="akka.actor.LocalScope.type">LocalScope</a><span class="delimiter">)</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="akka.serialization.Serialization" id="akka.actor.dungeon;Children.makeChild.ser">ser</a> = <a href="../Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.serialization.Serialization">SerializationExtension</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>
        <a href="#akka.actor.dungeon;Children.makeChild.props" title="akka.actor.Props">props</a>.<a href="../Props.scala.html#akka.actor;Props.args" title="=&gt; scala.collection.immutable.Seq[Any]">args</a> <span title="(p: Any =&gt; Boolean)Boolean">forall</span> <span class="delimiter">(</span><a title="Any" id="akka.actor.dungeon;Children.makeChild.$anonfun.arg">arg</a> ⇒
          <a href="#akka.actor.dungeon;Children.makeChild.$anonfun.arg" title="Any">arg</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span>
            <a href="#akka.actor.dungeon;Children.makeChild.ser" title="akka.serialization.Serialization">ser</a>.<a href="../../serialization/Serialization.scala.html#akka.serialization;Serialization.deserialize(2392165273)" title="(bytes: Array[Byte], clazz: Class[?0])scala.util.Try[?0]">deserialize</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.ser" title="akka.serialization.Serialization">ser</a>.<a href="../../serialization/Serialization.scala.html#akka.serialization;Serialization.serialize" title="(o: AnyRef)scala.util.Try[Array[Byte]]">serialize</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.$anonfun.arg" title="Any">arg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="=&gt; Array[Byte]">get</span>, <a href="#akka.actor.dungeon;Children.makeChild.$anonfun.arg" title="Any">arg</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>.<span title="=&gt; ?0">get</span> <span title="(x$1: Any)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#akka.actor.dungeon;Children.makeChild.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor.dungeon;Children.makeChild.e">e</a><span class="delimiter">)</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String, x$2: Throwable)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;pre-creation serialization check failed at [&quot;)">pre-creation serialization check failed at [$</span><span class="delimiter">{</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="../ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a><span class="delimiter">}</span><span title="String(&quot;/&quot;)">/$</span><a href="#akka.actor.dungeon;Children.makeChild.name" title="String">name</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span>, <a href="#akka.actor.dungeon;Children.makeChild.e" title="Throwable">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="comment">/*
     * in case we are currently terminating, fail external attachChild requests
     * (internal calls cannot happen anyway because we are suspended)
     */</span>
    <span title="akka.actor.ActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="#akka.actor.dungeon;Children.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.isTerminating" title="=&gt; Boolean">isTerminating</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;cannot create children while terminating or terminated&quot;)" class="string">&quot;cannot create children while terminating or terminated&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#akka.actor.dungeon;Children.reserveChild" title="(name: String)Boolean">reserveChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.name" title="String">name</a><span class="delimiter">)</span>
      <span class="comment">// this name will either be unreserved or overwritten with a real child below</span>
      <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.actor.dungeon;Children.makeChild.actor">actor</a> =
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="akka.actor.ChildActorPath" id="akka.actor.dungeon;Children.makeChild.actor.childPath">childPath</a> = <span title="akka.actor.ChildActorPath" class="keyword">new</span> <a href="../ActorPath.scala.html#akka.actor;ChildActorPath" title="akka.actor.ChildActorPath">ChildActorPath</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="../ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>, <a href="#akka.actor.dungeon;Children.makeChild.name" title="String">name</a>, <a href="../ActorCell.scala.html#akka.actor.ActorCell" title="akka.actor.ActorCell.type">ActorCell</a>.<a href="../ActorCell.scala.html#akka.actor.ActorCell.newUid" title="()Int">newUid</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../ActorRefProvider.scala.html#akka.actor;ActorRefProvider.actorOf" title="(system: akka.actor.ActorSystemImpl, props: akka.actor.Props, supervisor: akka.actor.InternalActorRef, path: akka.actor.ActorPath, systemService: Boolean, deploy: Option[akka.actor.Deploy], lookupDeploy: Boolean, async: Boolean)akka.actor.InternalActorRef">actorOf</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.systemImpl" title="=&gt; akka.actor.ActorSystemImpl">systemImpl</a>, <a href="#akka.actor.dungeon;Children.makeChild.props" title="akka.actor.Props">props</a>, <a href="#akka.actor.dungeon;Children.makeChild.cell" title="akka.actor.ActorCell">cell</a>.<a href="../ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <a href="#akka.actor.dungeon;Children.makeChild.actor.childPath" title="akka.actor.ChildActorPath">childPath</a>,
            systemService = <a href="#akka.actor.dungeon;Children.makeChild.systemService" title="Boolean">systemService</a>, deploy = <span title="None.type">None</span>, lookupDeploy = <span title="Boolean(true)" class="keyword">true</span>, async = <a href="#akka.actor.dungeon;Children.makeChild.async" title="Boolean">async</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="InterruptedException">e</span>: <span title="InterruptedException">InterruptedException</span> ⇒
            <a href="#akka.actor.dungeon;Children.unreserveChild" title="(name: String)Boolean">unreserveChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.name" title="String">name</a><span class="delimiter">)</span>
            <span title="Thread.type">Thread</span>.<span title="()Boolean">interrupted</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// clear interrupted flag before throwing according to java convention</span>
            <span title="Nothing" class="keyword">throw</span> <span title="InterruptedException">e</span>
          <span class="keyword">case</span> <a href="#akka.actor.dungeon;Children.makeChild.actor.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
            <a href="#akka.actor.dungeon;Children.unreserveChild" title="(name: String)Boolean">unreserveChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.name" title="String">name</a><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">throw</span> <span title="Throwable">e</span>
        <span class="delimiter">}</span>
      <span class="comment">// mailbox==null during RoutedActorCell constructor, where suspends are queued otherwise</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Dispatch.scala.html#akka.actor.dungeon;Dispatch.mailbox" title="=&gt; akka.dispatch.Mailbox">mailbox</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="akka.actor.dungeon;Children.makeChild.$anonfun._">_</a> ← <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; Unit)Unit">to</span> <a href="Dispatch.scala.html#akka.actor.dungeon;Dispatch.mailbox" title="=&gt; akka.dispatch.Mailbox">mailbox</a>.<a href="../../dispatch/Mailbox.scala.html#akka.dispatch;Mailbox.suspendCount" title="=&gt; Int">suspendCount</a><span class="delimiter">)</span> <a href="#akka.actor.dungeon;Children.makeChild.actor" title="akka.actor.InternalActorRef">actor</a>.<a href="../ActorRef.scala.html#akka.actor;InternalActorRef.suspend" title="()Unit">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.actor.dungeon;Children.initChild" title="(ref: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]">initChild</a><span class="delimiter">(</span><a href="#akka.actor.dungeon;Children.makeChild.actor" title="akka.actor.InternalActorRef">actor</a><span class="delimiter">)</span>
      <a href="#akka.actor.dungeon;Children.makeChild.actor" title="akka.actor.InternalActorRef">actor</a>.<a href="../ActorRef.scala.html#akka.actor;InternalActorRef.start" title="()Unit">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.actor.dungeon;Children.makeChild.actor" title="akka.actor.InternalActorRef">actor</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
