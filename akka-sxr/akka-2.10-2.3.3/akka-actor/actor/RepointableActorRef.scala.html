<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-actor/actor/RepointableActorRef.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.actor

<span class="keyword">import</span> java.io.ObjectStreamException
<span class="keyword">import</span> java.util.<span class="delimiter">{</span> LinkedList ⇒ JLinkedList, ListIterator ⇒ JListIterator <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.TimeUnit
<span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock

<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.collection.immutable

<span class="keyword">import</span> akka.actor.dungeon.ChildrenContainer
<span class="keyword">import</span> akka.event.<a href="../event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.Warning
<span class="keyword">import</span> akka.util.Unsafe
<span class="keyword">import</span> akka.dispatch._
<span class="keyword">import</span> akka.dispatch.sysmsg._
<span class="keyword">import</span> util.Try

<span class="comment">/**
 * This actor ref starts out with some dummy cell (by default just enqueuing
 * messages into vectors protected by ReentrantLock), it must be initialize()’d
 * before it can be sent to, and it will be activate()’d by its supervisor in
 * response to the Supervise() message, which will replace the contained Cell
 * with a fully functional one, transfer all messages from dummy to real queue
 * and swap out the cell ref.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RepointableActorRef extends akka.actor.ActorRefWithCell with akka.actor.RepointableRef" id="akka.actor;RepointableActorRef">RepointableActorRef</a><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="akka.actor.ActorSystemImpl" id="akka.actor;RepointableActorRef.system">system</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>,
  <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.actor;RepointableActorRef.props">props</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
  <span class="keyword">val</span> <a title="akka.dispatch.MessageDispatcher" id="akka.actor;RepointableActorRef.dispatcher">dispatcher</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher" title="akka.dispatch.MessageDispatcher">MessageDispatcher</a>,
  <span class="keyword">val</span> <a title="akka.dispatch.MailboxType" id="akka.actor;RepointableActorRef.mailboxType">mailboxType</a>: <a href="../dispatch/Mailbox.scala.html#akka.dispatch;MailboxType" title="akka.dispatch.MailboxType">MailboxType</a>,
  <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.actor;RepointableActorRef.supervisor">supervisor</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>,
  <span class="keyword">val</span> <a title="akka.actor.ActorPath" id="akka.actor;RepointableActorRef.path">path</a>: <a href="ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="ActorRef.scala.html#akka.actor;ActorRefWithCell" title="akka.actor.ActorRefWithCell">ActorRefWithCell</a> <span class="keyword">with</span> <a href="ActorRef.scala.html#akka.actor;RepointableRef" title="akka.actor.RepointableRef">RepointableRef</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <span title="akka.actor.AbstractActorRef.type">AbstractActorRef</span>.<span class="delimiter">{</span> cellOffset, lookupOffset <span class="delimiter">}</span>

  <span class="comment">/*
   * H E R E   B E   D R A G O N S !
   *
   * There are two main functions of a Cell: message queueing and child lookup.
   * When switching out the UnstartedCell for its real replacement, the former
   * must be switched after all messages have been drained from the temporary
   * queue into the real mailbox, while the latter must be switched before
   * processing the very first message (i.e. before Cell.start()). Hence there
   * are two refs here, one for each function, and they are switched just so.
   */</span>
  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef._cellDoNotCallMeDirectly_=">_cellDoNotCallMeDirectly</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> = _
  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef._lookupDoNotCallMeDirectly_=">_lookupDoNotCallMeDirectly</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> = _

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Cell" id="akka.actor;RepointableActorRef.underlying">underlying</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> = <a href="../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long)Object">getObjectVolatile</span><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <span title="Long">cellOffset</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.Cell" class="delimiter">[</span><a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.Cell" id="akka.actor;RepointableActorRef.lookup">lookup</a> = <a href="../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long)Object">getObjectVolatile</span><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <span title="Long">lookupOffset</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.Cell" class="delimiter">[</span><a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">]</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(next: akka.actor.Cell)akka.actor.Cell" id="akka.actor;RepointableActorRef.swapCell">swapCell</a><span class="delimiter">(</span><a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.swapCell.next">next</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">)</span>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.swapCell.old">old</a> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
    <span title="akka.actor.Cell" class="keyword">if</span> <span class="delimiter">(</span><a href="../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long, x$3: Any, x$4: Any)Boolean">compareAndSwapObject</span><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <span title="Long">cellOffset</span>, <a href="#akka.actor;RepointableActorRef.swapCell.old" title="akka.actor.Cell">old</a>, <a href="#akka.actor;RepointableActorRef.swapCell.next" title="akka.actor.Cell">next</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor;RepointableActorRef.swapCell.old" title="akka.actor.Cell">old</a> <span class="keyword">else</span> <a href="#akka.actor;RepointableActorRef.swapCell" title="(next: akka.actor.Cell)akka.actor.Cell">swapCell</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.swapCell.next" title="akka.actor.Cell">next</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(next: akka.actor.Cell)akka.actor.Cell" id="akka.actor;RepointableActorRef.swapLookup">swapLookup</a><span class="delimiter">(</span><a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.swapLookup.next">next</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">)</span>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.swapLookup.old">old</a> = <a href="#akka.actor;RepointableActorRef.lookup" title="=&gt; akka.actor.Cell">lookup</a>
    <span title="akka.actor.Cell" class="keyword">if</span> <span class="delimiter">(</span><a href="../util/Unsafe.java.html#akka.util.Unsafe" title="akka.util.Unsafe.type">Unsafe</a>.<a href="../util/Unsafe.java.html#akka.util.Unsafe.instance" title="sun.misc.Unsafe">instance</a>.<span title="(x$1: Any, x$2: Long, x$3: Any, x$4: Any)Boolean">compareAndSwapObject</span><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <span title="Long">lookupOffset</span>, <a href="#akka.actor;RepointableActorRef.swapLookup.old" title="akka.actor.Cell">old</a>, <a href="#akka.actor;RepointableActorRef.swapLookup.next" title="akka.actor.Cell">next</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor;RepointableActorRef.swapLookup.old" title="akka.actor.Cell">old</a> <span class="keyword">else</span> <a href="#akka.actor;RepointableActorRef.swapLookup" title="(next: akka.actor.Cell)akka.actor.Cell">swapLookup</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.swapLookup.next" title="akka.actor.Cell">next</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Initialize: make a dummy cell which holds just a mailbox, then tell our
   * supervisor that we exist so that he can create the real Cell in
   * handleSupervise().
   *
   * Call twice on your own peril!
   *
   * This is protected so that others can have different initialization.
   */</span>
  <span class="keyword">def</span> <a title="(async: Boolean)RepointableActorRef.this.type" id="akka.actor;RepointableActorRef.initialize">initialize</a><span class="delimiter">(</span><a title="Boolean" id="akka.actor;RepointableActorRef.initialize.async">async</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> =
    <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a> <span title="RepointableActorRef.this.type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒
        <a href="#akka.actor;RepointableActorRef.swapCell" title="(next: akka.actor.Cell)akka.actor.Cell">swapCell</a><span class="delimiter">(</span><span title="akka.actor.UnstartedCell" class="keyword">new</span> <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell">UnstartedCell</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>, <a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <a href="#akka.actor;RepointableActorRef.props" title="=&gt; akka.actor.Props">props</a>, <a href="#akka.actor;RepointableActorRef.supervisor" title="=&gt; akka.actor.InternalActorRef">supervisor</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef.swapLookup" title="(next: akka.actor.Cell)akka.actor.Cell">swapLookup</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef.supervisor" title="=&gt; akka.actor.InternalActorRef">supervisor</a>.<a href="ActorRef.scala.html#akka.actor;InternalActorRef.sendSystemMessage" title="(message: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Supervise" title="(child: akka.actor.ActorRef, async: Boolean)akka.dispatch.sysmsg.Supervise">Supervise</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <a href="#akka.actor;RepointableActorRef.initialize.async" title="Boolean">async</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;RepointableActorRef.initialize.async" title="Boolean">async</a><span class="delimiter">)</span> <a href="#akka.actor;RepointableActorRef.point" title="()RepointableActorRef.this.type">point</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef" title="RepointableActorRef.this.type" class="keyword">this</a>
      <span class="keyword">case</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.initialize.other">other</a> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;initialize called more than once!&quot;)" class="string">&quot;initialize called more than once!&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * This method is supposed to be called by the supervisor in handleSupervise()
   * to replace the UnstartedCell with the real one. It assumes no concurrent
   * modification of the `underlying` field, though it is safe to send messages
   * at any time.
   */</span>
  <span class="keyword">def</span> <a title="()RepointableActorRef.this.type" id="akka.actor;RepointableActorRef.point">point</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> =
    <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a> <span title="RepointableActorRef.this.type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.actor.UnstartedCell" id="akka.actor;RepointableActorRef.point.u">u</a>: <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell">UnstartedCell</a> ⇒
        <span class="comment">/*
         * The problem here was that if the real actor (which will start running
         * at cell.start()) creates children in its constructor, then this may
         * happen before the swapCell in u.replaceWith, meaning that those
         * children cannot be looked up immediately, e.g. if they shall become
         * routees.
         */</span>
        <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;RepointableActorRef.point.cell">cell</a> = <a href="#akka.actor;RepointableActorRef.newCell" title="(old: akka.actor.UnstartedCell)akka.actor.Cell">newCell</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.point.u" title="akka.actor.UnstartedCell">u</a><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef.swapLookup" title="(next: akka.actor.Cell)akka.actor.Cell">swapLookup</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.point.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef.point.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.start" title="()cell.type">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef.point.u" title="akka.actor.UnstartedCell">u</a>.<a href="#akka.actor;UnstartedCell.replaceWith" title="(cell: akka.actor.Cell)Unit">replaceWith</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.point.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span>
        <a href="#akka.actor;RepointableActorRef" title="RepointableActorRef.this.type" class="keyword">this</a>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;underlying cell is null&quot;)" class="string">&quot;underlying cell is null&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _    ⇒ <a href="#akka.actor;RepointableActorRef" title="RepointableActorRef.this.type" class="keyword">this</a> <span class="comment">// this happens routinely for things which were created async=false</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * This is called by activate() to obtain the cell which is to replace the
   * unstarted cell. The cell must be fully functional.
   */</span>
  <span class="keyword">def</span> <a title="(old: akka.actor.UnstartedCell)akka.actor.Cell" id="akka.actor;RepointableActorRef.newCell">newCell</a><span class="delimiter">(</span><a title="akka.actor.UnstartedCell" id="akka.actor;RepointableActorRef.newCell.old">old</a>: <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell">UnstartedCell</a><span class="delimiter">)</span>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> =
    <span title="akka.actor.ActorCell" class="keyword">new</span> <a href="ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>, <a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>, <a href="#akka.actor;RepointableActorRef.props" title="=&gt; akka.actor.Props">props</a>, <a href="#akka.actor;RepointableActorRef.dispatcher" title="=&gt; akka.dispatch.MessageDispatcher">dispatcher</a>, <a href="#akka.actor;RepointableActorRef.supervisor" title="=&gt; akka.actor.InternalActorRef">supervisor</a><span class="delimiter">)</span>.<a href="dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.init" title="(sendSupervise: Boolean, mailboxType: akka.dispatch.MailboxType)akka.actor.ActorCell">init</a><span class="delimiter">(</span>sendSupervise = <span title="Boolean(false)" class="keyword">false</span>, <a href="#akka.actor;RepointableActorRef.mailboxType" title="=&gt; akka.dispatch.MailboxType">mailboxType</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;RepointableActorRef.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;RepointableActorRef.suspend">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.suspend" title="()Unit">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(causedByFailure: Throwable)Unit" id="akka.actor;RepointableActorRef.resume">resume</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;RepointableActorRef.resume.causedByFailure">causedByFailure</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.resume" title="(causedByFailure: Throwable)Unit">resume</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.resume.causedByFailure" title="Throwable">causedByFailure</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;RepointableActorRef.stop">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(cause: Throwable)Unit" id="akka.actor;RepointableActorRef.restart">restart</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;RepointableActorRef.restart.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.restart" title="(cause: Throwable)Unit">restart</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.restart.cause" title="Throwable">cause</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;RepointableActorRef.isStarted">isStarted</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> _: <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell">UnstartedCell</a> ⇒ <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span>             ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;isStarted called before initialized&quot;)" class="string">&quot;isStarted called before initialized&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _                ⇒ <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use context.watch(actor) and receive Terminated(actor)&quot;</span>, <span class="string">&quot;2.2&quot;</span><span class="delimiter">)</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;RepointableActorRef.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.isTerminated" title="=&gt; Boolean">isTerminated</a>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRefProvider" id="akka.actor;RepointableActorRef.provider">provider</a>: <a href="ActorRefProvider.scala.html#akka.actor;ActorRefProvider" title="akka.actor.ActorRefProvider">ActorRefProvider</a> = <a href="#akka.actor;RepointableActorRef.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;RepointableActorRef.isLocal">isLocal</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.isLocal" title="=&gt; Boolean">isLocal</a>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.InternalActorRef" id="akka.actor;RepointableActorRef.getParent">getParent</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.parent" title="=&gt; akka.actor.InternalActorRef">parent</a>

  <span class="keyword">def</span> <a title="(name: Iterator[String])akka.actor.InternalActorRef" id="akka.actor;RepointableActorRef.getChild">getChild</a><span class="delimiter">(</span><a title="Iterator[String]" id="akka.actor;RepointableActorRef.getChild.name">name</a>: <span title="Iterator[String]">Iterator</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> =
    <span title="akka.actor.InternalActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.name" title="Iterator[String]">name</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.actor;RepointableActorRef.getChild.name" title="Iterator[String]">name</a>.<span title="()String">next</span> <span title="akka.actor.InternalActorRef" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String(&quot;..&quot;)" class="string">&quot;..&quot;</span> ⇒ <a href="#akka.actor;RepointableActorRef.getParent" title="=&gt; akka.actor.InternalActorRef">getParent</a>.<a href="ActorRef.scala.html#akka.actor;InternalActorRef.getChild" title="(name: Iterator[String])akka.actor.InternalActorRef">getChild</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.name" title="Iterator[String]">name</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>   ⇒ <a href="#akka.actor;RepointableActorRef.getChild" title="(name: Iterator[String])akka.actor.InternalActorRef">getChild</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.name" title="Iterator[String]">name</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="String" id="akka.actor;RepointableActorRef.getChild.other">other</a> ⇒
          <span class="keyword">val</span> <a href="#akka.actor;RepointableActorRef.getChild.childName" title="(String, Int)" class="delimiter">(</a><a href="#akka.actor;RepointableActorRef.getChild.x$1" title="String" id="akka.actor;RepointableActorRef.getChild.childName">childName</a>, <a href="#akka.actor;RepointableActorRef.getChild.x$1" title="Int" id="akka.actor;RepointableActorRef.getChild.uid">uid</a><span class="delimiter">)</span> = <a href="ActorCell.scala.html#akka.actor.ActorCell" title="akka.actor.ActorCell.type">ActorCell</a>.<a href="ActorCell.scala.html#akka.actor.ActorCell.splitNameAndUid" title="(name: String)(String, Int)">splitNameAndUid</a><span title="(String, Int) @unchecked" class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.other" title="String">other</a><span class="delimiter">)</span>
          <a href="#akka.actor;RepointableActorRef.lookup" title="=&gt; akka.actor.Cell">lookup</a>.<a href="ActorCell.scala.html#akka.actor;Cell.getChildByName" title="(name: String)Option[akka.actor.ChildStats]">getChildByName</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.childName" title="String">childName</a><span class="delimiter">)</span> <span title="akka.actor.InternalActorRef" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ChildRestartStats" id="akka.actor;RepointableActorRef.getChild.crs">crs</a>: <a href="FaultHandling.scala.html#akka.actor;ChildRestartStats" title="akka.actor.ChildRestartStats">ChildRestartStats</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.actor;RepointableActorRef.getChild.uid" title="Int">uid</a> <span title="(x: Int)Boolean">==</span> ActorCell.<span title="Int(0)">undefinedUid</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor;RepointableActorRef.getChild.uid" title="Int">uid</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.actor;RepointableActorRef.getChild.crs" title="akka.actor.ChildRestartStats">crs</a>.<a href="FaultHandling.scala.html#akka.actor;ChildRestartStats.uid" title="=&gt; Int">uid</a> ⇒
              <a href="#akka.actor;RepointableActorRef.getChild.crs" title="akka.actor.ChildRestartStats">crs</a>.<a href="FaultHandling.scala.html#akka.actor;ChildRestartStats.child" title="=&gt; akka.actor.ActorRef">child</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.InternalActorRef" class="delimiter">[</span><a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">]</span>.<a href="ActorRef.scala.html#akka.actor;InternalActorRef.getChild" title="(name: Iterator[String])akka.actor.InternalActorRef">getChild</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getChild.name" title="Iterator[String]">name</a><span class="delimiter">)</span>
            <span class="keyword">case</span> _ ⇒ <a href="ActorRef.scala.html#akka.actor.Nobody" title="akka.actor.Nobody.type">Nobody</a>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a>

  <span class="comment">/**
   * Method for looking up a single child beneath this actor.
   * It is racy if called from the outside.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)akka.actor.InternalActorRef" id="akka.actor;RepointableActorRef.getSingleChild">getSingleChild</a><span class="delimiter">(</span><a title="String" id="akka.actor;RepointableActorRef.getSingleChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> = <a href="#akka.actor;RepointableActorRef.lookup" title="=&gt; akka.actor.Cell">lookup</a>.<a href="ActorCell.scala.html#akka.actor;Cell.getSingleChild" title="(name: String)akka.actor.InternalActorRef">getSingleChild</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.getSingleChild.name" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]" id="akka.actor;RepointableActorRef.children">children</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <a href="#akka.actor;RepointableActorRef.lookup" title="=&gt; akka.actor.Cell">lookup</a>.<a href="ActorCell.scala.html#akka.actor;Cell.childrenRefs" title="=&gt; akka.actor.dungeon.ChildrenContainer">childrenRefs</a>.<a href="dungeon/ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer.children" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]">children</a>

  <span class="keyword">def</span> <a title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit" id="akka.actor;RepointableActorRef.!">!</a><span class="delimiter">(</span><a title="Any" id="akka.actor;RepointableActorRef.!$default$2.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="akka.actor.ActorRef" id="akka.actor;RepointableActorRef.!$default$2">sender</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="Actor.scala.html#akka.actor.Actor" title="akka.actor.Actor.type">Actor</a>.<a href="Actor.scala.html#akka.actor.Actor.noSender" title="=&gt; akka.actor.ActorRef">noSender</a><span class="delimiter">)</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendMessage(1681fc8bcf)" title="(message: Any, sender: akka.actor.ActorRef)Unit">sendMessage</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.!$default$2.message" title="Any">message</a>, <a href="#akka.actor;RepointableActorRef.!$default$2" title="akka.actor.ActorRef">sender</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(message: akka.dispatch.sysmsg.SystemMessage)Unit" id="akka.actor;RepointableActorRef.sendSystemMessage">sendSystemMessage</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;RepointableActorRef.sendSystemMessage.message">message</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">)</span> = <a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef.sendSystemMessage.message" title="akka.dispatch.sysmsg.SystemMessage">message</a><span class="delimiter">)</span>

  @throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>java.io.ObjectStreamException<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()AnyRef" id="akka.actor;RepointableActorRef.writeReplace">writeReplace</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <a href="ActorRef.scala.html#akka.actor.SerializedActorRef.apply(331bdd1185)" title="(actorRef: akka.actor.ActorRef)akka.actor.SerializedActorRef">SerializedActorRef</a><span class="delimiter">(</span><a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef" class="keyword">this</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class UnstartedCell extends AnyRef with akka.actor.Cell" id="akka.actor;UnstartedCell">UnstartedCell</a><a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell" class="delimiter">(</a><span class="keyword">val</span> <a title="akka.actor.ActorSystemImpl" id="akka.actor;UnstartedCell.systemImpl">systemImpl</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>,
                                  <span class="keyword">val</span> <a title="akka.actor.RepointableActorRef" id="akka.actor;UnstartedCell.self">self</a>: <a href="#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef">RepointableActorRef</a>,
                                  <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.actor;UnstartedCell.props">props</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
                                  <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.actor;UnstartedCell.supervisor">supervisor</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a> <span class="delimiter">{</span>

  <span class="comment">/*
   * This lock protects all accesses to this cell’s queues. It also ensures
   * safe switching to the started ActorCell.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="java.util.concurrent.locks.ReentrantLock" id="akka.actor;UnstartedCell.lock">lock</a> = <span title="java.util.concurrent.locks.ReentrantLock" class="keyword">new</span> <span title="java.util.concurrent.locks.ReentrantLock">ReentrantLock</span>

  <span class="comment">// use Envelope to keep on-send checks in the same place ACCESS MUST BE PROTECTED BY THE LOCK</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="java.util.LinkedList[Any]" id="akka.actor;UnstartedCell.queue">queue</a> = <span title="java.util.LinkedList[Any]" class="keyword">new</span> <span title="java.util.LinkedList[Any]">JLinkedList</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="#akka.actor;UnstartedCell.systemImpl" title="=&gt; akka.actor.ActorSystemImpl">systemImpl</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="ActorSystem.scala.html#akka.actor.ActorSystem;Settings.UnstartedPushTimeout" title="=&gt; akka.util.Timeout">UnstartedPushTimeout</a>.<span class="delimiter">{</span> duration ⇒ timeout <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(cell: akka.actor.Cell)Unit" id="akka.actor;UnstartedCell.replaceWith">replaceWith</a><span class="delimiter">(</span><a title="akka.actor.Cell" id="akka.actor;UnstartedCell.replaceWith.cell">cell</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;UnstartedCell.locked" title="(body: =&gt; Unit)Unit">locked</a> <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()Any">poll</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.replaceWith.while$1" title="Unit" class="keyword">match</a> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;UnstartedCell.replaceWith.s">s</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a> ⇒ <a href="#akka.actor;UnstartedCell.replaceWith.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.replaceWith.s" title="akka.dispatch.sysmsg.SystemMessage">s</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="akka.dispatch.Envelope" id="akka.actor;UnstartedCell.replaceWith.e">e</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a>      ⇒ <a href="#akka.actor;UnstartedCell.replaceWith.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendMessage(028b7cdb2e)" title="(msg: akka.dispatch.Envelope)Unit">sendMessage</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.replaceWith.e" title="akka.dispatch.Envelope">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.swapCell" title="(next: akka.actor.Cell)akka.actor.Cell">swapCell</a><span title="Unit" class="delimiter">(</span><a href="#akka.actor;UnstartedCell.replaceWith.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorSystem" id="akka.actor;UnstartedCell.system">system</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a> = <a href="#akka.actor;UnstartedCell.systemImpl" title="=&gt; akka.actor.ActorSystemImpl">systemImpl</a>
  <span class="keyword">def</span> <a title="()UnstartedCell.this.type" id="akka.actor;UnstartedCell.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <a href="#akka.actor;UnstartedCell" title="UnstartedCell.this.type" class="keyword">this</a>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;UnstartedCell.suspend">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;UnstartedCell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Suspend" title="()akka.dispatch.sysmsg.Suspend">Suspend</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(causedByFailure: Throwable)Unit" id="akka.actor;UnstartedCell.resume">resume</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;UnstartedCell.resume.causedByFailure">causedByFailure</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;UnstartedCell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Resume" title="(causedByFailure: Throwable)akka.dispatch.sysmsg.Resume">Resume</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.resume.causedByFailure" title="Throwable">causedByFailure</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(cause: Throwable)Unit" id="akka.actor;UnstartedCell.restart">restart</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;UnstartedCell.restart.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;UnstartedCell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Recreate" title="(cause: Throwable)akka.dispatch.sysmsg.Recreate">Recreate</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.restart.cause" title="Throwable">cause</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;UnstartedCell.stop">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;UnstartedCell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Terminate" title="()akka.dispatch.sysmsg.Terminate">Terminate</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;UnstartedCell.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor;UnstartedCell.locked" title="(body: =&gt; Boolean)Boolean">locked</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;UnstartedCell.isTerminated.cell">cell</a> = <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
    <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady" title="(cell: akka.actor.Cell)Boolean">cellIsReady</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.isTerminated.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.isTerminated.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.isTerminated" title="=&gt; Boolean">isTerminated</a> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.InternalActorRef" id="akka.actor;UnstartedCell.parent">parent</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> = <a href="#akka.actor;UnstartedCell.supervisor" title="=&gt; akka.actor.InternalActorRef">supervisor</a>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.dungeon.ChildrenContainer" id="akka.actor;UnstartedCell.childrenRefs">childrenRefs</a>: <a href="dungeon/ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a> = <a href="dungeon/ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.type">ChildrenContainer</a>.<a href="dungeon/ChildrenContainer.scala.html#akka.actor.dungeon.ChildrenContainer.EmptyChildrenContainer" title="akka.actor.dungeon.ChildrenContainer.EmptyChildrenContainer.type">EmptyChildrenContainer</a>
  <span class="keyword">def</span> <a title="(name: String)Option[akka.actor.ChildRestartStats]" id="akka.actor;UnstartedCell.getChildByName">getChildByName</a><span class="delimiter">(</span><a title="String" id="akka.actor;UnstartedCell.getChildByName.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.ChildRestartStats]">Option</span><span class="delimiter">[</span>ChildRestartStats<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)akka.actor.InternalActorRef" id="akka.actor;UnstartedCell.getSingleChild">getSingleChild</a><span class="delimiter">(</span><a title="String" id="akka.actor;UnstartedCell.getSingleChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a> = <a href="ActorRef.scala.html#akka.actor.Nobody" title="akka.actor.Nobody.type">Nobody</a>

  <span class="keyword">def</span> <a title="(msg: akka.dispatch.Envelope)Unit" id="akka.actor;UnstartedCell.sendMessage(028b7cdb2e)">sendMessage</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg">msg</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Boolean">tryLock</span><span class="delimiter">(</span><a href="../util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">timeout</a>.<span title="=&gt; Long">length</span>, <a href="../util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">timeout</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;UnstartedCell.sendMessage(028b7cdb2e).cell">cell</a> = <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady" title="(cell: akka.actor.Cell)Boolean">cellIsReady</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendMessage(028b7cdb2e)" title="(msg: akka.dispatch.Envelope)Unit">sendMessage</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="(x$1: Any)Boolean">offer</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Warning" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Warning">Warning</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;UnstartedCell" title="()Class[_]">getClass</a>, <span title="String(&quot;dropping message of type &quot;)" class="string">&quot;dropping message of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>.<span title="()Class[_]">getClass</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; due to enqueue failure&quot;)" class="string">&quot; due to enqueue failure&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="ActorRef.scala.html#akka.actor;DeadLetter" title="(message: Any, sender: akka.actor.ActorRef, recipient: akka.actor.ActorRef)akka.actor.DeadLetter">DeadLetter</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>, <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a>, <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a><span class="delimiter">)</span>, <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span>Mailbox.<span title="Boolean(false)">debug</span><span class="delimiter">)</span> <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a><span title="String(&quot; temp queueing &quot;)"> temp queueing $</span><span class="delimiter">{</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a><span class="delimiter">}</span><span title="String(&quot; from &quot;)"> from $</span><span class="delimiter">{</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="()Unit">unlock</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Warning" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Warning">Warning</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;UnstartedCell" title="()Class[_]">getClass</a>, <span title="String(&quot;dropping message of type&quot;)" class="string">&quot;dropping message of type&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>.<span title="()Class[_]">getClass</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; due to lock timeout&quot;)" class="string">&quot; due to lock timeout&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="ActorRef.scala.html#akka.actor;DeadLetter" title="(message: Any, sender: akka.actor.ActorRef, recipient: akka.actor.ActorRef)akka.actor.DeadLetter">DeadLetter</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>, <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a>, <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a><span class="delimiter">)</span>, <a href="#akka.actor;UnstartedCell.sendMessage(028b7cdb2e).msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit" id="akka.actor;UnstartedCell.sendSystemMessage">sendSystemMessage</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;UnstartedCell.sendSystemMessage.msg">msg</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="()Unit">lock</span> <span class="comment">// we cannot lose system messages, ever, and we cannot throw an Error from here as well</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;UnstartedCell.sendSystemMessage.cell">cell</a> = <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady" title="(cell: akka.actor.Cell)Boolean">cellIsReady</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor;UnstartedCell.sendSystemMessage.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.sendSystemMessage" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// systemMessages that are sent during replace need to jump to just after the last system message in the queue, so it's processed before other messages</span>
        <span class="keyword">val</span> <a title="Boolean" id="akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued">wasEnqueued</a> = <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.lookup" title="=&gt; akka.actor.Cell">lookup</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell" class="keyword">this</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell" class="keyword">this</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          @tailrec <span class="keyword">def</span> <a title="(i: java.util.ListIterator[Any], insertIntoIndex: Int)Boolean" id="akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue">tryEnqueue</a><span class="delimiter">(</span><a title="java.util.ListIterator[Any]" id="akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$1">i</a>: <span title="java.util.ListIterator[Any]">JListIterator</span><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()java.util.ListIterator[Any]">listIterator</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Int" id="akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$2">insertIntoIndex</a>: <span title="Int">Int</span> = -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
            <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$1" title="java.util.ListIterator[Any]">i</a>.<span title="()Boolean">hasNext</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue" title="(i: java.util.ListIterator[Any], insertIntoIndex: Int)Boolean">tryEnqueue</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$1" title="java.util.ListIterator[Any]">i</a>,
                <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$1" title="java.util.ListIterator[Any]">i</a>.<span title="()Any">next</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">]</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$1" title="java.util.ListIterator[Any]">i</a>.<span title="()Int">nextIndex</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// update last sysmsg seen so far</span>
                <span class="keyword">else</span> <a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$2" title="Int">insertIntoIndex</a><span class="delimiter">)</span> <span class="comment">// or just keep the last seen one</span>
            <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$2" title="Int">insertIntoIndex</a> <span title="(x: Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="(x$1: Any)Boolean">offer</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="(r: =&gt; Unit)scala.util.Try[Unit]">Try</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="(x$1: Int, x$2: Any)Unit">add</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue$default$2" title="Int">insertIntoIndex</a>, <a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isSuccess</span>
          <a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued.tryEnqueue" title="(i: java.util.ListIterator[Any], insertIntoIndex: Int)Boolean">tryEnqueue</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="(x$1: Any)Boolean">offer</span><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.wasEnqueued" title="Boolean">wasEnqueued</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Warning" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Warning">Warning</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;UnstartedCell" title="()Class[_]">getClass</a>, <span title="String(&quot;dropping system message &quot;)" class="string">&quot;dropping system message &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; due to enqueue failure&quot;)" class="string">&quot; due to enqueue failure&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.actor;UnstartedCell.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.actor;UnstartedCell.sendSystemMessage.qual$1">deadLetters</a> <a href="ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.actor;UnstartedCell.sendSystemMessage.x$3">!</a> <a href="ActorRef.scala.html#akka.actor;DeadLetter" title="(message: Any, sender: akka.actor.ActorRef, recipient: akka.actor.ActorRef)akka.actor.DeadLetter">DeadLetter</a><a title="akka.actor.DeadLetter" id="akka.actor;UnstartedCell.sendSystemMessage.x$2" class="delimiter">(</a><a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a>, <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>, <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span>Mailbox.<span title="Boolean(false)">debug</span><span class="delimiter">)</span> <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a><span title="String(&quot; temp queueing system &quot;)"> temp queueing system $</span><a href="#akka.actor;UnstartedCell.sendSystemMessage.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="()Unit">unlock</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;UnstartedCell.isLocal">isLocal</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(cell: akka.actor.Cell)Boolean" id="akka.actor;UnstartedCell.cellIsReady">cellIsReady</a><span class="delimiter">(</span><a title="akka.actor.Cell" id="akka.actor;UnstartedCell.cellIsReady.cell">cell</a>: <a href="ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady.cell" title="akka.actor.Cell">cell</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.actor;UnstartedCell" title="akka.actor.UnstartedCell" class="keyword">this</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady.cell" title="akka.actor.Cell">cell</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;UnstartedCell.hasMessages">hasMessages</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor;UnstartedCell.locked" title="(body: =&gt; Boolean)Boolean">locked</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;UnstartedCell.hasMessages.cell">cell</a> = <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
    <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady" title="(cell: akka.actor.Cell)Boolean">cellIsReady</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.hasMessages.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.hasMessages.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.hasMessages" title="=&gt; Boolean">hasMessages</a> <span class="keyword">else</span> <span title="=&gt; Boolean">!</span><a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()Boolean">isEmpty</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Int" id="akka.actor;UnstartedCell.numberOfMessages">numberOfMessages</a>: <span title="Int">Int</span> = <a href="#akka.actor;UnstartedCell.locked" title="(body: =&gt; Int)Int">locked</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.Cell" id="akka.actor;UnstartedCell.numberOfMessages.cell">cell</a> = <a href="#akka.actor;UnstartedCell.self" title="=&gt; akka.actor.RepointableActorRef">self</a>.<a href="#akka.actor;RepointableActorRef.underlying" title="=&gt; akka.actor.Cell">underlying</a>
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.cellIsReady" title="(cell: akka.actor.Cell)Boolean">cellIsReady</a><span class="delimiter">(</span><a href="#akka.actor;UnstartedCell.numberOfMessages.cell" title="akka.actor.Cell">cell</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor;UnstartedCell.numberOfMessages.cell" title="akka.actor.Cell">cell</a>.<a href="ActorCell.scala.html#akka.actor;Cell.numberOfMessages" title="=&gt; Int">numberOfMessages</a> <span class="keyword">else</span> <a href="#akka.actor;UnstartedCell.queue" title="java.util.LinkedList[Any]">queue</a>.<span title="()Int">size</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="akka.actor;UnstartedCell.locked">locked</a><span class="delimiter">[</span><a title="" id="akka.actor;UnstartedCell.locked;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.actor;UnstartedCell.locked.body">body</a>: ⇒ T<span class="delimiter">)</span>: <a href="#akka.actor;UnstartedCell.locked;T" title="T">T</a> = <span class="delimiter">{</span>
    <a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="()Unit">lock</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#akka.actor;UnstartedCell.locked.body" title="=&gt; T">body</a> <span class="keyword">finally</span> <a href="#akka.actor;UnstartedCell.lock" title="java.util.concurrent.locks.ReentrantLock">lock</a>.<span title="()Unit">unlock</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
