<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-remote/remote/transport/FailureInjectorTransportAdapter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.remote.transport

<span class="keyword">import</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter.type">FailureInjectorTransportAdapter</a>._
<span class="keyword">import</span> akka.AkkaException
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> Address, ExtendedActorSystem <span class="delimiter">}</span>
<span class="keyword">import</span> akka.event.Logging
<span class="keyword">import</span> akka.remote.transport.<a href="Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<span class="delimiter">{</span> HandleEvent, HandleEventListener <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.transport.<a href="Transport.scala.html#akka.remote.transport.Transport" title="akka.remote.transport.Transport.type">Transport</a>._
<span class="keyword">import</span> akka.util.ByteString
<span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap
<span class="keyword">import</span> scala.concurrent.forkjoin.ThreadLocalRandom
<span class="keyword">import</span> scala.concurrent.<span class="delimiter">{</span> Future, Promise <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.NoStackTrace
<span class="keyword">import</span> scala.util.Try

@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">case class</span> <a title="class FailureInjectorException extends akka.AkkaException with scala.util.control.NoStackTrace with Product with Serializable" id="akka.remote.transport.FailureInjectorException.readResolve">FailureInjectorException</a><a href="../../../akka-actor/AkkaException.scala.html#akka;AkkaException.<init>(2ecfebd739)" title="Product" class="delimiter">(</a><a title="String" id="akka.remote.transport;FailureInjectorException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../akka-actor/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorException.msg" title="String">msg</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span>

<span class="keyword">class</span> <a title="class FailureInjectorProvider extends AnyRef with akka.remote.transport.TransportAdapterProvider" id="akka.remote.transport;FailureInjectorProvider">FailureInjectorProvider</a> <a href="#akka.remote.transport;FailureInjectorProvider" title="akka.remote.transport.FailureInjectorProvider" class="keyword">extends</a> <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;TransportAdapterProvider" title="akka.remote.transport.TransportAdapterProvider">TransportAdapterProvider</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(wrappedTransport: akka.remote.transport.Transport, system: akka.actor.ExtendedActorSystem)akka.remote.transport.Transport" id="akka.remote.transport;FailureInjectorProvider.create">create</a><span class="delimiter">(</span><a title="akka.remote.transport.Transport" id="akka.remote.transport;FailureInjectorProvider.create.wrappedTransport">wrappedTransport</a>: <a href="Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a>, <a title="akka.actor.ExtendedActorSystem" id="akka.remote.transport;FailureInjectorProvider.create.system">system</a>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>: <a href="Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a> =
    <span title="akka.remote.transport.FailureInjectorTransportAdapter" class="keyword">new</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter">FailureInjectorTransportAdapter</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorProvider.create.wrappedTransport" title="akka.remote.transport.Transport">wrappedTransport</a>, <a href="#akka.remote.transport;FailureInjectorProvider.create.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.transport.FailureInjectorTransportAdapter.type" id="akka.remote.transport.FailureInjectorTransportAdapter">FailureInjectorTransportAdapter</a> <a href="#akka.remote.transport.FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter.type" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="String" id="akka.remote.transport.FailureInjectorTransportAdapter.FailureInjectorSchemeIdentifier">FailureInjectorSchemeIdentifier</a> = <span title="String(&quot;gremlin&quot;)" class="string">&quot;gremlin&quot;</span>

  <span class="keyword">trait</span> <a title="trait FailureInjectorCommand extends AnyRef" id="akka.remote.transport.FailureInjectorTransportAdapter;FailureInjectorCommand">FailureInjectorCommand</a>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class All extends AnyRef with Product with Serializable" id="akka.remote.transport.FailureInjectorTransportAdapter.All.readResolve">All</a><a href="#akka.remote.transport.FailureInjectorTransportAdapter.All.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" id="akka.remote.transport.FailureInjectorTransportAdapter;All.mode">mode</a>: <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class One extends AnyRef with Product with Serializable" id="akka.remote.transport.FailureInjectorTransportAdapter.One.readResolve">One</a><a href="#akka.remote.transport.FailureInjectorTransportAdapter.One.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.remote.transport.FailureInjectorTransportAdapter;One.remoteAddress">remoteAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" id="akka.remote.transport.FailureInjectorTransportAdapter;One.mode">mode</a>: <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a><span class="delimiter">)</span>

  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait GremlinMode extends AnyRef" id="akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode">GremlinMode</a>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case object</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.productElement.x$1" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type" id="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve">PassThru</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a> <span class="delimiter">{</span>
    <span class="comment">/**
     * Java API: get the singleton instance
     */</span>
    <span class="keyword">def</span> <a title="=&gt; akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type" id="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.getInstance">getInstance</a> = <span class="keyword">this</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Drop extends AnyRef with akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode with Product with Serializable" id="akka.remote.transport.FailureInjectorTransportAdapter.Drop.readResolve">Drop</a><a href="#akka.remote.transport.FailureInjectorTransportAdapter.Drop.readResolve" title="Product" class="delimiter">(</a><a title="Double" id="akka.remote.transport.FailureInjectorTransportAdapter;Drop.outboundDropP">outboundDropP</a>: <span title="Double">Double</span>, <a title="Double" id="akka.remote.transport.FailureInjectorTransportAdapter;Drop.inboundDropP">inboundDropP</a>: <span title="Double">Double</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class FailureInjectorTransportAdapter extends akka.remote.transport.AbstractTransportAdapter with akka.remote.transport.Transport.AssociationEventListener" id="akka.remote.transport;FailureInjectorTransportAdapter">FailureInjectorTransportAdapter</a><a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter" class="delimiter">(</a><a title="akka.remote.transport.Transport" id="akka.remote.transport;FailureInjectorTransportAdapter.wrappedTransport">wrappedTransport</a>: <a href="Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a>, <span class="keyword">val</span> <a title="akka.actor.ExtendedActorSystem" id="akka.remote.transport;FailureInjectorTransportAdapter.extendedSystem">extendedSystem</a>: <a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapter" title="akka.remote.transport.AbstractTransportAdapter">AbstractTransportAdapter</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.wrappedTransport" title="akka.remote.transport.Transport">wrappedTransport</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.extendedSystem" title="akka.actor.ExtendedActorSystem">extendedSystem</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor">dispatcher</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEventListener" title="akka.remote.transport.Transport.AssociationEventListener">AssociationEventListener</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.concurrent.forkjoin.ThreadLocalRandom" id="akka.remote.transport;FailureInjectorTransportAdapter.rng">rng</a> = <span title="scala.concurrent.forkjoin.ThreadLocalRandom.type">ThreadLocalRandom</span>.<span title="()scala.concurrent.forkjoin.ThreadLocalRandom">current</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.event.LoggingAdapter" id="akka.remote.transport;FailureInjectorTransportAdapter.log">log</a> = <a href="../../../akka-actor/event/Logging.scala.html#akka.event.Logging.apply(882ba4a885)" title="(system: akka.actor.ActorSystem, logSource: String)(implicit evidence$3: akka.event.LogSource[String])akka.event.LoggingAdapter">Logging</a><a href="../../../akka-actor/event/Logging.scala.html#akka.event.LogSource.fromString" title="=&gt; akka.event.LogSource[String]" class="delimiter">(</a><a href="#akka.remote.transport;FailureInjectorTransportAdapter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>, <span title="String(&quot;FailureInjector (gremlin)&quot;)" class="string">&quot;FailureInjector (gremlin)&quot;</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDebugLog">shouldDebugLog</a>: <span title="Boolean">Boolean</span> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;akka.remote.gremlin.debug&quot;)" class="string">&quot;akka.remote.gremlin.debug&quot;</span><span class="delimiter">)</span>

  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[akka.remote.transport.Transport.AssociationEventListener]" id="akka.remote.transport;FailureInjectorTransportAdapter.upstreamListener_=">upstreamListener</a>: <span title="Option[akka.remote.transport.Transport.AssociationEventListener]">Option</span><span class="delimiter">[</span>AssociationEventListener<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">private</span><span class="delimiter">[</span>transport<span class="delimiter">]</span> <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]" id="akka.remote.transport;FailureInjectorTransportAdapter.addressChaosTable">addressChaosTable</a> = <span title="java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]" class="keyword">new</span> <span title="java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]">ConcurrentHashMap</span><span class="delimiter">[</span>Address, GremlinMode<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" id="akka.remote.transport;FailureInjectorTransportAdapter.allMode_=">allMode</a>: <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a> = <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type">PassThru</a>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="akka.remote.transport;FailureInjectorTransportAdapter.addedSchemeIdentifier">addedSchemeIdentifier</a> = <a href="#akka.remote.transport.FailureInjectorTransportAdapter.FailureInjectorSchemeIdentifier" title="=&gt; String">FailureInjectorSchemeIdentifier</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Int" id="akka.remote.transport;FailureInjectorTransportAdapter.maximumOverhead">maximumOverhead</a> = <span title="Int(0)" class="int">0</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(cmd: Any)scala.concurrent.Future[Boolean]" id="akka.remote.transport;FailureInjectorTransportAdapter.managementCommand">managementCommand</a><span class="delimiter">(</span><a title="Any" id="akka.remote.transport;FailureInjectorTransportAdapter.managementCommand.cmd">cmd</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Boolean]">Future</span><span class="delimiter">[</span>Boolean<span class="delimiter">]</span> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.managementCommand.cmd" title="Any">cmd</a> <span title="scala.concurrent.Future[Boolean]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> All<span class="delimiter">(</span><span title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote.transport;FailureInjectorTransportAdapter.allMode_=" title="(x$1: akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode)Unit">allMode</a> = <span title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</span>
      <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: Boolean)scala.concurrent.Future[Boolean]">successful</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">case</span> One<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.managementCommand.address">address</a>, <span title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</span><span class="delimiter">)</span> ⇒
      <span class="comment">//  don't care about the protocol part - we are injected in the stack anyway!</span>
      <a href="#akka.remote.transport;FailureInjectorTransportAdapter.addressChaosTable" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]">addressChaosTable</a>.<span title="(x$1: akka.actor.Address, x$2: akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">put</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.managementCommand.address" title="akka.actor.Address">address</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.copy" title="(protocol: String, system: String, host: Option[String], port: Option[Int])akka.actor.Address">copy</a><span class="delimiter">(</span>protocol = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, system = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>, <span title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</span><span class="delimiter">)</span>
      <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: Boolean)scala.concurrent.Future[Boolean]">successful</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _ ⇒ <a href="#akka.remote.transport;FailureInjectorTransportAdapter.wrappedTransport" title="akka.remote.transport.Transport">wrappedTransport</a>.<a href="Transport.scala.html#akka.remote.transport;Transport.managementCommand" title="(cmd: Any)scala.concurrent.Future[Boolean]">managementCommand</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.managementCommand.cmd" title="Any">cmd</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(listenAddress: akka.actor.Address, listenerFuture: scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener])scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener]" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptListen">interceptListen</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptListen.listenAddress">listenAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
                                <a title="scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener]" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptListen.listenerFuture">listenerFuture</a>: <span title="scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener]">Future</span><span class="delimiter">[</span>AssociationEventListener<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener]">Future</span><span class="delimiter">[</span>AssociationEventListener<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.remote.transport;FailureInjectorTransportAdapter.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(cc2e600322)" title="(message: String)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;FailureInjectorTransport is active on this system. Gremlins might munch your packets.&quot;)" class="string">&quot;FailureInjectorTransport is active on this system. Gremlins might munch your packets.&quot;</span><span class="delimiter">)</span>
    <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptListen.listenerFuture" title="scala.concurrent.Future[akka.remote.transport.Transport.AssociationEventListener]">listenerFuture</a>.<span title="(pf: PartialFunction[akka.remote.transport.Transport.AssociationEventListener,Unit])(implicit executor: scala.concurrent.ExecutionContext)Unit">onSuccess</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.remote.transport.Transport.AssociationEventListener,Unit] with Serializable" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptListen;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="comment">// Side effecting: As this class is not an actor, the only way to safely modify state is through volatile vars.</span>
      <span class="comment">// Listen is called only during the initialization of the stack, and upstreamListener is not read before this</span>
      <span class="comment">// finishes.</span>
      <span class="keyword">case</span> <a title="akka.remote.transport.Transport.AssociationEventListener" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptListen;$anonfun.isDefinedAt.listener">listener</a>: <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEventListener" title="akka.remote.transport.Transport.AssociationEventListener">AssociationEventListener</a> ⇒ <a href="#akka.remote.transport;FailureInjectorTransportAdapter.upstreamListener_=" title="(x$1: Option[akka.remote.transport.Transport.AssociationEventListener])Unit">upstreamListener</a> = <span title="(x: akka.remote.transport.Transport.AssociationEventListener)Some[akka.remote.transport.Transport.AssociationEventListener]">Some</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptListen;$anonfun.isDefinedAt.listener" title="akka.remote.transport.Transport.AssociationEventListener">listener</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: akka.remote.transport.FailureInjectorTransportAdapter)scala.concurrent.Future[akka.remote.transport.FailureInjectorTransportAdapter]">successful</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(remoteAddress: akka.actor.Address, statusPromise: scala.concurrent.Promise[akka.remote.transport.AssociationHandle])Unit" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate">interceptAssociate</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.remoteAddress">remoteAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle]" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.statusPromise">statusPromise</a>: <span title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle]">Promise</span><span class="delimiter">[</span>AssociationHandle<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// Association is simulated to be failed if there was either an inbound or outbound message drop</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound" title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean">shouldDropInbound</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <span title="Unit.type">Unit</span>, <span title="String(&quot;interceptAssociate&quot;)" class="string">&quot;interceptAssociate&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound" title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean">shouldDropOutbound</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <span title="Unit.type">Unit</span>, <span title="String(&quot;interceptAssociate&quot;)" class="string">&quot;interceptAssociate&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.statusPromise" title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle]">statusPromise</a>.<span title="(t: Throwable)statusPromise.type">failure</span><span title="Unit" class="delimiter">(</span><span title="akka.remote.transport.FailureInjectorException" class="keyword">new</span> <a href="#akka.remote.transport.FailureInjectorException.readResolve" title="akka.remote.transport.FailureInjectorException">FailureInjectorException</a><span class="delimiter">(</span><span title="String(&quot;Simulated failure of association to &quot;)" class="string">&quot;Simulated failure of association to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.statusPromise" title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle]">statusPromise</a>.<span title="(other: scala.concurrent.Future[akka.remote.transport.AssociationHandle])statusPromise.type">completeWith</span><span title="Unit" class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.wrappedTransport" title="akka.remote.transport.Transport">wrappedTransport</a>.<a href="Transport.scala.html#akka.remote.transport;Transport.associate" title="(remoteAddress: akka.actor.Address)scala.concurrent.Future[akka.remote.transport.AssociationHandle]">associate</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span>.<span title="(f: akka.remote.transport.AssociationHandle =&gt; akka.remote.transport.FailureInjectorHandle)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.remote.transport.FailureInjectorHandle]">map</span> <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapter.ec" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">{</a> <a title="akka.remote.transport.AssociationHandle" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.handle">handle</a> ⇒
        <a href="#akka.remote.transport;FailureInjectorTransportAdapter.addressChaosTable" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]">addressChaosTable</a>.<span title="(x$1: akka.actor.Address, x$2: akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">putIfAbsent</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.handle" title="akka.remote.transport.AssociationHandle">handle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.remoteAddress" title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.qual$1">remoteAddress</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.copy$default$3" title="Option[String]" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.x$4">copy</a><span class="delimiter">(</span>protocol = <a title="String" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.x$1" class="string">&quot;&quot;</a>, system = <a title="String" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.x$2" class="string">&quot;&quot;</a><span class="delimiter">)</span>, <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type">PassThru</a><span class="delimiter">)</span>
        <span title="akka.remote.transport.FailureInjectorHandle" class="keyword">new</span> <a href="#akka.remote.transport.FailureInjectorHandle.readResolve" title="akka.remote.transport.FailureInjectorHandle">FailureInjectorHandle</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptAssociate.$anonfun.handle" title="akka.remote.transport.AssociationHandle">handle</a>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter" class="keyword">this</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ev: akka.remote.transport.Transport.AssociationEvent)Unit" id="akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0)">notify</a><span class="delimiter">(</span><a title="akka.remote.transport.Transport.AssociationEvent" id="akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).ev">ev</a>: <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEvent" title="akka.remote.transport.Transport.AssociationEvent">AssociationEvent</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).ev" title="akka.remote.transport.Transport.AssociationEvent">ev</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> InboundAssociation<span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle" id="akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).handle">handle</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound" title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean">shouldDropInbound</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).handle" title="akka.remote.transport.AssociationHandle">handle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).ev" title="akka.remote.transport.Transport.AssociationEvent">ev</a>, <span title="String(&quot;notify&quot;)" class="string">&quot;notify&quot;</span><span class="delimiter">)</span> ⇒ <span class="comment">//Ignore</span>
    <span class="keyword">case</span> _ ⇒ <a href="#akka.remote.transport;FailureInjectorTransportAdapter.upstreamListener_=" title="=&gt; Option[akka.remote.transport.Transport.AssociationEventListener]">upstreamListener</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.transport.Transport.AssociationEventListener" id="akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).listener">listener</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).listener" title="akka.remote.transport.Transport.AssociationEventListener">listener</a> <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEventListener.notify(1d1bf972b0)" title="(ev: akka.remote.transport.Transport.AssociationEvent)Unit">notify</a> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation" title="(ev: akka.remote.transport.Transport.AssociationEvent)akka.remote.transport.Transport.AssociationEvent">interceptInboundAssociation</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.notify(1d1bf972b0).ev" title="akka.remote.transport.Transport.AssociationEvent">ev</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">None</span>           ⇒
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ev: akka.remote.transport.Transport.AssociationEvent)akka.remote.transport.Transport.AssociationEvent" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation">interceptInboundAssociation</a><span class="delimiter">(</span><a title="akka.remote.transport.Transport.AssociationEvent" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation.ev">ev</a>: <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEvent" title="akka.remote.transport.Transport.AssociationEvent">AssociationEvent</a><span class="delimiter">)</span>: <a href="Transport.scala.html#akka.remote.transport.Transport;AssociationEvent" title="akka.remote.transport.Transport.AssociationEvent">AssociationEvent</a> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation.ev" title="akka.remote.transport.Transport.AssociationEvent">ev</a> <span title="akka.remote.transport.Transport.AssociationEvent" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> InboundAssociation<span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle" id="akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation.handle">handle</a><span class="delimiter">)</span> ⇒ <a href="Transport.scala.html#akka.remote.transport.Transport;InboundAssociation" title="(association: akka.remote.transport.AssociationHandle)akka.remote.transport.Transport.InboundAssociation">InboundAssociation</a><span class="delimiter">(</span><a href="#akka.remote.transport.FailureInjectorHandle.readResolve" title="(_wrappedHandle: akka.remote.transport.AssociationHandle, gremlinAdapter: akka.remote.transport.FailureInjectorTransportAdapter)akka.remote.transport.FailureInjectorHandle">FailureInjectorHandle</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation.handle" title="akka.remote.transport.AssociationHandle">handle</a>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _                          ⇒ <a href="#akka.remote.transport;FailureInjectorTransportAdapter.interceptInboundAssociation.ev" title="akka.remote.transport.Transport.AssociationEvent">ev</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound">shouldDropInbound</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.remoteAddress">remoteAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Any" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.instance">instance</a>: <span title="Any">Any</span>, <a title="String" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.debugMessage">debugMessage</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.chaosMode" title="(remoteAddress: akka.actor.Address)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">chaosMode</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type">PassThru</a> ⇒ <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">case</span> Drop<span class="delimiter">(</span>_, <a title="Double" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.inboundDropP">inboundDropP</a><span class="delimiter">)</span> ⇒
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.rng" title="=&gt; scala.concurrent.forkjoin.ThreadLocalRandom">rng</a>.<span title="()Double">nextDouble</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Double)Boolean">&lt;=</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.inboundDropP" title="Double">inboundDropP</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDebugLog" title="=&gt; Boolean">shouldDebugLog</a><span class="delimiter">)</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(6c666e4343)" title="(template: String, arg1: Any, arg2: Any, arg3: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Dropping inbound [{}] for [{}] {}&quot;)" class="string">&quot;Dropping inbound [{}] for [{}] {}&quot;</span>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.instance" title="Any">instance</a>.<span title="()Class[_]">getClass</span>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound.debugMessage" title="String">debugMessage</a><span class="delimiter">)</span>
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound">shouldDropOutbound</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.remoteAddress">remoteAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Any" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.instance">instance</a>: <span title="Any">Any</span>, <a title="String" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.debugMessage">debugMessage</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.chaosMode" title="(remoteAddress: akka.actor.Address)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">chaosMode</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type">PassThru</a> ⇒ <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">case</span> Drop<span class="delimiter">(</span><a title="Double" id="akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.outboundDropP">outboundDropP</a>, _<span class="delimiter">)</span> ⇒
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.rng" title="=&gt; scala.concurrent.forkjoin.ThreadLocalRandom">rng</a>.<span title="()Double">nextDouble</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Double)Boolean">&lt;=</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.outboundDropP" title="Double">outboundDropP</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDebugLog" title="=&gt; Boolean">shouldDebugLog</a><span class="delimiter">)</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(6c666e4343)" title="(template: String, arg1: Any, arg2: Any, arg3: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Dropping outbound [{}] for [{}] {}&quot;)" class="string">&quot;Dropping outbound [{}] for [{}] {}&quot;</span>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.instance" title="Any">instance</a>.<span title="()Class[_]">getClass</span>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound.debugMessage" title="String">debugMessage</a><span class="delimiter">)</span>
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(remoteAddress: akka.actor.Address)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" id="akka.remote.transport;FailureInjectorTransportAdapter.chaosMode">chaosMode</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.remote.transport;FailureInjectorTransportAdapter.chaosMode.remoteAddress">remoteAddress</a>: <a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <a href="#akka.remote.transport.FailureInjectorTransportAdapter;GremlinMode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">GremlinMode</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" id="akka.remote.transport;FailureInjectorTransportAdapter.chaosMode.mode">mode</a> = <a href="#akka.remote.transport;FailureInjectorTransportAdapter.addressChaosTable" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.Address,akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode]">addressChaosTable</a>.<span title="(x$1: Any)akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">get</span><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.chaosMode.remoteAddress" title="akka.actor.Address">remoteAddress</a>.<a href="../../../akka-actor/actor/Address.scala.html#akka.actor;Address.copy" title="(protocol: String, system: String, host: Option[String], port: Option[Int])akka.actor.Address">copy</a><span class="delimiter">(</span>protocol = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, system = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorTransportAdapter.chaosMode.mode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#akka.remote.transport.FailureInjectorTransportAdapter.PassThru.readResolve" title="akka.remote.transport.FailureInjectorTransportAdapter.PassThru.type">PassThru</a> <span class="keyword">else</span> <a href="#akka.remote.transport;FailureInjectorTransportAdapter.chaosMode.mode" title="akka.remote.transport.FailureInjectorTransportAdapter.GremlinMode">mode</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class FailureInjectorHandle extends akka.remote.transport.AbstractTransportAdapterHandle with akka.remote.transport.AssociationHandle.HandleEventListener with Product with Serializable" id="akka.remote.transport.FailureInjectorHandle.readResolve">FailureInjectorHandle</a><a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.<init>(cfb8773fb8)" title="Product" class="delimiter">(</a><a title="akka.remote.transport.AssociationHandle" id="akka.remote.transport;FailureInjectorHandle._wrappedHandle">_wrappedHandle</a>: <a href="Transport.scala.html#akka.remote.transport;AssociationHandle" title="akka.remote.transport.AssociationHandle">AssociationHandle</a>,
                                                 <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.remote.transport.FailureInjectorTransportAdapter" id="akka.remote.transport;FailureInjectorHandle.gremlinAdapter">gremlinAdapter</a>: <a href="#akka.remote.transport;FailureInjectorTransportAdapter" title="akka.remote.transport.FailureInjectorTransportAdapter">FailureInjectorTransportAdapter</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle" title="akka.remote.transport.AbstractTransportAdapterHandle">AbstractTransportAdapterHandle</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorHandle._wrappedHandle" title="akka.remote.transport.AssociationHandle">_wrappedHandle</a>, <a href="#akka.remote.transport.FailureInjectorTransportAdapter.FailureInjectorSchemeIdentifier" title="=&gt; String">FailureInjectorSchemeIdentifier</a><span class="delimiter">)</span>
  <span class="keyword">with</span> <a href="Transport.scala.html#akka.remote.transport.AssociationHandle;HandleEventListener" title="akka.remote.transport.AssociationHandle.HandleEventListener">HandleEventListener</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.transport;FailureInjectorHandle.gremlinAdapter" title="=&gt; akka.remote.transport.FailureInjectorTransportAdapter">gremlinAdapter</a>.<a href="#akka.remote.transport;FailureInjectorTransportAdapter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>.dispatcher

  @volatile <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.remote.transport.AssociationHandle.HandleEventListener" id="akka.remote.transport;FailureInjectorHandle.upstreamListener_=">upstreamListener</a>: <a href="Transport.scala.html#akka.remote.transport.AssociationHandle;HandleEventListener" title="akka.remote.transport.AssociationHandle.HandleEventListener">HandleEventListener</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]" id="akka.remote.transport;FailureInjectorHandle.readHandlerPromise">readHandlerPromise</a>: <span title="scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">Promise</span><span class="delimiter">[</span>HandleEventListener<span class="delimiter">]</span> = <span title="()scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">Promise</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <a href="#akka.remote.transport;FailureInjectorHandle.readHandlerPromise" title="=&gt; scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">readHandlerPromise</a>.<span title="=&gt; scala.concurrent.Future[akka.remote.transport.AssociationHandle.HandleEventListener]">future</span>.<span title="(pf: PartialFunction[akka.remote.transport.AssociationHandle.HandleEventListener,scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]])(implicit executor: scala.concurrent.ExecutionContext)Unit">onSuccess</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.remote.transport.AssociationHandle.HandleEventListener,scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]] with Serializable" id="akka.remote.transport;FailureInjectorHandle.<local FailureInjectorHandle>;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.remote.transport.AssociationHandle.HandleEventListener" id="akka.remote.transport;FailureInjectorHandle.<local FailureInjectorHandle>;$anonfun.isDefinedAt.listener">listener</a>: <a href="Transport.scala.html#akka.remote.transport.AssociationHandle;HandleEventListener" title="akka.remote.transport.AssociationHandle.HandleEventListener">HandleEventListener</a> ⇒
      <a href="#akka.remote.transport;FailureInjectorHandle.upstreamListener_=" title="(x$1: akka.remote.transport.AssociationHandle.HandleEventListener)Unit">upstreamListener</a> = <a href="#akka.remote.transport;FailureInjectorHandle.<local FailureInjectorHandle>;$anonfun.isDefinedAt.listener" title="akka.remote.transport.AssociationHandle.HandleEventListener">listener</a>
      <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.wrappedHandle" title="=&gt; akka.remote.transport.AssociationHandle">wrappedHandle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.readHandlerPromise" title="=&gt; scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">readHandlerPromise</a>.<span title="(v: akka.remote.transport.AssociationHandle.HandleEventListener)scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">success</span><span class="delimiter">(</span><a href="#akka.remote.transport.FailureInjectorHandle.readResolve" title="akka.remote.transport.FailureInjectorHandle" class="keyword">this</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(payload: akka.util.ByteString)Boolean" id="akka.remote.transport;FailureInjectorHandle.write">write</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.remote.transport;FailureInjectorHandle.write.payload">payload</a>: <a href="../../../akka-actor/util/ByteString.scala.html#akka.util;ByteString" title="akka.util.ByteString">ByteString</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote.transport;FailureInjectorHandle.gremlinAdapter" title="=&gt; akka.remote.transport.FailureInjectorTransportAdapter">gremlinAdapter</a>.<a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropOutbound" title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean">shouldDropOutbound</a><span class="delimiter">(</span><a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.wrappedHandle" title="=&gt; akka.remote.transport.AssociationHandle">wrappedHandle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.transport;FailureInjectorHandle.write.payload" title="akka.util.ByteString">payload</a>, <span title="String(&quot;handler.write&quot;)" class="string">&quot;handler.write&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.wrappedHandle" title="=&gt; akka.remote.transport.AssociationHandle">wrappedHandle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.write" title="(payload: akka.util.ByteString)Boolean">write</a><span class="delimiter">(</span><a href="#akka.remote.transport;FailureInjectorHandle.write.payload" title="akka.util.ByteString">payload</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.transport;FailureInjectorHandle.disassociate">disassociate</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.wrappedHandle" title="=&gt; akka.remote.transport.AssociationHandle">wrappedHandle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.disassociate" title="()Unit">disassociate</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ev: akka.remote.transport.AssociationHandle.HandleEvent)Unit" id="akka.remote.transport;FailureInjectorHandle.notify(a3fa5b160e)">notify</a><span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle.HandleEvent" id="akka.remote.transport;FailureInjectorHandle.notify(a3fa5b160e).ev">ev</a>: <a href="Transport.scala.html#akka.remote.transport.AssociationHandle;HandleEvent" title="akka.remote.transport.AssociationHandle.HandleEvent">HandleEvent</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote.transport;FailureInjectorHandle.gremlinAdapter" title="=&gt; akka.remote.transport.FailureInjectorTransportAdapter">gremlinAdapter</a>.<a href="#akka.remote.transport;FailureInjectorTransportAdapter.shouldDropInbound" title="(remoteAddress: akka.actor.Address, instance: Any, debugMessage: String)Boolean">shouldDropInbound</a><span class="delimiter">(</span><a href="AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.wrappedHandle" title="=&gt; akka.remote.transport.AssociationHandle">wrappedHandle</a>.<a href="Transport.scala.html#akka.remote.transport;AssociationHandle.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.transport;FailureInjectorHandle.notify(a3fa5b160e).ev" title="akka.remote.transport.AssociationHandle.HandleEvent">ev</a>, <span title="String(&quot;handler.notify&quot;)" class="string">&quot;handler.notify&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.remote.transport;FailureInjectorHandle.upstreamListener_=" title="=&gt; akka.remote.transport.AssociationHandle.HandleEventListener">upstreamListener</a> <a href="Transport.scala.html#akka.remote.transport.AssociationHandle;HandleEventListener.notify(a3fa5b160e)" title="(ev: akka.remote.transport.AssociationHandle.HandleEvent)Unit">notify</a> <a href="#akka.remote.transport;FailureInjectorHandle.notify(a3fa5b160e).ev" title="akka.remote.transport.AssociationHandle.HandleEvent">ev</a>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
