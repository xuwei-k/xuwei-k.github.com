<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-remote/remote/Endpoint.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.remote

<span class="keyword">import</span> akka.actor.OneForOneStrategy
<span class="keyword">import</span> akka.actor.<a href="../../akka-actor/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>._
<span class="keyword">import</span> akka.actor.Terminated
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.dispatch.sysmsg.SystemMessage
<span class="keyword">import</span> akka.event.<span class="delimiter">{</span> Logging, LoggingAdapter <span class="delimiter">}</span>
<span class="keyword">import</span> akka.pattern.pipe
<span class="keyword">import</span> akka.remote.<a href="Remoting.scala.html#akka.remote.EndpointManager" title="akka.remote.EndpointManager.type">EndpointManager</a>.<span class="delimiter">{</span> ResendState, Link, Send <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.<a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<span class="delimiter">{</span> StoppedReading, FlushAndStop <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.<span title="akka.remote.WireFormats.type">WireFormats</span>.SerializedMessage
<span class="keyword">import</span> akka.remote.transport.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec.type">AkkaPduCodec</a>.Message
<span class="keyword">import</span> akka.remote.transport.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<span class="delimiter">{</span> DisassociateInfo, ActorHandleEventListener, Disassociated, InboundPayload <span class="delimiter">}</span>
<span class="keyword">import</span> akka.remote.transport.<a href="transport/Transport.scala.html#akka.remote.transport.Transport" title="akka.remote.transport.Transport.type">Transport</a>.InvalidAssociationException
<span class="keyword">import</span> akka.remote.transport._
<span class="keyword">import</span> akka.serialization.Serialization
<span class="keyword">import</span> akka.util.ByteString
<span class="keyword">import</span> akka.<span class="delimiter">{</span> OnlyCauseStackTrace, AkkaException <span class="delimiter">}</span>
<span class="keyword">import</span> java.io.NotSerializableException
<span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.concurrent.duration.<span class="delimiter">{</span> Duration, Deadline <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> java.util.concurrent.locks.LockSupport
<span class="keyword">import</span> scala.concurrent.Future
<span class="keyword">import</span> scala.concurrent.blocking

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait InboundMessageDispatcher extends AnyRef" id="akka.remote;InboundMessageDispatcher">InboundMessageDispatcher</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(recipient: akka.actor.InternalActorRef, recipientAddress: akka.actor.Address, serializedMessage: akka.remote.WireFormats.SerializedMessage, senderOption: Option[akka.actor.ActorRef])Unit" id="akka.remote;InboundMessageDispatcher.dispatch">dispatch</a><span class="delimiter">(</span><a title="akka.actor.InternalActorRef" id="akka.remote;InboundMessageDispatcher.dispatch.recipient">recipient</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>,
               <a title="akka.actor.Address" id="akka.remote;InboundMessageDispatcher.dispatch.recipientAddress">recipientAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
               <a title="akka.remote.WireFormats.SerializedMessage" id="akka.remote;InboundMessageDispatcher.dispatch.serializedMessage">serializedMessage</a>: <span title="akka.remote.WireFormats.SerializedMessage">SerializedMessage</span>,
               <a title="Option[akka.actor.ActorRef]" id="akka.remote;InboundMessageDispatcher.dispatch.senderOption">senderOption</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class DefaultMessageDispatcher extends AnyRef with akka.remote.InboundMessageDispatcher" id="akka.remote;DefaultMessageDispatcher">DefaultMessageDispatcher</a><a href="#akka.remote;DefaultMessageDispatcher" title="akka.remote.DefaultMessageDispatcher" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ExtendedActorSystem" id="akka.remote;DefaultMessageDispatcher.system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a>,
                                               <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.remote.RemoteActorRefProvider" id="akka.remote;DefaultMessageDispatcher.provider">provider</a>: <a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider" title="akka.remote.RemoteActorRefProvider">RemoteActorRefProvider</a>,
                                               <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.event.LoggingAdapter" id="akka.remote;DefaultMessageDispatcher.log">log</a>: <a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote;InboundMessageDispatcher" title="akka.remote.InboundMessageDispatcher">InboundMessageDispatcher</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.remote;DefaultMessageDispatcher.remoteDaemon">remoteDaemon</a> = <a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.remoteDaemon" title="=&gt; akka.actor.InternalActorRef">remoteDaemon</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(recipient: akka.actor.InternalActorRef, recipientAddress: akka.actor.Address, serializedMessage: akka.remote.WireFormats.SerializedMessage, senderOption: Option[akka.actor.ActorRef])Unit" id="akka.remote;DefaultMessageDispatcher.dispatch">dispatch</a><span class="delimiter">(</span><a title="akka.actor.InternalActorRef" id="akka.remote;DefaultMessageDispatcher.dispatch.recipient">recipient</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>,
                        <a title="akka.actor.Address" id="akka.remote;DefaultMessageDispatcher.dispatch.recipientAddress">recipientAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
                        <a title="akka.remote.WireFormats.SerializedMessage" id="akka.remote;DefaultMessageDispatcher.dispatch.serializedMessage">serializedMessage</a>: <span title="akka.remote.WireFormats.SerializedMessage">SerializedMessage</span>,
                        <a title="Option[akka.actor.ActorRef]" id="akka.remote;DefaultMessageDispatcher.dispatch.senderOption">senderOption</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span class="keyword">import</span> <a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.remoteSettings" title="=&gt; akka.remote.RemoteSettings">remoteSettings</a>._

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="AnyRef" id="akka.remote;DefaultMessageDispatcher.dispatch.payload">payload</a>: <span title="AnyRef">AnyRef</span> = <a href="MessageSerializer.scala.html#akka.remote.MessageSerializer" title="akka.remote.MessageSerializer.type">MessageSerializer</a>.<a href="MessageSerializer.scala.html#akka.remote.MessageSerializer.deserialize" title="(system: akka.actor.ExtendedActorSystem, messageProtocol: akka.remote.WireFormats.SerializedMessage)AnyRef">deserialize</a><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.serializedMessage" title="akka.remote.WireFormats.SerializedMessage">serializedMessage</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Class[_]" id="akka.remote;DefaultMessageDispatcher.dispatch.payloadClass">payloadClass</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span title="Class[?0]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="=&gt; AnyRef">payload</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="=&gt; AnyRef">payload</a>.<span title="()Class[_]">getClass</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote;DefaultMessageDispatcher.dispatch.sender">sender</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.remote;DefaultMessageDispatcher.dispatch.senderOption" title="Option[akka.actor.ActorRef]">senderOption</a>.<span title="(default: =&gt; akka.actor.ActorRef)akka.actor.ActorRef">getOrElse</span><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorPath" id="akka.remote;DefaultMessageDispatcher.dispatch.originalReceiver">originalReceiver</a> = <a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipient" title="akka.actor.InternalActorRef">recipient</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>

    <span class="keyword">def</span> <a title="=&gt; String" id="akka.remote;DefaultMessageDispatcher.dispatch.msgLog">msgLog</a> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;RemoteMessage: [&quot;)">RemoteMessage: [$</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="=&gt; AnyRef">payload</a><span title="String(&quot;] to [&quot;)">] to [$</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipient" title="akka.actor.InternalActorRef">recipient</a><span title="String(&quot;]&lt;+[&quot;)">]&lt;+[$</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.originalReceiver" title="akka.actor.ActorPath">originalReceiver</a><span title="String(&quot;] from [&quot;)">] from [$</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.sender" title="akka.actor.ActorRef">sender</a><span title="String(&quot;()]&quot;)" class="string">()]&quot;</span>

    <a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipient" title="akka.actor.InternalActorRef">recipient</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>

      <span class="keyword">case</span> <a href="#akka.remote;DefaultMessageDispatcher.remoteDaemon" title="=&gt; akka.actor.InternalActorRef">`remoteDaemon`</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.UntrustedMode" title="=&gt; Boolean">UntrustedMode</a><span class="delimiter">)</span> <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;dropping daemon message in untrusted mode&quot;)" class="string">&quot;dropping daemon message in untrusted mode&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.LogReceive" title="=&gt; Boolean">LogReceive</a><span class="delimiter">)</span> <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;received daemon message {}&quot;)" class="string">&quot;received daemon message {}&quot;</span>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.msgLog" title="=&gt; String">msgLog</a><span class="delimiter">)</span>
          <a href="#akka.remote;DefaultMessageDispatcher.remoteDaemon" title="=&gt; akka.actor.InternalActorRef">remoteDaemon</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote;DefaultMessageDispatcher.dispatch.x$14">!</a> <a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="AnyRef" id="akka.remote;DefaultMessageDispatcher.dispatch.x$13">payload</a>
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <a title="akka.actor.InternalActorRef" id="akka.remote;DefaultMessageDispatcher.dispatch.l">l</a> @ <span class="delimiter">(</span>_: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;LocalRef" title="akka.actor.LocalRef">LocalRef</a> | _: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;RepointableRef" title="akka.actor.RepointableRef">RepointableRef</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.remote;DefaultMessageDispatcher.dispatch.l" title="akka.actor.InternalActorRef">l</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef.isLocal" title="=&gt; Boolean">isLocal</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.LogReceive" title="=&gt; Boolean">LogReceive</a><span class="delimiter">)</span> <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;received local message {}&quot;)" class="string">&quot;received local message {}&quot;</span>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.msgLog" title="=&gt; String">msgLog</a><span class="delimiter">)</span>
        <a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="=&gt; AnyRef">payload</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="akka.actor.ActorSelectionMessage" id="akka.remote;DefaultMessageDispatcher.dispatch.sel">sel</a>: <a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor;ActorSelectionMessage" title="akka.actor.ActorSelectionMessage">ActorSelectionMessage</a> ⇒
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.UntrustedMode" title="=&gt; Boolean">UntrustedMode</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.TrustedSelectionPaths" title="=&gt; Set[String]">TrustedSelectionPaths</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.sel" title="akka.actor.ActorSelectionMessage">sel</a>.<a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor;ActorSelectionMessage.elements" title="=&gt; scala.collection.immutable.Iterable[akka.actor.SelectionPathElement]">elements</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
              <a href="#akka.remote;DefaultMessageDispatcher.dispatch.sel" title="akka.actor.ActorSelectionMessage">sel</a>.<a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor;ActorSelectionMessage.msg" title="=&gt; Any">msg</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;PossiblyHarmful" title="akka.actor.PossiblyHarmful">PossiblyHarmful</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.remote;DefaultMessageDispatcher.dispatch.l" title="akka.actor.InternalActorRef">l</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.rootGuardian" title="=&gt; akka.actor.InternalActorRef">rootGuardian</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span class="string">&quot;operating in UntrustedMode, dropping inbound actor selection to [{}], &quot;</span> <span title="String(&quot;operating in UntrustedMode, dropping inbound actor selection to [{}], allow it by adding the path to \'akka.remote.trusted-selection-paths\' configuration&quot;)">+</span>
                <span class="string">&quot;allow it by adding the path to 'akka.remote.trusted-selection-paths' configuration&quot;</span>,
                <a href="#akka.remote;DefaultMessageDispatcher.dispatch.sel" title="akka.actor.ActorSelectionMessage">sel</a>.<a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor;ActorSelectionMessage.elements" title="=&gt; scala.collection.immutable.Iterable[akka.actor.SelectionPathElement]">elements</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <span class="comment">// run the receive logic for ActorSelectionMessage here to make sure it is not stuck on busy user actor</span>
              <a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor.ActorSelection" title="akka.actor.ActorSelection.type">ActorSelection</a>.<a href="../../akka-actor/actor/ActorSelection.scala.html#akka.actor.ActorSelection.deliverSelection" title="(anchor: akka.actor.InternalActorRef, sender: akka.actor.ActorRef, sel: akka.actor.ActorSelectionMessage)Unit">deliverSelection</a><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.l" title="akka.actor.InternalActorRef">l</a>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.sender" title="akka.actor.ActorRef">sender</a>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.sel" title="akka.actor.ActorSelectionMessage">sel</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="akka.actor.PossiblyHarmful">msg</span>: <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;PossiblyHarmful" title="akka.actor.PossiblyHarmful">PossiblyHarmful</a> <span class="keyword">if</span> <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.UntrustedMode" title="=&gt; Boolean">UntrustedMode</a> ⇒
            <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;operating in UntrustedMode, dropping inbound PossiblyHarmful message of type [{}]&quot;)" class="string">&quot;operating in UntrustedMode, dropping inbound PossiblyHarmful message of type [{}]&quot;</span>, <span title="akka.actor.PossiblyHarmful">msg</span>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="akka.dispatch.sysmsg.SystemMessage">msg</span>: <a href="../../akka-actor/dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a> ⇒ <a href="#akka.remote;DefaultMessageDispatcher.dispatch.l" title="akka.actor.InternalActorRef">l</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef.sendSystemMessage" title="(message: akka.dispatch.sysmsg.SystemMessage)Unit">sendSystemMessage</a><span class="delimiter">(</span><span title="akka.dispatch.sysmsg.SystemMessage">msg</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="AnyRef">msg</span>                ⇒ <a href="#akka.remote;DefaultMessageDispatcher.dispatch.l" title="akka.actor.InternalActorRef">l</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a><span class="delimiter">(</span><span title="AnyRef">msg</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.sender" title="akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="akka.actor.InternalActorRef">r</span> @ <span class="delimiter">(</span>_: <a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteRef" title="akka.remote.RemoteRef">RemoteRef</a> | _: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;RepointableRef" title="akka.actor.RepointableRef">RepointableRef</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><span title="akka.actor.InternalActorRef">r</span>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;InternalActorRef.isLocal" title="=&gt; Boolean">isLocal</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.UntrustedMode" title="=&gt; Boolean">UntrustedMode</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.LogReceive" title="=&gt; Boolean">LogReceive</a><span class="delimiter">)</span> <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;received remote-destined message {}&quot;)" class="string">&quot;received remote-destined message {}&quot;</span>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.msgLog" title="=&gt; String">msgLog</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.transport" title="=&gt; akka.remote.RemoteTransport">transport</a>.<a href="RemoteTransport.scala.html#akka.remote;RemoteTransport.addresses" title="(elem: akka.actor.Address)Boolean">addresses</a><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipientAddress" title="akka.actor.Address">recipientAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// if it was originally addressed to us but is in fact remote from our point of view (i.e. remote-deployed)</span>
          <span title="akka.actor.InternalActorRef">r</span>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.payload" title="=&gt; AnyRef">payload</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.remote;DefaultMessageDispatcher.dispatch.sender" title="akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(2f8315b3c9)" title="(template: String, arg1: Any, arg2: Any, arg3: Any, arg4: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;dropping message [{}] for non-local recipient [{}] arriving at [{}] inbound addresses are [{}]&quot;)" class="string">&quot;dropping message [{}] for non-local recipient [{}] arriving at [{}] inbound addresses are [{}]&quot;</span>,
            <a href="#akka.remote;DefaultMessageDispatcher.dispatch.payloadClass" title="=&gt; Class[_]">payloadClass</a>, <span title="akka.actor.InternalActorRef">r</span>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipientAddress" title="akka.actor.Address">recipientAddress</a>, <a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.transport" title="=&gt; akka.remote.RemoteTransport">transport</a>.<a href="RemoteTransport.scala.html#akka.remote;RemoteTransport.addresses" title="=&gt; scala.collection.immutable.Set[akka.actor.Address]">addresses</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="akka.actor.InternalActorRef">r</span> ⇒ <a href="#akka.remote;DefaultMessageDispatcher.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(2f8315b3c9)" title="(template: String, arg1: Any, arg2: Any, arg3: Any, arg4: Any)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;dropping message [{}] for unknown recipient [{}] arriving at [{}] inbound addresses are [{}]&quot;)" class="string">&quot;dropping message [{}] for unknown recipient [{}] arriving at [{}] inbound addresses are [{}]&quot;</span>,
        <a href="#akka.remote;DefaultMessageDispatcher.dispatch.payloadClass" title="=&gt; Class[_]">payloadClass</a>, <span title="akka.actor.InternalActorRef">r</span>, <a href="#akka.remote;DefaultMessageDispatcher.dispatch.recipientAddress" title="akka.actor.Address">recipientAddress</a>, <a href="#akka.remote;DefaultMessageDispatcher.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.transport" title="=&gt; akka.remote.RemoteTransport">transport</a>.<a href="RemoteTransport.scala.html#akka.remote;RemoteTransport.addresses" title="=&gt; scala.collection.immutable.Set[akka.actor.Address]">addresses</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class EndpointException extends akka.AkkaException with akka.OnlyCauseStackTrace" id="akka.remote;EndpointException">EndpointException</a><a href="#akka.remote;EndpointException" title="akka.remote.EndpointException" class="delimiter">(</a><a title="String" id="akka.remote;EndpointException.msg">msg</a>: <span title="String">String</span>, <a title="Throwable" id="akka.remote;EndpointException.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><a href="#akka.remote;EndpointException.msg" title="String">msg</a>, <a href="#akka.remote;EndpointException.cause" title="Throwable">cause</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../../akka-actor/AkkaException.scala.html#akka;OnlyCauseStackTrace" title="akka.OnlyCauseStackTrace">OnlyCauseStackTrace</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(msg: String)akka.remote.EndpointException" id="akka.remote;EndpointException.<init>(a76a789b14)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.remote;EndpointException.<init>(a76a789b14).msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#akka.remote;EndpointException" title="EndpointException.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.remote;EndpointException.<init>(a76a789b14).msg" title="String">msg</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait AssociationProblem extends AnyRef" id="akka.remote;AssociationProblem">AssociationProblem</a>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class ShutDownAssociation extends akka.remote.EndpointException with akka.remote.AssociationProblem with Product with Serializable" id="akka.remote.ShutDownAssociation.readResolve">ShutDownAssociation</a><a href="#akka.remote.ShutDownAssociation.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.remote;ShutDownAssociation.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.actor.Address" id="akka.remote;ShutDownAssociation.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Throwable" id="akka.remote;ShutDownAssociation.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Shut down address: &quot;)" class="string">&quot;Shut down address: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote;ShutDownAssociation.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;ShutDownAssociation.cause" title="Throwable">cause</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#akka.remote;AssociationProblem" title="akka.remote.AssociationProblem">AssociationProblem</a>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class InvalidAssociation extends akka.remote.EndpointException with akka.remote.AssociationProblem with Product with Serializable" id="akka.remote.InvalidAssociation.readResolve">InvalidAssociation</a><a href="#akka.remote.InvalidAssociation.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.remote;InvalidAssociation.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.actor.Address" id="akka.remote;InvalidAssociation.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Throwable" id="akka.remote;InvalidAssociation.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Invalid address: &quot;)" class="string">&quot;Invalid address: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote;InvalidAssociation.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;InvalidAssociation.cause" title="Throwable">cause</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#akka.remote;AssociationProblem" title="akka.remote.AssociationProblem">AssociationProblem</a>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class HopelessAssociation extends akka.remote.EndpointException with akka.remote.AssociationProblem with Product with Serializable" id="akka.remote.HopelessAssociation.readResolve">HopelessAssociation</a><a href="#akka.remote;EndpointException.<init>(a76a789b14)" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.remote;HopelessAssociation.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.actor.Address" id="akka.remote;HopelessAssociation.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Option[Int]" id="akka.remote;HopelessAssociation.uid">uid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, <a title="Throwable" id="akka.remote;HopelessAssociation.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Catastrophic association error.&quot;)" class="string">&quot;Catastrophic association error.&quot;</span><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#akka.remote;AssociationProblem" title="akka.remote.AssociationProblem">AssociationProblem</a>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class EndpointDisassociatedException extends akka.remote.EndpointException" id="akka.remote;EndpointDisassociatedException">EndpointDisassociatedException</a><a href="#akka.remote;EndpointDisassociatedException" title="akka.remote.EndpointDisassociatedException" class="delimiter">(</a><a title="String" id="akka.remote;EndpointDisassociatedException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><a href="#akka.remote;EndpointDisassociatedException.msg" title="String">msg</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class EndpointAssociationException extends akka.remote.EndpointException" id="akka.remote;EndpointAssociationException">EndpointAssociationException</a><a href="#akka.remote;EndpointAssociationException" title="akka.remote.EndpointAssociationException" class="delimiter">(</a><a title="String" id="akka.remote;EndpointAssociationException.msg">msg</a>: <span title="String">String</span>, <a title="Throwable" id="akka.remote;EndpointAssociationException.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><a href="#akka.remote;EndpointAssociationException.msg" title="String">msg</a>, <a href="#akka.remote;EndpointAssociationException.cause" title="Throwable">cause</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class OversizedPayloadException extends akka.remote.EndpointException" id="akka.remote;OversizedPayloadException">OversizedPayloadException</a><a href="#akka.remote;OversizedPayloadException" title="akka.remote.OversizedPayloadException" class="delimiter">(</a><a title="String" id="akka.remote;OversizedPayloadException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><a href="#akka.remote;OversizedPayloadException.msg" title="String">msg</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.ReliableDeliverySupervisor.type" id="akka.remote.ReliableDeliverySupervisor">ReliableDeliverySupervisor</a> <a href="#akka.remote.ReliableDeliverySupervisor" title="akka.remote.ReliableDeliverySupervisor.type" class="delimiter">{</a>
  <span class="keyword">case object</span> <a href="#akka.remote.ReliableDeliverySupervisor.Ungate.productElement.x$1" title="akka.remote.ReliableDeliverySupervisor.Ungate.type" id="akka.remote.ReliableDeliverySupervisor.Ungate.readResolve">Ungate</a>
  <span class="keyword">case object</span> <a href="#akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.productElement.x$1" title="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.type" id="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.readResolve">AttemptSysMsgRedelivery</a>
  <span class="keyword">case class</span> <a title="class GotUid extends AnyRef with Product with Serializable" id="akka.remote.ReliableDeliverySupervisor.GotUid.readResolve">GotUid</a><a href="#akka.remote.ReliableDeliverySupervisor.GotUid.readResolve" title="Product" class="delimiter">(</a><a title="Int" id="akka.remote.ReliableDeliverySupervisor;GotUid.uid">uid</a>: <span title="Int">Int</span>, <a title="akka.actor.Address" id="akka.remote.ReliableDeliverySupervisor;GotUid.remoteAddres">remoteAddres</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(handleOrActive: Option[akka.remote.transport.AkkaProtocolHandle], localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, refuseUid: Option[Int], transport: akka.remote.transport.AkkaProtocolTransport, settings: akka.remote.RemoteSettings, codec: akka.remote.transport.AkkaPduCodec, receiveBuffers: java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState])akka.actor.Props" id="akka.remote.ReliableDeliverySupervisor.props">props</a><span class="delimiter">(</span>
    <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote.ReliableDeliverySupervisor.props.handleOrActive">handleOrActive</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span>,
    <a title="akka.actor.Address" id="akka.remote.ReliableDeliverySupervisor.props.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="akka.actor.Address" id="akka.remote.ReliableDeliverySupervisor.props.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="Option[Int]" id="akka.remote.ReliableDeliverySupervisor.props.refuseUid">refuseUid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
    <a title="akka.remote.transport.AkkaProtocolTransport" id="akka.remote.ReliableDeliverySupervisor.props.transport">transport</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolTransport" title="akka.remote.transport.AkkaProtocolTransport">AkkaProtocolTransport</a>,
    <a title="akka.remote.RemoteSettings" id="akka.remote.ReliableDeliverySupervisor.props.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
    <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote.ReliableDeliverySupervisor.props.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
    <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote.ReliableDeliverySupervisor.props.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.ReliableDeliverySupervisor](classOf[akka.remote.ReliableDeliverySupervisor])" class="delimiter">[</span>ReliableDeliverySupervisor<span class="delimiter">]</span>, <a href="#akka.remote.ReliableDeliverySupervisor.props.handleOrActive" title="Option[akka.remote.transport.AkkaProtocolHandle]">handleOrActive</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.refuseUid" title="Option[Int]">refuseUid</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.settings" title="akka.remote.RemoteSettings">settings</a>,
      <a href="#akka.remote.ReliableDeliverySupervisor.props.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>, <a href="#akka.remote.ReliableDeliverySupervisor.props.receiveBuffers" title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ReliableDeliverySupervisor extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.remote;ReliableDeliverySupervisor">ReliableDeliverySupervisor</a><a href="#akka.remote;ReliableDeliverySupervisor" title="akka.remote.ReliableDeliverySupervisor" class="delimiter">(</a>
  <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote;ReliableDeliverySupervisor.handleOrActive">handleOrActive</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.remote;ReliableDeliverySupervisor.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.remote;ReliableDeliverySupervisor.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <span class="keyword">val</span> <a title="Option[Int]" id="akka.remote;ReliableDeliverySupervisor.refuseUid">refuseUid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="akka.remote.transport.AkkaProtocolTransport" id="akka.remote;ReliableDeliverySupervisor.transport">transport</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolTransport" title="akka.remote.transport.AkkaProtocolTransport">AkkaProtocolTransport</a>,
  <span class="keyword">val</span> <a title="akka.remote.RemoteSettings" id="akka.remote;ReliableDeliverySupervisor.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
  <span class="keyword">val</span> <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote;ReliableDeliverySupervisor.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
  <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote;ReliableDeliverySupervisor.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.ReliableDeliverySupervisor" title="akka.remote.ReliableDeliverySupervisor.type">ReliableDeliverySupervisor</a>._
  <span class="keyword">import</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher

  <span class="keyword">var</span> <a title="Option[akka.actor.Cancellable]" id="akka.remote;ReliableDeliverySupervisor.autoResendTimer_=">autoResendTimer</a>: <span title="Option[akka.actor.Cancellable]">Option</span><span class="delimiter">[</span>Cancellable<span class="delimiter">]</span> = <span title="None.type">None</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.scheduleAutoResend">scheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nacked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nacked</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nonAcked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nonAcked</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.autoResendTimer_=" title="=&gt; Option[akka.actor.Cancellable]">autoResendTimer</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.autoResendTimer_=" title="(x$1: Option[akka.actor.Cancellable])Unit">autoResendTimer</a> = <span title="(x: akka.actor.Cancellable)Some[akka.actor.Cancellable]">Some</span><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.SysResendTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SysResendTimeout</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.readResolve" title="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.type">AttemptSysMsgRedelivery</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.rescheduleAutoResend">rescheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.autoResendTimer_=" title="=&gt; Option[akka.actor.Cancellable]">autoResendTimer</a>.<span title="(f: akka.actor.Cancellable =&gt; Boolean)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.rescheduleAutoResend.$anonfun.x$1" title="akka.actor.Cancellable">_</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.autoResendTimer_=" title="(x$1: Option[akka.actor.Cancellable])Unit">autoResendTimer</a> = <span title="None.type">None</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.scheduleAutoResend" title="()Unit">scheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="akka.actor.OneForOneStrategy" id="akka.remote;ReliableDeliverySupervisor.supervisorStrategy">supervisorStrategy</a> = <a href="../../akka-actor/actor/FaultHandling.scala.html#akka.actor.OneForOneStrategy.apply$default$1" title="Int" id="akka.remote;ReliableDeliverySupervisor.supervisorStrategy.x$17">OneForOneStrategy</a><span class="delimiter">(</span>loggingEnabled = <a title="Boolean" id="akka.remote;ReliableDeliverySupervisor.supervisorStrategy.x$15" class="keyword">false</a><span class="delimiter">)</span> <a title="PartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive]" id="akka.remote;ReliableDeliverySupervisor.supervisorStrategy.x$18;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="&lt;root&gt; extends Throwable with akka.remote.AssociationProblem">e</span> @ <span class="delimiter">(</span>_: <a href="#akka.remote;AssociationProblem" title="akka.remote.AssociationProblem">AssociationProblem</a><span class="delimiter">)</span> ⇒ <a href="../../akka-actor/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Escalate" title="akka.actor.SupervisorStrategy.Escalate.type">Escalate</a>
    <span class="keyword">case</span> <a href="#akka.remote;ReliableDeliverySupervisor.supervisorStrategy.x$18;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(6c666e4343)" title="(template: String, arg1: Any, arg2: Any, arg3: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Association with remote system [{}] has failed, address is now gated for [{}] ms. Reason is: [{}].&quot;)" class="string">&quot;Association with remote system [{}] has failed, address is now gated for [{}] ms. Reason is: [{}].&quot;</span>,
        <a href="#akka.remote;ReliableDeliverySupervisor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.RetryGateClosedFor" title="=&gt; scala.concurrent.duration.FiniteDuration">RetryGateClosedFor</a>.<span title="=&gt; Long">toMillis</span>, <span title="Throwable">e</span>.<span title="()String">getMessage</span><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="(x$1: Boolean)Unit">uidConfirmed</a> = <span title="Boolean(false)" class="keyword">false</span> <span class="comment">// Need confirmation of UID again</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.gated" title="=&gt; ReliableDeliverySupervisor.this.Receive">gated</a><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.currentHandle_=" title="(x$1: Option[akka.remote.transport.AkkaProtocolHandle])Unit">currentHandle</a> = <span title="None.type">None</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Stop" title="akka.actor.SupervisorStrategy.Stop.type">Stop</a>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote;ReliableDeliverySupervisor.currentHandle_=">currentHandle</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span> = <a href="#akka.remote;ReliableDeliverySupervisor.handleOrActive" title="Option[akka.remote.transport.AkkaProtocolHandle]">handleOrActive</a>

  <span class="keyword">var</span> <a title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]" id="akka.remote;ReliableDeliverySupervisor.resendBuffer_=">resendBuffer</a>: <a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer" title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">AckedSendBuffer</a><span class="delimiter">[</span>Send<span class="delimiter">]</span> = _
  <span class="keyword">var</span> <a title="akka.remote.SeqNo" id="akka.remote;ReliableDeliverySupervisor.lastCumulativeAck_=">lastCumulativeAck</a>: <a href="AckedDelivery.scala.html#akka.remote;SeqNo" title="akka.remote.SeqNo">SeqNo</a> = _
  <span class="keyword">var</span> <a title="Long" id="akka.remote;ReliableDeliverySupervisor.seqCounter_=">seqCounter</a>: <span title="Long">Long</span> = _
  <span class="keyword">var</span> <a title="scala.collection.immutable.Vector[akka.remote.Ack]" id="akka.remote;ReliableDeliverySupervisor.pendingAcks_=">pendingAcks</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="[A]=&gt; scala.collection.immutable.Vector[A]">empty</span><span title="scala.collection.immutable.Vector[akka.remote.Ack]" class="delimiter">[</span><a href="AckedDelivery.scala.html#akka.remote;Ack" title="akka.remote.Ack">Ack</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.reset">reset</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="(x$1: akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send])Unit">resendBuffer</a> = <a href="AckedDelivery.scala.html#akka.remote.AckedSendBuffer.<init>$default$2" title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]" class="keyword">new</a> <a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer" title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">AckedSendBuffer</a><span class="delimiter">[</span>Send<span class="delimiter">]</span><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.SysMsgBufferSize" title="=&gt; Int">SysMsgBufferSize</a><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.scheduleAutoResend" title="()Unit">scheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.lastCumulativeAck_=" title="(x$1: akka.remote.SeqNo)Unit">lastCumulativeAck</a> = <a href="AckedDelivery.scala.html#akka.remote;SeqNo" title="(rawValue: Long)akka.remote.SeqNo">SeqNo</a><span class="delimiter">(</span>-<span title="Long(-1L)" class="int">1</span><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.seqCounter_=" title="(x$1: Long)Unit">seqCounter</a> = <span title="Long(0L)" class="long">0L</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.pendingAcks_=" title="(x$1: scala.collection.immutable.Vector[akka.remote.Ack])Unit">pendingAcks</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
  <span class="delimiter">}</span>

  <a href="#akka.remote;ReliableDeliverySupervisor.reset" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()akka.remote.SeqNo" id="akka.remote;ReliableDeliverySupervisor.nextSeq">nextSeq</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="AckedDelivery.scala.html#akka.remote;SeqNo" title="akka.remote.SeqNo">SeqNo</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="akka.remote;ReliableDeliverySupervisor.nextSeq.tmp">tmp</a> = <a href="#akka.remote;ReliableDeliverySupervisor.seqCounter_=" title="=&gt; Long">seqCounter</a>
    <a href="#akka.remote;ReliableDeliverySupervisor.seqCounter_=" title="(x$1: Long)Unit">seqCounter</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="AckedDelivery.scala.html#akka.remote;SeqNo" title="(rawValue: Long)akka.remote.SeqNo">SeqNo</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.nextSeq.tmp" title="Long">tmp</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.writer_=">writer</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.remote;ReliableDeliverySupervisor.createWriter" title="()akka.actor.ActorRef">createWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Option[Int]" id="akka.remote;ReliableDeliverySupervisor.uid_=">uid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#akka.remote;ReliableDeliverySupervisor.handleOrActive" title="Option[akka.remote.transport.AkkaProtocolHandle]">handleOrActive</a> <span title="(f: akka.remote.transport.AkkaProtocolHandle =&gt; Int)Option[Int]">map</span> <span class="delimiter">{</span> <a href="#akka.remote;ReliableDeliverySupervisor.uid.$anonfun.x$2" title="akka.remote.transport.AkkaProtocolHandle">_</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.handshakeInfo" title="=&gt; akka.remote.transport.HandshakeInfo">handshakeInfo</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;HandshakeInfo.uid" title="=&gt; Int">uid</a> <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.remote;ReliableDeliverySupervisor.bailoutAt">bailoutAt</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.InitialSysMsgDeliveryTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">InitialSysMsgDeliveryTimeout</a>
  <span class="comment">// Processing of Acks has to be delayed until the UID after a reconnect is discovered. Depending whether the</span>
  <span class="comment">// UID matches the expected one, pending Acks can be processed, or must be dropped. It is guaranteed that for</span>
  <span class="comment">// any inbound connections (calling createWriter()) the first message from that connection is GotUid() therefore</span>
  <span class="comment">// it serves a separator.</span>
  <span class="comment">// If we already have an inbound handle then UID is initially confirmed.</span>
  <span class="comment">// (This actor is never restarted)</span>
  <span class="keyword">var</span> <a title="Boolean" id="akka.remote;ReliableDeliverySupervisor.uidConfirmed_=">uidConfirmed</a>: <span title="Boolean">Boolean</span> = <a href="#akka.remote;ReliableDeliverySupervisor.uid_=" title="=&gt; Option[Int]">uid</a>.<span title="=&gt; Boolean">isDefined</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.unstashAcks">unstashAcks</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.pendingAcks_=" title="=&gt; scala.collection.immutable.Vector[akka.remote.Ack]">pendingAcks</a> <span title="(f: akka.remote.Ack =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.unstashAcks.$anonfun.x$3" title="akka.remote.Ack">_</a><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.pendingAcks_=" title="(x$1: scala.collection.immutable.Vector[akka.remote.Ack])Unit">pendingAcks</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// All remaining messages in the buffer has to be delivered to dead letters. It is important to clear the sequence</span>
    <span class="comment">// number otherwise deadLetters will ignore it to avoid reporting system messages as dead letters while they are</span>
    <span class="comment">// still possibly retransmitted.</span>
    <span class="comment">// Such a situation may arise when the EndpointWriter is shut down, and all of its mailbox contents are delivered</span>
    <span class="comment">// to dead letters. These messages should be ignored, as they still live in resendBuffer and might be delivered to</span>
    <span class="comment">// the remote system later.</span>
    <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nacked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nacked</a> <span title="(that: scala.collection.GenTraversableOnce[akka.remote.EndpointManager.Send])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send],akka.remote.EndpointManager.Send,scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]])scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">++</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nonAcked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nonAcked</a><span class="delimiter">)</span> <span title="(f: akka.remote.EndpointManager.Send =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;ReliableDeliverySupervisor.postStop.$anonfun.s">s</a> ⇒ <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">deadLetters</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.postStop.$anonfun.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.copy$default$1" title="Any" id="akka.remote;ReliableDeliverySupervisor.postStop.$anonfun.x$22">copy</a><span class="delimiter">(</span>seqOpt = <a title="None.type" id="akka.remote;ReliableDeliverySupervisor.postStop.$anonfun.x$19">None</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: Any)akka.remote.EndpointManager.ResendState">remove</span><span title="Unit" class="delimiter">(</span><a href="Remoting.scala.html#akka.remote.EndpointManager;Link" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address)akka.remote.EndpointManager.Link">Link</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;ReliableDeliverySupervisor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable)Unit" id="akka.remote;ReliableDeliverySupervisor.postRestart">postRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;ReliableDeliverySupervisor.postRestart.reason">reason</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span>
      <span title="String(&quot;BUG: ReliableDeliverySupervisor has been attempted to be restarted. This must not happen.&quot;)" class="string">&quot;BUG: ReliableDeliverySupervisor has been attempted to be restarted. This must not happen.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; ReliableDeliverySupervisor.this.Receive" id="akka.remote;ReliableDeliverySupervisor.receive">receive</a>: <span title="ReliableDeliverySupervisor.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒
      <span class="comment">// Trying to serve until our last breath</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.resendAll" title="()Unit">resendAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.flushWait" title="=&gt; ReliableDeliverySupervisor.this.Receive">flushWait</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
      <a href="#akka.remote;ReliableDeliverySupervisor.handleSend" title="(send: akka.remote.EndpointManager.Send)Unit">handleSend</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.EndpointManager.Send">s</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.remote.Ack" id="akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack">ack</a>: <a href="AckedDelivery.scala.html#akka.remote;Ack" title="akka.remote.Ack">Ack</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="=&gt; Boolean">uidConfirmed</a><span class="delimiter">)</span> <a href="#akka.remote;ReliableDeliverySupervisor.pendingAcks_=" title="(x$1: scala.collection.immutable.Vector[akka.remote.Ack])Unit">pendingAcks</a> = <a href="#akka.remote;ReliableDeliverySupervisor.pendingAcks_=" title="=&gt; scala.collection.immutable.Vector[akka.remote.Ack]">pendingAcks</a> <span title="(elem: akka.remote.Ack)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.remote.Ack],akka.remote.Ack,scala.collection.immutable.Vector[akka.remote.Ack]])scala.collection.immutable.Vector[akka.remote.Ack]">:+</span> <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack" title="akka.remote.Ack">ack</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="(x$1: akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send])Unit">resendBuffer</a> = <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.acknowledge" title="(ack: akka.remote.Ack)akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">acknowledge</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack" title="akka.remote.Ack">ack</a><span class="delimiter">)</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;ReliableDeliverySupervisor.receive;$anonfun.applyOrElse.e">e</a><span class="delimiter">)</span> ⇒
            <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.transport.Transport.InvalidAssociationException" class="keyword">new</span> <a href="transport/Transport.scala.html#akka.remote.transport.Transport;InvalidAssociationException" title="akka.remote.transport.Transport.InvalidAssociationException">InvalidAssociationException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Error encountered while processing system message acknowledgement &quot;)">Error encountered while processing system message acknowledgement $</span><a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a><span title="String(&quot; &quot;)"> $</span><a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack" title="akka.remote.Ack">ack</a><span title="String(&quot;&quot;)" class="string">&quot;</span>, <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.applyOrElse.e" title="Throwable">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.lastCumulativeAck_=" title="=&gt; akka.remote.SeqNo">lastCumulativeAck</a> <span title="(that: akka.remote.SeqNo)Boolean">&lt;</span> <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack" title="akka.remote.Ack">ack</a>.<a href="AckedDelivery.scala.html#akka.remote;Ack.cumulativeAck" title="=&gt; akka.remote.SeqNo">cumulativeAck</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.remote;ReliableDeliverySupervisor.lastCumulativeAck_=" title="(x$1: akka.remote.SeqNo)Unit">lastCumulativeAck</a> = <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.ack" title="akka.remote.Ack">ack</a>.<a href="AckedDelivery.scala.html#akka.remote;Ack.cumulativeAck" title="=&gt; akka.remote.SeqNo">cumulativeAck</a>
          <span class="comment">// Cumulative ack is progressing, we might not need to resend non-acked messages yet.</span>
          <span class="comment">// If this progression stops, the timer will eventually kick in, since scheduleAutoResend</span>
          <span class="comment">// does not cancel existing timers (see the &quot;else&quot; case).</span>
          <a href="#akka.remote;ReliableDeliverySupervisor.rescheduleAutoResend" title="()Unit">rescheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.remote;ReliableDeliverySupervisor.scheduleAutoResend" title="()Unit">scheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="#akka.remote;ReliableDeliverySupervisor.resendNacked" title="()Unit">resendNacked</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <a href="#akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.readResolve" title="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.type">AttemptSysMsgRedelivery</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="=&gt; Boolean">uidConfirmed</a><span class="delimiter">)</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendAll" title="()Unit">resendAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
      <a href="#akka.remote;ReliableDeliverySupervisor.currentHandle_=" title="(x$1: Option[akka.remote.transport.AkkaProtocolHandle])Unit">currentHandle</a> = <span title="None.type">None</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nonAcked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nonAcked</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nacked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nacked</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.SysResendTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SysResendTimeout</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.readResolve" title="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.type">AttemptSysMsgRedelivery</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.idle" title="=&gt; ReliableDeliverySupervisor.this.Receive">idle</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.remote.ReliableDeliverySupervisor.GotUid" id="akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.g">g</a> @ GotUid<span class="delimiter">(</span><a title="Int" id="akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.receivedUid">receivedUid</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.g" title="akka.remote.ReliableDeliverySupervisor.GotUid">g</a>
      <span class="comment">// New system that has the same address as the old - need to start from fresh state</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="(x$1: Boolean)Unit">uidConfirmed</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.uid_=" title="=&gt; Option[Int]">uid</a>.<span title="(p: Int =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.applyOrElse.$anonfun.x$4" title="Int">_</a> <span title="(x: Int)Boolean">!=</span> <a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.receivedUid" title="Int">receivedUid</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.remote;ReliableDeliverySupervisor.reset" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.remote;ReliableDeliverySupervisor.unstashAcks" title="()Unit">unstashAcks</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.uid_=" title="(x$1: Option[Int])Unit">uid</a> = <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive;$anonfun.isDefinedAt.receivedUid" title="Int">receivedUid</a><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.resendAll" title="()Unit">resendAll</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="akka.remote.EndpointWriter.StopReading">s</span>: EndpointWriter.<a href="#akka.remote.EndpointWriter.StopReading.readResolve" title="akka.remote.EndpointWriter.StopReading">StopReading</a> ⇒
      <a href="#akka.remote;ReliableDeliverySupervisor.writer_=" title="=&gt; akka.actor.ActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.remote.EndpointWriter.StopReading">s</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; ReliableDeliverySupervisor.this.Receive" id="akka.remote;ReliableDeliverySupervisor.gated">gated</a>: <span title="ReliableDeliverySupervisor.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.RetryGateClosedFor" title="=&gt; scala.concurrent.duration.FiniteDuration">RetryGateClosedFor</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.ReliableDeliverySupervisor.Ungate.readResolve" title="akka.remote.ReliableDeliverySupervisor.Ungate.type">Ungate</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.ReliableDeliverySupervisor.Ungate.readResolve" title="akka.remote.ReliableDeliverySupervisor.Ungate.type">Ungate</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nonAcked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nonAcked</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nacked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nacked</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// If we talk to a system we have not talked to before (or has given up talking to in the past) stop</span>
        <span class="comment">// system delivery attempts after the specified time. This act will drop the pending system messages and gate the</span>
        <span class="comment">// remote address at the EndpointManager level stopping this actor. In case the remote system becomes reachable</span>
        <span class="comment">// again it will be immediately quarantined due to out-of-sync system message buffer and becomes quarantined.</span>
        <span class="comment">// In other words, this action is safe.</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="=&gt; Boolean">uidConfirmed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote;ReliableDeliverySupervisor.bailoutAt" title="=&gt; scala.concurrent.duration.Deadline">bailoutAt</a>.<span title="()Boolean">isOverdue</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.InvalidAssociation" class="keyword">new</span> <a href="#akka.remote.InvalidAssociation.readResolve" title="akka.remote.InvalidAssociation">InvalidAssociation</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;ReliableDeliverySupervisor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>,
            <span title="(x$1: String)java.util.concurrent.TimeoutException" class="keyword">new</span> java.util.concurrent.<span title="java.util.concurrent.TimeoutException">TimeoutException</span><span class="delimiter">(</span><span title="String(&quot;Delivery of system messages timed out and they were dropped.&quot;)" class="string">&quot;Delivery of system messages timed out and they were dropped.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.remote;ReliableDeliverySupervisor.writer_=" title="(x$1: akka.actor.ActorRef)Unit">writer</a> = <a href="#akka.remote;ReliableDeliverySupervisor.createWriter" title="()akka.actor.ActorRef">createWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="comment">// Resending will be triggered by the incoming GotUid message after the connection finished</span>
        <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive" title="=&gt; ReliableDeliverySupervisor.this.Receive">receive</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.idle" title="=&gt; ReliableDeliverySupervisor.this.Receive">idle</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span> @ Send<span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.msg">msg</a>: <a href="../../akka-actor/dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a>, _, _, _<span class="delimiter">)</span> ⇒ <a href="#akka.remote;ReliableDeliverySupervisor.tryBuffer" title="(s: akka.remote.EndpointManager.Send)Unit">tryBuffer</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.EndpointManager.Send">s</span>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.copy$default$1" title="Any" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.applyOrElse.x$26">copy</a><span class="delimiter">(</span>seqOpt = <span title="(x: akka.remote.SeqNo)Some[akka.remote.SeqNo]">Some</span><a title="Some[akka.remote.SeqNo]" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.applyOrElse.x$23" class="delimiter">(</a><a href="#akka.remote;ReliableDeliverySupervisor.nextSeq" title="()akka.remote.SeqNo">nextSeq</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a>                               ⇒ <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">deadLetters</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.remote.EndpointManager.Send">s</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a>           ⇒ <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> EndpointWriter.StopReading<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.w">w</a>, <a title="akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.replyTo">replyTo</a><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.w" title="akka.actor.ActorRef">w</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.gated;$anonfun.isDefinedAt.w" title="akka.actor.ActorRef">w</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; ReliableDeliverySupervisor.this.Receive" id="akka.remote;ReliableDeliverySupervisor.idle">idle</a>: <span title="ReliableDeliverySupervisor.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
      <a href="#akka.remote;ReliableDeliverySupervisor.writer_=" title="(x$1: akka.actor.ActorRef)Unit">writer</a> = <a href="#akka.remote;ReliableDeliverySupervisor.createWriter" title="()akka.actor.ActorRef">createWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="comment">// Resending will be triggered by the incoming GotUid message after the connection finished</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.handleSend" title="(send: akka.remote.EndpointManager.Send)Unit">handleSend</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive" title="=&gt; ReliableDeliverySupervisor.this.Receive">receive</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.readResolve" title="akka.remote.ReliableDeliverySupervisor.AttemptSysMsgRedelivery.type">AttemptSysMsgRedelivery</a> ⇒
      <a href="#akka.remote;ReliableDeliverySupervisor.writer_=" title="(x$1: akka.actor.ActorRef)Unit">writer</a> = <a href="#akka.remote;ReliableDeliverySupervisor.createWriter" title="()akka.actor.ActorRef">createWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="comment">// Resending will be triggered by the incoming GotUid message after the connection finished</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.receive" title="=&gt; ReliableDeliverySupervisor.this.Receive">receive</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒ <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> EndpointWriter.StopReading<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.w">w</a>, <a title="akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.replyTo">replyTo</a><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.idle;$anonfun.isDefinedAt.w" title="akka.actor.ActorRef">w</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; ReliableDeliverySupervisor.this.Receive" id="akka.remote;ReliableDeliverySupervisor.flushWait">flushWait</a>: <span title="ReliableDeliverySupervisor.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;ReliableDeliverySupervisor.flushWait;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
      <span class="comment">// Clear buffer to prevent sending system messages to dead letters -- at this point we are shutting down</span>
      <span class="comment">// and don't really know if they were properly delivered or not.</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="(x$1: akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send])Unit">resendBuffer</a> = <a href="AckedDelivery.scala.html#akka.remote.AckedSendBuffer.<init>$default$2" title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]" class="keyword">new</a> <a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer" title="akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">AckedSendBuffer</a><span class="delimiter">[</span>Send<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _ ⇒ <span class="comment">// Ignore</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(send: akka.remote.EndpointManager.Send)Unit" id="akka.remote;ReliableDeliverySupervisor.handleSend">handleSend</a><span class="delimiter">(</span><a title="akka.remote.EndpointManager.Send" id="akka.remote;ReliableDeliverySupervisor.handleSend.send">send</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.handleSend.send" title="akka.remote.EndpointManager.Send">send</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.message" title="=&gt; Any">message</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../akka-actor/dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;ReliableDeliverySupervisor.handleSend.sequencedSend">sequencedSend</a> = <a href="#akka.remote;ReliableDeliverySupervisor.handleSend.send" title="akka.remote.EndpointManager.Send">send</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.copy$default$1" title="Any" id="akka.remote;ReliableDeliverySupervisor.handleSend.sequencedSend.x$30">copy</a><span class="delimiter">(</span>seqOpt = <span title="(x: akka.remote.SeqNo)Some[akka.remote.SeqNo]">Some</span><a title="Some[akka.remote.SeqNo]" id="akka.remote;ReliableDeliverySupervisor.handleSend.sequencedSend.x$27" class="delimiter">(</a><a href="#akka.remote;ReliableDeliverySupervisor.nextSeq" title="()akka.remote.SeqNo">nextSeq</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.tryBuffer" title="(s: akka.remote.EndpointManager.Send)Unit">tryBuffer</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.handleSend.sequencedSend" title="akka.remote.EndpointManager.Send">sequencedSend</a><span class="delimiter">)</span>
      <span class="comment">// If we have not confirmed the remote UID we cannot transfer the system message at this point just buffer it.</span>
      <span class="comment">// GotUid will kick resendAll() causing the messages to be properly written</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.uidConfirmed_=" title="=&gt; Boolean">uidConfirmed</a><span class="delimiter">)</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.handleSend.sequencedSend" title="akka.remote.EndpointManager.Send">sequencedSend</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.handleSend.send" title="akka.remote.EndpointManager.Send">send</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.resendNacked">resendNacked</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nacked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nacked</a> <span title="(f: akka.remote.EndpointManager.Send =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.resendNacked.$anonfun.x$5" title="akka.remote.EndpointManager.Send">_</a> <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;ReliableDeliverySupervisor.resendAll">resendAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.resendNacked" title="()Unit">resendNacked</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.nonAcked" title="=&gt; scala.collection.immutable.IndexedSeq[akka.remote.EndpointManager.Send]">nonAcked</a> <span title="(f: akka.remote.EndpointManager.Send =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">writer</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;ReliableDeliverySupervisor.resendAll.$anonfun.x$6" title="akka.remote.EndpointManager.Send">_</a> <span class="delimiter">}</span>
    <a href="#akka.remote;ReliableDeliverySupervisor.rescheduleAutoResend" title="()Unit">rescheduleAutoResend</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: akka.remote.EndpointManager.Send)Unit" id="akka.remote;ReliableDeliverySupervisor.tryBuffer">tryBuffer</a><span class="delimiter">(</span><a title="akka.remote.EndpointManager.Send" id="akka.remote;ReliableDeliverySupervisor.tryBuffer.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="(x$1: akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send])Unit">resendBuffer</a> = <a href="#akka.remote;ReliableDeliverySupervisor.resendBuffer_=" title="=&gt; akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">resendBuffer</a> <a href="AckedDelivery.scala.html#akka.remote;AckedSendBuffer.buffer" title="(msg: akka.remote.EndpointManager.Send)akka.remote.AckedSendBuffer[akka.remote.EndpointManager.Send]">buffer</a> <a href="#akka.remote;ReliableDeliverySupervisor.tryBuffer.s" title="akka.remote.EndpointManager.Send">s</a>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#akka.remote;ReliableDeliverySupervisor.tryBuffer.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;ReliableDeliverySupervisor.tryBuffer.e">e</a><span class="delimiter">)</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.HopelessAssociation" class="keyword">new</span> <a href="#akka.remote.HopelessAssociation.readResolve" title="akka.remote.HopelessAssociation">HopelessAssociation</a><span class="delimiter">(</span><a href="#akka.remote;ReliableDeliverySupervisor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;ReliableDeliverySupervisor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;ReliableDeliverySupervisor.uid_=" title="=&gt; Option[Int]">uid</a>, <a href="#akka.remote;ReliableDeliverySupervisor.tryBuffer.e" title="Throwable">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()akka.actor.ActorRef" id="akka.remote;ReliableDeliverySupervisor.createWriter">createWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.RARP">RARP</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Remoting.scala.html#akka.remote;RARP.configureDispatcher" title="(props: akka.actor.Props)akka.actor.Props">configureDispatcher</a><span class="delimiter">(</span><a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<a href="#akka.remote.EndpointWriter.props" title="(handleOrActive: Option[akka.remote.transport.AkkaProtocolHandle], localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, refuseUid: Option[Int], transport: akka.remote.transport.AkkaProtocolTransport, settings: akka.remote.RemoteSettings, codec: akka.remote.transport.AkkaPduCodec, receiveBuffers: java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState], reliableDeliverySupervisor: Option[akka.actor.ActorRef])akka.actor.Props">props</a><span class="delimiter">(</span>
      handleOrActive = <a href="#akka.remote;ReliableDeliverySupervisor.currentHandle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">currentHandle</a>,
      localAddress = <a href="#akka.remote;ReliableDeliverySupervisor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>,
      remoteAddress = <a href="#akka.remote;ReliableDeliverySupervisor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>,
      <a href="#akka.remote;ReliableDeliverySupervisor.refuseUid" title="=&gt; Option[Int]">refuseUid</a>,
      transport = <a href="#akka.remote;ReliableDeliverySupervisor.transport" title="=&gt; akka.remote.transport.AkkaProtocolTransport">transport</a>,
      settings = <a href="#akka.remote;ReliableDeliverySupervisor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>,
      <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduProtobufCodec" title="akka.remote.transport.AkkaPduProtobufCodec.type">AkkaPduProtobufCodec</a>,
      receiveBuffers = <a href="#akka.remote;ReliableDeliverySupervisor.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>,
      reliableDeliverySupervisor = <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span>, <span title="String(&quot;endpointWriter&quot;)" class="string">&quot;endpointWriter&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class EndpointActor extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.remote;EndpointActor">EndpointActor</a><a href="#akka.remote;EndpointActor" title="akka.remote.EndpointActor" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.remote;EndpointActor.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.remote;EndpointActor.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <span class="keyword">val</span> <a title="akka.remote.transport.Transport" id="akka.remote;EndpointActor.transport">transport</a>: <a href="transport/Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a>,
  <span class="keyword">val</span> <a title="akka.remote.RemoteSettings" id="akka.remote;EndpointActor.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
  <span class="keyword">val</span> <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote;EndpointActor.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.remote;EndpointActor.inbound">inbound</a>: <span title="Boolean">Boolean</span>

  <span class="keyword">val</span> <a title="akka.remote.EventPublisher" id="akka.remote;EndpointActor.eventPublisher">eventPublisher</a> = <span title="akka.remote.EventPublisher" class="keyword">new</span> <a href="RemotingLifecycleEvent.scala.html#akka.remote;EventPublisher" title="akka.remote.EventPublisher">EventPublisher</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>, <a href="#akka.remote;EndpointActor.settings" title="=&gt; akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.RemoteLifecycleEventsLogLevel" title="=&gt; akka.event.Logging.LogLevel">RemoteLifecycleEventsLogLevel</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Unit" id="akka.remote;EndpointActor.publishError">publishError</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointActor.publishError.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="akka.event.Logging.LogLevel" id="akka.remote;EndpointActor.publishError.logLevel">logLevel</a>: Logging.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging;LogLevel" title="akka.event.Logging.LogLevel">LogLevel</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.remote;EndpointActor.tryPublish" title="(ev: akka.remote.AssociationEvent)Unit">tryPublish</a><span class="delimiter">(</span><a href="RemotingLifecycleEvent.scala.html#akka.remote;AssociationErrorEvent" title="(cause: Throwable, localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, inbound: Boolean, logLevel: akka.event.Logging.LogLevel)akka.remote.AssociationErrorEvent">AssociationErrorEvent</a><span class="delimiter">(</span><a href="#akka.remote;EndpointActor.publishError.reason" title="Throwable">reason</a>, <a href="#akka.remote;EndpointActor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointActor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointActor.inbound" title="=&gt; Boolean">inbound</a>, <a href="#akka.remote;EndpointActor.publishError.logLevel" title="akka.event.Logging.LogLevel">logLevel</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointActor.publishDisassociated">publishDisassociated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;EndpointActor.tryPublish" title="(ev: akka.remote.AssociationEvent)Unit">tryPublish</a><span class="delimiter">(</span><a href="RemotingLifecycleEvent.scala.html#akka.remote;DisassociatedEvent" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, inbound: Boolean)akka.remote.DisassociatedEvent">DisassociatedEvent</a><span class="delimiter">(</span><a href="#akka.remote;EndpointActor.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointActor.remoteAddress" title="=&gt; akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointActor.inbound" title="=&gt; Boolean">inbound</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ev: akka.remote.AssociationEvent)Unit" id="akka.remote;EndpointActor.tryPublish">tryPublish</a><span class="delimiter">(</span><a title="akka.remote.AssociationEvent" id="akka.remote;EndpointActor.tryPublish.ev">ev</a>: <a href="RemotingLifecycleEvent.scala.html#akka.remote;AssociationEvent" title="akka.remote.AssociationEvent">AssociationEvent</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="keyword">try</span>
    <a href="#akka.remote;EndpointActor.eventPublisher" title="=&gt; akka.remote.EventPublisher">eventPublisher</a>.<a href="RemotingLifecycleEvent.scala.html#akka.remote;EventPublisher.notifyListeners" title="(message: akka.remote.RemotingLifecycleEvent)Unit">notifyListeners</a><span class="delimiter">(</span><a href="#akka.remote;EndpointActor.tryPublish.ev" title="akka.remote.AssociationEvent">ev</a><span class="delimiter">)</span>
  <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a href="#akka.remote;EndpointActor.tryPublish.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointActor.tryPublish.e">e</a><span class="delimiter">)</span> ⇒ <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(de736aeaab)" title="(cause: Throwable, message: String)Unit">error</a><span class="delimiter">(</span><a href="#akka.remote;EndpointActor.tryPublish.e" title="Throwable">e</a>, <span title="String(&quot;Unable to publish error event to EventStream.&quot;)" class="string">&quot;Unable to publish error event to EventStream.&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.EndpointWriter.type" id="akka.remote.EndpointWriter">EndpointWriter</a> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type" class="delimiter">{</a>

  <span class="keyword">def</span> <a title="(handleOrActive: Option[akka.remote.transport.AkkaProtocolHandle], localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, refuseUid: Option[Int], transport: akka.remote.transport.AkkaProtocolTransport, settings: akka.remote.RemoteSettings, codec: akka.remote.transport.AkkaPduCodec, receiveBuffers: java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState], reliableDeliverySupervisor: Option[akka.actor.ActorRef])akka.actor.Props" id="akka.remote.EndpointWriter.props">props</a><span class="delimiter">(</span>
    <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote.EndpointWriter.props.handleOrActive">handleOrActive</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span>,
    <a title="akka.actor.Address" id="akka.remote.EndpointWriter.props.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="akka.actor.Address" id="akka.remote.EndpointWriter.props.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="Option[Int]" id="akka.remote.EndpointWriter.props.refuseUid">refuseUid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
    <a title="akka.remote.transport.AkkaProtocolTransport" id="akka.remote.EndpointWriter.props.transport">transport</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolTransport" title="akka.remote.transport.AkkaProtocolTransport">AkkaProtocolTransport</a>,
    <a title="akka.remote.RemoteSettings" id="akka.remote.EndpointWriter.props.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
    <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote.EndpointWriter.props.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
    <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote.EndpointWriter.props.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span>,
    <a title="Option[akka.actor.ActorRef]" id="akka.remote.EndpointWriter.props.reliableDeliverySupervisor">reliableDeliverySupervisor</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.EndpointWriter](classOf[akka.remote.EndpointWriter])" class="delimiter">[</span>EndpointWriter<span class="delimiter">]</span>, <a href="#akka.remote.EndpointWriter.props.handleOrActive" title="Option[akka.remote.transport.AkkaProtocolHandle]">handleOrActive</a>, <a href="#akka.remote.EndpointWriter.props.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote.EndpointWriter.props.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.EndpointWriter.props.refuseUid" title="Option[Int]">refuseUid</a>, <a href="#akka.remote.EndpointWriter.props.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>, <a href="#akka.remote.EndpointWriter.props.settings" title="akka.remote.RemoteSettings">settings</a>, <a href="#akka.remote.EndpointWriter.props.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>,
      <a href="#akka.remote.EndpointWriter.props.receiveBuffers" title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>, <a href="#akka.remote.EndpointWriter.props.reliableDeliverySupervisor" title="Option[akka.actor.ActorRef]">reliableDeliverySupervisor</a><span class="delimiter">)</span>

  <span class="comment">/**
   * This message signals that the current association maintained by the local EndpointWriter and EndpointReader is
   * to be overridden by a new inbound association. This is needed to avoid parallel inbound associations from the
   * same remote endpoint: when a parallel inbound association is detected, the old one is removed and the new one is
   * used instead.
   * @param handle Handle of the new inbound association.
   */</span>
  <span class="keyword">case class</span> <a title="class TakeOver extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.remote.EndpointWriter.TakeOver.readResolve">TakeOver</a><a href="#akka.remote.EndpointWriter.TakeOver.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote.EndpointWriter;TakeOver.handle">handle</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle" title="akka.remote.transport.AkkaProtocolHandle">AkkaProtocolHandle</a>, <a title="akka.actor.ActorRef" id="akka.remote.EndpointWriter;TakeOver.replyTo">replyTo</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  <span class="keyword">case class</span> <a title="class TookOver extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.remote.EndpointWriter.TookOver.readResolve">TookOver</a><a href="#akka.remote.EndpointWriter.TookOver.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.remote.EndpointWriter;TookOver.writer">writer</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote.EndpointWriter;TookOver.handle">handle</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle" title="akka.remote.transport.AkkaProtocolHandle">AkkaProtocolHandle</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  <span class="keyword">case object</span> <a href="#akka.remote.EndpointWriter.BackoffTimer.productElement.x$1" title="akka.remote.EndpointWriter.BackoffTimer.type" id="akka.remote.EndpointWriter.BackoffTimer.readResolve">BackoffTimer</a>
  <span class="keyword">case object</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.productElement.x$1" title="akka.remote.EndpointWriter.FlushAndStop.type" id="akka.remote.EndpointWriter.FlushAndStop.readResolve">FlushAndStop</a>
  <span class="keyword">private</span> <span class="keyword">case object</span> <a href="#akka.remote.EndpointWriter.FlushAndStopTimeout.productElement.x$1" title="akka.remote.EndpointWriter.FlushAndStopTimeout.type" id="akka.remote.EndpointWriter.FlushAndStopTimeout.readResolve">FlushAndStopTimeout</a>
  <span class="keyword">case object</span> <a href="#akka.remote.EndpointWriter.AckIdleCheckTimer.productElement.x$1" title="akka.remote.EndpointWriter.AckIdleCheckTimer.type" id="akka.remote.EndpointWriter.AckIdleCheckTimer.readResolve">AckIdleCheckTimer</a>
  <span class="keyword">case class</span> <a title="class StopReading extends AnyRef with Product with Serializable" id="akka.remote.EndpointWriter.StopReading.readResolve">StopReading</a><a href="#akka.remote.EndpointWriter.StopReading.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.remote.EndpointWriter;StopReading.writer">writer</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.remote.EndpointWriter;StopReading.replyTo">replyTo</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class StoppedReading extends AnyRef with Product with Serializable" id="akka.remote.EndpointWriter.StoppedReading.readResolve">StoppedReading</a><a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.remote.EndpointWriter;StoppedReading.writer">writer</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>

  <span class="keyword">case class</span> <a title="class Handle extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.remote.EndpointWriter.Handle.readResolve">Handle</a><a href="#akka.remote.EndpointWriter.Handle.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote.EndpointWriter;Handle.handle">handle</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle" title="akka.remote.transport.AkkaProtocolHandle">AkkaProtocolHandle</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>

  <span class="keyword">case class</span> <a title="class OutboundAck extends AnyRef with Product with Serializable" id="akka.remote.EndpointWriter.OutboundAck.readResolve">OutboundAck</a><a href="#akka.remote.EndpointWriter.OutboundAck.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.Ack" id="akka.remote.EndpointWriter;OutboundAck.ack">ack</a>: <a href="AckedDelivery.scala.html#akka.remote;Ack" title="akka.remote.Ack">Ack</a><span class="delimiter">)</span>

  <span class="comment">// These settings are not configurable because wrong configuration will break the auto-tuning </span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="akka.remote.EndpointWriter.SendBufferBatchSize">SendBufferBatchSize</a> = <span title="Int(5)" class="int">5</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Long" id="akka.remote.EndpointWriter.MinAdaptiveBackoffNanos">MinAdaptiveBackoffNanos</a> = <span title="Long(300000L)" class="long">300000L</span> <span class="comment">// 0.3 ms</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Long" id="akka.remote.EndpointWriter.MaxAdaptiveBackoffNanos">MaxAdaptiveBackoffNanos</a> = <span title="Long(2000000L)" class="long">2000000L</span> <span class="comment">// 2 ms</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Long" id="akka.remote.EndpointWriter.LogBufferSizeInterval">LogBufferSizeInterval</a> = <span title="Long(5000000000L)" class="long">5000000000L</span> <span class="comment">// 5 s, in nanoseconds</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="akka.remote.EndpointWriter.MaxWriteCount">MaxWriteCount</a> = <span title="Int(50)" class="int">50</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class EndpointWriter extends akka.remote.EndpointActor" id="akka.remote;EndpointWriter">EndpointWriter</a><a href="#akka.remote;EndpointWriter" title="akka.remote.EndpointWriter" class="delimiter">(</a>
  <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote;EndpointWriter.handleOrActive">handleOrActive</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span>,
  <a title="akka.actor.Address" id="akka.remote;EndpointWriter.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <a title="akka.actor.Address" id="akka.remote;EndpointWriter.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <a title="Option[Int]" id="akka.remote;EndpointWriter.refuseUid">refuseUid</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>,
  <a title="akka.remote.transport.AkkaProtocolTransport" id="akka.remote;EndpointWriter.transport">transport</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolTransport" title="akka.remote.transport.AkkaProtocolTransport">AkkaProtocolTransport</a>,
  <a title="akka.remote.RemoteSettings" id="akka.remote;EndpointWriter.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
  <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote;EndpointWriter.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
  <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote;EndpointWriter.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="Option[akka.actor.ActorRef]" id="akka.remote;EndpointWriter.reliableDeliverySupervisor">reliableDeliverySupervisor</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="#akka.remote;EndpointActor" title="akka.remote.EndpointActor">EndpointActor</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointWriter.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>, <a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>, <a href="#akka.remote;EndpointWriter.codec" title="akka.remote.transport.AkkaPduCodec">codec</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>._
  <span class="keyword">import</span> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher

  <span class="keyword">val</span> <a title="akka.actor.ExtendedActorSystem" id="akka.remote;EndpointWriter.extendedSystem">extendedSystem</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a> = <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ExtendedActorSystem" class="delimiter">[</span><a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="akka.remote.RemoteMetrics" id="akka.remote;EndpointWriter.remoteMetrics">remoteMetrics</a> = <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.RemoteMetrics">RemoteMetricsExtension</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="akka.dispatch.MessageDispatcher" id="akka.remote;EndpointWriter.backoffDispatcher">backoffDispatcher</a> = <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatchers" title="=&gt; akka.dispatch.Dispatchers">dispatchers</a>.<a href="../../akka-actor/dispatch/Dispatchers.scala.html#akka.dispatch;Dispatchers.lookup" title="(id: String)akka.dispatch.MessageDispatcher">lookup</a><span class="delimiter">(</span><span title="String(&quot;akka.remote.backoff-remote-dispatcher&quot;)" class="string">&quot;akka.remote.backoff-remote-dispatcher&quot;</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="Option[akka.actor.ActorRef]" id="akka.remote;EndpointWriter.reader_=">reader</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">var</span> <a title="Option[akka.remote.transport.AkkaProtocolHandle]" id="akka.remote;EndpointWriter.handle_=">handle</a>: <span title="Option[akka.remote.transport.AkkaProtocolHandle]">Option</span><span class="delimiter">[</span>AkkaProtocolHandle<span class="delimiter">]</span> = <a href="#akka.remote;EndpointWriter.handleOrActive" title="Option[akka.remote.transport.AkkaProtocolHandle]">handleOrActive</a>
  <span class="keyword">val</span> <a title="Iterator[Int]" id="akka.remote;EndpointWriter.readerId">readerId</a> = <span title="=&gt; collection.Iterator.type">Iterator</span> <span title="(start: Int)Iterator[Int]">from</span> <span title="Int(0)" class="int">0</span>

  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.duration.Deadline" id="akka.remote;EndpointWriter.newAckDeadline">newAckDeadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.SysMsgAckTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SysMsgAckTimeout</a>
  <span class="keyword">var</span> <a title="scala.concurrent.duration.Deadline" id="akka.remote;EndpointWriter.ackDeadline_=">ackDeadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span> = <a href="#akka.remote;EndpointWriter.newAckDeadline" title="=&gt; scala.concurrent.duration.Deadline">newAckDeadline</a>

  <span class="keyword">var</span> <a title="Option[akka.remote.Ack]" id="akka.remote;EndpointWriter.lastAck_=">lastAck</a>: <span title="Option[akka.remote.Ack]">Option</span><span class="delimiter">[</span>Ack<span class="delimiter">]</span> = <span title="None.type">None</span>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="akka.actor.OneForOneStrategy" id="akka.remote;EndpointWriter.supervisorStrategy">supervisorStrategy</a> = <a href="../../akka-actor/actor/FaultHandling.scala.html#akka.actor.OneForOneStrategy.apply$default$1" title="Int" id="akka.remote;EndpointWriter.supervisorStrategy.x$33">OneForOneStrategy</a><span class="delimiter">(</span>loggingEnabled = <a title="Boolean" id="akka.remote;EndpointWriter.supervisorStrategy.x$31" class="keyword">false</a><span class="delimiter">)</span> <a title="PartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive]" id="akka.remote;EndpointWriter.supervisorStrategy.x$34;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.remote;EndpointWriter.supervisorStrategy.x$34;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointWriter.supervisorStrategy.x$34;$anonfun.isDefinedAt.e">e</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointWriter.supervisorStrategy.x$34;$anonfun.isDefinedAt.e" title="Throwable">e</a>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.ErrorLevel" title="=&gt; akka.event.Logging.LogLevel">ErrorLevel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="akka.remote.RemoteActorRefProvider" id="akka.remote;EndpointWriter.provider">provider</a> = <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.RARP">RARP</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a><span class="delimiter">)</span>.<a href="Remoting.scala.html#akka.remote;RARP.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>
  <span class="keyword">val</span> <a title="akka.remote.DefaultMessageDispatcher" id="akka.remote;EndpointWriter.msgDispatch">msgDispatch</a> = <span title="akka.remote.DefaultMessageDispatcher" class="keyword">new</span> <a href="#akka.remote;DefaultMessageDispatcher" title="akka.remote.DefaultMessageDispatcher">DefaultMessageDispatcher</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>, <a href="#akka.remote;EndpointWriter.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="Boolean" id="akka.remote;EndpointWriter.inbound">inbound</a> = <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a>.<span title="=&gt; Boolean">isDefined</span>
  <span class="keyword">var</span> <a title="akka.remote.transport.AssociationHandle.DisassociateInfo" id="akka.remote;EndpointWriter.stopReason_=">stopReason</a>: <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle;DisassociateInfo" title="akka.remote.transport.AssociationHandle.DisassociateInfo">DisassociateInfo</a> = <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Unknown" title="akka.remote.transport.AssociationHandle.Unknown.type">Unknown</a>

  <span class="comment">// Use an internal buffer instead of Stash for efficiency</span>
  <span class="comment">// stash/unstashAll is slow when many messages are stashed</span>
  <span class="comment">// IMPORTANT: sender is not stored, so sender() and forward must not be used in EndpointWriter</span>
  <span class="keyword">val</span> <a title="java.util.LinkedList[AnyRef]" id="akka.remote;EndpointWriter.buffer">buffer</a> = <span title="java.util.LinkedList[AnyRef]" class="keyword">new</span> java.util.<span title="java.util.LinkedList[AnyRef]">LinkedList</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="java.util.LinkedList[akka.remote.EndpointManager.Send]" id="akka.remote;EndpointWriter.prioBuffer">prioBuffer</a> = <span title="java.util.LinkedList[akka.remote.EndpointManager.Send]" class="keyword">new</span> java.util.<span title="java.util.LinkedList[akka.remote.EndpointManager.Send]">LinkedList</span><span class="delimiter">[</span>Send<span class="delimiter">]</span>
  <span class="keyword">var</span> <a title="Long" id="akka.remote;EndpointWriter.largeBufferLogTimestamp_=">largeBufferLogTimestamp</a> = <span title="System.type">System</span>.<span title="()Long">nanoTime</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing" id="akka.remote;EndpointWriter.publishAndThrow">publishAndThrow</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointWriter.publishAndThrow.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="akka.event.Logging.LogLevel" id="akka.remote;EndpointWriter.publishAndThrow.logLevel">logLevel</a>: Logging.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging;LogLevel" title="akka.event.Logging.LogLevel">LogLevel</a><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointWriter.publishAndThrow.reason" title="Throwable">reason</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> _: <a href="#akka.remote;EndpointDisassociatedException" title="akka.remote.EndpointDisassociatedException">EndpointDisassociatedException</a> ⇒ <a href="#akka.remote;EndpointActor.publishDisassociated" title="()Unit">publishDisassociated</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _                                 ⇒ <a href="#akka.remote;EndpointActor.publishError" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Unit">publishError</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.publishAndThrow.reason" title="Throwable">reason</a>, <a href="#akka.remote;EndpointWriter.publishAndThrow.logLevel" title="akka.event.Logging.LogLevel">logLevel</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote;EndpointWriter.publishAndThrow.reason" title="Throwable">reason</a>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.remote;EndpointWriter.ackIdleTimer">ackIdleTimer</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.remote;EndpointWriter.ackIdleTimer.interval">interval</a> = <a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.SysMsgAckTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SysMsgAckTimeout</a> <span title="(divisor: Long)scala.concurrent.duration.FiniteDuration">/</span> <span title="Long(2L)" class="int">2</span>
    <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;EndpointWriter.ackIdleTimer.interval" title="scala.concurrent.duration.FiniteDuration">interval</a>, <a href="#akka.remote;EndpointWriter.ackIdleTimer.interval" title="scala.concurrent.duration.FiniteDuration">interval</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.EndpointWriter.AckIdleCheckTimer.readResolve" title="akka.remote.EndpointWriter.AckIdleCheckTimer.type">AckIdleCheckTimer</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.preStart.h">h</a><span class="delimiter">)</span> ⇒
        <a href="#akka.remote;EndpointWriter.reader_=" title="(x$1: Option[akka.actor.ActorRef])Unit">reader</a> = <a href="#akka.remote;EndpointWriter.startReadEndpoint" title="(handle: akka.remote.transport.AkkaProtocolHandle)Some[akka.actor.ActorRef]">startReadEndpoint</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.preStart.h" title="akka.remote.transport.AkkaProtocolHandle">h</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒
        <a href="#akka.remote;EndpointWriter.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolTransport.associate(c7d880f1cc)" title="(remoteAddress: akka.actor.Address, refuseUid: Option[Int])scala.concurrent.Future[akka.remote.transport.AkkaProtocolHandle]">associate</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointWriter.refuseUid" title="Option[Int]">refuseUid</a><span class="delimiter">)</span>.<span title="(f: akka.remote.transport.AkkaProtocolHandle =&gt; akka.remote.EndpointWriter.Handle)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.remote.EndpointWriter.Handle]">map</span><a href="../../akka-actor/pattern/PipeToSupport.scala.html#akka.pattern;PipeToSupport.pipe" title="(future: scala.concurrent.Future[akka.remote.EndpointWriter.Handle])(implicit executionContext: scala.concurrent.ExecutionContext)akka.pattern.PipeableFuture[akka.remote.EndpointWriter.Handle]" class="delimiter">(</a><a href="#akka.remote.EndpointWriter.Handle.readResolve" title="(handle: akka.remote.transport.AkkaProtocolHandle)akka.remote.EndpointWriter.Handle">Handle</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.preStart.$anonfun.x$7" title="akka.remote.transport.AkkaProtocolHandle">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../akka-actor/pattern/PipeToSupport.scala.html#akka.pattern;PipeToSupport;PipeableFuture.pipeTo" title="(recipient: akka.actor.ActorRef)(implicit sender: akka.actor.ActorRef)scala.concurrent.Future[akka.remote.EndpointWriter.Handle]">pipeTo</a> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable)Unit" id="akka.remote;EndpointWriter.postRestart">postRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointWriter.postRestart.reason">reason</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;EndpointWriter must not be restarted&quot;)" class="string">&quot;EndpointWriter must not be restarted&quot;</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointWriter.ackIdleTimer" title="=&gt; akka.actor.Cancellable">ackIdleTimer</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">deadLetters</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()akka.remote.EndpointManager.Send">poll</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">deadLetters</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()AnyRef">poll</span>
    <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a> <span title="(f: akka.remote.transport.AkkaProtocolHandle =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.remote;EndpointWriter.postStop.$anonfun.x$8" title="akka.remote.transport.AkkaProtocolHandle">_</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.disassociate(79621c8a71)" title="(info: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit">disassociate</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.stopReason_=" title="=&gt; akka.remote.transport.AssociationHandle.DisassociateInfo">stopReason</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#akka.remote;EndpointActor.eventPublisher" title="=&gt; akka.remote.EventPublisher">eventPublisher</a>.<a href="RemotingLifecycleEvent.scala.html#akka.remote;EventPublisher.notifyListeners" title="(message: akka.remote.RemotingLifecycleEvent)Unit">notifyListeners</a><span class="delimiter">(</span><a href="RemotingLifecycleEvent.scala.html#akka.remote;DisassociatedEvent" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, inbound: Boolean)akka.remote.DisassociatedEvent">DisassociatedEvent</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointWriter.inbound" title="=&gt; Boolean">inbound</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; EndpointWriter.this.Receive" id="akka.remote;EndpointWriter.receive">receive</a> = <span title="EndpointWriter.this.Receive" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.remote;EndpointWriter.initializing" title="=&gt; EndpointWriter.this.Receive">initializing</a> <span class="keyword">else</span> <a href="#akka.remote;EndpointWriter.writing" title="=&gt; EndpointWriter.this.Receive">writing</a>

  <span class="keyword">def</span> <a title="=&gt; EndpointWriter.this.Receive" id="akka.remote;EndpointWriter.initializing">initializing</a>: <span title="EndpointWriter.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
      <a href="#akka.remote;EndpointWriter.enqueueInBuffer" title="(msg: AnyRef)Unit">enqueueInBuffer</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Status.Failure<span class="delimiter">(</span><span title="akka.remote.transport.Transport.InvalidAssociationException">e</span>: <a href="transport/Transport.scala.html#akka.remote.transport.Transport;InvalidAssociationException" title="akka.remote.transport.Transport.InvalidAssociationException">InvalidAssociationException</a><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.InvalidAssociation" class="keyword">new</span> <a href="#akka.remote.InvalidAssociation.readResolve" title="akka.remote.InvalidAssociation">InvalidAssociation</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <span title="akka.remote.transport.Transport.InvalidAssociationException">e</span><span class="delimiter">)</span>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.WarningLevel" title="=&gt; akka.event.Logging.LogLevel">WarningLevel</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Status.Failure<span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.EndpointAssociationException" class="keyword">new</span> <a href="#akka.remote;EndpointAssociationException" title="akka.remote.EndpointAssociationException">EndpointAssociationException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Association failed with [&quot;)">Association failed with [$</span><a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span>, <span title="Throwable">e</span><span class="delimiter">)</span>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.DebugLevel" title="=&gt; akka.event.Logging.LogLevel">DebugLevel</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Handle<span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.inboundHandle">inboundHandle</a><span class="delimiter">)</span> ⇒
      <span class="comment">// Assert handle == None?</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.ReliableDeliverySupervisor" title="akka.remote.ReliableDeliverySupervisor.type">ReliableDeliverySupervisor</a>.<a href="#akka.remote.ReliableDeliverySupervisor.GotUid.readResolve" title="(uid: Int, remoteAddres: akka.actor.Address)akka.remote.ReliableDeliverySupervisor.GotUid">GotUid</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.inboundHandle" title="akka.remote.transport.AkkaProtocolHandle">inboundHandle</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.handshakeInfo" title="=&gt; akka.remote.transport.HandshakeInfo">handshakeInfo</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;HandshakeInfo.uid" title="=&gt; Int">uid</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.handle_=" title="(x$1: Option[akka.remote.transport.AkkaProtocolHandle])Unit">handle</a> = <span title="(x: akka.remote.transport.AkkaProtocolHandle)Some[akka.remote.transport.AkkaProtocolHandle]">Some</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.inboundHandle" title="akka.remote.transport.AkkaProtocolHandle">inboundHandle</a><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.reader_=" title="(x$1: Option[akka.actor.ActorRef])Unit">reader</a> = <a href="#akka.remote;EndpointWriter.startReadEndpoint" title="(handle: akka.remote.transport.AkkaProtocolHandle)Some[akka.actor.ActorRef]">startReadEndpoint</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.initializing;$anonfun.isDefinedAt.inboundHandle" title="akka.remote.transport.AkkaProtocolHandle">inboundHandle</a><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointActor.eventPublisher" title="=&gt; akka.remote.EventPublisher">eventPublisher</a>.<a href="RemotingLifecycleEvent.scala.html#akka.remote;EventPublisher.notifyListeners" title="(message: akka.remote.RemotingLifecycleEvent)Unit">notifyListeners</a><span class="delimiter">(</span><a href="RemotingLifecycleEvent.scala.html#akka.remote;AssociatedEvent" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, inbound: Boolean)akka.remote.AssociatedEvent">AssociatedEvent</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointWriter.inbound" title="=&gt; Boolean">inbound</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.becomeWritingOrSendBufferedMessages" title="()Unit">becomeWritingOrSendBufferedMessages</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(msg: AnyRef)Unit" id="akka.remote;EndpointWriter.enqueueInBuffer">enqueueInBuffer</a><span class="delimiter">(</span><a title="AnyRef" id="akka.remote;EndpointWriter.enqueueInBuffer.msg">msg</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;EndpointWriter.enqueueInBuffer.msg" title="AnyRef">msg</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span> @ Send<span class="delimiter">(</span>_: <a href="Remoting.scala.html#akka.remote;PriorityMessage" title="akka.remote.PriorityMessage">PriorityMessage</a>, _, _, _<span class="delimiter">)</span> ⇒ <a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a> <span title="(x$1: akka.remote.EndpointManager.Send)Boolean">offer</span> <span title="akka.remote.EndpointManager.Send">s</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span> @ Send<span class="delimiter">(</span>ActorSelectionMessage<span class="delimiter">(</span>_: <a href="Remoting.scala.html#akka.remote;PriorityMessage" title="akka.remote.PriorityMessage">PriorityMessage</a>, _<span class="delimiter">)</span>, _, _, _<span class="delimiter">)</span> ⇒ <a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a> <span title="(x$1: akka.remote.EndpointManager.Send)Boolean">offer</span> <span title="akka.remote.EndpointManager.Send">s</span>
    <span class="keyword">case</span> _ ⇒ <a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a> <span title="(x$1: AnyRef)Boolean">offer</span> <a href="#akka.remote;EndpointWriter.enqueueInBuffer.msg" title="AnyRef">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="EndpointWriter.this.Receive" id="akka.remote;EndpointWriter.buffering">buffering</a>: <span title="EndpointWriter.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointWriter.buffering;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;EndpointWriter.buffering;$anonfun.isDefinedAt.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a>      ⇒ <a href="#akka.remote;EndpointWriter.enqueueInBuffer" title="(msg: AnyRef)Unit">enqueueInBuffer</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffering;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.BackoffTimer.readResolve" title="akka.remote.EndpointWriter.BackoffTimer.type">BackoffTimer</a> ⇒ <a href="#akka.remote;EndpointWriter.sendBufferedMessages" title="()Unit">sendBufferedMessages</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒
      <span class="comment">// Flushing is postponed after the pending writes</span>
      <a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a> <span title="(x$1: AnyRef)Boolean">offer</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.FlushWait" title="=&gt; scala.concurrent.duration.FiniteDuration">FlushWait</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.EndpointWriter.FlushAndStopTimeout.readResolve" title="akka.remote.EndpointWriter.FlushAndStopTimeout.type">FlushAndStopTimeout</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStopTimeout.readResolve" title="akka.remote.EndpointWriter.FlushAndStopTimeout.type">FlushAndStopTimeout</a> ⇒
      <span class="comment">// enough</span>
      <a href="#akka.remote;EndpointWriter.flushAndStop" title="()Unit">flushAndStop</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.becomeWritingOrSendBufferedMessages">becomeWritingOrSendBufferedMessages</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writing" title="=&gt; EndpointWriter.this.Receive">writing</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffering" title="=&gt; EndpointWriter.this.Receive">buffering</a><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.sendBufferedMessages" title="()Unit">sendBufferedMessages</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="Int" id="akka.remote;EndpointWriter.writeCount_=">writeCount</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">var</span> <a title="Int" id="akka.remote;EndpointWriter.maxWriteCount_=">maxWriteCount</a> = <a href="#akka.remote.EndpointWriter.MaxWriteCount" title="=&gt; Int">MaxWriteCount</a>
  <span class="keyword">var</span> <a title="Long" id="akka.remote;EndpointWriter.adaptiveBackoffNanos_=">adaptiveBackoffNanos</a> = <span title="Long(1000000L)" class="long">1000000L</span> <span class="comment">// 1 ms</span>
  <span class="keyword">var</span> <a title="Boolean" id="akka.remote;EndpointWriter.fullBackoff_=">fullBackoff</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">// FIXME remove these counters when tuning/testing is completed</span>
  <span class="keyword">var</span> <a title="Int" id="akka.remote;EndpointWriter.fullBackoffCount_=">fullBackoffCount</a> = <span title="Int(1)" class="int">1</span>
  <span class="keyword">var</span> <a title="Int" id="akka.remote;EndpointWriter.smallBackoffCount_=">smallBackoffCount</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">var</span> <a title="Int" id="akka.remote;EndpointWriter.noBackoffCount_=">noBackoffCount</a> = <span title="Int(0)" class="int">0</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.adjustAdaptiveBackup">adjustAdaptiveBackup</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="(x$1: Int)Unit">maxWriteCount</a> = math.<span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeCount_=" title="=&gt; Int">writeCount</a>, <a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="=&gt; Int">maxWriteCount</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeCount_=" title="=&gt; Int">writeCount</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#akka.remote.EndpointWriter.SendBufferBatchSize" title="=&gt; Int">SendBufferBatchSize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote;EndpointWriter.fullBackoff_=" title="(x$1: Boolean)Unit">fullBackoff</a> = <span title="Boolean(true)" class="keyword">true</span>
      <a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="(x$1: Long)Unit">adaptiveBackoffNanos</a> = math.<span title="(x: Long, y: Long)Long">min</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="=&gt; Long">adaptiveBackoffNanos</a> <span title="(x: Double)Double">*</span> <span title="Double(1.2)" class="double">1.2</span><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>, <a href="#akka.remote.EndpointWriter.MaxAdaptiveBackoffNanos" title="=&gt; Long">MaxAdaptiveBackoffNanos</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeCount_=" title="=&gt; Int">writeCount</a> <span title="(x: Double)Boolean">&gt;=</span> <a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="=&gt; Int">maxWriteCount</a> <span title="(x: Double)Double">*</span> <span title="Double(0.6)" class="double">0.6</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="(x$1: Long)Unit">adaptiveBackoffNanos</a> = math.<span title="(x: Long, y: Long)Long">max</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="=&gt; Long">adaptiveBackoffNanos</a> <span title="(x: Double)Double">*</span> <span title="Double(0.9)" class="double">0.9</span><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>, <a href="#akka.remote.EndpointWriter.MinAdaptiveBackoffNanos" title="=&gt; Long">MinAdaptiveBackoffNanos</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeCount_=" title="=&gt; Int">writeCount</a> <span title="(x: Double)Boolean">&lt;=</span> <a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="=&gt; Int">maxWriteCount</a> <span title="(x: Double)Double">*</span> <span title="Double(0.2)" class="double">0.2</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="(x$1: Long)Unit">adaptiveBackoffNanos</a> = math.<span title="(x: Long, y: Long)Long">min</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="=&gt; Long">adaptiveBackoffNanos</a> <span title="(x: Double)Double">*</span> <span title="Double(1.1)" class="double">1.1</span><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>, <a href="#akka.remote.EndpointWriter.MaxAdaptiveBackoffNanos" title="=&gt; Long">MaxAdaptiveBackoffNanos</a><span class="delimiter">)</span>

    <a href="#akka.remote;EndpointWriter.writeCount_=" title="(x$1: Int)Unit">writeCount</a> = <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.sendBufferedMessages">sendBufferedMessages</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(msg: Any)Boolean" id="akka.remote;EndpointWriter.sendBufferedMessages.delegate">delegate</a><span class="delimiter">(</span><a title="Any" id="akka.remote;EndpointWriter.sendBufferedMessages.delegate.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.remote;EndpointWriter.sendBufferedMessages.delegate.msg" title="Any">msg</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="akka.remote.EndpointManager.Send">s</span>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
        <a href="#akka.remote;EndpointWriter.writeSend" title="(s: akka.remote.EndpointManager.Send)Boolean">writeSend</a><span class="delimiter">(</span><span title="akka.remote.EndpointManager.Send">s</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒
        <a href="#akka.remote;EndpointWriter.flushAndStop" title="()Unit">flushAndStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <span title="akka.remote.EndpointWriter.StopReading">s</span> @ StopReading<span class="delimiter">(</span>_, <a title="akka.actor.ActorRef" id="akka.remote;EndpointWriter.sendBufferedMessages.delegate.replyTo">replyTo</a><span class="delimiter">)</span> ⇒
        <a href="#akka.remote;EndpointWriter.reader_=" title="=&gt; Option[akka.actor.ActorRef]">reader</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.delegate.$anonfun.x$9" title="akka.actor.ActorRef">_</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><span title="akka.remote.EndpointWriter.StopReading">s</span>, <a href="#akka.remote;EndpointWriter.sendBufferedMessages.delegate.replyTo" title="akka.actor.ActorRef">replyTo</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>

    @tailrec <span class="keyword">def</span> <a title="(count: Int)Boolean" id="akka.remote;EndpointWriter.sendBufferedMessages.writeLoop">writeLoop</a><span class="delimiter">(</span><a title="Int" id="akka.remote;EndpointWriter.sendBufferedMessages.writeLoop.count">count</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.writeLoop.count" title="Int">count</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.delegate" title="(msg: Any)Boolean">delegate</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()AnyRef">peek</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()AnyRef">removeFirst</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.remote;EndpointWriter.writeCount_=" title="(x$1: Int)Unit">writeCount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
          <a href="#akka.remote;EndpointWriter.sendBufferedMessages.writeLoop" title="(count: Int)Boolean">writeLoop</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.writeLoop.count" title="Int">count</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean(true)" class="keyword">true</span>

    @tailrec <span class="keyword">def</span> <a title="()Boolean" id="akka.remote;EndpointWriter.sendBufferedMessages.writePrioLoop">writePrioLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <a href="#akka.remote;EndpointWriter.writeSend" title="(s: akka.remote.EndpointManager.Send)Boolean">writeSend</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()akka.remote.EndpointManager.Send">peek</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">{</span> <a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()akka.remote.EndpointManager.Send">removeFirst</span><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="#akka.remote;EndpointWriter.sendBufferedMessages.writePrioLoop" title="()Boolean">writePrioLoop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Int" id="akka.remote;EndpointWriter.sendBufferedMessages.size">size</a> = <a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()Int">size</span>

    <span class="keyword">val</span> <a title="Boolean" id="akka.remote;EndpointWriter.sendBufferedMessages.ok">ok</a> = <a href="#akka.remote;EndpointWriter.sendBufferedMessages.writePrioLoop" title="()Boolean">writePrioLoop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote;EndpointWriter.sendBufferedMessages.writeLoop" title="(count: Int)Boolean">writeLoop</a><span class="delimiter">(</span><a href="#akka.remote.EndpointWriter.SendBufferBatchSize" title="=&gt; Int">SendBufferBatchSize</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffer" title="=&gt; java.util.LinkedList[AnyRef]">buffer</a>.<span title="()Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.remote;EndpointWriter.prioBuffer" title="=&gt; java.util.LinkedList[akka.remote.EndpointManager.Send]">prioBuffer</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// FIXME remove this when testing/tuning is completed</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.isDebugEnabled" title="=&gt; Boolean">isDebugEnabled</a><span class="delimiter">)</span>
        <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Drained buffer with maxWriteCount: &quot;)">Drained buffer with maxWriteCount: $</span><a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="=&gt; Int">maxWriteCount</a><span title="String(&quot;, fullBackoffCount: &quot;)">, fullBackoffCount: $</span><a href="#akka.remote;EndpointWriter.fullBackoffCount_=" title="=&gt; Int">fullBackoffCount</a><span title="String(&quot;&quot;)" class="string">&quot;</span> <span title="(x$1: Any)String">+</span>
          <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;, smallBackoffCount: &quot;)">, smallBackoffCount: $</span><a href="#akka.remote;EndpointWriter.smallBackoffCount_=" title="=&gt; Int">smallBackoffCount</a><span title="String(&quot;, noBackoffCount: &quot;)">, noBackoffCount: $</span><a href="#akka.remote;EndpointWriter.noBackoffCount_=" title="=&gt; Int">noBackoffCount</a><span title="String(&quot; &quot;)" class="string"> &quot;</span> <span title="(x$1: Any)String">+</span>
          <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;, adaptiveBackoff: &quot;)">, adaptiveBackoff: $</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="=&gt; Long">adaptiveBackoffNanos</a> <span title="(x: Int)Long">/</span> <span title="Int(1000)" class="int">1000</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.fullBackoffCount_=" title="(x$1: Int)Unit">fullBackoffCount</a> = <span title="Int(1)" class="int">1</span>
      <a href="#akka.remote;EndpointWriter.smallBackoffCount_=" title="(x$1: Int)Unit">smallBackoffCount</a> = <span title="Int(0)" class="int">0</span>
      <a href="#akka.remote;EndpointWriter.noBackoffCount_=" title="(x$1: Int)Unit">noBackoffCount</a> = <span title="Int(0)" class="int">0</span>

      <a href="#akka.remote;EndpointWriter.writeCount_=" title="(x$1: Int)Unit">writeCount</a> = <span title="Int(0)" class="int">0</span>
      <a href="#akka.remote;EndpointWriter.maxWriteCount_=" title="(x$1: Int)Unit">maxWriteCount</a> = <a href="#akka.remote.EndpointWriter.MaxWriteCount" title="=&gt; Int">MaxWriteCount</a>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writing" title="=&gt; EndpointWriter.this.Receive">writing</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.ok" title="Boolean">ok</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote;EndpointWriter.noBackoffCount_=" title="(x$1: Int)Unit">noBackoffCount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.BackoffTimer.readResolve" title="akka.remote.EndpointWriter.BackoffTimer.type">BackoffTimer</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.size" title="Int">size</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.LogBufferSizeExceeding" title="=&gt; Int">LogBufferSizeExceeding</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Long" id="akka.remote;EndpointWriter.sendBufferedMessages.now">now</a> = <span title="System.type">System</span>.<span title="()Long">nanoTime</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.sendBufferedMessages.now" title="Long">now</a> <span title="(x: Long)Long">-</span> <a href="#akka.remote;EndpointWriter.largeBufferLogTimestamp_=" title="=&gt; Long">largeBufferLogTimestamp</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.remote.EndpointWriter.LogBufferSizeInterval" title="=&gt; Long">LogBufferSizeInterval</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span class="string">&quot;[{}] buffered messages in EndpointWriter for [{}]. &quot;</span> <span title="String(&quot;[{}] buffered messages in EndpointWriter for [{}]. You should probably implement flow control to avoid flooding the remote connection.&quot;)">+</span>
            <span class="string">&quot;You should probably implement flow control to avoid flooding the remote connection.&quot;</span>,
            <a href="#akka.remote;EndpointWriter.sendBufferedMessages.size" title="Int">size</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span>
          <a href="#akka.remote;EndpointWriter.largeBufferLogTimestamp_=" title="(x$1: Long)Unit">largeBufferLogTimestamp</a> = <a href="#akka.remote;EndpointWriter.sendBufferedMessages.now" title="Long">now</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#akka.remote;EndpointWriter.adjustAdaptiveBackup" title="()Unit">adjustAdaptiveBackup</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer" title="()Unit">scheduleBackoffTimer</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.scheduleBackoffTimer">scheduleBackoffTimer</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.fullBackoff_=" title="=&gt; Boolean">fullBackoff</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote;EndpointWriter.fullBackoffCount_=" title="(x$1: Int)Unit">fullBackoffCount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.remote;EndpointWriter.fullBackoff_=" title="(x$1: Boolean)Unit">fullBackoff</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../akka-actor/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.BackoffPeriod" title="=&gt; scala.concurrent.duration.FiniteDuration">BackoffPeriod</a>, <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.EndpointWriter.BackoffTimer.readResolve" title="akka.remote.EndpointWriter.BackoffTimer.type">BackoffTimer</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#akka.remote;EndpointWriter.smallBackoffCount_=" title="(x$1: Int)Unit">smallBackoffCount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote;EndpointWriter.scheduleBackoffTimer.s">s</a> = <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
      <span class="keyword">val</span> <a title="Long" id="akka.remote;EndpointWriter.scheduleBackoffTimer.backoffDeadlinelineNanoTime">backoffDeadlinelineNanoTime</a> = <span title="System.type">System</span>.<span title="()Long">nanoTime</span> <span title="(x: Long)Long">+</span> <a href="#akka.remote;EndpointWriter.adaptiveBackoffNanos_=" title="=&gt; Long">adaptiveBackoffNanos</a>
      <span title="(body: =&gt; Unit)(implicit execctx: scala.concurrent.ExecutionContext)scala.concurrent.Future[Unit]">Future</span> <span class="delimiter">{</span>
        @tailrec <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.scheduleBackoffTimer.backoff">backoff</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Long" id="akka.remote;EndpointWriter.scheduleBackoffTimer.backoff.backoffNanos">backoffNanos</a> = <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.backoffDeadlinelineNanoTime" title="Long">backoffDeadlinelineNanoTime</a> <span title="(x: Long)Long">-</span> <span title="System.type">System</span>.<span title="()Long">nanoTime</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.backoff.backoffNanos" title="Long">backoffNanos</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="java.util.concurrent.locks.LockSupport.type">LockSupport</span>.<span title="(x$1: Long)Unit">parkNanos</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.backoff.backoffNanos" title="Long">backoffNanos</a><span class="delimiter">)</span>
            <span class="comment">// parkNanos allows for spurious wakeup, check again</span>
            <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.backoff" title="()Unit">backoff</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.backoff" title="()Unit">backoff</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer.s" title="akka.actor.ActorRef">s</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.remote.EndpointWriter.BackoffTimer.readResolve" title="akka.remote.EndpointWriter.BackoffTimer.type">BackoffTimer</a>, <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor.ActorRef" title="akka.actor.ActorRef.type">ActorRef</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor.ActorRef.noSender" title="=&gt; akka.actor.ActorRef">noSender</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span title="Unit" class="delimiter">(</span><a href="#akka.remote;EndpointWriter.backoffDispatcher" title="=&gt; akka.dispatch.MessageDispatcher">backoffDispatcher</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="EndpointWriter.this.Receive" id="akka.remote;EndpointWriter.writing">writing</a>: <span title="EndpointWriter.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointWriter.writing;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;EndpointWriter.writing;$anonfun.isDefinedAt.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;EndpointWriter.writeSend" title="(s: akka.remote.EndpointManager.Send)Boolean">writeSend</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writing;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writing;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.seqOpt" title="=&gt; Option[akka.remote.SeqNo]">seqOpt</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.remote;EndpointWriter.enqueueInBuffer" title="(msg: AnyRef)Unit">enqueueInBuffer</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writing;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span>
        <a href="#akka.remote;EndpointWriter.scheduleBackoffTimer" title="()Unit">scheduleBackoffTimer</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.buffering" title="=&gt; EndpointWriter.this.Receive">buffering</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">// We are in Writing state, so buffer is empty, safe to stop here</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒
      <a href="#akka.remote;EndpointWriter.flushAndStop" title="()Unit">flushAndStop</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.AckIdleCheckTimer.readResolve" title="akka.remote.EndpointWriter.AckIdleCheckTimer.type">AckIdleCheckTimer</a> <span class="keyword">if</span> <a href="#akka.remote;EndpointWriter.ackDeadline_=" title="=&gt; scala.concurrent.duration.Deadline">ackDeadline</a>.<span title="()Boolean">isOverdue</span><span class="delimiter">(</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.trySendPureAck" title="()Unit">trySendPureAck</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(s: akka.remote.EndpointManager.Send)Boolean" id="akka.remote;EndpointWriter.writeSend">writeSend</a><span class="delimiter">(</span><a title="akka.remote.EndpointManager.Send" id="akka.remote;EndpointWriter.writeSend.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.writeSend.h">h</a><span class="delimiter">)</span> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.remoteSettings" title="=&gt; akka.remote.RemoteSettings">remoteSettings</a>.<a href="RemoteSettings.scala.html#akka.remote;RemoteSettings.LogSend" title="=&gt; Boolean">LogSend</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="=&gt; String" id="akka.remote;EndpointWriter.writeSend.msgLog">msgLog</a> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;RemoteMessage: [&quot;)">RemoteMessage: [$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.message" title="=&gt; Any">message</a><span class="delimiter">}</span><span title="String(&quot;] to [&quot;)">] to [$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.recipient" title="=&gt; akka.remote.RemoteActorRef">recipient</a><span class="delimiter">}</span><span title="String(&quot;]&lt;+[&quot;)">]&lt;+[$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.recipient" title="=&gt; akka.remote.RemoteActorRef">recipient</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRef.path" title="=&gt; akka.actor.ActorPath">path</a><span class="delimiter">}</span><span title="String(&quot;] from [&quot;)">] from [$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.senderOption" title="=&gt; Option[akka.actor.ActorRef]">senderOption</a>.<span title="(default: =&gt; akka.actor.ActorRef)akka.actor.ActorRef">getOrElse</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span>
          <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;sending message {}&quot;)" class="string">&quot;sending message {}&quot;</span>, <a href="#akka.remote;EndpointWriter.writeSend.msgLog" title="=&gt; String">msgLog</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="akka.util.ByteString" id="akka.remote;EndpointWriter.writeSend.pdu">pdu</a> = <a href="#akka.remote;EndpointWriter.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec.constructMessage" title="(localAddress: akka.actor.Address, recipient: akka.actor.ActorRef, serializedMessage: akka.remote.WireFormats.SerializedMessage, senderOption: Option[akka.actor.ActorRef], seqOption: Option[akka.remote.SeqNo], ackOption: Option[akka.remote.Ack])akka.util.ByteString">constructMessage</a><span class="delimiter">(</span>
          <a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.recipient" title="=&gt; akka.remote.RemoteActorRef">recipient</a>.<a href="RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRef.localAddressToUse" title="=&gt; akka.actor.Address">localAddressToUse</a>,
          <a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.recipient" title="=&gt; akka.remote.RemoteActorRef">recipient</a>,
          <a href="#akka.remote;EndpointWriter.serializeMessage" title="(msg: Any)akka.remote.WireFormats.SerializedMessage">serializeMessage</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.message" title="=&gt; Any">message</a><span class="delimiter">)</span>,
          <a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.senderOption" title="=&gt; Option[akka.actor.ActorRef]">senderOption</a>,
          seqOption = <a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.seqOpt" title="=&gt; Option[akka.remote.SeqNo]">seqOpt</a>,
          ackOption = <a href="#akka.remote;EndpointWriter.lastAck_=" title="=&gt; Option[akka.remote.Ack]">lastAck</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="Int" id="akka.remote;EndpointWriter.writeSend.pduSize">pduSize</a> = <a href="#akka.remote;EndpointWriter.writeSend.pdu" title="akka.util.ByteString">pdu</a>.<span title="=&gt; Int">size</span>
        <a href="#akka.remote;EndpointWriter.remoteMetrics" title="=&gt; akka.remote.RemoteMetrics">remoteMetrics</a>.<a href="RemoteMetricsExtension.scala.html#akka.remote;RemoteMetrics.logPayloadBytes" title="(msg: Any, payloadBytes: Int)Unit">logPayloadBytes</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.message" title="=&gt; Any">message</a>, <a href="#akka.remote;EndpointWriter.writeSend.pduSize" title="Int">pduSize</a><span class="delimiter">)</span>

        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.pduSize" title="Int">pduSize</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#akka.remote;EndpointWriter.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>.<a href="transport/AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapter.maximumPayloadBytes" title="=&gt; Int">maximumPayloadBytes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="akka.remote.OversizedPayloadException" id="akka.remote;EndpointWriter.writeSend.reason">reason</a> = <span title="akka.remote.OversizedPayloadException" class="keyword">new</span> <a href="#akka.remote;OversizedPayloadException" title="akka.remote.OversizedPayloadException">OversizedPayloadException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Discarding oversized payload sent to &quot;)">Discarding oversized payload sent to $</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.recipient" title="=&gt; akka.remote.RemoteActorRef">recipient</a><span class="delimiter">}</span><span title="String(&quot;: max allowed size &quot;)">: max allowed size $</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>.<a href="transport/AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapter.maximumPayloadBytes" title="=&gt; Int">maximumPayloadBytes</a><span class="delimiter">}</span><span title="String(&quot; bytes, actual size of encoded &quot;)"> bytes, actual size of encoded $</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.s" title="akka.remote.EndpointManager.Send">s</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;Send.message" title="=&gt; Any">message</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot; was &quot;)"> was $</span><span class="delimiter">{</span><a href="#akka.remote;EndpointWriter.writeSend.pdu" title="akka.util.ByteString">pdu</a>.<span title="=&gt; Int">size</span><span class="delimiter">}</span><span title="String(&quot; bytes.&quot;)" class="string"> bytes.&quot;</span><span class="delimiter">)</span>
          <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(de736aeaab)" title="(cause: Throwable, message: String)Unit">error</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.reason" title="akka.remote.OversizedPayloadException">reason</a>, <span title="String(&quot;Transient association error (association remains live)&quot;)" class="string">&quot;Transient association error (association remains live)&quot;</span><span class="delimiter">)</span>
          <span title="Boolean(true)" class="keyword">true</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Boolean" id="akka.remote;EndpointWriter.writeSend.ok">ok</a> = <a href="#akka.remote;EndpointWriter.writeSend.h" title="akka.remote.transport.AkkaProtocolHandle">h</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.write" title="(payload: akka.util.ByteString)Boolean">write</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.pdu" title="akka.util.ByteString">pdu</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.writeSend.ok" title="Boolean">ok</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#akka.remote;EndpointWriter.ackDeadline_=" title="(x$1: scala.concurrent.duration.Deadline)Unit">ackDeadline</a> = <a href="#akka.remote;EndpointWriter.newAckDeadline" title="=&gt; scala.concurrent.duration.Deadline">newAckDeadline</a>
            <a href="#akka.remote;EndpointWriter.lastAck_=" title="(x$1: Option[akka.remote.Ack])Unit">lastAck</a> = <span title="None.type">None</span>
          <span class="delimiter">}</span>
          <a href="#akka.remote;EndpointWriter.writeSend.ok" title="Boolean">ok</a>
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <span title="None.type">None</span> ⇒
        <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote;EndpointException.<init>(a76a789b14)" title="(msg: String)akka.remote.EndpointException" class="keyword">new</a> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Internal error: Endpoint is in state Writing, but no association handle is present.&quot;)" class="string">&quot;Internal error: Endpoint is in state Writing, but no association handle is present.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="java.io.NotSerializableException">e</span>: <span title="java.io.NotSerializableException">NotSerializableException</span> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(de736aeaab)" title="(cause: Throwable, message: String)Unit">error</a><span class="delimiter">(</span><span title="java.io.NotSerializableException">e</span>, <span title="String(&quot;Transient association error (association remains live)&quot;)" class="string">&quot;Transient association error (association remains live)&quot;</span><span class="delimiter">)</span>
      <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">case</span> <span title="akka.remote.EndpointException">e</span>: <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a> ⇒
      <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span class="delimiter">(</span><span title="akka.remote.EndpointException">e</span>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.ErrorLevel" title="=&gt; akka.event.Logging.LogLevel">ErrorLevel</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote;EndpointWriter.writeSend.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span class="delimiter">(</span><span title="akka.remote.EndpointException" class="keyword">new</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Failed to write message to the transport&quot;)" class="string">&quot;Failed to write message to the transport&quot;</span>, <span title="Throwable">e</span><span class="delimiter">)</span>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.ErrorLevel" title="=&gt; akka.event.Logging.LogLevel">ErrorLevel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; EndpointWriter.this.Receive" id="akka.remote;EndpointWriter.handoff">handoff</a>: <span title="EndpointWriter.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointWriter.handoff;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.reader_=" title="(x$1: Option[akka.actor.ActorRef])Unit">reader</a> = <a href="#akka.remote;EndpointWriter.startReadEndpoint" title="(handle: akka.remote.transport.AkkaProtocolHandle)Some[akka.actor.ActorRef]">startReadEndpoint</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a>.<span title="=&gt; akka.remote.transport.AkkaProtocolHandle">get</span><span class="delimiter">)</span>
      <a href="#akka.remote;EndpointWriter.becomeWritingOrSendBufferedMessages" title="()Unit">becomeWritingOrSendBufferedMessages</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <a title="akka.remote.EndpointManager.Send" id="akka.remote;EndpointWriter.handoff;$anonfun.isDefinedAt.s">s</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Send" title="akka.remote.EndpointManager.Send">Send</a> ⇒
      <a href="#akka.remote;EndpointWriter.enqueueInBuffer" title="(msg: AnyRef)Unit">enqueueInBuffer</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointWriter.handoff;$anonfun.isDefinedAt.s" title="akka.remote.EndpointManager.Send">s</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(message: Any)Unit" id="akka.remote;EndpointWriter.unhandled">unhandled</a><span class="delimiter">(</span><a title="Any" id="akka.remote;EndpointWriter.unhandled.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;EndpointWriter.unhandled.message" title="Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span><span title="akka.actor.ActorRef">r</span><span class="delimiter">)</span> <span class="keyword">if</span> <span title="akka.actor.ActorRef">r</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote;EndpointWriter.reader_=" title="=&gt; Option[akka.actor.ActorRef]">reader</a>.<span title="(implicit ev: &lt;:&lt;[Null,akka.actor.ActorRef])akka.actor.ActorRef">orNull</span> ⇒
      <a href="#akka.remote;EndpointWriter.publishAndThrow" title="(reason: Throwable, logLevel: akka.event.Logging.LogLevel)Nothing">publishAndThrow</a><span class="delimiter">(</span><span title="akka.remote.EndpointDisassociatedException" class="keyword">new</span> <a href="#akka.remote;EndpointDisassociatedException" title="akka.remote.EndpointDisassociatedException">EndpointDisassociatedException</a><span class="delimiter">(</span><span title="String(&quot;Disassociated&quot;)" class="string">&quot;Disassociated&quot;</span><span class="delimiter">)</span>, <a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event.Logging.DebugLevel" title="=&gt; akka.event.Logging.LogLevel">DebugLevel</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.remote.EndpointWriter.StopReading" id="akka.remote;EndpointWriter.unhandled.s">s</a> @ StopReading<span class="delimiter">(</span>_, <span title="akka.actor.ActorRef">replyTo</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.reader_=" title="=&gt; Option[akka.actor.ActorRef]">reader</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">r</span><span class="delimiter">)</span> ⇒
          <span title="akka.actor.ActorRef">r</span>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.unhandled.s" title="akka.remote.EndpointWriter.StopReading">s</a>, <span title="akka.actor.ActorRef">replyTo</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="None.type">None</span> ⇒
          <span class="comment">// initalizing, buffer and take care of it later when buffer is sent</span>
          <a href="#akka.remote;EndpointWriter.enqueueInBuffer" title="(msg: AnyRef)Unit">enqueueInBuffer</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.unhandled.s" title="akka.remote.EndpointWriter.StopReading">s</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> TakeOver<span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.unhandled.newHandle">newHandle</a>, <span title="akka.actor.ActorRef">replyTo</span><span class="delimiter">)</span> ⇒
      <span class="comment">// Shutdown old reader</span>
      <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a> <span title="(f: akka.remote.transport.AkkaProtocolHandle =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.remote;EndpointWriter.unhandled.$anonfun.x$10" title="akka.remote.transport.AkkaProtocolHandle">_</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.disassociate(aa97cb1b3d)" title="()Unit">disassociate</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#akka.remote;EndpointWriter.handle_=" title="(x$1: Option[akka.remote.transport.AkkaProtocolHandle])Unit">handle</a> = <span title="(x: akka.remote.transport.AkkaProtocolHandle)Some[akka.remote.transport.AkkaProtocolHandle]">Some</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.unhandled.newHandle" title="akka.remote.transport.AkkaProtocolHandle">newHandle</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.TookOver.readResolve" title="(writer: akka.actor.ActorRef, handle: akka.remote.transport.AkkaProtocolHandle)akka.remote.EndpointWriter.TookOver">TookOver</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote;EndpointWriter.unhandled.newHandle" title="akka.remote.transport.AkkaProtocolHandle">newHandle</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.handoff" title="=&gt; EndpointWriter.this.Receive">handoff</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStop.readResolve" title="akka.remote.EndpointWriter.FlushAndStop.type">FlushAndStop</a> ⇒
      <a href="#akka.remote;EndpointWriter.stopReason_=" title="(x$1: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit">stopReason</a> = <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Shutdown" title="akka.remote.transport.AssociationHandle.Shutdown.type">Shutdown</a>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> OutboundAck<span class="delimiter">(</span><a title="akka.remote.Ack" id="akka.remote;EndpointWriter.unhandled.ack">ack</a><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointWriter.lastAck_=" title="(x$1: Option[akka.remote.Ack])Unit">lastAck</a> = <span title="(x: akka.remote.Ack)Some[akka.remote.Ack]">Some</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.unhandled.ack" title="akka.remote.Ack">ack</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.AckIdleCheckTimer.readResolve" title="akka.remote.EndpointWriter.AckIdleCheckTimer.type">AckIdleCheckTimer</a>   ⇒ <span class="comment">// Ignore</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.FlushAndStopTimeout.readResolve" title="akka.remote.EndpointWriter.FlushAndStopTimeout.type">FlushAndStopTimeout</a> ⇒ <span class="comment">// ignore</span>
    <span class="keyword">case</span> <a href="#akka.remote.EndpointWriter.BackoffTimer.readResolve" title="akka.remote.EndpointWriter.BackoffTimer.type">BackoffTimer</a>        ⇒ <span class="comment">// ignore</span>
    <span class="keyword">case</span> <a title="Any" id="akka.remote;EndpointWriter.unhandled.other">other</a>               ⇒ <a href="#akka.remote;EndpointWriter" title="akka.remote.EndpointWriter" class="keyword">super</a>.<a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.unhandled" title="(message: Any)Unit">unhandled</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.unhandled.other" title="Any">other</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.flushAndStop">flushAndStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// Try to send a last Ack message</span>
    <a href="#akka.remote;EndpointWriter.trySendPureAck" title="()Unit">trySendPureAck</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.remote;EndpointWriter.stopReason_=" title="(x$1: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit">stopReason</a> = <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Shutdown" title="akka.remote.transport.AssociationHandle.Shutdown.type">Shutdown</a>
    <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointWriter.trySendPureAck">trySendPureAck</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.trySendPureAck.$anonfun.h">h</a> ← <a href="#akka.remote;EndpointWriter.handle_=" title="(f: akka.remote.transport.AkkaProtocolHandle =&gt; Unit)Unit">handle</a>; <a title="akka.remote.Ack" id="akka.remote;EndpointWriter.trySendPureAck.$anonfun.$anonfun.ack">ack</a> ← <a href="#akka.remote;EndpointWriter.lastAck_=" title="(f: akka.remote.Ack =&gt; Unit)Unit">lastAck</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.trySendPureAck.$anonfun.h" title="akka.remote.transport.AkkaProtocolHandle">h</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.write" title="(payload: akka.util.ByteString)Boolean">write</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec.constructPureAck" title="(ack: akka.remote.Ack)akka.util.ByteString">constructPureAck</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.trySendPureAck.$anonfun.$anonfun.ack" title="akka.remote.Ack">ack</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.remote;EndpointWriter.ackDeadline_=" title="(x$1: scala.concurrent.duration.Deadline)Unit">ackDeadline</a> = <a href="#akka.remote;EndpointWriter.newAckDeadline" title="=&gt; scala.concurrent.duration.Deadline">newAckDeadline</a>
        <a href="#akka.remote;EndpointWriter.lastAck_=" title="(x$1: Option[akka.remote.Ack])Unit">lastAck</a> = <span title="None.type">None</span>
      <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(handle: akka.remote.transport.AkkaProtocolHandle)Some[akka.actor.ActorRef]" id="akka.remote;EndpointWriter.startReadEndpoint">startReadEndpoint</a><span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.startReadEndpoint.handle">handle</a>: <a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle" title="akka.remote.transport.AkkaProtocolHandle">AkkaProtocolHandle</a><span class="delimiter">)</span>: <span title="Some[akka.actor.ActorRef]">Some</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote;EndpointWriter.startReadEndpoint.newReader">newReader</a> =
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span>
        <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.RARP">RARP</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Remoting.scala.html#akka.remote;RARP.configureDispatcher" title="(props: akka.actor.Props)akka.actor.Props">configureDispatcher</a><span class="delimiter">(</span><a href="#akka.remote.EndpointReader" title="akka.remote.EndpointReader.type">EndpointReader</a>.<a href="#akka.remote.EndpointReader.props" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, transport: akka.remote.transport.Transport, settings: akka.remote.RemoteSettings, codec: akka.remote.transport.AkkaPduCodec, msgDispatch: akka.remote.InboundMessageDispatcher, inbound: Boolean, uid: Int, reliableDeliverySupervisor: Option[akka.actor.ActorRef], receiveBuffers: java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState])akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointWriter.transport" title="akka.remote.transport.AkkaProtocolTransport">transport</a>, <a href="#akka.remote;EndpointWriter.settings" title="akka.remote.RemoteSettings">settings</a>, <a href="#akka.remote;EndpointWriter.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>,
          <a href="#akka.remote;EndpointWriter.msgDispatch" title="=&gt; akka.remote.DefaultMessageDispatcher">msgDispatch</a>, <a href="#akka.remote;EndpointWriter.inbound" title="=&gt; Boolean">inbound</a>, <a href="#akka.remote;EndpointWriter.startReadEndpoint.handle" title="akka.remote.transport.AkkaProtocolHandle">handle</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.handshakeInfo" title="=&gt; akka.remote.transport.HandshakeInfo">handshakeInfo</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;HandshakeInfo.uid" title="=&gt; Int">uid</a>, <a href="#akka.remote;EndpointWriter.reliableDeliverySupervisor" title="=&gt; Option[akka.actor.ActorRef]">reliableDeliverySupervisor</a>, <a href="#akka.remote;EndpointWriter.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span>,
        <span title="String(&quot;endpointReader-&quot;)" class="string">&quot;endpointReader-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="Remoting.scala.html#akka.remote.AddressUrlEncoder.apply" title="(address: akka.actor.Address)String">AddressUrlEncoder</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote;EndpointWriter.readerId" title="=&gt; Iterator[Int]">readerId</a>.<span title="()Int">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.remote;EndpointWriter.startReadEndpoint.handle" title="akka.remote.transport.AkkaProtocolHandle">handle</a>.<a href="transport/AkkaProtocolTransport.scala.html#akka.remote.transport;AkkaProtocolHandle.readHandlerPromise" title="=&gt; scala.concurrent.Promise[akka.remote.transport.AssociationHandle.HandleEventListener]">readHandlerPromise</a>.<span title="(v: akka.remote.transport.AssociationHandle.HandleEventListener)handle.readHandlerPromise.type">success</span><span class="delimiter">(</span><a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle;ActorHandleEventListener" title="(actor: akka.actor.ActorRef)akka.remote.transport.AssociationHandle.ActorHandleEventListener">ActorHandleEventListener</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.startReadEndpoint.newReader" title="akka.actor.ActorRef">newReader</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.startReadEndpoint.newReader" title="akka.actor.ActorRef">newReader</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: Any)akka.remote.WireFormats.SerializedMessage" id="akka.remote;EndpointWriter.serializeMessage">serializeMessage</a><span class="delimiter">(</span><a title="Any" id="akka.remote;EndpointWriter.serializeMessage.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="akka.remote.WireFormats.SerializedMessage">SerializedMessage</span> = <a href="#akka.remote;EndpointWriter.handle_=" title="=&gt; Option[akka.remote.transport.AkkaProtocolHandle]">handle</a> <span title="akka.remote.WireFormats.SerializedMessage" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.transport.AkkaProtocolHandle" id="akka.remote;EndpointWriter.serializeMessage.h">h</a><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../akka-actor/serialization/Serialization.scala.html#akka.serialization.Serialization.currentTransportInformation" title="=&gt; scala.util.DynamicVariable[akka.serialization.Serialization.Information]">currentTransportInformation</a>.<span title="(newval: akka.serialization.Serialization.Information)(thunk: =&gt; akka.remote.WireFormats.SerializedMessage)akka.remote.WireFormats.SerializedMessage">withValue</span><span class="delimiter">(</span><a href="../../akka-actor/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../akka-actor/serialization/Serialization.scala.html#akka.serialization.Serialization;Information" title="(address: akka.actor.Address, system: akka.actor.ActorSystem)akka.serialization.Serialization.Information">Information</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.serializeMessage.h" title="akka.remote.transport.AkkaProtocolHandle">h</a>.<a href="transport/AbstractTransportAdapter.scala.html#akka.remote.transport;AbstractTransportAdapterHandle.localAddress" title="=&gt; akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a href="MessageSerializer.scala.html#akka.remote.MessageSerializer" title="akka.remote.MessageSerializer.type">MessageSerializer</a>.<a href="MessageSerializer.scala.html#akka.remote.MessageSerializer.serialize" title="(system: akka.actor.ExtendedActorSystem, message: AnyRef)akka.remote.WireFormats.SerializedMessage">serialize</a><span class="delimiter">(</span><a href="#akka.remote;EndpointWriter.extendedSystem" title="=&gt; akka.actor.ExtendedActorSystem">extendedSystem</a>, <a href="#akka.remote;EndpointWriter.serializeMessage.msg" title="Any">msg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="None.type">None</span> ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote;EndpointException.<init>(a76a789b14)" title="(msg: String)akka.remote.EndpointException" class="keyword">new</a> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Internal error: No handle was present during serialization of outbound message.&quot;)" class="string">&quot;Internal error: No handle was present during serialization of outbound message.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.EndpointReader.type" id="akka.remote.EndpointReader">EndpointReader</a> <a href="#akka.remote.EndpointReader" title="akka.remote.EndpointReader.type" class="delimiter">{</a>

  <span class="keyword">def</span> <a title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, transport: akka.remote.transport.Transport, settings: akka.remote.RemoteSettings, codec: akka.remote.transport.AkkaPduCodec, msgDispatch: akka.remote.InboundMessageDispatcher, inbound: Boolean, uid: Int, reliableDeliverySupervisor: Option[akka.actor.ActorRef], receiveBuffers: java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState])akka.actor.Props" id="akka.remote.EndpointReader.props">props</a><span class="delimiter">(</span>
    <a title="akka.actor.Address" id="akka.remote.EndpointReader.props.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="akka.actor.Address" id="akka.remote.EndpointReader.props.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="akka.remote.transport.Transport" id="akka.remote.EndpointReader.props.transport">transport</a>: <a href="transport/Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a>,
    <a title="akka.remote.RemoteSettings" id="akka.remote.EndpointReader.props.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
    <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote.EndpointReader.props.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
    <a title="akka.remote.InboundMessageDispatcher" id="akka.remote.EndpointReader.props.msgDispatch">msgDispatch</a>: <a href="#akka.remote;InboundMessageDispatcher" title="akka.remote.InboundMessageDispatcher">InboundMessageDispatcher</a>,
    <a title="Boolean" id="akka.remote.EndpointReader.props.inbound">inbound</a>: <span title="Boolean">Boolean</span>,
    <a title="Int" id="akka.remote.EndpointReader.props.uid">uid</a>: <span title="Int">Int</span>,
    <a title="Option[akka.actor.ActorRef]" id="akka.remote.EndpointReader.props.reliableDeliverySupervisor">reliableDeliverySupervisor</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>,
    <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote.EndpointReader.props.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.EndpointReader](classOf[akka.remote.EndpointReader])" class="delimiter">[</span>EndpointReader<span class="delimiter">]</span>, <a href="#akka.remote.EndpointReader.props.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote.EndpointReader.props.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote.EndpointReader.props.transport" title="akka.remote.transport.Transport">transport</a>, <a href="#akka.remote.EndpointReader.props.settings" title="akka.remote.RemoteSettings">settings</a>, <a href="#akka.remote.EndpointReader.props.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>, <a href="#akka.remote.EndpointReader.props.msgDispatch" title="akka.remote.InboundMessageDispatcher">msgDispatch</a>, <a href="#akka.remote.EndpointReader.props.inbound" title="Boolean">inbound</a>,
      <a href="#akka.remote.EndpointReader.props.uid" title="Int">uid</a>, <a href="#akka.remote.EndpointReader.props.reliableDeliverySupervisor" title="Option[akka.actor.ActorRef]">reliableDeliverySupervisor</a>, <a href="#akka.remote.EndpointReader.props.receiveBuffers" title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>remote<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class EndpointReader extends akka.remote.EndpointActor" id="akka.remote;EndpointReader">EndpointReader</a><a href="#akka.remote;EndpointReader" title="akka.remote.EndpointReader" class="delimiter">(</a>
  <a title="akka.actor.Address" id="akka.remote;EndpointReader.localAddress">localAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <a title="akka.actor.Address" id="akka.remote;EndpointReader.remoteAddress">remoteAddress</a>: <a href="../../akka-actor/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
  <a title="akka.remote.transport.Transport" id="akka.remote;EndpointReader.transport">transport</a>: <a href="transport/Transport.scala.html#akka.remote.transport;Transport" title="akka.remote.transport.Transport">Transport</a>,
  <a title="akka.remote.RemoteSettings" id="akka.remote;EndpointReader.settings">settings</a>: <a href="RemoteSettings.scala.html#akka.remote;RemoteSettings" title="akka.remote.RemoteSettings">RemoteSettings</a>,
  <a title="akka.remote.transport.AkkaPduCodec" id="akka.remote;EndpointReader.codec">codec</a>: <a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec" title="akka.remote.transport.AkkaPduCodec">AkkaPduCodec</a>,
  <a title="akka.remote.InboundMessageDispatcher" id="akka.remote;EndpointReader.msgDispatch">msgDispatch</a>: <a href="#akka.remote;InboundMessageDispatcher" title="akka.remote.InboundMessageDispatcher">InboundMessageDispatcher</a>,
  <span class="keyword">val</span> <a title="Boolean" id="akka.remote;EndpointReader.inbound">inbound</a>: <span title="Boolean">Boolean</span>,
  <span class="keyword">val</span> <a title="Int" id="akka.remote;EndpointReader.uid">uid</a>: <span title="Int">Int</span>,
  <span class="keyword">val</span> <a title="Option[akka.actor.ActorRef]" id="akka.remote;EndpointReader.reliableDeliverySupervisor">reliableDeliverySupervisor</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>,
  <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]" id="akka.remote;EndpointReader.receiveBuffers">receiveBuffers</a>: <span title="java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">ConcurrentHashMap</span><span class="delimiter">[</span>Link, ResendState<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.remote;EndpointActor" title="akka.remote.EndpointActor">EndpointActor</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointReader.remoteAddress" title="akka.actor.Address">remoteAddress</a>, <a href="#akka.remote;EndpointReader.transport" title="akka.remote.transport.Transport">transport</a>, <a href="#akka.remote;EndpointReader.settings" title="akka.remote.RemoteSettings">settings</a>, <a href="#akka.remote;EndpointReader.codec" title="akka.remote.transport.AkkaPduCodec">codec</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.remote.EndpointWriter" title="akka.remote.EndpointWriter.type">EndpointWriter</a>.<span class="delimiter">{</span> OutboundAck, StopReading, StoppedReading <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="akka.remote.RemoteActorRefProvider" id="akka.remote;EndpointReader.provider">provider</a> = <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.remote.RARP">RARP</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Remoting.scala.html#akka.remote;RARP.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>
  <span class="keyword">var</span> <a title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]" id="akka.remote;EndpointReader.ackedReceiveBuffer_=">ackedReceiveBuffer</a> = <a href="AckedDelivery.scala.html#akka.remote.AckedReceiveBuffer.<init>$default$1" title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]" class="keyword">new</a> <a href="AckedDelivery.scala.html#akka.remote;AckedReceiveBuffer" title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">AckedReceiveBuffer</a><span class="delimiter">[</span>Message<span class="delimiter">]</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointReader.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: Any)akka.remote.EndpointManager.ResendState">get</span><span class="delimiter">(</span><a href="Remoting.scala.html#akka.remote.EndpointManager;Link" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address)akka.remote.EndpointManager.Link">Link</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointReader.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒
      <span class="keyword">case</span> ResendState<span class="delimiter">(</span><a href="#akka.remote;EndpointReader.uid" title="=&gt; Int">`uid`</a>, <a title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]" id="akka.remote;EndpointReader.preStart.buffer">buffer</a><span class="delimiter">)</span> ⇒
        <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="(x$1: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])Unit">ackedReceiveBuffer</a> = <a href="#akka.remote;EndpointReader.preStart.buffer" title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">buffer</a>
        <a href="#akka.remote;EndpointReader.deliverAndAck" title="()Unit">deliverAndAck</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointReader.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;EndpointReader.saveState" title="()Unit">saveState</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointReader.saveState">saveState</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(currentState: akka.remote.EndpointManager.ResendState, oldState: akka.remote.EndpointManager.ResendState)akka.remote.EndpointManager.ResendState" id="akka.remote;EndpointReader.saveState.merge">merge</a><span class="delimiter">(</span><a title="akka.remote.EndpointManager.ResendState" id="akka.remote;EndpointReader.saveState.merge.currentState">currentState</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="akka.remote.EndpointManager.ResendState">ResendState</a>, <a title="akka.remote.EndpointManager.ResendState" id="akka.remote;EndpointReader.saveState.merge.oldState">oldState</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="akka.remote.EndpointManager.ResendState">ResendState</a><span class="delimiter">)</span>: <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="akka.remote.EndpointManager.ResendState">ResendState</a> =
      <span title="akka.remote.EndpointManager.ResendState" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.merge.currentState" title="akka.remote.EndpointManager.ResendState">currentState</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState.uid" title="=&gt; Int">uid</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.remote;EndpointReader.saveState.merge.oldState" title="akka.remote.EndpointManager.ResendState">oldState</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState.uid" title="=&gt; Int">uid</a><span class="delimiter">)</span> <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="(uid: Int, buffer: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])akka.remote.EndpointManager.ResendState">ResendState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.uid" title="=&gt; Int">uid</a>, <a href="#akka.remote;EndpointReader.saveState.merge.oldState" title="akka.remote.EndpointManager.ResendState">oldState</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState.buffer" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">buffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedReceiveBuffer.mergeFrom" title="(that: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">mergeFrom</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.merge.currentState" title="akka.remote.EndpointManager.ResendState">currentState</a>.<a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState.buffer" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">buffer</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.remote;EndpointReader.saveState.merge.currentState" title="akka.remote.EndpointManager.ResendState">currentState</a>

    @tailrec
    <span class="keyword">def</span> <a title="(key: akka.remote.EndpointManager.Link, expectedState: akka.remote.EndpointManager.ResendState)Unit" id="akka.remote;EndpointReader.saveState.updateSavedState">updateSavedState</a><span class="delimiter">(</span><a title="akka.remote.EndpointManager.Link" id="akka.remote;EndpointReader.saveState.updateSavedState.key">key</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;Link" title="akka.remote.EndpointManager.Link">Link</a>, <a title="akka.remote.EndpointManager.ResendState" id="akka.remote;EndpointReader.saveState.updateSavedState.expectedState">expectedState</a>: <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="akka.remote.EndpointManager.ResendState">ResendState</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.expectedState" title="akka.remote.EndpointManager.ResendState">expectedState</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: akka.remote.EndpointManager.Link, x$2: akka.remote.EndpointManager.ResendState)akka.remote.EndpointManager.ResendState">putIfAbsent</span><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a>, <a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="(uid: Int, buffer: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])akka.remote.EndpointManager.ResendState">ResendState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.uid" title="=&gt; Int">uid</a>, <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">ackedReceiveBuffer</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="#akka.remote;EndpointReader.saveState.updateSavedState" title="(key: akka.remote.EndpointManager.Link, expectedState: akka.remote.EndpointManager.ResendState)Unit">updateSavedState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a>, <a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: Any)akka.remote.EndpointManager.ResendState">get</span><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: akka.remote.EndpointManager.Link, x$2: akka.remote.EndpointManager.ResendState, x$3: akka.remote.EndpointManager.ResendState)Boolean">replace</span><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a>, <a href="#akka.remote;EndpointReader.saveState.updateSavedState.expectedState" title="akka.remote.EndpointManager.ResendState">expectedState</a>, <a href="#akka.remote;EndpointReader.saveState.merge" title="(currentState: akka.remote.EndpointManager.ResendState, oldState: akka.remote.EndpointManager.ResendState)akka.remote.EndpointManager.ResendState">merge</a><span class="delimiter">(</span><a href="Remoting.scala.html#akka.remote.EndpointManager;ResendState" title="(uid: Int, buffer: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])akka.remote.EndpointManager.ResendState">ResendState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.uid" title="=&gt; Int">uid</a>, <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">ackedReceiveBuffer</a><span class="delimiter">)</span>, <a href="#akka.remote;EndpointReader.saveState.updateSavedState.expectedState" title="akka.remote.EndpointManager.ResendState">expectedState</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.remote;EndpointReader.saveState.updateSavedState" title="(key: akka.remote.EndpointManager.Link, expectedState: akka.remote.EndpointManager.ResendState)Unit">updateSavedState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a>, <a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: Any)akka.remote.EndpointManager.ResendState">get</span><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.updateSavedState.key" title="akka.remote.EndpointManager.Link">key</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="akka.remote.EndpointManager.Link" id="akka.remote;EndpointReader.saveState.key">key</a> = <a href="Remoting.scala.html#akka.remote.EndpointManager;Link" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address)akka.remote.EndpointManager.Link">Link</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a>, <a href="#akka.remote;EndpointReader.remoteAddress" title="akka.actor.Address">remoteAddress</a><span class="delimiter">)</span>
    <a href="#akka.remote;EndpointReader.saveState.updateSavedState" title="(key: akka.remote.EndpointManager.Link, expectedState: akka.remote.EndpointManager.ResendState)Unit">updateSavedState</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.key" title="akka.remote.EndpointManager.Link">key</a>, <a href="#akka.remote;EndpointReader.receiveBuffers" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.remote.EndpointManager.Link,akka.remote.EndpointManager.ResendState]">receiveBuffers</a>.<span title="(x$1: Any)akka.remote.EndpointManager.ResendState">get</span><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.saveState.key" title="akka.remote.EndpointManager.Link">key</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; EndpointReader.this.Receive" id="akka.remote;EndpointReader.receive">receive</a>: <span title="EndpointReader.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Disassociated<span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle.DisassociateInfo" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.info">info</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote;EndpointReader.handleDisassociated" title="(info: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit">handleDisassociated</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.info" title="akka.remote.transport.AssociationHandle.DisassociateInfo">info</a><span class="delimiter">)</span>

    <span class="keyword">case</span> InboundPayload<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.p">p</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.p" title="akka.util.ByteString">p</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;=</span> <a href="#akka.remote;EndpointReader.transport" title="akka.remote.transport.Transport">transport</a>.<a href="transport/Transport.scala.html#akka.remote.transport;Transport.maximumPayloadBytes" title="=&gt; Int">maximumPayloadBytes</a> ⇒
      <span class="keyword">val</span> <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.ackOption" title="(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])" class="delimiter">(</a><a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.x$11" title="Option[akka.remote.Ack]" id="akka.remote;EndpointReader.receive;$anonfun.applyOrElse.ackOption">ackOption</a>, <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.x$11" title="Option[akka.remote.transport.AkkaPduCodec.Message]" id="akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msgOption">msgOption</a><span class="delimiter">)</span> = <a href="#akka.remote;EndpointReader.tryDecodeMessageAndAck" title="(pdu: akka.util.ByteString)(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])">tryDecodeMessageAndAck</a><span title="(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message]) @unchecked" class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.p" title="akka.util.ByteString">p</a><span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="akka.remote.Ack" id="akka.remote;EndpointReader.receive;$anonfun.applyOrElse.$anonfun.ack">ack</a> ← <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.ackOption" title="(f: akka.remote.Ack =&gt; Unit)Unit">ackOption</a>; <a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.receive;$anonfun.applyOrElse.$anonfun.$anonfun.reliableDelivery">reliableDelivery</a> ← <a href="#akka.remote;EndpointReader.reliableDeliverySupervisor" title="(f: akka.actor.ActorRef =&gt; Unit)Unit">reliableDeliverySupervisor</a><span class="delimiter">)</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">reliableDelivery</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.$anonfun.ack" title="akka.remote.Ack">ack</a>

      <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msgOption" title="Option[akka.remote.transport.AkkaPduCodec.Message]">msgOption</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.transport.AkkaPduCodec.Message" id="akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg">msg</a><span class="delimiter">)</span> ⇒
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.reliableDeliveryEnabled" title="=&gt; Boolean">reliableDeliveryEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="(x$1: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])Unit">ackedReceiveBuffer</a> = <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">ackedReceiveBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedReceiveBuffer.receive" title="(arrivedMsg: akka.remote.transport.AkkaPduCodec.Message)akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">receive</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a><span class="delimiter">)</span>
            <a href="#akka.remote;EndpointReader.deliverAndAck" title="()Unit">deliverAndAck</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.remote;EndpointReader.msgDispatch" title="akka.remote.InboundMessageDispatcher">msgDispatch</a>.<a href="#akka.remote;InboundMessageDispatcher.dispatch" title="(recipient: akka.actor.InternalActorRef, recipientAddress: akka.actor.Address, serializedMessage: akka.remote.WireFormats.SerializedMessage, senderOption: Option[akka.actor.ActorRef])Unit">dispatch</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.recipient" title="=&gt; akka.actor.InternalActorRef">recipient</a>, <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.recipientAddress" title="=&gt; akka.actor.Address">recipientAddress</a>, <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.serializedMessage" title="=&gt; akka.remote.WireFormats.SerializedMessage">serializedMessage</a>, <a href="#akka.remote;EndpointReader.receive;$anonfun.applyOrElse.msg" title="akka.remote.transport.AkkaPduCodec.Message">msg</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.senderOption" title="=&gt; Option[akka.actor.ActorRef]">senderOption</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="None.type">None</span> ⇒
      <span class="delimiter">}</span>

    <span class="keyword">case</span> InboundPayload<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.oversized">oversized</a><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../akka-actor/event/Logging.scala.html#akka.event;LoggingAdapter.error(de736aeaab)" title="(cause: Throwable, message: String)Unit">error</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.OversizedPayloadException" class="keyword">new</span> <a href="#akka.remote;OversizedPayloadException" title="akka.remote.OversizedPayloadException">OversizedPayloadException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Discarding oversized payload received: &quot;)" class="string">Discarding oversized payload received: &quot;</span> <span title="(x$1: Any)String">+</span>
        <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;max allowed size [&quot;)">max allowed size [$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointReader.transport" title="akka.remote.transport.Transport">transport</a>.<a href="transport/Transport.scala.html#akka.remote.transport;Transport.maximumPayloadBytes" title="=&gt; Int">maximumPayloadBytes</a><span class="delimiter">}</span><span title="String(&quot;] bytes, actual size [&quot;)">] bytes, actual size [$</span><span class="delimiter">{</span><a href="#akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.oversized" title="akka.util.ByteString">oversized</a>.<span title="=&gt; Int">size</span><span class="delimiter">}</span><span title="String(&quot;] bytes.&quot;)" class="string">] bytes.&quot;</span><span class="delimiter">)</span>,
        <span title="String(&quot;Transient error while reading from association (association remains live)&quot;)" class="string">&quot;Transient error while reading from association (association remains live)&quot;</span><span class="delimiter">)</span>

    <span class="keyword">case</span> StopReading<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.writer">writer</a>, <a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.replyTo">replyTo</a><span class="delimiter">)</span> ⇒
      <a href="#akka.remote;EndpointReader.saveState" title="()Unit">saveState</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.notReading" title="=&gt; EndpointReader.this.Receive">notReading</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.receive;$anonfun.isDefinedAt.writer" title="akka.actor.ActorRef">writer</a><span class="delimiter">)</span>

  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; EndpointReader.this.Receive" id="akka.remote;EndpointReader.notReading">notReading</a>: <span title="EndpointReader.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Disassociated<span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle.DisassociateInfo" id="akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.info">info</a><span class="delimiter">)</span> ⇒ <a href="#akka.remote;EndpointReader.handleDisassociated" title="(info: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit">handleDisassociated</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.info" title="akka.remote.transport.AssociationHandle.DisassociateInfo">info</a><span class="delimiter">)</span>

    <span class="keyword">case</span> StopReading<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.writer">writer</a>, <a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.replyTo">replyTo</a><span class="delimiter">)</span> ⇒
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.StoppedReading.readResolve" title="(writer: akka.actor.ActorRef)akka.remote.EndpointWriter.StoppedReading">StoppedReading</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.writer" title="akka.actor.ActorRef">writer</a><span class="delimiter">)</span>

    <span class="keyword">case</span> InboundPayload<span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.p">p</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a href="#akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.ackOption.ackOption" title="Option[akka.remote.Ack]" id="akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.ackOption" class="delimiter">(</a><a title="Option[akka.remote.Ack]" id="akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.ackOption.ackOption">ackOption</a>, _<span class="delimiter">)</span> = <a href="#akka.remote;EndpointReader.tryDecodeMessageAndAck" title="(pdu: akka.util.ByteString)(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])">tryDecodeMessageAndAck</a><span title="(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message]) @unchecked" class="delimiter">(</span><a href="#akka.remote;EndpointReader.notReading;$anonfun.isDefinedAt.p" title="akka.util.ByteString">p</a><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="akka.remote.Ack" id="akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.$anonfun.ack">ack</a> ← <a href="#akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.ackOption" title="(f: akka.remote.Ack =&gt; Unit)Unit">ackOption</a>; <a title="akka.actor.ActorRef" id="akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.$anonfun.$anonfun.reliableDelivery">reliableDelivery</a> ← <a href="#akka.remote;EndpointReader.reliableDeliverySupervisor" title="(f: akka.actor.ActorRef =&gt; Unit)Unit">reliableDeliverySupervisor</a><span class="delimiter">)</span> <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">reliableDelivery</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote;EndpointReader.notReading;$anonfun.applyOrElse.$anonfun.ack" title="akka.remote.Ack">ack</a>

    <span class="keyword">case</span> _ ⇒
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(info: akka.remote.transport.AssociationHandle.DisassociateInfo)Unit" id="akka.remote;EndpointReader.handleDisassociated">handleDisassociated</a><span class="delimiter">(</span><a title="akka.remote.transport.AssociationHandle.DisassociateInfo" id="akka.remote;EndpointReader.handleDisassociated.info">info</a>: <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle;DisassociateInfo" title="akka.remote.transport.AssociationHandle.DisassociateInfo">DisassociateInfo</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.remote;EndpointReader.handleDisassociated.info" title="akka.remote.transport.AssociationHandle.DisassociateInfo">info</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Unknown" title="akka.remote.transport.AssociationHandle.Unknown.type">Unknown</a> ⇒
      <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Shutdown" title="akka.remote.transport.AssociationHandle.Shutdown.type">Shutdown</a> ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.ShutDownAssociation.readResolve" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, cause: Throwable)akka.remote.ShutDownAssociation">ShutDownAssociation</a><span class="delimiter">(</span>
        <a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a>,
        <a href="#akka.remote;EndpointReader.remoteAddress" title="akka.actor.Address">remoteAddress</a>,
        <a href="transport/Transport.scala.html#akka.remote.transport.Transport;InvalidAssociationException" title="(msg: String, cause: Throwable)akka.remote.transport.Transport.InvalidAssociationException">InvalidAssociationException</a><span class="delimiter">(</span><span title="String(&quot;The remote system terminated the association because it is shutting down.&quot;)" class="string">&quot;The remote system terminated the association because it is shutting down.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle" title="akka.remote.transport.AssociationHandle.type">AssociationHandle</a>.<a href="transport/Transport.scala.html#akka.remote.transport.AssociationHandle.Quarantined" title="akka.remote.transport.AssociationHandle.Quarantined.type">Quarantined</a> ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.InvalidAssociation.readResolve" title="(localAddress: akka.actor.Address, remoteAddress: akka.actor.Address, cause: Throwable)akka.remote.InvalidAssociation">InvalidAssociation</a><span class="delimiter">(</span>
        <a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a>,
        <a href="#akka.remote;EndpointReader.remoteAddress" title="akka.actor.Address">remoteAddress</a>,
        <a href="transport/Transport.scala.html#akka.remote.transport.Transport;InvalidAssociationException" title="(msg: String, cause: Throwable)akka.remote.transport.Transport.InvalidAssociationException">InvalidAssociationException</a><span class="delimiter">(</span><span class="string">&quot;The remote system has quarantined this system. No further associations &quot;</span> <span title="String(&quot;The remote system has quarantined this system. No further associations to the remote system are possible until this system is restarted.&quot;)">+</span>
          <span class="string">&quot;to the remote system are possible until this system is restarted.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote;EndpointReader.deliverAndAck">deliverAndAck</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#akka.remote;EndpointReader.deliverAndAck.updatedBuffer" title="(akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message], scala.collection.immutable.Seq[akka.remote.transport.AkkaPduCodec.Message], akka.remote.Ack)" class="delimiter">(</a><a href="#akka.remote;EndpointReader.deliverAndAck.x$12" title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]" id="akka.remote;EndpointReader.deliverAndAck.updatedBuffer">updatedBuffer</a>, <a href="#akka.remote;EndpointReader.deliverAndAck.x$12" title="scala.collection.immutable.Seq[akka.remote.transport.AkkaPduCodec.Message]" id="akka.remote;EndpointReader.deliverAndAck.deliver">deliver</a>, <a href="#akka.remote;EndpointReader.deliverAndAck.x$12" title="akka.remote.Ack" id="akka.remote;EndpointReader.deliverAndAck.ack">ack</a><span class="delimiter">)</span> = <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="=&gt; akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">ackedReceiveBuffer</a>.<a href="AckedDelivery.scala.html#akka.remote;AckedReceiveBuffer.extractDeliverable" title="=&gt; (akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message], scala.collection.immutable.Seq[akka.remote.transport.AkkaPduCodec.Message], akka.remote.Ack)">extractDeliverable</a>
    <a href="#akka.remote;EndpointReader.ackedReceiveBuffer_=" title="(x$1: akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message])Unit">ackedReceiveBuffer</a> = <a href="#akka.remote;EndpointReader.deliverAndAck.updatedBuffer" title="akka.remote.AckedReceiveBuffer[akka.remote.transport.AkkaPduCodec.Message]">updatedBuffer</a>

    <span class="comment">// Notify writer that some messages can be acked</span>
    <a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.EndpointWriter.OutboundAck.readResolve" title="(ack: akka.remote.Ack)akka.remote.EndpointWriter.OutboundAck">OutboundAck</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.deliverAndAck.ack" title="akka.remote.Ack">ack</a><span class="delimiter">)</span>
    <a href="#akka.remote;EndpointReader.deliverAndAck.deliver" title="scala.collection.immutable.Seq[akka.remote.transport.AkkaPduCodec.Message]">deliver</a> <span title="(f: akka.remote.transport.AkkaPduCodec.Message =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.remote.transport.AkkaPduCodec.Message" id="akka.remote;EndpointReader.deliverAndAck.$anonfun.m">m</a> ⇒
      <a href="#akka.remote;EndpointReader.msgDispatch" title="akka.remote.InboundMessageDispatcher">msgDispatch</a>.<a href="#akka.remote;InboundMessageDispatcher.dispatch" title="(recipient: akka.actor.InternalActorRef, recipientAddress: akka.actor.Address, serializedMessage: akka.remote.WireFormats.SerializedMessage, senderOption: Option[akka.actor.ActorRef])Unit">dispatch</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.deliverAndAck.$anonfun.m" title="akka.remote.transport.AkkaPduCodec.Message">m</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.recipient" title="=&gt; akka.actor.InternalActorRef">recipient</a>, <a href="#akka.remote;EndpointReader.deliverAndAck.$anonfun.m" title="akka.remote.transport.AkkaPduCodec.Message">m</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.recipientAddress" title="=&gt; akka.actor.Address">recipientAddress</a>, <a href="#akka.remote;EndpointReader.deliverAndAck.$anonfun.m" title="akka.remote.transport.AkkaPduCodec.Message">m</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.serializedMessage" title="=&gt; akka.remote.WireFormats.SerializedMessage">serializedMessage</a>, <a href="#akka.remote;EndpointReader.deliverAndAck.$anonfun.m" title="akka.remote.transport.AkkaPduCodec.Message">m</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport.AkkaPduCodec;Message.senderOption" title="=&gt; Option[akka.actor.ActorRef]">senderOption</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pdu: akka.util.ByteString)(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])" id="akka.remote;EndpointReader.tryDecodeMessageAndAck">tryDecodeMessageAndAck</a><span class="delimiter">(</span><a title="akka.util.ByteString" id="akka.remote;EndpointReader.tryDecodeMessageAndAck.pdu">pdu</a>: <a href="../../akka-actor/util/ByteString.scala.html#akka.util;ByteString" title="akka.util.ByteString">ByteString</a><span class="delimiter">)</span>: <span title="(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])" class="delimiter">(</span>Option<span class="delimiter">[</span>Ack<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
    <a href="#akka.remote;EndpointReader.codec" title="akka.remote.transport.AkkaPduCodec">codec</a>.<a href="transport/AkkaPduCodec.scala.html#akka.remote.transport;AkkaPduCodec.decodeMessage" title="(raw: akka.util.ByteString, provider: akka.remote.RemoteActorRefProvider, localAddress: akka.actor.Address)(Option[akka.remote.Ack], Option[akka.remote.transport.AkkaPduCodec.Message])">decodeMessage</a><span class="delimiter">(</span><a href="#akka.remote;EndpointReader.tryDecodeMessageAndAck.pdu" title="akka.util.ByteString">pdu</a>, <a href="#akka.remote;EndpointReader.provider" title="=&gt; akka.remote.RemoteActorRefProvider">provider</a>, <a href="#akka.remote;EndpointReader.localAddress" title="akka.actor.Address">localAddress</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#akka.remote;EndpointReader.tryDecodeMessageAndAck.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote;EndpointReader.tryDecodeMessageAndAck.e">e</a><span class="delimiter">)</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.EndpointException" class="keyword">new</span> <a href="#akka.remote;EndpointException" title="akka.remote.EndpointException">EndpointException</a><span class="delimiter">(</span><span title="String(&quot;Error while decoding incoming Akka PDU&quot;)" class="string">&quot;Error while decoding incoming Akka PDU&quot;</span>, <a href="#akka.remote;EndpointReader.tryDecodeMessageAndAck.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
