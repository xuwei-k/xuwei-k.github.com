<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-cluster/cluster/ClusterReadView.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.cluster

<span class="keyword">import</span> java.io.Closeable
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> Actor, ActorRef, ActorSystemImpl, Address, Props <span class="delimiter">}</span>
<span class="keyword">import</span> akka.cluster.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
<span class="keyword">import</span> akka.actor.PoisonPill
<span class="keyword">import</span> akka.dispatch.<span class="delimiter">{</span> UnboundedMessageQueueSemantics, RequiresMessageQueue <span class="delimiter">}</span>
<span class="keyword">import</span> akka.actor.Deploy

<span class="comment">/**
 * INTERNAL API
 *
 * Read view of cluster state, updated via subscription of
 * cluster events published on the event bus.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ClusterReadView extends Object with java.io.Closeable" id="akka.cluster;ClusterReadView">ClusterReadView</a><a href="#akka.cluster;ClusterReadView" title="akka.cluster.ClusterReadView" class="delimiter">(</a><a title="akka.cluster.Cluster" id="akka.cluster;ClusterReadView.cluster">cluster</a>: <a href="Cluster.scala.html#akka.cluster;Cluster" title="akka.cluster.Cluster">Cluster</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.io.Closeable">Closeable</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Current state
   */</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView._state_=">_state</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> = <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="(members: scala.collection.immutable.SortedSet[akka.cluster.Member], unreachable: Set[akka.cluster.Member], seenBy: Set[akka.actor.Address], leader: Option[akka.actor.Address], roleLeaderMap: Map[String,Option[akka.actor.Address]])akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a><span class="delimiter">(</span><span class="delimiter">)</span>

  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterReadView._reachability_=">_reachability</a>: <a href="Reachability.scala.html#akka.cluster;Reachability" title="akka.cluster.Reachability">Reachability</a> = <a href="Reachability.scala.html#akka.cluster.Reachability" title="akka.cluster.Reachability.type">Reachability</a>.<a href="Reachability.scala.html#akka.cluster.Reachability.empty" title="=&gt; akka.cluster.Reachability">empty</a>

  <span class="comment">/**
   * Current internal cluster stats, updated periodically via event bus.
   */</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.cluster.ClusterEvent.CurrentInternalStats" id="akka.cluster;ClusterReadView._latestStats_=">_latestStats</a> = <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentInternalStats" title="(gossipStats: akka.cluster.GossipStats, vclockStats: akka.cluster.VectorClockStats)akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a><span class="delimiter">(</span><a href="ClusterDaemon.scala.html#akka.cluster;GossipStats" title="(receivedGossipCount: Long, mergeCount: Long, sameCount: Long, newerCount: Long, olderCount: Long)akka.cluster.GossipStats">GossipStats</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="ClusterDaemon.scala.html#akka.cluster;VectorClockStats" title="(versionSize: Int, seenLatest: Int)akka.cluster.VectorClockStats">VectorClockStats</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Current cluster metrics, updated periodically via event bus.
   */</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Set[akka.cluster.NodeMetrics]" id="akka.cluster;ClusterReadView._clusterMetrics_=">_clusterMetrics</a>: <span title="Set[akka.cluster.NodeMetrics]">Set</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[akka.cluster.NodeMetrics]">empty</span>

  <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.cluster;ClusterReadView.selfAddress">selfAddress</a> = <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>

  <span class="comment">// create actor that subscribes to the cluster eventBus to update current read view state</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.cluster;ClusterReadView.eventBusListener">eventBusListener</a>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.systemActorOf" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">systemActorOf</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics])(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]])akka.actor.Props">Props</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]]" class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.eventBusListener;$anon" title="akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with akka.actor.Actor with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.cluster;ClusterReadView.eventBusListener;$anon">Actor</a> <span class="keyword">with</span> <a href="../../akka-actor/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterReadView.eventBusListener;$anon.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.subscribe(6cfb44d410)" title="(subscriber: akka.actor.ActorRef, to: Class[_]*)Unit">subscribe</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.cluster.ClusterEvent.ClusterDomainEvent](classOf[akka.cluster.ClusterEvent$$ClusterDomainEvent])" class="delimiter">[</span>ClusterDomainEvent<span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterReadView.eventBusListener;$anon.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.ClusterDomainEvent" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.isDefinedAt.e">e</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a> ⇒ <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.isDefinedAt.e" title="akka.cluster.ClusterEvent.ClusterDomainEvent">e</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> SeenChanged<span class="delimiter">(</span><a title="Boolean" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.convergence">convergence</a>, <a title="Set[akka.actor.Address]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.seenBy">seenBy</a><span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$1">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$6">copy</a><span class="delimiter">(</span>seenBy = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.seenBy" title="Set[akka.actor.Address]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$2">seenBy</a><span class="delimiter">)</span>
          <span class="keyword">case</span> ReachabilityChanged<span class="delimiter">(</span><a title="akka.cluster.Reachability" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.reachability">reachability</a><span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._reachability_=" title="(x$1: akka.cluster.Reachability)Unit">_reachability</a> = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.reachability" title="akka.cluster.Reachability">reachability</a>
          <span class="keyword">case</span> MemberRemoved<span class="delimiter">(</span><span title="akka.cluster.Member">member</span>, _<span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$2">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$3" title="Set[akka.actor.Address]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$11">copy</a><span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$7">-</a> <span title="akka.cluster.Member">member</span>, unreachable = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$8">-</a> <span title="akka.cluster.Member">member</span><span class="delimiter">)</span>
          <span class="keyword">case</span> UnreachableMember<span class="delimiter">(</span><span title="akka.cluster.Member">member</span><span class="delimiter">)</span> ⇒
            <span class="comment">// replace current member with new member (might have different status, only address is used in equals)</span>
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$3">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$16">copy</a><span class="delimiter">(</span>unreachable = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.Set[akka.cluster.Member]">-</span> <span title="akka.cluster.Member">member</span> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$12">+</a> <span title="akka.cluster.Member">member</span><span class="delimiter">)</span>
          <span class="keyword">case</span> ReachableMember<span class="delimiter">(</span><span title="akka.cluster.Member">member</span><span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$4">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$21">copy</a><span class="delimiter">(</span>unreachable = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$17">-</a> <span title="akka.cluster.Member">member</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.MemberEvent" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event">event</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> ⇒
            <span class="comment">// replace current member with new member (might have different status, only address is used in equals)</span>
            <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.newUnreachable">newUnreachable</a> =
              <span title="scala.collection.immutable.Set[akka.cluster.Member]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a>.<span title="(elem: akka.cluster.Member)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event" title="akka.cluster.ClusterEvent.MemberEvent">event</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.Set[akka.cluster.Member]">-</span> <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event" title="akka.cluster.ClusterEvent.MemberEvent">event</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.Set[akka.cluster.Member]">+</span> <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event" title="akka.cluster.ClusterEvent.MemberEvent">event</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a>
              <span class="keyword">else</span> <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a>
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$5">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$3" title="Set[akka.actor.Address]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$26">copy</a><span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.SortedSet[akka.cluster.Member]">-</span> <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event" title="akka.cluster.ClusterEvent.MemberEvent">event</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$22">+</a> <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.event" title="akka.cluster.ClusterEvent.MemberEvent">event</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a>,
              unreachable = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.newUnreachable" title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$23">newUnreachable</a><span class="delimiter">)</span>
          <span class="keyword">case</span> LeaderChanged<span class="delimiter">(</span><span title="Option[akka.actor.Address]">leader</span><span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$6">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$31">copy</a><span class="delimiter">(</span>leader = <a title="Option[akka.actor.Address]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$27">leader</a><span class="delimiter">)</span>
          <span class="keyword">case</span> RoleLeaderChanged<span class="delimiter">(</span><a title="String" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.role">role</a>, <span title="Option[akka.actor.Address]">leader</span><span class="delimiter">)</span> ⇒
            <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.qual$7">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$36">copy</a><span class="delimiter">(</span>roleLeaderMap = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.roleLeaderMap" title="=&gt; Map[String,Option[akka.actor.Address]]">roleLeaderMap</a> <a title="scala.collection.immutable.Map[String,Option[akka.actor.Address]]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.x$32">+</a> <span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.role" title="(x: String)ArrowAssoc[String]">role</a> <span title="(y: Option[akka.actor.Address])(String, Option[akka.actor.Address])">-&gt;</span> <span title="Option[akka.actor.Address]">leader</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentInternalStats" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.stats">stats</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentInternalStats" title="akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a>  ⇒ <a href="#akka.cluster;ClusterReadView._latestStats_=" title="(x$1: akka.cluster.ClusterEvent.CurrentInternalStats)Unit">_latestStats</a> = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.stats" title="akka.cluster.ClusterEvent.CurrentInternalStats">stats</a>
          <span class="keyword">case</span> ClusterMetricsChanged<span class="delimiter">(</span><a title="Set[akka.cluster.NodeMetrics]" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.nodes">nodes</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterReadView._clusterMetrics_=" title="(x$1: Set[akka.cluster.NodeMetrics])Unit">_clusterMetrics</a> = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.applyOrElse.nodes" title="Set[akka.cluster.NodeMetrics]">nodes</a>
        <span class="delimiter">}</span>
        <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.isDefinedAt.s">s</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> ⇒ <a href="#akka.cluster;ClusterReadView._state_=" title="(x$1: akka.cluster.ClusterEvent.CurrentClusterState)Unit">_state</a> = <a href="#akka.cluster;ClusterReadView.eventBusListener;$anon.receive;$anonfun.isDefinedAt.s" title="akka.cluster.ClusterEvent.CurrentClusterState">s</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.settings" title="=&gt; akka.cluster.ClusterSettings">settings</a>.<a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UseDispatcher" title="=&gt; String">UseDispatcher</a><span class="delimiter">)</span>.<a href="../../akka-actor/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span>, name = <span title="String(&quot;clusterEventBusListener&quot;)" class="string">&quot;clusterEventBusListener&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterReadView.state">state</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> = <a href="#akka.cluster;ClusterReadView._state_=" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">_state</a>

  <span class="keyword">def</span> <a title="=&gt; akka.cluster.Member" id="akka.cluster;ClusterReadView.self">self</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.selfUniqueAddress
    <a href="#akka.cluster;ClusterReadView.state" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Option[akka.cluster.Member]">find</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.self.$anonfun.x$1" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>.
      <span title="(default: =&gt; akka.cluster.Member)akka.cluster.Member">getOrElse</span><span class="delimiter">(</span><a href="Member.scala.html#akka.cluster.Member.apply" title="(uniqueAddress: akka.cluster.UniqueAddress, roles: Set[String])akka.cluster.Member">Member</a><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a><span class="delimiter">)</span>.<a href="Member.scala.html#akka.cluster;Member.copy" title="(status: akka.cluster.MemberStatus)akka.cluster.Member">copy</a><span class="delimiter">(</span>status = <a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="Member.scala.html#akka.cluster.MemberStatus.Removed" title="akka.cluster.MemberStatus.Removed.type">Removed</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if this cluster instance has be shutdown.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterReadView.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.isTerminated" title="=&gt; Boolean">isTerminated</a>

  <span class="comment">/**
   * Current cluster members, sorted by address.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterReadView.members">members</a>: immutable.<span title="scala.collection.immutable.SortedSet[akka.cluster.Member]">SortedSet</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> = <a href="#akka.cluster;ClusterReadView.state" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>

  <span class="comment">/**
   * Members that has been detected as unreachable.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Set[akka.cluster.Member]" id="akka.cluster;ClusterReadView.unreachableMembers">unreachableMembers</a>: <span title="Set[akka.cluster.Member]">Set</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> = <a href="#akka.cluster;ClusterReadView.state" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.unreachable" title="=&gt; Set[akka.cluster.Member]">unreachable</a>

  <span class="comment">/**
   * Member status for this node ([[akka.cluster.MemberStatus]]).
   *
   * NOTE: If the node has been removed from the cluster (and shut down) then it's status is set to the 'REMOVED' tombstone state
   *       and is no longer present in the node ring or any other part of the gossiping state. However in order to maintain the
   *       model and the semantics the user would expect, this method will in this situation return `MemberStatus.Removed`.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.cluster.MemberStatus" id="akka.cluster;ClusterReadView.status">status</a>: <a href="Member.scala.html#akka.cluster;MemberStatus" title="akka.cluster.MemberStatus">MemberStatus</a> = <a href="#akka.cluster;ClusterReadView.self" title="=&gt; akka.cluster.Member">self</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a>

  <span class="comment">/**
   * Is this node the leader?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterReadView.isLeader">isLeader</a>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster;ClusterReadView.leader" title="=&gt; Option[akka.actor.Address]">leader</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="(x: akka.actor.Address)Some[akka.actor.Address]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Get the address of the current leader.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Option[akka.actor.Address]" id="akka.cluster;ClusterReadView.leader">leader</a>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <a href="#akka.cluster;ClusterReadView.state" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.leader" title="=&gt; Option[akka.actor.Address]">leader</a>

  <span class="comment">/**
   * Does the cluster consist of only one member?
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterReadView.isSingletonCluster">isSingletonCluster</a>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster;ClusterReadView.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span>

  <span class="comment">/**
   * Returns true if the node is not unreachable and not `Down`
   * and not `Removed`.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterReadView.isAvailable">isAvailable</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterReadView.isAvailable.myself">myself</a> = <a href="#akka.cluster;ClusterReadView.self" title="=&gt; akka.cluster.Member">self</a>
    <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterReadView.unreachableMembers" title="=&gt; Set[akka.cluster.Member]">unreachableMembers</a>.<span title="(elem: akka.cluster.Member)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.isAvailable.myself" title="akka.cluster.Member">myself</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#akka.cluster;ClusterReadView.isAvailable.myself" title="akka.cluster.Member">myself</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="Member.scala.html#akka.cluster.MemberStatus.Down" title="akka.cluster.MemberStatus.Down.type">Down</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#akka.cluster;ClusterReadView.isAvailable.myself" title="akka.cluster.Member">myself</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="Member.scala.html#akka.cluster.MemberStatus.Removed" title="akka.cluster.MemberStatus.Removed.type">Removed</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.cluster.Reachability" id="akka.cluster;ClusterReadView.reachability">reachability</a>: <a href="Reachability.scala.html#akka.cluster;Reachability" title="akka.cluster.Reachability">Reachability</a> = <a href="#akka.cluster;ClusterReadView._reachability_=" title="=&gt; akka.cluster.Reachability">_reachability</a>

  <span class="comment">/**
   * Current cluster metrics.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Set[akka.cluster.NodeMetrics]" id="akka.cluster;ClusterReadView.clusterMetrics">clusterMetrics</a>: <span title="Set[akka.cluster.NodeMetrics]">Set</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span> = <a href="#akka.cluster;ClusterReadView._clusterMetrics_=" title="=&gt; Set[akka.cluster.NodeMetrics]">_clusterMetrics</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterReadView.refreshCurrentState">refreshCurrentState</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.cluster;ClusterReadView.cluster" title="akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.sendCurrentClusterState" title="(receiver: akka.actor.ActorRef)Unit">sendCurrentClusterState</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterReadView.eventBusListener" title="=&gt; akka.actor.ActorRef">eventBusListener</a><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   * The nodes that has seen current version of the Gossip.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; Set[akka.actor.Address]" id="akka.cluster;ClusterReadView.seenBy">seenBy</a>: <span title="Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <a href="#akka.cluster;ClusterReadView.state" title="=&gt; akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.seenBy" title="=&gt; Set[akka.actor.Address]">seenBy</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterEvent.CurrentInternalStats" id="akka.cluster;ClusterReadView.latestStats">latestStats</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentInternalStats" title="akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a> = <a href="#akka.cluster;ClusterReadView._latestStats_=" title="=&gt; akka.cluster.ClusterEvent.CurrentInternalStats">_latestStats</a>

  <span class="comment">/**
   * Unsubscribe to cluster events.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterReadView.close">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterReadView.eventBusListener" title="=&gt; akka.actor.ActorRef">eventBusListener</a>.<a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span>
      <a href="../../akka-actor/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.cluster;ClusterReadView.close.qual$8">eventBusListener</a> <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.cluster;ClusterReadView.close.x$38">!</a> <a href="../../akka-actor/actor/Actor.scala.html#akka.actor.PoisonPill" title="akka.actor.PoisonPill.type" id="akka.cluster;ClusterReadView.close.x$37">PoisonPill</a>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
