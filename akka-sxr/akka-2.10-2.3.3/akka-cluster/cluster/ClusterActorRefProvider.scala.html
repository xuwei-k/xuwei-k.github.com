<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>akka-cluster/cluster/ClusterActorRefProvider.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.cluster

<span class="keyword">import</span> com.typesafe.config.Config
<span class="keyword">import</span> akka.ConfigurationException
<span class="keyword">import</span> akka.actor.ActorSystem
<span class="keyword">import</span> akka.actor.ActorSystemImpl
<span class="keyword">import</span> akka.actor.Deploy
<span class="keyword">import</span> akka.actor.DynamicAccess
<span class="keyword">import</span> akka.actor.InternalActorRef
<span class="keyword">import</span> akka.actor.NoScopeGiven
<span class="keyword">import</span> akka.actor.Scheduler
<span class="keyword">import</span> akka.actor.Scope
<span class="keyword">import</span> akka.actor.Terminated
<span class="keyword">import</span> akka.dispatch.sysmsg.DeathWatchNotification
<span class="keyword">import</span> akka.event.EventStream
<span class="keyword">import</span> akka.japi.<a href="../../akka-actor/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.immutableSeq
<span class="keyword">import</span> akka.remote.RemoteActorRefProvider
<span class="keyword">import</span> akka.remote.RemoteDeployer
<span class="keyword">import</span> akka.remote.routing.RemoteRouterConfig
<span class="keyword">import</span> akka.routing.RouterConfig
<span class="keyword">import</span> akka.routing.DefaultResizer
<span class="keyword">import</span> akka.cluster.routing.AdaptiveLoadBalancingRouter
<span class="keyword">import</span> akka.cluster.routing.MixMetricsSelector
<span class="keyword">import</span> akka.cluster.routing.HeapMetricsSelector
<span class="keyword">import</span> akka.cluster.routing.SystemLoadAverageMetricsSelector
<span class="keyword">import</span> akka.cluster.routing.CpuMetricsSelector
<span class="keyword">import</span> akka.cluster.routing.MetricsSelector
<span class="keyword">import</span> akka.dispatch.sysmsg.SystemMessage
<span class="keyword">import</span> akka.actor.ActorRef
<span class="keyword">import</span> akka.actor.Props
<span class="keyword">import</span> akka.routing.Pool
<span class="keyword">import</span> akka.routing.Group
<span class="keyword">import</span> akka.cluster.routing.ClusterRouterPool
<span class="keyword">import</span> akka.cluster.routing.ClusterRouterGroup
<span class="keyword">import</span> com.typesafe.config.ConfigFactory
<span class="keyword">import</span> akka.routing.DeprecatedRouterConfig
<span class="keyword">import</span> akka.cluster.routing.ClusterRouterPoolSettings
<span class="keyword">import</span> akka.cluster.routing.ClusterRouterGroupSettings

<span class="comment">/**
 * INTERNAL API
 *
 * The `ClusterActorRefProvider` will load the [[akka.cluster.Cluster]]
 * extension, i.e. the cluster will automatically be started when
 * the `ClusterActorRefProvider` is used.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ClusterActorRefProvider extends akka.remote.RemoteActorRefProvider" id="akka.cluster;ClusterActorRefProvider">ClusterActorRefProvider</a><a href="#akka.cluster;ClusterActorRefProvider" title="akka.cluster.ClusterActorRefProvider" class="delimiter">(</a>
  <a title="String" id="akka.cluster;ClusterActorRefProvider._systemName">_systemName</a>: <span title="String">String</span>,
  <a title="akka.actor.ActorSystem.Settings" id="akka.cluster;ClusterActorRefProvider._settings">_settings</a>: ActorSystem.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings" title="akka.actor.ActorSystem.Settings">Settings</a>,
  <a title="akka.event.EventStream" id="akka.cluster;ClusterActorRefProvider._eventStream">_eventStream</a>: <a href="../../akka-actor/event/EventStream.scala.html#akka.event;EventStream" title="akka.event.EventStream">EventStream</a>,
  <a title="akka.actor.DynamicAccess" id="akka.cluster;ClusterActorRefProvider._dynamicAccess">_dynamicAccess</a>: <a href="../../akka-actor/actor/DynamicAccess.scala.html#akka.actor;DynamicAccess" title="akka.actor.DynamicAccess">DynamicAccess</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider" title="akka.remote.RemoteActorRefProvider">RemoteActorRefProvider</a><span class="delimiter">(</span>
  <a href="#akka.cluster;ClusterActorRefProvider._systemName" title="String">_systemName</a>, <a href="#akka.cluster;ClusterActorRefProvider._settings" title="akka.actor.ActorSystem.Settings">_settings</a>, <a href="#akka.cluster;ClusterActorRefProvider._eventStream" title="akka.event.EventStream">_eventStream</a>, <a href="#akka.cluster;ClusterActorRefProvider._dynamicAccess" title="akka.actor.DynamicAccess">_dynamicAccess</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ActorSystemImpl)Unit" id="akka.cluster;ClusterActorRefProvider.init">init</a><span class="delimiter">(</span><a title="akka.actor.ActorSystemImpl" id="akka.cluster;ClusterActorRefProvider.init.system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterActorRefProvider" title="akka.cluster.ClusterActorRefProvider" class="keyword">super</a>.<a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.init" title="(system: akka.actor.ActorSystemImpl)Unit">init</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterActorRefProvider.init.system" title="akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>

    <span class="comment">// initialize/load the Cluster extension</span>
    <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span title="Unit" class="delimiter">(</span><a href="#akka.cluster;ClusterActorRefProvider.init.system" title="akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(system: akka.actor.ActorSystemImpl)akka.actor.ActorRef" id="akka.cluster;ClusterActorRefProvider.createRemoteWatcher">createRemoteWatcher</a><span class="delimiter">(</span><a title="akka.actor.ActorSystemImpl" id="akka.cluster;ClusterActorRefProvider.createRemoteWatcher.system">system</a>: <a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">)</span>: <a href="../../akka-actor/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <span class="comment">// make sure Cluster extension is initialized/loaded from init thread</span>
    <a href="../../akka-actor/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterActorRefProvider.createRemoteWatcher.system" title="akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>

    <span class="keyword">import</span> <a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.remoteSettings" title="=&gt; akka.remote.RemoteSettings">remoteSettings</a>._
    <span class="keyword">val</span> <a title="akka.remote.FailureDetectorRegistry[akka.actor.Address]" id="akka.cluster;ClusterActorRefProvider.createRemoteWatcher.failureDetector">failureDetector</a> = <a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.createRemoteWatcherFailureDetector" title="(system: akka.actor.ExtendedActorSystem)akka.remote.FailureDetectorRegistry[akka.actor.Address]">createRemoteWatcherFailureDetector</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterActorRefProvider.createRemoteWatcher.system" title="akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterActorRefProvider.createRemoteWatcher.system" title="akka.actor.ActorSystemImpl">system</a>.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.systemActorOf" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">systemActorOf</a><span class="delimiter">(</span><a href="ClusterRemoteWatcher.scala.html#akka.cluster.ClusterRemoteWatcher" title="akka.cluster.ClusterRemoteWatcher.type">ClusterRemoteWatcher</a>.<a href="ClusterRemoteWatcher.scala.html#akka.cluster.ClusterRemoteWatcher.props" title="(failureDetector: akka.remote.FailureDetectorRegistry[akka.actor.Address], heartbeatInterval: scala.concurrent.duration.FiniteDuration, unreachableReaperInterval: scala.concurrent.duration.FiniteDuration, heartbeatExpectedResponseAfter: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span>
      <a href="#akka.cluster;ClusterActorRefProvider.createRemoteWatcher.failureDetector" title="akka.remote.FailureDetectorRegistry[akka.actor.Address]">failureDetector</a>,
      heartbeatInterval = <a href="../../akka-remote/remote/RemoteSettings.scala.html#akka.remote;RemoteSettings.WatchHeartBeatInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">WatchHeartBeatInterval</a>,
      unreachableReaperInterval = <a href="../../akka-remote/remote/RemoteSettings.scala.html#akka.remote;RemoteSettings.WatchUnreachableReaperInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">WatchUnreachableReaperInterval</a>,
      heartbeatExpectedResponseAfter = <a href="../../akka-remote/remote/RemoteSettings.scala.html#akka.remote;RemoteSettings.WatchHeartbeatExpectedResponseAfter" title="=&gt; scala.concurrent.duration.FiniteDuration">WatchHeartbeatExpectedResponseAfter</a><span class="delimiter">)</span>, <span title="String(&quot;remote-watcher&quot;)" class="string">&quot;remote-watcher&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Factory method to make it possible to override deployer in subclass
   * Creates a new instance every time
   */</span>
  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterDeployer" id="akka.cluster;ClusterActorRefProvider.createDeployer">createDeployer</a>: <a href="#akka.cluster;ClusterDeployer" title="akka.cluster.ClusterDeployer">ClusterDeployer</a> = <span title="akka.cluster.ClusterDeployer" class="keyword">new</span> <a href="#akka.cluster;ClusterDeployer" title="akka.cluster.ClusterDeployer">ClusterDeployer</a><span class="delimiter">(</span><a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>, <a href="../../akka-remote/remote/RemoteActorRefProvider.scala.html#akka.remote;RemoteActorRefProvider.dynamicAccess" title="=&gt; akka.actor.DynamicAccess">dynamicAccess</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 *
 * Deployer of cluster aware routers.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ClusterDeployer extends akka.remote.RemoteDeployer" id="akka.cluster;ClusterDeployer">ClusterDeployer</a><a href="#akka.cluster;ClusterDeployer" title="akka.cluster.ClusterDeployer" class="delimiter">(</a><a title="akka.actor.ActorSystem.Settings" id="akka.cluster;ClusterDeployer._settings">_settings</a>: ActorSystem.<a href="../../akka-actor/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings" title="akka.actor.ActorSystem.Settings">Settings</a>, <a title="akka.actor.DynamicAccess" id="akka.cluster;ClusterDeployer._pm">_pm</a>: <a href="../../akka-actor/actor/DynamicAccess.scala.html#akka.actor;DynamicAccess" title="akka.actor.DynamicAccess">DynamicAccess</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../akka-remote/remote/RemoteDeployer.scala.html#akka.remote;RemoteDeployer" title="akka.remote.RemoteDeployer">RemoteDeployer</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer._settings" title="akka.actor.ActorSystem.Settings">_settings</a>, <a href="#akka.cluster;ClusterDeployer._pm" title="akka.actor.DynamicAccess">_pm</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String, config: com.typesafe.config.Config)Option[akka.actor.Deploy]" id="akka.cluster;ClusterDeployer.parseConfig">parseConfig</a><span class="delimiter">(</span><a title="String" id="akka.cluster;ClusterDeployer.parseConfig.path">path</a>: <span title="String">String</span>, <a title="com.typesafe.config.Config" id="akka.cluster;ClusterDeployer.parseConfig.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <span title="Option[akka.actor.Deploy]">Option</span><span class="delimiter">[</span>Deploy<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="comment">// For backwards compatibility we must transform 'cluster.routees-path' to 'routees.paths'</span>
    <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.cluster;ClusterDeployer.parseConfig.config2">config2</a> =
      <span title="com.typesafe.config.Config" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">hasPath</span><span class="delimiter">(</span><span title="String(&quot;cluster.routees-path&quot;)" class="string">&quot;cluster.routees-path&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterDeployer.parseConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: com.typesafe.config.ConfigMergeable)com.typesafe.config.Config">withFallback</span><span class="delimiter">(</span><span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="(x$1: String)com.typesafe.config.Config">parseString</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;&quot;&quot;<span title="String(&quot;routees.paths=[\&quot;&quot;)">routees.paths=[&quot;$</span><span class="delimiter">{</span><a href="#akka.cluster;ClusterDeployer.parseConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;cluster.routees-path&quot;)" class="string">&quot;cluster.routees-path&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;\&quot;]&quot;)" class="string">&quot;]&quot;&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.cluster;ClusterDeployer.parseConfig.config" title="com.typesafe.config.Config">config</a>

    <a href="#akka.cluster;ClusterDeployer" title="akka.cluster.ClusterDeployer" class="keyword">super</a>.<a href="../../akka-remote/remote/RemoteDeployer.scala.html#akka.remote;RemoteDeployer.parseConfig" title="(path: String, config: com.typesafe.config.Config)Option[akka.actor.Deploy]">parseConfig</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.path" title="String">path</a>, <a href="#akka.cluster;ClusterDeployer.parseConfig.config2" title="com.typesafe.config.Config">config2</a><span class="delimiter">)</span> <span title="Option[akka.actor.Deploy]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Some[akka.actor.Deploy]" id="akka.cluster;ClusterDeployer.parseConfig.d">d</a> @ Some<span class="delimiter">(</span><a title="akka.actor.Deploy" id="akka.cluster;ClusterDeployer.parseConfig.deploy">deploy</a><span class="delimiter">)</span> ⇒
        <span title="Option[akka.actor.Deploy]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;cluster.enabled&quot;)" class="string">&quot;cluster.enabled&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.scope" title="=&gt; akka.actor.Scope">scope</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../akka-actor/actor/Deployer.scala.html#akka.actor.NoScopeGiven" title="akka.actor.NoScopeGiven.type">NoScopeGiven</a><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">throw</span> <a href="../../akka-actor/AkkaException.scala.html#akka;ConfigurationException.<init>(3b0f220dea)" title="(msg: String)akka.ConfigurationException" class="keyword">new</a> <a href="../../akka-actor/AkkaException.scala.html#akka;ConfigurationException" title="akka.ConfigurationException">ConfigurationException</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Cluster deployment can't be combined with scope [%s]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.scope" title="=&gt; akka.actor.Scope">scope</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../akka-remote/remote/routing/RemoteRouterConfig.scala.html#akka.remote.routing;RemoteRouterConfig" title="akka.remote.routing.RemoteRouterConfig">RemoteRouterConfig</a><span class="delimiter">]</span><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">throw</span> <a href="../../akka-actor/AkkaException.scala.html#akka;ConfigurationException.<init>(3b0f220dea)" title="(msg: String)akka.ConfigurationException" class="keyword">new</a> <a href="../../akka-actor/AkkaException.scala.html#akka;ConfigurationException" title="akka.ConfigurationException">ConfigurationException</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Cluster deployment can't be combined with [%s]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a> <span title="Option[akka.actor.Deploy]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="akka.routing.DeprecatedRouterConfig">r</span>: <a href="../../akka-actor/routing/DeprecatedRouting.scala.html#akka.routing;DeprecatedRouterConfig" title="akka.routing.DeprecatedRouterConfig">DeprecatedRouterConfig</a> ⇒
              <span title="Some[akka.actor.Deploy]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">hasPath</span><span class="delimiter">(</span><span title="String(&quot;cluster.routees-path&quot;)" class="string">&quot;cluster.routees-path&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span title="(x: akka.actor.Deploy)Some[akka.actor.Deploy]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.copy$default$1" title="String" id="akka.cluster;ClusterDeployer.parseConfig.x$6">copy</a><span class="delimiter">(</span>
                  routerConfig = <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing;ClusterRouterGroup" title="(local: akka.routing.Group, settings: akka.cluster.routing.ClusterRouterGroupSettings)akka.cluster.routing.ClusterRouterGroup">ClusterRouterGroup</a><a title="akka.cluster.routing.ClusterRouterGroup" id="akka.cluster;ClusterDeployer.parseConfig.x$1" class="delimiter">(</a><span title="akka.routing.DeprecatedRouterConfig">r</span>, <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterGroupSettings" title="akka.cluster.routing.ClusterRouterGroupSettings.type">ClusterRouterGroupSettings</a>.<a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig" title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterGroupSettings">fromConfig</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span><span class="delimiter">)</span>, scope = <a href="#akka.cluster.ClusterScope.readResolve" title="akka.cluster.ClusterScope.type" id="akka.cluster;ClusterDeployer.parseConfig.x$2">ClusterScope</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">else</span>
                <span title="(x: akka.actor.Deploy)Some[akka.actor.Deploy]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.copy$default$1" title="String" id="akka.cluster;ClusterDeployer.parseConfig.x$12">copy</a><span class="delimiter">(</span>
                  routerConfig = <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing;ClusterRouterPool" title="(local: akka.routing.Pool, settings: akka.cluster.routing.ClusterRouterPoolSettings)akka.cluster.routing.ClusterRouterPool">ClusterRouterPool</a><a title="akka.cluster.routing.ClusterRouterPool" id="akka.cluster;ClusterDeployer.parseConfig.x$7" class="delimiter">(</a><span title="akka.routing.DeprecatedRouterConfig">r</span>, <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterPoolSettings" title="akka.cluster.routing.ClusterRouterPoolSettings.type">ClusterRouterPoolSettings</a>.<a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig" title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterPoolSettings">fromConfig</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span><span class="delimiter">)</span>, scope = <a href="#akka.cluster.ClusterScope.readResolve" title="akka.cluster.ClusterScope.type" id="akka.cluster;ClusterDeployer.parseConfig.x$8">ClusterScope</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="akka.routing.Pool">r</span>: <a href="../../akka-actor/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a> ⇒
              <span title="(x: akka.actor.Deploy)Some[akka.actor.Deploy]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.copy$default$1" title="String" id="akka.cluster;ClusterDeployer.parseConfig.x$18">copy</a><span class="delimiter">(</span>
                routerConfig = <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing;ClusterRouterPool" title="(local: akka.routing.Pool, settings: akka.cluster.routing.ClusterRouterPoolSettings)akka.cluster.routing.ClusterRouterPool">ClusterRouterPool</a><a title="akka.cluster.routing.ClusterRouterPool" id="akka.cluster;ClusterDeployer.parseConfig.x$13" class="delimiter">(</a><span title="akka.routing.Pool">r</span>, <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterPoolSettings" title="akka.cluster.routing.ClusterRouterPoolSettings.type">ClusterRouterPoolSettings</a>.<a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig" title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterPoolSettings">fromConfig</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span><span class="delimiter">)</span>, scope = <a href="#akka.cluster.ClusterScope.readResolve" title="akka.cluster.ClusterScope.type" id="akka.cluster;ClusterDeployer.parseConfig.x$14">ClusterScope</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="akka.routing.Group">r</span>: <a href="../../akka-actor/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a> ⇒
              <span title="(x: akka.actor.Deploy)Some[akka.actor.Deploy]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.copy$default$1" title="String" id="akka.cluster;ClusterDeployer.parseConfig.x$24">copy</a><span class="delimiter">(</span>
                routerConfig = <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing;ClusterRouterGroup" title="(local: akka.routing.Group, settings: akka.cluster.routing.ClusterRouterGroupSettings)akka.cluster.routing.ClusterRouterGroup">ClusterRouterGroup</a><a title="akka.cluster.routing.ClusterRouterGroup" id="akka.cluster;ClusterDeployer.parseConfig.x$19" class="delimiter">(</a><span title="akka.routing.Group">r</span>, <a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterGroupSettings" title="akka.cluster.routing.ClusterRouterGroupSettings.type">ClusterRouterGroupSettings</a>.<a href="routing/ClusterRouterConfig.scala.html#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig" title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterGroupSettings">fromConfig</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDeployer.parseConfig.deploy" title="akka.actor.Deploy">deploy</a>.<a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Deploy.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span><span class="delimiter">)</span>, scope = <a href="#akka.cluster.ClusterScope.readResolve" title="akka.cluster.ClusterScope.type" id="akka.cluster;ClusterDeployer.parseConfig.x$20">ClusterScope</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a title="akka.routing.RouterConfig" id="akka.cluster;ClusterDeployer.parseConfig.other">other</a> ⇒
              <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Cluster aware router can only wrap Pool or Group, got [&quot;)">Cluster aware router can only wrap Pool or Group, got [$</span><span class="delimiter">{</span><a href="#akka.cluster;ClusterDeployer.parseConfig.other" title="akka.routing.RouterConfig">other</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">}</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.cluster;ClusterDeployer.parseConfig.d" title="Some[akka.actor.Deploy]">d</a>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒ <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ClusterScope extends AnyRef with akka.actor.Scope" id="akka.cluster;ClusterScope">ClusterScope</a> <a href="#akka.cluster;ClusterScope" title="akka.cluster.ClusterScope" class="keyword">extends</a> <a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Scope" title="akka.actor.Scope">Scope</a>

<span class="comment">/**
 * Cluster aware scope of a [[akka.actor.Deploy]]
 */</span>
<span class="keyword">case object</span> <a href="#akka.cluster.ClusterScope.productElement.x$1" title="akka.cluster.ClusterScope.type" id="akka.cluster.ClusterScope.readResolve">ClusterScope</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterScope" title="akka.cluster.ClusterScope">ClusterScope</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * Java API: get the singleton instance
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterScope.type" id="akka.cluster.ClusterScope.getInstance">getInstance</a> = <span class="keyword">this</span>

  <span class="keyword">def</span> <a title="(other: akka.actor.Scope)akka.actor.Scope" id="akka.cluster.ClusterScope.withFallback">withFallback</a><span class="delimiter">(</span><a title="akka.actor.Scope" id="akka.cluster.ClusterScope.withFallback.other">other</a>: <a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Scope" title="akka.actor.Scope">Scope</a><span class="delimiter">)</span>: <a href="../../akka-actor/actor/Deployer.scala.html#akka.actor;Scope" title="akka.actor.Scope">Scope</a> = <span class="keyword">this</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
