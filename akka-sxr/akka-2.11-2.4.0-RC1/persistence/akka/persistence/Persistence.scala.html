<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>persistence/akka/persistence/Persistence.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.persistence

import java.util.concurrent.atomic.AtomicReference
import akka.actor._
import akka.dispatch.Dispatchers
import akka.event.<span class="delimiter">{</span> Logging, LoggingAdapter <span class="delimiter">}</span>
import akka.persistence.journal.<span class="delimiter">{</span> AsyncWriteJournal, EventAdapters, IdentityEventAdapters, ReplayFilter <span class="delimiter">}</span>
import akka.util.<a href="../../../actor/akka/util/Helpers.scala.html#akka.util.Helpers" title="akka.util.Helpers.type">Helpers</a>.ConfigOps
import com.typesafe.config.Config
import scala.annotation.tailrec
import scala.concurrent.duration._
import java.util.Locale
import akka.util.Reflect
import scala.util.control.NonFatal

<span class="comment">/**
 * Persistence configuration.
 */</span>
final class <a title="class PersistenceSettings extends AnyRef" id="akka.persistence;PersistenceSettings">PersistenceSettings</a><a href="#akka.persistence;PersistenceSettings" title="akka.persistence.PersistenceSettings" class="delimiter">(</a><a title="com.typesafe.config.Config" id="akka.persistence;PersistenceSettings.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  object <a title="PersistenceSettings.this.view.type" id="akka.persistence;PersistenceSettings.view">view</a> <a href="#akka.persistence;PersistenceSettings.view" title="PersistenceSettings.this.view.type" class="delimiter">{</a>
    val <a title="Boolean" id="akka.persistence;PersistenceSettings.view.autoUpdate">autoUpdate</a>: <span title="Boolean">Boolean</span> =
      <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;view.auto-update&quot;)" class="string">&quot;view.auto-update&quot;</span><span class="delimiter">)</span>

    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistenceSettings.view.autoUpdateInterval">autoUpdateInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> =
      <a href="../../../actor/akka/util/Helpers.scala.html#akka.util.Helpers.ConfigOps(7001b1cdb7)" title="implicit akka.util.Helpers.ConfigOps : (config: com.typesafe.config.Config)akka.util.Helpers.ConfigOps">config</a>.<a href="../../../actor/akka/util/Helpers.scala.html#akka.util.Helpers;ConfigOps.getMillisDuration" title="(path: String)scala.concurrent.duration.FiniteDuration">getMillisDuration</a><span class="delimiter">(</span><span title="String(&quot;view.auto-update-interval&quot;)" class="string">&quot;view.auto-update-interval&quot;</span><span class="delimiter">)</span>

    val <a title="Long" id="akka.persistence;PersistenceSettings.view.autoUpdateReplayMax">autoUpdateReplayMax</a>: <span title="Long">Long</span> =
      <a href="#akka.persistence;PersistenceSettings.view.posMax" title="(v: Long)Long">posMax</a><span class="delimiter">(</span><a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Long">getLong</span><span class="delimiter">(</span><span title="String(&quot;view.auto-update-replay-max&quot;)" class="string">&quot;view.auto-update-replay-max&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    private def <a title="(v: Long)Long" id="akka.persistence;PersistenceSettings.view.posMax">posMax</a><span class="delimiter">(</span><a title="Long" id="akka.persistence;PersistenceSettings.view.posMax.v">v</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
      if <span class="delimiter">(</span><a href="#akka.persistence;PersistenceSettings.view.posMax.v" title="Long">v</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> Long.<span title="Long(9223372036854775807L)">MaxValue</span> else <a href="#akka.persistence;PersistenceSettings.view.posMax.v" title="Long">v</a>
  <span class="delimiter">}</span>

  object <a title="PersistenceSettings.this.atLeastOnceDelivery.type" id="akka.persistence;PersistenceSettings.atLeastOnceDelivery">atLeastOnceDelivery</a> <a href="#akka.persistence;PersistenceSettings.atLeastOnceDelivery" title="PersistenceSettings.this.atLeastOnceDelivery.type" class="delimiter">{</a>

    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistenceSettings.atLeastOnceDelivery.redeliverInterval">redeliverInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> =
      <a href="../../../actor/akka/util/Helpers.scala.html#akka.util.Helpers.ConfigOps(7001b1cdb7)" title="implicit akka.util.Helpers.ConfigOps : (config: com.typesafe.config.Config)akka.util.Helpers.ConfigOps">config</a>.<a href="../../../actor/akka/util/Helpers.scala.html#akka.util.Helpers;ConfigOps.getMillisDuration" title="(path: String)scala.concurrent.duration.FiniteDuration">getMillisDuration</a><span class="delimiter">(</span><span title="String(&quot;at-least-once-delivery.redeliver-interval&quot;)" class="string">&quot;at-least-once-delivery.redeliver-interval&quot;</span><span class="delimiter">)</span>

    val <a title="Int" id="akka.persistence;PersistenceSettings.atLeastOnceDelivery.redeliveryBurstLimit">redeliveryBurstLimit</a>: <span title="Int">Int</span> =
      <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;at-least-once-delivery.redelivery-burst-limit&quot;)" class="string">&quot;at-least-once-delivery.redelivery-burst-limit&quot;</span><span class="delimiter">)</span>

    val <a title="Int" id="akka.persistence;PersistenceSettings.atLeastOnceDelivery.warnAfterNumberOfUnconfirmedAttempts">warnAfterNumberOfUnconfirmedAttempts</a>: <span title="Int">Int</span> =
      <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;at-least-once-delivery.warn-after-number-of-unconfirmed-attempts&quot;)" class="string">&quot;at-least-once-delivery.warn-after-number-of-unconfirmed-attempts&quot;</span><span class="delimiter">)</span>

    val <a title="Int" id="akka.persistence;PersistenceSettings.atLeastOnceDelivery.maxUnconfirmedMessages">maxUnconfirmedMessages</a>: <span title="Int">Int</span> =
      <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;at-least-once-delivery.max-unconfirmed-messages&quot;)" class="string">&quot;at-least-once-delivery.max-unconfirmed-messages&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API.
   *
   * These config options are only used internally for testing
   * purposes and are therefore not defined in reference.conf
   */</span>
  private<span class="delimiter">[</span>persistence<span class="delimiter">]</span> object <a title="PersistenceSettings.this.internal.type" id="akka.persistence;PersistenceSettings.internal">internal</a> <a href="#akka.persistence;PersistenceSettings.internal" title="PersistenceSettings.this.internal.type" class="delimiter">{</a>
    val <a title="Boolean" id="akka.persistence;PersistenceSettings.internal.publishPluginCommands">publishPluginCommands</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      val <a title="String" id="akka.persistence;PersistenceSettings.internal.publishPluginCommands.path">path</a> = <span title="String(&quot;publish-plugin-commands&quot;)" class="string">&quot;publish-plugin-commands&quot;</span>
      <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">hasPath</span><span class="delimiter">(</span><a href="#akka.persistence;PersistenceSettings.internal.publishPluginCommands.path" title="String">path</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence;PersistenceSettings.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><a href="#akka.persistence;PersistenceSettings.internal.publishPluginCommands.path" title="String">path</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

<span class="comment">/**
 * Identification of [[PersistentActor]] or [[PersistentView]].
 */</span>
<span class="comment">//#persistence-identity</span>
trait <a title="trait PersistenceIdentity extends AnyRef" id="akka.persistence;PersistenceIdentity">PersistenceIdentity</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * Id of the persistent entity for which messages should be replayed.
   */</span>
  def <a title="=&gt; String" id="akka.persistence;PersistenceIdentity.persistenceId">persistenceId</a>: <span title="String">String</span>

  <span class="comment">/**
   * Configuration id of the journal plugin servicing this persistent actor or view.
   * When empty, looks in `akka.persistence.journal.plugin` to find configuration entry path.
   * When configured, uses `journalPluginId` as absolute path to the journal configuration entry.
   * Configuration entry must contain few required fields, such as `class`. See `src/main/resources/reference.conf`.
   */</span>
  def <a title="=&gt; String" id="akka.persistence;PersistenceIdentity.journalPluginId">journalPluginId</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * Configuration id of the snapshot plugin servicing this persistent actor or view.
   * When empty, looks in `akka.persistence.snapshot-store.plugin` to find configuration entry path.
   * When configured, uses `snapshotPluginId` as absolute path to the snapshot store configuration entry.
   * Configuration entry must contain few required fields, such as `class`. See `src/main/resources/reference.conf`.
   */</span>
  def <a title="=&gt; String" id="akka.persistence;PersistenceIdentity.snapshotPluginId">snapshotPluginId</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

<span class="delimiter">}</span>
<span class="comment">//#persistence-identity</span>

trait <a title="trait PersistenceRecovery extends AnyRef" id="akka.persistence;PersistenceRecovery">PersistenceRecovery</a> <span title="Unit" class="delimiter">{</span>
  <span class="comment">//#persistence-recovery</span>
  <span class="comment">/**
   * Called when the persistent actor is started for the first time.
   * The returned [[Recovery]] object defines how the Actor will recover its persistent state before
   * handling the first incoming message.
   *
   * To skip recovery completely return `Recovery.none`.
   */</span>
  def <a title="=&gt; akka.persistence.Recovery" id="akka.persistence;PersistenceRecovery.recovery">recovery</a>: <a href="PersistentActor.scala.html#akka.persistence;Recovery" title="akka.persistence.Recovery">Recovery</a> = <a href="PersistentActor.scala.html#akka.persistence;Recovery" title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery">Recovery</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="comment">//#persistence-recovery</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Persistence extension provider.
 */</span>
object <a title="akka.persistence.Persistence.type" id="akka.persistence.Persistence">Persistence</a> extends <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId" title="akka.actor.ExtensionId[akka.persistence.Persistence]">ExtensionId</a><span class="delimiter">[</span>Persistence<span class="delimiter">]</span> with <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionIdProvider" title="akka.actor.ExtensionIdProvider">ExtensionIdProvider</a> <span class="delimiter">{</span>
  <span class="comment">/** Java API. */</span>
  override def <a title="(system: akka.actor.ActorSystem)akka.persistence.Persistence" id="akka.persistence.Persistence.get">get</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.persistence.Persistence.get.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.persistence;Persistence" title="akka.persistence.Persistence">Persistence</a> = super.<a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.get" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence">get</a><span class="delimiter">(</span><a href="#akka.persistence.Persistence.get.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  def <a title="(system: akka.actor.ExtendedActorSystem)akka.persistence.Persistence" id="akka.persistence.Persistence.createExtension">createExtension</a><span class="delimiter">(</span><a title="akka.actor.ExtendedActorSystem" id="akka.persistence.Persistence.createExtension.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>: <a href="#akka.persistence;Persistence" title="akka.persistence.Persistence">Persistence</a> = new <a href="#akka.persistence;Persistence" title="akka.persistence.Persistence">Persistence</a><span class="delimiter">(</span><a href="#akka.persistence.Persistence.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
  def <a title="()akka.persistence.Persistence.type" id="akka.persistence.Persistence.lookup">lookup</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.persistence.Persistence" title="akka.persistence.Persistence.type">Persistence</a>
  <span class="comment">/** INTERNAL API. */</span>
  private<span class="delimiter">[</span>persistence<span class="delimiter">]</span> case class <a title="class PluginHolder extends AnyRef with akka.actor.Extension with Product with Serializable" id="akka.persistence.Persistence.PluginHolder.readResolve">PluginHolder</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence.Persistence;PluginHolder.actor">actor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.persistence.journal.EventAdapters" id="akka.persistence.Persistence;PluginHolder.adapters">adapters</a>: <a href="journal/EventAdapters.scala.html#akka.persistence.journal;EventAdapters" title="akka.persistence.journal.EventAdapters">EventAdapters</a>, <a title="com.typesafe.config.Config" id="akka.persistence.Persistence;PluginHolder.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>
    extends <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;Extension" title="akka.actor.Extension">Extension</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Persistence extension.
 */</span>
class <a title="class Persistence extends AnyRef with akka.actor.Extension" id="akka.persistence;Persistence">Persistence</a><a href="#akka.persistence;Persistence" title="akka.persistence.Persistence" class="delimiter">(</a>val <a title="akka.actor.ExtendedActorSystem" id="akka.persistence;Persistence.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;Extension" title="akka.actor.Extension">Extension</a> <span class="delimiter">{</span>
  import <a href="#akka.persistence.Persistence" title="akka.persistence.Persistence.type">Persistence</a>._

  private def <a title="=&gt; akka.event.LoggingAdapter" id="akka.persistence;Persistence.log">log</a>: <a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a> = <a href="../../../actor/akka/event/Logging.scala.html#akka.event.Logging.apply(882ba4a885)" title="(system: akka.actor.ActorSystem, logSource: String)(implicit evidence$3: akka.event.LogSource[String])akka.event.LoggingAdapter">Logging</a><a href="../../../actor/akka/event/Logging.scala.html#akka.event.LogSource.fromString" title="=&gt; akka.event.LogSource[String]" class="delimiter">(</a><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>, <a href="#akka.persistence;Persistence" title="()Class[_]">getClass</a>.<span title="()String">getName</span><span class="delimiter">)</span>

  private val <a title="String" id="akka.persistence;Persistence.DefaultPluginDispatcherId">DefaultPluginDispatcherId</a> = <span title="String(&quot;akka.persistence.dispatchers.default-plugin-dispatcher&quot;)" class="string">&quot;akka.persistence.dispatchers.default-plugin-dispatcher&quot;</span>
  private val <a title="String" id="akka.persistence;Persistence.NoSnapshotStorePluginId">NoSnapshotStorePluginId</a> = <span title="String(&quot;akka.persistence.no-snapshot-store&quot;)" class="string">&quot;akka.persistence.no-snapshot-store&quot;</span>

  private val <a title="com.typesafe.config.Config" id="akka.persistence;Persistence.config">config</a> = <a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><span title="String(&quot;akka.persistence&quot;)" class="string">&quot;akka.persistence&quot;</span><span class="delimiter">)</span>

  <span class="comment">// Lazy, so user is not forced to configure defaults when she is not using them.</span>
  private lazy val <a title="String" id="akka.persistence;Persistence.defaultJournalPluginId">defaultJournalPluginId</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.defaultJournalPluginId.configPath">configPath</a> = <a href="#akka.persistence;Persistence.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;journal.plugin&quot;)" class="string">&quot;journal.plugin&quot;</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.defaultJournalPluginId.configPath" title="String">configPath</a><span class="delimiter">)</span>, <span title="String(&quot;default journal plugin is not configured, see \'reference.conf\'&quot;)" class="string">&quot;default journal plugin is not configured, see 'reference.conf'&quot;</span><span class="delimiter">)</span>
    <a href="#akka.persistence;Persistence.defaultJournalPluginId.configPath" title="String">configPath</a>
  <span class="delimiter">}</span>

  <span class="comment">// Lazy, so user is not forced to configure defaults when she is not using them.</span>
  private lazy val <a title="String" id="akka.persistence;Persistence.defaultSnapshotPluginId">defaultSnapshotPluginId</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.defaultSnapshotPluginId.configPath">configPath</a> = <a href="#akka.persistence;Persistence.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;snapshot-store.plugin&quot;)" class="string">&quot;snapshot-store.plugin&quot;</span><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.defaultSnapshotPluginId.configPath" title="String">configPath</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.persistence;Persistence.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(cc2e600322)" title="(message: String)Unit">warning</a><span class="delimiter">(</span><span class="string">&quot;No default snapshot store configured! &quot;</span> +
        <span class="string">&quot;To configure a default snapshot-store plugin set the `akka.persistence.snapshot-store.plugin` key. &quot;</span> <span title="String(&quot;No default snapshot store configured! To configure a default snapshot-store plugin set the `akka.persistence.snapshot-store.plugin` key. For details see \'reference.conf\'&quot;)">+</span>
        <span class="string">&quot;For details see 'reference.conf'&quot;</span><span class="delimiter">)</span>
      <a href="#akka.persistence;Persistence.NoSnapshotStorePluginId" title="=&gt; String">NoSnapshotStorePluginId</a>
    <span class="delimiter">}</span> else <a href="#akka.persistence;Persistence.defaultSnapshotPluginId.configPath" title="String">configPath</a>
  <span class="delimiter">}</span>

  val <a title="akka.persistence.PersistenceSettings" id="akka.persistence;Persistence.settings">settings</a> = new <a href="#akka.persistence;PersistenceSettings" title="akka.persistence.PersistenceSettings">PersistenceSettings</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.config" title="=&gt; com.typesafe.config.Config">config</a><span class="delimiter">)</span>

  <span class="comment">/** Check for default or missing identity. */</span>
  private def <a title="(text: String)Boolean" id="akka.persistence;Persistence.isEmpty">isEmpty</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.isEmpty.text">text</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#akka.persistence;Persistence.isEmpty.text" title="String">text</a> <span title="(x$1: Any)Boolean">==</span> null <span title="(x: Boolean)Boolean">||</span> <a href="#akka.persistence;Persistence.isEmpty.text" title="String">text</a>.<span title="()Int">length</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span>

  <span class="comment">/** Discovered persistence journal and snapshot store plugins. */</span>
  private val <a title="java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]" id="akka.persistence;Persistence.journalPluginExtensionId">journalPluginExtensionId</a> = new <span title="java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">AtomicReference</span><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, ExtensionId<span class="delimiter">[</span>PluginHolder<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span>

  <span class="comment">/** Discovered persistence snapshot store plugins. */</span>
  private val <a title="java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]" id="akka.persistence;Persistence.snapshotPluginExtensionId">snapshotPluginExtensionId</a> = new <span title="java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">AtomicReference</span><span class="delimiter">[</span>Map<span class="delimiter">[</span>String, ExtensionId<span class="delimiter">[</span>PluginHolder<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span>

  private val <a title="String" id="akka.persistence;Persistence.journalFallbackConfigPath">journalFallbackConfigPath</a> = <span title="String(&quot;akka.persistence.journal-plugin-fallback&quot;)" class="string">&quot;akka.persistence.journal-plugin-fallback&quot;</span>
  private val <a title="String" id="akka.persistence;Persistence.snapshotStoreFallbackConfigPath">snapshotStoreFallbackConfigPath</a> = <span title="String(&quot;akka.persistence.snapshot-store-plugin-fallback&quot;)" class="string">&quot;akka.persistence.snapshot-store-plugin-fallback&quot;</span>

  <span class="comment">/**
   * Returns an [[akka.persistence.journal.EventAdapters]] object which serves as a per-journal collection of bound event adapters.
   * If no adapters are registered for a given journal the EventAdapters object will simply return the identity
   * adapter for each class, otherwise the most specific adapter matching a given class will be returned.
   */</span>
  final def <a title="(journalPluginId: String)akka.persistence.journal.EventAdapters" id="akka.persistence;Persistence.adaptersFor(1820b3b330)">adaptersFor</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.adaptersFor(1820b3b330).journalPluginId">journalPluginId</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="journal/EventAdapters.scala.html#akka.persistence.journal;EventAdapters" title="akka.persistence.journal.EventAdapters">EventAdapters</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.adaptersFor(1820b3b330).configPath">configPath</a> = if <span class="delimiter">(</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.adaptersFor(1820b3b330).journalPluginId" title="String">journalPluginId</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.persistence;Persistence.defaultJournalPluginId" title="=&gt; String">defaultJournalPluginId</a> else <a href="#akka.persistence;Persistence.adaptersFor(1820b3b330).journalPluginId" title="String">journalPluginId</a>
    <a href="#akka.persistence;Persistence.pluginHolderFor" title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder">pluginHolderFor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.adaptersFor(1820b3b330).configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.journalFallbackConfigPath" title="=&gt; String">journalFallbackConfigPath</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.adapters" title="=&gt; akka.persistence.journal.EventAdapters">adapters</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Looks up [[akka.persistence.journal.EventAdapters]] by journal plugin's ActorRef.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final def <a title="(journalPluginActor: akka.actor.ActorRef)akka.persistence.journal.EventAdapters" id="akka.persistence;Persistence.adaptersFor(5b50c93c4e)">adaptersFor</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence;Persistence.adaptersFor(5b50c93c4e).journalPluginActor">journalPluginActor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="journal/EventAdapters.scala.html#akka.persistence.journal;EventAdapters" title="akka.persistence.journal.EventAdapters">EventAdapters</a> = <span class="delimiter">{</span>
    <a href="#akka.persistence;Persistence.journalPluginExtensionId" title="=&gt; java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">journalPluginExtensionId</a>.<span title="()Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Iterable[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">values</span> <span title="(pf: PartialFunction[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder],akka.persistence.journal.EventAdapters])Option[akka.persistence.journal.EventAdapters]">collectFirst</span> <a title="&lt;$anon: akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder] =&gt; akka.persistence.journal.EventAdapters&gt; extends scala.runtime.AbstractPartialFunction[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder],akka.persistence.journal.EventAdapters] with Serializable" id="akka.persistence;Persistence.adaptersFor(5b50c93c4e);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a title="akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]" id="akka.persistence;Persistence.adaptersFor(5b50c93c4e);$anonfun.isDefinedAt.ext">ext</a> if <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence.PluginHolder">ext</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.actor" title="=&gt; akka.actor.ActorRef">actor</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.persistence;Persistence.adaptersFor(5b50c93c4e).journalPluginActor" title="akka.actor.ActorRef">journalPluginActor</a> ⇒ <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence.PluginHolder">ext</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.adapters" title="=&gt; akka.persistence.journal.EventAdapters">adapters</a>
    <span class="delimiter">}</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="akka.persistence.journal.EventAdapters" id="akka.persistence;Persistence.adaptersFor(5b50c93c4e).adapters">adapters</a><span class="delimiter">)</span> ⇒ <a href="#akka.persistence;Persistence.adaptersFor(5b50c93c4e).adapters" title="akka.persistence.journal.EventAdapters">adapters</a>
      case _              ⇒ <a href="journal/EventAdapters.scala.html#akka.persistence.journal.IdentityEventAdapters" title="akka.persistence.journal.IdentityEventAdapters.type">IdentityEventAdapters</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Returns the plugin config identified by `pluginId`.
   * When empty, looks in `akka.persistence.journal.plugin` to find configuration entry path.
   * When configured, uses `journalPluginId` as absolute path to the journal configuration entry.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final def <a title="(journalPluginId: String)com.typesafe.config.Config" id="akka.persistence;Persistence.journalConfigFor">journalConfigFor</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.journalConfigFor.journalPluginId">journalPluginId</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="com.typesafe.config.Config">Config</span> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.journalConfigFor.configPath">configPath</a> = if <span class="delimiter">(</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.journalConfigFor.journalPluginId" title="String">journalPluginId</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.persistence;Persistence.defaultJournalPluginId" title="=&gt; String">defaultJournalPluginId</a> else <a href="#akka.persistence;Persistence.journalConfigFor.journalPluginId" title="String">journalPluginId</a>
    <a href="#akka.persistence;Persistence.pluginHolderFor" title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder">pluginHolderFor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.journalConfigFor.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.journalFallbackConfigPath" title="=&gt; String">journalFallbackConfigPath</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.config" title="=&gt; com.typesafe.config.Config">config</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Looks up the plugin config by plugin's ActorRef.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final def <a title="(journalPluginActor: akka.actor.ActorRef)com.typesafe.config.Config" id="akka.persistence;Persistence.configFor">configFor</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence;Persistence.configFor.journalPluginActor">journalPluginActor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="com.typesafe.config.Config">Config</span> =
    <a href="#akka.persistence;Persistence.journalPluginExtensionId" title="=&gt; java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">journalPluginExtensionId</a>.<span title="()Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Iterable[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">values</span>.<span title="(pf: PartialFunction[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder],com.typesafe.config.Config])Option[com.typesafe.config.Config]">collectFirst</span> <a title="&lt;$anon: akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder] =&gt; com.typesafe.config.Config&gt; extends scala.runtime.AbstractPartialFunction[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder],com.typesafe.config.Config] with Serializable" id="akka.persistence;Persistence.configFor;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a title="akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]" id="akka.persistence;Persistence.configFor;$anonfun.isDefinedAt.ext">ext</a> if <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence.PluginHolder">ext</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.actor" title="=&gt; akka.actor.ActorRef">actor</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.persistence;Persistence.configFor.journalPluginActor" title="akka.actor.ActorRef">journalPluginActor</a> ⇒ <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence.PluginHolder">ext</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.config" title="=&gt; com.typesafe.config.Config">config</a>
    <span class="delimiter">}</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="com.typesafe.config.Config" id="akka.persistence;Persistence.configFor.conf">conf</a><span class="delimiter">)</span> ⇒ <a href="#akka.persistence;Persistence.configFor.conf" title="com.typesafe.config.Config">conf</a>
      case <span title="None.type">None</span>       ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Unknow plugin actor &quot;)">Unknow plugin actor $</span><a href="#akka.persistence;Persistence.configFor.journalPluginActor" title="akka.actor.ActorRef">journalPluginActor</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Returns a journal plugin actor identified by `journalPluginId`.
   * When empty, looks in `akka.persistence.journal.plugin` to find configuration entry path.
   * When configured, uses `journalPluginId` as absolute path to the journal configuration entry.
   * Configuration entry must contain few required fields, such as `class`. See `src/main/resources/reference.conf`.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final def <a title="(journalPluginId: String)akka.actor.ActorRef" id="akka.persistence;Persistence.journalFor">journalFor</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.journalFor.journalPluginId">journalPluginId</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.journalFor.configPath">configPath</a> = if <span class="delimiter">(</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.journalFor.journalPluginId" title="String">journalPluginId</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.persistence;Persistence.defaultJournalPluginId" title="=&gt; String">defaultJournalPluginId</a> else <a href="#akka.persistence;Persistence.journalFor.journalPluginId" title="String">journalPluginId</a>
    <a href="#akka.persistence;Persistence.pluginHolderFor" title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder">pluginHolderFor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.journalFor.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.journalFallbackConfigPath" title="=&gt; String">journalFallbackConfigPath</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.actor" title="=&gt; akka.actor.ActorRef">actor</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   *
   * Returns a snapshot store plugin actor identified by `snapshotPluginId`.
   * When empty, looks in `akka.persistence.snapshot-store.plugin` to find configuration entry path.
   * When configured, uses `snapshotPluginId` as absolute path to the snapshot store configuration entry.
   * Configuration entry must contain few required fields, such as `class`. See `src/main/resources/reference.conf`.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> final def <a title="(snapshotPluginId: String)akka.actor.ActorRef" id="akka.persistence;Persistence.snapshotStoreFor">snapshotStoreFor</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.snapshotStoreFor.snapshotPluginId">snapshotPluginId</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.snapshotStoreFor.configPath">configPath</a> = if <span class="delimiter">(</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.snapshotStoreFor.snapshotPluginId" title="String">snapshotPluginId</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.persistence;Persistence.defaultSnapshotPluginId" title="=&gt; String">defaultSnapshotPluginId</a> else <a href="#akka.persistence;Persistence.snapshotStoreFor.snapshotPluginId" title="String">snapshotPluginId</a>
    <a href="#akka.persistence;Persistence.pluginHolderFor" title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder">pluginHolderFor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.snapshotStoreFor.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.snapshotStoreFallbackConfigPath" title="=&gt; String">snapshotStoreFallbackConfigPath</a><span class="delimiter">)</span>.<a href="#akka.persistence.Persistence;PluginHolder.actor" title="=&gt; akka.actor.ActorRef">actor</a>
  <span class="delimiter">}</span>

  @tailrec private def <a title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder" id="akka.persistence;Persistence.pluginHolderFor">pluginHolderFor</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.pluginHolderFor.configPath">configPath</a>: <span title="String">String</span>, <a title="String" id="akka.persistence;Persistence.pluginHolderFor.fallbackPath">fallbackPath</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#akka.persistence.Persistence.PluginHolder.readResolve" title="akka.persistence.Persistence.PluginHolder">PluginHolder</a> = <span class="delimiter">{</span>
    val <a title="Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]" id="akka.persistence;Persistence.pluginHolderFor.extensionIdMap">extensionIdMap</a> = <a href="#akka.persistence;Persistence.journalPluginExtensionId" title="=&gt; java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">journalPluginExtensionId</a>.<span title="()Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">get</span>
    <a href="#akka.persistence;Persistence.pluginHolderFor.extensionIdMap" title="Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">extensionIdMap</a>.<span title="(key: String)Option[akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">get</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.pluginHolderFor.configPath" title="String">configPath</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><span title="akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]">extensionId</span><span class="delimiter">)</span> ⇒
        <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence.PluginHolder">extensionId</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
      case <span title="None.type">None</span> ⇒
        val <span title="Persistence.this.PluginHolderExtensionId">extensionId</span> = new <a href="#akka.persistence;Persistence;PluginHolderExtensionId" title="Persistence.this.PluginHolderExtensionId">PluginHolderExtensionId</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.pluginHolderFor.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.pluginHolderFor.fallbackPath" title="String">fallbackPath</a><span class="delimiter">)</span>
        <a href="#akka.persistence;Persistence.journalPluginExtensionId" title="=&gt; java.util.concurrent.atomic.AtomicReference[Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]]">journalPluginExtensionId</a>.<span title="(x$1: Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]], x$2: Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]])Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.pluginHolderFor.extensionIdMap" title="Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">extensionIdMap</a>, <a href="#akka.persistence;Persistence.pluginHolderFor.extensionIdMap" title="Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">extensionIdMap</a>.<span title="(key: String, value: akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder])scala.collection.immutable.Map[String,akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]]">updated</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.pluginHolderFor.configPath" title="String">configPath</a>, <span title="Persistence.this.PluginHolderExtensionId">extensionId</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.persistence;Persistence.pluginHolderFor" title="(configPath: String, fallbackPath: String)akka.persistence.Persistence.PluginHolder">pluginHolderFor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.pluginHolderFor.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence.pluginHolderFor.fallbackPath" title="String">fallbackPath</a><span class="delimiter">)</span> <span class="comment">// Recursive invocation.</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(configPath: String, pluginConfig: com.typesafe.config.Config)akka.actor.ActorRef" id="akka.persistence;Persistence.createPlugin">createPlugin</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.createPlugin.configPath">configPath</a>: <span title="String">String</span>, <a title="com.typesafe.config.Config" id="akka.persistence;Persistence.createPlugin.pluginConfig">pluginConfig</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence;Persistence.createPlugin.pluginActorName">pluginActorName</a> = <a href="#akka.persistence;Persistence.createPlugin.configPath" title="String">configPath</a>
    val <a title="String" id="akka.persistence;Persistence.createPlugin.pluginClassName">pluginClassName</a> = <a href="#akka.persistence;Persistence.createPlugin.pluginConfig" title="com.typesafe.config.Config">pluginConfig</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;class&quot;)" class="string">&quot;class&quot;</span><span class="delimiter">)</span>
    <a href="#akka.persistence;Persistence.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Create plugin: &quot;)">Create plugin: $</span><a href="#akka.persistence;Persistence.createPlugin.pluginActorName" title="String">pluginActorName</a><span title="String(&quot; &quot;)"> $</span><a href="#akka.persistence;Persistence.createPlugin.pluginClassName" title="String">pluginClassName</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    val <a title="Class[_]" id="akka.persistence;Persistence.createPlugin.pluginClass">pluginClass</a> = <a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.dynamicAccess" title="=&gt; akka.actor.DynamicAccess">dynamicAccess</a>.<a href="../../../actor/akka/actor/DynamicAccess.scala.html#akka.actor;DynamicAccess.getClassFor" title="[T](fqcn: String)(implicit evidence$2: scala.reflect.ClassTag[T])scala.util.Try[Class[_ &lt;: T]]">getClassFor</a><span title="(fqcn: String)(implicit evidence$2: scala.reflect.ClassTag[Any])scala.util.Try[Class[_]]" class="delimiter">[</span><span title="Any">Any</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.ClassTag[Any]" class="delimiter">(</span><a href="#akka.persistence;Persistence.createPlugin.pluginClassName" title="String">pluginClassName</a><span class="delimiter">)</span>.<span title="=&gt; Class[_]">get</span>
    val <a title="String" id="akka.persistence;Persistence.createPlugin.pluginDispatcherId">pluginDispatcherId</a> = <a href="#akka.persistence;Persistence.createPlugin.pluginConfig" title="com.typesafe.config.Config">pluginConfig</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;plugin-dispatcher&quot;)" class="string">&quot;plugin-dispatcher&quot;</span><span class="delimiter">)</span>
    val <a title="List[com.typesafe.config.Config]" id="akka.persistence;Persistence.createPlugin.pluginActorArgs">pluginActorArgs</a> = try <span class="delimiter">{</span>
      <a href="../../../actor/akka/util/Reflect.scala.html#akka.util.Reflect" title="akka.util.Reflect.type">Reflect</a>.<a href="../../../actor/akka/util/Reflect.scala.html#akka.util.Reflect.findConstructor" title="(clazz: Class[_$3], args: scala.collection.immutable.Seq[Any])java.lang.reflect.Constructor[_$3]">findConstructor</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.createPlugin.pluginClass" title="Class[_]">pluginClass</a>, <span title="(xs: com.typesafe.config.Config*)List[com.typesafe.config.Config]">List</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.createPlugin.pluginConfig" title="com.typesafe.config.Config">pluginConfig</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// will throw if not found</span>
      <span title="(xs: com.typesafe.config.Config*)List[com.typesafe.config.Config]">List</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.createPlugin.pluginConfig" title="com.typesafe.config.Config">pluginConfig</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span> case <a href="#akka.persistence;Persistence.createPlugin.pluginActorArgs.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span title="scala.collection.immutable.Nil.type">Nil</span> <span class="delimiter">}</span> <span class="comment">// otherwise use empty constructor</span>
    val <a title="akka.actor.Props" id="akka.persistence;Persistence.createPlugin.pluginActorProps">pluginActorProps</a> = <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="(deploy: akka.actor.Deploy, clazz: Class[_], args: scala.collection.immutable.Seq[Any])akka.actor.Props">Props</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.apply$default$1" title="String" id="akka.persistence;Persistence.createPlugin.pluginActorProps.x$6">Deploy</a><span class="delimiter">(</span>dispatcher = <a href="#akka.persistence;Persistence.createPlugin.pluginDispatcherId" title="String" id="akka.persistence;Persistence.createPlugin.pluginActorProps.x$1">pluginDispatcherId</a><span class="delimiter">)</span>, <a href="#akka.persistence;Persistence.createPlugin.pluginClass" title="Class[_]">pluginClass</a>, <a href="#akka.persistence;Persistence.createPlugin.pluginActorArgs" title="List[com.typesafe.config.Config]">pluginActorArgs</a><span class="delimiter">)</span>
    <a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.systemActorOf" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">systemActorOf</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.createPlugin.pluginActorProps" title="akka.actor.Props">pluginActorProps</a>, <a href="#akka.persistence;Persistence.createPlugin.pluginActorName" title="String">pluginActorName</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(configPath: String)akka.persistence.journal.EventAdapters" id="akka.persistence;Persistence.createAdapters">createAdapters</a><span class="delimiter">(</span><a title="String" id="akka.persistence;Persistence.createAdapters.configPath">configPath</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="journal/EventAdapters.scala.html#akka.persistence.journal;EventAdapters" title="akka.persistence.journal.EventAdapters">EventAdapters</a> = <span class="delimiter">{</span>
    val <a title="com.typesafe.config.Config" id="akka.persistence;Persistence.createAdapters.pluginConfig">pluginConfig</a> = <a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence.createAdapters.configPath" title="String">configPath</a><span class="delimiter">)</span>
    <a href="journal/EventAdapters.scala.html#akka.persistence.journal.EventAdapters.apply(24cd7dde33)" title="(system: akka.actor.ExtendedActorSystem, config: com.typesafe.config.Config)akka.persistence.journal.EventAdapters">EventAdapters</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>, <a href="#akka.persistence;Persistence.createAdapters.pluginConfig" title="com.typesafe.config.Config">pluginConfig</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Creates a canonical persistent actor id from a persistent actor ref. */</span>
  def <a title="(persistentActor: akka.actor.ActorRef)String" id="akka.persistence;Persistence.persistenceId">persistenceId</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence;Persistence.persistenceId.persistentActor">persistentActor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#akka.persistence;Persistence.id" title="(ref: akka.actor.ActorRef)String">id</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence.persistenceId.persistentActor" title="akka.actor.ActorRef">persistentActor</a><span class="delimiter">)</span>

  private def <a title="(ref: akka.actor.ActorRef)String" id="akka.persistence;Persistence.id">id</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence;Persistence.id.ref">ref</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.persistence;Persistence.id.ref" title="akka.actor.ActorRef">ref</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithoutAddress" title="=&gt; String">toStringWithoutAddress</a>

  private class <a title="class PluginHolderExtensionId extends AnyRef with akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]" id="akka.persistence;Persistence;PluginHolderExtensionId">PluginHolderExtensionId</a><a href="#akka.persistence;Persistence;PluginHolderExtensionId" title="Persistence.this.PluginHolderExtensionId" class="delimiter">(</a><a title="String" id="akka.persistence;Persistence;PluginHolderExtensionId.configPath">configPath</a>: <span title="String">String</span>, <a title="String" id="akka.persistence;Persistence;PluginHolderExtensionId.fallbackPath">fallbackPath</a>: <span title="String">String</span><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId" title="akka.actor.ExtensionId[akka.persistence.Persistence.PluginHolder]">ExtensionId</a><span class="delimiter">[</span>PluginHolder<span class="delimiter">]</span> <span class="delimiter">{</span>
    override def <a title="(system: akka.actor.ExtendedActorSystem)akka.persistence.Persistence.PluginHolder" id="akka.persistence;Persistence;PluginHolderExtensionId.createExtension">createExtension</a><span class="delimiter">(</span><a title="akka.actor.ExtendedActorSystem" id="akka.persistence;Persistence;PluginHolderExtensionId.createExtension.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>: <a href="#akka.persistence.Persistence.PluginHolder.readResolve" title="akka.persistence.Persistence.PluginHolder">PluginHolder</a> = <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.persistence;Persistence.isEmpty" title="(text: String)Boolean">isEmpty</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">hasPath</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a><span class="delimiter">)</span>,
        <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;\'reference.conf\' is missing persistence plugin config path: \'&quot;)">'reference.conf' is missing persistence plugin config path: '$</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a><span title="String(&quot;\'&quot;)" class="string">'&quot;</span><span class="delimiter">)</span>
      val <a title="com.typesafe.config.Config" id="akka.persistence;Persistence;PluginHolderExtensionId.createExtension.config">config</a>: <span title="com.typesafe.config.Config">Config</span> = <a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a><span class="delimiter">)</span>
        .<span title="(x$1: com.typesafe.config.ConfigMergeable)com.typesafe.config.Config">withFallback</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.fallbackPath" title="String">fallbackPath</a><span class="delimiter">)</span><span class="delimiter">)</span>
      val <a title="akka.actor.ActorRef" id="akka.persistence;Persistence;PluginHolderExtensionId.createExtension.plugin">plugin</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.persistence;Persistence.createPlugin" title="(configPath: String, pluginConfig: com.typesafe.config.Config)akka.actor.ActorRef">createPlugin</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a>, <a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>
      val <a title="akka.persistence.journal.EventAdapters" id="akka.persistence;Persistence;PluginHolderExtensionId.createExtension.adapters">adapters</a>: <a href="journal/EventAdapters.scala.html#akka.persistence.journal;EventAdapters" title="akka.persistence.journal.EventAdapters">EventAdapters</a> = <a href="#akka.persistence;Persistence.createAdapters" title="(configPath: String)akka.persistence.journal.EventAdapters">createAdapters</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.configPath" title="String">configPath</a><span class="delimiter">)</span>

      <a href="#akka.persistence.Persistence.PluginHolder.readResolve" title="(actor: akka.actor.ActorRef, adapters: akka.persistence.journal.EventAdapters, config: com.typesafe.config.Config)akka.persistence.Persistence.PluginHolder">PluginHolder</a><span class="delimiter">(</span><a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.plugin" title="akka.actor.ActorRef">plugin</a>, <a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.adapters" title="akka.persistence.journal.EventAdapters">adapters</a>, <a href="#akka.persistence;Persistence;PluginHolderExtensionId.createExtension.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
