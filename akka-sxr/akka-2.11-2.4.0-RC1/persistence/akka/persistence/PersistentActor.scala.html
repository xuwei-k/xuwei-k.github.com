<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>persistence/akka/persistence/PersistentActor.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.persistence

import java.lang.<span class="delimiter">{</span> Iterable â‡’ JIterable <span class="delimiter">}</span>
import akka.actor.UntypedActor
import akka.japi.Procedure
import akka.actor.AbstractActor
import akka.japi.Util

abstract class <a title="class RecoveryCompleted extends AnyRef" id="akka.persistence;RecoveryCompleted">RecoveryCompleted</a>
<span class="comment">/**
 * Sent to a [[PersistentActor]] when the journal replay has been finished.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
case object <a href="#akka.persistence.RecoveryCompleted.productElement.x$1" title="akka.persistence.RecoveryCompleted.type" id="akka.persistence.RecoveryCompleted.readResolve">RecoveryCompleted</a> extends <a href="#akka.persistence;RecoveryCompleted" title="akka.persistence.RecoveryCompleted">RecoveryCompleted</a> <span class="delimiter">{</span>
  <span class="comment">/**
   * Java API: get the singleton instance
   */</span>
  def <a title="=&gt; akka.persistence.RecoveryCompleted.type" id="akka.persistence.RecoveryCompleted.getInstance">getInstance</a> = this
<span class="delimiter">}</span>

<span class="comment">/**
 * Reply message to a successful [[Eventsourced#deleteMessages]] request.
 */</span>
final case class <a title="class DeleteMessagesSuccess extends AnyRef with Product with Serializable" id="akka.persistence.DeleteMessagesSuccess.readResolve">DeleteMessagesSuccess</a><a href="#akka.persistence.DeleteMessagesSuccess.readResolve" title="Product" class="delimiter">(</a><a title="Long" id="akka.persistence;DeleteMessagesSuccess.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span>

<span class="comment">/**
 * Reply message to a failed [[Eventsourced#deleteMessages]] request.
 */</span>
final case class <a title="class DeleteMessagesFailure extends AnyRef with Product with Serializable" id="akka.persistence.DeleteMessagesFailure.readResolve">DeleteMessagesFailure</a><a href="#akka.persistence.DeleteMessagesFailure.readResolve" title="Product" class="delimiter">(</a><a title="Throwable" id="akka.persistence;DeleteMessagesFailure.cause">cause</a>: <span title="Throwable">Throwable</span>, <a title="Long" id="akka.persistence;DeleteMessagesFailure.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span>

<span class="comment">/**
 * Recovery mode configuration object to be returned in [[PersistentActor#recovery]].
 *
 * By default recovers from latest snapshot replays through to the last available event (last sequenceId).
 *
 * Recovery will start from a snapshot if the persistent actor has previously saved one or more snapshots
 * and at least one of these snapshots matches the specified `fromSnapshot` criteria.
 * Otherwise, recovery will start from scratch by replaying all stored events.
 *
 * If recovery starts from a snapshot, the persistent actor is offered that snapshot with a [[SnapshotOffer]]
 * message, followed by replayed messages, if any, that are younger than the snapshot, up to the
 * specified upper sequence number bound (`toSequenceNr`).
 *
 * @param fromSnapshot criteria for selecting a saved snapshot from which recovery should start. Default
 *                     is latest (= youngest) snapshot.
 * @param toSequenceNr upper sequence number bound (inclusive) for recovery. Default is no upper bound.
 * @param replayMax maximum number of messages to replay. Default is no limit.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="class Recovery extends AnyRef with Product with Serializable" id="akka.persistence;Recovery">Recovery</a><a href="#akka.persistence;Recovery" title="Product" class="delimiter">(</a>
  <a title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.<init>$default$1">fromSnapshot</a>: <a href="SnapshotProtocol.scala.html#akka.persistence;SnapshotSelectionCriteria" title="akka.persistence.SnapshotSelectionCriteria">SnapshotSelectionCriteria</a> = <a href="SnapshotProtocol.scala.html#akka.persistence.SnapshotSelectionCriteria" title="akka.persistence.SnapshotSelectionCriteria.type">SnapshotSelectionCriteria</a>.<a href="SnapshotProtocol.scala.html#akka.persistence.SnapshotSelectionCriteria.Latest" title="=&gt; akka.persistence.SnapshotSelectionCriteria">Latest</a>,
  <a title="Long" id="akka.persistence.Recovery.<init>$default$2">toSequenceNr</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>,
  <a title="Long" id="akka.persistence.Recovery.<init>$default$3">replayMax</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span><span class="delimiter">)</span>

object <a title="akka.persistence.Recovery.type" id="akka.persistence.Recovery.readResolve">Recovery</a> <a href="#akka.persistence.Recovery.readResolve" title="akka.persistence.Recovery.type" class="delimiter">{</a>

  <span class="comment">/**
   * Java API
   * @see [[Recovery]]
   */</span>
  def <a title="()akka.persistence.Recovery" id="akka.persistence.Recovery.create(98fe10b89b)">create</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.persistence;Recovery" title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery">Recovery</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API
   * @see [[Recovery]]
   */</span>
  def <a title="(toSequenceNr: Long)akka.persistence.Recovery" id="akka.persistence.Recovery.create(e10c27fcc8)">create</a><span class="delimiter">(</span><a title="Long" id="akka.persistence.Recovery.create(e10c27fcc8).toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
    <a href="#akka.persistence.Recovery.<init>$default$1" title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.create(e10c27fcc8).x$3">Recovery</a><span class="delimiter">(</span>toSequenceNr = <a href="#akka.persistence.Recovery.create(e10c27fcc8).toSequenceNr" title="Long" id="akka.persistence.Recovery.create(e10c27fcc8).x$1">toSequenceNr</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API
   * @see [[Recovery]]
   */</span>
  def <a title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria)akka.persistence.Recovery" id="akka.persistence.Recovery.create(70d526b5ba)">create</a><span class="delimiter">(</span><a title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.create(70d526b5ba).fromSnapshot">fromSnapshot</a>: <a href="SnapshotProtocol.scala.html#akka.persistence;SnapshotSelectionCriteria" title="akka.persistence.SnapshotSelectionCriteria">SnapshotSelectionCriteria</a><span class="delimiter">)</span> =
    <a href="#akka.persistence;Recovery" title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery">Recovery</a><span class="delimiter">(</span>fromSnapshot = <a href="#akka.persistence.Recovery.create(70d526b5ba).fromSnapshot" title="akka.persistence.SnapshotSelectionCriteria">fromSnapshot</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API
   * @see [[Recovery]]
   */</span>
  def <a title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long)akka.persistence.Recovery" id="akka.persistence.Recovery.create(35a836bf38)">create</a><span class="delimiter">(</span><a title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.create(35a836bf38).fromSnapshot">fromSnapshot</a>: <a href="SnapshotProtocol.scala.html#akka.persistence;SnapshotSelectionCriteria" title="akka.persistence.SnapshotSelectionCriteria">SnapshotSelectionCriteria</a>, <a title="Long" id="akka.persistence.Recovery.create(35a836bf38).toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
    <a href="#akka.persistence;Recovery" title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery">Recovery</a><span class="delimiter">(</span><a href="#akka.persistence.Recovery.create(35a836bf38).fromSnapshot" title="akka.persistence.SnapshotSelectionCriteria">fromSnapshot</a>, <a href="#akka.persistence.Recovery.create(35a836bf38).toSequenceNr" title="Long">toSequenceNr</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API
   * @see [[Recovery]]
   */</span>
  def <a title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery" id="akka.persistence.Recovery.create(089efe6a2a)">create</a><span class="delimiter">(</span><a title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.create(089efe6a2a).fromSnapshot">fromSnapshot</a>: <a href="SnapshotProtocol.scala.html#akka.persistence;SnapshotSelectionCriteria" title="akka.persistence.SnapshotSelectionCriteria">SnapshotSelectionCriteria</a>, <a title="Long" id="akka.persistence.Recovery.create(089efe6a2a).toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span>, <a title="Long" id="akka.persistence.Recovery.create(089efe6a2a).replayMax">replayMax</a>: <span title="Long">Long</span><span class="delimiter">)</span> =
    <a href="#akka.persistence;Recovery" title="(fromSnapshot: akka.persistence.SnapshotSelectionCriteria, toSequenceNr: Long, replayMax: Long)akka.persistence.Recovery">Recovery</a><span class="delimiter">(</span><a href="#akka.persistence.Recovery.create(089efe6a2a).fromSnapshot" title="akka.persistence.SnapshotSelectionCriteria">fromSnapshot</a>, <a href="#akka.persistence.Recovery.create(089efe6a2a).toSequenceNr" title="Long">toSequenceNr</a>, <a href="#akka.persistence.Recovery.create(089efe6a2a).replayMax" title="Long">replayMax</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Convenience method for skipping recovery in [[PersistentActor]].
   * @see [[Recovery]]
   */</span>
  val <a title="akka.persistence.Recovery" id="akka.persistence.Recovery.none">none</a>: <a href="#akka.persistence;Recovery" title="akka.persistence.Recovery">Recovery</a> = <a href="#akka.persistence.Recovery.<init>$default$1" title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence.Recovery.none.x$6">Recovery</a><span class="delimiter">(</span>toSequenceNr = <a title="Long" id="akka.persistence.Recovery.none.x$4" class="long">0L</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * An persistent Actor - can be used to implement command or event sourcing.
 */</span>
trait <a title="trait PersistentActor extends AnyRef with akka.persistence.Eventsourced with akka.persistence.PersistenceIdentity" id="akka.persistence;PersistentActor">PersistentActor</a> extends <a href="Eventsourced.scala.html#akka.persistence;Eventsourced" title="akka.persistence.Eventsourced">Eventsourced</a> with <a href="Persistence.scala.html#akka.persistence;PersistenceIdentity" title="akka.persistence.PersistenceIdentity">PersistenceIdentity</a> <span class="delimiter">{</span>
  def <a title="=&gt; PersistentActor.this.Receive" id="akka.persistence;PersistentActor.receive">receive</a> = <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.receiveCommand" title="=&gt; PersistentActor.this.Receive">receiveCommand</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Java API: an persistent actor - can be used to implement command or event sourcing.
 */</span>
abstract class <a title="class UntypedPersistentActor extends akka.actor.UntypedActor with akka.persistence.Eventsourced with akka.persistence.PersistenceIdentity" id="akka.persistence;UntypedPersistentActor">UntypedPersistentActor</a> extends <a href="../../../actor/akka/actor/UntypedActor.scala.html#akka.actor;UntypedActor" title="akka.actor.UntypedActor">UntypedActor</a> with <a href="Eventsourced.scala.html#akka.persistence;Eventsourced" title="akka.persistence.Eventsourced">Eventsourced</a> with <a href="Persistence.scala.html#akka.persistence;PersistenceIdentity" title="akka.persistence.PersistenceIdentity">PersistenceIdentity</a> <span class="delimiter">{</span>

  final def <a title="(message: Any)Unit" id="akka.persistence;UntypedPersistentActor.onReceive">onReceive</a><span class="delimiter">(</span><a title="Any" id="akka.persistence;UntypedPersistentActor.onReceive.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.persistence;UntypedPersistentActor.onReceiveCommand" title="(msg: Any)Unit">onReceiveCommand</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.onReceive.message" title="Any">message</a><span class="delimiter">)</span>

  final def <a title="=&gt; UntypedPersistentActor.this.Receive" id="akka.persistence;UntypedPersistentActor.receiveRecover">receiveRecover</a>: <span title="UntypedPersistentActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;UntypedPersistentActor.receiveRecover;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="Any" id="akka.persistence;UntypedPersistentActor.receiveRecover;$anonfun.isDefinedAt.msg">msg</a> â‡’ <a href="#akka.persistence;UntypedPersistentActor.onReceiveRecover" title="(msg: Any)Unit">onReceiveRecover</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.receiveRecover;$anonfun.isDefinedAt.msg" title="Any">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  final def <a title="=&gt; UntypedPersistentActor.this.Receive" id="akka.persistence;UntypedPersistentActor.receiveCommand">receiveCommand</a>: <span title="UntypedPersistentActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;UntypedPersistentActor.receiveCommand;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="Any" id="akka.persistence;UntypedPersistentActor.receiveCommand;$anonfun.isDefinedAt.msg">msg</a> â‡’ <a href="#akka.persistence;UntypedPersistentActor.onReceiveCommand" title="(msg: Any)Unit">onReceiveCommand</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.receiveCommand;$anonfun.isDefinedAt.msg" title="Any">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API: asynchronously persists `event`. On successful persistence, `handler` is called with the
   * persisted event. It is guaranteed that no new commands will be received by a persistent actor
   * between a call to `persist` and the execution of its `handler`. This also holds for
   * multiple `persist` calls per received command. Internally, this is achieved by stashing new
   * commands and unstashing them when the `event` has been persisted and handled. The stash used
   * for that is an internal stash which doesn't interfere with the inherited user stash.
   *
   * An event `handler` may close over persistent actor state and modify it. The `getSender()` of a persisted
   * event is the sender of the corresponding command. This means that one can reply to a command
   * sender within an event `handler`.
   *
   * Within an event handler, applications usually update persistent actor state using persisted event
   * data, notify listeners and reply to command senders.
   *
   * If persistence of an event fails, [[#onPersistFailure]] will be invoked and the actor will
   * unconditionally be stopped. The reason that it cannot resume when persist fails is that it
   * is unknown if the even was actually persisted or not, and therefore it is in an inconsistent
   * state. Restarting on persistent failures will most likely fail anyway, since the journal
   * is probably unavailable. It is better to stop the actor and after a back-off timeout start
   * it again.
   *
   * @param event event to be persisted.
   * @param handler handler for each persisted `event`
   */</span>
  def <a title="[A](event: A, handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.persist(b578f525ca)">persist</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.persist(b578f525ca);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persist(b578f525ca).event">event</a>: <a href="#akka.persistence;UntypedPersistentActor.persist(b578f525ca);A" title="A">A</a>, <a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.persist(b578f525ca).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persist(aa368cf4a0)" title="(event: A)(handler: A =&gt; Unit)Unit">persist</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persist(b578f525ca).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persist(b578f525ca).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persist(b578f525ca).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: asynchronously persists `events` in specified order. This is equivalent to calling
   * `persist[A](event: A, handler: Procedure[A])` multiple times with the same `handler`,
   * except that `events` are persisted atomically with this method.
   *
   * @param events events to be persisted.
   * @param handler handler for each persisted `events`
   */</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.persistAll(f69be466f3)">persistAll</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.persistAll(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;UntypedPersistentActor.persistAll(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.persistAll(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAll" title="(events: scala.collection.immutable.Seq[A])(handler: A =&gt; Unit)Unit">persistAll</a><span class="delimiter">(</span><a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.<a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[A])scala.collection.immutable.Seq[A]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAll(f69be466f3).events" title="Iterable[A]">events</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persistAll(f69be466f3).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAll(f69be466f3).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;use persistAll instead&quot;</span>, <span class="string">&quot;2.4&quot;</span><span class="delimiter">)</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.persist(f69be466f3)">persist</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.persist(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;UntypedPersistentActor.persist(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.persist(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.persistence;UntypedPersistentActor.persistAll(f69be466f3)" title="(events: Iterable[A], handler: akka.japi.Procedure[A])Unit">persistAll</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persist(f69be466f3).events" title="Iterable[A]">events</a>, <a href="#akka.persistence;UntypedPersistentActor.persist(f69be466f3).handler" title="akka.japi.Procedure[A]">handler</a><span class="delimiter">)</span>

  <span class="comment">/**
   * JAVA API: asynchronously persists `event`. On successful persistence, `handler` is called with the
   * persisted event.
   *
   * Unlike `persist` the persistent actor will continue to receive incoming commands between the
   * call to `persist` and executing it's `handler`. This asynchronous, non-stashing, version of
   * of persist should be used when you favor throughput over the &quot;command-2 only processed after
   * command-1 effects' have been applied&quot; guarantee, which is provided by the plain [[persist]] method.
   *
   * An event `handler` may close over persistent actor state and modify it. The `sender` of a persisted
   * event is the sender of the corresponding command. This means that one can reply to a command
   * sender within an event `handler`.
   *
   * If persistence of an event fails, [[#onPersistFailure]] will be invoked and the actor will
   * unconditionally be stopped. The reason that it cannot resume when persist fails is that it
   * is unknown if the even was actually persisted or not, and therefore it is in an inconsistent
   * state. Restarting on persistent failures will most likely fail anyway, since the journal
   * is probably unavailable. It is better to stop the actor and after a back-off timeout start
   * it again.
   *
   * @param event event to be persisted
   * @param handler handler for each persisted `event`
   */</span>
  def <a title="[A](event: A)(handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44)">persistAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44).event">event</a>: <a href="#akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44);A" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    super<span class="delimiter">[</span>Eventsourced<span class="delimiter">]</span>.<a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAsync(aa368cf4a0)" title="(event: A)(handler: A =&gt; Unit)Unit">persistAsync</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAsync(d83eeefc44).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * JAVA API: asynchronously persists `events` in specified order. This is equivalent to calling
   * `persistAsync[A](event: A)(handler: A =&gt; Unit)` multiple times with the same `handler`,
   * except that `events` are persisted atomically with this method.
   *
   * @param events events to be persisted
   * @param handler handler for each persisted `events`
   */</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3)">persistAllAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    super<span class="delimiter">[</span>Eventsourced<span class="delimiter">]</span>.<a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAllAsync" title="(events: scala.collection.immutable.Seq[A])(handler: A =&gt; Unit)Unit">persistAllAsync</a><span class="delimiter">(</span><a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.<a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[A])scala.collection.immutable.Seq[A]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3).events" title="Iterable[A]">events</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.persistAllAsync(f69be466f3).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Defer the handler execution until all pending handlers have been executed.
   * Allows to define logic within the actor, which will respect the invocation-order-guarantee
   * in respect to `persistAsync` calls. That is, if `persistAsync` was invoked before defer,
   * the corresponding handlers will be invoked in the same order as they were registered in.
   *
   * This call will NOT result in `event` being persisted, please use `persist` or `persistAsync`,
   * if the given event should possible to replay.
   *
   * If there are no pending persist handler calls, the handler will be called immediately.
   *
   * If persistence of an earlier event fails, the persistent actor will stop, and the `handler`
   * will not be run.
   *
   * @param event event to be handled in the future, when preceding persist operations have been processes
   * @param handler handler for the given `event`
   */</span>
  def <a title="[A](event: A)(handler: akka.japi.Procedure[A])Unit" id="akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44)">deferAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44).event">event</a>: <a href="#akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44);A" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.japi.Procedure[A]" id="akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    super<span class="delimiter">[</span>Eventsourced<span class="delimiter">]</span>.<a href="Eventsourced.scala.html#akka.persistence;Eventsourced.deferAsync" title="(event: A)(handler: A =&gt; Unit)Unit">deferAsync</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;UntypedPersistentActor.deferAsync(d83eeefc44).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: recovery handler that receives persisted events during recovery. If a state snapshot
   * has been captured and saved, this handler will receive a [[SnapshotOffer]] message
   * followed by events that are younger than the offered snapshot.
   *
   * This handler must not have side-effects other than changing persistent actor state i.e. it
   * should not perform actions that may fail, such as interacting with external services,
   * for example.
   *
   * If there is a problem with recovering the state of the actor from the journal, the error
   * will be logged and the actor will be stopped.
   *
   * @see [[Recovery]]
   */</span>
  @throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>Exception<span class="delimiter">]</span><span class="delimiter">)</span>
  def <a title="(msg: Any)Unit" id="akka.persistence;UntypedPersistentActor.onReceiveRecover">onReceiveRecover</a><span class="delimiter">(</span><a title="Any" id="akka.persistence;UntypedPersistentActor.onReceiveRecover.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Java API: command handler. Typically validates commands against current state (and/or by
   * communication with other actors). On successful validation, one or more events are
   * derived from a command and these events are then persisted by calling `persist`.
   */</span>
  @throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>Exception<span class="delimiter">]</span><span class="delimiter">)</span>
  def <a title="(msg: Any)Unit" id="akka.persistence;UntypedPersistentActor.onReceiveCommand">onReceiveCommand</a><span class="delimiter">(</span><a title="Any" id="akka.persistence;UntypedPersistentActor.onReceiveCommand.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Java API: an persistent actor - can be used to implement command or event sourcing.
 */</span>
abstract class <a title="class AbstractPersistentActor extends akka.actor.AbstractActor with akka.persistence.PersistentActor with akka.persistence.Eventsourced" id="akka.persistence;AbstractPersistentActor">AbstractPersistentActor</a> extends <a href="../../../actor/akka/actor/AbstractActor.scala.html#akka.actor;AbstractActor" title="akka.actor.AbstractActor">AbstractActor</a> with <a href="#akka.persistence;PersistentActor" title="akka.persistence.PersistentActor">PersistentActor</a> with <a href="Eventsourced.scala.html#akka.persistence;Eventsourced" title="akka.persistence.Eventsourced">Eventsourced</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Java API: asynchronously persists `event`. On successful persistence, `handler` is called with the
   * persisted event. It is guaranteed that no new commands will be received by a persistent actor
   * between a call to `persist` and the execution of its `handler`. This also holds for
   * multiple `persist` calls per received command. Internally, this is achieved by stashing new
   * commands and unstashing them when the `event` has been persisted and handled. The stash used
   * for that is an internal stash which doesn't interfere with the inherited user stash.
   *
   * An event `handler` may close over persistent actor state and modify it. The `getSender()` of a persisted
   * event is the sender of the corresponding command. This means that one can reply to a command
   * sender within an event `handler`.
   *
   * Within an event handler, applications usually update persistent actor state using persisted event
   * data, notify listeners and reply to command senders.
   *
   * If persistence of an event fails, [[#onPersistFailure]] will be invoked and the actor will
   * unconditionally be stopped. The reason that it cannot resume when persist fails is that it
   * is unknown if the even was actually persisted or not, and therefore it is in an inconsistent
   * state. Restarting on persistent failures will most likely fail anyway, since the journal
   * is probably unavailable. It is better to stop the actor and after a back-off timeout start
   * it again.
   *
   * @param event event to be persisted.
   * @param handler handler for each persisted `event`
   */</span>
  def <a title="[A](event: A, handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persist(b578f525ca)">persist</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persist(b578f525ca);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persist(b578f525ca).event">event</a>: <a href="#akka.persistence;AbstractPersistentActor.persist(b578f525ca);A" title="A">A</a>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persist(b578f525ca).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persist(aa368cf4a0)" title="(event: A)(handler: A =&gt; Unit)Unit">persist</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persist(b578f525ca).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persist(b578f525ca).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persist(b578f525ca).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: asynchronously persists `events` in specified order. This is equivalent to calling
   * `persist[A](event: A, handler: Procedure[A])` multiple times with the same `handler`,
   * except that `events` are persisted atomically with this method.
   *
   * @param events events to be persisted.
   * @param handler handler for each persisted `events`
   */</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persistAll(f69be466f3)">persistAll</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persistAll(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;AbstractPersistentActor.persistAll(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persistAll(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAll" title="(events: scala.collection.immutable.Seq[A])(handler: A =&gt; Unit)Unit">persistAll</a><span class="delimiter">(</span><a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.<a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[A])scala.collection.immutable.Seq[A]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAll(f69be466f3).events" title="Iterable[A]">events</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persistAll(f69be466f3).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAll(f69be466f3).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;use persistAll instead&quot;</span>, <span class="string">&quot;2.4&quot;</span><span class="delimiter">)</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persist(f69be466f3)">persist</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persist(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;AbstractPersistentActor.persist(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persist(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.persistence;AbstractPersistentActor.persistAll(f69be466f3)" title="(events: Iterable[A], handler: akka.japi.Procedure[A])Unit">persistAll</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persist(f69be466f3).events" title="Iterable[A]">events</a>, <a href="#akka.persistence;AbstractPersistentActor.persist(f69be466f3).handler" title="akka.japi.Procedure[A]">handler</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: asynchronously persists `event`. On successful persistence, `handler` is called with the
   * persisted event.
   *
   * Unlike `persist` the persistent actor will continue to receive incoming commands between the
   * call to `persistAsync` and executing it's `handler`. This asynchronous, non-stashing, version of
   * of persist should be used when you favor throughput over the strict ordering guarantees that `persist` guarantees.
   *
   * If persistence of an event fails, [[#onPersistFailure]] will be invoked and the actor will
   * unconditionally be stopped. The reason that it cannot resume when persist fails is that it
   * is unknown if the even was actually persisted or not, and therefore it is in an inconsistent
   * state. Restarting on persistent failures will most likely fail anyway, since the journal
   * is probably unavailable. It is better to stop the actor and after a back-off timeout start
   * it again.
   *
   * @param event event to be persisted
   * @param handler handler for each persisted `event`
   */</span>
  def <a title="[A](event: A, handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca)">persistAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca).event">event</a>: <a href="#akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca);A" title="A">A</a>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAsync(aa368cf4a0)" title="(event: A)(handler: A =&gt; Unit)Unit">persistAsync</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAsync(b578f525ca).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: asynchronously persists `events` in specified order. This is equivalent to calling
   * `persistAsync[A](event: A)(handler: A =&gt; Unit)` multiple times with the same `handler`,
   * except that `events` are persisted atomically with this method.
   *
   * @param events events to be persisted
   * @param handler handler for each persisted `events`
   */</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3)">persistAllAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="Eventsourced.scala.html#akka.persistence;Eventsourced.persistAllAsync" title="(events: scala.collection.immutable.Seq[A])(handler: A =&gt; Unit)Unit">persistAllAsync</a><span class="delimiter">(</span><a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.<a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[A])scala.collection.immutable.Seq[A]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3).events" title="Iterable[A]">events</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;use persistAllAsync instead&quot;</span>, <span class="string">&quot;2.4&quot;</span><span class="delimiter">)</span>
  def <a title="[A](events: Iterable[A], handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3)">persistAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3).events">events</a>: <span title="Iterable[A]">JIterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.persistence;AbstractPersistentActor.persistAllAsync(f69be466f3)" title="(events: Iterable[A], handler: akka.japi.Procedure[A])Unit">persistAllAsync</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3).events" title="Iterable[A]">events</a>, <a href="#akka.persistence;AbstractPersistentActor.persistAsync(f69be466f3).handler" title="akka.japi.Procedure[A]">handler</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Defer the handler execution until all pending handlers have been executed.
   * Allows to define logic within the actor, which will respect the invocation-order-guarantee
   * in respect to `persistAsync` calls. That is, if `persistAsync` was invoked before defer,
   * the corresponding handlers will be invoked in the same order as they were registered in.
   *
   * This call will NOT result in `event` being persisted, please use `persist` or `persistAsync`,
   * if the given event should possible to replay.
   *
   * If there are no pending persist handler calls, the handler will be called immediately.
   *
   * If persistence of an earlier event fails, the persistent actor will stop, and the `handler`
   * will not be run.
   *
   * @param event event to be handled in the future, when preceding persist operations have been processes
   * @param handler handler for the given `event`
   */</span>
  def <a title="[A](event: A)(handler: akka.japi.Procedure[A])Unit" id="akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44)">deferAsync</a><span class="delimiter">[</span><a title="" id="akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44).event">event</a>: <a href="#akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44);A" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.japi.Procedure[A]" id="akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44).handler">handler</a>: <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[A]">Procedure</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    super.<a href="Eventsourced.scala.html#akka.persistence;Eventsourced.deferAsync" title="(event: A)(handler: A =&gt; Unit)Unit">deferAsync</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44).event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44).$anonfun.event">event</a> â‡’ <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: A)Unit">handler</a><span class="delimiter">(</span><a href="#akka.persistence;AbstractPersistentActor.deferAsync(d83eeefc44).$anonfun.event" title="A">event</a><span class="delimiter">)</span><span class="delimiter">)</span>

  override def <a title="=&gt; AbstractPersistentActor.this.Receive" id="akka.persistence;AbstractPersistentActor.receive(79972a53c4)">receive</a> = super<span class="delimiter">[</span>PersistentActor<span class="delimiter">]</span>.<a href="#akka.persistence;PersistentActor.receive" title="=&gt; AbstractPersistentActor.this.Receive">receive</a>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>
