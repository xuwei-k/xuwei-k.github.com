<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>persistence/akka/persistence/serialization/MessageSerializer.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.persistence.serialization

import akka.actor.<span class="delimiter">{</span> ActorPath, ExtendedActorSystem <span class="delimiter">}</span>
import akka.persistence.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery" title="akka.persistence.AtLeastOnceDelivery.type">AtLeastOnceDelivery</a>._
import akka.persistence._
import akka.persistence.fsm.<a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM" title="akka.persistence.fsm.PersistentFSM.type">PersistentFSM</a>.StateChangeEvent
import akka.persistence.serialization.<span class="delimiter">{</span> MessageFormats ⇒ mf <span class="delimiter">}</span>
import akka.serialization._
import com.google.protobuf._
import scala.collection.immutable.VectorBuilder
import scala.concurrent.duration
import akka.actor.Actor
import scala.concurrent.duration.Duration
import scala.<span title="language.type">language</span>.existentials

<span class="comment">/**
 * Marker trait for all protobuf-serializable messages in `akka.persistence`.
 */</span>
trait <a title="trait Message extends AnyRef with Serializable" id="akka.persistence.serialization;Message">Message</a> extends <span title="Serializable">Serializable</span>

<span class="comment">/**
 * Protobuf serializer for [[akka.persistence.PersistentRepr]], [[akka.persistence.AtLeastOnceDelivery]] and [[akka.persistence.fsm.PersistentFSM.StateChangeEvent]] messages.
 */</span>
class <a title="class MessageSerializer extends AnyRef with akka.serialization.BaseSerializer" id="akka.persistence.serialization;MessageSerializer">MessageSerializer</a><a href="#akka.persistence.serialization;MessageSerializer" title="akka.persistence.serialization.MessageSerializer" class="delimiter">(</a>val <a title="akka.actor.ExtendedActorSystem" id="akka.persistence.serialization;MessageSerializer.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;BaseSerializer" title="akka.serialization.BaseSerializer">BaseSerializer</a> <span class="delimiter">{</span>
  import <a href="../Persistent.scala.html#akka.persistence.PersistentRepr" title="akka.persistence.PersistentRepr.type">PersistentRepr</a>.Undefined

  val <a title="Class[akka.persistence.AtomicWrite]" id="akka.persistence.serialization;MessageSerializer.AtomicWriteClass">AtomicWriteClass</a> = classOf<span title="Class[akka.persistence.AtomicWrite](classOf[akka.persistence.AtomicWrite])" class="delimiter">[</span>AtomicWrite<span class="delimiter">]</span>
  val <a title="Class[akka.persistence.PersistentRepr]" id="akka.persistence.serialization;MessageSerializer.PersistentReprClass">PersistentReprClass</a> = classOf<span title="Class[akka.persistence.PersistentRepr](classOf[akka.persistence.PersistentRepr])" class="delimiter">[</span>PersistentRepr<span class="delimiter">]</span>
  val <a title="Class[akka.persistence.PersistentImpl]" id="akka.persistence.serialization;MessageSerializer.PersistentImplClass">PersistentImplClass</a> = classOf<span title="Class[akka.persistence.PersistentImpl](classOf[akka.persistence.PersistentImpl])" class="delimiter">[</span>PersistentImpl<span class="delimiter">]</span>
  val <a title="Class[akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot]" id="akka.persistence.serialization;MessageSerializer.AtLeastOnceDeliverySnapshotClass">AtLeastOnceDeliverySnapshotClass</a> = classOf<span title="Class[akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot](classOf[akka.persistence.AtLeastOnceDelivery$$AtLeastOnceDeliverySnapshot])" class="delimiter">[</span>AtLeastOnceDeliverySnapshot<span class="delimiter">]</span>
  val <a title="Class[akka.persistence.fsm.PersistentFSM.StateChangeEvent]" id="akka.persistence.serialization;MessageSerializer.PersistentStateChangeEventClass">PersistentStateChangeEventClass</a> = classOf<span title="Class[akka.persistence.fsm.PersistentFSM.StateChangeEvent](classOf[akka.persistence.fsm.PersistentFSM$$StateChangeEvent])" class="delimiter">[</span>StateChangeEvent<span class="delimiter">]</span>

  private lazy val <a title="akka.serialization.Serialization" id="akka.persistence.serialization;MessageSerializer.serialization">serialization</a> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.serialization.Serialization">SerializationExtension</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>

  override val <a title="Boolean" id="akka.persistence.serialization;MessageSerializer.includeManifest">includeManifest</a>: <span title="Boolean">Boolean</span> = true

  private lazy val <a title="Option[akka.serialization.Serialization.Information]" id="akka.persistence.serialization;MessageSerializer.transportInformation">transportInformation</a>: <span title="Option[akka.serialization.Serialization.Information]">Option</span><span class="delimiter">[</span>Serialization.Information<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="akka.actor.Address" id="akka.persistence.serialization;MessageSerializer.transportInformation.address">address</a> = <a href="#akka.persistence.serialization;MessageSerializer.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.getDefaultAddress" title="=&gt; akka.actor.Address">getDefaultAddress</a>
    if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.transportInformation.address" title="akka.actor.Address">address</a>.<a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address.hasLocalScope" title="=&gt; Boolean">hasLocalScope</a><span class="delimiter">)</span> <span title="None.type">None</span>
    else <span title="(x: akka.serialization.Serialization.Information)Some[akka.serialization.Serialization.Information]">Some</span><span class="delimiter">(</span><a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization;Information" title="(address: akka.actor.Address, system: akka.actor.ActorSystem)akka.serialization.Serialization.Information">Information</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.transportInformation.address" title="akka.actor.Address">address</a>, <a href="#akka.persistence.serialization;MessageSerializer.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Serializes persistent messages. Delegates serialization of a persistent
   * message's payload to a matching `akka.serialization.Serializer`.
   */</span>
  def <a title="(o: AnyRef)Array[Byte]" id="akka.persistence.serialization;MessageSerializer.toBinary">toBinary</a><span class="delimiter">(</span><a title="AnyRef" id="akka.persistence.serialization;MessageSerializer.toBinary.o">o</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#akka.persistence.serialization;MessageSerializer.toBinary.o" title="AnyRef">o</a> match <span class="delimiter">{</span>
    case <a title="akka.persistence.PersistentRepr" id="akka.persistence.serialization;MessageSerializer.toBinary.p">p</a>: <a href="../Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a>              ⇒ <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder" title="(persistent: akka.persistence.PersistentRepr)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">persistentMessageBuilder</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.toBinary.p" title="akka.persistence.PersistentRepr">p</a><span class="delimiter">)</span>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.build" title="()akka.persistence.serialization.MessageFormats.PersistentMessage">build</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()Array[Byte]">toByteArray</span>
    case <span title="akka.persistence.AtomicWrite">a</span>: <a href="../Persistent.scala.html#akka.persistence;AtomicWrite" title="akka.persistence.AtomicWrite">AtomicWrite</a>                 ⇒ <a href="#akka.persistence.serialization;MessageSerializer.atomicWriteBuilder" title="(a: akka.persistence.AtomicWrite)akka.persistence.serialization.MessageFormats.AtomicWrite.Builder">atomicWriteBuilder</a><span class="delimiter">(</span><span title="akka.persistence.AtomicWrite">a</span><span class="delimiter">)</span>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite;Builder.build" title="()akka.persistence.serialization.MessageFormats.AtomicWrite">build</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()Array[Byte]">toByteArray</span>
    case <span title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">a</span>: <a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot" title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">AtLeastOnceDeliverySnapshot</a> ⇒ <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder" title="(snap: akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">atLeastOnceDeliverySnapshotBuilder</a><span class="delimiter">(</span><span title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">a</span><span class="delimiter">)</span>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;Builder.build" title="()akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot">build</a>.<span title="()Array[Byte]">toByteArray</span>
    case <a title="akka.persistence.fsm.PersistentFSM.StateChangeEvent" id="akka.persistence.serialization;MessageSerializer.toBinary.s">s</a>: <a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">StateChangeEvent</a>            ⇒ <a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder" title="(stateChange: akka.persistence.fsm.PersistentFSM.StateChangeEvent)akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">stateChangeBuilder</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.toBinary.s" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">s</a><span class="delimiter">)</span>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent;Builder.build" title="()akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">build</a>.<span title="()Array[Byte]">toByteArray</span>
    case _                              ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Can\'t serialize object of type &quot;)">Can't serialize object of type $</span><span class="delimiter">{</span><a href="#akka.persistence.serialization;MessageSerializer.toBinary.o" title="AnyRef">o</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Deserializes persistent messages. Delegates deserialization of a persistent
   * message's payload to a matching `akka.serialization.Serializer`.
   */</span>
  def <a title="(bytes: Array[Byte], manifest: Option[Class[_]])akka.persistence.serialization.Message" id="akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f)">fromBinary</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Class[_]]" id="akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).manifest">manifest</a>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.persistence.serialization;Message" title="akka.persistence.serialization.Message">Message</a> = <a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).manifest" title="Option[Class[_]]">manifest</a> match <span class="delimiter">{</span>
    case <span title="None.type">None</span> ⇒ <a href="#akka.persistence.serialization;MessageSerializer.persistent" title="(persistentMessage: akka.persistence.serialization.MessageFormats.PersistentMessage)akka.persistence.PersistentRepr">persistent</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage.type">PersistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage.parseFrom(d60dfcbfdd)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.PersistentMessage">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
    case Some<span class="delimiter">(</span><a title="Class[_]" id="akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).c">c</a><span class="delimiter">)</span> ⇒ <a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).c" title="Class[_]">c</a> match <span class="delimiter">{</span>
      case <a href="#akka.persistence.serialization;MessageSerializer.PersistentImplClass" title="=&gt; Class[akka.persistence.PersistentImpl]">PersistentImplClass</a>              ⇒ <a href="#akka.persistence.serialization;MessageSerializer.persistent" title="(persistentMessage: akka.persistence.serialization.MessageFormats.PersistentMessage)akka.persistence.PersistentRepr">persistent</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage.type">PersistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage.parseFrom(d60dfcbfdd)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.PersistentMessage">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case <a href="#akka.persistence.serialization;MessageSerializer.PersistentReprClass" title="=&gt; Class[akka.persistence.PersistentRepr]">PersistentReprClass</a>              ⇒ <a href="#akka.persistence.serialization;MessageSerializer.persistent" title="(persistentMessage: akka.persistence.serialization.MessageFormats.PersistentMessage)akka.persistence.PersistentRepr">persistent</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage.type">PersistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage.parseFrom(d60dfcbfdd)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.PersistentMessage">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case <a href="#akka.persistence.serialization;MessageSerializer.AtomicWriteClass" title="=&gt; Class[akka.persistence.AtomicWrite]">AtomicWriteClass</a>                 ⇒ <a href="#akka.persistence.serialization;MessageSerializer.atomicWrite" title="(atomicWrite: akka.persistence.serialization.MessageFormats.AtomicWrite)akka.persistence.AtomicWrite">atomicWrite</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite" title="akka.persistence.serialization.MessageFormats.AtomicWrite.type">AtomicWrite</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite.parseFrom(360a987696)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.AtomicWrite">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case <a href="#akka.persistence.serialization;MessageSerializer.AtLeastOnceDeliverySnapshotClass" title="=&gt; Class[akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot]">AtLeastOnceDeliverySnapshotClass</a> ⇒ <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot" title="(atLeastOnceDeliverySnapshot: akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot)akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">atLeastOnceDeliverySnapshot</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.type">AtLeastOnceDeliverySnapshot</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.parseFrom(ae29eae71b)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case <a href="#akka.persistence.serialization;MessageSerializer.PersistentStateChangeEventClass" title="=&gt; Class[akka.persistence.fsm.PersistentFSM.StateChangeEvent]">PersistentStateChangeEventClass</a>  ⇒ <a href="#akka.persistence.serialization;MessageSerializer.stateChange" title="(persistentStateChange: akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent)akka.persistence.fsm.PersistentFSM.StateChangeEvent">stateChange</a><span class="delimiter">(</span><a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.type">PersistentStateChangeEvent</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.parseFrom(16a7cfdc6f)" title="(data: Array[Byte])akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">parseFrom</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case _                                ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Can\'t deserialize object of type &quot;)">Can't deserialize object of type $</span><span class="delimiter">{</span><a href="#akka.persistence.serialization;MessageSerializer.fromBinary(ab885c0a9f).c" title="Class[_]">c</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">//</span>
  <span class="comment">// toBinary helpers</span>
  <span class="comment">//</span>

  def <a title="(snap: akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder">atLeastOnceDeliverySnapshotBuilder</a><span class="delimiter">(</span><a title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.snap">snap</a>: <a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot" title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">AtLeastOnceDeliverySnapshot</a><span class="delimiter">)</span>: mf.AtLeastOnceDeliverySnapshot.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;Builder" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">Builder</a> = <span class="delimiter">{</span>
    val <a title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.builder">builder</a> = <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.type">AtLeastOnceDeliverySnapshot</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.newBuilder(48a8e71ffd)" title="()akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">newBuilder</a>
    <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.builder" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;Builder.setCurrentDeliveryId" title="(value: Long)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">setCurrentDeliveryId</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.snap" title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">snap</a>.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot.currentDeliveryId" title="=&gt; Long">currentDeliveryId</a><span class="delimiter">)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.snap" title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">snap</a>.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot.unconfirmedDeliveries" title="=&gt; scala.collection.immutable.Seq[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]">unconfirmedDeliveries</a>.<span title="(f: akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery =&gt; akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmed">unconfirmed</a> ⇒
      val <a title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmedBuilder">unconfirmedBuilder</a> =
        <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.type">AtLeastOnceDeliverySnapshot</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.type">UnconfirmedDelivery</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.newBuilder(36fbe07975)" title="()akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder">newBuilder</a>.
          <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery;Builder.setDeliveryId" title="(value: Long)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder">setDeliveryId</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmed" title="akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery">unconfirmed</a>.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;UnconfirmedDelivery.deliveryId" title="=&gt; Long">deliveryId</a><span class="delimiter">)</span>.
          <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery;Builder.setDestination" title="(value: String)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder">setDestination</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmed" title="akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery">unconfirmed</a>.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;UnconfirmedDelivery.destination" title="=&gt; akka.actor.ActorPath">destination</a>.<span title="()String">toString</span><span class="delimiter">)</span>.
          <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery;Builder.setPayload(95fa549459)" title="(builderForValue: akka.persistence.serialization.MessageFormats.PersistentPayload.Builder)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder">setPayload</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder" title="(payload: AnyRef)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">persistentPayloadBuilder</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmed" title="akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery">unconfirmed</a>.<a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;UnconfirmedDelivery.message" title="=&gt; Any">message</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.builder" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;Builder.addUnconfirmedDeliveries(bef1235b9b)" title="(builderForValue: akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder)akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">addUnconfirmedDeliveries</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.$anonfun.unconfirmedBuilder" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery.Builder">unconfirmedBuilder</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshotBuilder.builder" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.Builder">builder</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>persistence<span class="delimiter">]</span> def <a title="(stateChange: akka.persistence.fsm.PersistentFSM.StateChangeEvent)akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder" id="akka.persistence.serialization;MessageSerializer.stateChangeBuilder">stateChangeBuilder</a><span class="delimiter">(</span><a title="akka.persistence.fsm.PersistentFSM.StateChangeEvent" id="akka.persistence.serialization;MessageSerializer.stateChangeBuilder.stateChange">stateChange</a>: <a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">StateChangeEvent</a><span class="delimiter">)</span>: mf.PersistentStateChangeEvent.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent;Builder" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">Builder</a> = <span class="delimiter">{</span>
    val <a title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder" id="akka.persistence.serialization;MessageSerializer.stateChangeBuilder.builder">builder</a> = <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.type">PersistentStateChangeEvent</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.newBuilder(6ad90485f2)" title="()akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">newBuilder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent;Builder.setStateIdentifier" title="(value: String)akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">setStateIdentifier</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder.stateChange" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">stateChange</a>.<a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent.stateIdentifier" title="=&gt; String">stateIdentifier</a><span class="delimiter">)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder.stateChange" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">stateChange</a>.<a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent.timeout" title="=&gt; Option[scala.concurrent.duration.FiniteDuration]">timeout</a> match <span class="delimiter">{</span>
      case <span title="None.type">None</span>          ⇒ <a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">builder</a>
      case Some<span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence.serialization;MessageSerializer.stateChangeBuilder.timeout">timeout</a><span class="delimiter">)</span> ⇒ <a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent;Builder.setTimeout" title="(value: String)akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent.Builder">setTimeout</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.stateChangeBuilder.timeout" title="scala.concurrent.duration.FiniteDuration">timeout</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(atLeastOnceDeliverySnapshot: akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot)akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot">atLeastOnceDeliverySnapshot</a><span class="delimiter">(</span><a title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.atLeastOnceDeliverySnapshot">atLeastOnceDeliverySnapshot</a>: mf.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;AtLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot">AtLeastOnceDeliverySnapshot</a><span class="delimiter">)</span>: <a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot" title="akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">AtLeastOnceDeliverySnapshot</a> = <span class="delimiter">{</span>
    import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    val <a title="scala.collection.immutable.VectorBuilder[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.unconfirmedDeliveries">unconfirmedDeliveries</a> = new <span title="scala.collection.immutable.VectorBuilder[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]">VectorBuilder</span><span class="delimiter">[</span>UnconfirmedDelivery<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.atLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot">atLeastOnceDeliverySnapshot</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;AtLeastOnceDeliverySnapshot.getUnconfirmedDeliveriesList" title="()java.util.List[akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery]">getUnconfirmedDeliveriesList</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.util.Iterator[akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery]">iterator</span><span title="(i: java.util.Iterator[akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery])scala.collection.convert.Decorators.AsScala[Iterator[akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery]]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Iterator[akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery]">asScala</span> <span title="(f: akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery =&gt; scala.collection.immutable.VectorBuilder[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery])Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery" id="akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.$anonfun.next">next</a> ⇒
      <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.unconfirmedDeliveries" title="scala.collection.immutable.VectorBuilder[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]">unconfirmedDeliveries</a> <span title="(elem: akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery)unconfirmedDeliveries.type">+=</span> <a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;UnconfirmedDelivery" title="(deliveryId: Long, destination: akka.actor.ActorPath, message: Any)akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery">UnconfirmedDelivery</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.$anonfun.next" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery">next</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;UnconfirmedDelivery.getDeliveryId" title="()Long">getDeliveryId</a>, <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor.ActorPath" title="akka.actor.ActorPath.type">ActorPath</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor.ActorPath.fromString" title="(s: String)akka.actor.ActorPath">fromString</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.$anonfun.next" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery">next</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;UnconfirmedDelivery.getDestination" title="()String">getDestination</a><span class="delimiter">)</span>,
        <a href="#akka.persistence.serialization;MessageSerializer.payload" title="(persistentPayload: akka.persistence.serialization.MessageFormats.PersistentPayload)Any">payload</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.$anonfun.next" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot.UnconfirmedDelivery">next</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot;UnconfirmedDelivery.getPayload" title="()akka.persistence.serialization.MessageFormats.PersistentPayload">getPayload</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="../AtLeastOnceDelivery.scala.html#akka.persistence.AtLeastOnceDelivery;AtLeastOnceDeliverySnapshot" title="(currentDeliveryId: Long, unconfirmedDeliveries: scala.collection.immutable.Seq[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery])akka.persistence.AtLeastOnceDelivery.AtLeastOnceDeliverySnapshot">AtLeastOnceDeliverySnapshot</a><span class="delimiter">(</span>
      <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.atLeastOnceDeliverySnapshot" title="akka.persistence.serialization.MessageFormats.AtLeastOnceDeliverySnapshot">atLeastOnceDeliverySnapshot</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;AtLeastOnceDeliverySnapshot.getCurrentDeliveryId" title="()Long">getCurrentDeliveryId</a>,
      <a href="#akka.persistence.serialization;MessageSerializer.atLeastOnceDeliverySnapshot.unconfirmedDeliveries" title="scala.collection.immutable.VectorBuilder[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]">unconfirmedDeliveries</a>.<span title="()scala.collection.immutable.Vector[akka.persistence.AtLeastOnceDelivery.UnconfirmedDelivery]">result</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(persistentStateChange: akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent)akka.persistence.fsm.PersistentFSM.StateChangeEvent" id="akka.persistence.serialization;MessageSerializer.stateChange">stateChange</a><span class="delimiter">(</span><a title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent" id="akka.persistence.serialization;MessageSerializer.stateChange.persistentStateChange">persistentStateChange</a>: mf.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentStateChangeEvent" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">PersistentStateChangeEvent</a><span class="delimiter">)</span>: <a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent" title="akka.persistence.fsm.PersistentFSM.StateChangeEvent">StateChangeEvent</a> = <span class="delimiter">{</span>
    <a href="../fsm/PersistentFSM.scala.html#akka.persistence.fsm.PersistentFSM;StateChangeEvent" title="(stateIdentifier: String, timeout: Option[scala.concurrent.duration.FiniteDuration])akka.persistence.fsm.PersistentFSM.StateChangeEvent">StateChangeEvent</a><span class="delimiter">(</span>
      <a href="#akka.persistence.serialization;MessageSerializer.stateChange.persistentStateChange" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">persistentStateChange</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentStateChangeEvent.getStateIdentifier" title="()String">getStateIdentifier</a>,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.stateChange.persistentStateChange" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">persistentStateChange</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentStateChangeEvent.hasTimeout" title="()Boolean">hasTimeout</a><span class="delimiter">)</span> <span title="(x: scala.concurrent.duration.FiniteDuration)Some[scala.concurrent.duration.FiniteDuration]">Some</span><span class="delimiter">(</span><span title="(s: String)scala.concurrent.duration.Duration">Duration</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.stateChange.persistentStateChange" title="akka.persistence.serialization.MessageFormats.PersistentStateChangeEvent">persistentStateChange</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentStateChangeEvent.getTimeout" title="()String">getTimeout</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.concurrent.duration.FiniteDuration" class="delimiter">[</span>duration.<span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">]</span><span class="delimiter">)</span> else <span title="None.type">None</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(a: akka.persistence.AtomicWrite)akka.persistence.serialization.MessageFormats.AtomicWrite.Builder" id="akka.persistence.serialization;MessageSerializer.atomicWriteBuilder">atomicWriteBuilder</a><span class="delimiter">(</span><a title="akka.persistence.AtomicWrite" id="akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.a">a</a>: <a href="../Persistent.scala.html#akka.persistence;AtomicWrite" title="akka.persistence.AtomicWrite">AtomicWrite</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="akka.persistence.serialization.MessageFormats.AtomicWrite.Builder" id="akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.builder">builder</a> = <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite" title="akka.persistence.serialization.MessageFormats.AtomicWrite.type">AtomicWrite</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite.newBuilder(b5cbcca7f0)" title="()akka.persistence.serialization.MessageFormats.AtomicWrite.Builder">newBuilder</a>
    <a href="#akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.a" title="akka.persistence.AtomicWrite">a</a>.<a href="../Persistent.scala.html#akka.persistence;AtomicWrite.payload" title="=&gt; scala.collection.immutable.Seq[akka.persistence.PersistentRepr]">payload</a>.<span title="(f: akka.persistence.PersistentRepr =&gt; akka.persistence.serialization.MessageFormats.AtomicWrite.Builder)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.persistence.PersistentRepr" id="akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.$anonfun.p">p</a> ⇒
      <a href="#akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.builder" title="akka.persistence.serialization.MessageFormats.AtomicWrite.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.AtomicWrite;Builder.addPayload(da2f3b95f4)" title="(builderForValue: akka.persistence.serialization.MessageFormats.PersistentMessage.Builder)akka.persistence.serialization.MessageFormats.AtomicWrite.Builder">addPayload</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder" title="(persistent: akka.persistence.PersistentRepr)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">persistentMessageBuilder</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.$anonfun.p" title="akka.persistence.PersistentRepr">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.persistence.serialization;MessageSerializer.atomicWriteBuilder.builder" title="akka.persistence.serialization.MessageFormats.AtomicWrite.Builder">builder</a>
  <span class="delimiter">}</span>

  private def <a title="(persistent: akka.persistence.PersistentRepr)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder" id="akka.persistence.serialization;MessageSerializer.persistentMessageBuilder">persistentMessageBuilder</a><span class="delimiter">(</span><a title="akka.persistence.PersistentRepr" id="akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent">persistent</a>: <a href="../Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder" id="akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder">builder</a> = <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage.type">PersistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage.newBuilder(2bd2a7900a)" title="()akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">newBuilder</a>

    if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.persistenceId" title="=&gt; String">persistenceId</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.setPersistenceId" title="(value: String)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">setPersistenceId</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.persistenceId" title="=&gt; String">persistenceId</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.sender" title="=&gt; akka.actor.ActorRef">sender</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Actor" title="akka.actor.Actor.type">Actor</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Actor.noSender" title="=&gt; akka.actor.ActorRef">noSender</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.setSender" title="(value: String)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">setSender</a><span class="delimiter">(</span><a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization.serializedActorPath" title="(actorRef: akka.actor.ActorRef)String">serializedActorPath</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.setPayload(f50777dcbd)" title="(builderForValue: akka.persistence.serialization.MessageFormats.PersistentPayload.Builder)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">setPayload</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder" title="(payload: AnyRef)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">persistentPayloadBuilder</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.payload" title="=&gt; Any">payload</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.setSequenceNr" title="(value: Long)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">setSequenceNr</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.sequenceNr" title="=&gt; Long">sequenceNr</a><span class="delimiter">)</span>
    <span class="comment">// deleted is not used in new records from 2.4</span>
    if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.writerUuid" title="=&gt; String">writerUuid</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentMessage;Builder.setWriterUuid" title="(value: String)akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">setWriterUuid</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="../Persistent.scala.html#akka.persistence;PersistentRepr.writerUuid" title="=&gt; String">writerUuid</a><span class="delimiter">)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.persistentMessageBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentMessage.Builder">builder</a>
  <span class="delimiter">}</span>

  private def <a title="(payload: AnyRef)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder">persistentPayloadBuilder</a><span class="delimiter">(</span><a title="AnyRef" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payload">payload</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    def <a title="()akka.persistence.serialization.MessageFormats.PersistentPayload.Builder" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder">payloadBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="akka.serialization.Serializer" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.serializer">serializer</a> = <a href="#akka.persistence.serialization;MessageSerializer.serialization" title="=&gt; akka.serialization.Serialization">serialization</a>.<a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization.findSerializerFor" title="(o: AnyRef)akka.serialization.Serializer">findSerializerFor</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payload" title="AnyRef">payload</a><span class="delimiter">)</span>
      val <a title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder">builder</a> = <a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats" title="akka.persistence.serialization.MessageFormats.type">mf</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload.type">PersistentPayload</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload.newBuilder(e9c0b896eb)" title="()akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">newBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.serializer" title="akka.serialization.Serializer">serializer</a> match <span class="delimiter">{</span>
        case <a title="akka.serialization.SerializerWithStringManifest" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.ser2">ser2</a>: <a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;SerializerWithStringManifest" title="akka.serialization.SerializerWithStringManifest">SerializerWithStringManifest</a> ⇒
          val <a title="String" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.manifest">manifest</a> = <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.ser2" title="akka.serialization.SerializerWithStringManifest">ser2</a>.<a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;SerializerWithStringManifest.manifest" title="(o: AnyRef)String">manifest</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payload" title="AnyRef">payload</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.manifest" title="String">manifest</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload;Builder.setPayloadManifest" title="(value: com.google.protobuf.ByteString)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">setPayloadManifest</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: String)com.google.protobuf.ByteString">copyFromUtf8</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.manifest" title="String">manifest</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case _ ⇒
          if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.serializer" title="akka.serialization.Serializer">serializer</a>.<a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.includeManifest" title="=&gt; Boolean">includeManifest</a><span class="delimiter">)</span>
            <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload;Builder.setPayloadManifest" title="(value: com.google.protobuf.ByteString)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">setPayloadManifest</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: String)com.google.protobuf.ByteString">copyFromUtf8</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payload" title="AnyRef">payload</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload;Builder.setPayload" title="(value: com.google.protobuf.ByteString)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">setPayload</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: Array[Byte])com.google.protobuf.ByteString">copyFrom</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.serializer" title="akka.serialization.Serializer">serializer</a>.<a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.toBinary" title="(o: AnyRef)Array[Byte]">toBinary</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payload" title="AnyRef">payload</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">builder</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats.PersistentPayload;Builder.setSerializerId" title="(value: Int)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">setSerializerId</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.serializer" title="akka.serialization.Serializer">serializer</a>.<a href="../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.identifier" title="=&gt; Int">identifier</a><span class="delimiter">)</span>
      <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder.builder" title="akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">builder</a>
    <span class="delimiter">}</span>

    <span class="comment">// serialize actor references with full address information (defaultAddress)</span>
    <a href="#akka.persistence.serialization;MessageSerializer.transportInformation" title="=&gt; Option[akka.serialization.Serialization.Information]">transportInformation</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="akka.serialization.Serialization.Information" id="akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.ti">ti</a><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization.currentTransportInformation" title="=&gt; scala.util.DynamicVariable[akka.serialization.Serialization.Information]">currentTransportInformation</a>.<span title="(newval: akka.serialization.Serialization.Information)(thunk: =&gt; akka.persistence.serialization.MessageFormats.PersistentPayload.Builder)akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">withValue</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.ti" title="akka.serialization.Serialization.Information">ti</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder" title="()akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">payloadBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      case <span title="None.type">None</span>     ⇒ <a href="#akka.persistence.serialization;MessageSerializer.persistentPayloadBuilder.payloadBuilder" title="()akka.persistence.serialization.MessageFormats.PersistentPayload.Builder">payloadBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">//</span>
  <span class="comment">// fromBinary helpers</span>
  <span class="comment">//</span>

  private def <a title="(persistentMessage: akka.persistence.serialization.MessageFormats.PersistentMessage)akka.persistence.PersistentRepr" id="akka.persistence.serialization;MessageSerializer.persistent">persistent</a><span class="delimiter">(</span><a title="akka.persistence.serialization.MessageFormats.PersistentMessage" id="akka.persistence.serialization;MessageSerializer.persistent.persistentMessage">persistentMessage</a>: mf.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">PersistentMessage</a><span class="delimiter">)</span>: <a href="../Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a> = <span class="delimiter">{</span>
    <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.apply" title="(payload: Any, sequenceNr: Long, persistenceId: String, manifest: String, deleted: Boolean, sender: akka.actor.ActorRef, writerUuid: String)akka.persistence.PersistentRepr">PersistentRepr</a><span class="delimiter">(</span>
      <a href="#akka.persistence.serialization;MessageSerializer.payload" title="(persistentPayload: akka.persistence.serialization.MessageFormats.PersistentPayload)Any">payload</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getPayload" title="()akka.persistence.serialization.MessageFormats.PersistentPayload">getPayload</a><span class="delimiter">)</span>,
      <a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getSequenceNr" title="()Long">getSequenceNr</a>,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.hasPersistenceId" title="()Boolean">hasPersistenceId</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getPersistenceId" title="()String">getPersistenceId</a> else <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a>,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.hasManifest" title="()Boolean">hasManifest</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getManifest" title="()String">getManifest</a> else <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a>,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.hasDeleted" title="()Boolean">hasDeleted</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getDeleted" title="()Boolean">getDeleted</a> else false,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.hasSender" title="()Boolean">hasSender</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.resolveActorRef(922575794b)" title="(path: String)akka.actor.ActorRef">resolveActorRef</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getSender" title="()String">getSender</a><span class="delimiter">)</span> else <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Actor" title="akka.actor.Actor.type">Actor</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Actor.noSender" title="=&gt; akka.actor.ActorRef">noSender</a>,
      if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.hasWriterUuid" title="()Boolean">hasWriterUuid</a><span class="delimiter">)</span> <a href="#akka.persistence.serialization;MessageSerializer.persistent.persistentMessage" title="akka.persistence.serialization.MessageFormats.PersistentMessage">persistentMessage</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentMessage.getWriterUuid" title="()String">getWriterUuid</a> else <a href="../Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(atomicWrite: akka.persistence.serialization.MessageFormats.AtomicWrite)akka.persistence.AtomicWrite" id="akka.persistence.serialization;MessageSerializer.atomicWrite">atomicWrite</a><span class="delimiter">(</span><a title="akka.persistence.serialization.MessageFormats.AtomicWrite" id="akka.persistence.serialization;MessageSerializer.atomicWrite.atomicWrite">atomicWrite</a>: mf.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;AtomicWrite" title="akka.persistence.serialization.MessageFormats.AtomicWrite">AtomicWrite</a><span class="delimiter">)</span>: <a href="../Persistent.scala.html#akka.persistence;AtomicWrite" title="akka.persistence.AtomicWrite">AtomicWrite</a> = <span class="delimiter">{</span>
    import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    <a href="../Persistent.scala.html#akka.persistence;AtomicWrite" title="(payload: scala.collection.immutable.Seq[akka.persistence.PersistentRepr])akka.persistence.AtomicWrite">AtomicWrite</a><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.atomicWrite.atomicWrite" title="akka.persistence.serialization.MessageFormats.AtomicWrite">atomicWrite</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;AtomicWrite.getPayloadList" title="(l: java.util.List[akka.persistence.serialization.MessageFormats.PersistentMessage])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Buffer[akka.persistence.serialization.MessageFormats.PersistentMessage]]">getPayloadList</a>.<span title="=&gt; scala.collection.mutable.Buffer[akka.persistence.serialization.MessageFormats.PersistentMessage]">asScala</span>.<span title="(f: akka.persistence.serialization.MessageFormats.PersistentMessage =&gt; akka.persistence.PersistentRepr)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Buffer[akka.persistence.serialization.MessageFormats.PersistentMessage],akka.persistence.PersistentRepr,scala.collection.immutable.IndexedSeq[akka.persistence.PersistentRepr]])scala.collection.immutable.IndexedSeq[akka.persistence.PersistentRepr]">map</span><span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.persistent" title="(persistentMessage: akka.persistence.serialization.MessageFormats.PersistentMessage)akka.persistence.PersistentRepr">persistent</a><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.persistence.PersistentRepr,scala.collection.immutable.IndexedSeq[akka.persistence.PersistentRepr]])scala.collection.generic.CanBuildFrom[Any,akka.persistence.PersistentRepr,scala.collection.immutable.IndexedSeq[akka.persistence.PersistentRepr]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(persistentPayload: akka.persistence.serialization.MessageFormats.PersistentPayload)Any" id="akka.persistence.serialization;MessageSerializer.payload">payload</a><span class="delimiter">(</span><a title="akka.persistence.serialization.MessageFormats.PersistentPayload" id="akka.persistence.serialization;MessageSerializer.payload.persistentPayload">persistentPayload</a>: mf.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload">PersistentPayload</a><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
    val <a title="String" id="akka.persistence.serialization;MessageSerializer.payload.manifest">manifest</a> = if <span class="delimiter">(</span><a href="#akka.persistence.serialization;MessageSerializer.payload.persistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload">persistentPayload</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentPayload.hasPayloadManifest" title="()Boolean">hasPayloadManifest</a><span class="delimiter">)</span>
      <a href="#akka.persistence.serialization;MessageSerializer.payload.persistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload">persistentPayload</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentPayload.getPayloadManifest" title="()com.google.protobuf.ByteString">getPayloadManifest</a>.<span title="()String">toStringUtf8</span> else <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

    <a href="#akka.persistence.serialization;MessageSerializer.serialization" title="=&gt; akka.serialization.Serialization">serialization</a>.<a href="../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization.deserialize(0d68c6bee1)" title="(bytes: Array[Byte], serializerId: Int, manifest: String)scala.util.Try[AnyRef]">deserialize</a><span class="delimiter">(</span>
      <a href="#akka.persistence.serialization;MessageSerializer.payload.persistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload">persistentPayload</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentPayload.getPayload" title="()com.google.protobuf.ByteString">getPayload</a>.<span title="()Array[Byte]">toByteArray</span>,
      <a href="#akka.persistence.serialization;MessageSerializer.payload.persistentPayload" title="akka.persistence.serialization.MessageFormats.PersistentPayload">persistentPayload</a>.<a href="MessageFormats.java.html#akka.persistence.serialization.MessageFormats;PersistentPayload.getSerializerId" title="()Int">getSerializerId</a>,
      <a href="#akka.persistence.serialization;MessageSerializer.payload.manifest" title="String">manifest</a><span class="delimiter">)</span>.<span title="=&gt; AnyRef">get</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
