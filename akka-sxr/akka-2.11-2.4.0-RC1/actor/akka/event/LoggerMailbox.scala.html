<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/event/LoggerMailbox.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.event

import akka.dispatch.MessageQueue
import akka.dispatch.MailboxType
import akka.dispatch.UnboundedMailbox
import com.typesafe.config.Config
import akka.actor.ActorSystem
import akka.actor.ActorRef
import akka.dispatch.ProducesMessageQueue

trait <a title="trait LoggerMessageQueueSemantics extends AnyRef" id="akka.event;LoggerMessageQueueSemantics">LoggerMessageQueueSemantics</a>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class LoggerMailboxType extends AnyRef with akka.dispatch.MailboxType with akka.dispatch.ProducesMessageQueue[akka.event.LoggerMailbox]" id="akka.event;LoggerMailboxType">LoggerMailboxType</a><a href="#akka.event;LoggerMailboxType" title="akka.event.LoggerMailboxType" class="delimiter">(</a><a title="akka.actor.ActorSystem.Settings" id="akka.event;LoggerMailboxType.settings">settings</a>: ActorSystem.<a href="../actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings" title="akka.actor.ActorSystem.Settings">Settings</a>, <a title="com.typesafe.config.Config" id="akka.event;LoggerMailboxType.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span> extends <a href="../dispatch/Mailbox.scala.html#akka.dispatch;MailboxType" title="akka.dispatch.MailboxType">MailboxType</a>
  with <a href="../dispatch/Mailbox.scala.html#akka.dispatch;ProducesMessageQueue" title="akka.dispatch.ProducesMessageQueue[akka.event.LoggerMailbox]">ProducesMessageQueue</a><span class="delimiter">[</span>LoggerMailbox<span class="delimiter">]</span> <span class="delimiter">{</span>

  override def <a title="(owner: Option[akka.actor.ActorRef], system: Option[akka.actor.ActorSystem])akka.dispatch.MessageQueue" id="akka.event;LoggerMailboxType.create">create</a><span class="delimiter">(</span><a title="Option[akka.actor.ActorRef]" id="akka.event;LoggerMailboxType.create.owner">owner</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>, <a title="Option[akka.actor.ActorSystem]" id="akka.event;LoggerMailboxType.create.system">system</a>: <span title="Option[akka.actor.ActorSystem]">Option</span><span class="delimiter">[</span>ActorSystem<span class="delimiter">]</span><span class="delimiter">)</span> = <span title="(_1: Option[akka.actor.ActorRef], _2: Option[akka.actor.ActorSystem])(Option[akka.actor.ActorRef], Option[akka.actor.ActorSystem])" class="delimiter">(</span><a href="#akka.event;LoggerMailboxType.create.owner" title="Option[akka.actor.ActorRef]">owner</a>, <a href="#akka.event;LoggerMailboxType.create.system" title="Option[akka.actor.ActorSystem]">system</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case <span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;LoggerMailboxType.create.o">o</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.event;LoggerMailboxType.create.s">s</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ new <a href="#akka.event;LoggerMailbox" title="akka.event.LoggerMailbox">LoggerMailbox</a><span class="delimiter">(</span><a href="#akka.event;LoggerMailboxType.create.o" title="akka.actor.ActorRef">o</a>, <a href="#akka.event;LoggerMailboxType.create.s" title="akka.actor.ActorSystem">s</a><span class="delimiter">)</span>
    case _                  ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;no mailbox owner or system given&quot;)" class="string">&quot;no mailbox owner or system given&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class LoggerMailbox extends akka.dispatch.UnboundedMailbox.MessageQueue with akka.event.LoggerMessageQueueSemantics" id="akka.event;LoggerMailbox">LoggerMailbox</a><a href="#akka.event;LoggerMailbox" title="akka.event.LoggerMailbox" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.event;LoggerMailbox.owner">owner</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorSystem" id="akka.event;LoggerMailbox.system">system</a>: <a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>
  extends <a href="../dispatch/Mailbox.scala.html#akka.dispatch.UnboundedMailbox" title="akka.dispatch.UnboundedMailbox.type">UnboundedMailbox</a>.<a href="../dispatch/Mailbox.scala.html#akka.dispatch.UnboundedMailbox;MessageQueue" title="akka.dispatch.UnboundedMailbox.MessageQueue">MessageQueue</a> with <a href="#akka.event;LoggerMessageQueueSemantics" title="akka.event.LoggerMessageQueueSemantics">LoggerMessageQueueSemantics</a> <span class="delimiter">{</span>

  override def <a title="(owner: akka.actor.ActorRef, deadLetters: akka.dispatch.MessageQueue)Unit" id="akka.event;LoggerMailbox.cleanUp">cleanUp</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;LoggerMailbox.cleanUp.owner">owner</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.dispatch.MessageQueue" id="akka.event;LoggerMailbox.cleanUp.deadLetters">deadLetters</a>: <a href="../dispatch/Mailbox.scala.html#akka.dispatch;MessageQueue" title="akka.dispatch.MessageQueue">MessageQueue</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="../dispatch/Mailbox.scala.html#akka.dispatch;QueueBasedMessageQueue.hasMessages" title="=&gt; Boolean">hasMessages</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      var <a title="akka.dispatch.Envelope" id="akka.event;LoggerMailbox.cleanUp.envelope">envelope</a> = <a href="../dispatch/Mailbox.scala.html#akka.dispatch;UnboundedQueueBasedMessageQueue.dequeue" title="()akka.dispatch.Envelope">dequeue</a>
      <span class="comment">// Drain all remaining messages to the StandardOutLogger.</span>
      <span class="comment">// cleanUp is called after switching out the mailbox, which is why</span>
      <span class="comment">// this kind of look works without a limit.</span>
      while <span class="delimiter">(</span><a href="#akka.event;LoggerMailbox.cleanUp.envelope" title="akka.dispatch.Envelope">envelope</a> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <a href="#akka.event;LoggerMailbox.cleanUp.while$1" title="()Unit" class="delimiter">{</a>
        <span class="comment">// Logging.StandardOutLogger is a MinimalActorRef, i.e. not a &quot;real&quot; actor</span>
        <a href="Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="Logging.scala.html#akka.event.Logging.StandardOutLogger" title="=&gt; akka.event.Logging.StandardOutLogger">StandardOutLogger</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.event;LoggerMailbox.cleanUp.envelope" title="akka.dispatch.Envelope">envelope</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>, <a href="#akka.event;LoggerMailbox.cleanUp.envelope" title="akka.dispatch.Envelope">envelope</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
        <a href="#akka.event;LoggerMailbox.cleanUp.envelope" title="akka.dispatch.Envelope">envelope</a> = <a href="../dispatch/Mailbox.scala.html#akka.dispatch;UnboundedQueueBasedMessageQueue.dequeue" title="()akka.dispatch.Envelope">dequeue</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    super.<a href="../dispatch/Mailbox.scala.html#akka.dispatch;QueueBasedMessageQueue.cleanUp" title="(owner: akka.actor.ActorRef, deadLetters: akka.dispatch.MessageQueue)Unit">cleanUp</a><span class="delimiter">(</span><a href="#akka.event;LoggerMailbox.cleanUp.owner" title="akka.actor.ActorRef">owner</a>, <a href="#akka.event;LoggerMailbox.cleanUp.deadLetters" title="akka.dispatch.MessageQueue">deadLetters</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
