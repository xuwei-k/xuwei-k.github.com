<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/event/EventBus.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.event

import akka.actor.<span class="delimiter">{</span> ActorSystem, ActorRef <span class="delimiter">}</span>
import akka.util.Index
import java.util.concurrent.ConcurrentSkipListSet
import java.util.Comparator
import akka.util.<span class="delimiter">{</span> Subclassification, SubclassifiedIndex <span class="delimiter">}</span>
import scala.collection.immutable
import java.util.concurrent.atomic.<span class="delimiter">{</span> AtomicReference, AtomicInteger <span class="delimiter">}</span>

<span class="comment">/**
 * Represents the base type for EventBuses
 * Internally has an Event type, a Classifier type and a Subscriber type
 *
 * For the Java API, see akka.event.japi.*
 */</span>
trait <a title="trait EventBus extends AnyRef" id="akka.event;EventBus">EventBus</a> <span class="delimiter">{</span>
  type <a title="" id="akka.event;EventBus;Event">Event</a>
  type <a title="" id="akka.event;EventBus;Classifier">Classifier</a>
  type <a title="" id="akka.event;EventBus;Subscriber">Subscriber</a>

  <span class="comment">//#event-bus-api</span>
  <span class="comment">/**
   * Attempts to register the subscriber to the specified Classifier
   * @return true if successful and false if not (because it was already
   *   subscribed to that Classifier, or otherwise)
   */</span>
  def <a title="(subscriber: EventBus.this.Subscriber, to: EventBus.this.Classifier)Boolean" id="akka.event;EventBus.subscribe">subscribe</a><span class="delimiter">(</span><a title="EventBus.this.Subscriber" id="akka.event;EventBus.subscribe.subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="EventBus.this.Subscriber">Subscriber</a>, <a title="EventBus.this.Classifier" id="akka.event;EventBus.subscribe.to">to</a>: <a href="#akka.event;EventBus;Classifier" title="EventBus.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>

  <span class="comment">/**
   * Attempts to deregister the subscriber from the specified Classifier
   * @return true if successful and false if not (because it wasn't subscribed
   *   to that Classifier, or otherwise)
   */</span>
  def <a title="(subscriber: EventBus.this.Subscriber, from: EventBus.this.Classifier)Boolean" id="akka.event;EventBus.unsubscribe(06efef6bee)">unsubscribe</a><span class="delimiter">(</span><a title="EventBus.this.Subscriber" id="akka.event;EventBus.unsubscribe(06efef6bee).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="EventBus.this.Subscriber">Subscriber</a>, <a title="EventBus.this.Classifier" id="akka.event;EventBus.unsubscribe(06efef6bee).from">from</a>: <a href="#akka.event;EventBus;Classifier" title="EventBus.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>

  <span class="comment">/**
   * Attempts to deregister the subscriber from all Classifiers it may be subscribed to
   */</span>
  def <a title="(subscriber: EventBus.this.Subscriber)Unit" id="akka.event;EventBus.unsubscribe(0ebaa66136)">unsubscribe</a><span class="delimiter">(</span><a title="EventBus.this.Subscriber" id="akka.event;EventBus.unsubscribe(0ebaa66136).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="EventBus.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Publishes the specified Event to this bus
   */</span>
  def <a title="(event: EventBus.this.Event)Unit" id="akka.event;EventBus.publish">publish</a><span class="delimiter">(</span><a title="EventBus.this.Event" id="akka.event;EventBus.publish.event">event</a>: <a href="#akka.event;EventBus;Event" title="EventBus.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">//#event-bus-api</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Represents an EventBus where the Subscriber type is ActorRef
 */</span>
trait <a title="trait ActorEventBus extends AnyRef with akka.event.EventBus" id="akka.event;ActorEventBus">ActorEventBus</a> extends <a href="#akka.event;EventBus" title="akka.event.EventBus">EventBus</a> <span class="delimiter">{</span>
  type <a title="akka.actor.ActorRef" id="akka.event;ActorEventBus;Subscriber">Subscriber</a> = <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
  protected def <a title="(a: akka.actor.ActorRef, b: akka.actor.ActorRef)Int" id="akka.event;ActorEventBus.compareSubscribers">compareSubscribers</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorEventBus.compareSubscribers.a">a</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ActorEventBus.compareSubscribers.b">b</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.event;ActorEventBus.compareSubscribers.a" title="akka.actor.ActorRef">a</a> <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.compareTo" title="(other: akka.actor.ActorRef)Int">compareTo</a> <a href="#akka.event;ActorEventBus.compareSubscribers.b" title="akka.actor.ActorRef">b</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Can be mixed into an EventBus to specify that the Classifier type is ActorRef
 */</span>
trait <a title="trait ActorClassifier extends AnyRef" id="akka.event;ActorClassifier">ActorClassifier</a> <span class="delimiter">{</span> this: EventBus ⇒
  type <a title="akka.actor.ActorRef" id="akka.event;ActorClassifier;Classifier">Classifier</a> = <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Can be mixed into an EventBus to specify that the Classifier type is a Function from Event to Boolean (predicate)
 */</span>
trait <a title="trait PredicateClassifier extends AnyRef" id="akka.event;PredicateClassifier">PredicateClassifier</a> <span class="delimiter">{</span> this: EventBus ⇒
  type <a title="PredicateClassifier.this.Event =&gt; Boolean" id="akka.event;PredicateClassifier;Classifier">Classifier</a> = Event ⇒ Boolean
<span class="delimiter">}</span>

<span class="comment">/**
 * Maps Subscribers to Classifiers using equality on Classifier to store a Set of Subscribers (hence the need for compareSubscribers)
 * Maps Events to Classifiers through the classify-method (so it knows who to publish to)
 *
 * The compareSubscribers need to provide a total ordering of the Subscribers
 */</span>
trait <a title="trait LookupClassification extends AnyRef" id="akka.event;LookupClassification">LookupClassification</a> <span title="Unit" class="delimiter">{</span> this: EventBus ⇒

  protected final val <a title="akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]" id="akka.event;LookupClassification.subscribers">subscribers</a> = new <a href="../util/Index.scala.html#akka.util;Index" title="akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]">Index</a><span class="delimiter">[</span>Classifier, Subscriber<span class="delimiter">]</span><span class="delimiter">(</span><a href="#akka.event;LookupClassification.mapSize" title="()Int">mapSize</a><span class="delimiter">(</span><span class="delimiter">)</span>, new <a title="&lt;$anon: java.util.Comparator[LookupClassification.this.Subscriber]&gt; extends Object with java.util.Comparator[LookupClassification.this.Subscriber]" id="akka.event;LookupClassification.subscribers;$anon">Comparator</a><span class="delimiter">[</span>Subscriber<span class="delimiter">]</span> <span class="delimiter">{</span>
    def <a title="(a: LookupClassification.this.Subscriber, b: LookupClassification.this.Subscriber)Int" id="akka.event;LookupClassification.subscribers;$anon.compare">compare</a><span class="delimiter">(</span><a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.subscribers;$anon.compare.a">a</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a>, <a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.subscribers;$anon.compare.b">b</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#akka.event;LookupClassification.compareSubscribers" title="(a: LookupClassification.this.Subscriber, b: LookupClassification.this.Subscriber)Int">compareSubscribers</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.subscribers;$anon.compare.a" title="LookupClassification.this.Subscriber">a</a>, <a href="#akka.event;LookupClassification.subscribers;$anon.compare.b" title="LookupClassification.this.Subscriber">b</a><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/**
   * This is a size hint for the number of Classifiers you expect to have (use powers of 2)
   */</span>
  protected def <a title="()Int" id="akka.event;LookupClassification.mapSize">mapSize</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/**
   * Provides a total ordering of Subscribers (think java.util.Comparator.compare)
   */</span>
  protected def <a title="(a: LookupClassification.this.Subscriber, b: LookupClassification.this.Subscriber)Int" id="akka.event;LookupClassification.compareSubscribers">compareSubscribers</a><span class="delimiter">(</span><a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.compareSubscribers.a">a</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a>, <a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.compareSubscribers.b">b</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/**
   * Returns the Classifier associated with the given Event
   */</span>
  protected def <a title="(event: LookupClassification.this.Event)LookupClassification.this.Classifier" id="akka.event;LookupClassification.classify">classify</a><span class="delimiter">(</span><a title="LookupClassification.this.Event" id="akka.event;LookupClassification.classify.event">event</a>: <a href="#akka.event;EventBus;Event" title="LookupClassification.this.Event">Event</a><span class="delimiter">)</span>: <a href="#akka.event;EventBus;Classifier" title="LookupClassification.this.Classifier">Classifier</a>

  <span class="comment">/**
   * Publishes the given Event to the given Subscriber
   */</span>
  protected def <a title="(event: LookupClassification.this.Event, subscriber: LookupClassification.this.Subscriber)Unit" id="akka.event;LookupClassification.publish(d3954001a6)">publish</a><span class="delimiter">(</span><a title="LookupClassification.this.Event" id="akka.event;LookupClassification.publish(d3954001a6).event">event</a>: <a href="#akka.event;EventBus;Event" title="LookupClassification.this.Event">Event</a>, <a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.publish(d3954001a6).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  def <a title="(subscriber: LookupClassification.this.Subscriber, to: LookupClassification.this.Classifier)Boolean" id="akka.event;LookupClassification.subscribe">subscribe</a><span class="delimiter">(</span><a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.subscribe.subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a>, <a title="LookupClassification.this.Classifier" id="akka.event;LookupClassification.subscribe.to">to</a>: <a href="#akka.event;EventBus;Classifier" title="LookupClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;LookupClassification.subscribers" title="=&gt; akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]">subscribers</a>.<a href="../util/Index.scala.html#akka.util;Index.put" title="(key: LookupClassification.this.Classifier, value: LookupClassification.this.Subscriber)Boolean">put</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.subscribe.to" title="LookupClassification.this.Classifier">to</a>, <a href="#akka.event;LookupClassification.subscribe.subscriber" title="LookupClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: LookupClassification.this.Subscriber, from: LookupClassification.this.Classifier)Boolean" id="akka.event;LookupClassification.unsubscribe(306889f7ef)">unsubscribe</a><span class="delimiter">(</span><a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.unsubscribe(306889f7ef).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a>, <a title="LookupClassification.this.Classifier" id="akka.event;LookupClassification.unsubscribe(306889f7ef).from">from</a>: <a href="#akka.event;EventBus;Classifier" title="LookupClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;LookupClassification.subscribers" title="=&gt; akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]">subscribers</a>.<a href="../util/Index.scala.html#akka.util;Index.remove(8d181fb718)" title="(key: LookupClassification.this.Classifier, value: LookupClassification.this.Subscriber)Boolean">remove</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.unsubscribe(306889f7ef).from" title="LookupClassification.this.Classifier">from</a>, <a href="#akka.event;LookupClassification.unsubscribe(306889f7ef).subscriber" title="LookupClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: LookupClassification.this.Subscriber)Unit" id="akka.event;LookupClassification.unsubscribe(f6c2af7867)">unsubscribe</a><span class="delimiter">(</span><a title="LookupClassification.this.Subscriber" id="akka.event;LookupClassification.unsubscribe(f6c2af7867).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="LookupClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.event;LookupClassification.subscribers" title="=&gt; akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]">subscribers</a>.<a href="../util/Index.scala.html#akka.util;Index.removeValue" title="(value: LookupClassification.this.Subscriber)Unit">removeValue</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.unsubscribe(f6c2af7867).subscriber" title="LookupClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(event: LookupClassification.this.Event)Unit" id="akka.event;LookupClassification.publish(04a04c358e)">publish</a><span class="delimiter">(</span><a title="LookupClassification.this.Event" id="akka.event;LookupClassification.publish(04a04c358e).event">event</a>: <a href="#akka.event;EventBus;Event" title="LookupClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="Iterator[LookupClassification.this.Subscriber]" id="akka.event;LookupClassification.publish(04a04c358e).i">i</a> = <a href="#akka.event;LookupClassification.subscribers" title="=&gt; akka.util.Index[LookupClassification.this.Classifier,LookupClassification.this.Subscriber]">subscribers</a>.<a href="../util/Index.scala.html#akka.util;Index.valueIterator" title="(key: LookupClassification.this.Classifier)Iterator[LookupClassification.this.Subscriber]">valueIterator</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.classify" title="(event: LookupClassification.this.Event)LookupClassification.this.Classifier">classify</a><span class="delimiter">(</span><a href="#akka.event;LookupClassification.publish(04a04c358e).event" title="LookupClassification.this.Event">event</a><span class="delimiter">)</span><span class="delimiter">)</span>
    while <span class="delimiter">(</span><a href="#akka.event;LookupClassification.publish(04a04c358e).i" title="Iterator[LookupClassification.this.Subscriber]">i</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.event;LookupClassification.publish(d3954001a6)" title="(event: LookupClassification.this.Event, subscriber: LookupClassification.this.Subscriber)Unit">publish</a><a href="#akka.event;LookupClassification.publish(04a04c358e).while$1" title="()Unit" class="delimiter">(</a><a href="#akka.event;LookupClassification.publish(04a04c358e).event" title="LookupClassification.this.Event">event</a>, <a href="#akka.event;LookupClassification.publish(04a04c358e).i" title="Iterator[LookupClassification.this.Subscriber]">i</a>.<span title="()LookupClassification.this.Subscriber">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Classification which respects relationships between channels: subscribing
 * to one channel automatically and idempotently subscribes to all sub-channels.
 */</span>
trait <a title="trait SubchannelClassification extends AnyRef" id="akka.event;SubchannelClassification">SubchannelClassification</a> <span title="Unit" class="delimiter">{</span> this: EventBus ⇒

  <span class="comment">/**
   * The logic to form sub-class hierarchy
   */</span>
  protected implicit def <a title="=&gt; akka.util.Subclassification[SubchannelClassification.this.Classifier]" id="akka.event;SubchannelClassification.subclassification">subclassification</a>: <a href="../util/SubclassifiedIndex.scala.html#akka.util;Subclassification" title="akka.util.Subclassification[SubchannelClassification.this.Classifier]">Subclassification</a><span class="delimiter">[</span>Classifier<span class="delimiter">]</span>

  <span class="comment">// must be lazy to avoid initialization order problem with subclassification</span>
  private lazy val <a title="akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]" id="akka.event;SubchannelClassification.subscriptions">subscriptions</a> = new <a href="../util/SubclassifiedIndex.scala.html#akka.util;SubclassifiedIndex" title="akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">SubclassifiedIndex</a><span class="delimiter">[</span>Classifier, Subscriber<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  @volatile
  private var <a title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" id="akka.event;SubchannelClassification.cache_=">cache</a> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" class="delimiter">[</span><a href="#akka.event;EventBus;Classifier" title="SubchannelClassification.this.Classifier">Classifier</a>, <span title="Set[SubchannelClassification.this.Subscriber]">Set</span><span class="delimiter">[</span>Subscriber<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Returns the Classifier associated with the given Event
   */</span>
  protected def <a title="(event: SubchannelClassification.this.Event)SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.classify">classify</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Event" id="akka.event;SubchannelClassification.classify.event">event</a>: <a href="#akka.event;EventBus;Event" title="SubchannelClassification.this.Event">Event</a><span class="delimiter">)</span>: <a href="#akka.event;EventBus;Classifier" title="SubchannelClassification.this.Classifier">Classifier</a>

  <span class="comment">/**
   * Publishes the given Event to the given Subscriber
   */</span>
  protected def <a title="(event: SubchannelClassification.this.Event, subscriber: SubchannelClassification.this.Subscriber)Unit" id="akka.event;SubchannelClassification.publish(d024a8b543)">publish</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Event" id="akka.event;SubchannelClassification.publish(d024a8b543).event">event</a>: <a href="#akka.event;EventBus;Event" title="SubchannelClassification.this.Event">Event</a>, <a title="SubchannelClassification.this.Subscriber" id="akka.event;SubchannelClassification.publish(d024a8b543).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  def <a title="(subscriber: SubchannelClassification.this.Subscriber, to: SubchannelClassification.this.Classifier)Boolean" id="akka.event;SubchannelClassification.subscribe">subscribe</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Subscriber" id="akka.event;SubchannelClassification.subscribe.subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a>, <a title="SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.subscribe.to">to</a>: <a href="#akka.event;EventBus;Classifier" title="SubchannelClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span>
    val <a title="SubchannelClassification.this.subscriptions.Changes" id="akka.event;SubchannelClassification.subscribe.diff">diff</a> = <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<a href="../util/SubclassifiedIndex.scala.html#akka.util;SubclassifiedIndex.addValue" title="(key: SubchannelClassification.this.Classifier, value: SubchannelClassification.this.Subscriber)SubchannelClassification.this.subscriptions.Changes">addValue</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.subscribe.to" title="SubchannelClassification.this.Classifier">to</a>, <a href="#akka.event;SubchannelClassification.subscribe.subscriber" title="SubchannelClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>
    <a href="#akka.event;SubchannelClassification.addToCache" title="(changes: scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])Unit">addToCache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.subscribe.diff" title="SubchannelClassification.this.subscriptions.Changes">diff</a><span class="delimiter">)</span>
    <a href="#akka.event;SubchannelClassification.subscribe.diff" title="SubchannelClassification.this.subscriptions.Changes">diff</a>.<span title="=&gt; Boolean">nonEmpty</span>
  <span class="delimiter">}</span>

  def <a title="(subscriber: SubchannelClassification.this.Subscriber, from: SubchannelClassification.this.Classifier)Boolean" id="akka.event;SubchannelClassification.unsubscribe(ec110dac6d)">unsubscribe</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Subscriber" id="akka.event;SubchannelClassification.unsubscribe(ec110dac6d).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a>, <a title="SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.unsubscribe(ec110dac6d).from">from</a>: <a href="#akka.event;EventBus;Classifier" title="SubchannelClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span>
    val <a title="SubchannelClassification.this.subscriptions.Changes" id="akka.event;SubchannelClassification.unsubscribe(ec110dac6d).diff">diff</a> = <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<a href="../util/SubclassifiedIndex.scala.html#akka.util;SubclassifiedIndex.removeValue(ead4d5783e)" title="(key: SubchannelClassification.this.Classifier, value: SubchannelClassification.this.Subscriber)SubchannelClassification.this.subscriptions.Changes">removeValue</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.unsubscribe(ec110dac6d).from" title="SubchannelClassification.this.Classifier">from</a>, <a href="#akka.event;SubchannelClassification.unsubscribe(ec110dac6d).subscriber" title="SubchannelClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>
    <span class="comment">// removeValue(K, V) does not return the diff to remove from or add to the cache</span>
    <span class="comment">// but instead the whole set of keys and values that should be updated in the cache</span>
    <a href="#akka.event;SubchannelClassification.cache_=" title="(x$1: scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])Unit">cache</a> <span title="(xs: scala.collection.GenTraversableOnce[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">++=</span> <a href="#akka.event;SubchannelClassification.unsubscribe(ec110dac6d).diff" title="SubchannelClassification.this.subscriptions.Changes">diff</a>
    <a href="#akka.event;SubchannelClassification.unsubscribe(ec110dac6d).diff" title="SubchannelClassification.this.subscriptions.Changes">diff</a>.<span title="=&gt; Boolean">nonEmpty</span>
  <span class="delimiter">}</span>

  def <a title="(subscriber: SubchannelClassification.this.Subscriber)Unit" id="akka.event;SubchannelClassification.unsubscribe(def38b4c83)">unsubscribe</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Subscriber" id="akka.event;SubchannelClassification.unsubscribe(def38b4c83).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
    <a href="#akka.event;SubchannelClassification.removeFromCache" title="(changes: scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])Unit">removeFromCache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<a href="../util/SubclassifiedIndex.scala.html#akka.util;SubclassifiedIndex.removeValue(e0a34702a8)" title="(value: SubchannelClassification.this.Subscriber)SubchannelClassification.this.subscriptions.Changes">removeValue</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.unsubscribe(def38b4c83).subscriber" title="SubchannelClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(event: SubchannelClassification.this.Event)Unit" id="akka.event;SubchannelClassification.publish(de973626dc)">publish</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Event" id="akka.event;SubchannelClassification.publish(de973626dc).event">event</a>: <a href="#akka.event;EventBus;Event" title="SubchannelClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.publish(de973626dc).c">c</a> = <a href="#akka.event;SubchannelClassification.classify" title="(event: SubchannelClassification.this.Event)SubchannelClassification.this.Classifier">classify</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).event" title="SubchannelClassification.this.Event">event</a><span class="delimiter">)</span>
    val <a title="Set[SubchannelClassification.this.Subscriber]" id="akka.event;SubchannelClassification.publish(de973626dc).recv">recv</a> =
      if <span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.cache_=" title="=&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">cache</a> <span title="(key: SubchannelClassification.this.Classifier)Boolean">contains</span> <a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span> <a href="#akka.event;SubchannelClassification.cache_=" title="(key: SubchannelClassification.this.Classifier)Set[SubchannelClassification.this.Subscriber]">cache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span> <span class="comment">// c will never be removed from cache</span>
      else <a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<span title="(x$1: Set[SubchannelClassification.this.Subscriber])Set[SubchannelClassification.this.Subscriber]">synchronized</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.cache_=" title="=&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">cache</a> <span title="(key: SubchannelClassification.this.Classifier)Boolean">contains</span> <a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span> <a href="#akka.event;SubchannelClassification.cache_=" title="(key: SubchannelClassification.this.Classifier)Set[SubchannelClassification.this.Subscriber]">cache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span>
        else <span class="delimiter">{</span>
          <a href="#akka.event;SubchannelClassification.addToCache" title="(changes: scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])Unit">addToCache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.subscriptions" title="=&gt; akka.util.SubclassifiedIndex[SubchannelClassification.this.Classifier,SubchannelClassification.this.Subscriber]">subscriptions</a>.<a href="../util/SubclassifiedIndex.scala.html#akka.util;SubclassifiedIndex.addKey" title="(key: SubchannelClassification.this.Classifier)SubchannelClassification.this.subscriptions.Changes">addKey</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.event;SubchannelClassification.cache_=" title="(key: SubchannelClassification.this.Classifier)Set[SubchannelClassification.this.Subscriber]">cache</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).c" title="SubchannelClassification.this.Classifier">c</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <a href="#akka.event;SubchannelClassification.publish(de973626dc).recv" title="Set[SubchannelClassification.this.Subscriber]">recv</a> <span title="(f: SubchannelClassification.this.Subscriber =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(d024a8b543)" title="(event: SubchannelClassification.this.Event, subscriber: SubchannelClassification.this.Subscriber)Unit">publish</a><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.publish(de973626dc).event" title="SubchannelClassification.this.Event">event</a>, <a href="#akka.event;SubchannelClassification.publish(de973626dc).$anonfun.x$1" title="SubchannelClassification.this.Subscriber">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Expensive call! Avoid calling directly from event bus subscribe / unsubscribe.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(subscriber: SubchannelClassification.this.Subscriber)Boolean" id="akka.event;SubchannelClassification.hasSubscriptions">hasSubscriptions</a><span class="delimiter">(</span><a title="SubchannelClassification.this.Subscriber" id="akka.event;SubchannelClassification.hasSubscriptions.subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span class="comment">// FIXME binary incompatible, but I think it is safe to filter out this problem,</span>
    <span class="comment">//       since it is only called from new functionality in EventStreamUnsubscriber</span>
    <a href="#akka.event;SubchannelClassification.cache_=" title="=&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">cache</a>.<span title="=&gt; Iterable[Set[SubchannelClassification.this.Subscriber]]">values</span> <span title="(p: Set[SubchannelClassification.this.Subscriber] =&gt; Boolean)Boolean">exists</span> <span class="delimiter">{</span> <a href="#akka.event;SubchannelClassification.hasSubscriptions.$anonfun.x$2" title="Set[SubchannelClassification.this.Subscriber]">_</a> <span title="(elem: SubchannelClassification.this.Subscriber)Boolean">contains</span> <a href="#akka.event;SubchannelClassification.hasSubscriptions.subscriber" title="SubchannelClassification.this.Subscriber">subscriber</a> <span class="delimiter">}</span>

  private def <a title="(changes: scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])Unit" id="akka.event;SubchannelClassification.removeFromCache">removeFromCache</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]" id="akka.event;SubchannelClassification.removeFromCache.changes">changes</a>: immutable.<span title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Classifier, Set<span class="delimiter">[</span>Subscriber<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.event;SubchannelClassification.cache_=" title="(x$1: scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])Unit">cache</a> = <span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.cache_=" title="=&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">cache</a> <a href="#akka.event;SubchannelClassification.removeFromCache.x$3" title="(z: scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])(op: (scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]], (SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])) =&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">/:</a> <a href="#akka.event;SubchannelClassification.removeFromCache.changes" title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]">changes</a><span class="delimiter">)</span> <a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.x0$1" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" id="akka.event;SubchannelClassification.removeFromCache.$anonfun.m">m</a>, <span class="delimiter">(</span><a title="SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.removeFromCache.$anonfun.c">c</a>, <a title="Set[SubchannelClassification.this.Subscriber]" id="akka.event;SubchannelClassification.removeFromCache.$anonfun.cs">cs</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ <a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.m" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">m</a>.<span title="(key: SubchannelClassification.this.Classifier, value: Set[SubchannelClassification.this.Subscriber])scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">updated</span><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.c" title="SubchannelClassification.this.Classifier">c</a>, <a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.m" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">m</a>.<span title="(key: SubchannelClassification.this.Classifier, default: =&gt; Set[SubchannelClassification.this.Subscriber])Set[SubchannelClassification.this.Subscriber]">getOrElse</span><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.c" title="SubchannelClassification.this.Classifier">c</a>, <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[SubchannelClassification.this.Subscriber]" class="delimiter">[</span><a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a><span class="delimiter">]</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[SubchannelClassification.this.Subscriber])scala.collection.immutable.Set[SubchannelClassification.this.Subscriber]">--</span> <a href="#akka.event;SubchannelClassification.removeFromCache.$anonfun.cs" title="Set[SubchannelClassification.this.Subscriber]">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  private def <a title="(changes: scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])])Unit" id="akka.event;SubchannelClassification.addToCache">addToCache</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]" id="akka.event;SubchannelClassification.addToCache.changes">changes</a>: immutable.<span title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Classifier, Set<span class="delimiter">[</span>Subscriber<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.event;SubchannelClassification.cache_=" title="(x$1: scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])Unit">cache</a> = <span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.cache_=" title="=&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">cache</a> <a href="#akka.event;SubchannelClassification.addToCache.x$4" title="(z: scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])(op: (scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]], (SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])) =&gt; scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]])scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">/:</a> <a href="#akka.event;SubchannelClassification.addToCache.changes" title="scala.collection.immutable.Seq[(SubchannelClassification.this.Classifier, Set[SubchannelClassification.this.Subscriber])]">changes</a><span class="delimiter">)</span> <a href="#akka.event;SubchannelClassification.addToCache.$anonfun.x0$2" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" class="delimiter">{</a>
      case <span class="delimiter">(</span><a title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]" id="akka.event;SubchannelClassification.addToCache.$anonfun.m">m</a>, <span class="delimiter">(</span><a title="SubchannelClassification.this.Classifier" id="akka.event;SubchannelClassification.addToCache.$anonfun.c">c</a>, <a title="Set[SubchannelClassification.this.Subscriber]" id="akka.event;SubchannelClassification.addToCache.$anonfun.cs">cs</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ <a href="#akka.event;SubchannelClassification.addToCache.$anonfun.m" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">m</a>.<span title="(key: SubchannelClassification.this.Classifier, value: Set[SubchannelClassification.this.Subscriber])scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">updated</span><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.addToCache.$anonfun.c" title="SubchannelClassification.this.Classifier">c</a>, <a href="#akka.event;SubchannelClassification.addToCache.$anonfun.m" title="scala.collection.immutable.Map[SubchannelClassification.this.Classifier,Set[SubchannelClassification.this.Subscriber]]">m</a>.<span title="(key: SubchannelClassification.this.Classifier, default: =&gt; Set[SubchannelClassification.this.Subscriber])Set[SubchannelClassification.this.Subscriber]">getOrElse</span><span class="delimiter">(</span><a href="#akka.event;SubchannelClassification.addToCache.$anonfun.c" title="SubchannelClassification.this.Classifier">c</a>, <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[SubchannelClassification.this.Subscriber]" class="delimiter">[</span><a href="#akka.event;EventBus;Subscriber" title="SubchannelClassification.this.Subscriber">Subscriber</a><span class="delimiter">]</span><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[SubchannelClassification.this.Subscriber])scala.collection.immutable.Set[SubchannelClassification.this.Subscriber]">++</span> <a href="#akka.event;SubchannelClassification.addToCache.$anonfun.cs" title="Set[SubchannelClassification.this.Subscriber]">cs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Maps Classifiers to Subscribers and selects which Subscriber should receive which publication through scanning through all Subscribers
 * through the matches(classifier, event) method
 *
 * Note: the compareClassifiers and compareSubscribers must together form an absolute ordering (think java.util.Comparator.compare)
 */</span>
trait <a title="trait ScanningClassification extends AnyRef" id="akka.event;ScanningClassification">ScanningClassification</a> <span title="Unit" class="delimiter">{</span> self: EventBus ⇒
  protected final val <a title="java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]" id="akka.event;ScanningClassification.subscribers">subscribers</a> = new <span title="java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">ConcurrentSkipListSet</span><span class="delimiter">[</span><span class="delimiter">(</span>Classifier, Subscriber<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span>new <a title="&lt;$anon: java.util.Comparator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]&gt; extends Object with java.util.Comparator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]" id="akka.event;ScanningClassification.subscribers;$anon">Comparator</a><span class="delimiter">[</span><span class="delimiter">(</span>Classifier, Subscriber<span class="delimiter">)</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    def <a title="(a: (ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber), b: (ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber))Int" id="akka.event;ScanningClassification.subscribers;$anon.compare">compare</a><span class="delimiter">(</span><a title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" id="akka.event;ScanningClassification.subscribers;$anon.compare.a">a</a>: <span title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" class="delimiter">(</span>Classifier, Subscriber<span class="delimiter">)</span>, <a title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" id="akka.event;ScanningClassification.subscribers;$anon.compare.b">b</a>: <span title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" class="delimiter">(</span>Classifier, Subscriber<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#akka.event;ScanningClassification.compareClassifiers" title="(a: ScanningClassification.this.Classifier, b: ScanningClassification.this.Classifier)Int">compareClassifiers</a><span class="delimiter">(</span><a href="#akka.event;ScanningClassification.subscribers;$anon.compare.a" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">a</a>.<span title="=&gt; ScanningClassification.this.Classifier">_1</span>, <a href="#akka.event;ScanningClassification.subscribers;$anon.compare.b" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">b</a>.<span title="=&gt; ScanningClassification.this.Classifier">_1</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(0)" class="int">0</span>     ⇒ <a href="#akka.event;ScanningClassification.compareSubscribers" title="(a: ScanningClassification.this.Subscriber, b: ScanningClassification.this.Subscriber)Int">compareSubscribers</a><span class="delimiter">(</span><a href="#akka.event;ScanningClassification.subscribers;$anon.compare.a" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">a</a>.<span title="=&gt; ScanningClassification.this.Subscriber">_2</span>, <a href="#akka.event;ScanningClassification.subscribers;$anon.compare.b" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">b</a>.<span title="=&gt; ScanningClassification.this.Subscriber">_2</span><span class="delimiter">)</span>
      case <a title="Int" id="akka.event;ScanningClassification.subscribers;$anon.compare.other">other</a> ⇒ <a href="#akka.event;ScanningClassification.subscribers;$anon.compare.other" title="Int">other</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Provides a total ordering of Classifiers (think java.util.Comparator.compare)
   */</span>
  protected def <a title="(a: ScanningClassification.this.Classifier, b: ScanningClassification.this.Classifier)Int" id="akka.event;ScanningClassification.compareClassifiers">compareClassifiers</a><span class="delimiter">(</span><a title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.compareClassifiers.a">a</a>: <a href="#akka.event;EventBus;Classifier" title="ScanningClassification.this.Classifier">Classifier</a>, <a title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.compareClassifiers.b">b</a>: <a href="#akka.event;EventBus;Classifier" title="ScanningClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/**
   * Provides a total ordering of Subscribers (think java.util.Comparator.compare)
   */</span>
  protected def <a title="(a: ScanningClassification.this.Subscriber, b: ScanningClassification.this.Subscriber)Int" id="akka.event;ScanningClassification.compareSubscribers">compareSubscribers</a><span class="delimiter">(</span><a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.compareSubscribers.a">a</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a>, <a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.compareSubscribers.b">b</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/**
   * Returns whether the specified Classifier matches the specified Event
   */</span>
  protected def <a title="(classifier: ScanningClassification.this.Classifier, event: ScanningClassification.this.Event)Boolean" id="akka.event;ScanningClassification.matches">matches</a><span class="delimiter">(</span><a title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.matches.classifier">classifier</a>: <a href="#akka.event;EventBus;Classifier" title="ScanningClassification.this.Classifier">Classifier</a>, <a title="ScanningClassification.this.Event" id="akka.event;ScanningClassification.matches.event">event</a>: <a href="#akka.event;EventBus;Event" title="ScanningClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>

  <span class="comment">/**
   * Publishes the specified Event to the specified Subscriber
   */</span>
  protected def <a title="(event: ScanningClassification.this.Event, subscriber: ScanningClassification.this.Subscriber)Unit" id="akka.event;ScanningClassification.publish(201a215385)">publish</a><span class="delimiter">(</span><a title="ScanningClassification.this.Event" id="akka.event;ScanningClassification.publish(201a215385).event">event</a>: <a href="#akka.event;EventBus;Event" title="ScanningClassification.this.Event">Event</a>, <a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.publish(201a215385).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  def <a title="(subscriber: ScanningClassification.this.Subscriber, to: ScanningClassification.this.Classifier)Boolean" id="akka.event;ScanningClassification.subscribe">subscribe</a><span class="delimiter">(</span><a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.subscribe.subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a>, <a title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.subscribe.to">to</a>: <a href="#akka.event;EventBus;Classifier" title="ScanningClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;ScanningClassification.subscribers" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">subscribers</a>.<span title="(x$1: (ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber))Boolean">add</span><span class="delimiter">(</span><span title="(_1: ScanningClassification.this.Classifier, _2: ScanningClassification.this.Subscriber)(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" class="delimiter">(</span><a href="#akka.event;ScanningClassification.subscribe.to" title="ScanningClassification.this.Classifier">to</a>, <a href="#akka.event;ScanningClassification.subscribe.subscriber" title="ScanningClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(subscriber: ScanningClassification.this.Subscriber, from: ScanningClassification.this.Classifier)Boolean" id="akka.event;ScanningClassification.unsubscribe(8d6ad92d7d)">unsubscribe</a><span class="delimiter">(</span><a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.unsubscribe(8d6ad92d7d).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a>, <a title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.unsubscribe(8d6ad92d7d).from">from</a>: <a href="#akka.event;EventBus;Classifier" title="ScanningClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.event;ScanningClassification.subscribers" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">subscribers</a>.<span title="(x$1: Any)Boolean">remove</span><span class="delimiter">(</span><span title="(_1: ScanningClassification.this.Classifier, _2: ScanningClassification.this.Subscriber)(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" class="delimiter">(</span><a href="#akka.event;ScanningClassification.unsubscribe(8d6ad92d7d).from" title="ScanningClassification.this.Classifier">from</a>, <a href="#akka.event;ScanningClassification.unsubscribe(8d6ad92d7d).subscriber" title="ScanningClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(subscriber: ScanningClassification.this.Subscriber)Unit" id="akka.event;ScanningClassification.unsubscribe(b68aebb22d)">unsubscribe</a><span class="delimiter">(</span><a title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.unsubscribe(b68aebb22d).subscriber">subscriber</a>: <a href="#akka.event;EventBus;Subscriber" title="ScanningClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]" id="akka.event;ScanningClassification.unsubscribe(b68aebb22d).i">i</a> = <a href="#akka.event;ScanningClassification.subscribers" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">subscribers</a>.<span title="()java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">iterator</span><span class="delimiter">(</span><span class="delimiter">)</span>
    while <span class="delimiter">(</span><a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).i" title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">i</a>.<span title="()Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).while$2" title="()Unit" class="delimiter">{</a>
      val <a title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" id="akka.event;ScanningClassification.unsubscribe(b68aebb22d).e">e</a> = <a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).i" title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">i</a>.<span title="()(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">next</span><span class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.event;ScanningClassification.compareSubscribers" title="(a: ScanningClassification.this.Subscriber, b: ScanningClassification.this.Subscriber)Int">compareSubscribers</a><span class="delimiter">(</span><a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).subscriber" title="ScanningClassification.this.Subscriber">subscriber</a>, <a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).e" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">e</a>.<span title="=&gt; ScanningClassification.this.Subscriber">_2</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.event;ScanningClassification.unsubscribe(b68aebb22d).i" title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">i</a>.<span title="()Unit">remove</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(event: ScanningClassification.this.Event)Unit" id="akka.event;ScanningClassification.publish(7da708405e)">publish</a><span class="delimiter">(</span><a title="ScanningClassification.this.Event" id="akka.event;ScanningClassification.publish(7da708405e).event">event</a>: <a href="#akka.event;EventBus;Event" title="ScanningClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]" id="akka.event;ScanningClassification.publish(7da708405e).currentSubscribers">currentSubscribers</a> = <a href="#akka.event;ScanningClassification.subscribers" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">subscribers</a>.<span title="()java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">iterator</span><span class="delimiter">(</span><span class="delimiter">)</span>
    while <span class="delimiter">(</span><a href="#akka.event;ScanningClassification.publish(7da708405e).currentSubscribers" title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">currentSubscribers</a>.<span title="()Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.event;ScanningClassification.publish(7da708405e).while$3" title="()Unit" class="delimiter">{</a>
      val <a href="#akka.event;ScanningClassification.publish(7da708405e).classifier" title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)" class="delimiter">(</a><a href="#akka.event;ScanningClassification.publish(7da708405e).x$5" title="ScanningClassification.this.Classifier" id="akka.event;ScanningClassification.publish(7da708405e).classifier">classifier</a>, <a href="#akka.event;ScanningClassification.publish(7da708405e).x$5" title="ScanningClassification.this.Subscriber" id="akka.event;ScanningClassification.publish(7da708405e).subscriber">subscriber</a><span class="delimiter">)</span> = <a href="#akka.event;ScanningClassification.publish(7da708405e).currentSubscribers" title="java.util.Iterator[(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)]">currentSubscribers</a>.<span title="()(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber)">next</span><span title="(ScanningClassification.this.Classifier, ScanningClassification.this.Subscriber) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.event;ScanningClassification.matches" title="(classifier: ScanningClassification.this.Classifier, event: ScanningClassification.this.Event)Boolean">matches</a><span class="delimiter">(</span><a href="#akka.event;ScanningClassification.publish(7da708405e).classifier" title="ScanningClassification.this.Classifier">classifier</a>, <a href="#akka.event;ScanningClassification.publish(7da708405e).event" title="ScanningClassification.this.Event">event</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.event;ScanningClassification.publish(201a215385)" title="(event: ScanningClassification.this.Event, subscriber: ScanningClassification.this.Subscriber)Unit">publish</a><span class="delimiter">(</span><a href="#akka.event;ScanningClassification.publish(7da708405e).event" title="ScanningClassification.this.Event">event</a>, <a href="#akka.event;ScanningClassification.publish(7da708405e).subscriber" title="ScanningClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Maps ActorRefs to ActorRefs to form an EventBus where ActorRefs can listen to other ActorRefs.
 *
 * All subscribers will be watched by an [[akka.event.ActorClassificationUnsubscriber]] and unsubscribed when they terminate.
 * The unsubscriber actor will not be stopped automatically, and if you want to stop using the bus you should stop it yourself.
 */</span>
trait <a title="trait ManagedActorClassification extends AnyRef" id="akka.event;ManagedActorClassification">ManagedActorClassification</a> <span title="Unit" class="delimiter">{</span> this: ActorEventBus with ActorClassifier ⇒
  import scala.annotation.tailrec

  protected def <a title="=&gt; akka.actor.ActorSystem" id="akka.event;ManagedActorClassification.system">system</a>: <a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>

  private class <a title="class ManagedActorClassificationMappings extends AnyRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings">ManagedActorClassificationMappings</a><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings" title="ManagedActorClassification.this.ManagedActorClassificationMappings" class="delimiter">(</a>val <a title="Int" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr">seqNr</a>: <span title="Int">Int</span>, val <a title="Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing">backing</a>: <span title="Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">Map</span><span class="delimiter">[</span>ActorRef, immutable.TreeSet<span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    def <a title="(monitored: akka.actor.ActorRef)scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.get">get</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.get.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef, default: =&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]">getOrElse</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.get.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.empty" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef]">empty</a><span class="delimiter">)</span>

    def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add">add</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val watchers = <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Option[scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">get</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]">getOrElse</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.empty" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef]">empty</a><span class="delimiter">)</span> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.watchers">+</a> <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.monitor" title="akka.actor.ActorRef">monitor</a>
      new <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings" title="ManagedActorClassification.this.ManagedActorClassificationMappings">ManagedActorClassificationMappings</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef, value: scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">updated</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add.watchers" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">watchers</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9)">remove</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val monitors = <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Option[scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">get</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]">getOrElse</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.empty" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef]">empty</a><span class="delimiter">)</span> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitors">-</a> <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitor" title="akka.actor.ActorRef">monitor</a>
      new <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings" title="ManagedActorClassification.this.ManagedActorClassificationMappings">ManagedActorClassificationMappings</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef, value: scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">updated</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9).monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(monitored: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75)">remove</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75).monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val v = <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a> <a title="scala.collection.immutable.Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]" id="akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75).v">-</a> <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75).monitored" title="akka.actor.ActorRef">monitored</a>
      new <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings" title="ManagedActorClassification.this.ManagedActorClassificationMappings">ManagedActorClassificationMappings</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75).v" title="scala.collection.immutable.Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">v</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private val <a title="java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]" id="akka.event;ManagedActorClassification.mappings">mappings</a> = new <span title="java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">AtomicReference</span><span class="delimiter">[</span>ManagedActorClassificationMappings<span class="delimiter">]</span><span class="delimiter">(</span>
    new <a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings" title="ManagedActorClassification.this.ManagedActorClassificationMappings">ManagedActorClassificationMappings</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]" class="delimiter">[</span><a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>

  private val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.empty">empty</a> = immutable.<span title="scala.collection.immutable.TreeSet.type">TreeSet</span>.<span title="[A](implicit ordering: Ordering[A])scala.collection.immutable.TreeSet[A]">empty</span><span title="(implicit ordering: Ordering[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span><a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span>

  <span class="comment">/** The unsubscriber takes care of unsubscribing actors, which have terminated. */</span>
  protected lazy val <a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.unsubscriber">unsubscriber</a> = <a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber" title="akka.event.ActorClassificationUnsubscriber.type">ActorClassificationUnsubscriber</a>.<a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber.start" title="(system: akka.actor.ActorSystem, bus: akka.event.ManagedActorClassification, debug: Boolean)akka.actor.ActorRef">start</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.system" title="=&gt; akka.actor.ActorSystem">system</a>, this<span class="delimiter">)</span>

  @tailrec
  protected final def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean" id="akka.event;ManagedActorClassification.associate">associate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.associate.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.associate.monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.associate.current">current</a> = <a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="()ManagedActorClassification.this.ManagedActorClassificationMappings">get</span>

    <a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Option[scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">get</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="None.type">None</span> ⇒
        val <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span> = <a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings">add</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>

        if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="(x$1: ManagedActorClassification.this.ManagedActorClassificationMappings, x$2: ManagedActorClassification.this.ManagedActorClassificationMappings)Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>, <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ManagedActorClassification.registerWithUnsubscriber" title="(subscriber: akka.actor.ActorRef, seqNr: Int)Boolean">registerWithUnsubscriber</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a>, <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a><span class="delimiter">)</span>
        else <a href="#akka.event;ManagedActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>

      case Some<span class="delimiter">(</span><a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.associate.monitors">monitors</a><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a>.<span title="(elem: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span><span class="delimiter">)</span> false
        else <span class="delimiter">{</span>
          val <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span> = <a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.add" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings">add</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
          val noChange = <a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a> <a title="Boolean" id="akka.event;ManagedActorClassification.associate.noChange">==</a> <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>

          if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.noChange" title="Boolean">noChange</a><span class="delimiter">)</span> false
          else if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="(x$1: ManagedActorClassification.this.ManagedActorClassificationMappings, x$2: ManagedActorClassification.this.ManagedActorClassificationMappings)Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>, <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ManagedActorClassification.registerWithUnsubscriber" title="(subscriber: akka.actor.ActorRef, seqNr: Int)Boolean">registerWithUnsubscriber</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a>, <span title="ManagedActorClassification.this.ManagedActorClassificationMappings">added</span>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a><span class="delimiter">)</span>
          else <a href="#akka.event;ManagedActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected final def <a title="(actor: akka.actor.ActorRef)Unit" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594)">dissociate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).actor">actor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    @tailrec
    def <a title="(monitored: akka.actor.ActorRef)Unit" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored">dissociateAsMonitored</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.current">current</a> = <a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="()ManagedActorClassification.this.ManagedActorClassificationMappings">get</span>
      if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.removed">removed</a> = <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(efe5d4df75)" title="(monitored: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings">remove</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="(x$1: ManagedActorClassification.this.ManagedActorClassificationMappings, x$2: ManagedActorClassification.this.ManagedActorClassificationMappings)Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>, <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.removed" title="ManagedActorClassification.this.ManagedActorClassificationMappings">removed</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored" title="(monitored: akka.actor.ActorRef)Unit">dissociateAsMonitored</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(monitor: akka.actor.ActorRef)Unit" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor">dissociateAsMonitor</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.current">current</a> = <a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="()ManagedActorClassification.this.ManagedActorClassificationMappings">get</span>
      val <a title="Iterator[(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])]" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.i">i</a> = <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="=&gt; Iterator[(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])]">iterator</span>
      while <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.i" title="Iterator[(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])]">i</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.while$4" title="()Unit" class="delimiter">{</a>
        val <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.key" title="(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])" class="delimiter">(</a><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.x$6" title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.key">key</a>, <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.x$6" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.value">value</a><span class="delimiter">)</span> = <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.i" title="Iterator[(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])]">i</a>.<span title="()(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef])">next</span><span title="(akka.actor.ActorRef, scala.collection.immutable.TreeSet[akka.actor.ActorRef]) @unchecked" class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.value" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">value</a> match <span class="delimiter">{</span>
          case null ⇒
          <span class="comment">// do nothing</span>

          case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.monitors">monitors</a> ⇒
            if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a>.<span title="(elem: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.key" title="akka.actor.ActorRef">key</a>, <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    try <span class="delimiter">{</span> <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitored" title="(monitored: akka.actor.ActorRef)Unit">dissociateAsMonitored</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span> <span class="delimiter">}</span> finally <span class="delimiter">{</span> <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).dissociateAsMonitor" title="(monitor: akka.actor.ActorRef)Unit">dissociateAsMonitor</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594).actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec
  protected final def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb)">dissociate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).current">current</a> = <a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="()ManagedActorClassification.this.ManagedActorClassificationMappings">get</span>

    <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Option[scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">get</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="None.type">None</span> ⇒ false
      case Some<span class="delimiter">(</span><a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitors">monitors</a><span class="delimiter">)</span> ⇒
        val <a title="ManagedActorClassification.this.ManagedActorClassificationMappings" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).removed">removed</a> = <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.remove(9cbf310aa9)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)ManagedActorClassification.this.ManagedActorClassificationMappings">remove</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
        val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.dissociate(15f5983dcb).removedMonitors">removedMonitors</a> = <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).removed" title="ManagedActorClassification.this.ManagedActorClassificationMappings">removed</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.get" title="(monitored: akka.actor.ActorRef)scala.collection.immutable.TreeSet[akka.actor.ActorRef]">get</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>

        if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).removedMonitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">removedMonitors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          false
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="(x$1: ManagedActorClassification.this.ManagedActorClassificationMappings, x$2: ManagedActorClassification.this.ManagedActorClassificationMappings)Boolean">compareAndSet</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).current" title="ManagedActorClassification.this.ManagedActorClassificationMappings">current</a>, <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).removed" title="ManagedActorClassification.this.ManagedActorClassificationMappings">removed</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ManagedActorClassification.unregisterFromUnsubscriber" title="(subscriber: akka.actor.ActorRef, seqNr: Int)Boolean">unregisterFromUnsubscriber</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a>, <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).removed" title="ManagedActorClassification.this.ManagedActorClassificationMappings">removed</a>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.seqNr" title="=&gt; Int">seqNr</a><span class="delimiter">)</span>
          else <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the Classifier associated with the specified Event
   */</span>
  protected def <a title="(event: ManagedActorClassification.this.Event)ManagedActorClassification.this.Classifier" id="akka.event;ManagedActorClassification.classify">classify</a><span class="delimiter">(</span><a title="ManagedActorClassification.this.Event" id="akka.event;ManagedActorClassification.classify.event">event</a>: <a href="#akka.event;EventBus;Event" title="ManagedActorClassification.this.Event">Event</a><span class="delimiter">)</span>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Classifier">Classifier</a>

  <span class="comment">/**
   * This is a size hint for the number of Classifiers you expect to have (use powers of 2)
   */</span>
  protected def <a title="=&gt; Int" id="akka.event;ManagedActorClassification.mapSize">mapSize</a>: <span title="Int">Int</span>

  def <a title="(event: ManagedActorClassification.this.Event)Unit" id="akka.event;ManagedActorClassification.publish">publish</a><span class="delimiter">(</span><a title="ManagedActorClassification.this.Event" id="akka.event;ManagedActorClassification.publish.event">event</a>: <a href="#akka.event;EventBus;Event" title="ManagedActorClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.event;ManagedActorClassification.mappings" title="=&gt; java.util.concurrent.atomic.AtomicReference[ManagedActorClassification.this.ManagedActorClassificationMappings]">mappings</a>.<span title="()ManagedActorClassification.this.ManagedActorClassificationMappings">get</span>.<a href="#akka.event;ManagedActorClassification;ManagedActorClassificationMappings.backing" title="=&gt; Map[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">backing</a>.<span title="(key: akka.actor.ActorRef)Option[scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">get</span><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.classify" title="(event: ManagedActorClassification.this.Event)ManagedActorClassification.this.Classifier">classify</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.publish.event" title="ManagedActorClassification.this.Event">event</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="None.type">None</span>       ⇒ <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      case Some<span class="delimiter">(</span><a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ManagedActorClassification.publish.refs">refs</a><span class="delimiter">)</span> ⇒ <a href="#akka.event;ManagedActorClassification.publish.refs" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">refs</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.event;ManagedActorClassification.publish.$anonfun.qual$1">_</a> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.publish.$anonfun.x$10">!</a> <a href="#akka.event;ManagedActorClassification.publish.event" title="ManagedActorClassification.this.Event" id="akka.event;ManagedActorClassification.publish.$anonfun.x$9">event</a> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(subscriber: ManagedActorClassification.this.Subscriber, to: ManagedActorClassification.this.Classifier)Boolean" id="akka.event;ManagedActorClassification.subscribe">subscribe</a><span class="delimiter">(</span><a title="ManagedActorClassification.this.Subscriber" id="akka.event;ManagedActorClassification.subscribe.subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Subscriber">Subscriber</a>, <a title="ManagedActorClassification.this.Classifier" id="akka.event;ManagedActorClassification.subscribe.to">to</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.subscribe.subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.subscribe.to" title="ManagedActorClassification.this.Classifier">to</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Classifier is null&quot;)" class="string">&quot;Classifier is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ManagedActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.subscribe.to" title="ManagedActorClassification.this.Classifier">to</a>, <a href="#akka.event;ManagedActorClassification.subscribe.subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: ManagedActorClassification.this.Subscriber, from: ManagedActorClassification.this.Classifier)Boolean" id="akka.event;ManagedActorClassification.unsubscribe(dd89124563)">unsubscribe</a><span class="delimiter">(</span><a title="ManagedActorClassification.this.Subscriber" id="akka.event;ManagedActorClassification.unsubscribe(dd89124563).subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Subscriber">Subscriber</a>, <a title="ManagedActorClassification.this.Classifier" id="akka.event;ManagedActorClassification.unsubscribe(dd89124563).from">from</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.unsubscribe(dd89124563).subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.unsubscribe(dd89124563).from" title="ManagedActorClassification.this.Classifier">from</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Classifier is null&quot;)" class="string">&quot;Classifier is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ManagedActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.unsubscribe(dd89124563).from" title="ManagedActorClassification.this.Classifier">from</a>, <a href="#akka.event;ManagedActorClassification.unsubscribe(dd89124563).subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: ManagedActorClassification.this.Subscriber)Unit" id="akka.event;ManagedActorClassification.unsubscribe(c173c16b4f)">unsubscribe</a><span class="delimiter">(</span><a title="ManagedActorClassification.this.Subscriber" id="akka.event;ManagedActorClassification.unsubscribe(c173c16b4f).subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ManagedActorClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.unsubscribe(c173c16b4f).subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ManagedActorClassification.dissociate(9d20b2d594)" title="(actor: akka.actor.ActorRef)Unit">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ManagedActorClassification.unsubscribe(c173c16b4f).subscriber" title="ManagedActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(subscriber: akka.actor.ActorRef, seqNr: Int)Boolean" id="akka.event;ManagedActorClassification.registerWithUnsubscriber">registerWithUnsubscriber</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.registerWithUnsubscriber.subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Int" id="akka.event;ManagedActorClassification.registerWithUnsubscriber.seqNr">seqNr</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.event;ManagedActorClassification.registerWithUnsubscriber.qual$2">unsubscriber</a> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.registerWithUnsubscriber.x$12">!</a> <a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber" title="akka.event.ActorClassificationUnsubscriber.type">ActorClassificationUnsubscriber</a>.<a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber;Register" title="(actor: akka.actor.ActorRef, seq: Int)akka.event.ActorClassificationUnsubscriber.Register">Register</a><a title="akka.event.ActorClassificationUnsubscriber.Register" id="akka.event;ManagedActorClassification.registerWithUnsubscriber.x$11" class="delimiter">(</a><a href="#akka.event;ManagedActorClassification.registerWithUnsubscriber.subscriber" title="akka.actor.ActorRef">subscriber</a>, <a href="#akka.event;ManagedActorClassification.registerWithUnsubscriber.seqNr" title="Int">seqNr</a><span class="delimiter">)</span>
    true
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(subscriber: akka.actor.ActorRef, seqNr: Int)Boolean" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber">unregisterFromUnsubscriber</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber.subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Int" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber.seqNr">seqNr</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber.qual$3">unsubscriber</a> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber.x$14">!</a> <a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber" title="akka.event.ActorClassificationUnsubscriber.type">ActorClassificationUnsubscriber</a>.<a href="EventBusUnsubscribers.scala.html#akka.event.ActorClassificationUnsubscriber;Unregister" title="(actor: akka.actor.ActorRef, seq: Int)akka.event.ActorClassificationUnsubscriber.Unregister">Unregister</a><a title="akka.event.ActorClassificationUnsubscriber.Unregister" id="akka.event;ManagedActorClassification.unregisterFromUnsubscriber.x$13" class="delimiter">(</a><a href="#akka.event;ManagedActorClassification.unregisterFromUnsubscriber.subscriber" title="akka.actor.ActorRef">subscriber</a>, <a href="#akka.event;ManagedActorClassification.unregisterFromUnsubscriber.seqNr" title="Int">seqNr</a><span class="delimiter">)</span>
    true
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Maps ActorRefs to ActorRefs to form an EventBus where ActorRefs can listen to other ActorRefs
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;Use Managed ActorClassification instead&quot;</span>, <span class="string">&quot;2.4&quot;</span><span class="delimiter">)</span>
trait <a title="trait ActorClassification extends AnyRef" id="akka.event;ActorClassification">ActorClassification</a> <span title="Unit" class="delimiter">{</span> this: ActorEventBus with ActorClassifier ⇒
  import java.util.concurrent.ConcurrentHashMap
  import scala.annotation.tailrec
  private val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.empty">empty</a> = immutable.<span title="scala.collection.immutable.TreeSet.type">TreeSet</span>.<span title="[A](implicit ordering: Ordering[A])scala.collection.immutable.TreeSet[A]">empty</span><span title="(implicit ordering: Ordering[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span><a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span>
  private val <a title="java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]" id="akka.event;ActorClassification.mappings">mappings</a> = new <span title="java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">ConcurrentHashMap</span><span class="delimiter">[</span>ActorRef, immutable.TreeSet<span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.mapSize" title="=&gt; Int">mapSize</a><span class="delimiter">)</span>

  @tailrec
  protected final def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean" id="akka.event;ActorClassification.associate">associate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorClassification.associate.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ActorClassification.associate.monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val current = <a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.associate.current">get</a> <a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>
    <a href="#akka.event;ActorClassification.associate.current" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">current</a> match <span class="delimiter">{</span>
      case null ⇒
        if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> false
        else <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: akka.actor.ActorRef, x$2: scala.collection.immutable.TreeSet[akka.actor.ActorRef])scala.collection.immutable.TreeSet[akka.actor.ActorRef]">putIfAbsent</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.empty" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef]">empty</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.TreeSet[akka.actor.ActorRef]">+</span> <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <a href="#akka.event;ActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
          else if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> <span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span> else true
        <span class="delimiter">}</span>
      case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.associate.raw">raw</a>: immutable.<span title="scala.collection.immutable.TreeSet[_]">TreeSet</span><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
        val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.associate.v">v</a> = <a href="#akka.event;ActorClassification.associate.raw" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">raw</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span>
        if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> false
        if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a>.<span title="(elem: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span><span class="delimiter">)</span> true
        else <span class="delimiter">{</span>
          val added = <a href="#akka.event;ActorClassification.associate.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.associate.added">+</a> <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a>
          if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: akka.actor.ActorRef, x$2: scala.collection.immutable.TreeSet[akka.actor.ActorRef], x$3: scala.collection.immutable.TreeSet[akka.actor.ActorRef])Boolean">replace</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.associate.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a>, <a href="#akka.event;ActorClassification.associate.added" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">added</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
          else if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> <span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.associate.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.associate.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span> else true
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected final def <a title="(monitored: akka.actor.ActorRef)scala.collection.immutable.Iterable[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b)">dissociate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorClassification.dissociate(bc973e2a7b).monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
    @tailrec
    def <a title="(monitored: akka.actor.ActorRef)scala.collection.immutable.Iterable[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored">dissociateAsMonitored</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val current = <a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.current">get</a> <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a>
      <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.current" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">current</a> match <span class="delimiter">{</span>
        case null ⇒ <a href="#akka.event;ActorClassification.empty" title="=&gt; scala.collection.immutable.TreeSet[akka.actor.ActorRef]">empty</a>
        case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.raw">raw</a>: immutable.<span title="scala.collection.immutable.TreeSet[_]">TreeSet</span><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
          val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.v">v</a> = <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.raw" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">raw</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span>
          if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: Any, x$2: Any)Boolean">remove</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored" title="(monitored: akka.actor.ActorRef)scala.collection.immutable.Iterable[akka.actor.ActorRef]">dissociateAsMonitored</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span>
          else <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(monitor: akka.actor.ActorRef)Unit" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor">dissociateAsMonitor</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      val <a title="java.util.Iterator[java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.i">i</a> = <a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="()java.util.Set[java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]]">entrySet</span>.<span title="()java.util.Iterator[java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]]">iterator</span>
      while <span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.i" title="java.util.Iterator[java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]]">i</a>.<span title="()Boolean">hasNext</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.while$5" title="()Unit" class="delimiter">{</a>
        val <a title="java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.entry">entry</a> = <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.i" title="java.util.Iterator[java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]]">i</a>.<span title="()java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">next</span><span class="delimiter">(</span><span class="delimiter">)</span>
        val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.v">v</a> = <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.entry" title="java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">entry</a>.<span title="()scala.collection.immutable.TreeSet[akka.actor.ActorRef]">getValue</span>
        <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a> match <span class="delimiter">{</span>
          case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.raw">raw</a>: immutable.<span title="scala.collection.immutable.TreeSet[_]">TreeSet</span><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
            val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.monitors">monitors</a> = <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.raw" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">raw</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span>
            if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.monitors" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">monitors</a>.<span title="(elem: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.entry" title="java.util.Map.Entry[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">entry</a>.<span title="()akka.actor.ActorRef">getKey</span>, <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor.monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span>
          case _ ⇒ <span class="comment">//Dun care</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    try <span class="delimiter">{</span> <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitored" title="(monitored: akka.actor.ActorRef)scala.collection.immutable.Iterable[akka.actor.ActorRef]">dissociateAsMonitored</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span> <span class="delimiter">}</span> finally <span class="delimiter">{</span> <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).dissociateAsMonitor" title="(monitor: akka.actor.ActorRef)Unit">dissociateAsMonitor</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(bc973e2a7b).monitored" title="akka.actor.ActorRef">monitored</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @tailrec
  protected final def <a title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean" id="akka.event;ActorClassification.dissociate(15f5983dcb)">dissociate</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.event;ActorClassification.dissociate(15f5983dcb).monitored">monitored</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.actor.ActorRef" id="akka.event;ActorClassification.dissociate(15f5983dcb).monitor">monitor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val current = <a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(15f5983dcb).current">get</a> <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>
    <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).current" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">current</a> match <span class="delimiter">{</span>
      case null ⇒ false
      case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(15f5983dcb).raw">raw</a>: immutable.<span title="scala.collection.immutable.TreeSet[_]">TreeSet</span><span class="delimiter">[</span>_<span class="delimiter">]</span> ⇒
        val <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(15f5983dcb).v">v</a> = <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).raw" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">raw</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">TreeSet</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span>
        val removed = <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a> <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.dissociate(15f5983dcb).removed">-</a> <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a>
        if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).removed" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">removed</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).raw" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">raw</a><span class="delimiter">)</span> false
        else if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).removed" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">removed</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: Any, x$2: Any)Boolean">remove</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span> else true
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: akka.actor.ActorRef, x$2: scala.collection.immutable.TreeSet[akka.actor.ActorRef], x$3: scala.collection.immutable.TreeSet[akka.actor.ActorRef])Boolean">replace</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).v" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">v</a>, <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).removed" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">removed</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitored" title="akka.actor.ActorRef">monitored</a>, <a href="#akka.event;ActorClassification.dissociate(15f5983dcb).monitor" title="akka.actor.ActorRef">monitor</a><span class="delimiter">)</span> else true
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the Classifier associated with the specified Event
   */</span>
  protected def <a title="(event: ActorClassification.this.Event)ActorClassification.this.Classifier" id="akka.event;ActorClassification.classify">classify</a><span class="delimiter">(</span><a title="ActorClassification.this.Event" id="akka.event;ActorClassification.classify.event">event</a>: <a href="#akka.event;EventBus;Event" title="ActorClassification.this.Event">Event</a><span class="delimiter">)</span>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Classifier">Classifier</a>

  <span class="comment">/**
   * This is a size hint for the number of Classifiers you expect to have (use powers of 2)
   */</span>
  protected def <a title="=&gt; Int" id="akka.event;ActorClassification.mapSize">mapSize</a>: <span title="Int">Int</span>

  def <a title="(event: ActorClassification.this.Event)Unit" id="akka.event;ActorClassification.publish">publish</a><span class="delimiter">(</span><a title="ActorClassification.this.Event" id="akka.event;ActorClassification.publish.event">event</a>: <a href="#akka.event;EventBus;Event" title="ActorClassification.this.Event">Event</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.event;ActorClassification.mappings" title="=&gt; java.util.concurrent.ConcurrentHashMap[akka.actor.ActorRef,scala.collection.immutable.TreeSet[akka.actor.ActorRef]]">mappings</a>.<span title="(x$1: Any)scala.collection.immutable.TreeSet[akka.actor.ActorRef]">get</span><span class="delimiter">(</span><a href="#akka.event;ActorClassification.classify" title="(event: ActorClassification.this.Event)ActorClassification.this.Classifier">classify</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.publish.event" title="ActorClassification.this.Event">event</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case null ⇒ <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    case <a title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]" id="akka.event;ActorClassification.publish.some">some</a> ⇒ <a href="#akka.event;ActorClassification.publish.some" title="scala.collection.immutable.TreeSet[akka.actor.ActorRef]">some</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.event;ActorClassification.publish.$anonfun.qual$4">_</a> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.event;ActorClassification.publish.$anonfun.x$16">!</a> <a href="#akka.event;ActorClassification.publish.event" title="ActorClassification.this.Event" id="akka.event;ActorClassification.publish.$anonfun.x$15">event</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(subscriber: ActorClassification.this.Subscriber, to: ActorClassification.this.Classifier)Boolean" id="akka.event;ActorClassification.subscribe">subscribe</a><span class="delimiter">(</span><a title="ActorClassification.this.Subscriber" id="akka.event;ActorClassification.subscribe.subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Subscriber">Subscriber</a>, <a title="ActorClassification.this.Classifier" id="akka.event;ActorClassification.subscribe.to">to</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.subscribe.subscriber" title="ActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.subscribe.to" title="ActorClassification.this.Classifier">to</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Classifier is null&quot;)" class="string">&quot;Classifier is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ActorClassification.associate" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">associate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.subscribe.to" title="ActorClassification.this.Classifier">to</a>, <a href="#akka.event;ActorClassification.subscribe.subscriber" title="ActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: ActorClassification.this.Subscriber, from: ActorClassification.this.Classifier)Boolean" id="akka.event;ActorClassification.unsubscribe(e158c8e5fa)">unsubscribe</a><span class="delimiter">(</span><a title="ActorClassification.this.Subscriber" id="akka.event;ActorClassification.unsubscribe(e158c8e5fa).subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Subscriber">Subscriber</a>, <a title="ActorClassification.this.Classifier" id="akka.event;ActorClassification.unsubscribe(e158c8e5fa).from">from</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Classifier">Classifier</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.unsubscribe(e158c8e5fa).subscriber" title="ActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.unsubscribe(e158c8e5fa).from" title="ActorClassification.this.Classifier">from</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Classifier is null&quot;)" class="string">&quot;Classifier is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ActorClassification.dissociate(15f5983dcb)" title="(monitored: akka.actor.ActorRef, monitor: akka.actor.ActorRef)Boolean">dissociate</a><span class="delimiter">(</span><a href="#akka.event;ActorClassification.unsubscribe(e158c8e5fa).from" title="ActorClassification.this.Classifier">from</a>, <a href="#akka.event;ActorClassification.unsubscribe(e158c8e5fa).subscriber" title="ActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>

  def <a title="(subscriber: ActorClassification.this.Subscriber)Unit" id="akka.event;ActorClassification.unsubscribe(bd456e7b39)">unsubscribe</a><span class="delimiter">(</span><a title="ActorClassification.this.Subscriber" id="akka.event;ActorClassification.unsubscribe(bd456e7b39).subscriber">subscriber</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="ActorClassification.this.Subscriber">Subscriber</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.event;ActorClassification.unsubscribe(bd456e7b39).subscriber" title="ActorClassification.this.Subscriber">subscriber</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Subscriber is null&quot;)" class="string">&quot;Subscriber is null&quot;</span><span class="delimiter">)</span>
    else <a href="#akka.event;ActorClassification.dissociate(bc973e2a7b)" title="(monitored: akka.actor.ActorRef)scala.collection.immutable.Iterable[akka.actor.ActorRef]">dissociate</a><span title="Unit" class="delimiter">(</span><a href="#akka.event;ActorClassification.unsubscribe(bd456e7b39).subscriber" title="ActorClassification.this.Subscriber">subscriber</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
