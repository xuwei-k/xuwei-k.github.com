<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/io/TcpOutgoingConnection.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.io

import java.net.InetSocketAddress
import java.nio.channels.<span class="delimiter">{</span> SelectionKey, SocketChannel <span class="delimiter">}</span>
import scala.util.control.NonFatal
import scala.collection.immutable
import scala.concurrent.duration._
import akka.actor.<span class="delimiter">{</span> ReceiveTimeout, ActorRef <span class="delimiter">}</span>
import akka.io.<a href="Inet.scala.html#akka.io.Inet" title="akka.io.Inet.type">Inet</a>.SocketOption
import akka.io.<a href="TcpConnection.scala.html#akka.io.TcpConnection" title="akka.io.TcpConnection.type">TcpConnection</a>.CloseInformation
import akka.io.<a href="SelectionHandler.scala.html#akka.io.SelectionHandler" title="akka.io.SelectionHandler.type">SelectionHandler</a>._
import akka.io.<a href="Tcp.scala.html#akka.io.Tcp" title="akka.io.Tcp.type">Tcp</a>._

<span class="comment">/**
 * An actor handling the connection state machine for an outgoing connection
 * to be established.
 *
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>io<span class="delimiter">]</span> class <a title="class TcpOutgoingConnection extends akka.io.TcpConnection" id="akka.io;TcpOutgoingConnection">TcpOutgoingConnection</a><a href="#akka.io;TcpOutgoingConnection" title="akka.io.TcpOutgoingConnection" class="delimiter">(</a><a title="akka.io.TcpExt" id="akka.io;TcpOutgoingConnection._tcp">_tcp</a>: <a href="Tcp.scala.html#akka.io;TcpExt" title="akka.io.TcpExt">TcpExt</a>,
                                        <a title="akka.io.ChannelRegistry" id="akka.io;TcpOutgoingConnection.channelRegistry">channelRegistry</a>: <a href="SelectionHandler.scala.html#akka.io;ChannelRegistry" title="akka.io.ChannelRegistry">ChannelRegistry</a>,
                                        <a title="akka.actor.ActorRef" id="akka.io;TcpOutgoingConnection.commander">commander</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
                                        <a title="akka.io.Tcp.Connect" id="akka.io;TcpOutgoingConnection.connect">connect</a>: <a href="Tcp.scala.html#akka.io.Tcp;Connect" title="akka.io.Tcp.Connect">Connect</a><span class="delimiter">)</span>
  extends <a href="TcpConnection.scala.html#akka.io;TcpConnection" title="akka.io.TcpConnection">TcpConnection</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection._tcp" title="akka.io.TcpExt">_tcp</a>, <span title="java.nio.channels.SocketChannel.type">SocketChannel</span>.<span title="()java.nio.channels.SocketChannel">open</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Boolean)java.nio.channels.SelectableChannel">configureBlocking</span><span class="delimiter">(</span>false<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.nio.channels.SocketChannel" class="delimiter">[</span><span title="java.nio.channels.SocketChannel">SocketChannel</span><span class="delimiter">]</span>, <a href="#akka.io;TcpOutgoingConnection.connect" title="akka.io.Tcp.Connect">connect</a>.<a href="Tcp.scala.html#akka.io.Tcp;Connect.pullMode" title="=&gt; Boolean">pullMode</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  import <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>._
  import <a href="#akka.io;TcpOutgoingConnection.connect" title="akka.io.Tcp.Connect">connect</a>._

  <a href="TcpConnection.scala.html#akka.io;TcpConnection.signDeathPact" title="(actor: akka.actor.ActorRef)Unit">signDeathPact</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.commander" title="akka.actor.ActorRef">commander</a><span class="delimiter">)</span>

  <a href="Tcp.scala.html#akka.io.Tcp;Connect.options" title="=&gt; scala.collection.immutable.Traversable[akka.io.Inet.SocketOption]">options</a>.<span title="(f: akka.io.Inet.SocketOption =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.<local TcpOutgoingConnection>.$anonfun.x$1" title="akka.io.Inet.SocketOption">_</a>.<a href="Inet.scala.html#akka.io.Inet;SocketOption.beforeConnect" title="(s: java.net.Socket)Unit">beforeConnect</a><span class="delimiter">(</span><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>.<span title="()java.net.Socket">socket</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <a href="Tcp.scala.html#akka.io.Tcp;Connect.localAddress" title="=&gt; Option[java.net.InetSocketAddress]">localAddress</a>.<span title="(f: java.net.InetSocketAddress =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>.<a href="#akka.io;TcpOutgoingConnection.<local TcpOutgoingConnection>.eta$0$1" title="()java.net.Socket">socket</a>.<a href="#akka.io;TcpOutgoingConnection.<local TcpOutgoingConnection>.$anonfun.x$1" title="(x$1: java.net.SocketAddress)Unit">bind</a><span class="delimiter">)</span>
  <a href="#akka.io;TcpOutgoingConnection.channelRegistry" title="akka.io.ChannelRegistry">channelRegistry</a>.<a href="SelectionHandler.scala.html#akka.io;ChannelRegistry.register" title="(channel: java.nio.channels.SelectableChannel, initialOps: Int)(implicit channelActor: akka.actor.ActorRef)Unit">register</a><a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef" class="delimiter">(</a><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <a href="Tcp.scala.html#akka.io.Tcp;Connect.timeout" title="=&gt; Option[scala.concurrent.duration.FiniteDuration]">timeout</a> <span title="(f: scala.concurrent.duration.FiniteDuration =&gt; Unit)Unit">foreach</span> <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a> <span class="comment">//Initiate connection timeout if supplied</span>

  private def <a title="()Unit" id="akka.io;TcpOutgoingConnection.stop">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="TcpConnection.scala.html#akka.io;TcpConnection.stopWith" title="(closeInfo: akka.io.TcpConnection.CloseInformation)Unit">stopWith</a><span class="delimiter">(</span><a href="TcpConnection.scala.html#akka.io.TcpConnection;CloseInformation" title="(notificationsTo: Set[akka.actor.ActorRef], closedEvent: akka.io.Tcp.Event)akka.io.TcpConnection.CloseInformation">CloseInformation</a><span class="delimiter">(</span><span title="(elems: akka.actor.ActorRef*)scala.collection.immutable.Set[akka.actor.ActorRef]">Set</span><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.commander" title="akka.actor.ActorRef">commander</a><span class="delimiter">)</span>, <a href="#akka.io;TcpOutgoingConnection.connect" title="akka.io.Tcp.Connect">connect</a>.<a href="Tcp.scala.html#akka.io.Tcp;Command.failureMessage" title="=&gt; akka.io.Tcp.CommandFailed">failureMessage</a><span class="delimiter">)</span><span class="delimiter">)</span>

  private def <a title="(thunk: =&gt; Unit)Unit" id="akka.io;TcpOutgoingConnection.reportConnectFailure">reportConnectFailure</a><span class="delimiter">(</span><a title="=&gt; Unit" id="akka.io;TcpOutgoingConnection.reportConnectFailure.thunk">thunk</a>: ⇒ Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure.thunk" title="=&gt; Unit">thunk</a>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.io;TcpOutgoingConnection.reportConnectFailure.e">e</a><span class="delimiter">)</span> ⇒
        <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Could not establish connection to [{}] due to {}&quot;)" class="string">&quot;Could not establish connection to [{}] due to {}&quot;</span>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>, <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure.e" title="Throwable">e</a><span class="delimiter">)</span>
        <a href="#akka.io;TcpOutgoingConnection.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; TcpOutgoingConnection.this.Receive" id="akka.io;TcpOutgoingConnection.receive">receive</a>: <span title="TcpOutgoingConnection.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.io;TcpOutgoingConnection.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="akka.io.ChannelRegistration" id="akka.io;TcpOutgoingConnection.receive;$anonfun.isDefinedAt.registration">registration</a>: <a href="SelectionHandler.scala.html#akka.io;ChannelRegistration" title="akka.io.ChannelRegistration">ChannelRegistration</a> ⇒
      <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure" title="(thunk: =&gt; Unit)Unit">reportConnectFailure</a> <span title="Boolean(true)" class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>.<span title="()Boolean">isUnresolved</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Resolving {} before connecting&quot;)" class="string">&quot;Resolving {} before connecting&quot;</span>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>.<span title="()String">getHostName</span><span class="delimiter">)</span>
          <a href="Dns.scala.html#akka.io.Dns" title="akka.io.Dns.type">Dns</a>.<a href="Dns.scala.html#akka.io.Dns.resolve" title="(name: String)(system: akka.actor.ActorSystem, sender: akka.actor.ActorRef)Option[akka.io.Dns.Resolved]">resolve</a><span class="delimiter">(</span><a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>.<span title="()String">getHostName</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>, <a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case <span title="None.type">None</span> ⇒
              <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.resolving" title="(registration: akka.io.ChannelRegistration)TcpOutgoingConnection.this.Receive">resolving</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.receive;$anonfun.isDefinedAt.registration" title="akka.io.ChannelRegistration">registration</a><span class="delimiter">)</span><span class="delimiter">)</span>
            case Some<span class="delimiter">(</span><a title="akka.io.Dns.Resolved" id="akka.io;TcpOutgoingConnection.receive;$anonfun.applyOrElse.resolved">resolved</a><span class="delimiter">)</span> ⇒
              <a href="#akka.io;TcpOutgoingConnection.register" title="(address: java.net.InetSocketAddress, registration: akka.io.ChannelRegistration)Unit">register</a><span class="delimiter">(</span>new <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.receive;$anonfun.applyOrElse.resolved" title="akka.io.Dns.Resolved">resolved</a>.<a href="Dns.scala.html#akka.io.Dns;Resolved.addr" title="=&gt; java.net.InetAddress">addr</a>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>.<span title="()Int">getPort</span><span class="delimiter">)</span>, <a href="#akka.io;TcpOutgoingConnection.receive;$anonfun.isDefinedAt.registration" title="akka.io.ChannelRegistration">registration</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="#akka.io;TcpOutgoingConnection.register" title="(address: java.net.InetSocketAddress, registration: akka.io.ChannelRegistration)Unit">register</a><span class="delimiter">(</span><a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>, <a href="#akka.io;TcpOutgoingConnection.receive;$anonfun.isDefinedAt.registration" title="akka.io.ChannelRegistration">registration</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(registration: akka.io.ChannelRegistration)TcpOutgoingConnection.this.Receive" id="akka.io;TcpOutgoingConnection.resolving">resolving</a><span class="delimiter">(</span><a title="akka.io.ChannelRegistration" id="akka.io;TcpOutgoingConnection.resolving.registration">registration</a>: <a href="SelectionHandler.scala.html#akka.io;ChannelRegistration" title="akka.io.ChannelRegistration">ChannelRegistration</a><span class="delimiter">)</span>: <span title="TcpOutgoingConnection.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.io;TcpOutgoingConnection.resolving;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="akka.io.Dns.Resolved" id="akka.io;TcpOutgoingConnection.resolving;$anonfun.isDefinedAt.resolved">resolved</a>: Dns.<a href="Dns.scala.html#akka.io.Dns;Resolved" title="akka.io.Dns.Resolved">Resolved</a> ⇒
      <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure" title="(thunk: =&gt; Unit)Unit">reportConnectFailure</a> <span title="Boolean(true)" class="delimiter">{</span>
        <a href="#akka.io;TcpOutgoingConnection.register" title="(address: java.net.InetSocketAddress, registration: akka.io.ChannelRegistration)Unit">register</a><span class="delimiter">(</span>new <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.resolving;$anonfun.isDefinedAt.resolved" title="akka.io.Dns.Resolved">resolved</a>.<a href="Dns.scala.html#akka.io.Dns;Resolved.addr" title="=&gt; java.net.InetAddress">addr</a>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a>.<span title="()Int">getPort</span><span class="delimiter">)</span>, <a href="#akka.io;TcpOutgoingConnection.resolving.registration" title="akka.io.ChannelRegistration">registration</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(address: java.net.InetSocketAddress, registration: akka.io.ChannelRegistration)Unit" id="akka.io;TcpOutgoingConnection.register">register</a><span class="delimiter">(</span><a title="java.net.InetSocketAddress" id="akka.io;TcpOutgoingConnection.register.address">address</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span>, <a title="akka.io.ChannelRegistration" id="akka.io;TcpOutgoingConnection.register.registration">registration</a>: <a href="SelectionHandler.scala.html#akka.io;ChannelRegistration" title="akka.io.ChannelRegistration">ChannelRegistration</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure" title="(thunk: =&gt; Unit)Unit">reportConnectFailure</a> <span class="delimiter">{</span>
      <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Attempting connection to [{}]&quot;)" class="string">&quot;Attempting connection to [{}]&quot;</span>, <a href="#akka.io;TcpOutgoingConnection.register.address" title="java.net.InetSocketAddress">address</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>.<span title="(x$1: java.net.SocketAddress)Boolean">connect</span><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.register.address" title="java.net.InetSocketAddress">address</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="TcpConnection.scala.html#akka.io;TcpConnection.completeConnect" title="(registration: akka.io.ChannelRegistration, commander: akka.actor.ActorRef, options: scala.collection.immutable.Traversable[akka.io.Inet.SocketOption])Unit">completeConnect</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.register.registration" title="akka.io.ChannelRegistration">registration</a>, <a href="#akka.io;TcpOutgoingConnection.commander" title="akka.actor.ActorRef">commander</a>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.options" title="=&gt; scala.collection.immutable.Traversable[akka.io.Inet.SocketOption]">options</a><span class="delimiter">)</span>
      else <span class="delimiter">{</span>
        <a href="#akka.io;TcpOutgoingConnection.register.registration" title="akka.io.ChannelRegistration">registration</a>.<a href="SelectionHandler.scala.html#akka.io;ChannelRegistration.enableInterest" title="(op: Int)Unit">enableInterest</a><span class="delimiter">(</span>SelectionKey.<span title="Int(8)">OP_CONNECT</span><span class="delimiter">)</span>
        <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.connecting" title="(registration: akka.io.ChannelRegistration, remainingFinishConnectRetries: Int)TcpOutgoingConnection.this.Receive">connecting</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.register.registration" title="akka.io.ChannelRegistration">registration</a>, <a href="TcpConnection.scala.html#akka.io;TcpConnection.tcp" title="=&gt; akka.io.TcpExt">tcp</a>.<a href="Tcp.scala.html#akka.io;TcpExt.Settings" title="=&gt; TcpOutgoingConnection.this.tcp.Settings">Settings</a>.<a href="Tcp.scala.html#akka.io;TcpExt;Settings.FinishConnectRetries" title="=&gt; Int">FinishConnectRetries</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(registration: akka.io.ChannelRegistration, remainingFinishConnectRetries: Int)TcpOutgoingConnection.this.Receive" id="akka.io;TcpOutgoingConnection.connecting">connecting</a><span class="delimiter">(</span><a title="akka.io.ChannelRegistration" id="akka.io;TcpOutgoingConnection.connecting.registration">registration</a>: <a href="SelectionHandler.scala.html#akka.io;ChannelRegistration" title="akka.io.ChannelRegistration">ChannelRegistration</a>, <a title="Int" id="akka.io;TcpOutgoingConnection.connecting.remainingFinishConnectRetries">remainingFinishConnectRetries</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="TcpOutgoingConnection.this.Receive">Receive</span> = <span class="delimiter">{</span>
    <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.io;TcpOutgoingConnection.connecting;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a href="SelectionHandler.scala.html#akka.io.SelectionHandler.ChannelConnectable" title="akka.io.SelectionHandler.ChannelConnectable.type">ChannelConnectable</a> ⇒
        <a href="#akka.io;TcpOutgoingConnection.reportConnectFailure" title="(thunk: =&gt; Unit)Unit">reportConnectFailure</a> <span title="Boolean(true)" class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>.<span title="()Boolean">finishConnect</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="Tcp.scala.html#akka.io.Tcp;Connect.timeout" title="=&gt; Option[scala.concurrent.duration.FiniteDuration]">timeout</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span><span class="delimiter">)</span> <span class="comment">// Clear the timeout</span>
            <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Connection established to [{}]&quot;)" class="string">&quot;Connection established to [{}]&quot;</span>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a><span class="delimiter">)</span>
            <a href="TcpConnection.scala.html#akka.io;TcpConnection.completeConnect" title="(registration: akka.io.ChannelRegistration, commander: akka.actor.ActorRef, options: scala.collection.immutable.Traversable[akka.io.Inet.SocketOption])Unit">completeConnect</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.connecting.registration" title="akka.io.ChannelRegistration">registration</a>, <a href="#akka.io;TcpOutgoingConnection.commander" title="akka.actor.ActorRef">commander</a>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.options" title="=&gt; scala.collection.immutable.Traversable[akka.io.Inet.SocketOption]">options</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.connecting.remainingFinishConnectRetries" title="Int">remainingFinishConnectRetries</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(066d40b78a)" title="(delay: scala.concurrent.duration.FiniteDuration)(f: =&gt; Unit)(implicit executor: scala.concurrent.ExecutionContext)akka.actor.Cancellable">scheduleOnce</a><span class="delimiter">(</span><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millisecond</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#akka.io;TcpOutgoingConnection.channelRegistry" title="akka.io.ChannelRegistry">channelRegistry</a>.<a href="SelectionHandler.scala.html#akka.io;ChannelRegistry.register" title="(channel: java.nio.channels.SelectableChannel, initialOps: Int)(implicit channelActor: akka.actor.ActorRef)Unit">register</a><a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef" class="delimiter">(</a><a href="TcpConnection.scala.html#akka.io;TcpConnection.channel" title="=&gt; java.nio.channels.SocketChannel">channel</a>, SelectionKey.<span title="Int(8)">OP_CONNECT</span><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">(</span><a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor">dispatcher</a><span class="delimiter">)</span>
              <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.connecting" title="(registration: akka.io.ChannelRegistration, remainingFinishConnectRetries: Int)TcpOutgoingConnection.this.Receive">connecting</a><span class="delimiter">(</span><a href="#akka.io;TcpOutgoingConnection.connecting.registration" title="akka.io.ChannelRegistration">registration</a>, <a href="#akka.io;TcpOutgoingConnection.connecting.remainingFinishConnectRetries" title="Int">remainingFinishConnectRetries</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(cc2e600322)" title="(message: String)Unit">debug</a><span class="delimiter">(</span><span class="string">&quot;Could not establish connection because finishConnect &quot;</span> <span title="String(&quot;Could not establish connection because finishConnect never returned true (consider increasing akka.io.tcp.finish-connect-retries)&quot;)">+</span>
                <span class="string">&quot;never returned true (consider increasing akka.io.tcp.finish-connect-retries)&quot;</span><span class="delimiter">)</span>
              <a href="#akka.io;TcpOutgoingConnection.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      case <a href="../actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒
        if <span class="delimiter">(</span><a href="Tcp.scala.html#akka.io.Tcp;Connect.timeout" title="=&gt; Option[scala.concurrent.duration.FiniteDuration]">timeout</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span><span class="delimiter">)</span> <span class="comment">// Clear the timeout</span>
        <a href="../actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Connect timeout expired, could not establish connection to [{}]&quot;)" class="string">&quot;Connect timeout expired, could not establish connection to [{}]&quot;</span>, <a href="Tcp.scala.html#akka.io.Tcp;Connect.remoteAddress" title="=&gt; java.net.InetSocketAddress">remoteAddress</a><span class="delimiter">)</span>
        <a href="#akka.io;TcpOutgoingConnection.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
