<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/dispatch/BalancingDispatcher.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.dispatch

import akka.actor.<span class="delimiter">{</span> ActorCell, ActorRef <span class="delimiter">}</span>
import akka.dispatch.sysmsg._
import scala.annotation.tailrec
import scala.concurrent.duration.Duration
import akka.util.Helpers
import java.util.<span class="delimiter">{</span> Comparator, Iterator <span class="delimiter">}</span>
import java.util.concurrent.<span class="delimiter">{</span> Executor, LinkedBlockingQueue, ConcurrentLinkedQueue, ConcurrentSkipListSet <span class="delimiter">}</span>
import akka.actor.ActorSystemImpl
import scala.concurrent.duration.FiniteDuration

<span class="comment">/**
 * An executor based event driven dispatcher which will try to redistribute work from busy actors to idle actors. It is assumed
 * that all actors using the same instance of this dispatcher can process all messages that have been sent to one of the actors. I.e. the
 * actors belong to a pool of actors, and to the client there is no guarantee about which actor instance actually processes a given message.
 * &lt;p/&gt;
 * Although the technique used in this implementation is commonly known as &quot;work stealing&quot;, the actual implementation is probably
 * best described as &quot;work donating&quot; because the actor of which work is being stolen takes the initiative.
 * &lt;p/&gt;
 * The preferred way of creating dispatchers is to define configuration of it and use the
 * the `lookup` method in [[akka.dispatch.Dispatchers]].
 *
 * @see akka.dispatch.BalancingDispatcher
 * @see akka.dispatch.Dispatchers
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;Use BalancingPool instead of BalancingDispatcher&quot;</span>, <span class="string">&quot;2.3&quot;</span><span class="delimiter">)</span>
class <a title="class BalancingDispatcher extends akka.dispatch.Dispatcher" id="akka.dispatch;BalancingDispatcher">BalancingDispatcher</a><a href="#akka.dispatch;BalancingDispatcher" title="akka.dispatch.BalancingDispatcher" class="delimiter">(</a>
  <a title="akka.dispatch.MessageDispatcherConfigurator" id="akka.dispatch;BalancingDispatcher._configurator">_configurator</a>: <a href="AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcherConfigurator" title="akka.dispatch.MessageDispatcherConfigurator">MessageDispatcherConfigurator</a>,
  <a title="String" id="akka.dispatch;BalancingDispatcher._id">_id</a>: <span title="String">String</span>,
  <a title="Int" id="akka.dispatch;BalancingDispatcher.throughput">throughput</a>: <span title="Int">Int</span>,
  <a title="scala.concurrent.duration.Duration" id="akka.dispatch;BalancingDispatcher.throughputDeadlineTime">throughputDeadlineTime</a>: <span title="scala.concurrent.duration.Duration">Duration</span>,
  <a title="akka.dispatch.MailboxType" id="akka.dispatch;BalancingDispatcher._mailboxType">_mailboxType</a>: <a href="Mailbox.scala.html#akka.dispatch;MailboxType" title="akka.dispatch.MailboxType">MailboxType</a>,
  <a title="akka.dispatch.ExecutorServiceFactoryProvider" id="akka.dispatch;BalancingDispatcher._executorServiceFactoryProvider">_executorServiceFactoryProvider</a>: <a href="ThreadPoolBuilder.scala.html#akka.dispatch;ExecutorServiceFactoryProvider" title="akka.dispatch.ExecutorServiceFactoryProvider">ExecutorServiceFactoryProvider</a>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.dispatch;BalancingDispatcher._shutdownTimeout">_shutdownTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
  <a title="Boolean" id="akka.dispatch;BalancingDispatcher.attemptTeamWork">attemptTeamWork</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>
  extends <a href="Dispatcher.scala.html#akka.dispatch;Dispatcher" title="akka.dispatch.Dispatcher">Dispatcher</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher._configurator" title="akka.dispatch.MessageDispatcherConfigurator">_configurator</a>, <a href="#akka.dispatch;BalancingDispatcher._id" title="String">_id</a>, <a href="#akka.dispatch;BalancingDispatcher.throughput" title="Int">throughput</a>, <a href="#akka.dispatch;BalancingDispatcher.throughputDeadlineTime" title="scala.concurrent.duration.Duration">throughputDeadlineTime</a>, <a href="#akka.dispatch;BalancingDispatcher._executorServiceFactoryProvider" title="akka.dispatch.ExecutorServiceFactoryProvider">_executorServiceFactoryProvider</a>, <a href="#akka.dispatch;BalancingDispatcher._shutdownTimeout" title="scala.concurrent.duration.FiniteDuration">_shutdownTimeout</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> val <a title="java.util.concurrent.ConcurrentSkipListSet[akka.actor.ActorCell]" id="akka.dispatch;BalancingDispatcher.team">team</a> = new <span title="java.util.concurrent.ConcurrentSkipListSet[akka.actor.ActorCell]">ConcurrentSkipListSet</span><span class="delimiter">[</span>ActorCell<span class="delimiter">]</span><span class="delimiter">(</span>
    <a href="../util/Helpers.scala.html#akka.util.Helpers" title="akka.util.Helpers.type">Helpers</a>.<a href="../util/Helpers.scala.html#akka.util.Helpers.identityHashComparator" title="(comp: java.util.Comparator[akka.actor.ActorCell])java.util.Comparator[akka.actor.ActorCell]">identityHashComparator</a><span class="delimiter">(</span>new <a title="&lt;$anon: java.util.Comparator[akka.actor.ActorCell]&gt; extends Object with java.util.Comparator[akka.actor.ActorCell]" id="akka.dispatch;BalancingDispatcher.team;$anon">Comparator</a><span class="delimiter">[</span>ActorCell<span class="delimiter">]</span> <span class="delimiter">{</span>
      def <a title="(l: akka.actor.ActorCell, r: akka.actor.ActorCell)Int" id="akka.dispatch;BalancingDispatcher.team;$anon.compare">compare</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.dispatch;BalancingDispatcher.team;$anon.compare.l">l</a>: <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a>, <a title="akka.actor.ActorCell" id="akka.dispatch;BalancingDispatcher.team;$anon.compare.r">r</a>: <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">)</span> = <a href="#akka.dispatch;BalancingDispatcher.team;$anon.compare.l" title="akka.actor.ActorCell">l</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a> <span title="(x$1: akka.actor.ActorPath)Int">compareTo</span> <a href="#akka.dispatch;BalancingDispatcher.team;$anon.compare.r" title="akka.actor.ActorCell">r</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> val <a title="akka.dispatch.MessageQueue" id="akka.dispatch;BalancingDispatcher.messageQueue">messageQueue</a>: <a href="Mailbox.scala.html#akka.dispatch;MessageQueue" title="akka.dispatch.MessageQueue">MessageQueue</a> = <a href="#akka.dispatch;BalancingDispatcher._mailboxType" title="akka.dispatch.MailboxType">_mailboxType</a>.<a href="Mailbox.scala.html#akka.dispatch;MailboxType.create" title="(owner: Option[akka.actor.ActorRef], system: Option[akka.actor.ActorSystem])akka.dispatch.MessageQueue">create</a><span class="delimiter">(</span><span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span>

  private class <a title="class SharingMailbox extends akka.dispatch.Mailbox with akka.dispatch.DefaultSystemMessageQueue" id="akka.dispatch;BalancingDispatcher;SharingMailbox">SharingMailbox</a><a href="#akka.dispatch;BalancingDispatcher;SharingMailbox" title="BalancingDispatcher.this.SharingMailbox" class="delimiter">(</a>val <a title="akka.actor.ActorSystemImpl" id="akka.dispatch;BalancingDispatcher;SharingMailbox.system">system</a>: <a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>, <a title="akka.dispatch.MessageQueue" id="akka.dispatch;BalancingDispatcher;SharingMailbox._messageQueue">_messageQueue</a>: <a href="Mailbox.scala.html#akka.dispatch;MessageQueue" title="akka.dispatch.MessageQueue">MessageQueue</a><span class="delimiter">)</span>
    extends <a href="Mailbox.scala.html#akka.dispatch;Mailbox" title="akka.dispatch.Mailbox">Mailbox</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher;SharingMailbox._messageQueue" title="akka.dispatch.MessageQueue">_messageQueue</a><span class="delimiter">)</span> with <a href="Mailbox.scala.html#akka.dispatch;DefaultSystemMessageQueue" title="akka.dispatch.DefaultSystemMessageQueue">DefaultSystemMessageQueue</a> <span class="delimiter">{</span>
    override def <a title="()Unit" id="akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp">cleanUp</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      val <a title="akka.dispatch.Mailbox" id="akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.dlq">dlq</a> = <a href="AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher.mailboxes" title="=&gt; akka.dispatch.Mailboxes">mailboxes</a>.<a href="Mailboxes.scala.html#akka.dispatch;Mailboxes.deadLetterMailbox" title="=&gt; akka.dispatch.Mailbox">deadLetterMailbox</a>
      <span class="comment">//Don't call the original implementation of this since it scraps all messages, and we don't want to do that</span>
      var <a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.messages">messages</a> = <a href="Mailbox.scala.html#akka.dispatch;DefaultSystemMessageQueue.systemDrain" title="(newContents: akka.dispatch.sysmsg.LatestFirstSystemMessageList)akka.dispatch.sysmsg.EarliestFirstSystemMessageList">systemDrain</a><span class="delimiter">(</span>new <a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;LatestFirstSystemMessageList" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">LatestFirstSystemMessageList</a><span class="delimiter">(</span><a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.NoMessage" title="akka.dispatch.sysmsg.NoMessage.type">NoMessage</a><span class="delimiter">)</span><span class="delimiter">)</span>
      while <span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.while$1" title="()Unit" class="delimiter">{</a>
        <span class="comment">// message must be “virgin” before being able to systemEnqueue again</span>
        val <a title="akka.dispatch.sysmsg.SystemMessage" id="akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.message">message</a> = <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.head" title="=&gt; akka.dispatch.sysmsg.SystemMessage">head</a>
        <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a> = <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.tail" title="=&gt; akka.dispatch.sysmsg.EarliestFirstSystemMessageList">tail</a>
        <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.message" title="akka.dispatch.sysmsg.SystemMessage">message</a>.<a href="sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage.unlink" title="()Unit">unlink</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.dlq" title="akka.dispatch.Mailbox">dlq</a>.<a href="Mailbox.scala.html#akka.dispatch;SystemMessageQueue.systemEnqueue" title="(receiver: akka.actor.ActorRef, message: akka.dispatch.sysmsg.SystemMessage)Unit">systemEnqueue</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>, <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox.cleanUp.message" title="akka.dispatch.sysmsg.SystemMessage">message</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected<span class="delimiter">[</span>akka<span class="delimiter">]</span> override def <a title="(actor: akka.actor.Cell, mailboxType: akka.dispatch.MailboxType)akka.dispatch.Mailbox" id="akka.dispatch;BalancingDispatcher.createMailbox">createMailbox</a><span class="delimiter">(</span><a title="akka.actor.Cell" id="akka.dispatch;BalancingDispatcher.createMailbox.actor">actor</a>: akka.actor.<a href="../actor/ActorCell.scala.html#akka.actor;Cell" title="akka.actor.Cell">Cell</a>, <a title="akka.dispatch.MailboxType" id="akka.dispatch;BalancingDispatcher.createMailbox.mailboxType">mailboxType</a>: <a href="Mailbox.scala.html#akka.dispatch;MailboxType" title="akka.dispatch.MailboxType">MailboxType</a><span class="delimiter">)</span>: <a href="Mailbox.scala.html#akka.dispatch;Mailbox" title="akka.dispatch.Mailbox">Mailbox</a> =
    new <a href="#akka.dispatch;BalancingDispatcher;SharingMailbox" title="BalancingDispatcher.this.SharingMailbox">SharingMailbox</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.createMailbox.actor" title="akka.actor.Cell">actor</a>.<a href="../actor/ActorCell.scala.html#akka.actor;Cell.systemImpl" title="=&gt; akka.actor.ActorSystemImpl">systemImpl</a>, <a href="#akka.dispatch;BalancingDispatcher.messageQueue" title="=&gt; akka.dispatch.MessageQueue">messageQueue</a><span class="delimiter">)</span>

  protected<span class="delimiter">[</span>akka<span class="delimiter">]</span> override def <a title="(actor: akka.actor.ActorCell)Unit" id="akka.dispatch;BalancingDispatcher.register">register</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.dispatch;BalancingDispatcher.register.actor">actor</a>: <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    super.<a href="AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher.register" title="(actor: akka.actor.ActorCell)Unit">register</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.register.actor" title="akka.actor.ActorCell">actor</a><span class="delimiter">)</span>
    <a href="#akka.dispatch;BalancingDispatcher.team" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[akka.actor.ActorCell]">team</a>.<span title="(x$1: akka.actor.ActorCell)Boolean">add</span><span title="Unit" class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.register.actor" title="akka.actor.ActorCell">actor</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  protected<span class="delimiter">[</span>akka<span class="delimiter">]</span> override def <a title="(actor: akka.actor.ActorCell)Unit" id="akka.dispatch;BalancingDispatcher.unregister">unregister</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.dispatch;BalancingDispatcher.unregister.actor">actor</a>: <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.dispatch;BalancingDispatcher.team" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[akka.actor.ActorCell]">team</a>.<span title="(x$1: Any)Boolean">remove</span><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.unregister.actor" title="akka.actor.ActorCell">actor</a><span class="delimiter">)</span>
    super.<a href="AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher.unregister" title="(actor: akka.actor.ActorCell)Unit">unregister</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.unregister.actor" title="akka.actor.ActorCell">actor</a><span class="delimiter">)</span>
    <a href="#akka.dispatch;BalancingDispatcher.teamWork" title="()Unit">teamWork</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override protected<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(receiver: akka.actor.ActorCell, invocation: akka.dispatch.Envelope)Unit" id="akka.dispatch;BalancingDispatcher.dispatch">dispatch</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.dispatch;BalancingDispatcher.dispatch.receiver">receiver</a>: <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a>, <a title="akka.dispatch.Envelope" id="akka.dispatch;BalancingDispatcher.dispatch.invocation">invocation</a>: <a href="AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#akka.dispatch;BalancingDispatcher.messageQueue" title="=&gt; akka.dispatch.MessageQueue">messageQueue</a>.<a href="Mailbox.scala.html#akka.dispatch;MessageQueue.enqueue" title="(receiver: akka.actor.ActorRef, handle: akka.dispatch.Envelope)Unit">enqueue</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.dispatch.receiver" title="akka.actor.ActorCell">receiver</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <a href="#akka.dispatch;BalancingDispatcher.dispatch.invocation" title="akka.dispatch.Envelope">invocation</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="Dispatcher.scala.html#akka.dispatch;Dispatcher.registerForExecution" title="(mbox: akka.dispatch.Mailbox, hasMessageHint: Boolean, hasSystemMessageHint: Boolean)Boolean">registerForExecution</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.dispatch.receiver" title="akka.actor.ActorCell">receiver</a>.<a href="../actor/dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.mailbox" title="=&gt; akka.dispatch.Mailbox">mailbox</a>, false, false<span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.dispatch;BalancingDispatcher.teamWork" title="()Unit">teamWork</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  protected def <a title="()Unit" id="akka.dispatch;BalancingDispatcher.teamWork">teamWork</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.attemptTeamWork" title="Boolean">attemptTeamWork</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      @tailrec def <a title="(i: java.util.Iterator[akka.actor.ActorCell])Unit" id="akka.dispatch;BalancingDispatcher.teamWork.scheduleOne">scheduleOne</a><span class="delimiter">(</span><a title="java.util.Iterator[akka.actor.ActorCell]" id="akka.dispatch;BalancingDispatcher.teamWork.scheduleOne$default$1">i</a>: <span title="java.util.Iterator[akka.actor.ActorCell]">Iterator</span><span class="delimiter">[</span>ActorCell<span class="delimiter">]</span> = <a href="#akka.dispatch;BalancingDispatcher.team" title="=&gt; java.util.concurrent.ConcurrentSkipListSet[akka.actor.ActorCell]">team</a>.<span title="()java.util.Iterator[akka.actor.ActorCell]">iterator</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
        if <span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.messageQueue" title="=&gt; akka.dispatch.MessageQueue">messageQueue</a>.<a href="Mailbox.scala.html#akka.dispatch;MessageQueue.hasMessages" title="=&gt; Boolean">hasMessages</a>
          <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne$default$1" title="java.util.Iterator[akka.actor.ActorCell]">i</a>.<span title="()Boolean">hasNext</span>
          <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="Dispatcher.scala.html#akka.dispatch;Dispatcher.executorService" title="=&gt; akka.dispatch.ExecutorServiceDelegate">executorService</a>.<a href="ThreadPoolBuilder.scala.html#akka.dispatch;ExecutorServiceDelegate.executor" title="=&gt; java.util.concurrent.ExecutorService">executor</a> match <span class="delimiter">{</span>
            case <a title="&lt;refinement of java.util.concurrent.ExecutorService with akka.dispatch.LoadMetrics&gt; extends java.util.concurrent.ExecutorService with akka.dispatch.LoadMetrics" id="akka.dispatch;BalancingDispatcher.teamWork.scheduleOne.lm">lm</a>: <a href="AbstractDispatcher.scala.html#akka.dispatch;LoadMetrics" title="akka.dispatch.LoadMetrics">LoadMetrics</a> ⇒ <a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne.lm" title="&lt;refinement of java.util.concurrent.ExecutorService with akka.dispatch.LoadMetrics&gt; extends java.util.concurrent.ExecutorService with akka.dispatch.LoadMetrics">lm</a>.<a href="AbstractDispatcher.scala.html#akka.dispatch;LoadMetrics.atFullThrottle" title="()Boolean">atFullThrottle</a> <span title="(x: Boolean)Boolean">==</span> false
            case <a title="java.util.concurrent.ExecutorService" id="akka.dispatch;BalancingDispatcher.teamWork.scheduleOne.other">other</a>           ⇒ true
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="Dispatcher.scala.html#akka.dispatch;Dispatcher.registerForExecution" title="(mbox: akka.dispatch.Mailbox, hasMessageHint: Boolean, hasSystemMessageHint: Boolean)Boolean">registerForExecution</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne$default$1" title="java.util.Iterator[akka.actor.ActorCell]">i</a>.<span title="()akka.actor.ActorCell">next</span>.<a href="../actor/dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.mailbox" title="=&gt; akka.dispatch.Mailbox">mailbox</a>, false, false<span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne" title="(i: java.util.Iterator[akka.actor.ActorCell])Unit">scheduleOne</a><span class="delimiter">(</span><a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne$default$1" title="java.util.Iterator[akka.actor.ActorCell]">i</a><span class="delimiter">)</span>

      <a href="#akka.dispatch;BalancingDispatcher.teamWork.scheduleOne" title="(i: java.util.Iterator[akka.actor.ActorCell])Unit">scheduleOne</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
