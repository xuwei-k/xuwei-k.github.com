<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cluster-tools/akka/cluster/client/protobuf/ClusterClientMessageSerializer.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.cluster.client.protobuf

import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
import akka.actor.ExtendedActorSystem
import akka.serialization.BaseSerializer
import akka.serialization.SerializationExtension
import akka.serialization.SerializerWithStringManifest
import akka.cluster.client.ClusterReceptionist
import akka.cluster.client.protobuf.msg.<span class="delimiter">{</span> ClusterClientMessages ⇒ cm <span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API: Serializer of ClusterClient messages.
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class ClusterClientMessageSerializer extends akka.serialization.SerializerWithStringManifest with akka.serialization.BaseSerializer" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer">ClusterClientMessageSerializer</a><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer" title="akka.cluster.client.protobuf.ClusterClientMessageSerializer" class="delimiter">(</a>val <a title="akka.actor.ExtendedActorSystem" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.system">system</a>: <a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>
  extends <a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;SerializerWithStringManifest" title="akka.serialization.SerializerWithStringManifest">SerializerWithStringManifest</a> with <a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;BaseSerializer" title="akka.serialization.BaseSerializer">BaseSerializer</a> <span class="delimiter">{</span>
  import <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist" title="akka.cluster.client.ClusterReceptionist.type">ClusterReceptionist</a>.<a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal" title="akka.cluster.client.ClusterReceptionist.Internal.type">Internal</a>._

  private lazy val <a title="akka.serialization.Serialization" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.serialization">serialization</a> = <a href="../../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.serialization.Serialization">SerializationExtension</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>

  private val <a title="String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.ContactsManifest">ContactsManifest</a> = <span title="String(&quot;A&quot;)" class="string">&quot;A&quot;</span>
  private val <a title="String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.GetContactsManifest">GetContactsManifest</a> = <span title="String(&quot;B&quot;)" class="string">&quot;B&quot;</span>
  private val <a title="String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatManifest">HeartbeatManifest</a> = <span title="String(&quot;C&quot;)" class="string">&quot;C&quot;</span>
  private val <a title="String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatRspManifest">HeartbeatRspManifest</a> = <span title="String(&quot;D&quot;)" class="string">&quot;D&quot;</span>

  private val <a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.emptyByteArray">emptyByteArray</a> = <span title="Array.type">Array</span>.<span title="[T](implicit evidence$1: scala.reflect.ClassTag[T])Array[T]">empty</span><span title="(implicit evidence$1: scala.reflect.ClassTag[Byte])Array[Byte]" class="delimiter">[</span><span title="Byte">Byte</span><span class="delimiter">]</span>

  private val <a title="scala.collection.immutable.HashMap[String,Array[Byte] =&gt; AnyRef]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinaryMap">fromBinaryMap</a> = collection.immutable.<span title="[A, B](elems: (A, B)*)scala.collection.immutable.HashMap[A,B]">HashMap</span><span title="(elems: (String, Array[Byte] =&gt; AnyRef)*)scala.collection.immutable.HashMap[String,Array[Byte] =&gt; AnyRef]" class="delimiter">[</span><span title="String">String</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span> ⇒ AnyRef<span class="delimiter">]</span><span class="delimiter">(</span>
    <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.ContactsManifest" title="(self: String)ArrowAssoc[String]">ContactsManifest</a> <span title="(y: Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.Contacts)(String, Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.Contacts)">-&gt;</span> <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary" title="(bytes: Array[Byte])akka.cluster.client.ClusterReceptionist.Internal.Contacts">contactsFromBinary</a>,
    <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.GetContactsManifest" title="(self: String)ArrowAssoc[String]">GetContactsManifest</a> <span title="(y: Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.GetContacts.type)(String, Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.GetContacts.type)">-&gt;</span> <span class="delimiter">{</span> <a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinaryMap.$anonfun.x$1">_</a> ⇒ <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.GetContacts" title="akka.cluster.client.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a> <span class="delimiter">}</span>,
    <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatManifest" title="(self: String)ArrowAssoc[String]">HeartbeatManifest</a> <span title="(y: Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.Heartbeat.type)(String, Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.Heartbeat.type)">-&gt;</span> <span class="delimiter">{</span> <a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinaryMap.$anonfun.x$2">_</a> ⇒ <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.Heartbeat" title="akka.cluster.client.ClusterReceptionist.Internal.Heartbeat.type">Heartbeat</a> <span class="delimiter">}</span>,
    <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatRspManifest" title="(self: String)ArrowAssoc[String]">HeartbeatRspManifest</a> <span title="(y: Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp.type)(String, Array[Byte] =&gt; akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp.type)">-&gt;</span> <span class="delimiter">{</span> <a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinaryMap.$anonfun.x$3">_</a> ⇒ <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp" title="akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp.type">HeartbeatRsp</a> <span class="delimiter">}</span><span class="delimiter">)</span>

  override def <a title="(obj: AnyRef)String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.manifest">manifest</a><span class="delimiter">(</span><a title="AnyRef" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.manifest.obj">obj</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.manifest.obj" title="AnyRef">obj</a> match <span class="delimiter">{</span>
    case _: <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">Contacts</a>  ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.ContactsManifest" title="=&gt; String">ContactsManifest</a>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.GetContacts" title="akka.cluster.client.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a>  ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.GetContactsManifest" title="=&gt; String">GetContactsManifest</a>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.Heartbeat" title="akka.cluster.client.ClusterReceptionist.Internal.Heartbeat.type">Heartbeat</a>    ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatManifest" title="=&gt; String">HeartbeatManifest</a>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp" title="akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp.type">HeartbeatRsp</a> ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.HeartbeatRspManifest" title="=&gt; String">HeartbeatRspManifest</a>
    case _ ⇒
      throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Can\'t serialize object of type &quot;)">Can't serialize object of type $</span><span class="delimiter">{</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.manifest.obj" title="AnyRef">obj</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot; in [&quot;)"> in [$</span><span class="delimiter">{</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer" title="()Class[_]">getClass</a>.<span title="()String">getName</span><span class="delimiter">}</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(obj: AnyRef)Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary">toBinary</a><span class="delimiter">(</span><a title="AnyRef" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary.obj">obj</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary.obj" title="AnyRef">obj</a> match <span class="delimiter">{</span>
    case <a title="akka.cluster.client.ClusterReceptionist.Internal.Contacts" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary.m">m</a>: <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">Contacts</a>  ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsToProto" title="(m: akka.cluster.client.ClusterReceptionist.Internal.Contacts)akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts">contactsToProto</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary.m" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">m</a><span class="delimiter">)</span>.<span title="()Array[Byte]">toByteArray</span>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.GetContacts" title="akka.cluster.client.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a>  ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.emptyByteArray" title="=&gt; Array[Byte]">emptyByteArray</a>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.Heartbeat" title="akka.cluster.client.ClusterReceptionist.Internal.Heartbeat.type">Heartbeat</a>    ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.emptyByteArray" title="=&gt; Array[Byte]">emptyByteArray</a>
    case <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp" title="akka.cluster.client.ClusterReceptionist.Internal.HeartbeatRsp.type">HeartbeatRsp</a> ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.emptyByteArray" title="=&gt; Array[Byte]">emptyByteArray</a>
    case _ ⇒
      throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Can\'t serialize object of type &quot;)">Can't serialize object of type $</span><span class="delimiter">{</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.toBinary.obj" title="AnyRef">obj</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot; in [&quot;)"> in [$</span><span class="delimiter">{</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer" title="()Class[_]">getClass</a>.<span title="()String">getName</span><span class="delimiter">}</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(bytes: Array[Byte], manifest: String)AnyRef" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff)">fromBinary</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="String" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).manifest">manifest</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> =
    <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinaryMap" title="=&gt; scala.collection.immutable.HashMap[String,Array[Byte] =&gt; AnyRef]">fromBinaryMap</a>.<span title="(key: String)Option[Array[Byte] =&gt; AnyRef]">get</span><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).manifest" title="String">manifest</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="Array[Byte] =&gt; AnyRef" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).f">f</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).f" title="(v1: Array[Byte])AnyRef">f</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span>
      case <span title="None.type">None</span> ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span>
        <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Unimplemented deserialization of message with manifest [&quot;)">Unimplemented deserialization of message with manifest [$</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.fromBinary(4478669bff).manifest" title="String">manifest</a><span title="String(&quot;] in [&quot;)">] in [$</span><span class="delimiter">{</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer" title="()Class[_]">getClass</a>.<span title="()String">getName</span><span class="delimiter">}</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  private def <a title="(m: akka.cluster.client.ClusterReceptionist.Internal.Contacts)akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsToProto">contactsToProto</a><span class="delimiter">(</span><a title="akka.cluster.client.ClusterReceptionist.Internal.Contacts" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsToProto.m">m</a>: <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">Contacts</a><span class="delimiter">)</span>: cm.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages;Contacts" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts">Contacts</a> =
    <a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.type">cm</a>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.type">Contacts</a>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.newBuilder(88b39ca9aa)" title="()akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.Builder">newBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts;Builder.addAllContactPoints" title="(values: Iterable[String])akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.Builder">addAllContactPoints</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsToProto.m" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">m</a>.<a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts.contactPoints" title="(b: Seq[String])scala.collection.convert.Decorators.AsJava[java.util.List[String]]">contactPoints</a>.<span title="=&gt; java.util.List[String]">asJava</span><span class="delimiter">)</span>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts;Builder.build" title="()akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts">build</a><span class="delimiter">(</span><span class="delimiter">)</span>

  private def <a title="(bytes: Array[Byte])akka.cluster.client.ClusterReceptionist.Internal.Contacts" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary">contactsFromBinary</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary.bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts" title="akka.cluster.client.ClusterReceptionist.Internal.Contacts">Contacts</a> = <span class="delimiter">{</span>
    val <a title="akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts" id="akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary.m">m</a> = <a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.type">cm</a>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.type">Contacts</a>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts.parseFrom(56f7c4729d)" title="(data: Array[Byte])akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts">parseFrom</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span>
    <a href="../ClusterClient.scala.html#akka.cluster.client.ClusterReceptionist.Internal;Contacts" title="(contactPoints: scala.collection.immutable.IndexedSeq[String])akka.cluster.client.ClusterReceptionist.Internal.Contacts">Contacts</a><span class="delimiter">(</span><a href="#akka.cluster.client.protobuf;ClusterClientMessageSerializer.contactsFromBinary.m" title="akka.cluster.client.protobuf.msg.ClusterClientMessages.Contacts">m</a>.<a href="msg/ClusterClientMessages.java.html#akka.cluster.client.protobuf.msg.ClusterClientMessages;Contacts.getContactPointsList" title="(l: java.util.List[String])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Buffer[String]]">getContactPointsList</a>.<span title="=&gt; scala.collection.mutable.Buffer[String]">asScala</span>.<span title="=&gt; Vector[String]">toVector</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
