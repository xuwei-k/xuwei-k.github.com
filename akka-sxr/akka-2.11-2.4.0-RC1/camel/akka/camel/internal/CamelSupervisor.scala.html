<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>camel/akka/camel/internal/CamelSupervisor.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.camel.internal

import akka.actor._
import akka.camel.<span class="delimiter">{</span> CamelSupport, ConsumerConfig <span class="delimiter">}</span>
import org.apache.camel.Endpoint
import org.apache.camel.processor.SendProcessor
import scala.util.control.NonFatal
import akka.actor.Terminated
import akka.actor.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>.Resume
import akka.camel.internal.<a href="#akka.camel.internal.CamelSupervisor" title="akka.camel.internal.CamelSupervisor.type">CamelSupervisor</a>._
import akka.AkkaException
import akka.camel.internal.<a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol" title="akka.camel.internal.ActivationProtocol.type">ActivationProtocol</a>._
import akka.event.Logging

<span class="comment">/**
 * INTERNAL API
 * Top level supervisor for internal Camel actors
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class CamelSupervisor extends AnyRef with akka.actor.Actor with akka.camel.CamelSupport" id="akka.camel.internal;CamelSupervisor">CamelSupervisor</a> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../CamelSupport.scala.html#akka.camel;CamelSupport" title="akka.camel.CamelSupport">CamelSupport</a> <span class="delimiter">{</span>
  private val <a title="akka.actor.ActorRef" id="akka.camel.internal;CamelSupervisor.activationTracker">activationTracker</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.camel.internal.ActivationTracker])akka.actor.Props" class="delimiter">[</span><a href="ActivationTracker.scala.html#akka.camel.internal;ActivationTracker" title="akka.camel.internal.ActivationTracker">ActivationTracker</a><span class="delimiter">]</span>, <span title="String(&quot;activationTracker&quot;)" class="string">&quot;activationTracker&quot;</span><span class="delimiter">)</span>
  private val <a title="akka.actor.ActorRef" id="akka.camel.internal;CamelSupervisor.registry">registry</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.camel.internal.Registry](classOf[akka.camel.internal.Registry])" class="delimiter">[</span>Registry<span class="delimiter">]</span>, <a href="#akka.camel.internal;CamelSupervisor.activationTracker" title="=&gt; akka.actor.ActorRef">activationTracker</a><span class="delimiter">)</span>, <span title="String(&quot;registry&quot;)" class="string">&quot;registry&quot;</span><span class="delimiter">)</span>

  override val <a title="akka.actor.OneForOneStrategy" id="akka.camel.internal;CamelSupervisor.supervisorStrategy">supervisorStrategy</a> = <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;OneForOneStrategy" title="(maxNrOfRetries: Int, withinTimeRange: scala.concurrent.duration.Duration, loggingEnabled: Boolean)(decider: akka.actor.SupervisorStrategy.Decider)akka.actor.OneForOneStrategy">OneForOneStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span> <a title="&lt;$anon: Throwable =&gt; akka.actor.SupervisorStrategy.Directive&gt; extends scala.runtime.AbstractPartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive] with Serializable" id="akka.camel.internal;CamelSupervisor.supervisorStrategy;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a href="#akka.camel.internal;CamelSupervisor.supervisorStrategy;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.camel.internal;CamelSupervisor.supervisorStrategy;$anonfun.isDefinedAt.e">e</a><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Resume" title="akka.actor.SupervisorStrategy.Resume.type">Resume</a>
  <span class="delimiter">}</span>

  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.camel.internal;CamelSupervisor.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;CamelSupervisor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case AddWatch<span class="delimiter">(</span><span title="akka.actor.ActorRef">actorRef</span><span class="delimiter">)</span>     ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span title="Unit" class="delimiter">(</span><span title="akka.actor.ActorRef">actorRef</span><span class="delimiter">)</span>
    case Terminated<span class="delimiter">(</span><span title="akka.actor.ActorRef">actorRef</span><span class="delimiter">)</span>   ⇒ <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">registry</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.DeRegister.readResolve" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.CamelSupervisor.DeRegister">DeRegister</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">actorRef</span><span class="delimiter">)</span>
    case <span title="akka.camel.internal.ActivationProtocol.ActivationMessage">msg</span>: <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;ActivationMessage" title="akka.camel.internal.ActivationProtocol.ActivationMessage">ActivationMessage</a> ⇒ <a href="#akka.camel.internal;CamelSupervisor.activationTracker" title="=&gt; akka.actor.ActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.camel.internal.ActivationProtocol.ActivationMessage">msg</span>
    case <span title="Any">msg</span>                    ⇒ <a href="#akka.camel.internal;CamelSupervisor.registry" title="=&gt; akka.actor.ActorRef">registry</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * Messages for the camel supervisor, registrations and de-registrations.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> object <a title="akka.camel.internal.CamelSupervisor.type" id="akka.camel.internal.CamelSupervisor">CamelSupervisor</a> <a href="#akka.camel.internal.CamelSupervisor" title="akka.camel.internal.CamelSupervisor.type" class="delimiter">{</a>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  sealed trait <a title="trait CamelSupervisorMessage extends AnyRef with Serializable" id="akka.camel.internal.CamelSupervisor;CamelSupervisorMessage">CamelSupervisorMessage</a> extends <span title="Serializable">Serializable</span>

  <span class="comment">/**
   * INTERNAL API
   * Registers a consumer or a producer.
   */</span>
  final case class <a title="class Register extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.camel.internal.CamelSupervisor.Register.readResolve">Register</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal.CamelSupervisor;Register.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="String" id="akka.camel.internal.CamelSupervisor;Register.endpointUri">endpointUri</a>: <span title="String">String</span>, <a title="Option[akka.camel.ConsumerConfig]" id="akka.camel.internal.CamelSupervisor.Register.<init>$default$3">config</a>: <span title="Option[akka.camel.ConsumerConfig]">Option</span><span class="delimiter">[</span>ConsumerConfig<span class="delimiter">]</span> = <span title="None.type">None</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>

  <span class="comment">/**
   * INTERNAL API
   * De-registers a producer or a consumer.
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  final case class <a title="class DeRegister extends AnyRef with akka.camel.internal.CamelSupervisor.CamelSupervisorMessage with Product with Serializable" id="akka.camel.internal.CamelSupervisor.DeRegister.readResolve">DeRegister</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal.CamelSupervisor;DeRegister.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="#akka.camel.internal.CamelSupervisor;CamelSupervisorMessage" title="akka.camel.internal.CamelSupervisor.CamelSupervisorMessage">CamelSupervisorMessage</a>

  <span class="comment">/**
   * INTERNAL API
   * Adds a watch for the actor
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  final case class <a title="class AddWatch extends AnyRef with akka.camel.internal.CamelSupervisor.CamelSupervisorMessage with Product with Serializable" id="akka.camel.internal.CamelSupervisor.AddWatch.readResolve">AddWatch</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal.CamelSupervisor;AddWatch.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="#akka.camel.internal.CamelSupervisor;CamelSupervisorMessage" title="akka.camel.internal.CamelSupervisor.CamelSupervisorMessage">CamelSupervisorMessage</a>

  <span class="comment">/**
   * INTERNAL API
   * Provides a Producer with the required camel objects to function.
   */</span>
  final case class <a title="class CamelProducerObjects extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.camel.internal.CamelSupervisor.CamelProducerObjects.readResolve">CamelProducerObjects</a><span title="Product" class="delimiter">(</span><a title="org.apache.camel.Endpoint" id="akka.camel.internal.CamelSupervisor;CamelProducerObjects.endpoint">endpoint</a>: <span title="org.apache.camel.Endpoint">Endpoint</span>, <a title="org.apache.camel.processor.SendProcessor" id="akka.camel.internal.CamelSupervisor;CamelProducerObjects.processor">processor</a>: <span title="org.apache.camel.processor.SendProcessor">SendProcessor</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * Thrown by registrars to indicate that the actor could not be de-activated.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class ActorDeActivationException extends akka.AkkaException" id="akka.camel.internal;ActorDeActivationException">ActorDeActivationException</a><a href="#akka.camel.internal;ActorDeActivationException" title="akka.camel.internal.ActorDeActivationException" class="delimiter">(</a>val <a title="akka.actor.ActorRef" id="akka.camel.internal;ActorDeActivationException.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Throwable" id="akka.camel.internal;ActorDeActivationException.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.camel.internal;ActorDeActivationException.actorRef" title="akka.actor.ActorRef">actorRef</a><span title="String(&quot; failed to de-activate&quot;)" class="string"> failed to de-activate&quot;</span>, <a href="#akka.camel.internal;ActorDeActivationException.cause" title="Throwable">cause</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 * Thrown by the registrars to indicate that the actor could not be activated.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class ActorActivationException extends akka.AkkaException" id="akka.camel.internal;ActorActivationException">ActorActivationException</a><a href="#akka.camel.internal;ActorActivationException" title="akka.camel.internal.ActorActivationException" class="delimiter">(</a>val <a title="akka.actor.ActorRef" id="akka.camel.internal;ActorActivationException.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Throwable" id="akka.camel.internal;ActorActivationException.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.camel.internal;ActorActivationException.actorRef" title="akka.actor.ActorRef">actorRef</a><span title="String(&quot; failed to activate&quot;)" class="string"> failed to activate&quot;</span>, <a href="#akka.camel.internal;ActorActivationException.cause" title="Throwable">cause</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 * Registry for Camel Consumers and Producers. Supervises the registrars.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class Registry extends AnyRef with akka.actor.Actor with akka.camel.CamelSupport" id="akka.camel.internal;Registry">Registry</a><a href="#akka.camel.internal;Registry" title="akka.camel.internal.Registry" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.activationTracker">activationTracker</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../CamelSupport.scala.html#akka.camel;CamelSupport" title="akka.camel.CamelSupport">CamelSupport</a> <span class="delimiter">{</span>
  import <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<span class="delimiter">{</span> stop, parent <span class="delimiter">}</span>

  private val <a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.producerRegistrar">producerRegistrar</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.camel.internal.ProducerRegistrar](classOf[akka.camel.internal.ProducerRegistrar])" class="delimiter">[</span>ProducerRegistrar<span class="delimiter">]</span>, <a href="#akka.camel.internal;Registry.activationTracker" title="akka.actor.ActorRef">activationTracker</a><span class="delimiter">)</span>, <span title="String(&quot;producerRegistrar&quot;)" class="string">&quot;producerRegistrar&quot;</span><span class="delimiter">)</span>
  private val <a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.consumerRegistrar">consumerRegistrar</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.camel.internal.ConsumerRegistrar](classOf[akka.camel.internal.ConsumerRegistrar])" class="delimiter">[</span>ConsumerRegistrar<span class="delimiter">]</span>, <a href="#akka.camel.internal;Registry.activationTracker" title="akka.actor.ActorRef">activationTracker</a><span class="delimiter">)</span>, <span title="String(&quot;consumerRegistrar&quot;)" class="string">&quot;consumerRegistrar&quot;</span><span class="delimiter">)</span>
  private var <a title="scala.collection.immutable.Set[akka.actor.ActorRef]" id="akka.camel.internal;Registry.producers_=">producers</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: akka.actor.ActorRef*)scala.collection.immutable.Set[akka.actor.ActorRef]" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  private var <a title="scala.collection.immutable.Set[akka.actor.ActorRef]" id="akka.camel.internal;Registry.consumers_=">consumers</a> = <span title="[A](elems: A*)scala.collection.immutable.Set[A]">Set</span><span title="(elems: akka.actor.ActorRef*)scala.collection.immutable.Set[akka.actor.ActorRef]" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  class <a title="class RegistryLogStrategy extends akka.actor.OneForOneStrategy" id="akka.camel.internal;Registry;RegistryLogStrategy">RegistryLogStrategy</a><a href="#akka.camel.internal;Registry;RegistryLogStrategy" title="Registry.this.RegistryLogStrategy" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.actor.SupervisorStrategy.Decider" id="akka.camel.internal;Registry;RegistryLogStrategy._decider">_decider</a>: SupervisorStrategy.<span title="akka.actor.SupervisorStrategy.Decider">Decider</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;OneForOneStrategy" title="akka.actor.OneForOneStrategy">OneForOneStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.camel.internal;Registry;RegistryLogStrategy._decider" title="akka.actor.SupervisorStrategy.Decider">_decider</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    override def <a title="(context: akka.actor.ActorContext, child: akka.actor.ActorRef, cause: Throwable, decision: akka.actor.SupervisorStrategy.Directive)Unit" id="akka.camel.internal;Registry;RegistryLogStrategy.logFailure">logFailure</a><span class="delimiter">(</span><a title="akka.actor.ActorContext" id="akka.camel.internal;Registry;RegistryLogStrategy.logFailure.context">context</a>: <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext" title="akka.actor.ActorContext">ActorContext</a>, <a title="akka.actor.ActorRef" id="akka.camel.internal;Registry;RegistryLogStrategy.logFailure.child">child</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Throwable" id="akka.camel.internal;Registry;RegistryLogStrategy.logFailure.cause">cause</a>: <span title="Throwable">Throwable</span>,
                            <a title="akka.actor.SupervisorStrategy.Directive" id="akka.camel.internal;Registry;RegistryLogStrategy.logFailure.decision">decision</a>: SupervisorStrategy.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy;Directive" title="akka.actor.SupervisorStrategy.Directive">Directive</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.cause" title="Throwable">cause</a> match <span class="delimiter">{</span>
        case _: <a href="#akka.camel.internal;ActorActivationException" title="akka.camel.internal.ActorActivationException">ActorActivationException</a> | _: <a href="#akka.camel.internal;ActorDeActivationException" title="akka.camel.internal.ActorDeActivationException">ActorDeActivationException</a> ⇒
          try <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.context" title="akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../../actor/akka/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a> <span class="delimiter">{</span>
            <a href="../../../../actor/akka/event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event.Logging;Error" title="(cause: Throwable, logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Error">Error</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.cause" title="Throwable">cause</a>.<span title="()Throwable">getCause</span>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.child" title="akka.actor.ActorRef">child</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy" title="()Class[_]">getClass</a>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.cause" title="Throwable">cause</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span> case <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="delimiter">}</span>
        case _ ⇒ super.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;SupervisorStrategy.logFailure" title="(context: akka.actor.ActorContext, child: akka.actor.ActorRef, cause: Throwable, decision: akka.actor.SupervisorStrategy.Directive)Unit">logFailure</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.context" title="akka.actor.ActorContext">context</a>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.child" title="akka.actor.ActorRef">child</a>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.cause" title="Throwable">cause</a>, <a href="#akka.camel.internal;Registry;RegistryLogStrategy.logFailure.decision" title="akka.actor.SupervisorStrategy.Directive">decision</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  override val <a title="Registry.this.RegistryLogStrategy" id="akka.camel.internal;Registry.supervisorStrategy">supervisorStrategy</a> = new <a href="#akka.camel.internal;Registry;RegistryLogStrategy" title="Registry.this.RegistryLogStrategy">RegistryLogStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="&lt;$anon: Throwable =&gt; akka.actor.SupervisorStrategy.Directive&gt; extends scala.runtime.AbstractPartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive] with Serializable" id="akka.camel.internal;Registry.supervisorStrategy;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <span title="akka.camel.internal.ActorActivationException">e</span>: <a href="#akka.camel.internal;ActorActivationException" title="akka.camel.internal.ActorActivationException">ActorActivationException</a> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToActivate">EndpointFailedToActivate</a><span class="delimiter">(</span><span title="akka.camel.internal.ActorActivationException">e</span>.<a href="#akka.camel.internal;ActorActivationException.actorRef" title="=&gt; akka.actor.ActorRef">actorRef</a>, <span title="akka.camel.internal.ActorActivationException">e</span>.<span title="()Throwable">getCause</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><span title="akka.camel.internal.ActorActivationException">e</span>.<a href="#akka.camel.internal;ActorActivationException.actorRef" title="=&gt; akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Resume" title="akka.actor.SupervisorStrategy.Resume.type">Resume</a>
    case <span title="akka.camel.internal.ActorDeActivationException">e</span>: <a href="#akka.camel.internal;ActorDeActivationException" title="akka.camel.internal.ActorDeActivationException">ActorDeActivationException</a> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToDeActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToDeActivate">EndpointFailedToDeActivate</a><span class="delimiter">(</span><span title="akka.camel.internal.ActorDeActivationException">e</span>.<a href="#akka.camel.internal;ActorDeActivationException.actorRef" title="=&gt; akka.actor.ActorRef">actorRef</a>, <span title="akka.camel.internal.ActorDeActivationException">e</span>.<span title="()Throwable">getCause</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><span title="akka.camel.internal.ActorDeActivationException">e</span>.<a href="#akka.camel.internal;ActorDeActivationException.actorRef" title="=&gt; akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Resume" title="akka.actor.SupervisorStrategy.Resume.type">Resume</a>
    case <a href="#akka.camel.internal;Registry.supervisorStrategy;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Resume" title="akka.actor.SupervisorStrategy.Resume.type">Resume</a>
  <span class="delimiter">}</span><span class="delimiter">)</span>

  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.camel.internal;Registry.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <span title="akka.camel.internal.CamelSupervisor.Register">msg</span> @ Register<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.consumer">consumer</a>, _, Some<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.camel.internal;Registry.consumers_=" title="(elem: akka.actor.ActorRef)Boolean">consumers</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.consumer" title="akka.actor.ActorRef">consumer</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.camel.internal;Registry.consumers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">consumers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">+=</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.consumer" title="akka.actor.ActorRef">consumer</a>
        <a href="#akka.camel.internal;Registry.consumerRegistrar" title="=&gt; akka.actor.ActorRef">consumerRegistrar</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.camel.internal.CamelSupervisor.Register">msg</span>
        <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.AddWatch.readResolve" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.CamelSupervisor.AddWatch">AddWatch</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.consumer" title="akka.actor.ActorRef">consumer</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    case <span title="akka.camel.internal.CamelSupervisor.Register">msg</span> @ Register<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.producer">producer</a>, _, <span title="None.type">None</span><span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.camel.internal;Registry.producers_=" title="(elem: akka.actor.ActorRef)Boolean">producers</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.producer" title="akka.actor.ActorRef">producer</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.camel.internal;Registry.producers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">producers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">+=</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.producer" title="akka.actor.ActorRef">producer</a>
        <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.AddWatch.readResolve" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.CamelSupervisor.AddWatch">AddWatch</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.producer" title="akka.actor.ActorRef">producer</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#akka.camel.internal;Registry.producerRegistrar" title="=&gt; akka.actor.ActorRef">producerRegistrar</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.camel.internal.CamelSupervisor.Register">msg</span>
    case DeRegister<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.actorRef">actorRef</a><span class="delimiter">)</span> ⇒
      <a href="#akka.camel.internal;Registry.producers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">producers</a>.<span title="(p: akka.actor.ActorRef =&gt; Boolean)Option[akka.actor.ActorRef]">find</span><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.x$1" title="akka.actor.ActorRef">_</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.p">p</a> ⇒
        <a href="#akka.camel.internal;Registry.deRegisterProducer" title="(actorRef: akka.actor.ActorRef)Unit">deRegisterProducer</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.p" title="akka.actor.ActorRef">p</a><span class="delimiter">)</span>
        <a href="#akka.camel.internal;Registry.producers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">producers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">-=</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.p" title="akka.actor.ActorRef">p</a>
      <span class="delimiter">}</span>
      <a href="#akka.camel.internal;Registry.consumers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">consumers</a>.<span title="(p: akka.actor.ActorRef =&gt; Boolean)Option[akka.actor.ActorRef]">find</span><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.x$2" title="akka.actor.ActorRef">_</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.isDefinedAt.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.c">c</a> ⇒
        <a href="#akka.camel.internal;Registry.deRegisterConsumer" title="(actorRef: akka.actor.ActorRef)Unit">deRegisterConsumer</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.c" title="akka.actor.ActorRef">c</a><span class="delimiter">)</span>
        <a href="#akka.camel.internal;Registry.consumers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">consumers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">-=</span> <a href="#akka.camel.internal;Registry.receive;$anonfun.applyOrElse.$anonfun.c" title="akka.actor.ActorRef">c</a>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(actorRef: akka.actor.ActorRef)Unit" id="akka.camel.internal;Registry.deRegisterConsumer">deRegisterConsumer</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.deRegisterConsumer.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">consumerRegistrar</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.DeRegister.readResolve" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.CamelSupervisor.DeRegister">DeRegister</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.deRegisterConsumer.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  private def <a title="(actorRef: akka.actor.ActorRef)Unit" id="akka.camel.internal;Registry.deRegisterProducer">deRegisterProducer</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;Registry.deRegisterProducer.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">producerRegistrar</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.DeRegister.readResolve" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.CamelSupervisor.DeRegister">DeRegister</a><span class="delimiter">(</span><a href="#akka.camel.internal;Registry.deRegisterProducer.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * Registers Producers.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class ProducerRegistrar extends AnyRef with akka.actor.Actor with akka.camel.CamelSupport" id="akka.camel.internal;ProducerRegistrar">ProducerRegistrar</a><a href="#akka.camel.internal;ProducerRegistrar" title="akka.camel.internal.ProducerRegistrar" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.camel.internal;ProducerRegistrar.activationTracker">activationTracker</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../CamelSupport.scala.html#akka.camel;CamelSupport" title="akka.camel.CamelSupport">CamelSupport</a> <span class="delimiter">{</span>
  private var <a title="scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]" id="akka.camel.internal;ProducerRegistrar.camelObjects_=">camelObjects</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (akka.actor.ActorRef, (org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor))*)scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <span title="(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)" class="delimiter">(</span>Endpoint, SendProcessor<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.camel.internal;ProducerRegistrar.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case Register<span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span>, <a title="String" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.isDefinedAt.endpointUri">endpointUri</a>, _<span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="=&gt; scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">camelObjects</a>.<span title="(key: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        try <span class="delimiter">{</span>
          val <a title="org.apache.camel.Endpoint" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.endpoint">endpoint</a> = <a href="../CamelSupport.scala.html#akka.camel;CamelSupport.camelContext" title="=&gt; org.apache.camel.impl.DefaultCamelContext">camelContext</a>.<span title="(x$1: String)org.apache.camel.Endpoint">getEndpoint</span><span class="delimiter">(</span><a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.isDefinedAt.endpointUri" title="String">endpointUri</a><span class="delimiter">)</span>
          val <a title="org.apache.camel.processor.SendProcessor" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.processor">processor</a> = new <span title="org.apache.camel.processor.SendProcessor">SendProcessor</span><span class="delimiter">(</span><a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.endpoint" title="org.apache.camel.Endpoint">endpoint</a><span class="delimiter">)</span>
          <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="(x$1: scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)])Unit">camelObjects</a> = <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="=&gt; scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">camelObjects</a>.<span title="(key: akka.actor.ActorRef, value: (org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor))scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">updated</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span>, <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.endpoint" title="(self: org.apache.camel.Endpoint)ArrowAssoc[org.apache.camel.Endpoint]">endpoint</a> <span title="(y: org.apache.camel.processor.SendProcessor)(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)">-&gt;</span> <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.processor" title="org.apache.camel.processor.SendProcessor">processor</a><span class="delimiter">)</span>
          <span class="comment">// if this throws, the supervisor stops the producer and de-registers it on termination</span>
          <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.processor" title="org.apache.camel.processor.SendProcessor">processor</a>.<span title="()Unit">start</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">producer</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.CamelProducerObjects.readResolve" title="(endpoint: org.apache.camel.Endpoint, processor: org.apache.camel.processor.SendProcessor)akka.camel.internal.CamelSupervisor.CamelProducerObjects">CamelProducerObjects</a><span class="delimiter">(</span><a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.endpoint" title="org.apache.camel.Endpoint">endpoint</a>, <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.processor" title="org.apache.camel.processor.SendProcessor">processor</a><span class="delimiter">)</span>
          <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointActivated">EndpointActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.e">e</a><span class="delimiter">)</span> ⇒ throw new <a href="#akka.camel.internal;ActorActivationException" title="akka.camel.internal.ActorActivationException">ActorActivationException</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span>, <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.e" title="Throwable">e</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="=&gt; scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">camelObjects</a>.<span title="(key: akka.actor.ActorRef)Option[(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">get</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span> <span title="(f: ((org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)) =&gt; Unit)Unit">foreach</span> <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.x0$1" title="Unit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="org.apache.camel.Endpoint" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.endpoint">endpoint</a>, <span title="org.apache.camel.processor.SendProcessor">processor</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">producer</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal.CamelSupervisor.CamelProducerObjects.readResolve" title="(endpoint: org.apache.camel.Endpoint, processor: org.apache.camel.processor.SendProcessor)akka.camel.internal.CamelSupervisor.CamelProducerObjects">CamelProducerObjects</a><span class="delimiter">(</span><a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.endpoint" title="org.apache.camel.Endpoint">endpoint</a>, <span title="org.apache.camel.processor.SendProcessor">processor</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    case DeRegister<span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span> ⇒
      <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="=&gt; scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">camelObjects</a>.<span title="(key: akka.actor.ActorRef)Option[(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">get</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span> <span title="(f: ((org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)) =&gt; Unit)Unit">foreach</span> <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.x0$2" title="Unit" class="delimiter">{</a>
        case <span class="delimiter">(</span>_, <span title="org.apache.camel.processor.SendProcessor">processor</span><span class="delimiter">)</span> ⇒
          try <span class="delimiter">{</span>
            <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="=&gt; scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">camelObjects</a>.<span title="(key: akka.actor.ActorRef)Option[(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">get</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span>.<span title="(f: ((org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)) =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.$anonfun.x$3" title="(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)">_</a>.<span title="=&gt; org.apache.camel.processor.SendProcessor">_2</span>.<span title="()Unit">stop</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#akka.camel.internal;ProducerRegistrar.camelObjects_=" title="(x$1: scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)])Unit">camelObjects</a> <span title="(key: akka.actor.ActorRef)scala.collection.immutable.Map[akka.actor.ActorRef,(org.apache.camel.Endpoint, org.apache.camel.processor.SendProcessor)]">-=</span> <span title="akka.actor.ActorRef">producer</span>
            <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointDeActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointDeActivated">EndpointDeActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.e">e</a><span class="delimiter">)</span> ⇒ throw new <a href="#akka.camel.internal;ActorDeActivationException" title="akka.camel.internal.ActorDeActivationException">ActorDeActivationException</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">producer</span>, <a href="#akka.camel.internal;ProducerRegistrar.receive;$anonfun.applyOrElse.$anonfun.e" title="Throwable">e</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * Registers Consumers.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class ConsumerRegistrar extends AnyRef with akka.actor.Actor with akka.camel.CamelSupport" id="akka.camel.internal;ConsumerRegistrar">ConsumerRegistrar</a><a href="#akka.camel.internal;ConsumerRegistrar" title="akka.camel.internal.ConsumerRegistrar" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.camel.internal;ConsumerRegistrar.activationTracker">activationTracker</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../CamelSupport.scala.html#akka.camel;CamelSupport" title="akka.camel.CamelSupport">CamelSupport</a> <span class="delimiter">{</span>
  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.camel.internal;ConsumerRegistrar.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;ConsumerRegistrar.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case Register<span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span>, <a title="String" id="akka.camel.internal;ConsumerRegistrar.receive;$anonfun.isDefinedAt.endpointUri">endpointUri</a>, Some<span class="delimiter">(</span><a title="akka.camel.ConsumerConfig" id="akka.camel.internal;ConsumerRegistrar.receive;$anonfun.isDefinedAt.consumerConfig">consumerConfig</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      try <span class="delimiter">{</span>
        <span class="comment">// if this throws, the supervisor stops the consumer and de-registers it on termination</span>
        <a href="../CamelSupport.scala.html#akka.camel;CamelSupport.camelContext" title="=&gt; org.apache.camel.impl.DefaultCamelContext">camelContext</a>.<span title="(x$1: org.apache.camel.RoutesBuilder)Unit">addRoutes</span><span class="delimiter">(</span>new <a href="ConsumerActorRouteBuilder.scala.html#akka.camel.internal;ConsumerActorRouteBuilder" title="akka.camel.internal.ConsumerActorRouteBuilder">ConsumerActorRouteBuilder</a><span class="delimiter">(</span><a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.isDefinedAt.endpointUri" title="String">endpointUri</a>, <span title="akka.actor.ActorRef">consumer</span>, <a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.isDefinedAt.consumerConfig" title="akka.camel.ConsumerConfig">consumerConfig</a>, <a href="../CamelSupport.scala.html#akka.camel;CamelSupport.camel" title="=&gt; akka.camel.Camel">camel</a>.<a href="../Camel.scala.html#akka.camel;Camel.settings" title="=&gt; akka.camel.CamelSettings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointActivated">EndpointActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case <a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒ throw new <a href="#akka.camel.internal;ActorActivationException" title="akka.camel.internal.ActorActivationException">ActorActivationException</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span>, <span title="Throwable">e</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    case DeRegister<span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span><span class="delimiter">)</span> ⇒
      try <span class="delimiter">{</span>
        val <a title="String" id="akka.camel.internal;ConsumerRegistrar.receive;$anonfun.applyOrElse.route">route</a> = <span title="akka.actor.ActorRef">consumer</span>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>
        <a href="../CamelSupport.scala.html#akka.camel;CamelSupport.camelContext" title="=&gt; org.apache.camel.impl.DefaultCamelContext">camelContext</a>.<span title="(x$1: String)Unit">stopRoute</span><span class="delimiter">(</span><a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.applyOrElse.route" title="String">route</a><span class="delimiter">)</span>
        <a href="../CamelSupport.scala.html#akka.camel;CamelSupport.camelContext" title="=&gt; org.apache.camel.impl.DefaultCamelContext">camelContext</a>.<span title="(x$1: String)Boolean">removeRoute</span><span class="delimiter">(</span><a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.applyOrElse.route" title="String">route</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">activationTracker</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointDeActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointDeActivated">EndpointDeActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case <a href="#akka.camel.internal;ConsumerRegistrar.receive;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒ throw new <a href="#akka.camel.internal;ActorDeActivationException" title="akka.camel.internal.ActorDeActivationException">ActorDeActivationException</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">consumer</span>, <span title="Throwable">e</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
