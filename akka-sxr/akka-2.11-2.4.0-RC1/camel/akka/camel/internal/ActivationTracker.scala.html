<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>camel/akka/camel/internal/ActivationTracker.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.camel.internal

import akka.actor._
import collection.mutable.WeakHashMap
import akka.camel.internal.<a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol" title="akka.camel.internal.ActivationProtocol.type">ActivationProtocol</a>._

<span class="comment">/**
 * INTERNAL API
 * An actor that tracks activation and de-activation of endpoints.
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> class <a title="class ActivationTracker extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.camel.internal;ActivationTracker">ActivationTracker</a> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>

  val <a title="scala.collection.mutable.WeakHashMap[akka.actor.ActorRef,ActivationTracker.this.ActivationStateMachine]" id="akka.camel.internal;ActivationTracker.activations">activations</a> = new <span title="scala.collection.mutable.WeakHashMap[akka.actor.ActorRef,ActivationTracker.this.ActivationStateMachine]">WeakHashMap</span><span class="delimiter">[</span>ActorRef, ActivationStateMachine<span class="delimiter">]</span>
  <span class="comment">/**
   * A state machine that keeps track of the endpoint activation status of an actor.
   */</span>
  class <a title="class ActivationStateMachine extends AnyRef" id="akka.camel.internal;ActivationTracker;ActivationStateMachine">ActivationStateMachine</a> <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine" title="ActivationTracker.this.ActivationStateMachine" class="delimiter">{</a>
    type <a title="PartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit]" id="akka.camel.internal;ActivationTracker;ActivationStateMachine;State">State</a> = <span title="PartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit]">PartialFunction</span><span class="delimiter">[</span>ActivationMessage, Unit<span class="delimiter">]</span>

    var <a title="ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=">receive</a>: <span title="ActivationStateMachine.this.State">State</span> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated" title="()ActivationStateMachine.this.State">notActivated</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="comment">/**
     * Not activated state
     * @return a partial function that handles messages in the 'not activated' state
     */</span>
    def <a title="()ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated">notActivated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="ActivationStateMachine.this.State">State</span> = <span class="delimiter">{</span>
      var <a title="List[akka.actor.ActorRef]" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingActivation">awaitingActivation</a> = List<span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span>
      var <a title="List[akka.actor.ActorRef]" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingDeActivation">awaitingDeActivation</a> = List<span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span title="scala.collection.immutable.Nil.type" class="delimiter">(</span><span class="delimiter">)</span>

      <a title="&lt;$anon: akka.camel.internal.ActivationProtocol.ActivationMessage =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit] with Serializable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        case AwaitActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>   ⇒ <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingActivation" title="List[akka.actor.ActorRef]">awaitingActivation</a> <span title="(x: akka.actor.ActorRef)List[akka.actor.ActorRef]">::=</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case AwaitDeActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒ <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingDeActivation" title="List[akka.actor.ActorRef]">awaitingDeActivation</a> <span title="(x: akka.actor.ActorRef)List[akka.actor.ActorRef]">::=</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case <a title="akka.camel.internal.ActivationProtocol.EndpointActivated" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.msg">msg</a> @ EndpointActivated<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingActivation" title="List[akka.actor.ActorRef]">awaitingActivation</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.msg" title="akka.camel.internal.ActivationProtocol.EndpointActivated">msg</a><span class="delimiter">)</span>
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="(x$1: ActivationStateMachine.this.State)Unit">receive</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated" title="(currentAwaitingDeActivation: List[akka.actor.ActorRef])ActivationStateMachine.this.State">activated</a><span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingDeActivation" title="List[akka.actor.ActorRef]">awaitingDeActivation</a><span class="delimiter">)</span>
        case EndpointFailedToActivate<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a title="Throwable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.cause">cause</a><span class="delimiter">)</span> ⇒
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated.awaitingActivation" title="List[akka.actor.ActorRef]">awaitingActivation</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToActivate">EndpointFailedToActivate</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.cause" title="Throwable">cause</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="(x$1: ActivationStateMachine.this.State)Unit">receive</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate" title="(cause: Throwable)ActivationStateMachine.this.State">failedToActivate</a><span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.notActivated;$anonfun.isDefinedAt.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Activated state.
     * @param currentAwaitingDeActivation the current &lt;code&gt;ActorRef&lt;/code&gt;s awaiting de-activation
     * @return a partial function that handles messages in the 'activated' state
     */</span>
    def <a title="(currentAwaitingDeActivation: List[akka.actor.ActorRef])ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.activated">activated</a><span class="delimiter">(</span><a title="List[akka.actor.ActorRef]" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.currentAwaitingDeActivation">currentAwaitingDeActivation</a>: <span title="List[akka.actor.ActorRef]">List</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="ActivationStateMachine.this.State">State</span> = <span class="delimiter">{</span>
      var <a title="List[akka.actor.ActorRef]" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.awaitingDeActivation">awaitingDeActivation</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.currentAwaitingDeActivation" title="List[akka.actor.ActorRef]">currentAwaitingDeActivation</a>

      <a title="&lt;$anon: akka.camel.internal.ActivationProtocol.ActivationMessage =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit] with Serializable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.activated;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        case AwaitActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>   ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointActivated">EndpointActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
        case AwaitDeActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒ <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.awaitingDeActivation" title="List[akka.actor.ActorRef]">awaitingDeActivation</a> <span title="(x: akka.actor.ActorRef)List[akka.actor.ActorRef]">::=</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case <span title="akka.camel.internal.ActivationProtocol.EndpointDeActivated">msg</span> @ EndpointDeActivated<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.awaitingDeActivation" title="List[akka.actor.ActorRef]">awaitingDeActivation</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.camel.internal.ActivationProtocol.EndpointDeActivated">msg</span><span class="delimiter">)</span>
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="(x$1: ActivationStateMachine.this.State)Unit">receive</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.deactivated" title="=&gt; ActivationStateMachine.this.State">deactivated</a>
        case <span title="akka.camel.internal.ActivationProtocol.EndpointFailedToDeActivate">msg</span> @ EndpointFailedToDeActivate<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a title="Throwable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.activated;$anonfun.isDefinedAt.cause">cause</a><span class="delimiter">)</span> ⇒
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated.awaitingDeActivation" title="List[akka.actor.ActorRef]">awaitingDeActivation</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.camel.internal.ActivationProtocol.EndpointFailedToDeActivate">msg</span><span class="delimiter">)</span>
          <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="(x$1: ActivationStateMachine.this.State)Unit">receive</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToDeActivate" title="(cause: Throwable)ActivationStateMachine.this.State">failedToDeActivate</a><span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated;$anonfun.isDefinedAt.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * De-activated state
     * @return a partial function that handles messages in the 'de-activated' state
     */</span>
    def <a title="=&gt; ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.deactivated">deactivated</a>: <span title="ActivationStateMachine.this.State">State</span> = <a title="&lt;$anon: akka.camel.internal.ActivationProtocol.ActivationMessage =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit] with Serializable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.deactivated;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="comment">// deactivated means it was activated at some point, so tell sender() it was activated</span>
      case AwaitActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>   ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointActivated">EndpointActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
      case AwaitDeActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointDeActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointDeActivated">EndpointDeActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
      <span class="comment">//resurrected at restart.</span>
      case <a title="akka.camel.internal.ActivationProtocol.EndpointActivated" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.deactivated;$anonfun.isDefinedAt.msg">msg</a> @ EndpointActivated<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
        <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="(x$1: ActivationStateMachine.this.State)Unit">receive</a> = <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.activated" title="(currentAwaitingDeActivation: List[akka.actor.ActorRef])ActivationStateMachine.this.State">activated</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Failed to activate state
     * @param cause the cause for the failure
     * @return a partial function that handles messages in 'failed to activate' state
     */</span>
    def <a title="(cause: Throwable)ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate">failedToActivate</a><span class="delimiter">(</span><a title="Throwable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="ActivationStateMachine.this.State">State</span> = <a title="&lt;$anon: akka.camel.internal.ActivationProtocol.ActivationMessage =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit] with Serializable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case AwaitActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>   ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToActivate">EndpointFailedToActivate</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      case AwaitDeActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToActivate">EndpointFailedToActivate</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToActivate.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      case EndpointDeActivated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="comment">// the de-register at termination always sends a de-activated when the cleanup is done. ignoring.</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Failed to de-activate state
     * @param cause the cause for the failure
     * @return a partial function that handles messages in 'failed to de-activate' state
     */</span>
    def <a title="(cause: Throwable)ActivationStateMachine.this.State" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToDeActivate">failedToDeActivate</a><span class="delimiter">(</span><a title="Throwable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToDeActivate.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="ActivationStateMachine.this.State">State</span> = <a title="&lt;$anon: akka.camel.internal.ActivationProtocol.ActivationMessage =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit] with Serializable" id="akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToDeActivate;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case AwaitActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>   ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointActivated" title="(actorRef: akka.actor.ActorRef)akka.camel.internal.ActivationProtocol.EndpointActivated">EndpointActivated</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
      case AwaitDeActivation<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;EndpointFailedToDeActivate" title="(actorRef: akka.actor.ActorRef, cause: Throwable)akka.camel.internal.ActivationProtocol.EndpointFailedToDeActivate">EndpointFailedToDeActivate</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>, <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.failedToDeActivate.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      case EndpointDeActivated<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="comment">// the de-register at termination always sends a de-activated when the cleanup is done. ignoring.</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  override def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.camel.internal;ActivationTracker.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="akka.camel.internal.ActivationProtocol.ActivationMessage" id="akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.msg">msg</a> @ <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol.ActivationMessage.unapply" title="(msg: akka.camel.internal.ActivationProtocol.ActivationMessage)Option[akka.actor.ActorRef]">ActivationMessage</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.ref">ref</a><span class="delimiter">)</span> ⇒
      <span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker.activations" title="=&gt; scala.collection.mutable.WeakHashMap[akka.actor.ActorRef,ActivationTracker.this.ActivationStateMachine]">activations</a>.<span title="(key: akka.actor.ActorRef, op: =&gt; ActivationTracker.this.ActivationStateMachine)ActivationTracker.this.ActivationStateMachine">getOrElseUpdate</span><span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.ref" title="akka.actor.ActorRef">ref</a>, new <a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine" title="ActivationTracker.this.ActivationStateMachine">ActivationStateMachine</a><span class="delimiter">)</span>.<a href="#akka.camel.internal;ActivationTracker;ActivationStateMachine.receive_=" title="=&gt; PartialFunction[akka.camel.internal.ActivationProtocol.ActivationMessage,Unit]">receive</a> <span title="(v1: akka.camel.internal.ActivationProtocol.ActivationMessage)Unit">orElse</span> <a href="#akka.camel.internal;ActivationTracker.logStateWarning" title="(actorRef: akka.actor.ActorRef)ActivationTracker.this.Receive">logStateWarning</a><span class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span><span class="delimiter">)</span><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.camel.internal;ActivationTracker.receive;$anonfun.isDefinedAt.msg" title="akka.camel.internal.ActivationProtocol.ActivationMessage">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="(actorRef: akka.actor.ActorRef)ActivationTracker.this.Receive" id="akka.camel.internal;ActivationTracker.logStateWarning">logStateWarning</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;ActivationTracker.logStateWarning.actorRef">actorRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="ActivationTracker.this.Receive">Receive</span> =
    <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.camel.internal;ActivationTracker.logStateWarning;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="Any" id="akka.camel.internal;ActivationTracker.logStateWarning;$anonfun.isDefinedAt.msg">msg</a> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span title="Boolean(true)" class="delimiter">(</span><span title="String(&quot;Message [{}] not expected in current state of actor [{}]&quot;)" class="string">&quot;Message [{}] not expected in current state of actor [{}]&quot;</span>, <a href="#akka.camel.internal;ActivationTracker.logStateWarning;$anonfun.isDefinedAt.msg" title="Any">msg</a>, <a href="#akka.camel.internal;ActivationTracker.logStateWarning.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * A request message to the ActivationTracker for the status of activation.
 * @param ref the actorRef
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> final case class <a title="class AwaitActivation extends akka.camel.internal.ActivationProtocol.ActivationMessage with Product with Serializable" id="akka.camel.internal.AwaitActivation.readResolve">AwaitActivation</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;AwaitActivation.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;ActivationMessage" title="akka.camel.internal.ActivationProtocol.ActivationMessage">ActivationMessage</a><span class="delimiter">(</span><a href="#akka.camel.internal;AwaitActivation.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>

<span class="comment">/**
 * INTERNAL API
 * A request message to the ActivationTracker for the status of de-activation.
 * @param ref the actorRef
 */</span>
private<span class="delimiter">[</span>camel<span class="delimiter">]</span> final case class <a title="class AwaitDeActivation extends akka.camel.internal.ActivationProtocol.ActivationMessage with Product with Serializable" id="akka.camel.internal.AwaitDeActivation.readResolve">AwaitDeActivation</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.camel.internal;AwaitDeActivation.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="ActivationMessage.scala.html#akka.camel.internal.ActivationProtocol;ActivationMessage" title="akka.camel.internal.ActivationProtocol.ActivationMessage">ActivationMessage</a><span class="delimiter">(</span><a href="#akka.camel.internal;AwaitDeActivation.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>

        </pre>
    </body>
</html>
