<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>typed-experimental/akka/typed/patterns/Receptionist.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2014-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.typed.patterns

import akka.typed.<a href="../ScalaDSL.scala.html#akka.typed.ScalaDSL" title="akka.typed.ScalaDSL.type">ScalaDSL</a>._
import akka.typed.ActorRef
import akka.typed.Behavior
import akka.typed.Terminated
import akka.util.TypedMultiMap

<span class="comment">/**
 * A Receptionist is an entry point into an Actor hierarchy where select Actors
 * publish their identity together with the protocols that they implement. Other
 * Actors need only know the Receptionist’s identity in order to be able to use
 * the services of the registered Actors.
 */</span>
object <a title="akka.typed.patterns.Receptionist.type" id="akka.typed.patterns.Receptionist">Receptionist</a> <a href="#akka.typed.patterns.Receptionist" title="akka.typed.patterns.Receptionist.type" class="delimiter">{</a>

  <span class="comment">/**
   * Internal representation of [[Receptionist.ServiceKey]] which is needed
   * in order to use a TypedMultiMap (using keys with a type parameter does not
   * work in Scala 2.x).
   */</span>
  trait <a title="trait AbstractServiceKey extends AnyRef" id="akka.typed.patterns.Receptionist;AbstractServiceKey">AbstractServiceKey</a> <span class="delimiter">{</span>
    type <a title="" id="akka.typed.patterns.Receptionist;AbstractServiceKey;Type">Type</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A service key is an object that implements this trait for a given protocol
   * T, meaning that it signifies that the type T is the entry point into the
   * protocol spoken by that service (think of it as the set of first messages
   * that a client could send).
   */</span>
  trait <a title="trait ServiceKey[T] extends AnyRef with akka.typed.patterns.Receptionist.AbstractServiceKey" id="akka.typed.patterns.Receptionist;ServiceKey">ServiceKey</a><span class="delimiter">[</span><a title="" id="akka.typed.patterns.Receptionist;ServiceKey;T">T</a><span class="delimiter">]</span> extends <a href="#akka.typed.patterns.Receptionist;AbstractServiceKey" title="akka.typed.patterns.Receptionist.AbstractServiceKey">AbstractServiceKey</a> <span class="delimiter">{</span>
    final override type <a title="T" id="akka.typed.patterns.Receptionist;ServiceKey;Type">Type</a> = <a href="#akka.typed.patterns.Receptionist;ServiceKey;T" title="T">T</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The set of commands accepted by a Receptionist.
   */</span>
  sealed trait <a title="trait Command extends AnyRef" id="akka.typed.patterns.Receptionist;Command">Command</a>
  <span class="comment">/**
   * Associate the given [[akka.typed.ActorRef]] with the given [[ServiceKey]]. Multiple
   * registrations can be made for the same key. Unregistration is implied by
   * the end of the referenced Actor’s lifecycle.
   */</span>
  final case class <a href="#akka.typed.patterns.Receptionist;Register.productElement.x$1" title="class Register[T] extends AnyRef with akka.typed.patterns.Receptionist.Command with Product with Serializable" id="akka.typed.patterns.Receptionist.Register.readResolve">Register</a><span class="delimiter">[</span><a title="" id="akka.typed.patterns.Receptionist;Register;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="akka.typed.patterns.Receptionist.ServiceKey[T]" id="akka.typed.patterns.Receptionist;Register.key">key</a>: <a href="#akka.typed.patterns.Receptionist;ServiceKey" title="akka.typed.patterns.Receptionist.ServiceKey[T]">ServiceKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="akka.typed.ActorRef[T]" id="akka.typed.patterns.Receptionist;Register.address">address</a>: <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.ActorRef[T]">ActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span>val <a title="akka.typed.ActorRef[akka.typed.patterns.Receptionist.Registered[T]]" id="akka.typed.patterns.Receptionist;Register.replyTo">replyTo</a>: <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.ActorRef[akka.typed.patterns.Receptionist.Registered[T]]">ActorRef</a><span class="delimiter">[</span>Registered<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#akka.typed.patterns.Receptionist;Command" title="akka.typed.patterns.Receptionist.Command">Command</a>
  <span class="comment">/**
   * Query the Receptionist for a list of all Actors implementing the given
   * protocol.
   */</span>
  final case class <a href="#akka.typed.patterns.Receptionist;Find.productElement.x$1" title="class Find[T] extends AnyRef with akka.typed.patterns.Receptionist.Command with Product with Serializable" id="akka.typed.patterns.Receptionist.Find.readResolve">Find</a><span class="delimiter">[</span><a title="" id="akka.typed.patterns.Receptionist;Find;T">T</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="akka.typed.patterns.Receptionist.ServiceKey[T]" id="akka.typed.patterns.Receptionist;Find.key">key</a>: <a href="#akka.typed.patterns.Receptionist;ServiceKey" title="akka.typed.patterns.Receptionist.ServiceKey[T]">ServiceKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span>val <a title="akka.typed.ActorRef[akka.typed.patterns.Receptionist.Listing[T]]" id="akka.typed.patterns.Receptionist;Find.replyTo">replyTo</a>: <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.ActorRef[akka.typed.patterns.Receptionist.Listing[T]]">ActorRef</a><span class="delimiter">[</span>Listing<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#akka.typed.patterns.Receptionist;Command" title="akka.typed.patterns.Receptionist.Command">Command</a>

  <span class="comment">/**
   * Confirmation that the given [[akka.typed.ActorRef]] has been associated with the [[ServiceKey]].
   */</span>
  final case class <a href="#akka.typed.patterns.Receptionist;Registered.productElement.x$1" title="class Registered[T] extends AnyRef with Product with Serializable" id="akka.typed.patterns.Receptionist.Registered.readResolve">Registered</a><span class="delimiter">[</span><a title="" id="akka.typed.patterns.Receptionist;Registered;T">T</a><span class="delimiter">]</span><a href="#akka.typed.patterns.Receptionist.Registered.readResolve" title="Product" class="delimiter">(</a><a title="akka.typed.patterns.Receptionist.ServiceKey[T]" id="akka.typed.patterns.Receptionist;Registered.key">key</a>: <a href="#akka.typed.patterns.Receptionist;ServiceKey" title="akka.typed.patterns.Receptionist.ServiceKey[T]">ServiceKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="akka.typed.ActorRef[T]" id="akka.typed.patterns.Receptionist;Registered.address">address</a>: <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.ActorRef[T]">ActorRef</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="comment">/**
   * Current listing of all Actors that implement the protocol given by the [[ServiceKey]].
   */</span>
  final case class <a href="#akka.typed.patterns.Receptionist;Listing.productElement.x$1" title="class Listing[T] extends AnyRef with Product with Serializable" id="akka.typed.patterns.Receptionist.Listing.readResolve">Listing</a><span class="delimiter">[</span><a title="" id="akka.typed.patterns.Receptionist;Listing;T">T</a><span class="delimiter">]</span><a href="#akka.typed.patterns.Receptionist.Listing.readResolve" title="Product" class="delimiter">(</a><a title="akka.typed.patterns.Receptionist.ServiceKey[T]" id="akka.typed.patterns.Receptionist;Listing.key">key</a>: <a href="#akka.typed.patterns.Receptionist;ServiceKey" title="akka.typed.patterns.Receptionist.ServiceKey[T]">ServiceKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Set[akka.typed.ActorRef[T]]" id="akka.typed.patterns.Receptionist;Listing.addresses">addresses</a>: <span title="Set[akka.typed.ActorRef[T]]">Set</span><span class="delimiter">[</span>ActorRef<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Initial behavior of a receptionist, used to create a new receptionist like in the following:
   *
   * {{{
   * val receptionist: ActorRef[Receptionist.Command] = ctx.spawn(Props(Receptionist.behavior), &quot;receptionist&quot;)
   * }}}
   */</span>
  val <a title="akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]" id="akka.typed.patterns.Receptionist.behavior(31c3aec165)">behavior</a>: <a href="../Behavior.scala.html#akka.typed;Behavior" title="akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">Behavior</a><span class="delimiter">[</span>Command<span class="delimiter">]</span> = <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a)" title="(map: akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV])akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">behavior</a><span class="delimiter">(</span><a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util.TypedMultiMap" title="akka.util.TypedMultiMap.type">TypedMultiMap</a>.<a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util.TypedMultiMap.empty" title="[T &lt;: AnyRef, K[_ &lt;: T]]=&gt; akka.util.TypedMultiMap[T,K]">empty</a><span title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]" class="delimiter">[</span><a href="#akka.typed.patterns.Receptionist;AbstractServiceKey" title="akka.typed.patterns.Receptionist.AbstractServiceKey">AbstractServiceKey</a>, <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.patterns.Receptionist.KV">KV</a><span class="delimiter">]</span><span class="delimiter">)</span>

  private type <a title="[K &lt;: akka.typed.patterns.Receptionist.AbstractServiceKey]akka.typed.ActorRef[K#Type]" id="akka.typed.patterns.Receptionist;KV">KV</a><span class="delimiter">[</span><a title=" &lt;: akka.typed.patterns.Receptionist.AbstractServiceKey" id="akka.typed.patterns.Receptionist;KV;K">K</a> &lt;: AbstractServiceKey<span class="delimiter">]</span> = <a href="../ActorRef.scala.html#akka.typed;ActorRef" title="akka.typed.ActorRef[K#Type]">ActorRef</a><span class="delimiter">[</span>K#Type<span class="delimiter">]</span>

  private def <a title="(map: akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV])akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a)">behavior</a><span class="delimiter">(</span><a title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a).map">map</a>: <a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util;TypedMultiMap" title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">TypedMultiMap</a><span class="delimiter">[</span>AbstractServiceKey, KV<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../Behavior.scala.html#akka.typed;Behavior" title="akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">Behavior</a><span class="delimiter">[</span>Command<span class="delimiter">]</span> = <a href="../ScalaDSL.scala.html#akka.typed.ScalaDSL;Full" title="(behavior: PartialFunction[akka.typed.ScalaDSL.MessageOrSignal[akka.typed.patterns.Receptionist.Command],akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]])akka.typed.ScalaDSL.Full[akka.typed.patterns.Receptionist.Command]">Full</a> <a title="&lt;$anon: akka.typed.ScalaDSL.MessageOrSignal[akka.typed.patterns.Receptionist.Command] =&gt; akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]&gt; extends scala.runtime.AbstractPartialFunction[akka.typed.ScalaDSL.MessageOrSignal[akka.typed.patterns.Receptionist.Command],akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]] with Serializable" id="akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case Msg<span class="delimiter">(</span><span title="akka.typed.ActorContext[akka.typed.patterns.Receptionist.Command]">ctx</span>, <a title="akka.typed.patterns.Receptionist.Register[t]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r">r</a>: <a href="#akka.typed.patterns.Receptionist.Register.readResolve" title="akka.typed.patterns.Receptionist.Register[t]">Register</a><span class="delimiter">[</span>t<span class="delimiter">]</span><span class="delimiter">)</span> ⇒
      <span title="akka.typed.ActorContext[akka.typed.patterns.Receptionist.Command]">ctx</span>.<a href="../ActorContext.scala.html#akka.typed;ActorContext.watch(12d1170c35)" title="(other: akka.typed.ActorRef[t])akka.typed.ActorRef[t]">watch</a><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="#akka.typed.patterns.Receptionist;Register.address" title="=&gt; akka.typed.ActorRef[t]">address</a><span class="delimiter">)</span>
      <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="../ActorRef.scala.html#akka.typed.ActorRef.toScalaActorRef" title="(ref: akka.typed.ActorRef[akka.typed.patterns.Receptionist.Registered[t]])akka.typed.ScalaActorRef[akka.typed.patterns.Receptionist.Registered[t]]">replyTo</a> <a href="../ActorRef.scala.html#akka.typed;ScalaActorRef.!" title="(msg: akka.typed.patterns.Receptionist.Registered[t])Unit">!</a> <a href="#akka.typed.patterns.Receptionist.Registered.readResolve" title="(key: akka.typed.patterns.Receptionist.ServiceKey[t], address: akka.typed.ActorRef[t])akka.typed.patterns.Receptionist.Registered[t]">Registered</a><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="#akka.typed.patterns.Receptionist;Register.key" title="=&gt; akka.typed.patterns.Receptionist.ServiceKey[t]">key</a>, <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="#akka.typed.patterns.Receptionist;Register.address" title="=&gt; akka.typed.ActorRef[t]">address</a><span class="delimiter">)</span>
      <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a)" title="(map: akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV])akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">behavior</a><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a).map" title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">map</a>.<a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util;TypedMultiMap.inserted" title="(key: akka.typed.patterns.Receptionist.AbstractServiceKey)(value: akka.typed.patterns.Receptionist.KV[key.type])akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">inserted</a><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="#akka.typed.patterns.Receptionist;Register.key" title="=&gt; akka.typed.patterns.Receptionist.ServiceKey[t]">key</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.r" title="akka.typed.patterns.Receptionist.Register[t]">r</a>.<a href="#akka.typed.patterns.Receptionist;Register.address" title="=&gt; akka.typed.ActorRef[t]">address</a><span class="delimiter">)</span><span class="delimiter">)</span>
    case Msg<span class="delimiter">(</span><span title="akka.typed.ActorContext[akka.typed.patterns.Receptionist.Command]">ctx</span>, <a title="akka.typed.patterns.Receptionist.Find[t]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.f">f</a>: <a href="#akka.typed.patterns.Receptionist.Find.readResolve" title="akka.typed.patterns.Receptionist.Find[t]">Find</a><span class="delimiter">[</span>t<span class="delimiter">]</span><span class="delimiter">)</span> ⇒
      val set = <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a).map" title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">map</a> <a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util;TypedMultiMap.get" title="Set[akka.typed.patterns.Receptionist.KV[f.key.type]]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.applyOrElse.set">get</a> <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.f" title="akka.typed.patterns.Receptionist.Find[t]">f</a>.<a href="#akka.typed.patterns.Receptionist;Find.key" title="=&gt; akka.typed.patterns.Receptionist.ServiceKey[t]">key</a>
      <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.f" title="akka.typed.patterns.Receptionist.Find[t]">f</a>.<a href="../ActorRef.scala.html#akka.typed.ActorRef.toScalaActorRef" title="(ref: akka.typed.ActorRef[akka.typed.patterns.Receptionist.Listing[t]])akka.typed.ScalaActorRef[akka.typed.patterns.Receptionist.Listing[t]]">replyTo</a> <a href="../ActorRef.scala.html#akka.typed;ScalaActorRef.!" title="(msg: akka.typed.patterns.Receptionist.Listing[t])Unit">!</a> <a href="#akka.typed.patterns.Receptionist.Listing.readResolve" title="(key: akka.typed.patterns.Receptionist.ServiceKey[f.key.Type], addresses: Set[akka.typed.ActorRef[f.key.Type]])akka.typed.patterns.Receptionist.Listing[f.key.Type]">Listing</a><span class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.f" title="akka.typed.patterns.Receptionist.Find[t]">f</a>.<a href="#akka.typed.patterns.Receptionist;Find.key" title="=&gt; akka.typed.patterns.Receptionist.ServiceKey[t]">key</a>, <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.applyOrElse.set" title="Set[akka.typed.patterns.Receptionist.KV[f.key.type]]">set</a><span class="delimiter">)</span>
      <a href="../ScalaDSL.scala.html#akka.typed.ScalaDSL.Same" title="akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">Same</a>
    case Sig<span class="delimiter">(</span><span title="akka.typed.ActorContext[akka.typed.patterns.Receptionist.Command]">ctx</span>, Terminated<span class="delimiter">(</span><a title="akka.typed.ActorRef[Nothing]" id="akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.ref">ref</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a)" title="(map: akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV])akka.typed.Behavior[akka.typed.patterns.Receptionist.Command]">behavior</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a).map" title="akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">map</a> <a href="../../../../actor/akka/util/TypedMultiMap.scala.html#akka.util;TypedMultiMap.valueRemoved" title="(value: Any)akka.util.TypedMultiMap[akka.typed.patterns.Receptionist.AbstractServiceKey,akka.typed.patterns.Receptionist.KV]">valueRemoved</a> <a href="#akka.typed.patterns.Receptionist.behavior(9f9195680a);$anonfun.isDefinedAt.ref" title="akka.typed.ActorRef[Nothing]">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

abstract class <a title="class Receptionist extends AnyRef" id="akka.typed.patterns;Receptionist">Receptionist</a>
        </pre>
    </body>
</html>
