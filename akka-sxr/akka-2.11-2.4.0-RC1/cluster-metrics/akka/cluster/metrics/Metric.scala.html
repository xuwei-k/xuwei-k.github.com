<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cluster-metrics/akka/cluster/metrics/Metric.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.cluster.metrics

import akka.actor.Address
import scala.util.Success
import scala.util.Failure
import scala.util.Try

<span class="comment">/**
 * Metrics key/value.
 *
 * Equality of Metric is based on its name.
 *
 * @param name the metric name
 * @param value the metric value, which must be a valid numerical value,
 *   a valid value is neither negative nor NaN/Infinite.
 * @param average the data stream of the metric value, for trending over time. Metrics that are already
 *   averages (e.g. system load average) or finite (e.g. as number of processors), are not trended.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="class Metric extends AnyRef with akka.cluster.metrics.MetricNumericConverter with Product with Serializable" id="akka.cluster.metrics;Metric">Metric</a> private<span class="delimiter">[</span>metrics<span class="delimiter">]</span> <span class="delimiter">(</span><a title="String" id="akka.cluster.metrics;Metric.name">name</a>: <span title="String">String</span>, <a title="Number" id="akka.cluster.metrics;Metric.value">value</a>: <span title="Number">Number</span>, <a title="Option[akka.cluster.metrics.EWMA]" id="akka.cluster.metrics;Metric.average">average</a>: <span title="Option[akka.cluster.metrics.EWMA]">Option</span><span class="delimiter">[</span>EWMA<span class="delimiter">]</span><span class="delimiter">)</span>
  extends <a href="#akka.cluster.metrics;MetricNumericConverter" title="akka.cluster.metrics.MetricNumericConverter">MetricNumericConverter</a> <span class="delimiter">{</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricNumericConverter.defined" title="(value: Number)Boolean">defined</a><span class="delimiter">(</span><a href="#akka.cluster.metrics;Metric.value" title="=&gt; Number">value</a><span class="delimiter">)</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Invalid Metric [&quot;)">Invalid Metric [$</span><a href="#akka.cluster.metrics;Metric.name" title="=&gt; String">name</a><span title="String(&quot;] value [&quot;)">] value [$</span><a href="#akka.cluster.metrics;Metric.value" title="=&gt; Number">value</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Updates the data point, and if defined, updates the data stream (average).
   * Returns the updated metric.
   */</span>
  def <a title="(latest: akka.cluster.metrics.Metric)akka.cluster.metrics.Metric" id="akka.cluster.metrics;Metric.:+">:+</a><span class="delimiter">(</span><a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;Metric.:+.latest">latest</a>: <a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a> =
    if <span class="delimiter">(</span>this <a href="#akka.cluster.metrics;Metric.sameAs" title="(that: akka.cluster.metrics.Metric)Boolean">sameAs</a> <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a><span class="delimiter">)</span> <a href="#akka.cluster.metrics;Metric.average" title="=&gt; Option[akka.cluster.metrics.EWMA]">average</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="akka.cluster.metrics.EWMA" id="akka.cluster.metrics;Metric.:+.avg">avg</a><span class="delimiter">)</span>                        ⇒ <a href="#akka.cluster.metrics;Metric.name" title="String" id="akka.cluster.metrics;Metric.:+.x$10">copy</a><span class="delimiter">(</span>value = <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.value" title="Number" id="akka.cluster.metrics;Metric.:+.x$8">value</a>, average = <span title="(x: akka.cluster.metrics.EWMA)Some[akka.cluster.metrics.EWMA]">Some</span><a title="Some[akka.cluster.metrics.EWMA] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.cluster.metrics;Metric.:+.x$9" class="delimiter">(</a><a href="#akka.cluster.metrics;Metric.:+.avg" title="akka.cluster.metrics.EWMA">avg</a> <a href="EWMA.scala.html#akka.cluster.metrics;EWMA.:+" title="(xn: Double)akka.cluster.metrics.EWMA">:+</a> <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.value" title="=&gt; Number">value</a>.<span title="()Double">doubleValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case <span title="None.type">None</span> if <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.average" title="=&gt; Option[akka.cluster.metrics.EWMA]">average</a>.<span title="=&gt; Boolean">isDefined</span> ⇒ <a href="#akka.cluster.metrics;Metric.name" title="String" id="akka.cluster.metrics;Metric.:+.x$13">copy</a><span class="delimiter">(</span>value = <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.value" title="Number" id="akka.cluster.metrics;Metric.:+.x$11">value</a>, average = <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.average" title="Option[akka.cluster.metrics.EWMA] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.cluster.metrics;Metric.:+.x$12">average</a><span class="delimiter">)</span>
      case _                                ⇒ <a href="#akka.cluster.metrics;Metric.name" title="String" id="akka.cluster.metrics;Metric.:+.x$16">copy</a><span class="delimiter">(</span>value = <a href="#akka.cluster.metrics;Metric.:+.latest" title="akka.cluster.metrics.Metric">latest</a>.<a href="#akka.cluster.metrics;Metric.value" title="Number" id="akka.cluster.metrics;Metric.:+.x$14">value</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    else this

  <span class="comment">/**
   * The numerical value of the average, if defined, otherwise the latest value
   */</span>
  def <a title="=&gt; Double" id="akka.cluster.metrics;Metric.smoothValue">smoothValue</a>: <span title="Double">Double</span> = <a href="#akka.cluster.metrics;Metric.average" title="=&gt; Option[akka.cluster.metrics.EWMA]">average</a> match <span class="delimiter">{</span>
    case Some<span class="delimiter">(</span><a title="akka.cluster.metrics.EWMA" id="akka.cluster.metrics;Metric.smoothValue.avg">avg</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.metrics;Metric.smoothValue.avg" title="akka.cluster.metrics.EWMA">avg</a>.<a href="EWMA.scala.html#akka.cluster.metrics;EWMA.value" title="=&gt; Double">value</a>
    case <span title="None.type">None</span>      ⇒ <a href="#akka.cluster.metrics;Metric.value" title="=&gt; Number">value</a>.<span title="()Double">doubleValue</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * @return true if this value is smoothed
   */</span>
  def <a title="=&gt; Boolean" id="akka.cluster.metrics;Metric.isSmooth">isSmooth</a>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.metrics;Metric.average" title="=&gt; Option[akka.cluster.metrics.EWMA]">average</a>.<span title="=&gt; Boolean">isDefined</span>

  <span class="comment">/**
   * Returns true if &lt;code&gt;that&lt;/code&gt; is tracking the same metric as this.
   */</span>
  def <a title="(that: akka.cluster.metrics.Metric)Boolean" id="akka.cluster.metrics;Metric.sameAs">sameAs</a><span class="delimiter">(</span><a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;Metric.sameAs.that">that</a>: <a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.metrics;Metric.name" title="=&gt; String">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;Metric.sameAs.that" title="akka.cluster.metrics.Metric">that</a>.<a href="#akka.cluster.metrics;Metric.name" title="=&gt; String">name</a>

  override def <a title="()Int" id="akka.cluster.metrics;Metric.hashCode">hashCode</a> = <a href="#akka.cluster.metrics;Metric.name" title="=&gt; String">name</a>.<span title="()Int">##</span>
  override def <a title="(obj: Any)Boolean" id="akka.cluster.metrics;Metric.equals">equals</a><span class="delimiter">(</span><a title="Any" id="akka.cluster.metrics;Metric.equals.obj">obj</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.cluster.metrics;Metric.equals.obj" title="Any">obj</a> match <span class="delimiter">{</span>
    case <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;Metric.equals.other">other</a>: <a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a> ⇒ <a href="#akka.cluster.metrics;Metric.sameAs" title="(that: akka.cluster.metrics.Metric)Boolean">sameAs</a><span class="delimiter">(</span><a href="#akka.cluster.metrics;Metric.equals.other" title="akka.cluster.metrics.Metric">other</a><span class="delimiter">)</span>
    case _             ⇒ false
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Factory for creating valid Metric instances.
 */</span>
object <a title="akka.cluster.metrics.Metric.type" id="akka.cluster.metrics.Metric.readResolve">Metric</a> extends <a href="#akka.cluster.metrics;MetricNumericConverter" title="akka.cluster.metrics.MetricNumericConverter">MetricNumericConverter</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Creates a new Metric instance if the value is valid, otherwise None
   * is returned. Invalid numeric values are negative and NaN/Infinite.
   */</span>
  def <a title="(name: String, value: Number, decayFactor: Option[Double])Option[akka.cluster.metrics.Metric]" id="akka.cluster.metrics.Metric.create(30ff12545c)">create</a><span class="delimiter">(</span><a title="String" id="akka.cluster.metrics.Metric.create(30ff12545c).name">name</a>: <span title="String">String</span>, <a title="Number" id="akka.cluster.metrics.Metric.create(30ff12545c).value">value</a>: <span title="Number">Number</span>, <a title="Option[Double]" id="akka.cluster.metrics.Metric.create(30ff12545c).decayFactor">decayFactor</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[akka.cluster.metrics.Metric]">Option</span><span class="delimiter">[</span>Metric<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricNumericConverter.defined" title="(value: Number)Boolean">defined</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.Metric.create(30ff12545c).value" title="Number">value</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: akka.cluster.metrics.Metric)Some[akka.cluster.metrics.Metric]">Some</span><span class="delimiter">(</span>new <a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.Metric.create(30ff12545c).name" title="String">name</a>, <a href="#akka.cluster.metrics.Metric.create(30ff12545c).value" title="Number">value</a>, <a href="#akka.cluster.metrics.Metric.createEWMA" title="(value: Double, decayFactor: Option[Double])Option[akka.cluster.metrics.EWMA]">createEWMA</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.Metric.create(30ff12545c).value" title="Number">value</a>.<span title="()Double">doubleValue</span>, <a href="#akka.cluster.metrics.Metric.create(30ff12545c).decayFactor" title="Option[Double]">decayFactor</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else <span title="None.type">None</span>

  <span class="comment">/**
   * Creates a new Metric instance if the Try is successful and the value is valid,
   * otherwise None is returned. Invalid numeric values are negative and NaN/Infinite.
   */</span>
  def <a title="(name: String, value: scala.util.Try[Number], decayFactor: Option[Double])Option[akka.cluster.metrics.Metric]" id="akka.cluster.metrics.Metric.create(94f16fc5bc)">create</a><span class="delimiter">(</span><a title="String" id="akka.cluster.metrics.Metric.create(94f16fc5bc).name">name</a>: <span title="String">String</span>, <a title="scala.util.Try[Number]" id="akka.cluster.metrics.Metric.create(94f16fc5bc).value">value</a>: <span title="scala.util.Try[Number]">Try</span><span class="delimiter">[</span>Number<span class="delimiter">]</span>, <a title="Option[Double]" id="akka.cluster.metrics.Metric.create(94f16fc5bc).decayFactor">decayFactor</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[akka.cluster.metrics.Metric]">Option</span><span class="delimiter">[</span>Metric<span class="delimiter">]</span> = <a href="#akka.cluster.metrics.Metric.create(94f16fc5bc).value" title="scala.util.Try[Number]">value</a> match <span class="delimiter">{</span>
    case Success<span class="delimiter">(</span><a title="Number" id="akka.cluster.metrics.Metric.create(94f16fc5bc).v">v</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.metrics.Metric.create(30ff12545c)" title="(name: String, value: Number, decayFactor: Option[Double])Option[akka.cluster.metrics.Metric]">create</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.Metric.create(94f16fc5bc).name" title="String">name</a>, <a href="#akka.cluster.metrics.Metric.create(94f16fc5bc).v" title="Number">v</a>, <a href="#akka.cluster.metrics.Metric.create(94f16fc5bc).decayFactor" title="Option[Double]">decayFactor</a><span class="delimiter">)</span>
    case Failure<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span title="None.type">None</span>
  <span class="delimiter">}</span>

  def <a title="(value: Double, decayFactor: Option[Double])Option[akka.cluster.metrics.EWMA]" id="akka.cluster.metrics.Metric.createEWMA">createEWMA</a><span class="delimiter">(</span><a title="Double" id="akka.cluster.metrics.Metric.createEWMA.value">value</a>: <span title="Double">Double</span>, <a title="Option[Double]" id="akka.cluster.metrics.Metric.createEWMA.decayFactor">decayFactor</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[akka.cluster.metrics.EWMA]">Option</span><span class="delimiter">[</span>EWMA<span class="delimiter">]</span> = <a href="#akka.cluster.metrics.Metric.createEWMA.decayFactor" title="Option[Double]">decayFactor</a> match <span class="delimiter">{</span>
    case Some<span class="delimiter">(</span><a title="Double" id="akka.cluster.metrics.Metric.createEWMA.alpha">alpha</a><span class="delimiter">)</span> ⇒ <span title="(x: akka.cluster.metrics.EWMA)Some[akka.cluster.metrics.EWMA]">Some</span><span class="delimiter">(</span><a href="EWMA.scala.html#akka.cluster.metrics;EWMA" title="(value: Double, alpha: Double)akka.cluster.metrics.EWMA">EWMA</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.Metric.createEWMA.value" title="Double">value</a>, <a href="#akka.cluster.metrics.Metric.createEWMA.alpha" title="Double">alpha</a><span class="delimiter">)</span><span class="delimiter">)</span>
    case <span title="None.type">None</span>        ⇒ <span title="None.type">None</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Definitions of the built-in standard metrics.
 *
 * The following extractors and data structures makes it easy to consume the
 * [[NodeMetrics]] in for example load balancers.
 */</span>
object <a title="akka.cluster.metrics.StandardMetrics.type" id="akka.cluster.metrics.StandardMetrics">StandardMetrics</a> <a href="#akka.cluster.metrics.StandardMetrics" title="akka.cluster.metrics.StandardMetrics.type" class="delimiter">{</a>

  <span class="comment">// Constants for the heap related Metric names</span>
  final val <a title="String(&quot;heap-memory-used&quot;)" id="akka.cluster.metrics.StandardMetrics.HeapMemoryUsed">HeapMemoryUsed</a> = <span title="String(&quot;heap-memory-used&quot;)" class="string">&quot;heap-memory-used&quot;</span>
  final val <a title="String(&quot;heap-memory-committed&quot;)" id="akka.cluster.metrics.StandardMetrics.HeapMemoryCommitted">HeapMemoryCommitted</a> = <span title="String(&quot;heap-memory-committed&quot;)" class="string">&quot;heap-memory-committed&quot;</span>
  final val <a title="String(&quot;heap-memory-max&quot;)" id="akka.cluster.metrics.StandardMetrics.HeapMemoryMax">HeapMemoryMax</a> = <span title="String(&quot;heap-memory-max&quot;)" class="string">&quot;heap-memory-max&quot;</span>

  <span class="comment">// Constants for the cpu related Metric names</span>
  final val <a title="String(&quot;system-load-average&quot;)" id="akka.cluster.metrics.StandardMetrics.SystemLoadAverage">SystemLoadAverage</a> = <span title="String(&quot;system-load-average&quot;)" class="string">&quot;system-load-average&quot;</span>
  final val <a title="String(&quot;processors&quot;)" id="akka.cluster.metrics.StandardMetrics.Processors">Processors</a> = <span title="String(&quot;processors&quot;)" class="string">&quot;processors&quot;</span>
  <span class="comment">// In latest Linux kernels: CpuCombined + CpuStolen + CpuIdle = 1.0  or 100%.</span>
  <span class="comment">/** Sum of User + Sys + Nice + Wait. See `org.hyperic.sigar.CpuPerc` */</span>
  final val <a title="String(&quot;cpu-combined&quot;)" id="akka.cluster.metrics.StandardMetrics.CpuCombined">CpuCombined</a> = <span title="String(&quot;cpu-combined&quot;)" class="string">&quot;cpu-combined&quot;</span>
  <span class="comment">/** The amount of CPU 'stolen' from this virtual machine by the hypervisor for other tasks (such as running another virtual machine). */</span>
  final val <a title="String(&quot;cpu-stolen&quot;)" id="akka.cluster.metrics.StandardMetrics.CpuStolen">CpuStolen</a> = <span title="String(&quot;cpu-stolen&quot;)" class="string">&quot;cpu-stolen&quot;</span>
  <span class="comment">/** Amount of CPU time left after combined and stolen are removed. */</span>
  final val <a title="String(&quot;cpu-idle&quot;)" id="akka.cluster.metrics.StandardMetrics.CpuIdle">CpuIdle</a> = <span title="String(&quot;cpu-idle&quot;)" class="string">&quot;cpu-idle&quot;</span>

  object <a title="akka.cluster.metrics.StandardMetrics.HeapMemory.type" id="akka.cluster.metrics.StandardMetrics.HeapMemory.readResolve">HeapMemory</a> <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.readResolve" title="akka.cluster.metrics.StandardMetrics.HeapMemory.type" class="delimiter">{</a>

    <span class="comment">/**
     * Given a NodeMetrics it returns the HeapMemory data if the nodeMetrics contains
     * necessary heap metrics.
     * @return if possible a tuple matching the HeapMemory constructor parameters
     */</span>
    def <a title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)Option[(akka.actor.Address, Long, Long, Long, Option[Long])]" id="akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff)">unapply</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics">nodeMetrics</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <span title="Option[(akka.actor.Address, Long, Long, Long, Option[Long])]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Address, Long, Long, Long, Option<span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      for <span class="delimiter">{</span>
        <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).$anonfun.used">used</a> ← <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span title="(f: akka.cluster.metrics.Metric =&gt; Option[(akka.actor.Address, Long, Long, Long, Option[Long])])Option[(akka.actor.Address, Long, Long, Long, Option[Long])]" class="delimiter">(</span><span title="String(&quot;heap-memory-used&quot;)">HeapMemoryUsed</span><span class="delimiter">)</span>
        <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).$anonfun.$anonfun.committed">committed</a> ← <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span title="(f: akka.cluster.metrics.Metric =&gt; (akka.actor.Address, Long, Long, Long, Option[Long]))Option[(akka.actor.Address, Long, Long, Long, Option[Long])]" class="delimiter">(</span><span title="String(&quot;heap-memory-committed&quot;)">HeapMemoryCommitted</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> yield <span title="(_1: akka.actor.Address, _2: Long, _3: Long, _4: Long, _5: Option[Long])(akka.actor.Address, Long, Long, Long, Option[Long])" class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>, <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a>,
        <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).$anonfun.used" title="akka.cluster.metrics.Metric">used</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="implicit scala.Predef.double2Double : (x: Double)Double">smoothValue</a>.<span title="()Long">longValue</span>, <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).$anonfun.$anonfun.committed" title="akka.cluster.metrics.Metric">committed</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="implicit scala.Predef.double2Double : (x: Double)Double">smoothValue</a>.<span title="()Long">longValue</span>,
        <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span class="delimiter">(</span><span title="String(&quot;heap-memory-max&quot;)">HeapMemoryMax</span><span class="delimiter">)</span>.<span title="(f: akka.cluster.metrics.Metric =&gt; Long)Option[Long]">map</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff).$anonfun.$anonfun.$anonfun.x$1" title="akka.cluster.metrics.Metric">_</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="implicit scala.Predef.double2Double : (x: Double)Double">smoothValue</a>.<span title="()Long">longValue</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API to extract HeapMemory data from nodeMetrics, if the nodeMetrics
   * contains necessary heap metrics, otherwise it returns null.
   */</span>
  def <a title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.StandardMetrics.HeapMemory" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory">extractHeapMemory</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.nodeMetrics">nodeMetrics</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.equals" title="akka.cluster.metrics.StandardMetrics.HeapMemory">HeapMemory</a> = <a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a> match <span class="delimiter">{</span>
    case <a href="#akka.cluster.metrics.StandardMetrics.HeapMemory.unapply(bc54d973ff)" title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)Option[(akka.actor.Address, Long, Long, Long, Option[Long])]">HeapMemory</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.address">address</a>, <a title="Long" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.timestamp">timestamp</a>, <a title="Long" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.used">used</a>, <a title="Long" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.committed">committed</a>, <a title="Option[Long]" id="akka.cluster.metrics.StandardMetrics.extractHeapMemory.max">max</a><span class="delimiter">)</span> ⇒
      <span class="comment">// note that above extractor returns tuple</span>
      <a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.equals" title="(address: akka.actor.Address, timestamp: Long, used: Long, committed: Long, max: Option[Long])akka.cluster.metrics.StandardMetrics.HeapMemory">HeapMemory</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.timestamp" title="Long">timestamp</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.used" title="Long">used</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.committed" title="Long">committed</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractHeapMemory.max" title="Option[Long]">max</a><span class="delimiter">)</span>
    case _ ⇒ null
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The amount of used and committed memory will always be &amp;lt;= max if max is defined.
   * A memory allocation may fail if it attempts to increase the used memory such that used &amp;gt; committed
   * even if used &amp;lt;= max is true (e.g. when the system virtual memory is low).
   *
   * @param address [[akka.actor.Address]] of the node the metrics are gathered at
   * @param timestamp the time of sampling, in milliseconds since midnight, January 1, 1970 UTC
   * @param used the current sum of heap memory used from all heap memory pools (in bytes)
   * @param committed the current sum of heap memory guaranteed to be available to the JVM
   *   from all heap memory pools (in bytes). Committed will always be greater than or equal to used.
   * @param max the maximum amount of memory (in bytes) that can be used for JVM memory management.
   *   Can be undefined on some OS.
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  final case class <a title="(address: akka.actor.Address, timestamp: Long, used: Long, committed: Long, max: Option[Long])akka.cluster.metrics.StandardMetrics.HeapMemory" id="akka.cluster.metrics.StandardMetrics;HeapMemory.equals">HeapMemory</a><a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.equals" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$1">address</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Long" id="akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$2">timestamp</a>: <span title="Long">Long</span>, <a title="Long" id="akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$3">used</a>: <span title="Long">Long</span>, <a title="Long" id="akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$4">committed</a>: <span title="Long">Long</span>, <a title="Option[Long]" id="akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$5">max</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$4" title="=&gt; Long">committed</a> <span title="(x: Long)Boolean">&gt;</span> <span title="Long(0L)" class="long">0L</span>, <span title="String(&quot;committed heap expected to be &gt; 0 bytes&quot;)" class="string">&quot;committed heap expected to be &gt; 0 bytes&quot;</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$5" title="=&gt; Option[Long]">max</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.metrics.StandardMetrics;HeapMemory.copy$default$5" title="=&gt; Option[Long]">max</a>.<span title="=&gt; Long">get</span> <span title="(x: Long)Boolean">&gt;</span> <span title="Long(0L)" class="long">0L</span>, <span title="String(&quot;max heap expected to be &gt; 0 bytes&quot;)" class="string">&quot;max heap expected to be &gt; 0 bytes&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  object <a title="akka.cluster.metrics.StandardMetrics.Cpu.type" id="akka.cluster.metrics.StandardMetrics.Cpu.readResolve">Cpu</a> <a href="#akka.cluster.metrics.StandardMetrics.Cpu.readResolve" title="akka.cluster.metrics.StandardMetrics.Cpu.type" class="delimiter">{</a>

    <span class="comment">/**
     * Given a NodeMetrics it returns the Cpu data if the nodeMetrics contains
     * necessary cpu metrics.
     * @return if possible a tuple matching the Cpu constructor parameters
     */</span>
    def <a title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)Option[(akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int)]" id="akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020)">unapply</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics">nodeMetrics</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <span title="Option[(akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Address, Long, Option<span class="delimiter">[</span>Double<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Double<span class="delimiter">]</span>, Option<span class="delimiter">[</span>Double<span class="delimiter">]</span>, Int<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      for <span class="delimiter">{</span>
        <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).$anonfun.processors">processors</a> ← <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span title="(f: akka.cluster.metrics.Metric =&gt; (akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int))Option[(akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int)]" class="delimiter">(</span><span title="String(&quot;processors&quot;)">Processors</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> yield <span title="(_1: akka.actor.Address, _2: Long, _3: Option[Double], _4: Option[Double], _5: Option[Double], _6: Int)(akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int)" class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>, <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a>,
        <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span class="delimiter">(</span><span title="String(&quot;system-load-average&quot;)">SystemLoadAverage</span><span class="delimiter">)</span>.<span title="(f: akka.cluster.metrics.Metric =&gt; Double)Option[Double]">map</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).$anonfun.$anonfun.x$2" title="akka.cluster.metrics.Metric">_</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="=&gt; Double">smoothValue</a><span class="delimiter">)</span>,
        <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span class="delimiter">(</span><span title="String(&quot;cpu-combined&quot;)">CpuCombined</span><span class="delimiter">)</span>.<span title="(f: akka.cluster.metrics.Metric =&gt; Double)Option[Double]">map</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).$anonfun.$anonfun.x$3" title="akka.cluster.metrics.Metric">_</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="=&gt; Double">smoothValue</a><span class="delimiter">)</span>,
        <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.metric" title="(key: String)Option[akka.cluster.metrics.Metric]">metric</a><span class="delimiter">(</span><span title="String(&quot;cpu-stolen&quot;)">CpuStolen</span><span class="delimiter">)</span>.<span title="(f: akka.cluster.metrics.Metric =&gt; Double)Option[Double]">map</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).$anonfun.$anonfun.x$4" title="akka.cluster.metrics.Metric">_</a>.<a href="#akka.cluster.metrics;Metric.smoothValue" title="=&gt; Double">smoothValue</a><span class="delimiter">)</span>,
        <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020).$anonfun.processors" title="akka.cluster.metrics.Metric">processors</a>.<a href="#akka.cluster.metrics;Metric.value" title="=&gt; Number">value</a>.<span title="()Int">intValue</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API to extract Cpu data from nodeMetrics, if the nodeMetrics
   * contains necessary cpu metrics, otherwise it returns null.
   */</span>
  def <a title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.StandardMetrics.Cpu" id="akka.cluster.metrics.StandardMetrics.extractCpu">extractCpu</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics.StandardMetrics.extractCpu.nodeMetrics">nodeMetrics</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics.StandardMetrics;Cpu.equals" title="akka.cluster.metrics.StandardMetrics.Cpu">Cpu</a> = <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a> match <span class="delimiter">{</span>
    case <a href="#akka.cluster.metrics.StandardMetrics.Cpu.unapply(fffcea9020)" title="(nodeMetrics: akka.cluster.metrics.NodeMetrics)Option[(akka.actor.Address, Long, Option[Double], Option[Double], Option[Double], Int)]">Cpu</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.metrics.StandardMetrics.extractCpu.address">address</a>, <a title="Long" id="akka.cluster.metrics.StandardMetrics.extractCpu.timestamp">timestamp</a>, <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics.extractCpu.systemLoadAverage">systemLoadAverage</a>, <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics.extractCpu.cpuCombined">cpuCombined</a>, <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics.extractCpu.cpuStolen">cpuStolen</a>, <a title="Int" id="akka.cluster.metrics.StandardMetrics.extractCpu.processors">processors</a><span class="delimiter">)</span> ⇒
      <span class="comment">// note that above extractor returns tuple</span>
      <a href="#akka.cluster.metrics.StandardMetrics;Cpu.equals" title="(address: akka.actor.Address, timestamp: Long, systemLoadAverage: Option[Double], cpuCombined: Option[Double], cpuStolen: Option[Double], processors: Int)akka.cluster.metrics.StandardMetrics.Cpu">Cpu</a><span class="delimiter">(</span><a href="#akka.cluster.metrics.StandardMetrics.extractCpu.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.timestamp" title="Long">timestamp</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.systemLoadAverage" title="Option[Double]">systemLoadAverage</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.cpuCombined" title="Option[Double]">cpuCombined</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.cpuStolen" title="Option[Double]">cpuStolen</a>, <a href="#akka.cluster.metrics.StandardMetrics.extractCpu.processors" title="Int">processors</a><span class="delimiter">)</span>
    case _ ⇒ null
  <span class="delimiter">}</span>

  <span class="comment">/**
   * @param address [[akka.actor.Address]] of the node the metrics are gathered at
   * @param timestamp the time of sampling, in milliseconds since midnight, January 1, 1970 UTC
   * @param systemLoadAverage OS-specific average load on the CPUs in the system, for the past 1 minute,
   *    The system is possibly nearing a bottleneck if the system load average is nearing number of cpus/cores.
   * @param cpuCombined combined CPU sum of User + Sys + Nice + Wait, in percentage ([0.0 - 1.0]. This
   *   metric can describe the amount of time the CPU spent executing code during n-interval and how
   *   much more it could theoretically.
   * @param cpuStolen stolen CPU time, in percentage ([0.0 - 1.0].
   * @param processors the number of available processors
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  final case class <a title="(address: akka.actor.Address, timestamp: Long, systemLoadAverage: Option[Double], cpuCombined: Option[Double], cpuStolen: Option[Double], processors: Int)akka.cluster.metrics.StandardMetrics.Cpu" id="akka.cluster.metrics.StandardMetrics;Cpu.equals">Cpu</a><a href="#akka.cluster.metrics.StandardMetrics;Cpu.equals" title="Product" class="delimiter">(</a>
    <a title="akka.actor.Address" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$1">address</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
    <a title="Long" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$2">timestamp</a>: <span title="Long">Long</span>,
    <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$3">systemLoadAverage</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span>,
    <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$4">cpuCombined</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span>,
    <a title="Option[Double]" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$5">cpuStolen</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span>,
    <a title="Int" id="akka.cluster.metrics.StandardMetrics;Cpu.copy$default$6">processors</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <a href="#akka.cluster.metrics.StandardMetrics;Cpu.copy$default$4" title="=&gt; Option[Double]">cpuCombined</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><span title="Double">x</span><span class="delimiter">)</span> ⇒ <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="Double(0.0)" class="double">0.0</span> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double">x</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="Double">x</span> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(1.0)" class="double">1.0</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;cpuCombined must be between [0.0 - 1.0], was [&quot;)">cpuCombined must be between [0.0 - 1.0], was [$</span><span title="Double">x</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
      case <span title="None.type">None</span>    ⇒
    <span class="delimiter">}</span>

    <a href="#akka.cluster.metrics.StandardMetrics;Cpu.copy$default$5" title="=&gt; Option[Double]">cpuStolen</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><span title="Double">x</span><span class="delimiter">)</span> ⇒ <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="Double(0.0)" class="double">0.0</span> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double">x</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="Double">x</span> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(1.0)" class="double">1.0</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;cpuStolen must be between [0.0 - 1.0], was [&quot;)">cpuStolen must be between [0.0 - 1.0], was [$</span><span title="Double">x</span><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
      case <span title="None.type">None</span>    ⇒
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 *
 * Encapsulates evaluation of validity of metric values, conversion of an actual metric value to
 * a [[akka.cluster.Metric]] for consumption by subscribed cluster entities.
 */</span>
private<span class="delimiter">[</span>metrics<span class="delimiter">]</span> trait <a title="trait MetricNumericConverter extends AnyRef" id="akka.cluster.metrics;MetricNumericConverter">MetricNumericConverter</a> <span title="Unit" class="delimiter">{</span>

  <span class="comment">/**
   * An defined value is neither negative nor NaN/Infinite:
   * &lt;ul&gt;&lt;li&gt;JMX system load average and max heap can be 'undefined' for certain OS, in which case a -1 is returned&lt;/li&gt;
   * &lt;li&gt;SIGAR combined CPU can occasionally return a NaN or Infinite (known bug)&lt;/li&gt;&lt;/ul&gt;
   */</span>
  def <a title="(value: Number)Boolean" id="akka.cluster.metrics;MetricNumericConverter.defined">defined</a><span class="delimiter">(</span><a title="Number" id="akka.cluster.metrics;MetricNumericConverter.defined.value">value</a>: <span title="Number">Number</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.metrics;MetricNumericConverter.convertNumber" title="(from: Any)Either[Long,Double]">convertNumber</a><span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricNumericConverter.defined.value" title="Number">value</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case Left<span class="delimiter">(</span><a title="Long" id="akka.cluster.metrics;MetricNumericConverter.defined.a">a</a><span class="delimiter">)</span>  ⇒ <a href="#akka.cluster.metrics;MetricNumericConverter.defined.a" title="Long">a</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>
    case Right<span class="delimiter">(</span><a title="Double" id="akka.cluster.metrics;MetricNumericConverter.defined.b">b</a><span class="delimiter">)</span> ⇒ <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricNumericConverter.defined.b" title="Double">b</a> <span title="(x: Double)Boolean">&lt;</span> <span title="Double(0.0)" class="double">0.0</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.metrics;MetricNumericConverter.defined.b" title="implicit scala.Predef.double2Double : (x: Double)Double">b</a>.<span title="()Boolean">isNaN</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.metrics;MetricNumericConverter.defined.b" title="implicit scala.Predef.double2Double : (x: Double)Double">b</a>.<span title="()Boolean">isInfinite</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * May involve rounding or truncation.
   */</span>
  def <a title="(from: Any)Either[Long,Double]" id="akka.cluster.metrics;MetricNumericConverter.convertNumber">convertNumber</a><span class="delimiter">(</span><a title="Any" id="akka.cluster.metrics;MetricNumericConverter.convertNumber.from">from</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Either[Long,Double]">Either</span><span class="delimiter">[</span>Long, Double<span class="delimiter">]</span> = <a href="#akka.cluster.metrics;MetricNumericConverter.convertNumber.from" title="Any">from</a> match <span class="delimiter">{</span>
    case <span title="Int">n</span>: <span title="Int">Int</span>        ⇒ <span title="(a: Long)scala.util.Left[Long,Nothing]">Left</span><span class="delimiter">(</span><span title="=&gt; Long">n</span><span class="delimiter">)</span>
    case <span title="Long">n</span>: <span title="Long">Long</span>       ⇒ <span title="(a: Long)scala.util.Left[Long,Nothing]">Left</span><span class="delimiter">(</span><span title="Long">n</span><span class="delimiter">)</span>
    case <span title="Double">n</span>: <span title="Double">Double</span>     ⇒ <span title="(b: Double)scala.util.Right[Nothing,Double]">Right</span><span class="delimiter">(</span><span title="Double">n</span><span class="delimiter">)</span>
    case <span title="Float">n</span>: <span title="Float">Float</span>      ⇒ <span title="(b: Double)scala.util.Right[Nothing,Double]">Right</span><span class="delimiter">(</span><span title="=&gt; Double">n</span><span class="delimiter">)</span>
    case <span title="BigInt">n</span>: <span title="BigInt">BigInt</span>     ⇒ <span title="(a: Long)scala.util.Left[Long,Nothing]">Left</span><span class="delimiter">(</span><span title="BigInt">n</span>.<span title="()Long">longValue</span><span class="delimiter">)</span>
    case <span title="BigDecimal">n</span>: <span title="BigDecimal">BigDecimal</span> ⇒ <span title="(b: Double)scala.util.Right[Nothing,Double]">Right</span><span class="delimiter">(</span><span title="BigDecimal">n</span>.<span title="()Double">doubleValue</span><span class="delimiter">)</span>
    case <a title="Any" id="akka.cluster.metrics;MetricNumericConverter.convertNumber.x">x</a>             ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Not a number [&quot;)">Not a number [$</span><a href="#akka.cluster.metrics;MetricNumericConverter.convertNumber.x" title="Any">x</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * The snapshot of current sampled health metrics for any monitored process.
 * Collected and gossipped at regular intervals for dynamic cluster management strategies.
 *
 * Equality of NodeMetrics is based on its address.
 *
 * @param address [[akka.actor.Address]] of the node the metrics are gathered at
 * @param timestamp the time of sampling, in milliseconds since midnight, January 1, 1970 UTC
 * @param metrics the set of sampled [[akka.cluster.metrics.Metric]]
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="class NodeMetrics extends AnyRef with Product with Serializable" id="akka.cluster.metrics.NodeMetrics.readResolve">NodeMetrics</a><a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.metrics;NodeMetrics.address">address</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Long" id="akka.cluster.metrics;NodeMetrics.timestamp">timestamp</a>: <span title="Long">Long</span>, <a title="Set[akka.cluster.metrics.Metric]" id="akka.cluster.metrics.NodeMetrics.apply$default$3">metrics</a>: <span title="Set[akka.cluster.metrics.Metric]">Set</span><span class="delimiter">[</span>Metric<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[akka.cluster.metrics.Metric]" class="delimiter">[</span><a href="#akka.cluster.metrics;Metric" title="akka.cluster.metrics.Metric">Metric</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Returns the most recent data.
   */</span>
  def <a title="(that: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.merge">merge</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.merge.that">that</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;NodeMetrics.merge.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;merge only allowed for same address, [&quot;)">merge only allowed for same address, [$</span><a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a><span title="String(&quot;] != [&quot;)">] != [$</span><a href="#akka.cluster.metrics;NodeMetrics.merge.that" title="akka.cluster.metrics.NodeMetrics">that</a><span title="String(&quot;.address]&quot;)" class="string">.address]&quot;</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.cluster.metrics;NodeMetrics.merge.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a><span class="delimiter">)</span> this <span class="comment">// that is older</span>
    else <span class="delimiter">{</span>
      <span class="comment">// equality is based on the name of the Metric and Set doesn't replace existing element</span>
      <a href="#akka.cluster.metrics;NodeMetrics.address" title="akka.actor.Address" id="akka.cluster.metrics;NodeMetrics.merge.x$19">copy</a><span class="delimiter">(</span>metrics = <a href="#akka.cluster.metrics;NodeMetrics.merge.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a> <a title="scala.collection.immutable.Set[akka.cluster.metrics.Metric] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.cluster.metrics;NodeMetrics.merge.x$17">++</a> <a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a>, timestamp = <a href="#akka.cluster.metrics;NodeMetrics.merge.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="Long" id="akka.cluster.metrics;NodeMetrics.merge.x$18">timestamp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the most recent data with [[EWMA]] averaging.
   */</span>
  def <a title="(that: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.update">update</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.update.that">that</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;NodeMetrics.update.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;update only allowed for same address, [&quot;)">update only allowed for same address, [$</span><a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a><span title="String(&quot;] != [&quot;)">] != [$</span><a href="#akka.cluster.metrics;NodeMetrics.update.that" title="akka.cluster.metrics.NodeMetrics">that</a><span title="String(&quot;.address]&quot;)" class="string">.address]&quot;</span><span class="delimiter">)</span>
    <span class="comment">// Apply sample ordering.</span>
    val <a href="#akka.cluster.metrics;NodeMetrics.update.latestNode" title="(akka.cluster.metrics.NodeMetrics, akka.cluster.metrics.NodeMetrics)" class="delimiter">(</a><a href="#akka.cluster.metrics;NodeMetrics.update.x$5" title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.update.latestNode">latestNode</a>, <a href="#akka.cluster.metrics;NodeMetrics.update.x$5" title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.update.currentNode">currentNode</a><span class="delimiter">)</span> = if <span class="delimiter">(</span>this.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.cluster.metrics;NodeMetrics.update.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="=&gt; Long">timestamp</a><span class="delimiter">)</span> <span title="(_1: akka.cluster.metrics.NodeMetrics, _2: akka.cluster.metrics.NodeMetrics)(akka.cluster.metrics.NodeMetrics, akka.cluster.metrics.NodeMetrics)" class="delimiter">(</span>this, <a href="#akka.cluster.metrics;NodeMetrics.update.that" title="akka.cluster.metrics.NodeMetrics">that</a><span class="delimiter">)</span> else <span title="(_1: akka.cluster.metrics.NodeMetrics, _2: akka.cluster.metrics.NodeMetrics)(akka.cluster.metrics.NodeMetrics, akka.cluster.metrics.NodeMetrics)" class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.update.that" title="akka.cluster.metrics.NodeMetrics">that</a>, this<span class="delimiter">)</span>
    <span class="comment">// Average metrics present in both latest and current.</span>
    val <a title="scala.collection.immutable.Set[akka.cluster.metrics.Metric]" id="akka.cluster.metrics;NodeMetrics.update.updated">updated</a> = for <span class="delimiter">{</span>
      <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.latest">latest</a> ← <a href="#akka.cluster.metrics;NodeMetrics.update.latestNode" title="akka.cluster.metrics.NodeMetrics">latestNode</a>.<a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="(f: akka.cluster.metrics.Metric =&gt; scala.collection.GenTraversableOnce[akka.cluster.metrics.Metric])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.metrics.Metric],akka.cluster.metrics.Metric,scala.collection.immutable.Set[akka.cluster.metrics.Metric]])scala.collection.immutable.Set[akka.cluster.metrics.Metric]">metrics</a>
      <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.$anonfun.current">current</a> ← <a href="#akka.cluster.metrics;NodeMetrics.update.currentNode" title="akka.cluster.metrics.NodeMetrics">currentNode</a>.<a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="(p: akka.cluster.metrics.Metric =&gt; Boolean)scala.collection.generic.FilterMonadic[akka.cluster.metrics.Metric,scala.collection.immutable.Set[akka.cluster.metrics.Metric]]">metrics</a>
      if <span class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.latest" title="akka.cluster.metrics.Metric">latest</a> <a href="#akka.cluster.metrics;Metric.sameAs" title="(f: akka.cluster.metrics.Metric =&gt; akka.cluster.metrics.Metric)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.metrics.Metric],akka.cluster.metrics.Metric,scala.collection.immutable.Set[akka.cluster.metrics.Metric]])scala.collection.immutable.Set[akka.cluster.metrics.Metric]">sameAs</a> <a href="#akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.$anonfun.current" title="akka.cluster.metrics.Metric">current</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> yield <span class="delimiter">{</span>
      <a href="#akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.$anonfun.current" title="akka.cluster.metrics.Metric">current</a> <a href="#akka.cluster.metrics;Metric.:+" title="(latest: akka.cluster.metrics.Metric)akka.cluster.metrics.Metric">:+</a> <a href="#akka.cluster.metrics;NodeMetrics.update.updated.$anonfun.latest" title="akka.cluster.metrics.Metric">latest</a>
    <span class="delimiter">}</span>
    <span class="comment">// Append metrics missing from either latest or current.</span>
    <span class="comment">// Equality is based on the [[Metric.name]] and [[Set]] doesn't replace existing elements.</span>
    val merged = <a href="#akka.cluster.metrics;NodeMetrics.update.updated" title="scala.collection.immutable.Set[akka.cluster.metrics.Metric]">updated</a> <span title="(elems: scala.collection.GenTraversableOnce[akka.cluster.metrics.Metric])scala.collection.immutable.Set[akka.cluster.metrics.Metric]">++</span> <a href="#akka.cluster.metrics;NodeMetrics.update.latestNode" title="akka.cluster.metrics.NodeMetrics">latestNode</a>.<a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a> <a title="scala.collection.immutable.Set[akka.cluster.metrics.Metric]" id="akka.cluster.metrics;NodeMetrics.update.merged">++</a> <a href="#akka.cluster.metrics;NodeMetrics.update.currentNode" title="akka.cluster.metrics.NodeMetrics">currentNode</a>.<a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a>
    <a href="#akka.cluster.metrics;NodeMetrics.address" title="akka.actor.Address" id="akka.cluster.metrics;NodeMetrics.update.x$22">copy</a><span class="delimiter">(</span>metrics = <a href="#akka.cluster.metrics;NodeMetrics.update.merged" title="scala.collection.immutable.Set[akka.cluster.metrics.Metric] @scala.reflect.internal.annotations.uncheckedBounds" id="akka.cluster.metrics;NodeMetrics.update.x$20">merged</a>, timestamp = <a href="#akka.cluster.metrics;NodeMetrics.update.latestNode" title="akka.cluster.metrics.NodeMetrics">latestNode</a>.<a href="#akka.cluster.metrics;NodeMetrics.timestamp" title="Long" id="akka.cluster.metrics;NodeMetrics.update.x$21">timestamp</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(key: String)Option[akka.cluster.metrics.Metric]" id="akka.cluster.metrics;NodeMetrics.metric">metric</a><span class="delimiter">(</span><a title="String" id="akka.cluster.metrics;NodeMetrics.metric.key">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.cluster.metrics.Metric]">Option</span><span class="delimiter">[</span>Metric<span class="delimiter">]</span> = <a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a>.<span title="(pf: PartialFunction[akka.cluster.metrics.Metric,akka.cluster.metrics.Metric])Option[akka.cluster.metrics.Metric]">collectFirst</span> <a title="&lt;$anon: akka.cluster.metrics.Metric =&gt; akka.cluster.metrics.Metric&gt; extends scala.runtime.AbstractPartialFunction[akka.cluster.metrics.Metric,akka.cluster.metrics.Metric] with Serializable" id="akka.cluster.metrics;NodeMetrics.metric;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="akka.cluster.metrics.Metric" id="akka.cluster.metrics;NodeMetrics.metric;$anonfun.isDefinedAt.m">m</a> if <a href="#akka.cluster.metrics;NodeMetrics.metric;$anonfun.isDefinedAt.m" title="akka.cluster.metrics.Metric">m</a>.<a href="#akka.cluster.metrics;Metric.name" title="=&gt; String">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;NodeMetrics.metric.key" title="String">key</a> ⇒ <a href="#akka.cluster.metrics;NodeMetrics.metric;$anonfun.isDefinedAt.m" title="akka.cluster.metrics.Metric">m</a> <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API
   */</span>
  def <a title="=&gt; Iterable[akka.cluster.metrics.Metric]" id="akka.cluster.metrics;NodeMetrics.getMetrics">getMetrics</a>: java.lang.<span title="Iterable[akka.cluster.metrics.Metric]">Iterable</span><span class="delimiter">[</span>Metric<span class="delimiter">]</span> =
    scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(i: Iterable[akka.cluster.metrics.Metric])scala.collection.convert.Decorators.AsJava[Iterable[akka.cluster.metrics.Metric]]">asJavaIterableConverter</span><span class="delimiter">(</span><a href="#akka.cluster.metrics.NodeMetrics.apply$default$3" title="=&gt; Set[akka.cluster.metrics.Metric]">metrics</a><span class="delimiter">)</span>.<span title="=&gt; Iterable[akka.cluster.metrics.Metric]">asJava</span>

  <span class="comment">/**
   * Returns true if &lt;code&gt;that&lt;/code&gt; address is the same as this
   */</span>
  def <a title="(that: akka.cluster.metrics.NodeMetrics)Boolean" id="akka.cluster.metrics;NodeMetrics.sameAs">sameAs</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.sameAs.that">that</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;NodeMetrics.sameAs.that" title="akka.cluster.metrics.NodeMetrics">that</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>

  override def <a title="()Int" id="akka.cluster.metrics;NodeMetrics.hashCode">hashCode</a> = <a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a>.<span title="()Int">##</span>
  override def <a title="(obj: Any)Boolean" id="akka.cluster.metrics;NodeMetrics.equals">equals</a><span class="delimiter">(</span><a title="Any" id="akka.cluster.metrics;NodeMetrics.equals.obj">obj</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.cluster.metrics;NodeMetrics.equals.obj" title="Any">obj</a> match <span class="delimiter">{</span>
    case <a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;NodeMetrics.equals.other">other</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a> ⇒ <a href="#akka.cluster.metrics;NodeMetrics.sameAs" title="(that: akka.cluster.metrics.NodeMetrics)Boolean">sameAs</a><span class="delimiter">(</span><a href="#akka.cluster.metrics;NodeMetrics.equals.other" title="akka.cluster.metrics.NodeMetrics">other</a><span class="delimiter">)</span>
    case _                  ⇒ false
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>metrics<span class="delimiter">]</span> object <a title="akka.cluster.metrics.MetricsGossip.type" id="akka.cluster.metrics.MetricsGossip.readResolve">MetricsGossip</a> <a href="#akka.cluster.metrics.MetricsGossip.readResolve" title="akka.cluster.metrics.MetricsGossip.type" class="delimiter">{</a>
  val <a title="akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics.MetricsGossip.empty">empty</a> = <a href="#akka.cluster.metrics;MetricsGossip.equals" title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip">MetricsGossip</a><span class="delimiter">(</span><span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]" class="delimiter">[</span><a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 *
 * @param nodes metrics per node
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
private<span class="delimiter">[</span>metrics<span class="delimiter">]</span> final case class <a title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.equals">MetricsGossip</a><a href="#akka.cluster.metrics;MetricsGossip.equals" title="Product" class="delimiter">(</a><a title="Set[akka.cluster.metrics.NodeMetrics]" id="akka.cluster.metrics;MetricsGossip.copy$default$1">nodes</a>: <span title="Set[akka.cluster.metrics.NodeMetrics]">Set</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Removes nodes if their correlating node ring members are not [[akka.cluster.MemberStatus]] `Up`.
   */</span>
  def <a title="(node: akka.actor.Address)akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.remove">remove</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.metrics;MetricsGossip.remove.node">node</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics;MetricsGossip.equals" title="akka.cluster.metrics.MetricsGossip">MetricsGossip</a> = <a href="#akka.cluster.metrics;MetricsGossip.equals" title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip">copy</a><span class="delimiter">(</span>nodes = <a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a> <span title="(p: akka.cluster.metrics.NodeMetrics =&gt; Boolean)scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]">filterNot</span> <span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricsGossip.remove.$anonfun.x$6" title="akka.cluster.metrics.NodeMetrics">_</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;MetricsGossip.remove.node" title="akka.actor.Address">node</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Only the nodes that are in the `includeNodes` Set.
   */</span>
  def <a title="(includeNodes: Set[akka.actor.Address])akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.filter">filter</a><span class="delimiter">(</span><a title="Set[akka.actor.Address]" id="akka.cluster.metrics;MetricsGossip.filter.includeNodes">includeNodes</a>: <span title="Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.cluster.metrics;MetricsGossip.equals" title="akka.cluster.metrics.MetricsGossip">MetricsGossip</a> =
    <a href="#akka.cluster.metrics;MetricsGossip.equals" title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip">copy</a><span class="delimiter">(</span>nodes = <a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a> <span title="(p: akka.cluster.metrics.NodeMetrics =&gt; Boolean)scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]">filter</span> <span class="delimiter">{</span> <a href="#akka.cluster.metrics;MetricsGossip.filter.includeNodes" title="Set[akka.actor.Address]">includeNodes</a> <span title="(elem: akka.actor.Address)Boolean">contains</span> <a href="#akka.cluster.metrics;MetricsGossip.filter.$anonfun.x$7" title="akka.cluster.metrics.NodeMetrics">_</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span class="delimiter">}</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Adds new remote [[NodeMetrics]] and merges existing from a remote gossip.
   */</span>
  def <a title="(otherGossip: akka.cluster.metrics.MetricsGossip)akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.merge">merge</a><span class="delimiter">(</span><a title="akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.merge.otherGossip">otherGossip</a>: <a href="#akka.cluster.metrics;MetricsGossip.equals" title="akka.cluster.metrics.MetricsGossip">MetricsGossip</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics;MetricsGossip.equals" title="akka.cluster.metrics.MetricsGossip">MetricsGossip</a> =
    <a href="#akka.cluster.metrics;MetricsGossip.merge.otherGossip" title="akka.cluster.metrics.MetricsGossip">otherGossip</a>.<a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a>.<span title="(z: akka.cluster.metrics.MetricsGossip)(op: (akka.cluster.metrics.MetricsGossip, akka.cluster.metrics.NodeMetrics) =&gt; akka.cluster.metrics.MetricsGossip)akka.cluster.metrics.MetricsGossip">foldLeft</span><span class="delimiter">(</span>this<span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.merge.$anonfun.gossip">gossip</a>, <a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;MetricsGossip.merge.$anonfun.nodeMetrics">nodeMetrics</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.metrics;MetricsGossip.merge.$anonfun.gossip" title="akka.cluster.metrics.MetricsGossip">gossip</a> <a href="#akka.cluster.metrics;MetricsGossip.:+" title="(newNodeMetrics: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.MetricsGossip">:+</a> <a href="#akka.cluster.metrics;MetricsGossip.merge.$anonfun.nodeMetrics" title="akka.cluster.metrics.NodeMetrics">nodeMetrics</a> <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds new local [[NodeMetrics]], or merges an existing.
   */</span>
  def <a title="(newNodeMetrics: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.MetricsGossip" id="akka.cluster.metrics;MetricsGossip.:+">:+</a><span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;MetricsGossip.:+.newNodeMetrics">newNodeMetrics</a>: <a href="#akka.cluster.metrics.NodeMetrics.readResolve" title="akka.cluster.metrics.NodeMetrics">NodeMetrics</a><span class="delimiter">)</span>: <a href="#akka.cluster.metrics;MetricsGossip.equals" title="akka.cluster.metrics.MetricsGossip">MetricsGossip</a> = <a href="#akka.cluster.metrics;MetricsGossip.nodeMetricsFor" title="(address: akka.actor.Address)Option[akka.cluster.metrics.NodeMetrics]">nodeMetricsFor</a><span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricsGossip.:+.newNodeMetrics" title="akka.cluster.metrics.NodeMetrics">newNodeMetrics</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case Some<span class="delimiter">(</span><a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;MetricsGossip.:+.existingNodeMetrics">existingNodeMetrics</a><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster.metrics;MetricsGossip.equals" title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip">copy</a><span class="delimiter">(</span>nodes = <a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a> <span title="(elem: akka.cluster.metrics.NodeMetrics)scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]">-</span> <a href="#akka.cluster.metrics;MetricsGossip.:+.existingNodeMetrics" title="akka.cluster.metrics.NodeMetrics">existingNodeMetrics</a> <span title="(elem: akka.cluster.metrics.NodeMetrics)scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]">+</span> <span class="delimiter">(</span><a href="#akka.cluster.metrics;MetricsGossip.:+.existingNodeMetrics" title="akka.cluster.metrics.NodeMetrics">existingNodeMetrics</a> <a href="#akka.cluster.metrics;NodeMetrics.update" title="(that: akka.cluster.metrics.NodeMetrics)akka.cluster.metrics.NodeMetrics">update</a> <a href="#akka.cluster.metrics;MetricsGossip.:+.newNodeMetrics" title="akka.cluster.metrics.NodeMetrics">newNodeMetrics</a><span class="delimiter">)</span><span class="delimiter">)</span>
    case <span title="None.type">None</span> ⇒ <a href="#akka.cluster.metrics;MetricsGossip.equals" title="(nodes: Set[akka.cluster.metrics.NodeMetrics])akka.cluster.metrics.MetricsGossip">copy</a><span class="delimiter">(</span>nodes = <a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a> <span title="(elem: akka.cluster.metrics.NodeMetrics)scala.collection.immutable.Set[akka.cluster.metrics.NodeMetrics]">+</span> <a href="#akka.cluster.metrics;MetricsGossip.:+.newNodeMetrics" title="akka.cluster.metrics.NodeMetrics">newNodeMetrics</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns [[NodeMetrics]] for a node if exists.
   */</span>
  def <a title="(address: akka.actor.Address)Option[akka.cluster.metrics.NodeMetrics]" id="akka.cluster.metrics;MetricsGossip.nodeMetricsFor">nodeMetricsFor</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.metrics;MetricsGossip.nodeMetricsFor.address">address</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Option[akka.cluster.metrics.NodeMetrics]">Option</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span> = <a href="#akka.cluster.metrics;MetricsGossip.copy$default$1" title="=&gt; Set[akka.cluster.metrics.NodeMetrics]">nodes</a> <span title="(p: akka.cluster.metrics.NodeMetrics =&gt; Boolean)Option[akka.cluster.metrics.NodeMetrics]">find</span> <span class="delimiter">{</span> <a title="akka.cluster.metrics.NodeMetrics" id="akka.cluster.metrics;MetricsGossip.nodeMetricsFor.$anonfun.n">n</a> ⇒ <a href="#akka.cluster.metrics;MetricsGossip.nodeMetricsFor.$anonfun.n" title="akka.cluster.metrics.NodeMetrics">n</a>.<a href="#akka.cluster.metrics;NodeMetrics.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.metrics;MetricsGossip.nodeMetricsFor.address" title="akka.actor.Address">address</a> <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
