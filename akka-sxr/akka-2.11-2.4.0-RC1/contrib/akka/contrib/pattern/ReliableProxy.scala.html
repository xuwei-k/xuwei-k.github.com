<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>contrib/akka/contrib/pattern/ReliableProxy.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

package akka.contrib.pattern

import akka.actor._
import akka.remote.RemoteScope
import scala.concurrent.duration._
import scala.util.Try
import java.util.concurrent.TimeUnit

object <a title="akka.contrib.pattern.ReliableProxy.type" id="akka.contrib.pattern.ReliableProxy">ReliableProxy</a> <a href="#akka.contrib.pattern.ReliableProxy" title="akka.contrib.pattern.ReliableProxy.type" class="delimiter">{</a>
  <span class="comment">/**
   * Scala API Props.  Arguments are detailed in the [[akka.contrib.pattern.ReliableProxy]]
   * constructor.
   */</span>
  def <a title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: Option[scala.concurrent.duration.FiniteDuration], maxReconnects: Option[Int])akka.actor.Props" id="akka.contrib.pattern.ReliableProxy.props(4848b103d2)">props</a><span class="delimiter">(</span><a title="akka.actor.ActorPath" id="akka.contrib.pattern.ReliableProxy.props(4848b103d2).targetPath">targetPath</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(4848b103d2).retryAfter">retryAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Option[scala.concurrent.duration.FiniteDuration]" id="akka.contrib.pattern.ReliableProxy.props(4848b103d2).reconnectAfter">reconnectAfter</a>: <span title="Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">[</span>FiniteDuration<span class="delimiter">]</span>,
            <a title="Option[Int]" id="akka.contrib.pattern.ReliableProxy.props(4848b103d2).maxReconnects">maxReconnects</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; akka.contrib.pattern.ReliableProxy)(implicit evidence$2: scala.reflect.ClassTag[akka.contrib.pattern.ReliableProxy])akka.actor.Props">Props</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.contrib.pattern.ReliableProxy]" class="delimiter">(</span>new <a href="#akka.contrib.pattern;ReliableProxy" title="akka.contrib.pattern.ReliableProxy">ReliableProxy</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2).targetPath" title="akka.actor.ActorPath">targetPath</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2).retryAfter" title="scala.concurrent.duration.FiniteDuration">retryAfter</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2).reconnectAfter" title="Option[scala.concurrent.duration.FiniteDuration]">reconnectAfter</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2).maxReconnects" title="Option[Int]">maxReconnects</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API Props.  Arguments are detailed in the [[akka.contrib.pattern.ReliableProxy]]
   * constructor.
   */</span>
  def <a title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: scala.concurrent.duration.FiniteDuration, maxReconnects: Int)akka.actor.Props" id="akka.contrib.pattern.ReliableProxy.props(ae47ce7a41)">props</a><span class="delimiter">(</span><a title="akka.actor.ActorPath" id="akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).targetPath">targetPath</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).retryAfter">retryAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).reconnectAfter">reconnectAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
            <a title="Int" id="akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).maxReconnects">maxReconnects</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2)" title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: Option[scala.concurrent.duration.FiniteDuration], maxReconnects: Option[Int])akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).targetPath" title="akka.actor.ActorPath">targetPath</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).retryAfter" title="scala.concurrent.duration.FiniteDuration">retryAfter</a>, <span title="(x: scala.concurrent.duration.FiniteDuration)Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).reconnectAfter" title="scala.concurrent.duration.FiniteDuration">reconnectAfter</a><span class="delimiter">)</span>, if <span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).maxReconnects" title="Int">maxReconnects</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(ae47ce7a41).maxReconnects" title="Int">maxReconnects</a><span class="delimiter">)</span> else <span title="None.type">None</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Props with no limit on reconnections.  Arguments are detailed in the [[akka.contrib.pattern.ReliableProxy]]
   * constructor.
   */</span>
  def <a title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ReliableProxy.props(9cd5328e8c)">props</a><span class="delimiter">(</span><a title="akka.actor.ActorPath" id="akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).targetPath">targetPath</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).retryAfter">retryAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).reconnectAfter">reconnectAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2)" title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: Option[scala.concurrent.duration.FiniteDuration], maxReconnects: Option[Int])akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).targetPath" title="akka.actor.ActorPath">targetPath</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).retryAfter" title="scala.concurrent.duration.FiniteDuration">retryAfter</a>, <span title="(x: scala.concurrent.duration.FiniteDuration)Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(9cd5328e8c).reconnectAfter" title="scala.concurrent.duration.FiniteDuration">reconnectAfter</a><span class="delimiter">)</span>, <span title="None.type">None</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Props with no reconnections.  Arguments are detailed in the [[akka.contrib.pattern.ReliableProxy]]
   * constructor.
   */</span>
  def <a title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ReliableProxy.props(4b31b26fbc)">props</a><span class="delimiter">(</span><a title="akka.actor.ActorPath" id="akka.contrib.pattern.ReliableProxy.props(4b31b26fbc).targetPath">targetPath</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ReliableProxy.props(4b31b26fbc).retryAfter">retryAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern.ReliableProxy.props(4848b103d2)" title="(targetPath: akka.actor.ActorPath, retryAfter: scala.concurrent.duration.FiniteDuration, reconnectAfter: Option[scala.concurrent.duration.FiniteDuration], maxReconnects: Option[Int])akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.props(4b31b26fbc).targetPath" title="akka.actor.ActorPath">targetPath</a>, <a href="#akka.contrib.pattern.ReliableProxy.props(4b31b26fbc).retryAfter" title="scala.concurrent.duration.FiniteDuration">retryAfter</a>, <span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  class <a title="class Receiver extends AnyRef with akka.actor.Actor with akka.contrib.pattern.ReliableProxyDebugLogging" id="akka.contrib.pattern.ReliableProxy;Receiver">Receiver</a><a href="#akka.contrib.pattern.ReliableProxy;Receiver" title="akka.contrib.pattern.ReliableProxy.Receiver" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy;Receiver.target">target</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Int" id="akka.contrib.pattern.ReliableProxy;Receiver.initialSerial">initialSerial</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="#akka.contrib.pattern;ReliableProxyDebugLogging" title="akka.contrib.pattern.ReliableProxyDebugLogging">ReliableProxyDebugLogging</a> <span class="delimiter">{</span>
    var <a title="Int" id="akka.contrib.pattern.ReliableProxy;Receiver.lastSerial_=">lastSerial</a> = <a href="#akka.contrib.pattern.ReliableProxy;Receiver.initialSerial" title="Int">initialSerial</a>

    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.target" title="akka.actor.ActorRef">target</a><span class="delimiter">)</span>

    def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern.ReliableProxy;Receiver.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case Message<span class="delimiter">(</span><a title="Any" id="akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.msg">msg</a>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.snd">snd</a>, <a title="Int" id="akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial">serial</a><span class="delimiter">)</span> ⇒
        if <span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial" title="Int">serial</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.contrib.pattern.ReliableProxy;Receiver.lastSerial_=" title="=&gt; Int">lastSerial</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.contrib.pattern.ReliableProxy;Receiver.target" title="akka.actor.ActorRef">target</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.msg" title="Any">msg</a>, <a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.snd" title="akka.actor.ActorRef">snd</a><span class="delimiter">)</span>
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ReliableProxy.Ack.readResolve" title="(serial: Int)akka.contrib.pattern.ReliableProxy.Ack">Ack</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial" title="Int">serial</a><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern.ReliableProxy;Receiver.lastSerial_=" title="(x$1: Int)Unit">lastSerial</a> = <a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial" title="Int">serial</a>
        <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.compare" title="(a: Int, b: Int)Int">compare</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial" title="Int">serial</a>, <a href="#akka.contrib.pattern.ReliableProxy;Receiver.lastSerial_=" title="=&gt; Int">lastSerial</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ReliableProxy.Ack.readResolve" title="(serial: Int)akka.contrib.pattern.ReliableProxy.Ack">Ack</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.serial" title="Int">serial</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Received message from {} with wrong serial: {}&quot;)" class="string">&quot;Received message from {} with wrong serial: {}&quot;</span>, <a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.snd" title="akka.actor.ActorRef">snd</a>, <a href="#akka.contrib.pattern.ReliableProxy;Receiver.receive;$anonfun.isDefinedAt.msg" title="Any">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      case Terminated<span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy;Receiver.target" title="akka.actor.ActorRef">`target`</a><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Wrap-around aware comparison of integers: differences limited to 2**31-1
   * in magnitude will work correctly.
   */</span>
  def <a title="(a: Int, b: Int)Int" id="akka.contrib.pattern.ReliableProxy.compare">compare</a><span class="delimiter">(</span><a title="Int" id="akka.contrib.pattern.ReliableProxy.compare.a">a</a>: <span title="Int">Int</span>, <a title="Int" id="akka.contrib.pattern.ReliableProxy.compare.b">b</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    val c = <a href="#akka.contrib.pattern.ReliableProxy.compare.a" title="Int">a</a> <a title="Int" id="akka.contrib.pattern.ReliableProxy.compare.c">-</a> <a href="#akka.contrib.pattern.ReliableProxy.compare.b" title="Int">b</a>
    <a href="#akka.contrib.pattern.ReliableProxy.compare.c" title="Int">c</a> match <span class="delimiter">{</span>
      case <span title="Int">x</span> if <span title="Int">x</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span>  ⇒ -<span title="Int(-1)" class="int">1</span>
      case <span title="Int">x</span> if <span title="Int">x</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> ⇒ <span title="Int(0)" class="int">0</span>
      case <span title="Int">x</span> if <span title="Int">x</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>  ⇒ <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(target: akka.actor.ActorRef, currentSerial: Int)akka.actor.Props" id="akka.contrib.pattern.ReliableProxy.receiver">receiver</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy.receiver.target">target</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Int" id="akka.contrib.pattern.ReliableProxy.receiver.currentSerial">currentSerial</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.ReliableProxy.Receiver](classOf[akka.contrib.pattern.ReliableProxy$$Receiver])" class="delimiter">[</span>Receiver<span class="delimiter">]</span>, <a href="#akka.contrib.pattern.ReliableProxy.receiver.target" title="akka.actor.ActorRef">target</a>, <a href="#akka.contrib.pattern.ReliableProxy.receiver.currentSerial" title="Int">currentSerial</a><span class="delimiter">)</span>

  <span class="comment">// Internal messages</span>
  final case class <a title="class Message extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ReliableProxy.Message.readResolve">Message</a><a href="#akka.contrib.pattern.ReliableProxy.Message.readResolve" title="Product" class="delimiter">(</a><a title="Any" id="akka.contrib.pattern.ReliableProxy;Message.msg">msg</a>: <span title="Any">Any</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy;Message.sender">sender</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Int" id="akka.contrib.pattern.ReliableProxy;Message.serial">serial</a>: <span title="Int">Int</span><span class="delimiter">)</span>
  private final case class <a title="class Ack extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ReliableProxy.Ack.readResolve">Ack</a><a href="#akka.contrib.pattern.ReliableProxy.Ack.readResolve" title="Product" class="delimiter">(</a><a title="Int" id="akka.contrib.pattern.ReliableProxy;Ack.serial">serial</a>: <span title="Int">Int</span><span class="delimiter">)</span>
  private case object <a href="#akka.contrib.pattern.ReliableProxy.Tick.productElement.x$1" title="akka.contrib.pattern.ReliableProxy.Tick.type" id="akka.contrib.pattern.ReliableProxy.Tick.readResolve">Tick</a>
  private case object <a href="#akka.contrib.pattern.ReliableProxy.ReconnectTick.productElement.x$1" title="akka.contrib.pattern.ReliableProxy.ReconnectTick.type" id="akka.contrib.pattern.ReliableProxy.ReconnectTick.readResolve">ReconnectTick</a>

  <span class="comment">/**
   * `TargetChanged` is sent to transition subscribers when the initial connection is made
   * the target and when the target `ActorRef` has changed (for example, the target system
   * crashed and has been restarted).
   */</span>
  final case class <a title="class TargetChanged extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ReliableProxy.TargetChanged.readResolve">TargetChanged</a><a href="#akka.contrib.pattern.ReliableProxy.TargetChanged.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy;TargetChanged.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>

  <span class="comment">/**
   * `ProxyTerminated` is sent to transition subscribers during `postStop`.  Any outstanding
   * unsent messages are contained the `Unsent` object.
   */</span>
  final case class <a title="class ProxyTerminated extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ReliableProxy.ProxyTerminated.readResolve">ProxyTerminated</a><a href="#akka.contrib.pattern.ReliableProxy.ProxyTerminated.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.ReliableProxy;ProxyTerminated.actor">actor</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.contrib.pattern.ReliableProxy.Unsent" id="akka.contrib.pattern.ReliableProxy;ProxyTerminated.outstanding">outstanding</a>: <a href="#akka.contrib.pattern.ReliableProxy.Unsent.readResolve" title="akka.contrib.pattern.ReliableProxy.Unsent">Unsent</a><span class="delimiter">)</span>
  final case class <a title="class Unsent extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ReliableProxy.Unsent.readResolve">Unsent</a><a href="#akka.contrib.pattern.ReliableProxy.Unsent.readResolve" title="Product" class="delimiter">(</a><a title="Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern.ReliableProxy;Unsent.queue">queue</a>: <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">Vector</span><span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">)</span>

  sealed trait <a title="trait State extends AnyRef" id="akka.contrib.pattern.ReliableProxy;State">State</a>
  case object <a href="#akka.contrib.pattern.ReliableProxy.Idle.productElement.x$1" title="akka.contrib.pattern.ReliableProxy.Idle.type" id="akka.contrib.pattern.ReliableProxy.Idle.readResolve">Idle</a> extends <a href="#akka.contrib.pattern.ReliableProxy;State" title="akka.contrib.pattern.ReliableProxy.State">State</a>
  case object <a href="#akka.contrib.pattern.ReliableProxy.Active.productElement.x$1" title="akka.contrib.pattern.ReliableProxy.Active.type" id="akka.contrib.pattern.ReliableProxy.Active.readResolve">Active</a> extends <a href="#akka.contrib.pattern.ReliableProxy;State" title="akka.contrib.pattern.ReliableProxy.State">State</a>
  case object <a href="#akka.contrib.pattern.ReliableProxy.Connecting.productElement.x$1" title="akka.contrib.pattern.ReliableProxy.Connecting.type" id="akka.contrib.pattern.ReliableProxy.Connecting.readResolve">Connecting</a> extends <a href="#akka.contrib.pattern.ReliableProxy;State" title="akka.contrib.pattern.ReliableProxy.State">State</a>

  <span class="comment">// Java API</span>
  val <a title="akka.contrib.pattern.ReliableProxy.Idle.type" id="akka.contrib.pattern.ReliableProxy.idle">idle</a> = <a href="#akka.contrib.pattern.ReliableProxy.Idle.readResolve" title="akka.contrib.pattern.ReliableProxy.Idle.type">Idle</a>
  val <a title="akka.contrib.pattern.ReliableProxy.Active.type" id="akka.contrib.pattern.ReliableProxy.active">active</a> = <a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a>
  val <a title="akka.contrib.pattern.ReliableProxy.Connecting.type" id="akka.contrib.pattern.ReliableProxy.reconnecting">reconnecting</a> = <a href="#akka.contrib.pattern.ReliableProxy.Connecting.readResolve" title="akka.contrib.pattern.ReliableProxy.Connecting.type">Connecting</a>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> trait <a title="trait ReliableProxyDebugLogging extends AnyRef with akka.actor.ActorLogging" id="akka.contrib.pattern;ReliableProxyDebugLogging">ReliableProxyDebugLogging</a> extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span> this: Actor ⇒
  val debug: <span title="Boolean">Boolean</span> =
    <span title="(r: =&gt; Boolean)scala.util.Try[Boolean]">Try</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;akka.reliable-proxy.debug&quot;)" class="string">&quot;akka.reliable-proxy.debug&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a title="Boolean" id="akka.contrib.pattern;ReliableProxyDebugLogging.debug">getOrElse</a> false

  def <a title="=&gt; Boolean" id="akka.contrib.pattern;ReliableProxyDebugLogging.enabled">enabled</a>: <span title="Boolean">Boolean</span> = <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.debug" title="=&gt; Boolean">debug</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.isDebugEnabled" title="=&gt; Boolean">isDebugEnabled</a>

  def <a title="(template: String)String" id="akka.contrib.pattern;ReliableProxyDebugLogging.addSelf">addSelf</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ReliableProxyDebugLogging.addSelf.template">template</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.addSelf.template" title="String">template</a><span title="String(&quot; [&quot;)"> [$</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span>

  def <a title="(template: String, arg1: Any, arg2: Any)Unit" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c)">logDebug</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).template">template</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).arg1">arg1</a>: <span title="Any">Any</span>, <a title="Any" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).arg2">arg2</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.enabled" title="=&gt; Boolean">enabled</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.addSelf" title="(template: String)String">addSelf</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).template" title="String">template</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).arg1" title="Any">arg1</a>, <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c).arg2" title="Any">arg2</a><span class="delimiter">)</span>

  def <a title="(template: String, arg1: Any)Unit" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)">logDebug</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91).template">template</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91).arg1">arg1</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.enabled" title="=&gt; Boolean">enabled</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.addSelf" title="(template: String)String">addSelf</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91).template" title="String">template</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91).arg1" title="Any">arg1</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

import <a href="#akka.contrib.pattern.ReliableProxy" title="akka.contrib.pattern.ReliableProxy.type">ReliableProxy</a>._

<span class="comment">/**
 * A ReliableProxy is a means to wrap a remote actor reference in order to
 * obtain certain improved delivery guarantees:
 *
 *  - as long as the proxy is not terminated before it sends all of its queued
 *    messages then no messages will be lost
 *  - messages re-sent due to the first point will not be delivered out-of-order,
 *    message ordering is preserved
 *
 * These guarantees are valid for the communication between the two end-points
 * of the reliable “tunnel”, which usually spans an unreliable network.
 *
 * Note that the ReliableProxy guarantees at-least-once, not exactly-once, delivery.
 *
 * Delivery from the remote end-point to the target actor is still subject to in-JVM
 * delivery semantics (i.e. not strictly guaranteed due to possible OutOfMemory
 * situations or other VM errors).
 *
 * You can create a reliable connection like this:
 *
 * In Scala:
 * {{{
 * val proxy = context.actorOf(ReliableProxy.props(target, 100.millis, 120.seconds)
 * }}}
 * or in Java:
 * {{{
 * final ActorRef proxy = getContext().actorOf(ReliableProxy.props(
 *   target, Duration.create(100, &quot;millis&quot;), Duration.create(120, &quot;seconds&quot;)));
 * }}}
 *
 * '''''Please note:''''' the tunnel is uni-directional, and original sender
 * information is retained, hence replies by the wrapped target reference will
 * go back in the normal “unreliable” way unless also secured by a ReliableProxy
 * from the remote end.
 *
 * ==Message Types==
 *
 * This actor is an [[akka.actor.FSM]], hence it offers the service of
 * transition callbacks to those actors which subscribe using the
 * ``SubscribeTransitionCallBack`` and ``UnsubscribeTransitionCallBack``
 * messages; see [[akka.actor.FSM]] for more documentation. The proxy will
 * transition into `ReliableProxy.Active` state when ACKs
 * are outstanding and return to the `ReliableProxy.Idle`
 * state when every message send so far has been confirmed by the peer end-point.
 *
 * The initial state of the proxy is `ReliableProxy.Connecting`. In this state the
 * proxy will repeatedly send [[akka.actor.Identify]] messages to `ActorSelection(targetPath)`
 * in order to obtain a new `ActorRef` for the target. When an [[akka.actor.ActorIdentity]]
 * for the target is received a new tunnel will be created, a [[ReliableProxy.TargetChanged]]
 * message containing the target `ActorRef` will be sent to the proxy's transition subscribers
 * and the proxy will transition into either the `ReliableProxy.Idle` or `ReliableProxy.Active`
 * state, depending if there are any outstanding messages that need to be delivered.  If
 * `maxConnectAttempts` is defined this actor will stop itself after `Identify` is sent
 * `maxConnectAttempts` times.
 *
 * While in the `Idle` or `Active` states, if a communication failure causes the tunnel to
 * terminate via Remote Deathwatch the proxy will transition into the `ReliableProxy.Connecting`
 * state as described above.  After reconnecting `TargetChanged` will be sent only if the target
 * `ActorRef` has changed.
 *
 * If this actor is stopped and it still has outstanding messages a
 * [[ReliableProxy.ProxyTerminated]] message will be sent to the
 * transition subscribers.  It contains an `Unsent` object with the outstanding messages.
 *
 * If an [[ReliableProxy.Unsent]] message is sent to this actor
 * the messages contained within it will be relayed through the tunnel to the target.
 *
 * Any other message type sent to this actor will be delivered via a remote-deployed
 * child actor to the designated target.
 *
 * ==Failure Cases==
 *
 * All failures of either the local or the remote end-point are escalated to the
 * parent of this actor; there are no specific error cases which are predefined.
 *
 * ==Arguments==
 * See the constructor below for the arguments for this actor.  However, prefer using
 * [[akka.contrib.pattern.ReliableProxy#props]] to this actor's constructor.
 *
 * @param targetPath is the ``ActorPath`` to the actor to which all messages will be forwarded.
 *   ``targetPath`` can point to a local or remote actor, but the tunnel endpoint will be
 *   deployed remotely on the node where the target actor lives.
 * @param retryAfter is the ACK timeout after which all outstanding messages
 *   will be resent. There is no limit on the queue size or the number of retries.
 * @param reconnectAfter &amp;nbsp;is an optional interval between connection attempts.
 *   It is also used as the interval between receiving a `Terminated` for the tunnel and
 *   attempting to reconnect to the target actor. The minimum recommended value for this is
 *   the value of the configuration setting `akka.remote.retry-gate-closed-for`. Use `None`
 *   to never reconnect after a disconnection.
 * @param maxConnectAttempts &amp;nbsp;is an optional maximum number of attempts to connect to the
 *   target actor. Use `None` for no limit. If `reconnectAfter` is `None` this value is ignored.
 */</span>
class <a title="class ReliableProxy extends AnyRef with akka.actor.Actor with akka.actor.LoggingFSM[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]] with akka.contrib.pattern.ReliableProxyDebugLogging" id="akka.contrib.pattern;ReliableProxy">ReliableProxy</a><a href="#akka.contrib.pattern;ReliableProxy" title="akka.contrib.pattern.ReliableProxy" class="delimiter">(</a><a title="akka.actor.ActorPath" id="akka.contrib.pattern;ReliableProxy.targetPath">targetPath</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ReliableProxy.retryAfter">retryAfter</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
                    <a title="Option[scala.concurrent.duration.FiniteDuration]" id="akka.contrib.pattern;ReliableProxy.reconnectAfter">reconnectAfter</a>: <span title="Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">[</span>FiniteDuration<span class="delimiter">]</span>, <a title="Option[Int]" id="akka.contrib.pattern;ReliableProxy.maxConnectAttempts">maxConnectAttempts</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span>
  extends <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> with <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;LoggingFSM" title="akka.actor.LoggingFSM[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">LoggingFSM</a><span class="delimiter">[</span>State, Vector<span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">]</span> with <a href="#akka.contrib.pattern;ReliableProxyDebugLogging" title="akka.contrib.pattern.ReliableProxyDebugLogging">ReliableProxyDebugLogging</a> <span class="delimiter">{</span>

  var <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.tunnel_=">tunnel</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _
  var <a title="Int" id="akka.contrib.pattern;ReliableProxy.currentSerial_=">currentSerial</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
  var <a title="Int" id="akka.contrib.pattern;ReliableProxy.lastAckSerial_=">lastAckSerial</a>: <span title="Int">Int</span> = _
  var <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.currentTarget_=">currentTarget</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _
  var <a title="Int" id="akka.contrib.pattern;ReliableProxy.attemptedReconnects_=">attemptedReconnects</a>: <span title="Int">Int</span> = _

  val <a title="String" id="akka.contrib.pattern;ReliableProxy.resendTimer">resendTimer</a> = <span title="String(&quot;resend&quot;)" class="string">&quot;resend&quot;</span>
  val <a title="String" id="akka.contrib.pattern;ReliableProxy.reconnectTimer">reconnectTimer</a> = <span title="String(&quot;reconnect&quot;)" class="string">&quot;reconnect&quot;</span>

  val <a title="Long" id="akka.contrib.pattern;ReliableProxy.retryGateClosedFor">retryGateClosedFor</a> =
    <span title="(r: =&gt; Long)scala.util.Try[Long]">Try</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String, x$2: java.util.concurrent.TimeUnit)Long">getDuration</span><span class="delimiter">(</span><span title="String(&quot;akka.remote.retry-gate-closed-for&quot;)" class="string">&quot;akka.remote.retry-gate-closed-for&quot;</span>, TimeUnit.<span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>.
      <span title="(f: Long =&gt; Long)scala.util.Try[Long]">map</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.retryGateClosedFor.$anonfun.x$1" title="implicit scala.Predef.long2Long : (x: Long)Long">_</a>.<span title="()Long">longValue</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(5000L)" class="long">5000L</span><span class="delimiter">)</span>

  val <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ReliableProxy.defaultConnectInterval">defaultConnectInterval</a> =
    <span title="(r: =&gt; Long)scala.util.Try[Long]">Try</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String, x$2: java.util.concurrent.TimeUnit)Long">getDuration</span><span class="delimiter">(</span><span title="String(&quot;akka.reliable-proxy.default-connect-interval&quot;)" class="string">&quot;akka.reliable-proxy.default-connect-interval&quot;</span>, TimeUnit.<span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>.
      <span title="(f: Long =&gt; Long)scala.util.Try[Long]">map</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.defaultConnectInterval.$anonfun.x$2" title="implicit scala.Predef.long2Long : (x: Long)Long">_</a>.<span title="()Long">longValue</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong" class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.retryGateClosedFor" title="=&gt; Long">retryGateClosedFor</a><span class="delimiter">)</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>

  val <a title="akka.contrib.pattern.ReliableProxy.Connecting.type" id="akka.contrib.pattern;ReliableProxy.initialState">initialState</a> = <a href="#akka.contrib.pattern.ReliableProxy.Connecting.readResolve" title="akka.contrib.pattern.ReliableProxy.Connecting.type">Connecting</a>

  <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ReliableProxy.ReconnectTick.readResolve" title="akka.contrib.pattern.ReliableProxy.ReconnectTick.type">ReconnectTick</a>

  def <a title="(target: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;ReliableProxy.createTunnel">createTunnel</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.createTunnel.target">target</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Creating new tunnel for {}&quot;)" class="string">&quot;Creating new tunnel for {}&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.createTunnel.target" title="akka.actor.ActorRef">target</a><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ReliableProxy.tunnel_=" title="(x$1: akka.actor.ActorRef)Unit">tunnel</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.receiver" title="(target: akka.actor.ActorRef, currentSerial: Int)akka.actor.Props">receiver</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.createTunnel.target" title="akka.actor.ActorRef">target</a>, <a href="#akka.contrib.pattern;ReliableProxy.lastAckSerial_=" title="=&gt; Int">lastAckSerial</a><span class="delimiter">)</span>.
      <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.apply$default$1" title="String" id="akka.contrib.pattern;ReliableProxy.createTunnel.x$12">Deploy</a><span class="delimiter">(</span>scope = <a href="../../../../remote/akka/remote/RemoteDeployer.scala.html#akka.remote;RemoteScope" title="(node: akka.actor.Address)akka.remote.RemoteScope">RemoteScope</a><a title="akka.remote.RemoteScope" id="akka.contrib.pattern;ReliableProxy.createTunnel.x$7" class="delimiter">(</a><a href="#akka.contrib.pattern;ReliableProxy.createTunnel.target" title="akka.actor.ActorRef">target</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="String(&quot;tunnel&quot;)" class="string">&quot;tunnel&quot;</span><span class="delimiter">)</span>

    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.tunnel_=" title="=&gt; akka.actor.ActorRef">tunnel</a><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ReliableProxy.currentTarget_=" title="(x$1: akka.actor.ActorRef)Unit">currentTarget</a> = <a href="#akka.contrib.pattern;ReliableProxy.createTunnel.target" title="akka.actor.ActorRef">target</a>
    <a href="#akka.contrib.pattern;ReliableProxy.attemptedReconnects_=" title="(x$1: Int)Unit">attemptedReconnects</a> = <span title="Int(0)" class="int">0</span>
    <a href="#akka.contrib.pattern;ReliableProxy.resetBackoff" title="()Unit">resetBackoff</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address.host" title="=&gt; Option[String]">host</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Unnecessary to use ReliableProxy for local target: {}&quot;)" class="string">&quot;Unnecessary to use ReliableProxy for local target: {}&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="=&gt; akka.actor.OneForOneStrategy" id="akka.contrib.pattern;ReliableProxy.supervisorStrategy">supervisorStrategy</a> = <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;OneForOneStrategy" title="(maxNrOfRetries: Int, withinTimeRange: scala.concurrent.duration.Duration, loggingEnabled: Boolean)(decider: akka.actor.SupervisorStrategy.Decider)akka.actor.OneForOneStrategy">OneForOneStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span> <a title="&lt;$anon: Throwable =&gt; akka.actor.SupervisorStrategy.Directive&gt; extends scala.runtime.AbstractPartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive] with Serializable" id="akka.contrib.pattern;ReliableProxy.supervisorStrategy;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case _ ⇒ <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Escalate" title="akka.actor.SupervisorStrategy.Escalate.type">Escalate</a>
  <span class="delimiter">}</span>

  override def <a title="()Unit" id="akka.contrib.pattern;ReliableProxy.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Stopping proxy and sending {} messages to subscribers in Unsent&quot;)" class="string">&quot;Stopping proxy and sending {} messages to subscribers in Unsent&quot;</span>, <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stateData" title="=&gt; Vector[akka.contrib.pattern.ReliableProxy.Message]">stateData</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/routing/Listeners.scala.html#akka.routing;Listeners.gossip" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">gossip</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef" class="delimiter">(</a><a href="#akka.contrib.pattern.ReliableProxy.ProxyTerminated.readResolve" title="(actor: akka.actor.ActorRef, outstanding: akka.contrib.pattern.ReliableProxy.Unsent)akka.contrib.pattern.ReliableProxy.ProxyTerminated">ProxyTerminated</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.contrib.pattern.ReliableProxy.Unsent.readResolve" title="(queue: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.contrib.pattern.ReliableProxy.Unsent">Unsent</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stateData" title="=&gt; Vector[akka.contrib.pattern.ReliableProxy.Message]">stateData</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    super.<a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.postStop" title="()Unit">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.startWith" title="(stateName: akka.contrib.pattern.ReliableProxy.State, stateData: Vector[akka.contrib.pattern.ReliableProxy.Message], timeout: ReliableProxy.this.Timeout)Unit">startWith</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.initialState" title="=&gt; akka.contrib.pattern.ReliableProxy.Connecting.type">initialState</a>, <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span><span class="delimiter">)</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.contrib.pattern.ReliableProxy.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ReliableProxy.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Idle.readResolve" title="akka.contrib.pattern.ReliableProxy.Idle.type">Idle</a><span class="delimiter">)</span> <span title="&lt;$anon: ReliableProxy.this.Event =&gt; ReliableProxy.this.State&gt; extends scala.runtime.AbstractPartialFunction[ReliableProxy.this.Event,ReliableProxy.this.State] with Serializable" class="delimiter">{</span>
    case Event<span class="delimiter">(</span>Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;ReliableProxy.terminated" title="()ReliableProxy.this.State">terminated</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>Ack<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span>        ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>Unsent<span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span>, _<span class="delimiter">)</span>  ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <a href="#akka.contrib.pattern;ReliableProxy.resend" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])Vector[akka.contrib.pattern.ReliableProxy.Message]">resend</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.updateSerial" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">updateSerial</a><span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span><span title="Any">msg</span>, _<span class="delimiter">)</span>           ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span title="(elems: akka.contrib.pattern.ReliableProxy.Message*)scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">Vector</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.send" title="(msg: Any, snd: akka.actor.ActorRef)akka.contrib.pattern.ReliableProxy.Message">send</a><span class="delimiter">(</span><span title="Any">msg</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.onTransition" title="(transitionHandler: ReliableProxy.this.TransitionHandler)Unit">onTransition</a> <span title="&lt;$anon: ((akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State)) =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[(akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State),Unit] with Serializable" class="delimiter">{</span>
    case _ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM.->.unapply" title="(in: (akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State))Some[(akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State)]">-&gt;</a> <a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a>     ⇒ <a href="#akka.contrib.pattern;ReliableProxy.scheduleTick" title="()Unit">scheduleTick</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case <a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM.->.unapply" title="(in: (akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State))Some[(akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State)]">-&gt;</a> <a href="#akka.contrib.pattern.ReliableProxy.Idle.readResolve" title="akka.contrib.pattern.ReliableProxy.Idle.type">Idle</a>  ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.cancelTimer" title="(name: String)Unit">cancelTimer</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.resendTimer" title="=&gt; String">resendTimer</a><span class="delimiter">)</span>
    case _ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM.->.unapply" title="(in: (akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State))Some[(akka.contrib.pattern.ReliableProxy.State, akka.contrib.pattern.ReliableProxy.State)]">-&gt;</a> <a href="#akka.contrib.pattern.ReliableProxy.Connecting.readResolve" title="akka.contrib.pattern.ReliableProxy.Connecting.type">Connecting</a> ⇒ <a href="#akka.contrib.pattern;ReliableProxy.scheduleReconnectTick" title="()Unit">scheduleReconnectTick</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.contrib.pattern.ReliableProxy.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ReliableProxy.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a><span class="delimiter">)</span> <span title="&lt;$anon: ReliableProxy.this.Event =&gt; ReliableProxy.this.State&gt; extends scala.runtime.AbstractPartialFunction[ReliableProxy.this.Event,ReliableProxy.this.State] with Serializable" class="delimiter">{</span>
    case Event<span class="delimiter">(</span>Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;ReliableProxy.terminated" title="()ReliableProxy.this.State">terminated</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>Ack<span class="delimiter">(</span><a title="Int" id="akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.serial">serial</a><span class="delimiter">)</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      val q = <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <a title="scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.q">dropWhile</a> <span class="delimiter">(</span><a title="akka.contrib.pattern.ReliableProxy.Message" id="akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.q.$anonfun.m">m</a> ⇒ <a href="#akka.contrib.pattern.ReliableProxy.compare" title="(a: Int, b: Int)Int">compare</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.q.$anonfun.m" title="akka.contrib.pattern.ReliableProxy.Message">m</a>.<a href="#akka.contrib.pattern.ReliableProxy;Message.serial" title="=&gt; Int">serial</a>, <a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.serial" title="Int">serial</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.compare" title="(a: Int, b: Int)Int">compare</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.serial" title="Int">serial</a>, <a href="#akka.contrib.pattern;ReliableProxy.lastAckSerial_=" title="=&gt; Int">lastAckSerial</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#akka.contrib.pattern;ReliableProxy.lastAckSerial_=" title="(x$1: Int)Unit">lastAckSerial</a> = <a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.serial" title="Int">serial</a>
      <a href="#akka.contrib.pattern;ReliableProxy.scheduleTick" title="()Unit">scheduleTick</a><span class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.q" title="scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Idle.readResolve" title="akka.contrib.pattern.ReliableProxy.Idle.type">Idle</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
      else <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.q" title="scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a>
    case Event<span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Tick.readResolve" title="akka.contrib.pattern.ReliableProxy.Tick.type">Tick</a>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;ReliableProxy.logResend" title="(size: Int)Unit">logResend</a><span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
      <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <span title="(f: akka.contrib.pattern.ReliableProxy.Message =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">tunnel</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.$anonfun.x$3" title="akka.contrib.pattern.ReliableProxy.Message">_</a> <span class="delimiter">}</span>
      <a href="#akka.contrib.pattern;ReliableProxy.scheduleTick" title="()Unit">scheduleTick</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a><span class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>Unsent<span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <span title="(that: scala.collection.GenTraversableOnce[akka.contrib.pattern.ReliableProxy.Message])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message],akka.contrib.pattern.ReliableProxy.Message,Vector[akka.contrib.pattern.ReliableProxy.Message]])Vector[akka.contrib.pattern.ReliableProxy.Message]">++</span> <a href="#akka.contrib.pattern;ReliableProxy.resend" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])Vector[akka.contrib.pattern.ReliableProxy.Message]">resend</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.updateSerial" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">updateSerial</a><span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span><span title="Any">msg</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <span title="(elem: akka.contrib.pattern.ReliableProxy.Message)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message],akka.contrib.pattern.ReliableProxy.Message,Vector[akka.contrib.pattern.ReliableProxy.Message]])Vector[akka.contrib.pattern.ReliableProxy.Message]">:+</span> <a href="#akka.contrib.pattern;ReliableProxy.send" title="(msg: Any, snd: akka.actor.ActorRef)akka.contrib.pattern.ReliableProxy.Message">send</a><span class="delimiter">(</span><span title="Any">msg</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.contrib.pattern.ReliableProxy.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ReliableProxy.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Connecting.readResolve" title="akka.contrib.pattern.ReliableProxy.Connecting.type">Connecting</a><span class="delimiter">)</span> <span title="&lt;$anon: ReliableProxy.this.Event =&gt; ReliableProxy.this.State&gt; extends scala.runtime.AbstractPartialFunction[ReliableProxy.this.Event,ReliableProxy.this.State] with Serializable" class="delimiter">{</span>
    case Event<span class="delimiter">(</span>Terminated<span class="delimiter">(</span>_<span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>ActorIdentity<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.actor">actor</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      val <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.curr">curr</a> = <a href="#akka.contrib.pattern;ReliableProxy.currentTarget_=" title="=&gt; akka.actor.ActorRef">currentTarget</a>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.cancelTimer" title="(name: String)Unit">cancelTimer</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.reconnectTimer" title="=&gt; String">reconnectTimer</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ReliableProxy.createTunnel" title="(target: akka.actor.ActorRef)Unit">createTunnel</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.isDefinedAt.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.currentTarget_=" title="=&gt; akka.actor.ActorRef">currentTarget</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.curr" title="akka.actor.ActorRef">curr</a><span class="delimiter">)</span> <a href="../../../../actor/akka/routing/Listeners.scala.html#akka.routing;Listeners.gossip" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">gossip</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef" class="delimiter">(</a><a href="#akka.contrib.pattern.ReliableProxy.TargetChanged.readResolve" title="(ref: akka.actor.ActorRef)akka.contrib.pattern.ReliableProxy.TargetChanged">TargetChanged</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.currentTarget_=" title="=&gt; akka.actor.ActorRef">currentTarget</a><span class="delimiter">)</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Idle.readResolve" title="akka.contrib.pattern.ReliableProxy.Idle.type">Idle</a><span class="delimiter">)</span> else <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Active.readResolve" title="akka.contrib.pattern.ReliableProxy.Active.type">Active</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <a href="#akka.contrib.pattern;ReliableProxy.resend" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])Vector[akka.contrib.pattern.ReliableProxy.Message]">resend</a><span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span>ActorIdentity<span class="delimiter">(</span>_, <span title="None.type">None</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.ReconnectTick.readResolve" title="akka.contrib.pattern.ReliableProxy.ReconnectTick.type">ReconnectTick</a>, _<span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.maxConnectAttempts" title="Option[Int]">maxConnectAttempts</a> <span title="(p: Int =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.<local ReliableProxy>;$anonfun.applyOrElse.$anonfun.x$4" title="Int">_</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.contrib.pattern;ReliableProxy.attemptedReconnects_=" title="=&gt; Int">attemptedReconnects</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Failed to reconnect after {}&quot;)" class="string">&quot;Failed to reconnect after {}&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.attemptedReconnects_=" title="=&gt; Int">attemptedReconnects</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ReliableProxy.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;{} ! {}&quot;)" class="string">&quot;{} ! {}&quot;</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(e44b8bc960)" title="(path: akka.actor.ActorPath)akka.actor.ActorSelection">actorSelection</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Identify" title="(messageId: Any)akka.actor.Identify">Identify</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(e44b8bc960)" title="(path: akka.actor.ActorPath)akka.actor.ActorSelection">actorSelection</a><a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Identify" title="(messageId: Any)akka.actor.Identify">Identify</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern;ReliableProxy.scheduleReconnectTick" title="()Unit">scheduleReconnectTick</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern;ReliableProxy.attemptedReconnects_=" title="(x$1: Int)Unit">attemptedReconnects</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    case Event<span class="delimiter">(</span>Unsent<span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <span title="(that: scala.collection.GenTraversableOnce[akka.contrib.pattern.ReliableProxy.Message])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message],akka.contrib.pattern.ReliableProxy.Message,Vector[akka.contrib.pattern.ReliableProxy.Message]])Vector[akka.contrib.pattern.ReliableProxy.Message]">++</span> <a href="#akka.contrib.pattern;ReliableProxy.updateSerial" title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">updateSerial</a><span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">msgs</span><span class="delimiter">)</span>
    case Event<span class="delimiter">(</span><span title="Any">msg</span>, <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ReliableProxy.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateData: Vector[akka.contrib.pattern.ReliableProxy.Message])akka.actor.FSM.State[akka.contrib.pattern.ReliableProxy.State,Vector[akka.contrib.pattern.ReliableProxy.Message]]">using</a> <span class="delimiter">(</span><span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">queue</span> <span title="(elem: akka.contrib.pattern.ReliableProxy.Message)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message],akka.contrib.pattern.ReliableProxy.Message,Vector[akka.contrib.pattern.ReliableProxy.Message]])Vector[akka.contrib.pattern.ReliableProxy.Message]">:+</span> <a href="#akka.contrib.pattern.ReliableProxy.Message.readResolve" title="(msg: Any, sender: akka.actor.ActorRef, serial: Int)akka.contrib.pattern.ReliableProxy.Message">Message</a><span class="delimiter">(</span><span title="Any">msg</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.contrib.pattern;ReliableProxy.nextSerial" title="()Int">nextSerial</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Unit" id="akka.contrib.pattern;ReliableProxy.scheduleTick">scheduleTick</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.setTimer" title="(name: String, msg: Any, timeout: scala.concurrent.duration.FiniteDuration, repeat: Boolean)Unit">setTimer</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.resendTimer" title="=&gt; String">resendTimer</a>, <a href="#akka.contrib.pattern.ReliableProxy.Tick.readResolve" title="akka.contrib.pattern.ReliableProxy.Tick.type">Tick</a>, <a href="#akka.contrib.pattern;ReliableProxy.retryAfter" title="scala.concurrent.duration.FiniteDuration">retryAfter</a>, repeat = false<span class="delimiter">)</span>

  def <a title="()Int" id="akka.contrib.pattern;ReliableProxy.nextSerial">nextSerial</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxy.currentSerial_=" title="(x$1: Int)Unit">currentSerial</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#akka.contrib.pattern;ReliableProxy.currentSerial_=" title="=&gt; Int">currentSerial</a>
  <span class="delimiter">}</span>

  def <a title="(msg: Any, snd: akka.actor.ActorRef)akka.contrib.pattern.ReliableProxy.Message" id="akka.contrib.pattern;ReliableProxy.send">send</a><span class="delimiter">(</span><a title="Any" id="akka.contrib.pattern;ReliableProxy.send.msg">msg</a>: <span title="Any">Any</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ReliableProxy.send.snd">snd</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="#akka.contrib.pattern.ReliableProxy.Message.readResolve" title="akka.contrib.pattern.ReliableProxy.Message">Message</a> = <span class="delimiter">{</span>
    val <a title="akka.contrib.pattern.ReliableProxy.Message" id="akka.contrib.pattern;ReliableProxy.send.m">m</a> = <a href="#akka.contrib.pattern.ReliableProxy.Message.readResolve" title="(msg: Any, sender: akka.actor.ActorRef, serial: Int)akka.contrib.pattern.ReliableProxy.Message">Message</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.send.msg" title="Any">msg</a>, <a href="#akka.contrib.pattern;ReliableProxy.send.snd" title="akka.actor.ActorRef">snd</a>, <a href="#akka.contrib.pattern;ReliableProxy.nextSerial" title="()Int">nextSerial</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">tunnel</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern;ReliableProxy.send.m" title="akka.contrib.pattern.ReliableProxy.Message">m</a>
    <a href="#akka.contrib.pattern;ReliableProxy.send.m" title="akka.contrib.pattern.ReliableProxy.Message">m</a>
  <span class="delimiter">}</span>

  def <a title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern;ReliableProxy.updateSerial">updateSerial</a><span class="delimiter">(</span><a title="Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern;ReliableProxy.updateSerial.q">q</a>: <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">Vector</span><span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern;ReliableProxy.updateSerial.q" title="Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a> <span title="(f: akka.contrib.pattern.ReliableProxy.Message =&gt; akka.contrib.pattern.ReliableProxy.Message)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message],akka.contrib.pattern.ReliableProxy.Message,scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]])scala.collection.immutable.Vector[akka.contrib.pattern.ReliableProxy.Message]">map</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.updateSerial.$anonfun.x$5" title="akka.contrib.pattern.ReliableProxy.Message">_</a>.<a href="#akka.contrib.pattern.ReliableProxy;Message.msg" title="Any" id="akka.contrib.pattern;ReliableProxy.updateSerial.$anonfun.x$15">copy</a><span class="delimiter">(</span>serial = <a href="#akka.contrib.pattern;ReliableProxy.nextSerial" title="()Int">nextSerial</a><a title="Int" id="akka.contrib.pattern;ReliableProxy.updateSerial.$anonfun.x$13" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(q: Vector[akka.contrib.pattern.ReliableProxy.Message])Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern;ReliableProxy.resend">resend</a><span class="delimiter">(</span><a title="Vector[akka.contrib.pattern.ReliableProxy.Message]" id="akka.contrib.pattern;ReliableProxy.resend.q">q</a>: <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">Vector</span><span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Vector[akka.contrib.pattern.ReliableProxy.Message]">Vector</span><span class="delimiter">[</span>Message<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxy.logResend" title="(size: Int)Unit">logResend</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.resend.q" title="Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ReliableProxy.resend.q" title="Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a> <span title="(f: akka.contrib.pattern.ReliableProxy.Message =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">tunnel</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern;ReliableProxy.resend.$anonfun.x$6" title="akka.contrib.pattern.ReliableProxy.Message">_</a> <span class="delimiter">}</span>
    <a href="#akka.contrib.pattern;ReliableProxy.resend.q" title="Vector[akka.contrib.pattern.ReliableProxy.Message]">q</a>
  <span class="delimiter">}</span>

  def <a title="(size: Int)Unit" id="akka.contrib.pattern;ReliableProxy.logResend">logResend</a><span class="delimiter">(</span><a title="Int" id="akka.contrib.pattern;ReliableProxy.logResend.size">size</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Resending {} messages through tunnel&quot;)" class="string">&quot;Resending {} messages through tunnel&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.logResend.size" title="Int">size</a><span class="delimiter">)</span>

  def <a title="()ReliableProxy.this.State" id="akka.contrib.pattern;ReliableProxy.terminated">terminated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State" title="ReliableProxy.this.State">State</a> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(dc73c33c91)" title="(template: String, arg1: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Terminated: {}&quot;)" class="string">&quot;Terminated: {}&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.reconnectAfter" title="Option[scala.concurrent.duration.FiniteDuration]">reconnectAfter</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.contrib.pattern.ReliableProxy.State)ReliableProxy.this.State">goto</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ReliableProxy.Connecting.readResolve" title="akka.contrib.pattern.ReliableProxy.Connecting.type">Connecting</a><span class="delimiter">)</span>
    else <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ReliableProxy.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Unit" id="akka.contrib.pattern;ReliableProxy.scheduleReconnectTick">scheduleReconnectTick</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ReliableProxy.scheduleReconnectTick.delay">delay</a> = <a href="#akka.contrib.pattern;ReliableProxy.nextBackoff" title="()scala.concurrent.duration.FiniteDuration">nextBackoff</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ReliableProxyDebugLogging.logDebug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logDebug</a><span class="delimiter">(</span><span title="String(&quot;Will attempt to reconnect to {} in {}&quot;)" class="string">&quot;Will attempt to reconnect to {} in {}&quot;</span>, <a href="#akka.contrib.pattern;ReliableProxy.targetPath" title="akka.actor.ActorPath">targetPath</a>, <a href="#akka.contrib.pattern;ReliableProxy.scheduleReconnectTick.delay" title="scala.concurrent.duration.FiniteDuration">delay</a><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.setTimer" title="(name: String, msg: Any, timeout: scala.concurrent.duration.FiniteDuration, repeat: Boolean)Unit">setTimer</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ReliableProxy.reconnectTimer" title="=&gt; String">reconnectTimer</a>, <a href="#akka.contrib.pattern.ReliableProxy.ReconnectTick.readResolve" title="akka.contrib.pattern.ReliableProxy.ReconnectTick.type">ReconnectTick</a>, <a href="#akka.contrib.pattern;ReliableProxy.scheduleReconnectTick.delay" title="scala.concurrent.duration.FiniteDuration">delay</a>, repeat = false<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Reset backoff interval.
   *
   * This and nextBackoff are meant to be implemented by subclasses.
   */</span>
  def <a title="()Unit" id="akka.contrib.pattern;ReliableProxy.resetBackoff">resetBackoff</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the next retry interval duration.  By default each interval is the same, reconnectAfter.
   */</span>
  def <a title="()scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ReliableProxy.nextBackoff">nextBackoff</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.contrib.pattern;ReliableProxy.reconnectAfter" title="Option[scala.concurrent.duration.FiniteDuration]">reconnectAfter</a> <span title="(default: =&gt; scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">getOrElse</span> <a href="#akka.contrib.pattern;ReliableProxy.defaultConnectInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">defaultConnectInterval</a>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
