<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>distributed-data-experimental/akka/cluster/ddata/VersionVector.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.cluster.ddata

import java.util.concurrent.atomic.AtomicLong

import scala.annotation.tailrec
import scala.collection.immutable.TreeMap

import akka.cluster.Cluster
import akka.cluster.UniqueAddress

<span class="comment">/**
 * VersionVector module with helper classes and methods.
 */</span>
object <a title="akka.cluster.ddata.VersionVector.type" id="akka.cluster.ddata.VersionVector.readResolve">VersionVector</a> <a href="#akka.cluster.ddata.VersionVector.readResolve" title="akka.cluster.ddata.VersionVector.type" class="delimiter">{</a>

  val <a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata.VersionVector.empty">empty</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = new <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">(</span><span title="scala.collection.immutable.TreeMap.type">TreeMap</span>.<span title="[A, B](implicit ord: Ordering[A])scala.collection.immutable.TreeMap[A,B]">empty</span><span title="(implicit ord: Ordering[akka.cluster.UniqueAddress])scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]" class="delimiter">[</span><a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <span title="Long">Long</span><span class="delimiter">]</span><span class="delimiter">)</span>
  def <a title="()akka.cluster.ddata.VersionVector" id="akka.cluster.ddata.VersionVector.apply(4705f54e35)">apply</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata.VersionVector.empty" title="=&gt; akka.cluster.ddata.VersionVector">empty</a>
  <span class="comment">/**
   * Java API
   */</span>
  def <a title="()akka.cluster.ddata.VersionVector" id="akka.cluster.ddata.VersionVector.create">create</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata.VersionVector.empty" title="=&gt; akka.cluster.ddata.VersionVector">empty</a>

  sealed trait <a title="trait Ordering extends AnyRef" id="akka.cluster.ddata.VersionVector;Ordering">Ordering</a>
  case object <a href="#akka.cluster.ddata.VersionVector.After.productElement.x$1" title="akka.cluster.ddata.VersionVector.After.type" id="akka.cluster.ddata.VersionVector.After.readResolve">After</a> extends <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a>
  case object <a href="#akka.cluster.ddata.VersionVector.Before.productElement.x$1" title="akka.cluster.ddata.VersionVector.Before.type" id="akka.cluster.ddata.VersionVector.Before.readResolve">Before</a> extends <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a>
  case object <a href="#akka.cluster.ddata.VersionVector.Same.productElement.x$1" title="akka.cluster.ddata.VersionVector.Same.type" id="akka.cluster.ddata.VersionVector.Same.readResolve">Same</a> extends <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a>
  case object <a href="#akka.cluster.ddata.VersionVector.Concurrent.productElement.x$1" title="akka.cluster.ddata.VersionVector.Concurrent.type" id="akka.cluster.ddata.VersionVector.Concurrent.readResolve">Concurrent</a> extends <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a>
  <span class="comment">/**
   * Marker to ensure that we do a full order comparison instead of bailing out early.
   */</span>
  private case object <a href="#akka.cluster.ddata.VersionVector.FullOrder.productElement.x$1" title="akka.cluster.ddata.VersionVector.FullOrder.type" id="akka.cluster.ddata.VersionVector.FullOrder.readResolve">FullOrder</a> extends <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a>

  <span class="comment">/**
   * Java API: The `VersionVector.After` instance
   */</span>
  def <a title="=&gt; akka.cluster.ddata.VersionVector.After.type" id="akka.cluster.ddata.VersionVector.AfterInstance">AfterInstance</a> = <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a>

  <span class="comment">/**
   * Java API: The `VersionVector.Before` instance
   */</span>
  def <a title="=&gt; akka.cluster.ddata.VersionVector.Before.type" id="akka.cluster.ddata.VersionVector.BeforeInstance">BeforeInstance</a> = <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a>

  <span class="comment">/**
   * Java API: The `VersionVector.Same` instance
   */</span>
  def <a title="=&gt; akka.cluster.ddata.VersionVector.Same.type" id="akka.cluster.ddata.VersionVector.SameInstance">SameInstance</a> = <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a>

  <span class="comment">/**
   * Java API: The `VersionVector.Concurrent` instance
   */</span>
  def <a title="=&gt; akka.cluster.ddata.VersionVector.Concurrent.type" id="akka.cluster.ddata.VersionVector.ConcurrentInstance">ConcurrentInstance</a> = <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>

  private object <a title="akka.cluster.ddata.VersionVector.Timestamp.type" id="akka.cluster.ddata.VersionVector.Timestamp">Timestamp</a> <a href="#akka.cluster.ddata.VersionVector.Timestamp" title="akka.cluster.ddata.VersionVector.Timestamp.type" class="delimiter">{</a>
    final val <a title="Long(0L)" id="akka.cluster.ddata.VersionVector.Timestamp.Zero">Zero</a> = <span title="Long(0L)" class="long">0L</span>
    final val <a title="Long(-9223372036854775808L)" id="akka.cluster.ddata.VersionVector.Timestamp.EndMarker">EndMarker</a> = Long.<span title="Long(-9223372036854775808L)">MinValue</span>
    val <a title="java.util.concurrent.atomic.AtomicLong" id="akka.cluster.ddata.VersionVector.Timestamp.counter">counter</a> = new <span title="java.util.concurrent.atomic.AtomicLong">AtomicLong</span><span class="delimiter">(</span><span title="Long(1L)" class="long">1L</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Marker to signal that we have reached the end of a version vector.
   */</span>
  private val <a title="(Null, Long)" id="akka.cluster.ddata.VersionVector.cmpEndMarker">cmpEndMarker</a> = <span title="(_1: Null, _2: Long)(Null, Long)" class="delimiter">(</span>null, Timestamp.<span title="Long(-9223372036854775808L)">EndMarker</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Representation of a Vector-based clock (counting clock), inspired by Lamport logical clocks.
 * {{{
 * Reference:
 *    1) Leslie Lamport (1978). &quot;Time, clocks, and the ordering of events in a distributed system&quot;. Communications of the ACM 21 (7): 558-565.
 *    2) Friedemann Mattern (1988). &quot;Virtual Time and Global States of Distributed Systems&quot;. Workshop on Parallel and Distributed Algorithms: pp. 215-226
 * }}}
 *
 * Based on code from `akka.cluster.VectorClock`.
 *
 * This class is immutable, i.e. &quot;modifying&quot; methods return a new instance.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="(versions: scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long])akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.equals">VersionVector</a> private<span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="delimiter">(</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> val <a title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]" id="akka.cluster.ddata;VersionVector.copy$default$1">versions</a>: <span title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">TreeMap</span><span class="delimiter">[</span>UniqueAddress, Long<span class="delimiter">]</span><span class="delimiter">)</span>
  extends <a href="ReplicatedData.scala.html#akka.cluster.ddata;ReplicatedData" title="akka.cluster.ddata.ReplicatedData">ReplicatedData</a> with <a href="ReplicatedData.scala.html#akka.cluster.ddata;ReplicatedDataSerialization" title="akka.cluster.ddata.ReplicatedDataSerialization">ReplicatedDataSerialization</a> with <a href="ReplicatedData.scala.html#akka.cluster.ddata;RemovedNodePruning" title="akka.cluster.ddata.RemovedNodePruning">RemovedNodePruning</a> <span class="delimiter">{</span>

  type <a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector;T">T</a> = <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a>

  import <a href="#akka.cluster.ddata.VersionVector.readResolve" title="akka.cluster.ddata.VersionVector.type">VersionVector</a>._

  <span class="comment">/**
   * Increment the version for the node passed as argument. Returns a new VersionVector.
   */</span>
  def <a title="(node: akka.cluster.Cluster)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.+(7162f69229)">+</a><span class="delimiter">(</span><a title="akka.cluster.Cluster" id="akka.cluster.ddata;VersionVector.+(7162f69229).node">node</a>: <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster" title="akka.cluster.Cluster">Cluster</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata;VersionVector.increment(7162f69229)" title="(node: akka.cluster.Cluster)akka.cluster.ddata.VersionVector">increment</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.+(7162f69229).node" title="akka.cluster.Cluster">node</a><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   * Increment the version for the node passed as argument. Returns a new VersionVector.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(node: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.+(328a6d964b)">+</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.+(328a6d964b).node">node</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata;VersionVector.increment(328a6d964b)" title="(node: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector">increment</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.+(328a6d964b).node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Increment the version for the node passed as argument. Returns a new VersionVector.
   */</span>
  def <a title="(node: akka.cluster.Cluster)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.increment(7162f69229)">increment</a><span class="delimiter">(</span><a title="akka.cluster.Cluster" id="akka.cluster.ddata;VersionVector.increment(7162f69229).node">node</a>: <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster" title="akka.cluster.Cluster">Cluster</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata;VersionVector.increment(328a6d964b)" title="(node: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector">increment</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.increment(7162f69229).node" title="akka.cluster.Cluster">node</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   * Increment the version for the node passed as argument. Returns a new VersionVector.
   */</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(node: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.increment(328a6d964b)">increment</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.increment(328a6d964b).node">node</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> =
    <a href="#akka.cluster.ddata;VersionVector.equals" title="(versions: scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long])akka.cluster.ddata.VersionVector">copy</a><span class="delimiter">(</span>versions = <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>.<span title="(key: akka.cluster.UniqueAddress, value: Long)scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">updated</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.increment(328a6d964b).node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster.ddata.VersionVector.Timestamp" title="akka.cluster.ddata.VersionVector.Timestamp.type">Timestamp</a>.<a href="#akka.cluster.ddata.VersionVector.Timestamp.counter" title="=&gt; java.util.concurrent.atomic.AtomicLong">counter</a>.<span title="()Long">getAndIncrement</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns true if &lt;code&gt;this&lt;/code&gt; and &lt;code&gt;that&lt;/code&gt; are concurrent else false.
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)Boolean" id="akka.cluster.ddata;VersionVector.<>">&lt;&gt;</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.<>.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo" title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareOnlyTo</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.<>.that" title="akka.cluster.ddata.VersionVector">that</a>, <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>

  <span class="comment">/**
   * Returns true if &lt;code&gt;this&lt;/code&gt; is before &lt;code&gt;that&lt;/code&gt; else false.
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)Boolean" id="akka.cluster.ddata;VersionVector.<">&lt;</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.<.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo" title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareOnlyTo</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.<.that" title="akka.cluster.ddata.VersionVector">that</a>, <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a>

  <span class="comment">/**
   * Returns true if &lt;code&gt;this&lt;/code&gt; is after &lt;code&gt;that&lt;/code&gt; else false.
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)Boolean" id="akka.cluster.ddata;VersionVector.>">&gt;</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.>.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo" title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareOnlyTo</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.>.that" title="akka.cluster.ddata.VersionVector">that</a>, <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a>

  <span class="comment">/**
   * Returns true if this VersionVector has the same history as the 'that' VersionVector else false.
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)Boolean" id="akka.cluster.ddata;VersionVector.==(5ee00e394f)">==</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.==(5ee00e394f).that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo" title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareOnlyTo</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.==(5ee00e394f).that" title="akka.cluster.ddata.VersionVector">that</a>, <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a>

  <span class="comment">/**
   * Version vector comparison according to the semantics described by compareTo, with the ability to bail
   * out early if the we can't reach the Ordering that we are looking for.
   *
   * The ordering always starts with Same and can then go to Same, Before or After
   * If we're on After we can only go to After or Concurrent
   * If we're on Before we can only go to Before or Concurrent
   * If we go to Concurrent we exit the loop immediately
   *
   * If you send in the ordering FullOrder, you will get a full comparison.
   */</span>
  private final def <a title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo">compareOnlyTo</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.compareOnlyTo.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a>, <a title="akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo.order">order</a>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a> = <span class="delimiter">{</span>
    def <a title="[A](iter: Iterator[A], default: A)A" id="akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse">nextOrElse</a><span class="delimiter">[</span><a title="" id="akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterator[A]" id="akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse.iter">iter</a>: <span title="Iterator[A]">Iterator</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A" id="akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse.default">default</a>: <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse;A" title="A">A</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse;A" title="A">A</a> = if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse.iter" title="Iterator[A]">iter</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse.iter" title="Iterator[A]">iter</a>.<span title="()A">next</span><span class="delimiter">(</span><span class="delimiter">)</span> else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse.default" title="A">default</a>

    def <a title="(i1: Iterator[(akka.cluster.UniqueAddress, Long)], i2: Iterator[(akka.cluster.UniqueAddress, Long)], requestedOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare">compare</a><span class="delimiter">(</span><a title="Iterator[(akka.cluster.UniqueAddress, Long)]" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1">i1</a>: <span title="Iterator[(akka.cluster.UniqueAddress, Long)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>UniqueAddress, Long<span class="delimiter">)</span><span class="delimiter">]</span>, <a title="Iterator[(akka.cluster.UniqueAddress, Long)]" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2">i2</a>: <span title="Iterator[(akka.cluster.UniqueAddress, Long)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>UniqueAddress, Long<span class="delimiter">)</span><span class="delimiter">]</span>, <a title="akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.requestedOrder">requestedOrder</a>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a> = <span class="delimiter">{</span>
      @tailrec
      def <a title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext">compareNext</a><span class="delimiter">(</span><a title="(akka.cluster.UniqueAddress, Long)" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1">nt1</a>: <span title="(akka.cluster.UniqueAddress, Long)" class="delimiter">(</span>UniqueAddress, Long<span class="delimiter">)</span>, <a title="(akka.cluster.UniqueAddress, Long)" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2">nt2</a>: <span title="(akka.cluster.UniqueAddress, Long)" class="delimiter">(</span>UniqueAddress, Long<span class="delimiter">)</span>, <a title="akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder">currentOrder</a>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a> =
        if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.requestedOrder" title="akka.cluster.ddata.VersionVector.Ordering">requestedOrder</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.cluster.ddata.VersionVector.FullOrder.readResolve" title="akka.cluster.ddata.VersionVector.FullOrder.type">FullOrder</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.requestedOrder" title="akka.cluster.ddata.VersionVector.Ordering">requestedOrder</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a>
        else if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a>
        <span class="comment">// i1 is empty but i2 is not, so i1 can only be Before</span>
        else if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span> <span class="delimiter">{</span> if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a> else <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a> <span class="delimiter">}</span>
        <span class="comment">// i2 is empty but i1 is not, so i1 can only be After</span>
        else if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span> <span class="delimiter">{</span> if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a> else <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a> <span class="delimiter">}</span>
        else <span class="delimiter">{</span>
          <span class="comment">// compare the nodes</span>
          val nc = <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a>.<span title="=&gt; akka.cluster.UniqueAddress">_1</span> <a title="Int" id="akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nc">compareTo</a> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a>.<span title="=&gt; akka.cluster.UniqueAddress">_1</span>
          if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nc" title="Int">nc</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// both nodes exist compare the timestamps</span>
            <span class="comment">// same timestamp so just continue with the next nodes</span>
            if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a>.<span title="=&gt; Long">_2</span> <span title="(x: Long)Boolean">==</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a>.<span title="=&gt; Long">_2</span><span class="delimiter">)</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i1</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i2</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a><span class="delimiter">)</span>
            else if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a>.<span title="=&gt; Long">_2</span> <span title="(x: Long)Boolean">&lt;</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a>.<span title="=&gt; Long">_2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">// t1 is less than t2, so i1 can only be Before</span>
              if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>
              else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i1</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i2</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <span class="comment">// t2 is less than t1, so i1 can only be After</span>
              if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>
              else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i1</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i2</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nc" title="Int">nc</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// this node only exists in i1 so i1 can only be After</span>
            if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>
            else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i1</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt2" title="(akka.cluster.UniqueAddress, Long)">nt2</a>, <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <span class="comment">// this node only exists in i2 so i1 can only be Before</span>
            if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.currentOrder" title="akka.cluster.ddata.VersionVector.Ordering">currentOrder</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.After.readResolve" title="akka.cluster.ddata.VersionVector.After.type">After</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a>
            else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext.nt1" title="(akka.cluster.UniqueAddress, Long)">nt1</a>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i2</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata.VersionVector.Before.readResolve" title="akka.cluster.ddata.VersionVector.Before.type">Before</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.compareNext" title="(nt1: (akka.cluster.UniqueAddress, Long), nt2: (akka.cluster.UniqueAddress, Long), currentOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareNext</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i1" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i1</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.nextOrElse" title="(iter: Iterator[(akka.cluster.UniqueAddress, Long)], default: (akka.cluster.UniqueAddress, Long))(akka.cluster.UniqueAddress, Long)">nextOrElse</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare.i2" title="Iterator[(akka.cluster.UniqueAddress, Long)]">i2</a>, <a href="#akka.cluster.ddata.VersionVector.cmpEndMarker" title="=&gt; (Null, Long)">cmpEndMarker</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    if <span class="delimiter">(</span><span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.that" title="akka.cluster.ddata.VersionVector">that</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span>this.<a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.that" title="akka.cluster.ddata.VersionVector">that</a>.<a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.Same.readResolve" title="akka.cluster.ddata.VersionVector.Same.type">Same</a>
    else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.compare" title="(i1: Iterator[(akka.cluster.UniqueAddress, Long)], i2: Iterator[(akka.cluster.UniqueAddress, Long)], requestedOrder: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compare</a><span class="delimiter">(</span>this.<a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>.<span title="=&gt; Iterator[(akka.cluster.UniqueAddress, Long)]">iterator</span>, <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.that" title="akka.cluster.ddata.VersionVector">that</a>.<a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>.<span title="=&gt; Iterator[(akka.cluster.UniqueAddress, Long)]">iterator</span>, if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.order" title="akka.cluster.ddata.VersionVector.Ordering">order</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ddata.VersionVector.Concurrent.readResolve" title="akka.cluster.ddata.VersionVector.Concurrent.type">Concurrent</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.VersionVector.FullOrder.readResolve" title="akka.cluster.ddata.VersionVector.FullOrder.type">FullOrder</a> else <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo.order" title="akka.cluster.ddata.VersionVector.Ordering">order</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Compare two version vectors. The outcome will be one of the following:
   * &lt;p/&gt;
   * {{{
   *   1. Version 1 is SAME (==)       as Version 2 iff for all i c1(i) == c2(i)
   *   2. Version 1 is BEFORE (&lt;)      Version 2 iff for all i c1(i) &lt;= c2(i) and there exist a j such that c1(j) &lt; c2(j)
   *   3. Version 1 is AFTER (&gt;)       Version 2 iff for all i c1(i) &gt;= c2(i) and there exist a j such that c1(j) &gt; c2(j).
   *   4. Version 1 is CONCURRENT (&lt;&gt;) to Version 2 otherwise.
   * }}}
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)akka.cluster.ddata.VersionVector.Ordering" id="akka.cluster.ddata;VersionVector.compareTo">compareTo</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.compareTo.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata.VersionVector;Ordering" title="akka.cluster.ddata.VersionVector.Ordering">Ordering</a> = <span class="delimiter">{</span>
    <a href="#akka.cluster.ddata;VersionVector.compareOnlyTo" title="(that: akka.cluster.ddata.VersionVector, order: akka.cluster.ddata.VersionVector.Ordering)akka.cluster.ddata.VersionVector.Ordering">compareOnlyTo</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.compareTo.that" title="akka.cluster.ddata.VersionVector">that</a>, <a href="#akka.cluster.ddata.VersionVector.FullOrder.readResolve" title="akka.cluster.ddata.VersionVector.FullOrder.type">FullOrder</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Merges this VersionVector with another VersionVector. E.g. merges its versioned history.
   */</span>
  def <a title="(that: akka.cluster.ddata.VersionVector)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.merge">merge</a><span class="delimiter">(</span><a title="akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.merge.that">that</a>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <span class="delimiter">{</span>
    var <a title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]" id="akka.cluster.ddata;VersionVector.merge.mergedVersions">mergedVersions</a> = <a href="#akka.cluster.ddata;VersionVector.merge.that" title="akka.cluster.ddata.VersionVector">that</a>.<a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>
    for <span class="delimiter">(</span><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.merge.$anonfun.node">node</a>, <a title="Long" id="akka.cluster.ddata;VersionVector.merge.$anonfun.time">time</a><span class="delimiter">)</span>  <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="(f: ((akka.cluster.UniqueAddress, Long)) =&gt; Unit)Unit">versions</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="Long" id="akka.cluster.ddata;VersionVector.merge.$anonfun.mergedVersionsCurrentTime">mergedVersionsCurrentTime</a> = <a href="#akka.cluster.ddata;VersionVector.merge.mergedVersions" title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">mergedVersions</a>.<span title="(key: akka.cluster.UniqueAddress, default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.merge.$anonfun.node" title="akka.cluster.UniqueAddress">node</a>, Timestamp.<span title="Long(0L)">Zero</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.merge.$anonfun.time" title="Long">time</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.cluster.ddata;VersionVector.merge.$anonfun.mergedVersionsCurrentTime" title="Long">mergedVersionsCurrentTime</a><span class="delimiter">)</span>
        <a href="#akka.cluster.ddata;VersionVector.merge.mergedVersions" title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">mergedVersions</a> = <a href="#akka.cluster.ddata;VersionVector.merge.mergedVersions" title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">mergedVersions</a>.<span title="(key: akka.cluster.UniqueAddress, value: Long)scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">updated</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.merge.$anonfun.node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster.ddata;VersionVector.merge.$anonfun.time" title="Long">time</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.cluster.ddata;VersionVector.equals" title="(versions: scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long])akka.cluster.ddata.VersionVector">VersionVector</a><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.merge.mergedVersions" title="scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">mergedVersions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="(removedNode: akka.cluster.UniqueAddress)Boolean" id="akka.cluster.ddata;VersionVector.needPruningFrom">needPruningFrom</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.needPruningFrom.removedNode">removedNode</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>.<span title="(key: akka.cluster.UniqueAddress)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.ddata;VersionVector.needPruningFrom.removedNode" title="akka.cluster.UniqueAddress">removedNode</a><span class="delimiter">)</span>

  override def <a title="(removedNode: akka.cluster.UniqueAddress, collapseInto: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.prune">prune</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.prune.removedNode">removedNode</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.prune.collapseInto">collapseInto</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> =
    <a href="#akka.cluster.ddata;VersionVector.equals" title="(versions: scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long])akka.cluster.ddata.VersionVector">copy</a><span class="delimiter">(</span>versions = <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a> <span title="(key: akka.cluster.UniqueAddress)scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">-</span> <a href="#akka.cluster.ddata;VersionVector.prune.removedNode" title="akka.cluster.UniqueAddress">removedNode</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata;VersionVector.+(328a6d964b)" title="(node: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector">+</a> <a href="#akka.cluster.ddata;VersionVector.prune.collapseInto" title="akka.cluster.UniqueAddress">collapseInto</a>

  override def <a title="(removedNode: akka.cluster.UniqueAddress)akka.cluster.ddata.VersionVector" id="akka.cluster.ddata;VersionVector.pruningCleanup">pruningCleanup</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.pruningCleanup.removedNode">removedNode</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <a href="#akka.cluster.ddata;VersionVector.equals" title="akka.cluster.ddata.VersionVector">VersionVector</a> = <a href="#akka.cluster.ddata;VersionVector.equals" title="(versions: scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long])akka.cluster.ddata.VersionVector">copy</a><span class="delimiter">(</span>versions = <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a> <span title="(key: akka.cluster.UniqueAddress)scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">-</span> <a href="#akka.cluster.ddata;VersionVector.pruningCleanup.removedNode" title="akka.cluster.UniqueAddress">removedNode</a><span class="delimiter">)</span>

  override def <a title="()String" id="akka.cluster.ddata;VersionVector.toString">toString</a> = <a href="#akka.cluster.ddata;VersionVector.copy$default$1" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long]">versions</a>.<span title="(f: ((akka.cluster.UniqueAddress, Long)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.TreeMap[akka.cluster.UniqueAddress,Long],String,scala.collection.immutable.Iterable[String]])scala.collection.immutable.Iterable[String]">map</span> <a href="#akka.cluster.ddata;VersionVector.toString.$anonfun.x0$1" title="String" class="delimiter">{</a> case <span class="delimiter">(</span><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata;VersionVector.toString.$anonfun.n">n</a>, <a title="Long" id="akka.cluster.ddata;VersionVector.toString.$anonfun.t">t</a><span class="delimiter">)</span><span class="delimiter">)</span>  <a href="#akka.cluster.ddata;VersionVector.toString.$anonfun.n" title="(self: akka.cluster.UniqueAddress)any2stringadd[akka.cluster.UniqueAddress]">n</a> <span title="(other: String)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster.ddata;VersionVector.toString.$anonfun.t" title="Long">t</a> <span class="delimiter">}</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;VersionVector(&quot;)" class="string">&quot;VersionVector(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
