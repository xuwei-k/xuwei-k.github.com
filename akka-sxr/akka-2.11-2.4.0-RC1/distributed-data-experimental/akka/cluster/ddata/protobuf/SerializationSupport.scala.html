<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>distributed-data-experimental/akka/cluster/ddata/protobuf/SerializationSupport.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2014-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.cluster.ddata.protobuf

import java.io.ByteArrayInputStream
import java.io.ByteArrayOutputStream
import java.util.zip.GZIPInputStream
import java.util.zip.GZIPOutputStream
import scala.annotation.tailrec
import akka.actor.ActorRef
import akka.actor.Address
import akka.actor.ExtendedActorSystem
import akka.cluster.UniqueAddress
import akka.cluster.ddata.protobuf.msg.<span class="delimiter">{</span> ReplicatorMessages â‡’ dm <span class="delimiter">}</span>
import akka.serialization.JSerializer
import akka.serialization.Serialization
import akka.serialization.SerializationExtension
import com.google.protobuf.ByteString
import com.google.protobuf.MessageLite
import akka.serialization.SerializerWithStringManifest

<span class="comment">/**
 * Some useful serialization helper methods.
 */</span>
trait <a title="trait SerializationSupport extends AnyRef" id="akka.cluster.ddata.protobuf;SerializationSupport">SerializationSupport</a> <span title="Unit" class="delimiter">{</span>

  private final val BufferSize = <span class="int">1024</span> <a title="Int(4096)" id="akka.cluster.ddata.protobuf;SerializationSupport.BufferSize">*</a> <span class="int">4</span>

  def <a title="=&gt; akka.actor.ExtendedActorSystem" id="akka.cluster.ddata.protobuf;SerializationSupport.system">system</a>: <a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a>

  @volatile
  private var <a title="akka.serialization.Serialization" id="akka.cluster.ddata.protobuf;SerializationSupport.ser_=">ser</a>: <a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization" title="akka.serialization.Serialization">Serialization</a> = _
  def <a title="=&gt; akka.serialization.Serialization" id="akka.cluster.ddata.protobuf;SerializationSupport.serialization">serialization</a>: <a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization" title="akka.serialization.Serialization">Serialization</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.ser_=" title="=&gt; akka.serialization.Serialization">ser</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#akka.cluster.ddata.protobuf;SerializationSupport.ser_=" title="(x$1: akka.serialization.Serialization)Unit">ser</a> = <a href="../../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.serialization.Serialization">SerializationExtension</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.ser_=" title="=&gt; akka.serialization.Serialization">ser</a>
  <span class="delimiter">}</span>

  @volatile
  private var <a title="String" id="akka.cluster.ddata.protobuf;SerializationSupport.protocol_=">protocol</a>: <span title="String">String</span> = _
  def <a title="=&gt; String" id="akka.cluster.ddata.protobuf;SerializationSupport.addressProtocol">addressProtocol</a>: <span title="String">String</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.protocol_=" title="=&gt; String">protocol</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#akka.cluster.ddata.protobuf;SerializationSupport.protocol_=" title="(x$1: String)Unit">protocol</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.getDefaultAddress" title="=&gt; akka.actor.Address">getDefaultAddress</a>.<a href="../../../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.protocol_=" title="=&gt; String">protocol</a>
  <span class="delimiter">}</span>

  @volatile
  private var <a title="akka.serialization.Serialization.Information" id="akka.cluster.ddata.protobuf;SerializationSupport.transportInfo_=">transportInfo</a>: Serialization.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization;Information" title="akka.serialization.Serialization.Information">Information</a> = _
  def <a title="=&gt; akka.serialization.Serialization.Information" id="akka.cluster.ddata.protobuf;SerializationSupport.transportInformation">transportInformation</a>: Serialization.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization;Information" title="akka.serialization.Serialization.Information">Information</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.transportInfo_=" title="=&gt; akka.serialization.Serialization.Information">transportInfo</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="akka.actor.Address" id="akka.cluster.ddata.protobuf;SerializationSupport.transportInformation.address">address</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.getDefaultAddress" title="=&gt; akka.actor.Address">getDefaultAddress</a>
      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.transportInfo_=" title="(x$1: akka.serialization.Serialization.Information)Unit">transportInfo</a> = <a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization;Information" title="(address: akka.actor.Address, system: akka.actor.ActorSystem)akka.serialization.Serialization.Information">Information</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.transportInformation.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.transportInfo_=" title="=&gt; akka.serialization.Serialization.Information">transportInfo</a>
  <span class="delimiter">}</span>

  def <a title="(msg: com.google.protobuf.MessageLite)Array[Byte]" id="akka.cluster.ddata.protobuf;SerializationSupport.compress">compress</a><span class="delimiter">(</span><a title="com.google.protobuf.MessageLite" id="akka.cluster.ddata.protobuf;SerializationSupport.compress.msg">msg</a>: <span title="com.google.protobuf.MessageLite">MessageLite</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="java.io.ByteArrayOutputStream" id="akka.cluster.ddata.protobuf;SerializationSupport.compress.bos">bos</a> = new <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span title="Int(4096)">BufferSize</span><span class="delimiter">)</span>
    val <a title="java.util.zip.GZIPOutputStream" id="akka.cluster.ddata.protobuf;SerializationSupport.compress.zip">zip</a> = new <span title="java.util.zip.GZIPOutputStream">GZIPOutputStream</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.compress.bos" title="java.io.ByteArrayOutputStream">bos</a><span class="delimiter">)</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.compress.msg" title="com.google.protobuf.MessageLite">msg</a>.<span title="(x$1: java.io.OutputStream)Unit">writeTo</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.compress.zip" title="java.util.zip.GZIPOutputStream">zip</a><span class="delimiter">)</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.compress.zip" title="java.util.zip.GZIPOutputStream">zip</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.compress.bos" title="java.io.ByteArrayOutputStream">bos</a>.<span title="()Array[Byte]">toByteArray</span>
  <span class="delimiter">}</span>

  def <a title="(bytes: Array[Byte])Array[Byte]" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress">decompress</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="java.util.zip.GZIPInputStream" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.in">in</a> = new <span title="java.util.zip.GZIPInputStream">GZIPInputStream</span><span class="delimiter">(</span>new <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="java.io.ByteArrayOutputStream" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.out">out</a> = new <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="Array[Byte]" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.buffer">buffer</a> = new <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(4096)">BufferSize</span><span class="delimiter">)</span>

    @tailrec def <a title="()Unit" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.readChunk">readChunk</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.in" title="java.util.zip.GZIPInputStream">in</a>.<span title="(x$1: Array[Byte])Int">read</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.buffer" title="Array[Byte]">buffer</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(-1)">-</span><span class="int">1</span> â‡’ <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      case <a title="Int" id="akka.cluster.ddata.protobuf;SerializationSupport.decompress.readChunk.n">n</a> â‡’
        <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.out" title="java.io.ByteArrayOutputStream">out</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.buffer" title="Array[Byte]">buffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.readChunk.n" title="Int">n</a><span class="delimiter">)</span>
        <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.readChunk" title="()Unit">readChunk</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.readChunk" title="()Unit">readChunk</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.decompress.out" title="java.io.ByteArrayOutputStream">out</a>.<span title="()Array[Byte]">toByteArray</span>
  <span class="delimiter">}</span>

  def <a title="(address: akka.actor.Address)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder" id="akka.cluster.ddata.protobuf;SerializationSupport.addressToProto">addressToProto</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.address">address</a>: <a href="../../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: dm.Address.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address;Builder" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder">Builder</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.address" title="akka.actor.Address">address</a> match <span class="delimiter">{</span>
    case Address<span class="delimiter">(</span>_, _, Some<span class="delimiter">(</span><a title="String" id="akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.host">host</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Int" id="akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.port">port</a><span class="delimiter">)</span><span class="delimiter">)</span> â‡’
      <a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.type">dm</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.type">Address</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.newBuilder(2701958378)" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder">newBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address;Builder.setHostname" title="(value: String)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder">setHostname</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.host" title="String">host</a><span class="delimiter">)</span>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address;Builder.setPort" title="(value: Int)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder">setPort</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.port" title="Int">port</a><span class="delimiter">)</span>
    case _ â‡’ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Address [&quot;)">Address [$</span><span class="delimiter">{</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressToProto.address" title="akka.actor.Address">address</a><span class="delimiter">}</span><span title="String(&quot;] could not be serialized: host or port missing.&quot;)" class="string">] could not be serialized: host or port missing.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(address: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address)akka.actor.Address" id="akka.cluster.ddata.protobuf;SerializationSupport.addressFromProto">addressFromProto</a><span class="delimiter">(</span><a title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address" id="akka.cluster.ddata.protobuf;SerializationSupport.addressFromProto.address">address</a>: dm.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;Address" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address">Address</a><span class="delimiter">)</span>: <a href="../../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> =
    <a href="../../../../../actor/akka/actor/Address.scala.html#akka.actor.Address.apply(3732a5c510)" title="(protocol: String, system: String, host: String, port: Int)akka.actor.Address">Address</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressProtocol" title="=&gt; String">addressProtocol</a>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.name" title="=&gt; String">name</a>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressFromProto.address" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address">address</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;Address.getHostname" title="()String">getHostname</a>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressFromProto.address" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address">address</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;Address.getPort" title="()Int">getPort</a><span class="delimiter">)</span>

  def <a title="(uniqueAddress: akka.cluster.UniqueAddress)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.Builder" id="akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressToProto">uniqueAddressToProto</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressToProto.uniqueAddress">uniqueAddress</a>: <a href="../../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: dm.UniqueAddress.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress;Builder" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.Builder">Builder</a> =
    <a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.type">dm</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.type">UniqueAddress</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.newBuilder(04a2cc6f17)" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.Builder">newBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress;Builder.setAddress(ea37008dca)" title="(builderForValue: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.Builder">setAddress</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressToProto" title="(address: akka.actor.Address)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address.Builder">addressToProto</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressToProto.uniqueAddress" title="akka.cluster.UniqueAddress">uniqueAddress</a>.<a href="../../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress;Builder.setUid" title="(value: Int)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress.Builder">setUid</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressToProto.uniqueAddress" title="akka.cluster.UniqueAddress">uniqueAddress</a>.<a href="../../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress.uid" title="=&gt; Int">uid</a><span class="delimiter">)</span>

  def <a title="(uniqueAddress: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress)akka.cluster.UniqueAddress" id="akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressFromProto">uniqueAddressFromProto</a><span class="delimiter">(</span><a title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress" id="akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressFromProto.uniqueAddress">uniqueAddress</a>: dm.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;UniqueAddress" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <a href="../../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a> =
    <a href="../../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;UniqueAddress" title="(address: akka.actor.Address, uid: Int)akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.addressFromProto" title="(address: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address)akka.actor.Address">addressFromProto</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressFromProto.uniqueAddress" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress">uniqueAddress</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;UniqueAddress.getAddress" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.Address">getAddress</a><span class="delimiter">)</span>, <a href="#akka.cluster.ddata.protobuf;SerializationSupport.uniqueAddressFromProto.uniqueAddress" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.UniqueAddress">uniqueAddress</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;UniqueAddress.getUid" title="()Int">getUid</a><span class="delimiter">)</span>

  def <a title="(path: String)akka.actor.ActorRef" id="akka.cluster.ddata.protobuf;SerializationSupport.resolveActorRef">resolveActorRef</a><span class="delimiter">(</span><a title="String" id="akka.cluster.ddata.protobuf;SerializationSupport.resolveActorRef.path">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> =
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="../../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefProvider.resolveActorRef(922575794b)" title="(path: String)akka.actor.ActorRef">resolveActorRef</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.resolveActorRef.path" title="String">path</a><span class="delimiter">)</span>

  def <a title="(msg: Any)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto">otherMessageToProto</a><span class="delimiter">(</span><a title="Any" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: dm.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">OtherMessage</a> = <span class="delimiter">{</span>
    def <a title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther">buildOther</a><span class="delimiter">(</span><span class="delimiter">)</span>: dm.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">OtherMessage</a> = <span class="delimiter">{</span>
      val <a title="AnyRef" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.m">m</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.msg" title="Any">msg</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
      val <a title="akka.serialization.Serializer" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.msgSerializer">msgSerializer</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.serialization" title="=&gt; akka.serialization.Serialization">serialization</a>.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization.findSerializerFor" title="(o: AnyRef)akka.serialization.Serializer">findSerializerFor</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.m" title="AnyRef">m</a><span class="delimiter">)</span>
      val <a title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.builder">builder</a> = <a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.type">dm</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.type">OtherMessage</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.newBuilder(b73325b888)" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">newBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>.
        <a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage;Builder.setEnclosedMessage" title="(value: com.google.protobuf.ByteString)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">setEnclosedMessage</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: Array[Byte])com.google.protobuf.ByteString">copyFrom</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.msgSerializer" title="akka.serialization.Serializer">msgSerializer</a>.<a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.toBinary" title="(o: AnyRef)Array[Byte]">toBinary</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.m" title="AnyRef">m</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        .<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage;Builder.setSerializerId" title="(value: Int)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">setSerializerId</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.msgSerializer" title="akka.serialization.Serializer">msgSerializer</a>.<a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.identifier" title="=&gt; Int">identifier</a><span class="delimiter">)</span>

      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.msgSerializer" title="akka.serialization.Serializer">msgSerializer</a> match <span class="delimiter">{</span>
        case <a title="akka.serialization.SerializerWithStringManifest" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.ser2">ser2</a>: <a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;SerializerWithStringManifest" title="akka.serialization.SerializerWithStringManifest">SerializerWithStringManifest</a> â‡’
          val <a title="String" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.manifest">manifest</a> = <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.ser2" title="akka.serialization.SerializerWithStringManifest">ser2</a>.<a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;SerializerWithStringManifest.manifest" title="(o: AnyRef)String">manifest</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.m" title="AnyRef">m</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.manifest" title="String">manifest</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.builder" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">builder</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage;Builder.setMessageManifest" title="(value: com.google.protobuf.ByteString)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">setMessageManifest</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: String)com.google.protobuf.ByteString">copyFromUtf8</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.manifest" title="String">manifest</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case _ â‡’
          if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.msgSerializer" title="akka.serialization.Serializer">msgSerializer</a>.<a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;Serializer.includeManifest" title="=&gt; Boolean">includeManifest</a><span class="delimiter">)</span>
            <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.builder" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">builder</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage;Builder.setMessageManifest" title="(value: com.google.protobuf.ByteString)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">setMessageManifest</a><span class="delimiter">(</span><span title="com.google.protobuf.ByteString.type">ByteString</span>.<span title="(x$1: String)com.google.protobuf.ByteString">copyFromUtf8</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.m" title="AnyRef">m</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther.builder" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.Builder">builder</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage;Builder.build" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">build</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// Serialize actor references with full address information (defaultAddress).</span>
    <span class="comment">// When sending remote messages currentTransportInformation is already set,</span>
    <span class="comment">// but when serializing for digests it must be set here.</span>
    if <span class="delimiter">(</span><a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization.currentTransportInformation" title="=&gt; scala.util.DynamicVariable[akka.serialization.Serialization.Information]">currentTransportInformation</a>.<span title="=&gt; akka.serialization.Serialization.Information">value</span> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span>
      <a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization" title="akka.serialization.Serialization.type">Serialization</a>.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization.Serialization.currentTransportInformation" title="=&gt; scala.util.DynamicVariable[akka.serialization.Serialization.Information]">currentTransportInformation</a>.<span title="(newval: akka.serialization.Serialization.Information)(thunk: =&gt; akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage)akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">withValue</span><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.transportInformation" title="=&gt; akka.serialization.Serialization.Information">transportInformation</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">buildOther</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    else
      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageToProto.buildOther" title="()akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">buildOther</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(bytes: Array[Byte])AnyRef" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromBinary">otherMessageFromBinary</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromBinary.bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> =
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto" title="(other: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage)AnyRef">otherMessageFromProto</a><span class="delimiter">(</span><a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.type">dm</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.type">OtherMessage</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage.parseFrom(f7652af3bc)" title="(data: Array[Byte])akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">parseFrom</a><span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromBinary.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(other: akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage)AnyRef" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto">otherMessageFromProto</a><span class="delimiter">(</span><a title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.other">other</a>: dm.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">OtherMessage</a><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <span class="delimiter">{</span>
    val <a title="String" id="akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.manifest">manifest</a> = if <span class="delimiter">(</span><a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.other" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">other</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage.hasMessageManifest" title="()Boolean">hasMessageManifest</a><span class="delimiter">)</span> <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.other" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">other</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage.getMessageManifest" title="()com.google.protobuf.ByteString">getMessageManifest</a>.<span title="()String">toStringUtf8</span> else <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <a href="#akka.cluster.ddata.protobuf;SerializationSupport.serialization" title="=&gt; akka.serialization.Serialization">serialization</a>.<a href="../../../../../actor/akka/serialization/Serialization.scala.html#akka.serialization;Serialization.deserialize(0d68c6bee1)" title="(bytes: Array[Byte], serializerId: Int, manifest: String)scala.util.Try[AnyRef]">deserialize</a><span class="delimiter">(</span>
      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.other" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">other</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage.getEnclosedMessage" title="()com.google.protobuf.ByteString">getEnclosedMessage</a>.<span title="()Array[Byte]">toByteArray</span>,
      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.other" title="akka.cluster.ddata.protobuf.msg.ReplicatorMessages.OtherMessage">other</a>.<a href="msg/ReplicatorMessages.java.html#akka.cluster.ddata.protobuf.msg.ReplicatorMessages;OtherMessage.getSerializerId" title="()Int">getSerializerId</a>,
      <a href="#akka.cluster.ddata.protobuf;SerializationSupport.otherMessageFromProto.manifest" title="String">manifest</a><span class="delimiter">)</span>.<span title="=&gt; AnyRef">get</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Java API
 */</span>
abstract class <a title="class AbstractSerializationSupport extends akka.serialization.JSerializer with akka.cluster.ddata.protobuf.SerializationSupport" id="akka.cluster.ddata.protobuf;AbstractSerializationSupport">AbstractSerializationSupport</a> extends <a href="../../../../../actor/akka/serialization/Serializer.scala.html#akka.serialization;JSerializer" title="akka.serialization.JSerializer">JSerializer</a> with <a href="#akka.cluster.ddata.protobuf;SerializationSupport" title="akka.cluster.ddata.protobuf.SerializationSupport">SerializationSupport</a>

        </pre>
    </body>
</html>
