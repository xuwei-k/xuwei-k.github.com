<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cluster/akka/cluster/routing/ClusterRouterConfig.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.cluster.routing

import java.util.concurrent.atomic.AtomicInteger

import akka.actor._
import akka.cluster.Cluster
import akka.cluster.<a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
import akka.cluster.Member
import akka.cluster.MemberStatus
import akka.japi.<a href="../../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util" title="akka.japi.Util.type">Util</a>.immutableSeq
import akka.remote.RemoteScope
import akka.routing.ActorRefRoutee
import akka.routing.ActorSelectionRoutee
import akka.routing.Group
import akka.routing.Pool
import akka.routing.Resizer
import akka.routing.Routee
import akka.routing.Router
import akka.routing.RouterActor
import akka.routing.RouterConfig
import akka.routing.RouterPoolActor
import akka.routing.RoutingLogic
import com.typesafe.config.Config
import com.typesafe.config.ConfigFactory

import scala.annotation.tailrec
import scala.collection.immutable

object <a title="akka.cluster.routing.ClusterRouterGroupSettings.type" id="akka.cluster.routing.ClusterRouterGroupSettings.readResolve">ClusterRouterGroupSettings</a> <a href="#akka.cluster.routing.ClusterRouterGroupSettings.readResolve" title="akka.cluster.routing.ClusterRouterGroupSettings.type" class="delimiter">{</a>
  def <a title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterGroupSettings" id="akka.cluster.routing.ClusterRouterGroupSettings.fromConfig">fromConfig</a><span class="delimiter">(</span><a title="com.typesafe.config.Config" id="akka.cluster.routing.ClusterRouterGroupSettings.fromConfig.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <a href="#akka.cluster.routing;ClusterRouterGroupSettings.equals" title="akka.cluster.routing.ClusterRouterGroupSettings">ClusterRouterGroupSettings</a> =
    <a href="#akka.cluster.routing;ClusterRouterGroupSettings.equals" title="(totalInstances: Int, routeesPaths: scala.collection.immutable.Seq[String], allowLocalRoutees: Boolean, useRole: Option[String])akka.cluster.routing.ClusterRouterGroupSettings">ClusterRouterGroupSettings</a><span class="delimiter">(</span>
      totalInstances = <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances" title="(config: com.typesafe.config.Config)Int">getMaxTotalNrOfInstances</a><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>,
      routeesPaths = <a href="../../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[String])scala.collection.immutable.Seq[String]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)java.util.List[String]">getStringList</span><span class="delimiter">(</span><span title="String(&quot;routees.paths&quot;)" class="string">&quot;routees.paths&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>,
      allowLocalRoutees = <a href="#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;cluster.allow-local-routees&quot;)" class="string">&quot;cluster.allow-local-routees&quot;</span><span class="delimiter">)</span>,
      useRole = <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption" title="(role: String)Option[String]">useRoleOption</a><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterGroupSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;cluster.use-role&quot;)" class="string">&quot;cluster.use-role&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * `totalInstances` of cluster router must be &gt; 0
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="(totalInstances: Int, routeesPaths: scala.collection.immutable.Seq[String], allowLocalRoutees: Boolean, useRole: Option[String])akka.cluster.routing.ClusterRouterGroupSettings" id="akka.cluster.routing;ClusterRouterGroupSettings.equals">ClusterRouterGroupSettings</a><span title="Product" class="delimiter">(</span>
  <a title="Int" id="akka.cluster.routing;ClusterRouterGroupSettings.copy$default$1">totalInstances</a>: <span title="Int">Int</span>,
  <a title="scala.collection.immutable.Seq[String]" id="akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2">routeesPaths</a>: immutable.<span title="scala.collection.immutable.Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
  <a title="Boolean" id="akka.cluster.routing;ClusterRouterGroupSettings.copy$default$3">allowLocalRoutees</a>: <span title="Boolean">Boolean</span>,
  <a title="Option[String]" id="akka.cluster.routing;ClusterRouterGroupSettings.copy$default$4">useRole</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#akka.cluster.routing;ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase">ClusterRouterSettingsBase</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Java API
   */</span>
  def this<span class="delimiter">(</span><a title="Int" id="akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).totalInstances">totalInstances</a>: <span title="Int">Int</span>, <a title="Iterable[String]" id="akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).routeesPaths">routeesPaths</a>: java.lang.<span title="Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Boolean" id="akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).allowLocalRoutees">allowLocalRoutees</a>: <span title="Boolean">Boolean</span>, <a title="String" id="akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).useRole">useRole</a>: <span title="String">String</span><span class="delimiter">)</span> =
    this<span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).totalInstances" title="Int">totalInstances</a>, <a href="../../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.Util.immutableSeq(42d3e3f9ec)" title="(iterable: Iterable[String])scala.collection.immutable.Seq[String]">immutableSeq</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).routeesPaths" title="Iterable[String]">routeesPaths</a><span class="delimiter">)</span>, <a href="#akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).allowLocalRoutees" title="Boolean">allowLocalRoutees</a>, <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption" title="(role: String)Option[String]">useRoleOption</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.<init>(e4b9246f36).useRole" title="String">useRole</a><span class="delimiter">)</span><span class="delimiter">)</span>

  if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$1" title="=&gt; Int">totalInstances</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;totalInstances of cluster router must be &gt; 0&quot;)" class="string">&quot;totalInstances of cluster router must be &gt; 0&quot;</span><span class="delimiter">)</span>
  if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="=&gt; String">head</span> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;routeesPaths must be defined&quot;)" class="string">&quot;routeesPaths must be defined&quot;</span><span class="delimiter">)</span>

  <a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="(f: String =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="String" id="akka.cluster.routing;ClusterRouterGroupSettings.<local ClusterRouterGroupSettings>.$anonfun.p">p</a> ⇒ <a href="#akka.cluster.routing;ClusterRouterGroupSettings.<local ClusterRouterGroupSettings>.$anonfun.p" title="String">p</a> match <span class="delimiter">{</span>
    case <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor.RelativeActorPath.unapply" title="(addr: String)Option[scala.collection.immutable.Seq[String]]">RelativeActorPath</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[String]" id="akka.cluster.routing;ClusterRouterGroupSettings.<local ClusterRouterGroupSettings>.$anonfun.elements">elements</a><span class="delimiter">)</span> ⇒ <span class="comment">// good</span>
    case _ ⇒
      throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;routeesPaths [&quot;)">routeesPaths [$</span><a href="#akka.cluster.routing;ClusterRouterGroupSettings.<local ClusterRouterGroupSettings>.$anonfun.p" title="String">p</a><span title="String(&quot;] is not a valid actor path without address information&quot;)" class="string">] is not a valid actor path without address information&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

object <a title="akka.cluster.routing.ClusterRouterPoolSettings.type" id="akka.cluster.routing.ClusterRouterPoolSettings.readResolve">ClusterRouterPoolSettings</a> <a href="#akka.cluster.routing.ClusterRouterPoolSettings.readResolve" title="akka.cluster.routing.ClusterRouterPoolSettings.type" class="delimiter">{</a>
  def <a title="(config: com.typesafe.config.Config)akka.cluster.routing.ClusterRouterPoolSettings" id="akka.cluster.routing.ClusterRouterPoolSettings.fromConfig">fromConfig</a><span class="delimiter">(</span><a title="com.typesafe.config.Config" id="akka.cluster.routing.ClusterRouterPoolSettings.fromConfig.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <a href="#akka.cluster.routing;ClusterRouterPoolSettings.equals" title="akka.cluster.routing.ClusterRouterPoolSettings">ClusterRouterPoolSettings</a> =
    <a href="#akka.cluster.routing;ClusterRouterPoolSettings.equals" title="(totalInstances: Int, maxInstancesPerNode: Int, allowLocalRoutees: Boolean, useRole: Option[String])akka.cluster.routing.ClusterRouterPoolSettings">ClusterRouterPoolSettings</a><span class="delimiter">(</span>
      totalInstances = <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances" title="(config: com.typesafe.config.Config)Int">getMaxTotalNrOfInstances</a><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig.config" title="com.typesafe.config.Config">config</a><span class="delimiter">)</span>,
      maxInstancesPerNode = <a href="#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;cluster.max-nr-of-instances-per-node&quot;)" class="string">&quot;cluster.max-nr-of-instances-per-node&quot;</span><span class="delimiter">)</span>,
      allowLocalRoutees = <a href="#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;cluster.allow-local-routees&quot;)" class="string">&quot;cluster.allow-local-routees&quot;</span><span class="delimiter">)</span>,
      useRole = <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption" title="(role: String)Option[String]">useRoleOption</a><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterPoolSettings.fromConfig.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;cluster.use-role&quot;)" class="string">&quot;cluster.use-role&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * `totalInstances` of cluster router must be &gt; 0
 * `maxInstancesPerNode` of cluster router must be &gt; 0
 * `maxInstancesPerNode` of cluster router must be 1 when routeesPath is defined
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="(totalInstances: Int, maxInstancesPerNode: Int, allowLocalRoutees: Boolean, useRole: Option[String])akka.cluster.routing.ClusterRouterPoolSettings" id="akka.cluster.routing;ClusterRouterPoolSettings.equals">ClusterRouterPoolSettings</a><span title="Product" class="delimiter">(</span>
  <a title="Int" id="akka.cluster.routing;ClusterRouterPoolSettings.copy$default$1">totalInstances</a>: <span title="Int">Int</span>,
  <a title="Int" id="akka.cluster.routing;ClusterRouterPoolSettings.copy$default$2">maxInstancesPerNode</a>: <span title="Int">Int</span>,
  <a title="Boolean" id="akka.cluster.routing;ClusterRouterPoolSettings.copy$default$3">allowLocalRoutees</a>: <span title="Boolean">Boolean</span>,
  <a title="Option[String]" id="akka.cluster.routing;ClusterRouterPoolSettings.copy$default$4">useRole</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#akka.cluster.routing;ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase">ClusterRouterSettingsBase</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Java API
   */</span>
  def this<span class="delimiter">(</span><a title="Int" id="akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).totalInstances">totalInstances</a>: <span title="Int">Int</span>, <a title="Int" id="akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).maxInstancesPerNode">maxInstancesPerNode</a>: <span title="Int">Int</span>, <a title="Boolean" id="akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).allowLocalRoutees">allowLocalRoutees</a>: <span title="Boolean">Boolean</span>, <a title="String" id="akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).useRole">useRole</a>: <span title="String">String</span><span class="delimiter">)</span> =
    this<span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).totalInstances" title="Int">totalInstances</a>, <a href="#akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).maxInstancesPerNode" title="Int">maxInstancesPerNode</a>, <a href="#akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).allowLocalRoutees" title="Boolean">allowLocalRoutees</a>, <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type">ClusterRouterSettingsBase</a>.<a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption" title="(role: String)Option[String]">useRoleOption</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolSettings.<init>(54092a95c0).useRole" title="String">useRole</a><span class="delimiter">)</span><span class="delimiter">)</span>

  if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$2" title="=&gt; Int">maxInstancesPerNode</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;maxInstancesPerNode of cluster pool router must be &gt; 0&quot;)" class="string">&quot;maxInstancesPerNode of cluster pool router must be &gt; 0&quot;</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> object <a title="akka.cluster.routing.ClusterRouterSettingsBase.type" id="akka.cluster.routing.ClusterRouterSettingsBase">ClusterRouterSettingsBase</a> <a href="#akka.cluster.routing.ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase.type" class="delimiter">{</a>
  def <a title="(role: String)Option[String]" id="akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption">useRoleOption</a><span class="delimiter">(</span><a title="String" id="akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption.role" title="String">role</a> match <span class="delimiter">{</span>
    case null | <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> ⇒ <span title="None.type">None</span>
    case _         ⇒ <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.cluster.routing.ClusterRouterSettingsBase.useRoleOption.role" title="String">role</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * For backwards compatibility reasons, nr-of-instances
   * has the same purpose as max-total-nr-of-instances for cluster
   * aware routers and nr-of-instances (if defined by user) takes
   * precedence over max-total-nr-of-instances.
   */</span>
  def <a title="(config: com.typesafe.config.Config)Int" id="akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances">getMaxTotalNrOfInstances</a><span class="delimiter">(</span><a title="com.typesafe.config.Config" id="akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances.config">config</a>: <span title="com.typesafe.config.Config">Config</span><span class="delimiter">)</span>: <span title="Int">Int</span> =
    <a href="#akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;nr-of-instances&quot;)" class="string">&quot;nr-of-instances&quot;</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(1)" class="int">1</span> | <span title="Int(0)" class="int">0</span> ⇒ <a href="#akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances.config" title="com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;cluster.max-nr-of-instances-per-node&quot;)" class="string">&quot;cluster.max-nr-of-instances-per-node&quot;</span><span class="delimiter">)</span>
      case <a title="Int" id="akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances.other">other</a> ⇒ <a href="#akka.cluster.routing.ClusterRouterSettingsBase.getMaxTotalNrOfInstances.other" title="Int">other</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> trait <a title="trait ClusterRouterSettingsBase extends AnyRef" id="akka.cluster.routing;ClusterRouterSettingsBase">ClusterRouterSettingsBase</a> <span title="Unit" class="delimiter">{</span>
  def <a title="=&gt; Int" id="akka.cluster.routing;ClusterRouterSettingsBase.totalInstances">totalInstances</a>: <span title="Int">Int</span>
  def <a title="=&gt; Boolean" id="akka.cluster.routing;ClusterRouterSettingsBase.allowLocalRoutees">allowLocalRoutees</a>: <span title="Boolean">Boolean</span>
  def <a title="=&gt; Option[String]" id="akka.cluster.routing;ClusterRouterSettingsBase.useRole">useRole</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterSettingsBase.useRole" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterSettingsBase.useRole" title="=&gt; Option[String]">useRole</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">get</span>.<span title="=&gt; Boolean">nonEmpty</span>, <span title="String(&quot;useRole must be either None or non-empty Some wrapped role&quot;)" class="string">&quot;useRole must be either None or non-empty Some wrapped role&quot;</span><span class="delimiter">)</span>
  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterSettingsBase.totalInstances" title="=&gt; Int">totalInstances</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;totalInstances of cluster router must be &gt; 0&quot;)" class="string">&quot;totalInstances of cluster router must be &gt; 0&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * [[akka.routing.RouterConfig]] implementation for deployment on cluster nodes.
 * Delegates other duties to the local [[akka.routing.RouterConfig]],
 * which makes it possible to mix this with the built-in routers such as
 * [[akka.routing.RoundRobinGroup]] or custom routers.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="class ClusterRouterGroup extends AnyRef with akka.routing.Group with akka.cluster.routing.ClusterRouterConfigBase with Product with Serializable" id="akka.cluster.routing.ClusterRouterGroup.readResolve">ClusterRouterGroup</a><span title="Product" class="delimiter">(</span><a title="akka.routing.Group" id="akka.cluster.routing;ClusterRouterGroup.local">local</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a>, <a title="akka.cluster.routing.ClusterRouterGroupSettings" id="akka.cluster.routing;ClusterRouterGroup.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterGroupSettings.equals" title="akka.cluster.routing.ClusterRouterGroupSettings">ClusterRouterGroupSettings</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a> with <a href="#akka.cluster.routing;ClusterRouterConfigBase" title="akka.cluster.routing.ClusterRouterConfigBase">ClusterRouterConfigBase</a> <span class="delimiter">{</span>

  override def <a title="(system: akka.actor.ActorSystem)scala.collection.immutable.Iterable[String]" id="akka.cluster.routing;ClusterRouterGroup.paths(fec8ccead8)">paths</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.cluster.routing;ClusterRouterGroup.paths(fec8ccead8).system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Iterable[String]">Iterable</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$3" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.paths(fec8ccead8).system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>
      <span class="delimiter">}</span> else <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$3" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>
    <span class="delimiter">}</span> else <span title="scala.collection.immutable.Nil.type">Nil</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  override private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="()akka.routing.RouterActor" id="akka.cluster.routing;ClusterRouterGroup.createRouterActor">createRouterActor</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor" title="akka.routing.RouterActor">RouterActor</a> = new <a href="#akka.cluster.routing;ClusterRouterGroupActor" title="akka.cluster.routing.ClusterRouterGroupActor">ClusterRouterGroupActor</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a><span class="delimiter">)</span>

  override def <a title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterGroup.withFallback">withFallback</a><span class="delimiter">(</span><a title="akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterGroup.withFallback.other">other</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a> = <a href="#akka.cluster.routing;ClusterRouterGroup.withFallback.other" title="akka.routing.RouterConfig">other</a> match <span class="delimiter">{</span>
    case ClusterRouterGroup<span class="delimiter">(</span>_: <a href="#akka.cluster.routing.ClusterRouterGroup.readResolve" title="akka.cluster.routing.ClusterRouterGroup">ClusterRouterGroup</a>, _<span class="delimiter">)</span> ⇒ throw new <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span>
      <span title="String(&quot;ClusterRouterGroup is not allowed to wrap a ClusterRouterGroup&quot;)" class="string">&quot;ClusterRouterGroup is not allowed to wrap a ClusterRouterGroup&quot;</span><span class="delimiter">)</span>
    case ClusterRouterGroup<span class="delimiter">(</span><a title="akka.routing.Group" id="akka.cluster.routing;ClusterRouterGroup.withFallback.local">local</a>, _<span class="delimiter">)</span> ⇒
      <a href="#akka.cluster.routing.ClusterRouterGroup.readResolve" title="(local: akka.routing.Group, settings: akka.cluster.routing.ClusterRouterGroupSettings)akka.cluster.routing.ClusterRouterGroup">copy</a><span class="delimiter">(</span>local = this.<a href="#akka.cluster.routing;ClusterRouterGroup.local" title="=&gt; akka.routing.Group">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.withFallback" title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig">withFallback</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.withFallback.local" title="akka.routing.Group">local</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.routing.Group" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a><span class="delimiter">]</span><span class="delimiter">)</span>
    case _ ⇒
      <a href="#akka.cluster.routing.ClusterRouterGroup.readResolve" title="(local: akka.routing.Group, settings: akka.cluster.routing.ClusterRouterGroupSettings)akka.cluster.routing.ClusterRouterGroup">copy</a><span class="delimiter">(</span>local = this.<a href="#akka.cluster.routing;ClusterRouterGroup.local" title="=&gt; akka.routing.Group">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.withFallback" title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig">withFallback</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroup.withFallback.other" title="akka.routing.RouterConfig">other</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.routing.Group" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * [[akka.routing.RouterConfig]] implementation for deployment on cluster nodes.
 * Delegates other duties to the local [[akka.routing.RouterConfig]],
 * which makes it possible to mix this with the built-in routers such as
 * [[akka.routing.RoundRobinGroup]] or custom routers.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
final case class <a title="class ClusterRouterPool extends AnyRef with akka.routing.Pool with akka.cluster.routing.ClusterRouterConfigBase with Product with Serializable" id="akka.cluster.routing.ClusterRouterPool.readResolve">ClusterRouterPool</a><span title="Product" class="delimiter">(</span><a title="akka.routing.Pool" id="akka.cluster.routing;ClusterRouterPool.local">local</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a>, <a title="akka.cluster.routing.ClusterRouterPoolSettings" id="akka.cluster.routing;ClusterRouterPool.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterPoolSettings.equals" title="akka.cluster.routing.ClusterRouterPoolSettings">ClusterRouterPoolSettings</a><span class="delimiter">)</span> extends <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a> with <a href="#akka.cluster.routing;ClusterRouterConfigBase" title="akka.cluster.routing.ClusterRouterConfigBase">ClusterRouterConfigBase</a> <span class="delimiter">{</span>

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.resizer" title="=&gt; Option[akka.routing.Resizer]">resizer</a>.<span title="=&gt; Boolean">isEmpty</span>, <span title="String(&quot;Resizer can\'t be used together with cluster router&quot;)" class="string">&quot;Resizer can't be used together with cluster router&quot;</span><span class="delimiter">)</span>

  @transient private val <a title="java.util.concurrent.atomic.AtomicInteger" id="akka.cluster.routing;ClusterRouterPool.childNameCounter">childNameCounter</a> = new <span title="java.util.concurrent.atomic.AtomicInteger">AtomicInteger</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  override private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.routing.Routee" id="akka.cluster.routing;ClusterRouterPool.newRoutee">newRoutee</a><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.cluster.routing;ClusterRouterPool.newRoutee.routeeProps">routeeProps</a>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <a title="akka.actor.ActorContext" id="akka.cluster.routing;ClusterRouterPool.newRoutee.context">context</a>: <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext" title="akka.actor.ActorContext">ActorContext</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a> = <span class="delimiter">{</span>
    val name = <span title="String(&quot;c&quot;)" class="string">&quot;c&quot;</span> <a title="String" id="akka.cluster.routing;ClusterRouterPool.newRoutee.name">+</a> <a href="#akka.cluster.routing;ClusterRouterPool.childNameCounter" title="=&gt; java.util.concurrent.atomic.AtomicInteger">childNameCounter</a>.<span title="()Int">incrementAndGet</span>
    val <a title="akka.actor.ActorRef" id="akka.cluster.routing;ClusterRouterPool.newRoutee.ref">ref</a> = <a href="#akka.cluster.routing;ClusterRouterPool.newRoutee.context" title="akka.actor.ActorContext">context</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorCell" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">]</span>.<a href="../../../../actor/akka/actor/dungeon/Children.scala.html#akka.actor.dungeon;Children.attachChild(f2c4c88db4)" title="(props: akka.actor.Props, name: String, systemService: Boolean)akka.actor.ActorRef">attachChild</a><span class="delimiter">(</span>
      <a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.enrichWithPoolDispatcher" title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.actor.Props">enrichWithPoolDispatcher</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.newRoutee.routeeProps" title="akka.actor.Props">routeeProps</a>, <a href="#akka.cluster.routing;ClusterRouterPool.newRoutee.context" title="akka.actor.ActorContext">context</a><span class="delimiter">)</span>, <a href="#akka.cluster.routing;ClusterRouterPool.newRoutee.name" title="String">name</a>, systemService = false<span class="delimiter">)</span>
    <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;ActorRefRoutee" title="(ref: akka.actor.ActorRef)akka.routing.ActorRefRoutee">ActorRefRoutee</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.newRoutee.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Initial number of routee instances
   */</span>
  override def <a title="(sys: akka.actor.ActorSystem)Int" id="akka.cluster.routing;ClusterRouterPool.nrOfInstances(390f5afb1b)">nrOfInstances</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.cluster.routing;ClusterRouterPool.nrOfInstances(390f5afb1b).sys">sys</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$3" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.nrOfInstances(390f5afb1b).sys" title="akka.actor.ActorSystem">sys</a><span class="delimiter">)</span>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; String">get</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$2" title="=&gt; Int">maxInstancesPerNode</a>
      <span class="delimiter">}</span> else <span title="Int(0)" class="int">0</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$3" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$4" title="=&gt; Option[String]">useRole</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$2" title="=&gt; Int">maxInstancesPerNode</a>
    <span class="delimiter">}</span> else <span title="Int(0)" class="int">0</span>

  override def <a title="=&gt; Option[akka.routing.Resizer]" id="akka.cluster.routing;ClusterRouterPool.resizer">resizer</a>: <span title="Option[akka.routing.Resizer]">Option</span><span class="delimiter">[</span>Resizer<span class="delimiter">]</span> = <a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.resizer" title="=&gt; Option[akka.routing.Resizer]">resizer</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  override private<span class="delimiter">[</span>akka<span class="delimiter">]</span> def <a title="()akka.routing.RouterActor" id="akka.cluster.routing;ClusterRouterPool.createRouterActor">createRouterActor</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor" title="akka.routing.RouterActor">RouterActor</a> = new <a href="#akka.cluster.routing;ClusterRouterPoolActor" title="akka.cluster.routing.ClusterRouterPoolActor">ClusterRouterPoolActor</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.supervisorStrategy" title="=&gt; akka.actor.SupervisorStrategy">supervisorStrategy</a>, <a href="#akka.cluster.routing;ClusterRouterPool.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a><span class="delimiter">)</span>

  override def <a title="=&gt; akka.actor.SupervisorStrategy" id="akka.cluster.routing;ClusterRouterPool.supervisorStrategy">supervisorStrategy</a>: <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;SupervisorStrategy" title="akka.actor.SupervisorStrategy">SupervisorStrategy</a> = <a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.supervisorStrategy" title="=&gt; akka.actor.SupervisorStrategy">supervisorStrategy</a>

  override def <a title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterPool.withFallback">withFallback</a><span class="delimiter">(</span><a title="akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterPool.withFallback.other">other</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a> = <a href="#akka.cluster.routing;ClusterRouterPool.withFallback.other" title="akka.routing.RouterConfig">other</a> match <span class="delimiter">{</span>
    case ClusterRouterPool<span class="delimiter">(</span>_: <a href="#akka.cluster.routing.ClusterRouterPool.readResolve" title="akka.cluster.routing.ClusterRouterPool">ClusterRouterPool</a>, _<span class="delimiter">)</span> ⇒
      throw new <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;ClusterRouterPool is not allowed to wrap a ClusterRouterPool&quot;)" class="string">&quot;ClusterRouterPool is not allowed to wrap a ClusterRouterPool&quot;</span><span class="delimiter">)</span>
    case ClusterRouterPool<span class="delimiter">(</span><a title="akka.routing.Pool" id="akka.cluster.routing;ClusterRouterPool.withFallback.otherLocal">otherLocal</a>, _<span class="delimiter">)</span> ⇒
      <a href="#akka.cluster.routing.ClusterRouterPool.readResolve" title="(local: akka.routing.Pool, settings: akka.cluster.routing.ClusterRouterPoolSettings)akka.cluster.routing.ClusterRouterPool">copy</a><span class="delimiter">(</span>local = this.<a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.withFallback" title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig">withFallback</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.withFallback.otherLocal" title="akka.routing.Pool">otherLocal</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.routing.Pool" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a><span class="delimiter">]</span><span class="delimiter">)</span>
    case _ ⇒
      <a href="#akka.cluster.routing.ClusterRouterPool.readResolve" title="(local: akka.routing.Pool, settings: akka.cluster.routing.ClusterRouterPoolSettings)akka.cluster.routing.ClusterRouterPool">copy</a><span class="delimiter">(</span>local = this.<a href="#akka.cluster.routing;ClusterRouterPool.local" title="=&gt; akka.routing.Pool">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.withFallback" title="(other: akka.routing.RouterConfig)akka.routing.RouterConfig">withFallback</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPool.withFallback.other" title="akka.routing.RouterConfig">other</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.routing.Pool" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> trait <a title="trait ClusterRouterConfigBase extends AnyRef with akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterConfigBase">ClusterRouterConfigBase</a> extends <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a> <span class="delimiter">{</span>
  def <a title="=&gt; akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterConfigBase.local">local</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a>
  def <a title="=&gt; akka.cluster.routing.ClusterRouterSettingsBase" id="akka.cluster.routing;ClusterRouterConfigBase.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase">ClusterRouterSettingsBase</a>
  override def <a title="(system: akka.actor.ActorSystem)akka.routing.Router" id="akka.cluster.routing;ClusterRouterConfigBase.createRouter">createRouter</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.cluster.routing;ClusterRouterConfigBase.createRouter.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router" title="akka.routing.Router">Router</a> = <a href="#akka.cluster.routing;ClusterRouterConfigBase.local" title="=&gt; akka.routing.RouterConfig">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.createRouter" title="(system: akka.actor.ActorSystem)akka.routing.Router">createRouter</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterConfigBase.createRouter.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  override def <a title="=&gt; String" id="akka.cluster.routing;ClusterRouterConfigBase.routerDispatcher">routerDispatcher</a>: <span title="String">String</span> = <a href="#akka.cluster.routing;ClusterRouterConfigBase.local" title="=&gt; akka.routing.RouterConfig">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.routerDispatcher" title="=&gt; String">routerDispatcher</a>
  override def <a title="=&gt; Boolean" id="akka.cluster.routing;ClusterRouterConfigBase.stopRouterWhenAllRouteesRemoved">stopRouterWhenAllRouteesRemoved</a>: <span title="Boolean">Boolean</span> = false
  override def <a title="(routingLogic: akka.routing.RoutingLogic)Option[akka.actor.Props]" id="akka.cluster.routing;ClusterRouterConfigBase.routingLogicController">routingLogicController</a><span class="delimiter">(</span><a title="akka.routing.RoutingLogic" id="akka.cluster.routing;ClusterRouterConfigBase.routingLogicController.routingLogic">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a><span class="delimiter">)</span>: <span title="Option[akka.actor.Props]">Option</span><span class="delimiter">[</span>Props<span class="delimiter">]</span> =
    <a href="#akka.cluster.routing;ClusterRouterConfigBase.local" title="=&gt; akka.routing.RouterConfig">local</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.routingLogicController" title="(routingLogic: akka.routing.RoutingLogic)Option[akka.actor.Props]">routingLogicController</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterConfigBase.routingLogicController.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a><span class="delimiter">)</span>

  <span class="comment">// Intercept ClusterDomainEvent and route them to the ClusterRouterActor</span>
  override def <a title="(msg: Any)Boolean" id="akka.cluster.routing;ClusterRouterConfigBase.isManagementMessage">isManagementMessage</a><span class="delimiter">(</span><a title="Any" id="akka.cluster.routing;ClusterRouterConfigBase.isManagementMessage.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterConfigBase.isManagementMessage.msg" title="Any">msg</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a><span class="delimiter">]</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterConfigBase.isManagementMessage.msg" title="Any">msg</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">||</span> super.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;RouterConfig.isManagementMessage" title="(msg: Any)Boolean">isManagementMessage</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterConfigBase.isManagementMessage.msg" title="Any">msg</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class ClusterRouterPoolActor extends akka.routing.RouterPoolActor with akka.cluster.routing.ClusterRouterActor" id="akka.cluster.routing;ClusterRouterPoolActor">ClusterRouterPoolActor</a><a href="#akka.cluster.routing;ClusterRouterPoolActor" title="akka.cluster.routing.ClusterRouterPoolActor" class="delimiter">(</a>
  <a title="akka.actor.SupervisorStrategy" id="akka.cluster.routing;ClusterRouterPoolActor.supervisorStrategy">supervisorStrategy</a>: <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;SupervisorStrategy" title="akka.actor.SupervisorStrategy">SupervisorStrategy</a>, val <a title="akka.cluster.routing.ClusterRouterPoolSettings" id="akka.cluster.routing;ClusterRouterPoolActor.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterPoolSettings.equals" title="akka.cluster.routing.ClusterRouterPoolSettings">ClusterRouterPoolSettings</a><span class="delimiter">)</span>
  extends <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterPoolActor" title="akka.routing.RouterPoolActor">RouterPoolActor</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.supervisorStrategy" title="akka.actor.SupervisorStrategy">supervisorStrategy</a><span class="delimiter">)</span> with <a href="#akka.cluster.routing;ClusterRouterActor" title="akka.cluster.routing.ClusterRouterActor">ClusterRouterActor</a> <span class="delimiter">{</span>

  override def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster.routing;ClusterRouterPoolActor.receive">receive</a> = <a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive" title="=&gt; ClusterRouterPoolActor.this.Receive">clusterReceive</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> super.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterPoolActor.receive" title="=&gt; PartialFunction[Any,Unit]">receive</a>

  <span class="comment">/**
   * Adds routees based on totalInstances and maxInstancesPerNode settings
   */</span>
  override def <a title="()Unit" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    @tailrec
    def <a title="()Unit" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget" title="=&gt; Option[akka.actor.Address]">selectDeploymentTarget</a> match <span class="delimiter">{</span>
      case <span title="None.type">None</span> ⇒ <span class="comment">// done</span>
      case Some<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.target">target</a><span class="delimiter">)</span> ⇒
        val <a title="akka.actor.Props" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.routeeProps">routeeProps</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.routeeProps" title="=&gt; akka.actor.Props">routeeProps</a>
        val <a title="akka.actor.Deploy" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy">deploy</a> = <a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.apply$default$1" title="String" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy.x$11">Deploy</a><span class="delimiter">(</span>config = <span title="com.typesafe.config.ConfigFactory.type">ConfigFactory</span>.<span title="()com.typesafe.config.Config">empty</span><a title="com.typesafe.config.Config" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy.x$6" class="delimiter">(</a><span class="delimiter">)</span>, routerConfig = <a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.routeeProps" title="akka.actor.Props">routeeProps</a>.<a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.routerConfig" title="akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy.x$7">routerConfig</a>,
          scope = <a href="../../../../remote/akka/remote/RemoteDeployer.scala.html#akka.remote;RemoteScope" title="(node: akka.actor.Address)akka.remote.RemoteScope">RemoteScope</a><a title="akka.remote.RemoteScope" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy.x$8" class="delimiter">(</a><a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.target" title="akka.actor.Address">target</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="akka.routing.Routee" id="akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.routee">routee</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterPoolActor.pool" title="=&gt; akka.routing.Pool">pool</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool.newRoutee" title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.routing.Routee">newRoutee</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.routeeProps" title="akka.actor.Props">routeeProps</a>.<a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.deploy" title="akka.actor.Deploy">deploy</a><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a><span class="delimiter">)</span>
        <span class="comment">// must register each one, since registered routees are used in selectDeploymentTarget</span>
        <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.addRoutee" title="(routee: akka.routing.Routee)Unit">addRoutee</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span>

        <span class="comment">// recursion until all created</span>
        <a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees" title="()Unit">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.cluster.routing;ClusterRouterPoolActor.addRoutees.doAddRoutees" title="()Unit">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; Option[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget">selectDeploymentTarget</a>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentRoutees">currentRoutees</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>
    val <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentNodes">currentNodes</a> = <a href="#akka.cluster.routing;ClusterRouterActor.availableNodes" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">availableNodes</a>
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">currentNodes</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">currentRoutees</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.cluster.routing;ClusterRouterPoolActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$1" title="=&gt; Int">totalInstances</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      <span class="comment">// find the node with least routees</span>
      val <a title="Map[akka.actor.Address,Int]" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode">numberOfRouteesPerNode</a>: <span title="Map[akka.actor.Address,Int]">Map</span><span class="delimiter">[</span>Address, Int<span class="delimiter">]</span> =
        <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">currentRoutees</a>.<span title="(z: scala.collection.immutable.Map[akka.actor.Address,Int])(op: (scala.collection.immutable.Map[akka.actor.Address,Int], akka.routing.Routee) =&gt; scala.collection.immutable.Map[akka.actor.Address,Int])scala.collection.immutable.Map[akka.actor.Address,Int]">foldLeft</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.currentNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">currentNodes</a>.<span title="(f: akka.actor.Address =&gt; (akka.actor.Address, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.actor.Address],(akka.actor.Address, Int),scala.collection.immutable.Set[(akka.actor.Address, Int)]])scala.collection.immutable.Set[(akka.actor.Address, Int)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,(akka.actor.Address, Int),scala.collection.immutable.Set[(akka.actor.Address, Int)]]" class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.x$1" title="(self: akka.actor.Address)ArrowAssoc[akka.actor.Address]">_</a> <span title="(y: Int)(akka.actor.Address, Int)">-&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(akka.actor.Address, Int),(akka.actor.Address, Int)])scala.collection.immutable.Map[akka.actor.Address,Int]">toMap</span>.<span title="(d: Int)scala.collection.immutable.Map[akka.actor.Address,Int]">withDefaultValue</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.collection.immutable.Map[akka.actor.Address,Int]" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.acc">acc</a>, <a title="akka.routing.Routee" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.x">x</a><span class="delimiter">)</span> ⇒
          val <a title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.address">address</a> = <a href="#akka.cluster.routing;ClusterRouterActor.fullAddress" title="(routee: akka.routing.Routee)akka.actor.Address">fullAddress</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.x" title="akka.routing.Routee">x</a><span class="delimiter">)</span>
          <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.acc" title="scala.collection.immutable.Map[akka.actor.Address,Int]">acc</a> <span title="(kv: (akka.actor.Address, Int))scala.collection.immutable.Map[akka.actor.Address,Int]">+</span> <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.address" title="(self: akka.actor.Address)ArrowAssoc[akka.actor.Address]">address</a> <span title="(y: Int)(akka.actor.Address, Int)">-&gt;</span> <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.acc" title="(key: akka.actor.Address)Int">acc</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode.$anonfun.address" title="akka.actor.Address">address</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      val <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.address" title="(akka.actor.Address, Int)" class="delimiter">(</a><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.x$3" title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.address">address</a>, <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.x$3" title="Int" id="akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.count">count</a><span class="delimiter">)</span> = <a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.numberOfRouteesPerNode" title="Map[akka.actor.Address,Int]">numberOfRouteesPerNode</a>.<span title="(f: ((akka.actor.Address, Int)) =&gt; Int)(implicit cmp: Ordering[Int])(akka.actor.Address, Int)">minBy</span><span title="scala.math.Ordering.Int.type" class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.x$3.$anonfun.x$2" title="(akka.actor.Address, Int)">_</a>.<span title="=&gt; Int">_2</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.count" title="Int">count</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.cluster.routing;ClusterRouterPoolActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterPoolSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterPoolSettings.copy$default$2" title="=&gt; Int">maxInstancesPerNode</a><span class="delimiter">)</span> <span title="(x: akka.actor.Address)Some[akka.actor.Address]">Some</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterPoolActor.selectDeploymentTarget.address" title="akka.actor.Address">address</a><span class="delimiter">)</span> else <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> class <a title="class ClusterRouterGroupActor extends akka.routing.RouterActor with akka.cluster.routing.ClusterRouterActor" id="akka.cluster.routing;ClusterRouterGroupActor">ClusterRouterGroupActor</a><a href="#akka.cluster.routing;ClusterRouterGroupActor" title="akka.cluster.routing.ClusterRouterGroupActor" class="delimiter">(</a>val <a title="akka.cluster.routing.ClusterRouterGroupSettings" id="akka.cluster.routing;ClusterRouterGroupActor.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterGroupSettings.equals" title="akka.cluster.routing.ClusterRouterGroupSettings">ClusterRouterGroupSettings</a><span class="delimiter">)</span>
  extends <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor" title="akka.routing.RouterActor">RouterActor</a> with <a href="#akka.cluster.routing;ClusterRouterActor" title="akka.cluster.routing.ClusterRouterActor">ClusterRouterActor</a> <span class="delimiter">{</span>

  val <a title="akka.routing.Group" id="akka.cluster.routing;ClusterRouterGroupActor.group">group</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a> match <span class="delimiter">{</span>
    case <a title="akka.routing.Group" id="akka.cluster.routing;ClusterRouterGroupActor.group.x">x</a>: <a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a> ⇒ <a href="#akka.cluster.routing;ClusterRouterGroupActor.group.x" title="akka.routing.Group">x</a>
    case <a title="akka.routing.RouterConfig" id="akka.cluster.routing;ClusterRouterGroupActor.group.other">other</a> ⇒
      throw <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.ActorInitializationException.apply(537aad5732)" title="(message: String)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><span title="String(&quot;ClusterRouterGroupActor can only be used with group, not &quot;)" class="string">&quot;ClusterRouterGroupActor can only be used with group, not &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.group.other" title="akka.routing.RouterConfig">other</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster.routing;ClusterRouterGroupActor.receive">receive</a> = <a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive" title="=&gt; ClusterRouterGroupActor.this.Receive">clusterReceive</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> super.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.receive" title="=&gt; PartialFunction[Any,Unit]">receive</a>

  var <a title="Map[akka.actor.Address,Set[String]]" id="akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=">usedRouteePaths</a>: <span title="Map[akka.actor.Address,Set[String]]">Map</span><span class="delimiter">[</span>Address, Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$3" title="=&gt; Boolean">allowLocalRoutees</a><span class="delimiter">)</span>
      <span title="(elems: (akka.actor.Address, scala.collection.immutable.Set[String])*)scala.collection.immutable.Map[akka.actor.Address,scala.collection.immutable.Set[String]]">Map</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="(self: akka.actor.Address)ArrowAssoc[akka.actor.Address]">selfAddress</a> <span title="(y: scala.collection.immutable.Set[String])(akka.actor.Address, scala.collection.immutable.Set[String])">-&gt;</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="scala.collection.immutable.Set[String]">toSet</span><span class="delimiter">)</span>
    else
      <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[akka.actor.Address,Nothing]">empty</span>

  <span class="comment">/**
   * Adds routees based on totalInstances and maxInstancesPerNode settings
   */</span>
  override def <a title="()Unit" id="akka.cluster.routing;ClusterRouterGroupActor.addRoutees">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    @tailrec
    def <a title="()Unit" id="akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget" title="=&gt; Option[(akka.actor.Address, String)]">selectDeploymentTarget</a> match <span class="delimiter">{</span>
      case <span title="None.type">None</span> ⇒ <span class="comment">// done</span>
      case Some<span class="delimiter">(</span><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.address">address</a>, <a title="String" id="akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.path">path</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
        val <a title="akka.routing.Routee" id="akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.routee">routee</a> = <a href="#akka.cluster.routing;ClusterRouterGroupActor.group" title="=&gt; akka.routing.Group">group</a>.<a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group.routeeFor" title="(path: String, context: akka.actor.ActorContext)akka.routing.Routee">routeeFor</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.address" title="(self: akka.actor.Address)any2stringadd[akka.actor.Address]">address</a> <span title="(other: String)String">+</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.path" title="String">path</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a><span class="delimiter">)</span>
        <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="(x$1: Map[akka.actor.Address,Set[String]])Unit">usedRouteePaths</a> = <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="=&gt; Map[akka.actor.Address,Set[String]]">usedRouteePaths</a>.<span title="(key: akka.actor.Address, value: Set[String])scala.collection.immutable.Map[akka.actor.Address,Set[String]]">updated</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="=&gt; Map[akka.actor.Address,Set[String]]">usedRouteePaths</a>.<span title="(key: akka.actor.Address, default: =&gt; Set[String])Set[String]">getOrElse</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.address" title="akka.actor.Address">address</a>, <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[String]">empty</span><span class="delimiter">)</span> <span title="(elem: String)scala.collection.immutable.Set[String]">+</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.path" title="String">path</a><span class="delimiter">)</span>
        <span class="comment">// must register each one, since registered routees are used in selectDeploymentTarget</span>
        <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.addRoutee" title="(routee: akka.routing.Routee)Unit">addRoutee</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span>

        <span class="comment">// recursion until all created</span>
        <a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees" title="()Unit">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.cluster.routing;ClusterRouterGroupActor.addRoutees.doAddRoutees" title="()Unit">doAddRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; Option[(akka.actor.Address, String)]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget">selectDeploymentTarget</a>: <span title="Option[(akka.actor.Address, String)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>Address, String<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.currentRoutees">currentRoutees</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>
    val <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.currentNodes">currentNodes</a> = <a href="#akka.cluster.routing;ClusterRouterActor.availableNodes" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">availableNodes</a>
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.currentNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">currentNodes</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.currentRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">currentRoutees</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$1" title="=&gt; Int">totalInstances</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      <span class="comment">// find the node with least routees</span>
      val unusedNodes = <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.currentNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">currentNodes</a> <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.unusedNodes">filterNot</a> <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="=&gt; Map[akka.actor.Address,Set[String]]">usedRouteePaths</a>.<a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.unusedNodes.$anonfun.key" title="(key: akka.actor.Address)Boolean">contains</a>

      if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.unusedNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">unusedNodes</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(x: (akka.actor.Address, String))Some[(akka.actor.Address, String)]">Some</span><span class="delimiter">(</span><span title="(_1: akka.actor.Address, _2: String)(akka.actor.Address, String)" class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.unusedNodes" title="scala.collection.immutable.SortedSet[akka.actor.Address]">unusedNodes</a>.<span title="=&gt; akka.actor.Address">head</span>, <a href="#akka.cluster.routing;ClusterRouterGroupActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="=&gt; String">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        val <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.address" title="(akka.actor.Address, Set[String])" class="delimiter">(</a><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4" title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.address">address</a>, <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4" title="Set[String]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.used">used</a><span class="delimiter">)</span> = <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="=&gt; Map[akka.actor.Address,Set[String]]">usedRouteePaths</a>.<span title="(f: ((akka.actor.Address, Set[String])) =&gt; Int)(implicit cmp: Ordering[Int])(akka.actor.Address, Set[String])">minBy</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4.$anonfun.x0$1" title="Int" class="delimiter">{</a> case <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4.$anonfun.address">address</a>, <a title="Set[String]" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4.$anonfun.used">used</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.x$4.$anonfun.used" title="Set[String]">used</a>.<span title="=&gt; Int">size</span> <span class="delimiter">}</span>
        <span class="comment">// pick next of the unused paths</span>
        <a href="#akka.cluster.routing;ClusterRouterGroupActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterGroupSettings">settings</a>.<a href="#akka.cluster.routing;ClusterRouterGroupSettings.copy$default$2" title="=&gt; scala.collection.immutable.Seq[String]">routeesPaths</a>.<span title="(pf: PartialFunction[String,(akka.actor.Address, String)])Option[(akka.actor.Address, String)]">collectFirst</span> <a title="&lt;$anon: String =&gt; (akka.actor.Address, String)&gt; extends scala.runtime.AbstractPartialFunction[String,(akka.actor.Address, String)] with Serializable" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="String" id="akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget;$anonfun.isDefinedAt.p">p</a> if <span title="=&gt; Boolean">!</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.used" title="Set[String]">used</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget;$anonfun.isDefinedAt.p" title="String">p</a><span class="delimiter">)</span> ⇒ <span title="(_1: akka.actor.Address, _2: String)(akka.actor.Address, String)" class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster.routing;ClusterRouterGroupActor.selectDeploymentTarget;$anonfun.isDefinedAt.p" title="String">p</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  override def <a title="(member: akka.cluster.Member)Unit" id="akka.cluster.routing;ClusterRouterGroupActor.removeMember">removeMember</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterGroupActor.removeMember.member">member</a>: <a href="../Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster.routing;ClusterRouterGroupActor.usedRouteePaths_=" title="(x$1: Map[akka.actor.Address,Set[String]])Unit">usedRouteePaths</a> <span title="(key: akka.actor.Address)scala.collection.immutable.Map[akka.actor.Address,Set[String]]">-=</span> <a href="#akka.cluster.routing;ClusterRouterGroupActor.removeMember.member" title="akka.cluster.Member">member</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
    super.<a href="#akka.cluster.routing;ClusterRouterActor.removeMember" title="(member: akka.cluster.Member)Unit">removeMember</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterGroupActor.removeMember.member" title="akka.cluster.Member">member</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * The router actor, subscribes to cluster events and
 * adjusts the routees.
 */</span>
private<span class="delimiter">[</span>akka<span class="delimiter">]</span> trait <a title="trait ClusterRouterActor extends AnyRef" id="akka.cluster.routing;ClusterRouterActor">ClusterRouterActor</a> <span title="Unit" class="delimiter">{</span> this: RouterActor ⇒

  def <a title="=&gt; akka.cluster.routing.ClusterRouterSettingsBase" id="akka.cluster.routing;ClusterRouterActor.settings">settings</a>: <a href="#akka.cluster.routing;ClusterRouterSettingsBase" title="akka.cluster.routing.ClusterRouterSettingsBase">ClusterRouterSettingsBase</a>

  if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a><span class="delimiter">]</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../../actor/akka/routing/RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a><span class="delimiter">]</span><span class="delimiter">)</span>
    throw <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.ActorInitializationException.apply(537aad5732)" title="(message: String)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><span title="String(&quot;Cluster router actor can only be used with Pool or Group, not with &quot;)" class="string">&quot;Cluster router actor can only be used with Pool or Group, not with &quot;</span> <span title="(x$1: Any)String">+</span>
      <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>

  def <a title="=&gt; akka.cluster.Cluster" id="akka.cluster.routing;ClusterRouterActor.cluster">cluster</a>: <a href="../Cluster.scala.html#akka.cluster;Cluster" title="akka.cluster.Cluster">Cluster</a> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  <span class="comment">// re-subscribe when restart</span>
  override def <a title="()Unit" id="akka.cluster.routing;ClusterRouterActor.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.subscribe(6cfb44d410)" title="(subscriber: akka.actor.ActorRef, to: Class[_]*)Unit">subscribe</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.cluster.ClusterEvent.MemberEvent](classOf[akka.cluster.ClusterEvent$$MemberEvent])" class="delimiter">[</span>MemberEvent<span class="delimiter">]</span>, classOf<span title="Class[akka.cluster.ClusterEvent.ReachabilityEvent](classOf[akka.cluster.ClusterEvent$$ReachabilityEvent])" class="delimiter">[</span>ReachabilityEvent<span class="delimiter">]</span><span class="delimiter">)</span>

  override def <a title="()Unit" id="akka.cluster.routing;ClusterRouterActor.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>

  var <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterActor.nodes_=">nodes</a>: immutable.<span title="scala.collection.immutable.SortedSet[akka.actor.Address]">SortedSet</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import akka.cluster.<a href="../Member.scala.html#akka.cluster.Member" title="akka.cluster.Member.type">Member</a>.addressOrdering
    <a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.readView" title="=&gt; akka.cluster.ClusterReadView">readView</a>.<a href="../ClusterReadView.scala.html#akka.cluster;ClusterReadView.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.actor.Address])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.actor.Address,scala.collection.immutable.SortedSet[akka.actor.Address]])scala.collection.immutable.SortedSet[akka.actor.Address]">collect</span> <a title="&lt;$anon: akka.cluster.Member =&gt; akka.actor.Address&gt; extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.actor.Address] with Serializable" id="akka.cluster.routing;ClusterRouterActor.nodes;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterActor.nodes;$anonfun.isDefinedAt.m">m</a> if <a href="#akka.cluster.routing;ClusterRouterActor.isAvailable" title="(m: akka.cluster.Member)Boolean">isAvailable</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.nodes;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.nodes;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(m: akka.cluster.Member)Boolean" id="akka.cluster.routing;ClusterRouterActor.isAvailable">isAvailable</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterActor.isAvailable.m">m</a>: <a href="../Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#akka.cluster.routing;ClusterRouterActor.isAvailable.m" title="akka.cluster.Member">m</a>.<a href="../Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: Any)Boolean">==</span> <a href="../Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="../Member.scala.html#akka.cluster.MemberStatus.Up" title="akka.cluster.MemberStatus.Up.type">Up</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#akka.cluster.routing;ClusterRouterActor.satisfiesRole" title="(memberRoles: Set[String])Boolean">satisfiesRole</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.isAvailable.m" title="akka.cluster.Member">m</a>.<a href="../Member.scala.html#akka.cluster;Member.roles" title="=&gt; Set[String]">roles</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterSettingsBase">settings</a>.<a href="#akka.cluster.routing;ClusterRouterSettingsBase.allowLocalRoutees" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.routing;ClusterRouterActor.isAvailable.m" title="akka.cluster.Member">m</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>

  private def <a title="(memberRoles: Set[String])Boolean" id="akka.cluster.routing;ClusterRouterActor.satisfiesRole">satisfiesRole</a><span class="delimiter">(</span><a title="Set[String]" id="akka.cluster.routing;ClusterRouterActor.satisfiesRole.memberRoles">memberRoles</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster.routing;ClusterRouterActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterSettingsBase">settings</a>.<a href="#akka.cluster.routing;ClusterRouterSettingsBase.useRole" title="=&gt; Option[String]">useRole</a> match <span class="delimiter">{</span>
    case <span title="None.type">None</span>    ⇒ true
    case Some<span class="delimiter">(</span><a title="String" id="akka.cluster.routing;ClusterRouterActor.satisfiesRole.r">r</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.satisfiesRole.memberRoles" title="Set[String]">memberRoles</a>.<span title="(elem: String)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.satisfiesRole.r" title="String">r</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.cluster.routing;ClusterRouterActor.availableNodes">availableNodes</a>: immutable.<span title="scala.collection.immutable.SortedSet[akka.actor.Address]">SortedSet</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import akka.cluster.<a href="../Member.scala.html#akka.cluster.Member" title="akka.cluster.Member.type">Member</a>.addressOrdering
    if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterActor.settings" title="=&gt; akka.cluster.routing.ClusterRouterSettingsBase">settings</a>.<a href="#akka.cluster.routing;ClusterRouterSettingsBase.allowLocalRoutees" title="=&gt; Boolean">allowLocalRoutees</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.routing;ClusterRouterActor.satisfiesRole" title="(memberRoles: Set[String])Boolean">satisfiesRole</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// use my own node, cluster information not updated yet</span>
      immutable.<span title="(elems: akka.actor.Address*)(implicit ord: Ordering[akka.actor.Address])scala.collection.immutable.SortedSet[akka.actor.Address]">SortedSet</span><a href="../Member.scala.html#akka.cluster.Member.addressOrdering" title="=&gt; Ordering[akka.actor.Address]" class="delimiter">(</a><a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    else
      <a href="#akka.cluster.routing;ClusterRouterActor.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Fills in self address for local ActorRef
   */</span>
  def <a title="(routee: akka.routing.Routee)akka.actor.Address" id="akka.cluster.routing;ClusterRouterActor.fullAddress">fullAddress</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.cluster.routing;ClusterRouterActor.fullAddress.routee">routee</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> = <span class="delimiter">{</span>
    val <span title="akka.actor.Address">a</span> = <a href="#akka.cluster.routing;ClusterRouterActor.fullAddress.routee" title="akka.routing.Routee">routee</a> match <span class="delimiter">{</span>
      case ActorRefRoutee<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster.routing;ClusterRouterActor.fullAddress.a.ref">ref</a><span class="delimiter">)</span>       ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.fullAddress.a.ref" title="akka.actor.ActorRef">ref</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a>
      case ActorSelectionRoutee<span class="delimiter">(</span><a title="akka.actor.ActorSelection" id="akka.cluster.routing;ClusterRouterActor.fullAddress.a.sel">sel</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.fullAddress.a.sel" title="akka.actor.ActorSelection">sel</a>.<a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ActorSelection.anchor" title="=&gt; akka.actor.ActorRef">anchor</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a>
    <span class="delimiter">}</span>
    <span title="akka.actor.Address">a</span> match <span class="delimiter">{</span>
      case Address<span class="delimiter">(</span>_, _, <span title="None.type">None</span>, <span title="None.type">None</span><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>
      case <span title="akka.actor.Address">a</span>                         ⇒ <span title="akka.actor.Address">a</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Adds routees based on settings
   */</span>
  def <a title="()Unit" id="akka.cluster.routing;ClusterRouterActor.addRoutees">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  def <a title="(member: akka.cluster.Member)Unit" id="akka.cluster.routing;ClusterRouterActor.addMember">addMember</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterActor.addMember.member">member</a>: <a href="../Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster.routing;ClusterRouterActor.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.SortedSet[akka.actor.Address]">+=</span> <a href="#akka.cluster.routing;ClusterRouterActor.addMember.member" title="akka.cluster.Member">member</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
    <a href="#akka.cluster.routing;ClusterRouterActor.addRoutees" title="()Unit">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(member: akka.cluster.Member)Unit" id="akka.cluster.routing;ClusterRouterActor.removeMember">removeMember</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterActor.removeMember.member">member</a>: <a href="../Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="akka.actor.Address" id="akka.cluster.routing;ClusterRouterActor.removeMember.address">address</a> = <a href="#akka.cluster.routing;ClusterRouterActor.removeMember.member" title="akka.cluster.Member">member</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
    <a href="#akka.cluster.routing;ClusterRouterActor.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.SortedSet[akka.actor.Address]">-=</span> <a href="#akka.cluster.routing;ClusterRouterActor.removeMember.address" title="akka.actor.Address">address</a>

    <span class="comment">// unregister routees that live on that node</span>
    val <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.cluster.routing;ClusterRouterActor.removeMember.affectedRoutees">affectedRoutees</a> = <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>.<span title="(p: akka.routing.Routee =&gt; Boolean)scala.collection.immutable.IndexedSeq[akka.routing.Routee]">filter</span><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.fullAddress" title="(routee: akka.routing.Routee)akka.actor.Address">fullAddress</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.removeMember.affectedRoutees.$anonfun.x$5" title="akka.routing.Routee">_</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.cluster.routing;ClusterRouterActor.removeMember.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
    <a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="../../../../actor/akka/routing/RoutedActorCell.scala.html#akka.routing;RoutedActorCell.removeRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee], stopChild: Boolean)Unit">removeRoutees</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.removeMember.affectedRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">affectedRoutees</a>, stopChild = true<span class="delimiter">)</span>

    <span class="comment">// addRoutees will not create more than createRoutees and maxInstancesPerNode</span>
    <span class="comment">// this is useful when totalInstances &lt; upNodes.size</span>
    <a href="#akka.cluster.routing;ClusterRouterActor.addRoutees" title="()Unit">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="=&gt; ClusterRouterActor.this.Receive" id="akka.cluster.routing;ClusterRouterActor.clusterReceive">clusterReceive</a>: <span title="ClusterRouterActor.this.Receive">Receive</span> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.isDefinedAt.s">s</a>: <a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> ⇒
      import akka.cluster.<a href="../Member.scala.html#akka.cluster.Member" title="akka.cluster.Member.type">Member</a>.addressOrdering
      <a href="#akka.cluster.routing;ClusterRouterActor.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> = <a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.isDefinedAt.s" title="akka.cluster.ClusterEvent.CurrentClusterState">s</a>.<a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.actor.Address])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.actor.Address,scala.collection.immutable.SortedSet[akka.actor.Address]])scala.collection.immutable.SortedSet[akka.actor.Address]">collect</span> <a title="&lt;$anon: akka.cluster.Member =&gt; akka.actor.Address&gt; extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.actor.Address] with Serializable" id="akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.applyOrElse;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="akka.cluster.Member" id="akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m">m</a> if <a href="#akka.cluster.routing;ClusterRouterActor.isAvailable" title="(m: akka.cluster.Member)Boolean">isAvailable</a><span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span class="delimiter">}</span>
      <a href="#akka.cluster.routing;ClusterRouterActor.addRoutees" title="()Unit">addRoutees</a><span class="delimiter">(</span><span class="delimiter">)</span>

    case <span title="akka.cluster.ClusterEvent.MemberEvent">m</span>: <a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> if <a href="#akka.cluster.routing;ClusterRouterActor.isAvailable" title="(m: akka.cluster.Member)Boolean">isAvailable</a><span class="delimiter">(</span><span title="akka.cluster.ClusterEvent.MemberEvent">m</span>.<a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster.routing;ClusterRouterActor.addMember" title="(member: akka.cluster.Member)Unit">addMember</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.cluster.ClusterEvent.MemberEvent">m</span>.<a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span>

    case <a title="akka.cluster.ClusterEvent.MemberEvent" id="akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.isDefinedAt.other">other</a>: <a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> ⇒
      <span class="comment">// other events means that it is no longer interesting, such as</span>
      <span class="comment">// MemberExited, MemberRemoved</span>
      <a href="#akka.cluster.routing;ClusterRouterActor.removeMember" title="(member: akka.cluster.Member)Unit">removeMember</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.clusterReceive;$anonfun.isDefinedAt.other" title="akka.cluster.ClusterEvent.MemberEvent">other</a>.<a href="../ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span>

    case UnreachableMember<span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster.routing;ClusterRouterActor.removeMember" title="(member: akka.cluster.Member)Unit">removeMember</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span>

    case ReachableMember<span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span> ⇒
      if <span class="delimiter">(</span><a href="#akka.cluster.routing;ClusterRouterActor.isAvailable" title="(m: akka.cluster.Member)Boolean">isAvailable</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster.routing;ClusterRouterActor.addMember" title="(member: akka.cluster.Member)Unit">addMember</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
