<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>testkit/akka/testkit/package.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka

import <span title="language.type">language</span>.implicitConversions

import akka.actor.ActorSystem
import scala.concurrent.duration.<span class="delimiter">{</span> Duration, FiniteDuration <span class="delimiter">}</span>
import scala.reflect.ClassTag
import scala.collection.immutable
import java.util.concurrent.<span title="java.util.concurrent.TimeUnit.type">TimeUnit</span>.MILLISECONDS

package object <a title="akka.testkit.package.type" id="akka.testkit.package">testkit</a> <a href="#akka.testkit.package" title="akka.testkit.package.type" class="delimiter">{</a>
  def <a title="[T](eventFilters: Iterable[akka.testkit.EventFilter])(block: =&gt; T)(implicit system: akka.actor.ActorSystem)T" id="akka.testkit.package.filterEvents(2a90a68cbb)">filterEvents</a><span class="delimiter">[</span><a title="" id="akka.testkit.package.filterEvents(2a90a68cbb);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[akka.testkit.EventFilter]" id="akka.testkit.package.filterEvents(2a90a68cbb).eventFilters">eventFilters</a>: <span title="Iterable[akka.testkit.EventFilter]">Iterable</span><span class="delimiter">[</span>EventFilter<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit.package.filterEvents(2a90a68cbb).block">block</a>: ⇒ T<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.package.filterEvents(2a90a68cbb).system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit.package.filterEvents(2a90a68cbb);T" title="T">T</a> = <span class="delimiter">{</span>
    def <a title="=&gt; Long" id="akka.testkit.package.filterEvents(2a90a68cbb).now">now</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>

    <a href="#akka.testkit.package.filterEvents(2a90a68cbb).system" title="akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="TestEventListener.scala.html#akka.testkit.TestEvent" title="akka.testkit.TestEvent.type">TestEvent</a>.<a href="TestEventListener.scala.html#akka.testkit.TestEvent;Mute" title="(filters: scala.collection.immutable.Seq[akka.testkit.EventFilter])akka.testkit.TestEvent.Mute">Mute</a><span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).eventFilters" title="Iterable[akka.testkit.EventFilter]">eventFilters</a>.<span title="[Col[_]](implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,akka.testkit.EventFilter,Col[akka.testkit.EventFilter]])Col[akka.testkit.EventFilter]">to</span><span title="(implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,akka.testkit.EventFilter,scala.collection.immutable.Seq[akka.testkit.EventFilter]])scala.collection.immutable.Seq[akka.testkit.EventFilter]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq">Seq</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>

    try <span class="delimiter">{</span>
      val <a title="T" id="akka.testkit.package.filterEvents(2a90a68cbb).result">result</a> = <a href="#akka.testkit.package.filterEvents(2a90a68cbb).block" title="=&gt; T">block</a>

      val <a title="akka.testkit.TestKitSettings" id="akka.testkit.package.filterEvents(2a90a68cbb).testKitSettings">testKitSettings</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.testkit.TestKitSettings">TestKitExtension</a><span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
      val stop = <a href="#akka.testkit.package.filterEvents(2a90a68cbb).now" title="=&gt; Long">now</a> <a title="Long" id="akka.testkit.package.filterEvents(2a90a68cbb).stop">+</a> <a href="#akka.testkit.package.filterEvents(2a90a68cbb).testKitSettings" title="akka.testkit.TestKitSettings">testKitSettings</a>.<a href="TestKitExtension.scala.html#akka.testkit;TestKitSettings.TestEventFilterLeeway" title="=&gt; scala.concurrent.duration.FiniteDuration">TestEventFilterLeeway</a>.<span title="=&gt; Long">toMillis</span>
      val failed = <a href="#akka.testkit.package.filterEvents(2a90a68cbb).eventFilters" title="Iterable[akka.testkit.EventFilter]">eventFilters</a> <span title="(p: akka.testkit.EventFilter =&gt; Boolean)Iterable[akka.testkit.EventFilter]">filterNot</span> <span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).failed.$anonfun.x$1" title="akka.testkit.EventFilter">_</a>.<a href="TestEventListener.scala.html#akka.testkit;EventFilter.awaitDone" title="(max: scala.concurrent.duration.Duration)Boolean">awaitDone</a><span class="delimiter">(</span><span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).stop" title="Long">stop</a> <span title="(x: Long)Long">-</span> <a href="#akka.testkit.package.filterEvents(2a90a68cbb).now" title="=&gt; Long">now</a>, <span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a title="Iterable[String]" id="akka.testkit.package.filterEvents(2a90a68cbb).failed">map</a> <span class="delimiter">(</span><span title="String(&quot;Timeout (&quot;)" class="string">&quot;Timeout (&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit.package.filterEvents(2a90a68cbb).testKitSettings" title="akka.testkit.TestKitSettings">testKitSettings</a>.<a href="TestKitExtension.scala.html#akka.testkit;TestKitSettings.TestEventFilterLeeway" title="=&gt; scala.concurrent.duration.FiniteDuration">TestEventFilterLeeway</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;) waiting for &quot;)" class="string">&quot;) waiting for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit.package.filterEvents(2a90a68cbb).failed.$anonfun.x$2" title="akka.testkit.EventFilter">_</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).failed" title="Iterable[String]">failed</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        throw new <span title="AssertionError">AssertionError</span><span class="delimiter">(</span><span title="String(&quot;Filter completion error:\n&quot;)" class="string">&quot;Filter completion error:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit.package.filterEvents(2a90a68cbb).failed" title="Iterable[String]">failed</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#akka.testkit.package.filterEvents(2a90a68cbb).result" title="T">result</a>
    <span class="delimiter">}</span> finally <span class="delimiter">{</span>
      <a href="#akka.testkit.package.filterEvents(2a90a68cbb).system" title="akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="TestEventListener.scala.html#akka.testkit.TestEvent" title="akka.testkit.TestEvent.type">TestEvent</a>.<a href="TestEventListener.scala.html#akka.testkit.TestEvent;UnMute" title="(filters: scala.collection.immutable.Seq[akka.testkit.EventFilter])akka.testkit.TestEvent.UnMute">UnMute</a><span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(2a90a68cbb).eventFilters" title="Iterable[akka.testkit.EventFilter]">eventFilters</a>.<span title="[Col[_]](implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,akka.testkit.EventFilter,Col[akka.testkit.EventFilter]])Col[akka.testkit.EventFilter]">to</span><span title="(implicit cbf: scala.collection.generic.CanBuildFrom[Nothing,akka.testkit.EventFilter,scala.collection.immutable.Seq[akka.testkit.EventFilter]])scala.collection.immutable.Seq[akka.testkit.EventFilter]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq">Seq</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="[T](eventFilters: akka.testkit.EventFilter*)(block: =&gt; T)(implicit system: akka.actor.ActorSystem)T" id="akka.testkit.package.filterEvents(fd5d0fe75b)">filterEvents</a><span class="delimiter">[</span><a title="" id="akka.testkit.package.filterEvents(fd5d0fe75b);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="akka.testkit.EventFilter*" id="akka.testkit.package.filterEvents(fd5d0fe75b).eventFilters">eventFilters</a>: <span title="akka.testkit.EventFilter*">EventFilter</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit.package.filterEvents(fd5d0fe75b).block">block</a>: ⇒ T<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.package.filterEvents(fd5d0fe75b).system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.testkit.package.filterEvents(fd5d0fe75b);T" title="T">T</a> = <a href="#akka.testkit.package.filterEvents(2a90a68cbb)" title="(eventFilters: Iterable[akka.testkit.EventFilter])(block: =&gt; T)(implicit system: akka.actor.ActorSystem)T">filterEvents</a><span class="delimiter">(</span><a href="#akka.testkit.package.filterEvents(fd5d0fe75b).eventFilters" title="akka.testkit.EventFilter*">eventFilters</a>.<span title="=&gt; Seq[akka.testkit.EventFilter]">toSeq</span><span class="delimiter">)</span><a href="#akka.testkit.package.filterEvents(fd5d0fe75b).system" title="akka.actor.ActorSystem" class="delimiter">(</a><a href="#akka.testkit.package.filterEvents(fd5d0fe75b).block" title="=&gt; T">block</a><span class="delimiter">)</span>

  def <a title="[T &lt;: Throwable](block: =&gt; Unit)(implicit system: akka.actor.ActorSystem, implicit t: scala.reflect.ClassTag[T])Unit" id="akka.testkit.package.filterException">filterException</a><span class="delimiter">[</span><a title=" &lt;: Throwable" id="akka.testkit.package.filterException;T">T</a> &lt;: Throwable<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Unit" id="akka.testkit.package.filterException.block">block</a>: ⇒ Unit<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.package.filterException.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="scala.reflect.ClassTag[T]" id="akka.testkit.package.filterException.t">t</a>: <span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="TestEventListener.scala.html#akka.testkit.EventFilter.apply" title="[A &lt;: Throwable](message: String, source: String, start: String, pattern: String, occurrences: Int)(implicit evidence$1: scala.reflect.ClassTag[A])akka.testkit.EventFilter">EventFilter</a><a href="TestEventListener.scala.html#akka.testkit.EventFilter.apply$default$1" title="(message: String, source: String, start: String, pattern: String, occurrences: Int)(implicit evidence$1: scala.reflect.ClassTag[T])akka.testkit.EventFilter" class="delimiter">[</a><a href="#akka.testkit.package.filterException;T" title="T">T</a><span class="delimiter">]</span><a href="#akka.testkit.package.filterException.t" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><span class="delimiter">)</span> <a href="TestEventListener.scala.html#akka.testkit;EventFilter.intercept" title="(code: =&gt; Unit)(implicit system: akka.actor.ActorSystem)Unit">intercept</a> <span class="delimiter">(</span><a href="#akka.testkit.package.filterException.block" title="=&gt; Unit">block</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Scala API. Scale timeouts (durations) during tests with the configured
   * 'akka.test.timefactor'.
   * Implicit class providing `dilated` method.
   * {{{
   * import scala.concurrent.duration._
   * import akka.testkit._
   * 10.milliseconds.dilated
   * }}}
   * Corresponding Java API is available in JavaTestKit.dilated()
   */</span>
  implicit class <a href="#akka.testkit.package.TestDuration(23da7ebdcd).duration" title="class TestDuration extends AnyVal" id="akka.testkit.package.TestDuration(23da7ebdcd)">TestDuration</a><a href="#akka.testkit.package.TestDuration(23da7ebdcd)" title="akka.testkit.package.TestDuration" class="delimiter">(</a>val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit.package.TestDuration(23da7ebdcd).duration">duration</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span> extends <a href="#akka.testkit.package.TestDuration(23da7ebdcd)" title="AnyVal">AnyVal</a> <span class="delimiter">{</span>
    def <a title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration" id="akka.testkit.package;TestDuration.dilated">dilated</a><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.package;TestDuration.dilated.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> =
      <span class="delimiter">(</span><a href="#akka.testkit.package.TestDuration(23da7ebdcd).duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a> <span title="(factor: Double)scala.concurrent.duration.Duration">*</span> <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.testkit.TestKitSettings">TestKitExtension</a><span class="delimiter">(</span><a href="#akka.testkit.package;TestDuration.dilated.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="TestKitExtension.scala.html#akka.testkit;TestKitSettings.TestTimeFactor" title="=&gt; Double">TestTimeFactor</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.concurrent.duration.FiniteDuration" class="delimiter">[</span><span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>
        </pre>
    </body>
</html>
