<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>testkit/akka/testkit/TestKit.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
package akka.testkit

import <span title="language.type">language</span>.postfixOps
import scala.annotation.<span class="delimiter">{</span> varargs, tailrec <span class="delimiter">}</span>
import scala.collection.immutable
import scala.concurrent.Await
import scala.concurrent.duration._
import scala.reflect.ClassTag
import java.util.concurrent._
import java.util.concurrent.atomic.AtomicInteger
import akka.actor._
import akka.actor.<a href="../../../actor/akka/actor/Actor.scala.html#akka.actor.Actor" title="akka.actor.Actor.type">Actor</a>._
import akka.util.<span class="delimiter">{</span> Timeout, BoxedType <span class="delimiter">}</span>
import scala.util.control.NonFatal
import scala.Some
import java.util.concurrent.TimeUnit
import akka.actor.IllegalActorStateException
import akka.actor.DeadLetter
import akka.actor.Terminated

object <a title="akka.testkit.TestActor.type" id="akka.testkit.TestActor">TestActor</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type" class="delimiter">{</a>
  type <a title="Option[PartialFunction[Any,Boolean]]" id="akka.testkit.TestActor;Ignore">Ignore</a> = <span title="Option[PartialFunction[Any,Boolean]]">Option</span><span class="delimiter">[</span>PartialFunction<span class="delimiter">[</span>Any, Boolean<span class="delimiter">]</span><span class="delimiter">]</span>

  abstract class <a title="class AutoPilot extends AnyRef" id="akka.testkit.TestActor;AutoPilot">AutoPilot</a> <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot" class="delimiter">{</a>
    def <a title="(sender: akka.actor.ActorRef, msg: Any)akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor;AutoPilot.run">run</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit.TestActor;AutoPilot.run.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Any" id="akka.testkit.TestActor;AutoPilot.run.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a>
    def <a title="=&gt; akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor;AutoPilot.noAutoPilot">noAutoPilot</a>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> = <a href="#akka.testkit.TestActor.NoAutoPilot.readResolve" title="akka.testkit.TestActor.NoAutoPilot.type">NoAutoPilot</a>
    def <a title="=&gt; akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor;AutoPilot.keepRunning">keepRunning</a>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> = <a href="#akka.testkit.TestActor.KeepRunning.readResolve" title="akka.testkit.TestActor.KeepRunning.type">KeepRunning</a>
  <span class="delimiter">}</span>

  case object <a href="#akka.testkit.TestActor.NoAutoPilot.productElement.x$1" title="akka.testkit.TestActor.NoAutoPilot.type" id="akka.testkit.TestActor.NoAutoPilot.readResolve">NoAutoPilot</a> extends <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> <span class="delimiter">{</span>
    def <a title="(sender: akka.actor.ActorRef, msg: Any)akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor.NoAutoPilot.run">run</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit.TestActor.NoAutoPilot.run.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Any" id="akka.testkit.TestActor.NoAutoPilot.run.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> = this
  <span class="delimiter">}</span>

  case object <a href="#akka.testkit.TestActor.KeepRunning.productElement.x$1" title="akka.testkit.TestActor.KeepRunning.type" id="akka.testkit.TestActor.KeepRunning.readResolve">KeepRunning</a> extends <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> <span class="delimiter">{</span>
    def <a title="(sender: akka.actor.ActorRef, msg: Any)akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor.KeepRunning.run">run</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit.TestActor.KeepRunning.run.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Any" id="akka.testkit.TestActor.KeepRunning.run.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> = sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;must not call&quot;)" class="string">&quot;must not call&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  final case class <a title="class SetIgnore extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.testkit.TestActor.SetIgnore.readResolve">SetIgnore</a><span title="Product" class="delimiter">(</span><a title="akka.testkit.TestActor.Ignore" id="akka.testkit.TestActor;SetIgnore.i">i</a>: <span title="akka.testkit.TestActor.Ignore">Ignore</span><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  final case class <a title="class Watch extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.testkit.TestActor.Watch.readResolve">Watch</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit.TestActor;Watch.ref">ref</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  final case class <a title="class UnWatch extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.testkit.TestActor.UnWatch.readResolve">UnWatch</a><span title="Product" class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit.TestActor;UnWatch.ref">ref</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>
  final case class <a title="class SetAutoPilot extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.testkit.TestActor.SetAutoPilot.readResolve">SetAutoPilot</a><span title="Product" class="delimiter">(</span><a title="akka.testkit.TestActor.AutoPilot" id="akka.testkit.TestActor;SetAutoPilot.ap">ap</a>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>

  trait <a title="trait Message extends AnyRef" id="akka.testkit.TestActor;Message">Message</a> <span class="delimiter">{</span>
    def <a title="=&gt; AnyRef" id="akka.testkit.TestActor;Message.msg">msg</a>: <span title="AnyRef">AnyRef</span>
    def <a title="=&gt; akka.actor.ActorRef" id="akka.testkit.TestActor;Message.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
  <span class="delimiter">}</span>
  final case class <a title="class RealMessage extends AnyRef with akka.testkit.TestActor.Message with Product with Serializable" id="akka.testkit.TestActor.RealMessage.readResolve">RealMessage</a><span title="Product" class="delimiter">(</span><a title="AnyRef" id="akka.testkit.TestActor;RealMessage.msg">msg</a>: <span title="AnyRef">AnyRef</span>, <a title="akka.actor.ActorRef" id="akka.testkit.TestActor;RealMessage.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> extends <a href="#akka.testkit.TestActor;Message" title="akka.testkit.TestActor.Message">Message</a>
  case object <a href="#akka.testkit.TestActor.NullMessage.productElement.x$1" title="akka.testkit.TestActor.NullMessage.type" id="akka.testkit.TestActor.NullMessage.readResolve">NullMessage</a> extends <a href="#akka.testkit.TestActor;Message" title="akka.testkit.TestActor.Message">Message</a> <span class="delimiter">{</span>
    override def <a title="=&gt; AnyRef" id="akka.testkit.TestActor.NullMessage.msg">msg</a>: <span title="AnyRef">AnyRef</span> = throw new <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;IllegalActorStateException" title="akka.actor.IllegalActorStateException">IllegalActorStateException</a><span class="delimiter">(</span><span title="String(&quot;last receive did not dequeue a message&quot;)" class="string">&quot;last receive did not dequeue a message&quot;</span><span class="delimiter">)</span>
    override def <a title="=&gt; akka.actor.ActorRef" id="akka.testkit.TestActor.NullMessage.sender">sender</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = throw new <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;IllegalActorStateException" title="akka.actor.IllegalActorStateException">IllegalActorStateException</a><span class="delimiter">(</span><span title="String(&quot;last receive did not dequeue a message&quot;)" class="string">&quot;last receive did not dequeue a message&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  val <a title="Any =&gt; Boolean" id="akka.testkit.TestActor.FALSE">FALSE</a> = <span class="delimiter">(</span>x: <span title="Any">Any</span><span class="delimiter">)</span> ⇒ false

  <span class="comment">// make creator serializable, for VerifySerializabilitySpec</span>
  def <a title="(queue: java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message])akka.actor.Props" id="akka.testkit.TestActor.props">props</a><span class="delimiter">(</span><a title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]" id="akka.testkit.TestActor.props.queue">queue</a>: <span title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]">BlockingDeque</span><span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.testkit.TestActor](classOf[akka.testkit.TestActor])" class="delimiter">[</span>TestActor<span class="delimiter">]</span>, <a href="#akka.testkit.TestActor.props.queue" title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]">queue</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

class <a title="class TestActor extends AnyRef with akka.actor.Actor" id="akka.testkit;TestActor">TestActor</a><a href="#akka.testkit;TestActor" title="akka.testkit.TestActor" class="delimiter">(</a><a title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]" id="akka.testkit;TestActor.queue">queue</a>: <span title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]">BlockingDeque</span><span class="delimiter">[</span>TestActor.Message<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
  import <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>._

  var <a title="akka.testkit.TestActor.Ignore" id="akka.testkit;TestActor.ignore_=">ignore</a>: <span title="akka.testkit.TestActor.Ignore">Ignore</span> = <span title="None.type">None</span>

  var <a title="akka.testkit.TestActor.AutoPilot" id="akka.testkit;TestActor.autopilot_=">autopilot</a>: <a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a> = <a href="#akka.testkit.TestActor.NoAutoPilot.readResolve" title="akka.testkit.TestActor.NoAutoPilot.type">NoAutoPilot</a>

  def <a title="=&gt; PartialFunction[Any,Unit]" id="akka.testkit;TestActor.receive">receive</a> = <a title="&lt;$anon: Any =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.testkit;TestActor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case SetIgnore<span class="delimiter">(</span><a title="akka.testkit.TestActor.Ignore" id="akka.testkit;TestActor.receive;$anonfun.isDefinedAt.ign">ign</a><span class="delimiter">)</span>      ⇒ <a href="#akka.testkit;TestActor.ignore_=" title="(x$1: akka.testkit.TestActor.Ignore)Unit">ignore</a> = <a href="#akka.testkit;TestActor.receive;$anonfun.isDefinedAt.ign" title="akka.testkit.TestActor.Ignore">ign</a>
    case Watch<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>          ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span title="Unit" class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
    case UnWatch<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>        ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.unwatch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">unwatch</a><span title="Unit" class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
    case SetAutoPilot<span class="delimiter">(</span><a title="akka.testkit.TestActor.AutoPilot" id="akka.testkit;TestActor.receive;$anonfun.isDefinedAt.pilot">pilot</a><span class="delimiter">)</span> ⇒ <a href="#akka.testkit;TestActor.autopilot_=" title="(x$1: akka.testkit.TestActor.AutoPilot)Unit">autopilot</a> = <a href="#akka.testkit;TestActor.receive;$anonfun.isDefinedAt.pilot" title="akka.testkit.TestActor.AutoPilot">pilot</a>
    case <a title="AnyRef" id="akka.testkit;TestActor.receive;$anonfun.isDefinedAt.x">x</a>: <span title="AnyRef">AnyRef</span> ⇒
      <a href="#akka.testkit;TestActor.autopilot_=" title="(x$1: akka.testkit.TestActor.AutoPilot)Unit">autopilot</a> = <a href="#akka.testkit;TestActor.autopilot_=" title="=&gt; akka.testkit.TestActor.AutoPilot">autopilot</a>.<a href="#akka.testkit.TestActor;AutoPilot.run" title="(sender: akka.actor.ActorRef, msg: Any)akka.testkit.TestActor.AutoPilot">run</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.testkit;TestActor.receive;$anonfun.isDefinedAt.x" title="AnyRef">x</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <a href="#akka.testkit.TestActor.KeepRunning.readResolve" title="akka.testkit.TestActor.KeepRunning.type">KeepRunning</a> ⇒ <a href="#akka.testkit;TestActor.autopilot_=" title="=&gt; akka.testkit.TestActor.AutoPilot">autopilot</a>
        case <a title="akka.testkit.TestActor.AutoPilot" id="akka.testkit;TestActor.receive;$anonfun.applyOrElse.other">other</a>       ⇒ <a href="#akka.testkit;TestActor.receive;$anonfun.applyOrElse.other" title="akka.testkit.TestActor.AutoPilot">other</a>
      <span class="delimiter">}</span>
      val observe = <a href="#akka.testkit;TestActor.ignore_=" title="=&gt; akka.testkit.TestActor.Ignore">ignore</a> <span title="(f: PartialFunction[Any,Boolean] =&gt; Boolean)Option[Boolean]">map</span> <span class="delimiter">(</span><a title="PartialFunction[Any,Boolean]" id="akka.testkit;TestActor.receive;$anonfun.applyOrElse.observe.$anonfun.ignoreFunc">ignoreFunc</a> ⇒ <span title="=&gt; Boolean">!</span><a href="#akka.testkit;TestActor.receive;$anonfun.applyOrElse.observe.$anonfun.ignoreFunc" title="PartialFunction[Any,Boolean]">ignoreFunc</a>.<span title="(x: AnyRef, default: AnyRef =&gt; Boolean)Boolean">applyOrElse</span><span class="delimiter">(</span><a href="#akka.testkit;TestActor.receive;$anonfun.isDefinedAt.x" title="AnyRef">x</a>, <a href="#akka.testkit.TestActor.FALSE" title="=&gt; Any =&gt; Boolean">FALSE</a><span class="delimiter">)</span><span class="delimiter">)</span> <a title="Boolean" id="akka.testkit;TestActor.receive;$anonfun.applyOrElse.observe">getOrElse</a> true
      if <span class="delimiter">(</span><a href="#akka.testkit;TestActor.receive;$anonfun.applyOrElse.observe" title="Boolean">observe</a><span class="delimiter">)</span> <a href="#akka.testkit;TestActor.queue" title="java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="(x$1: akka.testkit.TestActor.Message)Boolean">offerLast</span><span title="Unit" class="delimiter">(</span><a href="#akka.testkit.TestActor.RealMessage.readResolve" title="(msg: AnyRef, sender: akka.actor.ActorRef)akka.testkit.TestActor.RealMessage">RealMessage</a><span class="delimiter">(</span><a href="#akka.testkit;TestActor.receive;$anonfun.isDefinedAt.x" title="AnyRef">x</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="()Unit" id="akka.testkit;TestActor.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    import scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    <a href="#akka.testkit;TestActor.queue" title="(i: java.util.Collection[akka.testkit.TestActor.Message])scala.collection.convert.Decorators.AsScala[Iterable[akka.testkit.TestActor.Message]]">queue</a>.<span title="=&gt; Iterable[akka.testkit.TestActor.Message]">asScala</span> <span title="(f: akka.testkit.TestActor.Message =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.testkit.TestActor.Message" id="akka.testkit;TestActor.postStop.$anonfun.m">m</a> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;DeadLetter" title="(message: Any, sender: akka.actor.ActorRef, recipient: akka.actor.ActorRef)akka.actor.DeadLetter">DeadLetter</a><span class="delimiter">(</span><a href="#akka.testkit;TestActor.postStop.$anonfun.m" title="akka.testkit.TestActor.Message">m</a>.<a href="#akka.testkit.TestActor;Message.msg" title="=&gt; AnyRef">msg</a>, <a href="#akka.testkit;TestActor.postStop.$anonfun.m" title="akka.testkit.TestActor.Message">m</a>.<a href="#akka.testkit.TestActor;Message.sender" title="=&gt; akka.actor.ActorRef">sender</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>, <a href="#akka.testkit;TestActor.postStop.$anonfun.m" title="akka.testkit.TestActor.Message">m</a>.<a href="#akka.testkit.TestActor;Message.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Implementation trait behind the [[akka.testkit.TestKit]] class: you may use
 * this if inheriting from a concrete class is not possible.
 *
 * &lt;b&gt;Use of the trait is discouraged because of potential issues with binary
 * backwards compatibility in the future, use at own risk.&lt;/b&gt;
 *
 * This trait requires the concrete class mixing it in to provide an
 * [[akka.actor.ActorSystem]] which is available before this traits’s
 * constructor is run. The recommended way is this:
 *
 * {{{
 * class MyTest extends TestKitBase {
 *   implicit lazy val system = ActorSystem() // may add arguments here
 *   ...
 * }
 * }}}
 */</span>
trait <a title="trait TestKitBase extends AnyRef" id="akka.testkit;TestKitBase">TestKitBase</a> <span title="Unit" class="delimiter">{</span>

  import <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<span class="delimiter">{</span> Message, RealMessage, NullMessage <span class="delimiter">}</span>

  implicit val <a title="=&gt; akka.actor.ActorSystem" id="akka.testkit;TestKitBase.system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>
  val <a title="akka.testkit.TestKitSettings" id="akka.testkit;TestKitBase.testKitSettings">testKitSettings</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.testkit.TestKitSettings">TestKitExtension</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  private val <a title="java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]" id="akka.testkit;TestKitBase.queue">queue</a> = new <span title="java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">LinkedBlockingDeque</span><span class="delimiter">[</span>Message<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  private<span class="delimiter">[</span>akka<span class="delimiter">]</span> var <a title="akka.testkit.TestActor.Message" id="akka.testkit;TestKitBase.lastMessage_=">lastMessage</a>: <a href="#akka.testkit.TestActor;Message" title="akka.testkit.TestActor.Message">Message</a> = <a href="#akka.testkit.TestActor.NullMessage.readResolve" title="akka.testkit.TestActor.NullMessage.type">NullMessage</a>

  def <a title="=&gt; akka.actor.ActorRef" id="akka.testkit;TestKitBase.lastSender">lastSender</a> = <a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a>.<a href="#akka.testkit.TestActor;Message.sender" title="=&gt; akka.actor.ActorRef">sender</a>

  <span class="comment">/**
   * Defines the testActor name.
   */</span>
  protected def <a title="=&gt; String" id="akka.testkit;TestKitBase.testActorName">testActorName</a>: <span title="String">String</span> = <span title="String(&quot;testActor&quot;)" class="string">&quot;testActor&quot;</span>

  <span class="comment">/**
   * ActorRef of the test actor. Access is provided to enable e.g.
   * registration as message target.
   */</span>
  val <a title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.testActor">testActor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    val <a title="akka.actor.ExtendedActorSystem" id="akka.testkit;TestKitBase.testActor.impl">impl</a> = <a href="#akka.testkit;TestKitBase.system" title="=&gt; akka.actor.ActorSystem">system</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ExtendedActorSystem" class="delimiter">[</span><a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">]</span>
    val <a title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.testActor.ref">ref</a> = <a href="#akka.testkit;TestKitBase.testActor.impl" title="akka.actor.ExtendedActorSystem">impl</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem.systemActorOf" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">systemActorOf</a><span class="delimiter">(</span><a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.props" title="(queue: java.util.concurrent.BlockingDeque[akka.testkit.TestActor.Message])akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a><span class="delimiter">)</span>
      .<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="CallingThreadDispatcher.scala.html#akka.testkit.CallingThreadDispatcher" title="akka.testkit.CallingThreadDispatcher.type">CallingThreadDispatcher</a>.<a href="CallingThreadDispatcher.scala.html#akka.testkit.CallingThreadDispatcher.Id" title="=&gt; String">Id</a><span class="delimiter">)</span>,
      <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s-%d&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.testActorName" title="=&gt; String">testActorName</a>, <a href="#akka.testkit.TestKit" title="akka.testkit.TestKit.type">TestKit</a>.<a href="#akka.testkit.TestKit.testActorId" title="=&gt; java.util.concurrent.atomic.AtomicInteger">testActorId</a>.<span title="()Int">incrementAndGet</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.awaitCond" title="(p: =&gt; Boolean, max: scala.concurrent.duration.Duration, interval: scala.concurrent.duration.Duration, message: String)Unit">awaitCond</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.testActor.ref" title="akka.actor.ActorRef">ref</a> match <span class="delimiter">{</span>
      case <a title="&lt;refinement of akka.actor.ActorRef with akka.actor.RepointableRef&gt; extends akka.actor.ActorRef with akka.actor.RepointableRef" id="akka.testkit;TestKitBase.testActor.r">r</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;RepointableRef" title="akka.actor.RepointableRef">RepointableRef</a> ⇒ <a href="#akka.testkit;TestKitBase.testActor.r" title="&lt;refinement of akka.actor.ActorRef with akka.actor.RepointableRef&gt; extends akka.actor.ActorRef with akka.actor.RepointableRef">r</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;RepointableRef.isStarted" title="=&gt; Boolean">isStarted</a>
      case _                 ⇒ true
    <span class="delimiter">}</span>, <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span> <span title="=&gt; scala.concurrent.duration.FiniteDuration">second</span>, <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">10</span> <span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.testActor.ref" title="akka.actor.ActorRef">ref</a>
  <span class="delimiter">}</span>

  private var <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.end_=">end</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>

  <span class="comment">/**
   * if last assertion was expectNoMsg, disable timing failure upon within()
   * block end.
   */</span>
  private var <a title="Boolean" id="akka.testkit;TestKitBase.lastWasNoMsg_=">lastWasNoMsg</a> = false

  <span class="comment">/**
   * Ignore all messages in the test actor for which the given partial
   * function returns true.
   */</span>
  def <a title="(f: PartialFunction[Any,Boolean])Unit" id="akka.testkit;TestKitBase.ignoreMsg">ignoreMsg</a><span class="delimiter">(</span><a title="PartialFunction[Any,Boolean]" id="akka.testkit;TestKitBase.ignoreMsg.f">f</a>: <span title="PartialFunction[Any,Boolean]">PartialFunction</span><span class="delimiter">[</span>Any, Boolean<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestKitBase.ignoreMsg.qual$1">testActor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.ignoreMsg.x$9">!</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.SetIgnore.readResolve" title="(i: akka.testkit.TestActor.Ignore)akka.testkit.TestActor.SetIgnore">SetIgnore</a><a title="akka.testkit.TestActor.SetIgnore" id="akka.testkit;TestKitBase.ignoreMsg.x$8" class="delimiter">(</a><span title="(x: PartialFunction[Any,Boolean])Some[PartialFunction[Any,Boolean]]">Some</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.ignoreMsg.f" title="PartialFunction[Any,Boolean]">f</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="comment">/**
   * Stop ignoring messages in the test actor.
   */</span>
  def <a title="()Unit" id="akka.testkit;TestKitBase.ignoreNoMsg">ignoreNoMsg</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestKitBase.ignoreNoMsg.qual$2">testActor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.ignoreNoMsg.x$11">!</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.SetIgnore.readResolve" title="(i: akka.testkit.TestActor.Ignore)akka.testkit.TestActor.SetIgnore">SetIgnore</a><a title="akka.testkit.TestActor.SetIgnore" id="akka.testkit;TestKitBase.ignoreNoMsg.x$10" class="delimiter">(</a><span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="comment">/**
   * Have the testActor watch someone (i.e. `context.watch(...)`).
   */</span>
  def <a title="(ref: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.testkit;TestKitBase.watch">watch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.watch.ref">ref</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestKitBase.watch.qual$3">testActor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.watch.x$13">!</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.Watch.readResolve" title="(ref: akka.actor.ActorRef)akka.testkit.TestActor.Watch">Watch</a><a title="akka.testkit.TestActor.Watch" id="akka.testkit;TestKitBase.watch.x$12" class="delimiter">(</a><a href="#akka.testkit;TestKitBase.watch.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.watch.ref" title="akka.actor.ActorRef">ref</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Have the testActor stop watching someone (i.e. `context.unwatch(...)`).
   */</span>
  def <a title="(ref: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.testkit;TestKitBase.unwatch">unwatch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.unwatch.ref">ref</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestKitBase.unwatch.qual$4">testActor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.unwatch.x$15">!</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.UnWatch.readResolve" title="(ref: akka.actor.ActorRef)akka.testkit.TestActor.UnWatch">UnWatch</a><a title="akka.testkit.TestActor.UnWatch" id="akka.testkit;TestKitBase.unwatch.x$14" class="delimiter">(</a><a href="#akka.testkit;TestKitBase.unwatch.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.unwatch.ref" title="akka.actor.ActorRef">ref</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Install an AutoPilot to drive the testActor: the AutoPilot will be run
   * for each received message and can be used to send or forward messages,
   * etc. Each invocation must return the AutoPilot for the next round.
   */</span>
  def <a title="(pilot: akka.testkit.TestActor.AutoPilot)Unit" id="akka.testkit;TestKitBase.setAutoPilot">setAutoPilot</a><span class="delimiter">(</span><a title="akka.testkit.TestActor.AutoPilot" id="akka.testkit;TestKitBase.setAutoPilot.pilot">pilot</a>: TestActor.<a href="#akka.testkit.TestActor;AutoPilot" title="akka.testkit.TestActor.AutoPilot">AutoPilot</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.testkit;TestKitBase.setAutoPilot.qual$5">testActor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.setAutoPilot.x$17">!</a> <a href="#akka.testkit.TestActor" title="akka.testkit.TestActor.type">TestActor</a>.<a href="#akka.testkit.TestActor.SetAutoPilot.readResolve" title="(ap: akka.testkit.TestActor.AutoPilot)akka.testkit.TestActor.SetAutoPilot">SetAutoPilot</a><a title="akka.testkit.TestActor.SetAutoPilot" id="akka.testkit;TestKitBase.setAutoPilot.x$16" class="delimiter">(</a><a href="#akka.testkit;TestKitBase.setAutoPilot.pilot" title="akka.testkit.TestActor.AutoPilot">pilot</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Obtain current time (`System.nanoTime`) as Duration.
   */</span>
  def <a title="=&gt; scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.now">now</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="System.type">System</span>.<span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong">nanoTime</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">nanos</span>

  <span class="comment">/**
   * Obtain time remaining for execution of the innermost enclosing `within`
   * block or missing that it returns the properly dilated default for this
   * case from settings (key &quot;akka.test.single-expect-default&quot;).
   */</span>
  def <a title="=&gt; scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOrDefault">remainingOrDefault</a> = <a href="#akka.testkit;TestKitBase.remainingOr" title="(duration: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">remainingOr</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.testKitSettings" title="=&gt; akka.testkit.TestKitSettings">testKitSettings</a>.<a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">SingleExpectDefaultTimeout</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Obtain time remaining for execution of the innermost enclosing `within`
   * block or throw an [[AssertionError]] if no `within` block surrounds this
   * call.
   */</span>
  def <a title="=&gt; scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remaining">remaining</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.testkit;TestKitBase.end_=" title="=&gt; scala.concurrent.duration.Duration">end</a> match <span class="delimiter">{</span>
    case <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remaining.f">f</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> ⇒ <a href="#akka.testkit;TestKitBase.remaining.f" title="scala.concurrent.duration.FiniteDuration">f</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a>
    case _                 ⇒ throw new <span title="AssertionError">AssertionError</span><span class="delimiter">(</span><span title="String(&quot;`remaining` may not be called outside of `within`&quot;)" class="string">&quot;`remaining` may not be called outside of `within`&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Obtain time remaining for execution of the innermost enclosing `within`
   * block or missing that it returns the given duration.
   */</span>
  def <a title="(duration: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOr">remainingOr</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOr.duration">duration</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.testkit;TestKitBase.end_=" title="=&gt; scala.concurrent.duration.Duration">end</a> match <span class="delimiter">{</span>
    case <span title="scala.concurrent.duration.Duration">x</span> if <span title="scala.concurrent.duration.Duration">x</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span> ⇒ <a href="#akka.testkit;TestKitBase.remainingOr.duration" title="scala.concurrent.duration.FiniteDuration">duration</a>
    case <span title="scala.concurrent.duration.Duration">x</span> if <span title="=&gt; Boolean">!</span><span title="scala.concurrent.duration.Duration">x</span>.<span title="()Boolean">isFinite</span>             ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;`end` cannot be infinite&quot;)" class="string">&quot;`end` cannot be infinite&quot;</span><span class="delimiter">)</span>
    case <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOr.f">f</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>            ⇒ <a href="#akka.testkit;TestKitBase.remainingOr.f" title="scala.concurrent.duration.FiniteDuration">f</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a>
  <span class="delimiter">}</span>

  private def <a title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOrDilated">remainingOrDilated</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.remainingOrDilated.max">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.testkit;TestKitBase.remainingOrDilated.max" title="scala.concurrent.duration.Duration">max</a> match <span class="delimiter">{</span>
    case <span title="scala.concurrent.duration.Duration">x</span> if <span title="scala.concurrent.duration.Duration">x</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span> ⇒ <a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>
    case <span title="scala.concurrent.duration.Duration">x</span> if <span title="=&gt; Boolean">!</span><span title="scala.concurrent.duration.Duration">x</span>.<span title="()Boolean">isFinite</span>             ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;max duration cannot be infinite&quot;)" class="string">&quot;max duration cannot be infinite&quot;</span><span class="delimiter">)</span>
    case <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.remainingOrDilated.f">f</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>            ⇒ <a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">f</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Query queue status.
   */</span>
  def <a title="=&gt; Boolean" id="akka.testkit;TestKitBase.msgAvailable">msgAvailable</a> = <span title="=&gt; Boolean">!</span><a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="()Boolean">isEmpty</span>

  <span class="comment">/**
   * Await until the given condition evaluates to `true` or the timeout
   * expires, whichever comes first.
   *
   * If no timeout is given, take it from the innermost enclosing `within`
   * block.
   *
   * Note that the timeout is scaled using Duration.dilated,
   * which uses the configuration entry &quot;akka.test.timefactor&quot;.
   */</span>
  def <a title="(p: =&gt; Boolean, max: scala.concurrent.duration.Duration, interval: scala.concurrent.duration.Duration, message: String)Unit" id="akka.testkit;TestKitBase.awaitCond">awaitCond</a><span class="delimiter">(</span><a title="=&gt; Boolean" id="akka.testkit;TestKitBase.awaitCond.p">p</a>: ⇒ Boolean, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitCond$default$2">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitCond$default$3">interval</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">100</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>, <a title="String" id="akka.testkit;TestKitBase.awaitCond$default$4">message</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.awaitCond._max">_max</a> = <a href="#akka.testkit;TestKitBase.remainingOrDilated" title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration">remainingOrDilated</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitCond$default$2" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    val stop = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.awaitCond.stop">+</a> <a href="#akka.testkit;TestKitBase.awaitCond._max" title="scala.concurrent.duration.FiniteDuration">_max</a>

    @tailrec
    def <a title="(t: scala.concurrent.duration.Duration)Unit" id="akka.testkit;TestKitBase.awaitCond.poll">poll</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitCond.poll.t">t</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.testkit;TestKitBase.awaitCond.p" title="=&gt; Boolean">p</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;</span> <a href="#akka.testkit;TestKitBase.awaitCond.stop" title="scala.concurrent.duration.FiniteDuration">stop</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout &quot;)">timeout $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.awaitCond._max" title="scala.concurrent.duration.FiniteDuration">_max</a><span class="delimiter">}</span><span title="String(&quot; expired: &quot;)"> expired: $</span><a href="#akka.testkit;TestKitBase.awaitCond$default$4" title="String">message</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        <span title="Thread.type">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitCond.poll.t" title="scala.concurrent.duration.Duration">t</a>.<span title="=&gt; Long">toMillis</span><span class="delimiter">)</span>
        <a href="#akka.testkit;TestKitBase.awaitCond.poll" title="(t: scala.concurrent.duration.Duration)Unit">poll</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitCond.stop" title="scala.concurrent.duration.FiniteDuration">stop</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a><span class="delimiter">)</span> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit;TestKitBase.awaitCond$default$3" title="scala.concurrent.duration.Duration">interval</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#akka.testkit;TestKitBase.awaitCond.poll" title="(t: scala.concurrent.duration.Duration)Unit">poll</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitCond._max" title="scala.concurrent.duration.FiniteDuration">_max</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit;TestKitBase.awaitCond$default$3" title="scala.concurrent.duration.Duration">interval</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Await until the given assert does not throw an exception or the timeout
   * expires, whichever comes first. If the timeout expires the last exception
   * is thrown.
   *
   * If no timeout is given, take it from the innermost enclosing `within`
   * block.
   *
   * Note that the timeout is scaled using Duration.dilated,
   * which uses the configuration entry &quot;akka.test.timefactor&quot;.
   */</span>
  def <a title="(a: =&gt; Any, max: scala.concurrent.duration.Duration, interval: scala.concurrent.duration.Duration)Unit" id="akka.testkit;TestKitBase.awaitAssert">awaitAssert</a><span class="delimiter">(</span><a title="=&gt; Any" id="akka.testkit;TestKitBase.awaitAssert.a">a</a>: ⇒ Any, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitAssert$default$2">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitAssert$default$3">interval</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">100</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.awaitAssert._max">_max</a> = <a href="#akka.testkit;TestKitBase.remainingOrDilated" title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration">remainingOrDilated</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitAssert$default$2" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    val stop = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.awaitAssert.stop">+</a> <a href="#akka.testkit;TestKitBase.awaitAssert._max" title="scala.concurrent.duration.FiniteDuration">_max</a>

    @tailrec
    def <a title="(t: scala.concurrent.duration.Duration)Unit" id="akka.testkit;TestKitBase.awaitAssert.poll">poll</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.awaitAssert.poll.t">t</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="Boolean" id="akka.testkit;TestKitBase.awaitAssert.poll.failed">failed</a> =
        try <span class="delimiter">{</span> <a href="#akka.testkit;TestKitBase.awaitAssert.a" title="=&gt; Any">a</a>; false <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <a href="#akka.testkit;TestKitBase.awaitAssert.poll.failed.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.testkit;TestKitBase.awaitAssert.poll.failed.e">e</a><span class="delimiter">)</span> ⇒
            if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">+</span> <a href="#akka.testkit;TestKitBase.awaitAssert.poll.t" title="scala.concurrent.duration.Duration">t</a><span class="delimiter">)</span> <span title="(that: scala.concurrent.duration.Duration)Boolean">&gt;=</span> <a href="#akka.testkit;TestKitBase.awaitAssert.stop" title="scala.concurrent.duration.FiniteDuration">stop</a><span class="delimiter">)</span> throw <a href="#akka.testkit;TestKitBase.awaitAssert.poll.failed.e" title="Throwable">e</a>
            true
        <span class="delimiter">}</span>
      if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitAssert.poll.failed" title="Boolean">failed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Thread.type">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitAssert.poll.t" title="scala.concurrent.duration.Duration">t</a>.<span title="=&gt; Long">toMillis</span><span class="delimiter">)</span>
        <a href="#akka.testkit;TestKitBase.awaitAssert.poll" title="(t: scala.concurrent.duration.Duration)Unit">poll</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitAssert.stop" title="scala.concurrent.duration.FiniteDuration">stop</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a><span class="delimiter">)</span> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit;TestKitBase.awaitAssert$default$3" title="scala.concurrent.duration.Duration">interval</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#akka.testkit;TestKitBase.awaitAssert.poll" title="(t: scala.concurrent.duration.Duration)Unit">poll</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.awaitAssert._max" title="scala.concurrent.duration.FiniteDuration">_max</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit;TestKitBase.awaitAssert$default$3" title="scala.concurrent.duration.Duration">interval</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute code block while bounding its execution time between `min` and
   * `max`. `within` blocks may be nested. All methods in this trait which
   * take maximum wait times are available in a version which implicitly uses
   * the remaining time governed by the innermost enclosing `within` block.
   *
   * Note that the timeout is scaled using Duration.dilated, which uses the
   * configuration entry &quot;akka.test.timefactor&quot;, while the min Duration is not.
   *
   * {{{
   * val ret = within(50 millis) {
   *   test ! &quot;ping&quot;
   *   expectMsgClass(classOf[String])
   * }
   * }}}
   */</span>
  def <a title="[T](min: scala.concurrent.duration.FiniteDuration, max: scala.concurrent.duration.FiniteDuration)(f: =&gt; T)T" id="akka.testkit;TestKitBase.within(d52c6cc836)">within</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.within(d52c6cc836);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(d52c6cc836).min">min</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(d52c6cc836).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit;TestKitBase.within(d52c6cc836).f">f</a>: ⇒ T<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.within(d52c6cc836);T" title="T">T</a> = <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(d52c6cc836)._max">_max</a> = <a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(d52c6cc836).start">start</a> = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a>
    val <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.within(d52c6cc836).rem">rem</a> = if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.end_=" title="=&gt; scala.concurrent.duration.Duration">end</a> <span title="(x$1: Any)Boolean">==</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span><span class="delimiter">)</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span> else <a href="#akka.testkit;TestKitBase.end_=" title="=&gt; scala.concurrent.duration.Duration">end</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">-</span> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).start" title="scala.concurrent.duration.FiniteDuration">start</a>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).rem" title="scala.concurrent.duration.Duration">rem</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&gt;=</span> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;required min time &quot;)">required min time $</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a><span title="String(&quot; not possible, only &quot;)"> not possible, only $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.format" title="(u: java.util.concurrent.TimeUnit, d: scala.concurrent.duration.Duration)String">format</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span>, <a href="#akka.testkit;TestKitBase.within(d52c6cc836).rem" title="scala.concurrent.duration.Duration">rem</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot; left&quot;)" class="string"> left&quot;</span><span class="delimiter">)</span>

    <a href="#akka.testkit;TestKitBase.lastWasNoMsg_=" title="(x$1: Boolean)Unit">lastWasNoMsg</a> = false

    val max_diff = <a href="#akka.testkit;TestKitBase.within(d52c6cc836)._max" title="scala.concurrent.duration.FiniteDuration">_max</a> <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.within(d52c6cc836).max_diff">min</a> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).rem" title="scala.concurrent.duration.Duration">rem</a>
    val <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.within(d52c6cc836).prev_end">prev_end</a> = <a href="#akka.testkit;TestKitBase.end_=" title="=&gt; scala.concurrent.duration.Duration">end</a>
    <a href="#akka.testkit;TestKitBase.end_=" title="(x$1: scala.concurrent.duration.Duration)Unit">end</a> = <a href="#akka.testkit;TestKitBase.within(d52c6cc836).start" title="scala.concurrent.duration.FiniteDuration">start</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">+</span> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).max_diff" title="scala.concurrent.duration.Duration">max_diff</a>

    val <a title="T" id="akka.testkit;TestKitBase.within(d52c6cc836).ret">ret</a> = try <a href="#akka.testkit;TestKitBase.within(d52c6cc836).f" title="=&gt; T">f</a> finally <a href="#akka.testkit;TestKitBase.end_=" title="(x$1: scala.concurrent.duration.Duration)Unit">end</a> = <a href="#akka.testkit;TestKitBase.within(d52c6cc836).prev_end" title="scala.concurrent.duration.Duration">prev_end</a>

    val diff = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(d52c6cc836).diff">-</a> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).start" title="scala.concurrent.duration.FiniteDuration">start</a>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;=</span> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).diff" title="scala.concurrent.duration.FiniteDuration">diff</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;block took &quot;)">block took $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.format" title="(u: java.util.concurrent.TimeUnit, d: scala.concurrent.duration.Duration)String">format</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span>, <a href="#akka.testkit;TestKitBase.within(d52c6cc836).diff" title="scala.concurrent.duration.FiniteDuration">diff</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;, should at least have been &quot;)">, should at least have been $</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).min" title="scala.concurrent.duration.FiniteDuration">min</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.testkit;TestKitBase.lastWasNoMsg_=" title="=&gt; Boolean">lastWasNoMsg</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836).diff" title="scala.concurrent.duration.FiniteDuration">diff</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;=</span> <a href="#akka.testkit;TestKitBase.within(d52c6cc836).max_diff" title="scala.concurrent.duration.Duration">max_diff</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;block took &quot;)">block took $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.format" title="(u: java.util.concurrent.TimeUnit, d: scala.concurrent.duration.Duration)String">format</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836)._max" title="scala.concurrent.duration.FiniteDuration">_max</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span>, <a href="#akka.testkit;TestKitBase.within(d52c6cc836).diff" title="scala.concurrent.duration.FiniteDuration">diff</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;, exceeding &quot;)">, exceeding $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.format" title="(u: java.util.concurrent.TimeUnit, d: scala.concurrent.duration.Duration)String">format</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(d52c6cc836)._max" title="scala.concurrent.duration.FiniteDuration">_max</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span>, <a href="#akka.testkit;TestKitBase.within(d52c6cc836).max_diff" title="scala.concurrent.duration.Duration">max_diff</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.testkit;TestKitBase.within(d52c6cc836).ret" title="T">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as calling `within(0 seconds, max)(f)`.
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration)(f: =&gt; T)T" id="akka.testkit;TestKitBase.within(4d29560fcd)">within</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.within(4d29560fcd);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.within(4d29560fcd).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.testkit;TestKitBase.within(4d29560fcd).f">f</a>: ⇒ T<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.within(4d29560fcd);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.within(d52c6cc836)" title="(min: scala.concurrent.duration.FiniteDuration, max: scala.concurrent.duration.FiniteDuration)(f: =&gt; T)T">within</a><span class="delimiter">(</span><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">0</span> <span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span>, <a href="#akka.testkit;TestKitBase.within(4d29560fcd).max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.within(4d29560fcd).f" title="=&gt; T">f</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Same as `expectMsg(remainingOrDefault, obj)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](obj: T)T" id="akka.testkit;TestKitBase.expectMsg(7fc046882a)">expectMsg</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsg(7fc046882a);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="akka.testkit;TestKitBase.expectMsg(7fc046882a).obj">obj</a>: <a href="#akka.testkit;TestKitBase.expectMsg(7fc046882a);T" title="T">T</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsg(7fc046882a);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsg_internal" title="(max: scala.concurrent.duration.Duration, obj: T, hint: Option[String])T">expectMsg_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsg(7fc046882a).obj" title="T">obj</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it equals the
   * given object. Wait time is bounded by the given duration, with an
   * AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: T)T" id="akka.testkit;TestKitBase.expectMsg(23711c1182)">expectMsg</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsg(23711c1182);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsg(23711c1182).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="T" id="akka.testkit;TestKitBase.expectMsg(23711c1182).obj">obj</a>: <a href="#akka.testkit;TestKitBase.expectMsg(23711c1182);T" title="T">T</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsg(23711c1182);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsg_internal" title="(max: scala.concurrent.duration.Duration, obj: T, hint: Option[String])T">expectMsg_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsg(23711c1182).obj" title="T">obj</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it equals the
   * given object. Wait time is bounded by the given duration, with an
   * AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, hint: String, obj: T)T" id="akka.testkit;TestKitBase.expectMsg(10d6c43cb1)">expectMsg</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsg(10d6c43cb1);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsg(10d6c43cb1).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="String" id="akka.testkit;TestKitBase.expectMsg(10d6c43cb1).hint">hint</a>: <span title="String">String</span>, <a title="T" id="akka.testkit;TestKitBase.expectMsg(10d6c43cb1).obj">obj</a>: <a href="#akka.testkit;TestKitBase.expectMsg(10d6c43cb1);T" title="T">T</a><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsg(10d6c43cb1);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsg_internal" title="(max: scala.concurrent.duration.Duration, obj: T, hint: Option[String])T">expectMsg_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsg(10d6c43cb1).obj" title="T">obj</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsg(10d6c43cb1).hint" title="String">hint</a><span class="delimiter">)</span><span class="delimiter">)</span>

  private def <a title="[T](max: scala.concurrent.duration.Duration, obj: T, hint: Option[String])T" id="akka.testkit;TestKitBase.expectMsg_internal">expectMsg_internal</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsg_internal$default$3;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.expectMsg_internal.max">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span>, <a title="T" id="akka.testkit;TestKitBase.expectMsg_internal.obj">obj</a>: <a href="#akka.testkit;TestKitBase.expectMsg_internal$default$3;T" title="T">T</a>, <a title="Option[String]" id="akka.testkit;TestKitBase.expectMsg_internal$default$3">hint</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="None.type">None</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsg_internal$default$3;T" title="T">T</a> = <span class="delimiter">{</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectMsg_internal.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.max" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    val <a title="String" id="akka.testkit;TestKitBase.expectMsg_internal.hintOrEmptyString">hintOrEmptyString</a> = <a href="#akka.testkit;TestKitBase.expectMsg_internal$default$3" title="Option[String]">hint</a>.<span title="(f: String =&gt; String)Option[String]">map</span><span class="delimiter">(</span><span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit;TestKitBase.expectMsg_internal.hintOrEmptyString.$anonfun.x$1" title="String">_</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.max" title="scala.concurrent.duration.Duration">max</a><span title="String(&quot;) during expectMsg while waiting for &quot;)">) during expectMsg while waiting for $</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.obj" title="T">obj</a><span title="String(&quot;&quot;)" class="string">&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit;TestKitBase.expectMsg_internal.hintOrEmptyString" title="String">hintOrEmptyString</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.obj" title="T">obj</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.testkit;TestKitBase.expectMsg_internal.o" title="AnyRef">o</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;expected &quot;)">expected $</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.obj" title="T">obj</a><span title="String(&quot;, found &quot;)">, found $</span><a href="#akka.testkit;TestKitBase.expectMsg_internal.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit;TestKitBase.expectMsg_internal.hintOrEmptyString" title="String">hintOrEmptyString</a><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsg_internal.o" title="AnyRef">o</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.testkit;TestKitBase.expectMsg_internal$default$3;T" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that the given
   * partial function accepts it. Wait time is bounded by the given duration,
   * with an AssertionFailure being thrown in case of timeout.
   *
   * Use this variant to implement more complicated or conditional
   * processing.
   *
   * @return the received object as transformed by the partial function
   */</span>
  def <a title="[T](max: scala.concurrent.duration.Duration, hint: String)(f: PartialFunction[Any,T])T" id="akka.testkit;TestKitBase.expectMsgPF">expectMsgPF</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgPF$default$2;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.expectMsgPF$default$1">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>, <a title="String" id="akka.testkit;TestKitBase.expectMsgPF$default$2">hint</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,T]" id="akka.testkit;TestKitBase.expectMsgPF.f">f</a>: <span title="PartialFunction[Any,T]">PartialFunction</span><span class="delimiter">[</span>Any, T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgPF$default$2;T" title="T">T</a> = <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgPF._max">_max</a> = <a href="#akka.testkit;TestKitBase.remainingOrDilated" title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration">remainingOrDilated</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF$default$1" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectMsgPF.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF._max" title="scala.concurrent.duration.FiniteDuration">_max</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.expectMsgPF._max" title="scala.concurrent.duration.FiniteDuration">_max</a><span class="delimiter">}</span><span title="String(&quot;) during expectMsg: &quot;)">) during expectMsg: $</span><a href="#akka.testkit;TestKitBase.expectMsgPF$default$2" title="String">hint</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF.f" title="PartialFunction[Any,T]">f</a>.<span title="(x: Any)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF.o" title="AnyRef">o</a><span class="delimiter">)</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;expected: &quot;)">expected: $</span><a href="#akka.testkit;TestKitBase.expectMsgPF$default$2" title="String">hint</a><span title="String(&quot; but got unexpected message &quot;)"> but got unexpected message $</span><a href="#akka.testkit;TestKitBase.expectMsgPF.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsgPF.f" title="(v1: Any)T">f</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgPF.o" title="AnyRef">o</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it is the Terminated message of the given ActorRef.
   * Wait time is bounded by the given duration, with an AssertionFailure being thrown in case of timeout.
   *
   * @return the received Terminated message
   */</span>
  def <a title="(target: akka.actor.ActorRef, max: scala.concurrent.duration.Duration)akka.actor.Terminated" id="akka.testkit;TestKitBase.expectTerminated">expectTerminated</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestKitBase.expectTerminated.target">target</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.expectTerminated$default$2">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Terminated" title="akka.actor.Terminated">Terminated</a> =
    <a href="#akka.testkit;TestKitBase.expectMsgPF" title="(max: scala.concurrent.duration.Duration, hint: String)(f: PartialFunction[Any,akka.actor.Terminated])akka.actor.Terminated">expectMsgPF</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectTerminated$default$2" title="scala.concurrent.duration.Duration">max</a>, <span title="String(&quot;Terminated &quot;)" class="string">&quot;Terminated &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.testkit;TestKitBase.expectTerminated.target" title="akka.actor.ActorRef">target</a><span class="delimiter">)</span> <a title="&lt;$anon: Any =&gt; akka.actor.Terminated&gt; extends scala.runtime.AbstractPartialFunction[Any,akka.actor.Terminated] with Serializable" id="akka.testkit;TestKitBase.expectTerminated;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a title="akka.actor.Terminated" id="akka.testkit;TestKitBase.expectTerminated;$anonfun.isDefinedAt.t">t</a> @ Terminated<span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectTerminated.target" title="akka.actor.ActorRef">`target`</a><span class="delimiter">)</span> ⇒ <a href="#akka.testkit;TestKitBase.expectTerminated;$anonfun.isDefinedAt.t" title="akka.actor.Terminated">t</a>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Hybrid of expectMsgPF and receiveWhile: receive messages while the
   * partial function matches and returns false. Use it to ignore certain
   * messages while waiting for a specific message.
   *
   * @return the last received message, i.e. the first one for which the
   *         partial function returned true
   */</span>
  def <a title="(max: scala.concurrent.duration.Duration, hint: String)(f: PartialFunction[Any,Boolean])Any" id="akka.testkit;TestKitBase.fishForMessage">fishForMessage</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.fishForMessage$default$1">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>, <a title="String" id="akka.testkit;TestKitBase.fishForMessage$default$2">hint</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,Boolean]" id="akka.testkit;TestKitBase.fishForMessage.f">f</a>: <span title="PartialFunction[Any,Boolean]">PartialFunction</span><span class="delimiter">[</span>Any, Boolean<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Any">Any</span> = <span class="delimiter">{</span>
    val <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.fishForMessage._max">_max</a> = <a href="#akka.testkit;TestKitBase.remainingOrDilated" title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration">remainingOrDilated</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage$default$1" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    val end = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.fishForMessage.end">+</a> <a href="#akka.testkit;TestKitBase.fishForMessage._max" title="scala.concurrent.duration.FiniteDuration">_max</a>
    @tailrec
    def <a title="=&gt; Any" id="akka.testkit;TestKitBase.fishForMessage.recv">recv</a>: <span title="Any">Any</span> = <span class="delimiter">{</span>
      val <a title="AnyRef" id="akka.testkit;TestKitBase.fishForMessage.recv.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.end" title="scala.concurrent.duration.FiniteDuration">end</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a><span class="delimiter">)</span>
      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.recv.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.fishForMessage._max" title="scala.concurrent.duration.FiniteDuration">_max</a><span class="delimiter">}</span><span title="String(&quot;) during fishForMessage, hint: &quot;)">) during fishForMessage, hint: $</span><a href="#akka.testkit;TestKitBase.fishForMessage$default$2" title="String">hint</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.f" title="PartialFunction[Any,Boolean]">f</a>.<span title="(x: Any)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.recv.o" title="AnyRef">o</a><span class="delimiter">)</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;fishForMessage(&quot;)">fishForMessage($</span><a href="#akka.testkit;TestKitBase.fishForMessage$default$2" title="String">hint</a><span title="String(&quot;) found unexpected message &quot;)">) found unexpected message $</span><a href="#akka.testkit;TestKitBase.fishForMessage.recv.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.f" title="(v1: Any)Boolean">f</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.fishForMessage.recv.o" title="AnyRef">o</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.testkit;TestKitBase.fishForMessage.recv.o" title="AnyRef">o</a> else <a href="#akka.testkit;TestKitBase.fishForMessage.recv" title="=&gt; Any">recv</a>
    <span class="delimiter">}</span>
    <a href="#akka.testkit;TestKitBase.fishForMessage.recv" title="=&gt; Any">recv</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgType[T](remainingOrDefault)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](implicit t: scala.reflect.ClassTag[T])T" id="akka.testkit;TestKitBase.expectMsgType(cc40d3867e)">expectMsgType</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgType(cc40d3867e);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span>implicit <a title="scala.reflect.ClassTag[T]" id="akka.testkit;TestKitBase.expectMsgType(cc40d3867e).t">t</a>: <span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgType(cc40d3867e);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsgClass_internal" title="(max: scala.concurrent.duration.FiniteDuration, c: Class[T])T">expectMsgClass_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgType(cc40d3867e).t" title="scala.reflect.ClassTag[T]">t</a>.<span title="=&gt; Class[_]">runtimeClass</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it conforms to the
   * given type (after erasure). Wait time is bounded by the given duration,
   * with an AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration)(implicit t: scala.reflect.ClassTag[T])T" id="akka.testkit;TestKitBase.expectMsgType(2e02418cca)">expectMsgType</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgType(2e02418cca);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgType(2e02418cca).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.reflect.ClassTag[T]" id="akka.testkit;TestKitBase.expectMsgType(2e02418cca).t">t</a>: <span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgType(2e02418cca);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsgClass_internal" title="(max: scala.concurrent.duration.FiniteDuration, c: Class[T])T">expectMsgClass_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgType(2e02418cca).t" title="scala.reflect.ClassTag[T]">t</a>.<span title="=&gt; Class[_]">runtimeClass</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Same as `expectMsgClass(remainingOrDefault, c)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[C](c: Class[C])C" id="akka.testkit;TestKitBase.expectMsgClass(ca5f178cb1)">expectMsgClass</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgClass(ca5f178cb1);C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[C]" id="akka.testkit;TestKitBase.expectMsgClass(ca5f178cb1).c">c</a>: <span title="Class[C]">Class</span><span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgClass(ca5f178cb1);C" title="C">C</a> = <a href="#akka.testkit;TestKitBase.expectMsgClass_internal" title="(max: scala.concurrent.duration.FiniteDuration, c: Class[C])C">expectMsgClass_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgClass(ca5f178cb1).c" title="Class[C]">c</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it conforms to
   * the given class. Wait time is bounded by the given duration, with an
   * AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[C](max: scala.concurrent.duration.FiniteDuration, c: Class[C])C" id="akka.testkit;TestKitBase.expectMsgClass(628aee80b6)">expectMsgClass</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgClass(628aee80b6);C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgClass(628aee80b6).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[C]" id="akka.testkit;TestKitBase.expectMsgClass(628aee80b6).c">c</a>: <span title="Class[C]">Class</span><span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgClass(628aee80b6);C" title="C">C</a> = <a href="#akka.testkit;TestKitBase.expectMsgClass_internal" title="(max: scala.concurrent.duration.FiniteDuration, c: Class[C])C">expectMsgClass_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgClass(628aee80b6).c" title="Class[C]">c</a><span class="delimiter">)</span>

  private def <a title="[C](max: scala.concurrent.duration.FiniteDuration, c: Class[C])C" id="akka.testkit;TestKitBase.expectMsgClass_internal">expectMsgClass_internal</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgClass_internal;C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgClass_internal.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[C]" id="akka.testkit;TestKitBase.expectMsgClass_internal.c">c</a>: <span title="Class[C]">Class</span><span class="delimiter">[</span>C<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgClass_internal;C" title="C">C</a> = <span class="delimiter">{</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectMsgClass_internal.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span title="String(&quot;) during expectMsgClass waiting for &quot;)">) during expectMsgClass waiting for $</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.c" title="Class[C]">c</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.c" title="Class[C]">c</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">isInstance</span> <a href="#akka.testkit;TestKitBase.expectMsgClass_internal.o" title="AnyRef">o</a>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;expected &quot;)">expected $</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.c" title="Class[C]">c</a><span title="String(&quot;, found &quot;)">, found $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal.o" title="AnyRef">o</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsgClass_internal.o" title="AnyRef">o</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#akka.testkit;TestKitBase.expectMsgClass_internal;C" title="C">C</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgAnyOf(remainingOrDefault, obj...)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](obj: T*)T" id="akka.testkit;TestKitBase.expectMsgAnyOf(6da1300ad0)">expectMsgAnyOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyOf(6da1300ad0);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T*" id="akka.testkit;TestKitBase.expectMsgAnyOf(6da1300ad0).obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyOf(6da1300ad0);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: T*)T">expectMsgAnyOf_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgAnyOf(6da1300ad0).obj" title="T*">obj</a>: _*<span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it equals one of
   * the given objects. Wait time is bounded by the given duration, with an
   * AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: T*)T" id="akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292)">expectMsgAnyOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="T*" id="akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292).obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292);T" title="T">T</a> = <a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: T*)T">expectMsgAnyOf_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgAnyOf(3418bfb292).obj" title="T*">obj</a>: _*<span class="delimiter">)</span>

  private def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: T*)T" id="akka.testkit;TestKitBase.expectMsgAnyOf_internal">expectMsgAnyOf_internal</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyOf_internal;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAnyOf_internal.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="T*" id="akka.testkit;TestKitBase.expectMsgAnyOf_internal.obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal;T" title="T">T</a> = <span class="delimiter">{</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectMsgAnyOf_internal.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span title="String(&quot;) during expectMsgAnyOf waiting for &quot;)">) during expectMsgAnyOf waiting for $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.obj" title="T*">obj</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.obj" title="T*">obj</a> <span title="(p: T =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.$anonfun.x$2" title="T">_</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.o" title="AnyRef">o</a><span class="delimiter">)</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;found unexpected &quot;)">found unexpected $</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal.o" title="AnyRef">o</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#akka.testkit;TestKitBase.expectMsgAnyOf_internal;T" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgAnyClassOf(remainingOrDefault, obj...)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[C](obj: Class[_ &lt;: C]*)C" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(453149f6e9)">expectMsgAnyClassOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(453149f6e9);C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[_ &lt;: C]*" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(453149f6e9).obj">obj</a>: <span title="Class[_ &lt;: C]*">Class</span><span class="delimiter">[</span>_ &lt;: C<span class="delimiter">]</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf(453149f6e9);C" title="C">C</a> = <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$1]*)_$1">expectMsgAnyClassOf_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf(453149f6e9).obj" title="Class[_ &lt;: C]*">obj</a>: _*<span class="delimiter">)</span>

  <span class="comment">/**
   * Receive one message from the test actor and assert that it conforms to
   * one of the given classes. Wait time is bounded by the given duration,
   * with an AssertionFailure being thrown in case of timeout.
   *
   * @return the received object
   */</span>
  def <a title="[C](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: C]*)C" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de)">expectMsgAnyClassOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de);C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: C]*" id="akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de).obj">obj</a>: <span title="Class[_ &lt;: C]*">Class</span><span class="delimiter">[</span>_ &lt;: C<span class="delimiter">]</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de);C" title="C">C</a> = <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$2]*)_$2">expectMsgAnyClassOf_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf(293984d5de).obj" title="Class[_ &lt;: C]*">obj</a>: _*<span class="delimiter">)</span>

  private def <a title="[C](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: C]*)C" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal">expectMsgAnyClassOf_internal</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal;C">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: C]*" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.obj">obj</a>: <span title="Class[_ &lt;: C]*">Class</span><span class="delimiter">[</span>_ &lt;: C<span class="delimiter">]</span>*<span class="delimiter">)</span>: <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal;C" title="C">C</a> = <span class="delimiter">{</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span title="String(&quot;) during expectMsgAnyClassOf waiting for &quot;)">) during expectMsgAnyClassOf waiting for $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.obj" title="Class[_ &lt;: C]*">obj</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.obj" title="Class[_ &lt;: C]*">obj</a> <span title="(p: Class[_ &lt;: C] =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a title="Class[_ &lt;: C]" id="akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.$anonfun.c">c</a> ⇒ <a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.$anonfun.c" title="Class[_ &lt;: C]">c</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">isInstance</span> <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.o" title="AnyRef">o</a><span class="delimiter">)</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;found unexpected &quot;)">found unexpected $</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal.o" title="AnyRef">o</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#akka.testkit;TestKitBase.expectMsgAnyClassOf_internal;C" title="C">C</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgAllOf(remainingOrDefault, obj...)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](obj: T*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllOf(bb2c57b13d)">expectMsgAllOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllOf(bb2c57b13d);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T*" id="akka.testkit;TestKitBase.expectMsgAllOf(bb2c57b13d).obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: T*)scala.collection.immutable.Seq[T]">expectMsgAllOf_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllOf(bb2c57b13d).obj" title="T*">obj</a>: _*<span class="delimiter">)</span>

  <span class="comment">/**
   * Receive a number of messages from the test actor matching the given
   * number of objects and assert that for each given object one is received
   * which equals it and vice versa. This construct is useful when the order in
   * which the objects are received is not fixed. Wait time is bounded by the
   * given duration, with an AssertionFailure being thrown in case of timeout.
   *
   * &lt;pre&gt;
   *   dispatcher ! SomeWork1()
   *   dispatcher ! SomeWork2()
   *   expectMsgAllOf(1 second, Result1(), Result2())
   * &lt;/pre&gt;
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: T*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllOf(d51965f58e)">expectMsgAllOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllOf(d51965f58e);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAllOf(d51965f58e).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="T*" id="akka.testkit;TestKitBase.expectMsgAllOf(d51965f58e).obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal" title="(max: scala.concurrent.duration.FiniteDuration, obj: T*)scala.collection.immutable.Seq[T]">expectMsgAllOf_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllOf(d51965f58e).obj" title="T*">obj</a>: _*<span class="delimiter">)</span>

  private def <a title="(missing: Seq[Any], unexpected: Seq[Any], missingMessage: String, unexpectedMessage: String)Unit" id="akka.testkit;TestKitBase.checkMissingAndUnexpected">checkMissingAndUnexpected</a><span class="delimiter">(</span><a title="Seq[Any]" id="akka.testkit;TestKitBase.checkMissingAndUnexpected.missing">missing</a>: <span title="Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="Seq[Any]" id="akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpected">unexpected</a>: <span title="Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span>,
                                        <a title="String" id="akka.testkit;TestKitBase.checkMissingAndUnexpected.missingMessage">missingMessage</a>: <span title="String">String</span>, <a title="String" id="akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpectedMessage">unexpectedMessage</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.missing" title="Seq[Any]">missing</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpected" title="Seq[Any]">unexpected</a>.<span title="=&gt; Boolean">isEmpty</span>,
      <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.missing" title="Seq[Any]">missing</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> else <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.missing" title="Seq[Any]">missing</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.missingMessage" title="String">missingMessage</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; [&quot;)" class="string">&quot; [&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;] &quot;)" class="string">&quot;] &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
        <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpected" title="Seq[Any]">unexpected</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> else <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpected" title="Seq[Any]">unexpected</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected.unexpectedMessage" title="String">unexpectedMessage</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; [&quot;)" class="string">&quot; [&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: T*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllOf_internal">expectMsgAllOf_internal</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllOf_internal;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="T*" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.obj">obj</a>: <span title="T*">T</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.recv">recv</a> = <a href="#akka.testkit;TestKitBase.receiveN_internal" title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]">receiveN_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.obj" title="T*">obj</a>.<span title="=&gt; Int">size</span>, <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    val missing = <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.obj" title="T*">obj</a> <a title="Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.missing">filterNot</a> <span class="delimiter">(</span><a title="T" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.missing.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <span title="(p: AnyRef =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.missing.$anonfun.x" title="T">x</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.missing.$anonfun.$anonfun.x$3" title="AnyRef">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    val unexpected = <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.unexpected">filterNot</a> <span class="delimiter">(</span><a title="AnyRef" id="akka.testkit;TestKitBase.expectMsgAllOf_internal.unexpected.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.obj" title="T*">obj</a> <span title="(p: T =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.unexpected.$anonfun.x" title="AnyRef">x</a> <span title="(x$1: Any)Boolean">==</span> <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.unexpected.$anonfun.$anonfun.x$4" title="T">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected" title="(missing: Seq[Any], unexpected: Seq[Any], missingMessage: String, unexpectedMessage: String)Unit">checkMissingAndUnexpected</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.missing" title="Seq[T]">missing</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.unexpected" title="scala.collection.immutable.Seq[AnyRef]">unexpected</a>, <span title="String(&quot;not found&quot;)" class="string">&quot;not found&quot;</span>, <span title="String(&quot;found unexpected&quot;)" class="string">&quot;found unexpected&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.expectMsgAllOf_internal.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.Seq[T]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgAllClassOf(remainingOrDefault, obj...)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllClassOf(15c8fbb6c1)">expectMsgAllClassOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllClassOf(15c8fbb6c1);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.expectMsgAllClassOf(15c8fbb6c1).obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$4]*)scala.collection.immutable.Seq[_$4]">internalExpectMsgAllClassOf</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllClassOf(15c8fbb6c1).obj" title="Class[_ &lt;: T]*">obj</a>: _*<span class="delimiter">)</span>

  <span class="comment">/**
   * Receive a number of messages from the test actor matching the given
   * number of classes and assert that for each given class one is received
   * which is of that class (equality, not conformance). This construct is
   * useful when the order in which the objects are received is not fixed.
   * Wait time is bounded by the given duration, with an AssertionFailure
   * being thrown in case of timeout.
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllClassOf(c44d075784)">expectMsgAllClassOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllClassOf(c44d075784);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAllClassOf(c44d075784).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.expectMsgAllClassOf(c44d075784).obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$5]*)scala.collection.immutable.Seq[_$5]">internalExpectMsgAllClassOf</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllClassOf(c44d075784).obj" title="Class[_ &lt;: T]*">obj</a>: _*<span class="delimiter">)</span>

  private def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf">internalExpectMsgAllClassOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.recv">recv</a> = <a href="#akka.testkit;TestKitBase.receiveN_internal" title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]">receiveN_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.obj" title="Class[_ &lt;: T]*">obj</a>.<span title="=&gt; Int">size</span>, <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    val missing = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.obj" title="Class[_ &lt;: T]*">obj</a> <a title="Seq[Class[_ &lt;: T]]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.missing">filterNot</a> <span class="delimiter">(</span><a title="Class[_ &lt;: T]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.missing.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <span title="(p: AnyRef =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.missing.$anonfun.$anonfun.x$5" title="AnyRef">_</a>.<span title="()Class[_]">getClass</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.missing.$anonfun.x" title="Class[_ &lt;: T]">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    val unexpected = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected">filterNot</a> <span class="delimiter">(</span><a title="AnyRef" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.obj" title="Class[_ &lt;: T]*">obj</a> <span title="(p: Class[_ &lt;: T] =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a title="Class[_ &lt;: T]" id="akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected.$anonfun.$anonfun.c">c</a> ⇒ <a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected.$anonfun.$anonfun.c" title="Class[_ &lt;: T]">c</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected.$anonfun.x" title="AnyRef">x</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected" title="(missing: Seq[Any], unexpected: Seq[Any], missingMessage: String, unexpectedMessage: String)Unit">checkMissingAndUnexpected</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.missing" title="Seq[Class[_ &lt;: T]]">missing</a>, <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.unexpected" title="scala.collection.immutable.Seq[AnyRef]">unexpected</a>, <span title="String(&quot;not found&quot;)" class="string">&quot;not found&quot;</span>, <span title="String(&quot;found non-matching object(s)&quot;)" class="string">&quot;found non-matching object(s)&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.internalExpectMsgAllClassOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.Seq[T]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectMsgAllConformingOf(remainingOrDefault, obj...)`, but correctly treating the timeFactor.
   */</span>
  def <a title="[T](obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(15c8fbb6c1)">expectMsgAllConformingOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(15c8fbb6c1);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(15c8fbb6c1).obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$7]*)scala.collection.immutable.Seq[_$7]">internalExpectMsgAllConformingOf</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllConformingOf(15c8fbb6c1).obj" title="Class[_ &lt;: T]*">obj</a>: _*<span class="delimiter">)</span>

  <span class="comment">/**
   * Receive a number of messages from the test actor matching the given
   * number of classes and assert that for each given class one is received
   * which conforms to that class (and vice versa). This construct is useful
   * when the order in which the objects are received is not fixed.  Wait time
   * is bounded by the given duration, with an AssertionFailure being thrown in
   * case of timeout.
   *
   * Beware that one object may satisfy all given class constraints, which
   * may be counter-intuitive.
   */</span>
  def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(c44d075784)">expectMsgAllConformingOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(c44d075784);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(c44d075784).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.expectMsgAllConformingOf(c44d075784).obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf" title="(max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: _$8]*)scala.collection.immutable.Seq[_$8]">internalExpectMsgAllConformingOf</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>, <a href="#akka.testkit;TestKitBase.expectMsgAllConformingOf(c44d075784).obj" title="Class[_ &lt;: T]*">obj</a>: _*<span class="delimiter">)</span>

  private def <a title="[T](max: scala.concurrent.duration.FiniteDuration, obj: Class[_ &lt;: T]*)scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf">internalExpectMsgAllConformingOf</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="Class[_ &lt;: T]*" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.obj">obj</a>: <span title="Class[_ &lt;: T]*">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span>*<span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.recv">recv</a> = <a href="#akka.testkit;TestKitBase.receiveN_internal" title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]">receiveN_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.obj" title="Class[_ &lt;: T]*">obj</a>.<span title="=&gt; Int">size</span>, <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    val missing = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.obj" title="Class[_ &lt;: T]*">obj</a> <a title="Seq[Class[_ &lt;: T]]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.missing">filterNot</a> <span class="delimiter">(</span><a title="Class[_ &lt;: T]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.missing.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <span title="(p: AnyRef =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.missing.$anonfun.x" title="Class[_ &lt;: T]">x</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">isInstance</span> <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.missing.$anonfun.$anonfun.x$6" title="AnyRef">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    val unexpected = <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a> <a title="scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected">filterNot</a> <span class="delimiter">(</span><a title="AnyRef" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected.$anonfun.x">x</a> ⇒ <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.obj" title="Class[_ &lt;: T]*">obj</a> <span title="(p: Class[_ &lt;: T] =&gt; Boolean)Boolean">exists</span> <span class="delimiter">(</span><a title="Class[_ &lt;: T]" id="akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected.$anonfun.$anonfun.c">c</a> ⇒ <a href="../../../actor/akka/util/BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected.$anonfun.$anonfun.c" title="Class[_ &lt;: T]">c</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">isInstance</span> <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected.$anonfun.x" title="AnyRef">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.checkMissingAndUnexpected" title="(missing: Seq[Any], unexpected: Seq[Any], missingMessage: String, unexpectedMessage: String)Unit">checkMissingAndUnexpected</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.missing" title="Seq[Class[_ &lt;: T]]">missing</a>, <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.unexpected" title="scala.collection.immutable.Seq[AnyRef]">unexpected</a>, <span title="String(&quot;not found&quot;)" class="string">&quot;not found&quot;</span>, <span title="String(&quot;found non-matching object(s)&quot;)" class="string">&quot;found non-matching object(s)&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.internalExpectMsgAllConformingOf.recv" title="scala.collection.immutable.Seq[AnyRef]">recv</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.immutable.Seq[T]" class="delimiter">[</span>immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `expectNoMsg(remainingOrDefault)`, but correctly treating the timeFactor.
   */</span>
  def <a title="()Unit" id="akka.testkit;TestKitBase.expectNoMsg(aa97cb1b3d)">expectNoMsg</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#akka.testkit;TestKitBase.expectNoMsg_internal" title="(max: scala.concurrent.duration.FiniteDuration)Unit">expectNoMsg_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="comment">/**
   * Assert that no message is received for the specified time.
   */</span>
  def <a title="(max: scala.concurrent.duration.FiniteDuration)Unit" id="akka.testkit;TestKitBase.expectNoMsg(a8f87e51de)">expectNoMsg</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectNoMsg(a8f87e51de).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#akka.testkit;TestKitBase.expectNoMsg_internal" title="(max: scala.concurrent.duration.FiniteDuration)Unit">expectNoMsg_internal</a><span class="delimiter">(</span><a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  private def <a title="(max: scala.concurrent.duration.FiniteDuration)Unit" id="akka.testkit;TestKitBase.expectNoMsg_internal">expectNoMsg_internal</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.expectNoMsg_internal.max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="AnyRef" id="akka.testkit;TestKitBase.expectNoMsg_internal.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectNoMsg_internal.max" title="scala.concurrent.duration.FiniteDuration">max</a><span class="delimiter">)</span>
    <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.expectNoMsg_internal.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">eq</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;received unexpected message &quot;)">received unexpected message $</span><a href="#akka.testkit;TestKitBase.expectNoMsg_internal.o" title="AnyRef">o</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.lastWasNoMsg_=" title="(x$1: Boolean)Unit">lastWasNoMsg</a> = true
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Receive a series of messages until one does not match the given partial
   * function or the idle timeout is met (disabled by default) or the overall
   * maximum duration is elapsed or expected messages count is reached.
   * Returns the sequence of messages.
   *
   * Note that it is not an error to hit the `max` duration in this case.
   *
   * One possible use of this method is for testing whether messages of
   * certain characteristics are generated at a certain rate:
   *
   * {{{
   * test ! ScheduleTicks(100 millis)
   * val series = receiveWhile(750 millis) {
   *     case Tick(count) =&gt; count
   * }
   * assert(series == (1 to 7).toList)
   * }}}
   */</span>
  def <a title="[T](max: scala.concurrent.duration.Duration, idle: scala.concurrent.duration.Duration, messages: Int)(f: PartialFunction[AnyRef,T])scala.collection.immutable.Seq[T]" id="akka.testkit;TestKitBase.receiveWhile">receiveWhile</a><span class="delimiter">[</span><a title="" id="akka.testkit;TestKitBase.receiveWhile$default$3;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveWhile$default$1">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Undefined</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveWhile$default$2">idle</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span>, <a title="Int" id="akka.testkit;TestKitBase.receiveWhile$default$3">messages</a>: <span title="Int">Int</span> = Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[AnyRef,T]" id="akka.testkit;TestKitBase.receiveWhile.f">f</a>: <span title="PartialFunction[AnyRef,T]">PartialFunction</span><span class="delimiter">[</span>AnyRef, T<span class="delimiter">]</span><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val stop = <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a> <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.receiveWhile.stop">+</a> <a href="#akka.testkit;TestKitBase.remainingOrDilated" title="(max: scala.concurrent.duration.Duration)scala.concurrent.duration.FiniteDuration">remainingOrDilated</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveWhile$default$1" title="scala.concurrent.duration.Duration">max</a><span class="delimiter">)</span>
    var <a title="akka.testkit.TestActor.Message" id="akka.testkit;TestKitBase.receiveWhile.msg">msg</a>: <a href="#akka.testkit.TestActor;Message" title="akka.testkit.TestActor.Message">Message</a> = <a href="#akka.testkit.TestActor.NullMessage.readResolve" title="akka.testkit.TestActor.NullMessage.type">NullMessage</a>

    @tailrec
    def <a title="(acc: List[T], count: Int)List[T]" id="akka.testkit;TestKitBase.receiveWhile.doit">doit</a><span class="delimiter">(</span><a title="List[T]" id="akka.testkit;TestKitBase.receiveWhile.doit.acc">acc</a>: <span title="List[T]">List</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Int" id="akka.testkit;TestKitBase.receiveWhile.doit.count">count</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="List[T]">List</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveWhile.doit.count" title="Int">count</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.testkit;TestKitBase.receiveWhile$default$3" title="Int">messages</a><span class="delimiter">)</span> <a href="#akka.testkit;TestKitBase.receiveWhile.doit.acc" title="List[T]">acc</a>.<span title="=&gt; List[T]">reverse</span>
      else <span class="delimiter">{</span>
        <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveWhile.stop" title="scala.concurrent.duration.FiniteDuration">stop</a> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">-</span> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a><span class="delimiter">)</span> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit;TestKitBase.receiveWhile$default$2" title="scala.concurrent.duration.Duration">idle</a><span class="delimiter">)</span>
        <a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a> match <span class="delimiter">{</span>
          case <a href="#akka.testkit.TestActor.NullMessage.readResolve" title="akka.testkit.TestActor.NullMessage.type">NullMessage</a> ⇒
            <a href="#akka.testkit;TestKitBase.lastMessage_=" title="(x$1: akka.testkit.TestActor.Message)Unit">lastMessage</a> = <a href="#akka.testkit;TestKitBase.receiveWhile.msg" title="akka.testkit.TestActor.Message">msg</a>
            <a href="#akka.testkit;TestKitBase.receiveWhile.doit.acc" title="List[T]">acc</a>.<span title="=&gt; List[T]">reverse</span>
          case RealMessage<span class="delimiter">(</span><span title="AnyRef">o</span>, _<span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveWhile.f" title="PartialFunction[AnyRef,T]">f</a> <span title="(x: AnyRef)Boolean">isDefinedAt</span> <span title="AnyRef">o</span><span class="delimiter">)</span> ⇒
            <a href="#akka.testkit;TestKitBase.receiveWhile.msg" title="akka.testkit.TestActor.Message">msg</a> = <a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a>
            <a href="#akka.testkit;TestKitBase.receiveWhile.doit" title="(acc: List[T], count: Int)List[T]">doit</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveWhile.f" title="(v1: AnyRef)T">f</a><span class="delimiter">(</span><span title="AnyRef">o</span><span class="delimiter">)</span> <a href="#akka.testkit;TestKitBase.receiveWhile.doit.x$7" title="(x: T)List[T]">::</a> <a href="#akka.testkit;TestKitBase.receiveWhile.doit.acc" title="List[T]">acc</a>, <a href="#akka.testkit;TestKitBase.receiveWhile.doit.count" title="Int">count</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          case RealMessage<span class="delimiter">(</span><span title="AnyRef">o</span>, _<span class="delimiter">)</span> ⇒
            <a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="(x$1: akka.testkit.TestActor.Message)Boolean">offerFirst</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a><span class="delimiter">)</span>
            <a href="#akka.testkit;TestKitBase.lastMessage_=" title="(x$1: akka.testkit.TestActor.Message)Unit">lastMessage</a> = <a href="#akka.testkit;TestKitBase.receiveWhile.msg" title="akka.testkit.TestActor.Message">msg</a>
            <a href="#akka.testkit;TestKitBase.receiveWhile.doit.acc" title="List[T]">acc</a>.<span title="=&gt; List[T]">reverse</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    val <a title="List[T]" id="akka.testkit;TestKitBase.receiveWhile.ret">ret</a> = <a href="#akka.testkit;TestKitBase.receiveWhile.doit" title="(acc: List[T], count: Int)List[T]">doit</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <a href="#akka.testkit;TestKitBase.lastWasNoMsg_=" title="(x$1: Boolean)Unit">lastWasNoMsg</a> = true
    <a href="#akka.testkit;TestKitBase.receiveWhile.ret" title="List[T]">ret</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Same as `receiveN(n, remaining)` but correctly taking into account
   * Duration.timeFactor.
   */</span>
  def <a title="(n: Int)scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.receiveN(d0d7e78c05)">receiveN</a><span class="delimiter">(</span><a title="Int" id="akka.testkit;TestKitBase.receiveN(d0d7e78c05).n">n</a>: <span title="Int">Int</span><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[AnyRef]">Seq</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.receiveN_internal" title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]">receiveN_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveN(d0d7e78c05).n" title="Int">n</a>, <a href="#akka.testkit;TestKitBase.remainingOrDefault" title="=&gt; scala.concurrent.duration.FiniteDuration">remainingOrDefault</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Receive N messages in a row before the given deadline.
   */</span>
  def <a title="(n: Int, max: scala.concurrent.duration.FiniteDuration)scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.receiveN(968d1db431)">receiveN</a><span class="delimiter">(</span><a title="Int" id="akka.testkit;TestKitBase.receiveN(968d1db431).n">n</a>: <span title="Int">Int</span>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.testkit;TestKitBase.receiveN(968d1db431).max">max</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[AnyRef]">Seq</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <a href="#akka.testkit;TestKitBase.receiveN_internal" title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]">receiveN_internal</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveN(968d1db431).n" title="Int">n</a>, <a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">max</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a><span class="delimiter">)</span>

  private def <a title="(n: Int, max: scala.concurrent.duration.Duration)scala.collection.immutable.Seq[AnyRef]" id="akka.testkit;TestKitBase.receiveN_internal">receiveN_internal</a><span class="delimiter">(</span><a title="Int" id="akka.testkit;TestKitBase.receiveN_internal.n">n</a>: <span title="Int">Int</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveN_internal.max">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[AnyRef]">Seq</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val stop = <a href="#akka.testkit;TestKitBase.receiveN_internal.max" title="scala.concurrent.duration.Duration">max</a> <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveN_internal.stop">+</a> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a>
    for <span class="delimiter">{</span> <a title="Int" id="akka.testkit;TestKitBase.receiveN_internal.$anonfun.x">x</a> ← <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; AnyRef)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],AnyRef,scala.collection.immutable.Seq[AnyRef]])scala.collection.immutable.Seq[AnyRef]">to</span> <a href="#akka.testkit;TestKitBase.receiveN_internal.n" title="Int">n</a> <span class="delimiter">}</span> yield <span class="delimiter">{</span>
      val timeout = <a href="#akka.testkit;TestKitBase.receiveN_internal.stop" title="scala.concurrent.duration.Duration">stop</a> <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveN_internal.$anonfun.timeout">-</a> <a href="#akka.testkit;TestKitBase.now" title="=&gt; scala.concurrent.duration.FiniteDuration">now</a>
      val <a title="AnyRef" id="akka.testkit;TestKitBase.receiveN_internal.$anonfun.o">o</a> = <a href="#akka.testkit;TestKitBase.receiveOne" title="(max: scala.concurrent.duration.Duration)AnyRef">receiveOne</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveN_internal.$anonfun.timeout" title="scala.concurrent.duration.Duration">timeout</a><span class="delimiter">)</span>
      <span title="(assertion: Boolean, message: =&gt; Any)Unit">assert</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveN_internal.$anonfun.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">ne</span> null, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout (&quot;)">timeout ($</span><a href="#akka.testkit;TestKitBase.receiveN_internal.max" title="scala.concurrent.duration.Duration">max</a><span title="String(&quot;) while expecting &quot;)">) while expecting $</span><a href="#akka.testkit;TestKitBase.receiveN_internal.n" title="Int">n</a><span title="String(&quot; messages (got &quot;)"> messages (got $</span><span class="delimiter">{</span><a href="#akka.testkit;TestKitBase.receiveN_internal.$anonfun.x" title="Int">x</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">}</span><span title="String(&quot;)&quot;)" class="string">)&quot;</span><span class="delimiter">)</span>
      <a href="#akka.testkit;TestKitBase.receiveN_internal.$anonfun.o" title="AnyRef">o</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Receive one message from the internal queue of the TestActor. If the given
   * duration is zero, the queue is polled (non-blocking).
   *
   * This method does NOT automatically scale its Duration parameter!
   */</span>
  def <a title="(max: scala.concurrent.duration.Duration)AnyRef" id="akka.testkit;TestKitBase.receiveOne">receiveOne</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.receiveOne.max">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <span title="AnyRef">AnyRef</span> = <span class="delimiter">{</span>
    val <a title="akka.testkit.TestActor.Message" id="akka.testkit;TestKitBase.receiveOne.message">message</a> =
      if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveOne.max" title="scala.concurrent.duration.Duration">max</a> <span title="(x$1: Any)Boolean">==</span> <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">0</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="()akka.testkit.TestActor.Message">pollFirst</span>
      <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveOne.max" title="scala.concurrent.duration.Duration">max</a>.<span title="()Boolean">isFinite</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)akka.testkit.TestActor.Message">pollFirst</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.receiveOne.max" title="scala.concurrent.duration.Duration">max</a>.<span title="=&gt; Long">length</span>, <a href="#akka.testkit;TestKitBase.receiveOne.max" title="scala.concurrent.duration.Duration">max</a>.<span title="=&gt; scala.concurrent.duration.TimeUnit">unit</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#akka.testkit;TestKitBase.queue" title="=&gt; java.util.concurrent.LinkedBlockingDeque[akka.testkit.TestActor.Message]">queue</a>.<span title="()akka.testkit.TestActor.Message">takeFirst</span>
      <span class="delimiter">}</span>
    <a href="#akka.testkit;TestKitBase.lastWasNoMsg_=" title="(x$1: Boolean)Unit">lastWasNoMsg</a> = false
    <a href="#akka.testkit;TestKitBase.receiveOne.message" title="akka.testkit.TestActor.Message">message</a> match <span class="delimiter">{</span>
      case null ⇒
        <a href="#akka.testkit;TestKitBase.lastMessage_=" title="(x$1: akka.testkit.TestActor.Message)Unit">lastMessage</a> = <a href="#akka.testkit.TestActor.NullMessage.readResolve" title="akka.testkit.TestActor.NullMessage.type">NullMessage</a>
        null
      case RealMessage<span class="delimiter">(</span><a title="AnyRef" id="akka.testkit;TestKitBase.receiveOne.msg">msg</a>, _<span class="delimiter">)</span> ⇒
        <a href="#akka.testkit;TestKitBase.lastMessage_=" title="(x$1: akka.testkit.TestActor.Message)Unit">lastMessage</a> = <a href="#akka.testkit;TestKitBase.receiveOne.message" title="akka.testkit.TestActor.Message">message</a>
        <a href="#akka.testkit;TestKitBase.receiveOne.msg" title="AnyRef">msg</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Shut down an actor system and wait for termination.
   * On failure debug output will be logged about the remaining actors in the system.
   *
   * If verifySystemShutdown is true, then an exception will be thrown on failure.
   */</span>
  def <a title="(actorSystem: akka.actor.ActorSystem, duration: scala.concurrent.duration.Duration, verifySystemShutdown: Boolean)Unit" id="akka.testkit;TestKitBase.shutdown">shutdown</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.testkit;TestKitBase.shutdown$default$1">actorSystem</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a> = <a href="#akka.testkit;TestKitBase.system" title="=&gt; akka.actor.ActorSystem">system</a>,
               <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.shutdown$default$2">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">5</span>.<a href="package.scala.html#akka.testkit.package.TestDuration(23da7ebdcd)" title="implicit akka.testkit.package.TestDuration : (duration: scala.concurrent.duration.FiniteDuration)akka.testkit.TestDuration">seconds</a>.<a href="package.scala.html#akka.testkit.package;TestDuration.dilated" title="(implicit system: akka.actor.ActorSystem)scala.concurrent.duration.FiniteDuration">dilated</a>.<span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">min</span><span class="delimiter">(</span><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">10</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span><span class="delimiter">)</span>,
               <a title="Boolean" id="akka.testkit;TestKitBase.shutdown$default$3">verifySystemShutdown</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.testkit.TestKit" title="akka.testkit.TestKit.type">TestKit</a>.<a href="#akka.testkit.TestKit.shutdownActorSystem" title="(actorSystem: akka.actor.ActorSystem, duration: scala.concurrent.duration.Duration, verifySystemShutdown: Boolean)Unit">shutdownActorSystem</a><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.shutdown$default$1" title="akka.actor.ActorSystem">actorSystem</a>, <a href="#akka.testkit;TestKitBase.shutdown$default$2" title="scala.concurrent.duration.Duration">duration</a>, <a href="#akka.testkit;TestKitBase.shutdown$default$3" title="Boolean">verifySystemShutdown</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(u: java.util.concurrent.TimeUnit, d: scala.concurrent.duration.Duration)String" id="akka.testkit;TestKitBase.format">format</a><span class="delimiter">(</span><a title="java.util.concurrent.TimeUnit" id="akka.testkit;TestKitBase.format.u">u</a>: <span title="java.util.concurrent.TimeUnit">TimeUnit</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit;TestKitBase.format.d">d</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%.3f %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.format.d" title="scala.concurrent.duration.Duration">d</a>.<span title="(unit: scala.concurrent.duration.TimeUnit)Double">toUnit</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.format.u" title="java.util.concurrent.TimeUnit">u</a><span class="delimiter">)</span>, <a href="#akka.testkit;TestKitBase.format.u" title="java.util.concurrent.TimeUnit">u</a>.<span title="()String">toString</span>.<span title="()String">toLowerCase</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Test kit for testing actors. Inheriting from this class enables reception of
 * replies from actors, which are queued by an internal actor and can be
 * examined using the `expectMsg...` methods. Assertions and bounds concerning
 * timing are available in the form of `within` blocks.
 *
 * {{{
 * class Test extends TestKit(ActorSystem()) {
 *   try {
 *
 *     val test = system.actorOf(Props[SomeActor])
 *
 *       within (1.second) {
 *         test ! SomeWork
 *         expectMsg(Result1) // bounded to 1 second
 *         expectMsg(Result2) // bounded to the remainder of the 1 second
 *       }
 *
 *     } finally {
 *       system.terminate()
 *     }
 *
 *   } finally {
 *     system.shutdown()
 *   }
 * }
 * }}}
 *
 * Beware of two points:
 *
 *  - the ActorSystem passed into the constructor needs to be shutdown,
 *    otherwise thread pools and memory will be leaked
 *  - this class is not thread-safe (only one actor with one queue, one stack
 *    of `within` blocks); it is expected that the code is executed from a
 *    constructor as shown above, which makes this a non-issue, otherwise take
 *    care not to run tests within a single test class instance in parallel.
 *
 * It should be noted that for CI servers and the like all maximum Durations
 * are scaled using their Duration.dilated method, which uses the
 * TestKitExtension.Settings.TestTimeFactor settable via akka.conf entry &quot;akka.test.timefactor&quot;.
 *
 * @since 1.1
 */</span>
class <a title="class TestKit extends AnyRef with akka.testkit.TestKitBase" id="akka.testkit;TestKit">TestKit</a><a href="#akka.testkit;TestKit" title="akka.testkit.TestKit" class="delimiter">(</a><a title="akka.actor.ActorSystem" id="akka.testkit;TestKit._system">_system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span> extends <span class="delimiter">{</span> implicit val <a title="akka.actor.ActorSystem" id="akka.testkit;TestKit.system">system</a> = <a href="#akka.testkit;TestKit._system" title="akka.actor.ActorSystem">_system</a> <span class="delimiter">}</span> with <a href="#akka.testkit;TestKitBase" title="akka.testkit.TestKitBase">TestKitBase</a>

object <a title="akka.testkit.TestKit.type" id="akka.testkit.TestKit">TestKit</a> <a href="#akka.testkit.TestKit" title="akka.testkit.TestKit.type" class="delimiter">{</a>
  private<span class="delimiter">[</span>testkit<span class="delimiter">]</span> val <a title="java.util.concurrent.atomic.AtomicInteger" id="akka.testkit.TestKit.testActorId">testActorId</a> = new <span title="java.util.concurrent.atomic.AtomicInteger">AtomicInteger</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Await until the given condition evaluates to `true` or the timeout
   * expires, whichever comes first.
   */</span>
  def <a title="(p: =&gt; Boolean, max: scala.concurrent.duration.Duration, interval: scala.concurrent.duration.Duration, noThrow: Boolean)Boolean" id="akka.testkit.TestKit.awaitCond">awaitCond</a><span class="delimiter">(</span><a title="=&gt; Boolean" id="akka.testkit.TestKit.awaitCond.p">p</a>: ⇒ Boolean, <a title="scala.concurrent.duration.Duration" id="akka.testkit.TestKit.awaitCond.max">max</a>: <span title="scala.concurrent.duration.Duration">Duration</span>, <a title="scala.concurrent.duration.Duration" id="akka.testkit.TestKit.awaitCond$default$3">interval</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">100</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>, <a title="Boolean" id="akka.testkit.TestKit.awaitCond$default$4">noThrow</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    val stop = <a href="#akka.testkit.TestKit.now" title="=&gt; scala.concurrent.duration.Duration">now</a> <a title="scala.concurrent.duration.Duration" id="akka.testkit.TestKit.awaitCond.stop">+</a> <a href="#akka.testkit.TestKit.awaitCond.max" title="scala.concurrent.duration.Duration">max</a>

    @tailrec
    def <a title="()Boolean" id="akka.testkit.TestKit.awaitCond.poll">poll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.testkit.TestKit.awaitCond.p" title="=&gt; Boolean">p</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val toSleep = <a href="#akka.testkit.TestKit.awaitCond.stop" title="scala.concurrent.duration.Duration">stop</a> <a title="scala.concurrent.duration.Duration" id="akka.testkit.TestKit.awaitCond.poll.toSleep">-</a> <a href="#akka.testkit.TestKit.now" title="=&gt; scala.concurrent.duration.Duration">now</a>
        if <span class="delimiter">(</span><a href="#akka.testkit.TestKit.awaitCond.poll.toSleep" title="scala.concurrent.duration.Duration">toSleep</a> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;=</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#akka.testkit.TestKit.awaitCond$default$4" title="Boolean">noThrow</a><span class="delimiter">)</span> false
          else throw new <span title="AssertionError">AssertionError</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;timeout &quot;)">timeout $</span><a href="#akka.testkit.TestKit.awaitCond.max" title="scala.concurrent.duration.Duration">max</a><span title="String(&quot; expired&quot;)" class="string"> expired&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <span title="Thread.type">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.testkit.TestKit.awaitCond.poll.toSleep" title="scala.concurrent.duration.Duration">toSleep</a> <span title="(other: scala.concurrent.duration.Duration)scala.concurrent.duration.Duration">min</span> <a href="#akka.testkit.TestKit.awaitCond$default$3" title="scala.concurrent.duration.Duration">interval</a><span class="delimiter">)</span>.<span title="=&gt; Long">toMillis</span><span class="delimiter">)</span>
          <a href="#akka.testkit.TestKit.awaitCond.poll" title="()Boolean">poll</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else true
    <span class="delimiter">}</span>

    <a href="#akka.testkit.TestKit.awaitCond.poll" title="()Boolean">poll</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Obtain current timestamp as Duration for relative measurements (using System.nanoTime).
   */</span>
  def <a title="=&gt; scala.concurrent.duration.Duration" id="akka.testkit.TestKit.now">now</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="System.type">System</span>.<span title="()Long">nanoTime</span><span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong" class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">nanos</span>

  <span class="comment">/**
   * Shut down an actor system and wait for termination.
   * On failure debug output will be logged about the remaining actors in the system.
   *
   * If verifySystemShutdown is true, then an exception will be thrown on failure.
   */</span>
  def <a title="(actorSystem: akka.actor.ActorSystem, duration: scala.concurrent.duration.Duration, verifySystemShutdown: Boolean)Unit" id="akka.testkit.TestKit.shutdownActorSystem">shutdownActorSystem</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.testkit.TestKit.shutdownActorSystem.actorSystem">actorSystem</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>,
                          <a title="scala.concurrent.duration.Duration" id="akka.testkit.TestKit.shutdownActorSystem$default$2">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">10</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span>,
                          <a title="Boolean" id="akka.testkit.TestKit.shutdownActorSystem$default$3">verifySystemShutdown</a>: <span title="Boolean">Boolean</span> = false<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.testkit.TestKit.shutdownActorSystem.actorSystem" title="akka.actor.ActorSystem">actorSystem</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.terminate" title="()scala.concurrent.Future[akka.actor.Terminated]">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
    try <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[akka.actor.Terminated], atMost: scala.concurrent.duration.Duration)awaitable.type">ready</span><span title="Unit" class="delimiter">(</span><a href="#akka.testkit.TestKit.shutdownActorSystem.actorSystem" title="akka.actor.ActorSystem">actorSystem</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.whenTerminated" title="=&gt; scala.concurrent.Future[akka.actor.Terminated]">whenTerminated</a>, <a href="#akka.testkit.TestKit.shutdownActorSystem$default$2" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span> catch <span class="delimiter">{</span>
      case _: <span title="java.util.concurrent.TimeoutException">TimeoutException</span> ⇒
        val <a title="String" id="akka.testkit.TestKit.shutdownActorSystem.msg">msg</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Failed to stop [%s] within [%s] \n%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#akka.testkit.TestKit.shutdownActorSystem.actorSystem" title="akka.actor.ActorSystem">actorSystem</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.name" title="=&gt; String">name</a>, <a href="#akka.testkit.TestKit.shutdownActorSystem$default$2" title="scala.concurrent.duration.Duration">duration</a>,
          <a href="#akka.testkit.TestKit.shutdownActorSystem.actorSystem" title="akka.actor.ActorSystem">actorSystem</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.actor.ActorSystemImpl" class="delimiter">[</span><a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a><span class="delimiter">]</span>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.printTree" title="=&gt; String">printTree</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#akka.testkit.TestKit.shutdownActorSystem$default$3" title="Boolean">verifySystemShutdown</a><span class="delimiter">)</span> throw new <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><a href="#akka.testkit.TestKit.shutdownActorSystem.msg" title="String">msg</a><span class="delimiter">)</span>
        else <a href="#akka.testkit.TestKit.shutdownActorSystem.actorSystem" title="akka.actor.ActorSystem">actorSystem</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(cc2e600322)" title="(message: String)Unit">warning</a><span class="delimiter">(</span><a href="#akka.testkit.TestKit.shutdownActorSystem.msg" title="String">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * TestKit-based probe which allows sending, reception and reply.
 */</span>
class <a title="class TestProbe extends akka.testkit.TestKit" id="akka.testkit;TestProbe">TestProbe</a><a href="#akka.testkit;TestProbe" title="akka.testkit.TestProbe" class="delimiter">(</a><a title="akka.actor.ActorSystem" id="akka.testkit;TestProbe._application">_application</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>, <a title="String" id="akka.testkit;TestProbe.name">name</a>: <span title="String">String</span><span class="delimiter">)</span> extends <a href="#akka.testkit;TestKit" title="akka.testkit.TestKit">TestKit</a><span class="delimiter">(</span><a href="#akka.testkit;TestProbe._application" title="akka.actor.ActorSystem">_application</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  def this<span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.testkit;TestProbe.<init>(68e50e10fc)._application">_application</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span> = this<span class="delimiter">(</span><a href="#akka.testkit;TestProbe.<init>(68e50e10fc)._application" title="akka.actor.ActorSystem">_application</a>, <span title="String(&quot;testProbe&quot;)" class="string">&quot;testProbe&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Shorthand to get the testActor.
   */</span>
  def <a title="=&gt; akka.actor.ActorRef" id="akka.testkit;TestProbe.ref">ref</a> = <a href="#akka.testkit;TestKitBase.testActor" title="=&gt; akka.actor.ActorRef">testActor</a>

  protected override def <a title="=&gt; String" id="akka.testkit;TestProbe.testActorName">testActorName</a> = <a href="#akka.testkit;TestProbe.name" title="String">name</a>

  <span class="comment">/**
   * Send message to an actor while using the probe's TestActor as the sender.
   * Replies will be available for inspection with all of TestKit's assertion
   * methods.
   */</span>
  def <a title="(actor: akka.actor.ActorRef, msg: Any)Unit" id="akka.testkit;TestProbe.send">send</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestProbe.send.actor">actor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Any" id="akka.testkit;TestProbe.send.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">actor</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a><span class="delimiter">(</span><a href="#akka.testkit;TestProbe.send.msg" title="Any">msg</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.testActor" title="=&gt; akka.actor.ActorRef">testActor</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Forward this message as if in the TestActor's receive method with self.forward.
   */</span>
  def <a title="(actor: akka.actor.ActorRef, msg: Any)Unit" id="akka.testkit;TestProbe.forward">forward</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.testkit;TestProbe.forward.actor">actor</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Any" id="akka.testkit;TestProbe.forward$default$2">msg</a>: <span title="Any">Any</span> = <a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a>.<a href="#akka.testkit.TestActor;Message.msg" title="=&gt; AnyRef">msg</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">actor</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a><span class="delimiter">(</span><a href="#akka.testkit;TestProbe.forward$default$2" title="Any">msg</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a>.<a href="#akka.testkit.TestActor;Message.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Get sender of last received message.
   */</span>
  def <a title="()akka.actor.ActorRef" id="akka.testkit;TestProbe.sender">sender</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.testkit;TestKitBase.lastMessage_=" title="=&gt; akka.testkit.TestActor.Message">lastMessage</a>.<a href="#akka.testkit.TestActor;Message.sender" title="=&gt; akka.actor.ActorRef">sender</a>

  <span class="comment">/**
   * Send message to the sender of the last dequeued message.
   */</span>
  def <a title="(msg: Any)Unit" id="akka.testkit;TestProbe.reply">reply</a><span class="delimiter">(</span><a title="Any" id="akka.testkit;TestProbe.reply.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.testkit;TestProbe.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a><span class="delimiter">(</span><a href="#akka.testkit;TestProbe.reply.msg" title="Any">msg</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.testkit;TestProbe.ref" title="=&gt; akka.actor.ActorRef">ref</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

object <a title="akka.testkit.TestProbe.type" id="akka.testkit.TestProbe">TestProbe</a> <a href="#akka.testkit.TestProbe" title="akka.testkit.TestProbe.type" class="delimiter">{</a>
  def <a title="()(implicit system: akka.actor.ActorSystem)akka.testkit.TestProbe" id="akka.testkit.TestProbe.apply(1a16cb23c5)">apply</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.TestProbe.apply(1a16cb23c5).system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span> = new <a href="#akka.testkit;TestProbe" title="akka.testkit.TestProbe">TestProbe</a><span class="delimiter">(</span><a href="#akka.testkit.TestProbe.apply(1a16cb23c5).system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  def <a title="(name: String)(implicit system: akka.actor.ActorSystem)akka.testkit.TestProbe" id="akka.testkit.TestProbe.apply(4c49e72732)">apply</a><span class="delimiter">(</span><a title="String" id="akka.testkit.TestProbe.apply(4c49e72732).name">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="akka.actor.ActorSystem" id="akka.testkit.TestProbe.apply(4c49e72732).system">system</a>: <a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span> = new <a href="#akka.testkit;TestProbe" title="akka.testkit.TestProbe">TestProbe</a><span class="delimiter">(</span><a href="#akka.testkit.TestProbe.apply(4c49e72732).system" title="akka.actor.ActorSystem">system</a>, <a href="#akka.testkit.TestProbe.apply(4c49e72732).name" title="String">name</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

trait <a title="trait ImplicitSender extends AnyRef" id="akka.testkit;ImplicitSender">ImplicitSender</a> <span title="Unit" class="delimiter">{</span> this: TestKitBase ⇒
  implicit def <a title="=&gt; akka.actor.ActorRef" id="akka.testkit;ImplicitSender.self">self</a> = <a href="#akka.testkit;TestKitBase.testActor" title="=&gt; akka.actor.ActorRef">testActor</a>
<span class="delimiter">}</span>

trait <a title="trait DefaultTimeout extends AnyRef" id="akka.testkit;DefaultTimeout">DefaultTimeout</a> <span title="Unit" class="delimiter">{</span> this: TestKitBase ⇒
  implicit val <a title="akka.util.Timeout" id="akka.testkit;DefaultTimeout.timeout">timeout</a>: <a href="../../../actor/akka/util/Timeout.scala.html#akka.util;Timeout" title="akka.util.Timeout">Timeout</a> = <a href="#akka.testkit;TestKitBase.testKitSettings" title="=&gt; akka.testkit.TestKitSettings">testKitSettings</a>.<a href="TestKitExtension.scala.html#akka.testkit;TestKitSettings.DefaultTimeout" title="=&gt; akka.util.Timeout">DefaultTimeout</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 *
 * This is a specialized variant of PartialFunction which is &lt;b&gt;&lt;i&gt;only
 * applicable if you know that `isDefinedAt(x)` is always called before
 * `apply(x)`—with the same `x` of course.&lt;/i&gt;&lt;/b&gt;
 *
 * `match(x)` will be called for `isDefinedAt(x)` only, and its semantics
 * are the same as for [[akka.japi.JavaPartialFunction]] (apart from the
 * missing because unneeded boolean argument).
 *
 * This class is used internal to JavaTestKit and should not be extended
 * by client code directly.
 */</span>
private<span class="delimiter">[</span>testkit<span class="delimiter">]</span> abstract class <a title="class CachingPartialFunction[A, B &lt;: AnyRef] extends scala.runtime.AbstractPartialFunction[A,B]" id="akka.testkit;CachingPartialFunction">CachingPartialFunction</a><span class="delimiter">[</span><a title="" id="akka.testkit;CachingPartialFunction;A">A</a>, <a title=" &lt;: AnyRef" id="akka.testkit;CachingPartialFunction;B">B</a> &lt;: AnyRef<span class="delimiter">]</span> extends scala.runtime.<a href="#akka.testkit;CachingPartialFunction" title="scala.runtime.AbstractPartialFunction[A,B]">AbstractPartialFunction</a><span class="delimiter">[</span>A, B<span class="delimiter">]</span> <span class="delimiter">{</span>
  import akka.japi.<a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.JavaPartialFunction" title="akka.japi.JavaPartialFunction.type">JavaPartialFunction</a>._

  @throws<span class="delimiter">(</span>classOf<span class="delimiter">[</span>Exception<span class="delimiter">]</span><span class="delimiter">)</span>
  def <a title="(x: A)B" id="akka.testkit;CachingPartialFunction.match">`match`</a><span class="delimiter">(</span><a title="A" id="akka.testkit;CachingPartialFunction.match.x">x</a>: <a href="#akka.testkit;CachingPartialFunction;A" title="A">A</a><span class="delimiter">)</span>: <a href="#akka.testkit;CachingPartialFunction;B" title="B">B</a>

  var <a title="B" id="akka.testkit;CachingPartialFunction.cache_=">cache</a>: <a href="#akka.testkit;CachingPartialFunction;B" title="B">B</a> = _
  final def <a title="(x: A)Boolean" id="akka.testkit;CachingPartialFunction.isDefinedAt">isDefinedAt</a><span class="delimiter">(</span><a title="A" id="akka.testkit;CachingPartialFunction.isDefinedAt.x">x</a>: <a href="#akka.testkit;CachingPartialFunction;A" title="A">A</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = try <span class="delimiter">{</span> <a href="#akka.testkit;CachingPartialFunction.cache_=" title="(x$1: B)Unit">cache</a> = <a href="#akka.testkit;CachingPartialFunction.match" title="(x: A)B">`match`</a><span class="delimiter">(</span><a href="#akka.testkit;CachingPartialFunction.isDefinedAt.x" title="A">x</a><span class="delimiter">)</span>; true <span class="delimiter">}</span> catch <span class="delimiter">{</span> case <a href="../../../actor/akka/japi/JavaAPI.scala.html#akka.japi.JavaPartialFunction.NoMatch" title="akka.japi.JavaPartialFunction.NoMatch.type">NoMatch</a> ⇒ <a href="#akka.testkit;CachingPartialFunction.cache_=" title="(x$1: B)Unit">cache</a> = null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="B" class="delimiter">[</span><a href="#akka.testkit;CachingPartialFunction;B" title="B">B</a><span class="delimiter">]</span>; false <span class="delimiter">}</span>
  final override def <a title="(x: A)B" id="akka.testkit;CachingPartialFunction.apply">apply</a><span class="delimiter">(</span><a title="A" id="akka.testkit;CachingPartialFunction.apply.x">x</a>: <a href="#akka.testkit;CachingPartialFunction;A" title="A">A</a><span class="delimiter">)</span>: <a href="#akka.testkit;CachingPartialFunction;B" title="B">B</a> = <a href="#akka.testkit;CachingPartialFunction.cache_=" title="=&gt; B">cache</a>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
