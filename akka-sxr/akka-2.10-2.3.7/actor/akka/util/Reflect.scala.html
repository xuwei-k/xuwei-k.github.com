<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/util/Reflect.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.util
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> java.lang.reflect.Constructor
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> java.lang.reflect.Type
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> java.lang.reflect.ParameterizedType
<span class="keyword">import</span> scala.util.Try

<span class="comment">/**
 * Collection of internal reflection utilities which may or may not be
 * available (most services specific to HotSpot, but fails gracefully).
 *
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.util.Reflect.type" id="akka.util.Reflect">Reflect</a> <a href="#akka.util.Reflect" title="akka.util.Reflect.type" class="delimiter">{</a>

  <span class="comment">/**
   * This optionally holds a function which looks N levels above itself
   * on the call stack and returns the `Class[_]` object for the code
   * executing in that stack frame. Implemented using
   * `sun.reflect.Reflection.getCallerClass` if available, None otherwise.
   *
   * Hint: when comparing to Thread.currentThread.getStackTrace, add two levels.
   */</span>
  <span class="keyword">val</span> <a title="Option[Int =&gt; Class[_]]" id="akka.util.Reflect.getCallerClass">getCallerClass</a>: <span title="Option[Int =&gt; Class[_]]">Option</span><span class="delimiter">[</span>Int ⇒ Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Class[_]" id="akka.util.Reflect.getCallerClass.c">c</a> = <span title="Class.type">Class</span>.<span title="(x$1: String)Class[_]">forName</span><span class="delimiter">(</span><span title="String(&quot;sun.reflect.Reflection&quot;)" class="string">&quot;sun.reflect.Reflection&quot;</span><span class="delimiter">)</span>;
      <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="akka.util.Reflect.getCallerClass.m">m</a> = <a href="#akka.util.Reflect.getCallerClass.c" title="Class[_]">c</a>.<span title="(x$1: String, x$2: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="String(&quot;getCallerClass&quot;)" class="string">&quot;getCallerClass&quot;</span>, <span title="(xs: Class[Int]*)(implicit evidence$2: scala.reflect.ClassTag[Class[Int]])Array[Class[Int]]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[Class[Int]]" class="delimiter">(</span>classOf<span title="Class[Int](classOf[scala.Int])" class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
      <span title="(x: Int =&gt; Class[_])Some[Int =&gt; Class[_]]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span>i: <span title="Int">Int</span><span class="delimiter">)</span> ⇒ <a href="#akka.util.Reflect.getCallerClass.m" title="java.lang.reflect.Method">m</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="[T](xs: T*)(implicit evidence$2: scala.reflect.ClassTag[T])Array[T]">Array</span><span title="(xs: AnyRef*)(implicit evidence$2: scala.reflect.ClassTag[AnyRef])Array[AnyRef]" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.ClassTag[AnyRef]" class="delimiter">(</span><a href="#akka.util.Reflect.getCallerClass.$anonfun.i" title="Int">i</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Integer" class="delimiter">[</span>java.lang.<span title="Integer">Integer</span><span class="delimiter">]</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$2]" class="delimiter">[</span><span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#akka.util.Reflect.getCallerClass.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.util.Reflect.getCallerClass.e">e</a><span class="delimiter">)</span> ⇒ <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * @param clazz the class which to instantiate an instance of
   * @tparam T the type of the instance that will be created
   * @return a new instance from the default constructor of the given class
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](clazz: Class[T])T" id="akka.util.Reflect.instantiate(65ae6de67f)">instantiate</a><span class="delimiter">[</span><a title="" id="akka.util.Reflect.instantiate(65ae6de67f);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="akka.util.Reflect.instantiate(65ae6de67f).clazz">clazz</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.util.Reflect.instantiate(65ae6de67f);T" title="T">T</a> = <span class="keyword">try</span> <a href="#akka.util.Reflect.instantiate(65ae6de67f).clazz" title="Class[T]">clazz</a>.<span title="()T">newInstance</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="IllegalAccessException" id="akka.util.Reflect.instantiate(65ae6de67f).iae">iae</a>: <span title="IllegalAccessException">IllegalAccessException</span> ⇒
      <span class="keyword">val</span> <a title="java.lang.reflect.Constructor[T]" id="akka.util.Reflect.instantiate(65ae6de67f).ctor">ctor</a> = <a href="#akka.util.Reflect.instantiate(65ae6de67f).clazz" title="Class[T]">clazz</a>.<span title="(x$1: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Constructor[T]">getDeclaredConstructor</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.util.Reflect.instantiate(65ae6de67f).ctor" title="java.lang.reflect.Constructor[T]">ctor</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <a href="#akka.util.Reflect.instantiate(65ae6de67f).ctor" title="java.lang.reflect.Constructor[T]">ctor</a>.<span title="(x$1: &lt;repeated...&gt;[Object])T">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Calls findConstructor and invokes it with the given arguments.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](clazz: Class[T], args: scala.collection.immutable.Seq[Any])T" id="akka.util.Reflect.instantiate(935e0324d0)">instantiate</a><span class="delimiter">[</span><a title="" id="akka.util.Reflect.instantiate(935e0324d0);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="akka.util.Reflect.instantiate(935e0324d0).clazz">clazz</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scala.collection.immutable.Seq[Any]" id="akka.util.Reflect.instantiate(935e0324d0).args">args</a>: immutable.<span title="scala.collection.immutable.Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.util.Reflect.instantiate(935e0324d0);T" title="T">T</a> = <span class="delimiter">{</span>
    <a href="#akka.util.Reflect.instantiate(8841669e9d)" title="(constructor: java.lang.reflect.Constructor[T], args: scala.collection.immutable.Seq[Any])T">instantiate</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor" title="(clazz: Class[T], args: scala.collection.immutable.Seq[Any])java.lang.reflect.Constructor[T]">findConstructor</a><span class="delimiter">(</span><a href="#akka.util.Reflect.instantiate(935e0324d0).clazz" title="Class[T]">clazz</a>, <a href="#akka.util.Reflect.instantiate(935e0324d0).args" title="scala.collection.immutable.Seq[Any]">args</a><span class="delimiter">)</span>, <a href="#akka.util.Reflect.instantiate(935e0324d0).args" title="scala.collection.immutable.Seq[Any]">args</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Invokes the constructor with the the given arguments.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](constructor: java.lang.reflect.Constructor[T], args: scala.collection.immutable.Seq[Any])T" id="akka.util.Reflect.instantiate(8841669e9d)">instantiate</a><span class="delimiter">[</span><a title="" id="akka.util.Reflect.instantiate(8841669e9d);T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.lang.reflect.Constructor[T]" id="akka.util.Reflect.instantiate(8841669e9d).constructor">constructor</a>: <span title="java.lang.reflect.Constructor[T]">Constructor</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scala.collection.immutable.Seq[Any]" id="akka.util.Reflect.instantiate(8841669e9d).args">args</a>: immutable.<span title="scala.collection.immutable.Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#akka.util.Reflect.instantiate(8841669e9d);T" title="T">T</a> = <span class="delimiter">{</span>
    <a href="#akka.util.Reflect.instantiate(8841669e9d).constructor" title="java.lang.reflect.Constructor[T]">constructor</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <a href="#akka.util.Reflect.instantiate(8841669e9d).constructor" title="java.lang.reflect.Constructor[T]">constructor</a>.<span title="(x$1: &lt;repeated...&gt;[Object])T">newInstance</span><span class="delimiter">(</span><a href="#akka.util.Reflect.instantiate(8841669e9d).args" title="scala.collection.immutable.Seq[Any]">args</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Seq[AnyRef]" class="delimiter">[</span><span title="Seq[AnyRef]">Seq</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>: _*<span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="IllegalArgumentException" id="akka.util.Reflect.instantiate(8841669e9d).e">e</a>: <span title="IllegalArgumentException">IllegalArgumentException</span> ⇒
        <span class="keyword">val</span> <a title="String" id="akka.util.Reflect.instantiate(8841669e9d).argString">argString</a> = <a href="#akka.util.Reflect.instantiate(8841669e9d).args" title="scala.collection.immutable.Seq[Any]">args</a> <span title="(f: Any =&gt; Class[_])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[Any],Class[_],scala.collection.immutable.Seq[Class[_]]])scala.collection.immutable.Seq[Class[_]]">map</span> <a href="#akka.util.Reflect.safeGetClass" title="(a: Any)Class[_]">safeGetClass</a> <span title="(start: String, sep: String, end: String)String">mkString</span> <span class="delimiter">(</span><span title="String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String, x$2: Throwable)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;constructor &quot;)">constructor $</span><a href="#akka.util.Reflect.instantiate(8841669e9d).constructor" title="java.lang.reflect.Constructor[T]">constructor</a><span title="String(&quot; is incompatible with arguments &quot;)"> is incompatible with arguments $</span><a href="#akka.util.Reflect.instantiate(8841669e9d).argString" title="String">argString</a><span title="String(&quot;&quot;)" class="string">&quot;</span>, <a href="#akka.util.Reflect.instantiate(8841669e9d).e" title="IllegalArgumentException">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * Implements a primitive form of overload resolution a.k.a. finding the
   * right constructor.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](clazz: Class[T], args: scala.collection.immutable.Seq[Any])java.lang.reflect.Constructor[T]" id="akka.util.Reflect.findConstructor">findConstructor</a><span class="delimiter">[</span><a title="" id="akka.util.Reflect.findConstructor;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="akka.util.Reflect.findConstructor.clazz">clazz</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="scala.collection.immutable.Seq[Any]" id="akka.util.Reflect.findConstructor.args">args</a>: immutable.<span title="scala.collection.immutable.Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="java.lang.reflect.Constructor[T]">Constructor</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(msg: String)Nothing" id="akka.util.Reflect.findConstructor.error">error</a><span class="delimiter">(</span><a title="String" id="akka.util.Reflect.findConstructor.error.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="akka.util.Reflect.findConstructor.error.argClasses">argClasses</a> = <a href="#akka.util.Reflect.findConstructor.args" title="scala.collection.immutable.Seq[Any]">args</a> <span title="(f: Any =&gt; Class[_])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Seq[Any],Class[_],scala.collection.immutable.Seq[Class[_]]])scala.collection.immutable.Seq[Class[_]]">map</span> <a href="#akka.util.Reflect.safeGetClass" title="(a: Any)Class[_]">safeGetClass</a> <span title="(sep: String)String">mkString</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#akka.util.Reflect.findConstructor.error.msg" title="String">msg</a><span title="String(&quot; found on &quot;)"> found on $</span><a href="#akka.util.Reflect.findConstructor.clazz" title="Class[T]">clazz</a><span title="String(&quot; for arguments [&quot;)"> for arguments [$</span><a href="#akka.util.Reflect.findConstructor.error.argClasses" title="String">argClasses</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="java.lang.reflect.Constructor[T]" id="akka.util.Reflect.findConstructor.constructor">constructor</a>: <span title="java.lang.reflect.Constructor[T]">Constructor</span><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <span title="java.lang.reflect.Constructor[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.args" title="scala.collection.immutable.Seq[Any]">args</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="(r: =&gt; java.lang.reflect.Constructor[T])scala.util.Try[java.lang.reflect.Constructor[T]]">Try</span> <span class="delimiter">{</span> <a href="#akka.util.Reflect.findConstructor.clazz" title="Class[T]">clazz</a>.<span title="(x$1: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Constructor[T]">getDeclaredConstructor</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(default: =&gt; java.lang.reflect.Constructor[T])java.lang.reflect.Constructor[T]">getOrElse</span> <span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="akka.util.Reflect.findConstructor.constructor.length">length</a> = <a href="#akka.util.Reflect.findConstructor.args" title="scala.collection.immutable.Seq[Any]">args</a>.<span title="=&gt; Int">length</span>
        <span class="keyword">val</span> <a title="Iterator[java.lang.reflect.Constructor[T]]" id="akka.util.Reflect.findConstructor.constructor.candidates">candidates</a> =
          <a href="#akka.util.Reflect.findConstructor.clazz" title="Class[T]">clazz</a>.<span title="()Array[java.lang.reflect.Constructor[_]]">getDeclaredConstructors</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="(xs: Array[java.lang.reflect.Constructor[T]])scala.collection.mutable.ArrayOps[java.lang.reflect.Constructor[T]]" class="delimiter">[</span><span title="Array[java.lang.reflect.Constructor[T]]">Array</span><span class="delimiter">[</span>Constructor<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Iterator[java.lang.reflect.Constructor[T]]">iterator</span> <span title="(p: java.lang.reflect.Constructor[T] =&gt; Boolean)Iterator[java.lang.reflect.Constructor[T]]">filter</span> <span class="delimiter">{</span> <a title="java.lang.reflect.Constructor[T]" id="akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.c">c</a> ⇒
            <span class="keyword">val</span> <a title="Array[Class[_]]" id="akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.parameterTypes">parameterTypes</a> = <a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.c" title="java.lang.reflect.Constructor[T]">c</a>.<span title="()Array[Class[_]]">getParameterTypes</span>
            <a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.parameterTypes" title="Array[Class[_]]">parameterTypes</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">==</span> <a href="#akka.util.Reflect.findConstructor.constructor.length" title="Int">length</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
              <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.parameterTypes" title="(xs: Array[Class[_]])scala.collection.mutable.ArrayOps[Class[_]]">parameterTypes</a>.<span title="=&gt; Iterator[Class[_]]">iterator</span> <span title="(that: Iterator[Any])Iterator[(Class[_], Any)]">zip</span> <a href="#akka.util.Reflect.findConstructor.args" title="scala.collection.immutable.Seq[Any]">args</a>.<span title="=&gt; Iterator[Any]">iterator</span> <span title="(p: ((Class[_], Any)) =&gt; Boolean)Boolean">forall</span> <a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
                <span class="keyword">case</span> <span class="delimiter">(</span><a title="Class[_]" id="akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.found">found</a>, <a title="Any" id="akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.required">required</a><span class="delimiter">)</span> ⇒
                  <a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.found" title="Class[_]">found</a>.<span title="(x$1: Any)Boolean">isInstance</span><span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.required" title="Any">required</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="BoxedType.scala.html#akka.util.BoxedType.apply" title="(c: Class[_])Class[_]">BoxedType</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.found" title="Class[_]">found</a><span class="delimiter">)</span>.<span title="(x$1: Any)Boolean">isInstance</span><span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.required" title="Any">required</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
                    <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.required" title="Any">required</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates.$anonfun.$anonfun.found" title="Class[_]">found</a>.<span title="()Boolean">isPrimitive</span><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span title="java.lang.reflect.Constructor[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates" title="Iterator[java.lang.reflect.Constructor[T]]">candidates</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="java.lang.reflect.Constructor[T]" id="akka.util.Reflect.findConstructor.constructor.cstrtr">cstrtr</a> = <a href="#akka.util.Reflect.findConstructor.constructor.candidates" title="Iterator[java.lang.reflect.Constructor[T]]">candidates</a>.<span title="()java.lang.reflect.Constructor[T]">next</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span title="java.lang.reflect.Constructor[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor.candidates" title="Iterator[java.lang.reflect.Constructor[T]]">candidates</a>.<span title="=&gt; Boolean">hasNext</span><span class="delimiter">)</span> <a href="#akka.util.Reflect.findConstructor.error" title="(msg: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;multiple matching constructors&quot;)" class="string">&quot;multiple matching constructors&quot;</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#akka.util.Reflect.findConstructor.constructor.cstrtr" title="java.lang.reflect.Constructor[T]">cstrtr</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
      <span class="delimiter">}</span>

    <span title="java.lang.reflect.Constructor[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findConstructor.constructor" title="java.lang.reflect.Constructor[T]">constructor</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#akka.util.Reflect.findConstructor.error" title="(msg: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;no matching constructor&quot;)" class="string">&quot;no matching constructor&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#akka.util.Reflect.findConstructor.constructor" title="java.lang.reflect.Constructor[T]">constructor</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(a: Any)Class[_]" id="akka.util.Reflect.safeGetClass">safeGetClass</a><span class="delimiter">(</span><a title="Any" id="akka.util.Reflect.safeGetClass.a">a</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> =
    <span title="Class[_56]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.safeGetClass.a" title="Any">a</a> <span title="(x$1: Any)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> classOf<span title="Class[AnyRef](classOf[java.lang.Object])" class="delimiter">[</span>AnyRef<span class="delimiter">]</span> <span class="keyword">else</span> <a href="#akka.util.Reflect.safeGetClass.a" title="Any">a</a>.<span title="()Class[_]">getClass</span>

  <span class="comment">/**
   * INTERNAL API
   * @param clazz the class which to instantiate an instance of
   * @tparam T the type of the instance that will be created
   * @return a function which when applied will create a new instance from the default constructor of the given class
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](clazz: Class[T])() =&gt; T" id="akka.util.Reflect.instantiator">instantiator</a><span class="delimiter">[</span><a title="" id="akka.util.Reflect.instantiator;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="akka.util.Reflect.instantiator.clazz">clazz</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ T = <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="#akka.util.Reflect.instantiate(65ae6de67f)" title="(clazz: Class[T])T">instantiate</a><span class="delimiter">(</span><a href="#akka.util.Reflect.instantiator.clazz" title="Class[T]">clazz</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(root: Class[_], marker: Class[_])java.lang.reflect.Type" id="akka.util.Reflect.findMarker">findMarker</a><span class="delimiter">(</span><a title="Class[_]" id="akka.util.Reflect.findMarker.root">root</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="Class[_]" id="akka.util.Reflect.findMarker.marker">marker</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="java.lang.reflect.Type">Type</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(curr: Class[_])java.lang.reflect.Type" id="akka.util.Reflect.findMarker.rec">rec</a><span class="delimiter">(</span><a title="Class[_]" id="akka.util.Reflect.findMarker.rec.curr">curr</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="java.lang.reflect.Type">Type</span> = <span class="delimiter">{</span>
      <span title="java.lang.reflect.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.curr" title="Class[_]">curr</a>.<span title="()Class[_ &gt;: _$6]">getSuperclass</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.util.Reflect.findMarker.marker" title="Class[_]">marker</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.curr" title="Class[_]">curr</a>.<span title="()Class[_ &gt;: _$6]">getSuperclass</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.util.Reflect.findMarker.rec" title="(curr: Class[_])java.lang.reflect.Type">rec</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.curr" title="Class[_]">curr</a>.<span title="()Class[_ &gt;: _$6]">getSuperclass</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#akka.util.Reflect.findMarker.rec.curr" title="Class[_]">curr</a>.<span title="(xs: Array[java.lang.reflect.Type])scala.collection.mutable.ArrayOps[java.lang.reflect.Type]">getGenericInterfaces</span> <span title="(pf: PartialFunction[java.lang.reflect.Type,java.lang.reflect.Type])Option[java.lang.reflect.Type]">collectFirst</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[java.lang.reflect.Type,java.lang.reflect.Type] with Serializable" id="akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="Class[_]" id="akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.c">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> <span class="keyword">if</span> <a href="#akka.util.Reflect.findMarker.marker" title="Class[_]">marker</a> <span title="(x$1: Class[_])Boolean">isAssignableFrom</span> <a href="#akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.c" title="Class[_]">c</a> ⇒ <a href="#akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.c" title="Class[_]">c</a>
        <span class="keyword">case</span> <a title="java.lang.reflect.ParameterizedType" id="akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.t">t</a>: <span title="java.lang.reflect.ParameterizedType">ParameterizedType</span> <span class="keyword">if</span> <a href="#akka.util.Reflect.findMarker.marker" title="Class[_]">marker</a> <span title="(x$1: Class[_])Boolean">isAssignableFrom</span> <a href="#akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.t" title="java.lang.reflect.ParameterizedType">t</a>.<span title="()java.lang.reflect.Type">getRawType</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$7]" class="delimiter">[</span><span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> ⇒ <a href="#akka.util.Reflect.findMarker.rec;$anonfun.isDefinedAt.t" title="java.lang.reflect.ParameterizedType">t</a>
      <span class="delimiter">}</span> <span title="java.lang.reflect.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="None.type">None</span>                       ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;cannot find [$marker] in ancestors of [$root]&quot;)" class="string">&quot;cannot find [$marker] in ancestors of [$root]&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="Class[_]" id="akka.util.Reflect.findMarker.rec.c">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>          ⇒ <span title="java.lang.reflect.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.c" title="Class[_]">c</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.util.Reflect.findMarker.marker" title="Class[_]">marker</a><span class="delimiter">)</span> <a href="#akka.util.Reflect.findMarker.rec.c" title="Class[_]">c</a> <span class="keyword">else</span> <a href="#akka.util.Reflect.findMarker.rec" title="(curr: Class[_])java.lang.reflect.Type">rec</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.c" title="Class[_]">c</a><span class="delimiter">)</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="java.lang.reflect.ParameterizedType" id="akka.util.Reflect.findMarker.rec.t">t</a>: <span title="java.lang.reflect.ParameterizedType">ParameterizedType</span><span class="delimiter">)</span> ⇒ <span title="java.lang.reflect.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.t" title="java.lang.reflect.ParameterizedType">t</a>.<span title="()java.lang.reflect.Type">getRawType</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.util.Reflect.findMarker.marker" title="Class[_]">marker</a><span class="delimiter">)</span> <a href="#akka.util.Reflect.findMarker.rec.t" title="java.lang.reflect.ParameterizedType">t</a> <span class="keyword">else</span> <a href="#akka.util.Reflect.findMarker.rec" title="(curr: Class[_])java.lang.reflect.Type">rec</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.rec.t" title="java.lang.reflect.ParameterizedType">t</a>.<span title="()java.lang.reflect.Type">getRawType</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$8]" class="delimiter">[</span><span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _                          ⇒ <span title="=&gt; Nothing">???</span> <span class="comment">// cannot happen due to collectFirst</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#akka.util.Reflect.findMarker.rec" title="(curr: Class[_])java.lang.reflect.Type">rec</a><span class="delimiter">(</span><a href="#akka.util.Reflect.findMarker.root" title="Class[_]">root</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
