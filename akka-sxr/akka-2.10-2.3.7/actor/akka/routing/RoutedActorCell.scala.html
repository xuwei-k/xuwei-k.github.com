<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/routing/RoutedActorCell.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.routing

<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> akka.actor.Actor
<span class="keyword">import</span> akka.actor.ActorCell
<span class="keyword">import</span> akka.actor.ActorInitializationException
<span class="keyword">import</span> akka.actor.ActorSystemImpl
<span class="keyword">import</span> akka.actor.AutoReceivedMessage
<span class="keyword">import</span> akka.actor.IndirectActorProducer
<span class="keyword">import</span> akka.actor.InternalActorRef
<span class="keyword">import</span> akka.actor.Props
<span class="keyword">import</span> akka.actor.Terminated
<span class="keyword">import</span> akka.dispatch.Envelope
<span class="keyword">import</span> akka.dispatch.MessageDispatcher
<span class="keyword">import</span> akka.actor.ActorContext
<span class="keyword">import</span> akka.actor.PoisonPill
<span class="keyword">import</span> akka.actor.SupervisorStrategy
<span class="keyword">import</span> akka.actor.ActorRef
<span class="keyword">import</span> akka.actor.ReceiveTimeout
<span class="keyword">import</span> akka.actor.Identify
<span class="keyword">import</span> akka.actor.ActorIdentity

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.routing.RoutedActorCell.type" id="akka.routing.RoutedActorCell">RoutedActorCell</a> <a href="#akka.routing.RoutedActorCell" title="akka.routing.RoutedActorCell.type" class="delimiter">{</a>
  <span class="keyword">class</span> <a title="class RouterActorCreator extends AnyRef with akka.actor.IndirectActorProducer" id="akka.routing.RoutedActorCell;RouterActorCreator">RouterActorCreator</a><a href="#akka.routing.RoutedActorCell;RouterActorCreator" title="akka.routing.RoutedActorCell.RouterActorCreator" class="delimiter">(</a><a title="akka.routing.RouterConfig" id="akka.routing.RoutedActorCell;RouterActorCreator.routerConfig">routerConfig</a>: <a href="RouterConfig.scala.html#akka.routing;RouterConfig" title="akka.routing.RouterConfig">RouterConfig</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../actor/Props.scala.html#akka.actor;IndirectActorProducer" title="akka.actor.IndirectActorProducer">IndirectActorProducer</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Class[akka.routing.RouterActor]" id="akka.routing.RoutedActorCell;RouterActorCreator.actorClass">actorClass</a> = classOf<span title="Class[akka.routing.RouterActor](classOf[akka.routing.RouterActor])" class="delimiter">[</span>RouterActor<span class="delimiter">]</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()akka.routing.RouterActor" id="akka.routing.RoutedActorCell;RouterActorCreator.produce">produce</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.routing.RoutedActorCell;RouterActorCreator.routerConfig" title="akka.routing.RouterConfig">routerConfig</a>.<a href="RouterConfig.scala.html#akka.routing;RouterConfig.createRouterActor" title="()akka.routing.RouterActor">createRouterActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RoutedActorCell extends akka.actor.ActorCell" id="akka.routing;RoutedActorCell">RoutedActorCell</a><a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="delimiter">(</a>
  <a title="akka.actor.ActorSystemImpl" id="akka.routing;RoutedActorCell._system">_system</a>: <a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>,
  <a title="akka.actor.InternalActorRef" id="akka.routing;RoutedActorCell._ref">_ref</a>: <a href="../actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>,
  <a title="akka.actor.Props" id="akka.routing;RoutedActorCell._routerProps">_routerProps</a>: <a href="../actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
  <a title="akka.dispatch.MessageDispatcher" id="akka.routing;RoutedActorCell._routerDispatcher">_routerDispatcher</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher" title="akka.dispatch.MessageDispatcher">MessageDispatcher</a>,
  <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.routing;RoutedActorCell.routeeProps">routeeProps</a>: <a href="../actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>,
  <a title="akka.actor.InternalActorRef" id="akka.routing;RoutedActorCell._supervisor">_supervisor</a>: <a href="../actor/ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell._system" title="akka.actor.ActorSystemImpl">_system</a>, <a href="#akka.routing;RoutedActorCell._ref" title="akka.actor.InternalActorRef">_ref</a>, <a href="#akka.routing;RoutedActorCell._routerProps" title="akka.actor.Props">_routerProps</a>, <a href="#akka.routing;RoutedActorCell._routerDispatcher" title="akka.dispatch.MessageDispatcher">_routerDispatcher</a>, <a href="#akka.routing;RoutedActorCell._supervisor" title="akka.actor.InternalActorRef">_supervisor</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">val</span> <a title="akka.routing.RouterConfig" id="akka.routing;RoutedActorCell.routerConfig">routerConfig</a> = <a href="#akka.routing;RoutedActorCell._routerProps" title="akka.actor.Props">_routerProps</a>.<a href="../actor/Props.scala.html#akka.actor;Props.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>

  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.routing.Router" id="akka.routing;RoutedActorCell._router_=">_router</a>: <a href="Router.scala.html#akka.routing;Router" title="akka.routing.Router">Router</a> = <span title="Null(null)" class="keyword">null</span> <span class="comment">// initialized in start, and then only updated from the actor</span>
  <span class="keyword">def</span> <a title="=&gt; akka.routing.Router" id="akka.routing;RoutedActorCell.router">router</a>: <a href="Router.scala.html#akka.routing;Router" title="akka.routing.Router">Router</a> = <a href="#akka.routing;RoutedActorCell._router_=" title="=&gt; akka.routing.Router">_router</a>

  <span class="keyword">def</span> <a title="(routee: akka.routing.Routee)Unit" id="akka.routing;RoutedActorCell.addRoutee">addRoutee</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.addRoutee.routee">routee</a>: <a href="Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><span title="(xs: akka.routing.Routee*)List[akka.routing.Routee]">List</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.addRoutee.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Add routees to the `Router`. Messages in flight may still be routed to
   * the old `Router` instance containing the old routees.
   */</span>
  <span class="keyword">def</span> <a title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit" id="akka.routing;RoutedActorCell.addRoutees">addRoutees</a><span class="delimiter">(</span><a title="scala.collection.immutable.Iterable[akka.routing.Routee]" id="akka.routing;RoutedActorCell.addRoutees.routees">routees</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.routing.Routee]">Iterable</span><span class="delimiter">[</span>Routee<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.routing;RoutedActorCell.addRoutees.routees" title="scala.collection.immutable.Iterable[akka.routing.Routee]">routees</a> <span title="(f: akka.routing.Routee =&gt; Unit)Unit">foreach</span> <a href="#akka.routing;RoutedActorCell.watch(d01bfaad2d)" title="(routee: akka.routing.Routee)Unit">watch</a>
    <span class="keyword">val</span> <a title="akka.routing.Router" id="akka.routing;RoutedActorCell.addRoutees.r">r</a> = <a href="#akka.routing;RoutedActorCell._router_=" title="=&gt; akka.routing.Router">_router</a>
    <a href="#akka.routing;RoutedActorCell._router_=" title="(x$1: akka.routing.Router)Unit">_router</a> = <a href="#akka.routing;RoutedActorCell.addRoutees.r" title="akka.routing.Router">r</a>.<a href="Router.scala.html#akka.routing;Router.withRoutees" title="(rs: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Router">withRoutees</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.addRoutees.r" title="akka.routing.Router">r</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a> <span title="(that: scala.collection.GenTraversableOnce[akka.routing.Routee])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[akka.routing.Routee],akka.routing.Routee,scala.collection.immutable.IndexedSeq[akka.routing.Routee]])scala.collection.immutable.IndexedSeq[akka.routing.Routee]">++</span> <a href="#akka.routing;RoutedActorCell.addRoutees.routees" title="scala.collection.immutable.Iterable[akka.routing.Routee]">routees</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(routee: akka.routing.Routee, stopChild: Boolean)Unit" id="akka.routing;RoutedActorCell.removeRoutee">removeRoutee</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.removeRoutee.routee">routee</a>: <a href="Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a>, <a title="Boolean" id="akka.routing;RoutedActorCell.removeRoutee.stopChild">stopChild</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.routing;RoutedActorCell.removeRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee], stopChild: Boolean)Unit">removeRoutees</a><span class="delimiter">(</span><span title="(xs: akka.routing.Routee*)List[akka.routing.Routee]">List</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutee.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span>, <a href="#akka.routing;RoutedActorCell.removeRoutee.stopChild" title="Boolean">stopChild</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Remove routees from the `Router`. Messages in flight may still be routed to
   * the old `Router` instance containing the old routees.
   */</span>
  <span class="keyword">def</span> <a title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee], stopChild: Boolean)Unit" id="akka.routing;RoutedActorCell.removeRoutees">removeRoutees</a><span class="delimiter">(</span><a title="scala.collection.immutable.Iterable[akka.routing.Routee]" id="akka.routing;RoutedActorCell.removeRoutees.routees">routees</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.routing.Routee]">Iterable</span><span class="delimiter">[</span>Routee<span class="delimiter">]</span>, <a title="Boolean" id="akka.routing;RoutedActorCell.removeRoutees.stopChild">stopChild</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.routing.Router" id="akka.routing;RoutedActorCell.removeRoutees.r">r</a> = <a href="#akka.routing;RoutedActorCell._router_=" title="=&gt; akka.routing.Router">_router</a>
    <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.routing;RoutedActorCell.removeRoutees.newRoutees">newRoutees</a> = <a href="#akka.routing;RoutedActorCell.removeRoutees.routees" title="scala.collection.immutable.Iterable[akka.routing.Routee]">routees</a>.<span title="(z: scala.collection.immutable.IndexedSeq[akka.routing.Routee])(op: (scala.collection.immutable.IndexedSeq[akka.routing.Routee], akka.routing.Routee) =&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee])scala.collection.immutable.IndexedSeq[akka.routing.Routee]">foldLeft</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutees.r" title="akka.routing.Router">r</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.xs">xs</a>, <a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.x">x</a><span class="delimiter">)</span> ⇒ <a href="#akka.routing;RoutedActorCell.unwatch(d01bfaad2d)" title="(routee: akka.routing.Routee)Unit">unwatch</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.x" title="akka.routing.Routee">x</a><span class="delimiter">)</span>; <a href="#akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.xs" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">xs</a>.<span title="(p: akka.routing.Routee =&gt; Boolean)scala.collection.immutable.IndexedSeq[akka.routing.Routee]">filterNot</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.$anonfun.x$1" title="akka.routing.Routee">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.routing;RoutedActorCell.removeRoutees.newRoutees.$anonfun.x" title="akka.routing.Routee">x</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#akka.routing;RoutedActorCell._router_=" title="(x$1: akka.routing.Router)Unit">_router</a> = <a href="#akka.routing;RoutedActorCell.removeRoutees.r" title="akka.routing.Router">r</a>.<a href="Router.scala.html#akka.routing;Router.withRoutees" title="(rs: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Router">withRoutees</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutees.newRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">newRoutees</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.removeRoutees.stopChild" title="Boolean">stopChild</a><span class="delimiter">)</span> <a href="#akka.routing;RoutedActorCell.removeRoutees.routees" title="scala.collection.immutable.Iterable[akka.routing.Routee]">routees</a> <span title="(f: akka.routing.Routee =&gt; Unit)Unit">foreach</span> <a href="#akka.routing;RoutedActorCell.stopIfChild" title="(routee: akka.routing.Routee)Unit">stopIfChild</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(routee: akka.routing.Routee)Unit" id="akka.routing;RoutedActorCell.watch(d01bfaad2d)">watch</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.watch(d01bfaad2d).routee">routee</a>: <a href="Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.routing;RoutedActorCell.watch(d01bfaad2d).routee" title="akka.routing.Routee">routee</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> ActorRefRoutee<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.routing;RoutedActorCell.watch(d01bfaad2d).ref">ref</a><span class="delimiter">)</span> ⇒ <a href="../actor/dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span title="Unit" class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.watch(d01bfaad2d).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _                   ⇒
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(routee: akka.routing.Routee)Unit" id="akka.routing;RoutedActorCell.unwatch(d01bfaad2d)">unwatch</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.unwatch(d01bfaad2d).routee">routee</a>: <a href="Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.routing;RoutedActorCell.unwatch(d01bfaad2d).routee" title="akka.routing.Routee">routee</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> ActorRefRoutee<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.routing;RoutedActorCell.unwatch(d01bfaad2d).ref">ref</a><span class="delimiter">)</span> ⇒ <a href="../actor/dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.unwatch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">unwatch</a><span title="Unit" class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.unwatch(d01bfaad2d).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _                   ⇒
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(routee: akka.routing.Routee)Unit" id="akka.routing;RoutedActorCell.stopIfChild">stopIfChild</a><span class="delimiter">(</span><a title="akka.routing.Routee" id="akka.routing;RoutedActorCell.stopIfChild.routee">routee</a>: <a href="Router.scala.html#akka.routing;Routee" title="akka.routing.Routee">Routee</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.routing;RoutedActorCell.stopIfChild.routee" title="akka.routing.Routee">routee</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> ActorRefRoutee<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.routing;RoutedActorCell.stopIfChild.ref">ref</a><span class="delimiter">)</span> ⇒ <a href="../actor/dungeon/Children.scala.html#akka.actor.dungeon;Children.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.stopIfChild.ref" title="akka.actor.ActorRef">ref</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../actor/ActorPath.scala.html#akka.actor;ActorPath.name" title="=&gt; String">name</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.stopIfChild.ref" title="akka.actor.ActorRef">`ref`</a><span class="delimiter">)</span> ⇒
        <span class="comment">// The reason for the delay is to give concurrent</span>
        <span class="comment">// messages a chance to be placed in mailbox before sending PoisonPill,</span>
        <span class="comment">// best effort.</span>
        <a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystemImpl.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce$default$5" title="akka.actor.ActorRef" id="akka.routing;RoutedActorCell.stopIfChild.x$8" class="delimiter">(</a><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">100</span>.<a title="scala.concurrent.duration.FiniteDuration" id="akka.routing;RoutedActorCell.stopIfChild.x$4">milliseconds</a>, <a href="#akka.routing;RoutedActorCell.stopIfChild.ref" title="akka.actor.ActorRef" id="akka.routing;RoutedActorCell.stopIfChild.x$5">ref</a>, <a href="../actor/Actor.scala.html#akka.actor.PoisonPill" title="akka.actor.PoisonPill.type" id="akka.routing;RoutedActorCell.stopIfChild.x$6">PoisonPill</a><span class="delimiter">)</span><span title="Unit" class="delimiter">(</span><a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.dispatcher" title="akka.dispatch.MessageDispatcher" id="akka.routing;RoutedActorCell.stopIfChild.x$7">dispatcher</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒
    <span class="delimiter">}</span>
    <span class="keyword">case</span> _ ⇒
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()RoutedActorCell.this.type" id="akka.routing;RoutedActorCell.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span>
    <span class="comment">// create the initial routees before scheduling the Router actor</span>
    <a href="#akka.routing;RoutedActorCell._router_=" title="(x$1: akka.routing.Router)Unit">_router</a> = <a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<a href="RouterConfig.scala.html#akka.routing;RouterConfig.createRouter" title="(system: akka.actor.ActorSystem)akka.routing.Router">createRouter</a><span class="delimiter">(</span><a href="../actor/ActorCell.scala.html#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span>
    <a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.routing.DeprecatedRouterConfig" id="akka.routing;RoutedActorCell.start.old">old</a>: <a href="DeprecatedRouting.scala.html#akka.routing;DeprecatedRouterConfig" title="akka.routing.DeprecatedRouterConfig">DeprecatedRouterConfig</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.old" title="akka.routing.DeprecatedRouterConfig">old</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.nrOfInstances" title="=&gt; Int">nrOfInstances</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="(n: Int)(elem: =&gt; akka.routing.Routee)scala.collection.immutable.Vector[akka.routing.Routee]">fill</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.old" title="akka.routing.DeprecatedRouterConfig">old</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.nrOfInstances" title="=&gt; Int">nrOfInstances</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.old" title="akka.routing.DeprecatedRouterConfig">old</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.newRoutee" title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.routing.Routee">newRoutee</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.routeeProps" title="=&gt; akka.actor.Props">routeeProps</a>, <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <span title="scala.collection.immutable.Iterable[String]">paths</span> = <a href="#akka.routing;RoutedActorCell.start.old" title="akka.routing.DeprecatedRouterConfig">old</a>.<a href="RouterConfig.scala.html#akka.routing;Group.paths" title="=&gt; scala.collection.immutable.Iterable[String]">paths</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[String]">paths</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[String]">paths</span>.<span title="(f: String =&gt; akka.routing.Routee)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable[String],akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]])scala.collection.immutable.Iterable[akka.routing.Routee]">map</span><span class="delimiter">(</span><span title="String">p</span> ⇒ <a href="#akka.routing;RoutedActorCell.start.old" title="akka.routing.DeprecatedRouterConfig">old</a>.<a href="RouterConfig.scala.html#akka.routing;Group.routeeFor" title="(path: String, context: akka.actor.ActorContext)akka.routing.Routee">routeeFor</a><span class="delimiter">(</span><span title="String">p</span>, <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable[String],akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.routing.Pool" id="akka.routing;RoutedActorCell.start.pool">pool</a>: <a href="RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.pool" title="akka.routing.Pool">pool</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.nrOfInstances" title="=&gt; Int">nrOfInstances</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
          <a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="(n: Int)(elem: =&gt; akka.routing.Routee)scala.collection.immutable.Vector[akka.routing.Routee]">fill</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.pool" title="akka.routing.Pool">pool</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.nrOfInstances" title="=&gt; Int">nrOfInstances</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.start.pool" title="akka.routing.Pool">pool</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.newRoutee" title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.routing.Routee">newRoutee</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.routeeProps" title="=&gt; akka.actor.Props">routeeProps</a>, <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.routing.Group" id="akka.routing;RoutedActorCell.start.group">group</a>: <a href="RouterConfig.scala.html#akka.routing;Group" title="akka.routing.Group">Group</a> ⇒
        <span class="keyword">val</span> <span title="scala.collection.immutable.Iterable[String]">paths</span> = <a href="#akka.routing;RoutedActorCell.start.group" title="akka.routing.Group">group</a>.<a href="RouterConfig.scala.html#akka.routing;Group.paths" title="=&gt; scala.collection.immutable.Iterable[String]">paths</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[String]">paths</span>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[String]">paths</span>.<span title="(f: String =&gt; akka.routing.Routee)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable[String],akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]])scala.collection.immutable.Iterable[akka.routing.Routee]">map</span><span class="delimiter">(</span><span title="String">p</span> ⇒ <a href="#akka.routing;RoutedActorCell.start.group" title="akka.routing.Group">group</a>.<a href="RouterConfig.scala.html#akka.routing;Group.routeeFor" title="(path: String, context: akka.actor.ActorContext)akka.routing.Routee">routeeFor</a><span class="delimiter">(</span><span title="String">p</span>, <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable[String],akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒
    <span class="delimiter">}</span>
    <a href="#akka.routing;RoutedActorCell.preSuperStart" title="()Unit">preSuperStart</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">super</a>.<a href="../actor/dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.start" title="()RoutedActorCell.this.type">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Called when `router` is initalized but before `super.start()` to
   * be able to do extra initialization in subclass.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="akka.routing;RoutedActorCell.preSuperStart">preSuperStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/*
   * end of construction
   */</span>

  <span class="comment">/**
   * Route the message via the router to the selected destination.
   *
   * When [[akka.routing.CurrentRoutees]] is sent to the RoutedActorRef it
   * replies with [[akka.routing.RouterRoutees]].
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(envelope: akka.dispatch.Envelope)Unit" id="akka.routing;RoutedActorCell.sendMessage(92be3715be)">sendMessage</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.routing;RoutedActorCell.sendMessage(92be3715be).envelope">envelope</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<a href="RouterConfig.scala.html#akka.routing;RouterConfig.isManagementMessage" title="(msg: Any)Boolean">isManagementMessage</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.sendMessage(92be3715be).envelope" title="akka.dispatch.Envelope">envelope</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell" class="keyword">super</a>.<a href="../actor/dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.sendMessage" title="(msg: akka.dispatch.Envelope)Unit">sendMessage</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.sendMessage(92be3715be).envelope" title="akka.dispatch.Envelope">envelope</a><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.route" title="(message: Any, sender: akka.actor.ActorRef)Unit">route</a><span class="delimiter">(</span><a href="#akka.routing;RoutedActorCell.sendMessage(92be3715be).envelope" title="akka.dispatch.Envelope">envelope</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a>, <a href="#akka.routing;RoutedActorCell.sendMessage(92be3715be).envelope" title="akka.dispatch.Envelope">envelope</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RouterActor extends AnyRef with akka.actor.Actor" id="akka.routing;RouterActor">RouterActor</a> <a href="#akka.routing;RouterActor" title="akka.routing.RouterActor" class="keyword">extends</a> <a href="../actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="akka.routing.RoutedActorCell" id="akka.routing;RouterActor.cell">cell</a> = <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <span title="akka.routing.RoutedActorCell" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="akka.routing.RoutedActorCell" id="akka.routing;RouterActor.cell.x">x</a>: <a href="#akka.routing;RoutedActorCell" title="akka.routing.RoutedActorCell">RoutedActorCell</a> ⇒ <a href="#akka.routing;RouterActor.cell.x" title="akka.routing.RoutedActorCell">x</a>
    <span class="keyword">case</span> _ ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="../actor/Actor.scala.html#akka.actor.ActorInitializationException.apply(537aad5732)" title="(message: String)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><span title="String(&quot;Router actor can only be used in RoutedActorRef, not in &quot;)" class="string">&quot;Router actor can only be used in RoutedActorRef, not in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="Option[akka.actor.ActorRef]" id="akka.routing;RouterActor.routingLogicController">routingLogicController</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<a href="RouterConfig.scala.html#akka.routing;RouterConfig.routingLogicController" title="(routingLogic: akka.routing.RoutingLogic)Option[akka.actor.Props]">routingLogicController</a><span class="delimiter">(</span>
    <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.logic" title="=&gt; akka.routing.RoutingLogic">logic</a><span class="delimiter">)</span>.<span title="(f: akka.actor.Props =&gt; akka.actor.ActorRef)Option[akka.actor.ActorRef]">map</span><span class="delimiter">(</span><a title="akka.actor.Props" id="akka.routing;RouterActor.routingLogicController.$anonfun.props">props</a> ⇒ <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="#akka.routing;RouterActor.routingLogicController.$anonfun.props" title="akka.actor.Props">props</a>.<a href="../actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>,
      name = <span title="String(&quot;routingLogicController&quot;)" class="string">&quot;routingLogicController&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.routing;RouterActor.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.routing;RouterActor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="RouterConfig.scala.html#akka.routing.GetRoutees" title="akka.routing.GetRoutees.type">GetRoutees</a> ⇒
      <a href="../actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="RouterConfig.scala.html#akka.routing;Routees" title="(routees: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Routees">Routees</a><span class="delimiter">(</span><a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="DeprecatedRouting.scala.html#akka.routing.CurrentRoutees" title="akka.routing.CurrentRoutees.type">CurrentRoutees</a> ⇒
      <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span title="Unit" class="delimiter">(</span><a href="../actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.routing.CollectRouteeRefs](classOf[akka.routing.CollectRouteeRefs])" class="delimiter">[</span>CollectRouteeRefs<span class="delimiter">]</span>, <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>, <a href="../actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> AddRoutee<span class="delimiter">(</span><span title="akka.routing.Routee">routee</span><span class="delimiter">)</span> ⇒
      <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.addRoutee" title="(routee: akka.routing.Routee)Unit">addRoutee</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.routing.Routee">routee</span><span class="delimiter">)</span>
    <span class="keyword">case</span> RemoveRoutee<span class="delimiter">(</span><span title="akka.routing.Routee">routee</span><span class="delimiter">)</span> ⇒
      <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.removeRoutee" title="(routee: akka.routing.Routee, stopChild: Boolean)Unit">removeRoutee</a><span class="delimiter">(</span><span title="akka.routing.Routee">routee</span>, stopChild = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <a href="#akka.routing;RouterActor.stopIfAllRouteesRemoved" title="()Unit">stopIfAllRouteesRemoved</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Any" id="akka.routing;RouterActor.receive;$anonfun.isDefinedAt.other">other</a> <span class="keyword">if</span> <a href="#akka.routing;RouterActor.routingLogicController" title="=&gt; Option[akka.actor.ActorRef]">routingLogicController</a>.<span title="=&gt; Boolean">isDefined</span> ⇒
      <a href="#akka.routing;RouterActor.routingLogicController" title="=&gt; Option[akka.actor.ActorRef]">routingLogicController</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.routing;RouterActor.receive;$anonfun.applyOrElse.$anonfun.x$2" title="akka.actor.ActorRef">_</a>.<a href="../actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a><a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><a href="#akka.routing;RouterActor.receive;$anonfun.isDefinedAt.other" title="Any">other</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.routing;RouterActor.stopIfAllRouteesRemoved">stopIfAllRouteesRemoved</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a>.<a href="RouterConfig.scala.html#akka.routing;RouterConfig.stopRouterWhenAllRouteesRemoved" title="=&gt; Boolean">stopRouterWhenAllRouteesRemoved</a><span class="delimiter">)</span>
      <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(cause: Throwable, msg: Option[Any])Unit" id="akka.routing;RouterActor.preRestart">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.routing;RouterActor.preRestart.cause">cause</a>: <span title="Throwable">Throwable</span>, <a title="Option[Any]" id="akka.routing;RouterActor.preRestart.msg">msg</a>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="delimiter">{</span>
    <span class="comment">// do not scrap children</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 * Backwards compatibility glue to support CurrentRoutees/RouterRoutees containing refs of
 * the routees. This class is not needed when CurrentRoutees/RouterRoutees are removed.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class CollectRouteeRefs extends AnyRef with akka.actor.Actor" id="akka.routing;CollectRouteeRefs">CollectRouteeRefs</a><a href="#akka.routing;CollectRouteeRefs" title="akka.routing.CollectRouteeRefs" class="delimiter">(</a><a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.routing;CollectRouteeRefs.routees">routees</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">IndexedSeq</span><span class="delimiter">[</span>Routee<span class="delimiter">]</span>, <a title="akka.actor.ActorRef" id="akka.routing;CollectRouteeRefs.replyTo">replyTo</a>: <a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>

  <span class="keyword">var</span> <a title="scala.collection.immutable.Vector[akka.actor.ActorRef]" id="akka.routing;CollectRouteeRefs.collected_=">collected</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="[A]=&gt; scala.collection.immutable.Vector[A]">empty</span><span title="scala.collection.immutable.Vector[akka.actor.ActorRef]" class="delimiter">[</span><a href="../actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span>
  <span class="keyword">var</span> <a title="Int" id="akka.routing;CollectRouteeRefs.count_=">count</a> = <span title="Int(0)" class="int">0</span>
  <a href="#akka.routing;CollectRouteeRefs.routees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>.<span title="(f: akka.routing.Routee =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.routing;CollectRouteeRefs.<local CollectRouteeRefs>.$anonfun.x$3" title="akka.routing.Routee">_</a>.<a href="Router.scala.html#akka.routing;Routee.send" title="(message: Any, sender: akka.actor.ActorRef)Unit">send</a><span class="delimiter">(</span><a href="../actor/Actor.scala.html#akka.actor;Identify" title="(messageId: Any)akka.actor.Identify">Identify</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>, <a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
  <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">10</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span>, <a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="../actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.routing;CollectRouteeRefs.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.routing;CollectRouteeRefs.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> ActorIdentity<span class="delimiter">(</span>_, <a title="Option[akka.actor.ActorRef]" id="akka.routing;CollectRouteeRefs.receive;$anonfun.isDefinedAt.refOption">refOption</a><span class="delimiter">)</span> ⇒
      <a href="#akka.routing;CollectRouteeRefs.receive;$anonfun.isDefinedAt.refOption" title="Option[akka.actor.ActorRef]">refOption</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.actor.ActorRef" id="akka.routing;CollectRouteeRefs.receive;$anonfun.applyOrElse.$anonfun.ref">ref</a> ⇒ <a href="#akka.routing;CollectRouteeRefs.collected_=" title="(x$1: scala.collection.immutable.Vector[akka.actor.ActorRef])Unit">collected</a> = <a href="#akka.routing;CollectRouteeRefs.collected_=" title="=&gt; scala.collection.immutable.Vector[akka.actor.ActorRef]">collected</a> <span title="(elem: akka.actor.ActorRef)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.actor.ActorRef],akka.actor.ActorRef,scala.collection.immutable.Vector[akka.actor.ActorRef]])scala.collection.immutable.Vector[akka.actor.ActorRef]">:+</span> <a href="#akka.routing;CollectRouteeRefs.receive;$anonfun.applyOrElse.$anonfun.ref" title="akka.actor.ActorRef">ref</a> <span class="delimiter">}</span>
      <a href="#akka.routing;CollectRouteeRefs.count_=" title="(x$1: Int)Unit">count</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;CollectRouteeRefs.count_=" title="=&gt; Int">count</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.routing;CollectRouteeRefs.routees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <a href="#akka.routing;CollectRouteeRefs.done" title="()Unit">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="../actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒ <a href="#akka.routing;CollectRouteeRefs.done" title="()Unit">done</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.routing;CollectRouteeRefs.done">done</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">replyTo</a> <a href="../actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DeprecatedRouting.scala.html#akka.routing;RouterRoutees" title="(routees: scala.collection.immutable.IndexedSeq[akka.actor.ActorRef])akka.routing.RouterRoutees">RouterRoutees</a><span class="delimiter">(</span><a href="#akka.routing;CollectRouteeRefs.collected_=" title="=&gt; scala.collection.immutable.Vector[akka.actor.ActorRef]">collected</a><span class="delimiter">)</span>
    <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class RouterPoolActor extends akka.routing.RouterActor" id="akka.routing;RouterPoolActor">RouterPoolActor</a><a href="#akka.routing;RouterPoolActor" title="akka.routing.RouterPoolActor" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="akka.actor.SupervisorStrategy" id="akka.routing;RouterPoolActor.supervisorStrategy">supervisorStrategy</a>: <a href="../actor/FaultHandling.scala.html#akka.actor;SupervisorStrategy" title="akka.actor.SupervisorStrategy">SupervisorStrategy</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.routing;RouterActor" title="akka.routing.RouterActor">RouterActor</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="akka.routing.Pool" id="akka.routing;RouterPoolActor.pool">pool</a> = <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.routerConfig" title="=&gt; akka.routing.RouterConfig">routerConfig</a> <span title="akka.routing.Pool" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="akka.routing.Pool" id="akka.routing;RouterPoolActor.pool.x">x</a>: <a href="RouterConfig.scala.html#akka.routing;Pool" title="akka.routing.Pool">Pool</a> ⇒ <a href="#akka.routing;RouterPoolActor.pool.x" title="akka.routing.Pool">x</a>
    <span class="keyword">case</span> <a title="akka.routing.RouterConfig" id="akka.routing;RouterPoolActor.pool.other">other</a> ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="../actor/Actor.scala.html#akka.actor.ActorInitializationException.apply(537aad5732)" title="(message: String)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><span title="String(&quot;RouterPoolActor can only be used with Pool, not &quot;)" class="string">&quot;RouterPoolActor can only be used with Pool, not &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.routing;RouterPoolActor.pool.other" title="akka.routing.RouterConfig">other</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.routing;RouterPoolActor.receive">receive</a> = <span class="delimiter">(</span><a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.child">child</a><span class="delimiter">)</span> ⇒
      <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.removeRoutee" title="(routee: akka.routing.Routee, stopChild: Boolean)Unit">removeRoutee</a><span class="delimiter">(</span><a href="Router.scala.html#akka.routing;ActorRefRoutee" title="(ref: akka.actor.ActorRef)akka.routing.ActorRefRoutee">ActorRefRoutee</a><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span>, stopChild = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <a href="#akka.routing;RouterActor.stopIfAllRouteesRemoved" title="()Unit">stopIfAllRouteesRemoved</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> AdjustPoolSize<span class="delimiter">(</span><a title="Int" id="akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.change">change</a>: <span title="Int">Int</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.change" title="Int">change</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Vector[akka.routing.Routee]" id="akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.newRoutees">newRoutees</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="(n: Int)(elem: =&gt; akka.routing.Routee)scala.collection.immutable.Vector[akka.routing.Routee]">fill</span><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.change" title="Int">change</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.pool" title="=&gt; akka.routing.Pool">pool</a>.<a href="RouterConfig.scala.html#akka.routing;Pool.newRoutee" title="(routeeProps: akka.actor.Props, context: akka.actor.ActorContext)akka.routing.Routee">newRoutee</a><span class="delimiter">(</span><a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.routeeProps" title="=&gt; akka.actor.Props">routeeProps</a>, <a href="../actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.addRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee])Unit">addRoutees</a><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.newRoutees" title="scala.collection.immutable.Vector[akka.routing.Routee]">newRoutees</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.change" title="Int">change</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.currentRoutees">currentRoutees</a> = <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.router" title="=&gt; akka.routing.Router">router</a>.<a href="Router.scala.html#akka.routing;Router.routees" title="=&gt; scala.collection.immutable.IndexedSeq[akka.routing.Routee]">routees</a>
        <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]" id="akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.abandon">abandon</a> = <a href="#akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.currentRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">currentRoutees</a>.<span title="(n: Int)scala.collection.immutable.IndexedSeq[akka.routing.Routee]">drop</span><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.currentRoutees" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">currentRoutees</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">+</span> <a href="#akka.routing;RouterPoolActor.receive;$anonfun.isDefinedAt.change" title="Int">change</a><span class="delimiter">)</span>
        <a href="#akka.routing;RouterActor.cell" title="=&gt; akka.routing.RoutedActorCell">cell</a>.<a href="#akka.routing;RoutedActorCell.removeRoutees" title="(routees: scala.collection.immutable.Iterable[akka.routing.Routee], stopChild: Boolean)Unit">removeRoutees</a><span class="delimiter">(</span><a href="#akka.routing;RouterPoolActor.receive;$anonfun.applyOrElse.abandon" title="scala.collection.immutable.IndexedSeq[akka.routing.Routee]">abandon</a>, stopChild = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>: Actor.<span title="akka.actor.Actor.Receive">Receive</span><span class="delimiter">)</span> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> <a href="#akka.routing;RouterPoolActor" title="akka.routing.RouterPoolActor" class="keyword">super</a>.<a href="#akka.routing;RouterActor.receive" title="=&gt; PartialFunction[Any,Unit]">receive</a>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>
