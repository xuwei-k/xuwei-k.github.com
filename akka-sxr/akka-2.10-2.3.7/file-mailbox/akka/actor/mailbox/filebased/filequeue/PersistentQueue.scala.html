<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>file-mailbox/akka/actor/mailbox/filebased/filequeue/PersistentQueue.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright 2009 Twitter, Inc.
 * Copyright 2009 Robey Pointer &lt;robeypointer@gmail.com&gt;
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may
 * not use this file except in compliance with the License. You may obtain
 * a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> akka.actor.mailbox.filebased.filequeue

<span class="keyword">import</span> java.io._
<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> akka.event.LoggingAdapter
<span class="keyword">import</span> java.util.concurrent.TimeUnit
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> akka.actor.mailbox.filebased.FileBasedMailboxSettings

<span class="comment">// a config value that's backed by a global setting but may be locally overridden</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;durable mailboxes are superseded by akka-persistence&quot;</span>, <span class="string">&quot;2.3&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class OverlaySetting[T] extends AnyRef" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting">OverlaySetting</a><span class="delimiter">[</span><a title="" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting;T">T</a><span class="delimiter">]</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting" title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[T]" class="delimiter">(</a><a title="=&gt; T" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting.base">base</a>: ⇒ T<span class="delimiter">)</span> <span class="delimiter">{</span>
  @volatile
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[T]" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting.local_=">local</a>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="None.type">None</span>

  <span class="keyword">def</span> <a title="(value: Option[T])Unit" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting.set">set</a><span class="delimiter">(</span><a title="Option[T]" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting.set.value">value</a>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.local_=" title="(x$1: Option[T])Unit">local</a> = <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set.value" title="Option[T]">value</a>

  <span class="keyword">def</span> <a title="()T" id="akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply">apply</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.local_=" title="=&gt; Option[T]">local</a>.<span title="(default: =&gt; T)T">getOrElse</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.base" title="=&gt; T">base</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait Prependable[T] extends AnyRef" id="akka.actor.mailbox.filebased.filequeue;Prependable">Prependable</a><span class="delimiter">[</span><a title="" id="akka.actor.mailbox.filebased.filequeue;Prependable;T">T</a><span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(t: T)Unit" id="akka.actor.mailbox.filebased.filequeue;Prependable.prepend">prepend</a><span class="delimiter">(</span><a title="T" id="akka.actor.mailbox.filebased.filequeue;Prependable.prepend.t">t</a>: <a href="#akka.actor.mailbox.filebased.filequeue;Prependable;T" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

@deprecated<span class="delimiter">(</span><span class="string">&quot;durable mailboxes are superseded by akka-persistence&quot;</span>, <span class="string">&quot;2.3&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class PersistentQueue extends AnyRef" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue">PersistentQueue</a><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue" class="delimiter">(</a><a title="String" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.persistencePath">persistencePath</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.name">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.FileBasedMailboxSettings" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.settings">settings</a>: <a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">FileBasedMailboxSettings</a>, <a title="akka.event.LoggingAdapter" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.log">log</a>: <a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">case object</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.ItemArrived.productElement.x$1" title="PersistentQueue.this.ItemArrived.type" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.ItemArrived.readResolve">ItemArrived</a>

  <span class="comment">// current size of all data in the queue:</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=">queueSize</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="comment">// # of items EVER added to the queue:</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalItems_=">_totalItems</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="comment">// # of items that were expired by the time they were read:</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalExpired_=">_totalExpired</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="comment">// age (in milliseconds) of the last item read from the queue:</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._currentAge_=">_currentAge</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="comment">// # of items thot were discarded because the queue was full:</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalDiscarded_=">_totalDiscarded</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="comment">// # of items in the queue (including those not in memory)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=">queueLength</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="PersistentQueue extends scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=">queue</a>: mutable.<a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue;<refinement>" title="PersistentQueue extends scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">Queue</a><span class="delimiter">[</span>QItem<span class="delimiter">]</span> <span class="keyword">with</span> Prependable<span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon" title="scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon">mutable</a>.<span title="scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem]">Queue</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> <span class="keyword">with</span> <a href="#akka.actor.mailbox.filebased.filequeue;Prependable" title="akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">Prependable</a><span class="delimiter">[</span>QItem<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="comment">// scala's Queue doesn't (yet?) have a way to put back.</span>
    <span class="keyword">def</span> <a title="(item: akka.actor.mailbox.filebased.filequeue.QItem)Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon.prepend">prepend</a><span class="delimiter">(</span><a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon.prepend.item">item</a>: <a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem" title="akka.actor.mailbox.filebased.filequeue.QItem">QItem</a><span class="delimiter">)</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon" title="(elem: akka.actor.mailbox.filebased.filequeue.QItem)Unit">prependElem</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue;$anon.prepend.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=">_memoryBytes</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=">closed</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=">paused</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">def</span> <a title="[T](base: =&gt; T)akka.actor.mailbox.filebased.filequeue.OverlaySetting[T]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay">overlay</a><span class="delimiter">[</span><a title="" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay.base">base</a>: ⇒ T<span class="delimiter">)</span> = <span title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[T]" class="keyword">new</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting" title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[T]">OverlaySetting</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay.base" title="=&gt; T">base</a><span class="delimiter">)</span>

  <span class="comment">// attempting to add an item after the queue reaches this size (in items) will fail.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxItems">maxItems</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Int)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxItems_=" title="=&gt; Int">maxItems</a><span class="delimiter">)</span>

  <span class="comment">// attempting to add an item after the queue reaches this size (in bytes) will fail.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxSize">maxSize</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Long)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxSize_=" title="=&gt; Long">maxSize</a><span class="delimiter">)</span>

  <span class="comment">// attempting to add an item larger than this size (in bytes) will fail.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxItemSize">maxItemSize</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Long)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxItemSize_=" title="=&gt; Long">maxItemSize</a><span class="delimiter">)</span>

  <span class="comment">// maximum expiration time for this queue (seconds).</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxAge">maxAge</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Int)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxAge_=" title="=&gt; Int">maxAge</a><span class="delimiter">)</span>

  <span class="comment">// maximum journal size before the journal should be rotated.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalSize">maxJournalSize</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Long)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalSize_=" title="=&gt; Long">maxJournalSize</a><span class="delimiter">)</span>

  <span class="comment">// maximum size of a queue before it drops into read-behind mode.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxMemorySize">maxMemorySize</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Long)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxMemorySize_=" title="=&gt; Long">maxMemorySize</a><span class="delimiter">)</span>

  <span class="comment">// maximum overflow (multiplier) of a journal file before we re-create it.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalOverflow">maxJournalOverflow</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Int)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalOverflow_=" title="=&gt; Int">maxJournalOverflow</a><span class="delimiter">)</span>

  <span class="comment">// absolute maximum size of a journal file until we rebuild it, no matter what.</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalSizeAbsolute">maxJournalSizeAbsolute</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Long)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalSizeAbsolute_=" title="=&gt; Long">maxJournalSizeAbsolute</a><span class="delimiter">)</span>

  <span class="comment">// whether to drop older items (instead of newer) when the queue is full</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardOldWhenFull">discardOldWhenFull</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Boolean)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.discardOldWhenFull_=" title="=&gt; Boolean">discardOldWhenFull</a><span class="delimiter">)</span>

  <span class="comment">// whether to keep a journal file at all</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.keepJournal">keepJournal</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Boolean)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.keepJournal_=" title="=&gt; Boolean">keepJournal</a><span class="delimiter">)</span>

  <span class="comment">// whether to sync the journal after each transaction</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.syncJournal">syncJournal</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Boolean)akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.syncJournal_=" title="=&gt; Boolean">syncJournal</a><span class="delimiter">)</span>

  <span class="comment">// (optional) move expired items over to this queue</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.OverlaySetting[Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.expiredQueue">expiredQueue</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.overlay" title="(base: =&gt; Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue])akka.actor.mailbox.filebased.filequeue.OverlaySetting[Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]]">overlay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type">PersistentQueue</a>.<a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue.expiredQueue_=" title="=&gt; Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]">expiredQueue</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.mailbox.filebased.filequeue.Journal" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=">journal</a> = <span title="akka.actor.mailbox.filebased.filequeue.Journal" class="keyword">new</span> <a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal" title="akka.actor.mailbox.filebased.filequeue.Journal">Journal</a><span class="delimiter">(</span><span title="(x$1: String, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.persistencePath" title="String">persistencePath</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a><span class="delimiter">)</span>.<span title="()String">getCanonicalPath</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">syncJournal</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a><span class="delimiter">)</span>

  <span class="comment">// track tentative remofinal vals</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=">xidCounter</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions">openTransactions</a> = <span title="()scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">HashMap</span><span class="delimiter">[</span>Int, QItem<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionCount">openTransactionCount</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a>.<span title="=&gt; Int">size</span>
  <span class="keyword">def</span> <a title="=&gt; List[Int]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds">openTransactionIds</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a>.<span title="=&gt; Iterable[Int]">keys</span>.<span title="=&gt; List[Int]">toList</span>.<span title="(lt: (Int, Int) =&gt; Boolean)List[Int]">sortWith</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds.$anonfun.x$1" title="Int">_</a> <span title="(x: Int)Int">-</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds.$anonfun.x$2" title="Int">_</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.length">length</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalItems">totalItems</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalItems_=" title="=&gt; Long">_totalItems</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.bytes">bytes</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.journalSize">journalSize</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.size" title="=&gt; Long">size</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalExpired">totalExpired</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalExpired_=" title="=&gt; Long">_totalExpired</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.currentAge">currentAge</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Long(0L)" class="int">0</span> <span class="keyword">else</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._currentAge_=" title="=&gt; Long">_currentAge</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalDiscarded">totalDiscarded</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalDiscarded_=" title="=&gt; Long">_totalDiscarded</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.isClosed">isClosed</a>: <span title="Boolean">Boolean</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=" title="=&gt; Boolean">paused</a> <span class="delimiter">}</span>

  <span class="comment">// mostly for unit tests.</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.memoryLength">memoryLength</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; Long">size</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.memoryBytes">memoryBytes</a>: <span title="Long">Long</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Long)Long">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="=&gt; Long">_memoryBytes</a> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.inReadBehind">inReadBehind</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a> <span class="delimiter">}</span>

  <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure" title="(settings: akka.actor.mailbox.filebased.FileBasedMailboxSettings)Unit">configure</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.settings" title="=&gt; akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(settings: akka.actor.mailbox.filebased.FileBasedMailboxSettings)Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure">configure</a><span class="delimiter">(</span><a title="akka.actor.mailbox.filebased.FileBasedMailboxSettings" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings">settings</a>: <a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">FileBasedMailboxSettings</a><span class="delimiter">)</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxItems" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">maxItems</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Int])Unit">set</a> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxItems" title="=&gt; Int">MaxItems</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxSize" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">maxSize</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Long])Unit">set</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxSize" title="=&gt; Long">MaxSize</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxItemSize" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">maxItemSize</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Long])Unit">set</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxItemSize" title="=&gt; Long">MaxItemSize</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxAge" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">maxAge</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Int])Unit">set</a> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxAge" title="=&gt; scala.concurrent.duration.FiniteDuration">MaxAge</a>.<span title="=&gt; Long">toSeconds</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalSize" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">maxJournalSize</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Long])Unit">set</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxJournalSize" title="=&gt; Long">MaxJournalSize</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxMemorySize" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">maxMemorySize</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Long])Unit">set</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxMemorySize" title="=&gt; Long">MaxMemorySize</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalOverflow" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Int]">maxJournalOverflow</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Int])Unit">set</a> <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxJournalOverflow" title="=&gt; Int">MaxJournalOverflow</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.maxJournalSizeAbsolute" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Long]">maxJournalSizeAbsolute</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Long])Unit">set</a> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.MaxJournalSizeAbsolute" title="=&gt; Long">MaxJournalSizeAbsolute</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardOldWhenFull" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">discardOldWhenFull</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Boolean])Unit">set</a> <span title="(x: Boolean)Some[Boolean]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.DiscardOldWhenFull" title="=&gt; Boolean">DiscardOldWhenFull</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.keepJournal" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">keepJournal</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Boolean])Unit">set</a> <span title="(x: Boolean)Some[Boolean]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.KeepJournal" title="=&gt; Boolean">KeepJournal</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.syncJournal" title="=&gt; akka.actor.mailbox.filebased.filequeue.OverlaySetting[Boolean]">syncJournal</a> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.set" title="(value: Option[Boolean])Unit">set</a> <span title="(x: Boolean)Some[Boolean]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.configure.settings" title="akka.actor.mailbox.filebased.FileBasedMailboxSettings">settings</a>.<a href="../FileBasedMailboxSettings.scala.html#akka.actor.mailbox.filebased;FileBasedMailboxSettings.SyncJournal" title="=&gt; Boolean">SyncJournal</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.info(cc2e600322)" title="(message: String)Unit">info</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Configuring queue %s: journal=%s, max-items=%s, max-size=%s, max-age=%s, max-journal-size=%s, max-memory-size=%s, max-journal-overflow=%s, max-journal-size-absolute=%s, discard-old-when-full=%s, sync-journal=%s&quot;</span>
      .<span title="(args: Any*)String">format</span><span class="delimiter">(</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxItems</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxSize</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxAge</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSize</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxMemorySize</a><span class="delimiter">(</span><span class="delimiter">)</span>,
        <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxJournalOverflow</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSizeAbsolute</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">discardOldWhenFull</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">syncJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.erase" title="()Unit">erase</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Array[String]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.dumpConfig">dumpConfig</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Array[String])Array[String]">synchronized</a> <span class="delimiter">{</span>
    <span title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</span>
      <span title="String(&quot;max-items=&quot;)" class="string">&quot;max-items=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxItems</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-size=&quot;)" class="string">&quot;max-size=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxSize</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-age=&quot;)" class="string">&quot;max-age=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxAge</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-journal-size=&quot;)" class="string">&quot;max-journal-size=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSize</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-memory-size=&quot;)" class="string">&quot;max-memory-size=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxMemorySize</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-journal-overflow=&quot;)" class="string">&quot;max-journal-overflow=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxJournalOverflow</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;max-journal-size-absolute=&quot;)" class="string">&quot;max-journal-size-absolute=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSizeAbsolute</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;discard-old-when-full=&quot;)" class="string">&quot;discard-old-when-full=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">discardOldWhenFull</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;journal=&quot;)" class="string">&quot;journal=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;sync-journal=&quot;)" class="string">&quot;sync-journal=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">syncJournal</a><span class="delimiter">(</span><span class="delimiter">)</span>,
      <span title="String(&quot;move-expired-to&quot;)" class="string">&quot;move-expired-to&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]">expiredQueue</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: akka.actor.mailbox.filebased.filequeue.PersistentQueue =&gt; String)Option[String]">map</span> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.dumpConfig.$anonfun.x$3" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue">_</a>.<a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a> <span class="delimiter">}</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="String(&quot;(none)&quot;)" class="string">&quot;(none)&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Array[(String, String)]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.dumpStats">dumpStats</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Array[(String, String)]">Array</span><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Array[(String, String)])Array[(String, String)]">synchronized</a> <span class="delimiter">{</span>
    <span title="(xs: (String, String)*)(implicit evidence$2: scala.reflect.ClassTag[(String, String)])Array[(String, String)]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[(String, String)]" class="delimiter">(</span>
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;items&quot;)" class="string">&quot;items&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.length" title="=&gt; Long">length</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;bytes&quot;)" class="string">&quot;bytes&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.bytes" title="=&gt; Long">bytes</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;total-items&quot;)" class="string">&quot;total-items&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalItems" title="=&gt; Long">totalItems</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;logsize&quot;)" class="string">&quot;logsize&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journalSize" title="=&gt; Long">journalSize</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;expired-items&quot;)" class="string">&quot;expired-items&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalExpired" title="=&gt; Long">totalExpired</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;mem-items&quot;)" class="string">&quot;mem-items&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.memoryLength" title="=&gt; Long">memoryLength</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;mem-bytes&quot;)" class="string">&quot;mem-bytes&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.memoryBytes" title="=&gt; Long">memoryBytes</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;age&quot;)" class="string">&quot;age&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.currentAge" title="=&gt; Long">currentAge</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;discarded&quot;)" class="string">&quot;discarded&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.totalDiscarded" title="=&gt; Long">totalDiscarded</a>.<span title="()String">toString</span><span class="delimiter">)</span>,
      <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><span title="String(&quot;open-transactions&quot;)" class="string">&quot;open-transactions&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionCount" title="=&gt; Int">openTransactionCount</a>.<span title="()String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(startingTime: Long, expiry: Long)Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry">adjustExpiry</a><span class="delimiter">(</span><a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.startingTime">startingTime</a>: <span title="Long">Long</span>, <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.expiry">expiry</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxAge</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.maxExpiry">maxExpiry</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.startingTime" title="Long">startingTime</a> <span title="(x: Int)Long">+</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxAge</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.expiry" title="Long">expiry</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.expiry" title="implicit scala.LowPriorityImplicits.longWrapper : (x: Long)scala.runtime.RichLong">expiry</a> <span title="(that: Long)Long">min</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.maxExpiry" title="Long">maxExpiry</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.maxExpiry" title="Long">maxExpiry</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry.expiry" title="Long">expiry</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Add a value to the end of the queue, transactionally.
   */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte], expiry: Long)Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54)">add</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).value">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).expiry">expiry</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).value" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">value</a>.<span title="=&gt; Int">size</span> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxItemSize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxItems</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxSize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).while$1" title="()Unit" class="delimiter">{</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">discardOldWhenFull</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">_remove</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalDiscarded_=" title="(x$1: Long)Unit">_totalDiscarded</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.remove" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).now">now</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
    <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).item">item</a> = <a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem" title="(addTime: Long, expiry: Long, data: Array[Byte], xid: Int)akka.actor.mailbox.filebased.filequeue.QItem">QItem</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).now" title="Long">now</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry" title="(startingTime: Long, expiry: Long)Long">adjustExpiry</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).now" title="Long">now</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).expiry" title="Long">expiry</a><span class="delimiter">)</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).value" title="Array[Byte]">value</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.size" title="=&gt; Long">size</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSize</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Long">*</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Int">maxJournalOverflow</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span title="(x: Long)Boolean">&lt;</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// force re-creation of the journal.</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Rolling journal file for \'{}\' (qsize={})&quot;)" class="string">&quot;Rolling journal file for '{}' (qsize={})&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a><span class="delimiter">)</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.roll" title="(xid: Int, openItems: List[akka.actor.mailbox.filebased.filequeue.QItem], queue: Iterable[akka.actor.mailbox.filebased.filequeue.QItem])Unit">roll</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="=&gt; Int">xidCounter</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds" title="=&gt; List[Int]">openTransactionIds</a> <span title="(f: Int =&gt; akka.actor.mailbox.filebased.filequeue.QItem)(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],akka.actor.mailbox.filebased.filequeue.QItem,List[akka.actor.mailbox.filebased.filequeue.QItem]])List[akka.actor.mailbox.filebased.filequeue.QItem]">map</span> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="(key: Int)akka.actor.mailbox.filebased.filequeue.QItem">openTransactions</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).$anonfun.x$4" title="Int">_</a><span class="delimiter">)</span> <span class="delimiter">}</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxMemorySize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Dropping to read-behind for queue \'{}\' ({} bytes)&quot;)" class="string">&quot;Dropping to read-behind for queue '{}' ({} bytes)&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a><span class="delimiter">)</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.startReadBehind" title="()Unit">startReadBehind</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._add" title="(item: akka.actor.mailbox.filebased.filequeue.QItem)Unit">_add</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.add(92f6c4288e)" title="(item: akka.actor.mailbox.filebased.filequeue.QItem)Unit">add</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54).item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a><span class="delimiter">)</span>
    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(value: Array[Byte])Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(a9c891b9d7)">add</a><span class="delimiter">(</span><a title="Array[Byte]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(a9c891b9d7).value">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54)" title="(value: Array[Byte], expiry: Long)Boolean">add</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(a9c891b9d7).value" title="Array[Byte]">value</a>, <span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Peek at the head item in the queue, if there is one.
   */</span>
  <span class="keyword">def</span> <a title="()Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.peek">peek</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">Option</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Option[akka.actor.mailbox.filebased.filequeue.QItem])Option[akka.actor.mailbox.filebased.filequeue.QItem]">synchronized</a> <span class="delimiter">{</span>
      <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=" title="=&gt; Boolean">paused</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="None.type">None</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._peek" title="()Option[akka.actor.mailbox.filebased.filequeue.QItem]">_peek</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Remove and return an item from the queue, if there is one.
   *
   * @param transaction true if this should be considered the first part
   *     of a transaction, to be committed or rolled back (put back at the
   *     head of the queue)
   */</span>
  <span class="keyword">def</span> <a title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400)">remove</a><span class="delimiter">(</span><a title="Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).transaction">transaction</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">Option</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Option[akka.actor.mailbox.filebased.filequeue.QItem])Option[akka.actor.mailbox.filebased.filequeue.QItem]">synchronized</a> <span class="delimiter">{</span>
      <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=" title="=&gt; Boolean">paused</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="None.type">None</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).item">item</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">_remove</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).transaction" title="Boolean">transaction</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).transaction" title="Boolean">transaction</a><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.removeTentative(aa97cb1b3d)" title="()Unit">removeTentative</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.remove" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.size" title="=&gt; Long">size</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxJournalSize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Rolling journal file for \'{}\'&quot;)" class="string">&quot;Rolling journal file for '{}'&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a><span class="delimiter">)</span>
            <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.roll" title="(xid: Int, openItems: List[akka.actor.mailbox.filebased.filequeue.QItem], queue: Iterable[akka.actor.mailbox.filebased.filequeue.QItem])Unit">roll</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="=&gt; Int">xidCounter</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds" title="=&gt; List[Int]">openTransactionIds</a> <span title="(f: Int =&gt; akka.actor.mailbox.filebased.filequeue.QItem)(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],akka.actor.mailbox.filebased.filequeue.QItem,List[akka.actor.mailbox.filebased.filequeue.QItem]])List[akka.actor.mailbox.filebased.filequeue.QItem]">map</span> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="(key: Int)akka.actor.mailbox.filebased.filequeue.QItem">openTransactions</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).$anonfun.x$5" title="Int">_</a><span class="delimiter">)</span> <span class="delimiter">}</span>, <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400).item" title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">item</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Remove and return an item from the queue, if there is one.
   */</span>
  <span class="keyword">def</span> <a title="()Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(9f103a3f28)">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">Option</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400)" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">remove</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Return a transactionally-removed item to the queue. This is a rolled-
   * back transaction.
   */</span>
  <span class="keyword">def</span> <a title="(xid: Int)Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.unremove">unremove</a><span class="delimiter">(</span><a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.unremove.xid">xid</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Any)Any">synchronized</a> <span title="Unit" class="delimiter">{</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.unremove" title="(xid: Int)Unit">unremove</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.unremove.xid" title="Int">xid</a><span class="delimiter">)</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove" title="(xid: Int)Option[Unit]">_unremove</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.unremove.xid" title="Int">xid</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(xid: Int)Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.confirmRemove">confirmRemove</a><span class="delimiter">(</span><a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.confirmRemove.xid">xid</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Any)Any">synchronized</a> <span title="Unit" class="delimiter">{</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="=&gt; Boolean">closed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.confirmRemove" title="(xid: Int)Unit">confirmRemove</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.confirmRemove.xid" title="Int">xid</a><span class="delimiter">)</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a>.<span title="(key: Int)Option[akka.actor.mailbox.filebased.filequeue.QItem]">remove</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.confirmRemove.xid" title="Int">xid</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.flush">flush</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.remove(f4f1d31400)" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">remove</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.flush.while$2" title="Unit" class="delimiter">{</a><span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Close the queue's journal file. Not safe to call on an active queue.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.close">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.closed_=" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.close" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.pauseReads">pauseReads</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=" title="(x$1: Boolean)Unit">paused</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.resumeReads">resumeReads</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.paused_=" title="(x$1: Boolean)Unit">paused</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.setup">setup</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="(x$1: Long)Unit">queueSize</a> = <span title="Long(0L)" class="int">0</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal" title="()Unit">replayJournal</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.destroyJournal">destroyJournal</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.erase" title="()Unit">erase</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.nextXid">nextXid</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.nextXid.doWhile$1" title="Unit" class="keyword">do</a> <span class="delimiter">{</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="(x$1: Int)Unit">xidCounter</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span> <span class="keyword">while</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a> <span title="(key: Int)Boolean">contains</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="=&gt; Int">xidCounter</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="=&gt; Int">xidCounter</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind">fillReadBehind</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// if we're in read-behind mode, scan forward in the journal to keep memory as full as</span>
    <span class="comment">// possible. this amortizes the disk overhead across all reads.</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="=&gt; Long">_memoryBytes</a> <span title="(x: Long)Boolean">&lt;</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxMemorySize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind.while$3" title="()Unit" class="delimiter">{</a>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.fillReadBehind" title="(f: akka.actor.mailbox.filebased.filequeue.QItem =&gt; Unit)Unit">fillReadBehind</a> <span class="delimiter">{</span> <a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind.$anonfun.item">item</a> ⇒
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a> <span title="(elem: akka.actor.mailbox.filebased.filequeue.QItem)scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="(x$1: Long)Unit">_memoryBytes</a> <span title="(x: Int)Long">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Coming out of read-behind for queue \'{}\'&quot;)" class="string">&quot;Coming out of read-behind for queue '{}'&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal">replayJournal</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>

    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Replaying transaction journal for \'{}\'&quot;)" class="string">&quot;Replaying transaction journal for '{}'&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="(x$1: Int)Unit">xidCounter</a> = <span title="Int(0)" class="int">0</span>

    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.replay" title="(name: String)(f: akka.actor.mailbox.filebased.filequeue.JournalItem =&gt; Unit)Unit">replay</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> JournalItem.Add<span class="delimiter">(</span><a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal.$anonfun.item">item</a><span class="delimiter">)</span> ⇒
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._add" title="(item: akka.actor.mailbox.filebased.filequeue.QItem)Unit">_add</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a><span class="delimiter">)</span>
        <span class="comment">// when processing the journal, this has to happen after:</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a> <span title="(x: Long)Boolean">&gt;=</span> <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Long">maxMemorySize</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Dropping to read-behind for queue \'{}\' ({} bytes)&quot;)" class="string">&quot;Dropping to read-behind for queue '{}' ({} bytes)&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="=&gt; Long">queueSize</a><span class="delimiter">)</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.startReadBehind" title="()Unit">startReadBehind</a>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue.JournalItem" title="akka.actor.mailbox.filebased.filequeue.JournalItem.type">JournalItem</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue.JournalItem.Remove" title="akka.actor.mailbox.filebased.filequeue.JournalItem.Remove.type">Remove</a>             ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">_remove</a><span title="Unit" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue.JournalItem" title="akka.actor.mailbox.filebased.filequeue.JournalItem.type">JournalItem</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue.JournalItem.RemoveTentative" title="akka.actor.mailbox.filebased.filequeue.JournalItem.RemoveTentative.type">RemoveTentative</a>    ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove" title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]">_remove</a><span title="Unit" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> JournalItem.SavedXid<span class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>      ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.xidCounter_=" title="(x$1: Int)Unit">xidCounter</a> = <span title="Int">xid</span>
      <span class="keyword">case</span> JournalItem.Unremove<span class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>      ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove" title="(xid: Int)Option[Unit]">_unremove</a><span title="Unit" class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>
      <span class="keyword">case</span> JournalItem.ConfirmRemove<span class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span> ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a>.<span title="(key: Int)Option[akka.actor.mailbox.filebased.filequeue.QItem]">remove</span><span title="Unit" class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.actor.mailbox.filebased.filequeue.JournalItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal.$anonfun.x">x</a>                              ⇒ <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Unexpected item in journal: {}&quot;)" class="string">&quot;Unexpected item in journal: {}&quot;</span>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.replayJournal.$anonfun.x" title="akka.actor.mailbox.filebased.filequeue.JournalItem">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(6c666e4343)" title="(template: String, arg1: Any, arg2: Any, arg3: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Finished transaction journal for \'{}\' ({} items, {} bytes)&quot;)" class="string">&quot;Finished transaction journal for '{}' ({} items, {} bytes)&quot;</span>,
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.name" title="=&gt; String">name</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="=&gt; Long">queueLength</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.size" title="=&gt; Long">size</a><span class="delimiter">)</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.open(aa97cb1b3d)" title="()Unit">open</a>

    <span class="comment">// now, any unfinished transactions must be backed out.</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span title="Int">xid</span> ← <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactionIds" title="(f: Int =&gt; Option[Unit])Unit">openTransactionIds</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.unremove" title="(xid: Int)Unit">unremove</a><span class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove" title="(xid: Int)Option[Unit]">_unremove</a><span class="delimiter">(</span><span title="Int">xid</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()List[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.toList">toList</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="List[akka.actor.mailbox.filebased.filequeue.QItem]">List</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired" title="()Int">discardExpired</a>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; List[akka.actor.mailbox.filebased.filequeue.QItem]">toList</span>
  <span class="delimiter">}</span>

  <span class="comment">//  -----  internal implementations</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(item: akka.actor.mailbox.filebased.filequeue.QItem)Unit" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._add">_add</a><span class="delimiter">(</span><a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._add.item">item</a>: <a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem" title="akka.actor.mailbox.filebased.filequeue.QItem">QItem</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired" title="()Int">discardExpired</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.inReadBehind" title="()Boolean">inReadBehind</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a> <span title="(elem: akka.actor.mailbox.filebased.filequeue.QItem)scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._add.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="(x$1: Long)Unit">_memoryBytes</a> <span title="(x: Int)Long">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._add.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
    <span class="delimiter">}</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalItems_=" title="(x$1: Long)Unit">_totalItems</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="(x$1: Long)Unit">queueSize</a> <span title="(x: Int)Long">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._add.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="(x$1: Long)Unit">queueLength</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._peek">_peek</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">Option</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired" title="()Int">discardExpired</a>
    <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="None.type">None</span> <span class="keyword">else</span> <span title="(x: akka.actor.mailbox.filebased.filequeue.QItem)Some[akka.actor.mailbox.filebased.filequeue.QItem]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; akka.actor.mailbox.filebased.filequeue.QItem">front</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(transaction: Boolean)Option[akka.actor.mailbox.filebased.filequeue.QItem]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove">_remove</a><span class="delimiter">(</span><a title="Boolean" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.transaction">transaction</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Option[akka.actor.mailbox.filebased.filequeue.QItem]">Option</span><span class="delimiter">[</span>QItem<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired" title="()Int">discardExpired</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="None.type">None</span>

    <span class="keyword">val</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.now">now</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
    <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item">item</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="()akka.actor.mailbox.filebased.filequeue.QItem">dequeue</span>
    <span class="keyword">val</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.len">len</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="(x$1: Long)Unit">queueSize</a> <span title="(x: Int)Long">-=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.len" title="Int">len</a>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="(x$1: Long)Unit">_memoryBytes</a> <span title="(x: Int)Long">-=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.len" title="Int">len</a>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="(x$1: Long)Unit">queueLength</a> <span title="(x: Int)Long">-=</span> <span title="Int(1)" class="int">1</span>
    <span class="keyword">val</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.xid">xid</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.transaction" title="Boolean">transaction</a><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.nextXid" title="()Int">nextXid</a> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>

    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind" title="()Unit">fillReadBehind</a>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._currentAge_=" title="(x$1: Long)Unit">_currentAge</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.now" title="Long">now</a> <span title="(x: Long)Long">-</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.addTime" title="=&gt; Long">addTime</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.transaction" title="Boolean">transaction</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.xid_=" title="(x$1: Int)Unit">xid</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.xid" title="Int">xid</a>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="(key: Int, value: akka.actor.mailbox.filebased.filequeue.QItem)Unit">openTransactions</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.xid" title="Int">xid</a><span class="delimiter">)</span> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>
    <span class="delimiter">}</span>
    <span title="(x: akka.actor.mailbox.filebased.filequeue.QItem)Some[akka.actor.mailbox.filebased.filequeue.QItem]">Some</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._remove.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired">discardExpired</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(discarded: Int)Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard">internalDisard</a><span class="delimiter">(</span><a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.discarded">discarded</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.isReplaying" title="()Boolean">isReplaying</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.discarded" title="Int">discarded</a>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.realExpiry">realExpiry</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.adjustExpiry" title="(startingTime: Long, expiry: Long)Long">adjustExpiry</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; akka.actor.mailbox.filebased.filequeue.QItem">front</span>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.addTime" title="=&gt; Long">addTime</a>, <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="=&gt; akka.actor.mailbox.filebased.filequeue.QItem">front</span>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.expiry" title="=&gt; Long">expiry</a><span class="delimiter">)</span>
        <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.realExpiry" title="Long">realExpiry</a> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.realExpiry" title="Long">realExpiry</a> <span title="(x: Long)Boolean">&lt;</span> <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._totalExpired_=" title="(x$1: Long)Unit">_totalExpired</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
          <span class="keyword">val</span> <a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.item">item</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a>.<span title="()akka.actor.mailbox.filebased.filequeue.QItem">dequeue</span>
          <span class="keyword">val</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.len">len</a> = <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="(x$1: Long)Unit">queueSize</a> <span title="(x: Int)Long">-=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.len" title="Int">len</a>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="(x$1: Long)Unit">_memoryBytes</a> <span title="(x: Int)Long">-=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.len" title="Int">len</a>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="(x$1: Long)Unit">queueLength</a> <span title="(x: Int)Long">-=</span> <span title="Int(1)" class="int">1</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.fillReadBehind" title="()Unit">fillReadBehind</a>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Boolean">keepJournal</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.journal_=" title="=&gt; akka.actor.mailbox.filebased.filequeue.Journal">journal</a>.<a href="Journal.scala.html#akka.actor.mailbox.filebased.filequeue;Journal.remove" title="()Unit">remove</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;OverlaySetting.apply" title="()Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]">expiredQueue</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: akka.actor.mailbox.filebased.filequeue.PersistentQueue =&gt; Boolean)Option[Boolean]">map</span> <span class="delimiter">{</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.$anonfun.x$6" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue">_</a>.<a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.add(1c714acb54)" title="(value: Array[Byte], expiry: Long)Boolean">add</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>, <span title="Long(0L)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">}</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard" title="(discarded: Int)Int">internalDisard</a><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.discarded" title="Int">discarded</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard.discarded" title="Int">discarded</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.discardExpired.internalDisard" title="(discarded: Int)Int">internalDisard</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(xid: Int)Option[Unit]" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove">_unremove</a><span class="delimiter">(</span><a title="Int" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.xid">xid</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.openTransactions" title="=&gt; scala.collection.mutable.HashMap[Int,akka.actor.mailbox.filebased.filequeue.QItem]">openTransactions</a>.<span title="(key: Int)Option[akka.actor.mailbox.filebased.filequeue.QItem]">remove</span><span class="delimiter">(</span><a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.xid" title="Int">xid</a><span class="delimiter">)</span> <span title="(f: akka.actor.mailbox.filebased.filequeue.QItem =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="akka.actor.mailbox.filebased.filequeue.QItem" id="akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.$anonfun.item">item</a> ⇒
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueLength_=" title="(x$1: Long)Unit">queueLength</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queueSize_=" title="(x$1: Long)Unit">queueSize</a> <span title="(x: Int)Long">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue.queue_=" title="=&gt; scala.collection.mutable.Queue[akka.actor.mailbox.filebased.filequeue.QItem] with akka.actor.mailbox.filebased.filequeue.Prependable[akka.actor.mailbox.filebased.filequeue.QItem]">queue</a> <a href="#akka.actor.mailbox.filebased.filequeue;Prependable.prepend" title="(t: akka.actor.mailbox.filebased.filequeue.QItem)Unit">prepend</a> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>
      <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._memoryBytes_=" title="(x$1: Long)Unit">_memoryBytes</a> <span title="(x: Int)Long">+=</span> <a href="#akka.actor.mailbox.filebased.filequeue;PersistentQueue._unremove.$anonfun.item" title="akka.actor.mailbox.filebased.filequeue.QItem">item</a>.<a href="QItem.scala.html#akka.actor.mailbox.filebased.filequeue;QItem.data" title="=&gt; Array[Byte]">data</a>.<span title="=&gt; Int">length</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

@deprecated<span class="delimiter">(</span><span class="string">&quot;durable mailboxes are superseded by akka-persistence&quot;</span>, <span class="string">&quot;2.3&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue">PersistentQueue</a> <a href="#akka.actor.mailbox.filebased.filequeue.PersistentQueue" title="akka.actor.mailbox.filebased.filequeue.PersistentQueue.type" class="delimiter">{</a>
  @volatile
  <span class="keyword">var</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxItems_=">maxItems</a>: <span title="Int">Int</span> = Int.<span title="Int(2147483647)">MaxValue</span>
  @volatile
  <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxSize_=">maxSize</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>
  @volatile
  <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxItemSize_=">maxItemSize</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>
  @volatile
  <span class="keyword">var</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxAge_=">maxAge</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
  @volatile
  <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalSize_=">maxJournalSize</a>: <span title="Long">Long</span> = <span class="int">16</span> * <span class="int">1024</span> <span title="Long(16777216L)">*</span> <span class="int">1024</span>
  @volatile
  <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxMemorySize_=">maxMemorySize</a>: <span title="Long">Long</span> = <span class="int">128</span> * <span class="int">1024</span> <span title="Long(134217728L)">*</span> <span class="int">1024</span>
  @volatile
  <span class="keyword">var</span> <a title="Int" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalOverflow_=">maxJournalOverflow</a>: <span title="Int">Int</span> = <span title="Int(10)" class="int">10</span>
  @volatile
  <span class="keyword">var</span> <a title="Long" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.maxJournalSizeAbsolute_=">maxJournalSizeAbsolute</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>
  @volatile
  <span class="keyword">var</span> <a title="Boolean" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.discardOldWhenFull_=">discardOldWhenFull</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
  @volatile
  <span class="keyword">var</span> <a title="Boolean" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.keepJournal_=">keepJournal</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
  @volatile
  <span class="keyword">var</span> <a title="Boolean" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.syncJournal_=">syncJournal</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
  @volatile
  <span class="keyword">var</span> <a title="Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]" id="akka.actor.mailbox.filebased.filequeue.PersistentQueue.expiredQueue_=">expiredQueue</a>: <span title="Option[akka.actor.mailbox.filebased.filequeue.PersistentQueue]">Option</span><span class="delimiter">[</span>PersistentQueue<span class="delimiter">]</span> = <span title="None.type">None</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
