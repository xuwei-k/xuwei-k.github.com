<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cluster/akka/cluster/ClusterDaemon.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.cluster

<span class="keyword">import</span> <span title="language.type">language</span>.existentials
<span class="keyword">import</span> <span title="language.type">language</span>.postfixOps
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> scala.concurrent.forkjoin.ThreadLocalRandom
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.actor.<a href="../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>.Stop
<span class="keyword">import</span> akka.cluster.<a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>._
<span class="keyword">import</span> akka.cluster.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
<span class="keyword">import</span> akka.dispatch.<span class="delimiter">{</span> UnboundedMessageQueueSemantics, RequiresMessageQueue <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.breakOut
<span class="keyword">import</span> akka.remote.QuarantinedEvent

<span class="comment">/**
 * Base trait for all cluster messages. All ClusterMessage's are serializable.
 */</span>
<span class="keyword">trait</span> <a title="trait ClusterMessage extends AnyRef with Serializable" id="akka.cluster;ClusterMessage">ClusterMessage</a> <span class="keyword">extends</span> <span title="Serializable">Serializable</span>

<span class="comment">/**
 * INTERNAL API
 * Cluster commands sent by the USER via
 * [[akka.cluster.Cluster]] extension
 * or JMX.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.cluster.ClusterUserAction.type" id="akka.cluster.ClusterUserAction">ClusterUserAction</a> <a href="#akka.cluster.ClusterUserAction" title="akka.cluster.ClusterUserAction.type" class="delimiter">{</a>

  <span class="comment">/**
   * Command to initiate join another node (represented by `address`).
   * Join will be sent to the other node.
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class JoinTo extends AnyRef with Product with Serializable" id="akka.cluster.ClusterUserAction.JoinTo.readResolve">JoinTo</a><a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.ClusterUserAction;JoinTo.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Command to leave the cluster.
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Leave extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.ClusterUserAction.Leave.readResolve">Leave</a><a href="#akka.cluster.ClusterUserAction.Leave.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.ClusterUserAction;Leave.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * Command to mark node as temporary down.
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Down extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.ClusterUserAction.Down.readResolve">Down</a><a href="#akka.cluster.ClusterUserAction.Down.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.ClusterUserAction;Down.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.cluster.InternalClusterAction.type" id="akka.cluster.InternalClusterAction">InternalClusterAction</a> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type" class="delimiter">{</a>

  <span class="comment">/**
   * Command to join the cluster. Sent when a node wants to join another node (the receiver).
   * @param node the node that wants to join the cluster
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Join extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.Join.readResolve">Join</a><a href="#akka.cluster.InternalClusterAction.Join.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.UniqueAddress" id="akka.cluster.InternalClusterAction;Join.node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="Set[String]" id="akka.cluster.InternalClusterAction;Join.roles">roles</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * Reply to Join
   * @param from the sender node in the cluster, i.e. the node that received the Join command
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Welcome extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.Welcome.readResolve">Welcome</a><a href="#akka.cluster.InternalClusterAction.Welcome.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.UniqueAddress" id="akka.cluster.InternalClusterAction;Welcome.from">from</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="akka.cluster.Gossip" id="akka.cluster.InternalClusterAction;Welcome.gossip">gossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * Command to initiate the process to join the specified
   * seed nodes.
   */</span>
  <span class="keyword">case class</span> <a title="class JoinSeedNodes extends AnyRef with Product with Serializable" id="akka.cluster.InternalClusterAction.JoinSeedNodes.readResolve">JoinSeedNodes</a><a href="#akka.cluster.InternalClusterAction.JoinSeedNodes.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster.InternalClusterAction;JoinSeedNodes.seedNodes">seedNodes</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Start message of the process to join one of the seed nodes.
   * The node sends `InitJoin` to all seed nodes, which replies
   * with `InitJoinAck`. The first reply is used others are discarded.
   * The node sends `Join` command to the seed node that replied first.
   * If a node is uninitialized it will reply to `InitJoin` with
   * `InitJoinNack`.
   */</span>
  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.productElement.x$1" title="akka.cluster.InternalClusterAction.JoinSeedNode.type" id="akka.cluster.InternalClusterAction.JoinSeedNode.readResolve">JoinSeedNode</a>

  <span class="comment">/**
   * @see JoinSeedNode
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.InitJoin.productElement.x$1" title="akka.cluster.InternalClusterAction.InitJoin.type" id="akka.cluster.InternalClusterAction.InitJoin.readResolve">InitJoin</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * @see JoinSeedNode
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class InitJoinAck extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.InitJoinAck.readResolve">InitJoinAck</a><a href="#akka.cluster.InternalClusterAction.InitJoinAck.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.InternalClusterAction;InitJoinAck.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * @see JoinSeedNode
   */</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class InitJoinNack extends AnyRef with akka.cluster.ClusterMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.InitJoinNack.readResolve">InitJoinNack</a><a href="#akka.cluster.InternalClusterAction.InitJoinNack.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.InternalClusterAction;InitJoinNack.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster;ClusterMessage" title="akka.cluster.ClusterMessage">ClusterMessage</a>

  <span class="comment">/**
   * Marker interface for periodic tick messages
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Tick extends AnyRef" id="akka.cluster.InternalClusterAction;Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.GossipTick.productElement.x$1" title="akka.cluster.InternalClusterAction.GossipTick.type" id="akka.cluster.InternalClusterAction.GossipTick.readResolve">GossipTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.GossipSpeedupTick.productElement.x$1" title="akka.cluster.InternalClusterAction.GossipSpeedupTick.type" id="akka.cluster.InternalClusterAction.GossipSpeedupTick.readResolve">GossipSpeedupTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.ReapUnreachableTick.productElement.x$1" title="akka.cluster.InternalClusterAction.ReapUnreachableTick.type" id="akka.cluster.InternalClusterAction.ReapUnreachableTick.readResolve">ReapUnreachableTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.MetricsTick.productElement.x$1" title="akka.cluster.InternalClusterAction.MetricsTick.type" id="akka.cluster.InternalClusterAction.MetricsTick.readResolve">MetricsTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.LeaderActionsTick.productElement.x$1" title="akka.cluster.InternalClusterAction.LeaderActionsTick.type" id="akka.cluster.InternalClusterAction.LeaderActionsTick.readResolve">LeaderActionsTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.PublishStatsTick.productElement.x$1" title="akka.cluster.InternalClusterAction.PublishStatsTick.type" id="akka.cluster.InternalClusterAction.PublishStatsTick.readResolve">PublishStatsTick</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>

  <span class="keyword">case class</span> <a title="class SendGossipTo extends AnyRef with Product with Serializable" id="akka.cluster.InternalClusterAction.SendGossipTo.readResolve">SendGossipTo</a><a href="#akka.cluster.InternalClusterAction.SendGossipTo.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.Address" id="akka.cluster.InternalClusterAction;SendGossipTo.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>

  <span class="keyword">case object</span> <a href="#akka.cluster.InternalClusterAction.GetClusterCoreRef.productElement.x$1" title="akka.cluster.InternalClusterAction.GetClusterCoreRef.type" id="akka.cluster.InternalClusterAction.GetClusterCoreRef.readResolve">GetClusterCoreRef</a>

  <span class="keyword">case class</span> <a title="class PublisherCreated extends AnyRef with Product with Serializable" id="akka.cluster.InternalClusterAction.PublisherCreated.readResolve">PublisherCreated</a><a href="#akka.cluster.InternalClusterAction.PublisherCreated.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.cluster.InternalClusterAction;PublisherCreated.publisher">publisher</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Comand to [[akka.cluster.ClusterDaemon]] to create a
   * [[akka.cluster.OnMemberUpListener]].
   */</span>
  <span class="keyword">case class</span> <a title="class AddOnMemberUpListener extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.cluster.InternalClusterAction.AddOnMemberUpListener.readResolve">AddOnMemberUpListener</a><a href="#akka.cluster.InternalClusterAction.AddOnMemberUpListener.readResolve" title="Product" class="delimiter">(</a><a title="Runnable" id="akka.cluster.InternalClusterAction;AddOnMemberUpListener.callback">callback</a>: <span title="Runnable">Runnable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>

  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait SubscriptionMessage extends AnyRef" id="akka.cluster.InternalClusterAction;SubscriptionMessage">SubscriptionMessage</a>
  <span class="keyword">case class</span> <a title="class Subscribe extends AnyRef with akka.cluster.InternalClusterAction.SubscriptionMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.Subscribe.readResolve">Subscribe</a><a href="#akka.cluster.InternalClusterAction.Subscribe.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.cluster.InternalClusterAction;Subscribe.subscriber">subscriber</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode" id="akka.cluster.InternalClusterAction;Subscribe.initialStateMode">initialStateMode</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;SubscriptionInitialStateMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">SubscriptionInitialStateMode</a>, <a title="Set[Class[_]]" id="akka.cluster.InternalClusterAction;Subscribe.to">to</a>: <span title="Set[Class[_]]">Set</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a>
  <span class="keyword">case class</span> <a title="class Unsubscribe extends AnyRef with akka.cluster.InternalClusterAction.SubscriptionMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.Unsubscribe.readResolve">Unsubscribe</a><a href="#akka.cluster.InternalClusterAction.Unsubscribe.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.cluster.InternalClusterAction;Unsubscribe.subscriber">subscriber</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Option[Class[_]]" id="akka.cluster.InternalClusterAction;Unsubscribe.to">to</a>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a>
  <span class="comment">/**
   * @param receiver if `receiver` is defined the event will only be sent to that
   *   actor, otherwise it will be sent to all subscribers via the `eventStream`.
   */</span>
  <span class="keyword">case class</span> <a title="class PublishCurrentClusterState extends AnyRef with akka.cluster.InternalClusterAction.SubscriptionMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.PublishCurrentClusterState.readResolve">PublishCurrentClusterState</a><a href="#akka.cluster.InternalClusterAction.PublishCurrentClusterState.readResolve" title="Product" class="delimiter">(</a><a title="Option[akka.actor.ActorRef]" id="akka.cluster.InternalClusterAction;PublishCurrentClusterState.receiver">receiver</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a>

  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait PublishMessage extends AnyRef" id="akka.cluster.InternalClusterAction;PublishMessage">PublishMessage</a>
  <span class="keyword">case class</span> <a title="class PublishChanges extends AnyRef with akka.cluster.InternalClusterAction.PublishMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.PublishChanges.readResolve">PublishChanges</a><a href="#akka.cluster.InternalClusterAction.PublishChanges.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Gossip" id="akka.cluster.InternalClusterAction;PublishChanges.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;PublishMessage" title="akka.cluster.InternalClusterAction.PublishMessage">PublishMessage</a>
  <span class="keyword">case class</span> <a title="class PublishEvent extends AnyRef with akka.cluster.InternalClusterAction.PublishMessage with Product with Serializable" id="akka.cluster.InternalClusterAction.PublishEvent.readResolve">PublishEvent</a><a href="#akka.cluster.InternalClusterAction.PublishEvent.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.ClusterEvent.ClusterDomainEvent" id="akka.cluster.InternalClusterAction;PublishEvent.event">event</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.InternalClusterAction;PublishMessage" title="akka.cluster.InternalClusterAction.PublishMessage">PublishMessage</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 *
 * Supervisor managing the different Cluster daemons.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class ClusterDaemon extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.cluster;ClusterDaemon">ClusterDaemon</a><a href="#akka.cluster;ClusterDaemon" title="akka.cluster.ClusterDaemon" class="delimiter">(</a><a title="akka.cluster.ClusterSettings" id="akka.cluster;ClusterDaemon.settings">settings</a>: <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings" title="akka.cluster.ClusterSettings">ClusterSettings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a>
  <span class="keyword">with</span> <a href="../../../actor/akka/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._
  <span class="comment">// Important - don't use Cluster(context.system) here because that would</span>
  <span class="comment">// cause deadlock. The Cluster extension is currently being created and is waiting</span>
  <span class="comment">// for response from GetClusterCoreRef in its constructor.</span>
  <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.cluster;ClusterDaemon.coreSupervisor">coreSupervisor</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.cluster.ClusterCoreSupervisor])akka.actor.Props" class="delimiter">[</span><a href="#akka.cluster;ClusterCoreSupervisor" title="akka.cluster.ClusterCoreSupervisor">ClusterCoreSupervisor</a><span class="delimiter">]</span>.
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;core&quot;)" class="string">&quot;core&quot;</span><span class="delimiter">)</span>
  <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.cluster.ClusterHeartbeatReceiver])akka.actor.Props" class="delimiter">[</span><a href="ClusterHeartbeat.scala.html#akka.cluster;ClusterHeartbeatReceiver" title="akka.cluster.ClusterHeartbeatReceiver">ClusterHeartbeatReceiver</a><span class="delimiter">]</span>.
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;heartbeatReceiver&quot;)" class="string">&quot;heartbeatReceiver&quot;</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;ClusterDaemon.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.cluster.InternalClusterAction.GetClusterCoreRef.type" id="akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.msg">msg</a> @ <a href="#akka.cluster.InternalClusterAction.GetClusterCoreRef.readResolve" title="akka.cluster.InternalClusterAction.GetClusterCoreRef.type">GetClusterCoreRef</a> ⇒ <a href="#akka.cluster;ClusterDaemon.coreSupervisor" title="=&gt; akka.actor.ActorRef">coreSupervisor</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.msg" title="akka.cluster.InternalClusterAction.GetClusterCoreRef.type">msg</a>
    <span class="keyword">case</span> AddOnMemberUpListener<span class="delimiter">(</span><a title="Runnable" id="akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.code">code</a><span class="delimiter">)</span> ⇒
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span title="Unit" class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.cluster.OnMemberUpListener](classOf[akka.cluster.OnMemberUpListener])" class="delimiter">[</span>OnMemberUpListener<span class="delimiter">]</span>, <a href="#akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.code" title="Runnable">code</a><span class="delimiter">)</span>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> PublisherCreated<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.publisher">publisher</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDaemon.settings" title="akka.cluster.ClusterSettings">settings</a>.<a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.MetricsEnabled" title="=&gt; Boolean">MetricsEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// metrics must be started after core/publisher to be able</span>
        <span class="comment">// to inject the publisher ref to the ClusterMetricsCollector</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span title="Unit" class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.cluster.ClusterMetricsCollector](classOf[akka.cluster.ClusterMetricsCollector])" class="delimiter">[</span>ClusterMetricsCollector<span class="delimiter">]</span>, <a href="#akka.cluster;ClusterDaemon.receive;$anonfun.isDefinedAt.publisher" title="akka.actor.ActorRef">publisher</a><span class="delimiter">)</span>.
          <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;metrics&quot;)" class="string">&quot;metrics&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 *
 * ClusterCoreDaemon and ClusterDomainEventPublisher can't be restarted because the state
 * would be obsolete. Shutdown the member if any those actors crashed.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class ClusterCoreSupervisor extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.cluster;ClusterCoreSupervisor">ClusterCoreSupervisor</a> <a href="#akka.cluster;ClusterCoreSupervisor" title="akka.cluster.ClusterCoreSupervisor" class="keyword">extends</a> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a>
  <span class="keyword">with</span> <a href="../../../actor/akka/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._

  <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreSupervisor.publisher">publisher</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.cluster.ClusterDomainEventPublisher])akka.actor.Props" class="delimiter">[</span><a href="ClusterEvent.scala.html#akka.cluster;ClusterDomainEventPublisher" title="akka.cluster.ClusterDomainEventPublisher">ClusterDomainEventPublisher</a><span class="delimiter">]</span>.
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;publisher&quot;)" class="string">&quot;publisher&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreSupervisor.coreDaemon">coreDaemon</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.cluster.ClusterCoreDaemon](classOf[akka.cluster.ClusterCoreDaemon])" class="delimiter">[</span>ClusterCoreDaemon<span class="delimiter">]</span>, <a href="#akka.cluster;ClusterCoreSupervisor.publisher" title="=&gt; akka.actor.ActorRef">publisher</a><span class="delimiter">)</span>.
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;daemon&quot;)" class="string">&quot;daemon&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.PublisherCreated.readResolve" title="(publisher: akka.actor.ActorRef)akka.cluster.InternalClusterAction.PublisherCreated">PublisherCreated</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreSupervisor.publisher" title="=&gt; akka.actor.ActorRef">publisher</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="akka.actor.OneForOneStrategy" id="akka.cluster;ClusterCoreSupervisor.supervisorStrategy">supervisorStrategy</a> =
    <a href="../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;OneForOneStrategy" title="(maxNrOfRetries: Int, withinTimeRange: scala.concurrent.duration.Duration, loggingEnabled: Boolean)(decider: akka.actor.SupervisorStrategy.Decider)akka.actor.OneForOneStrategy">OneForOneStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive] with Serializable" id="akka.cluster;ClusterCoreSupervisor.supervisorStrategy;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="keyword">case</span> <a href="#akka.cluster;ClusterCoreSupervisor.supervisorStrategy;$anonfun.applyOrElse.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.cluster;ClusterCoreSupervisor.supervisorStrategy;$anonfun.isDefinedAt.e">e</a><span class="delimiter">)</span> ⇒
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.error(41f64575e3)" title="(cause: Throwable, template: String, arg1: Any, arg2: Any)Unit">error</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreSupervisor.supervisorStrategy;$anonfun.isDefinedAt.e" title="Throwable">e</a>, <span title="String(&quot;Cluster node [{}] crashed, [{}] - shutting down...&quot;)" class="string">&quot;Cluster node [{}] crashed, [{}] - shutting down...&quot;</span>, <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreSupervisor.supervisorStrategy;$anonfun.isDefinedAt.e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
        <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor.PoisonPill" title="akka.actor.PoisonPill.type">PoisonPill</a>
        <a href="../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Stop" title="akka.actor.SupervisorStrategy.Stop.type">Stop</a>
    <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreSupervisor.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Cluster.scala.html#akka.cluster;Cluster.shutdown" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;ClusterCoreSupervisor.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterCoreSupervisor.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>.<a href="#akka.cluster.InternalClusterAction.GetClusterCoreRef.readResolve" title="akka.cluster.InternalClusterAction.GetClusterCoreRef.type">GetClusterCoreRef</a> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster;ClusterCoreSupervisor.coreDaemon" title="=&gt; akka.actor.ActorRef">coreDaemon</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ClusterCoreDaemon extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.cluster;ClusterCoreDaemon">ClusterCoreDaemon</a><a href="#akka.cluster;ClusterCoreDaemon" title="akka.cluster.ClusterCoreDaemon" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreDaemon.publisher">publisher</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a>
  <span class="keyword">with</span> <a href="../../../actor/akka/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._

  <span class="keyword">val</span> <a title="akka.cluster.Cluster" id="akka.cluster;ClusterCoreDaemon.cluster">cluster</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<span class="delimiter">{</span> selfAddress, scheduler, failureDetector <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.settings" title="=&gt; akka.cluster.ClusterSettings">settings</a>.<span class="delimiter">{</span> AutoDown ⇒ _, _ <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger" title="ClusterCoreDaemon.this.cluster.InfoLogger.type">InfoLogger</a>._

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.selfUniqueAddress">selfUniqueAddress</a> = <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>

  <span class="keyword">val</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.NumberOfGossipsBeforeShutdownWhenLeaderExits">NumberOfGossipsBeforeShutdownWhenLeaderExits</a> = <span title="Int(3)" class="int">3</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress)String" id="akka.cluster;ClusterCoreDaemon.vclockName">vclockName</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.vclockName.node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#akka.cluster;ClusterCoreDaemon.vclockName.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">address</a> <span title="(other: String)String">+</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster;ClusterCoreDaemon.vclockName.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.uid" title="=&gt; Int">uid</a>
  <span class="keyword">val</span> <a title="akka.cluster.VectorClock.Node" id="akka.cluster;ClusterCoreDaemon.vclockNode">vclockNode</a> = <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.Node.apply" title="(name: String)akka.cluster.VectorClock.Node">Node</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.vclockName" title="(node: akka.cluster.UniqueAddress)String">vclockName</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">// note that self is not initially member,</span>
  <span class="comment">// and the Gossip is not versioned for this 'Node' yet</span>
  <span class="keyword">var</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.latestGossip_=">latestGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a> = <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a>

  <span class="keyword">val</span> <a title="Boolean" id="akka.cluster;ClusterCoreDaemon.statsEnabled">statsEnabled</a> = <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PublishStatsInterval" title="=&gt; scala.concurrent.duration.Duration">PublishStatsInterval</a>.<span title="()Boolean">isFinite</span>
  <span class="keyword">var</span> <a title="akka.cluster.GossipStats" id="akka.cluster;ClusterCoreDaemon.gossipStats_=">gossipStats</a> = <a href="#akka.cluster.GossipStats.readResolve" title="(receivedGossipCount: Long, mergeCount: Long, sameCount: Long, newerCount: Long, olderCount: Long)akka.cluster.GossipStats">GossipStats</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="Option[akka.actor.ActorRef]" id="akka.cluster;ClusterCoreDaemon.seedNodeProcess_=">seedNodeProcess</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">var</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.seedNodeProcessCounter_=">seedNodeProcessCounter</a> = <span title="Int(0)" class="int">0</span> <span class="comment">// for unique names </span>

  <span class="comment">/**
   * Looks up and returns the remote cluster command connection for the specific address.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(address: akka.actor.Address)akka.actor.ActorSelection" id="akka.cluster;ClusterCoreDaemon.clusterCore">clusterCore</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.clusterCore.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ActorSelection" title="akka.actor.ActorSelection">ActorSelection</a> =
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(e44b8bc960)" title="(path: akka.actor.ActorPath)akka.actor.ActorSelection">actorSelection</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;RootActorPath" title="(address: akka.actor.Address, name: String)akka.actor.RootActorPath">RootActorPath</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.clusterCore.address" title="akka.actor.Address">address</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;RootActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <span title="String(&quot;system&quot;)" class="string">&quot;system&quot;</span> <a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <span title="String(&quot;cluster&quot;)" class="string">&quot;cluster&quot;</span> <a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <span title="String(&quot;core&quot;)" class="string">&quot;core&quot;</span> <a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <span title="String(&quot;daemon&quot;)" class="string">&quot;daemon&quot;</span><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher

  <span class="comment">// start periodic gossip to random nodes in cluster</span>
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.cluster;ClusterCoreDaemon.gossipTask">gossipTask</a> = <a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PeriodicTasksInitialDelay" title="=&gt; scala.concurrent.duration.FiniteDuration">PeriodicTasksInitialDelay</a>.<span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">max</span><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">GossipInterval</a><span class="delimiter">)</span>,
    <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">GossipInterval</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.GossipTick.readResolve" title="akka.cluster.InternalClusterAction.GossipTick.type">GossipTick</a><span class="delimiter">)</span>

  <span class="comment">// start periodic cluster failure detector reaping (moving nodes condemned by the failure detector to unreachable list)</span>
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.cluster;ClusterCoreDaemon.failureDetectorReaperTask">failureDetectorReaperTask</a> = <a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PeriodicTasksInitialDelay" title="=&gt; scala.concurrent.duration.FiniteDuration">PeriodicTasksInitialDelay</a>.<span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">max</span><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UnreachableNodesReaperInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">UnreachableNodesReaperInterval</a><span class="delimiter">)</span>,
    <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UnreachableNodesReaperInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">UnreachableNodesReaperInterval</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.ReapUnreachableTick.readResolve" title="akka.cluster.InternalClusterAction.ReapUnreachableTick.type">ReapUnreachableTick</a><span class="delimiter">)</span>

  <span class="comment">// start periodic leader action management (only applies for the current leader)</span>
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.cluster;ClusterCoreDaemon.leaderActionsTask">leaderActionsTask</a> = <a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PeriodicTasksInitialDelay" title="=&gt; scala.concurrent.duration.FiniteDuration">PeriodicTasksInitialDelay</a>.<span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">max</span><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.LeaderActionsInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">LeaderActionsInterval</a><span class="delimiter">)</span>,
    <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.LeaderActionsInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">LeaderActionsInterval</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.LeaderActionsTick.readResolve" title="akka.cluster.InternalClusterAction.LeaderActionsTick.type">LeaderActionsTick</a><span class="delimiter">)</span>

  <span class="comment">// start periodic publish of current stats</span>
  <span class="keyword">val</span> <a title="Option[akka.actor.Cancellable]" id="akka.cluster;ClusterCoreDaemon.publishStatsTask">publishStatsTask</a>: <span title="Option[akka.actor.Cancellable]">Option</span><span class="delimiter">[</span>Cancellable<span class="delimiter">]</span> = <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PublishStatsInterval" title="=&gt; scala.concurrent.duration.Duration">PublishStatsInterval</a> <span title="Option[akka.actor.Cancellable]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span> | _: Duration.<span title="scala.concurrent.duration.Duration.Infinite">Infinite</span> ⇒ <span title="None.type">None</span>
    <span class="keyword">case</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.cluster;ClusterCoreDaemon.publishStatsTask.d">d</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> ⇒
      <span title="(x: akka.actor.Cancellable)Some[akka.actor.Cancellable]">Some</span><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PeriodicTasksInitialDelay" title="=&gt; scala.concurrent.duration.FiniteDuration">PeriodicTasksInitialDelay</a>.<span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">max</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.publishStatsTask.d" title="scala.concurrent.duration.FiniteDuration">d</a><span class="delimiter">)</span>, <a href="#akka.cluster;ClusterCoreDaemon.publishStatsTask.d" title="scala.concurrent.duration.FiniteDuration">d</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.PublishStatsTick.readResolve" title="akka.cluster.InternalClusterAction.PublishStatsTick.type">PublishStatsTick</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream.subscribe" title="(subscriber: akka.actor.ActorRef, channel: Class[_])Boolean">subscribe</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.remote.QuarantinedEvent](classOf[akka.remote.QuarantinedEvent])" class="delimiter">[</span>QuarantinedEvent<span class="delimiter">]</span><span class="delimiter">)</span>

    <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.AutoDownUnreachableAfter" title="=&gt; scala.concurrent.duration.Duration">AutoDownUnreachableAfter</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.cluster;ClusterCoreDaemon.preStart.d">d</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> ⇒
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="AutoDown.scala.html#akka.cluster.AutoDown" title="akka.cluster.AutoDown.type">AutoDown</a>.<a href="AutoDown.scala.html#akka.cluster.AutoDown.props" title="(autoDownUnreachableAfter: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.preStart.d" title="scala.concurrent.duration.FiniteDuration">d</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a> <span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.props" title="=&gt; akka.actor.Props">props</a>.<a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.dispatcher" title="=&gt; String">dispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;autoDown&quot;)" class="string">&quot;autoDown&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒ <span class="comment">// auto-down is disabled</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodes" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.Address]">SeedNodes</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(cc2e600322)" title="(message: String)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;No seed-nodes configured, manual cluster join required&quot;)" class="string">&quot;No seed-nodes configured, manual cluster join required&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.JoinSeedNodes.readResolve" title="(seedNodes: scala.collection.immutable.IndexedSeq[akka.actor.Address])akka.cluster.InternalClusterAction.JoinSeedNodes">JoinSeedNodes</a><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodes" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.Address]">SeedNodes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterCoreDaemon.gossipTask" title="=&gt; akka.actor.Cancellable">gossipTask</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterCoreDaemon.failureDetectorReaperTask" title="=&gt; akka.actor.Cancellable">failureDetectorReaperTask</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsTask" title="=&gt; akka.actor.Cancellable">leaderActionsTask</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterCoreDaemon.publishStatsTask" title="=&gt; Option[akka.actor.Cancellable]">publishStatsTask</a> <span title="(f: akka.actor.Cancellable =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.cluster;ClusterCoreDaemon.postStop.$anonfun.x$1" title="akka.actor.Cancellable">_</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.cluster;ClusterCoreDaemon.uninitialized">uninitialized</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.InitJoin.readResolve" title="akka.cluster.InternalClusterAction.InitJoin.type">InitJoin</a>                          ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.InitJoinNack.readResolve" title="(address: akka.actor.Address)akka.cluster.InternalClusterAction.InitJoinNack">InitJoinNack</a><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    <span class="keyword">case</span> ClusterUserAction.JoinTo<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.address">address</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.join" title="(address: akka.actor.Address)Unit">join</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
    <span class="keyword">case</span> JoinSeedNodes<span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.seedNodes">seedNodes</a><span class="delimiter">)</span>          ⇒ <a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes" title="(seedNodes: scala.collection.immutable.IndexedSeq[akka.actor.Address])Unit">joinSeedNodes</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.cluster.InternalClusterAction.SubscriptionMessage" id="akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.msg">msg</a>: <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a>          ⇒ <a href="#akka.cluster;ClusterCoreDaemon.publisher" title="akka.actor.ActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.cluster;ClusterCoreDaemon.uninitialized;$anonfun.isDefinedAt.msg" title="akka.cluster.InternalClusterAction.SubscriptionMessage">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(joinWith: akka.actor.Address, deadline: Option[scala.concurrent.duration.Deadline])akka.actor.Actor.Receive" id="akka.cluster;ClusterCoreDaemon.tryingToJoin">tryingToJoin</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.tryingToJoin.joinWith">joinWith</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="Option[scala.concurrent.duration.Deadline]" id="akka.cluster;ClusterCoreDaemon.tryingToJoin.deadline">deadline</a>: <span title="Option[scala.concurrent.duration.Deadline]">Option</span><span class="delimiter">[</span>Deadline<span class="delimiter">]</span><span class="delimiter">)</span>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Welcome<span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.from">from</a>, <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.gossip">gossip</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.welcome" title="(joinWith: akka.actor.Address, from: akka.cluster.UniqueAddress, gossip: akka.cluster.Gossip)Unit">welcome</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin.joinWith" title="akka.actor.Address">joinWith</a>, <a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.from" title="akka.cluster.UniqueAddress">from</a>, <a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.gossip" title="akka.cluster.Gossip">gossip</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.InitJoin.readResolve" title="akka.cluster.InternalClusterAction.InitJoin.type">InitJoin</a>              ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.InitJoinNack.readResolve" title="(address: akka.actor.Address)akka.cluster.InternalClusterAction.InitJoinNack">InitJoinNack</a><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    <span class="keyword">case</span> ClusterUserAction.JoinTo<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.address">address</a><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster;ClusterCoreDaemon.becomeUninitialized" title="()Unit">becomeUninitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.join" title="(address: akka.actor.Address)Unit">join</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
    <span class="keyword">case</span> JoinSeedNodes<span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.seedNodes">seedNodes</a><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster;ClusterCoreDaemon.becomeUninitialized" title="()Unit">becomeUninitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes" title="(seedNodes: scala.collection.immutable.IndexedSeq[akka.actor.Address])Unit">joinSeedNodes</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.cluster.InternalClusterAction.SubscriptionMessage" id="akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.msg">msg</a>: <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.publisher" title="akka.actor.ActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.isDefinedAt.msg" title="akka.cluster.InternalClusterAction.SubscriptionMessage">msg</a>
    <span class="keyword">case</span> _: <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin.deadline" title="Option[scala.concurrent.duration.Deadline]">deadline</a>.<span title="(p: scala.concurrent.duration.Deadline =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin;$anonfun.applyOrElse.$anonfun.x$2" title="scala.concurrent.duration.Deadline">_</a>.<span title="()Boolean">isOverdue</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.cluster;ClusterCoreDaemon.becomeUninitialized" title="()Unit">becomeUninitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodes" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.Address]">SeedNodes</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes" title="(seedNodes: scala.collection.immutable.IndexedSeq[akka.actor.Address])Unit">joinSeedNodes</a><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodes" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.Address]">SeedNodes</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#akka.cluster;ClusterCoreDaemon.join" title="(address: akka.actor.Address)Unit">join</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin.joinWith" title="akka.actor.Address">joinWith</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.becomeUninitialized">becomeUninitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// make sure that join process is stopped</span>
    <a href="#akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess" title="()Unit">stopSeedNodeProcess</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.uninitialized" title="=&gt; akka.actor.Actor.Receive">uninitialized</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.becomeInitialized">becomeInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// start heartbeatSender here, and not in constructor to make sure that</span>
    <span class="comment">// heartbeating doesn't start before Welcome is received</span>
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.cluster.ClusterHeartbeatSender])akka.actor.Props" class="delimiter">[</span><a href="ClusterHeartbeat.scala.html#akka.cluster;ClusterHeartbeatSender" title="akka.cluster.ClusterHeartbeatSender">ClusterHeartbeatSender</a><span class="delimiter">]</span>.
      <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UseDispatcher" title="=&gt; String">UseDispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;heartbeatSender&quot;)" class="string">&quot;heartbeatSender&quot;</span><span class="delimiter">)</span>
    <span class="comment">// make sure that join process is stopped</span>
    <a href="#akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess" title="()Unit">stopSeedNodeProcess</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.initialized" title="=&gt; akka.actor.Actor.Receive">initialized</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.cluster;ClusterCoreDaemon.initialized">initialized</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="akka.cluster.GossipEnvelope">msg</span>: <a href="Gossip.scala.html#akka.cluster;GossipEnvelope" title="akka.cluster.GossipEnvelope">GossipEnvelope</a>              ⇒ <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip" title="(envelope: akka.cluster.GossipEnvelope)ClusterCoreDaemon.this.ReceiveGossipType">receiveGossip</a><span title="Unit" class="delimiter">(</span><span title="akka.cluster.GossipEnvelope">msg</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.cluster.GossipStatus">msg</span>: <a href="Gossip.scala.html#akka.cluster;GossipStatus" title="akka.cluster.GossipStatus">GossipStatus</a>                ⇒ <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus" title="(status: akka.cluster.GossipStatus)Unit">receiveGossipStatus</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.cluster.GossipStatus">msg</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.GossipTick.readResolve" title="akka.cluster.InternalClusterAction.GossipTick.type">GossipTick</a>                       ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipTick" title="()Unit">gossipTick</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.GossipSpeedupTick.readResolve" title="akka.cluster.InternalClusterAction.GossipSpeedupTick.type">GossipSpeedupTick</a>                ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipSpeedupTick" title="()Unit">gossipSpeedupTick</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.ReapUnreachableTick.readResolve" title="akka.cluster.InternalClusterAction.ReapUnreachableTick.type">ReapUnreachableTick</a>              ⇒ <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers" title="()Unit">reapUnreachableMembers</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.LeaderActionsTick.readResolve" title="akka.cluster.InternalClusterAction.LeaderActionsTick.type">LeaderActionsTick</a>                ⇒ <a href="#akka.cluster;ClusterCoreDaemon.leaderActions" title="()Unit">leaderActions</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.PublishStatsTick.readResolve" title="akka.cluster.InternalClusterAction.PublishStatsTick.type">PublishStatsTick</a>                 ⇒ <a href="#akka.cluster;ClusterCoreDaemon.publishInternalStats" title="()Unit">publishInternalStats</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.InitJoin.readResolve" title="akka.cluster.InternalClusterAction.InitJoin.type">InitJoin</a>                         ⇒ <a href="#akka.cluster;ClusterCoreDaemon.initJoin" title="()Unit">initJoin</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Join<span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.node">node</a>, <a title="Set[String]" id="akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.roles">roles</a><span class="delimiter">)</span>                ⇒ <a href="#akka.cluster;ClusterCoreDaemon.joining" title="(node: akka.cluster.UniqueAddress, roles: Set[String])Unit">joining</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.roles" title="Set[String]">roles</a><span class="delimiter">)</span>
    <span class="keyword">case</span> ClusterUserAction.Down<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>  ⇒ <a href="#akka.cluster;ClusterCoreDaemon.downing" title="(address: akka.actor.Address)Unit">downing</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>
    <span class="keyword">case</span> ClusterUserAction.Leave<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.leaving" title="(address: akka.actor.Address)Unit">leaving</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SendGossipTo<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>            ⇒ <a href="#akka.cluster;ClusterCoreDaemon.sendGossipTo" title="(address: akka.actor.Address)Unit">sendGossipTo</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.cluster.InternalClusterAction.SubscriptionMessage">msg</span>: <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a>         ⇒ <a href="#akka.cluster;ClusterCoreDaemon.publisher" title="akka.actor.ActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.cluster.InternalClusterAction.SubscriptionMessage">msg</span>
    <span class="keyword">case</span> QuarantinedEvent<span class="delimiter">(</span><span title="akka.actor.Address">address</span>, <a title="Int" id="akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.uid">uid</a><span class="delimiter">)</span>   ⇒ <a href="#akka.cluster;ClusterCoreDaemon.quarantined" title="(node: akka.cluster.UniqueAddress)Unit">quarantined</a><span title="Boolean(true)" class="delimiter">(</span><a href="Member.scala.html#akka.cluster;UniqueAddress" title="(address: akka.actor.Address, uid: Int)akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">(</span><span title="akka.actor.Address">address</span>, <a href="#akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.uid" title="Int">uid</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> ClusterUserAction.JoinTo<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span> ⇒
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span title="Boolean(true)" class="delimiter">(</span><span title="String(&quot;Trying to join [{}] when already part of a cluster, ignoring&quot;)" class="string">&quot;Trying to join [{}] when already part of a cluster, ignoring&quot;</span>, <span title="akka.actor.Address">address</span><span class="delimiter">)</span>
    <span class="keyword">case</span> JoinSeedNodes<span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.seedNodes">seedNodes</a><span class="delimiter">)</span> ⇒
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span title="Boolean(true)" class="delimiter">(</span><span title="String(&quot;Trying to join seed nodes [{}] when already part of a cluster, ignoring&quot;)" class="string">&quot;Trying to join seed nodes [{}] when already part of a cluster, ignoring&quot;</span>,
        <a href="#akka.cluster;ClusterCoreDaemon.initialized;$anonfun.isDefinedAt.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.cluster;ClusterCoreDaemon.removed">removed</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterCoreDaemon.removed;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.cluster.InternalClusterAction.SubscriptionMessage" id="akka.cluster;ClusterCoreDaemon.removed;$anonfun.isDefinedAt.msg">msg</a>: <a href="#akka.cluster.InternalClusterAction;SubscriptionMessage" title="akka.cluster.InternalClusterAction.SubscriptionMessage">SubscriptionMessage</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.publisher" title="akka.actor.ActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.cluster;ClusterCoreDaemon.removed;$anonfun.isDefinedAt.msg" title="akka.cluster.InternalClusterAction.SubscriptionMessage">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.cluster;ClusterCoreDaemon.receive">receive</a> = <a href="#akka.cluster;ClusterCoreDaemon.uninitialized" title="=&gt; akka.actor.Actor.Receive">uninitialized</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(message: Any)Unit" id="akka.cluster;ClusterCoreDaemon.unhandled">unhandled</a><span class="delimiter">(</span><a title="Any" id="akka.cluster;ClusterCoreDaemon.unhandled.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterCoreDaemon.unhandled.message" title="Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> _: <a href="#akka.cluster.InternalClusterAction;Tick" title="akka.cluster.InternalClusterAction.Tick">Tick</a>           ⇒
    <span class="keyword">case</span> _: <a href="Gossip.scala.html#akka.cluster;GossipEnvelope" title="akka.cluster.GossipEnvelope">GossipEnvelope</a> ⇒
    <span class="keyword">case</span> _: <a href="Gossip.scala.html#akka.cluster;GossipStatus" title="akka.cluster.GossipStatus">GossipStatus</a>   ⇒
    <span class="keyword">case</span> <a title="Any" id="akka.cluster;ClusterCoreDaemon.unhandled.other">other</a>             ⇒ <a href="#akka.cluster;ClusterCoreDaemon" title="akka.cluster.ClusterCoreDaemon" class="keyword">super</a>.<a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.unhandled" title="(message: Any)Unit">unhandled</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.unhandled.other" title="Any">other</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.initJoin">initJoin</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.InitJoinAck.readResolve" title="(address: akka.actor.Address)akka.cluster.InternalClusterAction.InitJoinAck">InitJoinAck</a><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(seedNodes: scala.collection.immutable.IndexedSeq[akka.actor.Address])Unit" id="akka.cluster;ClusterCoreDaemon.joinSeedNodes">joinSeedNodes</a><span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes">seedNodes</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess" title="()Unit">stopSeedNodeProcess</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcess_=" title="(x$1: Option[akka.actor.ActorRef])Unit">seedNodeProcess</a> =
        <span title="Option[akka.actor.ActorRef]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a> <span title="(x$1: AnyRef)Boolean">==</span> immutable.<span title="(elems: akka.actor.Address*)scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.ClusterUserAction" title="akka.cluster.ClusterUserAction.type">ClusterUserAction</a>.<a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="(address: akka.actor.Address)akka.cluster.ClusterUserAction.JoinTo">JoinTo</a><span class="delimiter">(</span><a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
          <span title="None.type">None</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="comment">// use unique name of this actor, stopSeedNodeProcess doesn't wait for termination</span>
          <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcessCounter_=" title="(x$1: Int)Unit">seedNodeProcessCounter</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
          <span title="Some[akka.actor.ActorRef]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; akka.actor.Address">head</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.cluster.FirstSeedNodeProcess](classOf[akka.cluster.FirstSeedNodeProcess])" class="delimiter">[</span>FirstSeedNodeProcess<span class="delimiter">]</span>, <a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a><span class="delimiter">)</span>.
              <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UseDispatcher" title="=&gt; String">UseDispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;firstSeedNodeProcess-&quot;)" class="string">&quot;firstSeedNodeProcess-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcessCounter_=" title="=&gt; Int">seedNodeProcessCounter</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.cluster.JoinSeedNodeProcess](classOf[akka.cluster.JoinSeedNodeProcess])" class="delimiter">[</span>JoinSeedNodeProcess<span class="delimiter">]</span>, <a href="#akka.cluster;ClusterCoreDaemon.joinSeedNodes.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a><span class="delimiter">)</span>.
              <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDispatcher" title="(d: String)akka.actor.Props">withDispatcher</a><span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.UseDispatcher" title="=&gt; String">UseDispatcher</a><span class="delimiter">)</span>, name = <span title="String(&quot;joinSeedNodeProcess-&quot;)" class="string">&quot;joinSeedNodeProcess-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcessCounter_=" title="=&gt; Int">seedNodeProcessCounter</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Try to join this cluster node with the node specified by `address`.
   * It's only allowed to join from an empty state, i.e. when not already a member.
   * A `Join(selfUniqueAddress)` command is sent to the node to join,
   * which will reply with a `Welcome` message.
   */</span>
  <span class="keyword">def</span> <a title="(address: akka.actor.Address)Unit" id="akka.cluster;ClusterCoreDaemon.join">join</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.join.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Trying to join member with wrong protocol, but was ignored, expected [{}] but was [{}]&quot;)" class="string">&quot;Trying to join member with wrong protocol, but was ignored, expected [{}] but was [{}]&quot;</span>,
        <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a>, <a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Trying to join member with wrong ActorSystem name, but was ignored, expected [{}] but was [{}]&quot;)" class="string">&quot;Trying to join member with wrong ActorSystem name, but was ignored, expected [{}] but was [{}]&quot;</span>,
        <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a>, <a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; Boolean">isEmpty</span>, <span title="String(&quot;Join can only be done from empty state&quot;)" class="string">&quot;Join can only be done from empty state&quot;</span><span class="delimiter">)</span>

      <span class="comment">// to support manual join when joining to seed nodes is stuck (no seed nodes available)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess" title="()Unit">stopSeedNodeProcess</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.cluster;ClusterCoreDaemon.becomeInitialized" title="()Unit">becomeInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.joining" title="(node: akka.cluster.UniqueAddress, roles: Set[String])Unit">joining</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Option[scala.concurrent.duration.Deadline]" id="akka.cluster;ClusterCoreDaemon.join.joinDeadline">joinDeadline</a> = <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.RetryUnsuccessfulJoinAfter" title="=&gt; scala.concurrent.duration.Duration">RetryUnsuccessfulJoinAfter</a> <span title="Option[scala.concurrent.duration.Deadline]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.cluster;ClusterCoreDaemon.join.joinDeadline.d">d</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> ⇒ <span title="(x: scala.concurrent.duration.Deadline)Some[scala.concurrent.duration.Deadline]">Some</span><span class="delimiter">(</span><span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.cluster;ClusterCoreDaemon.join.joinDeadline.d" title="scala.concurrent.duration.FiniteDuration">d</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _                 ⇒ <span title="None.type">None</span>
        <span class="delimiter">}</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.tryingToJoin" title="(joinWith: akka.actor.Address, deadline: Option[scala.concurrent.duration.Deadline])akka.actor.Actor.Receive">tryingToJoin</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a>, <a href="#akka.cluster;ClusterCoreDaemon.join.joinDeadline" title="Option[scala.concurrent.duration.Deadline]">joinDeadline</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.clusterCore" title="(address: akka.actor.Address)akka.actor.ActorSelection">clusterCore</a><a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="#akka.cluster;ClusterCoreDaemon.join.address" title="akka.actor.Address">address</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.Join.readResolve" title="(node: akka.cluster.UniqueAddress, roles: Set[String])akka.cluster.InternalClusterAction.Join">Join</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess">stopSeedNodeProcess</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcess_=" title="=&gt; Option[akka.actor.ActorRef]">seedNodeProcess</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess.s">s</a><span class="delimiter">)</span> ⇒
        <span class="comment">// manual join, abort current seedNodeProcess</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="#akka.cluster;ClusterCoreDaemon.stopSeedNodeProcess.s" title="akka.actor.ActorRef">s</a>
        <a href="#akka.cluster;ClusterCoreDaemon.seedNodeProcess_=" title="(x$1: Option[akka.actor.ActorRef])Unit">seedNodeProcess</a> = <span title="None.type">None</span>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒ <span class="comment">// no seedNodeProcess in progress</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * State transition to JOINING - new node joining.
   * Received `Join` message and replies with `Welcome` message, containing
   * current gossip state, including the new joining member.
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress, roles: Set[String])Unit" id="akka.cluster;ClusterCoreDaemon.joining">joining</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.joining.node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="Set[String]" id="akka.cluster;ClusterCoreDaemon.joining.roles">roles</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Member with wrong protocol tried to join, but was ignored, expected [{}] but was [{}]&quot;)" class="string">&quot;Member with wrong protocol tried to join, but was ignored, expected [{}] but was [{}]&quot;</span>,
        <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a>, <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Member with wrong ActorSystem name tried to join, but was ignored, expected [{}] but was [{}]&quot;)" class="string">&quot;Member with wrong ActorSystem name tried to join, but was ignored, expected [{}] but was [{}]&quot;</span>,
        <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a>, <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address.system" title="=&gt; String">system</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.joining.localMembers">localMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>

      <span class="comment">// check by address without uid to make sure that node with same host:port is not allowed</span>
      <span class="comment">// to join until previous node with that host:port has been removed from the cluster</span>
      <span class="keyword">val</span> <a title="Boolean" id="akka.cluster;ClusterCoreDaemon.joining.alreadyMember">alreadyMember</a> = <a href="#akka.cluster;ClusterCoreDaemon.joining.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.alreadyMember.$anonfun.x$3" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="akka.cluster;ClusterCoreDaemon.joining.isUnreachable">isUnreachable</a> = <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(d151f48ba5)" title="(node: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.alreadyMember" title="Boolean">alreadyMember</a><span class="delimiter">)</span>
        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Existing member [{}] is trying to join, ignoring&quot;)" class="string">&quot;Existing member [{}] is trying to join, ignoring&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.isUnreachable" title="Boolean">isUnreachable</a><span class="delimiter">)</span>
        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Unreachable member [{}] is trying to join, ignoring&quot;)" class="string">&quot;Unreachable member [{}] is trying to join, ignoring&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>

        <span class="comment">// remove the node from the failure detector</span>
        <a href="Cluster.scala.html#akka.cluster;Cluster.failureDetector" title="=&gt; akka.remote.FailureDetectorRegistry[akka.actor.Address]">failureDetector</a>.<a href="../../../remote/akka/remote/FailureDetectorRegistry.scala.html#akka.remote;FailureDetectorRegistry.remove" title="(resource: akka.actor.Address)Unit">remove</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>

        <span class="comment">// add joining node as Joining</span>
        <span class="comment">// add self in case someone else joins before self has joined (Set discards duplicates)</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.joining.newMembers">newMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.joining.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.SortedSet[akka.cluster.Member]">+</span> <a href="Member.scala.html#akka.cluster.Member.apply" title="(uniqueAddress: akka.cluster.UniqueAddress, roles: Set[String])akka.cluster.Member">Member</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster;ClusterCoreDaemon.joining.roles" title="Set[String]">roles</a><span class="delimiter">)</span> <span title="(elem: akka.cluster.Member)scala.collection.immutable.SortedSet[akka.cluster.Member]">+</span> <a href="Member.scala.html#akka.cluster.Member.apply" title="(uniqueAddress: akka.cluster.UniqueAddress, roles: Set[String])akka.cluster.Member">Member</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.joining.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.joining.newGossip.qual$1">latestGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy$default$2" title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.joining.newGossip.x$20">copy</a> <span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterCoreDaemon.joining.newMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.joining.newGossip.x$18">newMembers</a><span class="delimiter">)</span>

        <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>

        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Node [{}] is JOINING, roles [{}]&quot;)" class="string">&quot;Node [{}] is JOINING, roles [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>, <a href="#akka.cluster;ClusterCoreDaemon.joining.roles" title="Set[String]">roles</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.joining.node" title="akka.cluster.UniqueAddress">node</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.Welcome.readResolve" title="(from: akka.cluster.UniqueAddress, gossip: akka.cluster.Gossip)akka.cluster.InternalClusterAction.Welcome">Welcome</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Reply from Join request.
   */</span>
  <span class="keyword">def</span> <a title="(joinWith: akka.actor.Address, from: akka.cluster.UniqueAddress, gossip: akka.cluster.Gossip)Unit" id="akka.cluster;ClusterCoreDaemon.welcome">welcome</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.welcome.joinWith">joinWith</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.welcome.from">from</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.welcome.gossip">gossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; Boolean">isEmpty</span>, <span title="String(&quot;Join can only be done from empty state&quot;)" class="string">&quot;Join can only be done from empty state&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.welcome.joinWith" title="akka.actor.Address">joinWith</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.welcome.from" title="akka.cluster.UniqueAddress">from</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring welcome from [{}] when trying to join with [{}]&quot;)" class="string">&quot;Ignoring welcome from [{}] when trying to join with [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.welcome.from" title="akka.cluster.UniqueAddress">from</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>, <a href="#akka.cluster;ClusterCoreDaemon.welcome.joinWith" title="akka.actor.Address">joinWith</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Welcome from [{}]&quot;)" class="string">&quot;Welcome from [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.welcome.from" title="akka.cluster.UniqueAddress">from</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="(x$1: akka.cluster.Gossip)Unit">latestGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.welcome.gossip" title="akka.cluster.Gossip">gossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.seen" title="(node: akka.cluster.UniqueAddress)akka.cluster.Gossip">seen</a> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>
      <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.welcome.from" title="akka.cluster.UniqueAddress">from</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701)" title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit">gossipTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.welcome.from" title="akka.cluster.UniqueAddress">from</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.becomeInitialized" title="()Unit">becomeInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * State transition to LEAVING.
   * The node will eventually be removed by the leader, after hand-off in EXITING, and only after
   * removal a new node with same address can join the cluster through the normal joining procedure.
   */</span>
  <span class="keyword">def</span> <a title="(address: akka.actor.Address)Unit" id="akka.cluster;ClusterCoreDaemon.leaving">leaving</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.leaving.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// only try to update if the node is available (in the member ring)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.leaving.$anonfun.m">m</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.leaving.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.leaving.address" title="akka.actor.Address">address</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;ClusterCoreDaemon.leaving.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Up" title="akka.cluster.MemberStatus.Up.type">Up</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaving.newMembers">newMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <a href="Member.scala.html#akka.cluster.Member.ordering" title="(f: akka.cluster.Member =&gt; akka.cluster.Member)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.Member,scala.collection.immutable.SortedSet[akka.cluster.Member]])scala.collection.immutable.SortedSet[akka.cluster.Member]">map</a> <span class="delimiter">{</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.leaving.newMembers.$anonfun.m">m</a> ⇒ <span title="akka.cluster.Member" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaving.newMembers.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.leaving.address" title="akka.actor.Address">address</a><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.leaving.newMembers.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.copy" title="(status: akka.cluster.MemberStatus)akka.cluster.Member">copy</a><span class="delimiter">(</span>status = <a href="Member.scala.html#akka.cluster.MemberStatus.Leaving" title="akka.cluster.MemberStatus.Leaving.type">Leaving</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#akka.cluster;ClusterCoreDaemon.leaving.newMembers.$anonfun.m" title="akka.cluster.Member">m</a> <span class="delimiter">}</span> <span class="comment">// mark node as LEAVING</span>
      <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.leaving.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.leaving.newGossip.qual$2">latestGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy$default$2" title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.leaving.newGossip.x$23">copy</a> <span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterCoreDaemon.leaving.newMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaving.newGossip.x$21">newMembers</a><span class="delimiter">)</span>

      <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaving.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>

      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Marked address [{}] as [{}]&quot;)" class="string">&quot;Marked address [{}] as [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.leaving.address" title="akka.actor.Address">address</a>, <a href="Member.scala.html#akka.cluster.MemberStatus.Leaving" title="akka.cluster.MemberStatus.Leaving.type">Leaving</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This method is called when a member sees itself as Exiting or Down.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.shutdown">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterCoreDaemon.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.shutdown" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * State transition to DOWN.
   * Its status is set to DOWN. The node is also removed from the `seen` table.
   *
   * The node will eventually be removed by the leader, and only after removal a new node with same address can
   * join the cluster through the normal joining procedure.
   */</span>
  <span class="keyword">def</span> <a title="(address: akka.actor.Address)Unit" id="akka.cluster;ClusterCoreDaemon.downing">downing</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.downing.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.downing.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>
    <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.downing.localMembers">localMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>
    <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.downing.localOverview">localOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>
    <span class="keyword">val</span> <a title="Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.downing.localSeen">localSeen</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.seen" title="=&gt; Set[akka.cluster.UniqueAddress]">seen</a>
    <span class="keyword">val</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.downing.localReachability">localReachability</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>

    <span class="comment">// check if the node to DOWN is in the `members` set</span>
    <a href="#akka.cluster;ClusterCoreDaemon.downing.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.cluster.Member])Option[akka.cluster.Member]">collectFirst</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.cluster.Member] with Serializable" id="akka.cluster;ClusterCoreDaemon.downing;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.downing;$anonfun.isDefinedAt.m">m</a> <span class="keyword">if</span> <a href="#akka.cluster;ClusterCoreDaemon.downing;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.downing.address" title="akka.actor.Address">address</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.downing;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.copy" title="(status: akka.cluster.MemberStatus)akka.cluster.Member">copy</a><span title="Boolean(true)" class="delimiter">(</span>status = <a href="Member.scala.html#akka.cluster.MemberStatus.Down" title="akka.cluster.MemberStatus.Down.type">Down</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.downing.m">m</a><span class="delimiter">)</span> ⇒
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.downing.localReachability" title="akka.cluster.Reachability">localReachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(d151f48ba5)" title="(node: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Marking node [{}] as [{}]&quot;)" class="string">&quot;Marking node [{}] as [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>, <a href="Member.scala.html#akka.cluster.MemberStatus.Down" title="akka.cluster.MemberStatus.Down.type">Down</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Marking unreachable node [{}] as [{}]&quot;)" class="string">&quot;Marking unreachable node [{}] as [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>, <a href="Member.scala.html#akka.cluster.MemberStatus.Down" title="akka.cluster.MemberStatus.Down.type">Down</a><span class="delimiter">)</span>

        <span class="comment">// replace member (changed status)</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.downing.newMembers">newMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.SortedSet[akka.cluster.Member]">-</span> <a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a> <span title="(elem: akka.cluster.Member)scala.collection.immutable.SortedSet[akka.cluster.Member]">+</span> <a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a>
        <span class="comment">// remove nodes marked as DOWN from the `seen` table</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.downing.newSeen">newSeen</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localSeen" title="Set[akka.cluster.UniqueAddress]">localSeen</a> <span title="(elem: akka.cluster.UniqueAddress)scala.collection.immutable.Set[akka.cluster.UniqueAddress]">-</span> <a href="#akka.cluster;ClusterCoreDaemon.downing.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a>

        <span class="comment">// update gossip overview</span>
        <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.downing.newOverview">newOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localOverview" title="akka.cluster.GossipOverview">localOverview</a> <a href="Gossip.scala.html#akka.cluster;GossipOverview.copy" title="(seen: Set[akka.cluster.UniqueAddress], reachability: akka.cluster.Reachability)akka.cluster.GossipOverview">copy</a> <span class="delimiter">(</span>seen = <a href="#akka.cluster;ClusterCoreDaemon.downing.newSeen" title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]">newSeen</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.downing.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.downing.localGossip" title="akka.cluster.Gossip">localGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy" title="(members: scala.collection.immutable.SortedSet[akka.cluster.Member], overview: akka.cluster.GossipOverview, version: akka.cluster.VectorClock)akka.cluster.Gossip">copy</a> <span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterCoreDaemon.downing.newMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newMembers</a>, overview = <a href="#akka.cluster;ClusterCoreDaemon.downing.newOverview" title="akka.cluster.GossipOverview">newOverview</a><span class="delimiter">)</span> <span class="comment">// update gossip</span>
        <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.downing.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>

        <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒
        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring down of unknown node [{}] as [{}]&quot;)" class="string">&quot;Ignoring down of unknown node [{}] as [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.downing.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress)Unit" id="akka.cluster;ClusterCoreDaemon.quarantined">quarantined</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.quarantined.node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.quarantined.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.quarantined.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.hasMember" title="(node: akka.cluster.UniqueAddress)Boolean">hasMember</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.quarantined.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.quarantined.newReachability">newReachability</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.terminated" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)akka.cluster.Reachability">terminated</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.quarantined.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.quarantined.newOverview">newOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.quarantined.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a> <a href="Gossip.scala.html#akka.cluster;GossipOverview.copy$default$1" title="Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.quarantined.newOverview.x$25">copy</a> <span class="delimiter">(</span>reachability = <a href="#akka.cluster;ClusterCoreDaemon.quarantined.newReachability" title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.quarantined.newOverview.x$24">newReachability</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.quarantined.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.quarantined.localGossip" title="akka.cluster.Gossip">localGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.quarantined.newGossip.x$28">copy</a> <span class="delimiter">(</span>overview = <a href="#akka.cluster;ClusterCoreDaemon.quarantined.newOverview" title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.quarantined.newGossip.x$26">newOverview</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.quarantined.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Marking node as TERMINATED [{}], due to quarantine&quot;)" class="string">&quot;Cluster Node [{}] - Marking node as TERMINATED [{}], due to quarantine&quot;</span>,
        <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.quarantined.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.downing" title="(address: akka.actor.Address)Unit">downing</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.quarantined.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(status: akka.cluster.GossipStatus)Unit" id="akka.cluster;ClusterCoreDaemon.receiveGossipStatus">receiveGossipStatus</a><span class="delimiter">(</span><a title="akka.cluster.GossipStatus" id="akka.cluster;ClusterCoreDaemon.receiveGossipStatus.status">status</a>: <a href="Gossip.scala.html#akka.cluster;GossipStatus" title="akka.cluster.GossipStatus">GossipStatus</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from">from</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.status" title="akka.cluster.GossipStatus">status</a>.<a href="Gossip.scala.html#akka.cluster;GossipStatus.from" title="=&gt; akka.cluster.UniqueAddress">from</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(3212ac6c9f)" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring received gossip status from unreachable [{}] &quot;)" class="string">&quot;Ignoring received gossip status from unreachable [{}] &quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.$anonfun.x$4" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Ignoring received gossip status from unknown [{}]&quot;)" class="string">&quot;Cluster Node [{}] - Ignoring received gossip status from unknown [{}]&quot;</span>, <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.status" title="akka.cluster.GossipStatus">status</a>.<a href="Gossip.scala.html#akka.cluster;GossipStatus.version" title="=&gt; akka.cluster.VectorClock">version</a> <a href="VectorClock.scala.html#akka.cluster;VectorClock.compareTo" title="(that: akka.cluster.VectorClock)akka.cluster.VectorClock.Ordering">compareTo</a> <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.Same" title="akka.cluster.VectorClock.Same.type">Same</a>  ⇒ <span class="comment">// same version</span>
        <span class="keyword">case</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.After" title="akka.cluster.VectorClock.After.type">After</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipStatusTo(45898cf701)" title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit">gossipStatusTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// remote is newer</span>
        <span class="keyword">case</span> _                 ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701)" title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit">gossipTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossipStatus.from" title="akka.cluster.UniqueAddress">from</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// conflicting or local is newer</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The types of gossip actions that receive gossip has performed.
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait ReceiveGossipType extends AnyRef" id="akka.cluster;ClusterCoreDaemon;ReceiveGossipType">ReceiveGossipType</a>
  <span class="keyword">case object</span> <a href="#akka.cluster;ClusterCoreDaemon.Ignored.productElement.x$1" title="ClusterCoreDaemon.this.Ignored.type" id="akka.cluster;ClusterCoreDaemon.Ignored.readResolve">Ignored</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a>
  <span class="keyword">case object</span> <a href="#akka.cluster;ClusterCoreDaemon.Older.productElement.x$1" title="ClusterCoreDaemon.this.Older.type" id="akka.cluster;ClusterCoreDaemon.Older.readResolve">Older</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a>
  <span class="keyword">case object</span> <a href="#akka.cluster;ClusterCoreDaemon.Newer.productElement.x$1" title="ClusterCoreDaemon.this.Newer.type" id="akka.cluster;ClusterCoreDaemon.Newer.readResolve">Newer</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a>
  <span class="keyword">case object</span> <a href="#akka.cluster;ClusterCoreDaemon.Same.productElement.x$1" title="ClusterCoreDaemon.this.Same.type" id="akka.cluster;ClusterCoreDaemon.Same.readResolve">Same</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a>
  <span class="keyword">case object</span> <a href="#akka.cluster;ClusterCoreDaemon.Merge.productElement.x$1" title="ClusterCoreDaemon.this.Merge.type" id="akka.cluster;ClusterCoreDaemon.Merge.readResolve">Merge</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a>

  <span class="comment">/**
   * Receive new gossip.
   */</span>
  <span class="keyword">def</span> <a title="(envelope: akka.cluster.GossipEnvelope)ClusterCoreDaemon.this.ReceiveGossipType" id="akka.cluster;ClusterCoreDaemon.receiveGossip">receiveGossip</a><span class="delimiter">(</span><a title="akka.cluster.GossipEnvelope" id="akka.cluster;ClusterCoreDaemon.receiveGossip.envelope">envelope</a>: <a href="Gossip.scala.html#akka.cluster;GossipEnvelope" title="akka.cluster.GossipEnvelope">GossipEnvelope</a><span class="delimiter">)</span>: <a href="#akka.cluster;ClusterCoreDaemon;ReceiveGossipType" title="ClusterCoreDaemon.this.ReceiveGossipType">ReceiveGossipType</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.receiveGossip.from">from</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.envelope" title="akka.cluster.GossipEnvelope">envelope</a>.<a href="Gossip.scala.html#akka.cluster;GossipEnvelope.from" title="=&gt; akka.cluster.UniqueAddress">from</a>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip">remoteGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.envelope" title="akka.cluster.GossipEnvelope">envelope</a>.<a href="Gossip.scala.html#akka.cluster;GossipEnvelope.gossip" title="=&gt; akka.cluster.Gossip">gossip</a>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>

    <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Ignoring received gossip from [{}] to protect against overload&quot;)" class="string">&quot;Cluster Node [{}] - Ignoring received gossip from [{}] to protect against overload&quot;</span>, <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.envelope" title="akka.cluster.GossipEnvelope">envelope</a>.<a href="Gossip.scala.html#akka.cluster;GossipEnvelope.to" title="=&gt; akka.cluster.UniqueAddress">to</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring received gossip intended for someone else, from [{}] to [{}]&quot;)" class="string">&quot;Ignoring received gossip intended for someone else, from [{}] to [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.envelope" title="akka.cluster.GossipEnvelope">envelope</a>.<a href="Gossip.scala.html#akka.cluster;GossipEnvelope.to" title="=&gt; akka.cluster.UniqueAddress">to</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(d151f48ba5)" title="(node: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring received gossip with myself as unreachable, from [{}]&quot;)" class="string">&quot;Ignoring received gossip with myself as unreachable, from [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(3212ac6c9f)" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring received gossip from unreachable [{}] &quot;)" class="string">&quot;Ignoring received gossip from unreachable [{}] &quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.x$5" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Ignoring received gossip from unknown [{}]&quot;)" class="string">&quot;Cluster Node [{}] - Ignoring received gossip from unknown [{}]&quot;</span>, <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="ClusterCoreDaemon.this.ReceiveGossipType" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.x$6" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Ignoring received gossip that does not contain myself, from [{}]&quot;)" class="string">&quot;Ignoring received gossip that does not contain myself, from [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.Ignored.readResolve" title="ClusterCoreDaemon.this.Ignored.type">Ignored</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.cluster.VectorClock.Ordering" id="akka.cluster;ClusterCoreDaemon.receiveGossip.comparison">comparison</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a> <a href="VectorClock.scala.html#akka.cluster;VectorClock.compareTo" title="(that: akka.cluster.VectorClock)akka.cluster.VectorClock.Ordering">compareTo</a> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a>

      <span class="keyword">val</span> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.winningGossip" title="(akka.cluster.Gossip, Boolean, Product with Serializable with ClusterCoreDaemon.this.ReceiveGossipType)" class="delimiter">(</a><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.x$7" title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.receiveGossip.winningGossip">winningGossip</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.x$7" title="Boolean" id="akka.cluster;ClusterCoreDaemon.receiveGossip.talkback">talkback</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.x$7" title="ClusterCoreDaemon extends Product with Serializable with ClusterCoreDaemon.this.ReceiveGossipType" id="akka.cluster;ClusterCoreDaemon.receiveGossip.gossipType">gossipType</a><span class="delimiter">)</span> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.comparison" title="akka.cluster.VectorClock.Ordering">comparison</a> <span title="(akka.cluster.Gossip, Boolean, Product with Serializable with ClusterCoreDaemon.this.ReceiveGossipType)" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.Same" title="akka.cluster.VectorClock.Same.type">Same</a> ⇒
          <span class="comment">// same version</span>
          <span title="(_1: akka.cluster.Gossip, _2: Boolean, _3: ClusterCoreDaemon.this.Same.type)(akka.cluster.Gossip, Boolean, ClusterCoreDaemon.this.Same.type)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.mergeSeen" title="(that: akka.cluster.Gossip)akka.cluster.Gossip">mergeSeen</a> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>, <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenByNode" title="(node: akka.cluster.UniqueAddress)Boolean">seenByNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>, <a href="#akka.cluster;ClusterCoreDaemon.Same.readResolve" title="ClusterCoreDaemon.this.Same.type">Same</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.Before" title="akka.cluster.VectorClock.Before.type">Before</a> ⇒
          <span class="comment">// local is newer</span>
          <span title="(_1: akka.cluster.Gossip, _2: Boolean, _3: ClusterCoreDaemon.this.Older.type)(akka.cluster.Gossip, Boolean, ClusterCoreDaemon.this.Older.type)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#akka.cluster;ClusterCoreDaemon.Older.readResolve" title="ClusterCoreDaemon.this.Older.type">Older</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.After" title="akka.cluster.VectorClock.After.type">After</a> ⇒
          <span class="comment">// remote is newer</span>
          <span title="(_1: akka.cluster.Gossip, _2: Boolean, _3: ClusterCoreDaemon.this.Newer.type)(akka.cluster.Gossip, Boolean, ClusterCoreDaemon.this.Newer.type)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>, <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenByNode" title="(node: akka.cluster.UniqueAddress)Boolean">seenByNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>, <a href="#akka.cluster;ClusterCoreDaemon.Newer.readResolve" title="ClusterCoreDaemon.this.Newer.type">Newer</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ ⇒
          <span class="comment">// conflicting versions, merge</span>
          <span title="(_1: akka.cluster.Gossip, _2: Boolean, _3: ClusterCoreDaemon.this.Merge.type)(akka.cluster.Gossip, Boolean, ClusterCoreDaemon.this.Merge.type)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.merge" title="(that: akka.cluster.Gossip)akka.cluster.Gossip">merge</a> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#akka.cluster;ClusterCoreDaemon.Merge.readResolve" title="ClusterCoreDaemon.this.Merge.type">Merge</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="(x$1: akka.cluster.Gossip)Unit">latestGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.winningGossip" title="akka.cluster.Gossip">winningGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.seen" title="(node: akka.cluster.UniqueAddress)akka.cluster.Gossip">seen</a> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>

      <span class="comment">// for all new joining nodes we remove them from the failure detector</span>
      <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <span title="(f: akka.cluster.Member =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span>
        <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.node">node</a> ⇒ <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.node" title="akka.cluster.Member">node</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Joining" title="akka.cluster.MemberStatus.Joining.type">Joining</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="(elem: akka.cluster.Member)Boolean">members</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.node" title="akka.cluster.Member">node</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="Cluster.scala.html#akka.cluster;Cluster.failureDetector" title="=&gt; akka.remote.FailureDetectorRegistry[akka.actor.Address]">failureDetector</a>.<a href="../../../remote/akka/remote/FailureDetectorRegistry.scala.html#akka.remote;FailureDetectorRegistry.remove" title="(resource: akka.actor.Address)Unit">remove</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.$anonfun.node" title="akka.cluster.Member">node</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Receiving gossip from [{}]&quot;)" class="string">&quot;Cluster Node [{}] - Receiving gossip from [{}]&quot;</span>, <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.comparison" title="akka.cluster.VectorClock.Ordering">comparison</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="VectorClock.scala.html#akka.cluster.VectorClock" title="akka.cluster.VectorClock.type">VectorClock</a>.<a href="VectorClock.scala.html#akka.cluster.VectorClock.Concurrent" title="akka.cluster.VectorClock.Concurrent.type">Concurrent</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(6c666e4343)" title="(template: String, arg1: Any, arg2: Any, arg3: Any)Unit">debug</a><span class="delimiter">(</span>
          <span title="String(&quot;Couldn\'t establish a causal relationship between \&quot;remote\&quot; gossip and \&quot;local\&quot; gossip - Remote[{}] - Local[{}] - merged them into [{}]&quot;)" class="string">&quot;&quot;&quot;Couldn't establish a causal relationship between &quot;remote&quot; gossip and &quot;local&quot; gossip - Remote[{}] - Local[{}] - merged them into [{}]&quot;&quot;&quot;</span>,
          <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.remoteGossip" title="akka.cluster.Gossip">remoteGossip</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.localGossip" title="akka.cluster.Gossip">localGossip</a>, <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.winningGossip" title="akka.cluster.Gossip">winningGossip</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.statsEnabled" title="=&gt; Boolean">statsEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="(x$1: akka.cluster.GossipStats)Unit">gossipStats</a> = <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.gossipType" title="ClusterCoreDaemon extends Product with Serializable with ClusterCoreDaemon.this.ReceiveGossipType">gossipType</a> <span title="akka.cluster.GossipStats" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#akka.cluster;ClusterCoreDaemon.Merge.readResolve" title="ClusterCoreDaemon.this.Merge.type">Merge</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="=&gt; akka.cluster.GossipStats">gossipStats</a>.<a href="#akka.cluster;GossipStats.incrementMergeCount" title="()akka.cluster.GossipStats">incrementMergeCount</a>
          <span class="keyword">case</span> <a href="#akka.cluster;ClusterCoreDaemon.Same.readResolve" title="ClusterCoreDaemon.this.Same.type">Same</a>  ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="=&gt; akka.cluster.GossipStats">gossipStats</a>.<a href="#akka.cluster;GossipStats.incrementSameCount" title="()akka.cluster.GossipStats">incrementSameCount</a>
          <span class="keyword">case</span> <a href="#akka.cluster;ClusterCoreDaemon.Newer.readResolve" title="ClusterCoreDaemon.this.Newer.type">Newer</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="=&gt; akka.cluster.GossipStats">gossipStats</a>.<a href="#akka.cluster;GossipStats.incrementNewerCount" title="()akka.cluster.GossipStats">incrementNewerCount</a>
          <span class="keyword">case</span> <a href="#akka.cluster;ClusterCoreDaemon.Older.readResolve" title="ClusterCoreDaemon.this.Older.type">Older</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="=&gt; akka.cluster.GossipStats">gossipStats</a>.<a href="#akka.cluster;GossipStats.incrementOlderCount" title="()akka.cluster.GossipStats">incrementOlderCount</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="akka.cluster.MemberStatus" id="akka.cluster;ClusterCoreDaemon.receiveGossip.selfStatus">selfStatus</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.selfStatus" title="akka.cluster.MemberStatus">selfStatus</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.selfStatus" title="akka.cluster.MemberStatus">selfStatus</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Down" title="akka.cluster.MemberStatus.Down.type">Down</a><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.shutdown" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.talkback" title="Boolean">talkback</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// send back gossip to sender() when sender() had different view, i.e. merge, or sender() had</span>
        <span class="comment">// older or sender() had newer</span>
        <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701)" title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit">gossipTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.from" title="akka.cluster.UniqueAddress">from</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#akka.cluster;ClusterCoreDaemon.receiveGossip.gossipType" title="ClusterCoreDaemon extends Product with Serializable with ClusterCoreDaemon.this.ReceiveGossipType">gossipType</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.gossipTick">gossipTick</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterCoreDaemon.gossip" title="()Unit">gossip</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.isGossipSpeedupNeeded" title="=&gt; Boolean">isGossipSpeedupNeeded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">GossipInterval</a> <span title="(divisor: Long)scala.concurrent.duration.FiniteDuration">/</span> <span title="Long(3L)" class="int">3</span>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.GossipSpeedupTick.readResolve" title="akka.cluster.InternalClusterAction.GossipSpeedupTick.type">GossipSpeedupTick</a><span class="delimiter">)</span>
      <a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.scheduleOnce(a2d55b51db)" title="(delay: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">scheduleOnce</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">GossipInterval</a> <span title="(factor: Long)scala.concurrent.duration.FiniteDuration">*</span> <span title="Long(2L)" class="int">2</span> <span title="(divisor: Long)scala.concurrent.duration.FiniteDuration">/</span> <span title="Long(3L)" class="int">3</span>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.GossipSpeedupTick.readResolve" title="akka.cluster.InternalClusterAction.GossipSpeedupTick.type">GossipSpeedupTick</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.gossipSpeedupTick">gossipSpeedupTick</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.isGossipSpeedupNeeded" title="=&gt; Boolean">isGossipSpeedupNeeded</a><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.gossip" title="()Unit">gossip</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterCoreDaemon.isGossipSpeedupNeeded">isGossipSpeedupNeeded</a>: <span title="Boolean">Boolean</span> =
    <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.seen" title="=&gt; Set[akka.cluster.UniqueAddress]">seen</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Int">/</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Initiates a new round of gossip.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.gossip">gossip</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.isSingletonCluster" title="=&gt; Boolean">isSingletonCluster</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.gossip.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>

      <span class="keyword">val</span> <a title="Vector[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets">preferredGossipTargets</a>: <span title="Vector[akka.cluster.UniqueAddress]">Vector</span><span class="delimiter">[</span>UniqueAddress<span class="delimiter">]</span> =
        <span title="Vector[akka.cluster.UniqueAddress]" class="keyword">if</span> <span class="delimiter">(</span><span title="scala.concurrent.forkjoin.ThreadLocalRandom.type">ThreadLocalRandom</span>.<span title="()scala.concurrent.forkjoin.ThreadLocalRandom">current</span>.<span title="()Double">nextDouble</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Double)Boolean">&lt;</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability" title="=&gt; Double">adjustedGossipDifferentViewProbability</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// If it's time to try to gossip to some nodes with a different view</span>
          <span class="comment">// gossip to a random alive member with preference to a member with older gossip version</span>
          <a href="#akka.cluster;ClusterCoreDaemon.gossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.cluster.UniqueAddress])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.UniqueAddress,Vector[akka.cluster.UniqueAddress]])Vector[akka.cluster.UniqueAddress]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.cluster.UniqueAddress] with Serializable" id="akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
            <span class="keyword">case</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets;$anonfun.isDefinedAt.m">m</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenByNode" title="(node: akka.cluster.UniqueAddress)Boolean">seenByNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span> ⇒
              <a href="#akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a>
          <span class="delimiter">}</span><span class="delimiter">(</span><span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.cluster.UniqueAddress,Vector[akka.cluster.UniqueAddress]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.UniqueAddress,Vector[akka.cluster.UniqueAddress]]">breakOut</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets" title="Vector[akka.cluster.UniqueAddress]">preferredGossipTargets</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <span title="Option[akka.cluster.UniqueAddress]">peer</span> = <a href="#akka.cluster;ClusterCoreDaemon.selectRandomNode" title="(nodes: IndexedSeq[akka.cluster.UniqueAddress])Option[akka.cluster.UniqueAddress]">selectRandomNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.preferredGossipTargets" title="Vector[akka.cluster.UniqueAddress]">preferredGossipTargets</a><span class="delimiter">)</span>
        <span class="comment">// send full gossip because it has different view</span>
        <span title="Option[akka.cluster.UniqueAddress]">peer</span> <span title="(f: akka.cluster.UniqueAddress =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91)" title="(node: akka.cluster.UniqueAddress)Unit">gossipTo</a>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// Fall back to localGossip; important to not accidentally use `map` of the SortedSet, since the original order is not preserved)</span>
        <span class="keyword">val</span> <span title="Option[akka.cluster.UniqueAddress]">peer</span> = <a href="#akka.cluster;ClusterCoreDaemon.selectRandomNode" title="(nodes: IndexedSeq[akka.cluster.UniqueAddress])Option[akka.cluster.UniqueAddress]">selectRandomNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; scala.collection.immutable.IndexedSeq[akka.cluster.Member]">toIndexedSeq</span>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.cluster.UniqueAddress])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[akka.cluster.Member],akka.cluster.UniqueAddress,IndexedSeq[akka.cluster.UniqueAddress]])IndexedSeq[akka.cluster.UniqueAddress]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.cluster.UniqueAddress] with Serializable" id="akka.cluster;ClusterCoreDaemon.gossip.peer;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
          <span class="keyword">case</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.gossip.peer;$anonfun.isDefinedAt.m">m</a> <span class="keyword">if</span> <a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.peer;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.gossip.peer;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a>
        <span class="delimiter">}</span><span class="delimiter">)</span>
        <span title="Option[akka.cluster.UniqueAddress]">peer</span> <span title="(f: akka.cluster.UniqueAddress =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.gossip.$anonfun.node">node</a> ⇒
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenByNode" title="(node: akka.cluster.UniqueAddress)Boolean">seenByNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.$anonfun.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.gossipStatusTo(5887d03c91)" title="(node: akka.cluster.UniqueAddress)Unit">gossipStatusTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.$anonfun.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91)" title="(node: akka.cluster.UniqueAddress)Unit">gossipTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossip.$anonfun.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * For large clusters we should avoid shooting down individual
   * nodes. Therefore the probability is reduced for large clusters.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Double" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability">adjustedGossipDifferentViewProbability</a>: <span title="Double">Double</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.size">size</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="=&gt; Int">size</span>
    <span class="keyword">val</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.low">low</a> = <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.ReduceGossipDifferentViewProbability" title="=&gt; Int">ReduceGossipDifferentViewProbability</a>
    <span class="keyword">val</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.high">high</a> = <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.low" title="Int">low</a> <span title="(x: Int)Int">*</span> <span title="Int(3)" class="int">3</span>
    <span class="comment">// start reduction when cluster is larger than configured ReduceGossipDifferentViewProbability</span>
    <span title="Double" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.size" title="Int">size</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.low" title="Int">low</a><span class="delimiter">)</span>
      <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipDifferentViewProbability" title="=&gt; Double">GossipDifferentViewProbability</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// don't go lower than 1/10 of the configured GossipDifferentViewProbability</span>
      <span class="keyword">val</span> <a title="Double" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.minP">minP</a> = <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipDifferentViewProbability" title="=&gt; Double">GossipDifferentViewProbability</a> <span title="(x: Int)Double">/</span> <span title="Int(10)" class="int">10</span>
      <span title="Double" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.size" title="Int">size</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.high" title="Int">high</a><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.minP" title="Double">minP</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// linear reduction of the probability with increasing number of nodes</span>
        <span class="comment">// from ReduceGossipDifferentViewProbability at ReduceGossipDifferentViewProbability nodes</span>
        <span class="comment">// to ReduceGossipDifferentViewProbability / 10 at ReduceGossipDifferentViewProbability * 3 nodes</span>
        <span class="comment">// i.e. default from 0.8 at 400 nodes, to 0.08 at 1600 nodes</span>
        <span class="keyword">val</span> <a title="Double" id="akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.k">k</a> = <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.minP" title="Double">minP</a> <span title="(x: Double)Double">-</span> <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipDifferentViewProbability" title="=&gt; Double">GossipDifferentViewProbability</a><span class="delimiter">)</span> <span title="(x: Int)Double">/</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.high" title="Int">high</a> <span title="(x: Int)Int">-</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.low" title="Int">low</a><span class="delimiter">)</span>
        <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.GossipDifferentViewProbability" title="=&gt; Double">GossipDifferentViewProbability</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.size" title="Int">size</a> <span title="(x: Int)Int">-</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.low" title="Int">low</a><span class="delimiter">)</span> <span title="(x: Double)Double">*</span> <a href="#akka.cluster;ClusterCoreDaemon.adjustedGossipDifferentViewProbability.k" title="Double">k</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Runs periodic leader actions, such as member status transitions, assigning partitions etc.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.leaderActions">leaderActions</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.isLeader" title="(node: akka.cluster.UniqueAddress)Boolean">isLeader</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// only run the leader actions if we are the LEADER</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.convergence" title="=&gt; Boolean">convergence</a><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence" title="()Unit">leaderActionsOnConvergence</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Leader actions are as follows:
   * 1. Move JOINING     =&gt; UP                   -- When a node joins the cluster
   * 2. Move LEAVING     =&gt; EXITING              -- When all partition handoff has completed
   * 3. Non-exiting remain                       -- When all partition handoff has completed
   * 4. Move unreachable EXITING =&gt; REMOVED      -- When all nodes have seen the EXITING node as unreachable (convergence) -
   *                                                remove the node from the node ring and seen table
   * 5. Move unreachable DOWN/EXITING =&gt; REMOVED -- When all nodes have seen that the node is DOWN/EXITING (convergence) -
   *                                                remove the node from the node ring and seen table
   * 7. Updating the vclock version for the changes
   * 8. Updating the `seen` table
   * 9. Update the state with the new gossip
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence">leaderActionsOnConvergence</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>
    <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localMembers">localMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>
    <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localOverview">localOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>
    <span class="keyword">val</span> <a title="Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localSeen">localSeen</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.seen" title="=&gt; Set[akka.cluster.UniqueAddress]">seen</a>

    <span class="keyword">val</span> <a title="Boolean" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.hasPartionHandoffCompletedSuccessfully">hasPartionHandoffCompletedSuccessfully</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <span class="comment">// TODO implement partion handoff and a check if it is completed - now just returns TRUE - e.g. has completed successfully</span>
      <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers">enoughMembers</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
      <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.MinNrOfMembers" title="=&gt; Int">MinNrOfMembers</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.MinNrOfMembersOfRole" title="=&gt; Map[String,Int]">MinNrOfMembersOfRole</a>.<span title="(p: ((String, Int)) =&gt; Boolean)Boolean">forall</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a title="String" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.role">role</a>, <a title="Int" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.threshold">threshold</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Int">count</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.$anonfun.x$8" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.hasRole" title="(role: String)Boolean">hasRole</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.role" title="String">role</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers.$anonfun.threshold" title="Int">threshold</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(m: akka.cluster.Member)Boolean" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.isJoiningToUp">isJoiningToUp</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.isJoiningToUp.m">m</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.isJoiningToUp.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Joining" title="akka.cluster.MemberStatus.Joining.type">Joining</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.enoughMembers" title="=&gt; Boolean">enoughMembers</a>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable">removedUnreachable</a> = <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable.$anonfun.node">node</a> ← <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachableOrTerminated" title="(f: akka.cluster.UniqueAddress =&gt; (akka.cluster.UniqueAddress, akka.cluster.Member))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],(akka.cluster.UniqueAddress, akka.cluster.Member),scala.collection.immutable.Set[(akka.cluster.UniqueAddress, akka.cluster.Member)]])scala.collection.immutable.Set[(akka.cluster.UniqueAddress, akka.cluster.Member)]">allUnreachableOrTerminated</a>
      <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable.$anonfun.m">m</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable.$anonfun.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.removeUnreachableWithMemberStatus" title="(elem: akka.cluster.MemberStatus)Boolean">removeUnreachableWithMemberStatus</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable.$anonfun.m" title="akka.cluster.Member">m</a>

    <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers">changedMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a> <a href="Member.scala.html#akka.cluster.Member.ordering" title="(pf: PartialFunction[akka.cluster.Member,akka.cluster.Member])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.Member,scala.collection.immutable.SortedSet[akka.cluster.Member]])scala.collection.immutable.SortedSet[akka.cluster.Member]">collect</a> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="Int" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers.upNumber">upNumber</a> = <span title="Int(0)" class="int">0</span>

      <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.cluster.Member] with Serializable" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="akka.cluster.Member">m</span> <span class="keyword">if</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.isJoiningToUp" title="(m: akka.cluster.Member)Boolean">isJoiningToUp</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span> ⇒
          <span class="comment">// Move JOINING =&gt; UP (once all nodes have seen that this node is JOINING, i.e. we have a convergence)</span>
          <span class="comment">// and minimum number of nodes have joined the cluster</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers.upNumber" title="Int">upNumber</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// It is alright to use same upNumber as already used by a removed member, since the upNumber</span>
            <span class="comment">// is only used for comparing age of current cluster members (Member.isOlderThan)</span>
            <span class="keyword">val</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers;$anonfun.applyOrElse.youngest">youngest</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.youngestMember" title="=&gt; akka.cluster.Member">youngestMember</a>
            <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers.upNumber" title="Int">upNumber</a> = <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <span class="delimiter">(</span><span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers;$anonfun.applyOrElse.youngest" title="akka.cluster.Member">youngest</a>.<a href="Member.scala.html#akka.cluster;Member.upNumber" title="=&gt; Int">upNumber</a> <span title="(x: Int)Boolean">==</span> Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers;$anonfun.applyOrElse.youngest" title="akka.cluster.Member">youngest</a>.<a href="Member.scala.html#akka.cluster;Member.upNumber" title="=&gt; Int">upNumber</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers.upNumber" title="Int">upNumber</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
          <span class="delimiter">}</span>
          <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.copyUp" title="(upNumber: Int)akka.cluster.Member">copyUp</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers.upNumber" title="Int">upNumber</a><span class="delimiter">)</span>

        <span class="keyword">case</span> <span title="akka.cluster.Member">m</span> <span class="keyword">if</span> <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Leaving" title="akka.cluster.MemberStatus.Leaving.type">Leaving</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.hasPartionHandoffCompletedSuccessfully" title="Boolean">hasPartionHandoffCompletedSuccessfully</a> ⇒
          <span class="comment">// Move LEAVING =&gt; EXITING (once we have a convergence on LEAVING</span>
          <span class="comment">// *and* if we have a successful partition handoff)</span>
          <span title="akka.cluster.Member">m</span> <a href="Member.scala.html#akka.cluster;Member.copy" title="(status: akka.cluster.MemberStatus)akka.cluster.Member">copy</a> <span class="delimiter">(</span>status = <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable" title="scala.collection.immutable.Set[akka.cluster.Member]">removedUnreachable</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">changedMembers</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// handle changes</span>

      <span class="comment">// replace changed members</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newMembers">newMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">changedMembers</a> <span title="(elems: scala.collection.GenTraversableOnce[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">++</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a> <span title="(xs: scala.collection.GenTraversableOnce[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">--</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable" title="scala.collection.immutable.Set[akka.cluster.Member]">removedUnreachable</a>

      <span class="comment">// removing REMOVED nodes from the `seen` table</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removed">removed</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable" title="scala.collection.immutable.Set[akka.cluster.Member]">removedUnreachable</a>.<span title="(f: akka.cluster.Member =&gt; akka.cluster.UniqueAddress)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.Member],akka.cluster.UniqueAddress,scala.collection.immutable.Set[akka.cluster.UniqueAddress]])scala.collection.immutable.Set[akka.cluster.UniqueAddress]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.cluster.UniqueAddress,scala.collection.immutable.Set[akka.cluster.UniqueAddress]]" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removed.$anonfun.x$11" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newSeen">newSeen</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localSeen" title="Set[akka.cluster.UniqueAddress]">localSeen</a> <span title="(xs: scala.collection.GenTraversableOnce[akka.cluster.UniqueAddress])scala.collection.immutable.Set[akka.cluster.UniqueAddress]">--</span> <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removed" title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]">removed</a>
      <span class="comment">// removing REMOVED nodes from the `reachability` table</span>
      <span class="keyword">val</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newReachability">newReachability</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.remove" title="(nodes: Iterable[akka.cluster.UniqueAddress])akka.cluster.Reachability">remove</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removed" title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]">removed</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newOverview">newOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localOverview" title="akka.cluster.GossipOverview">localOverview</a> <a href="Gossip.scala.html#akka.cluster;GossipOverview.copy" title="(seen: Set[akka.cluster.UniqueAddress], reachability: akka.cluster.Reachability)akka.cluster.GossipOverview">copy</a> <span class="delimiter">(</span>seen = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newSeen" title="scala.collection.immutable.Set[akka.cluster.UniqueAddress]">newSeen</a>, reachability = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newReachability" title="akka.cluster.Reachability">newReachability</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.localGossip" title="akka.cluster.Gossip">localGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy" title="(members: scala.collection.immutable.SortedSet[akka.cluster.Member], overview: akka.cluster.GossipOverview, version: akka.cluster.VectorClock)akka.cluster.Gossip">copy</a> <span class="delimiter">(</span>members = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newMembers</a>, overview = <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newOverview" title="akka.cluster.GossipOverview">newOverview</a><span class="delimiter">)</span>

      <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>

      <span class="comment">// log status changes</span>
      <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.changedMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">changedMembers</a> <span title="(f: akka.cluster.Member =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <span title="akka.cluster.Member">m</span> ⇒
        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Leader is moving node [{}] to [{}]&quot;)" class="string">&quot;Leader is moving node [{}] to [{}]&quot;</span>, <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>, <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">// log the removal of the unreachable nodes</span>
      <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.removedUnreachable" title="scala.collection.immutable.Set[akka.cluster.Member]">removedUnreachable</a> <span title="(f: akka.cluster.Member =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <span title="akka.cluster.Member">m</span> ⇒
        <span class="keyword">val</span> <a title="String" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.$anonfun.status">status</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a><span class="delimiter">)</span> <span title="String(&quot;exiting&quot;)" class="string">&quot;exiting&quot;</span> <span class="keyword">else</span> <span title="String(&quot;unreachable&quot;)" class="string">&quot;unreachable&quot;</span>
        <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Leader is removing {} node [{}]&quot;)" class="string">&quot;Leader is removing {} node [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.$anonfun.status" title="String">status</a>, <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// Leader is moving itself from Leaving to Exiting. Let others know (best effort)</span>
        <span class="comment">// before shutdown. Otherwise they will not see the Exiting state change</span>
        <span class="comment">// and there will not be convergence until they have detected this node as</span>
        <span class="comment">// unreachable and the required downing has finished. They will still need to detect</span>
        <span class="comment">// unreachable, but Exiting unreachable will be removed without downing, i.e.</span>
        <span class="comment">// normally the leaving of a leader will be graceful without the need</span>
        <span class="comment">// for downing. However, if those final gossip messages never arrive it is</span>
        <span class="comment">// alright to require the downing, because that is probably caused by a</span>
        <span class="comment">// network failure anyway.</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="akka.cluster;ClusterCoreDaemon.leaderActionsOnConvergence.$anonfun._">_</a> ← <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; Unit)Unit">to</span> <a href="#akka.cluster;ClusterCoreDaemon.NumberOfGossipsBeforeShutdownWhenLeaderExits" title="=&gt; Int">NumberOfGossipsBeforeShutdownWhenLeaderExits</a><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.gossip" title="()Unit">gossip</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.shutdown" title="()Unit">shutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Reaps the unreachable members according to the failure detector's verdict.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers">reapUnreachableMembers</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.cluster;ClusterCoreDaemon.isSingletonCluster" title="=&gt; Boolean">isSingletonCluster</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// only scrutinize if we are a non-singleton cluster</span>

      <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localGossip">localGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>
      <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview">localOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localMembers">localMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>

      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers">newlyDetectedUnreachableMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">localMembers</a> <span title="(p: akka.cluster.Member =&gt; Boolean)scala.collection.immutable.SortedSet[akka.cluster.Member]">filterNot</span> <span class="delimiter">{</span> <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers.$anonfun.member">member</a> ⇒
        <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers.$anonfun.member" title="akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a> <span title="(x: Boolean)Boolean">||</span>
          <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.status(aca158447c)" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)akka.cluster.Reachability.ReachabilityStatus">status</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers.$anonfun.member" title="akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Reachability.scala.html#akka.cluster.Reachability" title="akka.cluster.Reachability.type">Reachability</a>.<a href="Reachability.scala.html#akka.cluster.Reachability.Unreachable" title="akka.cluster.Reachability.Unreachable.type">Unreachable</a> <span title="(x: Boolean)Boolean">||</span>
          <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.status(aca158447c)" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)akka.cluster.Reachability.ReachabilityStatus">status</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers.$anonfun.member" title="akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Reachability.scala.html#akka.cluster.Reachability" title="akka.cluster.Reachability.type">Reachability</a>.<a href="Reachability.scala.html#akka.cluster.Reachability.Terminated" title="akka.cluster.Reachability.Terminated.type">Terminated</a> <span title="(x: Boolean)Boolean">||</span>
          <a href="Cluster.scala.html#akka.cluster;Cluster.failureDetector" title="=&gt; akka.remote.FailureDetectorRegistry[akka.actor.Address]">failureDetector</a>.<a href="../../../remote/akka/remote/FailureDetectorRegistry.scala.html#akka.remote;FailureDetectorRegistry.isAvailable" title="(resource: akka.actor.Address)Boolean">isAvailable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers.$anonfun.member" title="akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers">newlyDetectedReachableMembers</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachableFrom" title="(observer: akka.cluster.UniqueAddress)Set[akka.cluster.UniqueAddress]">allUnreachableFrom</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span> <span title="(pf: PartialFunction[akka.cluster.UniqueAddress,akka.cluster.Member])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.Member,scala.collection.immutable.Set[akka.cluster.Member]])scala.collection.immutable.Set[akka.cluster.Member]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.UniqueAddress,akka.cluster.Member] with Serializable" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers;$anonfun.isDefinedAt.node">node</a> <span class="keyword">if</span> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="Cluster.scala.html#akka.cluster;Cluster.failureDetector" title="=&gt; akka.remote.FailureDetectorRegistry[akka.actor.Address]">failureDetector</a>.<a href="../../../remote/akka/remote/FailureDetectorRegistry.scala.html#akka.remote;FailureDetectorRegistry.isAvailable" title="(resource: akka.actor.Address)Boolean">isAvailable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span> ⇒
          <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localGossip" title="akka.cluster.Gossip">localGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newlyDetectedUnreachableMembers</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers" title="scala.collection.immutable.Set[akka.cluster.Member]">newlyDetectedReachableMembers</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>

        <span class="keyword">val</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1">newReachability1</a> = <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1.x$12" title="(z: akka.cluster.Reachability)(op: (akka.cluster.Reachability, akka.cluster.Member) =&gt; akka.cluster.Reachability)akka.cluster.Reachability">/:</a> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newlyDetectedUnreachableMembers</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="delimiter">(</span><a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1.$anonfun.reachability">reachability</a>, <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1.$anonfun.m">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1.$anonfun.reachability" title="akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.unreachable" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)akka.cluster.Reachability">unreachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2">newReachability2</a> = <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability1" title="akka.cluster.Reachability">newReachability1</a> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2.x$13" title="(z: akka.cluster.Reachability)(op: (akka.cluster.Reachability, akka.cluster.Member) =&gt; akka.cluster.Reachability)akka.cluster.Reachability">/:</a> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers" title="scala.collection.immutable.Set[akka.cluster.Member]">newlyDetectedReachableMembers</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="delimiter">(</span><a title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2.$anonfun.reachability">reachability</a>, <a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2.$anonfun.m">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2.$anonfun.reachability" title="akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.reachable" title="(observer: akka.cluster.UniqueAddress, subject: akka.cluster.UniqueAddress)akka.cluster.Reachability">reachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2" title="akka.cluster.Reachability">newReachability2</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newOverview">newOverview</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localOverview" title="akka.cluster.GossipOverview">localOverview</a> <a href="Gossip.scala.html#akka.cluster;GossipOverview.copy$default$1" title="Set[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newOverview.x$30">copy</a> <span class="delimiter">(</span>reachability = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newReachability2" title="akka.cluster.Reachability" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newOverview.x$29">newReachability2</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newGossip">newGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.localGossip" title="akka.cluster.Gossip">localGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.copy$default$1" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newGossip.x$33">copy</a> <span class="delimiter">(</span>overview = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newOverview" title="akka.cluster.GossipOverview" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newGossip.x$31">newOverview</a><span class="delimiter">)</span>

          <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip" title="(newGossip: akka.cluster.Gossip)Unit">updateLatestGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.exiting" title="(scala.collection.immutable.SortedSet[akka.cluster.Member], scala.collection.immutable.SortedSet[akka.cluster.Member])" class="delimiter">(</a><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.x$15" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.exiting">exiting</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.x$15" title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.nonExiting">nonExiting</a><span class="delimiter">)</span> = <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedUnreachableMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newlyDetectedUnreachableMembers</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)(scala.collection.immutable.SortedSet[akka.cluster.Member], scala.collection.immutable.SortedSet[akka.cluster.Member])">partition</span><span title="(scala.collection.immutable.SortedSet[akka.cluster.Member], scala.collection.immutable.SortedSet[akka.cluster.Member]) @unchecked" class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.x$15.$anonfun.x$14" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.nonExiting" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">nonExiting</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
            <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Cluster Node [{}] - Marking node(s) as UNREACHABLE [{}]&quot;)" class="string">&quot;Cluster Node [{}] - Marking node(s) as UNREACHABLE [{}]&quot;</span>, <a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.nonExiting" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">nonExiting</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.exiting" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">exiting</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
            <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Marking exiting node(s) as UNREACHABLE [{}]. This is expected and they will be removed.&quot;)" class="string">&quot;Marking exiting node(s) as UNREACHABLE [{}]. This is expected and they will be removed.&quot;</span>,
              <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.exiting" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">exiting</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers" title="scala.collection.immutable.Set[akka.cluster.Member]">newlyDetectedReachableMembers</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
            <a href="Cluster.scala.html#akka.cluster;Cluster.InfoLogger.logInfo(dc73c33c91)" title="(template: String, arg1: Any)Unit">logInfo</a><span class="delimiter">(</span><span title="String(&quot;Marking node(s) as REACHABLE [{}]&quot;)" class="string">&quot;Marking node(s) as REACHABLE [{}]&quot;</span>, <a href="#akka.cluster;ClusterCoreDaemon.reapUnreachableMembers.newlyDetectedReachableMembers" title="scala.collection.immutable.Set[akka.cluster.Member]">newlyDetectedReachableMembers</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="#akka.cluster;ClusterCoreDaemon.publish" title="(newGossip: akka.cluster.Gossip)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(nodes: IndexedSeq[akka.cluster.UniqueAddress])Option[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.selectRandomNode">selectRandomNode</a><span class="delimiter">(</span><a title="IndexedSeq[akka.cluster.UniqueAddress]" id="akka.cluster;ClusterCoreDaemon.selectRandomNode.nodes">nodes</a>: <span title="IndexedSeq[akka.cluster.UniqueAddress]">IndexedSeq</span><span class="delimiter">[</span>UniqueAddress<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[akka.cluster.UniqueAddress]">Option</span><span class="delimiter">[</span>UniqueAddress<span class="delimiter">]</span> =
    <span title="Option[akka.cluster.UniqueAddress]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selectRandomNode.nodes" title="IndexedSeq[akka.cluster.UniqueAddress]">nodes</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="None.type">None</span>
    <span class="keyword">else</span> <span title="(x: akka.cluster.UniqueAddress)Some[akka.cluster.UniqueAddress]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selectRandomNode.nodes" title="(idx: Int)akka.cluster.UniqueAddress">nodes</a><span class="delimiter">(</span><span title="scala.concurrent.forkjoin.ThreadLocalRandom.type">ThreadLocalRandom</span>.<span title="()scala.concurrent.forkjoin.ThreadLocalRandom">current</span> <span title="(x$1: Int)Int">nextInt</span> <a href="#akka.cluster;ClusterCoreDaemon.selectRandomNode.nodes" title="IndexedSeq[akka.cluster.UniqueAddress]">nodes</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.cluster;ClusterCoreDaemon.isSingletonCluster">isSingletonCluster</a>: <span title="Boolean">Boolean</span> = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.isSingletonCluster" title="=&gt; Boolean">isSingletonCluster</a>

  <span class="comment">// needed for tests</span>
  <span class="keyword">def</span> <a title="(address: akka.actor.Address)Unit" id="akka.cluster;ClusterCoreDaemon.sendGossipTo">sendGossipTo</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;ClusterCoreDaemon.sendGossipTo.address">address</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(f: akka.cluster.Member =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.sendGossipTo.$anonfun.m">m</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.sendGossipTo.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;ClusterCoreDaemon.sendGossipTo.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
        <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91)" title="(node: akka.cluster.UniqueAddress)Unit">gossipTo</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.sendGossipTo.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Gossips latest gossip to a node.
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress)Unit" id="akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91)">gossipTo</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91).node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91).node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.clusterCore" title="(address: akka.actor.Address)akka.actor.ActorSelection">clusterCore</a><a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91).node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Gossip.scala.html#akka.cluster.GossipEnvelope.apply(86e4d87bb5)" title="(from: akka.cluster.UniqueAddress, to: akka.cluster.UniqueAddress, gossip: akka.cluster.Gossip)akka.cluster.GossipEnvelope">GossipEnvelope</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(5887d03c91).node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit" id="akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701)">gossipTo</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701).node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701).destination">destination</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701).node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">destination</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Gossip.scala.html#akka.cluster.GossipEnvelope.apply(86e4d87bb5)" title="(from: akka.cluster.UniqueAddress, to: akka.cluster.UniqueAddress, gossip: akka.cluster.Gossip)akka.cluster.GossipEnvelope">GossipEnvelope</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.gossipTo(45898cf701).node" title="akka.cluster.UniqueAddress">node</a>, <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress, destination: akka.actor.ActorRef)Unit" id="akka.cluster;ClusterCoreDaemon.gossipStatusTo(45898cf701)">gossipStatusTo</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.gossipStatusTo(45898cf701).node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a>, <a title="akka.actor.ActorRef" id="akka.cluster;ClusterCoreDaemon.gossipStatusTo(45898cf701).destination">destination</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossipStatusTo(45898cf701).node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">destination</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Gossip.scala.html#akka.cluster;GossipStatus" title="(from: akka.cluster.UniqueAddress, version: akka.cluster.VectorClock)akka.cluster.GossipStatus">GossipStatus</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress)Unit" id="akka.cluster;ClusterCoreDaemon.gossipStatusTo(5887d03c91)">gossipStatusTo</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.gossipStatusTo(5887d03c91).node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip" title="(node: akka.cluster.UniqueAddress)Boolean">validNodeForGossip</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossipStatusTo(5887d03c91).node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterCoreDaemon.clusterCore" title="(address: akka.actor.Address)akka.actor.ActorSelection">clusterCore</a><a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="#akka.cluster;ClusterCoreDaemon.gossipStatusTo(5887d03c91).node" title="akka.cluster.UniqueAddress">node</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Gossip.scala.html#akka.cluster;GossipStatus" title="(from: akka.cluster.UniqueAddress, version: akka.cluster.VectorClock)akka.cluster.GossipStatus">GossipStatus</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a>, <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(node: akka.cluster.UniqueAddress)Boolean" id="akka.cluster;ClusterCoreDaemon.validNodeForGossip">validNodeForGossip</a><span class="delimiter">(</span><a title="akka.cluster.UniqueAddress" id="akka.cluster;ClusterCoreDaemon.validNodeForGossip.node">node</a>: <a href="Member.scala.html#akka.cluster;UniqueAddress" title="akka.cluster.UniqueAddress">UniqueAddress</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip.node" title="akka.cluster.UniqueAddress">node</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.hasMember" title="(node: akka.cluster.UniqueAddress)Boolean">hasMember</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
      <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(d151f48ba5)" title="(node: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.validNodeForGossip.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(newGossip: akka.cluster.Gossip)Unit" id="akka.cluster;ClusterCoreDaemon.updateLatestGossip">updateLatestGossip</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.updateLatestGossip.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// Updating the vclock version for the changes</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.updateLatestGossip.versionedGossip">versionedGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip.newGossip" title="akka.cluster.Gossip">newGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.:+(12703368c8)" title="(node: akka.cluster.VectorClock.Node)akka.cluster.Gossip">:+</a> <a href="#akka.cluster;ClusterCoreDaemon.vclockNode" title="=&gt; akka.cluster.VectorClock.Node">vclockNode</a>
    <span class="comment">// Nobody else have seen this gossip but us</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.updateLatestGossip.seenVersionedGossip">seenVersionedGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip.versionedGossip" title="akka.cluster.Gossip">versionedGossip</a> <a href="Gossip.scala.html#akka.cluster;Gossip.onlySeen" title="(node: akka.cluster.UniqueAddress)akka.cluster.Gossip">onlySeen</a> <span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a><span class="delimiter">)</span>
    <span class="comment">// Update the state with the new gossip</span>
    <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="(x$1: akka.cluster.Gossip)Unit">latestGossip</a> = <a href="#akka.cluster;ClusterCoreDaemon.updateLatestGossip.seenVersionedGossip" title="akka.cluster.Gossip">seenVersionedGossip</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(newGossip: akka.cluster.Gossip)Unit" id="akka.cluster;ClusterCoreDaemon.publish">publish</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster;ClusterCoreDaemon.publish.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.PublishChanges.readResolve" title="(newGossip: akka.cluster.Gossip)akka.cluster.InternalClusterAction.PublishChanges">PublishChanges</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.publish.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.PublishStatsInterval" title="=&gt; scala.concurrent.duration.Duration">PublishStatsInterval</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span><span class="delimiter">)</span> <a href="#akka.cluster;ClusterCoreDaemon.publishInternalStats" title="()Unit">publishInternalStats</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterCoreDaemon.publishInternalStats">publishInternalStats</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.VectorClockStats" id="akka.cluster;ClusterCoreDaemon.publishInternalStats.vclockStats">vclockStats</a> = <a href="#akka.cluster.VectorClockStats.readResolve" title="(versionSize: Int, seenLatest: Int)akka.cluster.VectorClockStats">VectorClockStats</a><span class="delimiter">(</span>
      versionSize = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.version" title="=&gt; akka.cluster.VectorClock">version</a>.<a href="VectorClock.scala.html#akka.cluster;VectorClock.versions" title="=&gt; scala.collection.immutable.TreeMap[akka.cluster.VectorClock.Node,Long]">versions</a>.<span title="=&gt; Int">size</span>,
      seenLatest = <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Int">count</span><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;ClusterCoreDaemon.publishInternalStats.vclockStats.$anonfun.m">m</a> ⇒ <a href="#akka.cluster;ClusterCoreDaemon.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenByNode" title="(node: akka.cluster.UniqueAddress)Boolean">seenByNode</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.publishInternalStats.vclockStats.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">publisher</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentInternalStats" title="(gossipStats: akka.cluster.GossipStats, vclockStats: akka.cluster.VectorClockStats)akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterCoreDaemon.gossipStats_=" title="=&gt; akka.cluster.GossipStats">gossipStats</a>, <a href="#akka.cluster;ClusterCoreDaemon.publishInternalStats.vclockStats" title="akka.cluster.VectorClockStats">vclockStats</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 *
 * Used only for the first seed node.
 * Sends InitJoin to all seed nodes (except itself).
 * If other seed nodes are not part of the cluster yet they will reply with
 * InitJoinNack or not respond at all and then the first seed node
 * will join itself to initialize the new cluster. When the first
 * seed node is restarted, and some other seed node is part of the cluster
 * it will reply with InitJoinAck and then the first seed node will join
 * that other seed node to join existing cluster.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class FirstSeedNodeProcess extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.cluster;FirstSeedNodeProcess">FirstSeedNodeProcess</a><a href="#akka.cluster;FirstSeedNodeProcess" title="akka.cluster.FirstSeedNodeProcess" class="delimiter">(</a><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;FirstSeedNodeProcess.seedNodes">seedNodes</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._
  <span class="keyword">import</span> <a href="#akka.cluster.ClusterUserAction" title="akka.cluster.ClusterUserAction.type">ClusterUserAction</a>.JoinTo

  <span class="keyword">val</span> <a title="akka.cluster.Cluster" id="akka.cluster;FirstSeedNodeProcess.cluster">cluster</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.Address" id="akka.cluster;FirstSeedNodeProcess.selfAddress">selfAddress</a> = <a href="#akka.cluster;FirstSeedNodeProcess.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>

  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster;FirstSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; akka.actor.Address">head</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;FirstSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Join seed node should not be done&quot;)" class="string">&quot;Join seed node should not be done&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.cluster;FirstSeedNodeProcess.timeout">timeout</a> = <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.cluster;FirstSeedNodeProcess.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.settings" title="=&gt; akka.cluster.ClusterSettings">settings</a>.<a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodeTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SeedNodeTimeout</a>

  <span class="keyword">var</span> <a title="scala.collection.immutable.Set[akka.actor.Address]" id="akka.cluster;FirstSeedNodeProcess.remainingSeedNodes_=">remainingSeedNodes</a> = <a href="#akka.cluster;FirstSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="scala.collection.immutable.Set[akka.actor.Address]">toSet</span> <span title="(elem: akka.actor.Address)scala.collection.immutable.Set[akka.actor.Address]">-</span> <a href="#akka.cluster;FirstSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>

  <span class="comment">// retry until one ack, or all nack, or timeout</span>
  <span class="keyword">import</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.cluster;FirstSeedNodeProcess.retryTask">retryTask</a> = <a href="#akka.cluster;FirstSeedNodeProcess.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">second</span>, <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">second</span>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a><span class="delimiter">)</span>
  <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;FirstSeedNodeProcess.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;FirstSeedNodeProcess.retryTask" title="=&gt; akka.actor.Cancellable">retryTask</a>.<a href="../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;FirstSeedNodeProcess.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;FirstSeedNodeProcess.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.timeout" title="=&gt; scala.concurrent.duration.Deadline">timeout</a>.<span title="()Boolean">hasTimeLeft</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// send InitJoin to remaining seed nodes (except myself)</span>
        <a href="#akka.cluster;FirstSeedNodeProcess.remainingSeedNodes_=" title="=&gt; scala.collection.immutable.Set[akka.actor.Address]">remainingSeedNodes</a> <span title="(f: akka.actor.Address =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.actor.Address" id="akka.cluster;FirstSeedNodeProcess.receive;$anonfun.applyOrElse.$anonfun.a">a</a> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(271eeb39be)" title="(path: String)akka.actor.ActorSelection">actorSelection</a><a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.parent" title="=&gt; akka.actor.ActorRef">parent</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.receive;$anonfun.applyOrElse.$anonfun.a" title="akka.actor.Address">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.InitJoin.readResolve" title="akka.cluster.InternalClusterAction.InitJoin.type">InitJoin</a> <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// no InitJoinAck received, initialize new cluster by joining myself</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="(address: akka.actor.Address)akka.cluster.ClusterUserAction.JoinTo">JoinTo</a><span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> InitJoinAck<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span> ⇒
      <span class="comment">// first InitJoinAck reply, join existing cluster</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="(address: akka.actor.Address)akka.cluster.ClusterUserAction.JoinTo">JoinTo</a><span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> InitJoinNack<span class="delimiter">(</span><span title="akka.actor.Address">address</span><span class="delimiter">)</span> ⇒
      <a href="#akka.cluster;FirstSeedNodeProcess.remainingSeedNodes_=" title="(x$1: scala.collection.immutable.Set[akka.actor.Address])Unit">remainingSeedNodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.Set[akka.actor.Address]">-=</span> <span title="akka.actor.Address">address</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.remainingSeedNodes_=" title="=&gt; scala.collection.immutable.Set[akka.actor.Address]">remainingSeedNodes</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// initialize new cluster by joining myself when nacks from all other seed nodes</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="(address: akka.actor.Address)akka.cluster.ClusterUserAction.JoinTo">JoinTo</a><span class="delimiter">(</span><a href="#akka.cluster;FirstSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
        <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 *
 * Sends InitJoin to all seed nodes (except itself) and expect
 * InitJoinAck reply back. The seed node that replied first
 * will be used, joined to. InitJoinAck replies received after the
 * first one are ignored.
 *
 * Retries if no InitJoinAck replies are received within the
 * SeedNodeTimeout.
 * When at least one reply has been received it stops itself after
 * an idle SeedNodeTimeout.
 *
 * The seed nodes can be started in any order, but they will not be &quot;active&quot;,
 * until they have been able to join another seed node (seed1).
 * They will retry the join procedure.
 * So one possible startup scenario is:
 * 1. seed2 started, but doesn't get any ack from seed1 or seed3
 * 2. seed3 started, doesn't get any ack from seed1 or seed3 (seed2 doesn't reply)
 * 3. seed1 is started and joins itself
 * 4. seed2 retries the join procedure and gets an ack from seed1, and then joins to seed1
 * 5. seed3 retries the join procedure and gets acks from seed2 first, and then joins to seed2
 *
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class JoinSeedNodeProcess extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.cluster;JoinSeedNodeProcess">JoinSeedNodeProcess</a><a href="#akka.cluster;JoinSeedNodeProcess" title="akka.cluster.JoinSeedNodeProcess" class="delimiter">(</a><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.cluster;JoinSeedNodeProcess.seedNodes">seedNodes</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._
  <span class="keyword">import</span> <a href="#akka.cluster.ClusterUserAction" title="akka.cluster.ClusterUserAction.type">ClusterUserAction</a>.JoinTo

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Address" id="akka.cluster;JoinSeedNodeProcess.selfAddress">selfAddress</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a>

  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;JoinSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster;JoinSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="=&gt; akka.actor.Address">head</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;JoinSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Join seed node should not be done&quot;)" class="string">&quot;Join seed node should not be done&quot;</span><span class="delimiter">)</span>

  <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Cluster.scala.html#akka.cluster;Cluster.settings" title="=&gt; akka.cluster.ClusterSettings">settings</a>.<a href="ClusterSettings.scala.html#akka.cluster;ClusterSettings.SeedNodeTimeout" title="=&gt; scala.concurrent.duration.FiniteDuration">SeedNodeTimeout</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;JoinSeedNodeProcess.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;JoinSeedNodeProcess.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;JoinSeedNodeProcess.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a> ⇒
      <span class="comment">// send InitJoin to all seed nodes (except myself)</span>
      <a href="#akka.cluster;JoinSeedNodeProcess.seedNodes" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">seedNodes</a>.<span title="(pf: PartialFunction[akka.actor.Address,akka.actor.ActorSelection])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[akka.actor.Address],akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]])scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.actor.Address,akka.actor.ActorSelection] with Serializable" id="akka.cluster;JoinSeedNodeProcess.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.actor.Address" id="akka.cluster;JoinSeedNodeProcess.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.a">a</a> <span class="keyword">if</span> <a href="#akka.cluster;JoinSeedNodeProcess.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.a" title="akka.actor.Address">a</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster;JoinSeedNodeProcess.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(271eeb39be)" title="(path: String)akka.actor.ActorSelection">actorSelection</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.parent" title="=&gt; akka.actor.ActorRef">parent</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><a href="#akka.cluster;JoinSeedNodeProcess.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.a" title="akka.actor.Address">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span title="(f: akka.actor.ActorSelection =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection">_</a> <a href="../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.InitJoin.readResolve" title="akka.cluster.InternalClusterAction.InitJoin.type">InitJoin</a> <span class="delimiter">}</span>
    <span class="keyword">case</span> InitJoinAck<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.cluster;JoinSeedNodeProcess.receive;$anonfun.isDefinedAt.address">address</a><span class="delimiter">)</span> ⇒
      <span class="comment">// first InitJoinAck reply</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.ClusterUserAction.JoinTo.readResolve" title="(address: akka.actor.Address)akka.cluster.ClusterUserAction.JoinTo">JoinTo</a><span class="delimiter">(</span><a href="#akka.cluster;JoinSeedNodeProcess.receive;$anonfun.isDefinedAt.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.cluster;JoinSeedNodeProcess.done" title="=&gt; akka.actor.Actor.Receive">done</a><span class="delimiter">)</span>
    <span class="keyword">case</span> InitJoinNack<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="comment">// that seed was uninitialized</span>
    <span class="keyword">case</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒
      <span class="comment">// no InitJoinAck received, try again</span>
      <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster.InternalClusterAction.JoinSeedNode.readResolve" title="akka.cluster.InternalClusterAction.JoinSeedNode.type">JoinSeedNode</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.cluster;JoinSeedNodeProcess.done">done</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;JoinSeedNodeProcess.done;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> InitJoinAck<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="comment">// already received one, skip rest</span>
    <span class="keyword">case</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 *
 * The supplied callback will be run, once, when current cluster member is `Up`.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class OnMemberUpListener extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.cluster;OnMemberUpListener">OnMemberUpListener</a><a href="#akka.cluster;OnMemberUpListener" title="akka.cluster.OnMemberUpListener" class="delimiter">(</a><a title="Runnable" id="akka.cluster;OnMemberUpListener.callback">callback</a>: <span title="Runnable">Runnable</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
  <span class="keyword">val</span> <a title="akka.cluster.Cluster" id="akka.cluster;OnMemberUpListener.cluster">cluster</a> = <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  <span class="comment">// subscribe to MemberUp, re-subscribe when restart</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;OnMemberUpListener.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.cluster;OnMemberUpListener.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.subscribe(6cfb44d410)" title="(subscriber: akka.actor.ActorRef, to: Class[_]*)Unit">subscribe</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.cluster.ClusterEvent.MemberUp](classOf[akka.cluster.ClusterEvent$$MemberUp])" class="delimiter">[</span>MemberUp<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;OnMemberUpListener.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.cluster;OnMemberUpListener.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;OnMemberUpListener.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;OnMemberUpListener.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;OnMemberUpListener.receive;$anonfun.isDefinedAt.state">state</a>: <a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.receive;$anonfun.isDefinedAt.state" title="akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(p: akka.cluster.Member =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.isSelfUp" title="(m: akka.cluster.Member)Boolean">isSelfUp</a><span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.receive;$anonfun.applyOrElse.$anonfun.x$17" title="akka.cluster.Member">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.cluster;OnMemberUpListener.done" title="()Unit">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> MemberUp<span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;OnMemberUpListener.receive;$anonfun.isDefinedAt.m">m</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.isSelfUp" title="(m: akka.cluster.Member)Boolean">isSelfUp</a><span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.receive;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.cluster;OnMemberUpListener.done" title="()Unit">done</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;OnMemberUpListener.done">done</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="#akka.cluster;OnMemberUpListener.callback" title="Runnable">callback</a>.<span title="()Unit">run</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#akka.cluster;OnMemberUpListener.done.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="akka.cluster;OnMemberUpListener.done.e">e</a><span class="delimiter">)</span> ⇒ <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.error(134e35740d)" title="(cause: Throwable, template: String, arg1: Any)Unit">error</a><span class="delimiter">(</span><a href="#akka.cluster;OnMemberUpListener.done.e" title="Throwable">e</a>, <span title="String(&quot;OnMemberUp callback failed with [{}]&quot;)" class="string">&quot;OnMemberUp callback failed with [{}]&quot;</span>, <a href="#akka.cluster;OnMemberUpListener.done.e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(m: akka.cluster.Member)Boolean" id="akka.cluster;OnMemberUpListener.isSelfUp">isSelfUp</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster;OnMemberUpListener.isSelfUp.m">m</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#akka.cluster;OnMemberUpListener.isSelfUp.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.cluster;OnMemberUpListener.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="Cluster.scala.html#akka.cluster;Cluster.selfUniqueAddress" title="=&gt; akka.cluster.UniqueAddress">selfUniqueAddress</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster;OnMemberUpListener.isSelfUp.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="Member.scala.html#akka.cluster.MemberStatus.Up" title="akka.cluster.MemberStatus.Up.type">Up</a>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class GossipStats extends AnyRef with Product with Serializable" id="akka.cluster.GossipStats.readResolve">GossipStats</a><a href="#akka.cluster.GossipStats.readResolve" title="Product" class="delimiter">(</a>
  <a title="Long" id="akka.cluster.GossipStats.<init>$default$1">receivedGossipCount</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span>,
  <a title="Long" id="akka.cluster.GossipStats.<init>$default$2">mergeCount</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span>,
  <a title="Long" id="akka.cluster.GossipStats.<init>$default$3">sameCount</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span>,
  <a title="Long" id="akka.cluster.GossipStats.<init>$default$4">newerCount</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span>,
  <a title="Long" id="akka.cluster.GossipStats.<init>$default$5">olderCount</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="()akka.cluster.GossipStats" id="akka.cluster;GossipStats.incrementMergeCount">incrementMergeCount</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> =
    <a href="#akka.cluster.GossipStats.<init>$default$3" title="Long" id="akka.cluster;GossipStats.incrementMergeCount.x$38">copy</a><span class="delimiter">(</span>mergeCount = <a href="#akka.cluster.GossipStats.<init>$default$2" title="=&gt; Long">mergeCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementMergeCount.x$34">+</a> <span title="Int(1)" class="int">1</span>, receivedGossipCount = <a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementMergeCount.x$35">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()akka.cluster.GossipStats" id="akka.cluster;GossipStats.incrementSameCount">incrementSameCount</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> =
    <a href="#akka.cluster.GossipStats.<init>$default$2" title="Long" id="akka.cluster;GossipStats.incrementSameCount.x$43">copy</a><span class="delimiter">(</span>sameCount = <a href="#akka.cluster.GossipStats.<init>$default$3" title="=&gt; Long">sameCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementSameCount.x$39">+</a> <span title="Int(1)" class="int">1</span>, receivedGossipCount = <a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementSameCount.x$40">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()akka.cluster.GossipStats" id="akka.cluster;GossipStats.incrementNewerCount">incrementNewerCount</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> =
    <a href="#akka.cluster.GossipStats.<init>$default$2" title="Long" id="akka.cluster;GossipStats.incrementNewerCount.x$48">copy</a><span class="delimiter">(</span>newerCount = <a href="#akka.cluster.GossipStats.<init>$default$4" title="=&gt; Long">newerCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementNewerCount.x$44">+</a> <span title="Int(1)" class="int">1</span>, receivedGossipCount = <a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementNewerCount.x$45">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()akka.cluster.GossipStats" id="akka.cluster;GossipStats.incrementOlderCount">incrementOlderCount</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> =
    <a href="#akka.cluster.GossipStats.<init>$default$2" title="Long" id="akka.cluster;GossipStats.incrementOlderCount.x$53">copy</a><span class="delimiter">(</span>olderCount = <a href="#akka.cluster.GossipStats.<init>$default$5" title="=&gt; Long">olderCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementOlderCount.x$49">+</a> <span title="Int(1)" class="int">1</span>, receivedGossipCount = <a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <a title="Long" id="akka.cluster;GossipStats.incrementOlderCount.x$50">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(that: akka.cluster.GossipStats)akka.cluster.GossipStats" id="akka.cluster;GossipStats.:+">:+</a><span class="delimiter">(</span><a title="akka.cluster.GossipStats" id="akka.cluster;GossipStats.:+.that">that</a>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> = <span class="delimiter">{</span>
    <a href="#akka.cluster.GossipStats.readResolve" title="(receivedGossipCount: Long, mergeCount: Long, sameCount: Long, newerCount: Long, olderCount: Long)akka.cluster.GossipStats">GossipStats</a><span class="delimiter">(</span>
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <span title="(x: Long)Long">+</span> <a href="#akka.cluster;GossipStats.:+.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$2" title="=&gt; Long">mergeCount</a> <span title="(x: Long)Long">+</span> <a href="#akka.cluster;GossipStats.:+.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$2" title="=&gt; Long">mergeCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$3" title="=&gt; Long">sameCount</a> <span title="(x: Long)Long">+</span> <a href="#akka.cluster;GossipStats.:+.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$3" title="=&gt; Long">sameCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$4" title="=&gt; Long">newerCount</a> <span title="(x: Long)Long">+</span> <a href="#akka.cluster;GossipStats.:+.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$4" title="=&gt; Long">newerCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$5" title="=&gt; Long">olderCount</a> <span title="(x: Long)Long">+</span> <a href="#akka.cluster;GossipStats.:+.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$5" title="=&gt; Long">olderCount</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(that: akka.cluster.GossipStats)akka.cluster.GossipStats" id="akka.cluster;GossipStats.:-">:-</a><span class="delimiter">(</span><a title="akka.cluster.GossipStats" id="akka.cluster;GossipStats.:-.that">that</a>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a><span class="delimiter">)</span>: <a href="#akka.cluster.GossipStats.readResolve" title="akka.cluster.GossipStats">GossipStats</a> = <span class="delimiter">{</span>
    <a href="#akka.cluster.GossipStats.readResolve" title="(receivedGossipCount: Long, mergeCount: Long, sameCount: Long, newerCount: Long, olderCount: Long)akka.cluster.GossipStats">GossipStats</a><span class="delimiter">(</span>
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a> <span title="(x: Long)Long">-</span> <a href="#akka.cluster;GossipStats.:-.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$1" title="=&gt; Long">receivedGossipCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$2" title="=&gt; Long">mergeCount</a> <span title="(x: Long)Long">-</span> <a href="#akka.cluster;GossipStats.:-.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$2" title="=&gt; Long">mergeCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$3" title="=&gt; Long">sameCount</a> <span title="(x: Long)Long">-</span> <a href="#akka.cluster;GossipStats.:-.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$3" title="=&gt; Long">sameCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$4" title="=&gt; Long">newerCount</a> <span title="(x: Long)Long">-</span> <a href="#akka.cluster;GossipStats.:-.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$4" title="=&gt; Long">newerCount</a>,
      <a href="#akka.cluster.GossipStats.readResolve" title="GossipStats.this.type" class="keyword">this</a>.<a href="#akka.cluster.GossipStats.<init>$default$5" title="=&gt; Long">olderCount</a> <span title="(x: Long)Long">-</span> <a href="#akka.cluster;GossipStats.:-.that" title="akka.cluster.GossipStats">that</a>.<a href="#akka.cluster.GossipStats.<init>$default$5" title="=&gt; Long">olderCount</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class VectorClockStats extends AnyRef with Product with Serializable" id="akka.cluster.VectorClockStats.readResolve">VectorClockStats</a><a href="#akka.cluster.VectorClockStats.readResolve" title="Product" class="delimiter">(</a>
  <a title="Int" id="akka.cluster.VectorClockStats.<init>$default$1">versionSize</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>,
  <a title="Int" id="akka.cluster.VectorClockStats.<init>$default$2">seenLatest</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>


        </pre>
    </body>
</html>
