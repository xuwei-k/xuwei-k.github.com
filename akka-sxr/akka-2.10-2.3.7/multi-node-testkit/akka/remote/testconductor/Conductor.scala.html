<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>multi-node-testkit/akka/remote/testconductor/Conductor.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.remote.testconductor

<span class="keyword">import</span> <span title="language.type">language</span>.postfixOps
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> Actor, ActorRef, ActorSystem, LoggingFSM, Props, NoSerializationVerificationNeeded <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection" title="akka.remote.testconductor.RemoteConnection.type">RemoteConnection</a>.getAddrString
<span class="keyword">import</span> <a href="TestConductorProtocol.java.html#akka.remote.testconductor.TestConductorProtocol" title="akka.remote.testconductor.TestConductorProtocol.type">TestConductorProtocol</a>._
<span class="keyword">import</span> org.jboss.netty.channel.<span class="delimiter">{</span> Channel, SimpleChannelUpstreamHandler, ChannelHandlerContext, ChannelStateEvent, MessageEvent <span class="delimiter">}</span>
<span class="keyword">import</span> com.typesafe.config.ConfigFactory
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> akka.pattern.ask
<span class="keyword">import</span> scala.concurrent.Await
<span class="keyword">import</span> akka.event.<span class="delimiter">{</span> LoggingAdapter, Logging <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.NoStackTrace
<span class="keyword">import</span> akka.event.LoggingReceive
<span class="keyword">import</span> java.net.InetSocketAddress
<span class="keyword">import</span> scala.concurrent.Future
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> OneForOneStrategy, SupervisorStrategy, Status, Address, PoisonPill <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap
<span class="keyword">import</span> java.util.concurrent.<span title="java.util.concurrent.TimeUnit.type">TimeUnit</span>.MILLISECONDS
<span class="keyword">import</span> akka.util.<span class="delimiter">{</span> Timeout <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.classTag
<span class="keyword">import</span> akka.ConfigurationException
<span class="keyword">import</span> akka.AkkaException
<span class="keyword">import</span> akka.remote.transport.<a href="../../../../remote/akka/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter" title="akka.remote.transport.ThrottlerTransportAdapter.type">ThrottlerTransportAdapter</a>.Direction
<span class="keyword">import</span> akka.actor.Deploy

<span class="comment">/**
 * The conductor is the one orchestrating the test: it governs the
 * [[akka.remote.testconductor.Controller]]’s port to which all
 * [[akka.remote.testconductor.Player]]s connect, it issues commands to their
 * [[akka.remote.testconductor.NetworkFailureInjector]] and provides support
 * for barriers using the [[akka.remote.testconductor.BarrierCoordinator]].
 * All of this is bundled inside the [[akka.remote.testconductor.TestConductorExt]]
 * extension.
 */</span>
<span class="keyword">trait</span> <a title="trait Conductor extends AnyRef" id="akka.remote.testconductor;Conductor">Conductor</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: TestConductorExt ⇒

  <span class="keyword">import</span> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>._

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Conductor._controller_=">_controller</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.remote.testconductor;Conductor.controller">controller</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.remote.testconductor;Conductor._controller_=" title="=&gt; akka.actor.ActorRef">_controller</a> <span title="akka.actor.ActorRef" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;TestConductorServer was not started&quot;)" class="string">&quot;TestConductorServer was not started&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Conductor.controller.x">x</a>    ⇒ <a href="#akka.remote.testconductor;Conductor.controller.x" title="akka.actor.ActorRef">x</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Start the [[akka.remote.testconductor.Controller]], which in turn will
   * bind to a TCP port as specified in the `akka.testconductor.port` config
   * property, where 0 denotes automatic allocation. Since the latter is
   * actually preferred, a `Future[Int]` is returned which will be completed
   * with the port number actually chosen, so that this can then be communicated
   * to the players for their proper start-up.
   *
   * This method also invokes [[akka.remote.testconductor.Player]].startClient,
   * since it is expected that the conductor participates in barriers for
   * overall coordination. The returned Future will only be completed once the
   * client’s start-up finishes, which in fact waits for all other players to
   * connect.
   *
   * @param participants gives the number of participants which shall connect
   * before any of their startClient() operations complete.
   */</span>
  <span class="keyword">def</span> <a title="(participants: Int, name: akka.remote.testconductor.RoleName, controllerPort: java.net.InetSocketAddress)scala.concurrent.Future[java.net.InetSocketAddress]" id="akka.remote.testconductor;Conductor.startController">startController</a><span class="delimiter">(</span><a title="Int" id="akka.remote.testconductor;Conductor.startController.participants">participants</a>: <span title="Int">Int</span>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.startController.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;Conductor.startController.controllerPort">controllerPort</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[java.net.InetSocketAddress]">Future</span><span class="delimiter">[</span>InetSocketAddress<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor._controller_=" title="=&gt; akka.actor.ActorRef">_controller</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;TestConductorServer was already started&quot;)" class="string">&quot;TestConductorServer was already started&quot;</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;Conductor._controller_=" title="(x$1: akka.actor.ActorRef)Unit">_controller</a> = <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.testconductor.Controller](classOf[akka.remote.testconductor.Controller])" class="delimiter">[</span>Controller<span class="delimiter">]</span>, <a href="#akka.remote.testconductor;Conductor.startController.participants" title="Int">participants</a>, <a href="#akka.remote.testconductor;Conductor.startController.controllerPort" title="java.net.InetSocketAddress">controllerPort</a><span class="delimiter">)</span>, <span title="String(&quot;controller&quot;)" class="string">&quot;controller&quot;</span><span class="delimiter">)</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.BarrierTimeout
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.dispatcher
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.remote.testconductor.Controller.GetSockAddr.readResolve" title="akka.remote.testconductor.Controller.GetSockAddr.type">GetSockAddr</a> <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatcher" title="(f: Any =&gt; scala.concurrent.Future[java.net.InetSocketAddress])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[java.net.InetSocketAddress]">flatMap</a> <a href="#akka.remote.testconductor;Conductor.startController.$anonfun.x0$1" title="scala.concurrent.Future[java.net.InetSocketAddress]" class="delimiter">{</a> <span class="keyword">case</span> <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;Conductor.startController.$anonfun.sockAddr">sockAddr</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span> ⇒ <a href="Player.scala.html#akka.remote.testconductor;Player.startClient" title="(name: akka.remote.testconductor.RoleName, controllerAddr: java.net.InetSocketAddress)scala.concurrent.Future[akka.remote.testconductor.Done]">startClient</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.startController.name" title="akka.remote.testconductor.RoleName">name</a>, <a href="#akka.remote.testconductor;Conductor.startController.$anonfun.sockAddr" title="java.net.InetSocketAddress">sockAddr</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatcher" title="(f: akka.remote.testconductor.Done =&gt; java.net.InetSocketAddress)(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[java.net.InetSocketAddress]">map</a> <span class="delimiter">(</span><a title="akka.remote.testconductor.Done" id="akka.remote.testconductor;Conductor.startController.$anonfun.$anonfun.x$1">_</a> ⇒ <a href="#akka.remote.testconductor;Conductor.startController.$anonfun.sockAddr" title="java.net.InetSocketAddress">sockAddr</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Obtain the port to which the controller’s socket is actually bound. This
   * will deviate from the configuration in `akka.testconductor.port` in case
   * that was given as zero.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.Future[java.net.InetSocketAddress]" id="akka.remote.testconductor;Conductor.sockAddr">sockAddr</a>: <span title="scala.concurrent.Future[java.net.InetSocketAddress]">Future</span><span class="delimiter">[</span>InetSocketAddress<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.remote.testconductor.Controller.GetSockAddr.readResolve" title="akka.remote.testconductor.Controller.GetSockAddr.type">GetSockAddr</a> <span title="(implicit tag: scala.reflect.ClassTag[java.net.InetSocketAddress])scala.concurrent.Future[java.net.InetSocketAddress]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[java.net.InetSocketAddress])scala.reflect.ClassTag[java.net.InetSocketAddress]" class="delimiter">[</span><span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Make the remoting pipeline on the node throttle data sent to or received
   * from the given remote peer. Throttling works by delaying packet submission
   * within the netty pipeline until the packet would have been completely sent
   * according to the given rate, the previous packet completion and the current
   * packet length. In case of large packets they are split up if the calculated
   * send pause would exceed `akka.testconductor.packet-split-threshold`
   * (roughly). All of this uses the system’s scheduler, which is not
   * terribly precise and will execute tasks later than they are schedule (even
   * on average), but that is countered by using the actual execution time for
   * determining how much to send, leading to the correct output rate, but with
   * increased latency.
   *
   * ====Note====
   * To use this feature you must activate the failure injector and throttler
   * transport adapters by specifying `testTransport(on = true)` in your MultiNodeConfig.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param target is the symbolic name of the other node to which connectivity shall be throttled
   * @param direction can be either `Direction.Send`, `Direction.Receive` or `Direction.Both`
   * @param rateMBit is the maximum data rate in MBit
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, rateMBit: Double)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.throttle">throttle</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.throttle.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.throttle.target">target</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.transport.ThrottlerTransportAdapter.Direction" id="akka.remote.testconductor;Conductor.throttle.direction">direction</a>: <a href="../../../../remote/akka/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter;Direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">Direction</a>, <a title="Double" id="akka.remote.testconductor;Conductor.throttle.rateMBit">rateMBit</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="#akka.remote.testconductor;Conductor.requireTestConductorTranport" title="()Unit">requireTestConductorTranport</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Throttle" title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, rateMBit: Float)akka.remote.testconductor.Throttle">Throttle</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.throttle.node" title="akka.remote.testconductor.RoleName">node</a>, <a href="#akka.remote.testconductor;Conductor.throttle.target" title="akka.remote.testconductor.RoleName">target</a>, <a href="#akka.remote.testconductor;Conductor.throttle.direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">direction</a>, <a href="#akka.remote.testconductor;Conductor.throttle.rateMBit" title="Double">rateMBit</a>.<span title="=&gt; Float">toFloat</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Switch the Netty pipeline of the remote support into blackhole mode for
   * sending and/or receiving: it will just drop all messages right before
   * submitting them to the Socket or right after receiving them from the
   * Socket.
   *
   * ====Note====
   * To use this feature you must activate the failure injector and throttler
   * transport adapters by specifying `testTransport(on = true)` in your MultiNodeConfig.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param target is the symbolic name of the other node to which connectivity shall be impeded
   * @param direction can be either `Direction.Send`, `Direction.Receive` or `Direction.Both`
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.blackhole">blackhole</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.blackhole.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.blackhole.target">target</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.transport.ThrottlerTransportAdapter.Direction" id="akka.remote.testconductor;Conductor.blackhole.direction">direction</a>: <a href="../../../../remote/akka/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter;Direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">Direction</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> =
    <a href="#akka.remote.testconductor;Conductor.throttle" title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, rateMBit: Double)scala.concurrent.Future[akka.remote.testconductor.Done]">throttle</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.blackhole.node" title="akka.remote.testconductor.RoleName">node</a>, <a href="#akka.remote.testconductor;Conductor.blackhole.target" title="akka.remote.testconductor.RoleName">target</a>, <a href="#akka.remote.testconductor;Conductor.blackhole.direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">direction</a>, <span title="Double(0.0)" class="float">0f</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testconductor;Conductor.requireTestConductorTranport">requireTestConductorTranport</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.transport" title="=&gt; akka.remote.RemoteTransport">transport</a>.<a href="../../../../remote/akka/remote/RemoteTransport.scala.html#akka.remote;RemoteTransport.defaultAddress" title="=&gt; akka.actor.Address">defaultAddress</a>.<a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address.protocol" title="=&gt; String">protocol</a>.<span title="(x$1: CharSequence)Boolean">contains</span><span class="delimiter">(</span><span title="String(&quot;.trttl.gremlin.&quot;)" class="string">&quot;.trttl.gremlin.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <a href="../../../../actor/akka/AkkaException.scala.html#akka;ConfigurationException.<init>(3b0f220dea)" title="(msg: String)akka.ConfigurationException" class="keyword">new</a> <a href="../../../../actor/akka/AkkaException.scala.html#akka;ConfigurationException" title="akka.ConfigurationException">ConfigurationException</a><span class="delimiter">(</span><span class="string">&quot;To use this feature you must activate the failure injector adapters &quot;</span> <span title="String(&quot;To use this feature you must activate the failure injector adapters (trttl, gremlin) by specifying `testTransport(on = true)` in your MultiNodeConfig.&quot;)">+</span>
        <span class="string">&quot;(trttl, gremlin) by specifying `testTransport(on = true)` in your MultiNodeConfig.&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Switch the Netty pipeline of the remote support into pass through mode for
   * sending and/or receiving.
   *
   * ====Note====
   * To use this feature you must activate the failure injector and throttler
   * transport adapters by specifying `testTransport(on = true)` in your MultiNodeConfig.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param target is the symbolic name of the other node to which connectivity shall be impeded
   * @param direction can be either `Direction.Send`, `Direction.Receive` or `Direction.Both`
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.passThrough">passThrough</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.passThrough.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.passThrough.target">target</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.transport.ThrottlerTransportAdapter.Direction" id="akka.remote.testconductor;Conductor.passThrough.direction">direction</a>: <a href="../../../../remote/akka/remote/transport/ThrottlerTransportAdapter.scala.html#akka.remote.transport.ThrottlerTransportAdapter;Direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">Direction</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> =
    <a href="#akka.remote.testconductor;Conductor.throttle" title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, rateMBit: Double)scala.concurrent.Future[akka.remote.testconductor.Done]">throttle</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.passThrough.node" title="akka.remote.testconductor.RoleName">node</a>, <a href="#akka.remote.testconductor;Conductor.passThrough.target" title="akka.remote.testconductor.RoleName">target</a>, <a href="#akka.remote.testconductor;Conductor.passThrough.direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">direction</a>, -<span title="Double(-1.0)" class="float">1f</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Tell the remote support to shutdown the connection to the given remote
   * peer. It works regardless of whether the recipient was initiator or
   * responder.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param target is the symbolic name of the other node to which connectivity shall be impeded
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.disconnect">disconnect</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.disconnect.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.disconnect.target">target</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Disconnect" title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, abort: Boolean)akka.remote.testconductor.Disconnect">Disconnect</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.disconnect.node" title="akka.remote.testconductor.RoleName">node</a>, <a href="#akka.remote.testconductor;Conductor.disconnect.target" title="akka.remote.testconductor.RoleName">target</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Tell the remote support to TCP_RESET the connection to the given remote
   * peer. It works regardless of whether the recipient was initiator or
   * responder.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param target is the symbolic name of the other node to which connectivity shall be impeded
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.abort">abort</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.abort.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.abort.target">target</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Disconnect" title="(node: akka.remote.testconductor.RoleName, target: akka.remote.testconductor.RoleName, abort: Boolean)akka.remote.testconductor.Disconnect">Disconnect</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.abort.node" title="akka.remote.testconductor.RoleName">node</a>, <a href="#akka.remote.testconductor;Conductor.abort.target" title="akka.remote.testconductor.RoleName">target</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Tell the remote node to shut itself down using System.exit with the given
   * exitValue. The node will also be removed, so that the remaining nodes may still
   * pass subsequent barriers.
   *
   * @param node is the symbolic name of the node which is to be affected
   * @param exitValue is the return code which shall be given to System.exit
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, exitValue: Int)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.exit">exit</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.exit.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="Int" id="akka.remote.testconductor;Conductor.exit.exitValue">exitValue</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.dispatcher
    <span class="comment">// the recover is needed to handle ClientDisconnectedException exception,</span>
    <span class="comment">// which is normal during shutdown</span>
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Terminate" title="(node: akka.remote.testconductor.RoleName, shutdownOrExit: Either[Boolean,Int])akka.remote.testconductor.Terminate">Terminate</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.exit.node" title="akka.remote.testconductor.RoleName">node</a>, <span title="(b: Int)scala.util.Right[Nothing,Int]">Right</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.exit.exitValue" title="Int">exitValue</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span> <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatcher" title="(pf: PartialFunction[Throwable,akka.remote.testconductor.Done])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.remote.testconductor.Done]">recover</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,akka.remote.testconductor.Done] with Serializable" id="akka.remote.testconductor;Conductor.exit;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> _: <a href="#akka.remote.testconductor.Controller;ClientDisconnectedException" title="akka.remote.testconductor.Controller.ClientDisconnectedException">ClientDisconnectedException</a> ⇒ <a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Tell the actor system at the remote node to shut itself down. The node will also be
   * removed, so that the remaining nodes may still pass subsequent barriers.
   *
   * @param node is the symbolic name of the node which is to be affected
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.shutdown(ff7d4b3145)">shutdown</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.shutdown(ff7d4b3145).node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <a href="#akka.remote.testconductor;Conductor.shutdown(ef60d849c0)" title="(node: akka.remote.testconductor.RoleName, abort: Boolean)scala.concurrent.Future[akka.remote.testconductor.Done]">shutdown</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.shutdown(ff7d4b3145).node" title="akka.remote.testconductor.RoleName">node</a>, abort = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Tell the actor system at the remote node to shut itself down without
   * awaiting termination of remote-deployed children. The node will also be
   * removed, so that the remaining nodes may still pass subsequent barriers.
   *
   * @param node is the symbolic name of the node which is to be affected
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName, abort: Boolean)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.shutdown(ef60d849c0)">shutdown</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.shutdown(ef60d849c0).node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="Boolean" id="akka.remote.testconductor;Conductor.shutdown(ef60d849c0).abort">abort</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.system" title="=&gt; akka.actor.ExtendedActorSystem">system</a>.dispatcher
    <span class="comment">// the recover is needed to handle ClientDisconnectedException exception,</span>
    <span class="comment">// which is normal during shutdown</span>
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Terminate" title="(node: akka.remote.testconductor.RoleName, shutdownOrExit: Either[Boolean,Int])akka.remote.testconductor.Terminate">Terminate</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.shutdown(ef60d849c0).node" title="akka.remote.testconductor.RoleName">node</a>, <span title="(a: Boolean)scala.util.Left[Boolean,Nothing]">Left</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.shutdown(ef60d849c0).abort" title="Boolean">abort</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span> <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.dispatcher" title="(pf: PartialFunction[Throwable,akka.remote.testconductor.Done])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[akka.remote.testconductor.Done]">recover</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,akka.remote.testconductor.Done] with Serializable" id="akka.remote.testconductor;Conductor.shutdown(ef60d849c0);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> _: <a href="#akka.remote.testconductor.Controller;ClientDisconnectedException" title="akka.remote.testconductor.Controller.ClientDisconnectedException">ClientDisconnectedException</a> ⇒ <a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Obtain the list of remote host names currently registered.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.Future[Iterable[akka.remote.testconductor.RoleName]]" id="akka.remote.testconductor;Conductor.getNodes">getNodes</a>: <span title="scala.concurrent.Future[Iterable[akka.remote.testconductor.RoleName]]">Future</span><span class="delimiter">[</span>Iterable<span class="delimiter">[</span>RoleName<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.remote.testconductor.Controller.GetNodes.readResolve" title="akka.remote.testconductor.Controller.GetNodes.type">GetNodes</a> <span title="(implicit tag: scala.reflect.ClassTag[Iterable[akka.remote.testconductor.RoleName]])scala.concurrent.Future[Iterable[akka.remote.testconductor.RoleName]]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[Iterable[akka.remote.testconductor.RoleName]])scala.reflect.ClassTag[Iterable[akka.remote.testconductor.RoleName]]" class="delimiter">[</span><span title="Iterable[akka.remote.testconductor.RoleName]">Iterable</span><span class="delimiter">[</span>RoleName<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Remove a remote host from the list, so that the remaining nodes may still
   * pass subsequent barriers. This must be done before the client connection
   * breaks down in order to affect an “orderly” removal (i.e. without failing
   * present and future barriers).
   *
   * @param node is the symbolic name of the node which is to be removed
   */</span>
  <span class="keyword">def</span> <a title="(node: akka.remote.testconductor.RoleName)scala.concurrent.Future[akka.remote.testconductor.Done]" id="akka.remote.testconductor;Conductor.removeNode">removeNode</a><span class="delimiter">(</span><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;Conductor.removeNode.node">node</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>: <span title="scala.concurrent.Future[akka.remote.testconductor.Done]">Future</span><span class="delimiter">[</span>Done<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="Conductor.this.Settings.type">Settings</a>.QueryTimeout
    <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="DataTypes.scala.html#akka.remote.testconductor;Remove" title="(node: akka.remote.testconductor.RoleName)akka.remote.testconductor.Remove">Remove</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Conductor.removeNode.node" title="akka.remote.testconductor.RoleName">node</a><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.concurrent.Future[akka.remote.testconductor.Done]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.remote.testconductor.Done])scala.reflect.ClassTag[akka.remote.testconductor.Done]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * This handler is installed at the end of the controller’s netty pipeline. Its only
 * purpose is to dispatch incoming messages to the right ServerFSM actor. There is
 * one shared instance of this class for all connections accepted by one Controller.
 *
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ConductorHandler extends org.jboss.netty.channel.SimpleChannelUpstreamHandler" id="akka.remote.testconductor;ConductorHandler">ConductorHandler</a><a href="#akka.remote.testconductor;ConductorHandler" title="akka.remote.testconductor.ConductorHandler" class="delimiter">(</a><a title="akka.util.Timeout" id="akka.remote.testconductor;ConductorHandler._createTimeout">_createTimeout</a>: <a href="../../../../actor/akka/util/Timeout.scala.html#akka.util;Timeout" title="akka.util.Timeout">Timeout</a>, <a title="akka.actor.ActorRef" id="akka.remote.testconductor;ConductorHandler.controller">controller</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.event.LoggingAdapter" id="akka.remote.testconductor;ConductorHandler.log">log</a>: <a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter" title="akka.event.LoggingAdapter">LoggingAdapter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="org.jboss.netty.channel.SimpleChannelUpstreamHandler">SimpleChannelUpstreamHandler</span> <span class="delimiter">{</span>

  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="akka.util.Timeout" id="akka.remote.testconductor;ConductorHandler.createTimeout">createTimeout</a> = <a href="#akka.remote.testconductor;ConductorHandler._createTimeout" title="akka.util.Timeout">_createTimeout</a>
  <span class="keyword">val</span> <a title="java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]" id="akka.remote.testconductor;ConductorHandler.clients">clients</a> = <span title="()java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]" class="keyword">new</span> <span title="java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]">ConcurrentHashMap</span><span class="delimiter">[</span>Channel, ActorRef<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;ConductorHandler.channelConnected">channelConnected</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;ConductorHandler.channelConnected.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;ConductorHandler.channelConnected.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;ConductorHandler.channelConnected.channel">channel</a> = <a href="#akka.remote.testconductor;ConductorHandler.channelConnected.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;ConductorHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;connection from {}&quot;)" class="string">&quot;connection from {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelConnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;ConductorHandler.channelConnected.fsm">fsm</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[akka.actor.ActorRef], atMost: scala.concurrent.duration.Duration)akka.actor.ActorRef">result</span><span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">controller</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>.<a href="#akka.remote.testconductor.Controller.CreateServerFSM.readResolve" title="(channel: org.jboss.netty.channel.Channel)akka.remote.testconductor.Controller.CreateServerFSM">CreateServerFSM</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelConnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span> <span title="(implicit tag: scala.reflect.ClassTag[akka.actor.ActorRef])scala.concurrent.Future[akka.actor.ActorRef]">mapTo</span> <span title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</span><span title="(implicit ctag: scala.reflect.ClassTag[akka.actor.ActorRef])scala.reflect.ClassTag[akka.actor.ActorRef]" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;ConductorHandler.clients" title="=&gt; java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]">clients</a>.<span title="(x$1: org.jboss.netty.channel.Channel, x$2: akka.actor.ActorRef)akka.actor.ActorRef">put</span><span title="Unit" class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelConnected.channel" title="org.jboss.netty.channel.Channel">channel</a>, <a href="#akka.remote.testconductor;ConductorHandler.channelConnected.fsm" title="akka.actor.ActorRef">fsm</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.ChannelStateEvent)Unit" id="akka.remote.testconductor;ConductorHandler.channelDisconnected">channelDisconnected</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.ChannelStateEvent" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.event">event</a>: <span title="org.jboss.netty.channel.ChannelStateEvent">ChannelStateEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.channel">channel</a> = <a href="#akka.remote.testconductor;ConductorHandler.channelDisconnected.event" title="org.jboss.netty.channel.ChannelStateEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;ConductorHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;disconnect from {}&quot;)" class="string">&quot;disconnect from {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelDisconnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.fsm">fsm</a> = <a href="#akka.remote.testconductor;ConductorHandler.clients" title="=&gt; java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]">clients</a>.<span title="(x$1: Any)akka.actor.ActorRef">get</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelDisconnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.qual$1">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.x$23">!</a> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>.<a href="#akka.remote.testconductor.Controller.ClientDisconnected.readResolve" title="akka.remote.testconductor.Controller.ClientDisconnected.type" id="akka.remote.testconductor;ConductorHandler.channelDisconnected.x$22">ClientDisconnected</a>
    <a href="#akka.remote.testconductor;ConductorHandler.clients" title="=&gt; java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]">clients</a>.<span title="(x$1: Any)akka.actor.ActorRef">remove</span><span title="Unit" class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.channelDisconnected.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(ctx: org.jboss.netty.channel.ChannelHandlerContext, event: org.jboss.netty.channel.MessageEvent)Unit" id="akka.remote.testconductor;ConductorHandler.messageReceived">messageReceived</a><span class="delimiter">(</span><a title="org.jboss.netty.channel.ChannelHandlerContext" id="akka.remote.testconductor;ConductorHandler.messageReceived.ctx">ctx</a>: <span title="org.jboss.netty.channel.ChannelHandlerContext">ChannelHandlerContext</span>, <a title="org.jboss.netty.channel.MessageEvent" id="akka.remote.testconductor;ConductorHandler.messageReceived.event">event</a>: <span title="org.jboss.netty.channel.MessageEvent">MessageEvent</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;ConductorHandler.messageReceived.channel">channel</a> = <a href="#akka.remote.testconductor;ConductorHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()org.jboss.netty.channel.Channel">getChannel</span>
    <a href="#akka.remote.testconductor;ConductorHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;message from {}: {}&quot;)" class="string">&quot;message from {}: {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <a href="#akka.remote.testconductor;ConductorHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()Object">getMessage</span><span class="delimiter">)</span>
    <a href="#akka.remote.testconductor;ConductorHandler.messageReceived.event" title="org.jboss.netty.channel.MessageEvent">event</a>.<span title="()Object">getMessage</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="akka.remote.testconductor.NetworkOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a> ⇒
        <a href="#akka.remote.testconductor;ConductorHandler.clients" title="=&gt; java.util.concurrent.ConcurrentHashMap[org.jboss.netty.channel.Channel,akka.actor.ActorRef]">clients</a>.<span title="(x$1: Any)akka.actor.ActorRef">get</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.remote.testconductor;ConductorHandler.messageReceived.qual$2" class="delimiter">(</a><a href="#akka.remote.testconductor;ConductorHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.remote.testconductor;ConductorHandler.messageReceived.x$25">!</a> <a title="akka.remote.testconductor.NetworkOp" id="akka.remote.testconductor;ConductorHandler.messageReceived.x$24">msg</a>
      <span class="keyword">case</span> <span title="Object">msg</span> ⇒
        <a href="#akka.remote.testconductor;ConductorHandler.log" title="akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.info(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;client {} sent garbage \'{}\', disconnecting&quot;)" class="string">&quot;client {} sent garbage '{}', disconnecting&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ConductorHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <span title="Object">msg</span><span class="delimiter">)</span>
        <a href="#akka.remote.testconductor;ConductorHandler.messageReceived.channel" title="org.jboss.netty.channel.Channel">channel</a>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.testconductor.ServerFSM.type" id="akka.remote.testconductor.ServerFSM">ServerFSM</a> <a href="#akka.remote.testconductor.ServerFSM" title="akka.remote.testconductor.ServerFSM.type" class="delimiter">{</a>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait State extends AnyRef" id="akka.remote.testconductor.ServerFSM;State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ServerFSM.Initial.productElement.x$1" title="akka.remote.testconductor.ServerFSM.Initial.type" id="akka.remote.testconductor.ServerFSM.Initial.readResolve">Initial</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ServerFSM;State" title="akka.remote.testconductor.ServerFSM.State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.ServerFSM.Ready.productElement.x$1" title="akka.remote.testconductor.ServerFSM.Ready.type" id="akka.remote.testconductor.ServerFSM.Ready.readResolve">Ready</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.ServerFSM;State" title="akka.remote.testconductor.ServerFSM.State">State</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * The server part of each client connection is represented by a ServerFSM.
 * The Initial state handles reception of the new client’s
 * [[akka.remote.testconductor.Hello]] message (which is needed for all subsequent
 * node name translations).
 *
 * In the Ready state, messages from the client are forwarded to the controller
 * and [[akka.remote.testconductor.Send]] requests are sent, but the latter is
 * treated specially: all client operations are to be confirmed by a
 * [[akka.remote.testconductor.Done]] message, and there can be only one such
 * request outstanding at a given time (i.e. a Send fails if the previous has
 * not yet been acknowledged).
 *
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ServerFSM extends AnyRef with akka.actor.Actor with akka.actor.LoggingFSM[akka.remote.testconductor.ServerFSM.State,Option[akka.actor.ActorRef]]" id="akka.remote.testconductor;ServerFSM">ServerFSM</a><a href="#akka.remote.testconductor;ServerFSM" title="akka.remote.testconductor.ServerFSM" class="delimiter">(</a><span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;ServerFSM.controller">controller</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;ServerFSM.channel">channel</a>: <span title="org.jboss.netty.channel.Channel">Channel</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;LoggingFSM" title="akka.actor.LoggingFSM[akka.remote.testconductor.ServerFSM.State,Option[akka.actor.ActorRef]]">LoggingFSM</a><span class="delimiter">[</span>ServerFSM.State, Option<span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.ServerFSM" title="akka.remote.testconductor.ServerFSM.type">ServerFSM</a>._
  <span class="keyword">import</span> akka.actor.<a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM" title="akka.actor.FSM.type">FSM</a>._
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>._

  <span class="keyword">var</span> <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor;ServerFSM.roleName_=">roleName</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a> = <span title="Null(null)" class="keyword">null</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.startWith" title="(stateName: akka.remote.testconductor.ServerFSM.State, stateData: Option[akka.actor.ActorRef], timeout: ServerFSM.this.Timeout)Unit">startWith</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ServerFSM.Initial.readResolve" title="akka.remote.testconductor.ServerFSM.Initial.type">Initial</a>, <span title="None.type">None</span><span class="delimiter">)</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.whenUnhandled" title="(stateFunction: ServerFSM.this.StateFunction)Unit">whenUnhandled</a> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ServerFSM.this.Event,ServerFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="#akka.remote.testconductor.Controller.ClientDisconnected.readResolve" title="akka.remote.testconductor.Controller.ClientDisconnected.type">ClientDisconnected</a>, Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">s</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">s</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Status" title="akka.actor.Status.type">Status</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.Status;Failure" title="(cause: Throwable)akka.actor.Status.Failure">Failure</a><span class="delimiter">(</span><span title="akka.remote.testconductor.Controller.ClientDisconnectedException" class="keyword">new</span> <a href="#akka.remote.testconductor.Controller;ClientDisconnectedException" title="akka.remote.testconductor.Controller.ClientDisconnectedException">ClientDisconnectedException</a><span class="delimiter">(</span><span title="String(&quot;client disconnected in state &quot;)" class="string">&quot;client disconnected in state &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stateName" title="=&gt; akka.remote.testconductor.ServerFSM.State">stateName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ServerFSM.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="#akka.remote.testconductor.Controller.ClientDisconnected.readResolve" title="akka.remote.testconductor.Controller.ClientDisconnected.type">ClientDisconnected</a>, <span title="None.type">None</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ServerFSM.this.State">stop</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.onTermination" title="(terminationHandler: PartialFunction[ServerFSM.this.StopEvent,Unit])Unit">onTermination</a> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ServerFSM.this.StopEvent,Unit] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> _ ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">controller</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor.Controller.ClientDisconnected.readResolve" title="(name: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.ClientDisconnected">ClientDisconnected</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.roleName_=" title="=&gt; akka.remote.testconductor.RoleName">roleName</a><span class="delimiter">)</span>
      <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ServerFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ServerFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ServerFSM.Initial.readResolve" title="akka.remote.testconductor.ServerFSM.Initial.type">Initial</a>, stateTimeout = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">10</span> <span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ServerFSM.this.Event,ServerFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>Hello<span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.name">name</a>, <a title="akka.actor.Address" id="akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.addr">addr</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="#akka.remote.testconductor;ServerFSM.roleName_=" title="(x$1: akka.remote.testconductor.RoleName)Unit">roleName</a> = <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="(name: String)akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.name" title="String">name</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">controller</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="(name: akka.remote.testconductor.RoleName, addr: akka.actor.Address, fsm: akka.actor.ActorRef)akka.remote.testconductor.Controller.NodeInfo">NodeInfo</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.roleName_=" title="=&gt; akka.remote.testconductor.RoleName">roleName</a>, <a href="#akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.addr" title="akka.actor.Address">addr</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.ServerFSM.State)ServerFSM.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ServerFSM.Ready.readResolve" title="akka.remote.testconductor.ServerFSM.Ready.type">Ready</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a title="akka.remote.testconductor.NetworkOp" id="akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.x">x</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;client {} sent no Hello in first message (instead {}), disconnecting&quot;)" class="string">&quot;client {} sent no Hello in first message (instead {}), disconnecting&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <a href="#akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.x" title="akka.remote.testconductor.NetworkOp">x</a><span class="delimiter">)</span>
      <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ServerFSM.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToClient<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;cannot send {} in state Initial&quot;)" class="string">&quot;cannot send {} in state Initial&quot;</span>, <span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.info(dc73c33c91)" title="(template: String, arg1: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;closing channel to {} because of Hello timeout&quot;)" class="string">&quot;closing channel to {} because of Hello timeout&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a>.<span title="()org.jboss.netty.channel.ChannelFuture">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ServerFSM.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.ServerFSM.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: ServerFSM.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.ServerFSM.Ready.readResolve" title="akka.remote.testconductor.ServerFSM.Ready.type">Ready</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ServerFSM.this.Event,ServerFSM.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a title="akka.remote.testconductor.Done" id="akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.d">d</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a>, Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">s</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">s</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.d" title="akka.remote.testconductor.Done">d</a>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: Option[akka.actor.ActorRef])akka.actor.FSM.State[akka.remote.testconductor.ServerFSM.State,Option[akka.actor.ActorRef]]">using</a> <span title="None.type">None</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a title="akka.remote.testconductor.ServerOp" id="akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.op">op</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;ServerOp" title="akka.remote.testconductor.ServerOp">ServerOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">controller</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;ServerFSM.<local ServerFSM>;$anonfun.isDefinedAt.op" title="akka.remote.testconductor.ServerOp">op</a>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><span title="akka.remote.testconductor.NetworkOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;NetworkOp" title="akka.remote.testconductor.NetworkOp">NetworkOp</a>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(2f488eb77c)" title="(template: String, arg1: Any, arg2: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;client {} sent unsupported message {}&quot;)" class="string">&quot;client {} sent unsupported message {}&quot;</span>, <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.getAddrString" title="(channel: org.jboss.netty.channel.Channel)String">getAddrString</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>, <span title="akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stop(65b4a2ce7c)" title="()ServerFSM.this.State">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToClient<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp with akka.remote.testconductor.UnconfirmedClientOp">msg</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;UnconfirmedClientOp" title="akka.remote.testconductor.UnconfirmedClientOp">UnconfirmedClientOp</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp with akka.remote.testconductor.UnconfirmedClientOp">msg</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToClient<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>, <span title="None.type">None</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote.testconductor;ServerFSM.channel" title="=&gt; org.jboss.netty.channel.Channel">channel</a>.<span title="(x$1: Any)org.jboss.netty.channel.ChannelFuture">write</span><span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: Option[akka.actor.ActorRef])akka.actor.FSM.State[akka.remote.testconductor.ServerFSM.State,Option[akka.actor.ActorRef]]">using</a> <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ToClient<span class="delimiter">(</span><span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;cannot send {} while waiting for previous ACK&quot;)" class="string">&quot;cannot send {} while waiting for previous ACK&quot;</span>, <span title="testconductor extends akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp">msg</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()ServerFSM.this.State">stay</a>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.initialize" title="()Unit">initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.testconductor.Controller.type" id="akka.remote.testconductor.Controller">Controller</a> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type" class="delimiter">{</a>
  <span class="keyword">case class</span> <a title="class ClientDisconnected extends AnyRef with Product with Serializable" id="akka.remote.testconductor.Controller.ClientDisconnected.readResolve">ClientDisconnected</a><a href="#akka.remote.testconductor.Controller.ClientDisconnected.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor.Controller;ClientDisconnected.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>
  <span class="keyword">class</span> <a title="class ClientDisconnectedException extends akka.AkkaException with scala.util.control.NoStackTrace" id="akka.remote.testconductor.Controller;ClientDisconnectedException">ClientDisconnectedException</a><a href="#akka.remote.testconductor.Controller;ClientDisconnectedException" title="akka.remote.testconductor.Controller.ClientDisconnectedException" class="delimiter">(</a><a title="String" id="akka.remote.testconductor.Controller;ClientDisconnectedException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.Controller;ClientDisconnectedException.msg" title="String">msg</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.Controller.GetNodes.productElement.x$1" title="akka.remote.testconductor.Controller.GetNodes.type" id="akka.remote.testconductor.Controller.GetNodes.readResolve">GetNodes</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.Controller.GetSockAddr.productElement.x$1" title="akka.remote.testconductor.Controller.GetSockAddr.type" id="akka.remote.testconductor.Controller.GetSockAddr.readResolve">GetSockAddr</a>
  <span class="keyword">case class</span> <a title="class CreateServerFSM extends AnyRef with akka.actor.NoSerializationVerificationNeeded with Product with Serializable" id="akka.remote.testconductor.Controller.CreateServerFSM.readResolve">CreateServerFSM</a><a href="#akka.remote.testconductor.Controller.CreateServerFSM.readResolve" title="Product" class="delimiter">(</a><a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor.Controller;CreateServerFSM.channel">channel</a>: <span title="org.jboss.netty.channel.Channel">Channel</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;NoSerializationVerificationNeeded" title="akka.actor.NoSerializationVerificationNeeded">NoSerializationVerificationNeeded</a>

  <span class="keyword">case class</span> <a title="class NodeInfo extends AnyRef with Product with Serializable" id="akka.remote.testconductor.Controller.NodeInfo.readResolve">NodeInfo</a><a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor.Controller;NodeInfo.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a title="akka.actor.Address" id="akka.remote.testconductor.Controller;NodeInfo.addr">addr</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>, <a title="akka.actor.ActorRef" id="akka.remote.testconductor.Controller;NodeInfo.fsm">fsm</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This controls test execution by managing barriers (delegated to
 * [[akka.remote.testconductor.BarrierCoordinator]], its child) and allowing
 * network and other failures to be injected at the test nodes.
 *
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class Controller extends AnyRef with akka.actor.Actor" id="akka.remote.testconductor;Controller">Controller</a><a href="#akka.remote.testconductor;Controller" title="akka.remote.testconductor.Controller" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="akka.remote.testconductor;Controller.initialParticipants">initialParticipants</a>: <span title="Int">Int</span>, <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;Controller.controllerPort">controllerPort</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>._
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator.type">BarrierCoordinator</a>._

  <span class="keyword">val</span> <a title="akka.remote.testconductor.TestConductorExt#Settings.type" id="akka.remote.testconductor;Controller.settings">settings</a> = <a href="Extension.scala.html#akka.remote.testconductor.TestConductor.apply(36904ac776)" title="()(implicit ctx: akka.actor.ActorContext)akka.remote.testconductor.TestConductorExt">TestConductor</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><span class="delimiter">)</span>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>
  <span class="keyword">val</span> <a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;Controller.connection">connection</a> = <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.apply" title="(role: akka.remote.testconductor.Role, sockaddr: java.net.InetSocketAddress, poolSize: Int, handler: org.jboss.netty.channel.ChannelUpstreamHandler)org.jboss.netty.channel.Channel">RemoteConnection</a><span class="delimiter">(</span><a href="RemoteConnection.scala.html#akka.remote.testconductor.Server" title="akka.remote.testconductor.Server.type">Server</a>, <a href="#akka.remote.testconductor;Controller.controllerPort" title="java.net.InetSocketAddress">controllerPort</a>, <a href="#akka.remote.testconductor;Controller.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.ServerSocketWorkerPoolSize" title="=&gt; Int">ServerSocketWorkerPoolSize</a>,
    <span title="akka.remote.testconductor.ConductorHandler" class="keyword">new</span> <a href="#akka.remote.testconductor;ConductorHandler" title="akka.remote.testconductor.ConductorHandler">ConductorHandler</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.settings" title="=&gt; akka.remote.testconductor.TestConductorExt#Settings.type">settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.QueryTimeout" title="=&gt; akka.util.Timeout">QueryTimeout</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="../../../../actor/akka/event/Logging.scala.html#akka.event.Logging.apply(882ba4a885)" title="(system: akka.actor.ActorSystem, logSource: String)(implicit evidence$3: akka.event.LogSource[String])akka.event.LoggingAdapter">Logging</a><a href="../../../../actor/akka/event/Logging.scala.html#akka.event.LogSource.fromString" title="=&gt; akka.event.LogSource[String]" class="delimiter">(</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>, <span title="String(&quot;ConductorHandler&quot;)" class="string">&quot;ConductorHandler&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/*
   * Supervision of the BarrierCoordinator means to catch all his bad emotions
   * and sometimes console him (BarrierEmpty, BarrierTimeout), sometimes tell
   * him to hate the world (WrongBarrier, DuplicateNode, ClientLost). The latter shall help
   * terminate broken tests as quickly as possible (i.e. without awaiting
   * BarrierTimeouts in the players).
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.OneForOneStrategy" id="akka.remote.testconductor;Controller.supervisorStrategy">supervisorStrategy</a> = <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor;OneForOneStrategy" title="(maxNrOfRetries: Int, withinTimeRange: scala.concurrent.duration.Duration, loggingEnabled: Boolean)(decider: akka.actor.SupervisorStrategy.Decider)akka.actor.OneForOneStrategy">OneForOneStrategy</a><span class="delimiter">(</span><span class="delimiter">)</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,akka.actor.SupervisorStrategy.Directive] with Serializable" id="akka.remote.testconductor;Controller.supervisorStrategy;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> BarrierTimeout<span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>             ⇒ <a href="#akka.remote.testconductor;Controller.failBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive">failBarrier</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>
    <span class="keyword">case</span> FailedBarrier<span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>              ⇒ <a href="#akka.remote.testconductor;Controller.failBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive">failBarrier</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>
    <span class="keyword">case</span> BarrierEmpty<span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span>, <a title="String" id="akka.remote.testconductor;Controller.supervisorStrategy;$anonfun.isDefinedAt.msg">msg</a><span class="delimiter">)</span>          ⇒ <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Resume" title="akka.actor.SupervisorStrategy.Resume.type">Resume</a>
    <span class="keyword">case</span> WrongBarrier<span class="delimiter">(</span><a title="String" id="akka.remote.testconductor;Controller.supervisorStrategy;$anonfun.isDefinedAt.name">name</a>, <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Controller.supervisorStrategy;$anonfun.isDefinedAt.client">client</a>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span> ⇒ <span title="Boolean(true)" class="delimiter">{</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">client</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.supervisorStrategy;$anonfun.isDefinedAt.name" title="String">name</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="#akka.remote.testconductor;Controller.failBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive">failBarrier</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">case</span> ClientLost<span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span>, <span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>           ⇒ <a href="#akka.remote.testconductor;Controller.failBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive">failBarrier</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>
    <span class="keyword">case</span> DuplicateNode<span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span>, <span title="akka.remote.testconductor.Controller.NodeInfo">node</span><span class="delimiter">)</span>        ⇒ <a href="#akka.remote.testconductor;Controller.failBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive">failBarrier</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">data</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.SupervisorStrategy.Directive" id="akka.remote.testconductor;Controller.failBarrier">failBarrier</a><span class="delimiter">(</span><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor;Controller.failBarrier.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">)</span>: SupervisorStrategy.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy;Directive" title="akka.actor.SupervisorStrategy.Directive">Directive</a> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.remote.testconductor;Controller.failBarrier.$anonfun.c">c</a> ← <a href="#akka.remote.testconductor;Controller.failBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.arrived" title="(f: akka.actor.ActorRef =&gt; Unit)Unit">arrived</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">c</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.failBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="=&gt; String">barrier</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy" title="akka.actor.SupervisorStrategy.type">SupervisorStrategy</a>.<a href="../../../../actor/akka/actor/FaultHandling.scala.html#akka.actor.SupervisorStrategy.Restart" title="akka.actor.SupervisorStrategy.Restart.type">Restart</a>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Controller.barrier">barrier</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0822e9e710)" title="[T &lt;: akka.actor.Actor]()(implicit evidence$1: scala.reflect.ClassTag[T])akka.actor.Props">Props</a><span title="()(implicit evidence$1: scala.reflect.ClassTag[akka.remote.testconductor.BarrierCoordinator])akka.actor.Props" class="delimiter">[</span><a href="#akka.remote.testconductor;BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator">BarrierCoordinator</a><span class="delimiter">]</span>, <span title="String(&quot;barriers&quot;)" class="string">&quot;barriers&quot;</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;Controller.nodes_=">nodes</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (akka.remote.testconductor.RoleName, akka.remote.testconductor.Controller.NodeInfo)*)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="akka.remote.testconductor.Controller.NodeInfo">NodeInfo</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">// map keeping unanswered queries for node addresses (enqueued upon GetAddress, serviced upon NodeInfo)</span>
  <span class="keyword">var</span> <a title="scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]" id="akka.remote.testconductor;Controller.addrInterest_=">addrInterest</a> = <span title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</span><span title="(elems: (akka.remote.testconductor.RoleName, Set[akka.actor.ActorRef])*)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]" class="delimiter">[</span><a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a>, <span title="Set[akka.actor.ActorRef]">Set</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="Iterator[Int]" id="akka.remote.testconductor;Controller.generation">generation</a> = <span title="=&gt; collection.Iterator.type">Iterator</span> <span title="(start: Int)Iterator[Int]">from</span> <span title="Int(1)" class="int">1</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.remote.testconductor;Controller.receive">receive</a> = <a href="../../../../actor/akka/event/LoggingReceive.scala.html#akka.event.LoggingReceive.apply" title="(r: akka.actor.Actor.Receive)(implicit context: akka.actor.ActorContext)akka.actor.Actor.Receive">LoggingReceive</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> CreateServerFSM<span class="delimiter">(</span><a title="org.jboss.netty.channel.Channel" id="akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.channel">channel</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.ip" title="(String, Int)" class="delimiter">(</a><a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.x$2" title="String" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.ip">ip</a>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.x$2" title="Int" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.port">port</a><span class="delimiter">)</span> = <a href="#akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.channel" title="org.jboss.netty.channel.Channel">channel</a>.<span title="()java.net.SocketAddress">getRemoteAddress</span> <span title="(String, Int)" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="java.net.InetSocketAddress" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.x$2.s">s</a>: <span title="java.net.InetSocketAddress">InetSocketAddress</span> ⇒ <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.x$2.s" title="java.net.InetSocketAddress">s</a>.<span title="()java.net.InetAddress">getAddress</span>.<span title="()String">getHostAddress</span>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.x$2.s" title="java.net.InetSocketAddress">s</a>.<span title="()Int">getPort</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">val</span> <span title="String">name</span> = <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.ip" title="String">ip</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.port" title="Int">port</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;-server&quot;)" class="string">&quot;-server&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor;Controller.generation" title="=&gt; Iterator[Int]">generation</a>.<span title="()Int">next</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.remote.testconductor.ServerFSM](classOf[akka.remote.testconductor.ServerFSM])" class="delimiter">[</span>ServerFSM<span class="delimiter">]</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.channel" title="org.jboss.netty.channel.Channel">channel</a><span class="delimiter">)</span>.<a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span>, <span title="String">name</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.remote.testconductor.Controller.NodeInfo">c</span> @ NodeInfo<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span>, <a title="akka.actor.Address" id="akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.addr">addr</a>, <a title="akka.actor.ActorRef" id="akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.fsm">fsm</a><span class="delimiter">)</span> ⇒
      <a href="#akka.remote.testconductor;Controller.barrier" title="=&gt; akka.actor.ActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.remote.testconductor.Controller.NodeInfo">c</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a> <span title="(key: akka.remote.testconductor.RoleName)Boolean">contains</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.initialParticipants" title="=&gt; Int">initialParticipants</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">for</span> <span class="delimiter">(</span>NodeInfo<span class="delimiter">(</span>_, _, <span title="akka.actor.ActorRef">client</span><span class="delimiter">)</span> ← <a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a>.<a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.$anonfun.check$ifrefutable$1" title="(f: akka.remote.testconductor.Controller.NodeInfo =&gt; Unit)Unit">values</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">client</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><span title="String(&quot;initial startup&quot;)" class="string">&quot;initial startup&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.initialParticipants" title="(x$1: Int)Unit">initialParticipants</a> = <span title="Int(0)" class="int">0</span>
        <span class="delimiter">}</span>
        <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><span title="String(&quot;initial startup&quot;)" class="string">&quot;initial startup&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#akka.remote.testconductor;Controller.nodes_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo])Unit">nodes</a> <span title="(kv: (akka.remote.testconductor.RoleName, akka.remote.testconductor.Controller.NodeInfo))scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">+=</span> <span title="(x: akka.remote.testconductor.RoleName)ArrowAssoc[akka.remote.testconductor.RoleName]">name</span> <span title="(y: akka.remote.testconductor.Controller.NodeInfo)(akka.remote.testconductor.RoleName, akka.remote.testconductor.Controller.NodeInfo)">-&gt;</span> <span title="akka.remote.testconductor.Controller.NodeInfo">c</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.initialParticipants" title="=&gt; Int">initialParticipants</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <a href="#akka.remote.testconductor;Controller.initialParticipants" title="=&gt; Int">initialParticipants</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">for</span> <span class="delimiter">(</span>NodeInfo<span class="delimiter">(</span>_, _, <span title="akka.actor.ActorRef">client</span><span class="delimiter">)</span> ← <a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a>.<a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.$anonfun.check$ifrefutable$2" title="(f: akka.remote.testconductor.Controller.NodeInfo =&gt; Unit)Unit">values</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">client</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor.Done" title="akka.remote.testconductor.Done.type">Done</a><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.initialParticipants" title="(x$1: Int)Unit">initialParticipants</a> = <span title="Int(0)" class="int">0</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.addrInterest_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]">addrInterest</a> <span title="(key: akka.remote.testconductor.RoleName)Boolean">contains</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.remote.testconductor;Controller.addrInterest_=" title="(key: akka.remote.testconductor.RoleName)Set[akka.actor.ActorRef]">addrInterest</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;AddressReply" title="(node: akka.remote.testconductor.RoleName, addr: akka.actor.Address)akka.remote.testconductor.AddressReply">AddressReply</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.isDefinedAt.addr" title="akka.actor.Address">addr</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.addrInterest_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]])Unit">addrInterest</a> <span title="(key: akka.remote.testconductor.RoleName)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]">-=</span> <span title="akka.remote.testconductor.RoleName">name</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="akka.remote.testconductor.Controller.ClientDisconnected">c</span> @ ClientDisconnected<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span> ⇒
      <a href="#akka.remote.testconductor;Controller.nodes_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo])Unit">nodes</a> <span title="(key: akka.remote.testconductor.RoleName)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">-=</span> <span title="akka.remote.testconductor.RoleName">name</span>
      <a href="#akka.remote.testconductor;Controller.barrier" title="=&gt; akka.actor.ActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.remote.testconductor.Controller.ClientDisconnected">c</span>
    <span class="keyword">case</span> <span title="akka.remote.testconductor.ServerOp">op</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;ServerOp" title="akka.remote.testconductor.ServerOp">ServerOp</a> ⇒
      <span title="akka.remote.testconductor.ServerOp">op</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> _: <a href="DataTypes.scala.html#akka.remote.testconductor;EnterBarrier" title="akka.remote.testconductor.EnterBarrier">EnterBarrier</a> ⇒ <a href="#akka.remote.testconductor;Controller.barrier" title="=&gt; akka.actor.ActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.remote.testconductor.ServerOp">op</span>
        <span class="keyword">case</span> _: <a href="DataTypes.scala.html#akka.remote.testconductor;FailBarrier" title="akka.remote.testconductor.FailBarrier">FailBarrier</a>  ⇒ <a href="#akka.remote.testconductor;Controller.barrier" title="=&gt; akka.actor.ActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.remote.testconductor.ServerOp">op</span>
        <span class="keyword">case</span> GetAddress<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span> ⇒
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a> <span title="(key: akka.remote.testconductor.RoleName)Boolean">contains</span> <span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;AddressReply" title="(node: akka.remote.testconductor.RoleName, addr: akka.actor.Address)akka.remote.testconductor.AddressReply">AddressReply</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span>, <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.addr" title="=&gt; akka.actor.Address">addr</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#akka.remote.testconductor;Controller.addrInterest_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]])Unit">addrInterest</a> <span title="(kv: (akka.remote.testconductor.RoleName, Set[akka.actor.ActorRef]))scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]">+=</span> <span title="(x: akka.remote.testconductor.RoleName)ArrowAssoc[akka.remote.testconductor.RoleName]">node</span> <span title="(y: scala.collection.immutable.Set[akka.actor.ActorRef])(akka.remote.testconductor.RoleName, scala.collection.immutable.Set[akka.actor.ActorRef])">-&gt;</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.addrInterest_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,Set[akka.actor.ActorRef]]">addrInterest</a> <span title="(key: akka.remote.testconductor.RoleName)Option[Set[akka.actor.ActorRef]]">get</span> <span title="akka.remote.testconductor.RoleName">node</span> <span title="(default: =&gt; Set[akka.actor.ActorRef])Set[akka.actor.ActorRef]">getOrElse</span> <span title="(elems: akka.actor.ActorRef*)scala.collection.immutable.Set[akka.actor.ActorRef]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">+</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _: <a href="DataTypes.scala.html#akka.remote.testconductor;Done" title="akka.remote.testconductor.Done">Done</a> ⇒ <span class="comment">//FIXME what should happen?</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="akka.remote.testconductor.CommandOp">op</span>: <a href="DataTypes.scala.html#akka.remote.testconductor;CommandOp" title="akka.remote.testconductor.CommandOp">CommandOp</a> ⇒
      <span title="akka.remote.testconductor.CommandOp">op</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Throttle<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span>, <span title="akka.remote.testconductor.RoleName">target</span>, <a title="akka.remote.transport.ThrottlerTransportAdapter.Direction" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.direction">direction</a>, <a title="Float" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.rateMBit">rateMBit</a><span class="delimiter">)</span> ⇒
          <span class="keyword">val</span> <span title="akka.remote.testconductor.Controller.NodeInfo">t</span> = <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">target</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;ThrottleMsg" title="(target: akka.actor.Address, direction: akka.remote.transport.ThrottlerTransportAdapter.Direction, rateMBit: Float)akka.remote.testconductor.ThrottleMsg">ThrottleMsg</a><span class="delimiter">(</span><span title="akka.remote.testconductor.Controller.NodeInfo">t</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.addr" title="=&gt; akka.actor.Address">addr</a>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.direction" title="akka.remote.transport.ThrottlerTransportAdapter.Direction">direction</a>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.rateMBit" title="Float">rateMBit</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Disconnect<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span>, <span title="akka.remote.testconductor.RoleName">target</span>, <a title="Boolean" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.abort">abort</a><span class="delimiter">)</span> ⇒
          <span class="keyword">val</span> <span title="akka.remote.testconductor.Controller.NodeInfo">t</span> = <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">target</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;DisconnectMsg" title="(target: akka.actor.Address, abort: Boolean)akka.remote.testconductor.DisconnectMsg">DisconnectMsg</a><span class="delimiter">(</span><span title="akka.remote.testconductor.Controller.NodeInfo">t</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.addr" title="=&gt; akka.actor.Address">addr</a>, <a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.abort" title="Boolean">abort</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Terminate<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span>, <a title="Either[Boolean,Int]" id="akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.shutdownOrExit">shutdownOrExit</a><span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor.BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator.type">BarrierCoordinator</a>.<a href="#akka.remote.testconductor.BarrierCoordinator.RemoveClient.readResolve" title="(name: akka.remote.testconductor.RoleName)akka.remote.testconductor.BarrierCoordinator.RemoveClient">RemoveClient</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.nodes_=" title="(key: akka.remote.testconductor.RoleName)akka.remote.testconductor.Controller.NodeInfo">nodes</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;TerminateMsg" title="(shutdownOrExit: Either[Boolean,Int])akka.remote.testconductor.TerminateMsg">TerminateMsg</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.receive;$anonfun.applyOrElse.shutdownOrExit" title="Either[Boolean,Int]">shutdownOrExit</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.remote.testconductor;Controller.nodes_=" title="(x$1: scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo])Unit">nodes</a> <span title="(key: akka.remote.testconductor.RoleName)scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">-=</span> <span title="akka.remote.testconductor.RoleName">node</span>
        <span class="keyword">case</span> Remove<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">barrier</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor.BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator.type">BarrierCoordinator</a>.<a href="#akka.remote.testconductor.BarrierCoordinator.RemoveClient.readResolve" title="(name: akka.remote.testconductor.RoleName)akka.remote.testconductor.BarrierCoordinator.RemoveClient">RemoveClient</a><span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">node</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> <a href="#akka.remote.testconductor.Controller.GetNodes.readResolve" title="akka.remote.testconductor.Controller.GetNodes.type">GetNodes</a>    ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;Controller.nodes_=" title="=&gt; scala.collection.immutable.Map[akka.remote.testconductor.RoleName,akka.remote.testconductor.Controller.NodeInfo]">nodes</a>.<span title="=&gt; Iterable[akka.remote.testconductor.RoleName]">keys</span>
    <span class="keyword">case</span> <a href="#akka.remote.testconductor.Controller.GetSockAddr.readResolve" title="akka.remote.testconductor.Controller.GetSockAddr.type">GetSockAddr</a> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.remote.testconductor;Controller.connection" title="=&gt; org.jboss.netty.channel.Channel">connection</a>.<span title="()java.net.SocketAddress">getLocalAddress</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.remote.testconductor;Controller.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection" title="akka.remote.testconductor.RemoteConnection.type">RemoteConnection</a>.<a href="RemoteConnection.scala.html#akka.remote.testconductor.RemoteConnection.shutdown" title="(channel: org.jboss.netty.channel.Channel)org.jboss.netty.channel.ChannelFuture">shutdown</a><span title="Unit" class="delimiter">(</span><a href="#akka.remote.testconductor;Controller.connection" title="=&gt; org.jboss.netty.channel.Channel">connection</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.remote.testconductor.BarrierCoordinator.type" id="akka.remote.testconductor.BarrierCoordinator">BarrierCoordinator</a> <a href="#akka.remote.testconductor.BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator.type" class="delimiter">{</a>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait State extends AnyRef" id="akka.remote.testconductor.BarrierCoordinator;State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.BarrierCoordinator.Idle.productElement.x$1" title="akka.remote.testconductor.BarrierCoordinator.Idle.type" id="akka.remote.testconductor.BarrierCoordinator.Idle.readResolve">Idle</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.BarrierCoordinator;State" title="akka.remote.testconductor.BarrierCoordinator.State">State</a>
  <span class="keyword">case object</span> <a href="#akka.remote.testconductor.BarrierCoordinator.Waiting.productElement.x$1" title="akka.remote.testconductor.BarrierCoordinator.Waiting.type" id="akka.remote.testconductor.BarrierCoordinator.Waiting.readResolve">Waiting</a> <span title="Product" class="keyword">extends</span> <a href="#akka.remote.testconductor.BarrierCoordinator;State" title="akka.remote.testconductor.BarrierCoordinator.State">State</a>

  <span class="keyword">case class</span> <a title="class RemoveClient extends AnyRef with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.RemoveClient.readResolve">RemoveClient</a><a href="#akka.remote.testconductor.BarrierCoordinator.RemoveClient.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor.BarrierCoordinator;RemoveClient.name">name</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>

  <span class="keyword">case class</span> <a title="class Data extends AnyRef with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.Data.readResolve">Data</a><a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="Product" class="delimiter">(</a><a title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor.BarrierCoordinator;Data.clients">clients</a>: <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">Set</span><span class="delimiter">[</span>Controller.NodeInfo<span class="delimiter">]</span>, <a title="String" id="akka.remote.testconductor.BarrierCoordinator;Data.barrier">barrier</a>: <span title="String">String</span>, <a title="List[akka.actor.ActorRef]" id="akka.remote.testconductor.BarrierCoordinator;Data.arrived">arrived</a>: <span title="List[akka.actor.ActorRef]">List</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>, <a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor.BarrierCoordinator;Data.deadline">deadline</a>: <span title="scala.concurrent.duration.Deadline">Deadline</span><span class="delimiter">)</span>

  <span class="keyword">trait</span> <a title="trait Printer extends AnyRef" id="akka.remote.testconductor.BarrierCoordinator;Printer">Printer</a> <span title="Unit" class="delimiter">{</span> <span class="keyword">this</span>: Product <span class="keyword">with</span> Throwable <span class="keyword">with</span> NoStackTrace ⇒
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="akka.remote.testconductor.BarrierCoordinator;Printer.toString">toString</a> = <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="=&gt; String">productPrefix</a> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="=&gt; Iterator[Any]">productIterator</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">case class</span> <a title="class BarrierTimeout extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.BarrierTimeout.readResolve">BarrierTimeout</a><a href="#akka.remote.testconductor.BarrierCoordinator.BarrierTimeout.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;BarrierTimeout.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;timeout while waiting for barrier \'&quot;)" class="string">&quot;timeout while waiting for barrier '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;BarrierTimeout.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="=&gt; String">barrier</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
  <span class="keyword">case class</span> <a title="class FailedBarrier extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.FailedBarrier.readResolve">FailedBarrier</a><a href="#akka.remote.testconductor.BarrierCoordinator.FailedBarrier.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;FailedBarrier.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;failing barrier \'&quot;)" class="string">&quot;failing barrier '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;FailedBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="=&gt; String">barrier</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
  <span class="keyword">case class</span> <a title="class DuplicateNode extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.DuplicateNode.readResolve">DuplicateNode</a><a href="#akka.remote.testconductor.BarrierCoordinator.DuplicateNode.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;DuplicateNode.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a>, <a title="akka.remote.testconductor.Controller.NodeInfo" id="akka.remote.testconductor.BarrierCoordinator;DuplicateNode.node">node</a>: Controller.<a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="akka.remote.testconductor.Controller.NodeInfo">NodeInfo</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;DuplicateNode.node" title="akka.remote.testconductor.Controller.NodeInfo">node</a>.<a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="()String">toString</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
  <span class="keyword">case class</span> <a title="class WrongBarrier extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.WrongBarrier.readResolve">WrongBarrier</a><a href="#akka.remote.testconductor.BarrierCoordinator.WrongBarrier.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.remote.testconductor.BarrierCoordinator;WrongBarrier.barrier">barrier</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.remote.testconductor.BarrierCoordinator;WrongBarrier.client">client</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;WrongBarrier.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="=&gt; Set[akka.remote.testconductor.Controller.NodeInfo]">clients</a>.<span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Option[akka.remote.testconductor.Controller.NodeInfo]">find</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.$anonfun.x$6" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.client" title="akka.actor.ActorRef">client</a><span class="delimiter">)</span>.<span title="(f: akka.remote.testconductor.Controller.NodeInfo =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.$anonfun.x$7" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a>.<span title="()String">toString</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.client" title="akka.actor.ActorRef">client</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.toString" title="()String">toString</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
      <span title="String(&quot; tried to enter \'&quot;)" class="string">&quot; tried to enter '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.barrier" title="String">barrier</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' while we were waiting for \'&quot;)" class="string">&quot;' while we were waiting for '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;WrongBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="=&gt; String">barrier</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
  <span class="keyword">case class</span> <a title="class BarrierEmpty extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.BarrierEmpty.readResolve">BarrierEmpty</a><a href="#akka.remote.testconductor.BarrierCoordinator.BarrierEmpty.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;BarrierEmpty.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a>, <a title="String" id="akka.remote.testconductor.BarrierCoordinator;BarrierEmpty.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator;BarrierEmpty.msg" title="String">msg</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
  <span class="keyword">case class</span> <a title="class ClientLost extends RuntimeException with scala.util.control.NoStackTrace with akka.remote.testconductor.BarrierCoordinator.Printer with Product with Serializable" id="akka.remote.testconductor.BarrierCoordinator.ClientLost.readResolve">ClientLost</a><a href="#akka.remote.testconductor.BarrierCoordinator.ClientLost.readResolve" title="Product" class="delimiter">(</a><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor.BarrierCoordinator;ClientLost.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a>, <a title="akka.remote.testconductor.RoleName" id="akka.remote.testconductor.BarrierCoordinator;ClientLost.client">client</a>: <a href="DataTypes.scala.html#akka.remote.testconductor;RoleName" title="akka.remote.testconductor.RoleName">RoleName</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;unannounced disconnect of &quot;)" class="string">&quot;unannounced disconnect of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.remote.testconductor.BarrierCoordinator;ClientLost.client" title="akka.remote.testconductor.RoleName">client</a><span class="delimiter">)</span> <span class="keyword">with</span> <span title="scala.util.control.NoStackTrace">NoStackTrace</span> <span class="keyword">with</span> <a href="#akka.remote.testconductor.BarrierCoordinator;Printer" title="akka.remote.testconductor.BarrierCoordinator.Printer">Printer</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * This barrier coordinator gets informed of players connecting (NodeInfo),
 * players being deliberately removed (RemoveClient) or failing (ClientDisconnected)
 * by the controller. It also receives EnterBarrier requests, where upon the first
 * one received the name of the current barrier is set and all other known clients
 * are expected to join the barrier, whereupon all of the will be sent the successful
 * EnterBarrier return message. In case of planned removals, this may just happen
 * earlier, in case of failures the current barrier (and all subsequent ones) will
 * be failed by sending BarrierFailed responses.
 *
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class BarrierCoordinator extends AnyRef with akka.actor.Actor with akka.actor.LoggingFSM[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" id="akka.remote.testconductor;BarrierCoordinator">BarrierCoordinator</a> <a href="#akka.remote.testconductor;BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator" class="keyword">extends</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;LoggingFSM" title="akka.actor.LoggingFSM[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">LoggingFSM</a><span class="delimiter">[</span>BarrierCoordinator.State, BarrierCoordinator.Data<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.BarrierCoordinator" title="akka.remote.testconductor.BarrierCoordinator.type">BarrierCoordinator</a>._
  <span class="keyword">import</span> akka.actor.<a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM" title="akka.actor.FSM.type">FSM</a>._
  <span class="keyword">import</span> <a href="#akka.remote.testconductor.Controller" title="akka.remote.testconductor.Controller.type">Controller</a>._
  <span class="keyword">import</span> akka.util.<span class="delimiter">{</span> Timeout ⇒ auTimeout <span class="delimiter">}</span>

  <span class="comment">// this shall be set to true if all subsequent barriers shall fail</span>
  <span class="keyword">var</span> <a title="Boolean" id="akka.remote.testconductor;BarrierCoordinator.failed_=">failed</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable, message: Option[Any])Unit" id="akka.remote.testconductor;BarrierCoordinator.preRestart">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote.testconductor;BarrierCoordinator.preRestart.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="Option[Any]" id="akka.remote.testconductor;BarrierCoordinator.preRestart.message">message</a>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable)Unit" id="akka.remote.testconductor;BarrierCoordinator.postRestart">postRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.remote.testconductor;BarrierCoordinator.postRestart.reason">reason</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#akka.remote.testconductor;BarrierCoordinator.failed_=" title="(x$1: Boolean)Unit">failed</a> = <span title="Boolean(true)" class="keyword">true</span> <span class="delimiter">}</span>

  <span class="comment">// TODO what happens with the other waiting players in case of a test failure?</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.startWith" title="(stateName: akka.remote.testconductor.BarrierCoordinator.State, stateData: akka.remote.testconductor.BarrierCoordinator.Data, timeout: BarrierCoordinator.this.Timeout)Unit">startWith</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a>, <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="(clients: Set[akka.remote.testconductor.Controller.NodeInfo], barrier: String, arrived: List[akka.actor.ActorRef], deadline: scala.concurrent.duration.Deadline)akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">(</span><span title="(elems: akka.remote.testconductor.Controller.NodeInfo*)scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]">Set</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="scala.collection.immutable.Nil.type">Nil</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.whenUnhandled" title="(stateFunction: BarrierCoordinator.this.StateFunction)Unit">whenUnhandled</a> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[BarrierCoordinator.this.Event,BarrierCoordinator.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a title="akka.remote.testconductor.Controller.NodeInfo" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.n">n</a>: <a href="#akka.remote.testconductor.Controller.NodeInfo.readResolve" title="akka.remote.testconductor.Controller.NodeInfo">NodeInfo</a>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, _, _, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Option[akka.remote.testconductor.Controller.NodeInfo]">find</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$8" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.n" title="akka.remote.testconductor.Controller.NodeInfo">n</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="akka.remote.testconductor.BarrierCoordinator.DuplicateNode" class="keyword">new</span> <a href="#akka.remote.testconductor.BarrierCoordinator.DuplicateNode.readResolve" title="akka.remote.testconductor.BarrierCoordinator.DuplicateNode">DuplicateNode</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>, <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.n" title="akka.remote.testconductor.Controller.NodeInfo">n</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="(clients: Set[akka.remote.testconductor.Controller.NodeInfo], barrier: String, arrived: List[akka.actor.ActorRef], deadline: scala.concurrent.duration.Deadline)akka.remote.testconductor.BarrierCoordinator.Data">copy</a><span class="delimiter">(</span>clients = <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <span title="(elem: akka.remote.testconductor.Controller.NodeInfo)scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]">+</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.n" title="akka.remote.testconductor.Controller.NodeInfo">n</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>ClientDisconnected<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, _, <span title="List[akka.actor.ActorRef]">arrived</span>, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><span title="List[akka.actor.ActorRef]">arrived</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="(clients: Set[akka.remote.testconductor.Controller.NodeInfo], barrier: String, arrived: List[akka.actor.ActorRef], deadline: scala.concurrent.duration.Deadline)akka.remote.testconductor.BarrierCoordinator.Data">copy</a><span class="delimiter">(</span>clients = <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]">filterNot</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$9" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Option[akka.remote.testconductor.Controller.NodeInfo]">find</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$10" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="BarrierCoordinator.this.State" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="None.type">None</span>    ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a>
          <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.testconductor.Controller.NodeInfo" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.c">c</a><span class="delimiter">)</span> ⇒ <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.ClientLost.readResolve" title="(data: akka.remote.testconductor.BarrierCoordinator.Data, client: akka.remote.testconductor.RoleName)akka.remote.testconductor.BarrierCoordinator.ClientLost">ClientLost</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="String" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$29">copy</a><span class="delimiter">(</span>clients = <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <a title="scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$26">-</a> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.c" title="akka.remote.testconductor.Controller.NodeInfo">c</a>, arrived = <span title="List[akka.actor.ActorRef]">arrived</span> <a title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$27">filterNot</a> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$27.$anonfun.x$11" title="akka.actor.ActorRef">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.c" title="akka.remote.testconductor.Controller.NodeInfo">c</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.BarrierCoordinator.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: BarrierCoordinator.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[BarrierCoordinator.this.Event,BarrierCoordinator.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>EnterBarrier<span class="delimiter">(</span><span title="String">name</span>, <span title="Option[scala.concurrent.duration.FiniteDuration]">timeout</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, _, _, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.failed_=" title="=&gt; Boolean">failed</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">replying</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><span title="String">name</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="(f: akka.remote.testconductor.Controller.NodeInfo =&gt; akka.actor.ActorRef)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo],akka.actor.ActorRef,scala.collection.immutable.Set[akka.actor.ActorRef]])scala.collection.immutable.Set[akka.actor.ActorRef]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.actor.ActorRef,scala.collection.immutable.Set[akka.actor.ActorRef]]" class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$12" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="(elems: akka.actor.ActorRef*)scala.collection.immutable.Set[akka.actor.ActorRef]">Set</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">replying</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><span title="String">name</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Option[akka.remote.testconductor.Controller.NodeInfo]">find</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$13" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.replying" title="(replyValue: Any)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">replying</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><span title="String">name</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.BarrierCoordinator.State)BarrierCoordinator.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Waiting.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Waiting.type">Waiting</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$33">copy</a><span class="delimiter">(</span>barrier = <a title="String" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$30">name</a>, arrived = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$31.x$14" title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$31">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span>,
          deadline = <a href="#akka.remote.testconductor;BarrierCoordinator.getDeadline" title="(timeout: Option[scala.concurrent.duration.FiniteDuration])scala.concurrent.duration.Deadline">getDeadline</a><a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$32" class="delimiter">(</a><span title="Option[scala.concurrent.duration.FiniteDuration]">timeout</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>RemoveClient<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, _, _, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.BarrierEmpty.readResolve" title="(data: akka.remote.testconductor.BarrierCoordinator.Data, msg: String)akka.remote.testconductor.BarrierCoordinator.BarrierEmpty">BarrierEmpty</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>, <span title="String(&quot;cannot remove &quot;)" class="string">&quot;cannot remove &quot;</span> <span title="(x$1: Any)String">+</span> <span title="akka.remote.testconductor.RoleName">name</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: no client to remove&quot;)" class="string">&quot;: no client to remove&quot;</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="(clients: Set[akka.remote.testconductor.Controller.NodeInfo], barrier: String, arrived: List[akka.actor.ActorRef], deadline: scala.concurrent.duration.Deadline)akka.remote.testconductor.BarrierCoordinator.Data">copy</a><span class="delimiter">(</span>clients = <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]">filterNot</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$15" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.onTransition" title="(transitionHandler: BarrierCoordinator.this.TransitionHandler)Unit">onTransition</a> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(akka.remote.testconductor.BarrierCoordinator.State, akka.remote.testconductor.BarrierCoordinator.State),Unit] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM.->.unapply" title="(in: (akka.remote.testconductor.BarrierCoordinator.State, akka.remote.testconductor.BarrierCoordinator.State))Some[(akka.remote.testconductor.BarrierCoordinator.State, akka.remote.testconductor.BarrierCoordinator.State)]">-&gt;</a> <a href="#akka.remote.testconductor.BarrierCoordinator.Waiting.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Waiting.type">Waiting</a> ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.setTimer" title="(name: String, msg: Any, timeout: scala.concurrent.duration.FiniteDuration, repeat: Boolean)Unit">setTimer</a><span title="Boolean(true)" class="delimiter">(</span><span title="String(&quot;Timeout&quot;)" class="string">&quot;Timeout&quot;</span>, <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.nextStateData" title="=&gt; akka.remote.testconductor.BarrierCoordinator.Data">nextStateData</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.deadline" title="=&gt; scala.concurrent.duration.Deadline">deadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.remote.testconductor.BarrierCoordinator.Waiting.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Waiting.type">Waiting</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM.->.unapply" title="(in: (akka.remote.testconductor.BarrierCoordinator.State, akka.remote.testconductor.BarrierCoordinator.State))Some[(akka.remote.testconductor.BarrierCoordinator.State, akka.remote.testconductor.BarrierCoordinator.State)]">-&gt;</a> <a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a> ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.cancelTimer" title="(name: String)Unit">cancelTimer</a><span title="Boolean(true)" class="delimiter">(</span><span title="String(&quot;Timeout&quot;)" class="string">&quot;Timeout&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.when" title="(stateName: akka.remote.testconductor.BarrierCoordinator.State, stateTimeout: scala.concurrent.duration.FiniteDuration)(stateFunction: BarrierCoordinator.this.StateFunction)Unit">when</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Waiting.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Waiting.type">Waiting</a><span class="delimiter">)</span> <span title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[BarrierCoordinator.this.Event,BarrierCoordinator.this.State] with Serializable" class="delimiter">{</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>EnterBarrier<span class="delimiter">(</span><span title="String">name</span>, <span title="Option[scala.concurrent.duration.FiniteDuration]">timeout</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, <span title="String">barrier</span>, <span title="List[akka.actor.ActorRef]">arrived</span>, <a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.deadline">deadline</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="String">name</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String">barrier</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.WrongBarrier.readResolve" title="(barrier: String, client: akka.actor.ActorRef, data: akka.remote.testconductor.BarrierCoordinator.Data)akka.remote.testconductor.BarrierCoordinator.WrongBarrier">WrongBarrier</a><span class="delimiter">(</span><span title="String">name</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.together">together</a> = <span title="List[akka.actor.ActorRef]" class="keyword">if</span> <span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>.<span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.together.$anonfun.x$16" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.together.x$17" title="(x: akka.actor.ActorRef)List[akka.actor.ActorRef]">::</a> <span title="List[akka.actor.ActorRef]">arrived</span> <span class="keyword">else</span> <span title="List[akka.actor.ActorRef]">arrived</span>
      <span class="keyword">val</span> <a title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.enterDeadline">enterDeadline</a> = <a href="#akka.remote.testconductor;BarrierCoordinator.getDeadline" title="(timeout: Option[scala.concurrent.duration.FiniteDuration])scala.concurrent.duration.Deadline">getDeadline</a><span class="delimiter">(</span><span title="Option[scala.concurrent.duration.FiniteDuration]">timeout</span><span class="delimiter">)</span>
      <span class="comment">// we only allow the deadlines to get shorter</span>
      <span title="BarrierCoordinator.this.State" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.enterDeadline" title="scala.concurrent.duration.Deadline">enterDeadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span> <span title="(that: scala.concurrent.duration.Duration)Boolean">&lt;</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.isDefinedAt.deadline" title="scala.concurrent.duration.Deadline">deadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.setTimer" title="(name: String, msg: Any, timeout: scala.concurrent.duration.FiniteDuration, repeat: Boolean)Unit">setTimer</a><span class="delimiter">(</span><span title="String(&quot;Timeout&quot;)" class="string">&quot;Timeout&quot;</span>, <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.enterDeadline" title="scala.concurrent.duration.Deadline">enterDeadline</a>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">timeLeft</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)BarrierCoordinator.this.State">handleBarrier</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$37">copy</a><span class="delimiter">(</span>arrived = <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.together" title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$34">together</a>, deadline = <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.enterDeadline" title="scala.concurrent.duration.Deadline" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$35">enterDeadline</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span>
        <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)BarrierCoordinator.this.State">handleBarrier</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$41">copy</a><span class="delimiter">(</span>arrived = <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.together" title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$38">together</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>RemoveClient<span class="delimiter">(</span><span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span><span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span>, <span title="String">barrier</span>, <span title="List[akka.actor.ActorRef]">arrived</span>, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <span title="(p: akka.remote.testconductor.Controller.NodeInfo =&gt; Boolean)Option[akka.remote.testconductor.Controller.NodeInfo]">find</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.$anonfun.x$18" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.name" title="=&gt; akka.remote.testconductor.RoleName">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="akka.remote.testconductor.RoleName">name</span><span class="delimiter">)</span> <span title="BarrierCoordinator.this.State" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="None.type">None</span> ⇒ <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.remote.testconductor.Controller.NodeInfo" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.client">client</a><span class="delimiter">)</span> ⇒
          <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)BarrierCoordinator.this.State">handleBarrier</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="String" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$45">copy</a><span class="delimiter">(</span>clients = <span title="Set[akka.remote.testconductor.Controller.NodeInfo]">clients</span> <a title="scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$42">-</a> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.client" title="akka.remote.testconductor.Controller.NodeInfo">client</a>, arrived = <span title="List[akka.actor.ActorRef]">arrived</span> <a title="List[akka.actor.ActorRef]" id="akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$43">filterNot</a> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.x$43.$anonfun.x$19" title="akka.actor.ActorRef">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.remote.testconductor;BarrierCoordinator.<local BarrierCoordinator>;$anonfun.applyOrElse.client" title="akka.remote.testconductor.Controller.NodeInfo">client</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span>FailBarrier<span class="delimiter">(</span><span title="String">name</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span> @ Data<span class="delimiter">(</span>_, <span title="String">barrier</span>, _, _<span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="String">name</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String">barrier</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.WrongBarrier.readResolve" title="(barrier: String, client: akka.actor.ActorRef, data: akka.remote.testconductor.BarrierCoordinator.Data)akka.remote.testconductor.BarrierCoordinator.WrongBarrier">WrongBarrier</a><span class="delimiter">(</span><span title="String">name</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.FailedBarrier.readResolve" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.remote.testconductor.BarrierCoordinator.FailedBarrier">FailedBarrier</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Event<span class="delimiter">(</span><a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.StateTimeout" title="=&gt; akka.actor.FSM.StateTimeout.type">StateTimeout</a>, <span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span><span class="delimiter">)</span> ⇒
      <span title="Nothing" class="keyword">throw</span> <a href="#akka.remote.testconductor.BarrierCoordinator.BarrierTimeout.readResolve" title="(data: akka.remote.testconductor.BarrierCoordinator.Data)akka.remote.testconductor.BarrierCoordinator.BarrierTimeout">BarrierTimeout</a><span class="delimiter">(</span><span title="akka.remote.testconductor.BarrierCoordinator.Data">d</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.initialize" title="()Unit">initialize</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(data: akka.remote.testconductor.BarrierCoordinator.Data)BarrierCoordinator.this.State" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier">handleBarrier</a><span class="delimiter">(</span><a title="akka.remote.testconductor.BarrierCoordinator.Data" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.data">data</a>: <a href="#akka.remote.testconductor.BarrierCoordinator.Data.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Data">Data</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State" title="BarrierCoordinator.this.State">State</a> = <span class="delimiter">{</span>
    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.debug(dc73c33c91)" title="(template: String, arg1: Any)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;handleBarrier({})&quot;)" class="string">&quot;handleBarrier({})&quot;</span>, <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a><span class="delimiter">)</span>
    <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.arrived" title="=&gt; List[akka.actor.ActorRef]">arrived</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.BarrierCoordinator.State)BarrierCoordinator.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.x$49">copy</a><span class="delimiter">(</span>barrier = <a title="String" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.x$46" class="string">&quot;&quot;</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span title="akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="=&gt; Set[akka.remote.testconductor.Controller.NodeInfo]">clients</a>.<span title="(f: akka.remote.testconductor.Controller.NodeInfo =&gt; akka.actor.ActorRef)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.remote.testconductor.Controller.NodeInfo],akka.actor.ActorRef,scala.collection.immutable.Set[akka.actor.ActorRef]])scala.collection.immutable.Set[akka.actor.ActorRef]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.actor.ActorRef,scala.collection.immutable.Set[akka.actor.ActorRef]]" class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.$anonfun.x$20" title="akka.remote.testconductor.Controller.NodeInfo">_</a>.<a href="#akka.remote.testconductor.Controller;NodeInfo.fsm" title="=&gt; akka.actor.ActorRef">fsm</a><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[akka.actor.ActorRef])scala.collection.immutable.Set[akka.actor.ActorRef]">--</span> <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.arrived" title="=&gt; List[akka.actor.ActorRef]">arrived</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.arrived" title="=&gt; List[akka.actor.ActorRef]">arrived</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="DataTypes.scala.html#akka.remote.testconductor;ToClient" title="(msg: akka.remote.testconductor.ClientOp with akka.remote.testconductor.NetworkOp)akka.remote.testconductor.ToClient">ToClient</a><span class="delimiter">(</span><a href="DataTypes.scala.html#akka.remote.testconductor;BarrierResult" title="(name: String, success: Boolean)akka.remote.testconductor.BarrierResult">BarrierResult</a><span class="delimiter">(</span><a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.barrier" title="=&gt; String">barrier</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.goto" title="(nextStateName: akka.remote.testconductor.BarrierCoordinator.State)BarrierCoordinator.this.State">goto</a><span class="delimiter">(</span><a href="#akka.remote.testconductor.BarrierCoordinator.Idle.readResolve" title="akka.remote.testconductor.BarrierCoordinator.Idle.type">Idle</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>.<a href="#akka.remote.testconductor.BarrierCoordinator;Data.clients" title="Set[akka.remote.testconductor.Controller.NodeInfo]" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.x$53">copy</a><span class="delimiter">(</span>barrier = <a title="String" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.x$50" class="string">&quot;&quot;</a>, arrived = <a title="scala.collection.immutable.Nil.type" id="akka.remote.testconductor;BarrierCoordinator.handleBarrier.x$51">Nil</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor;FSM.stay" title="()BarrierCoordinator.this.State">stay</a> <a href="../../../../actor/akka/actor/FSM.scala.html#akka.actor.FSM;State.using" title="(nextStateDate: akka.remote.testconductor.BarrierCoordinator.Data)akka.actor.FSM.State[akka.remote.testconductor.BarrierCoordinator.State,akka.remote.testconductor.BarrierCoordinator.Data]">using</a> <a href="#akka.remote.testconductor;BarrierCoordinator.handleBarrier.data" title="akka.remote.testconductor.BarrierCoordinator.Data">data</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(timeout: Option[scala.concurrent.duration.FiniteDuration])scala.concurrent.duration.Deadline" id="akka.remote.testconductor;BarrierCoordinator.getDeadline">getDeadline</a><span class="delimiter">(</span><a title="Option[scala.concurrent.duration.FiniteDuration]" id="akka.remote.testconductor;BarrierCoordinator.getDeadline.timeout">timeout</a>: <span title="Option[scala.concurrent.duration.FiniteDuration]">Option</span><span class="delimiter">[</span>FiniteDuration<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.concurrent.duration.Deadline">Deadline</span> = <span class="delimiter">{</span>
    <span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.remote.testconductor;BarrierCoordinator.getDeadline.timeout" title="Option[scala.concurrent.duration.FiniteDuration]">timeout</a>.<span title="(default: =&gt; scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.FiniteDuration">getOrElse</span><span class="delimiter">(</span><a href="Extension.scala.html#akka.remote.testconductor.TestConductor.apply(36904ac776)" title="()(implicit ctx: akka.actor.ActorContext)akka.remote.testconductor.TestConductorExt">TestConductor</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext" class="delimiter">(</a><span class="delimiter">)</span>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings" title="akka.remote.testconductor.TestConductorExt#Settings.type">Settings</a>.<a href="Extension.scala.html#akka.remote.testconductor;TestConductorExt.Settings.BarrierTimeout" title="=&gt; akka.util.Timeout">BarrierTimeout</a>.<a href="../../../../actor/akka/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>
