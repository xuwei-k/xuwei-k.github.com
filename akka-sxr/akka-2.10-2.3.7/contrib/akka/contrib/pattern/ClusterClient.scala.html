<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>contrib/akka/contrib/pattern/ClusterClient.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.contrib.pattern

<span class="keyword">import</span> java.net.URLEncoder
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> akka.actor.Actor
<span class="keyword">import</span> akka.actor.ActorIdentity
<span class="keyword">import</span> akka.actor.ActorLogging
<span class="keyword">import</span> akka.actor.ActorRef
<span class="keyword">import</span> akka.actor.ActorSelection
<span class="keyword">import</span> akka.actor.ActorSystem
<span class="keyword">import</span> akka.actor.Address
<span class="keyword">import</span> akka.actor.ExtendedActorSystem
<span class="keyword">import</span> akka.actor.Extension
<span class="keyword">import</span> akka.actor.ExtensionId
<span class="keyword">import</span> akka.actor.ExtensionIdProvider
<span class="keyword">import</span> akka.actor.Identify
<span class="keyword">import</span> akka.actor.Props
<span class="keyword">import</span> akka.actor.ReceiveTimeout
<span class="keyword">import</span> akka.actor.Terminated
<span class="keyword">import</span> akka.cluster.Cluster
<span class="keyword">import</span> akka.cluster.<a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
<span class="keyword">import</span> akka.cluster.Member
<span class="keyword">import</span> akka.cluster.MemberStatus
<span class="keyword">import</span> akka.routing.ConsistentHash
<span class="keyword">import</span> akka.routing.MurmurHash
<span class="keyword">import</span> akka.actor.Stash
<span class="keyword">import</span> akka.actor.Cancellable

<span class="keyword">object</span> <a title="akka.contrib.pattern.ClusterClient.type" id="akka.contrib.pattern.ClusterClient">ClusterClient</a> <a href="#akka.contrib.pattern.ClusterClient" title="akka.contrib.pattern.ClusterClient.type" class="delimiter">{</a>

  <span class="comment">/**
   * Scala API: Factory method for `ClusterClient` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(initialContacts: Set[akka.actor.ActorSelection], establishingGetContactsInterval: scala.concurrent.duration.FiniteDuration, refreshContactsInterval: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ClusterClient.props(0f7dbc47b5)">props</a><span class="delimiter">(</span>
    <a title="Set[akka.actor.ActorSelection]" id="akka.contrib.pattern.ClusterClient.props(0f7dbc47b5).initialContacts">initialContacts</a>: <span title="Set[akka.actor.ActorSelection]">Set</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterClient.props$default$2">establishingGetContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">3</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">second</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterClient.props$default$3">refreshContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">minute</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.ClusterClient](classOf[akka.contrib.pattern.ClusterClient])" class="delimiter">[</span>ClusterClient<span class="delimiter">]</span>, <a href="#akka.contrib.pattern.ClusterClient.props(0f7dbc47b5).initialContacts" title="Set[akka.actor.ActorSelection]">initialContacts</a>, <a href="#akka.contrib.pattern.ClusterClient.props$default$2" title="scala.concurrent.duration.FiniteDuration">establishingGetContactsInterval</a>, <a href="#akka.contrib.pattern.ClusterClient.props$default$3" title="scala.concurrent.duration.FiniteDuration">refreshContactsInterval</a><span class="delimiter">)</span>.
      <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withMailbox" title="(m: String)akka.actor.Props">withMailbox</a><span class="delimiter">(</span><span title="String(&quot;akka.contrib.cluster.client.mailbox&quot;)" class="string">&quot;akka.contrib.cluster.client.mailbox&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: Factory method for `ClusterClient` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(initialContacts: java.util.Set[akka.actor.ActorSelection], establishingGetContactsInterval: scala.concurrent.duration.FiniteDuration, refreshContactsInterval: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ClusterClient.props(9260950799)">props</a><span class="delimiter">(</span>
    <a title="java.util.Set[akka.actor.ActorSelection]" id="akka.contrib.pattern.ClusterClient.props(9260950799).initialContacts">initialContacts</a>: java.util.<span title="java.util.Set[akka.actor.ActorSelection]">Set</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterClient.props(9260950799).establishingGetContactsInterval">establishingGetContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterClient.props(9260950799).refreshContactsInterval">refreshContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    <a href="#akka.contrib.pattern.ClusterClient.props(0f7dbc47b5)" title="(initialContacts: Set[akka.actor.ActorSelection], establishingGetContactsInterval: scala.concurrent.duration.FiniteDuration, refreshContactsInterval: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterClient.props(9260950799).initialContacts" title="(s: java.util.Set[akka.actor.ActorSelection])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Set[akka.actor.ActorSelection]]">initialContacts</a>.<span title="=&gt; scala.collection.mutable.Set[akka.actor.ActorSelection]">asScala</span>.<span title="scala.collection.immutable.Set[akka.actor.ActorSelection]">toSet</span>, <a href="#akka.contrib.pattern.ClusterClient.props(9260950799).establishingGetContactsInterval" title="scala.concurrent.duration.FiniteDuration">establishingGetContactsInterval</a>, <a href="#akka.contrib.pattern.ClusterClient.props(9260950799).refreshContactsInterval" title="scala.concurrent.duration.FiniteDuration">refreshContactsInterval</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Java API: Factory method for `ClusterClient` [[akka.actor.Props]] with
   * default values.
   */</span>
  <span class="keyword">def</span> <a title="(initialContacts: java.util.Set[akka.actor.ActorSelection])akka.actor.Props" id="akka.contrib.pattern.ClusterClient.defaultProps">defaultProps</a><span class="delimiter">(</span><a title="java.util.Set[akka.actor.ActorSelection]" id="akka.contrib.pattern.ClusterClient.defaultProps.initialContacts">initialContacts</a>: java.util.<span title="java.util.Set[akka.actor.ActorSelection]">Set</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
    <a href="#akka.contrib.pattern.ClusterClient.props(0f7dbc47b5)" title="(initialContacts: Set[akka.actor.ActorSelection], establishingGetContactsInterval: scala.concurrent.duration.FiniteDuration, refreshContactsInterval: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterClient.defaultProps.initialContacts" title="(s: java.util.Set[akka.actor.ActorSelection])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Set[akka.actor.ActorSelection]]">initialContacts</a>.<span title="=&gt; scala.collection.mutable.Set[akka.actor.ActorSelection]">asScala</span>.<span title="scala.collection.immutable.Set[akka.actor.ActorSelection]">toSet</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Send extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ClusterClient.Send.readResolve">Send</a><a href="#akka.contrib.pattern.ClusterClient.Send.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.ClusterClient;Send.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.ClusterClient;Send.msg">msg</a>: <span title="Any">Any</span>, <a title="Boolean" id="akka.contrib.pattern.ClusterClient;Send.localAffinity">localAffinity</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/**
     * Convenience constructor with `localAffinity` false
     */</span>
    <span class="keyword">def</span> <a title="(path: String, msg: Any)akka.contrib.pattern.ClusterClient.Send" id="akka.contrib.pattern.ClusterClient;Send.<init>(b6ce381391)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.ClusterClient;Send.<init>(b6ce381391).path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.ClusterClient;Send.<init>(b6ce381391).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.ClusterClient.Send.readResolve" title="Send.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterClient;Send.<init>(b6ce381391).path" title="String">path</a>, <a href="#akka.contrib.pattern.ClusterClient;Send.<init>(b6ce381391).msg" title="Any">msg</a>, localAffinity = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class SendToAll extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ClusterClient.SendToAll.readResolve">SendToAll</a><a href="#akka.contrib.pattern.ClusterClient.SendToAll.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.ClusterClient;SendToAll.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.ClusterClient;SendToAll.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class Publish extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ClusterClient.Publish.readResolve">Publish</a><a href="#akka.contrib.pattern.ClusterClient.Publish.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.ClusterClient;Publish.topic">topic</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.ClusterClient;Publish.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>pattern<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.contrib.pattern.ClusterClient.Internal.type" id="akka.contrib.pattern.ClusterClient.Internal">Internal</a> <a href="#akka.contrib.pattern.ClusterClient.Internal" title="akka.contrib.pattern.ClusterClient.Internal.type" class="delimiter">{</a>
    <span class="keyword">case object</span> <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.productElement.x$1" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type" id="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve">RefreshContactsTick</a>
  <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type" class="delimiter">}</a>
<span title="AnyRef" class="delimiter">}</span>

<span class="comment">/**
 * This actor is intended to be used on an external node that is not member
 * of the cluster. It acts like a gateway for sending messages to actors
 * somewhere in the cluster. From the initial contact points it will establish
 * a connection to a [[ClusterReceptionist]] somewhere in the cluster. It will
 * monitor the connection to the receptionist and establish a new connection if
 * the link goes down. When looking for a new receptionist it uses fresh contact
 * points retrieved from previous establishment, or periodically refreshed
 * contacts, i.e. not necessarily the initial contact points.
 *
 * You can send messages via the `ClusterClient` to any actor in the cluster
 * that is registered in the [[ClusterReceptionist]].
 * Messages are wrapped in [[ClusterClient.Send]], [[ClusterClient.SendToAll]]
 * or [[ClusterClient.Publish]].
 *
 * 1. [[ClusterClient.Send]] -
 * The message will be delivered to one recipient with a matching path, if any such
 * exists. If several entries match the path the message will be delivered
 * to one random destination. The sender of the message can specify that local
 * affinity is preferred, i.e. the message is sent to an actor in the same local actor
 * system as the used receptionist actor, if any such exists, otherwise random to any other
 * matching entry.
 *
 * 2. [[ClusterClient.SendToAll]] -
 * The message will be delivered to all recipients with a matching path.
 *
 * 3. [[ClusterClient.Publish]] -
 * The message will be delivered to all recipients Actors that have been registered as subscribers to
 * to the named topic.
 *
 *  Use the factory method [[ClusterClient#props]]) to create the
 * [[akka.actor.Props]] for the actor.
 */</span>
<span title="AnyRef" class="keyword">class</span> <a title="class ClusterClient extends AnyRef with akka.actor.Actor with akka.actor.Stash with akka.actor.ActorLogging" id="akka.contrib.pattern;ClusterClient">ClusterClient</a><a href="#akka.contrib.pattern;ClusterClient" title="akka.contrib.pattern.ClusterClient" class="delimiter">(</a>
  <a title="Set[akka.actor.ActorSelection]" id="akka.contrib.pattern;ClusterClient.initialContacts">initialContacts</a>: <span title="Set[akka.actor.ActorSelection]">Set</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ClusterClient.establishingGetContactsInterval">establishingGetContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ClusterClient.refreshContactsInterval">refreshContactsInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;Stash" title="akka.actor.Stash">Stash</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.contrib.pattern.ClusterClient" title="akka.contrib.pattern.ClusterClient.type">ClusterClient</a>._
  <span class="keyword">import</span> <a href="#akka.contrib.pattern.ClusterClient" title="akka.contrib.pattern.ClusterClient.type">ClusterClient</a>.<a href="#akka.contrib.pattern.ClusterClient.Internal" title="akka.contrib.pattern.ClusterClient.Internal.type">Internal</a>._
  <span class="keyword">import</span> <a href="#akka.contrib.pattern.ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist.type">ClusterReceptionist</a>.<a href="#akka.contrib.pattern.ClusterReceptionist.Internal" title="akka.contrib.pattern.ClusterReceptionist.Internal.type">Internal</a>._

  <span class="keyword">var</span> <a title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]" id="akka.contrib.pattern;ClusterClient.contacts_=">contacts</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">IndexedSeq</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span> = <a href="#akka.contrib.pattern;ClusterClient.initialContacts" title="Set[akka.actor.ActorSelection]">initialContacts</a>.<span title="=&gt; Vector[akka.actor.ActorSelection]">toVector</span>
  <a href="#akka.contrib.pattern;ClusterClient.sendGetContacts" title="()Unit">sendGetContacts</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">import</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
  <span class="keyword">var</span> <a title="Option[akka.actor.Cancellable]" id="akka.contrib.pattern;ClusterClient.refreshContactsTask_=">refreshContactsTask</a>: <span title="Option[akka.actor.Cancellable]">Option</span><span class="delimiter">[</span>Cancellable<span class="delimiter">]</span> = <span title="None.type">None</span>
  <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick" title="(interval: scala.concurrent.duration.FiniteDuration)Unit">scheduleRefreshContactsTick</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishingGetContactsInterval" title="scala.concurrent.duration.FiniteDuration">establishingGetContactsInterval</a><span class="delimiter">)</span>
  <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type">RefreshContactsTick</a>

  <span class="keyword">def</span> <a title="(interval: scala.concurrent.duration.FiniteDuration)Unit" id="akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick">scheduleRefreshContactsTick</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick.interval">interval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ClusterClient.refreshContactsTask_=" title="=&gt; Option[akka.actor.Cancellable]">refreshContactsTask</a> <span title="(f: akka.actor.Cancellable =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick.$anonfun.x$1" title="akka.actor.Cancellable">_</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#akka.contrib.pattern;ClusterClient.refreshContactsTask_=" title="(x$1: Option[akka.actor.Cancellable])Unit">refreshContactsTask</a> = <span title="(x: akka.actor.Cancellable)Some[akka.actor.Cancellable]">Some</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a>
      <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick.interval" title="scala.concurrent.duration.FiniteDuration">interval</a>, <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick.interval" title="scala.concurrent.duration.FiniteDuration">interval</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type">RefreshContactsTick</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;ClusterClient.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ClusterClient" title="akka.contrib.pattern.ClusterClient" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;UnrestrictedStash.postStop" title="()Unit">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ClusterClient.refreshContactsTask_=" title="=&gt; Option[akka.actor.Cancellable]">refreshContactsTask</a> <span title="(f: akka.actor.Cancellable =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.contrib.pattern;ClusterClient.postStop.$anonfun.x$2" title="akka.actor.Cancellable">_</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.contrib.pattern;ClusterClient.receive">receive</a> = <a href="#akka.contrib.pattern;ClusterClient.establishing" title="=&gt; akka.actor.Actor.Receive">establishing</a>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor.Receive" id="akka.contrib.pattern;ClusterClient.establishing">establishing</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Contacts<span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]" id="akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.contactPoints">contactPoints</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.contactPoints" title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contactPoints</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="(x$1: scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection])Unit">contacts</a> = <a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.contactPoints" title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contactPoints</a>
        <a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contacts</a> <span title="(f: akka.actor.ActorSelection =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection">_</a> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Identify" title="(messageId: Any)akka.actor.Identify">Identify</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> ActorIdentity<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.receptionist">receptionist</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a> <a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.receptionist" title="akka.actor.ActorRef">receptionist</a>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.info(dc73c33c91)" title="(template: String, arg1: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Connected to [{}]&quot;)" class="string">&quot;Connected to [{}]&quot;</span>, <a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.receptionist" title="akka.actor.ActorRef">receptionist</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.receptionist" title="akka.actor.ActorRef">receptionist</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick" title="(interval: scala.concurrent.duration.FiniteDuration)Unit">scheduleRefreshContactsTick</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.refreshContactsInterval" title="scala.concurrent.duration.FiniteDuration">refreshContactsInterval</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.unstashAll(aa97cb1b3d)" title="()Unit">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.active" title="(receptionist: akka.actor.ActorRef)akka.actor.Actor.Receive">active</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.receptionist" title="akka.actor.ActorRef">receptionist</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> ActorIdentity<span class="delimiter">(</span>_, <span title="None.type">None</span><span class="delimiter">)</span> ⇒ <span class="comment">// ok, use another instead</span>
    <span class="keyword">case</span> <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type">RefreshContactsTick</a>    ⇒ <a href="#akka.contrib.pattern;ClusterClient.sendGetContacts" title="()Unit">sendGetContacts</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Any" id="akka.contrib.pattern;ClusterClient.establishing;$anonfun.isDefinedAt.msg">msg</a>                    ⇒ <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.stash" title="()Unit">stash</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(receptionist: akka.actor.ActorRef)akka.actor.Actor.Receive" id="akka.contrib.pattern;ClusterClient.active">active</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterClient.active.receptionist">receptionist</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: Actor.<span title="akka.actor.Actor.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> Send<span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span>, <a title="Boolean" id="akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.localAffinity">localAffinity</a><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;ClusterClient.active.receptionist" title="akka.actor.ActorRef">receptionist</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;Send" title="(path: String, msg: Any, localAffinity: Boolean)akka.contrib.pattern.DistributedPubSubMediator.Send">Send</a><span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span>, <a href="#akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.localAffinity" title="Boolean">localAffinity</a><span class="delimiter">)</span>
    <span class="keyword">case</span> SendToAll<span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;ClusterClient.active.receptionist" title="akka.actor.ActorRef">receptionist</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;SendToAll" title="(path: String, msg: Any, allButSelf: Boolean)akka.contrib.pattern.DistributedPubSubMediator.SendToAll">SendToAll</a><span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Publish<span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.topic">topic</a>, <span title="Any">msg</span><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;ClusterClient.active.receptionist" title="akka.actor.ActorRef">receptionist</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1)" title="(topic: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Publish">Publish</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.topic" title="String">topic</a>, <span title="Any">msg</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.readResolve" title="akka.contrib.pattern.ClusterClient.Internal.RefreshContactsTick.type">RefreshContactsTick</a> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">receptionist</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a>
    <span class="keyword">case</span> Contacts<span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]" id="akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.contactPoints">contactPoints</a><span class="delimiter">)</span> ⇒
      <span class="comment">// refresh of contacts</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.contactPoints" title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contactPoints</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="(x$1: scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection])Unit">contacts</a> = <a href="#akka.contrib.pattern;ClusterClient.active;$anonfun.isDefinedAt.contactPoints" title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contactPoints</a>
    <span class="keyword">case</span> Terminated<span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.active.receptionist" title="akka.actor.ActorRef">`receptionist`</a><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.info(dc73c33c91)" title="(template: String, arg1: Any)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Lost contact with [{}], restablishing connection&quot;)" class="string">&quot;Lost contact with [{}], restablishing connection&quot;</span>, <a href="#akka.contrib.pattern;ClusterClient.active.receptionist" title="akka.actor.ActorRef">receptionist</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ClusterClient.sendGetContacts" title="()Unit">sendGetContacts</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ClusterClient.scheduleRefreshContactsTick" title="(interval: scala.concurrent.duration.FiniteDuration)Unit">scheduleRefreshContactsTick</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishingGetContactsInterval" title="scala.concurrent.duration.FiniteDuration">establishingGetContactsInterval</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.establishing" title="=&gt; akka.actor.Actor.Receive">establishing</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _: <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorIdentity" title="akka.actor.ActorIdentity">ActorIdentity</a> ⇒ <span class="comment">// ok, from previous establish, already handled</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;ClusterClient.sendGetContacts">sendGetContacts</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contacts</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.contrib.pattern;ClusterClient.initialContacts" title="Set[akka.actor.ActorSelection]">initialContacts</a> <span title="(f: akka.actor.ActorSelection =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection">_</a> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a> <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contacts</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterClient.initialContacts" title="Set[akka.actor.ActorSelection]">initialContacts</a> <span title="(elems: scala.collection.GenTraversableOnce[akka.actor.ActorSelection])scala.collection.immutable.Set[akka.actor.ActorSelection]">++</span> <a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contacts</a><span class="delimiter">)</span> <span title="(f: akka.actor.ActorSelection =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection">_</a> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a> <span class="delimiter">}</span>
    <span class="keyword">else</span> <a href="#akka.contrib.pattern;ClusterClient.contacts_=" title="=&gt; scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">contacts</a> <span title="(f: akka.actor.ActorSelection =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection">_</a> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Extension that starts [[ClusterReceptionist]] and accompanying [[DistributedPubSubMediator]]
 * with settings defined in config section `akka.contrib.cluster.receptionist`.
 * The [[DistributedPubSubMediator]] is started by the [[DistributedPubSubExtension]].
 */</span>
<span class="keyword">object</span> <a title="akka.contrib.pattern.ClusterReceptionistExtension.type" id="akka.contrib.pattern.ClusterReceptionistExtension">ClusterReceptionistExtension</a> <a href="#akka.contrib.pattern.ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension.type" class="keyword">extends</a> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId" title="akka.actor.ExtensionId[akka.contrib.pattern.ClusterReceptionistExtension]">ExtensionId</a><span class="delimiter">[</span>ClusterReceptionistExtension<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionIdProvider" title="akka.actor.ExtensionIdProvider">ExtensionIdProvider</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ActorSystem)akka.contrib.pattern.ClusterReceptionistExtension" id="akka.contrib.pattern.ClusterReceptionistExtension.get">get</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.contrib.pattern.ClusterReceptionistExtension.get.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.contrib.pattern;ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension">ClusterReceptionistExtension</a> = <span class="keyword">super</span>.<a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.get" title="(system: akka.actor.ActorSystem)akka.contrib.pattern.ClusterReceptionistExtension">get</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionistExtension.get.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()akka.contrib.pattern.ClusterReceptionistExtension.type" id="akka.contrib.pattern.ClusterReceptionistExtension.lookup">lookup</a> = <a href="#akka.contrib.pattern.ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension.type">ClusterReceptionistExtension</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ExtendedActorSystem)akka.contrib.pattern.ClusterReceptionistExtension" id="akka.contrib.pattern.ClusterReceptionistExtension.createExtension">createExtension</a><span class="delimiter">(</span><a title="akka.actor.ExtendedActorSystem" id="akka.contrib.pattern.ClusterReceptionistExtension.createExtension.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>: <a href="#akka.contrib.pattern;ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension">ClusterReceptionistExtension</a> =
    <span title="akka.contrib.pattern.ClusterReceptionistExtension" class="keyword">new</span> <a href="#akka.contrib.pattern;ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension">ClusterReceptionistExtension</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionistExtension.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ClusterReceptionistExtension extends AnyRef with akka.actor.Extension" id="akka.contrib.pattern;ClusterReceptionistExtension">ClusterReceptionistExtension</a><a href="#akka.contrib.pattern;ClusterReceptionistExtension" title="akka.contrib.pattern.ClusterReceptionistExtension" class="delimiter">(</a><a title="akka.actor.ExtendedActorSystem" id="akka.contrib.pattern;ClusterReceptionistExtension.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;Extension" title="akka.actor.Extension">Extension</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.contrib.pattern;ClusterReceptionistExtension.config">config</a> = <a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><span title="String(&quot;akka.contrib.cluster.receptionist&quot;)" class="string">&quot;akka.contrib.cluster.receptionist&quot;</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Option[String]" id="akka.contrib.pattern;ClusterReceptionistExtension.role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.contrib.pattern;ClusterReceptionistExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;role&quot;)" class="string">&quot;role&quot;</span><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> ⇒ <span title="None.type">None</span>
    <span class="keyword">case</span> <a title="String" id="akka.contrib.pattern;ClusterReceptionistExtension.role.r">r</a>  ⇒ <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.role.r" title="String">r</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if this member is not tagged with the role configured for the
   * receptionist.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.contrib.pattern;ClusterReceptionistExtension.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.isTerminated" title="=&gt; Boolean">isTerminated</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.role" title="=&gt; Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<a href="#akka.contrib.pattern;ClusterReceptionistExtension.isTerminated.$anonfun.elem" title="(elem: String)Boolean">contains</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Register the actors that should be reachable for the clients in this [[DistributedPubSubMediator]].
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.pubSubMediator">pubSubMediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.contrib.pattern.DistributedPubSubExtension">DistributedPubSubExtension</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern;DistributedPubSubExtension.mediator" title="=&gt; akka.actor.ActorRef">mediator</a>

  <span class="comment">/**
   * Register an actor that should be reachable for the clients.
   * The clients can send messages to this actor with `Send` or `SendToAll` using
   * the path elements of the `ActorRef`, e.g. `&quot;/user/myservice&quot;`.
   */</span>
  <span class="keyword">def</span> <a title="(actor: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;ClusterReceptionistExtension.registerService">registerService</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerService.actor">actor</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerService.qual$1">pubSubMediator</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerService.x$8">!</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;Put" title="(ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Put">Put</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Put" id="akka.contrib.pattern;ClusterReceptionistExtension.registerService.x$7" class="delimiter">(</a><a href="#akka.contrib.pattern;ClusterReceptionistExtension.registerService.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>

  <span class="comment">/**
   * A registered actor will be automatically unregistered when terminated,
   * but it can also be explicitly unregistered before termination.
   */</span>
  <span class="keyword">def</span> <a title="(actor: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterService">unregisterService</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterService.actor">actor</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterService.qual$2">pubSubMediator</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterService.x$10">!</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;Remove" title="(path: String)akka.contrib.pattern.DistributedPubSubMediator.Remove">Remove</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Remove" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterService.x$9" class="delimiter">(</a><a href="#akka.contrib.pattern;ClusterReceptionistExtension.unregisterService.actor" title="akka.actor.ActorRef">actor</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithoutAddress" title="=&gt; String">toStringWithoutAddress</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Register an actor that should be reachable for the clients to a named topic.
   * Several actors can be registered to the same topic name, and all will receive
   * published messages.
   * The client can publish messages to this topic with `Publish`.
   */</span>
  <span class="keyword">def</span> <a title="(topic: String, actor: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber">registerSubscriber</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.actor">actor</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.qual$3">pubSubMediator</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.x$12">!</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110)" title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Subscribe">Subscribe</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe" id="akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.x$11" class="delimiter">(</a><a href="#akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.topic" title="String">topic</a>, <a href="#akka.contrib.pattern;ClusterReceptionistExtension.registerSubscriber.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>

  <span class="comment">/**
   * A registered subscriber will be automatically unregistered when terminated,
   * but it can also be explicitly unregistered before termination.
   */</span>
  <span class="keyword">def</span> <a title="(topic: String, actor: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber">unregisterSubscriber</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.actor">actor</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.qual$4">pubSubMediator</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.x$14">!</a> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca)" title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">Unsubscribe</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" id="akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.x$13" class="delimiter">(</a><a href="#akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.topic" title="String">topic</a>, <a href="#akka.contrib.pattern;ClusterReceptionistExtension.unregisterSubscriber.actor" title="akka.actor.ActorRef">actor</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The [[ClusterReceptionist]] actor
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.receptionist">receptionist</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <span title="akka.actor.ActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;ClusterReceptionistExtension.receptionist.numberOfContacts">numberOfContacts</a>: <span title="Int">Int</span> = <a href="#akka.contrib.pattern;ClusterReceptionistExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;number-of-contacts&quot;)" class="string">&quot;number-of-contacts&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ClusterReceptionistExtension.receptionist.responseTunnelReceiveTimeout">responseTunnelReceiveTimeout</a> =
        <a href="#akka.contrib.pattern;ClusterReceptionistExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String, x$2: java.util.concurrent.TimeUnit)Long">getDuration</span><span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong" class="delimiter">(</span><span title="String(&quot;response-tunnel-receive-timeout&quot;)" class="string">&quot;response-tunnel-receive-timeout&quot;</span>, <span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>
      <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;ClusterReceptionistExtension.receptionist.name">name</a> = <a href="#akka.contrib.pattern;ClusterReceptionistExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;name&quot;)" class="string">&quot;name&quot;</span><span class="delimiter">)</span>
      <span class="comment">// important to use val mediator here to activate it outside of ClusterReceptionist constructor</span>
      <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionistExtension.receptionist.mediator">mediator</a> = <a href="#akka.contrib.pattern;ClusterReceptionistExtension.pubSubMediator" title="=&gt; akka.actor.ActorRef">pubSubMediator</a>
      <a href="#akka.contrib.pattern;ClusterReceptionistExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist.type">ClusterReceptionist</a>.<a href="#akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba)" title="(pubSubMediator: akka.actor.ActorRef, role: Option[String], numberOfContacts: Int, responseTunnelReceiveTimeout: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionistExtension.receptionist.mediator" title="akka.actor.ActorRef">mediator</a>, <a href="#akka.contrib.pattern;ClusterReceptionistExtension.role" title="=&gt; Option[String]">role</a>, <a href="#akka.contrib.pattern;ClusterReceptionistExtension.receptionist.numberOfContacts" title="Int">numberOfContacts</a>,
        <a href="#akka.contrib.pattern;ClusterReceptionistExtension.receptionist.responseTunnelReceiveTimeout" title="scala.concurrent.duration.FiniteDuration">responseTunnelReceiveTimeout</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern;ClusterReceptionistExtension.receptionist.name" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="akka.contrib.pattern.ClusterReceptionist.type" id="akka.contrib.pattern.ClusterReceptionist">ClusterReceptionist</a> <a href="#akka.contrib.pattern.ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist.type" class="delimiter">{</a>

  <span class="comment">/**
   * Scala API: Factory method for `ClusterReceptionist` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(pubSubMediator: akka.actor.ActorRef, role: Option[String], numberOfContacts: Int, responseTunnelReceiveTimeout: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba)">props</a><span class="delimiter">(</span>
    <a title="akka.actor.ActorRef" id="akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba).pubSubMediator">pubSubMediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
    <a title="Option[String]" id="akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba).role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
    <a title="Int" id="akka.contrib.pattern.ClusterReceptionist.props$default$3">numberOfContacts</a>: <span title="Int">Int</span> = <span title="Int(3)" class="int">3</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterReceptionist.props$default$4">responseTunnelReceiveTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">30</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.ClusterReceptionist](classOf[akka.contrib.pattern.ClusterReceptionist])" class="delimiter">[</span>ClusterReceptionist<span class="delimiter">]</span>, <a href="#akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba).pubSubMediator" title="akka.actor.ActorRef">pubSubMediator</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba).role" title="Option[String]">role</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.props$default$3" title="Int">numberOfContacts</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.props$default$4" title="scala.concurrent.duration.FiniteDuration">responseTunnelReceiveTimeout</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: Factory method for `ClusterReceptionist` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(pubSubMediator: akka.actor.ActorRef, role: String, numberOfContacts: Int, responseTunnelReceiveTimeout: scala.concurrent.duration.FiniteDuration)akka.actor.Props" id="akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f)">props</a><span class="delimiter">(</span>
    <a title="akka.actor.ActorRef" id="akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).pubSubMediator">pubSubMediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
    <a title="String" id="akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).role">role</a>: <span title="String">String</span>,
    <a title="Int" id="akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).numberOfContacts">numberOfContacts</a>: <span title="Int">Int</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).responseTunnelReceiveTimeout">responseTunnelReceiveTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="#akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba)" title="(pubSubMediator: akka.actor.ActorRef, role: Option[String], numberOfContacts: Int, responseTunnelReceiveTimeout: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).pubSubMediator" title="akka.actor.ActorRef">pubSubMediator</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.Internal" title="akka.contrib.pattern.ClusterReceptionist.Internal.type">Internal</a>.<a href="#akka.contrib.pattern.ClusterReceptionist.Internal.roleOption" title="(role: String)Option[String]">roleOption</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).role" title="String">role</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).numberOfContacts" title="Int">numberOfContacts</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.props(16a596eb7f).responseTunnelReceiveTimeout" title="scala.concurrent.duration.FiniteDuration">responseTunnelReceiveTimeout</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: Factory method for `ClusterReceptionist` [[akka.actor.Props]]
   * with default values.
   */</span>
  <span class="keyword">def</span> <a title="(pubSubMediator: akka.actor.ActorRef, role: String)akka.actor.Props" id="akka.contrib.pattern.ClusterReceptionist.props(902e6beb02)">props</a><span class="delimiter">(</span>
    <a title="akka.actor.ActorRef" id="akka.contrib.pattern.ClusterReceptionist.props(902e6beb02).pubSubMediator">pubSubMediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
    <a title="String" id="akka.contrib.pattern.ClusterReceptionist.props(902e6beb02).role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="#akka.contrib.pattern.ClusterReceptionist.props(40dba8c5ba)" title="(pubSubMediator: akka.actor.ActorRef, role: Option[String], numberOfContacts: Int, responseTunnelReceiveTimeout: scala.concurrent.duration.FiniteDuration)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.props(902e6beb02).pubSubMediator" title="akka.actor.ActorRef">pubSubMediator</a>, <a href="#akka.contrib.pattern.ClusterReceptionist.Internal" title="akka.contrib.pattern.ClusterReceptionist.Internal.type">Internal</a>.<a href="#akka.contrib.pattern.ClusterReceptionist.Internal.roleOption" title="(role: String)Option[String]">roleOption</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.props(902e6beb02).role" title="String">role</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>pattern<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.contrib.pattern.ClusterReceptionist.Internal.type" id="akka.contrib.pattern.ClusterReceptionist.Internal">Internal</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal" title="akka.contrib.pattern.ClusterReceptionist.Internal.type" class="delimiter">{</a>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case object</span> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.productElement.x$1" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type" id="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve">GetContacts</a>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Contacts extends AnyRef with Product with Serializable" id="akka.contrib.pattern.ClusterReceptionist.Internal.Contacts.readResolve">Contacts</a><a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Contacts.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]" id="akka.contrib.pattern.ClusterReceptionist.Internal;Contacts.contactPoints">contactPoints</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">IndexedSeq</span><span class="delimiter">[</span>ActorSelection<span class="delimiter">]</span><span class="delimiter">)</span>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case object</span> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Ping.productElement.x$1" title="akka.contrib.pattern.ClusterReceptionist.Internal.Ping.type" id="akka.contrib.pattern.ClusterReceptionist.Internal.Ping.readResolve">Ping</a>

    <span class="keyword">def</span> <a title="(role: String)Option[String]" id="akka.contrib.pattern.ClusterReceptionist.Internal.roleOption">roleOption</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.ClusterReceptionist.Internal.roleOption.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.roleOption.role" title="String">role</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> | <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> ⇒ <span title="None.type">None</span>
      <span class="keyword">case</span> _         ⇒ <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.Internal.roleOption.role" title="String">role</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Replies are tunneled via this actor, child of the receptionist, to avoid
     * inbound connections from other cluster nodes to the client.
     */</span>
    <span class="keyword">class</span> <a title="class ClientResponseTunnel extends AnyRef with akka.actor.Actor" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel">ClientResponseTunnel</a><a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel" title="akka.contrib.pattern.ClusterReceptionist.Internal.ClientResponseTunnel" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.client">client</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.timeout">timeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.timeout" title="scala.concurrent.duration.FiniteDuration">timeout</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.client" title="akka.actor.ActorRef">client</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Ping.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.Ping.type">Ping</a>                 ⇒ <span class="comment">// keep alive from client</span>
        <span class="keyword">case</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a>       ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> Terminated<span class="delimiter">(</span><a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.client" title="akka.actor.ActorRef">`client`</a><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> <a title="Any" id="akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.receive;$anonfun.isDefinedAt.msg">msg</a>                  ⇒ <a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.client" title="akka.actor.ActorRef">client</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal;ClientResponseTunnel.receive;$anonfun.isDefinedAt.msg" title="Any">msg</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span title="AnyRef" class="delimiter">}</span>

<span class="comment">/**
 * [[ClusterClient]] connects to this actor to retrieve. The `ClusterReceptionist` is
 * supposed to be started on all nodes, or all nodes with specified role, in the cluster.
 * The receptionist can be started with the [[ClusterReceptionistExtension]] or as an
 * ordinary actor (use the factory method [[ClusterReceptionist#props]]).
 *
 * The receptionist forwards messages from the client to the associated [[DistributedPubSubMediator]],
 * i.e. the client can send messages to any actor in the cluster that is registered in the
 * `DistributedPubSubMediator`. Messages from the client are wrapped in
 * [[DistributedPubSubMediator.Send]], [[DistributedPubSubMediator.SendToAll]]
 * or [[DistributedPubSubMediator.Publish]] with the semantics described in
 * [[DistributedPubSubMediator]].
 *
 * Response messages from the destination actor are tunneled via the receptionist
 * to avoid inbound connections from other cluster nodes to the client, i.e.
 * the `sender`, as seen by the destination actor, is not the client itself.
 * The `sender` of the response messages, as seen by the client, is preserved
 * as the original sender, so the client can choose to send subsequent messages
 * directly to the actor in the cluster.
 */</span>
<span title="AnyRef" class="keyword">class</span> <a title="class ClusterReceptionist extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.contrib.pattern;ClusterReceptionist">ClusterReceptionist</a><a href="#akka.contrib.pattern;ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist" class="delimiter">(</a>
  <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionist.pubSubMediator">pubSubMediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>,
  <a title="Option[String]" id="akka.contrib.pattern;ClusterReceptionist.role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
  <a title="Int" id="akka.contrib.pattern;ClusterReceptionist.numberOfContacts">numberOfContacts</a>: <span title="Int">Int</span>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;ClusterReceptionist.responseTunnelReceiveTimeout">responseTunnelReceiveTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<span class="delimiter">{</span> Send, SendToAll, Publish <span class="delimiter">}</span>

  <span class="keyword">import</span> <a href="#akka.contrib.pattern.ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist.type">ClusterReceptionist</a>.<a href="#akka.contrib.pattern.ClusterReceptionist.Internal" title="akka.contrib.pattern.ClusterReceptionist.Internal.type">Internal</a>._

  <span class="keyword">val</span> <a title="akka.cluster.Cluster" id="akka.contrib.pattern;ClusterReceptionist.cluster">cluster</a> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.selfAddress

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.role" title="Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<a href="#akka.contrib.pattern;ClusterReceptionist.<local ClusterReceptionist>.$anonfun.elem" title="(elem: String)Boolean">contains</a><span class="delimiter">)</span>,
    <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;This cluster member [&quot;)">This cluster member [$</span><span class="delimiter">{</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">}</span><span title="String(&quot;] doesn\'t have the role [&quot;)">] doesn't have the role [$</span><a href="#akka.contrib.pattern;ClusterReceptionist.role" title="Option[String]">role</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.contrib.pattern;ClusterReceptionist.nodes_=">nodes</a>: immutable.<span title="scala.collection.immutable.SortedSet[akka.actor.Address]">SortedSet</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(node: akka.actor.Address)Int" id="akka.contrib.pattern;ClusterReceptionist.nodes.hashFor">hashFor</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.node">node</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.node" title="akka.actor.Address">node</a> <span title="Int" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="comment">// cluster node identifier is the host and port of the address; protocol and system is assumed to be the same</span>
      <span class="keyword">case</span> Address<span class="delimiter">(</span>_, _, Some<span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.host">host</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Int" id="akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.port">port</a><span class="delimiter">)</span><span class="delimiter">)</span> ⇒ <a href="../../../../actor/akka/routing/MurmurHash.scala.html#akka.routing.MurmurHash" title="akka.routing.MurmurHash.type">MurmurHash</a>.<a href="../../../../actor/akka/routing/MurmurHash.scala.html#akka.routing.MurmurHash.stringHash" title="(s: String)Int">stringHash</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><span class="delimiter">{</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.host" title="String">host</a><span class="delimiter">}</span><span title="String(&quot;:&quot;)">:$</span><span class="delimiter">{</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.port" title="Int">port</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ ⇒
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Unexpected address without host/port: [&quot;)">Unexpected address without host/port: [$</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor.node" title="akka.actor.Address">node</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="Ordering[akka.actor.Address]" id="akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering">ringOrdering</a>: <span title="Ordering[akka.actor.Address]">Ordering</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span title="=&gt; math.Ordering.type">Ordering</span>.<span title="[T](cmp: (T, T) =&gt; Boolean)scala.math.Ordering[T]">fromLessThan</span><span title="(cmp: (akka.actor.Address, akka.actor.Address) =&gt; Boolean)scala.math.Ordering[akka.actor.Address]" class="delimiter">[</span><a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">]</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.a">a</a>, <a title="akka.actor.Address" id="akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.b">b</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.ha">ha</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor" title="(node: akka.actor.Address)Int">hashFor</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.a" title="akka.actor.Address">a</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.hb">hb</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.hashFor" title="(node: akka.actor.Address)Int">hashFor</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.b" title="akka.actor.Address">b</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.ha" title="Int">ha</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.hb" title="Int">hb</a> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.ha" title="Int">ha</a> <span title="(x: Int)Boolean">==</span> <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.hb" title="Int">hb</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.Member" title="akka.cluster.Member.type">Member</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.Member.addressOrdering" title="=&gt; Ordering[akka.actor.Address]">addressOrdering</a>.<span title="(x: akka.actor.Address, y: akka.actor.Address)Int">compare</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.a" title="akka.actor.Address">a</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering.$anonfun.b" title="akka.actor.Address">b</a><span class="delimiter">)</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    immutable.<span title="(elems: akka.actor.Address*)(implicit ord: Ordering[akka.actor.Address])scala.collection.immutable.SortedSet[akka.actor.Address]">SortedSet</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes.ringOrdering" title="Ordering[akka.actor.Address]" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;ClusterReceptionist.virtualNodesFactor">virtualNodesFactor</a> = <span title="Int(10)" class="int">10</span>
  <span class="keyword">var</span> <a title="akka.routing.ConsistentHash[akka.actor.Address]" id="akka.contrib.pattern;ClusterReceptionist.consistentHash_=">consistentHash</a>: <a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing;ConsistentHash" title="akka.routing.ConsistentHash[akka.actor.Address]">ConsistentHash</a><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing.ConsistentHash.apply" title="(nodes: Iterable[akka.actor.Address], virtualNodesFactor: Int)(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Address])akka.routing.ConsistentHash[akka.actor.Address]">ConsistentHash</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Address]" class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.virtualNodesFactor" title="=&gt; Int">virtualNodesFactor</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;ClusterReceptionist.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.preStart" title="()Unit">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.isTerminated" title="=&gt; Boolean">isTerminated</a>, <span title="String(&quot;Cluster node must not be terminated&quot;)" class="string">&quot;Cluster node must not be terminated&quot;</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.subscribe(6cfb44d410)" title="(subscriber: akka.actor.ActorRef, to: Class[_]*)Unit">subscribe</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.cluster.ClusterEvent.MemberEvent](classOf[akka.cluster.ClusterEvent$$MemberEvent])" class="delimiter">[</span>MemberEvent<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;ClusterReceptionist.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;ClusterReceptionist" title="akka.contrib.pattern.ClusterReceptionist" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.postStop" title="()Unit">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(m: akka.cluster.Member)Boolean" id="akka.contrib.pattern;ClusterReceptionist.matchingRole">matchingRole</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.contrib.pattern;ClusterReceptionist.matchingRole.m">m</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.contrib.pattern;ClusterReceptionist.role" title="Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.matchingRole.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.hasRole" title="(role: String)Boolean">hasRole</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(client: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionist.responseTunnel">responseTunnel</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionist.responseTunnel.client">client</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;ClusterReceptionist.responseTunnel.encName">encName</a> = <span title="java.net.URLEncoder.type">URLEncoder</span>.<span title="(x$1: String, x$2: String)String">encode</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel.client" title="akka.actor.ActorRef">client</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toSerializationFormat" title="=&gt; String">toSerializationFormat</a>, <span title="String(&quot;utf-8&quot;)" class="string">&quot;utf-8&quot;</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel.encName" title="String">encName</a><span class="delimiter">)</span> <span title="akka.actor.ActorRef" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionist.responseTunnel.tunnel">tunnel</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel.tunnel" title="akka.actor.ActorRef">tunnel</a>
      <span class="keyword">case</span> <span title="None.type">None</span> ⇒
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.ClusterReceptionist.Internal.ClientResponseTunnel](classOf[akka.contrib.pattern.ClusterReceptionist$$Internal$ClientResponseTunnel])" class="delimiter">[</span>ClientResponseTunnel<span class="delimiter">]</span>, <a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel.client" title="akka.actor.ActorRef">client</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnelReceiveTimeout" title="scala.concurrent.duration.FiniteDuration">responseTunnelReceiveTimeout</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel.encName" title="String">encName</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern;ClusterReceptionist.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Any" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.isDefinedAt.msg">msg</a> @ <span class="delimiter">(</span>_: <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;Send" title="akka.contrib.pattern.DistributedPubSubMediator.Send">Send</a> | _: <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;SendToAll" title="akka.contrib.pattern.DistributedPubSubMediator.SendToAll">SendToAll</a> | _: <a href="DistributedPubSubMediator.scala.html#akka.contrib.pattern.DistributedPubSubMediator;Publish" title="akka.contrib.pattern.DistributedPubSubMediator.Publish">Publish</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.tunnel">tunnel</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.responseTunnel" title="(client: akka.actor.ActorRef)akka.actor.ActorRef">responseTunnel</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">tunnel</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Ping.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.Ping.type">Ping</a> <span class="comment">// keep alive</span>
      <a href="#akka.contrib.pattern;ClusterReceptionist.pubSubMediator" title="akka.actor.ActorRef">pubSubMediator</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.isDefinedAt.msg" title="Any">msg</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.tunnel" title="akka.actor.ActorRef">tunnel</a><span class="delimiter">)</span>

    <span class="keyword">case</span> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.readResolve" title="akka.contrib.pattern.ClusterReceptionist.Internal.GetContacts.type">GetContacts</a> ⇒
      <span class="comment">// Consistent hashing is used to ensure that the reply to GetContacts</span>
      <span class="comment">// is the same from all nodes (most of the time) and it also</span>
      <span class="comment">// load balances the client connections among the nodes in the cluster.</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.numberOfContacts" title="Int">numberOfContacts</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Contacts.readResolve" title="(contactPoints: scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection])akka.contrib.pattern.ClusterReceptionist.Internal.Contacts">Contacts</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="(f: akka.actor.Address =&gt; akka.actor.ActorSelection)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.actor.Address],akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]])scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">map</span><span class="delimiter">(</span><span title="akka.actor.Address">a</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(271eeb39be)" title="(path: String)akka.actor.ActorSelection">actorSelection</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><span title="akka.actor.Address">a</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.actor.Address],akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="comment">// using toStringWithAddress in case the client is local, normally it is not, and</span>
        <span class="comment">// toStringWithAddress will use the remote address of the client</span>
        <span class="keyword">val</span> <a title="akka.actor.Address" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.a">a</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.consistentHash_=" title="=&gt; akka.routing.ConsistentHash[akka.actor.Address]">consistentHash</a>.<a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing;ConsistentHash.nodeFor(94748ca6b4)" title="(key: String)akka.actor.Address">nodeFor</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice">slice</a> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.actor.Address]" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice.first">first</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="(from: akka.actor.Address)scala.collection.immutable.SortedSet[akka.actor.Address]">from</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.a" title="akka.actor.Address">a</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">tail</span>.<span title="(n: Int)scala.collection.immutable.SortedSet[akka.actor.Address]">take</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.numberOfContacts" title="Int">numberOfContacts</a><span class="delimiter">)</span>
          <span title="scala.collection.immutable.SortedSet[akka.actor.Address]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice.first" title="scala.collection.immutable.SortedSet[akka.actor.Address]">first</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <a href="#akka.contrib.pattern;ClusterReceptionist.numberOfContacts" title="Int">numberOfContacts</a><span class="delimiter">)</span> <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice.first" title="scala.collection.immutable.SortedSet[akka.actor.Address]">first</a>
          <span class="keyword">else</span> <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice.first" title="scala.collection.immutable.SortedSet[akka.actor.Address]">first</a> <span title="(elems: scala.collection.GenTraversableOnce[akka.actor.Address])scala.collection.immutable.SortedSet[akka.actor.Address]">++</span> <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="(n: Int)scala.collection.immutable.SortedSet[akka.actor.Address]">take</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.numberOfContacts" title="Int">numberOfContacts</a> <span title="(x: Int)Int">-</span> <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice.first" title="scala.collection.immutable.SortedSet[akka.actor.Address]">first</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.ClusterReceptionist.Internal.Contacts.readResolve" title="(contactPoints: scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection])akka.contrib.pattern.ClusterReceptionist.Internal.Contacts">Contacts</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse.slice" title="scala.collection.immutable.SortedSet[akka.actor.Address]">slice</a>.<span title="(f: akka.actor.Address =&gt; akka.actor.ActorSelection)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.actor.Address],akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]])scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]">map</span><span class="delimiter">(</span><span title="akka.actor.Address">a</span> ⇒ <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(271eeb39be)" title="(path: String)akka.actor.ActorSelection">actorSelection</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><span title="akka.actor.Address">a</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.actor.Address],akka.actor.ActorSelection,scala.collection.immutable.IndexedSeq[akka.actor.ActorSelection]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.isDefinedAt.state">state</a>: <a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> ⇒
      <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> = <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>.<span title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">empty</span> <span title="(elems: scala.collection.GenTraversableOnce[akka.actor.Address])scala.collection.immutable.SortedSet[akka.actor.Address]">++</span> <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.isDefinedAt.state" title="akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.actor.Address])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.actor.Address,scala.collection.immutable.Set[akka.actor.Address]])scala.collection.immutable.Set[akka.actor.Address]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.actor.Address] with Serializable" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> <a title="akka.cluster.Member" id="akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m">m</a> <span class="keyword">if</span> <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.MemberStatus.Joining" title="akka.cluster.MemberStatus.Joining.type">Joining</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern;ClusterReceptionist.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;ClusterReceptionist.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span class="delimiter">}</span>
      <a href="#akka.contrib.pattern;ClusterReceptionist.consistentHash_=" title="(x$1: akka.routing.ConsistentHash[akka.actor.Address])Unit">consistentHash</a> = <a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing.ConsistentHash.apply" title="(nodes: Iterable[akka.actor.Address], virtualNodesFactor: Int)(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Address])akka.routing.ConsistentHash[akka.actor.Address]">ConsistentHash</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Address]" class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.virtualNodesFactor" title="=&gt; Int">virtualNodesFactor</a><span class="delimiter">)</span>

    <span class="keyword">case</span> MemberUp<span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.SortedSet[akka.actor.Address]">+=</span> <span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
        <a href="#akka.contrib.pattern;ClusterReceptionist.consistentHash_=" title="(x$1: akka.routing.ConsistentHash[akka.actor.Address])Unit">consistentHash</a> = <a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing.ConsistentHash.apply" title="(nodes: Iterable[akka.actor.Address], virtualNodesFactor: Int)(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Address])akka.routing.ConsistentHash[akka.actor.Address]">ConsistentHash</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Address]" class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.virtualNodesFactor" title="=&gt; Int">virtualNodesFactor</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> MemberRemoved<span class="delimiter">(</span><span title="akka.cluster.Member">m</span>, _<span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="(x$1: scala.collection.immutable.SortedSet[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.SortedSet[akka.actor.Address]">-=</span> <span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
        <a href="#akka.contrib.pattern;ClusterReceptionist.consistentHash_=" title="(x$1: akka.routing.ConsistentHash[akka.actor.Address])Unit">consistentHash</a> = <a href="../../../../actor/akka/routing/ConsistentHash.scala.html#akka.routing.ConsistentHash.apply" title="(nodes: Iterable[akka.actor.Address], virtualNodesFactor: Int)(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Address])akka.routing.ConsistentHash[akka.actor.Address]">ConsistentHash</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Address]" class="delimiter">(</span><a href="#akka.contrib.pattern;ClusterReceptionist.nodes_=" title="=&gt; scala.collection.immutable.SortedSet[akka.actor.Address]">nodes</a>, <a href="#akka.contrib.pattern;ClusterReceptionist.virtualNodesFactor" title="=&gt; Int">virtualNodesFactor</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> _: <a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> ⇒ <span class="comment">// not of interest</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>
