<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>contrib/akka/contrib/pattern/DistributedPubSubMediator.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.contrib.pattern

<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> scala.concurrent.forkjoin.ThreadLocalRandom
<span class="keyword">import</span> java.net.URLEncoder
<span class="keyword">import</span> akka.actor.Actor
<span class="keyword">import</span> akka.actor.ActorLogging
<span class="keyword">import</span> akka.actor.ActorPath
<span class="keyword">import</span> akka.actor.ActorRef
<span class="keyword">import</span> akka.actor.ActorSystem
<span class="keyword">import</span> akka.actor.Address
<span class="keyword">import</span> akka.actor.ExtendedActorSystem
<span class="keyword">import</span> akka.actor.Extension
<span class="keyword">import</span> akka.actor.ExtensionId
<span class="keyword">import</span> akka.actor.ExtensionIdProvider
<span class="keyword">import</span> akka.actor.Props
<span class="keyword">import</span> akka.actor.Terminated
<span class="keyword">import</span> akka.cluster.Cluster
<span class="keyword">import</span> akka.cluster.<a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
<span class="keyword">import</span> akka.cluster.Member
<span class="keyword">import</span> akka.cluster.MemberStatus
<span class="keyword">import</span> akka.routing.RandomRoutingLogic
<span class="keyword">import</span> akka.routing.RoutingLogic
<span class="keyword">import</span> akka.routing.Routee
<span class="keyword">import</span> akka.routing.ActorRefRoutee
<span class="keyword">import</span> akka.routing.Router
<span class="keyword">import</span> akka.routing.RouterEnvelope
<span class="keyword">import</span> akka.routing.RoundRobinRoutingLogic
<span class="keyword">import</span> akka.routing.ConsistentHashingRoutingLogic
<span class="keyword">import</span> akka.routing.BroadcastRoutingLogic
<span class="keyword">import</span> scala.collection.immutable.TreeMap

<span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.type" id="akka.contrib.pattern.DistributedPubSubMediator">DistributedPubSubMediator</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type" class="delimiter">{</a>

  <span class="comment">/**
   * Scala API: Factory method for `DistributedPubSubMediator` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(role: Option[String], routingLogic: akka.routing.RoutingLogic, gossipInterval: scala.concurrent.duration.FiniteDuration, removedTimeToLive: scala.concurrent.duration.FiniteDuration, maxDeltaElements: Int)akka.actor.Props" id="akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1)">props</a><span class="delimiter">(</span>
    <a title="Option[String]" id="akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1).role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
    <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern.DistributedPubSubMediator.props$default$2">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a> = <a href="../../../../actor/akka/routing/Random.scala.html#akka.routing.RandomRoutingLogic.apply" title="()akka.routing.RandomRoutingLogic">RandomRoutingLogic</a><span class="delimiter">(</span><span class="delimiter">)</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.props$default$3">gossipInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">second</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.props$default$4">removedTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">2</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">minutes</span>,
    <a title="Int" id="akka.contrib.pattern.DistributedPubSubMediator.props$default$5">maxDeltaElements</a>: <span title="Int">Int</span> = <span title="Int(3000)" class="int">3000</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.DistributedPubSubMediator](classOf[akka.contrib.pattern.DistributedPubSubMediator])" class="delimiter">[</span>DistributedPubSubMediator<span class="delimiter">]</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1).role" title="Option[String]">role</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props$default$2" title="akka.routing.RoutingLogic">routingLogic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props$default$3" title="scala.concurrent.duration.FiniteDuration">gossipInterval</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props$default$4" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props$default$5" title="Int">maxDeltaElements</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: Factory method for `DistributedPubSubMediator` [[akka.actor.Props]].
   */</span>
  <span class="keyword">def</span> <a title="(role: String, routingLogic: akka.routing.RoutingLogic, gossipInterval: scala.concurrent.duration.FiniteDuration, removedTimeToLive: scala.concurrent.duration.FiniteDuration, maxDeltaElements: Int)akka.actor.Props" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f)">props</a><span class="delimiter">(</span>
    <a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).role">role</a>: <span title="String">String</span>,
    <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).routingLogic">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).gossipInterval">gossipInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
    <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).removedTimeToLive">removedTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
    <a title="Int" id="akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).maxDeltaElements">maxDeltaElements</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1)" title="(role: Option[String], routingLogic: akka.routing.RoutingLogic, gossipInterval: scala.concurrent.duration.FiniteDuration, removedTimeToLive: scala.concurrent.duration.FiniteDuration, maxDeltaElements: Int)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.type">Internal</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption" title="(role: String)Option[String]">roleOption</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).role" title="String">role</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).gossipInterval" title="scala.concurrent.duration.FiniteDuration">gossipInterval</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).removedTimeToLive" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(5446a0c64f).maxDeltaElements" title="Int">maxDeltaElements</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API: Factory method for `DistributedPubSubMediator` [[akka.actor.Props]]
   * with default values.
   */</span>
  <span class="keyword">def</span> <a title="(role: String)akka.actor.Props" id="akka.contrib.pattern.DistributedPubSubMediator.defaultProps">defaultProps</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.defaultProps.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1)" title="(role: Option[String], routingLogic: akka.routing.RoutingLogic, gossipInterval: scala.concurrent.duration.FiniteDuration, removedTimeToLive: scala.concurrent.duration.FiniteDuration, maxDeltaElements: Int)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.type">Internal</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption" title="(role: String)Option[String]">roleOption</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.defaultProps.role" title="String">role</a><span class="delimiter">)</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Put extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Put.readResolve">Put</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Put.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Put.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Remove extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Remove.readResolve">Remove</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Remove.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Remove.path">path</a>: <span title="String">String</span><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Subscribe extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe">Subscribe</a><a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.topic">topic</a>: <span title="String">String</span>, <a title="Option[String]" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.group">group</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.topic" title="=&gt; String">topic</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.topic" title="=&gt; String">topic</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;topic must be defined&quot;)" class="string">&quot;topic must be defined&quot;</span><span class="delimiter">)</span>
    <span class="comment">/**
     * Convenience constructor with `group` None
     */</span>
    <span class="keyword">def</span> <a title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Subscribe" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110).topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe" title="Subscribe.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110).topic" title="String">topic</a>, <span title="None.type">None</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Java API: constructor with group: String
     */</span>
    <span class="keyword">def</span> <a title="(topic: String, group: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Subscribe" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).topic">topic</a>: <span title="String">String</span>, <a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).group">group</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe" title="Subscribe.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).topic" title="String">topic</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).group" title="String">group</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(03b02fefc6).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.type" id="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.readResolve">Subscribe</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Subscribe.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.type" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Subscribe" id="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110)">apply</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110).topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe.<init>(fa272b7110)" title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Subscribe" class="keyword">new</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe" title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">Subscribe</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110).topic" title="String">topic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Subscribe.apply(fa272b7110).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Unsubscribe extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe">Unsubscribe</a><a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.topic">topic</a>: <span title="String">String</span>, <a title="Option[String]" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.group">group</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.topic" title="=&gt; String">topic</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.topic" title="=&gt; String">topic</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;topic must be defined&quot;)" class="string">&quot;topic must be defined&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca).topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe" title="Unsubscribe.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca).topic" title="String">topic</a>, <span title="None.type">None</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(topic: String, group: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).topic">topic</a>: <span title="String">String</span>, <a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).group">group</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe" title="Unsubscribe.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).topic" title="String">topic</a>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).group" title="String">group</a><span class="delimiter">)</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(f06dcc2d9f).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.type" id="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.readResolve">Unsubscribe</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.type" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" id="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca)">apply</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca).topic">topic</a>: <span title="String">String</span>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe.<init>(3b9e85a4ca)" title="(topic: String, ref: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" class="keyword">new</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe" title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">Unsubscribe</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca).topic" title="String">topic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe.apply(3b9e85a4ca).ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class SubscribeAck extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck.readResolve">SubscribeAck</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck.readResolve" title="Product" class="delimiter">(</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe" id="akka.contrib.pattern.DistributedPubSubMediator;SubscribeAck.subscribe">subscribe</a>: <a href="#akka.contrib.pattern.DistributedPubSubMediator;Subscribe" title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">Subscribe</a><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class UnsubscribeAck extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck.readResolve">UnsubscribeAck</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck.readResolve" title="Product" class="delimiter">(</a><a title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe" id="akka.contrib.pattern.DistributedPubSubMediator;UnsubscribeAck.unsubscribe">unsubscribe</a>: <a href="#akka.contrib.pattern.DistributedPubSubMediator;Unsubscribe" title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">Unsubscribe</a><span class="delimiter">)</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Publish extends AnyRef with akka.contrib.pattern.DistributedPubSubMessage with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator;Publish">Publish</a><a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.topic">topic</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.msg">msg</a>: <span title="Any">Any</span>, <a title="Boolean" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.sendOneMessageToEachGroup">sendOneMessageToEachGroup</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern;DistributedPubSubMessage" title="akka.contrib.pattern.DistributedPubSubMessage">DistributedPubSubMessage</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(topic: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Publish" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1).topic">topic</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish" title="Publish.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1).topic" title="String">topic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1).msg" title="Any">msg</a>, sendOneMessageToEachGroup = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Publish.type" id="akka.contrib.pattern.DistributedPubSubMediator.Publish.readResolve">Publish</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Publish.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Publish.type" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(topic: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Publish" id="akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1)">apply</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1).topic">topic</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish.<init>(47b991c7e1)" title="(topic: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Publish" class="keyword">new</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator;Publish" title="akka.contrib.pattern.DistributedPubSubMediator.Publish">Publish</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1).topic" title="String">topic</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Publish.apply(47b991c7e1).msg" title="Any">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class Send extends AnyRef with akka.contrib.pattern.DistributedPubSubMessage with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Send.readResolve">Send</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Send.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Send.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;Send.msg">msg</a>: <span title="Any">Any</span>, <a title="Boolean" id="akka.contrib.pattern.DistributedPubSubMediator;Send.localAffinity">localAffinity</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern;DistributedPubSubMessage" title="akka.contrib.pattern.DistributedPubSubMessage">DistributedPubSubMessage</a> <span class="delimiter">{</span>
    <span class="comment">/**
     * Convenience constructor with `localAffinity` false
     */</span>
    <span class="keyword">def</span> <a title="(path: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Send" id="akka.contrib.pattern.DistributedPubSubMediator;Send.<init>(491d48fff0)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;Send.<init>(491d48fff0).path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;Send.<init>(491d48fff0).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Send.readResolve" title="Send.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;Send.<init>(491d48fff0).path" title="String">path</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;Send.<init>(491d48fff0).msg" title="Any">msg</a>, localAffinity = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span> <span class="keyword">case class</span> <a title="class SendToAll extends AnyRef with akka.contrib.pattern.DistributedPubSubMessage with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.SendToAll.readResolve">SendToAll</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.SendToAll.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;SendToAll.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;SendToAll.msg">msg</a>: <span title="Any">Any</span>, <a title="Boolean" id="akka.contrib.pattern.DistributedPubSubMediator.SendToAll.<init>$default$3">allButSelf</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern;DistributedPubSubMessage" title="akka.contrib.pattern.DistributedPubSubMessage">DistributedPubSubMessage</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(path: String, msg: Any)akka.contrib.pattern.DistributedPubSubMediator.SendToAll" id="akka.contrib.pattern.DistributedPubSubMediator;SendToAll.<init>(44055d3591)" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator;SendToAll.<init>(44055d3591).path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator;SendToAll.<init>(44055d3591).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.SendToAll.readResolve" title="SendToAll.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator;SendToAll.<init>(44055d3591).path" title="String">path</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator;SendToAll.<init>(44055d3591).msg" title="Any">msg</a>, allButSelf = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Only for testing purposes, to poll/await replication</span>
  <span class="keyword">case object</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Count.productElement.x$1" title="akka.contrib.pattern.DistributedPubSubMediator.Count.type" id="akka.contrib.pattern.DistributedPubSubMediator.Count.readResolve">Count</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>pattern<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.type" id="akka.contrib.pattern.DistributedPubSubMediator.Internal">Internal</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.type" class="delimiter">{</a>
    <span class="keyword">case object</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.productElement.x$1" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.type" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.readResolve">Prune</a>

    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Bucket extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket.readResolve">Bucket</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket.readResolve" title="Product" class="delimiter">(</a>
      <a title="akka.actor.Address" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner">owner</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a>,
      <a title="Long" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version">version</a>: <span title="Long">Long</span>,
      <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content">content</a>: <span title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">TreeMap</span><span class="delimiter">[</span>String, ValueHolder<span class="delimiter">]</span><span class="delimiter">)</span>

    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class ValueHolder extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder.readResolve">ValueHolder</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder.readResolve" title="Product" class="delimiter">(</a><a title="Long" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.version">version</a>: <span title="Long">Long</span>, <a title="Option[akka.actor.ActorRef]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.ref">ref</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      @transient <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[akka.routing.Routee]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.routee">routee</a>: <span title="Option[akka.routing.Routee]">Option</span><span class="delimiter">[</span>Routee<span class="delimiter">]</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.ref" title="=&gt; Option[akka.actor.ActorRef]">ref</a> <span title="(f: akka.actor.ActorRef =&gt; akka.routing.ActorRefRoutee)Option[akka.routing.ActorRefRoutee]">map</span> <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing.ActorRefRoutee" title="akka.routing.ActorRefRoutee.type">ActorRefRoutee</a>
    <span class="delimiter">}</span>

    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Status extends AnyRef with akka.contrib.pattern.DistributedPubSubMessage with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Status.readResolve">Status</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Status.readResolve" title="Product" class="delimiter">(</a><a title="Map[akka.actor.Address,Long]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Status.versions">versions</a>: <span title="Map[akka.actor.Address,Long]">Map</span><span class="delimiter">[</span>Address, Long<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern;DistributedPubSubMessage" title="akka.contrib.pattern.DistributedPubSubMessage">DistributedPubSubMessage</a>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Delta extends AnyRef with akka.contrib.pattern.DistributedPubSubMessage with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Delta.readResolve">Delta</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Delta.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Delta.buckets">buckets</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">Iterable</span><span class="delimiter">[</span>Bucket<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern;DistributedPubSubMessage" title="akka.contrib.pattern.DistributedPubSubMessage">DistributedPubSubMessage</a>

    <span class="keyword">case object</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.productElement.x$1" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.type" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.readResolve">GossipTick</a>

    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class RegisterTopic extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.RegisterTopic.readResolve">RegisterTopic</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.RegisterTopic.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;RegisterTopic.topicRef">topicRef</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Subscribed extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed.readResolve">Subscribed</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed.readResolve" title="Product" class="delimiter">(</a><a title="akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Subscribed.ack">ack</a>: <a href="#akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck">SubscribeAck</a>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Subscribed.subscriber">subscriber</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class Unsubscribed extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed.readResolve">Unsubscribed</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed.readResolve" title="Product" class="delimiter">(</a><a title="akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Unsubscribed.ack">ack</a>: <a href="#akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck">UnsubscribeAck</a>, <a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Unsubscribed.subscriber">subscriber</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">case class</span> <a title="class SendToOneSubscriber extends AnyRef with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber.readResolve">SendToOneSubscriber</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber.readResolve" title="Product" class="delimiter">(</a><a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;SendToOneSubscriber.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>

    @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
    <span class="keyword">final</span> <span class="keyword">case class</span> <a title="class MediatorRouterEnvelope extends AnyRef with akka.routing.RouterEnvelope with Product with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.MediatorRouterEnvelope.readResolve">MediatorRouterEnvelope</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.MediatorRouterEnvelope.readResolve" title="Product" class="delimiter">(</a><a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;MediatorRouterEnvelope.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RouterEnvelope" title="akka.routing.RouterEnvelope">RouterEnvelope</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Any" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;MediatorRouterEnvelope.message">message</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;MediatorRouterEnvelope.msg" title="=&gt; Any">msg</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(role: String)Option[String]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption">roleOption</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption.role" title="String">role</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> | <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> ⇒ <span title="None.type">None</span>
      <span class="keyword">case</span> _         ⇒ <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.roleOption.role" title="String">role</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(s: String)String" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.encName">encName</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.encName.s">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="java.net.URLEncoder.type">URLEncoder</span>.<span title="(x$1: String, x$2: String)String">encode</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName.s" title="String">s</a>, <span title="String(&quot;utf-8&quot;)" class="string">&quot;utf-8&quot;</span><span class="delimiter">)</span>

    <span class="keyword">trait</span> <a title="trait TopicLike extends AnyRef with akka.actor.Actor" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike">TopicLike</a> <span title="Unit" class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
      <span class="keyword">import</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
      <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneInterval">pruneInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.emptyTimeToLive" title="=&gt; scala.concurrent.duration.FiniteDuration">emptyTimeToLive</a> <span title="(divisor: Long)scala.concurrent.duration.FiniteDuration">/</span> <span title="Long(2L)" class="int">2</span>
      <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneTask">pruneTask</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">pruneInterval</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">pruneInterval</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.type">Prune</a><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Option[scala.concurrent.duration.Deadline]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneDeadline_=">pruneDeadline</a>: <span title="Option[scala.concurrent.duration.Deadline]">Option</span><span class="delimiter">[</span>Deadline<span class="delimiter">]</span> = <span title="None.type">None</span>

      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[akka.actor.ActorRef]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=">subscribers</a> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[akka.actor.ActorRef]" class="delimiter">[</span><a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">]</span>

      <span class="keyword">val</span> <a title="=&gt; scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.emptyTimeToLive">emptyTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.TopicLike" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.postStop" title="()Unit">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneTask" title="=&gt; akka.actor.Cancellable">pruneTask</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="=&gt; TopicLike.this.Receive" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive">defaultReceive</a>: <span title="TopicLike.this.Receive">Receive</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span> @ Subscribe<span class="delimiter">(</span>_, _, <span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a> <span title="akka.actor.ActorRef">ref</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">subscribers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">+=</span> <span title="akka.actor.ActorRef">ref</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneDeadline_=" title="(x$1: Option[scala.concurrent.duration.Deadline])Unit">pruneDeadline</a> = <span title="None.type">None</span>
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed.readResolve" title="(ack: akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck, subscriber: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed">Subscribed</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck.readResolve" title="(subscribe: akka.contrib.pattern.DistributedPubSubMediator.Subscribe)akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck">SubscribeAck</a><span class="delimiter">(</span><span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span> @ Unsubscribe<span class="delimiter">(</span>_, _, <span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.unwatch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">unwatch</a> <span title="akka.actor.ActorRef">ref</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove" title="(ref: akka.actor.ActorRef)Unit">remove</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed.readResolve" title="(ack: akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck, subscriber: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed">Unsubscribed</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck.readResolve" title="(unsubscribe: akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe)akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck">UnsubscribeAck</a><span class="delimiter">(</span><span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Terminated<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove" title="(ref: akka.actor.ActorRef)Unit">remove</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.type">Prune</a> ⇒
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.concurrent.duration.Deadline" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive;$anonfun.applyOrElse.$anonfun.d">d</a> ← <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneDeadline_=" title="(f: scala.concurrent.duration.Deadline =&gt; Unit)Unit">pruneDeadline</a> <span class="keyword">if</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive;$anonfun.applyOrElse.$anonfun.d" title="scala.concurrent.duration.Deadline">d</a>.<span title="()Boolean">isOverdue</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
        <span class="keyword">case</span> <span title="Any">msg</span> ⇒
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">subscribers</a> <span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive;$anonfun.applyOrElse.$anonfun.x$1" title="akka.actor.ActorRef">_</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="Any">msg</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="=&gt; TopicLike.this.Receive" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.business">business</a>: <span title="TopicLike.this.Receive">Receive</span>

      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.receive">receive</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.business" title="=&gt; TopicLike.this.Receive">business</a> <span title="(that: PartialFunction[Any,Unit])PartialFunction[Any,Unit]">orElse</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.defaultReceive" title="=&gt; TopicLike.this.Receive">defaultReceive</a>

      <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)Unit" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove">remove</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">subscribers</a>.<span title="(elem: akka.actor.ActorRef)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="(x$1: scala.collection.immutable.Set[akka.actor.ActorRef])Unit">subscribers</a> <span title="(elem: akka.actor.ActorRef)scala.collection.immutable.Set[akka.actor.ActorRef]">-=</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.remove.ref" title="akka.actor.ActorRef">ref</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">subscribers</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.children" title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]">children</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneDeadline_=" title="(x$1: Option[scala.concurrent.duration.Deadline])Unit">pruneDeadline</a> = <span title="(x: scala.concurrent.duration.Deadline)Some[scala.concurrent.duration.Deadline]">Some</span><span class="delimiter">(</span><span title="scala.concurrent.duration.Deadline.type">Deadline</span>.<span title="=&gt; scala.concurrent.duration.Deadline">now</span> <span title="(other: scala.concurrent.duration.FiniteDuration)scala.concurrent.duration.Deadline">+</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.emptyTimeToLive" title="=&gt; scala.concurrent.duration.FiniteDuration">emptyTimeToLive</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class Topic extends AnyRef with akka.contrib.pattern.DistributedPubSubMediator.Internal.TopicLike" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic">Topic</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Topic" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.emptyTimeToLive">emptyTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.routingLogic">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.TopicLike">TopicLike</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.business">business</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.business;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span> @ Subscribe<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><span title="String">group</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
          <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.business;$anonfun.applyOrElse.encGroup">encGroup</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">group</span><span class="delimiter">)</span>
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.business;$anonfun.applyOrElse.encGroup" title="String">encGroup</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">g</span><span class="delimiter">)</span> ⇒ <span title="akka.actor.ActorRef">g</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span>
            <span class="keyword">case</span> <span title="None.type">None</span> ⇒
              <span class="keyword">val</span> <span title="akka.actor.ActorRef">g</span> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.DistributedPubSubMediator.Internal.Group](classOf[akka.contrib.pattern.DistributedPubSubMediator$$Internal$Group])" class="delimiter">[</span>Group<span class="delimiter">]</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.emptyTimeToLive" title="=&gt; scala.concurrent.duration.FiniteDuration">emptyTimeToLive</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a><span class="delimiter">)</span>, name = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Topic.business;$anonfun.applyOrElse.encGroup" title="String">encGroup</a><span class="delimiter">)</span>
              <span title="akka.actor.ActorRef">g</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span>
              <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a> <span title="akka.actor.ActorRef">g</span>
              <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.RegisterTopic.readResolve" title="(topicRef: akka.actor.ActorRef)akka.contrib.pattern.DistributedPubSubMediator.Internal.RegisterTopic">RegisterTopic</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">g</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.pruneDeadline_=" title="(x$1: Option[scala.concurrent.duration.Deadline])Unit">pruneDeadline</a> = <span title="None.type">None</span>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span> @ Unsubscribe<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><span title="String">group</span><span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">group</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">g</span><span class="delimiter">)</span> ⇒ <span title="akka.actor.ActorRef">g</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span>
            <span class="keyword">case</span> <span title="None.type">None</span>    ⇒ <span class="comment">// no such group here</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed">msg</span>: <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed">Subscribed</a> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.parent" title="=&gt; akka.actor.ActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed">msg</span>
        <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed">msg</span>: <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed">Unsubscribed</a> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.parent" title="=&gt; akka.actor.ActorRef">parent</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed">msg</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class Group extends AnyRef with akka.contrib.pattern.DistributedPubSubMediator.Internal.TopicLike" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group">Group</a><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Group" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Group" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.emptyTimeToLive">emptyTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>, <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.routingLogic">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.TopicLike">TopicLike</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.business">business</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.business;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> SendToOneSubscriber<span class="delimiter">(</span><a title="Any" id="akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.business;$anonfun.isDefinedAt.msg">msg</a><span class="delimiter">)</span> ⇒
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">subscribers</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
            <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router" title="(logic: akka.routing.RoutingLogic, routees: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Router">Router</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>, <span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;TopicLike.subscribers_=" title="=&gt; scala.collection.immutable.Set[akka.actor.ActorRef]">subscribers</a> <span title="(f: akka.actor.ActorRef =&gt; akka.routing.ActorRefRoutee)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.actor.ActorRef],akka.routing.ActorRefRoutee,scala.collection.immutable.Set[akka.routing.ActorRefRoutee]])scala.collection.immutable.Set[akka.routing.ActorRefRoutee]">map</span> <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing.ActorRefRoutee" title="akka.routing.ActorRefRoutee.type">ActorRefRoutee</a><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.routing.ActorRefRoutee]">toVector</span><span class="delimiter">)</span>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.route" title="(message: Any, sender: akka.actor.ActorRef)Unit">route</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.wrapIfNeeded" title="(v1: Any)Any">wrapIfNeeded</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Group.business;$anonfun.isDefinedAt.msg" title="Any">msg</a><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Mediator uses [[Router]] to send messages to multiple destinations, Router in general
     * unwraps messages from [[RouterEnvelope]] and sends the contents to [[Routee]]s.
     *
     * Using mediator services should not have an undesired effect of unwrapping messages
     * out of [[RouterEnvelope]]. For this reason user messages are wrapped in
     * [[MediatorRouterEnvelope]] which will be unwrapped by the [[Router]] leaving original
     * user message.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Any =&gt; Any" id="akka.contrib.pattern.DistributedPubSubMediator.Internal.wrapIfNeeded">wrapIfNeeded</a>: Any ⇒ Any = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.wrapIfNeeded.$anonfun.x0$1" title="Any" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="akka.routing.RouterEnvelope">msg</span>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RouterEnvelope" title="akka.routing.RouterEnvelope">RouterEnvelope</a> ⇒ <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.MediatorRouterEnvelope.readResolve" title="(msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Internal.MediatorRouterEnvelope">MediatorRouterEnvelope</a><span class="delimiter">(</span><span title="akka.routing.RouterEnvelope">msg</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Any">msg</span>: <span title="Any">Any</span>            ⇒ <span title="Any">msg</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

<span class="comment">/**
 * Marker trait for remote messages with special serializer.
 */</span>
<span title="AnyRef" class="keyword">trait</span> <a title="trait DistributedPubSubMessage extends AnyRef with Serializable" id="akka.contrib.pattern;DistributedPubSubMessage">DistributedPubSubMessage</a> <span class="keyword">extends</span> <span title="Serializable">Serializable</span>

<span class="comment">/**
 * This actor manages a registry of actor references and replicates
 * the entries to peer actors among all cluster nodes or a group of nodes
 * tagged with a specific role.
 *
 * The `DistributedPubSubMediator` is supposed to be started on all nodes,
 * or all nodes with specified role, in the cluster. The mediator can be
 * started with the [[DistributedPubSubExtension]] or as an ordinary actor.
 *
 * Changes are only performed in the own part of the registry and those changes
 * are versioned. Deltas are disseminated in a scalable way to other nodes with
 * a gossip protocol. The registry is eventually consistent, i.e. changes are not
 * immediately visible at other nodes, but typically they will be fully replicated
 * to all other nodes after a few seconds.
 *
 * You can send messages via the mediator on any node to registered actors on
 * any other node. There is three modes of message delivery.
 *
 * 1. [[DistributedPubSubMediator.Send]] -
 * The message will be delivered to one recipient with a matching path, if any such
 * exists in the registry. If several entries match the path the message will be sent
 * via the supplied `routingLogic` (default random) to one destination. The sender of the
 * message can specify that local affinity is preferred, i.e. the message is sent to an actor
 * in the same local actor system as the used mediator actor, if any such exists, otherwise
 * route to any other matching entry. A typical usage of this mode is private chat to one
 * other user in an instant messaging application. It can also be used for distributing
 * tasks to registered workers, like a cluster aware router where the routees dynamically
 * can register themselves.
 *
 * 2. [[DistributedPubSubMediator.SendToAll]] -
 * The message will be delivered to all recipients with a matching path. Actors with
 * the same path, without address information, can be registered on different nodes.
 * On each node there can only be one such actor, since the path is unique within one
 * local actor system. Typical usage of this mode is to broadcast messages to all replicas
 * with the same path, e.g. 3 actors on different nodes that all perform the same actions,
 * for redundancy.
 *
 * 3. [[DistributedPubSubMediator.Publish]] -
 * Actors may be registered to a named topic instead of path. This enables many subscribers
 * on each node. The message will be delivered to all subscribers of the topic. For
 * efficiency the message is sent over the wire only once per node (that has a matching topic),
 * and then delivered to all subscribers of the local topic representation. This is the
 * true pub/sub mode. A typical usage of this mode is a chat room in an instant messaging
 * application.
 *
 * 4. [[DistributedPubSubMediator.Publish]] with sendOneMessageToEachGroup -
 * Actors may be subscribed to a named topic with an optional property `group`.
 * If subscribing with a group name, each message published to a topic with the
 * `sendOneMessageToEachGroup` flag is delivered via the supplied `routingLogic`
 * (default random) to one actor within each subscribing group.
 * If all the subscribed actors have the same group name, then this works just like
 * [[DistributedPubSubMediator.Send]] and all messages are delivered to one subscribe.
 * If all the subscribed actors have different group names, then this works like normal
 * [[DistributedPubSubMediator.Publish]] and all messages are broadcast to all subscribers.
 *
 * You register actors to the local mediator with [[DistributedPubSubMediator.Put]] or
 * [[DistributedPubSubMediator.Subscribe]]. `Put` is used together with `Send` and
 * `SendToAll` message delivery modes. The `ActorRef` in `Put` must belong to the same
 * local actor system as the mediator. `Subscribe` is used together with `Publish`.
 * Actors are automatically removed from the registry when they are terminated, or you
 * can explicitly remove entries with [[DistributedPubSubMediator.Remove]] or
 * [[DistributedPubSubMediator.Unsubscribe]].
 *
 * Successful `Subscribe` and `Unsubscribe` is acknowledged with
 * [[DistributedPubSubMediator.SubscribeAck]] and [[DistributedPubSubMediator.UnsubscribeAck]]
 * replies.
 */</span>
<span class="keyword">class</span> <a title="class DistributedPubSubMediator extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging" id="akka.contrib.pattern;DistributedPubSubMediator">DistributedPubSubMediator</a><a href="#akka.contrib.pattern;DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator" class="delimiter">(</a>
  <a title="Option[String]" id="akka.contrib.pattern;DistributedPubSubMediator.role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
  <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern;DistributedPubSubMediator.routingLogic">routingLogic</a>: <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;RoutingLogic" title="akka.routing.RoutingLogic">RoutingLogic</a>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;DistributedPubSubMediator.gossipInterval">gossipInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
  <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLive">removedTimeToLive</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span>,
  <a title="Int" id="akka.contrib.pattern;DistributedPubSubMediator.maxDeltaElements">maxDeltaElements</a>: <span title="Int">Int</span><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>._
  <span class="keyword">import</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.type">Internal</a>._

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../../actor/akka/routing/ConsistentHashing.scala.html#akka.routing;ConsistentHashingRoutingLogic" title="akka.routing.ConsistentHashingRoutingLogic">ConsistentHashingRoutingLogic</a><span class="delimiter">]</span>,
    <span title="String(&quot;\'consistent-hashing\' routing logic can\'t be used by the pub-sub mediator&quot;)" class="string">&quot;'consistent-hashing' routing logic can't be used by the pub-sub mediator&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="akka.cluster.Cluster" id="akka.contrib.pattern;DistributedPubSubMediator.cluster">cluster</a> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.selfAddress

  <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.role" title="Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<a href="#akka.contrib.pattern;DistributedPubSubMediator.<local DistributedPubSubMediator>.$anonfun.elem" title="(elem: String)Boolean">contains</a><span class="delimiter">)</span>,
    <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;This cluster member [&quot;)">This cluster member [$</span><span class="delimiter">{</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">}</span><span title="String(&quot;] doesn\'t have the role [&quot;)">] doesn't have the role [$</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.role" title="Option[String]">role</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLiveMillis">removedTimeToLiveMillis</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLive" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a>.<span title="=&gt; Long">toMillis</span>

  <span class="comment">//Start periodic gossip to random nodes in cluster</span>
  <span class="keyword">import</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.dispatcher
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.contrib.pattern;DistributedPubSubMediator.gossipTask">gossipTask</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.contrib.pattern;DistributedPubSubMediator.gossipInterval" title="scala.concurrent.duration.FiniteDuration">gossipInterval</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.gossipInterval" title="scala.concurrent.duration.FiniteDuration">gossipInterval</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.type">GossipTick</a><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;DistributedPubSubMediator.pruneInterval">pruneInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLive" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a> <span title="(divisor: Long)scala.concurrent.duration.FiniteDuration">/</span> <span title="Long(2L)" class="int">2</span>
  <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.contrib.pattern;DistributedPubSubMediator.pruneTask">pruneTask</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.scheduler" title="=&gt; akka.actor.Scheduler">scheduler</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Scheduler.schedule(abf8206fc2)" title="(initialDelay: scala.concurrent.duration.FiniteDuration, interval: scala.concurrent.duration.FiniteDuration, receiver: akka.actor.ActorRef, message: Any)(implicit executor: scala.concurrent.ExecutionContext, implicit sender: akka.actor.ActorRef)akka.actor.Cancellable">schedule</a><a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.dispatcher" title="=&gt; scala.concurrent.ExecutionContextExecutor" class="delimiter">(</a><a href="#akka.contrib.pattern;DistributedPubSubMediator.pruneInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">pruneInterval</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.pruneInterval" title="=&gt; scala.concurrent.duration.FiniteDuration">pruneInterval</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.type">Prune</a><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]" id="akka.contrib.pattern;DistributedPubSubMediator.registry_=">registry</a>: <span title="Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">Map</span><span class="delimiter">[</span>Address, Bucket<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[akka.actor.Address,Nothing]">empty</span>.<span title="(d: akka.actor.Address =&gt; akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">withDefault</span><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.registry.$anonfun.a">a</a> ⇒ <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket.readResolve" title="(owner: akka.actor.Address, version: Long, content: scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder])akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">Bucket</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.registry.$anonfun.a" title="akka.actor.Address">a</a>, <span title="Long(0L)" class="long">0L</span>, <span title="scala.collection.immutable.TreeMap.type">TreeMap</span>.<span title="(implicit ord: Ordering[String])scala.collection.immutable.TreeMap[String,Nothing]">empty</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">var</span> <a title="Set[akka.actor.Address]" id="akka.contrib.pattern;DistributedPubSubMediator.nodes_=">nodes</a>: <span title="Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[akka.actor.Address]">empty</span>

  <span class="comment">// the version is a timestamp because it is also used when pruning removed entries</span>
  <span class="keyword">val</span> <a title="() =&gt; Long" id="akka.contrib.pattern;DistributedPubSubMediator.nextVersion">nextVersion</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.nextVersion.version">version</a> = <span title="Long(0L)" class="long">0L</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.nextVersion.$anonfun.current">current</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.version" title="Long">version</a> = <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.$anonfun.current" title="Long">current</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.version" title="Long">version</a><span class="delimiter">)</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.$anonfun.current" title="Long">current</a> <span class="keyword">else</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.version" title="Long">version</a> <span title="(x: Int)Long">+</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion.version" title="Long">version</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;DistributedPubSubMediator.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.preStart" title="()Unit">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.isTerminated" title="=&gt; Boolean">isTerminated</a>, <span title="String(&quot;Cluster node must not be terminated&quot;)" class="string">&quot;Cluster node must not be terminated&quot;</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.cluster" title="=&gt; akka.cluster.Cluster">cluster</a>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.subscribe(6cfb44d410)" title="(subscriber: akka.actor.ActorRef, to: Class[_]*)Unit">subscribe</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>, classOf<span title="Class[akka.cluster.ClusterEvent.MemberEvent](classOf[akka.cluster.ClusterEvent$$MemberEvent])" class="delimiter">[</span>MemberEvent<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;DistributedPubSubMediator.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator" class="keyword">super</a>.<a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.postStop" title="()Unit">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.cluster" title="=&gt; akka.cluster.Cluster">cluster</a> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.gossipTask" title="=&gt; akka.actor.Cancellable">gossipTask</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.pruneTask" title="=&gt; akka.actor.Cancellable">pruneTask</a>.<a href="../../../../actor/akka/actor/Scheduler.scala.html#akka.actor;Cancellable.cancel" title="()Boolean">cancel</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(m: akka.cluster.Member)Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.matchingRole">matchingRole</a><span class="delimiter">(</span><a title="akka.cluster.Member" id="akka.contrib.pattern;DistributedPubSubMediator.matchingRole.m">m</a>: <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.role" title="Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.matchingRole.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.hasRole" title="(role: String)Boolean">hasRole</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.contrib.pattern;DistributedPubSubMediator.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>

    <span class="keyword">case</span> Send<span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span>, <a title="Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.localAffinity">localAffinity</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a title="Vector[akka.routing.Routee]" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees">routees</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span class="delimiter">(</span><span title="String">path</span><span class="delimiter">)</span> <span title="Vector[akka.routing.Routee]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.valueHolder">valueHolder</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.localAffinity" title="Boolean">localAffinity</a> ⇒
          <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
            <a title="akka.routing.Routee" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.routee">routee</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.valueHolder" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">valueHolder</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.routee" title="(f: akka.routing.Routee =&gt; akka.routing.Routee)Option[akka.routing.Routee]">routee</a>
          <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.routing.Routee]">toVector</span>
        <span class="keyword">case</span> _ ⇒
          <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
            <span class="delimiter">(</span>_, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; scala.collection.GenTraversableOnce[akka.routing.Routee])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket],akka.routing.Routee,scala.collection.immutable.Iterable[akka.routing.Routee]])scala.collection.immutable.Iterable[akka.routing.Routee]">registry</a>
            <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.$anonfun.valueHolder">valueHolder</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span title="(f: akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder =&gt; Option[akka.routing.Routee])Option[akka.routing.Routee]" class="delimiter">(</span><span title="String">path</span><span class="delimiter">)</span>
            <a title="akka.routing.Routee" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.$anonfun.$anonfun.routee">routee</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.$anonfun.valueHolder" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">valueHolder</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.routee" title="(f: akka.routing.Routee =&gt; akka.routing.Routee)Option[akka.routing.Routee]">routee</a>
          <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees.$anonfun.$anonfun.$anonfun.routee" title="akka.routing.Routee">routee</a><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.routing.Routee]">toVector</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees" title="Vector[akka.routing.Routee]">routees</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router" title="(logic: akka.routing.RoutingLogic, routees: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Router">Router</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.routees" title="Vector[akka.routing.Routee]">routees</a><span class="delimiter">)</span>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.route" title="(message: Any, sender: akka.actor.ActorRef)Unit">route</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.wrapIfNeeded" title="(v1: Any)Any">wrapIfNeeded</a><span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">case</span> SendToAll<span class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span>, <a title="Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.skipSenderNode">skipSenderNode</a><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish" title="(path: String, msg: Any, allButSelf: Boolean)Unit">publish</a><span title="Boolean(true)" class="delimiter">(</span><span title="String">path</span>, <span title="Any">msg</span>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.skipSenderNode" title="Boolean">skipSenderNode</a><span class="delimiter">)</span>

    <span class="keyword">case</span> Publish<span class="delimiter">(</span><span title="String">topic</span>, <span title="Any">msg</span>, <a title="Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.sendOneMessageToEachGroup">sendOneMessageToEachGroup</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.sendOneMessageToEachGroup" title="Boolean">sendOneMessageToEachGroup</a><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup" title="(path: String, msg: Any)Unit">publishToEachGroup</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50)" title="(path: akka.actor.ActorPath)String">mkKey</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a> <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">topic</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="Any">msg</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish" title="(path: String, msg: Any, allButSelf: Boolean)Unit">publish</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50)" title="(path: akka.actor.ActorPath)String">mkKey</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a> <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath./(833cf8d176)" title="(child: String)akka.actor.ActorPath">/</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">topic</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="Any">msg</span><span class="delimiter">)</span>

    <span class="keyword">case</span> Put<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a>.<a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address.hasGlobalScope" title="=&gt; Boolean">hasGlobalScope</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging.log" title="=&gt; akka.event.LoggingAdapter">log</a>.<a href="../../../../actor/akka/event/Logging.scala.html#akka.event;LoggingAdapter.warning(dc73c33c91)" title="(template: String, arg1: Any)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Registered actor must be local: [{}]&quot;)" class="string">&quot;Registered actor must be local: [{}]&quot;</span>, <span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.put" title="(key: String, valueOption: Option[akka.actor.ActorRef])Unit">put</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f)" title="(ref: akka.actor.ActorRef)String">mkKey</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>, <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span title="Unit" class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> Remove<span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.key">key</a><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span class="delimiter">(</span><span title="String">key</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span>ValueHolder<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.unwatch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">unwatch</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.put" title="(key: String, valueOption: Option[akka.actor.ActorRef])Unit">put</a><span class="delimiter">(</span><span title="String">key</span>, <span title="None.type">None</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ ⇒
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span> @ Subscribe<span class="delimiter">(</span><span title="String">topic</span>, _, _<span class="delimiter">)</span> ⇒
      <span class="comment">// each topic is managed by a child actor with the same name as the topic</span>
      <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.encTopic">encTopic</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">topic</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.encTopic" title="String">encTopic</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">t</span><span class="delimiter">)</span> ⇒ <span title="akka.actor.ActorRef">t</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span>
        <span class="keyword">case</span> <span title="None.type">None</span> ⇒
          <span class="keyword">val</span> <span title="akka.actor.ActorRef">t</span> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.contrib.pattern.DistributedPubSubMediator.Internal.Topic](classOf[akka.contrib.pattern.DistributedPubSubMediator$$Internal$Topic])" class="delimiter">[</span>Topic<span class="delimiter">]</span>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLive" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a><span class="delimiter">)</span>, name = <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.encTopic" title="String">encTopic</a><span class="delimiter">)</span>
          <span title="akka.actor.ActorRef">t</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Subscribe">msg</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.registerTopic" title="(ref: akka.actor.ActorRef)Unit">registerTopic</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">t</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.RegisterTopic">msg</span> @ RegisterTopic<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.t">t</a><span class="delimiter">)</span> ⇒
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.registerTopic" title="(ref: akka.actor.ActorRef)Unit">registerTopic</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.ActorRef">t</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Subscribed">msg</span> @ Subscribed<span class="delimiter">(</span><span title="akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck">ack</span>, <span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">ref</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.SubscribeAck">ack</span>

    <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span> @ Unsubscribe<span class="delimiter">(</span><span title="String">topic</span>, _, _<span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.child" title="(name: String)Option[akka.actor.ActorRef]">child</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.encName" title="(s: String)String">encName</a><span class="delimiter">(</span><span title="String">topic</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="akka.actor.ActorRef">t</span><span class="delimiter">)</span> ⇒ <span title="akka.actor.ActorRef">t</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.Unsubscribe">msg</span>
        <span class="keyword">case</span> <span title="None.type">None</span>    ⇒ <span class="comment">// no such topic here</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Unsubscribed">msg</span> @ Unsubscribed<span class="delimiter">(</span><span title="akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck">ack</span>, <span title="akka.actor.ActorRef">ref</span><span class="delimiter">)</span> ⇒
      <a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">ref</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.contrib.pattern.DistributedPubSubMediator.UnsubscribeAck">ack</span>

    <span class="keyword">case</span> Status<span class="delimiter">(</span><a title="Map[akka.actor.Address,Long]" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.otherVersions">otherVersions</a><span class="delimiter">)</span> ⇒
      <span class="comment">// gossip chat starts with a Status message, containing the bucket versions of the other node</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.delta">delta</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta" title="(otherVersions: Map[akka.actor.Address,Long])scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">collectDelta</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.otherVersions" title="Map[akka.actor.Address,Long]">otherVersions</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.delta" title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">delta</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Delta.readResolve" title="(buckets: scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])akka.contrib.pattern.DistributedPubSubMediator.Internal.Delta">Delta</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.delta" title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">delta</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions" title="(otherVersions: Map[akka.actor.Address,Long])Boolean">otherHasNewerVersions</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.otherVersions" title="Map[akka.actor.Address,Long]">otherVersions</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Status.readResolve" title="(versions: Map[akka.actor.Address,Long])akka.contrib.pattern.DistributedPubSubMediator.Internal.Status">Status</a><span class="delimiter">(</span>versions = <a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions" title="=&gt; Map[akka.actor.Address,Long]">myVersions</a><span class="delimiter">)</span> <span class="comment">// it will reply with Delta</span>

    <span class="keyword">case</span> Delta<span class="delimiter">(</span><a title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.buckets">buckets</a><span class="delimiter">)</span> ⇒
      <span class="comment">// reply from Status message in the gossip chat</span>
      <span class="comment">// the Delta contains potential updates (newer versions) from the other node</span>
      <span class="comment">// only accept deltas/buckets from known nodes, otherwise there is a risk of</span>
      <span class="comment">// adding back entries when nodes are removed</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="(elem: akka.actor.Address)Boolean">nodes</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.buckets" title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">buckets</a> <span title="(f: akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b">b</a> ⇒
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="(elem: akka.actor.Address)Boolean">nodes</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="=&gt; akka.actor.Address">owner</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.myBucket">myBucket</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="=&gt; akka.actor.Address">owner</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.myBucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">myBucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(x$1: Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])Unit">registry</a> <span title="(kv: (akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket))scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">+=</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="(x: akka.actor.Address)ArrowAssoc[akka.actor.Address]">owner</a> <span title="(y: akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)(akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)">-&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.myBucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">myBucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.x$11">copy</a><span class="delimiter">(</span>version = <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.x$9">version</a>, content = <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.myBucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">myBucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a> <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.x$10">++</a> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.$anonfun.b" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">b</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.GossipTick.type">GossipTick</a> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.gossip" title="()Unit">gossip</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Prune.type">Prune</a>      ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune" title="()Unit">prune</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">case</span> Terminated<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.a">a</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <span title="String">key</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f)" title="(ref: akka.actor.ActorRef)String">mkKey</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.a" title="akka.actor.ActorRef">a</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span class="delimiter">(</span><span title="String">key</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span>ValueHolder<span class="delimiter">(</span>_, Some<span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.a" title="akka.actor.ActorRef">`a`</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> ⇒
          <span class="comment">// remove</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.put" title="(key: String, valueOption: Option[akka.actor.ActorRef])Unit">put</a><span class="delimiter">(</span><span title="String">key</span>, <span title="None.type">None</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ ⇒
      <span class="delimiter">}</span>

    <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.state">state</a>: <a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState" title="akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a> ⇒
      <a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="(x$1: Set[akka.actor.Address])Unit">nodes</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.isDefinedAt.state" title="akka.cluster.ClusterEvent.CurrentClusterState">state</a>.<a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;CurrentClusterState.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>.<span title="(pf: PartialFunction[akka.cluster.Member,akka.actor.Address])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.actor.Address,Set[akka.actor.Address]])Set[akka.actor.Address]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.actor.Address] with Serializable" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.cluster.Member" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m">m</a> <span class="keyword">if</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster.MemberStatus.Joining" title="akka.cluster.MemberStatus.Joining.type">Joining</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse;$anonfun.isDefinedAt.m" title="akka.cluster.Member">m</a>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> MemberUp<span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="(x$1: Set[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.Set[akka.actor.Address]">+=</span> <span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>

    <span class="keyword">case</span> MemberRemoved<span class="delimiter">(</span><span title="akka.cluster.Member">m</span>, _<span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
        <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a> <a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.matchingRole" title="(m: akka.cluster.Member)Boolean">matchingRole</a><span class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="(x$1: Set[akka.actor.Address])Unit">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.Set[akka.actor.Address]">-=</span> <span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(x$1: Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])Unit">registry</a> <span title="(key: akka.actor.Address)scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">-=</span> <span title="akka.cluster.Member">m</span>.<a href="../../../../cluster/akka/cluster/Member.scala.html#akka.cluster;Member.address" title="=&gt; akka.actor.Address">address</a>
      <span class="delimiter">}</span>

    <span class="keyword">case</span> _: <a href="../../../../cluster/akka/cluster/ClusterEvent.scala.html#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> ⇒ <span class="comment">// not of interest</span>

    <span class="keyword">case</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Count.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Count.type">Count</a> ⇒
      <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count">count</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="=&gt; Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">registry</a>.<span title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket],Int,scala.collection.immutable.Iterable[Int]])scala.collection.immutable.Iterable[Int]">map</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.x0$2" title="Int" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.owner">owner</a>, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(p: ((String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)) =&gt; Boolean)Int">count</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.$anonfun.x0$3" title="Boolean" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span>_, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.$anonfun.valueHolder">valueHolder</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count.$anonfun.$anonfun.valueHolder" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">valueHolder</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.ref" title="=&gt; Option[akka.actor.ActorRef]">ref</a>.<span title="=&gt; Boolean">isDefined</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><a href="../../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern;DistributedPubSubMediator.receive;$anonfun.applyOrElse.count" title="Int">count</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(path: String, msg: Any, allButSelf: Boolean)Unit" id="akka.contrib.pattern;DistributedPubSubMediator.publish">publish</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.publish.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern;DistributedPubSubMediator.publish.msg">msg</a>: <span title="Any">Any</span>, <a title="Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.publish$default$3">allButSelf</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.address">address</a>, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; Unit)Unit">registry</a>
      <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publish$default$3" title="Boolean">allButSelf</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.address" title="akka.actor.Address">address</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span> <span class="comment">// if we should skip sender() node and current address == self address =&gt; skip</span>
      <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.$anonfun.valueHolder">valueHolder</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span title="(f: akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder =&gt; Unit)Unit" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.path" title="String">path</a><span class="delimiter">)</span>
      <a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.$anonfun.$anonfun.ref">ref</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.$anonfun.valueHolder" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">valueHolder</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.ref" title="(f: akka.actor.ActorRef =&gt; Unit)Unit">ref</a>
    <span class="delimiter">}</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.$anonfun.$anonfun.$anonfun.ref" title="akka.actor.ActorRef">ref</a> <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.contrib.pattern;DistributedPubSubMediator.publish.msg" title="Any">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(path: String, msg: Any)Unit" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup">publishToEachGroup</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.path">path</a>: <span title="String">String</span>, <a title="Any" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.prefix">prefix</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.path" title="String">path</a> <span title="(x$1: Any)String">+</span> <span title="Char('/')" class="char">'/'</span>
    <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.lastKey">lastKey</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.path" title="String">path</a> <span title="(x$1: Any)String">+</span> <span title="Char('0')" class="char">'0'</span> <span class="comment">// '0' is the next char of '/'</span>
    <span class="keyword">val</span> <a title="Iterable[Seq[(String, akka.routing.Routee)]]" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups">groups</a> = <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span>_, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="=&gt; Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">registry</a>.<a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.check$ifrefutable$3" title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; scala.collection.GenTraversableOnce[(String, akka.routing.Routee)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)],(String, akka.routing.Routee),Seq[(String, akka.routing.Routee)]])Seq[(String, akka.routing.Routee)]">toSeq</a>
      <a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.key">key</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(from: String, until: String)scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">range</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.prefix" title="String">prefix</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.lastKey" title="String">lastKey</a><span class="delimiter">)</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[(String, akka.routing.Routee)])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[String],(String, akka.routing.Routee),Iterable[(String, akka.routing.Routee)]])Iterable[(String, akka.routing.Routee)]">keys</span>
      <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.$anonfun.valueHolder">valueHolder</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(key: String)Option[akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">get</span><span title="(f: akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder =&gt; Option[(String, akka.routing.Routee)])Option[(String, akka.routing.Routee)]" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.key" title="String">key</a><span class="delimiter">)</span>
      <a title="akka.routing.Routee" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.$anonfun.$anonfun.ref">ref</a> ← <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.$anonfun.valueHolder" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">valueHolder</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.routee" title="(f: akka.routing.Routee =&gt; (String, akka.routing.Routee))Option[(String, akka.routing.Routee)]">routee</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span title="(_1: String, _2: akka.routing.Routee)(String, akka.routing.Routee)" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.key" title="String">key</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.$anonfun.$anonfun.$anonfun.ref" title="akka.routing.Routee">ref</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: ((String, akka.routing.Routee)) =&gt; String)scala.collection.immutable.Map[String,Seq[(String, akka.routing.Routee)]]">groupBy</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups.$anonfun.x$6" title="(String, akka.routing.Routee)">_</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span>.<span title="=&gt; Iterable[Seq[(String, akka.routing.Routee)]]">values</span>

    <span class="keyword">val</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.wrappedMsg">wrappedMsg</a> = <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber.readResolve" title="(msg: Any)akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber">SendToOneSubscriber</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.msg" title="Any">msg</a><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.groups" title="Iterable[Seq[(String, akka.routing.Routee)]]">groups</a> <span title="(f: Seq[(String, akka.routing.Routee)] =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span>
      <a title="Seq[(String, akka.routing.Routee)]" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.group">group</a> ⇒
        <span class="keyword">val</span> <a title="Vector[akka.routing.Routee]" id="akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.routees">routees</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.group" title="Seq[(String, akka.routing.Routee)]">group</a>.<span title="(f: ((String, akka.routing.Routee)) =&gt; akka.routing.Routee)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(String, akka.routing.Routee)],akka.routing.Routee,Seq[akka.routing.Routee]])Seq[akka.routing.Routee]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,akka.routing.Routee,Seq[akka.routing.Routee]]" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.routees.$anonfun.x$7" title="(String, akka.routing.Routee)">_</a>.<span title="=&gt; akka.routing.Routee">_2</span><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.routing.Routee]">toVector</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.routees" title="Vector[akka.routing.Routee]">routees</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router" title="(logic: akka.routing.RoutingLogic, routees: scala.collection.immutable.IndexedSeq[akka.routing.Routee])akka.routing.Router">Router</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.$anonfun.routees" title="Vector[akka.routing.Routee]">routees</a><span class="delimiter">)</span>.<a href="../../../../actor/akka/routing/Router.scala.html#akka.routing;Router.route" title="(message: Any, sender: akka.actor.ActorRef)Unit">route</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.publishToEachGroup.wrappedMsg" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.SendToOneSubscriber">wrappedMsg</a>, <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(key: String, valueOption: Option[akka.actor.ActorRef])Unit" id="akka.contrib.pattern;DistributedPubSubMediator.put">put</a><span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.put.key">key</a>: <span title="String">String</span>, <a title="Option[akka.actor.ActorRef]" id="akka.contrib.pattern;DistributedPubSubMediator.put.valueOption">valueOption</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.put.bucket">bucket</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.put.v">v</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.nextVersion" title="()Long">nextVersion</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(x$1: Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])Unit">registry</a> <span title="(kv: (akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket))scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">+=</span> <span class="delimiter">(</span><a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="(x: akka.actor.Address)ArrowAssoc[akka.actor.Address]">selfAddress</a> <span title="(y: akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)(akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)">-&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.put.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.put.x$14">copy</a><span class="delimiter">(</span>version = <a href="#akka.contrib.pattern;DistributedPubSubMediator.put.v" title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.put.x$12">v</a>,
      content = <a href="#akka.contrib.pattern;DistributedPubSubMediator.put.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a> <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.put.x$13">+</a> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.put.key" title="(x: String)ArrowAssoc[String]">key</a> <span title="(y: akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)">-&gt;</span> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder.readResolve" title="(version: Long, ref: Option[akka.actor.ActorRef])akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">ValueHolder</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.put.v" title="Long">v</a>, <a href="#akka.contrib.pattern;DistributedPubSubMediator.put.valueOption" title="Option[akka.actor.ActorRef]">valueOption</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)Unit" id="akka.contrib.pattern;DistributedPubSubMediator.registerTopic">registerTopic</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubMediator.registerTopic.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.put" title="(key: String, valueOption: Option[akka.actor.ActorRef])Unit">put</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f)" title="(ref: akka.actor.ActorRef)String">mkKey</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.registerTopic.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>, <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.registerTopic.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.watch" title="(subject: akka.actor.ActorRef)akka.actor.ActorRef">watch</a><span title="Unit" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.registerTopic.ref" title="akka.actor.ActorRef">ref</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ref: akka.actor.ActorRef)String" id="akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f)">mkKey</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f).ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50)" title="(path: akka.actor.ActorPath)String">mkKey</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(a10a48160f).ref" title="akka.actor.ActorRef">ref</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(path: akka.actor.ActorPath)String" id="akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50)">mkKey</a><span class="delimiter">(</span><a title="akka.actor.ActorPath" id="akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50).path">path</a>: <a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath" title="akka.actor.ActorPath">ActorPath</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.mkKey(f87b15ac50).path" title="akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithoutAddress" title="=&gt; String">toStringWithoutAddress</a>

  <span class="keyword">def</span> <a title="=&gt; Map[akka.actor.Address,Long]" id="akka.contrib.pattern;DistributedPubSubMediator.myVersions">myVersions</a>: <span title="Map[akka.actor.Address,Long]">Map</span><span class="delimiter">[</span>Address, Long<span class="delimiter">]</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="=&gt; Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">registry</a>.<span title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; (akka.actor.Address, Long))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket],(akka.actor.Address, Long),Map[akka.actor.Address,Long]])Map[akka.actor.Address,Long]">map</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions.$anonfun.x0$4" title="(akka.actor.Address, Long)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.myVersions.$anonfun.owner">owner</a>, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.myVersions.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ⇒ <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions.$anonfun.owner" title="(x: akka.actor.Address)ArrowAssoc[akka.actor.Address]">owner</a> <span title="(y: Long)(akka.actor.Address, Long)">-&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(otherVersions: Map[akka.actor.Address,Long])scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta">collectDelta</a><span class="delimiter">(</span><a title="Map[akka.actor.Address,Long]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta.otherVersions">otherVersions</a>: <span title="Map[akka.actor.Address,Long]">Map</span><span class="delimiter">[</span>Address, Long<span class="delimiter">]</span><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">Iterable</span><span class="delimiter">[</span>Bucket<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// missing entries are represented by version 0</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[akka.actor.Address,Long]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta.filledOtherVersions">filledOtherVersions</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions" title="=&gt; Map[akka.actor.Address,Long]">myVersions</a>.<span title="(f: ((akka.actor.Address, Long)) =&gt; (akka.actor.Address, Long))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.actor.Address,Long],(akka.actor.Address, Long),scala.collection.immutable.Map[akka.actor.Address,Long]])scala.collection.immutable.Map[akka.actor.Address,Long]">map</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.filledOtherVersions.$anonfun.x0$5" title="(akka.actor.Address, Long)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta.filledOtherVersions.$anonfun.k">k</a>, _<span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.filledOtherVersions.$anonfun.k" title="(x: akka.actor.Address)ArrowAssoc[akka.actor.Address]">k</a> <span title="(y: Long)(akka.actor.Address, Long)">-&gt;</span> <span title="Long(0L)" class="long">0L</span> <span class="delimiter">}</span> <span title="(xs: scala.collection.GenTraversableOnce[(akka.actor.Address, Long)])scala.collection.immutable.Map[akka.actor.Address,Long]">++</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.otherVersions" title="Map[akka.actor.Address,Long]">otherVersions</a>
    <span class="keyword">var</span> <a title="Int" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta.count">count</a> = <span title="Int(0)" class="int">0</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.filledOtherVersions" title="scala.collection.immutable.Map[akka.actor.Address,Long]">filledOtherVersions</a>.<span title="(pf: PartialFunction[(akka.actor.Address, Long),akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.actor.Address,Long],akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket,scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]])scala.collection.immutable.Iterable[akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(akka.actor.Address, Long),akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket] with Serializable" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.owner">owner</a>, <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.v">v</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.owner" title="akka.actor.Address">owner</a><span class="delimiter">)</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.v" title="Long">v</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.count" title="Int">count</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.maxDeltaElements" title="Int">maxDeltaElements</a> ⇒
        <span class="keyword">val</span> <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.bucket">bucket</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.owner" title="akka.actor.Address">owner</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent">deltaContent</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(p: ((String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)) =&gt; Boolean)scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">filter</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent.$anonfun.x0$6" title="Boolean" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span>_, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent.$anonfun.value">value</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent.$anonfun.value" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">value</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.version" title="=&gt; Long">version</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.isDefinedAt.v" title="Long">v</a>
        <span class="delimiter">}</span>
        <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.count" title="Int">count</a> <span title="(x: Int)Int">+=</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent" title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">deltaContent</a>.<span title="=&gt; Int">size</span>
        <span title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.count" title="Int">count</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.maxDeltaElements" title="Int">maxDeltaElements</a><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.x$17">copy</a><span class="delimiter">(</span>content = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent" title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.x$15">deltaContent</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="comment">// exceeded the maxDeltaElements, pick the elements with lowest versions</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.sortedContent">sortedContent</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.deltaContent" title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">deltaContent</a>.<span title="=&gt; Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">toVector</span>.<span title="(f: ((String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)) =&gt; Long)(implicit ord: scala.math.Ordering[Long])scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">sortBy</span><span title="scala.math.Ordering.Long.type" class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.sortedContent.$anonfun.x$8" title="(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)">_</a>.<span title="=&gt; akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">_2</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.version" title="=&gt; Long">version</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.chunk">chunk</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.sortedContent" title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">sortedContent</a>.<span title="(n: Int)scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">take</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.maxDeltaElements" title="Int">maxDeltaElements</a> <span title="(x: Int)Int">-</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta.count" title="Int">count</a> <span title="(x: Int)Int">-</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.sortedContent" title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">sortedContent</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.x$20">copy</a><span class="delimiter">(</span>content = <span title="scala.collection.immutable.TreeMap.type">TreeMap</span>.<span title="[A, B](implicit ord: Ordering[A])scala.collection.immutable.TreeMap[A,B]">empty</span><span title="(implicit ord: Ordering[String])scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" class="delimiter">[</span><span title="String">String</span>, <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder.readResolve" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">ValueHolder</a><span class="delimiter">]</span> <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.x$18">++</a> <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.chunk" title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">chunk</a>, version = <a href="#akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.chunk" title="scala.collection.immutable.Vector[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)]">chunk</a>.<span title="=&gt; (String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder)">last</span>.<span title="=&gt; akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder">_2</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;ValueHolder.version" title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.collectDelta;$anonfun.applyOrElse.x$19">version</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(otherVersions: Map[akka.actor.Address,Long])Boolean" id="akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions">otherHasNewerVersions</a><span class="delimiter">(</span><a title="Map[akka.actor.Address,Long]" id="akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.otherVersions">otherVersions</a>: <span title="Map[akka.actor.Address,Long]">Map</span><span class="delimiter">[</span>Address, Long<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.otherVersions" title="Map[akka.actor.Address,Long]">otherVersions</a>.<span title="(p: ((akka.actor.Address, Long)) =&gt; Boolean)Boolean">exists</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.$anonfun.x0$7" title="Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.$anonfun.owner">owner</a>, <a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.$anonfun.v">v</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.$anonfun.v" title="Long">v</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(key: akka.actor.Address)akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">registry</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.otherHasNewerVersions.$anonfun.owner" title="akka.actor.Address">owner</a><span class="delimiter">)</span>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Gossip to peer nodes.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;DistributedPubSubMediator.gossip">gossip</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode" title="(addresses: scala.collection.immutable.IndexedSeq[akka.actor.Address])Option[akka.actor.Address]">selectRandomNode</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.nodes_=" title="=&gt; Set[akka.actor.Address]">nodes</a> <span title="(elem: akka.actor.Address)scala.collection.immutable.Set[akka.actor.Address]">-</span> <a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfAddress" title="=&gt; akka.actor.Address">selfAddress</a><span class="delimiter">)</span>.<span title="=&gt; Vector[akka.actor.Address]">toVector</span><span class="delimiter">)</span> <span title="(f: akka.actor.Address =&gt; Unit)Unit">foreach</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.gossipTo" title="(address: akka.actor.Address)Unit">gossipTo</a>

  <span class="keyword">def</span> <a title="(address: akka.actor.Address)Unit" id="akka.contrib.pattern;DistributedPubSubMediator.gossipTo">gossipTo</a><span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.gossipTo.address">address</a>: <a href="../../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorSelection(271eeb39be)" title="(path: String)akka.actor.ActorSelection">actorSelection</a><a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor.ActorSelection.toScala" title="implicit akka.actor.ActorSelection.toScala : (sel: akka.actor.ActorSelection)akka.actor.ScalaActorSelection" class="delimiter">(</a><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="../../../../actor/akka/actor/ActorPath.scala.html#akka.actor;ActorPath.toStringWithAddress" title="(address: akka.actor.Address)String">toStringWithAddress</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.gossipTo.address" title="akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../actor/akka/actor/ActorSelection.scala.html#akka.actor;ScalaActorSelection.!" title="(msg: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal.Status.readResolve" title="(versions: Map[akka.actor.Address,Long])akka.contrib.pattern.DistributedPubSubMediator.Internal.Status">Status</a><span class="delimiter">(</span>versions = <a href="#akka.contrib.pattern;DistributedPubSubMediator.myVersions" title="=&gt; Map[akka.actor.Address,Long]">myVersions</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(addresses: scala.collection.immutable.IndexedSeq[akka.actor.Address])Option[akka.actor.Address]" id="akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode">selectRandomNode</a><span class="delimiter">(</span><a title="scala.collection.immutable.IndexedSeq[akka.actor.Address]" id="akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode.addresses">addresses</a>: immutable.<span title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">IndexedSeq</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> =
    <span title="Option[akka.actor.Address]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode.addresses" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">addresses</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="None.type">None</span> <span class="keyword">else</span> <span title="(x: akka.actor.Address)Some[akka.actor.Address]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode.addresses" title="(idx: Int)akka.actor.Address">addresses</a><span class="delimiter">(</span><span title="scala.concurrent.forkjoin.ThreadLocalRandom.type">ThreadLocalRandom</span>.<span title="()scala.concurrent.forkjoin.ThreadLocalRandom">current</span> <span title="(x$1: Int)Int">nextInt</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.selectRandomNode.addresses" title="scala.collection.immutable.IndexedSeq[akka.actor.Address]">addresses</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.contrib.pattern;DistributedPubSubMediator.prune">prune</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="=&gt; Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">registry</a> <span title="(f: ((akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)) =&gt; Unit)Unit">foreach</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.x0$8" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.owner">owner</a>, <a title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.bucket">bucket</a><span class="delimiter">)</span> ⇒
        <span class="keyword">val</span> <a title="scala.collection.immutable.Iterable[String]" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved">oldRemoved</a> = <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a>.<span title="(pf: PartialFunction[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder),String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder],String,scala.collection.immutable.Iterable[String]])scala.collection.immutable.Iterable[String]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(String, akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder),String] with Serializable" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span><a title="String" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved;$anonfun.isDefinedAt.key">key</a>, ValueHolder<span class="delimiter">(</span><a title="Long" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved;$anonfun.isDefinedAt.version">version</a>, <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.version" title="=&gt; Long">version</a> <span title="(x: Long)Long">-</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved;$anonfun.isDefinedAt.version" title="Long">version</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.removedTimeToLiveMillis" title="=&gt; Long">removedTimeToLiveMillis</a><span class="delimiter">)</span> ⇒ <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved;$anonfun.isDefinedAt.key" title="String">key</a>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved" title="scala.collection.immutable.Iterable[String]">oldRemoved</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
          <a href="#akka.contrib.pattern;DistributedPubSubMediator.registry_=" title="(x$1: Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket])Unit">registry</a> <span title="(kv: (akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket))scala.collection.immutable.Map[akka.actor.Address,akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket]">+=</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.owner" title="(x: akka.actor.Address)ArrowAssoc[akka.actor.Address]">owner</a> <span title="(y: akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)(akka.actor.Address, akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket)">-&gt;</span> <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.owner" title="akka.actor.Address" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.x$23">copy</a><span class="delimiter">(</span>content = <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.bucket" title="akka.contrib.pattern.DistributedPubSubMediator.Internal.Bucket">bucket</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.Internal;Bucket.content" title="=&gt; scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]">content</a> <a title="scala.collection.immutable.TreeMap[String,akka.contrib.pattern.DistributedPubSubMediator.Internal.ValueHolder]" id="akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.x$21">--</a> <a href="#akka.contrib.pattern;DistributedPubSubMediator.prune.$anonfun.oldRemoved" title="scala.collection.immutable.Iterable[String]">oldRemoved</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Extension that starts a [[DistributedPubSubMediator]] actor
 * with settings defined in config section `akka.contrib.cluster.pub-sub`.
 */</span>
<span class="keyword">object</span> <a title="akka.contrib.pattern.DistributedPubSubExtension.type" id="akka.contrib.pattern.DistributedPubSubExtension">DistributedPubSubExtension</a> <a href="#akka.contrib.pattern.DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension.type" class="keyword">extends</a> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId" title="akka.actor.ExtensionId[akka.contrib.pattern.DistributedPubSubExtension]">ExtensionId</a><span class="delimiter">[</span>DistributedPubSubExtension<span class="delimiter">]</span> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionIdProvider" title="akka.actor.ExtensionIdProvider">ExtensionIdProvider</a> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ActorSystem)akka.contrib.pattern.DistributedPubSubExtension" id="akka.contrib.pattern.DistributedPubSubExtension.get">get</a><span class="delimiter">(</span><a title="akka.actor.ActorSystem" id="akka.contrib.pattern.DistributedPubSubExtension.get.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a><span class="delimiter">)</span>: <a href="#akka.contrib.pattern;DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension">DistributedPubSubExtension</a> = <span class="keyword">super</span>.<a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.get" title="(system: akka.actor.ActorSystem)akka.contrib.pattern.DistributedPubSubExtension">get</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubExtension.get.system" title="akka.actor.ActorSystem">system</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()akka.contrib.pattern.DistributedPubSubExtension.type" id="akka.contrib.pattern.DistributedPubSubExtension.lookup">lookup</a> = <a href="#akka.contrib.pattern.DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension.type">DistributedPubSubExtension</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(system: akka.actor.ExtendedActorSystem)akka.contrib.pattern.DistributedPubSubExtension" id="akka.contrib.pattern.DistributedPubSubExtension.createExtension">createExtension</a><span class="delimiter">(</span><a title="akka.actor.ExtendedActorSystem" id="akka.contrib.pattern.DistributedPubSubExtension.createExtension.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span>: <a href="#akka.contrib.pattern;DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension">DistributedPubSubExtension</a> =
    <span title="akka.contrib.pattern.DistributedPubSubExtension" class="keyword">new</span> <a href="#akka.contrib.pattern;DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension">DistributedPubSubExtension</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubExtension.createExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class DistributedPubSubExtension extends AnyRef with akka.actor.Extension" id="akka.contrib.pattern;DistributedPubSubExtension">DistributedPubSubExtension</a><a href="#akka.contrib.pattern;DistributedPubSubExtension" title="akka.contrib.pattern.DistributedPubSubExtension" class="delimiter">(</a><a title="akka.actor.ExtendedActorSystem" id="akka.contrib.pattern;DistributedPubSubExtension.system">system</a>: <a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ExtendedActorSystem" title="akka.actor.ExtendedActorSystem">ExtendedActorSystem</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;Extension" title="akka.actor.Extension">Extension</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="com.typesafe.config.Config" id="akka.contrib.pattern;DistributedPubSubExtension.config">config</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor.ActorSystem;Settings.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)com.typesafe.config.Config">getConfig</span><span class="delimiter">(</span><span title="String(&quot;akka.contrib.cluster.pub-sub&quot;)" class="string">&quot;akka.contrib.cluster.pub-sub&quot;</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Option[String]" id="akka.contrib.pattern;DistributedPubSubExtension.role">role</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;role&quot;)" class="string">&quot;role&quot;</span><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> ⇒ <span title="None.type">None</span>
    <span class="keyword">case</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubExtension.role.r">r</a>  ⇒ <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.role.r" title="String">r</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns true if this member is not tagged with the role configured for the
   * mediator.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.contrib.pattern;DistributedPubSubExtension.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span> = <a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.isTerminated" title="=&gt; Boolean">isTerminated</a> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.role" title="=&gt; Option[String]">role</a>.<span title="(p: String =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.cluster.Cluster">Cluster</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.system" title="akka.actor.ExtendedActorSystem">system</a><span class="delimiter">)</span>.<a href="../../../../cluster/akka/cluster/Cluster.scala.html#akka.cluster;Cluster.selfRoles" title="=&gt; Set[String]">selfRoles</a>.<a href="#akka.contrib.pattern;DistributedPubSubExtension.isTerminated.$anonfun.elem" title="(elem: String)Boolean">contains</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The [[DistributedPubSubMediator]]
   */</span>
  <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.contrib.pattern;DistributedPubSubExtension.mediator">mediator</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <span title="akka.actor.ActorRef" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;DistributedPubSubExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.routing.RoutingLogic" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.routingLogic">routingLogic</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;routing-logic&quot;)" class="string">&quot;routing-logic&quot;</span><span class="delimiter">)</span> <span title="akka.routing.RoutingLogic" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="String(&quot;random&quot;)" class="string">&quot;random&quot;</span>             ⇒ <a href="../../../../actor/akka/routing/Random.scala.html#akka.routing.RandomRoutingLogic.apply" title="()akka.routing.RandomRoutingLogic">RandomRoutingLogic</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String(&quot;round-robin&quot;)" class="string">&quot;round-robin&quot;</span>        ⇒ <a href="../../../../actor/akka/routing/RoundRobin.scala.html#akka.routing.RoundRobinRoutingLogic.apply" title="()akka.routing.RoundRobinRoutingLogic">RoundRobinRoutingLogic</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String(&quot;consistent-hashing&quot;)" class="string">&quot;consistent-hashing&quot;</span> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;\'consistent-hashing\' routing logic can\'t be used by the pub-sub mediator&quot;)" class="string">'consistent-hashing' routing logic can't be used by the pub-sub mediator&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="String(&quot;broadcast&quot;)" class="string">&quot;broadcast&quot;</span>          ⇒ <a href="../../../../actor/akka/routing/Broadcast.scala.html#akka.routing.BroadcastRoutingLogic.apply" title="()akka.routing.BroadcastRoutingLogic">BroadcastRoutingLogic</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.routingLogic.other">other</a>                ⇒ <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Unknown \'routing-logic\': [&quot;)">Unknown 'routing-logic': [$</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.routingLogic.other" title="String">other</a><span title="String(&quot;]&quot;)" class="string">]&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.gossipInterval">gossipInterval</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String, x$2: java.util.concurrent.TimeUnit)Long">getDuration</span><span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong" class="delimiter">(</span><span title="String(&quot;gossip-interval&quot;)" class="string">&quot;gossip-interval&quot;</span>, <span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>
      <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.removedTimeToLive">removedTimeToLive</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String, x$2: java.util.concurrent.TimeUnit)Long">getDuration</span><span title="implicit scala.concurrent.duration.package.DurationLong : (n: Long)concurrent.duration.DurationLong" class="delimiter">(</span><span title="String(&quot;removed-time-to-live&quot;)" class="string">&quot;removed-time-to-live&quot;</span>, <span title="java.util.concurrent.TimeUnit(MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">millis</span>
      <span class="keyword">val</span> <a title="Int" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.maxDeltaElements">maxDeltaElements</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)Int">getInt</span><span class="delimiter">(</span><span title="String(&quot;max-delta-elements&quot;)" class="string">&quot;max-delta-elements&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="akka.contrib.pattern;DistributedPubSubExtension.mediator.name">name</a> = <a href="#akka.contrib.pattern;DistributedPubSubExtension.config" title="=&gt; com.typesafe.config.Config">config</a>.<span title="(x$1: String)String">getString</span><span class="delimiter">(</span><span title="String(&quot;name&quot;)" class="string">&quot;name&quot;</span><span class="delimiter">)</span>
      <a href="#akka.contrib.pattern;DistributedPubSubExtension.system" title="akka.actor.ExtendedActorSystem">system</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(874c98419a)" title="(props: akka.actor.Props, name: String)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="#akka.contrib.pattern.DistributedPubSubMediator" title="akka.contrib.pattern.DistributedPubSubMediator.type">DistributedPubSubMediator</a>.<a href="#akka.contrib.pattern.DistributedPubSubMediator.props(2e677ffec1)" title="(role: Option[String], routingLogic: akka.routing.RoutingLogic, gossipInterval: scala.concurrent.duration.FiniteDuration, removedTimeToLive: scala.concurrent.duration.FiniteDuration, maxDeltaElements: Int)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.contrib.pattern;DistributedPubSubExtension.role" title="=&gt; Option[String]">role</a>, <a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.routingLogic" title="akka.routing.RoutingLogic">routingLogic</a>, <a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.gossipInterval" title="scala.concurrent.duration.FiniteDuration">gossipInterval</a>, <a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.removedTimeToLive" title="scala.concurrent.duration.FiniteDuration">removedTimeToLive</a>, <a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.maxDeltaElements" title="Int">maxDeltaElements</a><span class="delimiter">)</span>,
        <a href="#akka.contrib.pattern;DistributedPubSubExtension.mediator.name" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
