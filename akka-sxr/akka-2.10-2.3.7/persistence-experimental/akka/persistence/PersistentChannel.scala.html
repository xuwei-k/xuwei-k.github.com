<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>persistence-experimental/akka/persistence/PersistentChannel.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.persistence

<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> scala.<span title="language.type">language</span>.postfixOps

<span class="keyword">import</span> akka.AkkaException
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.persistence.<a href="JournalProtocol.scala.html#akka.persistence.JournalProtocol" title="akka.persistence.JournalProtocol.type">JournalProtocol</a>._

<span class="comment">/**
 * A [[PersistentChannel]] configuration object.
 *
 * @param redeliverMax Maximum number of redelivery attempts.
 * @param redeliverInterval Interval between redelivery attempts.
 * @param redeliverFailureListener Receiver of [[RedeliverFailure]] notifications which are sent when the number
 *                                 of redeliveries reaches `redeliverMax` for a sequence of messages. To enforce
 *                                 a redelivery of these messages, the listener has to [[Reset]] the persistent
 *                                 channel. Alternatively, it can also confirm these messages, preventing further
 *                                 redeliveries.
 * @param replyPersistent If `true` the sender will receive the successfully stored [[Persistent]] message that has
 *                        been submitted with a [[Deliver]] request, or a [[PersistenceFailure]] message in case of
 *                        a persistence failure.
 * @param pendingConfirmationsMax Message delivery is suspended by a channel if the number of pending reaches the
 *                                specified value and is resumed again if the number of pending confirmations falls
 *                                below `pendingConfirmationsMin`.
 * @param pendingConfirmationsMin Message delivery is resumed if the number of pending confirmations falls below
 *                                this limit. It is suspended again if it reaches `pendingConfirmationsMax`.
 *                                Message delivery is enabled for a channel if the number of pending confirmations
 *                                is below this limit, or, is resumed again if it falls below this limit.
 * @param idleTimeout Maximum interval between read attempts made by a persistent channel. This settings applies,
 *                    for example, after a journal failed to serve a read request. The next read request is then
 *                    made after the configured timeout.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">case class</span> <a title="class PersistentChannelSettings extends AnyRef with Product with Serializable" id="akka.persistence;PersistentChannelSettings">PersistentChannelSettings</a><a href="#akka.persistence;PersistentChannelSettings" title="Product" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="Int" id="akka.persistence.PersistentChannelSettings.apply$default$1">redeliverMax</a>: <span title="Int">Int</span> = <span title="Int(5)" class="int">5</span>,
  <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence.PersistentChannelSettings.apply$default$2">redeliverInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">5</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">seconds</span>,
  <span class="keyword">val</span> <a title="Option[akka.actor.ActorRef]" id="akka.persistence.PersistentChannelSettings.apply$default$3">redeliverFailureListener</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = <span title="None.type">None</span>,
  <span class="keyword">val</span> <a title="Boolean" id="akka.persistence.PersistentChannelSettings.apply$default$4">replyPersistent</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>,
  <span class="keyword">val</span> <a title="Long" id="akka.persistence.PersistentChannelSettings.apply$default$5">pendingConfirmationsMax</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>,
  <span class="keyword">val</span> <a title="Long" id="akka.persistence.PersistentChannelSettings.apply$default$6">pendingConfirmationsMin</a>: <span title="Long">Long</span> = Long.<span title="Long(9223372036854775807L)">MaxValue</span>,
  <span class="keyword">val</span> <a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence.PersistentChannelSettings.apply$default$7">idleTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span> = <span title="implicit scala.concurrent.duration.package.DurationInt : (n: Int)concurrent.duration.DurationInt" class="int">1</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">minute</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(redeliverMax: Int)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withRedeliverMax">withRedeliverMax</a><span class="delimiter">(</span><a title="Int" id="akka.persistence;PersistentChannelSettings.withRedeliverMax.redeliverMax">redeliverMax</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence;PersistentChannelSettings" title="(redeliverMax: Int, redeliverInterval: scala.concurrent.duration.FiniteDuration, redeliverFailureListener: Option[akka.actor.ActorRef], replyPersistent: Boolean, pendingConfirmationsMax: Long, pendingConfirmationsMin: Long, idleTimeout: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings">copy</a><span class="delimiter">(</span>redeliverMax = <a href="#akka.persistence;PersistentChannelSettings.withRedeliverMax.redeliverMax" title="Int">redeliverMax</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(redeliverInterval: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withRedeliverInterval">withRedeliverInterval</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistentChannelSettings.withRedeliverInterval.redeliverInterval">redeliverInterval</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withRedeliverInterval.x$8">copy</a><span class="delimiter">(</span>redeliverInterval = <a href="#akka.persistence;PersistentChannelSettings.withRedeliverInterval.redeliverInterval" title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistentChannelSettings.withRedeliverInterval.x$2">redeliverInterval</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(redeliverFailureListener: akka.actor.ActorRef)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withRedeliverFailureListener">withRedeliverFailureListener</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence;PersistentChannelSettings.withRedeliverFailureListener.redeliverFailureListener">redeliverFailureListener</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withRedeliverFailureListener.x$15">copy</a><span class="delimiter">(</span>redeliverFailureListener = <span title="(x: akka.actor.ActorRef)Option[akka.actor.ActorRef]">Option</span><a title="Option[akka.actor.ActorRef]" id="akka.persistence;PersistentChannelSettings.withRedeliverFailureListener.x$9" class="delimiter">(</a><a href="#akka.persistence;PersistentChannelSettings.withRedeliverFailureListener.redeliverFailureListener" title="akka.actor.ActorRef">redeliverFailureListener</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(replayPersistent: Boolean)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withReplyPersistent">withReplyPersistent</a><span class="delimiter">(</span><a title="Boolean" id="akka.persistence;PersistentChannelSettings.withReplyPersistent.replayPersistent">replayPersistent</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withReplyPersistent.x$22">copy</a><span class="delimiter">(</span>replyPersistent = <a href="#akka.persistence.PersistentChannelSettings.apply$default$4" title="Boolean" id="akka.persistence;PersistentChannelSettings.withReplyPersistent.x$16">replyPersistent</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(pendingConfirmationsMax: Long)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMax">withPendingConfirmationsMax</a><span class="delimiter">(</span><a title="Long" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMax.pendingConfirmationsMax">pendingConfirmationsMax</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMax.x$29">copy</a><span class="delimiter">(</span>pendingConfirmationsMax = <a href="#akka.persistence;PersistentChannelSettings.withPendingConfirmationsMax.pendingConfirmationsMax" title="Long" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMax.x$23">pendingConfirmationsMax</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(pendingConfirmationsMin: Long)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMin">withPendingConfirmationsMin</a><span class="delimiter">(</span><a title="Long" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMin.pendingConfirmationsMin">pendingConfirmationsMin</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMin.x$36">copy</a><span class="delimiter">(</span>pendingConfirmationsMin = <a href="#akka.persistence;PersistentChannelSettings.withPendingConfirmationsMin.pendingConfirmationsMin" title="Long" id="akka.persistence;PersistentChannelSettings.withPendingConfirmationsMin.x$30">pendingConfirmationsMin</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="(idleTimeout: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannelSettings.withIdleTimeout">withIdleTimeout</a><span class="delimiter">(</span><a title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistentChannelSettings.withIdleTimeout.idleTimeout">idleTimeout</a>: <span title="scala.concurrent.duration.FiniteDuration">FiniteDuration</span><span class="delimiter">)</span>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a> =
    <a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="Int" id="akka.persistence;PersistentChannelSettings.withIdleTimeout.x$43">copy</a><span class="delimiter">(</span>idleTimeout = <a href="#akka.persistence;PersistentChannelSettings.withIdleTimeout.idleTimeout" title="scala.concurrent.duration.FiniteDuration" id="akka.persistence;PersistentChannelSettings.withIdleTimeout.x$37">idleTimeout</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Converts this configuration object to [[ChannelSettings]].
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.persistence.ChannelSettings" id="akka.persistence;PersistentChannelSettings.toChannelSettings">toChannelSettings</a>: <a href="Channel.scala.html#akka.persistence;ChannelSettings" title="akka.persistence.ChannelSettings">ChannelSettings</a> =
    <a href="Channel.scala.html#akka.persistence;ChannelSettings" title="(redeliverMax: Int, redeliverInterval: scala.concurrent.duration.FiniteDuration, redeliverFailureListener: Option[akka.actor.ActorRef])akka.persistence.ChannelSettings">ChannelSettings</a><span class="delimiter">(</span><a href="#akka.persistence.PersistentChannelSettings.apply$default$1" title="=&gt; Int">redeliverMax</a>, <a href="#akka.persistence.PersistentChannelSettings.apply$default$2" title="=&gt; scala.concurrent.duration.FiniteDuration">redeliverInterval</a>, <a href="#akka.persistence.PersistentChannelSettings.apply$default$3" title="=&gt; Option[akka.actor.ActorRef]">redeliverFailureListener</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="akka.persistence.PersistentChannelSettings.type" id="akka.persistence.PersistentChannelSettings.readResolve">PersistentChannelSettings</a> <a href="#akka.persistence.PersistentChannelSettings.readResolve" title="akka.persistence.PersistentChannelSettings.type" class="delimiter">{</a>
  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="()akka.persistence.PersistentChannelSettings" id="akka.persistence.PersistentChannelSettings.create">create</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#akka.persistence.PersistentChannelSettings.readResolve" title="akka.persistence.PersistentChannelSettings.type">PersistentChannelSettings</a>.<a href="#akka.persistence;PersistentChannelSettings" title="(redeliverMax: Int, redeliverInterval: scala.concurrent.duration.FiniteDuration, redeliverFailureListener: Option[akka.actor.ActorRef], replyPersistent: Boolean, pendingConfirmationsMax: Long, pendingConfirmationsMin: Long, idleTimeout: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings">apply</a><span class="delimiter">(</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Resets a [[PersistentChannel]], forcing it to redeliver all unconfirmed persistent
 * messages. This does not affect writing [[Deliver]] requests.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">case object</span> <a href="#akka.persistence.Reset.productElement.x$1" title="akka.persistence.Reset.type" id="akka.persistence.Reset.readResolve">Reset</a> <span title="Product" class="delimiter">{</span>
  <span class="comment">/**
   * Java API.
   */</span>
  <span class="keyword">def</span> <a title="()akka.persistence.Reset.type" id="akka.persistence.Reset.getInstance">getInstance</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="keyword">this</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Exception thrown by a [[PersistentChannel]] child actor to re-initiate delivery.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class ResetException extends akka.AkkaException" id="akka.persistence;ResetException">ResetException</a> <a href="#akka.persistence;ResetException" title="akka.persistence.ResetException" class="keyword">extends</a> <a href="../../../actor/akka/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><span title="String(&quot;Channel reset on application request&quot;)" class="string">&quot;Channel reset on application request&quot;</span><span class="delimiter">)</span>

<span class="comment">/**
 * A [[PersistentChannel]] implements the same functionality as a [[Channel]] but additionally persists
 * [[Deliver]] requests before they are served. Persistent channels are useful in combination with slow
 * destinations or destinations that are unavailable for a long time. `Deliver` requests that have been
 * persisted by a persistent channel are deleted when destinations confirm the receipt of the corresponding
 * messages.
 *
 * The number of pending confirmations can be limited by a persistent channel based on the parameters of
 * [[PersistentChannelSettings]]. It can suspend delivery when the number of pending confirmations reaches
 * `pendingConfirmationsMax` and resume delivery again when this number falls below `pendingConfirmationsMin`.
 * This prevents both flooding destinations with more messages than they can process and unlimited memory
 * consumption by the channel. A persistent channel continues to persist [[Deliver]] request even when
 * message delivery is temporarily suspended.
 *
 * A persistent channel can also reply to [[Deliver]] senders if the request has been successfully persisted
 * or not (see `replyPersistent` parameter in [[PersistentChannelSettings]]). In case of success, the channel
 * replies with the contained [[Persistent]] message, otherwise with a [[PersistenceFailure]] message.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class PersistentChannel extends AnyRef with akka.actor.Actor" id="akka.persistence;PersistentChannel">PersistentChannel</a> <a href="#akka.persistence;PersistentChannel" title="akka.persistence.PersistentChannel" class="keyword">private</a><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="delimiter">(</span><a title="Option[String]" id="akka.persistence;PersistentChannel._channelId">_channelId</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="akka.persistence.PersistentChannelSettings" id="akka.persistence;PersistentChannel.channelSettings">channelSettings</a>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="String" id="akka.persistence;PersistentChannel.id">id</a> = <a href="#akka.persistence;PersistentChannel._channelId" title="Option[String]">_channelId</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="akka.persistence;PersistentChannel.id.cid">cid</a><span class="delimiter">)</span> ⇒ <a href="#akka.persistence;PersistentChannel.id.cid" title="String">cid</a>
    <span class="keyword">case</span> <span title="None.type">None</span>      ⇒ <a href="../../../actor/akka/actor/Extension.scala.html#akka.actor;ExtensionId.apply" title="(system: akka.actor.ActorSystem)akka.persistence.Persistence">Persistence</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="Persistence.scala.html#akka.persistence;Persistence.channelId" title="(channel: akka.actor.ActorRef)String">channelId</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence;PersistentChannel.requestReader">requestReader</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.RequestReader](classOf[akka.persistence.RequestReader])" class="delimiter">[</span>RequestReader<span class="delimiter">]</span>, <a href="#akka.persistence;PersistentChannel.id" title="=&gt; String">id</a>, <a href="#akka.persistence;PersistentChannel.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence;PersistentChannel.requestWriter">requestWriter</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.RequestWriter](classOf[akka.persistence.RequestWriter])" class="delimiter">[</span>RequestWriter<span class="delimiter">]</span>, <a href="#akka.persistence;PersistentChannel.id" title="=&gt; String">id</a>, <a href="#akka.persistence;PersistentChannel.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a>, <a href="#akka.persistence;PersistentChannel.requestReader" title="=&gt; akka.actor.ActorRef">requestReader</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence;PersistentChannel.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.persistence.Deliver" id="akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.d">d</a> @ Deliver<span class="delimiter">(</span><a title="akka.persistence.PersistentRepr" id="akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.persistent">persistent</a>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a>, <a title="akka.actor.ActorPath" id="akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.destination">destination</a><span class="delimiter">)</span> ⇒
      <span class="comment">// Persist the Deliver request by sending reliableStorage a Persistent message</span>
      <span class="comment">// with the Deliver request as payload. This persistent message is referred to</span>
      <span class="comment">// as the wrapper message, whereas the persistent message contained in the Deliver</span>
      <span class="comment">// request is referred to as wrapped message.</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.persistent" title="akka.persistence.PersistentRepr">persistent</a>.<a href="Persistent.scala.html#akka.persistence;PersistentRepr.confirms" title="=&gt; scala.collection.immutable.Seq[String]">confirms</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.persistence;PersistentChannel.id" title="=&gt; String">id</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#akka.persistence;PersistentChannel.requestWriter" title="=&gt; akka.actor.ActorRef">requestWriter</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="Persistent.scala.html#akka.persistence.Persistent" title="akka.persistence.Persistent.type">Persistent</a><a href="Persistent.scala.html#akka.persistence.Persistent.apply$default$2" title="Option[akka.persistence.Persistent]" id="akka.persistence;PersistentChannel.receive;$anonfun.applyOrElse.x$45" class="delimiter">(</a><a href="#akka.persistence;PersistentChannel.receive;$anonfun.isDefinedAt.d" title="akka.persistence.Deliver" id="akka.persistence;PersistentChannel.receive;$anonfun.applyOrElse.x$44">d</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.persistence.Reset.readResolve" title="akka.persistence.Reset.type">Reset</a> ⇒ <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">requestReader</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.persistence.Reset.readResolve" title="akka.persistence.Reset.type">Reset</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

@deprecated<span class="delimiter">(</span><span class="string">&quot;Channel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">object</span> <a title="akka.persistence.PersistentChannel.type" id="akka.persistence.PersistentChannel">PersistentChannel</a> <a href="#akka.persistence.PersistentChannel" title="akka.persistence.PersistentChannel.type" class="delimiter">{</a>
  <span class="comment">/**
   * Returns a channel actor configuration object for creating a [[PersistentChannel]] with a
   * generated id and default [[PersistentChannelSettings]].
   */</span>
  <span class="keyword">def</span> <a title="()akka.actor.Props" id="akka.persistence.PersistentChannel.props(e990b60154)">props</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <a href="#akka.persistence.PersistentChannel.props(347140396e)" title="(channelSettings: akka.persistence.PersistentChannelSettings)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.persistence;PersistentChannelSettings" title="(redeliverMax: Int, redeliverInterval: scala.concurrent.duration.FiniteDuration, redeliverFailureListener: Option[akka.actor.ActorRef], replyPersistent: Boolean, pendingConfirmationsMax: Long, pendingConfirmationsMin: Long, idleTimeout: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns a channel actor configuration object for creating a [[PersistentChannel]] with a
   * generated id and specified `channelSettings`.
   *
   * @param channelSettings channel configuration object.
   */</span>
  <span class="keyword">def</span> <a title="(channelSettings: akka.persistence.PersistentChannelSettings)akka.actor.Props" id="akka.persistence.PersistentChannel.props(347140396e)">props</a><span class="delimiter">(</span><a title="akka.persistence.PersistentChannelSettings" id="akka.persistence.PersistentChannel.props(347140396e).channelSettings">channelSettings</a>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.PersistentChannel](classOf[akka.persistence.PersistentChannel])" class="delimiter">[</span>PersistentChannel<span class="delimiter">]</span>, <span title="None.type">None</span>, <a href="#akka.persistence.PersistentChannel.props(347140396e).channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns a channel actor configuration object for creating a [[PersistentChannel]] with the
   * specified id and default [[PersistentChannelSettings]].
   *
   * @param channelId channel id.
   */</span>
  <span class="keyword">def</span> <a title="(channelId: String)akka.actor.Props" id="akka.persistence.PersistentChannel.props(39b4f22e6d)">props</a><span class="delimiter">(</span><a title="String" id="akka.persistence.PersistentChannel.props(39b4f22e6d).channelId">channelId</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="#akka.persistence.PersistentChannel.props(2aa03f4474)" title="(channelId: String, channelSettings: akka.persistence.PersistentChannelSettings)akka.actor.Props">props</a><span class="delimiter">(</span><a href="#akka.persistence.PersistentChannel.props(39b4f22e6d).channelId" title="String">channelId</a>, <a href="#akka.persistence;PersistentChannelSettings" title="(redeliverMax: Int, redeliverInterval: scala.concurrent.duration.FiniteDuration, redeliverFailureListener: Option[akka.actor.ActorRef], replyPersistent: Boolean, pendingConfirmationsMax: Long, pendingConfirmationsMin: Long, idleTimeout: scala.concurrent.duration.FiniteDuration)akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns a channel actor configuration object for creating a [[PersistentChannel]] with the
   * specified id and specified `channelSettings`.
   *
   * @param channelId channel id.
   * @param channelSettings channel configuration object.
   */</span>
  <span class="keyword">def</span> <a title="(channelId: String, channelSettings: akka.persistence.PersistentChannelSettings)akka.actor.Props" id="akka.persistence.PersistentChannel.props(2aa03f4474)">props</a><span class="delimiter">(</span><a title="String" id="akka.persistence.PersistentChannel.props(2aa03f4474).channelId">channelId</a>: <span title="String">String</span>, <a title="akka.persistence.PersistentChannelSettings" id="akka.persistence.PersistentChannel.props(2aa03f4474).channelSettings">channelSettings</a>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> =
    <a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.PersistentChannel](classOf[akka.persistence.PersistentChannel])" class="delimiter">[</span>PersistentChannel<span class="delimiter">]</span>, <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#akka.persistence.PersistentChannel.props(2aa03f4474).channelId" title="String">channelId</a><span class="delimiter">)</span>, <a href="#akka.persistence.PersistentChannel.props(2aa03f4474).channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Plugin API.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">case class</span> <a title="class DeliveredByPersistentChannel extends AnyRef with akka.persistence.Delivered with akka.persistence.PersistentId with Product with Serializable" id="akka.persistence.DeliveredByPersistentChannel.readResolve">DeliveredByPersistentChannel</a><a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="Product" class="delimiter">(</a>
  <a title="String" id="akka.persistence;DeliveredByPersistentChannel.channelId">channelId</a>: <span title="String">String</span>,
  <a title="Long" id="akka.persistence;DeliveredByPersistentChannel.persistentSequenceNr">persistentSequenceNr</a>: <span title="Long">Long</span>,
  <a title="Long" id="akka.persistence.DeliveredByPersistentChannel.apply$default$3">deliverySequenceNr</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="long">0L</span>,
  <a title="akka.actor.ActorRef" id="akka.persistence.DeliveredByPersistentChannel.apply$default$4">channel</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Channel.scala.html#akka.persistence;Delivered" title="akka.persistence.Delivered">Delivered</a> <span class="keyword">with</span> <a href="Persistent.scala.html#akka.persistence;PersistentId" title="akka.persistence.PersistentId">PersistentId</a> <span class="delimiter">{</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="akka.persistence;DeliveredByPersistentChannel.persistenceId">persistenceId</a>: <span title="String">String</span> = <a href="#akka.persistence;DeliveredByPersistentChannel.channelId" title="=&gt; String">channelId</a>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use persistenceId.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="akka.persistence;DeliveredByPersistentChannel.processorId">processorId</a> = <a href="#akka.persistence;DeliveredByPersistentChannel.persistenceId" title="=&gt; String">persistenceId</a>
  <span class="keyword">def</span> <a title="=&gt; Long" id="akka.persistence;DeliveredByPersistentChannel.sequenceNr">sequenceNr</a>: <span title="Long">Long</span> = <a href="#akka.persistence;DeliveredByPersistentChannel.persistentSequenceNr" title="=&gt; Long">persistentSequenceNr</a>
  <span class="keyword">def</span> <a title="(deliverySequenceNr: Long, channel: akka.actor.ActorRef)akka.persistence.DeliveredByPersistentChannel" id="akka.persistence;DeliveredByPersistentChannel.update">update</a><span class="delimiter">(</span><a title="Long" id="akka.persistence;DeliveredByPersistentChannel.update.deliverySequenceNr">deliverySequenceNr</a>: <span title="Long">Long</span>, <a title="akka.actor.ActorRef" id="akka.persistence;DeliveredByPersistentChannel.update.channel">channel</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="akka.persistence.DeliveredByPersistentChannel">DeliveredByPersistentChannel</a> =
    <a href="#akka.persistence;DeliveredByPersistentChannel.channelId" title="String" id="akka.persistence;DeliveredByPersistentChannel.update.x$49">copy</a><span class="delimiter">(</span>deliverySequenceNr = <a href="#akka.persistence;DeliveredByPersistentChannel.update.deliverySequenceNr" title="Long" id="akka.persistence;DeliveredByPersistentChannel.update.x$46">deliverySequenceNr</a>, channel = <a href="#akka.persistence;DeliveredByPersistentChannel.update.channel" title="akka.actor.ActorRef" id="akka.persistence;DeliveredByPersistentChannel.update.x$47">channel</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">private</span><span class="delimiter">[</span>persistence<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class DeliveredByPersistentChannelBatching extends AnyRef with akka.actor.Actor" id="akka.persistence;DeliveredByPersistentChannelBatching">DeliveredByPersistentChannelBatching</a><a href="#akka.persistence;DeliveredByPersistentChannelBatching" title="akka.persistence.DeliveredByPersistentChannelBatching" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.persistence;DeliveredByPersistentChannelBatching.journal">journal</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.persistence.PersistenceSettings" id="akka.persistence;DeliveredByPersistentChannelBatching.settings">settings</a>: <a href="Persistence.scala.html#akka.persistence;PersistenceSettings" title="akka.persistence.PersistenceSettings">PersistenceSettings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="akka.persistence;DeliveredByPersistentChannelBatching.publish">publish</a> = <a href="#akka.persistence;DeliveredByPersistentChannelBatching.settings" title="akka.persistence.PersistenceSettings">settings</a>.<a href="Persistence.scala.html#akka.persistence;PersistenceSettings.internal" title="DeliveredByPersistentChannelBatching.this.settings.internal.type">internal</a>.<a href="Persistence.scala.html#akka.persistence;PersistenceSettings.internal.publishConfirmations" title="=&gt; Boolean">publishConfirmations</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="akka.persistence;DeliveredByPersistentChannelBatching.batchMax">batchMax</a> = <a href="#akka.persistence;DeliveredByPersistentChannelBatching.settings" title="akka.persistence.PersistenceSettings">settings</a>.<a href="Persistence.scala.html#akka.persistence;PersistenceSettings.journal" title="DeliveredByPersistentChannelBatching.this.settings.journal.type">journal</a>.<a href="Persistence.scala.html#akka.persistence;PersistenceSettings.journal.maxConfirmationBatchSize" title="=&gt; Int">maxConfirmationBatchSize</a>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="akka.persistence;DeliveredByPersistentChannelBatching.batching_=">batching</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]" id="akka.persistence;DeliveredByPersistentChannelBatching.batch_=">batch</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="[A]=&gt; scala.collection.immutable.Vector[A]">empty</span><span title="scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]" class="delimiter">[</span><a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="akka.persistence.DeliveredByPersistentChannel">DeliveredByPersistentChannel</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence;DeliveredByPersistentChannelBatching.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> DeleteMessagesSuccess<span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.persistence.PersistentId]" id="akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.messageIds">messageIds</a><span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="=&gt; scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">batch</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batching_=" title="(x$1: Boolean)Unit">batching</a> = <span title="Boolean(false)" class="keyword">false</span> <span class="keyword">else</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.journalBatch" title="()Unit">journalBatch</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.messageIds" title="scala.collection.immutable.Seq[akka.persistence.PersistentId]">messageIds</a>.<span title="(f: akka.persistence.PersistentId =&gt; Unit)Unit">foreach</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.applyOrElse.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.persistence.DeliveredByPersistentChannel" id="akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.applyOrElse.$anonfun.c">c</a>: <a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="akka.persistence.DeliveredByPersistentChannel">DeliveredByPersistentChannel</a> ⇒
          <a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.applyOrElse.$anonfun.c" title="akka.persistence.DeliveredByPersistentChannel">c</a>.<a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">channel</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.applyOrElse.$anonfun.c" title="akka.persistence.DeliveredByPersistentChannel">c</a>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.publish" title="=&gt; Boolean">publish</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a><span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.applyOrElse.$anonfun.c" title="akka.persistence.DeliveredByPersistentChannel">c</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> DeleteMessagesFailure<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="=&gt; scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">batch</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batching_=" title="(x$1: Boolean)Unit">batching</a> = <span title="Boolean(false)" class="keyword">false</span> <span class="keyword">else</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.journalBatch" title="()Unit">journalBatch</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.persistence.DeliveredByPersistentChannel" id="akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.d">d</a>: <a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="akka.persistence.DeliveredByPersistentChannel">DeliveredByPersistentChannel</a> ⇒
      <a href="#akka.persistence;DeliveredByPersistentChannelBatching.addToBatch" title="(pc: akka.persistence.DeliveredByPersistentChannel)Unit">addToBatch</a><span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.d" title="akka.persistence.DeliveredByPersistentChannel">d</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.batching_=" title="=&gt; Boolean">batching</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.maxBatchSizeReached" title="=&gt; Boolean">maxBatchSizeReached</a><span class="delimiter">)</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.journalBatch" title="()Unit">journalBatch</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Any" id="akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.m">m</a> ⇒ <a href="#akka.persistence;DeliveredByPersistentChannelBatching.journal" title="akka.actor.ActorRef">journal</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.receive;$anonfun.isDefinedAt.m" title="Any">m</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(pc: akka.persistence.DeliveredByPersistentChannel)Unit" id="akka.persistence;DeliveredByPersistentChannelBatching.addToBatch">addToBatch</a><span class="delimiter">(</span><a title="akka.persistence.DeliveredByPersistentChannel" id="akka.persistence;DeliveredByPersistentChannelBatching.addToBatch.pc">pc</a>: <a href="#akka.persistence.DeliveredByPersistentChannel.readResolve" title="akka.persistence.DeliveredByPersistentChannel">DeliveredByPersistentChannel</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="(x$1: scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel])Unit">batch</a> = <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="=&gt; scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">batch</a> <span title="(elem: akka.persistence.DeliveredByPersistentChannel)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel],akka.persistence.DeliveredByPersistentChannel,scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]])scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">:+</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.addToBatch.pc" title="akka.persistence.DeliveredByPersistentChannel">pc</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.persistence;DeliveredByPersistentChannelBatching.maxBatchSizeReached">maxBatchSizeReached</a>: <span title="Boolean">Boolean</span> =
    <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="=&gt; scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">batch</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batchMax" title="=&gt; Int">batchMax</a>

  <span class="keyword">def</span> <a title="()Unit" id="akka.persistence;DeliveredByPersistentChannelBatching.journalBatch">journalBatch</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">journal</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="JournalProtocol.scala.html#akka.persistence.JournalProtocol;DeleteMessages" title="(messageIds: scala.collection.immutable.Seq[akka.persistence.PersistentId], permanent: Boolean, requestor: Option[akka.actor.ActorRef])akka.persistence.JournalProtocol.DeleteMessages">DeleteMessages</a><span class="delimiter">(</span><a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="=&gt; scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel]">batch</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batch_=" title="(x$1: scala.collection.immutable.Vector[akka.persistence.DeliveredByPersistentChannel])Unit">batch</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
    <a href="#akka.persistence;DeliveredByPersistentChannelBatching.batching_=" title="(x$1: Boolean)Unit">batching</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Writes [[Deliver]] requests to the journal.
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class RequestWriter extends AnyRef with akka.persistence.Processor" id="akka.persistence;RequestWriter">RequestWriter</a><a href="#akka.persistence;RequestWriter" title="akka.persistence.RequestWriter" class="delimiter">(</a><a title="String" id="akka.persistence;RequestWriter.channelId">channelId</a>: <span title="String">String</span>, <a title="akka.persistence.PersistentChannelSettings" id="akka.persistence;RequestWriter.channelSettings">channelSettings</a>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a>, <a title="akka.actor.ActorRef" id="akka.persistence;RequestWriter.reader">reader</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Processor.scala.html#akka.persistence;Processor" title="akka.persistence.Processor">Processor</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.persistence.RequestWriter" title="akka.persistence.RequestWriter.type">RequestWriter</a>._
  <span class="keyword">import</span> <a href="#akka.persistence;RequestWriter.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a>._

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence;RequestWriter.cbJournal">cbJournal</a> = <a href="Recovery.scala.html#akka.persistence;Recovery.extension" title="=&gt; akka.persistence.Persistence">extension</a>.<a href="Persistence.scala.html#akka.persistence;Persistence.confirmationBatchingJournalForChannel" title="(channelId: String)akka.actor.ActorRef">confirmationBatchingJournalForChannel</a><span class="delimiter">(</span><a href="#akka.persistence;RequestWriter.channelId" title="String">channelId</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">val</span> <a title="String" id="akka.persistence;RequestWriter.persistenceId">persistenceId</a> = <a href="#akka.persistence;RequestWriter.channelId" title="String">channelId</a>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence;RequestWriter.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="akka.persistence.Persistent">p</span> @ <a href="Persistent.scala.html#akka.persistence.Persistent.unapply" title="(persistent: akka.persistence.Persistent)Option[(Any, Long)]">Persistent</a><span class="delimiter">(</span>Deliver<span class="delimiter">(</span><a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.wrapped">wrapped</a>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a>, _<span class="delimiter">)</span>, _<span class="delimiter">)</span> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="Processor.scala.html#akka.persistence;ProcessorImpl.recoveryRunning" title="=&gt; Boolean">recoveryRunning</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.wrapped" title="akka.persistence.PersistentRepr">wrapped</a>.<a href="Persistent.scala.html#akka.persistence;PersistentId.persistenceId" title="=&gt; String">persistenceId</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Persistent.scala.html#akka.persistence.PersistentRepr" title="akka.persistence.PersistentRepr.type">PersistentRepr</a>.<a href="Persistent.scala.html#akka.persistence.PersistentRepr.Undefined" title="=&gt; String">Undefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// Write a delivery confirmation to the journal so that replayed Deliver</span>
        <span class="comment">// requests from a sending processor are not persisted again. Replaying</span>
        <span class="comment">// Deliver requests is now the responsibility of this processor</span>
        <span class="comment">// and confirmation by destination is done to the wrapper p.sequenceNr.</span>
        <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">cbJournal</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Channel.scala.html#akka.persistence;DeliveredByChannel" title="(persistenceId: String, channelId: String, persistentSequenceNr: Long, deliverySequenceNr: Long, channel: akka.actor.ActorRef)akka.persistence.DeliveredByChannel">DeliveredByChannel</a><span class="delimiter">(</span><a href="#akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.wrapped" title="akka.persistence.PersistentRepr">wrapped</a>.<a href="Persistent.scala.html#akka.persistence;PersistentId.persistenceId" title="=&gt; String">persistenceId</a>, <a href="#akka.persistence;RequestWriter.channelId" title="String">channelId</a>, <a href="#akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.wrapped" title="akka.persistence.PersistentRepr">wrapped</a>.<a href="Persistent.scala.html#akka.persistence;PersistentId.sequenceNr" title="=&gt; Long">sequenceNr</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="Processor.scala.html#akka.persistence;ProcessorImpl.recoveryRunning" title="=&gt; Boolean">recoveryRunning</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$4" title="=&gt; Boolean">replyPersistent</a><span class="delimiter">)</span>
        <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">sender</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.persistence;RequestWriter.receive;$anonfun.isDefinedAt.wrapped" title="akka.persistence.PersistentRepr">wrapped</a>

    <span class="keyword">case</span> <span title="akka.persistence.PersistenceFailure">p</span>: <a href="Processor.scala.html#akka.persistence;PersistenceFailure" title="akka.persistence.PersistenceFailure">PersistenceFailure</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence.PersistentChannelSettings.apply$default$4" title="=&gt; Boolean">replyPersistent</a><span class="delimiter">)</span> <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">sender</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <span title="akka.persistence.PersistenceFailure">p</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">protected</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(receive: RequestWriter.this.Receive, message: Any)Unit" id="akka.persistence;RequestWriter.aroundReceive">aroundReceive</a><span class="delimiter">(</span><a title="RequestWriter.this.Receive" id="akka.persistence;RequestWriter.aroundReceive.receive">receive</a>: <span title="RequestWriter.this.Receive">Receive</span>, <a title="Any" id="akka.persistence;RequestWriter.aroundReceive.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.persistence;RequestWriter" title="akka.persistence.RequestWriter" class="keyword">super</a>.<a href="Recovery.scala.html#akka.persistence;Recovery.aroundReceive" title="(receive: RequestWriter.this.Receive, message: Any)Unit">aroundReceive</a><span class="delimiter">(</span><a href="#akka.persistence;RequestWriter.aroundReceive.receive" title="RequestWriter.this.Receive">receive</a>, <a href="#akka.persistence;RequestWriter.aroundReceive.message" title="Any">message</a><span class="delimiter">)</span>
    <a href="#akka.persistence;RequestWriter.aroundReceive.message" title="Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="JournalProtocol.scala.html#akka.persistence.JournalProtocol.WriteMessagesSuccessful" title="akka.persistence.JournalProtocol.WriteMessagesSuccessful.type">WriteMessagesSuccessful</a> | WriteMessagesFailed<span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒
        <span class="comment">// activate reader after to reduce delivery latency</span>
        <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">reader</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.persistence.RequestWriter.RequestsWritten.readResolve" title="akka.persistence.RequestWriter.RequestsWritten.type">RequestsWritten</a>
      <span class="keyword">case</span> _ ⇒
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable, message: Option[Any])Unit" id="akka.persistence;RequestWriter.preRestart">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.persistence;RequestWriter.preRestart.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="Option[Any]" id="akka.persistence;RequestWriter.preRestart.message">message</a>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Recovery.scala.html#akka.persistence.Recover.apply$default$1" title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence;RequestWriter.preRestart.x$52">Recover</a><span class="delimiter">(</span>replayMax = <a title="Long" id="akka.persistence;RequestWriter.preRestart.x$50" class="long">0L</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.persistence;RequestWriter.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Recovery.scala.html#akka.persistence.Recover.apply$default$1" title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence;RequestWriter.preStart.x$55">Recover</a><span class="delimiter">(</span>replayMax = <a title="Long" id="akka.persistence;RequestWriter.preStart.x$53" class="long">0L</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

@deprecated<span class="delimiter">(</span><span class="string">&quot;Channel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">private</span> <span class="keyword">object</span> <a title="akka.persistence.RequestWriter.type" id="akka.persistence.RequestWriter">RequestWriter</a> <a href="#akka.persistence.RequestWriter" title="akka.persistence.RequestWriter.type" class="delimiter">{</a>
  <span class="keyword">case object</span> <a href="#akka.persistence.RequestWriter.RequestsWritten.productElement.x$1" title="akka.persistence.RequestWriter.RequestsWritten.type" id="akka.persistence.RequestWriter.RequestsWritten.readResolve">RequestsWritten</a>
<a href="#akka.persistence.RequestWriter.RequestsWritten.readResolve" title="akka.persistence.RequestWriter.RequestsWritten.type" class="delimiter">}</a>

<span class="comment">/**
 * Reads [[Deliver]] requests from the journal and processes them. The number of `Deliver` requests
 * processed per iteration depends on
 *
 *  - `pendingConfirmationsMax` parameter in [[PersistentChannelSettings]]
 *  - `pendingConfirmationsMin` parameter in [[PersistentChannelSettings]] and the
 *  - current number of pending confirmations.
 *
 * @see [[PersistentChannel]]
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;PersistentChannel will be removed, see `akka.persistence.AtLeastOnceDelivery` instead.&quot;</span>, since = <span class="string">&quot;2.3.4&quot;</span><span class="delimiter">)</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class RequestReader extends AnyRef with akka.actor.Actor with akka.persistence.Recovery" id="akka.persistence;RequestReader">RequestReader</a><a href="#akka.persistence;RequestReader" title="akka.persistence.RequestReader" class="delimiter">(</a><a title="String" id="akka.persistence;RequestReader.channelId">channelId</a>: <span title="String">String</span>, <a title="akka.persistence.PersistentChannelSettings" id="akka.persistence;RequestReader.channelSettings">channelSettings</a>: <a href="#akka.persistence;PersistentChannelSettings" title="akka.persistence.PersistentChannelSettings">PersistentChannelSettings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="Recovery.scala.html#akka.persistence;Recovery" title="akka.persistence.Recovery">Recovery</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.persistence.RequestWriter" title="akka.persistence.RequestWriter.type">RequestWriter</a>._
  <span class="keyword">import</span> <a href="#akka.persistence;RequestReader.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a>._

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence;RequestReader.delivery">delivery</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.ReliableDelivery](classOf[akka.persistence.ReliableDelivery])" class="delimiter">[</span>ReliableDelivery<span class="delimiter">]</span>, <a href="#akka.persistence;RequestReader.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a>.<a href="#akka.persistence;PersistentChannelSettings.toChannelSettings" title="=&gt; akka.persistence.ChannelSettings">toChannelSettings</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="RequestReader.this.State" id="akka.persistence;RequestReader.idle">idle</a>: <a href="Recovery.scala.html#akka.persistence;Recovery;State" title="RequestReader.this.State">State</a> = <a href="#akka.persistence;RequestReader.idle;$anon" title="RequestReader.this.State" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with RequestReader.this.State" id="akka.persistence;RequestReader.idle;$anon">State</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="akka.persistence;RequestReader.idle;$anon.toString">toString</a>: <span title="String">String</span> = <span title="String(&quot;idle&quot;)" class="string">&quot;idle&quot;</span>

    <span class="keyword">def</span> <a title="(receive: RequestReader.this.Receive, message: Any)Unit" id="akka.persistence;RequestReader.idle;$anon.aroundReceive">aroundReceive</a><span class="delimiter">(</span><a title="RequestReader.this.Receive" id="akka.persistence;RequestReader.idle;$anon.aroundReceive.receive">receive</a>: <span title="RequestReader.this.Receive">Receive</span>, <a title="Any" id="akka.persistence;RequestReader.idle;$anon.aroundReceive.message">message</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.persistence;RequestReader.idle;$anon.aroundReceive.message" title="Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.persistence.Recover" id="akka.persistence;RequestReader.idle;$anon.aroundReceive.r">r</a>: <a href="Recovery.scala.html#akka.persistence;Recover" title="akka.persistence.Recover">Recover</a> ⇒ <span class="comment">// ignore</span>
      <span class="keyword">case</span> <a title="Any" id="akka.persistence;RequestReader.idle;$anon.aroundReceive.other">other</a>      ⇒ <a href="Recovery.scala.html#akka.persistence;Recovery;State.process" title="(receive: RequestReader.this.Receive, message: Any)Unit">process</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.idle;$anon.aroundReceive.receive" title="RequestReader.this.Receive">receive</a>, <a href="#akka.persistence;RequestReader.idle;$anon.aroundReceive.other" title="Any">other</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence;RequestReader.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.persistence.Persistent" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.p">p</a> @ <a href="Persistent.scala.html#akka.persistence.Persistent.unapply" title="(persistent: akka.persistence.Persistent)Option[(Any, Long)]">Persistent</a><span class="delimiter">(</span><span title="akka.persistence.Deliver">d</span> @ Deliver<span class="delimiter">(</span><a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.wrapped">wrapped</a>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a>, <a title="akka.actor.ActorPath" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.destination">destination</a><span class="delimiter">)</span>, <a title="Long" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.snr">snr</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.receive;$anonfun.applyOrElse.wrapper">wrapper</a> = <a href="#akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.p" title="akka.persistence.Persistent">p</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="akka.persistence.PersistentRepr" class="delimiter">[</span><a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a><span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.receive;$anonfun.applyOrElse.prepared">prepared</a> = <a href="#akka.persistence;RequestReader.prepareDelivery" title="(wrapped: akka.persistence.PersistentRepr, wrapper: akka.persistence.PersistentRepr)akka.persistence.PersistentRepr">prepareDelivery</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.wrapped" title="akka.persistence.PersistentRepr">wrapped</a>, <a href="#akka.persistence;RequestReader.receive;$anonfun.applyOrElse.wrapper" title="akka.persistence.PersistentRepr">wrapper</a><span class="delimiter">)</span>
      <a href="#akka.persistence;RequestReader.numReplayed_=" title="(x$1: Long)Unit">numReplayed</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.persistence;RequestReader.numPending_=" title="(x$1: Long)Unit">numPending</a> <span title="(x: Int)Long">+=</span> <span title="Int(1)" class="int">1</span>
      <a href="#akka.persistence;RequestReader.delivery" title="=&gt; akka.actor.ActorRef">delivery</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.persistence.Deliver">d</span>.<a href="Channel.scala.html#akka.persistence;Deliver.copy" title="(persistent: akka.persistence.Persistent, destination: akka.actor.ActorPath)akka.persistence.Deliver">copy</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.receive;$anonfun.applyOrElse.prepared" title="akka.persistence.PersistentRepr">prepared</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.persistence.Delivered">d</span>: <a href="Channel.scala.html#akka.persistence;Delivered" title="akka.persistence.Delivered">Delivered</a> ⇒
      <a href="#akka.persistence;RequestReader.delivery" title="=&gt; akka.actor.ActorRef">delivery</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.forward" title="(message: Any)(implicit context: akka.actor.ActorContext)Unit">forward</a> <span title="akka.persistence.Delivered">d</span>
      <a href="#akka.persistence;RequestReader.numPending_=" title="(x$1: Long)Unit">numPending</a> = math.<span title="(x: Long, y: Long)Long">max</span><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Long)Long">-</span> <span title="Long(1L)" class="long">1L</span>, <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Long)Boolean">==</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$6" title="=&gt; Long">pendingConfirmationsMin</a><span class="delimiter">)</span> <a href="#akka.persistence;RequestReader.onReadRequest" title="()Unit">onReadRequest</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="akka.persistence.RedeliverFailure">d</span> @ RedeliverFailure<span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.persistence.ConfirmablePersistent]" id="akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.ms">ms</a><span class="delimiter">)</span> ⇒
      <span class="keyword">val</span> <a title="Long" id="akka.persistence;RequestReader.receive;$anonfun.applyOrElse.numPendingPrev">numPendingPrev</a> = <a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a>
      <a href="#akka.persistence;RequestReader.numPending_=" title="(x$1: Long)Unit">numPending</a> = math.<span title="(x: Long, y: Long)Long">max</span><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Int)Long">-</span> <a href="#akka.persistence;RequestReader.receive;$anonfun.isDefinedAt.ms" title="scala.collection.immutable.Seq[akka.persistence.ConfirmablePersistent]">ms</a>.<span title="=&gt; Int">length</span>, <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;RequestReader.receive;$anonfun.applyOrElse.numPendingPrev" title="Long">numPendingPrev</a> <span title="(x: Long)Boolean">&gt;</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$6" title="=&gt; Long">pendingConfirmationsMin</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Long)Boolean">&lt;=</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$6" title="=&gt; Long">pendingConfirmationsMin</a><span class="delimiter">)</span> <a href="#akka.persistence;RequestReader.onReadRequest" title="()Unit">onReadRequest</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.persistence.PersistentChannelSettings.apply$default$3" title="=&gt; Option[akka.actor.ActorRef]">redeliverFailureListener</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.receive;$anonfun.applyOrElse.$anonfun.x$1" title="akka.actor.ActorRef">_</a>.<a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><span title="akka.persistence.RedeliverFailure">d</span>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.parent" title="=&gt; akka.actor.ActorRef">parent</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.persistence.RequestWriter.RequestsWritten.readResolve" title="akka.persistence.RequestWriter.RequestsWritten.type">RequestsWritten</a> | <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Long)Boolean">&lt;=</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$6" title="=&gt; Long">pendingConfirmationsMin</a><span class="delimiter">)</span> <a href="#akka.persistence;RequestReader.onReadRequest" title="()Unit">onReadRequest</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.persistence.Reset.readResolve" title="akka.persistence.Reset.type">Reset</a> ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.persistence.ResetException" class="keyword">new</span> <a href="#akka.persistence;ResetException" title="akka.persistence.ResetException">ResetException</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(receive: RequestReader.this.Receive, await: Boolean)Unit" id="akka.persistence;RequestReader.onReplaySuccess">onReplaySuccess</a><span class="delimiter">(</span><a title="RequestReader.this.Receive" id="akka.persistence;RequestReader.onReplaySuccess.receive">receive</a>: <span title="RequestReader.this.Receive">Receive</span>, <a title="Boolean" id="akka.persistence;RequestReader.onReplaySuccess.await">await</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.persistence;RequestReader.onReplayComplete" title="()Unit">onReplayComplete</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.persistence;RequestReader.numReplayed_=" title="=&gt; Long">numReplayed</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a> <span title="(x: Long)Boolean">&lt;=</span> <a href="#akka.persistence.PersistentChannelSettings.apply$default$6" title="=&gt; Long">pendingConfirmationsMin</a><span class="delimiter">)</span> <a href="#akka.persistence;RequestReader.onReadRequest" title="()Unit">onReadRequest</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#akka.persistence;RequestReader.numReplayed_=" title="(x$1: Long)Unit">numReplayed</a> = <span title="Long(0L)" class="long">0L</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(receive: RequestReader.this.Receive, await: Boolean, cause: Throwable)Unit" id="akka.persistence;RequestReader.onReplayFailure">onReplayFailure</a><span class="delimiter">(</span><a title="RequestReader.this.Receive" id="akka.persistence;RequestReader.onReplayFailure.receive">receive</a>: <span title="RequestReader.this.Receive">Receive</span>, <a title="Boolean" id="akka.persistence;RequestReader.onReplayFailure.await">await</a>: <span title="Boolean">Boolean</span>, <a title="Throwable" id="akka.persistence;RequestReader.onReplayFailure.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.persistence;RequestReader.onReplayComplete" title="()Unit">onReplayComplete</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="akka.persistence;RequestReader.persistenceId">persistenceId</a>: <span title="String">String</span> = <a href="#akka.persistence;RequestReader.channelId" title="String">channelId</a>

  <span class="keyword">def</span> <a title="=&gt; String" id="akka.persistence;RequestReader.snapshotterId">snapshotterId</a>: <span title="String">String</span> =
    <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><span class="delimiter">{</span><a href="#akka.persistence;RequestReader.channelId" title="String">channelId</a><span class="delimiter">}</span><span title="String(&quot;-reader&quot;)" class="string">-reader&quot;</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence;RequestReader.dbJournal">dbJournal</a> = <a href="Recovery.scala.html#akka.persistence;Recovery.extension" title="=&gt; akka.persistence.Persistence">extension</a>.<a href="Persistence.scala.html#akka.persistence;Persistence.deletionBatchingJournalForChannel" title="(channelId: String)akka.actor.ActorRef">deletionBatchingJournalForChannel</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.channelId" title="String">channelId</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Number of delivery requests replayed (read) per iteration.
   */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.persistence;RequestReader.numReplayed_=">numReplayed</a> = <span title="Long(0L)" class="long">0L</span>

  <span class="comment">/**
   * Number of pending confirmations.
   */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Long" id="akka.persistence;RequestReader.numPending_=">numPending</a> = <span title="Long(0L)" class="long">0L</span>

  <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.channelSettings" title="akka.persistence.PersistentChannelSettings">channelSettings</a>.<a href="#akka.persistence.PersistentChannelSettings.apply$default$7" title="=&gt; scala.concurrent.duration.FiniteDuration">idleTimeout</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.persistence;RequestReader.onReplayComplete">onReplayComplete</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="Recovery.scala.html#akka.persistence;Recovery._currentState_=" title="(x$1: RequestReader.this.State)Unit">_currentState</a> = <a href="#akka.persistence;RequestReader.idle" title="=&gt; RequestReader.this.State">idle</a>
    <a href="Recovery.scala.html#akka.persistence;Recovery.receiverStash" title="=&gt; akka.actor.StashSupport">receiverStash</a>.<a href="../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.unstashAll(aa97cb1b3d)" title="()Unit">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="akka.persistence;RequestReader.onReadRequest">onReadRequest</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Recovery.scala.html#akka.persistence;Recovery._currentState" title="=&gt; RequestReader.this.State">_currentState</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.persistence;RequestReader.idle" title="=&gt; RequestReader.this.State">idle</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="Recovery.scala.html#akka.persistence;Recovery._currentState_=" title="(x$1: RequestReader.this.State)Unit">_currentState</a> = <a href="Recovery.scala.html#akka.persistence;Recovery.replayStarted" title="(await: Boolean)RequestReader.this.State">replayStarted</a><span class="delimiter">(</span>await = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">dbJournal</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="JournalProtocol.scala.html#akka.persistence.JournalProtocol;ReplayMessages" title="(fromSequenceNr: Long, toSequenceNr: Long, max: Long, persistenceId: String, persistentActor: akka.actor.ActorRef, replayDeleted: Boolean)akka.persistence.JournalProtocol.ReplayMessages">ReplayMessages</a><span class="delimiter">(</span><a href="Recovery.scala.html#akka.persistence;Recovery.lastSequenceNr" title="=&gt; Long">lastSequenceNr</a> <span title="(x: Long)Long">+</span> <span title="Long(1L)" class="long">1L</span>, Long.<span title="Long(9223372036854775807L)">MaxValue</span>, <a href="#akka.persistence.PersistentChannelSettings.apply$default$5" title="=&gt; Long">pendingConfirmationsMax</a> <span title="(x: Long)Long">-</span> <a href="#akka.persistence;RequestReader.numPending_=" title="=&gt; Long">numPending</a>, <a href="#akka.persistence;RequestReader.persistenceId" title="=&gt; String">persistenceId</a>, <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * @param wrapped persistent message contained in a deliver request
   * @param wrapper persistent message that contains a deliver request
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(wrapped: akka.persistence.PersistentRepr, wrapper: akka.persistence.PersistentRepr)akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.prepareDelivery">prepareDelivery</a><span class="delimiter">(</span><a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.prepareDelivery.wrapped">wrapped</a>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a>, <a title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.prepareDelivery.wrapper">wrapper</a>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a><span class="delimiter">)</span>: <a href="Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a> = <span class="delimiter">{</span>
    <a href="Persistent.scala.html#akka.persistence.ConfirmablePersistentImpl.apply(c7344d043d)" title="(persistent: akka.persistence.PersistentRepr, confirmMessage: akka.persistence.Delivered, confirmTarget: akka.actor.ActorRef)akka.persistence.ConfirmablePersistentImpl">ConfirmablePersistentImpl</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.prepareDelivery.wrapped" title="akka.persistence.PersistentRepr" id="akka.persistence;RequestReader.prepareDelivery.x$60">wrapped</a>,
      confirmTarget = <a href="#akka.persistence;RequestReader.dbJournal" title="akka.actor.ActorRef" id="akka.persistence;RequestReader.prepareDelivery.x$61">dbJournal</a>,
      confirmMessage = <a href="#akka.persistence.DeliveredByPersistentChannel.apply$default$3" title="Long" id="akka.persistence;RequestReader.prepareDelivery.x$62.x$59">DeliveredByPersistentChannel</a><a title="akka.persistence.DeliveredByPersistentChannel" id="akka.persistence;RequestReader.prepareDelivery.x$62" class="delimiter">(</a><a href="#akka.persistence;RequestReader.channelId" title="String" id="akka.persistence;RequestReader.prepareDelivery.x$62.x$56">channelId</a>, <a href="#akka.persistence;RequestReader.prepareDelivery.wrapper" title="akka.persistence.PersistentRepr">wrapper</a>.<a href="Persistent.scala.html#akka.persistence;PersistentId.sequenceNr" title="Long" id="akka.persistence;RequestReader.prepareDelivery.x$62.x$57">sequenceNr</a>, channel = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="akka.actor.ActorRef" id="akka.persistence;RequestReader.prepareDelivery.x$62.x$58">self</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable, message: Option[Any])Unit" id="akka.persistence;RequestReader.preRestart">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.persistence;RequestReader.preRestart.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="Option[Any]" id="akka.persistence;RequestReader.preRestart.message">message</a>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="Recovery.scala.html#akka.persistence;Recovery.receiverStash" title="=&gt; akka.actor.StashSupport">receiverStash</a>.<a href="../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.unstashAll(aa97cb1b3d)" title="()Unit">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">finally</span> <a href="#akka.persistence;RequestReader" title="akka.persistence.RequestReader" class="keyword">super</a>.<a href="../../../actor/akka/actor/Stash.scala.html#akka.actor;UnrestrictedStash.preRestart" title="(reason: Throwable, message: Option[Any])Unit">preRestart</a><span class="delimiter">(</span><a href="#akka.persistence;RequestReader.preRestart.reason" title="Throwable">reason</a>, <a href="#akka.persistence;RequestReader.preRestart.message" title="Option[Any]">message</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.persistence;RequestReader.preStart">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.persistence;RequestReader" title="akka.persistence.RequestReader" class="keyword">super</a>.<a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.preStart" title="()Unit">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="Recovery.scala.html#akka.persistence.Recover.apply$default$1" title="akka.persistence.SnapshotSelectionCriteria" id="akka.persistence;RequestReader.preStart.x$65">Recover</a><span class="delimiter">(</span>replayMax = <a title="Long" id="akka.persistence;RequestReader.preStart.x$63" class="long">0L</a><span class="delimiter">)</span>
    <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">self</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.persistence.RequestWriter.RequestsWritten.readResolve" title="akka.persistence.RequestWriter.RequestsWritten.type">RequestsWritten</a> <span class="comment">// considers savepoint loaded from snapshot (TODO)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
