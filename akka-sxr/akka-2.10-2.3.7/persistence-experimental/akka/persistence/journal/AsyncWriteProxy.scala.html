<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>persistence-experimental/akka/persistence/journal/AsyncWriteProxy.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.persistence.journal

<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent._
<span class="keyword">import</span> scala.concurrent.duration.Duration
<span class="keyword">import</span> scala.<span title="language.type">language</span>.postfixOps

<span class="keyword">import</span> akka.AkkaException
<span class="keyword">import</span> akka.actor._
<span class="keyword">import</span> akka.pattern.ask
<span class="keyword">import</span> akka.persistence._
<span class="keyword">import</span> akka.util._

<span class="comment">/**
 * INTERNAL API.
 *
 * A journal that delegates actual storage to a target actor. For testing only.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>persistence<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait AsyncWriteProxy extends AnyRef with akka.persistence.journal.AsyncWriteJournal with akka.actor.Stash" id="akka.persistence.journal;AsyncWriteProxy">AsyncWriteProxy</a> <span title="Unit" class="keyword">extends</span> <a href="AsyncWriteJournal.scala.html#akka.persistence.journal;AsyncWriteJournal" title="akka.persistence.journal.AsyncWriteJournal">AsyncWriteJournal</a> <span class="keyword">with</span> <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;Stash" title="akka.actor.Stash">Stash</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.persistence.journal.AsyncWriteProxy" title="akka.persistence.journal.AsyncWriteProxy.type">AsyncWriteProxy</a>._
  <span class="keyword">import</span> <a href="#akka.persistence.journal.AsyncWriteTarget" title="akka.persistence.journal.AsyncWriteTarget.type">AsyncWriteTarget</a>._

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="PartialFunction[Any,Unit]" id="akka.persistence.journal;AsyncWriteProxy.initialized">initialized</a> = <a href="#akka.persistence.journal;AsyncWriteProxy" title="akka.persistence.journal.AsyncWriteProxy" class="keyword">super</a>.<a href="AsyncWriteJournal.scala.html#akka.persistence.journal;AsyncWriteJournal.receive" title="=&gt; PartialFunction[Any,Unit]">receive</a>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="akka.actor.ActorRef" id="akka.persistence.journal;AsyncWriteProxy.store_=">store</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = _

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence.journal;AsyncWriteProxy.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence.journal;AsyncWriteProxy.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> SetStore<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.persistence.journal;AsyncWriteProxy.receive;$anonfun.isDefinedAt.ref">ref</a><span class="delimiter">)</span> ⇒
      <a href="#akka.persistence.journal;AsyncWriteProxy.store_=" title="(x$1: akka.actor.ActorRef)Unit">store</a> = <a href="#akka.persistence.journal;AsyncWriteProxy.receive;$anonfun.isDefinedAt.ref" title="akka.actor.ActorRef">ref</a>
      <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.unstashAll(aa97cb1b3d)" title="()Unit">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.become(07b70b901c)" title="(behavior: akka.actor.Actor.Receive)Unit">become</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.initialized" title="=&gt; PartialFunction[Any,Unit]">initialized</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _ ⇒ <a href="../../../../actor/akka/actor/Stash.scala.html#akka.actor;StashSupport.stash" title="()Unit">stash</a><span title="Boolean(true)" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; akka.util.Timeout" id="akka.persistence.journal;AsyncWriteProxy.timeout">timeout</a>: <a href="../../../../actor/akka/util/Timeout.scala.html#akka.util;Timeout" title="akka.util.Timeout">Timeout</a>

  <span class="keyword">def</span> <a title="(messages: scala.collection.immutable.Seq[akka.persistence.PersistentRepr])scala.concurrent.Future[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncWriteMessages">asyncWriteMessages</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.persistence.PersistentRepr]" id="akka.persistence.journal;AsyncWriteProxy.asyncWriteMessages.messages">messages</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentRepr]">Seq</span><span class="delimiter">[</span>PersistentRepr<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Unit]">Future</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">store</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.persistence.journal.AsyncWriteTarget.WriteMessages.readResolve" title="(messages: scala.collection.immutable.Seq[akka.persistence.PersistentRepr])akka.persistence.journal.AsyncWriteTarget.WriteMessages">WriteMessages</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncWriteMessages.messages" title="scala.collection.immutable.Seq[akka.persistence.PersistentRepr]">messages</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[S](implicit tag: scala.reflect.ClassTag[S])scala.concurrent.Future[S]">mapTo</span><span title="(implicit tag: scala.reflect.ClassTag[Unit])scala.concurrent.Future[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(confirmations: scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation])scala.concurrent.Future[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncWriteConfirmations">asyncWriteConfirmations</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation]" id="akka.persistence.journal;AsyncWriteProxy.asyncWriteConfirmations.confirmations">confirmations</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation]">Seq</span><span class="delimiter">[</span>PersistentConfirmation<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Unit]">Future</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">store</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.persistence.journal.AsyncWriteTarget.WriteConfirmations.readResolve" title="(confirmations: scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation])akka.persistence.journal.AsyncWriteTarget.WriteConfirmations">WriteConfirmations</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncWriteConfirmations.confirmations" title="scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation]">confirmations</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[S](implicit tag: scala.reflect.ClassTag[S])scala.concurrent.Future[S]">mapTo</span><span title="(implicit tag: scala.reflect.ClassTag[Unit])scala.concurrent.Future[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(messageIds: scala.collection.immutable.Seq[akka.persistence.PersistentId], permanent: Boolean)scala.concurrent.Future[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessages">asyncDeleteMessages</a><span class="delimiter">(</span><a title="scala.collection.immutable.Seq[akka.persistence.PersistentId]" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessages.messageIds">messageIds</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentId]">Seq</span><span class="delimiter">[</span>PersistentId<span class="delimiter">]</span>, <a title="Boolean" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessages.permanent">permanent</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Unit]">Future</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">store</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.persistence.journal.AsyncWriteTarget.DeleteMessages.readResolve" title="(messageIds: scala.collection.immutable.Seq[akka.persistence.PersistentId], permanent: Boolean)akka.persistence.journal.AsyncWriteTarget.DeleteMessages">DeleteMessages</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessages.messageIds" title="scala.collection.immutable.Seq[akka.persistence.PersistentId]">messageIds</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessages.permanent" title="Boolean">permanent</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[S](implicit tag: scala.reflect.ClassTag[S])scala.concurrent.Future[S]">mapTo</span><span title="(implicit tag: scala.reflect.ClassTag[Unit])scala.concurrent.Future[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(persistenceId: String, toSequenceNr: Long, permanent: Boolean)scala.concurrent.Future[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo">asyncDeleteMessagesTo</a><span class="delimiter">(</span><a title="String" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span>, <a title="Boolean" id="akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.permanent">permanent</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Unit]">Future</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">store</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.persistence.journal.AsyncWriteTarget.DeleteMessagesTo.readResolve" title="(persistenceId: String, toSequenceNr: Long, permanent: Boolean)akka.persistence.journal.AsyncWriteTarget.DeleteMessagesTo">DeleteMessagesTo</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.persistenceId" title="String">persistenceId</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.toSequenceNr" title="Long">toSequenceNr</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncDeleteMessagesTo.permanent" title="Boolean">permanent</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[S](implicit tag: scala.reflect.ClassTag[S])scala.concurrent.Future[S]">mapTo</span><span title="(implicit tag: scala.reflect.ClassTag[Unit])scala.concurrent.Future[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(persistenceId: String, fromSequenceNr: Long, toSequenceNr: Long, max: Long)(replayCallback: akka.persistence.PersistentRepr =&gt; Unit)scala.concurrent.Future[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages">asyncReplayMessages</a><span class="delimiter">(</span><a title="String" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.fromSequenceNr">fromSequenceNr</a>: <span title="Long">Long</span>, <a title="Long" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span>, <a title="Long" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.max">max</a>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="akka.persistence.PersistentRepr =&gt; Unit" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.replayCallback">replayCallback</a>: <span class="delimiter">(</span>PersistentRepr<span class="delimiter">)</span> ⇒ Unit<span class="delimiter">)</span>: <span title="scala.concurrent.Future[Unit]">Future</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.concurrent.Promise[Unit]" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.replayCompletionPromise">replayCompletionPromise</a> = <span title="[T]()scala.concurrent.Promise[T]">Promise</span><span title="()scala.concurrent.Promise[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="akka.actor.ActorRef" id="akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.mediator">mediator</a> = <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.actorOf(59f1e43182)" title="(props: akka.actor.Props)akka.actor.ActorRef">actorOf</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Props.scala.html#akka.actor.Props.apply(0870a176b3)" title="(clazz: Class[_], args: Any*)akka.actor.Props">Props</a><span class="delimiter">(</span>classOf<span title="Class[akka.persistence.journal.ReplayMediator](classOf[akka.persistence.journal.ReplayMediator])" class="delimiter">[</span>ReplayMediator<span class="delimiter">]</span>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.replayCallback" title="akka.persistence.PersistentRepr =&gt; Unit">replayCallback</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.replayCompletionPromise" title="scala.concurrent.Promise[Unit]">replayCompletionPromise</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.timeout" title="=&gt; akka.util.Timeout">timeout</a>.<a href="../../../../actor/akka/util/Timeout.scala.html#akka.util;Timeout.duration" title="=&gt; scala.concurrent.duration.FiniteDuration">duration</a><span class="delimiter">)</span>.<a href="../../../../actor/akka/actor/Props.scala.html#akka.actor;Props.withDeploy" title="(d: akka.actor.Deploy)akka.actor.Props">withDeploy</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy" title="akka.actor.Deploy.type">Deploy</a>.<a href="../../../../actor/akka/actor/Deployer.scala.html#akka.actor.Deploy.local" title="=&gt; akka.actor.Deploy">local</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.persistence.journal;AsyncWriteProxy.store_=" title="=&gt; akka.actor.ActorRef">store</a>.<a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef.tell" title="(msg: Any, sender: akka.actor.ActorRef)Unit">tell</a><span class="delimiter">(</span><a href="#akka.persistence.journal.AsyncWriteTarget.ReplayMessages.readResolve" title="(persistenceId: String, fromSequenceNr: Long, toSequenceNr: Long, max: Long)akka.persistence.journal.AsyncWriteTarget.ReplayMessages">ReplayMessages</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.persistenceId" title="String">persistenceId</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.fromSequenceNr" title="Long">fromSequenceNr</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.toSequenceNr" title="Long">toSequenceNr</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.max" title="Long">max</a><span class="delimiter">)</span>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.mediator" title="akka.actor.ActorRef">mediator</a><span class="delimiter">)</span>
    <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReplayMessages.replayCompletionPromise" title="scala.concurrent.Promise[Unit]">replayCompletionPromise</a>.<span title="=&gt; scala.concurrent.Future[Unit]">future</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(persistenceId: String, fromSequenceNr: Long)scala.concurrent.Future[Long]" id="akka.persistence.journal;AsyncWriteProxy.asyncReadHighestSequenceNr">asyncReadHighestSequenceNr</a><span class="delimiter">(</span><a title="String" id="akka.persistence.journal;AsyncWriteProxy.asyncReadHighestSequenceNr.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal;AsyncWriteProxy.asyncReadHighestSequenceNr.fromSequenceNr">fromSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="scala.concurrent.Future[Long]">Future</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> =
    <span class="delimiter">(</span><a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskSupport.ask(13940b1e32)" title="implicit akka.pattern.AskSupport.ask : (actorRef: akka.actor.ActorRef)akka.pattern.AskableActorRef">store</a> <a href="../../../../actor/akka/pattern/AskSupport.scala.html#akka.pattern;AskableActorRef.?" title="(message: Any)(implicit timeout: akka.util.Timeout)scala.concurrent.Future[Any]">?</a> <a href="#akka.persistence.journal.AsyncWriteTarget.ReadHighestSequenceNr.readResolve" title="(persistenceId: String, fromSequenceNr: Long)akka.persistence.journal.AsyncWriteTarget.ReadHighestSequenceNr">ReadHighestSequenceNr</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncWriteProxy.asyncReadHighestSequenceNr.persistenceId" title="String">persistenceId</a>, <a href="#akka.persistence.journal;AsyncWriteProxy.asyncReadHighestSequenceNr.fromSequenceNr" title="Long">fromSequenceNr</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[S](implicit tag: scala.reflect.ClassTag[S])scala.concurrent.Future[S]">mapTo</span><span title="(implicit tag: scala.reflect.ClassTag[Long])scala.concurrent.Future[Long]" class="delimiter">[</span><span title="Long">Long</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>persistence<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.persistence.journal.AsyncWriteProxy.type" id="akka.persistence.journal.AsyncWriteProxy">AsyncWriteProxy</a> <a href="#akka.persistence.journal.AsyncWriteProxy" title="akka.persistence.journal.AsyncWriteProxy.type" class="delimiter">{</a>
  <span class="keyword">case class</span> <a title="class SetStore extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteProxy.SetStore.readResolve">SetStore</a><a href="#akka.persistence.journal.AsyncWriteProxy.SetStore.readResolve" title="Product" class="delimiter">(</a><a title="akka.actor.ActorRef" id="akka.persistence.journal.AsyncWriteProxy;SetStore.ref">ref</a>: <a href="../../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>persistence<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.persistence.journal.AsyncWriteTarget.type" id="akka.persistence.journal.AsyncWriteTarget">AsyncWriteTarget</a> <a href="#akka.persistence.journal.AsyncWriteTarget" title="akka.persistence.journal.AsyncWriteTarget.type" class="delimiter">{</a>
  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class WriteMessages extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.WriteMessages.readResolve">WriteMessages</a><a href="#akka.persistence.journal.AsyncWriteTarget.WriteMessages.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.Seq[akka.persistence.PersistentRepr]" id="akka.persistence.journal.AsyncWriteTarget;WriteMessages.messages">messages</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentRepr]">Seq</span><span class="delimiter">[</span>PersistentRepr<span class="delimiter">]</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class WriteConfirmations extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.WriteConfirmations.readResolve">WriteConfirmations</a><a href="#akka.persistence.journal.AsyncWriteTarget.WriteConfirmations.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation]" id="akka.persistence.journal.AsyncWriteTarget;WriteConfirmations.confirmations">confirmations</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentConfirmation]">Seq</span><span class="delimiter">[</span>PersistentConfirmation<span class="delimiter">]</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class DeleteMessages extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.DeleteMessages.readResolve">DeleteMessages</a><a href="#akka.persistence.journal.AsyncWriteTarget.DeleteMessages.readResolve" title="Product" class="delimiter">(</a><a title="scala.collection.immutable.Seq[akka.persistence.PersistentId]" id="akka.persistence.journal.AsyncWriteTarget;DeleteMessages.messageIds">messageIds</a>: immutable.<span title="scala.collection.immutable.Seq[akka.persistence.PersistentId]">Seq</span><span class="delimiter">[</span>PersistentId<span class="delimiter">]</span>, <a title="Boolean" id="akka.persistence.journal.AsyncWriteTarget;DeleteMessages.permanent">permanent</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class DeleteMessagesTo extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.DeleteMessagesTo.readResolve">DeleteMessagesTo</a><a href="#akka.persistence.journal.AsyncWriteTarget.DeleteMessagesTo.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.persistence.journal.AsyncWriteTarget;DeleteMessagesTo.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal.AsyncWriteTarget;DeleteMessagesTo.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span>, <a title="Boolean" id="akka.persistence.journal.AsyncWriteTarget;DeleteMessagesTo.permanent">permanent</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class ReplayMessages extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.ReplayMessages.readResolve">ReplayMessages</a><a href="#akka.persistence.journal.AsyncWriteTarget.ReplayMessages.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.persistence.journal.AsyncWriteTarget;ReplayMessages.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal.AsyncWriteTarget;ReplayMessages.fromSequenceNr">fromSequenceNr</a>: <span title="Long">Long</span>, <a title="Long" id="akka.persistence.journal.AsyncWriteTarget;ReplayMessages.toSequenceNr">toSequenceNr</a>: <span title="Long">Long</span>, <a title="Long" id="akka.persistence.journal.AsyncWriteTarget;ReplayMessages.max">max</a>: <span title="Long">Long</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case object</span> <a href="#akka.persistence.journal.AsyncWriteTarget.ReplaySuccess.productElement.x$1" title="akka.persistence.journal.AsyncWriteTarget.ReplaySuccess.type" id="akka.persistence.journal.AsyncWriteTarget.ReplaySuccess.readResolve">ReplaySuccess</a>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class ReplayFailure extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.ReplayFailure.readResolve">ReplayFailure</a><a href="#akka.persistence.journal.AsyncWriteTarget.ReplayFailure.readResolve" title="Product" class="delimiter">(</a><a title="Throwable" id="akka.persistence.journal.AsyncWriteTarget;ReplayFailure.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>

  @SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
  <span class="keyword">case class</span> <a title="class ReadHighestSequenceNr extends AnyRef with Product with Serializable" id="akka.persistence.journal.AsyncWriteTarget.ReadHighestSequenceNr.readResolve">ReadHighestSequenceNr</a><a href="#akka.persistence.journal.AsyncWriteTarget.ReadHighestSequenceNr.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.persistence.journal.AsyncWriteTarget;ReadHighestSequenceNr.persistenceId">persistenceId</a>: <span title="String">String</span>, <a title="Long" id="akka.persistence.journal.AsyncWriteTarget;ReadHighestSequenceNr.fromSequenceNr">fromSequenceNr</a>: <span title="Long">Long</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Thrown if replay inactivity exceeds a specified timeout.
 */</span>
@SerialVersionUID<span class="delimiter">(</span><span class="long">1L</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class AsyncReplayTimeoutException extends akka.AkkaException" id="akka.persistence.journal;AsyncReplayTimeoutException">AsyncReplayTimeoutException</a><a href="#akka.persistence.journal;AsyncReplayTimeoutException" title="akka.persistence.journal.AsyncReplayTimeoutException" class="delimiter">(</a><a title="String" id="akka.persistence.journal;AsyncReplayTimeoutException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/AkkaException.scala.html#akka;AkkaException" title="akka.AkkaException">AkkaException</a><span class="delimiter">(</span><a href="#akka.persistence.journal;AsyncReplayTimeoutException.msg" title="String">msg</a><span class="delimiter">)</span>

<span class="keyword">private</span> <span class="keyword">class</span> <a title="class ReplayMediator extends AnyRef with akka.actor.Actor" id="akka.persistence.journal;ReplayMediator">ReplayMediator</a><a href="#akka.persistence.journal;ReplayMediator" title="akka.persistence.journal.ReplayMediator" class="delimiter">(</a><a title="akka.persistence.PersistentRepr =&gt; Unit" id="akka.persistence.journal;ReplayMediator.replayCallback">replayCallback</a>: PersistentRepr ⇒ Unit, <a title="scala.concurrent.Promise[Unit]" id="akka.persistence.journal;ReplayMediator.replayCompletionPromise">replayCompletionPromise</a>: <span title="scala.concurrent.Promise[Unit]">Promise</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>, <a title="scala.concurrent.duration.Duration" id="akka.persistence.journal;ReplayMediator.replayTimeout">replayTimeout</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#akka.persistence.journal.AsyncWriteTarget" title="akka.persistence.journal.AsyncWriteTarget.type">AsyncWriteTarget</a>._

  <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.setReceiveTimeout" title="(timeout: scala.concurrent.duration.Duration)Unit">setReceiveTimeout</a><span class="delimiter">(</span><a href="#akka.persistence.journal;ReplayMediator.replayTimeout" title="scala.concurrent.duration.Duration">replayTimeout</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.persistence.journal;ReplayMediator.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.persistence.journal;ReplayMediator.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="akka.persistence.PersistentRepr" id="akka.persistence.journal;ReplayMediator.receive;$anonfun.isDefinedAt.p">p</a>: <a href="../Persistent.scala.html#akka.persistence;PersistentRepr" title="akka.persistence.PersistentRepr">PersistentRepr</a> ⇒ <a href="#akka.persistence.journal;ReplayMediator.replayCallback" title="(v1: akka.persistence.PersistentRepr)Unit">replayCallback</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.persistence.journal;ReplayMediator.receive;$anonfun.isDefinedAt.p" title="akka.persistence.PersistentRepr">p</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="#akka.persistence.journal.AsyncWriteTarget.ReplaySuccess.readResolve" title="akka.persistence.journal.AsyncWriteTarget.ReplaySuccess.type">ReplaySuccess</a> ⇒
      <a href="#akka.persistence.journal;ReplayMediator.replayCompletionPromise" title="scala.concurrent.Promise[Unit]">replayCompletionPromise</a>.<span title="(v: Unit)ReplayMediator.this.replayCompletionPromise.type">success</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> ReplayFailure<span class="delimiter">(</span><a title="Throwable" id="akka.persistence.journal;ReplayMediator.receive;$anonfun.isDefinedAt.cause">cause</a><span class="delimiter">)</span> ⇒
      <a href="#akka.persistence.journal;ReplayMediator.replayCompletionPromise" title="scala.concurrent.Promise[Unit]">replayCompletionPromise</a>.<span title="(t: Throwable)ReplayMediator.this.replayCompletionPromise.type">failure</span><span class="delimiter">(</span><a href="#akka.persistence.journal;ReplayMediator.receive;$anonfun.isDefinedAt.cause" title="Throwable">cause</a><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor.ReceiveTimeout" title="akka.actor.ReceiveTimeout.type">ReceiveTimeout</a> ⇒
      <a href="#akka.persistence.journal;ReplayMediator.replayCompletionPromise" title="scala.concurrent.Promise[Unit]">replayCompletionPromise</a>.<span title="(t: Throwable)ReplayMediator.this.replayCompletionPromise.type">failure</span><span class="delimiter">(</span><span title="akka.persistence.journal.AsyncReplayTimeoutException" class="keyword">new</span> <a href="#akka.persistence.journal;AsyncReplayTimeoutException" title="akka.persistence.journal.AsyncReplayTimeoutException">AsyncReplayTimeoutException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;replay timed out after &quot;)">replay timed out after $</span><span class="delimiter">{</span><a href="#akka.persistence.journal;ReplayMediator.replayTimeout" title="scala.concurrent.duration.Duration">replayTimeout</a>.<span title="=&gt; Long">toSeconds</span><span class="delimiter">}</span><span title="String(&quot; seconds inactivity&quot;)" class="string"> seconds inactivity&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../../actor/akka/actor/ActorRefProvider.scala.html#akka.actor;ActorRefFactory.stop" title="(actor: akka.actor.ActorRef)Unit">stop</a><span class="delimiter">(</span><a href="../../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.self" title="=&gt; akka.actor.ActorRef">self</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
