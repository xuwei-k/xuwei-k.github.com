<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>actor/akka/actor/ActorCell.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>

<span class="keyword">package</span> akka.actor

<span class="keyword">import</span> akka.actor.dungeon.ChildrenContainer
<span class="keyword">import</span> akka.dispatch.Envelope
<span class="keyword">import</span> akka.dispatch.sysmsg._
<span class="keyword">import</span> akka.event.<a href="../event/Logging.scala.html#akka.event.Logging" title="akka.event.Logging.type">Logging</a>.<span class="delimiter">{</span> LogEvent, Debug, Error <span class="delimiter">}</span>
<span class="keyword">import</span> akka.japi.Procedure
<span class="keyword">import</span> java.io.<span class="delimiter">{</span> ObjectOutputStream, NotSerializableException <span class="delimiter">}</span>
<span class="keyword">import</span> scala.annotation.<span class="delimiter">{</span> switch, tailrec <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.concurrent.ExecutionContextExecutor
<span class="keyword">import</span> scala.concurrent.duration.Duration
<span class="keyword">import</span> scala.concurrent.forkjoin.ThreadLocalRandom
<span class="keyword">import</span> scala.util.control.NonFatal
<span class="keyword">import</span> akka.dispatch.MessageDispatcher

<span class="comment">/**
 * The actor context - the view of the actor cell from the actor.
 * Exposes contextual information for the actor and the current message.
 *
 * There are several possibilities for creating actors (see [[akka.actor.Props]]
 * for details on `props`):
 *
 * {{{
 * // Java or Scala
 * context.actorOf(props, &quot;name&quot;)
 * context.actorOf(props)
 *
 * // Scala
 * context.actorOf(Props[MyActor])
 * context.actorOf(Props(classOf[MyActor], arg1, arg2), &quot;name&quot;)
 *
 * // Java
 * getContext().actorOf(Props.create(MyActor.class));
 * getContext().actorOf(Props.create(MyActor.class, arg1, arg2), &quot;name&quot;);
 * }}}
 *
 * Where no name is given explicitly, one will be automatically generated.
 */</span>
<span class="keyword">trait</span> <a title="trait ActorContext extends AnyRef with akka.actor.ActorRefFactory" id="akka.actor;ActorContext">ActorContext</a> <span title="Unit" class="keyword">extends</span> <a href="ActorRefProvider.scala.html#akka.actor;ActorRefFactory" title="akka.actor.ActorRefFactory">ActorRefFactory</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.actor;ActorContext.self">self</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * Retrieve the Props which were used to create this actor.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.Props" id="akka.actor;ActorContext.props">props</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>

  <span class="comment">/**
   * Gets the current receive timeout.
   * When specified, the receive method should be able to handle a [[akka.actor.ReceiveTimeout]] message.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.concurrent.duration.Duration" id="akka.actor;ActorContext.receiveTimeout">receiveTimeout</a>: <span title="scala.concurrent.duration.Duration">Duration</span>

  <span class="comment">/**
   * Defines the inactivity timeout after which the sending of a [[akka.actor.ReceiveTimeout]] message is triggered.
   * When specified, the receive function should be able to handle a [[akka.actor.ReceiveTimeout]] message.
   * 1 millisecond is the minimum supported timeout.
   *
   * Please note that the receive timeout might fire and enqueue the `ReceiveTimeout` message right after
   * another message was enqueued; hence it is '''not guaranteed''' that upon reception of the receive
   * timeout there must have been an idle period beforehand as configured via this method.
   *
   * Once set, the receive timeout stays in effect (i.e. continues firing repeatedly after inactivity
   * periods). Pass in `Duration.Undefined` to switch off this feature.
   */</span>
  <span class="keyword">def</span> <a title="(timeout: scala.concurrent.duration.Duration)Unit" id="akka.actor;ActorContext.setReceiveTimeout">setReceiveTimeout</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="akka.actor;ActorContext.setReceiveTimeout.timeout">timeout</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Changes the Actor's behavior to become the new 'Receive' (PartialFunction[Any, Unit]) handler.
   * Replaces the current behavior on the top of the behavior stack.
   */</span>
  <span class="keyword">def</span> <a title="(behavior: akka.actor.Actor.Receive)Unit" id="akka.actor;ActorContext.become(07b70b901c)">become</a><span class="delimiter">(</span><a title="akka.actor.Actor.Receive" id="akka.actor;ActorContext.become(07b70b901c).behavior">behavior</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;ActorContext.become(771101a7b6)" title="(behavior: akka.actor.Actor.Receive, discardOld: Boolean)Unit">become</a><span class="delimiter">(</span><a href="#akka.actor;ActorContext.become(07b70b901c).behavior" title="akka.actor.Actor.Receive">behavior</a>, discardOld = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Changes the Actor's behavior to become the new 'Receive' (PartialFunction[Any, Unit]) handler.
   * This method acts upon the behavior stack as follows:
   *
   *  - if `discardOld = true` it will replace the top element (i.e. the current behavior)
   *  - if `discardOld = false` it will keep the current behavior and push the given one atop
   *
   * The default of replacing the current behavior on the stack has been chosen to avoid memory
   * leaks in case client code is written without consulting this documentation first (i.e.
   * always pushing new behaviors and never issuing an `unbecome()`)
   */</span>
  <span class="keyword">def</span> <a title="(behavior: akka.actor.Actor.Receive, discardOld: Boolean)Unit" id="akka.actor;ActorContext.become(771101a7b6)">become</a><span class="delimiter">(</span><a title="akka.actor.Actor.Receive" id="akka.actor;ActorContext.become(771101a7b6).behavior">behavior</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span>, <a title="Boolean" id="akka.actor;ActorContext.become(771101a7b6).discardOld">discardOld</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Reverts the Actor behavior to the previous one on the behavior stack.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;ActorContext.unbecome">unbecome</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Returns the sender 'ActorRef' of the current message.
   */</span>
  <span class="keyword">def</span> <a title="()akka.actor.ActorRef" id="akka.actor;ActorContext.sender">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * Returns all supervised children; this method returns a view (i.e. a lazy
   * collection) onto the internal collection of children. Targeted lookups
   * should be using `child` instead for performance reasons:
   *
   * {{{
   * val badLookup = context.children find (_.path.name == &quot;kid&quot;)
   * // should better be expressed as:
   * val goodLookup = context.child(&quot;kid&quot;)
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[akka.actor.ActorRef]" id="akka.actor;ActorContext.children">children</a>: immutable.<span title="scala.collection.immutable.Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>

  <span class="comment">/**
   * Get the child with the given name if it exists.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)Option[akka.actor.ActorRef]" id="akka.actor;ActorContext.child">child</a><span class="delimiter">(</span><a title="String" id="akka.actor;ActorContext.child.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>

  <span class="comment">/**
   * Returns the dispatcher (MessageDispatcher) that is used for this Actor.
   * Importing this member will place an implicit ExecutionContext in scope.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; scala.concurrent.ExecutionContextExecutor" id="akka.actor;ActorContext.dispatcher">dispatcher</a>: <span title="scala.concurrent.ExecutionContextExecutor">ExecutionContextExecutor</span>

  <span class="comment">/**
   * The system that the actor belongs to.
   * Importing this member will place an implicit ActorSystem in scope.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorSystem" id="akka.actor;ActorContext.system">system</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>

  <span class="comment">/**
   * Returns the supervising parent ActorRef.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.actor;ActorContext.parent">parent</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * Registers this actor as a Monitor for the provided ActorRef.
   * This actor will receive a Terminated(subject) message when watched
   * actor is terminated.
   * @return the provided ActorRef
   */</span>
  <span class="keyword">def</span> <a title="(subject: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.actor;ActorContext.watch">watch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorContext.watch.subject">subject</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * Unregisters this actor as Monitor for the provided ActorRef.
   * @return the provided ActorRef
   */</span>
  <span class="keyword">def</span> <a title="(subject: akka.actor.ActorRef)akka.actor.ActorRef" id="akka.actor;ActorContext.unwatch">unwatch</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorContext.unwatch.subject">subject</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * ActorContexts shouldn't be Serializable
   */</span>
  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(o: java.io.ObjectOutputStream)Unit" id="akka.actor;ActorContext.writeObject">writeObject</a><span class="delimiter">(</span><a title="java.io.ObjectOutputStream" id="akka.actor;ActorContext.writeObject.o">o</a>: <span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Nothing" class="keyword">throw</span> <span title="java.io.NotSerializableException" class="keyword">new</span> <span title="java.io.NotSerializableException">NotSerializableException</span><span class="delimiter">(</span><span title="String(&quot;ActorContext is not serializable!&quot;)" class="string">&quot;ActorContext is not serializable!&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * AbstractActorContext is the AbstractActor equivalent of ActorContext,
 * containing the Java API
 */</span>
<span class="keyword">trait</span> <a title="trait AbstractActorContext extends AnyRef with akka.actor.ActorContext" id="akka.actor;AbstractActorContext">AbstractActorContext</a> <span class="keyword">extends</span> <a href="#akka.actor;ActorContext" title="akka.actor.ActorContext">ActorContext</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Returns an unmodifiable Java Collection containing the linked actors,
   * please note that the backing map is thread-safe but not immutable
   */</span>
  <span class="keyword">def</span> <a title="()Iterable[akka.actor.ActorRef]" id="akka.actor;AbstractActorContext.getChildren">getChildren</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.lang.<span title="Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>

  <span class="comment">/**
   * Returns a reference to the named child or null if no child with
   * that name exists.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)akka.actor.ActorRef" id="akka.actor;AbstractActorContext.getChild">getChild</a><span class="delimiter">(</span><a title="String" id="akka.actor;AbstractActorContext.getChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * UntypedActorContext is the UntypedActor equivalent of ActorContext,
 * containing the Java API
 */</span>
<span class="keyword">trait</span> <a title="trait UntypedActorContext extends AnyRef with akka.actor.ActorContext" id="akka.actor;UntypedActorContext">UntypedActorContext</a> <span class="keyword">extends</span> <a href="#akka.actor;ActorContext" title="akka.actor.ActorContext">ActorContext</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Returns an unmodifiable Java Collection containing the linked actors,
   * please note that the backing map is thread-safe but not immutable
   */</span>
  <span class="keyword">def</span> <a title="()Iterable[akka.actor.ActorRef]" id="akka.actor;UntypedActorContext.getChildren">getChildren</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.lang.<span title="Iterable[akka.actor.ActorRef]">Iterable</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span>

  <span class="comment">/**
   * Returns a reference to the named child or null if no child with
   * that name exists.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)akka.actor.ActorRef" id="akka.actor;UntypedActorContext.getChild">getChild</a><span class="delimiter">(</span><a title="String" id="akka.actor;UntypedActorContext.getChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>

  <span class="comment">/**
   * Changes the Actor's behavior to become the new 'Procedure' handler.
   * Replaces the current behavior on the top of the behavior stack.
   */</span>
  <span class="keyword">def</span> <a title="(behavior: akka.japi.Procedure[Any])Unit" id="akka.actor;UntypedActorContext.become(4a240415df)">become</a><span class="delimiter">(</span><a title="akka.japi.Procedure[Any]" id="akka.actor;UntypedActorContext.become(4a240415df).behavior">behavior</a>: <a href="../japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[Any]">Procedure</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Changes the Actor's behavior to become the new 'Procedure' handler.
   * This method acts upon the behavior stack as follows:
   *
   *  - if `discardOld = true` it will replace the top element (i.e. the current behavior)
   *  - if `discardOld = false` it will keep the current behavior and push the given one atop
   *
   * The default of replacing the current behavior on the stack has been chosen to avoid memory
   * leaks in case client code is written without consulting this documentation first (i.e.
   * always pushing new behaviors and never issuing an `unbecome()`)
   */</span>
  <span class="keyword">def</span> <a title="(behavior: akka.japi.Procedure[Any], discardOld: Boolean)Unit" id="akka.actor;UntypedActorContext.become(ec58a54213)">become</a><span class="delimiter">(</span><a title="akka.japi.Procedure[Any]" id="akka.actor;UntypedActorContext.become(ec58a54213).behavior">behavior</a>: <a href="../japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[Any]">Procedure</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="Boolean" id="akka.actor;UntypedActorContext.become(ec58a54213).discardOld">discardOld</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait Cell extends AnyRef" id="akka.actor;Cell">Cell</a> <span title="Unit" class="delimiter">{</span>
  <span class="comment">/**
   * The “self” reference which this Cell is attached to.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRef" id="akka.actor;Cell.self">self</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>
  <span class="comment">/**
   * The system within which this Cell lives.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorSystem" id="akka.actor;Cell.system">system</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystem" title="akka.actor.ActorSystem">ActorSystem</a>
  <span class="comment">/**
   * The system internals where this Cell lives.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorSystemImpl" id="akka.actor;Cell.systemImpl">systemImpl</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>
  <span class="comment">/**
   * Start the cell: enqueued message must not be processed before this has
   * been called. The usual action is to attach the mailbox to a dispatcher.
   */</span>
  <span class="keyword">def</span> <a title="()Cell.this.type" id="akka.actor;Cell.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>
  <span class="comment">/**
   * Recursively suspend this actor and all its children. Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;Cell.suspend">suspend</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/**
   * Recursively resume this actor and all its children. Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="(causedByFailure: Throwable)Unit" id="akka.actor;Cell.resume">resume</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;Cell.resume.causedByFailure">causedByFailure</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/**
   * Restart this actor (will recursively restart or stop all children). Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="(cause: Throwable)Unit" id="akka.actor;Cell.restart">restart</a><span class="delimiter">(</span><a title="Throwable" id="akka.actor;Cell.restart.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/**
   * Recursively terminate this actor and all its children. Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;Cell.stop">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/**
   * Returns “true” if the actor is locally known to be terminated, “false” if
   * alive or uncertain.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;Cell.isTerminated">isTerminated</a>: <span title="Boolean">Boolean</span>
  <span class="comment">/**
   * The supervisor of this actor.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.InternalActorRef" id="akka.actor;Cell.parent">parent</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>
  <span class="comment">/**
   * All children of this actor, including only reserved-names.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.dungeon.ChildrenContainer" id="akka.actor;Cell.childrenRefs">childrenRefs</a>: <a href="dungeon/ChildrenContainer.scala.html#akka.actor.dungeon;ChildrenContainer" title="akka.actor.dungeon.ChildrenContainer">ChildrenContainer</a>
  <span class="comment">/**
   * Get the stats for the named child, if that exists.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)Option[akka.actor.ChildStats]" id="akka.actor;Cell.getChildByName">getChildByName</a><span class="delimiter">(</span><a title="String" id="akka.actor;Cell.getChildByName.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.ChildStats]">Option</span><span class="delimiter">[</span>ChildStats<span class="delimiter">]</span>

  <span class="comment">/**
   * Method for looking up a single child beneath this actor.
   * It is racy if called from the outside.
   */</span>
  <span class="keyword">def</span> <a title="(name: String)akka.actor.InternalActorRef" id="akka.actor;Cell.getSingleChild">getSingleChild</a><span class="delimiter">(</span><a title="String" id="akka.actor;Cell.getSingleChild.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>

  <span class="comment">/**
   * Enqueue a message to be sent to the actor; may or may not actually
   * schedule the actor to run, depending on which type of cell it is.
   * Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="(msg: akka.dispatch.Envelope)Unit" id="akka.actor;Cell.sendMessage(028b7cdb2e)">sendMessage</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.actor;Cell.sendMessage(028b7cdb2e).msg">msg</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="comment">/**
   * Enqueue a message to be sent to the actor; may or may not actually
   * schedule the actor to run, depending on which type of cell it is.
   * Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(message: Any, sender: akka.actor.ActorRef)Unit" id="akka.actor;Cell.sendMessage(1681fc8bcf)">sendMessage</a><span class="delimiter">(</span><a title="Any" id="akka.actor;Cell.sendMessage(1681fc8bcf).message">message</a>: <span title="Any">Any</span>, <a title="akka.actor.ActorRef" id="akka.actor;Cell.sendMessage(1681fc8bcf).sender">sender</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.actor;Cell.sendMessage(028b7cdb2e)" title="(msg: akka.dispatch.Envelope)Unit">sendMessage</a><span class="delimiter">(</span><a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch.Envelope.apply(fd4a9d0721)" title="(message: Any, sender: akka.actor.ActorRef, system: akka.actor.ActorSystem)akka.dispatch.Envelope">Envelope</a><span class="delimiter">(</span><a href="#akka.actor;Cell.sendMessage(1681fc8bcf).message" title="Any">message</a>, <a href="#akka.actor;Cell.sendMessage(1681fc8bcf).sender" title="akka.actor.ActorRef">sender</a>, <a href="#akka.actor;Cell.system" title="=&gt; akka.actor.ActorSystem">system</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Enqueue a message to be sent to the actor; may or may not actually
   * schedule the actor to run, depending on which type of cell it is.
   * Is only allowed to throw Fatal Throwables.
   */</span>
  <span class="keyword">def</span> <a title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit" id="akka.actor;Cell.sendSystemMessage">sendSystemMessage</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;Cell.sendSystemMessage.msg">msg</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/**
   * Returns true if the actor is local, i.e. if it is actually scheduled
   * on a Thread in the current JVM when run.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;Cell.isLocal">isLocal</a>: <span title="Boolean">Boolean</span>
  <span class="comment">/**
   * If the actor isLocal, returns whether &quot;user messages&quot; are currently queued,
   * “false” otherwise.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;Cell.hasMessages">hasMessages</a>: <span title="Boolean">Boolean</span>
  <span class="comment">/**
   * If the actor isLocal, returns the number of &quot;user messages&quot; currently queued,
   * which may be a costly operation, 0 otherwise.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="akka.actor;Cell.numberOfMessages">numberOfMessages</a>: <span title="Int">Int</span>
  <span class="comment">/**
   * The props for this actor cell.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.actor.Props" id="akka.actor;Cell.props">props</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Everything in here is completely Akka PRIVATE. You will not find any
 * supported APIs in this place. This is not the API you were looking
 * for! (waves hand)
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">object</span> <a title="akka.actor.ActorCell.type" id="akka.actor.ActorCell">ActorCell</a> <a href="#akka.actor.ActorCell" title="akka.actor.ActorCell.type" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="ThreadLocal[List[akka.actor.ActorContext]]" id="akka.actor.ActorCell.contextStack">contextStack</a> = <a href="#akka.actor.ActorCell.contextStack;$anon" title="ThreadLocal[List[akka.actor.ActorContext]]" class="keyword">new</a> <a title="anonymous class $anon extends ThreadLocal[List[akka.actor.ActorContext]]" id="akka.actor.ActorCell.contextStack;$anon">ThreadLocal</a><span class="delimiter">[</span>List<span class="delimiter">[</span>ActorContext<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()List[akka.actor.ActorContext]" id="akka.actor.ActorCell.contextStack;$anon.initialValue">initialValue</a>: <span title="List[akka.actor.ActorContext]">List</span><span class="delimiter">[</span>ActorContext<span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.Cancellable" id="akka.actor.ActorCell.emptyCancellable">emptyCancellable</a>: <a href="Scheduler.scala.html#akka.actor;Cancellable" title="akka.actor.Cancellable">Cancellable</a> = <a href="#akka.actor.ActorCell.emptyCancellable;$anon" title="akka.actor.Cancellable" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with akka.actor.Cancellable" id="akka.actor.ActorCell.emptyCancellable;$anon">Cancellable</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor.ActorCell.emptyCancellable;$anon.isCancelled">isCancelled</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">def</span> <a title="()Boolean" id="akka.actor.ActorCell.emptyCancellable;$anon.cancel">cancel</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="List[akka.actor.Actor.Receive]" id="akka.actor.ActorCell.emptyBehaviorStack">emptyBehaviorStack</a>: <span title="List[akka.actor.Actor.Receive]">List</span><span class="delimiter">[</span>Actor.Receive<span class="delimiter">]</span> = <span title="scala.collection.immutable.Nil.type">Nil</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Set[akka.actor.ActorRef]" id="akka.actor.ActorCell.emptyActorRefSet">emptyActorRefSet</a>: <span title="Set[akka.actor.ActorRef]">Set</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span> = immutable.<span title="scala.collection.immutable.HashSet.type">HashSet</span>.<span title="scala.collection.immutable.HashSet[akka.actor.ActorRef]">empty</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.actor.ActorCell.terminatedProps">terminatedProps</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a> = <a href="Props.scala.html#akka.actor.Props.apply(b09a6a316b)" title="(creator: =&gt; akka.actor.Actor)(implicit evidence$2: scala.reflect.ClassTag[akka.actor.Actor])akka.actor.Props">Props</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[akka.actor.Actor]" class="delimiter">(</span><span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <span title="akka.actor.IllegalActorStateException" class="keyword">new</span> <a href="Actor.scala.html#akka.actor;IllegalActorStateException" title="akka.actor.IllegalActorStateException">IllegalActorStateException</a><span class="delimiter">(</span><span title="String(&quot;This Actor has been terminated&quot;)" class="string">&quot;This Actor has been terminated&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(0)" id="akka.actor.ActorCell.undefinedUid">undefinedUid</a> = <span title="Int(0)" class="int">0</span>

  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Int" id="akka.actor.ActorCell.newUid">newUid</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span class="comment">// Note that this uid is also used as hashCode in ActorRef, so be careful</span>
    <span class="comment">// to not break hashing if you change the way uid is generated</span>
    <span class="keyword">val</span> <a title="Int" id="akka.actor.ActorCell.newUid.uid">uid</a> = <span title="scala.concurrent.forkjoin.ThreadLocalRandom.type">ThreadLocalRandom</span>.<span title="()scala.concurrent.forkjoin.ThreadLocalRandom">current</span>.<span title="()Int">nextInt</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.ActorCell.newUid.uid" title="Int">uid</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)">undefinedUid</span><span class="delimiter">)</span> <a href="#akka.actor.ActorCell.newUid" title="()Int">newUid</a>
    <span class="keyword">else</span> <a href="#akka.actor.ActorCell.newUid.uid" title="Int">uid</a>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(name: String)(String, Int)" id="akka.actor.ActorCell.splitNameAndUid">splitNameAndUid</a><span class="delimiter">(</span><a title="String" id="akka.actor.ActorCell.splitNameAndUid.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="(String, Int)" class="delimiter">(</span>String, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="akka.actor.ActorCell.splitNameAndUid.i">i</a> = <a href="#akka.actor.ActorCell.splitNameAndUid.name" title="String">name</a>.<span title="(x$1: Int)Int">indexOf</span><span class="delimiter">(</span><span title="Int(35)" class="char">'#'</span><span class="delimiter">)</span>
    <span title="(String, Int)" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor.ActorCell.splitNameAndUid.i" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#akka.actor.ActorCell.splitNameAndUid.name" title="String">name</a>, <span title="Int(0)">undefinedUid</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#akka.actor.ActorCell.splitNameAndUid.name" title="String">name</a>.<span title="(x$1: Int, x$2: Int)String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#akka.actor.ActorCell.splitNameAndUid.i" title="Int">i</a><span class="delimiter">)</span>, <span title="Integer.type">Integer</span>.<span title="(x$1: String)Integer">valueOf</span><span title="implicit scala.Predef.Integer2int : (x: Integer)Int" class="delimiter">(</span><a href="#akka.actor.ActorCell.splitNameAndUid.name" title="String">name</a>.<span title="(x$1: Int)String">substring</span><span class="delimiter">(</span><a href="#akka.actor.ActorCell.splitNameAndUid.i" title="Int">i</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(0)" id="akka.actor.ActorCell.DefaultState">DefaultState</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(1)" id="akka.actor.ActorCell.SuspendedState">SuspendedState</a> = <span title="Int(1)" class="int">1</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(2)" id="akka.actor.ActorCell.SuspendedWaitForChildrenState">SuspendedWaitForChildrenState</a> = <span title="Int(2)" class="int">2</span>
<span class="delimiter">}</span>

<span class="comment">//ACTORCELL IS 64bytes and should stay that way unless very good reason not to (machine sympathy, cache line fit)</span>
<span class="comment">//vars don't need volatile since it's protected with the mailbox status</span>
<span class="comment">//Make sure that they are not read/written outside of a message processing (systemInvoke/invoke)</span>
<span class="comment">/**
 * Everything in here is completely Akka PRIVATE. You will not find any
 * supported APIs in this place. This is not the API you were looking
 * for! (waves hand)
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>akka<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class ActorCell extends AnyRef with akka.actor.UntypedActorContext with akka.actor.AbstractActorContext with akka.actor.Cell with akka.actor.dungeon.ReceiveTimeout with akka.actor.dungeon.Children with akka.actor.dungeon.Dispatch with akka.actor.dungeon.DeathWatch with akka.actor.dungeon.FaultHandling" id="akka.actor;ActorCell">ActorCell</a><a href="#akka.actor;ActorCell" title="akka.actor.ActorCell" class="delimiter">(</a>
  <span class="keyword">val</span> <a title="akka.actor.ActorSystemImpl" id="akka.actor;ActorCell.system">system</a>: <a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl" title="akka.actor.ActorSystemImpl">ActorSystemImpl</a>,
  <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.actor;ActorCell.self">self</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a>,
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="akka.actor.Props" id="akka.actor;ActorCell.props">props</a>: <a href="Props.scala.html#akka.actor;Props" title="akka.actor.Props">Props</a>, <span class="comment">// Must be final so that it can be properly cleared in clearActorCellFields</span>
  <span class="keyword">val</span> <a title="akka.dispatch.MessageDispatcher" id="akka.actor;ActorCell.dispatcher">dispatcher</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;MessageDispatcher" title="akka.dispatch.MessageDispatcher">MessageDispatcher</a>,
  <span class="keyword">val</span> <a title="akka.actor.InternalActorRef" id="akka.actor;ActorCell.parent">parent</a>: <a href="ActorRef.scala.html#akka.actor;InternalActorRef" title="akka.actor.InternalActorRef">InternalActorRef</a><span class="delimiter">)</span>
  <span class="keyword">extends</span> <a href="#akka.actor;UntypedActorContext" title="akka.actor.UntypedActorContext">UntypedActorContext</a> <span class="keyword">with</span> <a href="#akka.actor;AbstractActorContext" title="akka.actor.AbstractActorContext">AbstractActorContext</a> <span class="keyword">with</span> <a href="#akka.actor;Cell" title="akka.actor.Cell">Cell</a>
  <span class="keyword">with</span> dungeon.<a href="dungeon/ReceiveTimeout.scala.html#akka.actor.dungeon;ReceiveTimeout" title="akka.actor.dungeon.ReceiveTimeout">ReceiveTimeout</a>
  <span class="keyword">with</span> dungeon.<a href="dungeon/Children.scala.html#akka.actor.dungeon;Children" title="akka.actor.dungeon.Children">Children</a>
  <span class="keyword">with</span> dungeon.<a href="dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch" title="akka.actor.dungeon.Dispatch">Dispatch</a>
  <span class="keyword">with</span> dungeon.<a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch" title="akka.actor.dungeon.DeathWatch">DeathWatch</a>
  <span class="keyword">with</span> dungeon.<a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling" title="akka.actor.dungeon.FaultHandling">FaultHandling</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#akka.actor.ActorCell" title="akka.actor.ActorCell.type">ActorCell</a>._

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="akka.actor;ActorCell.isLocal">isLocal</a> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorSystemImpl" id="akka.actor;ActorCell.systemImpl">systemImpl</a> = <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>
  <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.InternalActorRef" id="akka.actor;ActorCell.guardian">guardian</a> = <a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>
  <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.InternalActorRef" id="akka.actor;ActorCell.lookupRoot">lookupRoot</a> = <a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; akka.actor.ActorRefProvider" id="akka.actor;ActorCell.provider">provider</a> = <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Int" id="akka.actor;ActorCell.uid">uid</a>: <span title="Int">Int</span> = <a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<a href="ActorPath.scala.html#akka.actor;ActorPath.uid" title="=&gt; Int">uid</a>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="akka.actor.Actor" id="akka.actor;ActorCell._actor">_actor</a>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> = _
  <span class="keyword">def</span> <a title="=&gt; akka.actor.Actor" id="akka.actor;ActorCell.actor">actor</a>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> = <a href="#akka.actor;ActorCell._actor" title="akka.actor.Actor">_actor</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(a: akka.actor.Actor)Unit" id="akka.actor;ActorCell.actor_=">actor_=</a><span class="delimiter">(</span><a title="akka.actor.Actor" id="akka.actor;ActorCell.actor_=.a">a</a>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;ActorCell._actor" title="akka.actor.Actor">_actor</a> = <a href="#akka.actor;ActorCell.actor_=.a" title="akka.actor.Actor">a</a>
  <span class="keyword">var</span> <a title="akka.dispatch.Envelope" id="akka.actor;ActorCell.currentMessage_=">currentMessage</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a> = _
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[akka.actor.Actor.Receive]" id="akka.actor;ActorCell.behaviorStack_=">behaviorStack</a>: <span title="List[akka.actor.Actor.Receive]">List</span><span class="delimiter">[</span>Actor.Receive<span class="delimiter">]</span> = <a href="#akka.actor.ActorCell.emptyBehaviorStack" title="=&gt; List[akka.actor.Actor.Receive]">emptyBehaviorStack</a>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="akka.dispatch.sysmsg.LatestFirstSystemMessageList" id="akka.actor;ActorCell.sysmsgStash">sysmsgStash</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;LatestFirstSystemMessageList" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">LatestFirstSystemMessageList</a> = <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.SystemMessageList" title="akka.dispatch.sysmsg.SystemMessageList.type">SystemMessageList</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.SystemMessageList.LNil" title="=&gt; akka.dispatch.sysmsg.LatestFirstSystemMessageList">LNil</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit" id="akka.actor;ActorCell.stash">stash</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;ActorCell.stash.msg">msg</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#akka.actor;ActorCell.stash.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage.unlinked" title="=&gt; Boolean">unlinked</a><span class="delimiter">)</span>
    <a href="#akka.actor;ActorCell.sysmsgStash" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">sysmsgStash</a> <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;LatestFirstSystemMessageList.::" title="(msg: akka.dispatch.sysmsg.SystemMessage)akka.dispatch.sysmsg.LatestFirstSystemMessageList">::=</a> <a href="#akka.actor;ActorCell.stash.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()akka.dispatch.sysmsg.LatestFirstSystemMessageList" id="akka.actor;ActorCell.unstashAll">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;LatestFirstSystemMessageList" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">LatestFirstSystemMessageList</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.dispatch.sysmsg.LatestFirstSystemMessageList" id="akka.actor;ActorCell.unstashAll.unstashed">unstashed</a> = <a href="#akka.actor;ActorCell.sysmsgStash" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">sysmsgStash</a>
    <a href="#akka.actor;ActorCell.sysmsgStash" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">sysmsgStash</a> = <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.SystemMessageList" title="akka.dispatch.sysmsg.SystemMessageList.type">SystemMessageList</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.SystemMessageList.LNil" title="=&gt; akka.dispatch.sysmsg.LatestFirstSystemMessageList">LNil</a>
    <a href="#akka.actor;ActorCell.unstashAll.unstashed" title="akka.dispatch.sysmsg.LatestFirstSystemMessageList">unstashed</a>
  <span class="delimiter">}</span>

  <span class="comment">/*
   * MESSAGE PROCESSING
   */</span>
  <span class="comment">//Memory consistency is handled by the Mailbox (reading mailbox status then processing messages, then writing mailbox status</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(message: akka.dispatch.sysmsg.SystemMessage)Unit" id="akka.actor;ActorCell.systemInvoke">systemInvoke</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;ActorCell.systemInvoke.message">message</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">/*
     * When recreate/suspend/resume are received while restarting (i.e. between
     * preRestart and postRestart, waiting for children to terminate), these
     * must not be executed immediately, but instead queued and released after
     * finishRecreate returns. This can only ever be triggered by
     * ChildTerminated, and ChildTerminated is not one of the queued message
     * types (hence the overwrite further down). Mailbox sets message.next=null
     * before systemInvoke, so this will only be non-null during such a replay.
     */</span>

    <span class="keyword">def</span> <a title="=&gt; Int" id="akka.actor;ActorCell.systemInvoke.calculateState">calculateState</a>: <span title="Int">Int</span> =
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="dungeon/Children.scala.html#akka.actor.dungeon;Children.waitingForChildrenOrNull" title="=&gt; akka.actor.dungeon.ChildrenContainer.SuspendReason with akka.actor.dungeon.ChildrenContainer.WaitingForChildren">waitingForChildrenOrNull</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Int(2)">SuspendedWaitForChildrenState</span>
      <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.mailbox" title="=&gt; akka.dispatch.Mailbox">mailbox</a>.<a href="../dispatch/Mailbox.scala.html#akka.dispatch;Mailbox.isSuspended" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span title="Int(1)">SuspendedState</span>
      <span class="keyword">else</span> <span title="Int(0)">DefaultState</span>

    @tailrec <span class="keyword">def</span> <a title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList)Unit" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters">sendAllToDeadLetters</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.messages">messages</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">EarliestFirstSystemMessageList</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.tail">tail</a> = <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.tail" title="=&gt; akka.dispatch.sysmsg.EarliestFirstSystemMessageList">tail</a>
        <span class="keyword">val</span> <a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.msg">msg</a> = <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.head" title="=&gt; akka.dispatch.sysmsg.SystemMessage">head</a>
        <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.msg" title="akka.dispatch.sysmsg.SystemMessage">msg</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage.unlink" title="()Unit">unlink</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#akka.actor;ActorCell.provider" title="=&gt; akka.actor.ActorRefProvider">provider</a>.<a href="package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.qual$1">deadLetters</a> <a href="ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.x$8">!</a> <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.msg" title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.x$7">msg</a>
        <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters" title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList)Unit">sendAllToDeadLetters</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters.tail" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">tail</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: akka.dispatch.sysmsg.SystemMessage, state: Int)Boolean" id="akka.actor;ActorCell.systemInvoke.shouldStash">shouldStash</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.SystemMessage" id="akka.actor;ActorCell.systemInvoke.shouldStash.m">m</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a>, <a title="Int" id="akka.actor;ActorCell.systemInvoke.shouldStash.state">state</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.shouldStash.state" title="Int">state</a>: @<span title="Int @scala.annotation.switch">switch</span><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Int(0)">DefaultState</span>                  ⇒ <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">case</span> <span title="Int(1)">SuspendedState</span>                ⇒ <a href="#akka.actor;ActorCell.systemInvoke.shouldStash.m" title="akka.dispatch.sysmsg.SystemMessage">m</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;StashWhenFailed" title="akka.dispatch.sysmsg.StashWhenFailed">StashWhenFailed</a><span class="delimiter">]</span>
        <span class="keyword">case</span> <span title="Int(2)">SuspendedWaitForChildrenState</span> ⇒ <a href="#akka.actor;ActorCell.systemInvoke.shouldStash.m" title="akka.dispatch.sysmsg.SystemMessage">m</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;StashWhenWaitingForChildren" title="akka.dispatch.sysmsg.StashWhenWaitingForChildren">StashWhenWaitingForChildren</a><span class="delimiter">]</span>
      <span class="delimiter">}</span>

    @tailrec
    <span class="keyword">def</span> <a title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList, currentState: Int)Unit" id="akka.actor;ActorCell.systemInvoke.invokeAll">invokeAll</a><span class="delimiter">(</span><a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.actor;ActorCell.systemInvoke.invokeAll.messages">messages</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">EarliestFirstSystemMessageList</a>, <a title="Int" id="akka.actor;ActorCell.systemInvoke.invokeAll.currentState">currentState</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.actor;ActorCell.systemInvoke.invokeAll.rest">rest</a> = <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.tail" title="=&gt; akka.dispatch.sysmsg.EarliestFirstSystemMessageList">tail</a>
      <span class="keyword">val</span> <span title="akka.dispatch.sysmsg.SystemMessage">message</span> = <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.messages" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">messages</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.head" title="=&gt; akka.dispatch.sysmsg.SystemMessage">head</a>
      <span title="akka.dispatch.sysmsg.SystemMessage">message</span>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage.unlink" title="()Unit">unlink</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a title="Throwable" id="akka.actor;ActorCell.systemInvoke.invokeAll.x1" class="keyword">try</a> <span class="delimiter">{</span>
        <span title="akka.dispatch.sysmsg.SystemMessage">message</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="akka.dispatch.sysmsg.SystemMessage">message</span>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;SystemMessage" title="akka.dispatch.sysmsg.SystemMessage">SystemMessage</a> <span class="keyword">if</span> <a href="#akka.actor;ActorCell.systemInvoke.shouldStash" title="(m: akka.dispatch.sysmsg.SystemMessage, state: Int)Boolean">shouldStash</a><span class="delimiter">(</span><span title="akka.dispatch.sysmsg.SystemMessage">message</span>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.currentState" title="Int">currentState</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor;ActorCell.stash" title="(msg: akka.dispatch.sysmsg.SystemMessage)Unit">stash</a><span class="delimiter">(</span><span title="akka.dispatch.sysmsg.SystemMessage">message</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="akka.dispatch.sysmsg.Failed" id="akka.actor;ActorCell.systemInvoke.invokeAll.f">f</a>: <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;Failed" title="akka.dispatch.sysmsg.Failed">Failed</a> ⇒ <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.handleFailure" title="(f: akka.dispatch.sysmsg.Failed)Unit">handleFailure</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.f" title="akka.dispatch.sysmsg.Failed">f</a><span class="delimiter">)</span>
          <span class="keyword">case</span> DeathWatchNotification<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorCell.systemInvoke.invokeAll.a">a</a>, <a title="Boolean" id="akka.actor;ActorCell.systemInvoke.invokeAll.ec">ec</a>, <a title="Boolean" id="akka.actor;ActorCell.systemInvoke.invokeAll.at">at</a><span class="delimiter">)</span> ⇒ <a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.watchedActorTerminated" title="(actor: akka.actor.ActorRef, existenceConfirmed: Boolean, addressTerminated: Boolean)Unit">watchedActorTerminated</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.a" title="akka.actor.ActorRef">a</a>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.ec" title="Boolean">ec</a>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.at" title="Boolean">at</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Create<span class="delimiter">(</span><a title="Option[akka.actor.ActorInitializationException]" id="akka.actor;ActorCell.systemInvoke.invokeAll.failure">failure</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor;ActorCell.create" title="(failure: Option[akka.actor.ActorInitializationException])Unit">create</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.failure" title="Option[akka.actor.ActorInitializationException]">failure</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Watch<span class="delimiter">(</span><span title="akka.actor.InternalActorRef">watchee</span>, <span title="akka.actor.InternalActorRef">watcher</span><span class="delimiter">)</span> ⇒ <a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.addWatcher" title="(watchee: akka.actor.ActorRef, watcher: akka.actor.ActorRef)Unit">addWatcher</a><span class="delimiter">(</span><span title="akka.actor.InternalActorRef">watchee</span>, <span title="akka.actor.InternalActorRef">watcher</span><span class="delimiter">)</span>
          <span class="keyword">case</span> Unwatch<span class="delimiter">(</span><span title="akka.actor.ActorRef">watchee</span>, <span title="akka.actor.ActorRef">watcher</span><span class="delimiter">)</span> ⇒ <a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.remWatcher" title="(watchee: akka.actor.ActorRef, watcher: akka.actor.ActorRef)Unit">remWatcher</a><span class="delimiter">(</span><span title="akka.actor.ActorRef">watchee</span>, <span title="akka.actor.ActorRef">watcher</span><span class="delimiter">)</span>
          <span class="keyword">case</span> Recreate<span class="delimiter">(</span><a title="Throwable" id="akka.actor;ActorCell.systemInvoke.invokeAll.cause">cause</a><span class="delimiter">)</span> ⇒ <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.faultRecreate" title="(cause: Throwable)Unit">faultRecreate</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.cause" title="Throwable">cause</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Suspend<span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.faultSuspend" title="()Unit">faultSuspend</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> Resume<span class="delimiter">(</span><a title="Throwable" id="akka.actor;ActorCell.systemInvoke.invokeAll.inRespToFailure">inRespToFailure</a><span class="delimiter">)</span> ⇒ <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.faultResume" title="(causedByFailure: Throwable)Unit">faultResume</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.inRespToFailure" title="Throwable">inRespToFailure</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Terminate<span class="delimiter">(</span><span class="delimiter">)</span> ⇒ <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.terminate" title="()Unit">terminate</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> Supervise<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorCell.systemInvoke.invokeAll.child">child</a>, <a title="Boolean" id="akka.actor;ActorCell.systemInvoke.invokeAll.async">async</a><span class="delimiter">)</span> ⇒ <a href="#akka.actor;ActorCell.supervise" title="(child: akka.actor.ActorRef, async: Boolean)Unit">supervise</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.child" title="akka.actor.ActorRef">child</a>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.async" title="Boolean">async</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg.NoMessage" title="akka.dispatch.sysmsg.NoMessage.type">NoMessage</a> ⇒ <span class="comment">// only here to suppress warning</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.handleNonFatalOrInterruptedException" title="(thunk: Throwable =&gt; Unit)util.control.Exception.Catcher[Unit]">handleNonFatalOrInterruptedException</a> <a title="util.control.Exception.Catcher[Unit]" id="akka.actor;ActorCell.systemInvoke.invokeAll.catchExpr1" class="delimiter">{</a> <a title="Throwable" id="akka.actor;ActorCell.systemInvoke.invokeAll.catchExpr1.$anonfun.e">e</a> ⇒
        <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.handleInvokeFailure" title="(childrenNotToSuspend: scala.collection.immutable.Iterable[akka.actor.ActorRef], t: Throwable)Unit">handleInvokeFailure</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.catchExpr1.$anonfun.e" title="Throwable">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="Int" id="akka.actor;ActorCell.systemInvoke.invokeAll.newState">newState</a> = <a href="#akka.actor;ActorCell.systemInvoke.calculateState" title="=&gt; Int">calculateState</a>
      <span class="comment">// As each state accepts a strict subset of another state, it is enough to unstash if we &quot;walk up&quot; the state</span>
      <span class="comment">// chain</span>
      <span class="keyword">val</span> <a title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" id="akka.actor;ActorCell.systemInvoke.invokeAll.todo">todo</a> = <span title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.newState" title="Int">newState</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.currentState" title="Int">currentState</a><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.unstashAll" title="()akka.dispatch.sysmsg.LatestFirstSystemMessageList">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.reverse_:::" title="(other: akka.dispatch.sysmsg.LatestFirstSystemMessageList)akka.dispatch.sysmsg.EarliestFirstSystemMessageList">reverse_:::</a> <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.rest" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">rest</a> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.rest" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">rest</a>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="dungeon/Dispatch.scala.html#akka.actor.dungeon;Dispatch.isTerminated" title="=&gt; Boolean">isTerminated</a><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.systemInvoke.sendAllToDeadLetters" title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList)Unit">sendAllToDeadLetters</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.todo" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">todo</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.todo" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">todo</a>.<a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.systemInvoke.invokeAll" title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList, currentState: Int)Unit">invokeAll</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.invokeAll.todo" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">todo</a>, <a href="#akka.actor;ActorCell.systemInvoke.invokeAll.newState" title="Int">newState</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.actor;ActorCell.systemInvoke.invokeAll" title="(messages: akka.dispatch.sysmsg.EarliestFirstSystemMessageList, currentState: Int)Unit">invokeAll</a><span class="delimiter">(</span><span title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList" class="keyword">new</span> <a href="../dispatch/sysmsg/SystemMessage.scala.html#akka.dispatch.sysmsg;EarliestFirstSystemMessageList" title="akka.dispatch.sysmsg.EarliestFirstSystemMessageList">EarliestFirstSystemMessageList</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.systemInvoke.message" title="akka.dispatch.sysmsg.SystemMessage">message</a><span class="delimiter">)</span>, <a href="#akka.actor;ActorCell.systemInvoke.calculateState" title="=&gt; Int">calculateState</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">//Memory consistency is handled by the Mailbox (reading mailbox status then processing messages, then writing mailbox status</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(messageHandle: akka.dispatch.Envelope)Unit" id="akka.actor;ActorCell.invoke">invoke</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.actor;ActorCell.invoke.messageHandle">messageHandle</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a title="Throwable" id="akka.actor;ActorCell.invoke.x2" class="keyword">try</a> <span class="delimiter">{</span>
    <a href="#akka.actor;ActorCell.currentMessage_=" title="(x$1: akka.dispatch.Envelope)Unit">currentMessage</a> = <a href="#akka.actor;ActorCell.invoke.messageHandle" title="akka.dispatch.Envelope">messageHandle</a>
    <a href="dungeon/ReceiveTimeout.scala.html#akka.actor.dungeon;ReceiveTimeout.cancelReceiveTimeout" title="()Unit">cancelReceiveTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// FIXME: leave this here???</span>
    <a href="#akka.actor;ActorCell.invoke.messageHandle" title="akka.dispatch.Envelope">messageHandle</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="akka.actor.AutoReceivedMessage">msg</span>: <a href="Actor.scala.html#akka.actor;AutoReceivedMessage" title="akka.actor.AutoReceivedMessage">AutoReceivedMessage</a> ⇒ <a href="#akka.actor;ActorCell.autoReceiveMessage" title="(msg: akka.dispatch.Envelope)Unit">autoReceiveMessage</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.invoke.messageHandle" title="akka.dispatch.Envelope">messageHandle</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Any">msg</span>                      ⇒ <a href="#akka.actor;ActorCell.receiveMessage" title="(msg: Any)Unit">receiveMessage</a><span class="delimiter">(</span><span title="Any">msg</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#akka.actor;ActorCell.currentMessage_=" title="(x$1: akka.dispatch.Envelope)Unit">currentMessage</a> = <span title="Null(null)" class="keyword">null</span> <span class="comment">// reset current message after successful invocation</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.handleNonFatalOrInterruptedException" title="(thunk: Throwable =&gt; Unit)util.control.Exception.Catcher[Unit]">handleNonFatalOrInterruptedException</a> <a title="util.control.Exception.Catcher[Unit]" id="akka.actor;ActorCell.invoke.catchExpr2" class="delimiter">{</a> <a title="Throwable" id="akka.actor;ActorCell.invoke.catchExpr2.$anonfun.e">e</a> ⇒
    <a href="dungeon/FaultHandling.scala.html#akka.actor.dungeon;FaultHandling.handleInvokeFailure" title="(childrenNotToSuspend: scala.collection.immutable.Iterable[akka.actor.ActorRef], t: Throwable)Unit">handleInvokeFailure</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span>, <a href="#akka.actor;ActorCell.invoke.catchExpr2.$anonfun.e" title="Throwable">e</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
    <a href="dungeon/ReceiveTimeout.scala.html#akka.actor.dungeon;ReceiveTimeout.checkReceiveTimeout" title="()Unit">checkReceiveTimeout</a> <span class="comment">// Reschedule receive timeout</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(msg: akka.dispatch.Envelope)Unit" id="akka.actor;ActorCell.autoReceiveMessage">autoReceiveMessage</a><span class="delimiter">(</span><a title="akka.dispatch.Envelope" id="akka.actor;ActorCell.autoReceiveMessage.msg">msg</a>: <a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope" title="akka.dispatch.Envelope">Envelope</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="ActorSystem.scala.html#akka.actor.ActorSystem;Settings.DebugAutoReceive" title="=&gt; Boolean">DebugAutoReceive</a><span class="delimiter">)</span>
      <a href="#akka.actor;ActorCell.publish" title="(e: akka.event.Logging.LogEvent)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Debug" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Debug">Debug</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;ActorCell.clazz" title="(o: AnyRef)Class[_]">clazz</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a><span class="delimiter">)</span>, <span title="String(&quot;received AutoReceiveMessage &quot;)" class="string">&quot;received AutoReceiveMessage &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;ActorCell.autoReceiveMessage.msg" title="akka.dispatch.Envelope">msg</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#akka.actor;ActorCell.autoReceiveMessage.msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.message" title="=&gt; Any">message</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="akka.actor.Terminated" id="akka.actor;ActorCell.autoReceiveMessage.t">t</a>: <a href="Actor.scala.html#akka.actor;Terminated" title="akka.actor.Terminated">Terminated</a>              ⇒ <a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.receivedTerminated" title="(t: akka.actor.Terminated)Unit">receivedTerminated</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.autoReceiveMessage.t" title="akka.actor.Terminated">t</a><span class="delimiter">)</span>
      <span class="keyword">case</span> AddressTerminated<span class="delimiter">(</span><a title="akka.actor.Address" id="akka.actor;ActorCell.autoReceiveMessage.address">address</a><span class="delimiter">)</span> ⇒ <a href="dungeon/DeathWatch.scala.html#akka.actor.dungeon;DeathWatch.addressTerminated" title="(address: akka.actor.Address)Unit">addressTerminated</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.autoReceiveMessage.address" title="akka.actor.Address">address</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="Actor.scala.html#akka.actor.Kill" title="akka.actor.Kill.type">Kill</a>                       ⇒ <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.ActorKilledException" class="keyword">new</span> <a href="Actor.scala.html#akka.actor;ActorKilledException" title="akka.actor.ActorKilledException">ActorKilledException</a><span class="delimiter">(</span><span title="String(&quot;Kill&quot;)" class="string">&quot;Kill&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="Actor.scala.html#akka.actor.PoisonPill" title="akka.actor.PoisonPill.type">PoisonPill</a>                 ⇒ <a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;InternalActorRef.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="akka.actor.ActorSelectionMessage" id="akka.actor;ActorCell.autoReceiveMessage.sel">sel</a>: <a href="ActorSelection.scala.html#akka.actor;ActorSelectionMessage" title="akka.actor.ActorSelectionMessage">ActorSelectionMessage</a> ⇒ <a href="#akka.actor;ActorCell.receiveSelection" title="(sel: akka.actor.ActorSelectionMessage)Unit">receiveSelection</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.autoReceiveMessage.sel" title="akka.actor.ActorSelectionMessage">sel</a><span class="delimiter">)</span>
      <span class="keyword">case</span> Identify<span class="delimiter">(</span><a title="Any" id="akka.actor;ActorCell.autoReceiveMessage.messageId">messageId</a><span class="delimiter">)</span>        ⇒ <a href="#akka.actor;ActorCell.sender" title="()akka.actor.ActorRef">sender</a><a href="package.scala.html#akka.actor.package.actorRef2Scala" title="akka.actor.ScalaActorRef" id="akka.actor;ActorCell.autoReceiveMessage.qual$2" class="delimiter">(</a><span class="delimiter">)</span> <a href="ActorRef.scala.html#akka.actor;ScalaActorRef.!$default$2" title="akka.actor.ActorRef" id="akka.actor;ActorCell.autoReceiveMessage.x$10">!</a> <a href="Actor.scala.html#akka.actor;ActorIdentity" title="(correlationId: Any, ref: Option[akka.actor.ActorRef])akka.actor.ActorIdentity">ActorIdentity</a><a title="akka.actor.ActorIdentity" id="akka.actor;ActorCell.autoReceiveMessage.x$9" class="delimiter">(</a><a href="#akka.actor;ActorCell.autoReceiveMessage.messageId" title="Any">messageId</a>, <span title="(x: akka.actor.InternalActorRef)Some[akka.actor.InternalActorRef]">Some</span><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sel: akka.actor.ActorSelectionMessage)Unit" id="akka.actor;ActorCell.receiveSelection">receiveSelection</a><span class="delimiter">(</span><a title="akka.actor.ActorSelectionMessage" id="akka.actor;ActorCell.receiveSelection.sel">sel</a>: <a href="ActorSelection.scala.html#akka.actor;ActorSelectionMessage" title="akka.actor.ActorSelectionMessage">ActorSelectionMessage</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.receiveSelection.sel" title="akka.actor.ActorSelectionMessage">sel</a>.<a href="ActorSelection.scala.html#akka.actor;ActorSelectionMessage.elements" title="=&gt; scala.collection.immutable.Iterable[akka.actor.SelectionPathElement]">elements</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#akka.actor;ActorCell.invoke" title="(messageHandle: akka.dispatch.Envelope)Unit">invoke</a><span class="delimiter">(</span><a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch.Envelope.apply(fd4a9d0721)" title="(message: Any, sender: akka.actor.ActorRef, system: akka.actor.ActorSystem)akka.dispatch.Envelope">Envelope</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.receiveSelection.sel" title="akka.actor.ActorSelectionMessage">sel</a>.<a href="ActorSelection.scala.html#akka.actor;ActorSelectionMessage.msg" title="=&gt; Any">msg</a>, <a href="#akka.actor;ActorCell.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="ActorSelection.scala.html#akka.actor.ActorSelection" title="akka.actor.ActorSelection.type">ActorSelection</a>.<a href="ActorSelection.scala.html#akka.actor.ActorSelection.deliverSelection" title="(anchor: akka.actor.InternalActorRef, sender: akka.actor.ActorRef, sel: akka.actor.ActorSelectionMessage)Unit">deliverSelection</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <a href="#akka.actor;ActorCell.sender" title="()akka.actor.ActorRef">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#akka.actor;ActorCell.receiveSelection.sel" title="akka.actor.ActorSelectionMessage">sel</a><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(msg: Any)Unit" id="akka.actor;ActorCell.receiveMessage">receiveMessage</a><span class="delimiter">(</span><a title="Any" id="akka.actor;ActorCell.receiveMessage.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a>.<a href="Actor.scala.html#akka.actor;Actor.aroundReceive" title="(receive: akka.actor.Actor.Receive, msg: Any)Unit">aroundReceive</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>.<span title="=&gt; akka.actor.Actor.Receive">head</span>, <a href="#akka.actor;ActorCell.receiveMessage.msg" title="Any">msg</a><span class="delimiter">)</span>

  <span class="comment">/*
   * ACTOR CONTEXT IMPLEMENTATION
   */</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="()akka.actor.ActorRef" id="akka.actor;ActorCell.sender">sender</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a> = <a href="#akka.actor;ActorCell.currentMessage_=" title="=&gt; akka.dispatch.Envelope">currentMessage</a> <span title="akka.actor.ActorRef" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span>                      ⇒ <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>
    <span class="keyword">case</span> <a title="akka.dispatch.Envelope" id="akka.actor;ActorCell.sender.msg">msg</a> <span class="keyword">if</span> <a href="#akka.actor;ActorCell.sender.msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span> ⇒ <a href="#akka.actor;ActorCell.sender.msg" title="akka.dispatch.Envelope">msg</a>.<a href="../dispatch/AbstractDispatcher.scala.html#akka.dispatch;Envelope.sender" title="=&gt; akka.actor.ActorRef">sender</a>
    <span class="keyword">case</span> _                         ⇒ <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(behavior: akka.actor.Actor.Receive, discardOld: Boolean)Unit" id="akka.actor;ActorCell.become(771101a7b6)">become</a><span class="delimiter">(</span><a title="akka.actor.Actor.Receive" id="akka.actor;ActorCell.become(771101a7b6).behavior">behavior</a>: Actor.<span title="akka.actor.Actor.Receive">Receive</span>, <a title="Boolean" id="akka.actor;ActorCell.become$default$2">discardOld</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.actor;ActorCell.behaviorStack_=" title="(x$1: List[akka.actor.Actor.Receive])Unit">behaviorStack</a> = <a href="#akka.actor;ActorCell.become(771101a7b6).behavior" title="akka.actor.Actor.Receive">behavior</a> <a href="#akka.actor;ActorCell.become(771101a7b6).x$2" title="(x: akka.actor.Actor.Receive)List[akka.actor.Actor.Receive]">::</a> <span class="delimiter">(</span><span title="List[akka.actor.Actor.Receive]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.become$default$2" title="Boolean">discardOld</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>.<span title="=&gt; List[akka.actor.Actor.Receive]">tail</span> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(behavior: akka.japi.Procedure[Any])Unit" id="akka.actor;ActorCell.become(4a240415df)">become</a><span class="delimiter">(</span><a title="akka.japi.Procedure[Any]" id="akka.actor;ActorCell.become(4a240415df).behavior">behavior</a>: <a href="../japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[Any]">Procedure</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;ActorCell.become(ec58a54213)" title="(behavior: akka.japi.Procedure[Any], discardOld: Boolean)Unit">become</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.become(4a240415df).behavior" title="akka.japi.Procedure[Any]">behavior</a>, discardOld = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(behavior: akka.japi.Procedure[Any], discardOld: Boolean)Unit" id="akka.actor;ActorCell.become(ec58a54213)">become</a><span class="delimiter">(</span><a title="akka.japi.Procedure[Any]" id="akka.actor;ActorCell.become(ec58a54213).behavior">behavior</a>: <a href="../japi/JavaAPI.scala.html#akka.japi;Procedure" title="akka.japi.Procedure[Any]">Procedure</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="Boolean" id="akka.actor;ActorCell.become(ec58a54213).discardOld">discardOld</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#akka.actor;ActorCell.become(771101a7b6)" title="(behavior: akka.actor.Actor.Receive, discardOld: Boolean)Unit">become</a><span class="delimiter">(</span><a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.actor;ActorCell.become(ec58a54213);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> <a title="Any" id="akka.actor;ActorCell.become(ec58a54213);$anonfun.isDefinedAt.msg">msg</a> ⇒ <a href="#akka.actor;ActorCell.become(ec58a54213).behavior" title="akka.japi.Procedure[Any]">behavior</a>.<a href="../japi/JavaAPI.scala.html#akka.japi;Procedure.apply" title="(param: Any)Unit">apply</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.actor;ActorCell.become(ec58a54213);$anonfun.isDefinedAt.msg" title="Any">msg</a><span class="delimiter">)</span> <span class="delimiter">}</span>: Actor.<span title="akka.actor.Actor.Receive">Receive</span>, <a href="#akka.actor;ActorCell.become(ec58a54213).discardOld" title="Boolean">discardOld</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.actor;ActorCell.unbecome">unbecome</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[akka.actor.Actor.Receive]" id="akka.actor;ActorCell.unbecome.original">original</a> = <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>
    <a href="#akka.actor;ActorCell.behaviorStack_=" title="(x$1: List[akka.actor.Actor.Receive])Unit">behaviorStack</a> =
      <span title="List[akka.actor.Actor.Receive]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.unbecome.original" title="List[akka.actor.Actor.Receive]">original</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.actor;ActorCell.unbecome.original" title="List[akka.actor.Actor.Receive]">original</a>.<span title="=&gt; List[akka.actor.Actor.Receive]">tail</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a>.<a href="Actor.scala.html#akka.actor;Actor.receive" title="=&gt; akka.actor.Actor.Receive">receive</a> <a href="#akka.actor;ActorCell.unbecome.x$3" title="(x: akka.actor.Actor.Receive)List[akka.actor.Actor.Receive]">::</a> <a href="#akka.actor.ActorCell.emptyBehaviorStack" title="=&gt; List[akka.actor.Actor.Receive]">emptyBehaviorStack</a>
      <span class="keyword">else</span> <a href="#akka.actor;ActorCell.unbecome.original" title="List[akka.actor.Actor.Receive]">original</a>.<span title="=&gt; List[akka.actor.Actor.Receive]">tail</span>
  <span class="delimiter">}</span>

  <span class="comment">/*
   * ACTOR INSTANCE HANDLING
   */</span>

  <span class="comment">//This method is in charge of setting up the contextStack and create a new instance of the Actor</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()akka.actor.Actor" id="akka.actor;ActorCell.newActor">newActor</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> = <span class="delimiter">{</span>
    <a href="#akka.actor.ActorCell.contextStack" title="=&gt; ThreadLocal[List[akka.actor.ActorContext]]">contextStack</a>.<span title="(x$1: List[akka.actor.ActorContext])Unit">set</span><span class="delimiter">(</span><a href="#akka.actor;ActorCell" title="akka.actor.ActorCell" class="keyword">this</a> <a href="#akka.actor;ActorCell.newActor.x$4" title="(x: akka.actor.ActorContext)List[akka.actor.ActorContext]">::</a> <a href="#akka.actor.ActorCell.contextStack" title="=&gt; ThreadLocal[List[akka.actor.ActorContext]]">contextStack</a>.<span title="()List[akka.actor.ActorContext]">get</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#akka.actor;ActorCell.behaviorStack_=" title="(x$1: List[akka.actor.Actor.Receive])Unit">behaviorStack</a> = <a href="#akka.actor.ActorCell.emptyBehaviorStack" title="=&gt; List[akka.actor.Actor.Receive]">emptyBehaviorStack</a>
      <span class="keyword">val</span> <a title="akka.actor.Actor" id="akka.actor;ActorCell.newActor.instance">instance</a> = <a href="#akka.actor;ActorCell.props" title="=&gt; akka.actor.Props">props</a>.<a href="Props.scala.html#akka.actor;Props.newActor" title="()akka.actor.Actor">newActor</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.newActor.instance" title="akka.actor.Actor">instance</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <a href="Actor.scala.html#akka.actor.ActorInitializationException.apply(933b2725f8)" title="(actor: akka.actor.ActorRef, message: String, cause: Throwable)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <span title="String(&quot;Actor instance passed to actorOf can\'t be \'null\'&quot;)" class="string">&quot;Actor instance passed to actorOf can't be 'null'&quot;</span><span class="delimiter">)</span>

      <span class="comment">// If no becomes were issued, the actors behavior is its receive method</span>
      <a href="#akka.actor;ActorCell.behaviorStack_=" title="(x$1: List[akka.actor.Actor.Receive])Unit">behaviorStack</a> = <span title="List[akka.actor.Actor.Receive]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.newActor.instance" title="akka.actor.Actor">instance</a>.<a href="Actor.scala.html#akka.actor;Actor.receive" title="=&gt; akka.actor.Actor.Receive">receive</a> <a href="#akka.actor;ActorCell.newActor.x$5" title="(x: akka.actor.Actor.Receive)List[akka.actor.Actor.Receive]">::</a> <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.behaviorStack_=" title="=&gt; List[akka.actor.Actor.Receive]">behaviorStack</a>
      <a href="#akka.actor;ActorCell.newActor.instance" title="akka.actor.Actor">instance</a>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[akka.actor.ActorContext]" id="akka.actor;ActorCell.newActor.stackAfter">stackAfter</a> = <a href="#akka.actor.ActorCell.contextStack" title="=&gt; ThreadLocal[List[akka.actor.ActorContext]]">contextStack</a>.<span title="()List[akka.actor.ActorContext]">get</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.newActor.stackAfter" title="List[akka.actor.ActorContext]">stackAfter</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="#akka.actor.ActorCell.contextStack" title="=&gt; ThreadLocal[List[akka.actor.ActorContext]]">contextStack</a>.<span title="(x$1: List[akka.actor.ActorContext])Unit">set</span><span class="delimiter">(</span><span title="List[akka.actor.ActorContext]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.newActor.stackAfter" title="List[akka.actor.ActorContext]">stackAfter</a>.<span title="=&gt; akka.actor.ActorContext">head</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.newActor.stackAfter" title="List[akka.actor.ActorContext]">stackAfter</a>.<span title="=&gt; List[akka.actor.ActorContext]">tail</span>.<span title="=&gt; List[akka.actor.ActorContext]">tail</span> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.newActor.stackAfter" title="List[akka.actor.ActorContext]">stackAfter</a>.<span title="=&gt; List[akka.actor.ActorContext]">tail</span><span class="delimiter">)</span> <span class="comment">// pop null marker plus our context</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(failure: Option[akka.actor.ActorInitializationException])Unit" id="akka.actor;ActorCell.create">create</a><span class="delimiter">(</span><a title="Option[akka.actor.ActorInitializationException]" id="akka.actor;ActorCell.create.failure">failure</a>: <span title="Option[akka.actor.ActorInitializationException]">Option</span><span class="delimiter">[</span>ActorInitializationException<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()Unit" id="akka.actor;ActorCell.create.clearOutActorIfNonNull">clearOutActorIfNonNull</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#akka.actor;ActorCell.clearActorFields" title="(actorInstance: akka.actor.Actor)Unit">clearActorFields</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a><span class="delimiter">)</span>
        <a href="#akka.actor;ActorCell.actor_=" title="(a: akka.actor.Actor)Unit">actor</a> = <span title="Null(null)" class="keyword">null</span> <span class="comment">// ensure that we know that we failed during creation</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#akka.actor;ActorCell.create.failure" title="Option[akka.actor.ActorInitializationException]">failure</a> <span title="(f: akka.actor.ActorInitializationException =&gt; Nothing)Unit">foreach</span> <span class="delimiter">{</span> <span title="Nothing" class="keyword">throw</span> <a href="#akka.actor;ActorCell.create.$anonfun.x$6" title="akka.actor.ActorInitializationException">_</a> <span class="delimiter">}</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="akka.actor.Actor" id="akka.actor;ActorCell.create.created">created</a> = <a href="#akka.actor;ActorCell.newActor" title="()akka.actor.Actor">newActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.actor;ActorCell.actor_=" title="(a: akka.actor.Actor)Unit">actor</a> = <a href="#akka.actor;ActorCell.create.created" title="akka.actor.Actor">created</a>
      <a href="#akka.actor;ActorCell.create.created" title="akka.actor.Actor">created</a>.<a href="Actor.scala.html#akka.actor;Actor.aroundPreStart" title="()Unit">aroundPreStart</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="dungeon/ReceiveTimeout.scala.html#akka.actor.dungeon;ReceiveTimeout.checkReceiveTimeout" title="()Unit">checkReceiveTimeout</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="ActorSystem.scala.html#akka.actor.ActorSystem;Settings.DebugLifecycle" title="=&gt; Boolean">DebugLifecycle</a><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.publish" title="(e: akka.event.Logging.LogEvent)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Debug" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Debug">Debug</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;ActorCell.clazz" title="(o: AnyRef)Class[_]">clazz</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.create.created" title="akka.actor.Actor">created</a><span class="delimiter">)</span>, <span title="String(&quot;started (&quot;)" class="string">&quot;started (&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;ActorCell.create.created" title="akka.actor.Actor">created</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="InterruptedException">e</span>: <span title="InterruptedException">InterruptedException</span> ⇒
        <a href="#akka.actor;ActorCell.create.clearOutActorIfNonNull" title="()Unit">clearOutActorIfNonNull</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Thread.type">Thread</span>.<span title="()Thread">currentThread</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <a href="Actor.scala.html#akka.actor.ActorInitializationException.apply(933b2725f8)" title="(actor: akka.actor.ActorRef, message: String, cause: Throwable)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <span title="String(&quot;interruption during creation&quot;)" class="string">&quot;interruption during creation&quot;</span>, <span title="InterruptedException">e</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#akka.actor;ActorCell.create.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> ⇒
        <a href="#akka.actor;ActorCell.create.clearOutActorIfNonNull" title="()Unit">clearOutActorIfNonNull</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Throwable">e</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="InstantiationException" id="akka.actor;ActorCell.create.i">i</a>: <span title="InstantiationException">InstantiationException</span> ⇒ <span title="Nothing" class="keyword">throw</span> <a href="Actor.scala.html#akka.actor.ActorInitializationException.apply(933b2725f8)" title="(actor: akka.actor.ActorRef, message: String, cause: Throwable)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>,
            <span title="String(&quot;exception during creation, this problem is likely to occur because the class of the Actor you tried to create is either,\n               a non-static inner class (in which case make it a static inner class or use Props(new ...) or Props( new UntypedActorFactory ... )\n               or is missing an appropriate, reachable no-args constructor.\n              &quot;)" class="string">&quot;&quot;&quot;exception during creation, this problem is likely to occur because the class of the Actor you tried to create is either,
               a non-static inner class (in which case make it a static inner class or use Props(new ...) or Props( new UntypedActorFactory ... )
               or is missing an appropriate, reachable no-args constructor.
              &quot;&quot;&quot;</span>, <a href="#akka.actor;ActorCell.create.i" title="InstantiationException">i</a>.<span title="()Throwable">getCause</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Throwable" id="akka.actor;ActorCell.create.x">x</a> ⇒ <span title="Nothing" class="keyword">throw</span> <a href="Actor.scala.html#akka.actor.ActorInitializationException.apply(933b2725f8)" title="(actor: akka.actor.ActorRef, message: String, cause: Throwable)akka.actor.ActorInitializationException">ActorInitializationException</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>, <span title="String(&quot;exception during creation&quot;)" class="string">&quot;exception during creation&quot;</span>, <a href="#akka.actor;ActorCell.create.x" title="Throwable">x</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(child: akka.actor.ActorRef, async: Boolean)Unit" id="akka.actor;ActorCell.supervise">supervise</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorCell.supervise.child">child</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Boolean" id="akka.actor;ActorCell.supervise.async">async</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="dungeon/Children.scala.html#akka.actor.dungeon;Children.isTerminating" title="=&gt; Boolean">isTerminating</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// Supervise is the first thing we get from a new child, so store away the UID for later use in handleFailure()</span>
      <a href="dungeon/Children.scala.html#akka.actor.dungeon;Children.initChild" title="(ref: akka.actor.ActorRef)Option[akka.actor.ChildRestartStats]">initChild</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.supervise.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ChildRestartStats" id="akka.actor;ActorCell.supervise.crs">crs</a><span class="delimiter">)</span> ⇒
          <a href="#akka.actor;ActorCell.handleSupervise" title="(child: akka.actor.ActorRef, async: Boolean)Unit">handleSupervise</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.supervise.child" title="akka.actor.ActorRef">child</a>, <a href="#akka.actor;ActorCell.supervise.async" title="Boolean">async</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.settings" title="=&gt; akka.actor.ActorSystem.Settings">settings</a>.<a href="ActorSystem.scala.html#akka.actor.ActorSystem;Settings.DebugLifecycle" title="=&gt; Boolean">DebugLifecycle</a><span class="delimiter">)</span> <a href="#akka.actor;ActorCell.publish" title="(e: akka.event.Logging.LogEvent)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging;Debug" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Debug">Debug</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;ActorCell.clazz" title="(o: AnyRef)Class[_]">clazz</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a><span class="delimiter">)</span>, <span title="String(&quot;now supervising &quot;)" class="string">&quot;now supervising &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;ActorCell.supervise.child" title="akka.actor.ActorRef">child</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="None.type">None</span> ⇒ <a href="#akka.actor;ActorCell.publish" title="(e: akka.event.Logging.LogEvent)Unit">publish</a><span class="delimiter">(</span><a href="../event/Logging.scala.html#akka.event.Logging.Error.apply(cd2da58a36)" title="(logSource: String, logClass: Class[_], message: Any)akka.event.Logging.Error">Error</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.self" title="=&gt; akka.actor.InternalActorRef">self</a>.<a href="ActorRef.scala.html#akka.actor;ActorRef.path" title="=&gt; akka.actor.ActorPath">path</a>.<span title="()String">toString</span>, <a href="#akka.actor;ActorCell.clazz" title="(o: AnyRef)Class[_]">clazz</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.actor" title="=&gt; akka.actor.Actor">actor</a><span class="delimiter">)</span>, <span title="String(&quot;received Supervise from unregistered child &quot;)" class="string">&quot;received Supervise from unregistered child &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.actor;ActorCell.supervise.child" title="akka.actor.ActorRef">child</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, this will not end well&quot;)" class="string">&quot;, this will not end well&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="comment">// future extension point</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(child: akka.actor.ActorRef, async: Boolean)Unit" id="akka.actor;ActorCell.handleSupervise">handleSupervise</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.actor;ActorCell.handleSupervise.child">child</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Boolean" id="akka.actor;ActorCell.handleSupervise.async">async</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.actor;ActorCell.handleSupervise.child" title="akka.actor.ActorRef">child</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a title="akka.actor.RepointableActorRef" id="akka.actor;ActorCell.handleSupervise.r">r</a>: <a href="RepointableActorRef.scala.html#akka.actor;RepointableActorRef" title="akka.actor.RepointableActorRef">RepointableActorRef</a> <span class="keyword">if</span> <a href="#akka.actor;ActorCell.handleSupervise.async" title="Boolean">async</a> ⇒ <a href="#akka.actor;ActorCell.handleSupervise.r" title="akka.actor.RepointableActorRef">r</a>.<a href="RepointableActorRef.scala.html#akka.actor;RepointableActorRef.point" title="()r.type">point</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _                               ⇒
  <span class="delimiter">}</span>

  @tailrec <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(clazz: Class[_], instance: AnyRef, name: String, value: Any)Boolean" id="akka.actor;ActorCell.lookupAndSetField">lookupAndSetField</a><span class="delimiter">(</span><a title="Class[_]" id="akka.actor;ActorCell.lookupAndSetField.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="AnyRef" id="akka.actor;ActorCell.lookupAndSetField.instance">instance</a>: <span title="AnyRef">AnyRef</span>, <a title="String" id="akka.actor;ActorCell.lookupAndSetField.name">name</a>: <span title="String">String</span>, <a title="Any" id="akka.actor;ActorCell.lookupAndSetField.value">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(fields: Array[java.lang.reflect.Field], idx: Int)Boolean" id="akka.actor;ActorCell.lookupAndSetField.clearFirst">clearFirst</a><span class="delimiter">(</span><a title="Array[java.lang.reflect.Field]" id="akka.actor;ActorCell.lookupAndSetField.clearFirst.fields">fields</a>: <span title="Array[java.lang.reflect.Field]">Array</span><span class="delimiter">[</span>java.lang.reflect.Field<span class="delimiter">]</span>, <a title="Int" id="akka.actor;ActorCell.lookupAndSetField.clearFirst.idx">idx</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.idx" title="Int">idx</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.fields" title="Array[java.lang.reflect.Field]">fields</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.reflect.Field" id="akka.actor;ActorCell.lookupAndSetField.clearFirst.field">field</a> = <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.fields" title="(i: Int)java.lang.reflect.Field">fields</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.idx" title="Int">idx</a><span class="delimiter">)</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.field" title="java.lang.reflect.Field">field</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#akka.actor;ActorCell.lookupAndSetField.name" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.field" title="java.lang.reflect.Field">field</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
          <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.field" title="java.lang.reflect.Field">field</a>.<span title="(x$1: Any, x$2: Any)Unit">set</span><span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.instance" title="AnyRef">instance</a>, <a href="#akka.actor;ActorCell.lookupAndSetField.value" title="Any">value</a><span class="delimiter">)</span>
          <span title="Boolean(true)" class="keyword">true</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst" title="(fields: Array[java.lang.reflect.Field], idx: Int)Boolean">clearFirst</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.fields" title="Array[java.lang.reflect.Field]">fields</a>, <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst.idx" title="Int">idx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>

    <a href="#akka.actor;ActorCell.lookupAndSetField.clearFirst" title="(fields: Array[java.lang.reflect.Field], idx: Int)Boolean">clearFirst</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.clazz" title="Class[_]">clazz</a>.<span title="()Array[java.lang.reflect.Field]">getDeclaredFields</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">{</span>
      <a href="#akka.actor;ActorCell.lookupAndSetField.clazz" title="Class[_]">clazz</a>.<span title="()Class[_ &gt;: _$1]">getSuperclass</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> ⇒ <span title="Boolean(false)" class="keyword">false</span> <span class="comment">// clazz == classOf[AnyRef]</span>
        <span class="keyword">case</span> <a title="Class[?0]" id="akka.actor;ActorCell.lookupAndSetField.sc">sc</a>   ⇒ <a href="#akka.actor;ActorCell.lookupAndSetField" title="(clazz: Class[_], instance: AnyRef, name: String, value: Any)Boolean">lookupAndSetField</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.lookupAndSetField.sc" title="Class[?0]">sc</a>, <a href="#akka.actor;ActorCell.lookupAndSetField.instance" title="AnyRef">instance</a>, <a href="#akka.actor;ActorCell.lookupAndSetField.name" title="String">name</a>, <a href="#akka.actor;ActorCell.lookupAndSetField.value" title="Any">value</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(cell: akka.actor.ActorCell)Unit" id="akka.actor;ActorCell.clearActorCellFields">clearActorCellFields</a><span class="delimiter">(</span><a title="akka.actor.ActorCell" id="akka.actor;ActorCell.clearActorCellFields.cell">cell</a>: <a href="#akka.actor;ActorCell" title="akka.actor.ActorCell">ActorCell</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.actor;ActorCell.clearActorCellFields.cell" title="akka.actor.ActorCell">cell</a>.<a href="#akka.actor;ActorCell.unstashAll" title="()akka.dispatch.sysmsg.LatestFirstSystemMessageList">unstashAll</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;ActorCell.lookupAndSetField" title="(clazz: Class[_], instance: AnyRef, name: String, value: Any)Boolean">lookupAndSetField</a><span class="delimiter">(</span>classOf<span title="Class[akka.actor.ActorCell](classOf[akka.actor.ActorCell])" class="delimiter">[</span>ActorCell<span class="delimiter">]</span>, <a href="#akka.actor;ActorCell.clearActorCellFields.cell" title="akka.actor.ActorCell">cell</a>, <span title="String(&quot;props&quot;)" class="string">&quot;props&quot;</span>, <a href="#akka.actor.ActorCell" title="akka.actor.ActorCell.type">ActorCell</a>.<a href="#akka.actor.ActorCell.terminatedProps" title="=&gt; akka.actor.Props">terminatedProps</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;ActorCell has no props field&quot;)" class="string">&quot;ActorCell has no props field&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(actorInstance: akka.actor.Actor)Unit" id="akka.actor;ActorCell.clearActorFields">clearActorFields</a><span class="delimiter">(</span><a title="akka.actor.Actor" id="akka.actor;ActorCell.clearActorFields.actorInstance">actorInstance</a>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.actor;ActorCell.setActorFields" title="(actorInstance: akka.actor.Actor, context: akka.actor.ActorContext, self: akka.actor.ActorRef)Unit">setActorFields</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.clearActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>, context = <span title="Null(null)" class="keyword">null</span>, self = <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.deadLetters" title="=&gt; akka.actor.ActorRef">deadLetters</a><span class="delimiter">)</span>
    <a href="#akka.actor;ActorCell.currentMessage_=" title="(x$1: akka.dispatch.Envelope)Unit">currentMessage</a> = <span title="Null(null)" class="keyword">null</span>
    <a href="#akka.actor;ActorCell.behaviorStack_=" title="(x$1: List[akka.actor.Actor.Receive])Unit">behaviorStack</a> = <a href="#akka.actor.ActorCell.emptyBehaviorStack" title="=&gt; List[akka.actor.Actor.Receive]">emptyBehaviorStack</a>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(actorInstance: akka.actor.Actor, context: akka.actor.ActorContext, self: akka.actor.ActorRef)Unit" id="akka.actor;ActorCell.setActorFields">setActorFields</a><span class="delimiter">(</span><a title="akka.actor.Actor" id="akka.actor;ActorCell.setActorFields.actorInstance">actorInstance</a>: <a href="Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a>, <a title="akka.actor.ActorContext" id="akka.actor;ActorCell.setActorFields.context">context</a>: <a href="#akka.actor;ActorContext" title="akka.actor.ActorContext">ActorContext</a>, <a title="akka.actor.ActorRef" id="akka.actor;ActorCell.setActorFields.self">self</a>: <a href="ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#akka.actor;ActorCell.lookupAndSetField" title="(clazz: Class[_], instance: AnyRef, name: String, value: Any)Boolean">lookupAndSetField</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>.<span title="()Class[_]">getClass</span>, <a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>, <span title="String(&quot;context&quot;)" class="string">&quot;context&quot;</span>, <a href="#akka.actor;ActorCell.setActorFields.context" title="akka.actor.ActorContext">context</a><span class="delimiter">)</span>
        <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><a href="#akka.actor;ActorCell.lookupAndSetField" title="(clazz: Class[_], instance: AnyRef, name: String, value: Any)Boolean">lookupAndSetField</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>.<span title="()Class[_]">getClass</span>, <a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>, <span title="String(&quot;self&quot;)" class="string">&quot;self&quot;</span>, <a href="#akka.actor;ActorCell.setActorFields.self" title="akka.actor.ActorRef">self</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="akka.actor.IllegalActorStateException" class="keyword">new</span> <a href="Actor.scala.html#akka.actor;IllegalActorStateException" title="akka.actor.IllegalActorStateException">IllegalActorStateException</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.setActorFields.actorInstance" title="akka.actor.Actor">actorInstance</a>.<span title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">getClass</span> <span title="(other: String)String">+</span> <span title="String(&quot; is not an Actor since it have not mixed in the \'Actor\' trait&quot;)" class="string">&quot; is not an Actor since it have not mixed in the 'Actor' trait&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">// logging is not the main purpose, and if it fails there’s nothing we can do</span>
  <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(e: akka.event.Logging.LogEvent)Unit" id="akka.actor;ActorCell.publish">publish</a><span class="delimiter">(</span><a title="akka.event.Logging.LogEvent" id="akka.actor;ActorCell.publish.e">e</a>: <a href="../event/Logging.scala.html#akka.event.Logging;LogEvent" title="akka.event.Logging.LogEvent">LogEvent</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="keyword">try</span> <a href="#akka.actor;ActorCell.system" title="=&gt; akka.actor.ActorSystemImpl">system</a>.<a href="ActorSystem.scala.html#akka.actor;ActorSystemImpl.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: ActorCell.this.system.eventStream.Event)Unit">publish</a><span class="delimiter">(</span><a href="#akka.actor;ActorCell.publish.e" title="akka.event.Logging.LogEvent">e</a><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a href="#akka.actor;ActorCell.publish.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span>_<span class="delimiter">)</span> ⇒ <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(o: AnyRef)Class[_]" id="akka.actor;ActorCell.clazz">clazz</a><span class="delimiter">(</span><a title="AnyRef" id="akka.actor;ActorCell.clazz.o">o</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span title="Class[_2]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.actor;ActorCell.clazz.o" title="AnyRef">o</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#akka.actor;ActorCell" title="ActorCell.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span> <span class="keyword">else</span> <a href="#akka.actor;ActorCell.clazz.o" title="AnyRef">o</a>.<span title="()Class[_]">getClass</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
