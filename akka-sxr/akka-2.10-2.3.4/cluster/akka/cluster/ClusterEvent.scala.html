<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cluster/akka/cluster/ClusterEvent.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Copyright (C) 2009-2014 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> akka.cluster

<span class="keyword">import</span> <span title="language.type">language</span>.postfixOps
<span class="keyword">import</span> scala.collection.immutable
<span class="keyword">import</span> scala.collection.immutable.VectorBuilder
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> Actor, ActorLogging, ActorRef, Address <span class="delimiter">}</span>
<span class="keyword">import</span> akka.cluster.<a href="#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type">ClusterEvent</a>._
<span class="keyword">import</span> akka.cluster.<a href="Member.scala.html#akka.cluster.MemberStatus" title="akka.cluster.MemberStatus.type">MemberStatus</a>._
<span class="keyword">import</span> akka.event.EventStream
<span class="keyword">import</span> akka.dispatch.<span class="delimiter">{</span> UnboundedMessageQueueSemantics, RequiresMessageQueue <span class="delimiter">}</span>

<span class="comment">/**
 * Domain events published to the event bus.
 * Subscribe with:
 * {{{
 *   Cluster(system).subscribe(actorRef, classOf[ClusterDomainEvent])
 * }}}
 */</span>
<span class="keyword">object</span> <a title="akka.cluster.ClusterEvent.type" id="akka.cluster.ClusterEvent">ClusterEvent</a> <a href="#akka.cluster.ClusterEvent" title="akka.cluster.ClusterEvent.type" class="delimiter">{</a>

  <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SubscriptionInitialStateMode extends AnyRef" id="akka.cluster.ClusterEvent;SubscriptionInitialStateMode">SubscriptionInitialStateMode</a>
  <span class="comment">/**
   * When using this subscription mode a snapshot of
   * [[akka.cluster.ClusterEvent.CurrentClusterState]] will be sent to the
   * subscriber as the first message.
   */</span>
  <span class="keyword">case object</span> <a href="#akka.cluster.ClusterEvent.InitialStateAsSnapshot.productElement.x$1" title="akka.cluster.ClusterEvent.InitialStateAsSnapshot.type" id="akka.cluster.ClusterEvent.InitialStateAsSnapshot.readResolve">InitialStateAsSnapshot</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;SubscriptionInitialStateMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">SubscriptionInitialStateMode</a>
  <span class="comment">/**
   * When using this subscription mode the events corresponding
   * to the current state will be sent to the subscriber to mimic what you would
   * have seen if you were listening to the events when they occurred in the past.
   */</span>
  <span class="keyword">case object</span> <a href="#akka.cluster.ClusterEvent.InitialStateAsEvents.productElement.x$1" title="akka.cluster.ClusterEvent.InitialStateAsEvents.type" id="akka.cluster.ClusterEvent.InitialStateAsEvents.readResolve">InitialStateAsEvents</a> <span title="Product" class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;SubscriptionInitialStateMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">SubscriptionInitialStateMode</a>

  <span class="comment">/**
   * Java API
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterEvent.InitialStateAsSnapshot.type" id="akka.cluster.ClusterEvent.initialStateAsSnapshot">initialStateAsSnapshot</a> = <a href="#akka.cluster.ClusterEvent.InitialStateAsSnapshot.readResolve" title="akka.cluster.ClusterEvent.InitialStateAsSnapshot.type">InitialStateAsSnapshot</a>

  <span class="comment">/**
   * Java API
   */</span>
  <span class="keyword">def</span> <a title="=&gt; akka.cluster.ClusterEvent.InitialStateAsEvents.type" id="akka.cluster.ClusterEvent.initialStateAsEvents">initialStateAsEvents</a> = <a href="#akka.cluster.ClusterEvent.InitialStateAsEvents.readResolve" title="akka.cluster.ClusterEvent.InitialStateAsEvents.type">InitialStateAsEvents</a>

  <span class="comment">/**
   * Marker interface for cluster domain events.
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait ClusterDomainEvent extends AnyRef" id="akka.cluster.ClusterEvent;ClusterDomainEvent">ClusterDomainEvent</a>

  <span class="comment">/**
   * Current snapshot state of the cluster. Sent to new subscriber.
   */</span>
  <span class="keyword">case class</span> <a title="class CurrentClusterState extends AnyRef with Product with Serializable" id="akka.cluster.ClusterEvent.CurrentClusterState.readResolve">CurrentClusterState</a><a href="#akka.cluster.ClusterEvent.CurrentClusterState.readResolve" title="Product" class="delimiter">(</a>
    <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster.ClusterEvent.CurrentClusterState.apply$default$1">members</a>: immutable.<span title="scala.collection.immutable.SortedSet[akka.cluster.Member]">SortedSet</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> = immutable.<span title="scala.collection.immutable.SortedSet.type">SortedSet</span>.<a href="Member.scala.html#akka.cluster.Member.ordering" title="(implicit ord: Ordering[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">empty</a>,
    <a title="Set[akka.cluster.Member]" id="akka.cluster.ClusterEvent.CurrentClusterState.apply$default$2">unreachable</a>: <span title="Set[akka.cluster.Member]">Set</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[akka.cluster.Member]">empty</span>,
    <a title="Set[akka.actor.Address]" id="akka.cluster.ClusterEvent.CurrentClusterState.apply$default$3">seenBy</a>: <span title="Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[akka.actor.Address]">empty</span>,
    <a title="Option[akka.actor.Address]" id="akka.cluster.ClusterEvent.CurrentClusterState.apply$default$4">leader</a>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <span title="None.type">None</span>,
    <a title="Map[String,Option[akka.actor.Address]]" id="akka.cluster.ClusterEvent.CurrentClusterState.apply$default$5">roleLeaderMap</a>: <span title="Map[String,Option[akka.actor.Address]]">Map</span><span class="delimiter">[</span>String, Option<span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="scala.collection.immutable.Map[String,Nothing]">empty</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="comment">/**
     * Java API: get current member list.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Iterable[akka.cluster.Member]" id="akka.cluster.ClusterEvent;CurrentClusterState.getMembers">getMembers</a>: java.lang.<span title="Iterable[akka.cluster.Member]">Iterable</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
      <a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$1" title="(s: scala.collection.Set[akka.cluster.Member])scala.collection.convert.Decorators.AsJava[java.util.Set[akka.cluster.Member]]">members</a>.<span title="=&gt; java.util.Set[akka.cluster.Member]">asJava</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Java API: get current unreachable set.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Set[akka.cluster.Member]" id="akka.cluster.ClusterEvent;CurrentClusterState.getUnreachable">getUnreachable</a>: java.util.<span title="java.util.Set[akka.cluster.Member]">Set</span><span class="delimiter">[</span>Member<span class="delimiter">]</span> =
      scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(s: scala.collection.Set[akka.cluster.Member])scala.collection.convert.Decorators.AsJava[java.util.Set[akka.cluster.Member]]">setAsJavaSetConverter</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$2" title="=&gt; Set[akka.cluster.Member]">unreachable</a><span class="delimiter">)</span>.<span title="=&gt; java.util.Set[akka.cluster.Member]">asJava</span>

    <span class="comment">/**
     * Java API: get current “seen-by” set.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Set[akka.actor.Address]" id="akka.cluster.ClusterEvent;CurrentClusterState.getSeenBy">getSeenBy</a>: java.util.<span title="java.util.Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> =
      scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(s: scala.collection.Set[akka.actor.Address])scala.collection.convert.Decorators.AsJava[java.util.Set[akka.actor.Address]]">setAsJavaSetConverter</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$3" title="=&gt; Set[akka.actor.Address]">seenBy</a><span class="delimiter">)</span>.<span title="=&gt; java.util.Set[akka.actor.Address]">asJava</span>

    <span class="comment">/**
     * Java API: get address of current leader, or null if none
     */</span>
    <span class="keyword">def</span> <a title="=&gt; akka.actor.Address" id="akka.cluster.ClusterEvent;CurrentClusterState.getLeader">getLeader</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> = <a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$4" title="=&gt; Option[akka.actor.Address]">leader</a> <span title="(implicit ev: &lt;:&lt;[Null,akka.actor.Address])akka.actor.Address">orNull</span>

    <span class="comment">/**
     * All node roles in the cluster
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Set[String]" id="akka.cluster.ClusterEvent;CurrentClusterState.allRoles">allRoles</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$5" title="=&gt; Map[String,Option[akka.actor.Address]]">roleLeaderMap</a>.<span title="=&gt; scala.collection.immutable.Set[String]">keySet</span>

    <span class="comment">/**
     * Java API: All node roles in the cluster
     */</span>
    <span class="keyword">def</span> <a title="=&gt; java.util.Set[String]" id="akka.cluster.ClusterEvent;CurrentClusterState.getAllRoles">getAllRoles</a>: java.util.<span title="java.util.Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
      scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(s: scala.collection.Set[String])scala.collection.convert.Decorators.AsJava[java.util.Set[String]]">setAsJavaSetConverter</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;CurrentClusterState.allRoles" title="=&gt; Set[String]">allRoles</a><span class="delimiter">)</span>.<span title="=&gt; java.util.Set[String]">asJava</span>

    <span class="comment">/**
     * get address of current leader, if any, within the role set
     */</span>
    <span class="keyword">def</span> <a title="(role: String)Option[akka.actor.Address]" id="akka.cluster.ClusterEvent;CurrentClusterState.roleLeader">roleLeader</a><span class="delimiter">(</span><a title="String" id="akka.cluster.ClusterEvent;CurrentClusterState.roleLeader.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span> = <a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$5" title="=&gt; Map[String,Option[akka.actor.Address]]">roleLeaderMap</a>.<span title="(key: String, default: =&gt; Option[akka.actor.Address])Option[akka.actor.Address]">getOrElse</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;CurrentClusterState.roleLeader.role" title="String">role</a>, <span title="None.type">None</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Java API: get address of current leader within the role set,
     * or null if no node with that role
     */</span>
    <span class="keyword">def</span> <a title="(role: String)akka.actor.Address" id="akka.cluster.ClusterEvent;CurrentClusterState.getRoleLeader">getRoleLeader</a><span class="delimiter">(</span><a title="String" id="akka.cluster.ClusterEvent;CurrentClusterState.getRoleLeader.role">role</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> = <a href="#akka.cluster.ClusterEvent.CurrentClusterState.apply$default$5" title="=&gt; Map[String,Option[akka.actor.Address]]">roleLeaderMap</a>.<span title="(key: String)Option[Option[akka.actor.Address]]">get</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;CurrentClusterState.getRoleLeader.role" title="String">role</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Option[akka.actor.Address],Option[akka.actor.Address]])Option[akka.actor.Address]">flatten</span>.<span title="(implicit ev: &lt;:&lt;[Null,akka.actor.Address])akka.actor.Address">orNull</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Marker interface for membership events.
   * Published when the state change is first seen on a node.
   * The state change was performed by the leader when there was
   * convergence on the leader node, i.e. all members had seen previous
   * state.
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait MemberEvent extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent" id="akka.cluster.ClusterEvent;MemberEvent">MemberEvent</a> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; akka.cluster.Member" id="akka.cluster.ClusterEvent;MemberEvent.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Member status changed to Up.
   */</span>
  <span class="keyword">case class</span> <a title="class MemberUp extends AnyRef with akka.cluster.ClusterEvent.MemberEvent with Product with Serializable" id="akka.cluster.ClusterEvent.MemberUp.readResolve">MemberUp</a><a href="#akka.cluster.ClusterEvent.MemberUp.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent;MemberUp.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;MemberUp.member" title="=&gt; akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Up" title="akka.cluster.MemberStatus.Up.type">Up</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Expected Up status, got: &quot;)" class="string">&quot;Expected Up status, got: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster.ClusterEvent;MemberUp.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Member status changed to [[MemberStatus.Exiting]] and will be removed
   * when all members have seen the `Exiting` status.
   */</span>
  <span class="keyword">case class</span> <a title="class MemberExited extends AnyRef with akka.cluster.ClusterEvent.MemberEvent with Product with Serializable" id="akka.cluster.ClusterEvent.MemberExited.readResolve">MemberExited</a><a href="#akka.cluster.ClusterEvent.MemberExited.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent;MemberExited.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;MemberExited.member" title="=&gt; akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Expected Exiting status, got: &quot;)" class="string">&quot;Expected Exiting status, got: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster.ClusterEvent;MemberExited.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Member completely removed from the cluster.
   * When `previousStatus` is `MemberStatus.Down` the node was removed
   * after being detected as unreachable and downed.
   * When `previousStatus` is `MemberStatus.Exiting` the node was removed
   * after graceful leaving and exiting.
   */</span>
  <span class="keyword">case class</span> <a title="class MemberRemoved extends AnyRef with akka.cluster.ClusterEvent.MemberEvent with Product with Serializable" id="akka.cluster.ClusterEvent.MemberRemoved.readResolve">MemberRemoved</a><a href="#akka.cluster.ClusterEvent.MemberRemoved.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent;MemberRemoved.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a>, <a title="akka.cluster.MemberStatus" id="akka.cluster.ClusterEvent;MemberRemoved.previousStatus">previousStatus</a>: <a href="Member.scala.html#akka.cluster;MemberStatus" title="akka.cluster.MemberStatus">MemberStatus</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;MemberEvent" title="akka.cluster.ClusterEvent.MemberEvent">MemberEvent</a> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;MemberRemoved.member" title="=&gt; akka.cluster.Member">member</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Removed" title="akka.cluster.MemberStatus.Removed.type">Removed</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;Expected Removed status, got: &quot;)" class="string">&quot;Expected Removed status, got: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#akka.cluster.ClusterEvent;MemberRemoved.member" title="=&gt; akka.cluster.Member">member</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Leader of the cluster members changed. Published when the state change
   * is first seen on a node.
   */</span>
  <span class="keyword">case class</span> <a title="class LeaderChanged extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.LeaderChanged.readResolve">LeaderChanged</a><a href="#akka.cluster.ClusterEvent.LeaderChanged.readResolve" title="Product" class="delimiter">(</a><a title="Option[akka.actor.Address]" id="akka.cluster.ClusterEvent;LeaderChanged.leader">leader</a>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a> <span class="delimiter">{</span>
    <span class="comment">/**
     * Java API
     * @return address of current leader, or null if none
     */</span>
    <span class="keyword">def</span> <a title="=&gt; akka.actor.Address" id="akka.cluster.ClusterEvent;LeaderChanged.getLeader">getLeader</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> = <a href="#akka.cluster.ClusterEvent;LeaderChanged.leader" title="=&gt; Option[akka.actor.Address]">leader</a> <span title="(implicit ev: &lt;:&lt;[Null,akka.actor.Address])akka.actor.Address">orNull</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * First member (leader) of the members within a role set changed.
   * Published when the state change is first seen on a node.
   */</span>
  <span class="keyword">case class</span> <a title="class RoleLeaderChanged extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.RoleLeaderChanged.readResolve">RoleLeaderChanged</a><a href="#akka.cluster.ClusterEvent.RoleLeaderChanged.readResolve" title="Product" class="delimiter">(</a><a title="String" id="akka.cluster.ClusterEvent;RoleLeaderChanged.role">role</a>: <span title="String">String</span>, <a title="Option[akka.actor.Address]" id="akka.cluster.ClusterEvent;RoleLeaderChanged.leader">leader</a>: <span title="Option[akka.actor.Address]">Option</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a> <span class="delimiter">{</span>
    <span class="comment">/**
     * Java API
     * @return address of current leader, or null if none
     */</span>
    <span class="keyword">def</span> <a title="=&gt; akka.actor.Address" id="akka.cluster.ClusterEvent;RoleLeaderChanged.getLeader">getLeader</a>: <a href="../../../actor/akka/actor/Address.scala.html#akka.actor;Address" title="akka.actor.Address">Address</a> = <a href="#akka.cluster.ClusterEvent;RoleLeaderChanged.leader" title="=&gt; Option[akka.actor.Address]">leader</a> <span title="(implicit ev: &lt;:&lt;[Null,akka.actor.Address])akka.actor.Address">orNull</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Marker interface to facilitate subscription of
   * both [[UnreachableMember]] and [[ReachableMember]].
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait ReachabilityEvent extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent" id="akka.cluster.ClusterEvent;ReachabilityEvent">ReachabilityEvent</a> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a>

  <span class="comment">/**
   * A member is considered as unreachable by the failure detector.
   */</span>
  <span class="keyword">case class</span> <a title="class UnreachableMember extends AnyRef with akka.cluster.ClusterEvent.ReachabilityEvent with Product with Serializable" id="akka.cluster.ClusterEvent.UnreachableMember.readResolve">UnreachableMember</a><a href="#akka.cluster.ClusterEvent.UnreachableMember.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent;UnreachableMember.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ReachabilityEvent" title="akka.cluster.ClusterEvent.ReachabilityEvent">ReachabilityEvent</a>

  <span class="comment">/**
   * A member is considered as reachable by the failure detector
   * after having been unreachable.
   * @see [[UnreachableMember]]
   */</span>
  <span class="keyword">case class</span> <a title="class ReachableMember extends AnyRef with akka.cluster.ClusterEvent.ReachabilityEvent with Product with Serializable" id="akka.cluster.ClusterEvent.ReachableMember.readResolve">ReachableMember</a><a href="#akka.cluster.ClusterEvent.ReachableMember.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent;ReachableMember.member">member</a>: <a href="Member.scala.html#akka.cluster;Member" title="akka.cluster.Member">Member</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ReachabilityEvent" title="akka.cluster.ClusterEvent.ReachabilityEvent">ReachabilityEvent</a>

  <span class="comment">/**
   * Current snapshot of cluster node metrics. Published to subscribers.
   */</span>
  <span class="keyword">case class</span> <a title="class ClusterMetricsChanged extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.ClusterMetricsChanged.readResolve">ClusterMetricsChanged</a><a href="#akka.cluster.ClusterEvent.ClusterMetricsChanged.readResolve" title="Product" class="delimiter">(</a><a title="Set[akka.cluster.NodeMetrics]" id="akka.cluster.ClusterEvent;ClusterMetricsChanged.nodeMetrics">nodeMetrics</a>: <span title="Set[akka.cluster.NodeMetrics]">Set</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a> <span class="delimiter">{</span>
    <span class="comment">/**
     * Java API
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Iterable[akka.cluster.NodeMetrics]" id="akka.cluster.ClusterEvent;ClusterMetricsChanged.getNodeMetrics">getNodeMetrics</a>: java.lang.<span title="Iterable[akka.cluster.NodeMetrics]">Iterable</span><span class="delimiter">[</span>NodeMetrics<span class="delimiter">]</span> =
      scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>.<span title="(i: Iterable[akka.cluster.NodeMetrics])scala.collection.convert.Decorators.AsJava[Iterable[akka.cluster.NodeMetrics]]">asJavaIterableConverter</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent;ClusterMetricsChanged.nodeMetrics" title="=&gt; Set[akka.cluster.NodeMetrics]">nodeMetrics</a><span class="delimiter">)</span>.<span title="=&gt; Iterable[akka.cluster.NodeMetrics]">asJava</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   * The nodes that have seen current version of the Gossip.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class SeenChanged extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.SeenChanged.readResolve">SeenChanged</a><a href="#akka.cluster.ClusterEvent.SeenChanged.readResolve" title="Product" class="delimiter">(</a><a title="Boolean" id="akka.cluster.ClusterEvent;SeenChanged.convergence">convergence</a>: <span title="Boolean">Boolean</span>, <a title="Set[akka.actor.Address]" id="akka.cluster.ClusterEvent;SeenChanged.seenBy">seenBy</a>: <span title="Set[akka.actor.Address]">Set</span><span class="delimiter">[</span>Address<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class ReachabilityChanged extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.ReachabilityChanged.readResolve">ReachabilityChanged</a><a href="#akka.cluster.ClusterEvent.ReachabilityChanged.readResolve" title="Product" class="delimiter">(</a><a title="akka.cluster.Reachability" id="akka.cluster.ClusterEvent;ReachabilityChanged.reachability">reachability</a>: <a href="Reachability.scala.html#akka.cluster;Reachability" title="akka.cluster.Reachability">Reachability</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">case class</span> <a title="class CurrentInternalStats extends AnyRef with akka.cluster.ClusterEvent.ClusterDomainEvent with Product with Serializable" id="akka.cluster.ClusterEvent.CurrentInternalStats.readResolve">CurrentInternalStats</a><a href="#akka.cluster.ClusterEvent.CurrentInternalStats.readResolve" title="Product" class="delimiter">(</a>
    <a title="akka.cluster.GossipStats" id="akka.cluster.ClusterEvent;CurrentInternalStats.gossipStats">gossipStats</a>: <a href="ClusterDaemon.scala.html#akka.cluster;GossipStats" title="akka.cluster.GossipStats">GossipStats</a>,
    <a title="akka.cluster.VectorClockStats" id="akka.cluster.ClusterEvent;CurrentInternalStats.vclockStats">vclockStats</a>: <a href="ClusterDaemon.scala.html#akka.cluster;VectorClockStats" title="akka.cluster.VectorClockStats">VectorClockStats</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#akka.cluster.ClusterEvent;ClusterDomainEvent" title="akka.cluster.ClusterEvent.ClusterDomainEvent">ClusterDomainEvent</a>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]" id="akka.cluster.ClusterEvent.diffUnreachable">diffUnreachable</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffUnreachable.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffUnreachable.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]">Seq</span><span class="delimiter">[</span>UnreachableMember<span class="delimiter">]</span> =
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffUnreachable.newGossip" title="akka.cluster.Gossip">newGossip</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ClusterEvent.diffUnreachable.oldGossip" title="akka.cluster.Gossip">oldGossip</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Set[akka.cluster.UniqueAddress]" id="akka.cluster.ClusterEvent.diffUnreachable.oldUnreachableNodes">oldUnreachableNodes</a> = <a href="#akka.cluster.ClusterEvent.diffUnreachable.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachableOrTerminated" title="=&gt; Set[akka.cluster.UniqueAddress]">allUnreachableOrTerminated</a>
      <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffUnreachable.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachableOrTerminated" title="=&gt; Set[akka.cluster.UniqueAddress]">allUnreachableOrTerminated</a>.<span title="(pf: PartialFunction[akka.cluster.UniqueAddress,akka.cluster.ClusterEvent.UnreachableMember])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.ClusterEvent.UnreachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]])scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.UniqueAddress,akka.cluster.ClusterEvent.UnreachableMember] with Serializable" id="akka.cluster.ClusterEvent.diffUnreachable;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster.ClusterEvent.diffUnreachable;$anonfun.isDefinedAt.node">node</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#akka.cluster.ClusterEvent.diffUnreachable.oldUnreachableNodes" title="Set[akka.cluster.UniqueAddress]">oldUnreachableNodes</a>.<span title="(elem: akka.cluster.UniqueAddress)Boolean">contains</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffUnreachable;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span> ⇒
          <a href="#akka.cluster.ClusterEvent.UnreachableMember.readResolve" title="(member: akka.cluster.Member)akka.cluster.ClusterEvent.UnreachableMember">UnreachableMember</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffUnreachable.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffUnreachable;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.cluster.ClusterEvent.UnreachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.ClusterEvent.UnreachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]]">breakOut</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]" id="akka.cluster.ClusterEvent.diffReachable">diffReachable</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffReachable.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffReachable.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]">Seq</span><span class="delimiter">[</span>ReachableMember<span class="delimiter">]</span> =
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable.newGossip" title="akka.cluster.Gossip">newGossip</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ClusterEvent.diffReachable.oldGossip" title="akka.cluster.Gossip">oldGossip</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachable" title="=&gt; Set[akka.cluster.UniqueAddress]">allUnreachable</a>.<span title="(pf: PartialFunction[akka.cluster.UniqueAddress,akka.cluster.ClusterEvent.ReachableMember])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.ClusterEvent.ReachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]])scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.UniqueAddress,akka.cluster.ClusterEvent.ReachableMember] with Serializable" id="akka.cluster.ClusterEvent.diffReachable;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <a title="akka.cluster.UniqueAddress" id="akka.cluster.ClusterEvent.diffReachable;$anonfun.isDefinedAt.node">node</a> <span class="keyword">if</span> <a href="#akka.cluster.ClusterEvent.diffReachable.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.hasMember" title="(node: akka.cluster.UniqueAddress)Boolean">hasMember</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#akka.cluster.ClusterEvent.diffReachable.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.isReachable(d151f48ba5)" title="(node: akka.cluster.UniqueAddress)Boolean">isReachable</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span> ⇒
          <a href="#akka.cluster.ClusterEvent.ReachableMember.readResolve" title="(member: akka.cluster.Member)akka.cluster.ClusterEvent.ReachableMember">ReachableMember</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachable;$anonfun.isDefinedAt.node" title="akka.cluster.UniqueAddress">node</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,akka.cluster.ClusterEvent.ReachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.ClusterEvent.ReachableMember,scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]]">breakOut</span><span class="delimiter">)</span>

    <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.MemberEvent]" id="akka.cluster.ClusterEvent.diffMemberEvents">diffMemberEvents</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffMemberEvents.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffMemberEvents.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.MemberEvent]">Seq</span><span class="delimiter">[</span>MemberEvent<span class="delimiter">]</span> =
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.MemberEvent]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffMemberEvents.newGossip" title="akka.cluster.Gossip">newGossip</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.oldGossip" title="akka.cluster.Gossip">oldGossip</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster.ClusterEvent.diffMemberEvents.newMembers">newMembers</a> = <a href="#akka.cluster.ClusterEvent.diffMemberEvents.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <span title="(xs: scala.collection.GenTraversableOnce[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">--</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[akka.cluster.UniqueAddress,List[akka.cluster.Member]]" id="akka.cluster.ClusterEvent.diffMemberEvents.membersGroupedByAddress">membersGroupedByAddress</a> = <span title="(xs: scala.collection.immutable.SortedSet[akka.cluster.Member]*)List[scala.collection.immutable.SortedSet[akka.cluster.Member]]">List</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffMemberEvents.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>, <a href="#akka.cluster.ClusterEvent.diffMemberEvents.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a><span class="delimiter">)</span>.<span title="(implicit asTraversable: scala.collection.immutable.SortedSet[akka.cluster.Member] =&gt; scala.collection.GenTraversableOnce[akka.cluster.Member])List[akka.cluster.Member]">flatten</span>.<span title="(f: akka.cluster.Member =&gt; akka.cluster.UniqueAddress)scala.collection.immutable.Map[akka.cluster.UniqueAddress,List[akka.cluster.Member]]">groupBy</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffMemberEvents.membersGroupedByAddress.$anonfun.x$1" title="akka.cluster.Member">_</a>.<a href="Member.scala.html#akka.cluster;Member.uniqueAddress" title="=&gt; akka.cluster.UniqueAddress">uniqueAddress</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Iterable[akka.cluster.Member]" id="akka.cluster.ClusterEvent.diffMemberEvents.changedMembers">changedMembers</a> = <a href="#akka.cluster.ClusterEvent.diffMemberEvents.membersGroupedByAddress" title="scala.collection.immutable.Map[akka.cluster.UniqueAddress,List[akka.cluster.Member]]">membersGroupedByAddress</a> <span title="(pf: PartialFunction[(akka.cluster.UniqueAddress, List[akka.cluster.Member]),akka.cluster.Member])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[akka.cluster.UniqueAddress,List[akka.cluster.Member]],akka.cluster.Member,scala.collection.immutable.Iterable[akka.cluster.Member]])scala.collection.immutable.Iterable[akka.cluster.Member]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[(akka.cluster.UniqueAddress, List[akka.cluster.Member]),akka.cluster.Member] with Serializable" id="akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span>_, <a title="akka.cluster.Member" id="akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.newMember">newMember</a> :: <a title="akka.cluster.Member" id="akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.oldMember">oldMember</a> :: <span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.newMember" title="akka.cluster.Member">newMember</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.oldMember" title="akka.cluster.Member">oldMember</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> ⇒ <a href="#akka.cluster.ClusterEvent.diffMemberEvents.changedMembers;$anonfun.isDefinedAt.newMember" title="akka.cluster.Member">newMember</a>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberEvent with Product with Serializable]" id="akka.cluster.ClusterEvent.diffMemberEvents.memberEvents">memberEvents</a> = <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffMemberEvents.newMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">newMembers</a> <span title="(elems: scala.collection.GenTraversableOnce[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">++</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.changedMembers" title="scala.collection.immutable.Iterable[akka.cluster.Member]">changedMembers</a><span class="delimiter">)</span> <span title="(pf: PartialFunction[akka.cluster.Member,akka.cluster.ClusterEvent.MemberEvent with Product with Serializable])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.ClusterEvent.MemberEvent with Product with Serializable,scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberEvent with Product with Serializable]])scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberEvent with Product with Serializable]">collect</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[akka.cluster.Member,akka.cluster.ClusterEvent.MemberEvent with Product with Serializable] with Serializable" id="akka.cluster.ClusterEvent.diffMemberEvents.memberEvents;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="akka.cluster.Member">m</span> <span class="keyword">if</span> <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Up" title="akka.cluster.MemberStatus.Up.type">Up</a>      ⇒ <a href="#akka.cluster.ClusterEvent.MemberUp.readResolve" title="(member: akka.cluster.Member)akka.cluster.ClusterEvent.MemberUp">MemberUp</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="akka.cluster.Member">m</span> <span class="keyword">if</span> <span title="akka.cluster.Member">m</span>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Member.scala.html#akka.cluster.MemberStatus.Exiting" title="akka.cluster.MemberStatus.Exiting.type">Exiting</a> ⇒ <a href="#akka.cluster.ClusterEvent.MemberExited.readResolve" title="(member: akka.cluster.Member)akka.cluster.ClusterEvent.MemberExited">MemberExited</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.cluster.Member">m</span><span class="delimiter">)</span>
        <span class="comment">// no events for other transitions</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.SortedSet[akka.cluster.Member]" id="akka.cluster.ClusterEvent.diffMemberEvents.removedMembers">removedMembers</a> = <a href="#akka.cluster.ClusterEvent.diffMemberEvents.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a> <span title="(xs: scala.collection.GenTraversableOnce[akka.cluster.Member])scala.collection.immutable.SortedSet[akka.cluster.Member]">--</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberRemoved]" id="akka.cluster.ClusterEvent.diffMemberEvents.removedEvents">removedEvents</a> = <a href="#akka.cluster.ClusterEvent.diffMemberEvents.removedMembers" title="scala.collection.immutable.SortedSet[akka.cluster.Member]">removedMembers</a>.<span title="(f: akka.cluster.Member =&gt; akka.cluster.ClusterEvent.MemberRemoved)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.SortedSet[akka.cluster.Member],akka.cluster.ClusterEvent.MemberRemoved,scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberRemoved]])scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberRemoved]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.cluster.ClusterEvent.MemberRemoved,scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberRemoved]]" class="delimiter">(</span><a title="akka.cluster.Member" id="akka.cluster.ClusterEvent.diffMemberEvents.removedEvents.$anonfun.m">m</a> ⇒ <a href="#akka.cluster.ClusterEvent.MemberRemoved.readResolve" title="(member: akka.cluster.Member, previousStatus: akka.cluster.MemberStatus)akka.cluster.ClusterEvent.MemberRemoved">MemberRemoved</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffMemberEvents.removedEvents.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.copy" title="(status: akka.cluster.MemberStatus)akka.cluster.Member">copy</a><span class="delimiter">(</span>status = <a href="Member.scala.html#akka.cluster.MemberStatus.Removed" title="akka.cluster.MemberStatus.Removed.type">Removed</a><span class="delimiter">)</span>, <a href="#akka.cluster.ClusterEvent.diffMemberEvents.removedEvents.$anonfun.m" title="akka.cluster.Member">m</a>.<a href="Member.scala.html#akka.cluster;Member.status" title="=&gt; akka.cluster.MemberStatus">status</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span title="scala.collection.immutable.VectorBuilder[akka.cluster.ClusterEvent.MemberEvent]" class="keyword">new</span> <span title="scala.collection.immutable.VectorBuilder[akka.cluster.ClusterEvent.MemberEvent]">VectorBuilder</span><span class="delimiter">[</span>MemberEvent<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(xs: scala.collection.TraversableOnce[akka.cluster.ClusterEvent.MemberEvent])scala.collection.immutable.VectorBuilder[akka.cluster.ClusterEvent.MemberEvent]">++=</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.memberEvents" title="scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberEvent with Product with Serializable]">memberEvents</a> <span title="(xs: scala.collection.TraversableOnce[akka.cluster.ClusterEvent.MemberEvent])scala.collection.immutable.VectorBuilder[akka.cluster.ClusterEvent.MemberEvent]">++=</span> <a href="#akka.cluster.ClusterEvent.diffMemberEvents.removedEvents" title="scala.collection.immutable.Set[akka.cluster.ClusterEvent.MemberRemoved]">removedEvents</a><span class="delimiter">)</span>.<span title="()scala.collection.immutable.Vector[akka.cluster.ClusterEvent.MemberEvent]">result</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.LeaderChanged]" id="akka.cluster.ClusterEvent.diffLeader">diffLeader</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffLeader.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffLeader.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.LeaderChanged]">Seq</span><span class="delimiter">[</span>LeaderChanged<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[akka.cluster.UniqueAddress]" id="akka.cluster.ClusterEvent.diffLeader.newLeader">newLeader</a> = <a href="#akka.cluster.ClusterEvent.diffLeader.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.leader" title="=&gt; Option[akka.cluster.UniqueAddress]">leader</a>
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.LeaderChanged]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffLeader.newLeader" title="Option[akka.cluster.UniqueAddress]">newLeader</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster.ClusterEvent.diffLeader.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.leader" title="=&gt; Option[akka.cluster.UniqueAddress]">leader</a><span class="delimiter">)</span> <span title="(xs: akka.cluster.ClusterEvent.LeaderChanged*)List[akka.cluster.ClusterEvent.LeaderChanged]">List</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.LeaderChanged.readResolve" title="(leader: Option[akka.actor.Address])akka.cluster.ClusterEvent.LeaderChanged">LeaderChanged</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffLeader.newLeader" title="Option[akka.cluster.UniqueAddress]">newLeader</a>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)Option[akka.actor.Address]">map</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffLeader.$anonfun.x$2" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)Set[akka.cluster.ClusterEvent.RoleLeaderChanged]" id="akka.cluster.ClusterEvent.diffRolesLeader">diffRolesLeader</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffRolesLeader.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffRolesLeader.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: <span title="Set[akka.cluster.ClusterEvent.RoleLeaderChanged]">Set</span><span class="delimiter">[</span>RoleLeaderChanged<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.role">role</a> ← <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffRolesLeader.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.allRoles" title="=&gt; Set[String]">allRoles</a> <span title="(f: String =&gt; (String, Option[akka.cluster.UniqueAddress]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(String, Option[akka.cluster.UniqueAddress]),scala.collection.immutable.Set[(String, Option[akka.cluster.UniqueAddress])]])scala.collection.immutable.Set[(String, Option[akka.cluster.UniqueAddress])]">++</span> <a href="#akka.cluster.ClusterEvent.diffRolesLeader.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.allRoles" title="=&gt; Set[String]">allRoles</a><span class="delimiter">)</span>
      <a title="Option[akka.cluster.UniqueAddress]" id="akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.newLeader">newLeader</a> = <a href="#akka.cluster.ClusterEvent.diffRolesLeader.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.roleLeader" title="(role: String)Option[akka.cluster.UniqueAddress]">roleLeader</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.role" title="String">role</a><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.newLeader" title="Option[akka.cluster.UniqueAddress]">newLeader</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster.ClusterEvent.diffRolesLeader.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.roleLeader" title="(role: String)Option[akka.cluster.UniqueAddress]">roleLeader</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.role" title="String">role</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#akka.cluster.ClusterEvent.RoleLeaderChanged.readResolve" title="(role: String, leader: Option[akka.actor.Address])akka.cluster.ClusterEvent.RoleLeaderChanged">RoleLeaderChanged</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.role" title="String">role</a>, <a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.newLeader" title="Option[akka.cluster.UniqueAddress]">newLeader</a>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)Option[akka.actor.Address]">map</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffRolesLeader.$anonfun.$anonfun.x$3" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.SeenChanged]" id="akka.cluster.ClusterEvent.diffSeen">diffSeen</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffSeen.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffSeen.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.SeenChanged]">Seq</span><span class="delimiter">[</span>SeenChanged<span class="delimiter">]</span> =
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.SeenChanged]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffSeen.newGossip" title="akka.cluster.Gossip">newGossip</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ClusterEvent.diffSeen.oldGossip" title="akka.cluster.Gossip">oldGossip</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Boolean" id="akka.cluster.ClusterEvent.diffSeen.newConvergence">newConvergence</a> = <a href="#akka.cluster.ClusterEvent.diffSeen.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.convergence" title="=&gt; Boolean">convergence</a>
      <span class="keyword">val</span> <a title="Set[akka.cluster.UniqueAddress]" id="akka.cluster.ClusterEvent.diffSeen.newSeenBy">newSeenBy</a> = <a href="#akka.cluster.ClusterEvent.diffSeen.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenBy" title="=&gt; Set[akka.cluster.UniqueAddress]">seenBy</a>
      <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.SeenChanged]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffSeen.newConvergence" title="Boolean">newConvergence</a> <span title="(x: Boolean)Boolean">!=</span> <a href="#akka.cluster.ClusterEvent.diffSeen.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.convergence" title="=&gt; Boolean">convergence</a> <span title="(x: Boolean)Boolean">||</span> <a href="#akka.cluster.ClusterEvent.diffSeen.newSeenBy" title="Set[akka.cluster.UniqueAddress]">newSeenBy</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#akka.cluster.ClusterEvent.diffSeen.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenBy" title="=&gt; Set[akka.cluster.UniqueAddress]">seenBy</a><span class="delimiter">)</span>
        <span title="(xs: akka.cluster.ClusterEvent.SeenChanged*)List[akka.cluster.ClusterEvent.SeenChanged]">List</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.SeenChanged.readResolve" title="(convergence: Boolean, seenBy: Set[akka.actor.Address])akka.cluster.ClusterEvent.SeenChanged">SeenChanged</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffSeen.newConvergence" title="Boolean">newConvergence</a>, <a href="#akka.cluster.ClusterEvent.diffSeen.newSeenBy" title="Set[akka.cluster.UniqueAddress]">newSeenBy</a>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.actor.Address,Set[akka.actor.Address]])Set[akka.actor.Address]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.actor.Address,scala.collection.immutable.Set[akka.actor.Address]]" class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffSeen.$anonfun.x$6" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * INTERNAL API
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachabilityChanged]" id="akka.cluster.ClusterEvent.diffReachability">diffReachability</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffReachability.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster.ClusterEvent.diffReachability.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: immutable.<span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachabilityChanged]">Seq</span><span class="delimiter">[</span>ReachabilityChanged<span class="delimiter">]</span> =
    <span title="scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachabilityChanged]" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachability.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#akka.cluster.ClusterEvent.diffReachability.oldGossip" title="akka.cluster.Gossip">oldGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a><span class="delimiter">)</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="keyword">else</span> <span title="(xs: akka.cluster.ClusterEvent.ReachabilityChanged*)List[akka.cluster.ClusterEvent.ReachabilityChanged]">List</span><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.ReachabilityChanged.readResolve" title="(reachability: akka.cluster.Reachability)akka.cluster.ClusterEvent.ReachabilityChanged">ReachabilityChanged</a><span class="delimiter">(</span><a href="#akka.cluster.ClusterEvent.diffReachability.newGossip" title="akka.cluster.Gossip">newGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * INTERNAL API.
 * Responsible for domain event subscriptions and publishing of
 * domain events to event bus.
 */</span>
<span title="AnyRef" class="keyword">private</span><span class="delimiter">[</span>cluster<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class ClusterDomainEventPublisher extends AnyRef with akka.actor.Actor with akka.actor.ActorLogging with akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]" id="akka.cluster;ClusterDomainEventPublisher">ClusterDomainEventPublisher</a> <a href="#akka.cluster;ClusterDomainEventPublisher" title="akka.cluster.ClusterDomainEventPublisher" class="keyword">extends</a> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor" title="akka.actor.Actor">Actor</a> <span class="keyword">with</span> <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;ActorLogging" title="akka.actor.ActorLogging">ActorLogging</a>
  <span class="keyword">with</span> <a href="../../../actor/akka/dispatch/Mailbox.scala.html#akka.dispatch;RequiresMessageQueue" title="akka.dispatch.RequiresMessageQueue[akka.dispatch.UnboundedMessageQueueSemantics]">RequiresMessageQueue</a><span class="delimiter">[</span>UnboundedMessageQueueSemantics<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="ClusterDaemon.scala.html#akka.cluster.InternalClusterAction" title="akka.cluster.InternalClusterAction.type">InternalClusterAction</a>._

  <span class="keyword">var</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.latestGossip_=">latestGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a> = <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable, message: Option[Any])Unit" id="akka.cluster;ClusterDomainEventPublisher.preRestart">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="akka.cluster;ClusterDomainEventPublisher.preRestart.reason">reason</a>: <span title="Throwable">Throwable</span>, <a title="Option[Any]" id="akka.cluster;ClusterDomainEventPublisher.preRestart.message">message</a>: <span title="Option[Any]">Option</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="comment">// don't postStop when restarted, no children to stop</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterDomainEventPublisher.postStop">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="comment">// publish the final removed state before shutting down</span>
    <a href="#akka.cluster;ClusterDomainEventPublisher.publishChanges" title="(newGossip: akka.cluster.Gossip)Unit">publishChanges</a><span class="delimiter">(</span><a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="akka.cluster;ClusterDomainEventPublisher.receive">receive</a> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Any,Unit] with Serializable" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> PublishChanges<span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.newGossip">newGossip</a><span class="delimiter">)</span>            ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publishChanges" title="(newGossip: akka.cluster.Gossip)Unit">publishChanges</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="akka.cluster.ClusterEvent.CurrentInternalStats" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.currentStats">currentStats</a>: <a href="#akka.cluster.ClusterEvent.CurrentInternalStats.readResolve" title="akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a>   ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publishInternalStats" title="(currentStats: akka.cluster.ClusterEvent.CurrentInternalStats)Unit">publishInternalStats</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.currentStats" title="akka.cluster.ClusterEvent.CurrentInternalStats">currentStats</a><span class="delimiter">)</span>
    <span class="keyword">case</span> PublishCurrentClusterState<span class="delimiter">(</span><a title="Option[akka.actor.ActorRef]" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.receiver">receiver</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState" title="(receiver: Option[akka.actor.ActorRef])Unit">publishCurrentClusterState</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.receiver" title="Option[akka.actor.ActorRef]">receiver</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Subscribe<span class="delimiter">(</span><span title="akka.actor.ActorRef">subscriber</span>, <a title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.initMode">initMode</a>, <span title="Set[Class[_]]">to</span><span class="delimiter">)</span>  ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe" title="(subscriber: akka.actor.ActorRef, initMode: akka.cluster.ClusterEvent.SubscriptionInitialStateMode, to: Set[Class[_]])Unit">subscribe</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.ActorRef">subscriber</span>, <a href="#akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.initMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">initMode</a>, <span title="Set[Class[_]]">to</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Unsubscribe<span class="delimiter">(</span><span title="akka.actor.ActorRef">subscriber</span>, <span title="Option[Class[_]]">to</span><span class="delimiter">)</span>          ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.unsubscribe" title="(subscriber: akka.actor.ActorRef, to: Option[Class[_]])Unit">unsubscribe</a><span title="Boolean(true)" class="delimiter">(</span><span title="akka.actor.ActorRef">subscriber</span>, <span title="Option[Class[_]]">to</span><span class="delimiter">)</span>
    <span class="keyword">case</span> PublishEvent<span class="delimiter">(</span><a title="akka.cluster.ClusterEvent.ClusterDomainEvent" id="akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.event">event</a><span class="delimiter">)</span>                  ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publish" title="(event: AnyRef)Unit">publish</a><span title="Boolean(true)" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.receive;$anonfun.isDefinedAt.event" title="akka.cluster.ClusterEvent.ClusterDomainEvent">event</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; akka.event.EventStream" id="akka.cluster;ClusterDomainEventPublisher.eventStream">eventStream</a>: <a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream" title="akka.event.EventStream">EventStream</a> = <a href="../../../actor/akka/actor/Actor.scala.html#akka.actor;Actor.context" title="=&gt; akka.actor.ActorContext">context</a>.<a href="../../../actor/akka/actor/ActorCell.scala.html#akka.actor;ActorContext.system" title="=&gt; akka.actor.ActorSystem">system</a>.<a href="../../../actor/akka/actor/ActorSystem.scala.html#akka.actor;ActorSystem.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>

  <span class="comment">/**
   * The current snapshot state corresponding to latest gossip
   * to mimic what you would have seen if you were listening to the events.
   */</span>
  <span class="keyword">def</span> <a title="(receiver: Option[akka.actor.ActorRef])Unit" id="akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState">publishCurrentClusterState</a><span class="delimiter">(</span><a title="Option[akka.actor.ActorRef]" id="akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.receiver">receiver</a>: <span title="Option[akka.actor.ActorRef]">Option</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.ClusterEvent.CurrentClusterState" id="akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state">state</a> = <a href="#akka.cluster.ClusterEvent.CurrentClusterState.readResolve" title="(members: scala.collection.immutable.SortedSet[akka.cluster.Member], unreachable: Set[akka.cluster.Member], seenBy: Set[akka.actor.Address], leader: Option[akka.actor.Address], roleLeaderMap: Map[String,Option[akka.actor.Address]])akka.cluster.ClusterEvent.CurrentClusterState">CurrentClusterState</a><span class="delimiter">(</span>
      members = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.members" title="=&gt; scala.collection.immutable.SortedSet[akka.cluster.Member]">members</a>,
      unreachable = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.overview" title="=&gt; akka.cluster.GossipOverview">overview</a>.<a href="Gossip.scala.html#akka.cluster;GossipOverview.reachability" title="=&gt; akka.cluster.Reachability">reachability</a>.<a href="Reachability.scala.html#akka.cluster;Reachability.allUnreachableOrTerminated" title="=&gt; Set[akka.cluster.UniqueAddress]">allUnreachableOrTerminated</a> <span title="(f: akka.cluster.UniqueAddress =&gt; akka.cluster.Member)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.cluster.Member,Set[akka.cluster.Member]])Set[akka.cluster.Member]">map</span> <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.member" title="(node: akka.cluster.UniqueAddress)akka.cluster.Member">member</a>,
      seenBy = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.seenBy" title="=&gt; Set[akka.cluster.UniqueAddress]">seenBy</a>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[akka.cluster.UniqueAddress],akka.actor.Address,Set[akka.actor.Address]])Set[akka.actor.Address]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,akka.actor.Address,scala.collection.immutable.Set[akka.actor.Address]]" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.x$7" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>,
      leader = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.leader" title="=&gt; Option[akka.cluster.UniqueAddress]">leader</a>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)Option[akka.actor.Address]">map</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.x$8" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span>,
      roleLeaderMap = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.allRoles" title="=&gt; Set[String]">allRoles</a>.<span title="(f: String =&gt; (String, Option[akka.actor.Address]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(String, Option[akka.actor.Address]),Map[String,Option[akka.actor.Address]]])Map[String,Option[akka.actor.Address]]">map</span><span class="delimiter">(</span><a title="String" id="akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.r">r</a> ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.r" title="(x: String)ArrowAssoc[String]">r</a> <span title="(y: Option[akka.actor.Address])(String, Option[akka.actor.Address])">-&gt;</span> <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>.<a href="Gossip.scala.html#akka.cluster;Gossip.roleLeader" title="(role: String)Option[akka.cluster.UniqueAddress]">roleLeader</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.r" title="String">r</a><span class="delimiter">)</span>.<span title="(f: akka.cluster.UniqueAddress =&gt; akka.actor.Address)Option[akka.actor.Address]">map</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state.$anonfun.$anonfun.x$9" title="akka.cluster.UniqueAddress">_</a>.<a href="Member.scala.html#akka.cluster;UniqueAddress.address" title="=&gt; akka.actor.Address">address</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>collection.<span title="(implicit b: scala.collection.generic.CanBuildFrom[Nothing,(String, Option[akka.actor.Address]),Map[String,Option[akka.actor.Address]]])scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(String, Option[akka.actor.Address]),Map[String,Option[akka.actor.Address]]]">breakOut</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.receiver" title="Option[akka.actor.ActorRef]">receiver</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.ref">ref</a><span class="delimiter">)</span> ⇒ <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">ref</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state" title="akka.cluster.ClusterEvent.CurrentClusterState">state</a>
      <span class="keyword">case</span> <span title="None.type">None</span>      ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.publish" title="(event: AnyRef)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState.state" title="akka.cluster.ClusterEvent.CurrentClusterState">state</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(subscriber: akka.actor.ActorRef, initMode: akka.cluster.ClusterEvent.SubscriptionInitialStateMode, to: Set[Class[_]])Unit" id="akka.cluster;ClusterDomainEventPublisher.subscribe">subscribe</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster;ClusterDomainEventPublisher.subscribe.subscriber">subscriber</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode" id="akka.cluster;ClusterDomainEventPublisher.subscribe.initMode">initMode</a>: <a href="#akka.cluster.ClusterEvent;SubscriptionInitialStateMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">SubscriptionInitialStateMode</a>, <a title="Set[Class[_]]" id="akka.cluster;ClusterDomainEventPublisher.subscribe.to">to</a>: <span title="Set[Class[_]]">Set</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.initMode" title="akka.cluster.ClusterEvent.SubscriptionInitialStateMode">initMode</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#akka.cluster.ClusterEvent.InitialStateAsEvents.readResolve" title="akka.cluster.ClusterEvent.InitialStateAsEvents.type">InitialStateAsEvents</a> ⇒
        <span class="keyword">def</span> <a title="(event: AnyRef)Unit" id="akka.cluster;ClusterDomainEventPublisher.subscribe.pub">pub</a><span class="delimiter">(</span><a title="AnyRef" id="akka.cluster;ClusterDomainEventPublisher.subscribe.pub.event">event</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.to" title="Set[Class[_]]">to</a>.<span title="(p: Class[_] =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.pub.$anonfun.x$10" title="Class[_]">_</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.pub.event" title="AnyRef">event</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../../actor/akka/actor/package.scala.html#akka.actor.package.actorRef2Scala" title="implicit akka.actor.package.actorRef2Scala : (ref: akka.actor.ActorRef)akka.actor.ScalaActorRef">subscriber</a> <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ScalaActorRef.!" title="(message: Any)(implicit sender: akka.actor.ActorRef)Unit">!</a> <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.pub.event" title="AnyRef">event</a>
        <span class="delimiter">}</span>
        <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip, pub: AnyRef =&gt; Unit)Unit">publishDiff</a><span class="delimiter">(</span><a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.pub" title="(event: AnyRef)Unit">pub</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="#akka.cluster.ClusterEvent.InitialStateAsSnapshot.readResolve" title="akka.cluster.ClusterEvent.InitialStateAsSnapshot.type">InitialStateAsSnapshot</a> ⇒
        <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState" title="(receiver: Option[akka.actor.ActorRef])Unit">publishCurrentClusterState</a><span class="delimiter">(</span><span title="(x: akka.actor.ActorRef)Some[akka.actor.ActorRef]">Some</span><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.subscriber" title="akka.actor.ActorRef">subscriber</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.to" title="Set[Class[_]]">to</a> <span title="(f: Class[_] =&gt; Boolean)Unit">foreach</span> <span class="delimiter">{</span> <a href="#akka.cluster;ClusterDomainEventPublisher.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream.subscribe" title="(subscriber: akka.actor.ActorRef, channel: Class[_])Boolean">subscribe</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.subscriber" title="akka.actor.ActorRef">subscriber</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.subscribe.$anonfun.x$11" title="Class[_]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(subscriber: akka.actor.ActorRef, to: Option[Class[_]])Unit" id="akka.cluster;ClusterDomainEventPublisher.unsubscribe">unsubscribe</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="akka.cluster;ClusterDomainEventPublisher.unsubscribe.subscriber">subscriber</a>: <a href="../../../actor/akka/actor/ActorRef.scala.html#akka.actor;ActorRef" title="akka.actor.ActorRef">ActorRef</a>, <a title="Option[Class[_]]" id="akka.cluster;ClusterDomainEventPublisher.unsubscribe.to">to</a>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterDomainEventPublisher.unsubscribe.to" title="Option[Class[_]]">to</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type">None</span>    ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream.unsubscribe(134bd64d81)" title="(subscriber: akka.actor.ActorRef)Unit">unsubscribe</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.unsubscribe.subscriber" title="akka.actor.ActorRef">subscriber</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="Class[_]" id="akka.cluster;ClusterDomainEventPublisher.unsubscribe.c">c</a><span class="delimiter">)</span> ⇒ <a href="#akka.cluster;ClusterDomainEventPublisher.eventStream" title="=&gt; akka.event.EventStream">eventStream</a>.<a href="../../../actor/akka/event/EventStream.scala.html#akka.event;EventStream.unsubscribe(67e970a0c4)" title="(subscriber: akka.actor.ActorRef, channel: Class[_])Boolean">unsubscribe</a><span title="Unit" class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.unsubscribe.subscriber" title="akka.actor.ActorRef">subscriber</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.unsubscribe.c" title="Class[_]">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(newGossip: akka.cluster.Gossip)Unit" id="akka.cluster;ClusterDomainEventPublisher.publishChanges">publishChanges</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.publishChanges.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.publishChanges.oldGossip">oldGossip</a> = <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a>
    <span class="comment">// keep the latestGossip to be sent to new subscribers</span>
    <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="(x$1: akka.cluster.Gossip)Unit">latestGossip</a> = <a href="#akka.cluster;ClusterDomainEventPublisher.publishChanges.newGossip" title="akka.cluster.Gossip">newGossip</a>
    <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip, pub: AnyRef =&gt; Unit)Unit">publishDiff</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishChanges.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishChanges.newGossip" title="akka.cluster.Gossip">newGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publish" title="(event: AnyRef)Unit">publish</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip, pub: AnyRef =&gt; Unit)Unit" id="akka.cluster;ClusterDomainEventPublisher.publishDiff">publishDiff</a><span class="delimiter">(</span><a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip">oldGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="akka.cluster.Gossip" id="akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip">newGossip</a>: <a href="Gossip.scala.html#akka.cluster;Gossip" title="akka.cluster.Gossip">Gossip</a>, <a title="AnyRef =&gt; Unit" id="akka.cluster;ClusterDomainEventPublisher.publishDiff.pub">pub</a>: AnyRef ⇒ Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster.ClusterEvent.diffMemberEvents" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.MemberEvent]">diffMemberEvents</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.MemberEvent =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <a href="#akka.cluster.ClusterEvent.diffUnreachable" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.UnreachableMember]">diffUnreachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.UnreachableMember =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <a href="#akka.cluster.ClusterEvent.diffReachable" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachableMember]">diffReachable</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.ReachableMember =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <a href="#akka.cluster.ClusterEvent.diffLeader" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.LeaderChanged]">diffLeader</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.LeaderChanged =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <a href="#akka.cluster.ClusterEvent.diffRolesLeader" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)Set[akka.cluster.ClusterEvent.RoleLeaderChanged]">diffRolesLeader</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.RoleLeaderChanged =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <span class="comment">// publish internal SeenState for testing purposes</span>
    <a href="#akka.cluster.ClusterEvent.diffSeen" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.SeenChanged]">diffSeen</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.SeenChanged =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
    <a href="#akka.cluster.ClusterEvent.diffReachability" title="(oldGossip: akka.cluster.Gossip, newGossip: akka.cluster.Gossip)scala.collection.immutable.Seq[akka.cluster.ClusterEvent.ReachabilityChanged]">diffReachability</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.oldGossip" title="akka.cluster.Gossip">oldGossip</a>, <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.newGossip" title="akka.cluster.Gossip">newGossip</a><span class="delimiter">)</span> <span title="(f: akka.cluster.ClusterEvent.ReachabilityChanged =&gt; Unit)Unit">foreach</span> <a href="#akka.cluster;ClusterDomainEventPublisher.publishDiff.pub" title="AnyRef =&gt; Unit">pub</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(currentStats: akka.cluster.ClusterEvent.CurrentInternalStats)Unit" id="akka.cluster;ClusterDomainEventPublisher.publishInternalStats">publishInternalStats</a><span class="delimiter">(</span><a title="akka.cluster.ClusterEvent.CurrentInternalStats" id="akka.cluster;ClusterDomainEventPublisher.publishInternalStats.currentStats">currentStats</a>: <a href="#akka.cluster.ClusterEvent.CurrentInternalStats.readResolve" title="akka.cluster.ClusterEvent.CurrentInternalStats">CurrentInternalStats</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterDomainEventPublisher.publish" title="(event: AnyRef)Unit">publish</a><span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.publishInternalStats.currentStats" title="akka.cluster.ClusterEvent.CurrentInternalStats">currentStats</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(event: AnyRef)Unit" id="akka.cluster;ClusterDomainEventPublisher.publish">publish</a><span class="delimiter">(</span><a title="AnyRef" id="akka.cluster;ClusterDomainEventPublisher.publish.event">event</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#akka.cluster;ClusterDomainEventPublisher.eventStream" title="=&gt; akka.event.EventStream">eventStream</a> <a href="../../../actor/akka/event/EventBus.scala.html#akka.event;SubchannelClassification.publish(de973626dc)" title="(event: Object)Unit">publish</a> <a href="#akka.cluster;ClusterDomainEventPublisher.publish.event" title="AnyRef">event</a>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterDomainEventPublisher.publishStart">publishStart</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="=&gt; akka.cluster.Gossip">latestGossip</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#akka.cluster;ClusterDomainEventPublisher.clearState" title="()Unit">clearState</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#akka.cluster;ClusterDomainEventPublisher.publishCurrentClusterState" title="(receiver: Option[akka.actor.ActorRef])Unit">publishCurrentClusterState</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="akka.cluster;ClusterDomainEventPublisher.clearState">clearState</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#akka.cluster;ClusterDomainEventPublisher.latestGossip_=" title="(x$1: akka.cluster.Gossip)Unit">latestGossip</a> = <a href="Gossip.scala.html#akka.cluster.Gossip" title="akka.cluster.Gossip.type">Gossip</a>.<a href="Gossip.scala.html#akka.cluster.Gossip.empty" title="=&gt; akka.cluster.Gossip">empty</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
