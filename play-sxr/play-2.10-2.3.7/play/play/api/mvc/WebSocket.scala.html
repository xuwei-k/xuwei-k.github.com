<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>play/play/api/mvc/WebSocket.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2013 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> play.api.mvc

<span class="keyword">import</span> play.api.libs.json._
<span class="keyword">import</span> play.api.libs.iteratee._
<span class="keyword">import</span> play.api.libs.concurrent._

<span class="keyword">import</span> scala.concurrent.Future

<span class="keyword">import</span> play.core.<a href="../../core/system/Execution.scala.html#play.core.Execution" title="play.core.Execution.type">Execution</a>.<a href="../../core/system/Execution.scala.html#play.core.Execution.Implicits" title="play.core.Execution.Implicits.type">Implicits</a>.internalContext
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span> Props, ActorRef <span class="delimiter">}</span>
<span class="keyword">import</span> play.api.Application
<span class="keyword">import</span> scala.reflect.ClassTag
<span class="keyword">import</span> play.core.actors.<a href="../../core/actors/WebSocketActor.scala.html#play.core.actors.WebSocketActor" title="play.core.actors.WebSocketActor.type">WebSocketActor</a>._

<span class="comment">/**
 * A WebSocket handler.
 *
 * @tparam In the type of messages coming in
 * @tparam Out the type of messages going out
 * @param f the socket messages generator
 */</span>
<span class="keyword">case class</span> <a href="#play.api.mvc;WebSocket.productElement.x$1" title="class WebSocket[In, Out] extends AnyRef with play.api.mvc.Handler with Product with Serializable" id="play.api.mvc;WebSocket">WebSocket</a><span class="delimiter">[</span><a title="" id="play.api.mvc;WebSocket;In">In</a>, <a title="" id="play.api.mvc;WebSocket;Out">Out</a><span class="delimiter">]</span><a href="#play.api.mvc;WebSocket" title="Product" class="delimiter">(</a><a title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]]" id="play.api.mvc;WebSocket.f">f</a>: RequestHeader =&gt; Future<span class="delimiter">[</span>Either<span class="delimiter">[</span>Result, <span class="delimiter">(</span>Enumerator<span class="delimiter">[</span>In<span class="delimiter">]</span>, Iteratee<span class="delimiter">[</span>Out, Unit<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[In]" id="play.api.mvc;WebSocket.inFormatter">inFormatter</a>: WebSocket.<a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[In]">FrameFormatter</a><span class="delimiter">[</span>In<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[Out]" id="play.api.mvc;WebSocket.outFormatter">outFormatter</a>: WebSocket.<a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[Out]">FrameFormatter</a><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Action.scala.html#play.api.mvc;Handler" title="play.api.mvc.Handler">Handler</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="In" id="play.api.mvc;WebSocket;FramesIn">FramesIn</a> = <a href="#play.api.mvc;WebSocket;In" title="In">In</a>
  <span class="keyword">type</span> <a title="Out" id="play.api.mvc;WebSocket;FramesOut">FramesOut</a> = <a href="#play.api.mvc;WebSocket;Out" title="Out">Out</a>

  <span class="comment">/**
   * Returns itself, for better support in the routes file.
   *
   * @return itself
   */</span>
  <span class="keyword">def</span> <a title="()play.api.mvc.WebSocket[In,Out]" id="play.api.mvc;WebSocket.apply">apply</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[In,Out]" class="keyword">this</a>

<span class="delimiter">}</span>

<span class="comment">/**
 * Helper utilities to generate WebSocket results.
 */</span>
<span class="keyword">object</span> <a title="play.api.mvc.WebSocket.type" id="play.api.mvc.WebSocket.readResolve">WebSocket</a> <a href="#play.api.mvc.WebSocket.readResolve" title="play.api.mvc.WebSocket.type" class="delimiter">{</a>

  <span class="comment">/**
   * Typeclass to handle WebSocket frames format.
   */</span>
  <span class="keyword">trait</span> <a title="trait FrameFormatter[A] extends AnyRef" id="play.api.mvc.WebSocket;FrameFormatter">FrameFormatter</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket;FrameFormatter;A">A</a><span class="delimiter">]</span> <span class="delimiter">{</span>

    <span class="comment">/**
     * Transform a FrameFormatter[A] to a FrameFormatter[B]
     */</span>
    <span class="keyword">def</span> <a title="[B](fba: B =&gt; A, fab: A =&gt; B)play.api.mvc.WebSocket.FrameFormatter[B]" id="play.api.mvc.WebSocket;FrameFormatter.transform">transform</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket;FrameFormatter.transform;B">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="B =&gt; A" id="play.api.mvc.WebSocket;FrameFormatter.transform.fba">fba</a>: B =&gt; A, <a title="A =&gt; B" id="play.api.mvc.WebSocket;FrameFormatter.transform.fab">fab</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[B]">FrameFormatter</a><span class="delimiter">[</span>B<span class="delimiter">]</span>

  <span class="delimiter">}</span>

  <span class="comment">/**
   * Defaults frame formatters.
   */</span>
  <span class="keyword">object</span> <a title="play.api.mvc.WebSocket.FrameFormatter.type" id="play.api.mvc.WebSocket.FrameFormatter">FrameFormatter</a> <a href="#play.api.mvc.WebSocket.FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter.type" class="delimiter">{</a>

    <span class="comment">/**
     * String WebSocket frames.
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[String]" id="play.api.mvc.WebSocket.FrameFormatter.stringFrame">stringFrame</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[String]">FrameFormatter</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = play.core.server.websocket.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames" title="play.core.server.websocket.Frames.type">Frames</a>.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames.textFrame" title="=&gt; play.core.server.websocket.FrameFormatter[String]">textFrame</a>

    <span class="comment">/**
     * Array[Byte] WebSocket frames.
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[Array[Byte]]" id="play.api.mvc.WebSocket.FrameFormatter.byteArrayFrame">byteArrayFrame</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[Array[Byte]]">FrameFormatter</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> = play.core.server.websocket.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames" title="play.core.server.websocket.Frames.type">Frames</a>.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames.binaryFrame" title="=&gt; play.core.server.websocket.FrameFormatter[Array[Byte]]">binaryFrame</a>

    <span class="comment">/**
     * Either String or Array[Byte] WebSocket frames.
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[Either[String,Array[Byte]]]" id="play.api.mvc.WebSocket.FrameFormatter.mixedFrame">mixedFrame</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[Either[String,Array[Byte]]]">FrameFormatter</a><span class="delimiter">[</span>Either<span class="delimiter">[</span>String, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span> = play.core.server.websocket.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames" title="play.core.server.websocket.Frames.type">Frames</a>.<a href="../../core/server/websocket/Frame.scala.html#play.core.server.websocket.Frames.mixedFrame" title="=&gt; play.core.server.websocket.FrameFormatter[Either[String,Array[Byte]]]">mixedFrame</a>

    <span class="comment">/**
     * Json WebSocket frames.
     */</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="play.api.mvc.WebSocket.FrameFormatter[play.api.libs.json.JsValue]" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(27eb2dd00f)">jsonFrame</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[play.api.libs.json.JsValue]">FrameFormatter</a><span class="delimiter">[</span>JsValue<span class="delimiter">]</span> = <a href="#play.api.mvc.WebSocket.FrameFormatter.stringFrame" title="=&gt; play.api.mvc.WebSocket.FrameFormatter[String]">stringFrame</a>.<a href="#play.api.mvc.WebSocket;FrameFormatter.transform" title="(fba: play.api.libs.json.JsValue =&gt; String, fab: String =&gt; play.api.libs.json.JsValue)play.api.mvc.WebSocket.FrameFormatter[play.api.libs.json.JsValue]">transform</a><span class="delimiter">(</span><a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json" title="play.api.libs.json.Json.type">Json</a>.<a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json.stringify" title="(json: play.api.libs.json.JsValue)String">stringify</a>, <a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json" title="play.api.libs.json.Json.type">Json</a>.<a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json.parse(07297a39f6)" title="(input: String)play.api.libs.json.JsValue">parse</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Json WebSocket frames, parsed into/formatted from objects of type A.
     */</span>
    <span class="keyword">def</span> <a title="[A](implicit evidence$1: play.api.libs.json.Format[A])play.api.mvc.WebSocket.FrameFormatter[A]" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1)">jsonFrame</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1);A">A</a>: Format<span class="delimiter">]</span>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]">FrameFormatter</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(27eb2dd00f)" title="=&gt; play.api.mvc.WebSocket.FrameFormatter[play.api.libs.json.JsValue]">jsonFrame</a>.<a href="#play.api.mvc.WebSocket;FrameFormatter.transform" title="[B](fba: B =&gt; play.api.libs.json.JsValue, fab: play.api.libs.json.JsValue =&gt; B)play.api.mvc.WebSocket.FrameFormatter[B]">transform</a><span title="(fba: A =&gt; play.api.libs.json.JsValue, fab: play.api.libs.json.JsValue =&gt; A)play.api.mvc.WebSocket.FrameFormatter[A]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1);A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span>
      <a title="A" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.out">out</a> =&gt; <a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json" title="play.api.libs.json.Json.type">Json</a>.<a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json.toJson(09a84969e8)" title="(o: A)(implicit tjs: play.api.libs.json.Writes[A])play.api.libs.json.JsValue">toJson</a><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).evidence$1" title="play.api.libs.json.Format[A]" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.out" title="A">out</a><span class="delimiter">)</span>,
      <a title="play.api.libs.json.JsValue" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.in">in</a> =&gt; <a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json" title="play.api.libs.json.Json.type">Json</a>.<a href="../../../../play-json/play/api/libs/json/Json.scala.html#play.api.libs.json.Json.fromJson(46c5ed0a71)" title="[T](json: play.api.libs.json.JsValue)(implicit fjs: play.api.libs.json.Reads[T])play.api.libs.json.JsResult[T]">fromJson</a><span title="(json: play.api.libs.json.JsValue)(implicit fjs: play.api.libs.json.Reads[A])play.api.libs.json.JsResult[A]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1);A" title="A">A</a><span class="delimiter">]</span><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).evidence$1" title="play.api.libs.json.Format[A]" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.in" title="play.api.libs.json.JsValue">in</a><span class="delimiter">)</span>.<a href="../../../../play-json/play/api/libs/json/JsResult.scala.html#play.api.libs.json;JsResult.fold" title="(invalid: Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])] =&gt; A, valid: A =&gt; A)A">fold</a><span class="delimiter">(</span>
        <a title="Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.$anonfun.error">error</a> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)RuntimeException" class="keyword">new</span> <span title="RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="String(&quot;Error parsing JSON: &quot;)" class="string">&quot;Error parsing JSON: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.$anonfun.error" title="Seq[(play.api.libs.json.JsPath, Seq[play.api.data.validation.ValidationError])]">error</a><span class="delimiter">)</span>,
        <a title="A" id="play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.$anonfun.a">a</a> =&gt; <a href="#play.api.mvc.WebSocket.FrameFormatter.jsonFrame(d2eb37b0c1).$anonfun.$anonfun.a" title="A">a</a>
      <span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Accepts a WebSocket using the given inbound/outbound channels.
   */</span>
  <span class="keyword">def</span> <a title="[A](f: play.api.mvc.RequestHeader =&gt; (play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A]))(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" id="play.api.mvc.WebSocket.using">using</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.using;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; (play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])" id="play.api.mvc.WebSocket.using.f">f</a>: RequestHeader =&gt; <span class="delimiter">(</span>Iteratee<span class="delimiter">[</span>A, _<span class="delimiter">]</span>, Enumerator<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[A]" id="play.api.mvc.WebSocket.using.frameFormatter">frameFormatter</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]">FrameFormatter</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[A,A]">WebSocket</a><span class="delimiter">[</span>A, A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc.WebSocket.tryAccept" title="[A](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]">tryAccept</a><span title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.using;A" title="A">A</a><span class="delimiter">]</span><a href="#play.api.mvc.WebSocket.using.frameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.using.f" title="play.api.mvc.RequestHeader =&gt; (play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])">f</a>.<span title="(g: ((play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])) =&gt; scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">andThen</span><span class="delimiter">(</span><a title="(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])" id="play.api.mvc.WebSocket.using.$anonfun.handler">handler</a> =&gt; <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])])scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">successful</span><span class="delimiter">(</span><span title="(b: (play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A]))scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">Right</span><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.using.$anonfun.handler" title="(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])">handler</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a WebSocket that will adapt the incoming stream and send it back out.
   */</span>
  <span class="keyword">def</span> <a title="[A](f: play.api.mvc.RequestHeader =&gt; play.api.libs.iteratee.Enumeratee[A,A])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" id="play.api.mvc.WebSocket.adapter">adapter</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.adapter;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; play.api.libs.iteratee.Enumeratee[A,A]" id="play.api.mvc.WebSocket.adapter.f">f</a>: RequestHeader =&gt; Enumeratee<span class="delimiter">[</span>A, A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[A]" id="play.api.mvc.WebSocket.adapter.frameFormatter">frameFormatter</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]">FrameFormatter</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[A,A]">WebSocket</a><span class="delimiter">[</span>A, A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc;WebSocket" title="[In, Out](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[In], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[Out])play.api.mvc.WebSocket[In,Out]">WebSocket</a><span title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[A], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.adapter;A" title="A">A</a>, <a href="#play.api.mvc.WebSocket.adapter;A" title="A">A</a><span class="delimiter">]</span><a href="#play.api.mvc.WebSocket.adapter.frameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]" class="delimiter">(</a><a title="play.api.mvc.RequestHeader" id="play.api.mvc.WebSocket.adapter.$anonfun.h">h</a> =&gt; <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: scala.util.Right[Nothing,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit])scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]]">successful</span><span class="delimiter">(</span><span title="(b: (play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit)scala.util.Right[Nothing,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="play.api.libs.iteratee.Enumerator[A]" id="play.api.mvc.WebSocket.adapter.$anonfun.$anonfun.in">in</a>, <a title="play.api.libs.iteratee.Iteratee[A,Unit]" id="play.api.mvc.WebSocket.adapter.$anonfun.$anonfun.out">out</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span> <a href="#play.api.mvc.WebSocket.adapter.$anonfun.$anonfun.in" title="play.api.libs.iteratee.Enumerator[A]">in</a> <a href="../../../../play-iteratees/play/api/libs/iteratee/Enumerator.scala.html#play.api.libs.iteratee;Enumerator.&>" title="(enumeratee: play.api.libs.iteratee.Enumeratee[A,A])play.api.libs.iteratee.Enumerator[A]">&amp;&gt;</a> <a href="#play.api.mvc.WebSocket.adapter.f" title="(v1: play.api.mvc.RequestHeader)play.api.libs.iteratee.Enumeratee[A,A]">f</a><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.adapter.$anonfun.h" title="play.api.mvc.RequestHeader">h</a><span class="delimiter">)</span> <a href="../../../../play-iteratees/play/api/libs/iteratee/Enumerator.scala.html#play.api.libs.iteratee;Enumerator.|>>" title="(i: play.api.libs.iteratee.Iteratee[A,Unit])scala.concurrent.Future[play.api.libs.iteratee.Iteratee[A,Unit]]">|&gt;&gt;</a> <a href="#play.api.mvc.WebSocket.adapter.$anonfun.$anonfun.out" title="play.api.libs.iteratee.Iteratee[A,Unit]">out</a> <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Accepts a WebSocket using the given inbound/outbound channels asynchronously.
   */</span>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use WebSocket.tryAccept instead&quot;</span>, <span class="string">&quot;2.3&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[A](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" id="play.api.mvc.WebSocket.async">async</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.async;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]" id="play.api.mvc.WebSocket.async.f">f</a>: RequestHeader =&gt; Future<span class="delimiter">[</span><span class="delimiter">(</span>Iteratee<span class="delimiter">[</span>A, _<span class="delimiter">]</span>, Enumerator<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[A]" id="play.api.mvc.WebSocket.async.frameFormatter">frameFormatter</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]">FrameFormatter</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[A,A]">WebSocket</a><span class="delimiter">[</span>A, A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc.WebSocket.tryAccept" title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]">tryAccept</a><a href="#play.api.mvc.WebSocket.async.frameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.async.f" title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">f</a>.<span title="(g: scala.concurrent.Future[(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])] =&gt; scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">andThen</span><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.async.$anonfun.x$1" title="scala.concurrent.Future[(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">_</a>.<span title="(f: ((play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])) =&gt; scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">map</span><a href="../../core/system/Execution.scala.html#play.core.Execution.Implicits.internalContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">(</a><span title="=&gt; util.Right.type">Right</span>.<a href="#play.api.mvc.WebSocket.async.$anonfun.$anonfun.b" title="(b: (play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A]))scala.util.Right[Nothing,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">apply</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates an action that will either reject the websocket with the given result, or will be handled by the given
   * inbound and outbound channels, asynchronously
   */</span>
  <span class="keyword">def</span> <a title="[A](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]])(implicit frameFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" id="play.api.mvc.WebSocket.tryAccept">tryAccept</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.tryAccept;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]" id="play.api.mvc.WebSocket.tryAccept.f">f</a>: RequestHeader =&gt; Future<span class="delimiter">[</span>Either<span class="delimiter">[</span>Result, <span class="delimiter">(</span>Iteratee<span class="delimiter">[</span>A, _<span class="delimiter">]</span>, Enumerator<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[A]" id="play.api.mvc.WebSocket.tryAccept.frameFormatter">frameFormatter</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]">FrameFormatter</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[A,A]">WebSocket</a><span class="delimiter">[</span>A, A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc;WebSocket" title="[In, Out](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[In], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[Out])play.api.mvc.WebSocket[In,Out]">WebSocket</a><span title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[A], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[A])play.api.mvc.WebSocket[A,A]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.tryAccept;A" title="A">A</a>, <a href="#play.api.mvc.WebSocket.tryAccept;A" title="A">A</a><span class="delimiter">]</span><a href="#play.api.mvc.WebSocket.tryAccept.frameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[A]" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.tryAccept.f" title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">f</a>.<span title="(g: scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]] =&gt; scala.concurrent.Future[Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]])play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]]">andThen</span><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.x$2" title="scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]]">_</a>.<span title="(f: Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])] =&gt; Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]]">map</span> <a href="../../core/system/Execution.scala.html#play.core.Execution.Implicits.internalContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">{</a> <a title="Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]" id="play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.resultOrSocket">resultOrSocket</a> =&gt;
      <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.resultOrSocket" title="Either[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">resultOrSocket</a>.<span title="=&gt; scala.util.Either.RightProjection[play.api.mvc.Result,(play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])]">right</span>.<span title="(f: ((play.api.libs.iteratee.Iteratee[A, _], play.api.libs.iteratee.Enumerator[A])) =&gt; (play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit)Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit]">map</span> <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.x0$1" title="(play.api.libs.iteratee.Enumerator[A], play.api.libs.iteratee.Iteratee[A,Unit]) =&gt; Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[A, Any]" id="play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.readIn">readIn</a>, <a title="play.api.libs.iteratee.Enumerator[A]" id="play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.writeOut">writeOut</a><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a title="play.api.libs.iteratee.Enumerator[A]" id="play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.$anonfun.e">e</a>, <a title="play.api.libs.iteratee.Iteratee[A,Unit]" id="play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.$anonfun.i">i</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span> <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.$anonfun.e" title="play.api.libs.iteratee.Enumerator[A]">e</a> <a href="../../../../play-iteratees/play/api/libs/iteratee/Enumerator.scala.html#play.api.libs.iteratee;Enumerator.|>>" title="(i: play.api.libs.iteratee.Iteratee[A,Any])scala.concurrent.Future[play.api.libs.iteratee.Iteratee[A,Any]]">|&gt;&gt;</a> <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.readIn" title="play.api.libs.iteratee.Iteratee[A, Any]">readIn</a>; <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.writeOut" title="play.api.libs.iteratee.Enumerator[A]">writeOut</a> <a href="../../../../play-iteratees/play/api/libs/iteratee/Enumerator.scala.html#play.api.libs.iteratee;Enumerator.|>>" title="(i: play.api.libs.iteratee.Iteratee[A,Unit])scala.concurrent.Future[play.api.libs.iteratee.Iteratee[A,Unit]]">|&gt;&gt;</a> <a href="#play.api.mvc.WebSocket.tryAccept.$anonfun.$anonfun.$anonfun.$anonfun.i" title="play.api.libs.iteratee.Iteratee[A,Unit]">i</a> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A function that, given an actor to send upstream messages to, returns actor props to create an actor to handle
   * the WebSocket
   */</span>
  <span class="keyword">type</span> <a title="akka.actor.ActorRef =&gt; akka.actor.Props" id="play.api.mvc.WebSocket;HandlerProps">HandlerProps</a> = ActorRef =&gt; Props

  <span class="comment">/**
   * Create a WebSocket that will pass messages to/from the actor created by the given props.
   *
   * Given a request and an actor ref to send messages to, the function passed should return the props for an actor
   * to create to handle this WebSocket.
   *
   * For example:
   *
   * {{{
   *   def webSocket = WebSocket.acceptWithActor[JsValue, JsValue] { req =&gt; out =&gt;
   *     MyWebSocketActor.props(out)
   *   }
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="[In, Out](f: play.api.mvc.RequestHeader =&gt; (akka.actor.ActorRef =&gt; akka.actor.Props))(implicit in: play.api.mvc.WebSocket.FrameFormatter[In], implicit out: play.api.mvc.WebSocket.FrameFormatter[Out], implicit app: play.api.Application, implicit outMessageType: scala.reflect.ClassTag[Out])play.api.mvc.WebSocket[In,Out]" id="play.api.mvc.WebSocket.acceptWithActor">acceptWithActor</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.acceptWithActor;In">In</a>, <a title="" id="play.api.mvc.WebSocket.acceptWithActor;Out">Out</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; (akka.actor.ActorRef =&gt; akka.actor.Props)" id="play.api.mvc.WebSocket.acceptWithActor.f">f</a>: RequestHeader =&gt; HandlerProps<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[In]" id="play.api.mvc.WebSocket.acceptWithActor.in">in</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[In]">FrameFormatter</a><span class="delimiter">[</span>In<span class="delimiter">]</span>,
    <a title="play.api.mvc.WebSocket.FrameFormatter[Out]" id="play.api.mvc.WebSocket.acceptWithActor.out">out</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[Out]">FrameFormatter</a><span class="delimiter">[</span>Out<span class="delimiter">]</span>, <a title="play.api.Application" id="play.api.mvc.WebSocket.acceptWithActor.app">app</a>: <a href="../Application.scala.html#play.api;Application" title="play.api.Application">Application</a>, <a title="scala.reflect.ClassTag[Out]" id="play.api.mvc.WebSocket.acceptWithActor.outMessageType">outMessageType</a>: <span title="scala.reflect.ClassTag[Out]">ClassTag</span><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[In,Out]">WebSocket</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc.WebSocket.tryAcceptWithActor" title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]])(implicit in: play.api.mvc.WebSocket.FrameFormatter[In], implicit out: play.api.mvc.WebSocket.FrameFormatter[Out], implicit app: play.api.Application, implicit outMessageType: scala.reflect.ClassTag[Out])play.api.mvc.WebSocket[In,Out]">tryAcceptWithActor</a> <a href="#play.api.mvc.WebSocket.acceptWithActor.in" title="play.api.mvc.WebSocket.FrameFormatter[In]" class="delimiter">{</a> <a title="play.api.mvc.RequestHeader" id="play.api.mvc.WebSocket.acceptWithActor.$anonfun.req">req</a> =&gt;
      <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: scala.util.Right[Nothing,akka.actor.ActorRef =&gt; akka.actor.Props])scala.concurrent.Future[scala.util.Right[Nothing,akka.actor.ActorRef =&gt; akka.actor.Props]]">successful</span><span class="delimiter">(</span><span title="(b: akka.actor.ActorRef =&gt; akka.actor.Props)scala.util.Right[Nothing,akka.actor.ActorRef =&gt; akka.actor.Props]">Right</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="play.api.mvc.WebSocket.acceptWithActor.$anonfun.$anonfun.actorRef">actorRef</a><span class="delimiter">)</span> =&gt; <a href="#play.api.mvc.WebSocket.acceptWithActor.f" title="(v1: play.api.mvc.RequestHeader)akka.actor.ActorRef =&gt; akka.actor.Props">f</a><span title="(v1: akka.actor.ActorRef)akka.actor.Props" class="delimiter">(</span><a href="#play.api.mvc.WebSocket.acceptWithActor.$anonfun.req" title="play.api.mvc.RequestHeader">req</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.acceptWithActor.$anonfun.$anonfun.actorRef" title="akka.actor.ActorRef">actorRef</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Create a WebSocket that will pass messages to/from the actor created by the given props asynchronously.
   *
   * Given a request, this method should return a future of either:
   *
   * - A result to reject the WebSocket with, or
   * - A function that will take the sending actor, and create the props that describe the actor to handle this
   * WebSocket
   *
   * For example:
   *
   * {{{
   *   def subscribe = WebSocket.tryAcceptWithActor[JsValue, JsValue] { req =&gt;
   *     val isAuthenticated: Future[Boolean] = authenticate(req)
   *     isAuthenticated.map {
   *       case false =&gt; Left(Forbidden)
   *       case true =&gt; Right(MyWebSocketActor.props)
   *     }
   *   }
   * }}}
   */</span>
  <span class="keyword">def</span> <a title="[In, Out](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]])(implicit in: play.api.mvc.WebSocket.FrameFormatter[In], implicit out: play.api.mvc.WebSocket.FrameFormatter[Out], implicit app: play.api.Application, implicit outMessageType: scala.reflect.ClassTag[Out])play.api.mvc.WebSocket[In,Out]" id="play.api.mvc.WebSocket.tryAcceptWithActor">tryAcceptWithActor</a><span class="delimiter">[</span><a title="" id="play.api.mvc.WebSocket.tryAcceptWithActor;In">In</a>, <a title="" id="play.api.mvc.WebSocket.tryAcceptWithActor;Out">Out</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]]" id="play.api.mvc.WebSocket.tryAcceptWithActor.f">f</a>: RequestHeader =&gt; Future<span class="delimiter">[</span>Either<span class="delimiter">[</span>Result, HandlerProps<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.mvc.WebSocket.FrameFormatter[In]" id="play.api.mvc.WebSocket.tryAcceptWithActor.in">in</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[In]">FrameFormatter</a><span class="delimiter">[</span>In<span class="delimiter">]</span>,
    <a title="play.api.mvc.WebSocket.FrameFormatter[Out]" id="play.api.mvc.WebSocket.tryAcceptWithActor.out">out</a>: <a href="#play.api.mvc.WebSocket;FrameFormatter" title="play.api.mvc.WebSocket.FrameFormatter[Out]">FrameFormatter</a><span class="delimiter">[</span>Out<span class="delimiter">]</span>, <a title="play.api.Application" id="play.api.mvc.WebSocket.tryAcceptWithActor.app">app</a>: <a href="../Application.scala.html#play.api;Application" title="play.api.Application">Application</a>, <a title="scala.reflect.ClassTag[Out]" id="play.api.mvc.WebSocket.tryAcceptWithActor.outMessageType">outMessageType</a>: <span title="scala.reflect.ClassTag[Out]">ClassTag</span><span class="delimiter">[</span>Out<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.mvc;WebSocket" title="play.api.mvc.WebSocket[In,Out]">WebSocket</a><span class="delimiter">[</span>In, Out<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.api.mvc;WebSocket" title="[In, Out](f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[In], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[Out])play.api.mvc.WebSocket[In,Out]">WebSocket</a><span title="(f: play.api.mvc.RequestHeader =&gt; scala.concurrent.Future[Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]])(implicit inFormatter: play.api.mvc.WebSocket.FrameFormatter[In], implicit outFormatter: play.api.mvc.WebSocket.FrameFormatter[Out])play.api.mvc.WebSocket[In,Out]" class="delimiter">[</span><a href="#play.api.mvc.WebSocket.tryAcceptWithActor;In" title="In">In</a>, <a href="#play.api.mvc.WebSocket.tryAcceptWithActor;Out" title="Out">Out</a><span class="delimiter">]</span> <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.in" title="play.api.mvc.WebSocket.FrameFormatter[In]" class="delimiter">{</a> <a title="play.api.mvc.RequestHeader" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.request">request</a> =&gt;
      <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.f" title="(v1: play.api.mvc.RequestHeader)scala.concurrent.Future[Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]]">f</a><span class="delimiter">(</span><a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.request" title="play.api.mvc.RequestHeader">request</a><span class="delimiter">)</span>.<span title="(f: Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props] =&gt; Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit])(implicit executor: scala.concurrent.ExecutionContext)scala.concurrent.Future[Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]]">map</span> <a href="../../core/system/Execution.scala.html#play.core.Execution.Implicits.internalContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">{</a> <a title="Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.resultOrProps">resultOrProps</a> =&gt;
        <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.resultOrProps" title="Either[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]">resultOrProps</a>.<span title="=&gt; scala.util.Either.RightProjection[play.api.mvc.Result,akka.actor.ActorRef =&gt; akka.actor.Props]">right</span>.<span title="(f: (akka.actor.ActorRef =&gt; akka.actor.Props) =&gt; ((play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit))Serializable with Product with scala.util.Either[play.api.mvc.Result,(play.api.libs.iteratee.Enumerator[In], play.api.libs.iteratee.Iteratee[Out,Unit]) =&gt; Unit]">map</span> <span class="delimiter">{</span> <a title="akka.actor.ActorRef =&gt; akka.actor.Props" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.props">props</a> =&gt;
          <span class="delimiter">(</span><a title="play.api.libs.iteratee.Enumerator[In]" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.enumerator">enumerator</a>, <a title="play.api.libs.iteratee.Iteratee[Out,Unit]" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.iteratee">iteratee</a><span class="delimiter">)</span> =&gt;
            <a href="../../core/actors/WebSocketActor.scala.html#play.core.actors.WebSocketActor.WebSocketsExtension" title="(system: akka.actor.ActorSystem)play.core.actors.WebSocketActor.WebSocketsExtension">WebSocketsExtension</a><span class="delimiter">(</span><a href="../libs/concurrent/Akka.scala.html#play.api.libs.concurrent.Akka" title="play.api.libs.concurrent.Akka.type">Akka</a>.<a href="../libs/concurrent/Akka.scala.html#play.api.libs.concurrent.Akka.system" title="(implicit app: play.api.Application)akka.actor.ActorSystem">system</a><span class="delimiter">)</span>.<a href="../../core/actors/WebSocketActor.scala.html#play.core.actors.WebSocketActor;WebSocketsExtension.actor" title="akka.actor.ScalaActorRef" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.qual$1">actor</a> <a title="akka.actor.ActorRef" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.x$4">!</a>
              <a href="../../core/actors/WebSocketActor.scala.html#play.core.actors.WebSocketActor.WebSocketsActor" title="play.core.actors.WebSocketActor.WebSocketsActor.type">WebSocketsActor</a>.<a href="../../core/actors/WebSocketActor.scala.html#play.core.actors.WebSocketActor.WebSocketsActor;Connect" title="(requestId: Long, enumerator: play.api.libs.iteratee.Enumerator[In], iteratee: play.api.libs.iteratee.Iteratee[Out,Unit], createHandler: akka.actor.ActorRef =&gt; akka.actor.Props)(implicit messageType: scala.reflect.ClassTag[Out])play.core.actors.WebSocketActor.WebSocketsActor.Connect[In,Out]">Connect</a><a href="#play.api.mvc.WebSocket.tryAcceptWithActor.outMessageType" title="play.core.actors.WebSocketActor.WebSocketsActor.Connect[In,Out] @scala.reflect.internal.annotations.uncheckedBounds" id="play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.x$3" class="delimiter">(</a><a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.request" title="play.api.mvc.RequestHeader">request</a>.<a href="Http.scala.html#play.api.mvc;RequestHeader.id" title="=&gt; Long">id</a>, <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.enumerator" title="play.api.libs.iteratee.Enumerator[In]">enumerator</a>, <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.$anonfun.iteratee" title="play.api.libs.iteratee.Iteratee[Out,Unit]">iteratee</a>, <a href="#play.api.mvc.WebSocket.tryAcceptWithActor.$anonfun.$anonfun.$anonfun.props" title="akka.actor.ActorRef =&gt; akka.actor.Props">props</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
