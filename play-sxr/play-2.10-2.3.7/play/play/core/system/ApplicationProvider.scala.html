<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>play/play/core/system/ApplicationProvider.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2013 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> play.core

<span class="keyword">import</span> java.io._
<span class="keyword">import</span> scala.concurrent.Await
<span class="keyword">import</span> scala.concurrent.duration._
<span class="keyword">import</span> scala.util.<span class="delimiter">{</span> Try, Success, Failure <span class="delimiter">}</span>

<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.mvc._
<span class="keyword">import</span> scala.util.control.NonFatal

<span class="comment">/**
 * provides source code to be displayed on error pages
 */</span>
<span class="keyword">trait</span> <a title="trait SourceMapper extends AnyRef" id="play.core;SourceMapper">SourceMapper</a> <span title="Unit" class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(className: String, line: Option[Int])Option[(java.io.File, Option[Int])]" id="play.core;SourceMapper.sourceOf">sourceOf</a><span class="delimiter">(</span><a title="String" id="play.core;SourceMapper.sourceOf.className">className</a>: <span title="String">String</span>, <a title="Option[Int]" id="play.core;SourceMapper.sourceOf$default$2">line</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="None.type">None</span><span class="delimiter">)</span>: <span title="Option[(java.io.File, Option[Int])]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>File, Option<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(e: Throwable)Option[(java.io.File, Option[Int])]" id="play.core;SourceMapper.sourceFor">sourceFor</a><span class="delimiter">(</span><a title="Throwable" id="play.core;SourceMapper.sourceFor.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Option[(java.io.File, Option[Int])]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>File, Option<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#play.core;SourceMapper.sourceFor.e" title="Throwable">e</a>.<span title="(xs: Array[StackTraceElement])scala.collection.mutable.ArrayOps[StackTraceElement]">getStackTrace</span>.<span title="(p: StackTraceElement =&gt; Boolean)Option[StackTraceElement]">find</span><span class="delimiter">(</span><a title="StackTraceElement" id="play.core;SourceMapper.sourceFor.$anonfun.element">element</a> =&gt; <a href="#play.core;SourceMapper.sourceOf" title="(className: String, line: Option[Int])Option[(java.io.File, Option[Int])]">sourceOf</a><span class="delimiter">(</span><a href="#play.core;SourceMapper.sourceFor.$anonfun.element" title="StackTraceElement">element</a>.<span title="()String">getClassName</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span>.<span title="(f: StackTraceElement =&gt; Option[(java.io.File, Option[Int])])Option[(java.io.File, Option[Int])]">flatMap</span> <span class="delimiter">{</span> <a title="StackTraceElement" id="play.core;SourceMapper.sourceFor.$anonfun.interestingStackTrace">interestingStackTrace</a> =&gt;
      <a href="#play.core;SourceMapper.sourceOf" title="(className: String, line: Option[Int])Option[(java.io.File, Option[Int])]">sourceOf</a><span class="delimiter">(</span><a href="#play.core;SourceMapper.sourceFor.$anonfun.interestingStackTrace" title="StackTraceElement">interestingStackTrace</a>.<span title="()String">getClassName</span>, <span title="(x: Int)Option[Int]">Option</span><span class="delimiter">(</span><a href="#play.core;SourceMapper.sourceFor.$anonfun.interestingStackTrace" title="StackTraceElement">interestingStackTrace</a>.<span title="()Int">getLineNumber</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait DevSettings extends AnyRef" id="play.core;DevSettings">DevSettings</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; Map[String,String]" id="play.core;DevSettings.devSettings">devSettings</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Provides information about a Play Application running inside a Play server.
 */</span>
<span title="AnyRef" class="keyword">trait</span> <a title="trait ApplicationProvider extends AnyRef" id="play.core;ApplicationProvider">ApplicationProvider</a> <span title="Unit" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.File" id="play.core;ApplicationProvider.path">path</a>: <span title="java.io.File">File</span>
  <span class="keyword">def</span> <a title="=&gt; scala.util.Try[play.api.Application]" id="play.core;ApplicationProvider.get">get</a>: <span title="scala.util.Try[play.api.Application]">Try</span><span class="delimiter">[</span>Application<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(requestHeader: play.api.mvc.RequestHeader)Option[play.api.mvc.Result]" id="play.core;ApplicationProvider.handleWebCommand">handleWebCommand</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader" id="play.core;ApplicationProvider.handleWebCommand.requestHeader">requestHeader</a>: play.api.mvc.<a href="../../api/mvc/Http.scala.html#play.api.mvc;RequestHeader" title="play.api.mvc.RequestHeader">RequestHeader</a><span class="delimiter">)</span>: <span title="Option[play.api.mvc.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <span title="None.type">None</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">trait</span> <a title="trait HandleWebCommandSupport extends AnyRef" id="play.core;HandleWebCommandSupport">HandleWebCommandSupport</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(request: play.api.mvc.RequestHeader, buildLink: play.core.BuildLink, path: java.io.File)Option[play.api.mvc.Result]" id="play.core;HandleWebCommandSupport.handleWebCommand">handleWebCommand</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader" id="play.core;HandleWebCommandSupport.handleWebCommand.request">request</a>: play.api.mvc.<a href="../../api/mvc/Http.scala.html#play.api.mvc;RequestHeader" title="play.api.mvc.RequestHeader">RequestHeader</a>, <a title="play.core.BuildLink" id="play.core;HandleWebCommandSupport.handleWebCommand.buildLink">buildLink</a>: play.core.<span title="play.core.BuildLink">BuildLink</span>, <a title="java.io.File" id="play.core;HandleWebCommandSupport.handleWebCommand.path">path</a>: java.io.<span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="Option[play.api.mvc.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * creates and initializes an Application
 * @param applicationPath location of an Application
 */</span>
<span title="AnyRef" class="keyword">class</span> <a title="class StaticApplication extends AnyRef with play.core.ApplicationProvider" id="play.core;StaticApplication">StaticApplication</a><a href="#play.core;StaticApplication" title="play.core.StaticApplication" class="delimiter">(</a><a title="java.io.File" id="play.core;StaticApplication.applicationPath">applicationPath</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.core;ApplicationProvider" title="play.core.ApplicationProvider">ApplicationProvider</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="play.api.DefaultApplication" id="play.core;StaticApplication.application">application</a> = <span title="play.api.DefaultApplication" class="keyword">new</span> <a href="../../api/Application.scala.html#play.api;DefaultApplication" title="play.api.DefaultApplication">DefaultApplication</a><span class="delimiter">(</span><a href="#play.core;StaticApplication.applicationPath" title="java.io.File">applicationPath</a>, <a href="#play.core;StaticApplication" title="StaticApplication.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span>, <span title="None.type">None</span>, <a href="../../api/Play.scala.html#play.api.Mode" title="play.api.Mode.type">Mode</a>.<a href="../../api/Play.scala.html#play.api.Mode.Prod" title="=&gt; play.api.Mode.Value">Prod</a><span class="delimiter">)</span>

  <a href="../../api/Play.scala.html#play.api.Play" title="play.api.Play.type">Play</a>.<a href="../../api/Play.scala.html#play.api.Play.start" title="(app: play.api.Application)Unit">start</a><span class="delimiter">(</span><a href="#play.core;StaticApplication.application" title="=&gt; play.api.DefaultApplication">application</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.util.Success[play.api.DefaultApplication]" id="play.core;StaticApplication.get">get</a> = <span title="(value: play.api.DefaultApplication)scala.util.Success[play.api.DefaultApplication]">Success</span><span class="delimiter">(</span><a href="#play.core;StaticApplication.application" title="=&gt; play.api.DefaultApplication">application</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.File" id="play.core;StaticApplication.path">path</a> = <a href="#play.core;StaticApplication.applicationPath" title="java.io.File">applicationPath</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * wraps and starts a fake application (used in tests)
 * @param application fake Application
 */</span>
<span class="keyword">class</span> <a title="class TestApplication extends AnyRef with play.core.ApplicationProvider" id="play.core;TestApplication">TestApplication</a><a href="#play.core;TestApplication" title="play.core.TestApplication" class="delimiter">(</a><a title="play.api.Application" id="play.core;TestApplication.application">application</a>: <a href="../../api/Application.scala.html#play.api;Application" title="play.api.Application">Application</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.core;ApplicationProvider" title="play.core.ApplicationProvider">ApplicationProvider</a> <span class="delimiter">{</span>

  <a href="../../api/Play.scala.html#play.api.Play" title="play.api.Play.type">Play</a>.<a href="../../api/Play.scala.html#play.api.Play.start" title="(app: play.api.Application)Unit">start</a><span class="delimiter">(</span><a href="#play.core;TestApplication.application" title="play.api.Application">application</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.util.Success[play.api.Application]" id="play.core;TestApplication.get">get</a> = <span title="(value: play.api.Application)scala.util.Success[play.api.Application]">Success</span><span class="delimiter">(</span><a href="#play.core;TestApplication.application" title="play.api.Application">application</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.File" id="play.core;TestApplication.path">path</a> = <a href="#play.core;TestApplication.application" title="play.api.Application">application</a>.<a href="../../api/Application.scala.html#play.api;Application.path" title="=&gt; java.io.File">path</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Represents an application that can be reloaded in Dev Mode.
 */</span>
<span class="keyword">class</span> <a title="class ReloadableApplication extends AnyRef with play.core.ApplicationProvider" id="play.core;ReloadableApplication">ReloadableApplication</a><a href="#play.core;ReloadableApplication" title="play.core.ReloadableApplication" class="delimiter">(</a><a title="play.core.BuildLink" id="play.core;ReloadableApplication.buildLink">buildLink</a>: <span title="play.core.BuildLink">BuildLink</span>, <a title="play.core.BuildDocHandler" id="play.core;ReloadableApplication.buildDocHandler">buildDocHandler</a>: <span title="play.core.BuildDocHandler">BuildDocHandler</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.core;ApplicationProvider" title="play.core.ApplicationProvider">ApplicationProvider</a> <span class="delimiter">{</span>

  <span class="comment">// Use plain Java call here in case of scala classloader mess</span>
  <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="System.type">System</span>.<span title="(x$1: String)String">getProperty</span><span class="delimiter">(</span><span title="String(&quot;play.debug.classpath&quot;)" class="string">&quot;play.debug.classpath&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;true&quot;)" class="string">&quot;true&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;\n---- Current ClassLoader ----\n&quot;)" class="string">&quot;\n---- Current ClassLoader ----\n&quot;</span><span class="delimiter">)</span>
      <span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: Any)Unit">println</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication" title="ReloadableApplication.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span><span class="delimiter">)</span>
      <span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;\n---- The where is Scala? test ----\n&quot;)" class="string">&quot;\n---- The where is Scala? test ----\n&quot;</span><span class="delimiter">)</span>
      <span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: Any)Unit">println</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication" title="ReloadableApplication.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span>.<span title="(x$1: String)java.net.URL">getResource</span><span class="delimiter">(</span><span title="String(&quot;scala/Predef$.class&quot;)" class="string">&quot;scala/Predef$.class&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// First delete the default log file for a fresh start (only in Dev Mode)</span>
  <span class="keyword">try</span> <span class="delimiter">{</span>
    <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.path" title="=&gt; java.io.File">path</a>, <span title="String(&quot;logs/application.log&quot;)" class="string">&quot;logs/application.log&quot;</span><span class="delimiter">)</span>.<span title="()Boolean">delete</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#play.core;ReloadableApplication.<local ReloadableApplication>.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
  <span class="delimiter">}</span>

  <span class="comment">// Configure the logger for the first time.</span>
  <span class="comment">// This is usually done by Application itself when it's instantiated, which for other types of ApplicationProviders,</span>
  <span class="comment">// is usually instantiated along with or before the provider.  But in dev mode, no application exists initially, so</span>
  <span class="comment">// configure it here.</span>
  <a href="../../api/Logger.scala.html#play.api.Logger" title="play.api.Logger.type">Logger</a>.<a href="../../api/Logger.scala.html#play.api.Logger.configure$default$2" title="Map[String,ch.qos.logback.classic.Level] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.<local ReloadableApplication>.x$5">configure</a><span class="delimiter">(</span>
    <span title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]">Map</span><a title="scala.collection.immutable.Map[String,String] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.<local ReloadableApplication>.x$3" class="delimiter">(</a><span title="(x: String)ArrowAssoc[String]" class="string">&quot;application.home&quot;</span> <span title="(y: String)(String, String)">-&gt;</span> <a href="#play.core;ReloadableApplication.path" title="=&gt; java.io.File">path</a>.<span title="()String">getAbsolutePath</span><span class="delimiter">)</span>,
    mode = <a href="../../api/Play.scala.html#play.api.Mode" title="play.api.Mode.type">Mode</a>.<a href="../../api/Play.scala.html#play.api.Mode.Dev" title="play.api.Mode.Value" id="play.core;ReloadableApplication.<local ReloadableApplication>.x$4">Dev</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.File" id="play.core;ReloadableApplication.path">path</a> = <a href="#play.core;ReloadableApplication.buildLink" title="play.core.BuildLink">buildLink</a>.<span title="()java.io.File">projectPath</span>

  <span title="(x: Any)Unit">println</span><span class="delimiter">(</span>play.utils.<a href="../../utils/Colors.scala.html#play.utils.Colors" title="play.utils.Colors.type">Colors</a>.<a href="../../utils/Colors.scala.html#play.utils.Colors.magenta" title="(str: String)String">magenta</a><span class="delimiter">(</span><span title="String(&quot;--- (Running the application, auto-reloading is enabled) ---&quot;)" class="string">&quot;--- (Running the application, auto-reloading is enabled) ---&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span title="()Unit">println</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="scala.util.Try[play.api.Application]" id="play.core;ReloadableApplication.lastState_=">lastState</a>: <span title="scala.util.Try[play.api.Application]">Try</span><span class="delimiter">[</span>Application<span class="delimiter">]</span> = <span title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</span><span class="delimiter">(</span><a href="../../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException.<init>(50cc897f6f)" title="(title: String, description: String)play.api.PlayException" class="keyword">new</a> <a href="../../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException" title="play.api.PlayException">PlayException</a><span class="delimiter">(</span><span title="String(&quot;Not initialized&quot;)" class="string">&quot;Not initialized&quot;</span>, <span title="String(&quot;?&quot;)" class="string">&quot;?&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; scala.util.Try[play.api.Application]" id="play.core;ReloadableApplication.get">get</a> = <span class="delimiter">{</span>

    <a href="#play.core;ReloadableApplication" title="(x$1: scala.util.Try[play.api.Application])scala.util.Try[play.api.Application]">synchronized</a> <span class="delimiter">{</span>

      <span class="comment">// Let's load the application on another thread</span>
      <span class="comment">// as we are now on the Netty IO thread.</span>
      <span class="comment">//</span>
      <span class="comment">// Because we are on DEV mode here, it doesn't really matter</span>
      <span class="comment">// but it's more coherent with the way it works in PROD mode.</span>
      <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="scala.concurrent.ExecutionContext" id="play.core;ReloadableApplication.get.ec">ec</a> = play.core.<a href="Execution.scala.html#play.core.Execution" title="play.core.Execution.type">Execution</a>.<a href="Execution.scala.html#play.core.Execution.internalContext" title="=&gt; scala.concurrent.ExecutionContext">internalContext</a>
      <span title="scala.concurrent.Await.type">Await</span>.<span title="(awaitable: scala.concurrent.Awaitable[scala.util.Try[play.api.Application]], atMost: scala.concurrent.duration.Duration)scala.util.Try[play.api.Application]">result</span><span class="delimiter">(</span>scala.concurrent.<span title="(body: =&gt; scala.util.Try[play.api.Application])(implicit execctx: scala.concurrent.ExecutionContext)scala.concurrent.Future[scala.util.Try[play.api.Application]]">Future</span> <a href="#play.core;ReloadableApplication.get.ec" title="scala.concurrent.ExecutionContext" class="delimiter">{</a>

        <span class="keyword">val</span> <a title="&lt;root&gt; extends Product with Serializable with scala.util.Try[Option[ClassLoader]]" id="play.core;ReloadableApplication.get.reloaded">reloaded</a> = <a href="#play.core;ReloadableApplication.buildLink" title="play.core.BuildLink">buildLink</a>.<span title="()Object">reload</span> <span title="&lt;root&gt; extends Product with Serializable with scala.util.Try[Option[ClassLoader]]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#play.core;ReloadableApplication.get.reloaded.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><a title="Throwable" id="play.core;ReloadableApplication.get.reloaded.t">t</a><span class="delimiter">)</span> =&gt; <span title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.reloaded.t" title="Throwable">t</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="ClassLoader" id="play.core;ReloadableApplication.get.reloaded.cl">cl</a>: <span title="ClassLoader">ClassLoader</span> =&gt; <span title="(value: Some[ClassLoader])scala.util.Success[Some[ClassLoader]]">Success</span><span class="delimiter">(</span><span title="(x: ClassLoader)Some[ClassLoader]">Some</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.reloaded.cl" title="ClassLoader">cl</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Null(null)" class="keyword">null</span> =&gt; <span title="(value: None.type)scala.util.Success[None.type]">Success</span><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#play.core;ReloadableApplication.get.reloaded" title="&lt;root&gt; extends Product with Serializable with scala.util.Try[Option[ClassLoader]]">reloaded</a>.<span title="(f: Option[ClassLoader] =&gt; scala.util.Try[play.api.Application])scala.util.Try[play.api.Application]">flatMap</span> <span class="delimiter">{</span> <a title="Option[ClassLoader]" id="play.core;ReloadableApplication.get.$anonfun.maybeClassLoader">maybeClassLoader</a> =&gt;

          <span class="keyword">val</span> <a title="Option[scala.util.Try[play.api.Application]]" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication">maybeApplication</a>: <span title="Option[scala.util.Try[play.api.Application]]">Option</span><span class="delimiter">[</span>Try<span class="delimiter">[</span>Application<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#play.core;ReloadableApplication.get.$anonfun.maybeClassLoader" title="Option[ClassLoader]">maybeClassLoader</a>.<span title="(f: ClassLoader =&gt; scala.util.Try[play.api.Application])Option[scala.util.Try[play.api.Application]]">map</span> <span class="delimiter">{</span> <a title="ClassLoader" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.projectClassloader">projectClassloader</a> =&gt;
            <span class="keyword">try</span> <span class="delimiter">{</span>

              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#play.core;ReloadableApplication.lastState_=" title="=&gt; scala.util.Try[play.api.Application]">lastState</a>.<span title="=&gt; Boolean">isSuccess</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span title="()Unit">println</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span title="(x: Any)Unit">println</span><span class="delimiter">(</span>play.utils.<a href="../../utils/Colors.scala.html#play.utils.Colors" title="play.utils.Colors.type">Colors</a>.<a href="../../utils/Colors.scala.html#play.utils.Colors.magenta" title="(str: String)String">magenta</a><span class="delimiter">(</span><span title="String(&quot;--- (RELOAD) ---&quot;)" class="string">&quot;--- (RELOAD) ---&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span title="()Unit">println</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>

              <span class="keyword">val</span> <a title="play.core.ReloadableApplication" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.reloadable">reloadable</a> = <a href="#play.core;ReloadableApplication" title="play.core.ReloadableApplication" class="keyword">this</a>

              <span class="comment">// First, stop the old application if it exists</span>
              <a href="../../api/Play.scala.html#play.api.Play" title="play.api.Play.type">Play</a>.<a href="../../api/Play.scala.html#play.api.Play.stop" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>

              <span class="keyword">val</span> <a title="newApplication extends play.api.DefaultApplication with play.core.DevSettings" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication">newApplication</a> = <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon" title="play.api.DefaultApplication with play.core.DevSettings{}" class="keyword">new</a> <a href="../../api/Application.scala.html#play.api;DefaultApplication" title="anonymous class $anon extends play.api.DefaultApplication with play.core.DevSettings" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon">DefaultApplication</a><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.reloadable" title="play.core.ReloadableApplication">reloadable</a>.<a href="#play.core;ReloadableApplication.path" title="=&gt; java.io.File">path</a>, <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.projectClassloader" title="ClassLoader">projectClassloader</a>, <span title="(x: play.core.SourceMapper)Some[play.core.SourceMapper]">Some</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon" title="play.core.SourceMapper" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with play.core.SourceMapper" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon">SourceMapper</a> <span class="delimiter">{</span>
                <span class="keyword">def</span> <a title="(className: String, line: Option[Int])Option[(java.io.File, Option[Int])]" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf">sourceOf</a><span class="delimiter">(</span><a title="String" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.className">className</a>: <span title="String">String</span>, <a title="Option[Int]" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.line">line</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
                  <span title="(x: Array[Object])Option[Array[Object]]">Option</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.buildLink" title="play.core.BuildLink">buildLink</a>.<span title="(x$1: String, x$2: Integer)Array[Object]">findSource</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.className" title="String">className</a>, <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.line" title="Option[Int]">line</a>.<span title="(f: Int =&gt; Integer)Option[Integer]">map</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.x$1" title="Int">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Integer" class="delimiter">[</span>java.lang.<span title="Integer">Integer</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,Integer])Integer">orNull</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: Array[Object] =&gt; Option[(java.io.File, Option[Int])])Option[(java.io.File, Option[Int])]">flatMap</span> <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.x0$1" title="Option[(java.io.File, Option[Int])]" class="delimiter">{</a>
                    <span class="keyword">case</span> <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.<unapply-selector>" title="(x: Array[Object])Option[IndexedSeq[Object]]">Array</a><span class="delimiter">(</span><span title="java.io.File">file</span>: java.io.<span title="java.io.File">File</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> =&gt; <span title="(x: (java.io.File, None.type))Some[(java.io.File, None.type)]">Some</span><span class="delimiter">(</span><span title="(_1: java.io.File, _2: None.type)(java.io.File, None.type)" class="delimiter">(</span><span title="java.io.File">file</span>, <span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="keyword">case</span> <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.<unapply-selector>" title="(x: Array[Object])Option[IndexedSeq[Object]]">Array</a><span class="delimiter">(</span><span title="java.io.File">file</span>: java.io.<span title="java.io.File">File</span>, <a title="Integer" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.line">line</a>: java.lang.<span title="Integer">Integer</span><span class="delimiter">)</span> =&gt; <span title="(x: (java.io.File, Some[Int]))Some[(java.io.File, Some[Int])]">Some</span><span class="delimiter">(</span><span title="(_1: java.io.File, _2: Some[Int])(java.io.File, Some[Int])" class="delimiter">(</span><span title="java.io.File">file</span>, <span title="(x: Int)Some[Int]">Some</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon;$anon.sourceOf.$anonfun.line" title="implicit scala.Predef.Integer2int : (x: Integer)Int">line</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                    <span class="keyword">case</span> _ =&gt; <span title="None.type">None</span>
                  <span class="delimiter">}</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>, <a href="../../api/Play.scala.html#play.api.Mode" title="play.api.Mode.type">Mode</a>.<a href="../../api/Play.scala.html#play.api.Mode.Dev" title="=&gt; play.api.Mode.Value">Dev</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="#play.core;DevSettings" title="play.core.DevSettings">DevSettings</a> <span class="delimiter">{</span>
                <span class="keyword">import</span> scala.collection.<span title="scala.collection.JavaConverters.type">JavaConverters</span>._
                <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Map[String,String]" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication;$anon.devSettings">devSettings</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <a href="#play.core;ReloadableApplication.buildLink" title="play.core.BuildLink">buildLink</a>.<span title="(m: java.util.Map[String,String])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Map[String,String]]">settings</span>.<span title="=&gt; scala.collection.mutable.Map[String,String]">asScala</span>.<span title="(implicit ev: &lt;:&lt;[(String, String),(String, String)])scala.collection.immutable.Map[String,String]">toMap</span>
              <span class="delimiter">}</span>

              <a href="../../api/Play.scala.html#play.api.Play" title="play.api.Play.type">Play</a>.<a href="../../api/Play.scala.html#play.api.Play.start" title="(app: play.api.Application)Unit">start</a><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication" title="newApplication extends play.api.DefaultApplication with play.core.DevSettings">newApplication</a><span class="delimiter">)</span>

              <span title="(value: play.api.DefaultApplication with play.core.DevSettings{lazy val devSettings: Map[String,String]})scala.util.Success[play.api.DefaultApplication with play.core.DevSettings{lazy val devSettings: Map[String,String]}]">Success</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.newApplication" title="newApplication extends play.api.DefaultApplication with play.core.DevSettings">newApplication</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="play.api.PlayException">e</span>: <a href="../../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException" title="play.api.PlayException">PlayException</a> =&gt; <span class="delimiter">{</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="(x$1: scala.util.Try[play.api.Application])Unit">lastState</a> = <span title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</span><span class="delimiter">(</span><span title="play.api.PlayException">e</span><span class="delimiter">)</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="=&gt; scala.util.Try[play.api.Application]">lastState</a>
              <span class="delimiter">}</span>
              <span class="keyword">case</span> <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.<unapply-selector>" title="(t: Throwable)Option[Throwable]">NonFatal</a><span class="delimiter">(</span><span title="Throwable">e</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="(x$1: scala.util.Try[play.api.Application])Unit">lastState</a> = <span title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</span><span class="delimiter">(</span><a href="../../api/Exceptions.scala.html#play.api.UnexpectedException.apply$default$1" title="Option[String] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.x$7">UnexpectedException</a><span class="delimiter">(</span>unexpected = <span title="(x: Throwable)Some[Throwable]">Some</span><a title="Some[Throwable] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.x$6" class="delimiter">(</a><span title="Throwable">e</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="=&gt; scala.util.Try[play.api.Application]">lastState</a>
              <span class="delimiter">}</span>
              <span class="keyword">case</span> <span title="LinkageError">e</span>: <span title="LinkageError">LinkageError</span> =&gt; <span class="delimiter">{</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="(x$1: scala.util.Try[play.api.Application])Unit">lastState</a> = <span title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</span><span class="delimiter">(</span><a href="../../api/Exceptions.scala.html#play.api.UnexpectedException.apply$default$1" title="Option[String] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.x$9">UnexpectedException</a><span class="delimiter">(</span>unexpected = <span title="(x: LinkageError)Some[LinkageError]">Some</span><a title="Some[LinkageError] @scala.reflect.internal.annotations.uncheckedBounds" id="play.core;ReloadableApplication.get.$anonfun.maybeApplication.$anonfun.x$8" class="delimiter">(</a><span title="LinkageError">e</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#play.core;ReloadableApplication.lastState_=" title="=&gt; scala.util.Try[play.api.Application]">lastState</a>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication" title="Option[scala.util.Try[play.api.Application]]">maybeApplication</a>.<span title="(f: scala.util.Try[play.api.Application] =&gt; Option[play.api.Application])Option[play.api.Application]">flatMap</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.$anonfun.x$2" title="scala.util.Try[play.api.Application]">_</a>.<span title="=&gt; Option[play.api.Application]">toOption</span><span class="delimiter">)</span>.<span title="(f: play.api.Application =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="play.api.Application" id="play.core;ReloadableApplication.get.$anonfun.$anonfun.app">app</a> =&gt;
            <a href="#play.core;ReloadableApplication.lastState_=" title="(x$1: scala.util.Try[play.api.Application])Unit">lastState</a> = <span title="(value: play.api.Application)scala.util.Success[play.api.Application]">Success</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.get.$anonfun.$anonfun.app" title="play.api.Application">app</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="#play.core;ReloadableApplication.get.$anonfun.maybeApplication" title="Option[scala.util.Try[play.api.Application]]">maybeApplication</a>.<span title="(default: =&gt; scala.util.Try[play.api.Application])scala.util.Try[play.api.Application]">getOrElse</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.lastState_=" title="=&gt; scala.util.Try[play.api.Application]">lastState</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="delimiter">}</span>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.Duration.Infinite">Inf</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(request: play.api.mvc.RequestHeader)Option[play.api.mvc.Result]" id="play.core;ReloadableApplication.handleWebCommand">handleWebCommand</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader" id="play.core;ReloadableApplication.handleWebCommand.request">request</a>: play.api.mvc.<a href="../../api/mvc/Http.scala.html#play.api.mvc;RequestHeader" title="play.api.mvc.RequestHeader">RequestHeader</a><span class="delimiter">)</span>: <span title="Option[play.api.mvc.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <a href="#play.core;ReloadableApplication.buildDocHandler" title="play.core.BuildDocHandler">buildDocHandler</a>.<span title="(x$1: Any)Object">maybeHandleDocRequest</span><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.handleWebCommand.request" title="play.api.mvc.RequestHeader">request</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Option[play.api.mvc.Result]" class="delimiter">[</span><span title="Option[play.api.mvc.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="(alternative: =&gt; Option[play.api.mvc.Result])Option[play.api.mvc.Result]">orElse</span><span class="delimiter">(</span>
      <span class="keyword">for</span> <span class="delimiter">{</span>
        <a title="play.api.Application" id="play.core;ReloadableApplication.handleWebCommand.$anonfun.app">app</a> &lt;- <a href="../../api/Play.scala.html#play.api.Play" title="play.api.Play.type">Play</a>.<a href="../../api/Play.scala.html#play.api.Play.maybeApplication" title="(f: play.api.Application =&gt; Option[play.api.mvc.Result])Option[play.api.mvc.Result]">maybeApplication</a>
        <span title="play.api.mvc.Result">result</span> &lt;- <a href="#play.core;ReloadableApplication.handleWebCommand.$anonfun.app" title="play.api.Application">app</a>.<a href="../../api/Application.scala.html#play.api;Application.plugins" title="=&gt; Seq[play.api.Plugin]">plugins</a>.<span title="(z: Option[play.api.mvc.Result])(op: (Option[play.api.mvc.Result], play.api.Plugin) =&gt; Option[play.api.mvc.Result])Option[play.api.mvc.Result]">foldLeft</span><span class="delimiter">(</span><span title="Option.type">Option</span>.<span title="[A]=&gt; Option[A]">empty</span><span title="Option[play.api.mvc.Result]" class="delimiter">[</span><a href="../../api/mvc/Results.scala.html#play.api.mvc;Result" title="play.api.mvc.Result">Result</a><span class="delimiter">]</span><span class="delimiter">)</span> <a href="#play.core;ReloadableApplication.handleWebCommand.$anonfun.$anonfun.x0$2" title="(f: play.api.mvc.Result =&gt; play.api.mvc.Result)Option[play.api.mvc.Result]" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span><span title="None.type">None</span>, <a title="play extends play.api.Plugin with play.core.HandleWebCommandSupport" id="play.core;ReloadableApplication.handleWebCommand.$anonfun.$anonfun.plugin">plugin</a>: <a href="#play.core;HandleWebCommandSupport" title="play.core.HandleWebCommandSupport">HandleWebCommandSupport</a><span class="delimiter">)</span> =&gt; <a href="#play.core;ReloadableApplication.handleWebCommand.$anonfun.$anonfun.plugin" title="play extends play.api.Plugin with play.core.HandleWebCommandSupport">plugin</a>.<a href="#play.core;HandleWebCommandSupport.handleWebCommand" title="(request: play.api.mvc.RequestHeader, buildLink: play.core.BuildLink, path: java.io.File)Option[play.api.mvc.Result]">handleWebCommand</a><span class="delimiter">(</span><a href="#play.core;ReloadableApplication.handleWebCommand.request" title="play.api.mvc.RequestHeader">request</a>, <a href="#play.core;ReloadableApplication.buildLink" title="play.core.BuildLink">buildLink</a>, <a href="#play.core;ReloadableApplication.path" title="=&gt; java.io.File">path</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span class="delimiter">(</span><span title="Option[play.api.mvc.Result]">result</span>, _<span class="delimiter">)</span> =&gt; <span title="Option[play.api.mvc.Result]">result</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">yield</span> <span title="play.api.mvc.Result">result</span>
    <span class="delimiter">)</span>

  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
