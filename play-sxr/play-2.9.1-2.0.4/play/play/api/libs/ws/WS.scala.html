<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play/play/api/libs/ws/WS.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.libs.ws

<span class="keyword">import</span> play.api.libs.concurrent._
<span class="keyword">import</span> play.api.libs.iteratee._
<span class="keyword">import</span> play.api.libs.iteratee.<a href="../iteratee/Iteratee.scala.html#14415" title="object play.api.libs.iteratee.Input">Input</a>._
<span class="keyword">import</span> play.api.libs.json._
<span class="keyword">import</span> play.api.http.<span class="delimiter">{</span> Writeable, ContentTypeOf <span class="delimiter">}</span>
<span class="keyword">import</span> com.ning.http.client.<span class="delimiter">{</span>
  AsyncHttpClient,
  AsyncHttpClientConfig,
  RequestBuilderBase,
  FluentCaseInsensitiveStringsMap,
  HttpResponseBodyPart,
  HttpResponseHeaders,
  HttpResponseStatus,
  Response =&gt; AHCResponse
<span class="delimiter">}</span>
<span class="keyword">import</span> com.ning.http.client.AsyncHttpClientConfig

<span class="comment">/**
 * Asynchronous API to to query web services, as an http client.
 *
 * Usage example:
 * {{{
 * WS.url(&quot;http://example.com/feed&quot;).get()
 * WS.url(&quot;http://example.com/item&quot;).post(&quot;content&quot;)
 * }}}
 *
 * The value returned is a Promise[Response],
 * and you should use Play's asynchronous mechanisms to use this response.
 *
 */</span>
<span class="keyword">object</span> <a title="object play.api.libs.ws.WS" id="15657">WS</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">import</span> com.ning.http.client.<span title="object com.ning.http.client.Realm">Realm</span>.<span class="delimiter">{</span> AuthScheme, RealmBuilder <span class="delimiter">}</span>
  <span class="keyword">import</span> javax.net.ssl.SSLContext

  <span class="comment">/**
   * The underlying HTTP client.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="com.ning.http.client.AsyncHttpClient" id="209491">client</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> play.api.<a href="../../Play.scala.html#10608" title="object play.api.Play">Play</a>.current
    <span class="keyword">val</span> <a title="com.ning.http.client.AsyncHttpClientConfig.Builder" id="214470">config</a> = <span title="com.ning.http.client.AsyncHttpClientConfig.Builder" class="keyword">new</span> <span title="object com.ning.http.client.AsyncHttpClientConfig">AsyncHttpClientConfig</span>.<span title="com.ning.http.client.AsyncHttpClientConfig.Builder">Builder</span><span class="delimiter">(</span><span class="delimiter">)</span>
      .<span title="(x$1: Int)com.ning.http.client.AsyncHttpClientConfig.Builder">setConnectionTimeoutInMs</span><span class="delimiter">(</span><a href="../../Play.scala.html#72746" title="=&gt; play.api.Application">current</a>.<a href="../../Application.scala.html#68060" title="=&gt; play.api.Configuration">configuration</a>.<a href="../../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ws.timeout&quot;)" class="string">&quot;ws.timeout&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(120000L)" class="long">120000L</span><span class="delimiter">)</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
      .<span title="(x$1: Int)com.ning.http.client.AsyncHttpClientConfig.Builder">setRequestTimeoutInMs</span><span class="delimiter">(</span><a href="../../Play.scala.html#72746" title="=&gt; play.api.Application">current</a>.<a href="../../Application.scala.html#68060" title="=&gt; play.api.Configuration">configuration</a>.<a href="../../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ws.timeout&quot;)" class="string">&quot;ws.timeout&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(120000L)" class="long">120000L</span><span class="delimiter">)</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
      .<span title="(x$1: Boolean)com.ning.http.client.AsyncHttpClientConfig.Builder">setFollowRedirects</span><span class="delimiter">(</span><a href="../../Play.scala.html#72746" title="=&gt; play.api.Application">current</a>.<a href="../../Application.scala.html#68060" title="=&gt; play.api.Configuration">configuration</a>.<a href="../../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ws.followRedirects&quot;)" class="string">&quot;ws.followRedirects&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../Play.scala.html#72746" title="=&gt; play.api.Application">current</a>.<a href="../../Application.scala.html#68060" title="play.api.Configuration" id="214710">configuration</a>.<a href="../../Configuration.scala.html#78646" title="Option[Set[String]]" id="214712">getString</a><span class="delimiter">(</span><a title="java.lang.String(&quot;ws.useragent&quot;)" id="214711" class="string">&quot;ws.useragent&quot;</a><span class="delimiter">)</span>.<span title="(f: String =&gt; com.ning.http.client.AsyncHttpClientConfig.Builder)Option[com.ning.http.client.AsyncHttpClientConfig.Builder]">map</span> <span class="delimiter">{</span> <a title="String" id="214717">useragent</a> =&gt;
      <a href="#214470" title="com.ning.http.client.AsyncHttpClientConfig.Builder">config</a>.<span title="(x$1: java.lang.String)com.ning.http.client.AsyncHttpClientConfig.Builder">setUserAgent</span><span class="delimiter">(</span><a href="#214717" title="String">useragent</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Play.scala.html#72746" title="=&gt; play.api.Application">current</a>.<a href="../../Application.scala.html#68060" title="=&gt; play.api.Configuration">configuration</a>.<a href="../../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ws.acceptAnyCertificate&quot;)" class="string">&quot;ws.acceptAnyCertificate&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">==</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#214470" title="com.ning.http.client.AsyncHttpClientConfig.Builder">config</a>.<span title="(x$1: javax.net.ssl.SSLContext)com.ning.http.client.AsyncHttpClientConfig.Builder">setSSLContext</span><span class="delimiter">(</span><span title="object javax.net.ssl.SSLContext">SSLContext</span>.<span title="()javax.net.ssl.SSLContext">getDefault</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="(x$1: com.ning.http.client.AsyncHttpClientConfig)com.ning.http.client.AsyncHttpClient" class="keyword">new</span> <span title="com.ning.http.client.AsyncHttpClient">AsyncHttpClient</span><span class="delimiter">(</span><a href="#214470" title="com.ning.http.client.AsyncHttpClientConfig.Builder">config</a>.<span title="()com.ning.http.client.AsyncHttpClientConfig">build</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Prepare a new request. You can then construct it by chaining calls.
   *
   * @param url the URL to request
   */</span>
  <span class="keyword">def</span> <a title="(url: String)play.api.libs.ws.WS.WSRequestHolder" id="209492">url</a><span class="delimiter">(</span><a title="String" id="211789">url</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#217232" title="play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a> = <a href="#217232" title="(url: String, headers: Map[String,Seq[String]], queryString: Map[String,String], calc: Option[play.api.libs.ws.SignatureCalculator], auth: Option[(String, String, com.ning.http.client.Realm.AuthScheme)])play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a><span class="delimiter">(</span><a href="#211789" title="String">url</a>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>

  <span class="comment">/**
   * A WS Request.
   */</span>
  <span class="keyword">class</span> <a title="class WSRequest extends com.ning.http.client.RequestBuilderBase[play.api.libs.ws.WS.WSRequest] with ScalaObject" id="209493">WSRequest</a><a href="#209493" title="ScalaObject" class="delimiter">(</a><a title="String" id="214886">_method</a>: <span title="String">String</span>, <a title="Option[(String, String, com.ning.http.client.Realm.AuthScheme)]" id="214887">_auth</a>: <span title="Option[(String, String, com.ning.http.client.Realm.AuthScheme)]">Option</span><span class="delimiter">[</span>Tuple3<span class="delimiter">[</span>String, String, AuthScheme<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[play.api.libs.ws.SignatureCalculator]" id="214888">_calc</a>: <span title="Option[play.api.libs.ws.SignatureCalculator]">Option</span><span class="delimiter">[</span>SignatureCalculator<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="com.ning.http.client.RequestBuilderBase[play.api.libs.ws.WS.WSRequest]">RequestBuilderBase</span><span class="delimiter">[</span>WSRequest<span class="delimiter">]</span><span class="delimiter">(</span>classOf<span title="java.lang.Class[play.api.libs.ws.WS.WSRequest](classOf[play.api.libs.ws.WS$$WSRequest])" class="delimiter">[</span>WSRequest<span class="delimiter">]</span>, <a href="#214886" title="String">_method</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConverters">JavaConverters</span>._

    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Option[play.api.libs.ws.SignatureCalculator]" id="210603">calculator</a>: <span title="Option[play.api.libs.ws.SignatureCalculator]">Option</span><span class="delimiter">[</span>SignatureCalculator<span class="delimiter">]</span> = <a href="#214888" title="Option[play.api.libs.ws.SignatureCalculator]">_calc</a>

    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="Map[String,Seq[String]]" id="210606">headers</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="(elems: (String, Nothing)*)scala.collection.immutable.Map[String,Nothing]">Map</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">protected</span> <span class="keyword">var</span> <a title="String" id="210609">_url</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

    <span class="comment">//this will do a java mutable set hence the {} response</span>
    <a href="#214887" title="Option[(String, String, com.ning.http.client.Realm.AuthScheme)]">_auth</a>.<span title="(f: (String, String, com.ning.http.client.Realm.AuthScheme) =&gt; play.api.libs.ws.WS.WSRequest)Option[play.api.libs.ws.WS.WSRequest]">map</span><span class="delimiter">(</span><a title="(String, String, com.ning.http.client.Realm.AuthScheme)" id="214905">data</a> =&gt; <a href="#210611" title="(username: String, password: String, scheme: com.ning.http.client.Realm.AuthScheme)play.api.libs.ws.WS.WSRequest">auth</a><span class="delimiter">(</span><a href="#214905" title="(String, String, com.ning.http.client.Realm.AuthScheme)">data</a>.<span title="=&gt; String">_1</span>, <a href="#214905" title="(String, String, com.ning.http.client.Realm.AuthScheme)">data</a>.<span title="=&gt; String">_2</span>, <a href="#214905" title="(String, String, com.ning.http.client.Realm.AuthScheme)">data</a>.<span title="=&gt; com.ning.http.client.Realm.AuthScheme">_3</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; Any)Any">getOrElse</span><span class="delimiter">(</span><span title="Unit" class="delimiter">{</span><span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Add http auth headers
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(username: String, password: String, scheme: com.ning.http.client.Realm.AuthScheme)play.api.libs.ws.WS.WSRequest" id="210611">auth</a><span class="delimiter">(</span><a title="String" id="214906">username</a>: <span title="String">String</span>, <a title="String" id="214907">password</a>: <span title="String">String</span>, <a title="com.ning.http.client.Realm.AuthScheme" id="214908">scheme</a>: <span title="com.ning.http.client.Realm.AuthScheme">AuthScheme</span><span class="delimiter">)</span>: <a href="#209493" title="play.api.libs.ws.WS.WSRequest">WSRequest</a> = <span class="delimiter">{</span>
      <a href="#209493" title="WSRequest.this.type" class="keyword">this</a>.<span title="(x$1: com.ning.http.client.Realm)play.api.libs.ws.WS.WSRequest">setRealm</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="com.ning.http.client.Realm.RealmBuilder" class="keyword">new</span> <span title="com.ning.http.client.Realm.RealmBuilder">RealmBuilder</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        .<span title="(x$1: com.ning.http.client.Realm.AuthScheme)com.ning.http.client.Realm.RealmBuilder">setScheme</span><span class="delimiter">(</span><a href="#214908" title="com.ning.http.client.Realm.AuthScheme">scheme</a><span class="delimiter">)</span>
        .<span title="(x$1: java.lang.String)com.ning.http.client.Realm.RealmBuilder">setPrincipal</span><span class="delimiter">(</span><a href="#214906" title="String">username</a><span class="delimiter">)</span>
        .<span title="(x$1: java.lang.String)com.ning.http.client.Realm.RealmBuilder">setPassword</span><span class="delimiter">(</span><a href="#214907" title="String">password</a><span class="delimiter">)</span>
        .<span title="(x$1: Boolean)com.ning.http.client.Realm.RealmBuilder">setUsePreemptiveAuth</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        .<span title="()com.ning.http.client.Realm">build</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Return the current headers of the request being constructed
     */</span>
    <span class="keyword">def</span> <a title="=&gt; Map[String,Seq[String]]" id="210612">allHeaders</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="(m: java.util.Map[java.lang.String,java.util.List[java.lang.String]])collection.JavaConverters.AsScala[scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]]]">mapAsScalaMapConverter</span><span class="delimiter">(</span><a href="#209493" title="com.ning.http.client.RequestBuilderBase.RequestImpl">request</a>.<span title="()com.ning.http.client.FluentCaseInsensitiveStringsMap">getHeaders</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]]">asScala</span>.<span title="(f: (java.lang.String, java.util.List[java.lang.String]) =&gt; (java.lang.String, Seq[java.lang.String]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]],(java.lang.String, Seq[java.lang.String]),scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]])scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map.Coll,(java.lang.String, Seq[java.lang.String]),scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]]" class="delimiter">(</span><a title="(java.lang.String, java.util.List[java.lang.String])" id="215251">e</a> =&gt; <a href="#215251" title="(java.lang.String, java.util.List[java.lang.String])">e</a>.<span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">_1</span> <span title="(y: Seq[java.lang.String])(java.lang.String, Seq[java.lang.String])">-&gt;</span> <a href="#215251" title="(java.lang.String, java.util.List[java.lang.String])">e</a>.<span title="(l: java.util.List[java.lang.String])collection.JavaConverters.AsScala[scala.collection.mutable.Buffer[java.lang.String]]">_2</span>.<span title="=&gt; scala.collection.mutable.Buffer[java.lang.String]">asScala</span>.<span title="=&gt; Seq[java.lang.String]">toSeq</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(java.lang.String, Seq[java.lang.String]),(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">toMap</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Retrieve an HTTP header.
     */</span>
    <span class="keyword">def</span> <a title="(name: String)Option[String]" id="210613">header</a><span class="delimiter">(</span><a title="String" id="210857">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#210606" title="=&gt; Map[String,Seq[String]]">headers</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#210857" title="String">name</a><span class="delimiter">)</span>.<span title="(f: Seq[String] =&gt; Option[String])Option[String]">flatMap</span><span class="delimiter">(</span><a href="#215662" title="Seq[String]">_</a>.<span title="=&gt; Option[String]">headOption</span><span class="delimiter">)</span>

    <span class="comment">/**
     * The HTTP method.
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="210614">method</a>: <span title="String">String</span> = <a href="#214886" title="String">_method</a>

    <span class="comment">/**
     * The URL
     */</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="210615">url</a>: <span title="String">String</span> = <a href="#210609" title="=&gt; String">_url</a>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(headers: java.util.Map[String,java.util.Collection[String]])scala.collection.immutable.Map[String,Seq[String]]" id="210616">ningHeadersToMap</a><span class="delimiter">(</span><a title="java.util.Map[String,java.util.Collection[String]]" id="215664">headers</a>: java.util.<span title="java.util.Map[String,java.util.Collection[String]]">Map</span><span class="delimiter">[</span>String, java.util.Collection<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> =
      <span title="(m: java.util.Map[String,java.util.Collection[String]])collection.JavaConverters.AsScala[scala.collection.mutable.Map[String,java.util.Collection[String]]]">mapAsScalaMapConverter</span><span class="delimiter">(</span><a href="#215664" title="java.util.Map[String,java.util.Collection[String]]">headers</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.Map[String,java.util.Collection[String]]">asScala</span>.<span title="(f: (String, java.util.Collection[String]) =&gt; (String, Seq[String]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[String,java.util.Collection[String]],(String, Seq[String]),scala.collection.mutable.Map[String,Seq[String]]])scala.collection.mutable.Map[String,Seq[String]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map.Coll,(String, Seq[String]),scala.collection.mutable.Map[String,Seq[String]]]" class="delimiter">(</span><a title="(String, java.util.Collection[String])" id="215710">e</a> =&gt; <a href="#215710" title="(String, java.util.Collection[String])">e</a>.<span title="(x: String)ArrowAssoc[String]">_1</span> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <a href="#215710" title="(String, java.util.Collection[String])">e</a>.<span title="(i: java.util.Collection[String])collection.JavaConverters.AsScala[Iterable[String]]">_2</span>.<span title="=&gt; Iterable[String]">asScala</span>.<span title="=&gt; Seq[String]">toSeq</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(String, Seq[String]),(String, Seq[String])])scala.collection.immutable.Map[String,Seq[String]]">toMap</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(headers: com.ning.http.client.FluentCaseInsensitiveStringsMap)scala.collection.immutable.Map[java.lang.String,Seq[java.lang.String]]" id="210617">ningHeadersToMap</a><span class="delimiter">(</span><a title="com.ning.http.client.FluentCaseInsensitiveStringsMap" id="215820">headers</a>: <span title="com.ning.http.client.FluentCaseInsensitiveStringsMap">FluentCaseInsensitiveStringsMap</span><span class="delimiter">)</span> =
      <span title="(m: java.util.Map[java.lang.String,java.util.List[java.lang.String]])collection.JavaConverters.AsScala[scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]]]">mapAsScalaMapConverter</span><span class="delimiter">(</span><a href="#215820" title="com.ning.http.client.FluentCaseInsensitiveStringsMap">headers</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]]">asScala</span>.<span title="(f: (java.lang.String, java.util.List[java.lang.String]) =&gt; (java.lang.String, Seq[java.lang.String]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map[java.lang.String,java.util.List[java.lang.String]],(java.lang.String, Seq[java.lang.String]),scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]])scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Map.Coll,(java.lang.String, Seq[java.lang.String]),scala.collection.mutable.Map[java.lang.String,Seq[java.lang.String]]]" class="delimiter">(</span><a title="(java.lang.String, java.util.List[java.lang.String])" id="215846">e</a> =&gt; <a href="#215846" title="(java.lang.String, java.util.List[java.lang.String])">e</a>.<span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">_1</span> <span title="(y: Seq[java.lang.String])(java.lang.String, Seq[java.lang.String])">-&gt;</span> <a href="#215846" title="(java.lang.String, java.util.List[java.lang.String])">e</a>.<span title="(l: java.util.List[java.lang.String])collection.JavaConverters.AsScala[scala.collection.mutable.Buffer[java.lang.String]]">_2</span>.<span title="=&gt; scala.collection.mutable.Buffer[java.lang.String]">asScala</span>.<span title="=&gt; Seq[java.lang.String]">toSeq</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(java.lang.String, Seq[java.lang.String]),(java.lang.String, Seq[java.lang.String])])scala.collection.immutable.Map[java.lang.String,Seq[java.lang.String]]">toMap</span>

    <span class="keyword">private</span><span class="delimiter">[</span>libs<span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="210618">execute</a>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">import</span> com.ning.http.client.AsyncCompletionHandler
      <span class="keyword">var</span> <a title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.ws.Response] with play.api.libs.concurrent.Redeemable[play.api.libs.ws.Response]" id="215952">result</a> = <a href="../concurrent/Promise.scala.html#79471" title="[A]()play.api.libs.concurrent.Promise[A] with play.api.libs.concurrent.Redeemable[A]">Promise</a><span title="()play.api.libs.concurrent.Promise[play.api.libs.ws.Response] with play.api.libs.concurrent.Redeemable[play.api.libs.ws.Response]" class="delimiter">[</span><a href="#217438" title="play.api.libs.ws.Response">Response</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#210603" title="=&gt; Option[play.api.libs.ws.SignatureCalculator]">calculator</a>.<span title="(f: play.api.libs.ws.SignatureCalculator =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#215958" title="play.api.libs.ws.SignatureCalculator">_</a>.<a href="#210139" title="(request: play.api.libs.ws.WS.WSRequest)Unit">sign</a><span class="delimiter">(</span><a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#15657" title="object play.api.libs.ws.WS">WS</a>.<a href="#209490" title="=&gt; com.ning.http.client.AsyncHttpClient">client</a>.<span title="(x$1: com.ning.http.client.Request, x$2: com.ning.http.client.AsyncHandler[com.ning.http.client.Response])com.ning.http.client.ListenableFuture[com.ning.http.client.Response]">executeRequest</span><span class="delimiter">(</span><a href="#209493" title="WSRequest.this.type" class="keyword">this</a>.<span title="()com.ning.http.client.Request">build</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#216042" title="com.ning.http.client.AsyncCompletionHandler[com.ning.http.client.Response]" class="keyword">new</a> <a title="anonymous class $anon extends com.ning.http.client.AsyncCompletionHandler[com.ning.http.client.Response]" id="216042">AsyncCompletionHandler</a><span class="delimiter">[</span>AHCResponse<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(response: com.ning.http.client.Response)com.ning.http.client.Response" id="216066">onCompleted</a><span class="delimiter">(</span><a title="com.ning.http.client.Response" id="216076">response</a>: <span title="com.ning.http.client.Response">AHCResponse</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#215952" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.ws.Response] with play.api.libs.concurrent.Redeemable[play.api.libs.ws.Response]">result</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.ws.Response)Unit">redeem</a><span class="delimiter">(</span><a href="#217438" title="(ahcResponse: com.ning.http.client.Response)play.api.libs.ws.Response">Response</a><span class="delimiter">(</span><a href="#216076" title="com.ning.http.client.Response">response</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#216076" title="com.ning.http.client.Response">response</a>
        <span class="delimiter">}</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Throwable)Unit" id="216067">onThrowable</a><span class="delimiter">(</span><a title="Throwable" id="216090">t</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#215952" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.ws.Response] with play.api.libs.concurrent.Redeemable[play.api.libs.ws.Response]">result</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.ws.Response)Unit">redeem</a><span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <a href="#216090" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <a href="#215952" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.ws.Response] with play.api.libs.concurrent.Redeemable[play.api.libs.ws.Response]">result</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Set an HTTP header.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String, value: String)play.api.libs.ws.WS.WSRequest" id="210619">setHeader</a><span class="delimiter">(</span><a title="String" id="210873">name</a>: <span title="String">String</span>, <a title="String" id="210874">value</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210606" title="(x$1: Map[String,Seq[String]])Unit">headers</a> = <a href="#210606" title="=&gt; Map[String,Seq[String]]">headers</a> <span title="(kv: (String, Seq[String]))scala.collection.immutable.Map[String,Seq[String]]">+</span> <span class="delimiter">(</span><a href="#210873" title="(x: String)ArrowAssoc[String]">name</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <span title="(xs: String*)List[String]">List</span><span class="delimiter">(</span><a href="#210874" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)play.api.libs.ws.WS.WSRequest">setHeader</span><span class="delimiter">(</span><a href="#210873" title="String">name</a>, <a href="#210874" title="String">value</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Add an HTTP header (used for headers with mutiple values).
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String, value: String)play.api.libs.ws.WS.WSRequest" id="210620">addHeader</a><span class="delimiter">(</span><a title="String" id="216105">name</a>: <span title="String">String</span>, <a title="String" id="216106">value</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210606" title="(x$1: Map[String,Seq[String]])Unit">headers</a> = <a href="#210606" title="=&gt; Map[String,Seq[String]]">headers</a> <span title="(kv: (String, Seq[String]))scala.collection.immutable.Map[String,Seq[String]]">+</span> <span class="delimiter">(</span><a href="#216105" title="(x: String)ArrowAssoc[String]">name</a> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <span class="delimiter">(</span><a href="#210606" title="=&gt; Map[String,Seq[String]]">headers</a>.<span title="(key: String)Option[Seq[String]]">get</span><span class="delimiter">(</span><a href="#216105" title="String">name</a><span class="delimiter">)</span>.<span title="(default: =&gt; Seq[String])Seq[String]">getOrElse</span><span class="delimiter">(</span>List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">:+</span> <a href="#216106" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)play.api.libs.ws.WS.WSRequest">addHeader</span><span class="delimiter">(</span><a href="#216105" title="String">name</a>, <a href="#216106" title="String">value</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Defines the request headers.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(hdrs: com.ning.http.client.FluentCaseInsensitiveStringsMap)play.api.libs.ws.WS.WSRequest" id="210621">setHeaders</a><span class="delimiter">(</span><a title="com.ning.http.client.FluentCaseInsensitiveStringsMap" id="216248">hdrs</a>: <span title="com.ning.http.client.FluentCaseInsensitiveStringsMap">FluentCaseInsensitiveStringsMap</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210606" title="(x$1: Map[String,Seq[String]])Unit">headers</a> = <a href="#210617" title="(headers: com.ning.http.client.FluentCaseInsensitiveStringsMap)scala.collection.immutable.Map[java.lang.String,Seq[java.lang.String]]">ningHeadersToMap</a><span class="delimiter">(</span><a href="#216248" title="com.ning.http.client.FluentCaseInsensitiveStringsMap">hdrs</a><span class="delimiter">)</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: com.ning.http.client.FluentCaseInsensitiveStringsMap)play.api.libs.ws.WS.WSRequest">setHeaders</span><span class="delimiter">(</span><a href="#216248" title="com.ning.http.client.FluentCaseInsensitiveStringsMap">hdrs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Defines the request headers.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(hdrs: java.util.Map[String,java.util.Collection[String]])play.api.libs.ws.WS.WSRequest" id="210622">setHeaders</a><span class="delimiter">(</span><a title="java.util.Map[String,java.util.Collection[String]]" id="216264">hdrs</a>: java.util.<span title="java.util.Map[String,java.util.Collection[String]]">Map</span><span class="delimiter">[</span>String, java.util.Collection<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210606" title="(x$1: Map[String,Seq[String]])Unit">headers</a> = <a href="#210616" title="(headers: java.util.Map[String,java.util.Collection[String]])scala.collection.immutable.Map[String,Seq[String]]">ningHeadersToMap</a><span class="delimiter">(</span><a href="#216264" title="java.util.Map[String,java.util.Collection[String]]">hdrs</a><span class="delimiter">)</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: java.util.Map[java.lang.String,java.util.Collection[java.lang.String]])play.api.libs.ws.WS.WSRequest">setHeaders</span><span class="delimiter">(</span><a href="#216264" title="java.util.Map[String,java.util.Collection[String]]">hdrs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Defines the request headers.
     */</span>
    <span class="keyword">def</span> <a title="(hdrs: Map[String,Seq[String]])play.api.libs.ws.WS.WSRequest" id="210623">setHeaders</a><span class="delimiter">(</span><a title="Map[String,Seq[String]]" id="216280">hdrs</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210606" title="(x$1: Map[String,Seq[String]])Unit">headers</a> = <a href="#216280" title="Map[String,Seq[String]]">hdrs</a>
      <a href="#216280" title="Map[String,Seq[String]]">hdrs</a>.<span title="(f: (String, Seq[String]) =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="(String, Seq[String])" id="216301">header</a> =&gt; <a href="#216301" title="(String, Seq[String])">header</a>.<span title="=&gt; Seq[String]">_2</span>.<span title="(f: String =&gt; play.api.libs.ws.WS.WSRequest)Unit">foreach</span><span class="delimiter">(</span><a title="String" id="216318">value</a> =&gt;
        <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)play.api.libs.ws.WS.WSRequest">addHeader</span><span class="delimiter">(</span><a href="#216301" title="(String, Seq[String])">header</a>.<span title="=&gt; String">_1</span>, <a href="#216318" title="String">value</a><span class="delimiter">)</span>
      <span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">this</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Defines the query string.
     */</span>
    <span class="keyword">def</span> <a title="(queryString: Map[String,String])play.api.libs.ws.WS.WSRequest" id="210624">setQueryString</a><span class="delimiter">(</span><a title="Map[String,String]" id="216322">queryString</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#216322" title="Map[String,String]">queryString</a>.<span title="(f: (String, String) =&gt; play.api.libs.ws.WS.WSRequest)Unit">foreach</span> <span class="delimiter">{</span> param: <span title="(String, String)" class="delimiter">(</span>String, String<span class="delimiter">)</span> =&gt; <a href="#209493" title="WSRequest.this.type" class="keyword">this</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)play.api.libs.ws.WS.WSRequest">addQueryParameter</span><span class="delimiter">(</span><a href="#216341" title="(String, String)">param</a>.<span title="=&gt; String">_1</span>, <a href="#216341" title="(String, String)">param</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">this</a>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Defines the URL.
     */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(url: String)play.api.libs.ws.WS.WSRequest" id="210625">setUrl</a><span class="delimiter">(</span><a title="String" id="211170">url</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#210609" title="(x$1: String)Unit">_url</a> = <a href="#211170" title="String">url</a>
      <a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">super</a>.<span title="(x$1: java.lang.String)play.api.libs.ws.WS.WSRequest">setUrl</span><span class="delimiter">(</span><a href="#211170" title="String">url</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span><span class="delimiter">[</span>libs<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[A](consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" id="210626">executeStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="210628">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="216343">consumer</a>: ResponseHeaders =&gt; Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">Promise</a><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">import</span> com.ning.http.client.AsyncHandler
      <span class="keyword">var</span> <a title="Boolean" id="216347">doneOrError</a> = <span title="Boolean(false)" class="keyword">false</span>
      <a href="#210603" title="=&gt; Option[play.api.libs.ws.SignatureCalculator]">calculator</a>.<span title="(f: play.api.libs.ws.SignatureCalculator =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#216354" title="play.api.libs.ws.SignatureCalculator">_</a>.<a href="#210139" title="(request: play.api.libs.ws.WS.WSRequest)Unit">sign</a><span class="delimiter">(</span><a href="#209493" title="play.api.libs.ws.WS.WSRequest" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="Int" id="216348">statusCode</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" id="216349">iterateeP</a> = <a href="../concurrent/Promise.scala.html#79471" title="[A]()play.api.libs.concurrent.Promise[A] with play.api.libs.concurrent.Redeemable[A]">Promise</a><span title="()play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" class="delimiter">[</span><a href="../iteratee/Iteratee.scala.html#14381" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">Iteratee</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="216350">iteratee</a>: <a href="../iteratee/Iteratee.scala.html#14381" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">Iteratee</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>

      <a href="#15657" title="object play.api.libs.ws.WS">WS</a>.<a href="#209490" title="=&gt; com.ning.http.client.AsyncHttpClient">client</a>.<span title="(x$1: com.ning.http.client.Request, x$2: com.ning.http.client.AsyncHandler[Unit])com.ning.http.client.ListenableFuture[Unit]">executeRequest</span><span class="delimiter">(</span><a href="#209493" title="WSRequest.this.type" class="keyword">this</a>.<span title="()com.ning.http.client.Request">build</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#216365" title="java.lang.Object with com.ning.http.client.AsyncHandler[Unit]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with com.ning.http.client.AsyncHandler[Unit]" id="216365">AsyncHandler</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">import</span> com.ning.http.client.<span title="object com.ning.http.client.AsyncHandler">AsyncHandler</span>.STATE

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(status: com.ning.http.client.HttpResponseStatus)com.ning.http.client.AsyncHandler.STATE" id="216370">onStatusReceived</a><span class="delimiter">(</span><a title="com.ning.http.client.HttpResponseStatus" id="216375">status</a>: <span title="com.ning.http.client.HttpResponseStatus">HttpResponseStatus</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#216348" title="Int">statusCode</a> = <a href="#216375" title="com.ning.http.client.HttpResponseStatus">status</a>.<span title="()Int">getStatusCode</span><span class="delimiter">(</span><span class="delimiter">)</span>
          STATE.<span title="com.ning.http.client.AsyncHandler.STATE(value CONTINUE)">CONTINUE</span>
        <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(h: com.ning.http.client.HttpResponseHeaders)com.ning.http.client.AsyncHandler.STATE" id="216371">onHeadersReceived</a><span class="delimiter">(</span><a title="com.ning.http.client.HttpResponseHeaders" id="216401">h</a>: <span title="com.ning.http.client.HttpResponseHeaders">HttpResponseHeaders</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="com.ning.http.client.FluentCaseInsensitiveStringsMap" id="216413">headers</a> = <a href="#216401" title="com.ning.http.client.HttpResponseHeaders">h</a>.<span title="()com.ning.http.client.FluentCaseInsensitiveStringsMap">getHeaders</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#216350" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">iteratee</a> = <a href="#216343" title="(v1: play.api.libs.ws.ResponseHeaders)play.api.libs.iteratee.Iteratee[Array[Byte],A]">consumer</a><span class="delimiter">(</span><a href="#217442" title="(status: Int, headers: Map[String,Seq[String]])play.api.libs.ws.ResponseHeaders">ResponseHeaders</a><span class="delimiter">(</span><a href="#216348" title="Int">statusCode</a>, <a href="#210617" title="(headers: com.ning.http.client.FluentCaseInsensitiveStringsMap)scala.collection.immutable.Map[java.lang.String,Seq[java.lang.String]]">ningHeadersToMap</a><span class="delimiter">(</span><a href="#216413" title="com.ning.http.client.FluentCaseInsensitiveStringsMap">headers</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          STATE.<span title="com.ning.http.client.AsyncHandler.STATE(value CONTINUE)">CONTINUE</span>
        <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(bodyPart: com.ning.http.client.HttpResponseBodyPart)com.ning.http.client.AsyncHandler.STATE" id="216372">onBodyPartReceived</a><span class="delimiter">(</span><a title="com.ning.http.client.HttpResponseBodyPart" id="216428">bodyPart</a>: <span title="com.ning.http.client.HttpResponseBodyPart">HttpResponseBodyPart</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span title="com.ning.http.client.AsyncHandler.STATE" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#216347" title="Boolean">doneOrError</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#216350" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">iteratee</a> = <a href="#216350" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">iteratee</a>.<a href="../iteratee/Iteratee.scala.html#75090" title="(done: (A, play.api.libs.iteratee.Input[Array[Byte]]) =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A], cont: play.api.libs.iteratee.Input[Array[Byte]] =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A] =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A], error: (String, play.api.libs.iteratee.Input[Array[Byte]]) =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.iteratee.Iteratee[Array[Byte],A]">pureFlatFold</a><span class="delimiter">(</span>
              <span class="comment">// DONE</span>
              <span class="delimiter">(</span><a title="A" id="216450">a</a>, <a title="play.api.libs.iteratee.Input[Array[Byte]]" id="216451">e</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
                <a href="#216347" title="Boolean">doneOrError</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="216452">it</a> = <a href="../iteratee/Iteratee.scala.html#75236" title="(a: A, e: play.api.libs.iteratee.Input[Array[Byte]])play.api.libs.iteratee.Iteratee[Array[Byte],A]">Done</a><span class="delimiter">(</span><a href="#216450" title="A">a</a>, <a href="#216451" title="play.api.libs.iteratee.Input[Array[Byte]]">e</a><span class="delimiter">)</span>
                <a href="#216349" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">iterateeP</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])Unit">redeem</a><span class="delimiter">(</span><a href="#216452" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">it</a><span class="delimiter">)</span>
                <a href="#216452" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">it</a>
              <span class="delimiter">}</span>,

              <span class="comment">// CONTINUE</span>
              <a title="play.api.libs.iteratee.Input[Array[Byte]] =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="216461">k</a> =&gt; <span class="delimiter">{</span>
                <a href="#216461" title="(v1: play.api.libs.iteratee.Input[Array[Byte]])play.api.libs.iteratee.Iteratee[Array[Byte],A]">k</a><span class="delimiter">(</span><a href="../iteratee/Iteratee.scala.html#75164" title="(e: Array[Byte])play.api.libs.iteratee.Input.El[Array[Byte]]">El</a><span class="delimiter">(</span><a href="#216428" title="com.ning.http.client.HttpResponseBodyPart">bodyPart</a>.<span title="()Array[Byte]">getBodyPartBytes</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>,

              <span class="comment">// ERROR</span>
              <span class="delimiter">(</span><a title="String" id="216467">e</a>, <a title="play.api.libs.iteratee.Input[Array[Byte]]" id="216468">input</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
                <a href="#216347" title="Boolean">doneOrError</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[Array[Byte],Nothing]" id="216469">it</a> = <a href="../iteratee/Iteratee.scala.html#176916" title="(msg: String, e: play.api.libs.iteratee.Input[Array[Byte]])play.api.libs.iteratee.Iteratee[Array[Byte],Nothing]">Error</a><span class="delimiter">(</span><a href="#216467" title="String">e</a>, <a href="#216468" title="play.api.libs.iteratee.Input[Array[Byte]]">input</a><span class="delimiter">)</span>
                <a href="#216349" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">iterateeP</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])Unit">redeem</a><span class="delimiter">(</span><a href="#216469" title="play.api.libs.iteratee.Iteratee[Array[Byte],Nothing]">it</a><span class="delimiter">)</span>
                <a href="#216469" title="play.api.libs.iteratee.Iteratee[Array[Byte],Nothing]">it</a>
              <span class="delimiter">}</span><span class="delimiter">)</span>
            STATE.<span title="com.ning.http.client.AsyncHandler.STATE(value CONTINUE)">CONTINUE</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#216350" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">iteratee</a> = <span title="Null(null)" class="keyword">null</span>
            STATE.<span title="com.ning.http.client.AsyncHandler.STATE(value ABORT)">ABORT</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="216373">onCompleted</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span title="(x: play.api.libs.iteratee.Iteratee[Array[Byte],A])Option[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">Option</span><span class="delimiter">(</span><a href="#216350" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">iteratee</a><span class="delimiter">)</span>.<span title="(f: play.api.libs.iteratee.Iteratee[Array[Byte],A] =&gt; Unit)Option[Unit]">map</span><span title="Unit" class="delimiter">(</span><a href="#216349" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">iterateeP</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])Unit">redeem</a><span class="delimiter">(</span><a href="#216496" title="play.api.libs.iteratee.Iteratee[Array[Byte],A]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Throwable)Unit" id="216374">onThrowable</a><span class="delimiter">(</span><a title="Throwable" id="216498">t</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#216349" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">iterateeP</a>.<a href="../concurrent/Promise.scala.html#102784" title="(a: =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])Unit">redeem</a><span class="delimiter">(</span><span title="Nothing" class="keyword">throw</span> <a href="#216498" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <a href="#216349" title="Promise extends play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]] with play.api.libs.concurrent.Redeemable[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">iterateeP</a>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="comment">/**
   * A WS Request builder.
   */</span>
  case <span class="keyword">class</span> <a title="class WSRequestHolder extends java.lang.Object with ScalaObject with Product with Serializable" id="217232">WSRequestHolder</a><a href="#217232" title="ScalaObject" class="delimiter">(</a><a title="String" id="214857">url</a>: <span title="String">String</span>,
      <a title="Map[String,Seq[String]]" id="214858">headers</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>,
      <a title="Map[String,String]" id="214859">queryString</a>: <span title="Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>,
      <a title="Option[play.api.libs.ws.SignatureCalculator]" id="214860">calc</a>: <span title="Option[play.api.libs.ws.SignatureCalculator]">Option</span><span class="delimiter">[</span>SignatureCalculator<span class="delimiter">]</span>,
      <a title="Option[(String, String, com.ning.http.client.Realm.AuthScheme)]" id="214861">auth</a>: <span title="Option[(String, String, com.ning.http.client.Realm.AuthScheme)]">Option</span><span class="delimiter">[</span>Tuple3<span class="delimiter">[</span>String, String, AuthScheme<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="comment">/**
     * sets the signature calculator for the request
     * @param calc
     */</span>
    <span class="keyword">def</span> <a title="(calc: play.api.libs.ws.SignatureCalculator)play.api.libs.ws.WS.WSRequestHolder" id="213620">sign</a><span class="delimiter">(</span><a title="play.api.libs.ws.SignatureCalculator" id="216526">calc</a>: <a href="#15689" title="play.api.libs.ws.SignatureCalculator">SignatureCalculator</a><span class="delimiter">)</span>: <a href="#217232" title="play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a> = <a href="#217232" title="WSRequestHolder.this.type" class="keyword">this</a>.<a href="#214857" title="String" id="216558">copy</a><span class="delimiter">(</span>calc = <span title="(x: play.api.libs.ws.SignatureCalculator)Some[play.api.libs.ws.SignatureCalculator]">Some</span><a title="Some[play.api.libs.ws.SignatureCalculator]" id="216554" class="delimiter">(</a><a href="#216526" title="play.api.libs.ws.SignatureCalculator">calc</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * sets the authentication realm
     * @param calc
     */</span>
    <span class="keyword">def</span> <a title="(username: String, password: String, scheme: com.ning.http.client.Realm.AuthScheme)play.api.libs.ws.WS.WSRequestHolder" id="213621">withAuth</a><span class="delimiter">(</span><a title="String" id="216559">username</a>: <span title="String">String</span>, <a title="String" id="216560">password</a>: <span title="String">String</span>, <a title="com.ning.http.client.Realm.AuthScheme" id="216561">scheme</a>: <span title="com.ning.http.client.Realm.AuthScheme">AuthScheme</span><span class="delimiter">)</span>: <a href="#217232" title="play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a> =
      <a href="#217232" title="WSRequestHolder.this.type" class="keyword">this</a>.<a href="#214857" title="String" id="216582">copy</a><span class="delimiter">(</span>auth = <span title="(x: (String, String, com.ning.http.client.Realm.AuthScheme))Some[(String, String, com.ning.http.client.Realm.AuthScheme)]">Some</span><a title="Some[(String, String, com.ning.http.client.Realm.AuthScheme)]" id="216578" class="delimiter">(</a><span title="(_1: String, _2: String, _3: com.ning.http.client.Realm.AuthScheme)(String, String, com.ning.http.client.Realm.AuthScheme)" class="delimiter">(</span><a href="#216559" title="String">username</a>, <a href="#216560" title="String">password</a>, <a href="#216561" title="com.ning.http.client.Realm.AuthScheme">scheme</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * adds any number of HTTP headers
     * @param hdrs
     */</span>
    <span class="keyword">def</span> <a title="(hdrs: (String, String)*)play.api.libs.ws.WS.WSRequestHolder" id="213622">withHeaders</a><span class="delimiter">(</span><a title="(String, String)*" id="216583">hdrs</a>: <span title="(String, String)*" class="delimiter">(</span>String, String<span class="delimiter">)</span>*<span class="delimiter">)</span>: <a href="#217232" title="play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Map[String,Seq[String]]" id="216585">headers</a> = <a href="#216583" title="(String, String)*">hdrs</a>.<span title="(z: Map[String,Seq[String]])(op: (Map[String,Seq[String]], (String, String)) =&gt; Map[String,Seq[String]])Map[String,Seq[String]]">foldLeft</span><span class="delimiter">(</span><a href="#217232" title="WSRequestHolder.this.type" class="keyword">this</a>.<a href="#214858" title="=&gt; Map[String,Seq[String]]">headers</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Map[String,Seq[String]]" id="216598">m</a>, <a title="(String, String)" id="216599">hdr</a><span class="delimiter">)</span> =&gt;
        <span title="Map[String,Seq[String]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#216598" title="Map[String,Seq[String]]">m</a>.<span title="(key: String)Boolean">contains</span><span class="delimiter">(</span><a href="#216599" title="(String, String)">hdr</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#216598" title="Map[String,Seq[String]]">m</a>.<span title="(key: String, value: Seq[String])scala.collection.immutable.Map[String,Seq[String]]">updated</span><span class="delimiter">(</span><a href="#216599" title="(String, String)">hdr</a>.<span title="=&gt; String">_1</span>, <a href="#216598" title="(key: String)Seq[String]">m</a><span class="delimiter">(</span><a href="#216599" title="(String, String)">hdr</a>.<span title="=&gt; String">_1</span><span class="delimiter">)</span> <span title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">:+</span> <a href="#216599" title="(String, String)">hdr</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">(</span><a href="#216598" title="Map[String,Seq[String]]">m</a> <span title="(kv: (String, Seq[String]))scala.collection.immutable.Map[String,Seq[String]]">+</span> <span class="delimiter">(</span><a href="#216599" title="(String, String)">hdr</a>.<span title="(x: String)ArrowAssoc[String]">_1</span> <span title="(y: Seq[String])(String, Seq[String])">-&gt;</span> <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span><a href="#216599" title="(String, String)">hdr</a>.<span title="=&gt; String">_2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
      <a href="#217232" title="WSRequestHolder.this.type" class="keyword">this</a>.<a href="#214857" title="String" id="216760">copy</a><span class="delimiter">(</span>headers = <a href="#216585" title="Map[String,Seq[String]]" id="216756">headers</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * adds any number of query string parameters to the
     */</span>
    <span class="keyword">def</span> <a title="(parameters: (String, String)*)play.api.libs.ws.WS.WSRequestHolder" id="213623">withQueryString</a><span class="delimiter">(</span><a title="(String, String)*" id="216761">parameters</a>: <span title="(String, String)*" class="delimiter">(</span>String, String<span class="delimiter">)</span>*<span class="delimiter">)</span>: <a href="#217232" title="play.api.libs.ws.WS.WSRequestHolder">WSRequestHolder</a> =
      <a href="#217232" title="WSRequestHolder.this.type" class="keyword">this</a>.<a href="#214857" title="String" id="216834">copy</a><span class="delimiter">(</span>queryString = <a href="#216761" title="(String, String)*">parameters</a>.<span title="(z: Map[String,String])(op: (Map[String,String], (String, String)) =&gt; Map[String,String])Map[String,String]">foldLeft</span><span class="delimiter">(</span><a href="#214859" title="=&gt; Map[String,String]">queryString</a><span class="delimiter">)</span><a title="Map[String,String]" id="216830" class="delimiter">(</a><span class="delimiter">(</span><a title="Map[String,String]" id="216775">m</a>, <a title="(String, String)" id="216776">param</a><span class="delimiter">)</span> =&gt; <a href="#216775" title="Map[String,String]">m</a> <span title="(kv: (String, String))scala.collection.immutable.Map[String,String]">+</span> <a href="#216776" title="(String, String)">param</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * performs a get with supplied body
     */</span>

    <span class="keyword">def</span> <a title="()play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213624">get</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213647" title="(method: String)play.api.libs.ws.WS.WSRequest">prepare</a><span class="delimiter">(</span><span title="java.lang.String(&quot;GET&quot;)" class="string">&quot;GET&quot;</span><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="comment">/**
     * performs a get with supplied body
     * @param consumer that's handling the response
     */</span>
    <span class="keyword">def</span> <a title="[A](consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" id="213625">get</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213627">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="214159">consumer</a>: ResponseHeaders =&gt; Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">Promise</a><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">]</span> =
      <a href="#213647" title="(method: String)play.api.libs.ws.WS.WSRequest">prepare</a><span class="delimiter">(</span><span title="java.lang.String(&quot;GET&quot;)" class="string">&quot;GET&quot;</span><span class="delimiter">)</span>.<a href="#210626" title="(consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">executeStream</a><span class="delimiter">(</span><a href="#214159" title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]">consumer</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Perform a POST on the request asynchronously.
     */</span>
    <span class="keyword">def</span> <a title="[T](body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213628">post</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213630">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="213652">body</a>: <a href="#213630" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.http.Writeable[T]" id="213653">wrt</a>: <a href="../../http/Writeable.scala.html#12730" title="play.api.http.Writeable[T]">Writeable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="play.api.http.ContentTypeOf[T]" id="213654">ct</a>: <a href="../../http/ContentTypeOf.scala.html#12709" title="play.api.http.ContentTypeOf[T]">ContentTypeOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213648" title="(method: String, body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.ws.WS.WSRequest">prepare</a><a href="#213653" title="play.api.http.Writeable[T]" class="delimiter">(</a><span title="java.lang.String(&quot;POST&quot;)" class="string">&quot;POST&quot;</span>, <a href="#213652" title="T">body</a><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="comment">/**
     * performs a POST with supplied body
     * @param consumer that's handling the response
     */</span>
    <span class="keyword">def</span> <a title="[A, T](body: T)(consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" id="213631">postAndRetrieveStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213634">A</a>, <a title="&gt;: Nothing &lt;: Any" id="213635">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="217021">body</a>: <a href="#213635" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="217022">consumer</a>: ResponseHeaders =&gt; Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.http.Writeable[T]" id="217023">wrt</a>: <a href="../../http/Writeable.scala.html#12730" title="play.api.http.Writeable[T]">Writeable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="play.api.http.ContentTypeOf[T]" id="217024">ct</a>: <a href="../../http/ContentTypeOf.scala.html#12709" title="play.api.http.ContentTypeOf[T]">ContentTypeOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">Promise</a><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#213648" title="(method: String, body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.ws.WS.WSRequest">prepare</a><a href="#217023" title="play.api.http.Writeable[T]" class="delimiter">(</a><span title="java.lang.String(&quot;POST&quot;)" class="string">&quot;POST&quot;</span>, <a href="#217021" title="T">body</a><span class="delimiter">)</span>.<a href="#210626" title="(consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">executeStream</a><span class="delimiter">(</span><a href="#217022" title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]">consumer</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Perform a PUT on the request asynchronously.
     */</span>
    <span class="keyword">def</span> <a title="[T](body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213636">put</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213638">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="217059">body</a>: <a href="#213638" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.http.Writeable[T]" id="217060">wrt</a>: <a href="../../http/Writeable.scala.html#12730" title="play.api.http.Writeable[T]">Writeable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="play.api.http.ContentTypeOf[T]" id="217061">ct</a>: <a href="../../http/ContentTypeOf.scala.html#12709" title="play.api.http.ContentTypeOf[T]">ContentTypeOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213648" title="(method: String, body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.ws.WS.WSRequest">prepare</a><a href="#217060" title="play.api.http.Writeable[T]" class="delimiter">(</a><span title="java.lang.String(&quot;PUT&quot;)" class="string">&quot;PUT&quot;</span>, <a href="#217059" title="T">body</a><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="comment">/**
     * performs a PUT with supplied body
     * @param consumer that's handling the response
     */</span>
    <span class="keyword">def</span> <a title="[A, T](body: T)(consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]" id="213639">putAndRetrieveStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213642">A</a>, <a title="&gt;: Nothing &lt;: Any" id="213643">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="217092">body</a>: <a href="#213643" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]" id="217093">consumer</a>: ResponseHeaders =&gt; Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.http.Writeable[T]" id="217094">wrt</a>: <a href="../../http/Writeable.scala.html#12730" title="play.api.http.Writeable[T]">Writeable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="play.api.http.ContentTypeOf[T]" id="217095">ct</a>: <a href="../../http/ContentTypeOf.scala.html#12709" title="play.api.http.ContentTypeOf[T]">ContentTypeOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">Promise</a><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, A<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#213648" title="(method: String, body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.ws.WS.WSRequest">prepare</a><a href="#217094" title="play.api.http.Writeable[T]" class="delimiter">(</a><span title="java.lang.String(&quot;PUT&quot;)" class="string">&quot;PUT&quot;</span>, <a href="#217092" title="T">body</a><span class="delimiter">)</span>.<a href="#210626" title="(consumer: play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A])play.api.libs.concurrent.Promise[play.api.libs.iteratee.Iteratee[Array[Byte],A]]">executeStream</a><span class="delimiter">(</span><a href="#217093" title="play.api.libs.ws.ResponseHeaders =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],A]">consumer</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Perform a DELETE on the request asynchronously.
     */</span>
    <span class="keyword">def</span> <a title="()play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213644">delete</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213647" title="(method: String)play.api.libs.ws.WS.WSRequest">prepare</a><span class="delimiter">(</span><span title="java.lang.String(&quot;DELETE&quot;)" class="string">&quot;DELETE&quot;</span><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="comment">/**
     * Perform a HEAD on the request asynchronously.
     */</span>
    <span class="keyword">def</span> <a title="()play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213645">head</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213647" title="(method: String)play.api.libs.ws.WS.WSRequest">prepare</a><span class="delimiter">(</span><span title="java.lang.String(&quot;HEAD&quot;)" class="string">&quot;HEAD&quot;</span><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="comment">/**
     * Perform a OPTIONS on the request asynchronously.
     */</span>
    <span class="keyword">def</span> <a title="()play.api.libs.concurrent.Promise[play.api.libs.ws.Response]" id="213646">options</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../concurrent/Promise.scala.html#13304" title="play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">Promise</a><span class="delimiter">[</span>Response<span class="delimiter">]</span> = <a href="#213647" title="(method: String)play.api.libs.ws.WS.WSRequest">prepare</a><span class="delimiter">(</span><span title="java.lang.String(&quot;OPTIONS&quot;)" class="string">&quot;OPTIONS&quot;</span><span class="delimiter">)</span>.<a href="#210618" title="=&gt; play.api.libs.concurrent.Promise[play.api.libs.ws.Response]">execute</a>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(method: String)play.api.libs.ws.WS.WSRequest" id="213647">prepare</a><span class="delimiter">(</span><a title="String" id="216973">method</a>: <span title="String">String</span><span class="delimiter">)</span> =
      <span title="play.api.libs.ws.WS.WSRequest" class="keyword">new</span> <a href="#209493" title="play.api.libs.ws.WS.WSRequest">WSRequest</a><span class="delimiter">(</span><a href="#216973" title="String">method</a>, <a href="#214861" title="=&gt; Option[(String, String, com.ning.http.client.Realm.AuthScheme)]">auth</a>, <a href="#214860" title="=&gt; Option[play.api.libs.ws.SignatureCalculator]">calc</a><span class="delimiter">)</span>.<a href="#210625" title="(url: String)play.api.libs.ws.WS.WSRequest">setUrl</a><span class="delimiter">(</span><a href="#214857" title="=&gt; String">url</a><span class="delimiter">)</span>
        .<a href="#210623" title="(hdrs: Map[String,Seq[String]])play.api.libs.ws.WS.WSRequest">setHeaders</a><span class="delimiter">(</span><a href="#214858" title="=&gt; Map[String,Seq[String]]">headers</a><span class="delimiter">)</span>
        .<a href="#210624" title="(queryString: Map[String,String])play.api.libs.ws.WS.WSRequest">setQueryString</a><span class="delimiter">(</span><a href="#214859" title="=&gt; Map[String,String]">queryString</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](method: String, body: T)(implicit wrt: play.api.http.Writeable[T], implicit ct: play.api.http.ContentTypeOf[T])play.api.libs.ws.WS.WSRequest" id="213648">prepare</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="213650">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="216839">method</a>: <span title="String">String</span>, <a title="T" id="216840">body</a>: <a href="#213650" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.http.Writeable[T]" id="216841">wrt</a>: <a href="../../http/Writeable.scala.html#12730" title="play.api.http.Writeable[T]">Writeable</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="play.api.http.ContentTypeOf[T]" id="216842">ct</a>: <a href="../../http/ContentTypeOf.scala.html#12709" title="play.api.http.ContentTypeOf[T]">ContentTypeOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
      <span title="play.api.libs.ws.WS.WSRequest" class="keyword">new</span> <a href="#209493" title="play.api.libs.ws.WS.WSRequest">WSRequest</a><span class="delimiter">(</span><a href="#216839" title="String">method</a>, <a href="#214861" title="=&gt; Option[(String, String, com.ning.http.client.Realm.AuthScheme)]">auth</a>, <a href="#214860" title="=&gt; Option[play.api.libs.ws.SignatureCalculator]">calc</a><span class="delimiter">)</span>.<a href="#210625" title="(url: String)play.api.libs.ws.WS.WSRequest">setUrl</a><span class="delimiter">(</span><a href="#214857" title="=&gt; String">url</a><span class="delimiter">)</span>
        .<a href="#210623" title="(hdrs: Map[String,Seq[String]])play.api.libs.ws.WS.WSRequest">setHeaders</a><span class="delimiter">(</span><span title="(elems: (java.lang.String, Seq[String])*)scala.collection.immutable.Map[java.lang.String,Seq[String]]">Map</span><span class="delimiter">(</span><span title="(x: java.lang.String)ArrowAssoc[java.lang.String]" class="string">&quot;Content-Type&quot;</span> <span title="(y: Seq[String])(java.lang.String, Seq[String])">-&gt;</span> <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span><a href="#216842" title="play.api.http.ContentTypeOf[T]">ct</a>.<a href="../../http/ContentTypeOf.scala.html#93278" title="=&gt; Option[String]">mimeType</a>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;text/plain&quot;)" class="string">&quot;text/plain&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(xs: scala.collection.GenTraversableOnce[(java.lang.String, Seq[String])])scala.collection.immutable.Map[java.lang.String,Seq[String]]">++</span> <a href="#214858" title="=&gt; Map[String,Seq[String]]">headers</a><span class="delimiter">)</span>
        .<a href="#210624" title="(queryString: Map[String,String])play.api.libs.ws.WS.WSRequest">setQueryString</a><span class="delimiter">(</span><a href="#214859" title="=&gt; Map[String,String]">queryString</a><span class="delimiter">)</span>
        .<span title="(x$1: Array[Byte])play.api.libs.ws.WS.WSRequest">setBody</span><span class="delimiter">(</span><a href="#216841" title="play.api.http.Writeable[T]">wrt</a>.<a href="../../http/Writeable.scala.html#75591" title="(v1: T)Array[Byte]">transform</a><span class="delimiter">(</span><a href="#216840" title="T">body</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A WS HTTP response.
 */</span>
case <span class="keyword">class</span> <a title="class Response extends java.lang.Object with ScalaObject with Product with Serializable" id="217438">Response</a><a href="#217438" title="ScalaObject" class="delimiter">(</a><a title="com.ning.http.client.Response" id="216086">ahcResponse</a>: <span title="com.ning.http.client.Response">AHCResponse</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> scala.xml._
  <span class="keyword">import</span> play.api.libs.json._

  <span class="comment">/**
   * Get the underlying response object.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; com.ning.http.client.Response" id="213685">getAHCResponse</a> = <a href="#216086" title="=&gt; com.ning.http.client.Response">ahcResponse</a>

  <span class="comment">/**
   * The response status code.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="213686">status</a>: <span title="Int">Int</span> = <a href="#216086" title="=&gt; com.ning.http.client.Response">ahcResponse</a>.<span title="()Int">getStatusCode</span><span class="delimiter">(</span><span class="delimiter">)</span>;

  <span class="comment">/**
   * Get a response header.
   */</span>
  <span class="keyword">def</span> <a title="(key: String)Option[String]" id="213687">header</a><span class="delimiter">(</span><a title="String" id="214193">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(x: java.lang.String)Option[java.lang.String]">Option</span><span class="delimiter">(</span><a href="#216086" title="=&gt; com.ning.http.client.Response">ahcResponse</a>.<span title="(x$1: java.lang.String)java.lang.String">getHeader</span><span class="delimiter">(</span><a href="#214193" title="String">key</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The response body as String.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="213689">body</a>: <span title="String">String</span> = <a href="#216086" title="=&gt; com.ning.http.client.Response">ahcResponse</a>.<span title="()java.lang.String">getResponseBody</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The response body as Xml.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.xml.Elem" id="213691">xml</a>: <span title="scala.xml.Elem">Elem</span> = <span title="object scala.xml.XML">XML</span>.<span title="(string: String)scala.xml.Elem">loadString</span><span class="delimiter">(</span><a href="#213688" title="=&gt; String">body</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The response body as Json.
   */</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.libs.json.JsValue" id="213693">json</a>: <a href="../json/JsValue.scala.html#15114" title="play.api.libs.json.JsValue">JsValue</a> = <a href="../json/Json.scala.html#15208" title="object play.api.libs.json.Json">Json</a>.<a href="../json/Json.scala.html#105921" title="(input: String)play.api.libs.json.JsValue">parse</a><span class="delimiter">(</span><a href="#213688" title="=&gt; String">body</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * An HTTP response header (the body has not been retrieved yet)
 */</span>
case <span class="keyword">class</span> <a title="class ResponseHeaders extends java.lang.Object with ScalaObject with Product with Serializable" id="217442">ResponseHeaders</a><a href="#217442" title="ScalaObject" class="delimiter">(</a><a title="Int" id="216415">status</a>: <span title="Int">Int</span>, <a title="Map[String,Seq[String]]" id="216416">headers</a>: <span title="Map[String,Seq[String]]">Map</span><span class="delimiter">[</span>String, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>

<span class="comment">/**
 * Sign a WS call.
 */</span>
<span class="keyword">trait</span> <a title="trait SignatureCalculator extends java.lang.Object" id="15689">SignatureCalculator</a> <span title="java.lang.Object" class="delimiter">{</span>

  <span class="comment">/**
   * Sign it.
   */</span>
  <span class="keyword">def</span> <a title="(request: play.api.libs.ws.WS.WSRequest)Unit" id="210139">sign</a><span class="delimiter">(</span><a title="play.api.libs.ws.WS.WSRequest" id="210657">request</a>: WS.<a href="#209493" title="play.api.libs.ws.WS.WSRequest">WSRequest</a><span class="delimiter">)</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>