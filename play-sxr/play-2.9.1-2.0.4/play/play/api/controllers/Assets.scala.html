<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play/play/api/controllers/Assets.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> controllers

<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.mvc._
<span class="keyword">import</span> play.api.libs._
<span class="keyword">import</span> play.api.libs.iteratee._

<span class="keyword">import</span> <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.current

<span class="keyword">import</span> java.io._
<span class="keyword">import</span> java.net.JarURLConnection
<span class="keyword">import</span> scalax.io.<span class="delimiter">{</span> Resource <span class="delimiter">}</span>
<span class="keyword">import</span> org.joda.time.format.<span class="delimiter">{</span>DateTimeFormatter, DateTimeFormat<span class="delimiter">}</span>
<span class="keyword">import</span> org.joda.time.DateTimeZone
<span class="keyword">import</span> collection.<span title="object scala.collection.JavaConverters">JavaConverters</span>._

<span class="comment">/**
 * Controller that serves static resources.
 *
 * Resources are searched in the classpath.
 *
 * It handles Last-Modified and ETag header automatically.
 * If a gzipped version of a resource is found (Same resource name with the .gz suffix), it is served instead.
 *
 * You can set a custom Cache directive for a particular resource if needed. For example in your application.conf file:
 *
 * {{{
 * &quot;assets.cache./public/images/logo.png&quot; = &quot;max-age=3600&quot;
 * }}}
 *
 * You can use this controller in any application, just by declaring the appropriate route. For example:
 * {{{
 * GET     /assets/\uFEFF*file               controllers.Assets.at(path=&quot;/public&quot;, file)
 * }}}
 */</span>
<span class="keyword">object</span> <a title="object controllers.Assets" id="11110">Assets</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../mvc/Controller.scala.html#16955" title="play.api.mvc.Controller">Controller</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="100878">timeZoneCode</a> = <span title="java.lang.String(&quot;GMT&quot;)" class="string">&quot;GMT&quot;</span>

  <span class="comment">//Dateformatter is immutable and threadsafe</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="org.joda.time.format.DateTimeFormatter" id="100880">df</a>: <span title="org.joda.time.format.DateTimeFormatter">DateTimeFormatter</span> = 
    <span title="object org.joda.time.format.DateTimeFormat">DateTimeFormat</span>.<span title="(x$1: java.lang.String)org.joda.time.format.DateTimeFormatter">forPattern</span><span class="delimiter">(</span><span title="java.lang.String(&quot;EEE, dd MMM yyyy HH:mm:ss \'&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss '&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#100878" title="=&gt; java.lang.String">timeZoneCode</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.util.Locale)org.joda.time.format.DateTimeFormatter">withLocale</span><span class="delimiter">(</span>java.util.<span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span>.<span title="(x$1: org.joda.time.DateTimeZone)org.joda.time.format.DateTimeFormatter">withZone</span><span class="delimiter">(</span><span title="object org.joda.time.DateTimeZone">DateTimeZone</span>.<span title="(x$1: java.lang.String)org.joda.time.DateTimeZone">forID</span><span class="delimiter">(</span><a href="#100878" title="=&gt; java.lang.String">timeZoneCode</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="comment">//Dateformatter is immutable and threadsafe</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="org.joda.time.format.DateTimeFormatter" id="100882">dfp</a>: <span title="org.joda.time.format.DateTimeFormatter">DateTimeFormatter</span> = 
    <span title="object org.joda.time.format.DateTimeFormat">DateTimeFormat</span>.<span title="(x$1: java.lang.String)org.joda.time.format.DateTimeFormatter">forPattern</span><span class="delimiter">(</span><span title="java.lang.String(&quot;EEE, dd MMM yyyy HH:mm:ss&quot;)" class="string">&quot;EEE, dd MMM yyyy HH:mm:ss&quot;</span><span class="delimiter">)</span>.<span title="(x$1: java.util.Locale)org.joda.time.format.DateTimeFormatter">withLocale</span><span class="delimiter">(</span>java.util.<span title="object java.util.Locale">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span>.<span title="(x$1: org.joda.time.DateTimeZone)org.joda.time.format.DateTimeFormatter">withZone</span><span class="delimiter">(</span><span title="object org.joda.time.DateTimeZone">DateTimeZone</span>.<span title="(x$1: java.lang.String)org.joda.time.DateTimeZone">forID</span><span class="delimiter">(</span><a href="#100878" title="=&gt; java.lang.String">timeZoneCode</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="100884">parsableTimezoneCode</a> = <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#100878" title="=&gt; java.lang.String">timeZoneCode</a>

  <span class="comment">/**
   * Generates an `Action` that serves a static resource.
   *
   * @param path the root folder for searching the static resource files, such as `&quot;/public&quot;`
   * @param file the file part extracted from the URL
   */</span>
  <span class="keyword">def</span> <a title="(path: String, file: String)play.api.mvc.Action[play.api.mvc.AnyContent]" id="100886">at</a><span class="delimiter">(</span><a title="String" id="101777">path</a>: <span title="String">String</span>, <a title="String" id="101778">file</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../mvc/Action.scala.html#16109" title="play.api.mvc.Action[play.api.mvc.AnyContent]">Action</a><span class="delimiter">[</span>AnyContent<span class="delimiter">]</span> = <a href="../mvc/Action.scala.html#101784" title="(block: play.api.mvc.Request[play.api.mvc.AnyContent] =&gt; play.api.mvc.Result)play.api.mvc.Action[play.api.mvc.AnyContent]">Action</a> <span class="delimiter">{</span> <a title="play.api.mvc.Request[play.api.mvc.AnyContent]" id="101816">request</a> =&gt;
    <span class="comment">// -- LastModified handling</span>

      
    <span class="keyword">def</span> <a title="(date: String)Option[java.util.Date]" id="101817">parseDate</a><span class="delimiter">(</span><a title="String" id="101819">date</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[java.util.Date]">Option</span><span class="delimiter">[</span>java.util.Date<span class="delimiter">]</span> = <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="comment">//jodatime does not parse timezones, so we handle that manually</span>
      <span class="keyword">val</span> <a title="java.util.Date" id="101820">d</a> = <a href="#100882" title="=&gt; org.joda.time.format.DateTimeFormatter">dfp</a>.<span title="(x$1: java.lang.String)org.joda.time.DateTime">parseDateTime</span><span class="delimiter">(</span><a href="#101819" title="String">date</a>.<span title="(x$1: java.lang.CharSequence, x$2: java.lang.CharSequence)java.lang.String">replace</span><span class="delimiter">(</span><a href="#100884" title="=&gt; java.lang.String">parsableTimezoneCode</a>,<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()java.util.Date">toDate</span>
      <span title="(x: java.util.Date)Some[java.util.Date]">Some</span><span class="delimiter">(</span><a href="#101820" title="java.util.Date">d</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="None.type">_</span>: <span title="Exception">Exception</span> =&gt; <span title="object None">None</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="101818">resourceName</a> = <span title="(x: java.lang.String)Option[java.lang.String]">Option</span><span class="delimiter">(</span><a href="#101777" title="String">path</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#101778" title="String">file</a><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; java.lang.String)Option[java.lang.String]">map</span><span class="delimiter">(</span><a title="java.lang.String" id="102300">name</a> =&gt; <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#102300" title="java.lang.String">name</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#102300" title="java.lang.String">name</a> <span class="keyword">else</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#102300" title="java.lang.String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; java.lang.String">get</span>

    <span title="play.api.mvc.Result" class="keyword">if</span> <span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#101818" title="java.lang.String">resourceName</a><span class="delimiter">)</span>.<span title="()Boolean">isDirectory</span> <span title="(x: Boolean)Boolean">||</span> <span title="=&gt; Boolean">!</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#101818" title="java.lang.String">resourceName</a><span class="delimiter">)</span>.<span title="()java.lang.String">getCanonicalPath</span>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#101777" title="String">path</a><span class="delimiter">)</span>.<span title="()java.lang.String">getCanonicalPath</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../mvc/Results.scala.html#66737" title="=&gt; controllers.Assets.Status">NotFound</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="Option[(java.net.URL, Boolean)]" id="102318">resource</a> = <span class="delimiter">{</span>
        <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72753" title="(name: String)(implicit app: play.api.Application)Option[java.net.URL]">resource</a><a href="../Play.scala.html#72746" title="=&gt; play.api.Application" class="delimiter">(</a><a href="#101818" title="java.lang.String">resourceName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span><span class="delimiter">)</span>.<span title="(f: java.net.URL =&gt; (java.net.URL, Boolean))Option[(java.net.URL, Boolean)]">map</span><span class="delimiter">(</span><a href="#102323" title="(x: java.net.URL)ArrowAssoc[java.net.URL]">_</a> <span title="(y: Boolean)(java.net.URL, Boolean)">-&gt;</span> <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
          .<span title="(p: (java.net.URL, Boolean) =&gt; Boolean)Option[(java.net.URL, Boolean)]">filter</span><span class="delimiter">(</span><a title="(java.net.URL, Boolean)" id="102343">_</a> =&gt; <a href="#101816" title="play.api.mvc.Request[play.api.mvc.AnyContent]">request</a>.<a href="../mvc/Http.scala.html#65477" title="=&gt; play.api.mvc.Headers">headers</a>.<a href="../mvc/Http.scala.html#65225" title="(key: String)Option[String]">get</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66062" title="=&gt; java.lang.String">ACCEPT_ENCODING</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a href="#102348" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="(separator: Char)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="Char(\',\')" class="char">','</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#102642" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72763" title="(implicit app: play.api.Application)Boolean">isProd</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
          .<span title="(alternative: =&gt; Option[(java.net.URL, Boolean)])Option[(java.net.URL, Boolean)]">orElse</span><span class="delimiter">(</span><a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72753" title="(name: String)(implicit app: play.api.Application)Option[java.net.URL]">resource</a><a href="../Play.scala.html#72746" title="=&gt; play.api.Application" class="delimiter">(</a><a href="#101818" title="java.lang.String">resourceName</a><span class="delimiter">)</span>.<span title="(f: java.net.URL =&gt; (java.net.URL, Boolean))Option[(java.net.URL, Boolean)]">map</span><span class="delimiter">(</span><a href="#102661" title="(x: java.net.URL)ArrowAssoc[java.net.URL]">_</a> <span title="(y: Boolean)(java.net.URL, Boolean)">-&gt;</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#102318" title="Option[(java.net.URL, Boolean)]">resource</a>.<span title="(f: (java.net.URL, Boolean) =&gt; play.api.mvc.Result)Option[play.api.mvc.Result]">map</span> <a href="#102684" title="play.api.mvc.Result" class="delimiter">{</a>

        <span class="keyword">case</span> <span title="controllers.Assets.Status" class="delimiter">(</span><a title="java.net.URL" id="102687">url</a>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#102687" title="java.net.URL">url</a>.<span title="()java.lang.String">getFile</span><span class="delimiter">)</span>.<span title="()Boolean">isDirectory</span> =&gt; <a href="../mvc/Results.scala.html#66737" title="=&gt; controllers.Assets.Status">NotFound</a>

        <span class="keyword">case</span> <span title="play.api.mvc.Result" class="delimiter">(</span><a title="java.net.URL" id="102694">url</a>, <a title="Boolean" id="102695">isGzipped</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>

          <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="#102699" title="(Int, java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]])" class="delimiter">(</a><a href="#102696" title="Int" id="102699">length</a>, <a href="#102696" title="fromCallback extends java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]]" id="102701">resourceData</a><span class="delimiter">)</span> = <span title="(Int, java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]]) @unchecked" class="delimiter">{</span>
            <span class="keyword">val</span> <a title="java.io.InputStream" id="102702">stream</a> = <a href="#102694" title="java.net.URL">url</a>.<span title="()java.io.InputStream">openStream</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">try</span> <span class="delimiter">{</span>
              <span title="(_1: Int, _2: java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]])(Int, java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]])" class="delimiter">(</span><a href="#102702" title="java.io.InputStream">stream</a>.<span title="()Int">available</span>, <a href="../libs/iteratee/Iteratee.scala.html#14121" title="object play.api.libs.iteratee.Enumerator">Enumerator</a>.<a href="../libs/iteratee/Iteratee.scala.html#102734" title="(input: java.io.InputStream, chunkSize: Int)java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]]">fromStream</a><span class="delimiter">(</span><a href="#102702" title="java.io.InputStream">stream</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="(Int, play.api.libs.iteratee.Enumerator[Array[Byte]])">_</span> =&gt; <span title="(_1: Int, _2: play.api.libs.iteratee.Enumerator[Array[Byte]])(Int, play.api.libs.iteratee.Enumerator[Array[Byte]])" class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="../libs/iteratee/Iteratee.scala.html#102739" title="[E](in: E*)play.api.libs.iteratee.Enumerator[E]">Enumerator</a><span title="(in: Array[Byte]*)play.api.libs.iteratee.Enumerator[Array[Byte]]" class="delimiter">[</span><span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <span title="play.api.mvc.Result" class="keyword">if</span><span class="delimiter">(</span><a href="#102698" title="=&gt; Int">length</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../mvc/Results.scala.html#66737" title="=&gt; controllers.Assets.Status">NotFound</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#101816" title="play.api.mvc.Request[play.api.mvc.AnyContent]">request</a>.<a href="../mvc/Http.scala.html#65477" title="=&gt; play.api.mvc.Headers">headers</a>.<a href="../mvc/Http.scala.html#65225" title="(key: String)Option[String]">get</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66114" title="=&gt; java.lang.String">IF_NONE_MATCH</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Option[String])Option[String]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="103004">ifNoneMatch</a> =&gt; 
              <a href="#100892" title="(resource: java.net.URL)Option[String]">etagFor</a><span class="delimiter">(</span><a href="#102694" title="java.net.URL">url</a><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a href="#103009" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#103004" title="String">ifNoneMatch</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>.<span title="(f: String =&gt; play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent])Option[play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent]]">map</span> <span class="delimiter">(</span><a title="String" id="103019">_</a> =&gt; <a href="../mvc/Results.scala.html#66728" title="=&gt; play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent]">NotModified</a><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.mvc.Result)play.api.mvc.Result">getOrElse</span> <span class="delimiter">{</span>
              <a href="#101816" title="play.api.mvc.Request[play.api.mvc.AnyContent]">request</a>.<a href="../mvc/Http.scala.html#65477" title="=&gt; play.api.mvc.Headers">headers</a>.<a href="../mvc/Http.scala.html#65225" title="(key: String)Option[String]">get</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66112" title="=&gt; java.lang.String">IF_MODIFIED_SINCE</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Option[java.util.Date])Option[java.util.Date]">flatMap</span><span class="delimiter">(</span><a href="#101817" title="(date: String)Option[java.util.Date]">parseDate</a><span class="delimiter">)</span>.<span title="(f: java.util.Date =&gt; Option[java.util.Date])Option[java.util.Date]">flatMap</span> <span class="delimiter">{</span> <a title="java.util.Date" id="103077">ifModifiedSince</a> =&gt;
                <a href="#100889" title="(resource: java.net.URL)Option[String]">lastModifiedFor</a><span class="delimiter">(</span><a href="#102694" title="java.net.URL">url</a><span class="delimiter">)</span>.<span title="(f: String =&gt; Option[java.util.Date])Option[java.util.Date]">flatMap</span><span class="delimiter">(</span><a href="#101817" title="(date: String)Option[java.util.Date]">parseDate</a><span class="delimiter">)</span>.<span title="(p: java.util.Date =&gt; Boolean)Option[java.util.Date]">filterNot</span><span class="delimiter">(</span><a title="java.util.Date" id="103088">lastModified</a> =&gt; <a href="#103088" title="java.util.Date">lastModified</a>.<span title="(x$1: java.util.Date)Boolean">after</span><span class="delimiter">(</span><a href="#103077" title="java.util.Date">ifModifiedSince</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>.<span title="(f: java.util.Date =&gt; play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent])Option[play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent]]">map</span> <span class="delimiter">(</span><a title="java.util.Date" id="103094">_</a> =&gt; <a href="../mvc/Results.scala.html#66728" title="=&gt; play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent]">NotModified</a>.<a href="../mvc/Results.scala.html#74883" title="(headers: (String, String)*)play.api.mvc.SimpleResult[play.api.mvc.Results.EmptyContent]">withHeaders</a><span class="delimiter">(</span>
                <a href="../http/StandardValues.scala.html#66098" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">DATE</a> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <a href="#100880" title="=&gt; org.joda.time.format.DateTimeFormatter">df</a>.<span title="(x$1: Long)java.lang.String">print</span><span class="delimiter">(</span><span class="delimiter">{</span><span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">}</span>.<span title="()Long">getTime</span><span class="delimiter">)</span>
              <span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.mvc.SimpleResult[_ &gt;: play.api.mvc.Results.EmptyContent with Array[Byte] &lt;: java.io.Serializable])play.api.mvc.SimpleResult[_ &gt;: play.api.mvc.Results.EmptyContent with Array[Byte] &lt;: java.io.Serializable]">getOrElse</span> <span class="delimiter">{</span>

                <span class="comment">// Prepare a streamed response</span>
                <span class="keyword">val</span> <a title="play.api.mvc.SimpleResult[Array[Byte]]" id="103248">response</a> = <a href="../mvc/Results.scala.html#74858" title="(header: play.api.mvc.ResponseHeader, body: play.api.libs.iteratee.Enumerator[Array[Byte]])(implicit writeable: play.api.http.Writeable[Array[Byte]])play.api.mvc.SimpleResult[Array[Byte]]">SimpleResult</a><a href="../http/Writeable.scala.html#92888" title="=&gt; play.api.http.Writeable[Array[Byte]]" class="delimiter">(</a>
                  header = <a href="../mvc/Results.scala.html#103034" title="(status: Int, headers: Map[String,String])play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#67669" title="=&gt; Int">OK</a>, <span title="(elems: (java.lang.String, java.lang.String)*)scala.collection.immutable.Map[java.lang.String,java.lang.String]">Map</span><span class="delimiter">(</span>
                    <a href="../http/StandardValues.scala.html#66084" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">CONTENT_LENGTH</a> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <a href="#102698" title="=&gt; Int">length</a>.<span title="()java.lang.String">toString</span>,
                    <a href="../http/StandardValues.scala.html#66094" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">CONTENT_TYPE</a> <span title="(y: String)(java.lang.String, String)">-&gt;</span> <a href="../libs/MimeTypes.scala.html#13166" title="object play.api.libs.MimeTypes">MimeTypes</a>.<a href="../libs/MimeTypes.scala.html#103296" title="(name: String)Option[String]">forFileName</a><span class="delimiter">(</span><a href="#101778" title="String">file</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#100907" title="=&gt; java.lang.String">BINARY</a><span class="delimiter">)</span>,
                    <a href="../http/StandardValues.scala.html#66098" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">DATE</a> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <a href="#100880" title="=&gt; org.joda.time.format.DateTimeFormatter">df</a>.<span title="(x$1: Long)java.lang.String">print</span><span class="delimiter">(</span><span class="delimiter">{</span><span title="java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">}</span>.<span title="()Long">getTime</span><span class="delimiter">)</span>
                  <span class="delimiter">)</span><span class="delimiter">)</span>,
                  <a href="#102700" title="=&gt; java.lang.Object with play.api.libs.iteratee.Enumerator[Array[Byte]]">resourceData</a>
                <span class="delimiter">)</span>

                <span class="comment">// Is Gzipped?</span>
                <span class="keyword">val</span> <a title="play.api.mvc.SimpleResult[Array[Byte]]" id="103249">gzippedResponse</a> = <span title="play.api.mvc.SimpleResult[Array[Byte]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#102695" title="Boolean">isGzipped</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#103248" title="play.api.mvc.SimpleResult[Array[Byte]]">response</a>.<a href="../mvc/Results.scala.html#74883" title="(headers: (String, String)*)play.api.mvc.SimpleResult[Array[Byte]]">withHeaders</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66080" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">CONTENT_ENCODING</a> <span title="(y: java.lang.String)(java.lang.String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span><span class="delimiter">)</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                  <a href="#103248" title="play.api.mvc.SimpleResult[Array[Byte]]">response</a>
                <span class="delimiter">}</span>

                <span class="comment">// Add Etag if we are able to compute it</span>
                <span class="keyword">val</span> <a title="play.api.mvc.SimpleResult[Array[Byte]]" id="103250">taggedResponse</a> = <a href="#100892" title="(resource: java.net.URL)Option[String]">etagFor</a><span class="delimiter">(</span><a href="#102694" title="java.net.URL">url</a><span class="delimiter">)</span>.<span title="(f: String =&gt; play.api.mvc.SimpleResult[Array[Byte]])Option[play.api.mvc.SimpleResult[Array[Byte]]]">map</span><span class="delimiter">(</span><a title="String" id="103521">etag</a> =&gt; <a href="#103249" title="play.api.mvc.SimpleResult[Array[Byte]]">gzippedResponse</a>.<a href="../mvc/Results.scala.html#74883" title="(headers: (String, String)*)play.api.mvc.SimpleResult[Array[Byte]]">withHeaders</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66100" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">ETAG</a> <span title="(y: String)(java.lang.String, String)">-&gt;</span> <a href="#103521" title="String">etag</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.mvc.SimpleResult[Array[Byte]])play.api.mvc.SimpleResult[Array[Byte]]">getOrElse</span><span class="delimiter">(</span><a href="#103249" title="play.api.mvc.SimpleResult[Array[Byte]]">gzippedResponse</a><span class="delimiter">)</span>
                <span class="keyword">val</span> <a title="play.api.mvc.SimpleResult[Array[Byte]]" id="103251">lastModifiedResponse</a> = <a href="#100889" title="(resource: java.net.URL)Option[String]">lastModifiedFor</a><span class="delimiter">(</span><a href="#102694" title="java.net.URL">url</a><span class="delimiter">)</span>.<span title="(f: String =&gt; play.api.mvc.SimpleResult[Array[Byte]])Option[play.api.mvc.SimpleResult[Array[Byte]]]">map</span><span class="delimiter">(</span><a title="String" id="103547">lastModified</a> =&gt; <a href="#103250" title="play.api.mvc.SimpleResult[Array[Byte]]">taggedResponse</a>.<a href="../mvc/Results.scala.html#74883" title="(headers: (String, String)*)play.api.mvc.SimpleResult[Array[Byte]]">withHeaders</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66120" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">LAST_MODIFIED</a> <span title="(y: String)(java.lang.String, String)">-&gt;</span> <a href="#103547" title="String">lastModified</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.mvc.SimpleResult[Array[Byte]])play.api.mvc.SimpleResult[Array[Byte]]">getOrElse</span><span class="delimiter">(</span><a href="#103250" title="play.api.mvc.SimpleResult[Array[Byte]]">taggedResponse</a><span class="delimiter">)</span>

                <span class="comment">// Add Cache directive if configured</span>
                <span class="keyword">val</span> <a title="play.api.mvc.SimpleResult[Array[Byte]]" id="103252">cachedResponse</a> = <a href="#103251" title="play.api.mvc.SimpleResult[Array[Byte]]">lastModifiedResponse</a>.<a href="../mvc/Results.scala.html#74883" title="(headers: (String, String)*)play.api.mvc.SimpleResult[Array[Byte]]">withHeaders</a><span class="delimiter">(</span><a href="../http/StandardValues.scala.html#66074" title="(x: java.lang.String)ArrowAssoc[java.lang.String]">CACHE_CONTROL</a> <span title="(y: String)(java.lang.String, String)">-&gt;</span> <span class="delimiter">{</span>
                  <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72758" title="play.api.Configuration" id="103583">configuration</a>.<a href="../Configuration.scala.html#78646" title="Option[Set[String]]" id="103585">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\&quot;assets.cache.&quot;)" class="string">&quot;\&quot;assets.cache.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#101818" title="java.lang.String">resourceName</a> <a title="java.lang.String" id="103584">+</a> <span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72761" title="(implicit app: play.api.Application)play.api.Mode.Mode">mode</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
                    <span class="keyword">case</span> <a href="../Play.scala.html#10566" title="String">Mode</a>.<a href="../Play.scala.html#68245" title="=&gt; play.api.Mode.Value">Prod</a> =&gt; <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72758" title="play.api.Configuration" id="103590">configuration</a>.<a href="../Configuration.scala.html#78646" title="Option[Set[String]]" id="103592">getString</a><span class="delimiter">(</span><a title="java.lang.String(&quot;assets.defaultCache&quot;)" id="103591" class="string">&quot;assets.defaultCache&quot;</a><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;max-age=3600&quot;)" class="string">&quot;max-age=3600&quot;</span><span class="delimiter">)</span>
                    <span class="keyword">case</span> <span title="java.lang.String(&quot;no-cache&quot;)">_</span> =&gt; <span title="java.lang.String(&quot;no-cache&quot;)" class="string">&quot;no-cache&quot;</span>
                  <span class="delimiter">}</span><span class="delimiter">)</span>
                <span class="delimiter">}</span><span class="delimiter">)</span>

                <a href="#103252" title="play.api.mvc.SimpleResult[Array[Byte]]">cachedResponse</a>

              <span class="delimiter">}</span>:<a href="../mvc/Results.scala.html#15977" title="play.api.mvc.Result">Result</a>

            <span class="delimiter">}</span>

          <span class="delimiter">}</span>

        <span class="delimiter">}</span>

      <span class="delimiter">}</span>.<span title="(default: =&gt; play.api.mvc.Result)play.api.mvc.Result">getOrElse</span><span class="delimiter">(</span><a href="../mvc/Results.scala.html#66737" title="=&gt; controllers.Assets.Status">NotFound</a><span class="delimiter">)</span>

    <span class="delimiter">}</span>

  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ConcurrentMap[String,String]" id="100887">lastModifieds</a> = <span class="delimiter">(</span><span title="(m: java.util.concurrent.ConcurrentMap[String,String])collection.JavaConverters.AsScala[scala.collection.mutable.ConcurrentMap[String,String]]" class="keyword">new</span> java.util.concurrent.<span title="java.util.concurrent.ConcurrentHashMap[String,String]">ConcurrentHashMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">asScala</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(resource: java.net.URL)Option[String]" id="100889">lastModifiedFor</a><span class="delimiter">(</span><a title="java.net.URL" id="103078">resource</a>: java.net.<span title="java.net.URL">URL</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#100887" title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">lastModifieds</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#103078" title="java.net.URL">resource</a>.<span title="()java.lang.String">toExternalForm</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a title="String" id="103667">_</a> =&gt; <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72763" title="(implicit app: play.api.Application)Boolean">isProd</a><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[String])Option[String]">orElse</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[java.lang.String]" id="103672">maybeLastModified</a> = <a href="#103078" title="java.net.URL">resource</a>.<span title="()java.lang.String">getProtocol</span> <span title="Option[java.lang.String]" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Some[java.lang.String]" class="string">&quot;file&quot;</span> =&gt; <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#100880" title="=&gt; org.joda.time.format.DateTimeFormatter">df</a>.<span title="(x$1: Long)java.lang.String">print</span><span class="delimiter">(</span><span class="delimiter">{</span><span title="(x$1: Long)java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#103078" title="java.net.URL">resource</a>.<span title="()java.lang.String">getPath</span><span class="delimiter">)</span>.<span title="()Long">lastModified</span><span class="delimiter">)</span>.<span title="()Long">getTime</span><span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Option[java.lang.String]" class="string">&quot;jar&quot;</span> =&gt; <span class="delimiter">{</span>
            <a href="#103078" title="java.net.URL">resource</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">getPath</span>.<span title="(separator: Char)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="Char(\'!\')" class="char">'!'</span><span class="delimiter">)</span>.<span title="(n: Int)Array[String]">drop</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Option[String]">headOption</span>.<span title="(f: String =&gt; Option[java.lang.String])Option[java.lang.String]">flatMap</span> <span class="delimiter">{</span> <a title="String" id="103878">fileNameInJar</a> =&gt;
              <span title="(x: java.net.URLConnection)Option[java.net.URLConnection]">Option</span><span class="delimiter">(</span><a href="#103078" title="java.net.URL">resource</a>.<span title="()java.net.URLConnection">openConnection</span><span class="delimiter">)</span>
               .<span title="(pf: PartialFunction[java.net.URLConnection,java.net.JarURLConnection])Option[java.net.JarURLConnection]">collect</span> <a href="#103998" title="java.net.JarURLConnection" class="delimiter">{</a> <span class="keyword">case</span> <a title="java.net.JarURLConnection" id="103999">c</a>: <span title="java.net.JarURLConnection">JarURLConnection</span> =&gt; <a href="#103999" title="java.net.JarURLConnection">c</a> <span class="delimiter">}</span>
               .<span title="(f: java.net.JarURLConnection =&gt; Option[java.util.jar.JarEntry])Option[java.util.jar.JarEntry]">flatMap</span><span class="delimiter">(</span><a title="java.net.JarURLConnection" id="104091">c</a> =&gt; <span title="(x: java.util.jar.JarEntry)Option[java.util.jar.JarEntry]">Option</span><span class="delimiter">(</span><a href="#104091" title="java.net.JarURLConnection">c</a>.<span title="()java.util.jar.JarFile">getJarFile</span>.<span title="(x$1: java.lang.String)java.util.jar.JarEntry">getJarEntry</span><span class="delimiter">(</span><a href="#103878" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">fileNameInJar</a>.<span title="(n: Int)String">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
               .<span title="(f: java.util.jar.JarEntry =&gt; Long)Option[Long]">map</span><span class="delimiter">(</span><a href="#104493" title="java.util.jar.JarEntry">_</a>.<span title="()Long">getTime</span><span class="delimiter">)</span>
               .<span title="(p: Long =&gt; Boolean)Option[Long]">filterNot</span><span class="delimiter">(</span><a href="#104497" title="Long">_</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
               .<span title="(f: Long =&gt; java.lang.String)Option[java.lang.String]">map</span><span class="delimiter">(</span><a title="Long" id="104506">lastModified</a> =&gt; <a href="#100880" title="=&gt; org.joda.time.format.DateTimeFormatter">df</a>.<span title="(x$1: Long)java.lang.String">print</span><span class="delimiter">(</span><span class="delimiter">{</span><span title="(x$1: Long)java.util.Date" class="keyword">new</span> java.util.<span title="java.util.Date">Date</span><span class="delimiter">(</span><a href="#104506" title="Long">lastModified</a><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="()Long">getTime</span><span class="delimiter">)</span><span class="delimiter">)</span> 
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
      <span class="delimiter">}</span>
      <a href="#103672" title="Option[java.lang.String]">maybeLastModified</a>.<span title="(f: java.lang.String =&gt; Option[String])Unit">foreach</span><span class="delimiter">(</span><a href="#100887" title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">lastModifieds</a>.<span title="(key: String, value: String)Option[String]">put</span><span class="delimiter">(</span><a href="#103078" title="java.net.URL">resource</a>.<span title="()java.lang.String">toExternalForm</span>, <a href="#104521" title="java.lang.String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#103672" title="Option[java.lang.String]">maybeLastModified</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// -- ETags handling</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ConcurrentMap[String,String]" id="100890">etags</a> = <span class="delimiter">(</span><span title="(m: java.util.concurrent.ConcurrentMap[String,String])collection.JavaConverters.AsScala[scala.collection.mutable.ConcurrentMap[String,String]]" class="keyword">new</span> java.util.concurrent.<span title="java.util.concurrent.ConcurrentHashMap[String,String]">ConcurrentHashMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">asScala</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(resource: java.net.URL)Option[String]" id="100892">etagFor</a><span class="delimiter">(</span><a title="java.net.URL" id="103005">resource</a>: java.net.<span title="java.net.URL">URL</span><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#100890" title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">etags</a>.<span title="(key: String)Option[String]">get</span><span class="delimiter">(</span><a href="#103005" title="java.net.URL">resource</a>.<span title="()java.lang.String">toExternalForm</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a title="String" id="104529">_</a> =&gt; <a href="../Play.scala.html#10608" title="object play.api.Play">Play</a>.<a href="../Play.scala.html#72763" title="(implicit app: play.api.Application)Boolean">isProd</a><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[String])Option[String]">orElse</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[java.lang.String]" id="104532">maybeEtag</a> = <a href="#100889" title="(resource: java.net.URL)Option[String]">lastModifiedFor</a><span class="delimiter">(</span><a href="#103005" title="java.net.URL">resource</a><span class="delimiter">)</span>.<span title="(f: String =&gt; java.lang.String)Option[java.lang.String]">map</span><span class="delimiter">(</span><a href="#104537" title="String">_</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#103005" title="java.net.URL">resource</a>.<span title="()java.lang.String">toExternalForm</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; java.lang.String)Option[java.lang.String]">map</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../libs/Codecs.scala.html#13055" title="object play.api.libs.Codecs">Codecs</a>.<a href="../libs/Codecs.scala.html#73635" title="(text: String)String">sha1</a><span class="delimiter">(</span><a href="#104543" title="java.lang.String">_</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>
      <a href="#104532" title="Option[java.lang.String]">maybeEtag</a>.<span title="(f: java.lang.String =&gt; Option[String])Unit">foreach</span><span class="delimiter">(</span><a href="#100890" title="=&gt; scala.collection.mutable.ConcurrentMap[String,String]">etags</a>.<span title="(key: String, value: String)Option[String]">put</span><span class="delimiter">(</span><a href="#103005" title="java.net.URL">resource</a>.<span title="()java.lang.String">toExternalForm</span>, <a href="#104557" title="java.lang.String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#104532" title="Option[java.lang.String]">maybeEtag</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>