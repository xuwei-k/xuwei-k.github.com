<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play/play/api/db/DB.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.db

<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.libs._

<span class="keyword">import</span> play.core._

<span class="keyword">import</span> java.sql._
<span class="keyword">import</span> javax.sql._

<span class="keyword">import</span> com.jolbox.bonecp._
<span class="keyword">import</span> com.jolbox.bonecp.hooks._

<span class="comment">/**
 * The Play Database API manages several connection pools.
 *
 * @param datasources the managed data sources
 */</span>
<span class="keyword">trait</span> <a title="trait DBApi extends java.lang.Object with ScalaObject" id="12337">DBApi</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; List[(javax.sql.DataSource, String)]" id="154989">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>DataSource, String<span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Shutdown pool for given datasource
   */</span>
  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="154990">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="155006">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="154991">getDataSource</a><span class="delimiter">(</span><a title="String" id="155008">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span>

  <span class="comment">/**
   * Retrieves the JDBC connection URL for a particular data source.
   *
   * @param name the data source name
   * @return The JDBC URL connection string, i.e. `jdbc:…`
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)String" id="154992">getDataSourceURL</a><span class="delimiter">(</span><a title="String" id="155010">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="155012">connection</a> = <a href="#154991" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155010" title="String">name</a><span class="delimiter">)</span>.<span title="()java.sql.Connection">getConnection</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="155013">url</a> = <a href="#155012" title="java.sql.Connection">connection</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span>
    <a href="#155012" title="java.sql.Connection">connection</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#155013" title="java.lang.String">url</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)java.sql.Connection" id="154993">getConnection</a><span class="delimiter">(</span><a title="String" id="155344">name</a>: <span title="String">String</span>, <a title="Boolean" id="155347">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="155348">connection</a> = <a href="#154991" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155344" title="String">name</a><span class="delimiter">)</span>.<span title="()java.sql.Connection">getConnection</span>
    <a href="#155348" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#155347" title="Boolean">autocommit</a><span class="delimiter">)</span>
    <a href="#155348" title="java.sql.Connection">connection</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="154994">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="154996">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155351">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155352">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#154996" title="A">A</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.db.AutoCleanConnection" id="155355">connection</a> = <span title="play.api.db.AutoCleanConnection" class="keyword">new</span> <a href="#12364" title="play.api.db.AutoCleanConnection">AutoCleanConnection</a><span class="delimiter">(</span><a href="#154993" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#155351" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#155352" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#155355" title="play.api.db.AutoCleanConnection">connection</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#155355" title="play.api.db.AutoCleanConnection">connection</a>.<a href="#155377" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="154997">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="154999">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155426">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155427">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#154999" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#154994" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#155426" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.sql.Connection" id="155435">connection</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#155435" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="A" id="155436">r</a> = <a href="#155427" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#155435" title="java.sql.Connection">connection</a><span class="delimiter">)</span>
        <a href="#155435" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#155436" title="A">r</a>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="155438">e</a> =&gt; <a href="#155435" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span>; <span title="Nothing" class="keyword">throw</span> <a href="#155438" title="java.lang.Throwable">e</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Provides a high-level API for getting JDBC connections.
 *
 * For example:
 * {{{
 * val conn = DB.getConnection(&quot;customers&quot;)
 * }}}
 */</span>
<span class="keyword">object</span> <a title="object play.api.db.DB" id="12326">DB</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/** The exception we are throwing. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="155447">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;DB plugin is not registered.&quot;)" class="string">&quot;DB plugin is not registered.&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * @param name data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)(implicit app: play.api.Application)java.sql.Connection" id="155448">getConnection</a><span class="delimiter">(</span><a title="String" id="155474">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span>, <a title="Boolean" id="155475">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155472">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <a href="#155472" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; java.sql.Connection)Option[java.sql.Connection]">map</span><span class="delimiter">(</span><a href="#155502" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154993" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#155474" title="String">name</a>, <a href="#155475" title="Boolean">autocommit</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; java.sql.Connection)java.sql.Connection">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection (autocommit is set to true).
   *
   * @param name data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)(implicit app: play.api.Application)javax.sql.DataSource" id="155449">getDataSource</a><span class="delimiter">(</span><a title="String" id="155514">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155512">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <a href="#155512" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a href="#155539" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154991" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155514" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection is
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155450">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155452">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155546">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155547">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155548">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155452" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155548" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155575" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154994" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#155546" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155547" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155453">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155455">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155588">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155589">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155455" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155589" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155616" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154994" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155588" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155456">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155635">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155633">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155630">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155631">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155635" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155631" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155661" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154997" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><a href="#155633" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155630" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155459">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155461">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155674">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155675">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155461" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155675" title="play.api.Application">app</a>.<a href="../Application.scala.html#68066" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155702" title="play.api.db.DBPlugin">_</a>.<a href="#155479" title="=&gt; play.api.db.DBApi">api</a>.<a href="#154997" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155674" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155447" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Generic DBPlugin interface
 */</span>
<span class="keyword">trait</span> <a title="trait DBPlugin extends java.lang.Object with play.api.Plugin" id="12343">DBPlugin</a> <span class="keyword">extends</span> <a href="../Plugins.scala.html#10469" title="play.api.Plugin">Plugin</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="155479">api</a>: <a href="#12337" title="play.api.db.DBApi">DBApi</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * A DBPlugin implementation that provides a DBApi
 *
 * @param app the application that is registering the plugin
 */</span>
<span class="keyword">class</span> <a title="class BoneCPPlugin extends java.lang.Object with play.api.db.DBPlugin with ScalaObject" id="12340">BoneCPPlugin</a><a href="#12340" title="ScalaObject" class="delimiter">(</a><a title="play.api.Application" id="155770">app</a>: <a href="../Application.scala.html#10388" title="play.api.Application">Application</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12343" title="play.api.db.DBPlugin">DBPlugin</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="155729">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;db keys are missing from application.conf&quot;)" class="string">&quot;db keys are missing from application.conf&quot;</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.Configuration" id="155731">dbConfig</a> = <a href="#155770" title="play.api.Application">app</a>.<a href="../Application.scala.html#68060" title="=&gt; play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68343" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;db&quot;)" class="string">&quot;db&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="../Configuration.scala.html#10662" title="object play.api.Configuration">Configuration</a>.<a href="../Configuration.scala.html#68354" title="=&gt; play.api.Configuration">empty</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(conn: java.sql.Connection)String" id="155732">dbURL</a><span class="delimiter">(</span><a title="java.sql.Connection" id="155778">conn</a>: <span title="java.sql.Connection">Connection</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="155780">u</a> = <a href="#155778" title="java.sql.Connection">conn</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span>
    <a href="#155778" title="java.sql.Connection">conn</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#155780" title="java.lang.String">u</a>
  <span class="delimiter">}</span>

  <span class="comment">// should be accessed in onStart first</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.db.DBApi" id="155734">dbApi</a>: <a href="#12337" title="play.api.db.DBApi">DBApi</a> = <span title="play.api.db.BoneCPApi" class="keyword">new</span> <a href="#12433" title="play.api.db.BoneCPApi">BoneCPApi</a><span class="delimiter">(</span><a href="#155730" title="=&gt; play.api.Configuration">dbConfig</a>, <a href="#155770" title="play.api.Application">app</a>.<a href="../Application.scala.html#68041" title="=&gt; java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

  <span class="comment">/**
   * plugin is disabled if either configuration is missing or the plugin is explicitly disabled
   */</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="155736">isDisabled</a> = <span class="delimiter">{</span>
    <a href="#155770" title="play.api.Application">app</a>.<a href="../Application.scala.html#68060" title="play.api.Configuration" id="155748">configuration</a>.<a href="../Configuration.scala.html#78646" title="Option[Set[String]]" id="155750">getString</a><span class="delimiter">(</span><a title="java.lang.String(&quot;dbplugin&quot;)" id="155749" class="string">&quot;dbplugin&quot;</a><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a href="#155752" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;disabled&quot;)" class="string">&quot;disabled&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">||</span> <a href="#155730" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#68345" title="=&gt; Set[String]">subKeys</a>.<span title="=&gt; Boolean">isEmpty</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Is this plugin enabled.
   *
   * {{{
   * dbplugin=disabled
   * }}}
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="155737">enabled</a> = <a href="#155735" title="=&gt; Boolean">isDisabled</a> <span title="(x: Boolean)Boolean">==</span> <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Retrieves the underlying `DBApi` managing the data sources.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="155738">api</a>: <a href="#12337" title="play.api.db.DBApi">DBApi</a> = <a href="#155733" title="=&gt; play.api.db.DBApi">dbApi</a>


  <span class="comment">/**
   * Reads the configuration and connects to every data source.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="155739">onStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Try to connect to each, this should be the first access to dbApi</span>
    <a href="#155733" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#154989" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[List[(javax.sql.DataSource, String)],Unit,Any])Any">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Unit,List[Unit]]" class="delimiter">{</span> <a title="(javax.sql.DataSource, String)" id="155823">ds</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#155823" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#155770" title="play.api.Application">app</a>.<a href="../Application.scala.html#68045" title="=&gt; play.api.Mode.Mode">mode</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../Play.scala.html#10566" title="Unit">Mode</a>.<a href="../Play.scala.html#68247" title="=&gt; play.api.Mode.Value">Test</a> =&gt;
          <span class="keyword">case</span> <a title="Unit" id="155826">mode</a> =&gt; <a href="../Logger.scala.html#82396" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#82386" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;database [&quot;)" class="string">&quot;database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155823" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] connected at &quot;)" class="string">&quot;] connected at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155732" title="(conn: java.sql.Connection)String">dbURL</a><span class="delimiter">(</span><a href="#155823" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="155843">e</a> =&gt; <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <a href="#155730" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#68346" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#155823" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span>, <span title="java.lang.String(&quot;Cannot connect to database [&quot;)" class="string">&quot;Cannot connect to database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155823" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#155843" title="java.lang.Throwable">e</a>.<span title="()java.lang.Throwable">getCause</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Closes all data sources.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="155740">onStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155733" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#154989" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)Unit">foreach</span> <a href="#155899" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="javax.sql.DataSource" id="155902">ds</a>, _<span class="delimiter">)</span> =&gt; <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#155733" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#154990" title="(ds: javax.sql.DataSource)Unit">shutdownPool</a><span class="delimiter">(</span><a href="#155902" title="javax.sql.DataSource">ds</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.util.Enumeration[java.sql.Driver]" id="155879">drivers</a> = <span title="object java.sql.DriverManager">DriverManager</span>.<span title="()java.util.Enumeration[java.sql.Driver]">getDrivers</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#155879" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()Boolean">hasMoreElements</span><span class="delimiter">)</span> <a href="#155946" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="java.sql.Driver" id="155947">driver</a> = <a href="#155879" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()java.sql.Driver">nextElement</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">deregisterDriver</span><span class="delimiter">(</span><a href="#155947" title="java.sql.Driver">driver</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>db<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class BoneCPApi extends java.lang.Object with play.api.db.DBApi with ScalaObject" id="12433">BoneCPApi</a><a href="#12433" title="ScalaObject" class="delimiter">(</a><a title="play.api.Configuration" id="155795">configuration</a>: <a href="../Configuration.scala.html#10661" title="play.api.Configuration">Configuration</a>, <a title="java.lang.ClassLoader" id="155796">classloader</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12337" title="play.api.db.DBApi">DBApi</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(db: String, message: String)Nothing" id="155786">error</a><span class="delimiter">(</span><a title="String" id="155951">db</a>: <span title="String">String</span>, <a title="String" id="155955">message</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span title="Nothing" class="keyword">throw</span> <a href="#155795" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68346" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#155951" title="String">db</a>, <a href="#155955" title="String">message</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Set[String]" id="155787">dbNames</a> = <a href="#155795" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68345" title="=&gt; Set[String]">subKeys</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(driver: String, c: play.api.Configuration)Unit" id="155789">register</a><span class="delimiter">(</span><a title="String" id="155956">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="155957">c</a>: <a href="../Configuration.scala.html#10661" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#21031" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#155956" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#155796" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="155973">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#155957" title="play.api.Configuration">c</a>.<a href="../Configuration.scala.html#68346" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155956" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#155973" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource" id="155790">createDataSource</a><span class="delimiter">(</span><a title="String" id="155977">dbName</a>: <span title="String">String</span>, <a title="String" id="155978">url</a>: <span title="String">String</span>, <a title="String" id="155979">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="155980">conf</a>: <a href="../Configuration.scala.html#10661" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="com.jolbox.bonecp.BoneCPDataSource" id="155982">datasource</a> = <span title="com.jolbox.bonecp.BoneCPDataSource" class="keyword">new</span> <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span>

    <span class="comment">// Try to load the driver</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="156487">driver</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#21031" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#156487" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#155796" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="156491">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68346" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156487" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#156491" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Boolean" id="155983">autocommit</a> = <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;autocommit&quot;)" class="string">&quot;autocommit&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[Int]" id="155984">isolation</a> = <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Int)Option[Int]">map</span> <a href="#156504" title="Int" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Int(0)" class="string">&quot;NONE&quot;</span> =&gt; Connection.<span title="Int(0)">TRANSACTION_NONE</span>
      <span class="keyword">case</span> <span title="Int(2)" class="string">&quot;READ_COMMITTED&quot;</span> =&gt; Connection.<span title="Int(2)">TRANSACTION_READ_COMMITTED</span>
      <span class="keyword">case</span> <span title="Int(1)" class="string">&quot;READ_UNCOMMITTED &quot;</span> =&gt; Connection.<span title="Int(1)">TRANSACTION_READ_UNCOMMITTED</span>
      <span class="keyword">case</span> <span title="Int(4)" class="string">&quot;REPEATABLE_READ &quot;</span> =&gt; Connection.<span title="Int(4)">TRANSACTION_REPEATABLE_READ</span>
      <span class="keyword">case</span> <span title="Int(8)" class="string">&quot;SERIALIZABLE&quot;</span> =&gt; Connection.<span title="Int(8)">TRANSACTION_SERIALIZABLE</span>
      <span class="keyword">case</span> <a title="Nothing" id="156505">unknown</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68346" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span>, <span title="java.lang.String(&quot;Unknown isolation level [&quot;)" class="string">&quot;Unknown isolation level [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156505" title="String">unknown</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Option[String]" id="155985">catalog</a> = <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;defaultCatalog&quot;)" class="string">&quot;defaultCatalog&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="155986">readOnly</a> = <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;readOnly&quot;)" class="string">&quot;readOnly&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.ClassLoader)Unit">setClassLoader</span><span class="delimiter">(</span><a href="#155796" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="play.api.Logger" id="155987">logger</a> = <a href="../Logger.scala.html#82396" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;com.jolbox.bonecp&quot;)" class="string">&quot;com.jolbox.bonecp&quot;</span><span class="delimiter">)</span>

    <span class="comment">// Re-apply per connection config @ checkout</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: com.jolbox.bonecp.hooks.ConnectionHook)Unit">setConnectionHook</span><span class="delimiter">(</span><a href="#156594" title="com.jolbox.bonecp.hooks.AbstractConnectionHook" class="keyword">new</a> <a title="anonymous class $anon extends com.jolbox.bonecp.hooks.AbstractConnectionHook" id="156594">AbstractConnectionHook</a> <span class="delimiter">{</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="156672">onCheckIn</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="156674">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#155987" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#82372" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#155987" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#82382" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check in connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="156673">onCheckOut</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="156870">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#156870" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#155983" title="Boolean">autocommit</a><span class="delimiter">)</span>
        <a href="#155984" title="Option[Int]">isolation</a>.<span title="(f: Int =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156870" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#156882" title="Int">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#156870" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#155986" title="Boolean">readOnly</a><span class="delimiter">)</span>
        <a href="#155985" title="Option[String]">catalog</a>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156870" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#156888" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#155987" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#82372" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#155987" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#82382" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check out connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="155988">PostgresFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^postgres://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="155989">MysqlFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^mysql://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#155988" title="(target: Any)Option[List[String]]">PostgresFullUrl</a><span class="delimiter">(</span><a title="String" id="156903">username</a>, <a title="String" id="156904">password</a>, <a title="String" id="156905">host</a>, <a title="String" id="156906">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:postgresql://%s/%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#156905" title="String">host</a>, <a href="#156906" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#156903" title="String">username</a><span class="delimiter">)</span>
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#156904" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#155989" title="(target: Any)Option[List[String]]">MysqlFullUrl</a><span class="delimiter">(</span><a title="String" id="156912">username</a>, <a title="String" id="156913">password</a>, <a title="String" id="156914">host</a>, <a title="String" id="156915">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:mysql://%s/%s?useUnicode=yes&amp;characterEncoding=UTF-8&amp;connectionCollation=utf8_general_ci&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#156914" title="String">host</a>, <a href="#156915" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#156912" title="String">username</a><span class="delimiter">)</span>
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#156913" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="java.lang.String" id="156920">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt;
        <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><a href="#156920" title="java.lang.String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68347" title="(message: String, e: Option[Throwable])play.api.PlayException">globalError</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Missing url configuration for database [%s]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#156928" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;pass&quot;)" class="string">&quot;pass&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#156933" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#156938" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Pool configuration</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setPartitionCount</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68339" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;partitionCount&quot;)" class="string">&quot;partitionCount&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMaxConnectionsPerPartition</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68339" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionsPerPartition&quot;)" class="string">&quot;maxConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(30)" class="int">30</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMinConnectionsPerPartition</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68339" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;minConnectionsPerPartition&quot;)" class="string">&quot;minConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireIncrement</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68339" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireIncrement&quot;)" class="string">&quot;acquireIncrement&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireRetryAttempts</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68339" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryAttempts&quot;)" class="string">&quot;acquireRetryAttempts&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setAcquireRetryDelayInMs</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryDelay&quot;)" class="string">&quot;acquireRetryDelay&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setConnectionTimeoutInMs</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTimeout&quot;)" class="string">&quot;connectionTimeout&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleMaxAge</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleMaxAge&quot;)" class="string">&quot;idleMaxAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(600000L)">*</span> <span class="int">10</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setMaxConnectionAge</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionAge&quot;)" class="string">&quot;maxConnectionAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(3600000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setDisableJMX</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;disableJMX&quot;)" class="string">&quot;disableJMX&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleConnectionTestPeriod</span><span class="delimiter">(</span><a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68341" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleConnectionTestPeriod&quot;)" class="string">&quot;idleConnectionTestPeriod&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> <span title="Long(60000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>

    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;initSQL&quot;)" class="string">&quot;initSQL&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setInitSQL</span><span class="delimiter">(</span><a href="#157010" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68340" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;logStatements&quot;)" class="string">&quot;logStatements&quot;</span><span class="delimiter">)</span>.<span title="(f: Boolean =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setLogStatementsEnabled</span><span class="delimiter">(</span><a href="#157016" title="Boolean">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTestStatement&quot;)" class="string">&quot;connectionTestStatement&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setConnectionTestStatement</span><span class="delimiter">(</span><a href="#157022" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Bind in JNDI</span>
    <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jndiName&quot;)" class="string">&quot;jndiName&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="157027">name</a> =&gt;
      <a href="../libs/JNDI.scala.html#13106" title="object play.api.libs.JNDI">JNDI</a>.<a href="../libs/JNDI.scala.html#157033" title="=&gt; javax.naming.InitialContext">initialContext</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">rebind</span><span class="delimiter">(</span><a href="#157027" title="String">name</a>, <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a><span class="delimiter">)</span>
      <a href="../Logger.scala.html#82396" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#82386" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;datasource [&quot;)" class="string">&quot;datasource [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155980" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">get</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] bound to JNDI as &quot;)" class="string">&quot;] bound to JNDI as &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157027" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#155982" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>

  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="List[(javax.sql.DataSource, String)]" id="155791">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span>Tuple2<span class="delimiter">[</span>DataSource, String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#155787" title="=&gt; Set[String]">dbNames</a>.<span title="(f: String =&gt; (javax.sql.DataSource, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]])scala.collection.immutable.Set[(javax.sql.DataSource, String)]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]]" class="delimiter">{</span> <a title="String" id="157442">dbName</a> =&gt;
    <span class="keyword">val</span> <a title="String" id="157443">url</a> = <a href="#155795" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#155786" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157442" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url]&quot;)" class="string">&quot;.url]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="157444">driver</a> = <a href="#155795" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68338" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver&quot;)" class="string">&quot;.driver&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#155786" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157442" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver]&quot;)" class="string">&quot;.driver]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="play.api.Configuration" id="157445">extraConfig</a> = <a href="#155795" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#68343" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="#155786" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157442" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157442" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#155789" title="(driver: String, c: play.api.Configuration)Unit">register</a><span class="delimiter">(</span><a href="#157444" title="String">driver</a>, <a href="#157445" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span>
    <a href="#155790" title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource">createDataSource</a><span title="(x: javax.sql.DataSource)ArrowAssoc[javax.sql.DataSource]" class="delimiter">(</span><a href="#157442" title="String">dbName</a>, <a href="#157443" title="String">url</a>, <a href="#157444" title="String">driver</a>, <a href="#157445" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span> <span title="(y: String)(javax.sql.DataSource, String)">-&gt;</span> <a href="#157442" title="String">dbName</a>
  <span class="delimiter">}</span>.<span title="=&gt; List[(javax.sql.DataSource, String)]">toList</span>

  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="155793">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="157506">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#157506" title="javax.sql.DataSource">ds</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="157509">ds</a>: <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span> =&gt; <a href="#157509" title="com.jolbox.bonecp.BoneCPDataSource">ds</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="#155786" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;)" class="string">&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="155794">getDataSource</a><span class="delimiter">(</span><a title="String" id="157512">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>
    <a href="#155791" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(p: (javax.sql.DataSource, String) =&gt; Boolean)List[(javax.sql.DataSource, String)]">filter</span><span class="delimiter">(</span><a href="#157517" title="(javax.sql.DataSource, String)">_</a>.<span title="=&gt; String">_2</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#157512" title="String">name</a><span class="delimiter">)</span>.<span title="=&gt; Option[(javax.sql.DataSource, String)]">headOption</span>.<span title="(f: (javax.sql.DataSource, String) =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a title="(javax.sql.DataSource, String)" id="157526">e</a> =&gt; <a href="#157526" title="(javax.sql.DataSource, String)">e</a>.<span title="=&gt; javax.sql.DataSource">_1</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#155786" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not find datasource for &quot;)" class="string">&quot; - could not find datasource for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157512" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * A connection releasing automatically statements on close
 */</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class AutoCleanConnection extends java.lang.Object with java.sql.Connection with ScalaObject" id="12364">AutoCleanConnection</a><a href="#12364" title="ScalaObject" class="delimiter">(</a><a title="java.sql.Connection" id="155421">connection</a>: <span title="java.sql.Connection">Connection</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.sql.Connection">Connection</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[java.sql.Statement]" id="155359">statements</a> = scala.collection.mutable.<span title="object scala.collection.mutable.ListBuffer">ListBuffer</span>.<span title="[A]=&gt; scala.collection.mutable.ListBuffer[A]">empty</span><span title="scala.collection.mutable.ListBuffer[java.sql.Statement]" class="delimiter">[</span><span title="java.sql.Statement">Statement</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: java.sql.Statement](b: =&gt; T)T" id="155361">registering</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: java.sql.Statement" id="155363">T</a> &lt;: Statement<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="157603">b</a>: =&gt; T<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="157606">statement</a> = <a href="#157603" title="=&gt; T">b</a>
    <a href="#155359" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a> <span title="(x: java.sql.Statement)AutoCleanConnection.this.statements.type">+=</span> <a href="#157606" title="T">statement</a>
    <a href="#157606" title="T">statement</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="155364">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155359" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="(f: java.sql.Statement =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="java.sql.Statement" id="158845">statement</a> =&gt;
      <a href="#158845" title="java.sql.Statement">statement</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#155359" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.sql.Statement" id="155365">createStatement</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement" id="155366">createStatement</a><span class="delimiter">(</span><a title="Int" id="157889">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="157890">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155366" title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#157889" title="Int">resultSetType</a>, <a href="#157890" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement" id="155367">createStatement</a><span class="delimiter">(</span><a title="Int" id="157897">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="157898">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="157899">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155367" title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#157897" title="Int">resultSetType</a>, <a href="#157898" title="Int">resultSetConcurrency</a>, <a href="#157899" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.PreparedStatement" id="155368">prepareStatement</a><span class="delimiter">(</span><a title="String" id="157923">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#157923" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, autoGeneratedKeys: Int)java.sql.PreparedStatement" id="155369">prepareStatement</a><span class="delimiter">(</span><a title="String" id="157935">sql</a>: <span title="String">String</span>, <a title="Int" id="157936">autoGeneratedKeys</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#157935" title="String">sql</a>, <a href="#157936" title="Int">autoGeneratedKeys</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnIndexes: Array[Int])java.sql.PreparedStatement" id="155370">prepareStatement</a><span class="delimiter">(</span><a title="String" id="157952">sql</a>: <span title="String">String</span>, <a title="Array[Int]" id="157953">columnIndexes</a>: scala.<span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[Int])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#157952" title="String">sql</a>, <a href="#157953" title="Array[Int]">columnIndexes</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.PreparedStatement" id="155371">prepareStatement</a><span class="delimiter">(</span><a title="String" id="157968">sql</a>: <span title="String">String</span>, <a title="Int" id="157969">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="157970">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#157968" title="String">sql</a>, <a href="#157969" title="Int">resultSetType</a>, <a href="#157970" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.PreparedStatement" id="155372">prepareStatement</a><span class="delimiter">(</span><a title="String" id="157984">sql</a>: <span title="String">String</span>, <a title="Int" id="157985">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="157986">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="157987">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#157984" title="String">sql</a>, <a href="#157985" title="Int">resultSetType</a>, <a href="#157986" title="Int">resultSetConcurrency</a>, <a href="#157987" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnNames: Array[String])java.sql.PreparedStatement" id="155373">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158002">sql</a>: <span title="String">String</span>, <a title="Array[String]" id="158003">columnNames</a>: scala.<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.String])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158002" title="String">sql</a>, <a href="#158003" title="Array[String]">columnNames</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.CallableStatement" id="155374">prepareCall</a><span class="delimiter">(</span><a title="String" id="158018">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158018" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.CallableStatement" id="155375">prepareCall</a><span class="delimiter">(</span><a title="String" id="158342">sql</a>: <span title="String">String</span>, <a title="Int" id="158343">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158344">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158342" title="String">sql</a>, <a href="#158343" title="Int">resultSetType</a>, <a href="#158344" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.CallableStatement" id="155376">prepareCall</a><span class="delimiter">(</span><a title="String" id="158358">sql</a>: <span title="String">String</span>, <a title="Int" id="158359">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158360">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="158361">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155361" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158358" title="String">sql</a>, <a href="#158359" title="Int">resultSetType</a>, <a href="#158360" title="Int">resultSetConcurrency</a>, <a href="#158361" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="155377">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155364" title="()Unit">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="155378">clearWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Unit">clearWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="155379">commit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(typeName: String, elements: Array[AnyRef])java.sql.Array" id="155380">createArrayOf</a><span class="delimiter">(</span><a title="String" id="158381">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="158382">elements</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Array">createArrayOf</span><span class="delimiter">(</span><a href="#158381" title="String">typeName</a>, <a href="#158382" title="Array[AnyRef]">elements</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Blob" id="155381">createBlob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.Blob">createBlob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Clob" id="155382">createClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.Clob">createClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.NClob" id="155383">createNClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.NClob">createNClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLXML" id="155384">createSQLXML</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLXML">createSQLXML</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(typeName: String, attributes: Array[AnyRef])java.sql.Struct" id="155385">createStruct</a><span class="delimiter">(</span><a title="String" id="158581">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="158582">attributes</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Struct">createStruct</span><span class="delimiter">(</span><a href="#158581" title="String">typeName</a>, <a href="#158582" title="Array[AnyRef]">attributes</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155386">getAutoCommit</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Boolean">getAutoCommit</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.lang.String" id="155387">getCatalog</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.lang.String">getCatalog</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Properties" id="155388">getClientInfo</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.util.Properties">getClientInfo</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="155389">getClientInfo</a><span class="delimiter">(</span><a title="String" id="158609">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">getClientInfo</span><span class="delimiter">(</span><a href="#158609" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="155390">getHoldability</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Int">getHoldability</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.DatabaseMetaData" id="155391">getMetaData</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="155392">getTransactionIsolation</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Int">getTransactionIsolation</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Map[java.lang.String,java.lang.Class[_]]" id="155393">getTypeMap</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.util.Map[java.lang.String,java.lang.Class[_]]">getTypeMap</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLWarning" id="155394">getWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLWarning">getWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155395">isClosed</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Boolean">isClosed</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155396">isReadOnly</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Boolean">isReadOnly</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(timeout: Int)Boolean" id="155397">isValid</a><span class="delimiter">(</span><a title="Int" id="158666">timeout</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Boolean">isValid</span><span class="delimiter">(</span><a href="#158666" title="Int">timeout</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.lang.String" id="155398">nativeSQL</a><span class="delimiter">(</span><a title="String" id="158671">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">nativeSQL</span><span class="delimiter">(</span><a href="#158671" title="String">sql</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="155399">releaseSavepoint</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="158676">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">releaseSavepoint</span><span class="delimiter">(</span><a href="#158676" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="155400">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="155401">rollback</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="158683">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">rollback</span><span class="delimiter">(</span><a href="#158683" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(autoCommit: Boolean)Unit" id="155402">setAutoCommit</a><span class="delimiter">(</span><a title="Boolean" id="158688">autoCommit</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#158688" title="Boolean">autoCommit</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(catalog: String)Unit" id="155403">setCatalog</a><span class="delimiter">(</span><a title="String" id="158692">catalog</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#158692" title="String">catalog</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(properties: java.util.Properties)Unit" id="155404">setClientInfo</a><span class="delimiter">(</span><a title="java.util.Properties" id="158696">properties</a>: java.util.<span title="java.util.Properties">Properties</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Properties)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#158696" title="java.util.Properties">properties</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String, value: String)Unit" id="155405">setClientInfo</a><span class="delimiter">(</span><a title="String" id="158701">name</a>: <span title="String">String</span>, <a title="String" id="158702">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#158701" title="String">name</a>, <a href="#158702" title="String">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(holdability: Int)Unit" id="155406">setHoldability</a><span class="delimiter">(</span><a title="Int" id="158708">holdability</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setHoldability</span><span class="delimiter">(</span><a href="#158708" title="Int">holdability</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(readOnly: Boolean)Unit" id="155407">setReadOnly</a><span class="delimiter">(</span><a title="Boolean" id="158712">readOnly</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#158712" title="Boolean">readOnly</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()java.sql.Savepoint" id="155408">setSavepoint</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="()java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.sql.Savepoint" id="155409">setSavepoint</a><span class="delimiter">(</span><a title="String" id="158723">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><a href="#158723" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(level: Int)Unit" id="155410">setTransactionIsolation</a><span class="delimiter">(</span><a title="Int" id="158732">level</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#158732" title="Int">level</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(map: java.util.Map[String,Class[_]])Unit" id="155411">setTypeMap</a><span class="delimiter">(</span><a title="java.util.Map[String,Class[_]]" id="158736">map</a>: java.util.<span title="java.util.Map[String,Class[_]]">Map</span><span class="delimiter">[</span>String, Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Map[java.lang.String,java.lang.Class[_]])Unit">setTypeMap</span><span class="delimiter">(</span><a href="#158736" title="java.util.Map[String,Class[_]]">map</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(iface: Class[_])Boolean" id="155412">isWrapperFor</a><span class="delimiter">(</span><a title="Class[_]" id="158742">iface</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[_])Boolean">isWrapperFor</span><span class="delimiter">(</span><a href="#158742" title="Class[_]">iface</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](iface: Class[T])T" id="155413">unwrap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155415">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="158752">iface</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155421" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[T])T">unwrap</span><span class="delimiter">(</span><a href="#158752" title="Class[T]">iface</a><span class="delimiter">)</span>

  <span class="comment">// JDBC 4.1</span>
  <span class="keyword">def</span> <a title="()String" id="155416">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#158770" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getSchema<span class="delimiter">(</span><span class="delimiter">)</span>: String <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#158771" title="()String">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(schema: String)Unit" id="155417">setSchema</a><span class="delimiter">(</span><a title="String" id="158773">schema</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#158861" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setSchema<span class="delimiter">(</span>schema: String<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#158862" title="(schema: String)Unit">setSchema</a><span class="delimiter">(</span><a href="#158773" title="String">schema</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Int" id="155418">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#158779" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getNetworkTimeout<span class="delimiter">(</span><span class="delimiter">)</span>: Int <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#158780" title="()Int">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit" id="155419">setNetworkTimeout</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="158782">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span>, <a title="Int" id="158783">milliseconds</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#158864" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setNetworkTimeout<span class="delimiter">(</span>executor: java.util.concurrent.Executor, milliseconds: Int<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#158865" title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit">setNetworkTimeout</a><span class="delimiter">(</span><a href="#158782" title="java.util.concurrent.Executor">executor</a>, <a href="#158783" title="Int">milliseconds</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor)Unit" id="155420">abort</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="158790">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155421" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#158868" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> abort<span class="delimiter">(</span>executor: java.util.concurrent.Executor<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#158869" title="(executor: java.util.concurrent.Executor)Unit">abort</a><span class="delimiter">(</span><a href="#158790" title="java.util.concurrent.Executor">executor</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>