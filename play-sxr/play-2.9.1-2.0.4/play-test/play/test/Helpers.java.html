<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play-test/play/test/Helpers.java</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.test;

<span class="keyword">import</span> play.mvc.*;
<span class="keyword">import</span> play.libs.*;
<span class="keyword">import</span> play.libs.F.*;

<span class="keyword">import</span> org.openqa.selenium.*;
<span class="keyword">import</span> org.openqa.selenium.firefox.*;
<span class="keyword">import</span> org.openqa.selenium.htmlunit.*;

<span class="keyword">import</span> java.util.*;

<span class="comment">/**
 * Helper functions to run tests.
 */</span>
public <span class="keyword">class</span> <a title="object play.test.Helpers" id="10832">Helpers</a> implements play.mvc.Http.Status, play.mvc.Http.HeaderNames <span class="delimiter">{</span>
    
    public static String <a title="java.lang.String" id="382604">GET</a> = <span class="string">&quot;GET&quot;</span>;
    public static String <a title="java.lang.String" id="382605">POST</a> = <span class="string">&quot;POST&quot;</span>;
    public static String <a title="java.lang.String" id="382606">PUT</a> = <span class="string">&quot;PUT&quot;</span>;
    public static String <a title="java.lang.String" id="382607">DELETE</a> = <span class="string">&quot;DELETE&quot;</span>;
    public static String <a title="java.lang.String" id="382608">HEAD</a> = <span class="string">&quot;HEAD&quot;</span>;
    
    <span class="comment">// --</span>
    
    public static Class&lt;? <span class="keyword">extends</span> WebDriver&gt; <a title="java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver]" id="382609">HTMLUNIT</a> = HtmlUnitDriver.<span class="keyword">class</span>;
    public static Class&lt;? <span class="keyword">extends</span> WebDriver&gt; <a title="java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver]" id="382610">FIREFOX</a> = FirefoxDriver.<span class="keyword">class</span>;
    
    <span class="comment">// --</span>
    @SuppressWarnings<span class="delimiter">(</span>value = <span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
    <span class="keyword">private</span> static Result <a title="(handler: play.api.mvc.Handler, fakeRequest: play.test.FakeRequest)play.mvc.Result" id="382611">invokeHandler</a><span class="delimiter">(</span>play.api.mvc.<a href="../../../play/play/api/mvc/Action.scala.html#16586" title="play.api.mvc.Handler">Handler</a> <a title="play.api.mvc.Handler" id="382653">handler</a>, <a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="play.test.FakeRequest" id="382654">fakeRequest</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">if</span><span class="delimiter">(</span>handler instanceof play.core.j.JavaAction<span class="delimiter">)</span> <span class="delimiter">{</span>
            play.api.mvc.Action action = <span class="delimiter">(</span>play.api.mvc.Action<span class="delimiter">)</span>handler;
            <span class="keyword">final</span> play.api.mvc.Result iResult = action.apply<span class="delimiter">(</span>fakeRequest.getWrappedRequest<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
            <span class="keyword">return</span> <span class="keyword">new</span> Result<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                
                public play.api.mvc.Result getWrappedResult<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">return</span> iResult;
                <span class="delimiter">}</span>

                public String toString<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">return</span> iResult.toString<span class="delimiter">(</span><span class="delimiter">)</span>;
                <span class="delimiter">}</span>
                
            <span class="delimiter">}</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span><span class="string">&quot;This is not a JavaAction and can't be invoked this way.&quot;</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">// --</span>
    
    <span class="comment">/**
     * Call an action method while decorating it with the right @With interceptors.
     */</span>
    public static Result <a title="(actionReference: play.mvc.HandlerRef)play.mvc.Result" id="382612">callAction</a><span class="delimiter">(</span>HandlerRef <a title="play.mvc.HandlerRef" id="382656">actionReference</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> callAction<span class="delimiter">(</span>actionReference, fakeRequest<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Call an action method while decorating it with the right @With interceptors.
     */</span>
    public static Result <a title="(actionReference: play.mvc.HandlerRef, fakeRequest: play.test.FakeRequest)play.mvc.Result" id="382613">callAction</a><span class="delimiter">(</span>HandlerRef <a title="play.mvc.HandlerRef" id="382658">actionReference</a>, <a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="play.test.FakeRequest" id="382659">fakeRequest</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        play.api.mvc.HandlerRef handlerRef = <span class="delimiter">(</span>play.api.mvc.HandlerRef<span class="delimiter">)</span>actionReference;
        <span class="keyword">return</span> invokeHandler<span class="delimiter">(</span>handlerRef.handler<span class="delimiter">(</span><span class="delimiter">)</span>, fakeRequest<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Build a new GET / fake request.
     */</span>
    public static <a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="()play.test.FakeRequest" id="382614">fakeRequest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> FakeRequest<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Build a new fake request.
     */</span>
    public static <a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="(method: java.lang.String, uri: java.lang.String)play.test.FakeRequest" id="382615">fakeRequest</a><span class="delimiter">(</span>String <a title="java.lang.String" id="382662">method</a>, String <a title="java.lang.String" id="382663">uri</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> FakeRequest<span class="delimiter">(</span>method, uri<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Build a new fake application.
     */</span>
    public static <a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="()play.test.FakeApplication" id="382616">fakeApplication</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> FakeApplication<span class="delimiter">(</span><span class="keyword">new</span> java.io.File<span class="delimiter">(</span><span class="string">&quot;.&quot;</span><span class="delimiter">)</span>, Helpers.<span class="keyword">class</span>.getClassLoader<span class="delimiter">(</span><span class="delimiter">)</span>, <span class="keyword">new</span> HashMap&lt;String,String&gt;<span class="delimiter">(</span><span class="delimiter">)</span>, <span class="keyword">new</span> ArrayList&lt;String&gt;<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Constructs a in-memory (h2) database configuration to add to a FakeApplication.
     */</span>
    public static Map&lt;String,String&gt; <a title="()java.util.Map[java.lang.String,java.lang.String]" id="382617">inMemoryDatabase</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> inMemoryDatabase<span class="delimiter">(</span><span class="string">&quot;default&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Constructs a in-memory (h2) database configuration to add to a FakeApplication.
     */</span>
    public static Map&lt;String,String&gt; <a title="(name: java.lang.String)java.util.Map[java.lang.String,java.lang.String]" id="382618">inMemoryDatabase</a><span class="delimiter">(</span>String <a title="java.lang.String" id="382667">name</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> Scala.asJava<span class="delimiter">(</span>play.api.test.Helpers.inMemoryDatabase<span class="delimiter">(</span>name<span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Build a new fake application.
     */</span>
    public static <a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="(additionalConfiguration: java.util.Map[java.lang.String,java.lang.String])play.test.FakeApplication" id="382619">fakeApplication</a><span class="delimiter">(</span>Map&lt;String,String&gt; <a title="java.util.Map[java.lang.String,java.lang.String]" id="382669">additionalConfiguration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> FakeApplication<span class="delimiter">(</span><span class="keyword">new</span> java.io.File<span class="delimiter">(</span><span class="string">&quot;.&quot;</span><span class="delimiter">)</span>, Helpers.<span class="keyword">class</span>.getClassLoader<span class="delimiter">(</span><span class="delimiter">)</span>, additionalConfiguration, <span class="keyword">new</span> ArrayList&lt;String&gt;<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    

    <span class="comment">/**
     * Build a new fake application.
     */</span>
    public static <a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="(additionalConfiguration: java.util.Map[java.lang.String,java.lang.String], additionalPlugin: java.util.List[java.lang.String])play.test.FakeApplication" id="382620">fakeApplication</a><span class="delimiter">(</span>Map&lt;String,String&gt; <a title="java.util.Map[java.lang.String,java.lang.String]" id="382671">additionalConfiguration</a>, List&lt;String&gt; <a title="java.util.List[java.lang.String]" id="382672">additionalPlugin</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> FakeApplication<span class="delimiter">(</span><span class="keyword">new</span> java.io.File<span class="delimiter">(</span><span class="string">&quot;.&quot;</span><span class="delimiter">)</span>, Helpers.<span class="keyword">class</span>.getClassLoader<span class="delimiter">(</span><span class="delimiter">)</span>, additionalConfiguration, additionalPlugin<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Extracts the Status code of this Result value.
     */</span>
    public static int <a title="(result: play.mvc.Result)Int" id="382621">status</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382674">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> play.core.j.JavaResultExtractor.getStatus<span class="delimiter">(</span>result<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the Location header of this Result value if this Result is a Redirect.
     */</span>
    public static String <a title="(result: play.mvc.Result)java.lang.String" id="382622">redirectLocation</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382676">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> header<span class="delimiter">(</span>LOCATION, result<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the Flash values of this Result value.
     */</span>
    public static play.mvc.<a href="../../../play/play/mvc/Http.java.html#21656" title="object play.mvc.Http">Http</a>.<a href="../../../play/play/mvc/Http.java.html#82059" title="play.mvc.Http.Flash">Flash</a> <a title="(result: play.mvc.Result)play.mvc.Http.Flash" id="382623">flash</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382678">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> play.mvc.Http.Flash<span class="delimiter">(</span>
            Scala.asJava<span class="delimiter">(</span>play.api.test.Helpers.flash<span class="delimiter">(</span>result.getWrappedResult<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.data<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Extracts the Session of this Result value.
     */</span>
    public static play.mvc.<a href="../../../play/play/mvc/Http.java.html#21656" title="object play.mvc.Http">Http</a>.<a href="../../../play/play/mvc/Http.java.html#82056" title="play.mvc.Http.Session">Session</a> <a title="(result: play.mvc.Result)play.mvc.Http.Session" id="382624">session</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382680">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> play.mvc.Http.Session<span class="delimiter">(</span>
                Scala.asJava<span class="delimiter">(</span>play.api.test.Helpers.session<span class="delimiter">(</span>result.getWrappedResult<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.data<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">)</span>;
    <span class="delimiter">}</span>
        
    <span class="comment">/**
     * * Extracts a Cookie value from this Result value
     */</span>    
    public static play.mvc.<a href="../../../play/play/mvc/Http.java.html#21656" title="object play.mvc.Http">Http</a>.<a href="../../../play/play/mvc/Http.java.html#82062" title="play.mvc.Http.Cookie">Cookie</a> <a title="(name: java.lang.String, result: play.mvc.Result)play.mvc.Http.Cookie" id="382625">cookie</a><span class="delimiter">(</span>String <a title="java.lang.String" id="382682">name</a>, Result <a title="play.mvc.Result" id="382683">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> play.core.j.JavaResultExtractor.getCookies<span class="delimiter">(</span>result<span class="delimiter">)</span>.get<span class="delimiter">(</span>name<span class="delimiter">)</span>;
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Extracts an Header value of this Result value.
     */</span>
    public static String <a title="(header: java.lang.String, result: play.mvc.Result)java.lang.String" id="382626">header</a><span class="delimiter">(</span>String <a title="java.lang.String" id="382685">header</a>, Result <a title="play.mvc.Result" id="382686">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> play.core.j.JavaResultExtractor.getHeaders<span class="delimiter">(</span>result<span class="delimiter">)</span>.get<span class="delimiter">(</span>header<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts all Headers of this Result value.
     */</span>
    public static Map&lt;String,String&gt; <a title="(result: play.mvc.Result)java.util.Map[java.lang.String,java.lang.String]" id="382627">headers</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382688">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> play.core.j.JavaResultExtractor.getHeaders<span class="delimiter">(</span>result<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the Content-Type of this Content value.
     */</span>
    public static String <a title="(content: play.mvc.Content)java.lang.String" id="382628">contentType</a><span class="delimiter">(</span>Content <a title="play.mvc.Content" id="382690">content</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> content.contentType<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the Content-Type of this Result value.
     */</span>
    public static String <a title="(result: play.mvc.Result)java.lang.String" id="382629">contentType</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382692">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        String h = header<span class="delimiter">(</span>CONTENT_TYPE, result<span class="delimiter">)</span>;
        <span class="keyword">if</span><span class="delimiter">(</span>h == <span class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">return</span> <span class="keyword">null</span>;
        <span class="keyword">if</span><span class="delimiter">(</span>h.contains<span class="delimiter">(</span><span class="string">&quot;;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> h.substring<span class="delimiter">(</span><span class="int">0</span>, h.indexOf<span class="delimiter">(</span><span class="string">&quot;;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.trim<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> h.trim<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the Charset of this Result value.
     */</span>
    public static String <a title="(result: play.mvc.Result)java.lang.String" id="382630">charset</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382694">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        String h = header<span class="delimiter">(</span>CONTENT_TYPE, result<span class="delimiter">)</span>;
        <span class="keyword">if</span><span class="delimiter">(</span>h == <span class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">return</span> <span class="keyword">null</span>;
        <span class="keyword">if</span><span class="delimiter">(</span>h.contains<span class="delimiter">(</span><span class="string">&quot;; charset=&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> h.substring<span class="delimiter">(</span>h.indexOf<span class="delimiter">(</span><span class="string">&quot;; charset=&quot;</span><span class="delimiter">)</span> + <span class="int">10</span>, h.length<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.trim<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> <span class="keyword">null</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the content as bytes.
     */</span>
    public static byte<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="(result: play.mvc.Result)Array[Byte]" id="382631">contentAsBytes</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382696">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> play.core.j.JavaResultExtractor.getBody<span class="delimiter">(</span>result<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the content as bytes.
     */</span>
    public static byte<span class="delimiter">[</span><span title="Array" class="delimiter">]</span> <a title="(content: play.mvc.Content)Array[Byte]" id="382632">contentAsBytes</a><span class="delimiter">(</span>Content <a title="play.mvc.Content" id="382698">content</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> content.body<span class="delimiter">(</span><span class="delimiter">)</span>.getBytes<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the content as String.
     */</span>
    public static String <a title="(content: play.mvc.Content)java.lang.String" id="382633">contentAsString</a><span class="delimiter">(</span>Content <a title="play.mvc.Content" id="382700">content</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> content.body<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Extracts the content as String.
     */</span>
    public static String <a title="(result: play.mvc.Result)java.lang.String" id="382634">contentAsString</a><span class="delimiter">(</span>Result <a title="play.mvc.Result" id="382702">result</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            String charset = charset<span class="delimiter">(</span>result<span class="delimiter">)</span>;
            <span class="keyword">if</span><span class="delimiter">(</span>charset == <span class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                charset = <span class="string">&quot;utf-8&quot;</span>;
            <span class="delimiter">}</span>
            <span class="keyword">return</span> <span class="keyword">new</span> String<span class="delimiter">(</span>contentAsBytes<span class="delimiter">(</span>result<span class="delimiter">)</span>, charset<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>RuntimeException e<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> e;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Throwable t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span>t<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Use the Router to determine the Action to call for this request and executes it.
     */</span>
    @SuppressWarnings<span class="delimiter">(</span>value = <span class="string">&quot;unchecked&quot;</span><span class="delimiter">)</span>
    public static Result <a title="(fakeRequest: play.test.FakeRequest)play.mvc.Result" id="382635">routeAndCall</a><span class="delimiter">(</span><a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="play.test.FakeRequest" id="382704">fakeRequest</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> routeAndCall<span class="delimiter">(</span><span class="delimiter">(</span>Class&lt;? <span class="keyword">extends</span> play.core.Router.Routes&gt;<span class="delimiter">)</span>FakeRequest.<span class="keyword">class</span>.getClassLoader<span class="delimiter">(</span><span class="delimiter">)</span>.loadClass<span class="delimiter">(</span><span class="string">&quot;Routes&quot;</span><span class="delimiter">)</span>, fakeRequest<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>RuntimeException e<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> e;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Throwable t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span>t<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Use the Router to determine the Action to call for this request and executes it.
     */</span>
    public static Result <a title="(router: java.lang.Class[_ &lt;: play.core.Router.Routes], fakeRequest: play.test.FakeRequest)play.mvc.Result" id="382636">routeAndCall</a><span class="delimiter">(</span>Class&lt;? <span class="keyword">extends</span> play.core.<a href="../../../play/play/core/router/Router.scala.html#18962" title="object play.core.Router">Router</a>.<a href="../../../play/play/core/router/Router.scala.html#78744" title="play.core.Router.Routes">Routes</a>&gt; <a title="java.lang.Class[_ &lt;: play.core.Router.Routes]" id="382706">router</a>, <a href="FakeRequest.java.html#10817" title="play.test.FakeRequest">FakeRequest</a> <a title="play.test.FakeRequest" id="382707">fakeRequest</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            play.core.Router.Routes routes = <span class="delimiter">(</span>play.core.Router.Routes<span class="delimiter">)</span>router.getClassLoader<span class="delimiter">(</span><span class="delimiter">)</span>.loadClass<span class="delimiter">(</span>router.getName<span class="delimiter">(</span><span class="delimiter">)</span> + <span class="string">&quot;$&quot;</span><span class="delimiter">)</span>.getDeclaredField<span class="delimiter">(</span><span class="string">&quot;MODULE$&quot;</span><span class="delimiter">)</span>.get<span class="delimiter">(</span><span class="keyword">null</span><span class="delimiter">)</span>;
            <span class="keyword">if</span><span class="delimiter">(</span>routes.routes<span class="delimiter">(</span><span class="delimiter">)</span>.isDefinedAt<span class="delimiter">(</span>fakeRequest.getWrappedRequest<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">return</span> invokeHandler<span class="delimiter">(</span>routes.routes<span class="delimiter">(</span><span class="delimiter">)</span>.apply<span class="delimiter">(</span>fakeRequest.getWrappedRequest<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, fakeRequest<span class="delimiter">)</span>;
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                <span class="keyword">return</span> <span class="keyword">null</span>;
            <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>RuntimeException e<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> e;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Throwable t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span>t<span class="delimiter">)</span>;
        <span class="delimiter">}</span> 
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Starts a new application.
     */</span>
    public static void <a title="(fakeApplication: play.test.FakeApplication)Unit" id="382637">start</a><span class="delimiter">(</span><a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="play.test.FakeApplication" id="382711">fakeApplication</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        play.api.Play.start<span class="delimiter">(</span>fakeApplication.getWrappedApplication<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Stops an application.
     */</span>
    public static void <a title="(fakeApplication: play.test.FakeApplication)Unit" id="382638">stop</a><span class="delimiter">(</span><a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="play.test.FakeApplication" id="382713">fakeApplication</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        play.api.Play.stop<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Executes a block of code in a running application.
     */</span>
    public static void <a title="(fakeApplication: play.test.FakeApplication, block: java.lang.Runnable)Unit" id="382639">running</a><span class="delimiter">(</span><a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="play.test.FakeApplication" id="382715">fakeApplication</a>, <span class="keyword">final</span> Runnable <a title="java.lang.Runnable" id="382716">block</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            start<span class="delimiter">(</span>fakeApplication<span class="delimiter">)</span>;
            block.run<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
            stop<span class="delimiter">(</span>fakeApplication<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Creates a new Test server.
     */</span>
    public static <a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="(port: Int)play.test.TestServer" id="382640">testServer</a><span class="delimiter">(</span>int <a title="Int" id="382718">port</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> TestServer<span class="delimiter">(</span>port, fakeApplication<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Creates a new Test server.
     */</span>
    public static <a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="(port: Int, app: play.test.FakeApplication)play.test.TestServer" id="382641">testServer</a><span class="delimiter">(</span>int <a title="Int" id="382720">port</a>, <a href="FakeApplication.java.html#10814" title="play.test.FakeApplication">FakeApplication</a> <a title="play.test.FakeApplication" id="382721">app</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> TestServer<span class="delimiter">(</span>port, app<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Starts a Test server.
     */</span>
    public static void <a title="(server: play.test.TestServer)Unit" id="382642">start</a><span class="delimiter">(</span><a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="play.test.TestServer" id="382723">server</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        server.start<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Stops a Test server.
     */</span>
    public static void <a title="(server: play.test.TestServer)Unit" id="382643">stop</a><span class="delimiter">(</span><a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="play.test.TestServer" id="382725">server</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        server.stop<span class="delimiter">(</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Executes a block of code in a running server.
     */</span>
    public static void <a title="(server: play.test.TestServer, block: java.lang.Runnable)Unit" id="382644">running</a><span class="delimiter">(</span><a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="play.test.TestServer" id="382727">server</a>, <span class="keyword">final</span> Runnable <a title="java.lang.Runnable" id="382728">block</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            start<span class="delimiter">(</span>server<span class="delimiter">)</span>;
            block.run<span class="delimiter">(</span><span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
            stop<span class="delimiter">(</span>server<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Executes a block of code in a running server, with a test browser.
     */</span>
    public static void <a title="(server: play.test.TestServer, webDriver: java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver], block: play.libs.F.Callback[play.test.TestBrowser])Unit" id="382645">running</a><span class="delimiter">(</span><a href="TestServer.java.html#10823" title="play.test.TestServer">TestServer</a> <a title="play.test.TestServer" id="382730">server</a>, Class&lt;? <span class="keyword">extends</span> WebDriver&gt; <a title="java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver]" id="382731">webDriver</a>, <span class="keyword">final</span> Callback&lt;<a href="TestBrowser.java.html#10829" title="play.test.TestBrowser">TestBrowser</a>&gt; <a title="play.libs.F.Callback[play.test.TestBrowser]" id="382732">block</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        TestBrowser browser = <span class="keyword">null</span>;
        <span class="keyword">try</span> <span class="delimiter">{</span>
            start<span class="delimiter">(</span>server<span class="delimiter">)</span>;
            browser = testBrowser<span class="delimiter">(</span>webDriver<span class="delimiter">)</span>;
            block.invoke<span class="delimiter">(</span>browser<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Throwable t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span>t<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
            <span class="keyword">if</span><span class="delimiter">(</span>browser != <span class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                browser.quit<span class="delimiter">(</span><span class="delimiter">)</span>;
            <span class="delimiter">}</span>
            stop<span class="delimiter">(</span>server<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Creates a Test Browser.
     */</span>
    public static <a href="TestBrowser.java.html#10829" title="play.test.TestBrowser">TestBrowser</a> <a title="()play.test.TestBrowser" id="382646">testBrowser</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> testBrowser<span class="delimiter">(</span>HTMLUNIT<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Creates a Test Browser.
     */</span>
    public static <a href="TestBrowser.java.html#10829" title="play.test.TestBrowser">TestBrowser</a> <a title="(webDriver: java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver])play.test.TestBrowser" id="382647">testBrowser</a><span class="delimiter">(</span>Class&lt;? <span class="keyword">extends</span> WebDriver&gt; <a title="java.lang.Class[_ &lt;: org.openqa.selenium.WebDriver]" id="382737">webDriver</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
            <span class="keyword">return</span> <span class="keyword">new</span> TestBrowser<span class="delimiter">(</span>webDriver<span class="delimiter">)</span>;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>RuntimeException e<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> e;
        <span class="delimiter">}</span> <span class="keyword">catch</span><span class="delimiter">(</span>Throwable t<span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException<span class="delimiter">(</span>t<span class="delimiter">)</span>;
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">/**
     * Creates a Test Browser.
     */</span>
    public static <a href="TestBrowser.java.html#10829" title="play.test.TestBrowser">TestBrowser</a> <a title="(of: org.openqa.selenium.WebDriver)play.test.TestBrowser" id="382648">testBrowser</a><span class="delimiter">(</span>WebDriver <a title="org.openqa.selenium.WebDriver" id="382741">of</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> TestBrowser<span class="delimiter">(</span>of<span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    
<span class="delimiter">}</span>

        </pre>
    </body>
</html>