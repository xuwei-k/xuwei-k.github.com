<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play-test/play/api/test/Selenium.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.test

<span class="keyword">import</span> java.io._

<span class="keyword">import</span> play.api._

<span class="keyword">import</span> org.openqa.selenium._
<span class="keyword">import</span> org.openqa.selenium.firefox._
<span class="keyword">import</span> org.openqa.selenium.htmlunit._

<span class="keyword">import</span> org.fluentlenium.core._

<span class="keyword">import</span> collection.<span title="object scala.collection.JavaConverters">JavaConverters</span>._

<span class="comment">/**
 * A test browser (Using Selenium WebDriver) with the FluentLenium API (https://github.com/Fluentlenium/FluentLenium).
 *
 * @param webDriver The WebDriver instance to use.
 */</span>
case <span class="keyword">class</span> <a title="class TestBrowser extends org.fluentlenium.core.FluentAdapter with ScalaObject with Product with Serializable" id="72165">TestBrowser</a><a href="#72165" title="ScalaObject" class="delimiter">(</a><a title="org.openqa.selenium.WebDriver" id="72170">webDriver</a>: <span title="org.openqa.selenium.WebDriver">WebDriver</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="org.fluentlenium.core.FluentAdapter">FluentAdapter</span><span class="delimiter">(</span><a href="#72170" title="org.openqa.selenium.WebDriver">webDriver</a><span class="delimiter">)</span> <span class="delimiter">{</span>


  <span class="comment">/**
   * The current page URL.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="71955">url</a> = <a href="#72165" title="play.api.test.TestBrowser" class="keyword">super</a>.<span title="()java.lang.String">url</span>

  <span class="comment">/**
   * The title of the current page.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="71956">title</a> = <a href="#72165" title="play.api.test.TestBrowser" class="keyword">super</a>.<span title="()java.lang.String">title</span>

  <span class="comment">/**
   * The current page HTML source.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="71957">pageSource</a> = <a href="#72165" title="play.api.test.TestBrowser" class="keyword">super</a>.<span title="()java.lang.String">pageSource</span>

  <span class="comment">/**
   * Retrieves all cookies.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.util.Set[org.openqa.selenium.Cookie]" id="71958">getCookies</a><span class="delimiter">(</span><span class="delimiter">)</span>: java.util.<span title="java.util.Set[org.openqa.selenium.Cookie]">Set</span><span class="delimiter">[</span>Cookie<span class="delimiter">]</span> = <a href="#72165" title="play.api.test.TestBrowser" class="keyword">super</a>.<span title="()java.util.Set[org.openqa.selenium.Cookie]">getCookies</span>

  <span class="comment">/**
   * Retrieves a cookie.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)org.openqa.selenium.Cookie" id="71959">getCookie</a><span class="delimiter">(</span><a title="String" id="78682">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="org.openqa.selenium.Cookie">Cookie</span> = <a href="#72165" title="play.api.test.TestBrowser" class="keyword">super</a>.<span title="(x$1: java.lang.String)org.openqa.selenium.Cookie">getCookie</span><span class="delimiter">(</span><a href="#78682" title="String">name</a><span class="delimiter">)</span>



<span class="delimiter">}</span>

<span class="comment">/**
 * Helper utilities to build TestBrowsers
 */</span>
<span class="keyword">object</span> <a title="object play.api.test.TestBrowser" id="78736">TestBrowser</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/**
   * Creates an in-memory WebBrowser (using HtmlUnit)
   */</span>
  <span class="keyword">def</span> <a title="()play.api.test.TestBrowser" id="72160">default</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#72162" title="(webDriver: Class[org.openqa.selenium.htmlunit.HtmlUnitDriver])play.api.test.TestBrowser">of</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[org.openqa.selenium.htmlunit.HtmlUnitDriver](classOf[org.openqa.selenium.htmlunit.HtmlUnitDriver])" class="delimiter">[</span>HtmlUnitDriver<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a firefox WebBrowser.
   */</span>
  <span class="keyword">def</span> <a title="()play.api.test.TestBrowser" id="72161">firefox</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#72162" title="(webDriver: Class[org.openqa.selenium.firefox.FirefoxDriver])play.api.test.TestBrowser">of</a><span class="delimiter">(</span>classOf<span title="java.lang.Class[org.openqa.selenium.firefox.FirefoxDriver](classOf[org.openqa.selenium.firefox.FirefoxDriver])" class="delimiter">[</span>FirefoxDriver<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a WebBrowser of the specified class name.
   */</span>
  <span class="keyword">def</span> <a title="[WEBDRIVER &lt;: org.openqa.selenium.WebDriver](webDriver: Class[WEBDRIVER])play.api.test.TestBrowser" id="72162">of</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.openqa.selenium.WebDriver" id="72164">WEBDRIVER</a> &lt;: WebDriver<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[WEBDRIVER]" id="72167">webDriver</a>: <span title="Class[WEBDRIVER]">Class</span><span class="delimiter">[</span>WEBDRIVER<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#72165" title="(webDriver: org.openqa.selenium.WebDriver)play.api.test.TestBrowser">TestBrowser</a><span class="delimiter">(</span><a href="#72173" title="(clazz: Class[WEBDRIVER])org.openqa.selenium.WebDriver">WebDriverFactory</a><span class="delimiter">(</span><a href="#72167" title="Class[WEBDRIVER]">webDriver</a><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object play.api.test.WebDriverFactory" id="11078">WebDriverFactory</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/**
   * Creates a Selenium Web Driver and configures it
   * @param clazz Type of driver to create
   * @return The driver instance
   */</span>
  <span class="keyword">def</span> <a title="[D &lt;: org.openqa.selenium.WebDriver](clazz: Class[D])org.openqa.selenium.WebDriver" id="72173">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.openqa.selenium.WebDriver" id="72175">D</a> &lt;: WebDriver<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[D]" id="72176">clazz</a>: <span title="Class[D]">Class</span><span class="delimiter">[</span>D<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="org.openqa.selenium.WebDriver">WebDriver</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="D" id="78738">driver</a> = <a href="#72176" title="Class[D]">clazz</a>.<span title="()D">newInstance</span>
    <span class="comment">// Driver-specific configuration</span>
    <a href="#78738" title="D">driver</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="78739">htmlunit</a>: <span title="org.openqa.selenium.htmlunit.HtmlUnitDriver">HtmlUnitDriver</span> =&gt; <a href="#78739" title="org.openqa.selenium.htmlunit.HtmlUnitDriver">htmlunit</a>.<span title="(x$1: Boolean)Unit">setJavascriptEnabled</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
    <span class="delimiter">}</span>
    <a href="#78738" title="D">driver</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A test Netty web server.
 *
 * @param port HTTP port to bind on.
 * @param application The FakeApplication to load in this server.
 */</span>
case <span class="keyword">class</span> <a title="class TestServer extends java.lang.Object with ScalaObject with Product with Serializable" id="80716">TestServer</a><a href="#80716" title="ScalaObject" class="delimiter">(</a><a title="Int" id="80708">port</a>: <span title="Int">Int</span>, <a title="play.api.test.FakeApplication" id="80713">application</a>: <a href="Fakes.scala.html#10996" title="play.api.test.FakeApplication">FakeApplication</a> = <a href="Fakes.scala.html#67526" title="(path: java.io.File, classloader: java.lang.ClassLoader, additionalPlugins: Seq[String], withoutPlugins: Seq[String], additionalConfiguration: Map[String,String])play.api.test.FakeApplication">FakeApplication</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="play.core.server.NettyServer" id="71779">server</a>: play.core.server.<a href="../../../../play/play/core/server/NettyServer.scala.html#20554" title="play.core.server.NettyServer">NettyServer</a> = _

  <span class="comment">/**
   * Starts this server.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="71781">start</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#71779" title="=&gt; play.core.server.NettyServer">server</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Server already started!&quot;)" class="string">&quot;Server already started!&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    play.core.<a href="../../../../play/play/core/system/Invoker.scala.html#18273" title="object play.core.Invoker">Invoker</a>.<a href="../../../../play/play/core/system/Invoker.scala.html#78811" title="()Unit">uninit</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#71779" title="(x$1: play.core.server.NettyServer)Unit">server</a> = <a href="../../../../play/play/core/server/NettyServer.scala.html#79107" title="String" id="80638" class="keyword">new</a> play.core.server.<a href="../../../../play/play/core/server/NettyServer.scala.html#20555" title="object play.core.server.NettyServer">NettyServer</a><span class="delimiter">(</span><a title="play.core.TestApplication" id="80635" class="keyword">new</a> play.core.<a href="../../../../play/play/core/system/ApplicationProvider.scala.html#17798" title="play.core.TestApplication">TestApplication</a><span class="delimiter">(</span><a href="#80713" title="=&gt; play.api.test.FakeApplication">application</a><span class="delimiter">)</span>, <a href="#80708" title="Int" id="80636">port</a>, mode = <a href="../../../../play/play/api/Play.scala.html#10864" title="object play.api.Mode">Mode</a>.<a href="../../../../play/play/api/Play.scala.html#67655" title="play.api.Mode.Value" id="80637">Test</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Stops this server.
   */</span>
  <span class="keyword">def</span> <a title="()Unit" id="71782">stop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#71779" title="=&gt; play.core.server.NettyServer">server</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Server is not started!&quot;)" class="string">&quot;Server is not started!&quot;</span><span class="delimiter">)</span>;
    <span class="delimiter">}</span>
    <a href="#71779" title="=&gt; play.core.server.NettyServer">server</a>.<a href="../../../../play/play/core/server/NettyServer.scala.html#78776" title="()Unit">stop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#71779" title="(x$1: play.core.server.NettyServer)Unit">server</a> = <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>
        </pre>
    </body>
</html>