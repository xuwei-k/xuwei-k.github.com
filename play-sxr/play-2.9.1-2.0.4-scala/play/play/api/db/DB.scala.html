<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>play/play/api/db/DB.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.db

<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.libs._

<span class="keyword">import</span> play.core._

<span class="keyword">import</span> java.sql._
<span class="keyword">import</span> javax.sql._

<span class="keyword">import</span> com.jolbox.bonecp._
<span class="keyword">import</span> com.jolbox.bonecp.hooks._

<span class="comment">/**
 * The Play Database API manages several connection pools.
 *
 * @param datasources the managed data sources
 */</span>
<span class="keyword">trait</span> <a title="trait DBApi extends java.lang.Object with ScalaObject" id="12569">DBApi</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="=&gt; List[(javax.sql.DataSource, String)]" id="155359">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span><span class="delimiter">(</span>DataSource, String<span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Shutdown pool for given datasource
   */</span>
  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="155360">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="155376">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="155361">getDataSource</a><span class="delimiter">(</span><a title="String" id="155378">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span>

  <span class="comment">/**
   * Retrieves the JDBC connection URL for a particular data source.
   *
   * @param name the data source name
   * @return The JDBC URL connection string, i.e. `jdbc:…`
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)String" id="155362">getDataSourceURL</a><span class="delimiter">(</span><a title="String" id="155380">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="155382">connection</a> = <a href="#155361" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155380" title="String">name</a><span class="delimiter">)</span>.<span title="()java.sql.Connection">getConnection</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="155383">url</a> = <a href="#155382" title="java.sql.Connection">connection</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span>
    <a href="#155382" title="java.sql.Connection">connection</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#155383" title="java.lang.String">url</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)java.sql.Connection" id="155363">getConnection</a><span class="delimiter">(</span><a title="String" id="155721">name</a>: <span title="String">String</span>, <a title="Boolean" id="155724">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="155725">connection</a> = <a href="#155361" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155721" title="String">name</a><span class="delimiter">)</span>.<span title="()java.sql.Connection">getConnection</span>
    <a href="#155725" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#155724" title="Boolean">autocommit</a><span class="delimiter">)</span>
    <a href="#155725" title="java.sql.Connection">connection</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="155364">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155366">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155728">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155729">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#155366" title="A">A</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.db.AutoCleanConnection" id="155732">connection</a> = <span title="play.api.db.AutoCleanConnection" class="keyword">new</span> <a href="#12596" title="play.api.db.AutoCleanConnection">AutoCleanConnection</a><span class="delimiter">(</span><a href="#155363" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#155728" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#155729" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#155732" title="play.api.db.AutoCleanConnection">connection</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#155732" title="play.api.db.AutoCleanConnection">connection</a>.<a href="#155754" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)A" id="155367">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155369">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155803">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155804">block</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#155369" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155364" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#155803" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.sql.Connection" id="155812">connection</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#155812" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="A" id="155813">r</a> = <a href="#155804" title="(v1: java.sql.Connection)A">block</a><span class="delimiter">(</span><a href="#155812" title="java.sql.Connection">connection</a><span class="delimiter">)</span>
        <a href="#155812" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#155813" title="A">r</a>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="155815">e</a> =&gt; <a href="#155812" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span>; <span title="Nothing" class="keyword">throw</span> <a href="#155815" title="java.lang.Throwable">e</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Provides a high-level API for getting JDBC connections.
 *
 * For example:
 * {{{
 * val conn = DB.getConnection(&quot;customers&quot;)
 * }}}
 */</span>
<span class="keyword">object</span> <a title="object play.api.db.DB" id="12558">DB</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="comment">/** The exception we are throwing. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="155824">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;DB plugin is not registered.&quot;)" class="string">&quot;DB plugin is not registered.&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection.
   *
   * @param name data source name
   * @param autocommit when `true`, sets this connection to auto-commit
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String, autocommit: Boolean)(implicit app: play.api.Application)java.sql.Connection" id="155825">getConnection</a><span class="delimiter">(</span><a title="String" id="155851">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span>, <a title="Boolean" id="155852">autocommit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155849">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <a href="#155849" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; java.sql.Connection)Option[java.sql.Connection]">map</span><span class="delimiter">(</span><a href="#155879" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155363" title="(name: String, autocommit: Boolean)java.sql.Connection">getConnection</a><span class="delimiter">(</span><a href="#155851" title="String">name</a>, <a href="#155852" title="Boolean">autocommit</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; java.sql.Connection)java.sql.Connection">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Retrieves a JDBC connection (autocommit is set to true).
   *
   * @param name data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)(implicit app: play.api.Application)javax.sql.DataSource" id="155826">getDataSource</a><span class="delimiter">(</span><a title="String" id="155891">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155889">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <a href="#155889" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a href="#155916" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155361" title="(name: String)javax.sql.DataSource">getDataSource</a><span class="delimiter">(</span><a href="#155891" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection is
   * automatically released.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155827">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155829">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="155923">name</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155924">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155925">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155829" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155925" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155952" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155364" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><a href="#155923" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155924" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, providing a JDBC connection. The connection and all created statements are
   * automatically released.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155830">withConnection</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155832">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="155965">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="155966">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155832" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#155966" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#155993" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155364" title="(name: String)(block: java.sql.Connection =&gt; A)A">withConnection</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#155965" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](name: String)(block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155833">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="156012">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="156010">name</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="156007">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="156008">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#156012" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#156008" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#156038" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155367" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><a href="#156010" title="String">name</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#156007" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param block Code block to execute.
   */</span>
  <span class="keyword">def</span> <a title="[A](block: java.sql.Connection =&gt; A)(implicit app: play.api.Application)A" id="155836">withTransaction</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155838">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="156051">block</a>: Connection =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="156052">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="#155838" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#156052" title="play.api.Application">app</a>.<a href="../Application.scala.html#67474" title="[T](implicit m: Manifest[T])Option[T]">plugin</a><span title="(implicit m: Manifest[play.api.db.DBPlugin])Option[play.api.db.DBPlugin]" class="delimiter">[</span><a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a><span class="delimiter">]</span>.<span title="(f: play.api.db.DBPlugin =&gt; A)Option[A]">map</span><span class="delimiter">(</span><a href="#156079" title="play.api.db.DBPlugin">_</a>.<a href="#155856" title="=&gt; play.api.db.DBApi">api</a>.<a href="#155367" title="(name: String)(block: java.sql.Connection =&gt; A)A">withTransaction</a><span class="delimiter">(</span><span title="java.lang.String(&quot;default&quot;)" class="string">&quot;default&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#156051" title="java.sql.Connection =&gt; A">block</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(default: =&gt; A)A">getOrElse</span><span class="delimiter">(</span><a href="#155824" title="=&gt; Nothing">error</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Generic DBPlugin interface
 */</span>
<span class="keyword">trait</span> <a title="trait DBPlugin extends java.lang.Object with play.api.Plugin" id="12575">DBPlugin</a> <span class="keyword">extends</span> <a href="../Plugins.scala.html#10767" title="play.api.Plugin">Plugin</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="155856">api</a>: <a href="#12569" title="play.api.db.DBApi">DBApi</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * A DBPlugin implementation that provides a DBApi
 *
 * @param app the application that is registering the plugin
 */</span>
<span class="keyword">class</span> <a title="class BoneCPPlugin extends java.lang.Object with play.api.db.DBPlugin with ScalaObject" id="12572">BoneCPPlugin</a><a href="#12572" title="ScalaObject" class="delimiter">(</a><a title="play.api.Application" id="156147">app</a>: <a href="../Application.scala.html#10686" title="play.api.Application">Application</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12575" title="play.api.db.DBPlugin">DBPlugin</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="156106">error</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;db keys are missing from application.conf&quot;)" class="string">&quot;db keys are missing from application.conf&quot;</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.Configuration" id="156108">dbConfig</a> = <a href="#156147" title="play.api.Application">app</a>.<a href="../Application.scala.html#67468" title="=&gt; play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67751" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><span title="java.lang.String(&quot;db&quot;)" class="string">&quot;db&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="../Configuration.scala.html#10960" title="object play.api.Configuration">Configuration</a>.<a href="../Configuration.scala.html#67762" title="=&gt; play.api.Configuration">empty</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(conn: java.sql.Connection)String" id="156109">dbURL</a><span class="delimiter">(</span><a title="java.sql.Connection" id="156155">conn</a>: <span title="java.sql.Connection">Connection</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="156157">u</a> = <a href="#156155" title="java.sql.Connection">conn</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span>.<span title="()java.lang.String">getURL</span>
    <a href="#156155" title="java.sql.Connection">conn</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#156157" title="java.lang.String">u</a>
  <span class="delimiter">}</span>

  <span class="comment">// should be accessed in onStart first</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="play.api.db.DBApi" id="156111">dbApi</a>: <a href="#12569" title="play.api.db.DBApi">DBApi</a> = <span title="play.api.db.BoneCPApi" class="keyword">new</span> <a href="#12665" title="play.api.db.BoneCPApi">BoneCPApi</a><span class="delimiter">(</span><a href="#156107" title="=&gt; play.api.Configuration">dbConfig</a>, <a href="#156147" title="play.api.Application">app</a>.<a href="../Application.scala.html#67449" title="=&gt; java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

  <span class="comment">/**
   * plugin is disabled if either configuration is missing or the plugin is explicitly disabled
   */</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="156113">isDisabled</a> = <span class="delimiter">{</span>
    <a href="#156147" title="play.api.Application">app</a>.<a href="../Application.scala.html#67468" title="play.api.Configuration" id="156125">configuration</a>.<a href="../Configuration.scala.html#77639" title="Option[Set[String]]" id="156127">getString</a><span class="delimiter">(</span><a title="java.lang.String(&quot;dbplugin&quot;)" id="156126" class="string">&quot;dbplugin&quot;</a><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Option[String]">filter</span><span class="delimiter">(</span><a href="#156129" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;disabled&quot;)" class="string">&quot;disabled&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">||</span> <a href="#156107" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#67753" title="=&gt; Set[String]">subKeys</a>.<span title="=&gt; Boolean">isEmpty</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Is this plugin enabled.
   *
   * {{{
   * dbplugin=disabled
   * }}}
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="156114">enabled</a> = <a href="#156112" title="=&gt; Boolean">isDisabled</a> <span title="(x: Boolean)Boolean">==</span> <span title="Boolean(false)" class="keyword">false</span>

  <span class="comment">/**
   * Retrieves the underlying `DBApi` managing the data sources.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.db.DBApi" id="156115">api</a>: <a href="#12569" title="play.api.db.DBApi">DBApi</a> = <a href="#156110" title="=&gt; play.api.db.DBApi">dbApi</a>


  <span class="comment">/**
   * Reads the configuration and connects to every data source.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="156116">onStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Try to connect to each, this should be the first access to dbApi</span>
    <a href="#156110" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#155359" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[List[(javax.sql.DataSource, String)],Unit,Any])Any">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Unit,List[Unit]]" class="delimiter">{</span> <a title="(javax.sql.DataSource, String)" id="156200">ds</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#156200" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#156147" title="play.api.Application">app</a>.<a href="../Application.scala.html#67453" title="=&gt; play.api.Mode.Mode">mode</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../Play.scala.html#10864" title="Unit">Mode</a>.<a href="../Play.scala.html#67655" title="=&gt; play.api.Mode.Value">Test</a> =&gt;
          <span class="keyword">case</span> <a title="Unit" id="156204">mode</a> =&gt; <a href="../Logger.scala.html#81627" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#81617" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;database [&quot;)" class="string">&quot;database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156200" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] connected at &quot;)" class="string">&quot;] connected at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156109" title="(conn: java.sql.Connection)String">dbURL</a><span class="delimiter">(</span><a href="#156200" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; javax.sql.DataSource">_1</span>.<span title="()java.sql.Connection">getConnection</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="156221">e</a> =&gt; <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <a href="#156107" title="=&gt; play.api.Configuration">dbConfig</a>.<a href="../Configuration.scala.html#67754" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#156200" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span>, <span title="java.lang.String(&quot;Cannot connect to database [&quot;)" class="string">&quot;Cannot connect to database [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156200" title="(javax.sql.DataSource, String)">ds</a>.<span title="=&gt; String">_2</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#156221" title="java.lang.Throwable">e</a>.<span title="()java.lang.Throwable">getCause</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Closes all data sources.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="156117">onStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#156110" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#155359" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(f: (javax.sql.DataSource, String) =&gt; Unit)Unit">foreach</span> <a href="#156277" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="javax.sql.DataSource" id="156280">ds</a>, _<span class="delimiter">)</span> =&gt; <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#156110" title="=&gt; play.api.db.DBApi">dbApi</a>.<a href="#155360" title="(ds: javax.sql.DataSource)Unit">shutdownPool</a><span class="delimiter">(</span><a href="#156280" title="javax.sql.DataSource">ds</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.util.Enumeration[java.sql.Driver]" id="156257">drivers</a> = <span title="object java.sql.DriverManager">DriverManager</span>.<span title="()java.util.Enumeration[java.sql.Driver]">getDrivers</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#156257" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()Boolean">hasMoreElements</span><span class="delimiter">)</span> <a href="#156324" title="()Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="java.sql.Driver" id="156325">driver</a> = <a href="#156257" title="java.util.Enumeration[java.sql.Driver]">drivers</a>.<span title="()java.sql.Driver">nextElement</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">deregisterDriver</span><span class="delimiter">(</span><a href="#156325" title="java.sql.Driver">driver</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>db<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class BoneCPApi extends java.lang.Object with play.api.db.DBApi with ScalaObject" id="12665">BoneCPApi</a><a href="#12665" title="ScalaObject" class="delimiter">(</a><a title="play.api.Configuration" id="156172">configuration</a>: <a href="../Configuration.scala.html#10959" title="play.api.Configuration">Configuration</a>, <a title="java.lang.ClassLoader" id="156173">classloader</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12569" title="play.api.db.DBApi">DBApi</a> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(db: String, message: String)Nothing" id="156163">error</a><span class="delimiter">(</span><a title="String" id="156329">db</a>: <span title="String">String</span>, <a title="String" id="156333">message</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span title="Nothing" class="keyword">throw</span> <a href="#156172" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67754" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><a href="#156329" title="String">db</a>, <a href="#156333" title="String">message</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Set[String]" id="156164">dbNames</a> = <a href="#156172" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67753" title="=&gt; Set[String]">subKeys</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(driver: String, c: play.api.Configuration)Unit" id="156166">register</a><span class="delimiter">(</span><a title="String" id="156334">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="156335">c</a>: <a href="../Configuration.scala.html#10959" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#21217" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#156334" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#156173" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="156351">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#156335" title="play.api.Configuration">c</a>.<a href="../Configuration.scala.html#67754" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156334" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#156351" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource" id="156167">createDataSource</a><span class="delimiter">(</span><a title="String" id="156355">dbName</a>: <span title="String">String</span>, <a title="String" id="156356">url</a>: <span title="String">String</span>, <a title="String" id="156357">driver</a>: <span title="String">String</span>, <a title="play.api.Configuration" id="156358">conf</a>: <a href="../Configuration.scala.html#10959" title="play.api.Configuration">Configuration</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>

    <span class="keyword">val</span> <a title="com.jolbox.bonecp.BoneCPDataSource" id="156360">datasource</a> = <span title="com.jolbox.bonecp.BoneCPDataSource" class="keyword">new</span> <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span>

    <span class="comment">// Try to load the driver</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="156865">driver</a> =&gt;
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.sql.Driver)Unit">registerDriver</span><span class="delimiter">(</span><span title="play.utils.ProxyDriver" class="keyword">new</span> play.utils.<a href="../../core/utils/ProxyDriver.scala.html#21217" title="play.utils.ProxyDriver">ProxyDriver</a><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#156865" title="String">driver</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#156173" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="java.sql.Driver" class="delimiter">[</span><span title="java.sql.Driver">Driver</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="Nothing" id="156869">e</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67754" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>, <span title="java.lang.String(&quot;Driver not found: [&quot;)" class="string">&quot;Driver not found: [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156865" title="String">driver</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>, <span title="(x: java.lang.Throwable)Some[java.lang.Throwable]">Some</span><span class="delimiter">(</span><a href="#156869" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Boolean" id="156361">autocommit</a> = <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67748" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;autocommit&quot;)" class="string">&quot;autocommit&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Option[Int]" id="156362">isolation</a> = <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Int)Option[Int]">map</span> <a href="#156882" title="Int" class="delimiter">{</a>
      <span class="keyword">case</span> <span title="Int(0)" class="string">&quot;NONE&quot;</span> =&gt; Connection.<span title="Int(0)">TRANSACTION_NONE</span>
      <span class="keyword">case</span> <span title="Int(2)" class="string">&quot;READ_COMMITTED&quot;</span> =&gt; Connection.<span title="Int(2)">TRANSACTION_READ_COMMITTED</span>
      <span class="keyword">case</span> <span title="Int(1)" class="string">&quot;READ_UNCOMMITTED &quot;</span> =&gt; Connection.<span title="Int(1)">TRANSACTION_READ_UNCOMMITTED</span>
      <span class="keyword">case</span> <span title="Int(4)" class="string">&quot;REPEATABLE_READ &quot;</span> =&gt; Connection.<span title="Int(4)">TRANSACTION_REPEATABLE_READ</span>
      <span class="keyword">case</span> <span title="Int(8)" class="string">&quot;SERIALIZABLE&quot;</span> =&gt; Connection.<span title="Int(8)">TRANSACTION_SERIALIZABLE</span>
      <span class="keyword">case</span> <a title="Nothing" id="156883">unknown</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67754" title="(path: String, message: String, e: Option[Throwable])play.api.PlayException">reportError</a><span class="delimiter">(</span><span title="java.lang.String(&quot;isolation&quot;)" class="string">&quot;isolation&quot;</span>, <span title="java.lang.String(&quot;Unknown isolation level [&quot;)" class="string">&quot;Unknown isolation level [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156883" title="String">unknown</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="Option[String]" id="156363">catalog</a> = <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;defaultCatalog&quot;)" class="string">&quot;defaultCatalog&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Boolean" id="156364">readOnly</a> = <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67748" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;readOnly&quot;)" class="string">&quot;readOnly&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.ClassLoader)Unit">setClassLoader</span><span class="delimiter">(</span><a href="#156173" title="java.lang.ClassLoader">classloader</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="play.api.Logger" id="156365">logger</a> = <a href="../Logger.scala.html#81627" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;com.jolbox.bonecp&quot;)" class="string">&quot;com.jolbox.bonecp&quot;</span><span class="delimiter">)</span>

    <span class="comment">// Re-apply per connection config @ checkout</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: com.jolbox.bonecp.hooks.ConnectionHook)Unit">setConnectionHook</span><span class="delimiter">(</span><a href="#156972" title="com.jolbox.bonecp.hooks.AbstractConnectionHook" class="keyword">new</a> <a title="anonymous class $anon extends com.jolbox.bonecp.hooks.AbstractConnectionHook" id="156972">AbstractConnectionHook</a> <span class="delimiter">{</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="157050">onCheckIn</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="157052">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#156365" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#81603" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#156365" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#81613" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check in connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(connection: com.jolbox.bonecp.ConnectionHandle)Unit" id="157051">onCheckOut</a><span class="delimiter">(</span><a title="com.jolbox.bonecp.ConnectionHandle" id="157248">connection</a>: <span title="com.jolbox.bonecp.ConnectionHandle">ConnectionHandle</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#157248" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#156361" title="Boolean">autocommit</a><span class="delimiter">)</span>
        <a href="#156362" title="Option[Int]">isolation</a>.<span title="(f: Int =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#157248" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#157260" title="Int">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#157248" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#156364" title="Boolean">readOnly</a><span class="delimiter">)</span>
        <a href="#156363" title="Option[String]">catalog</a>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#157248" title="com.jolbox.bonecp.ConnectionHandle">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#157266" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#156365" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#81603" title="=&gt; Boolean">isTraceEnabled</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#156365" title="play.api.Logger">logger</a>.<a href="../Logger.scala.html#81613" title="(message: =&gt; String)Unit">trace</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Check out connection [%s leased]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="()Int">getTotalLeased</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="156366">PostgresFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^postgres://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
    <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="156367">MysqlFullUrl</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;^mysql://([a-zA-Z0-9_]+):([^@]+)@([^/]+)/([^\\s]+)$&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#156366" title="(target: Any)Option[List[String]]">PostgresFullUrl</a><span class="delimiter">(</span><a title="String" id="157281">username</a>, <a title="String" id="157282">password</a>, <a title="String" id="157283">host</a>, <a title="String" id="157284">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:postgresql://%s/%s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#157283" title="String">host</a>, <a href="#157284" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#157281" title="String">username</a><span class="delimiter">)</span>
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#157282" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a href="#156367" title="(target: Any)Option[List[String]]">MysqlFullUrl</a><span class="delimiter">(</span><a title="String" id="157290">username</a>, <a title="String" id="157291">password</a>, <a title="String" id="157292">host</a>, <a title="String" id="157293">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;jdbc:mysql://%s/%s?useUnicode=yes&amp;characterEncoding=UTF-8&amp;connectionCollation=utf8_general_ci&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#157292" title="String">host</a>, <a href="#157293" title="String">dbname</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#157290" title="String">username</a><span class="delimiter">)</span>
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#157291" title="String">password</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="java.lang.String" id="157298">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt;
        <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setJdbcUrl</span><span class="delimiter">(</span><a href="#157298" title="java.lang.String">s</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67755" title="(message: String, e: Option[Throwable])play.api.PlayException">globalError</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Missing url configuration for database [%s]&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;user&quot;)" class="string">&quot;user&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setUsername</span><span class="delimiter">(</span><a href="#157306" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;pass&quot;)" class="string">&quot;pass&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#157311" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setPassword</span><span class="delimiter">(</span><a href="#157316" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Pool configuration</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setPartitionCount</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67747" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;partitionCount&quot;)" class="string">&quot;partitionCount&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMaxConnectionsPerPartition</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67747" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionsPerPartition&quot;)" class="string">&quot;maxConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(30)" class="int">30</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setMinConnectionsPerPartition</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67747" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;minConnectionsPerPartition&quot;)" class="string">&quot;minConnectionsPerPartition&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(5)" class="int">5</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireIncrement</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67747" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireIncrement&quot;)" class="string">&quot;acquireIncrement&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Int)Unit">setAcquireRetryAttempts</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67747" title="(path: String)Option[Int]">getInt</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryAttempts&quot;)" class="string">&quot;acquireRetryAttempts&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Int)Int">getOrElse</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setAcquireRetryDelayInMs</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67749" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;acquireRetryDelay&quot;)" class="string">&quot;acquireRetryDelay&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long)Unit">setConnectionTimeoutInMs</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67749" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTimeout&quot;)" class="string">&quot;connectionTimeout&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span title="Long(1000L)" class="int">1000</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleMaxAge</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67749" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleMaxAge&quot;)" class="string">&quot;idleMaxAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(600000L)">*</span> <span class="int">10</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setMaxConnectionAge</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67749" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;maxConnectionAge&quot;)" class="string">&quot;maxConnectionAge&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> * <span class="int">60</span> <span title="Long(3600000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setDisableJMX</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67748" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;disableJMX&quot;)" class="string">&quot;disableJMX&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Long, x$2: java.util.concurrent.TimeUnit)Unit">setIdleConnectionTestPeriod</span><span class="delimiter">(</span><a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67749" title="(path: String)Option[Long]">getMilliseconds</a><span class="delimiter">(</span><span title="java.lang.String(&quot;idleConnectionTestPeriod&quot;)" class="string">&quot;idleConnectionTestPeriod&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; Long)Long">getOrElse</span><span class="delimiter">(</span><span class="int">1000</span> <span title="Long(60000L)">*</span> <span class="int">60</span><span class="delimiter">)</span>, java.util.concurrent.TimeUnit.<span title="java.util.concurrent.TimeUnit(value MILLISECONDS)">MILLISECONDS</span><span class="delimiter">)</span>

    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;initSQL&quot;)" class="string">&quot;initSQL&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setInitSQL</span><span class="delimiter">(</span><a href="#157388" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67748" title="(path: String)Option[Boolean]">getBoolean</a><span class="delimiter">(</span><span title="java.lang.String(&quot;logStatements&quot;)" class="string">&quot;logStatements&quot;</span><span class="delimiter">)</span>.<span title="(f: Boolean =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: Boolean)Unit">setLogStatementsEnabled</span><span class="delimiter">(</span><a href="#157394" title="Boolean">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;connectionTestStatement&quot;)" class="string">&quot;connectionTestStatement&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span><span class="delimiter">(</span><a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>.<span title="(x$1: java.lang.String)Unit">setConnectionTestStatement</span><span class="delimiter">(</span><a href="#157400" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">// Bind in JNDI</span>
    <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;jndiName&quot;)" class="string">&quot;jndiName&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Unit)Option[Unit]">map</span> <span class="delimiter">{</span> <a title="String" id="157405">name</a> =&gt;
      <a href="../libs/JNDI.scala.html#13338" title="object play.api.libs.JNDI">JNDI</a>.<a href="../libs/JNDI.scala.html#157411" title="=&gt; javax.naming.InitialContext">initialContext</a>.<span title="(x$1: java.lang.String, x$2: Any)Unit">rebind</span><span class="delimiter">(</span><a href="#157405" title="String">name</a>, <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a><span class="delimiter">)</span>
      <a href="../Logger.scala.html#81627" title="(name: String)play.api.Logger">Logger</a><span class="delimiter">(</span><span title="java.lang.String(&quot;play&quot;)" class="string">&quot;play&quot;</span><span class="delimiter">)</span>.<a href="../Logger.scala.html#81617" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="java.lang.String(&quot;datasource [&quot;)" class="string">&quot;datasource [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156358" title="play.api.Configuration">conf</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">get</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] bound to JNDI as &quot;)" class="string">&quot;] bound to JNDI as &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157405" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#156360" title="com.jolbox.bonecp.BoneCPDataSource">datasource</a>

  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="List[(javax.sql.DataSource, String)]" id="156168">datasources</a>: <span title="List[(javax.sql.DataSource, String)]">List</span><span class="delimiter">[</span>Tuple2<span class="delimiter">[</span>DataSource, String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#156164" title="=&gt; Set[String]">dbNames</a>.<span title="(f: String =&gt; (javax.sql.DataSource, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]])scala.collection.immutable.Set[(javax.sql.DataSource, String)]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,(javax.sql.DataSource, String),scala.collection.immutable.Set[(javax.sql.DataSource, String)]]" class="delimiter">{</span> <a title="String" id="157820">dbName</a> =&gt;
    <span class="keyword">val</span> <a title="String" id="157821">url</a> = <a href="#156172" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url&quot;)" class="string">&quot;.url&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#156163" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157820" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.url]&quot;)" class="string">&quot;.url]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="157822">driver</a> = <a href="#156172" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67746" title="(path: String, validValues: Option[Set[String]])Option[String]">getString</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver&quot;)" class="string">&quot;.driver&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#156163" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157820" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.driver]&quot;)" class="string">&quot;.driver]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="play.api.Configuration" id="157823">extraConfig</a> = <a href="#156172" title="play.api.Configuration">configuration</a>.<a href="../Configuration.scala.html#67751" title="(path: String)Option[play.api.Configuration]">getConfig</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a><span class="delimiter">)</span>.<span title="(default: =&gt; play.api.Configuration)play.api.Configuration">getOrElse</span><span class="delimiter">(</span><a href="#156163" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><a href="#157820" title="String">dbName</a>, <span title="java.lang.String(&quot;Missing configuration [db.&quot;)" class="string">&quot;Missing configuration [db.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157820" title="String">dbName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#156166" title="(driver: String, c: play.api.Configuration)Unit">register</a><span class="delimiter">(</span><a href="#157822" title="String">driver</a>, <a href="#157823" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span>
    <a href="#156167" title="(dbName: String, url: String, driver: String, conf: play.api.Configuration)javax.sql.DataSource">createDataSource</a><span title="(x: javax.sql.DataSource)ArrowAssoc[javax.sql.DataSource]" class="delimiter">(</span><a href="#157820" title="String">dbName</a>, <a href="#157821" title="String">url</a>, <a href="#157822" title="String">driver</a>, <a href="#157823" title="play.api.Configuration">extraConfig</a><span class="delimiter">)</span> <span title="(y: String)(javax.sql.DataSource, String)">-&gt;</span> <a href="#157820" title="String">dbName</a>
  <span class="delimiter">}</span>.<span title="=&gt; List[(javax.sql.DataSource, String)]">toList</span>

  <span class="keyword">def</span> <a title="(ds: javax.sql.DataSource)Unit" id="156170">shutdownPool</a><span class="delimiter">(</span><a title="javax.sql.DataSource" id="157884">ds</a>: <span title="javax.sql.DataSource">DataSource</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#157884" title="javax.sql.DataSource">ds</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="157887">ds</a>: <span title="com.jolbox.bonecp.BoneCPDataSource">BoneCPDataSource</span> =&gt; <a href="#157887" title="com.jolbox.bonecp.BoneCPDataSource">ds</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <a href="#156163" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;)" class="string">&quot; - could not recognize DataSource, therefore unable to shutdown this pool&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Retrieves a JDBC connection, with auto-commit set to `true`.
   *
   * Don’t forget to release the connection at some point by calling close().
   *
   * @param name the data source name
   * @return a JDBC connection
   * @throws an error if the required data source is not registered
   */</span>
  <span class="keyword">def</span> <a title="(name: String)javax.sql.DataSource" id="156171">getDataSource</a><span class="delimiter">(</span><a title="String" id="157890">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>
    <a href="#156168" title="=&gt; List[(javax.sql.DataSource, String)]">datasources</a>.<span title="(p: (javax.sql.DataSource, String) =&gt; Boolean)List[(javax.sql.DataSource, String)]">filter</span><span class="delimiter">(</span><a href="#157895" title="(javax.sql.DataSource, String)">_</a>.<span title="=&gt; String">_2</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#157890" title="String">name</a><span class="delimiter">)</span>.<span title="=&gt; Option[(javax.sql.DataSource, String)]">headOption</span>.<span title="(f: (javax.sql.DataSource, String) =&gt; javax.sql.DataSource)Option[javax.sql.DataSource]">map</span><span class="delimiter">(</span><a title="(javax.sql.DataSource, String)" id="157904">e</a> =&gt; <a href="#157904" title="(javax.sql.DataSource, String)">e</a>.<span title="=&gt; javax.sql.DataSource">_1</span><span class="delimiter">)</span>.<span title="(default: =&gt; javax.sql.DataSource)javax.sql.DataSource">getOrElse</span><span class="delimiter">(</span><a href="#156163" title="(db: String, message: String)Nothing">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot; - could not find datasource for &quot;)" class="string">&quot; - could not find datasource for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#157890" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * A connection releasing automatically statements on close
 */</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class AutoCleanConnection extends java.lang.Object with java.sql.Connection with ScalaObject" id="12596">AutoCleanConnection</a><a href="#12596" title="ScalaObject" class="delimiter">(</a><a title="java.sql.Connection" id="155798">connection</a>: <span title="java.sql.Connection">Connection</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.sql.Connection">Connection</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[java.sql.Statement]" id="155736">statements</a> = scala.collection.mutable.<span title="object scala.collection.mutable.ListBuffer">ListBuffer</span>.<span title="[A]=&gt; scala.collection.mutable.ListBuffer[A]">empty</span><span title="scala.collection.mutable.ListBuffer[java.sql.Statement]" class="delimiter">[</span><span title="java.sql.Statement">Statement</span><span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: java.sql.Statement](b: =&gt; T)T" id="155738">registering</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: java.sql.Statement" id="155740">T</a> &lt;: Statement<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="157981">b</a>: =&gt; T<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="157984">statement</a> = <a href="#157981" title="=&gt; T">b</a>
    <a href="#155736" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a> <span title="(x: java.sql.Statement)AutoCleanConnection.this.statements.type">+=</span> <a href="#157984" title="T">statement</a>
    <a href="#157984" title="T">statement</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="155741">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155736" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="(f: java.sql.Statement =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="java.sql.Statement" id="159237">statement</a> =&gt;
      <a href="#159237" title="java.sql.Statement">statement</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#155736" title="=&gt; scala.collection.mutable.ListBuffer[java.sql.Statement]">statements</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()java.sql.Statement" id="155742">createStatement</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.Statement">createStatement</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement" id="155743">createStatement</a><span class="delimiter">(</span><a title="Int" id="158267">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158268">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155743" title="(resultSetType: Int, resultSetConcurrency: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#158267" title="Int">resultSetType</a>, <a href="#158268" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement" id="155744">createStatement</a><span class="delimiter">(</span><a title="Int" id="158275">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158276">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="158277">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.Statement)java.sql.Statement">registering</a><span class="delimiter">(</span><a href="#155744" title="(resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.Statement">createStatement</a><span class="delimiter">(</span><a href="#158275" title="Int">resultSetType</a>, <a href="#158276" title="Int">resultSetConcurrency</a>, <a href="#158277" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.PreparedStatement" id="155745">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158301">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158301" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, autoGeneratedKeys: Int)java.sql.PreparedStatement" id="155746">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158313">sql</a>: <span title="String">String</span>, <a title="Int" id="158314">autoGeneratedKeys</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158313" title="String">sql</a>, <a href="#158314" title="Int">autoGeneratedKeys</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnIndexes: Array[Int])java.sql.PreparedStatement" id="155747">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158330">sql</a>: <span title="String">String</span>, <a title="Array[Int]" id="158331">columnIndexes</a>: scala.<span title="Array[Int]">Array</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[Int])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158330" title="String">sql</a>, <a href="#158331" title="Array[Int]">columnIndexes</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.PreparedStatement" id="155748">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158346">sql</a>: <span title="String">String</span>, <a title="Int" id="158347">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158348">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158346" title="String">sql</a>, <a href="#158347" title="Int">resultSetType</a>, <a href="#158348" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.PreparedStatement" id="155749">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158362">sql</a>: <span title="String">String</span>, <a title="Int" id="158363">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158364">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="158365">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158362" title="String">sql</a>, <a href="#158363" title="Int">resultSetType</a>, <a href="#158364" title="Int">resultSetConcurrency</a>, <a href="#158365" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, columnNames: Array[String])java.sql.PreparedStatement" id="155750">prepareStatement</a><span class="delimiter">(</span><a title="String" id="158380">sql</a>: <span title="String">String</span>, <a title="Array[String]" id="158381">columnNames</a>: scala.<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.PreparedStatement)java.sql.PreparedStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.String])java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#158380" title="String">sql</a>, <a href="#158381" title="Array[String]">columnNames</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.sql.CallableStatement" id="155751">prepareCall</a><span class="delimiter">(</span><a title="String" id="158396">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158396" title="String">sql</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int)java.sql.CallableStatement" id="155752">prepareCall</a><span class="delimiter">(</span><a title="String" id="158734">sql</a>: <span title="String">String</span>, <a title="Int" id="158735">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158736">resultSetConcurrency</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158734" title="String">sql</a>, <a href="#158735" title="Int">resultSetType</a>, <a href="#158736" title="Int">resultSetConcurrency</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String, resultSetType: Int, resultSetConcurrency: Int, resultSetHoldability: Int)java.sql.CallableStatement" id="155753">prepareCall</a><span class="delimiter">(</span><a title="String" id="158750">sql</a>: <span title="String">String</span>, <a title="Int" id="158751">resultSetType</a>: <span title="Int">Int</span>, <a title="Int" id="158752">resultSetConcurrency</a>: <span title="Int">Int</span>, <a title="Int" id="158753">resultSetHoldability</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155738" title="(b: =&gt; java.sql.CallableStatement)java.sql.CallableStatement">registering</a><span class="delimiter">(</span><a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Int, x$3: Int, x$4: Int)java.sql.CallableStatement">prepareCall</span><span class="delimiter">(</span><a href="#158750" title="String">sql</a>, <a href="#158751" title="Int">resultSetType</a>, <a href="#158752" title="Int">resultSetConcurrency</a>, <a href="#158753" title="Int">resultSetHoldability</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="155754">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155741" title="()Unit">releaseStatements</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="155755">clearWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Unit">clearWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="155756">commit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Unit">commit</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(typeName: String, elements: Array[AnyRef])java.sql.Array" id="155757">createArrayOf</a><span class="delimiter">(</span><a title="String" id="158773">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="158774">elements</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Array">createArrayOf</span><span class="delimiter">(</span><a href="#158773" title="String">typeName</a>, <a href="#158774" title="Array[AnyRef]">elements</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Blob" id="155758">createBlob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.Blob">createBlob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.Clob" id="155759">createClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.Clob">createClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.NClob" id="155760">createNClob</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.NClob">createNClob</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLXML" id="155761">createSQLXML</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLXML">createSQLXML</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(typeName: String, attributes: Array[AnyRef])java.sql.Struct" id="155762">createStruct</a><span class="delimiter">(</span><a title="String" id="158973">typeName</a>: <span title="String">String</span>, <a title="Array[AnyRef]" id="158974">attributes</a>: scala.<span title="Array[AnyRef]">Array</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: Array[java.lang.Object])java.sql.Struct">createStruct</span><span class="delimiter">(</span><a href="#158973" title="String">typeName</a>, <a href="#158974" title="Array[AnyRef]">attributes</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155763">getAutoCommit</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Boolean">getAutoCommit</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.lang.String" id="155764">getCatalog</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.lang.String">getCatalog</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Properties" id="155765">getClientInfo</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.util.Properties">getClientInfo</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.lang.String" id="155766">getClientInfo</a><span class="delimiter">(</span><a title="String" id="159001">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">getClientInfo</span><span class="delimiter">(</span><a href="#159001" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="155767">getHoldability</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Int">getHoldability</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.DatabaseMetaData" id="155768">getMetaData</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.DatabaseMetaData">getMetaData</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="155769">getTransactionIsolation</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Int">getTransactionIsolation</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.util.Map[java.lang.String,java.lang.Class[_]]" id="155770">getTypeMap</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.util.Map[java.lang.String,java.lang.Class[_]]">getTypeMap</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()java.sql.SQLWarning" id="155771">getWarnings</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.SQLWarning">getWarnings</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155772">isClosed</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Boolean">isClosed</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Boolean" id="155773">isReadOnly</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Boolean">isReadOnly</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(timeout: Int)Boolean" id="155774">isValid</a><span class="delimiter">(</span><a title="Int" id="159058">timeout</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Boolean">isValid</span><span class="delimiter">(</span><a href="#159058" title="Int">timeout</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(sql: String)java.lang.String" id="155775">nativeSQL</a><span class="delimiter">(</span><a title="String" id="159063">sql</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.lang.String">nativeSQL</span><span class="delimiter">(</span><a href="#159063" title="String">sql</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="155776">releaseSavepoint</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="159068">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">releaseSavepoint</span><span class="delimiter">(</span><a href="#159068" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="155777">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()Unit">rollback</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(savepoint: java.sql.Savepoint)Unit" id="155778">rollback</a><span class="delimiter">(</span><a title="java.sql.Savepoint" id="159075">savepoint</a>: <span title="java.sql.Savepoint">Savepoint</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.sql.Savepoint)Unit">rollback</span><span class="delimiter">(</span><a href="#159075" title="java.sql.Savepoint">savepoint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(autoCommit: Boolean)Unit" id="155779">setAutoCommit</a><span class="delimiter">(</span><a title="Boolean" id="159080">autoCommit</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><span class="delimiter">(</span><a href="#159080" title="Boolean">autoCommit</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(catalog: String)Unit" id="155780">setCatalog</a><span class="delimiter">(</span><a title="String" id="159084">catalog</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)Unit">setCatalog</span><span class="delimiter">(</span><a href="#159084" title="String">catalog</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(properties: java.util.Properties)Unit" id="155781">setClientInfo</a><span class="delimiter">(</span><a title="java.util.Properties" id="159088">properties</a>: java.util.<span title="java.util.Properties">Properties</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Properties)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#159088" title="java.util.Properties">properties</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String, value: String)Unit" id="155782">setClientInfo</a><span class="delimiter">(</span><a title="String" id="159093">name</a>: <span title="String">String</span>, <a title="String" id="159094">value</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)Unit">setClientInfo</span><span class="delimiter">(</span><a href="#159093" title="String">name</a>, <a href="#159094" title="String">value</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(holdability: Int)Unit" id="155783">setHoldability</a><span class="delimiter">(</span><a title="Int" id="159100">holdability</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setHoldability</span><span class="delimiter">(</span><a href="#159100" title="Int">holdability</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(readOnly: Boolean)Unit" id="155784">setReadOnly</a><span class="delimiter">(</span><a title="Boolean" id="159104">readOnly</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: Boolean)Unit">setReadOnly</span><span class="delimiter">(</span><a href="#159104" title="Boolean">readOnly</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()java.sql.Savepoint" id="155785">setSavepoint</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="()java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(name: String)java.sql.Savepoint" id="155786">setSavepoint</a><span class="delimiter">(</span><a title="String" id="159115">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.String)java.sql.Savepoint">setSavepoint</span><span class="delimiter">(</span><a href="#159115" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(level: Int)Unit" id="155787">setTransactionIsolation</a><span class="delimiter">(</span><a title="Int" id="159124">level</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: Int)Unit">setTransactionIsolation</span><span class="delimiter">(</span><a href="#159124" title="Int">level</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(map: java.util.Map[String,Class[_]])Unit" id="155788">setTypeMap</a><span class="delimiter">(</span><a title="java.util.Map[String,Class[_]]" id="159128">map</a>: java.util.<span title="java.util.Map[String,Class[_]]">Map</span><span class="delimiter">[</span>String, Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.util.Map[java.lang.String,java.lang.Class[_]])Unit">setTypeMap</span><span class="delimiter">(</span><a href="#159128" title="java.util.Map[String,Class[_]]">map</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(iface: Class[_])Boolean" id="155789">isWrapperFor</a><span class="delimiter">(</span><a title="Class[_]" id="159134">iface</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[_])Boolean">isWrapperFor</span><span class="delimiter">(</span><a href="#159134" title="Class[_]">iface</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](iface: Class[T])T" id="155790">unwrap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="155792">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="159144">iface</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#155798" title="java.sql.Connection">connection</a>.<span title="(x$1: java.lang.Class[T])T">unwrap</span><span class="delimiter">(</span><a href="#159144" title="Class[T]">iface</a><span class="delimiter">)</span>

  <span class="comment">// JDBC 4.1</span>
  <span class="keyword">def</span> <a title="()String" id="155793">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#159162" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getSchema<span class="delimiter">(</span><span class="delimiter">)</span>: String <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#159163" title="()String">getSchema</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(schema: String)Unit" id="155794">setSchema</a><span class="delimiter">(</span><a title="String" id="159165">schema</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#159253" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setSchema<span class="delimiter">(</span>schema: String<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#159254" title="(schema: String)Unit">setSchema</a><span class="delimiter">(</span><a href="#159165" title="String">schema</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Int" id="155795">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#159171" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> getNetworkTimeout<span class="delimiter">(</span><span class="delimiter">)</span>: Int <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#159172" title="()Int">getNetworkTimeout</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit" id="155796">setNetworkTimeout</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="159174">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span>, <a title="Int" id="159175">milliseconds</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#159256" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> setNetworkTimeout<span class="delimiter">(</span>executor: java.util.concurrent.Executor, milliseconds: Int<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#159257" title="(executor: java.util.concurrent.Executor, milliseconds: Int)Unit">setNetworkTimeout</a><span class="delimiter">(</span><a href="#159174" title="java.util.concurrent.Executor">executor</a>, <a href="#159175" title="Int">milliseconds</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(executor: java.util.concurrent.Executor)Unit" id="155797">abort</a><span class="delimiter">(</span><a title="java.util.concurrent.Executor" id="159182">executor</a>: java.util.concurrent.<span title="java.util.concurrent.Executor">Executor</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#155798" title="java.sql.Connection">connection</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AutoCleanConnection extends AnyRef" class="delimiter">[</span><a href="#159260" title="AutoCleanConnection extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> abort<span class="delimiter">(</span>executor: java.util.concurrent.Executor<span class="delimiter">)</span>: Unit <span class="delimiter">}</span><span class="delimiter">]</span>.<a href="#159261" title="(executor: java.util.concurrent.Executor)Unit">abort</a><span class="delimiter">(</span><a href="#159182" title="java.util.concurrent.Executor">executor</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>