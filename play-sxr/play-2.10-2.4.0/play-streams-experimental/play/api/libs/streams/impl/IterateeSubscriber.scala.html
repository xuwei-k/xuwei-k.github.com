<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>play-streams-experimental/play/api/libs/streams/impl/IterateeSubscriber.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> play.api.libs.streams.impl

<span class="keyword">import</span> org.reactivestreams._
<span class="keyword">import</span> play.api.libs.concurrent.StateMachine
<span class="keyword">import</span> play.api.libs.iteratee._
<span class="keyword">import</span> scala.concurrent.<span class="delimiter">{</span> ExecutionContext, Future, Promise <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.<span class="delimiter">{</span> Failure, Success, Try <span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>streams<span class="delimiter">]</span> <span class="keyword">object</span> <a title="play.api.libs.streams.impl.IterateeSubscriber.type" id="play.api.libs.streams.impl.IterateeSubscriber">IterateeSubscriber</a> <a href="#play.api.libs.streams.impl.IterateeSubscriber" title="play.api.libs.streams.impl.IterateeSubscriber.type" class="delimiter">{</a>
  <span class="comment">/**
   * Internal state of the Subscriber.
   *
   * @tparam The type of elements.
   * @tparam The result type of the Iteratee.
   */</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait State[T, R] extends AnyRef" id="play.api.libs.streams.impl.IterateeSubscriber;State">State</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;State;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;State;R">R</a><span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that hasn't had onSubscribe called on it yet, and whose
   * Iteratee hasn't resolved to a Step yet. This is the initial state of the
   * Subscriber.
   *
   * @param result A Promise of the eventual result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedNoStep.productElement.x$1" title="class NotSubscribedNoStep[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedNoStep.readResolve">NotSubscribedNoStep</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedNoStep;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedNoStep;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedNoStep.readResolve" title="Product" class="delimiter">(</a><a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedNoStep.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that has had onSubscribe called on it but
   * doesn't yet know the current Step of its Iteratee.
   *
   * @param subs The Subscription the Subscriber is subscribed to.
   * @param result A Promise of the eventual result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;SubscribedNoStep.productElement.x$1" title="class SubscribedNoStep[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep.readResolve">SubscribedNoStep</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedNoStep;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedNoStep;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep.readResolve" title="Product" class="delimiter">(</a><a title="org.reactivestreams.Subscription" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedNoStep.subs">subs</a>: <span title="org.reactivestreams.Subscription">Subscription</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedNoStep.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that hasn't had onSubscribe called on it yet, but whose
   * Iteratee is known to have a Step of Cont.
   *
   * @param cont The current Step of the Iteratee.
   * @param result A Promise of the eventual result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedWithCont.productElement.x$1" title="class NotSubscribedWithCont[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedWithCont.readResolve">NotSubscribedWithCont</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedWithCont;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedWithCont;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedWithCont.readResolve" title="Product" class="delimiter">(</a><a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedWithCont.cont">cont</a>: Step.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont" title="play.api.libs.iteratee.Step.Cont[T,R]">Cont</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl.IterateeSubscriber;NotSubscribedWithCont.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that has had onSubscribe called, has a current Iteratee with
   * a Step of Cont and is currently waiting for an element that it has
   * requested from the Subscription.
   *
   * @param subs The Subscription the Subscriber is subscribed to.
   * @param cont The current Step of the Iteratee.
   * @param result A Promise of the eventual result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont.productElement.x$1" title="class SubscribedWithCont[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont.readResolve">SubscribedWithCont</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont.readResolve" title="Product" class="delimiter">(</a><a title="org.reactivestreams.Subscription" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont.subs">subs</a>: <span title="org.reactivestreams.Subscription">Subscription</span>, <a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont.cont">cont</a>: Step.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont" title="play.api.libs.iteratee.Step.Cont[T,R]">Cont</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl.IterateeSubscriber;SubscribedWithCont.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that has been completed with onComplete but whose Iteratee
   * hasn't resolved ot a Step yet. If the Iteratee resolves to Cont then it
   * Input.EOF will be fed to it.
   *
   * @param result A Promise of the eventual result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;CompletedNoStep.productElement.x$1" title="class CompletedNoStep[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep.readResolve">CompletedNoStep</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;CompletedNoStep;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;CompletedNoStep;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep.readResolve" title="Product" class="delimiter">(</a><a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl.IterateeSubscriber;CompletedNoStep.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
  <span class="comment">/**
   * A Subscriber that is finished. We don't track the precise reason for
   * being finished.
   *
   * @param result The result of this Subscriber.
   */</span>
  <span class="keyword">case class</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;Finished.productElement.x$1" title="class Finished[T, R] extends AnyRef with play.api.libs.streams.impl.IterateeSubscriber.State[T,R] with Product with Serializable" id="play.api.libs.streams.impl.IterateeSubscriber.Finished.readResolve">Finished</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl.IterateeSubscriber;Finished;T">T</a>, <a title="" id="play.api.libs.streams.impl.IterateeSubscriber;Finished;R">R</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl.IterateeSubscriber.Finished.readResolve" title="Product" class="delimiter">(</a><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl.IterateeSubscriber;Finished.resultIteratee">resultIteratee</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee" title="play.api.libs.iteratee.Iteratee[T,R]">Iteratee</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber;State" title="play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">State</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">import</span> <a href="#play.api.libs.streams.impl.IterateeSubscriber" title="play.api.libs.streams.impl.IterateeSubscriber.type">IterateeSubscriber</a>._

<span class="keyword">private</span><span class="delimiter">[</span>streams<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class IterateeSubscriber[T, R, S] extends play.api.libs.concurrent.StateMachine[play.api.libs.streams.impl.IterateeSubscriber.State[T,R]] with org.reactivestreams.Subscriber[T]" id="play.api.libs.streams.impl;IterateeSubscriber">IterateeSubscriber</a><span class="delimiter">[</span><a title="" id="play.api.libs.streams.impl;IterateeSubscriber;T">T</a>, <a title="" id="play.api.libs.streams.impl;IterateeSubscriber;R">R</a>, <a title="" id="play.api.libs.streams.impl;IterateeSubscriber;S">S</a><span class="delimiter">]</span><a href="#play.api.libs.streams.impl;IterateeSubscriber" title="play.api.libs.streams.impl.IterateeSubscriber[T,R,S]" class="delimiter">(</a><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.iter0">iter0</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee" title="play.api.libs.iteratee.Iteratee[T,R]">Iteratee</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine" title="play.api.libs.concurrent.StateMachine[play.api.libs.streams.impl.IterateeSubscriber.State[T,R]]">StateMachine</a><span class="delimiter">[</span>State<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span>initialState = <a href="#play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedNoStep.readResolve" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedNoStep[T,R]">NotSubscribedNoStep</a><span class="delimiter">(</span><span title="[T]()scala.concurrent.Promise[T]">Promise</span><span title="()scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" class="delimiter">[</span><a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee" title="play.api.libs.iteratee.Iteratee[T,R]">Iteratee</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">with</span> <span title="org.reactivestreams.Subscriber[T]">Subscriber</span><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>

  <span class="comment">// We immediately fold on the iteratee</span>
  <a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee" title="(iter: play.api.libs.iteratee.Iteratee[T,R])Unit">getNextStepFromIteratee</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.iter0" title="play.api.libs.iteratee.Iteratee[T,R]">iter0</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The final result of this Iteratee, either a Done or Error Iteratee,
   * or the last Iteratee when the Subscription is completed.
   */</span>
  <span class="keyword">def</span> <a title="=&gt; play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.result">result</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee" title="play.api.libs.iteratee.Iteratee[T,R]">Iteratee</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state" title="=&gt; play.api.libs.streams.impl.IterateeSubscriber.State[T,R]">state</a> <span title="play.api.libs.iteratee.Iteratee[T,R]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.result.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.result.resultIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">resultIteratee</a>
  <span class="delimiter">}</span>

  <span class="comment">// Streams methods</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(subs: org.reactivestreams.Subscription)Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onSubscribe">onSubscribe</a><span class="delimiter">(</span><a title="org.reactivestreams.Subscription" id="play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.subs">subs</a>: <span title="org.reactivestreams.Subscription">Subscription</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep.readResolve" title="(subs: org.reactivestreams.Subscription, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep[T,R]">SubscribedNoStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.subs" title="org.reactivestreams.Subscription">subs</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t subscribe twice&quot;)" class="string">&quot;Can't subscribe twice&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.subs" title="org.reactivestreams.Subscription">subs</a>.<span title="(x$1: Long)Unit">request</span><span class="delimiter">(</span><span title="Long(1L)" class="int">1</span><span class="delimiter">)</span>
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont.readResolve" title="(subs: org.reactivestreams.Subscription, cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont[T,R]">SubscribedWithCont</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.subs" title="org.reactivestreams.Subscription">subs</a>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t subscribe twice&quot;)" class="string">&quot;Can't subscribe twice&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t subscribe once completed&quot;)" class="string">&quot;Can't subscribe once completed&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.onSubscribe.subs" title="org.reactivestreams.Subscription">subs</a>.<span title="()Unit">cancel</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onComplete">onComplete</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onComplete.$anonfun.x0$2" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep.readResolve" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep[T,R]">CompletedNoStep</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep.readResolve" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.CompletedNoStep[T,R]">CompletedNoStep</a><span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont" title="(cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithCompletedCont</a><span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont" title="(cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithCompletedCont</a><span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t complete twice&quot;)" class="string">&quot;Can't complete twice&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onComplete.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(cause: Throwable)Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onError">onError</a><span class="delimiter">(</span><a title="Throwable" id="play.api.libs.streams.impl;IterateeSubscriber.onError.cause">cause</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onError.$anonfun.x0$3" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError" title="(cause: Throwable, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithError</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onError.cause" title="Throwable">cause</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError" title="(cause: Throwable, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithError</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onError.cause" title="Throwable">cause</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError" title="(cause: Throwable, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithError</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onError.cause" title="Throwable">cause</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError" title="(cause: Throwable, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithError</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onError.cause" title="Throwable">cause</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t receive error once completed&quot;)" class="string">&quot;Can't receive error once completed&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onError.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(element: T)Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onNext">onNext</a><span class="delimiter">(</span><a title="T" id="play.api.libs.streams.impl;IterateeSubscriber.onNext.element">element</a>: <a href="#play.api.libs.streams.impl;IterateeSubscriber;T" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onNext.$anonfun.x0$4" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Got next element before subscribed&quot;)" class="string">&quot;Got next element before subscribed&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Got next element before requested&quot;)" class="string">&quot;Got next element before requested&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Got next element before subscribed&quot;)" class="string">&quot;Got next element before subscribed&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext" title="(subs: org.reactivestreams.Subscription, cont: play.api.libs.iteratee.Step.Cont[T,R], element: T, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">continueWithNext</a><span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <a href="#play.api.libs.streams.impl;IterateeSubscriber.onNext.element" title="T">element</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t receive error once completed&quot;)" class="string">&quot;Can't receive error once completed&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onNext.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(subs: org.reactivestreams.Subscription, cont: play.api.libs.iteratee.Step.Cont[T,R], element: T, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext">continueWithNext</a><span class="delimiter">(</span><a title="org.reactivestreams.Subscription" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.subs">subs</a>: <span title="org.reactivestreams.Subscription">Subscription</span>, <a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.cont">cont</a>: Step.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont" title="play.api.libs.iteratee.Step.Cont[T,R]">Cont</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>, <a title="T" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.element">element</a>: <a href="#play.api.libs.streams.impl;IterateeSubscriber;T" title="T">T</a>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.nextIteratee">nextIteratee</a> = <a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.cont" title="play.api.libs.iteratee.Step.Cont[T,R]">cont</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont.k" title="(v1: play.api.libs.iteratee.Input[T])play.api.libs.iteratee.Iteratee[T,R]">k</a><span class="delimiter">(</span><a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Input" title="play.api.libs.iteratee.Input.type">Input</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Input;El" title="(e: T)play.api.libs.iteratee.Input.El[T]">El</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.element" title="T">element</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee" title="(iter: play.api.libs.iteratee.Iteratee[T,R])Unit">getNextStepFromIteratee</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.nextIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">nextIteratee</a><span class="delimiter">)</span>
    <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep.readResolve" title="(subs: org.reactivestreams.Subscription, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.SubscribedNoStep[T,R]">SubscribedNoStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.subs" title="org.reactivestreams.Subscription">subs</a>, <a href="#play.api.libs.streams.impl;IterateeSubscriber.continueWithNext.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Called when the iteratee folds to a Cont step. We may want to feed
   * an Input to the Iteratee.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cont: play.api.libs.iteratee.Step.Cont[T,R])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onContStep">onContStep</a><span class="delimiter">(</span><a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onContStep.cont">cont</a>: Step.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont" title="play.api.libs.iteratee.Step.Cont[T,R]">Cont</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onContStep.$anonfun.x0$5" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedWithCont.readResolve" title="(cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.NotSubscribedWithCont[T,R]">NotSubscribedWithCont</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onContStep.cont" title="play.api.libs.iteratee.Step.Cont[T,R]">cont</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="org.reactivestreams.Subscription">subs</span>.<span title="(x$1: Long)Unit">request</span><span class="delimiter">(</span><span title="Long(1L)" class="int">1</span><span class="delimiter">)</span>
      <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont.readResolve" title="(subs: org.reactivestreams.Subscription, cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.streams.impl.IterateeSubscriber.SubscribedWithCont[T,R]">SubscribedWithCont</a><span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <a href="#play.api.libs.streams.impl;IterateeSubscriber.onContStep.cont" title="play.api.libs.iteratee.Step.Cont[T,R]">cont</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t get cont twice&quot;)" class="string">&quot;Can't get cont twice&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t get cont twice&quot;)" class="string">&quot;Can't get cont twice&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont" title="(cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithCompletedCont</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onContStep.cont" title="play.api.libs.iteratee.Step.Cont[T,R]">cont</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onContStep.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Called when the iteratee folds to a Done or Error step. We may want to
   * cancel our Subscription.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(doneOrError: play.api.libs.iteratee.Step[T,R])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep">onDoneOrErrorStep</a><span class="delimiter">(</span><a title="play.api.libs.iteratee.Step[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.doneOrError">doneOrError</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Step" title="play.api.libs.iteratee.Step[T,R]">Step</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.exclusive" title="(f: play.api.libs.streams.impl.IterateeSubscriber.State[T,R] =&gt; Unit)Unit">exclusive</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.$anonfun.x0$6" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> NotSubscribedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep" title="(step: play.api.libs.iteratee.Step[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithDoneOrErrorStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.doneOrError" title="play.api.libs.iteratee.Step[T,R]">doneOrError</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedNoStep<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep" title="(step: play.api.libs.iteratee.Step[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithDoneOrErrorStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.doneOrError" title="play.api.libs.iteratee.Step[T,R]">doneOrError</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> NotSubscribedWithCont<span class="delimiter">(</span><span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t get done or error while has cont&quot;)" class="string">&quot;Can't get done or error while has cont&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> SubscribedWithCont<span class="delimiter">(</span><span title="org.reactivestreams.Subscription">subs</span>, <span title="play.api.libs.iteratee.Step.Cont[T,R]">cont</span>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><span title="String(&quot;Can\'t get done or error while has cont&quot;)" class="string">&quot;Can't get done or error while has cont&quot;</span><span class="delimiter">)</span>
    <span class="keyword">case</span> CompletedNoStep<span class="delimiter">(</span><span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span> =&gt;
      <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep" title="(step: play.api.libs.iteratee.Step[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit">finishWithDoneOrErrorStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.doneOrError" title="play.api.libs.iteratee.Step[T,R]">doneOrError</a>, <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</span><span class="delimiter">)</span>
    <span class="keyword">case</span> Finished<span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep.$anonfun.resultIteratee">resultIteratee</a><span class="delimiter">)</span> =&gt;
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Folds an Iteratee to get its Step. The Step is used to choose a method
   * to call.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(iter: play.api.libs.iteratee.Iteratee[T,R])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee">getNextStepFromIteratee</a><span class="delimiter">(</span><a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.iter">iter</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee" title="play.api.libs.iteratee.Iteratee[T,R]">Iteratee</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.iter" title="play.api.libs.iteratee.Iteratee[T,R]">iter</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee.pureFold" title="(folder: play.api.libs.iteratee.Step[T,R] =&gt; Unit)(implicit ec: scala.concurrent.ExecutionContext)scala.concurrent.Future[Unit]">pureFold</a> <a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.x0$7" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.c">c</a> @ Step.Cont<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#play.api.libs.streams.impl;IterateeSubscriber.onContStep" title="(cont: play.api.libs.iteratee.Step.Cont[T,R])Unit">onContStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.c" title="play.api.libs.iteratee.Step.Cont[T,R]">c</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="play.api.libs.iteratee.Step.Done[R,T]" id="play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.d">d</a> @ Step.Done<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep" title="(doneOrError: play.api.libs.iteratee.Step[T,R])Unit">onDoneOrErrorStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.d" title="play.api.libs.iteratee.Step.Done[R,T]">d</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="play.api.libs.iteratee.Step.Error[T]" id="play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.e">e</a> @ Step.Error<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <a href="#play.api.libs.streams.impl;IterateeSubscriber.onDoneOrErrorStep" title="(doneOrError: play.api.libs.iteratee.Step[T,R])Unit">onDoneOrErrorStep</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.getNextStepFromIteratee.$anonfun.e" title="play.api.libs.iteratee.Step.Error[T]">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span title="Unit" class="delimiter">(</span><a href="../../../../../../play-iteratees/play/api/libs/iteratee/Execution.scala.html#play.api.libs.iteratee.Execution" title="play.api.libs.iteratee.Execution.type">Execution</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Execution.scala.html#play.api.libs.iteratee.Execution.trampoline" title="play.api.libs.iteratee.Execution.trampoline.type">trampoline</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Flattens a Promise[Iteratee] to an Iteratee. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee">promiseToIteratee</a><span class="delimiter">(</span><a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Iteratee" title="play.api.libs.iteratee.Iteratee.type">Iteratee</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Iteratee.flatten" title="(i: scala.concurrent.Future[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">flatten</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a>.<span title="=&gt; scala.concurrent.Future[play.api.libs.iteratee.Iteratee[T,R]]">future</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Finishes the Subscription when the Step is Cont and onComplete
   * has been called. This is done by feeding EOF to the Cont Iteratee.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cont: play.api.libs.iteratee.Step.Cont[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont">finishWithCompletedCont</a><span class="delimiter">(</span><a title="play.api.libs.iteratee.Step.Cont[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.cont">cont</a>: Step.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont" title="play.api.libs.iteratee.Step.Cont[T,R]">Cont</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.nextIteratee">nextIteratee</a> = <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.cont" title="play.api.libs.iteratee.Step.Cont[T,R]">cont</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Step;Cont.k" title="(v1: play.api.libs.iteratee.Input[T])play.api.libs.iteratee.Iteratee[T,R]">k</a><span class="delimiter">(</span><a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Input" title="play.api.libs.iteratee.Input.type">Input</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Input.EOF" title="play.api.libs.iteratee.Input.EOF.type">EOF</a><span class="delimiter">)</span>
    <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a>.<span title="(v: play.api.libs.iteratee.Iteratee[T,R])result.type">success</span><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.nextIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">nextIteratee</a><span class="delimiter">)</span>
    <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.Finished.readResolve" title="(resultIteratee: play.api.libs.iteratee.Iteratee[T,R])play.api.libs.streams.impl.IterateeSubscriber.Finished[T,R]">Finished</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithCompletedCont.nextIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">nextIteratee</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Finishes the Subscription when onError has been called. This is done by
   * setting the Iteratee Future to an failed state.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cause: Throwable, result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithError">finishWithError</a><span class="delimiter">(</span><a title="Throwable" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithError.cause">cause</a>: <span title="Throwable">Throwable</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithError.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a>.<span title="(t: Throwable)result.type">failure</span><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError.cause" title="Throwable">cause</a><span class="delimiter">)</span>
    <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.Finished.readResolve" title="(resultIteratee: play.api.libs.iteratee.Iteratee[T,R])play.api.libs.streams.impl.IterateeSubscriber.Finished[T,R]">Finished</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.promiseToIteratee" title="(result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])play.api.libs.iteratee.Iteratee[T,R]">promiseToIteratee</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithError.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Finishes the Subscription when the Step is Done or Error. This is done by
   * setting the result to the Step's iteratee.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(step: play.api.libs.iteratee.Step[T,R], result: scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]])Unit" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep">finishWithDoneOrErrorStep</a><span class="delimiter">(</span><a title="play.api.libs.iteratee.Step[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.step">step</a>: <a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Step" title="play.api.libs.iteratee.Step[T,R]">Step</a><span class="delimiter">[</span>T, R<span class="delimiter">]</span>, <a title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.result">result</a>: <span title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">Promise</span><span class="delimiter">[</span>Iteratee<span class="delimiter">[</span>T, R<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[T,R]" id="play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.nextIteratee">nextIteratee</a> = <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.step" title="play.api.libs.iteratee.Step[T,R]">step</a>.<a href="../../../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Step.it" title="=&gt; play.api.libs.iteratee.Iteratee[T,R]">it</a>
    <a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.result" title="scala.concurrent.Promise[play.api.libs.iteratee.Iteratee[T,R]]">result</a>.<span title="(v: play.api.libs.iteratee.Iteratee[T,R])result.type">success</span><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.nextIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">nextIteratee</a><span class="delimiter">)</span>
    <a href="../../../../../../play-iteratees/play/api/libs/concurrent/StateMachine.scala.html#play.api.libs.concurrent;StateMachine.state_=" title="(x$1: play.api.libs.streams.impl.IterateeSubscriber.State[T,R])Unit">state</a> = <a href="#play.api.libs.streams.impl.IterateeSubscriber.Finished.readResolve" title="(resultIteratee: play.api.libs.iteratee.Iteratee[T,R])play.api.libs.streams.impl.IterateeSubscriber.Finished[T,R]">Finished</a><span class="delimiter">(</span><a href="#play.api.libs.streams.impl;IterateeSubscriber.finishWithDoneOrErrorStep.nextIteratee" title="play.api.libs.iteratee.Iteratee[T,R]">nextIteratee</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>
        </pre>
    </body>
</html>
