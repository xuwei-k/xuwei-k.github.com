<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>play-cache/play/api/cache/Cached.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> play.api.cache

<span class="keyword">import</span> javax.inject.Inject
<span class="keyword">import</span> play.api._
<span class="keyword">import</span> play.api.mvc._
<span class="keyword">import</span> play.api.libs.Codecs
<span class="keyword">import</span> play.api.libs.iteratee.<span class="delimiter">{</span> Iteratee, Done <span class="delimiter">}</span>
<span class="keyword">import</span> play.api.http.<a href="../../../../play/play/api/http/StandardValues.scala.html#play.api.http.HeaderNames" title="play.api.http.HeaderNames.type">HeaderNames</a>.<span class="delimiter">{</span> IF_NONE_MATCH, ETAG, EXPIRES <span class="delimiter">}</span>
<span class="keyword">import</span> play.api.mvc.<a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc.Results" title="play.api.mvc.Results.type">Results</a>.NotModified

<span class="keyword">import</span> play.core.<a href="../../../../play/play/core/system/Execution.scala.html#play.core.Execution" title="play.core.Execution.type">Execution</a>.<a href="../../../../play/play/core/system/Execution.scala.html#play.core.Execution.Implicits" title="play.core.Execution.Implicits.type">Implicits</a>.internalContext

<span class="keyword">import</span> scala.concurrent.duration._

<span class="comment">/**
 * A helper to add caching to an Action.
 */</span>
<span class="keyword">class</span> <a title="class Cached extends AnyRef" id="play.api.cache;Cached">Cached</a> @Inject<span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">(</span><a title="play.api.cache.CacheApi" id="play.api.cache;Cached.cache">cache</a>: <a href="Cache.scala.html#play.api.cache;CacheApi" title="play.api.cache.CacheApi">CacheApi</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Compute a key from the request header
   * @param caching Compute a cache duration from the respone header
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, caching: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.CachedBuilder" id="play.api.cache;Cached.apply(83ce40ecf5)">apply</a><span class="delimiter">(</span>
    <a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.apply(83ce40ecf5).key">key</a>: RequestHeader =&gt; String,
    <a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;Cached.apply(83ce40ecf5).caching">caching</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span title="play.api.cache.CachedBuilder" class="keyword">new</span> <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.cache" title="play.api.cache.CacheApi">cache</a>, <a href="#play.api.cache;Cached.apply(83ce40ecf5).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <a href="#play.api.cache;Cached.apply(83ce40ecf5).caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Compute a key from the request header
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder" id="play.api.cache;Cached.apply(f084b4cbac)">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.apply(f084b4cbac).key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span class="delimiter">{</span>
    <a href="#play.api.cache;Cached.apply(4555085404)" title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.CachedBuilder">apply</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.apply(f084b4cbac).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, duration = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Cache key
   */</span>
  <span class="keyword">def</span> <a title="(key: String)play.api.cache.CachedBuilder" id="play.api.cache;Cached.apply(0f4f98b368)">apply</a><span class="delimiter">(</span><a title="String" id="play.api.cache;Cached.apply(0f4f98b368).key">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span class="delimiter">{</span>
    <a href="#play.api.cache;Cached.apply(4555085404)" title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.CachedBuilder">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader" id="play.api.cache;Cached.apply(0f4f98b368).$anonfun.x$1">_</a> =&gt; <a href="#play.api.cache;Cached.apply(0f4f98b368).key" title="String">key</a>, duration = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Cache key
   * @param duration Cache duration (in seconds)
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.CachedBuilder" id="play.api.cache;Cached.apply(4555085404)">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.apply(4555085404).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache;Cached.apply(4555085404).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span class="delimiter">{</span>
    <span title="play.api.cache.CachedBuilder" class="keyword">new</span> <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.cache" title="play.api.cache.CacheApi">cache</a>, <a href="#play.api.cache;Cached.apply(4555085404).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration] with Serializable" id="play.api.cache;Cached.apply(4555085404);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span>_: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader" title="play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">)</span> =&gt; <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span title="Boolean(true)" class="delimiter">(</span><a href="#play.api.cache;Cached.apply(4555085404).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A cached instance caching nothing
   * Useful for composition
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder" id="play.api.cache;Cached.empty">empty</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.empty.key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span title="play.api.cache.CachedBuilder" class="keyword">new</span> <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.cache" title="play.api.cache.CacheApi">cache</a>, <a href="#play.api.cache;Cached.empty.key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <span title="PartialFunction.type">PartialFunction</span>.<span title="PartialFunction[Any,Nothing]">empty</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches everything, forever
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder" id="play.api.cache;Cached.everything(f084b4cbac)">everything</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.everything(f084b4cbac).key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.everything(f084b4cbac).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;CachedBuilder.default(4af5e2d9d3)" title="(duration: Int)play.api.cache.CachedBuilder">default</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches everything for the specified seconds
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.CachedBuilder" id="play.api.cache;Cached.everything(4555085404)">everything</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.everything(4555085404).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache;Cached.everything(4555085404).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.everything(4555085404).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;CachedBuilder.default(4af5e2d9d3)" title="(duration: Int)play.api.cache.CachedBuilder">default</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.everything(4555085404).duration" title="Int">duration</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches the specified status, for the specified number of seconds
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, status: Int, duration: Int)play.api.cache.CachedBuilder" id="play.api.cache;Cached.status(c6dc8d42f2)">status</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.status(c6dc8d42f2).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache;Cached.status(c6dc8d42f2).status">status</a>: <span title="Int">Int</span>, <a title="Int" id="play.api.cache;Cached.status(c6dc8d42f2).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.status(c6dc8d42f2).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.status(c6dc8d42f2).status" title="Int">status</a>, <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache;Cached.status(c6dc8d42f2).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches the specified status forever
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, status: Int)play.api.cache.CachedBuilder" id="play.api.cache;Cached.status(1c0e795cc0)">status</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;Cached.status(1c0e795cc0).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache;Cached.status(1c0e795cc0).status">status</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.CachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.status(1c0e795cc0).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;CachedBuilder.includeStatus(b040ffce2a)" title="(status: Int)play.api.cache.CachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;Cached.status(1c0e795cc0).status" title="Int">status</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * A helper to add caching to an Action. This helper uses the Application's default cache.
 * If you want to inject a custom cache, see the `Cached` class.
 */</span>
<span title="AnyRef" class="keyword">object</span> <a title="play.api.cache.Cached.type" id="play.api.cache.Cached">Cached</a> <a href="#play.api.cache.Cached" title="play.api.cache.Cached.type" class="delimiter">{</a>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Compute a key from the request header
   * @param caching Compute a cache duration from the respone header
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, caching: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.apply(1a95515be7)">apply</a><span class="delimiter">(</span>
    <a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.apply(1a95515be7).key">key</a>: RequestHeader =&gt; String,
    <a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache.Cached.apply(1a95515be7).caching">caching</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span title="play.api.cache.UnboundCachedBuilder" class="keyword">new</span> <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.apply(1a95515be7).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <a href="#play.api.cache.Cached.apply(1a95515be7).caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Compute a key from the request header
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.apply(e57ae688f6)">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.apply(e57ae688f6).key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span class="delimiter">{</span>
    <a href="#play.api.cache.Cached.apply(f3a101207d)" title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.UnboundCachedBuilder">apply</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.apply(e57ae688f6).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, duration = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Cache key
   */</span>
  <span class="keyword">def</span> <a title="(key: String)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.apply(5779fe475a)">apply</a><span class="delimiter">(</span><a title="String" id="play.api.cache.Cached.apply(5779fe475a).key">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span class="delimiter">{</span>
    <a href="#play.api.cache.Cached.apply(f3a101207d)" title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.UnboundCachedBuilder">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader" id="play.api.cache.Cached.apply(5779fe475a).$anonfun.x$2">_</a> =&gt; <a href="#play.api.cache.Cached.apply(5779fe475a).key" title="String">key</a>, duration = <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Cache an action.
   *
   * @param key Cache key
   * @param duration Cache duration (in seconds)
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.apply(f3a101207d)">apply</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.apply(f3a101207d).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache.Cached.apply(f3a101207d).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span class="delimiter">{</span>
    <span title="play.api.cache.UnboundCachedBuilder" class="keyword">new</span> <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.apply(f3a101207d).key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration] with Serializable" id="play.api.cache.Cached.apply(f3a101207d);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span>_: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader" title="play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">)</span> =&gt; <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span title="Boolean(true)" class="delimiter">(</span><a href="#play.api.cache.Cached.apply(f3a101207d).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A cached instance caching nothing
   * Useful for composition
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.empty">empty</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.empty.key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span title="play.api.cache.UnboundCachedBuilder" class="keyword">new</span> <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.empty.key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <span title="PartialFunction.type">PartialFunction</span>.<span title="PartialFunction[Any,Nothing]">empty</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches everything, forever
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.everything(e57ae688f6)">everything</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.everything(e57ae688f6).key">key</a>: RequestHeader =&gt; String<span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache.Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.everything(e57ae688f6).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;UnboundCachedBuilder.default(d3d0d5be49)" title="(duration: Int)play.api.cache.UnboundCachedBuilder">default</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches everything for the specified seconds
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, duration: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.everything(f3a101207d)">everything</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.everything(f3a101207d).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache.Cached.everything(f3a101207d).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache.Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.everything(f3a101207d).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;UnboundCachedBuilder.default(d3d0d5be49)" title="(duration: Int)play.api.cache.UnboundCachedBuilder">default</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.everything(f3a101207d).duration" title="Int">duration</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches the specified status, for the specified number of seconds
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, status: Int, duration: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.status(a22161d162)">status</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.status(a22161d162).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache.Cached.status(a22161d162).status">status</a>: <span title="Int">Int</span>, <a title="Int" id="play.api.cache.Cached.status(a22161d162).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache.Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.status(a22161d162).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.status(a22161d162).status" title="Int">status</a>, <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache.Cached.status(a22161d162).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Caches the specified status forever
   */</span>
  <span class="keyword">def</span> <a title="(key: play.api.mvc.RequestHeader =&gt; String, status: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache.Cached.status(a25b04c9bf)">status</a><span class="delimiter">(</span><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache.Cached.status(a25b04c9bf).key">key</a>: RequestHeader =&gt; String, <a title="Int" id="play.api.cache.Cached.status(a25b04c9bf).status">status</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache.Cached.empty" title="(key: play.api.mvc.RequestHeader =&gt; String)play.api.cache.UnboundCachedBuilder">empty</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.status(a25b04c9bf).key" title="play.api.mvc.RequestHeader =&gt; String">key</a><span class="delimiter">)</span>.<a href="#play.api.cache;UnboundCachedBuilder.includeStatus(ee2de1086d)" title="(status: Int)play.api.cache.UnboundCachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache.Cached.status(a25b04c9bf).status" title="Int">status</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * Builds an action with caching behavior. Typically created with one of the methods in the `Cached`
 * class. Uses both server and client caches:
 *
 *  - Adds an `Expires` header to the response, so clients can cache response content ;
 *  - Adds an `Etag` header to the response, so clients can cache response content and ask the server for freshness ;
 *  - Cache the result on the server, so the underlying action is not computed at each call.
 *
 * @param cache The cache used for caching results
 * @param key Compute a key from the request header
 * @param caching A callback to get the number of seconds to cache results for
 */</span>
<span title="AnyRef" class="keyword">final</span> <span class="keyword">class</span> <a title="class CachedBuilder extends AnyRef" id="play.api.cache;CachedBuilder">CachedBuilder</a><a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder" class="delimiter">(</a>
    <a title="play.api.cache.CacheApi" id="play.api.cache;CachedBuilder.cache">cache</a>: <a href="Cache.scala.html#play.api.cache;CacheApi" title="play.api.cache.CacheApi">CacheApi</a>,
    <a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;CachedBuilder.key">key</a>: RequestHeader =&gt; String,
    <a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;CachedBuilder.caching">caching</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="comment">/**
   * Compose the cache with an action
   */</span>
  <span class="keyword">def</span> <a title="(action: play.api.mvc.EssentialAction)play.api.mvc.EssentialAction" id="play.api.cache;CachedBuilder.apply">apply</a><span class="delimiter">(</span><a title="play.api.mvc.EssentialAction" id="play.api.cache;CachedBuilder.apply.action">action</a>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a><span class="delimiter">)</span>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a> = <a href="#play.api.cache;CachedBuilder.build" title="(action: play.api.mvc.EssentialAction)play.api.mvc.EssentialAction">build</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.apply.action" title="play.api.mvc.EssentialAction">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Compose the cache with an action
   */</span>
  <span class="keyword">def</span> <a title="(action: play.api.mvc.EssentialAction)play.api.mvc.EssentialAction" id="play.api.cache;CachedBuilder.build">build</a><span class="delimiter">(</span><a title="play.api.mvc.EssentialAction" id="play.api.cache;CachedBuilder.build.action">action</a>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a><span class="delimiter">)</span>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a> = <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc.EssentialAction.apply" title="(f: play.api.mvc.RequestHeader =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result])play.api.mvc.EssentialAction">EssentialAction</a> <span class="delimiter">{</span> <a title="play.api.mvc.RequestHeader" id="play.api.cache;CachedBuilder.build.$anonfun.request">request</a> =&gt;
    <span class="keyword">val</span> <a title="String" id="play.api.cache;CachedBuilder.build.$anonfun.resultKey">resultKey</a> = <a href="#play.api.cache;CachedBuilder.key" title="(v1: play.api.mvc.RequestHeader)String">key</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.request" title="play.api.mvc.RequestHeader">request</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="play.api.cache;CachedBuilder.build.$anonfun.etagKey">etagKey</a> = <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.resultKey" title="String">resultKey</a><span title="String(&quot;-etag&quot;)" class="string">-etag&quot;</span>

    <span class="comment">// Has the client a version of the resource as fresh as the last one we served?</span>
    <span class="keyword">val</span> <a title="Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]" id="play.api.cache;CachedBuilder.build.$anonfun.notModified">notModified</a> = <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="play.api.cache;CachedBuilder.build.$anonfun.notModified.$anonfun.requestEtag">requestEtag</a> &lt;- <a href="#play.api.cache;CachedBuilder.build.$anonfun.request" title="play.api.mvc.RequestHeader">request</a>.<a href="../../../../play/play/api/mvc/Http.scala.html#play.api.mvc;RequestHeader.headers" title="=&gt; play.api.mvc.Headers">headers</a>.<a href="../../../../play/play/api/mvc/Http.scala.html#play.api.mvc;Headers.get" title="(key: String)Option[String]">get</a><span title="(f: String =&gt; Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]])Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]" class="delimiter">(</span><a href="../../../../play/play/api/http/StandardValues.scala.html#play.api.http;HeaderNames.IF_NONE_MATCH" title="=&gt; String">IF_NONE_MATCH</a><span class="delimiter">)</span>
      <a title="String" id="play.api.cache;CachedBuilder.build.$anonfun.notModified.$anonfun.$anonfun.etag">etag</a> &lt;- <a href="#play.api.cache;CachedBuilder.cache" title="play.api.cache.CacheApi">cache</a>.<a href="Cache.scala.html#play.api.cache;CacheApi.get" title="[T](key: String)(implicit evidence$2: scala.reflect.ClassTag[T])Option[T]">get</a><span title="(key: String)(implicit evidence$2: scala.reflect.ClassTag[String])Option[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span title="(f: String =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result])Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]" class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.etagKey" title="String">etagKey</a><span class="delimiter">)</span>
      <span class="keyword">if</span> <a href="#play.api.cache;CachedBuilder.build.$anonfun.notModified.$anonfun.requestEtag" title="String">requestEtag</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span title="(x: Boolean)Boolean">||</span> <a href="#play.api.cache;CachedBuilder.build.$anonfun.notModified.$anonfun.$anonfun.etag" title="String">etag</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#play.api.cache;CachedBuilder.build.$anonfun.notModified.$anonfun.requestEtag" title="String">requestEtag</a>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Done.apply" title="[E, A](a: A, e: play.api.libs.iteratee.Input[E])play.api.libs.iteratee.Iteratee[E,A]">Done</a><a href="../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Done.apply$default$2" title="(a: play.api.mvc.Result, e: play.api.libs.iteratee.Input[Array[Byte]])play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]" class="delimiter">[</a><span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result" title="play.api.mvc.Result">Result</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Results.NotModified" title="=&gt; play.api.mvc.Result">NotModified</a><span class="delimiter">)</span>

    <a href="#play.api.cache;CachedBuilder.build.$anonfun.notModified" title="Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]">notModified</a>.<span title="(alternative: =&gt; Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]])Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]">orElse</span> <span class="delimiter">{</span>
      <span class="comment">// Otherwise try to serve the resource from the cache, if it has not yet expired</span>
      <a href="#play.api.cache;CachedBuilder.cache" title="play.api.cache.CacheApi">cache</a>.<a href="Cache.scala.html#play.api.cache;CacheApi.get" title="[T](key: String)(implicit evidence$2: scala.reflect.ClassTag[T])Option[T]">get</a><span title="(key: String)(implicit evidence$2: scala.reflect.ClassTag[play.api.cache.SerializableResult])Option[play.api.cache.SerializableResult]" class="delimiter">[</span><a href="SerializableResult.scala.html#play.api.cache;SerializableResult" title="play.api.cache.SerializableResult">SerializableResult</a><span class="delimiter">]</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[play.api.cache.SerializableResult]" class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.resultKey" title="String">resultKey</a><span class="delimiter">)</span>.<span title="(f: play.api.cache.SerializableResult =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result])Option[play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]]">map</span> <span class="delimiter">{</span> sr: <a href="SerializableResult.scala.html#play.api.cache;SerializableResult" title="play.api.cache.SerializableResult">SerializableResult</a> =&gt;
        <a href="../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Done.apply" title="[E, A](a: A, e: play.api.libs.iteratee.Input[E])play.api.libs.iteratee.Iteratee[E,A]">Done</a><a href="../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee.Done.apply$default$2" title="(a: play.api.mvc.Result, e: play.api.libs.iteratee.Input[Array[Byte]])play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]" class="delimiter">[</a><span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result" title="play.api.mvc.Result">Result</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.$anonfun.sr" title="play.api.cache.SerializableResult">sr</a>.<a href="SerializableResult.scala.html#play.api.cache;SerializableResult.result" title="=&gt; play.api.mvc.Result">result</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="(default: =&gt; play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result])play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]">getOrElse</span> <span class="delimiter">{</span>
      <span class="comment">// The resource was not in the cache, we have to run the underlying action</span>
      <span class="keyword">val</span> <a title="play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]" id="play.api.cache;CachedBuilder.build.$anonfun.iterateeResult">iterateeResult</a> = <a href="#play.api.cache;CachedBuilder.build.action" title="(v1: play.api.mvc.RequestHeader)play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]">action</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.request" title="play.api.mvc.RequestHeader">request</a><span class="delimiter">)</span>

      <span class="comment">// Add cache information to the response, so clients can cache its content</span>
      <a href="#play.api.cache;CachedBuilder.build.$anonfun.iterateeResult" title="play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]">iterateeResult</a>.<a href="../../../../play-iteratees/play/api/libs/iteratee/Iteratee.scala.html#play.api.libs.iteratee;Iteratee.map" title="(f: play.api.mvc.Result =&gt; play.api.mvc.Result)(implicit ec: scala.concurrent.ExecutionContext)play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]">map</a><a href="../../../../play/play/core/system/Execution.scala.html#play.core.Execution.Implicits.internalContext" title="=&gt; scala.concurrent.ExecutionContext" class="delimiter">(</a><a href="#play.api.cache;CachedBuilder.handleResult" title="(result: play.api.mvc.Result, etagKey: String, resultKey: String)play.api.mvc.Result">handleResult</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.build.$anonfun.$anonfun.x$3" title="play.api.mvc.Result">_</a>, <a href="#play.api.cache;CachedBuilder.build.$anonfun.etagKey" title="String">etagKey</a>, <a href="#play.api.cache;CachedBuilder.build.$anonfun.resultKey" title="String">resultKey</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Eternity is one year long. Duration zero means eternity.
   */</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;CachedBuilder.cachingWithEternity">cachingWithEternity</a> = <a href="#play.api.cache;CachedBuilder.caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a>.<span title="(k: scala.concurrent.duration.Duration =&gt; scala.concurrent.duration.Duration)PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">andThen</span> <span class="delimiter">{</span> <a title="scala.concurrent.duration.Duration" id="play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.duration">duration</a> =&gt;
    <span class="comment">// FIXME: Surely Duration.Inf is a better marker for eternity than 0?</span>
    <span class="keyword">val</span> <a title="Boolean" id="play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.zeroDuration">zeroDuration</a>: <span title="Boolean">Boolean</span> = <a href="#play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a>.<span title="()scala.concurrent.duration.Duration">neg</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span>
    <span title="scala.concurrent.duration.Duration" class="keyword">if</span> <span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.zeroDuration" title="Boolean">zeroDuration</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><span class="int">60</span> * <span class="int">60</span> * <span class="int">24</span> <span title="Long(31536000L)">*</span> <span class="int">365</span>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#play.api.cache;CachedBuilder.cachingWithEternity.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(result: play.api.mvc.Result, etagKey: String, resultKey: String)play.api.mvc.Result" id="play.api.cache;CachedBuilder.handleResult">handleResult</a><span class="delimiter">(</span><a title="play.api.mvc.Result" id="play.api.cache;CachedBuilder.handleResult.result">result</a>: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result" title="play.api.mvc.Result">Result</a>, <a title="String" id="play.api.cache;CachedBuilder.handleResult.etagKey">etagKey</a>: <span title="String">String</span>, <a title="String" id="play.api.cache;CachedBuilder.handleResult.resultKey">resultKey</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result" title="play.api.mvc.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#play.api.cache;CachedBuilder.cachingWithEternity" title="=&gt; PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">cachingWithEternity</a>.<span title="(k: scala.concurrent.duration.Duration =&gt; play.api.mvc.Result)PartialFunction[play.api.mvc.ResponseHeader,play.api.mvc.Result]">andThen</span> <span class="delimiter">{</span> <a title="scala.concurrent.duration.Duration" id="play.api.cache;CachedBuilder.handleResult.$anonfun.duration">duration</a> =&gt;
      <span class="comment">// Format expiration date according to http standard</span>
      <span class="keyword">val</span> <a title="String" id="play.api.cache;CachedBuilder.handleResult.$anonfun.expirationDate">expirationDate</a> = http.<a href="../../../../play/play/api/http/package.scala.html#play.api.http.package.dateFormat" title="=&gt; org.joda.time.format.DateTimeFormatter">dateFormat</a>.<span title="(x$1: Long)String">print</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Long)Long">+</span> <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a>.<span title="=&gt; Long">toMillis</span><span class="delimiter">)</span>
      <span class="comment">// Generate a fresh ETAG for it</span>
      <span class="comment">// Use quoted sha1 hash of expiration date as ETAG</span>
      <span class="keyword">val</span> <a title="String" id="play.api.cache;CachedBuilder.handleResult.$anonfun.etag">etag</a> = <span title="(args: Any*)String">s</span>&quot;&quot;&quot;<span title="String(&quot;\&quot;&quot;)">&quot;$</span><span class="delimiter">{</span><a href="../../../../play/play/api/libs/Codecs.scala.html#play.api.libs.Codecs" title="play.api.libs.Codecs.type">Codecs</a>.<a href="../../../../play/play/api/libs/Codecs.scala.html#play.api.libs.Codecs.sha1(d814a8dff5)" title="(text: String)String">sha1</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.expirationDate" title="String">expirationDate</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;\&quot;&quot;)" class="string">&quot;&quot;&quot;&quot;</span>

      <span class="keyword">val</span> <a title="play.api.mvc.Result" id="play.api.cache;CachedBuilder.handleResult.$anonfun.resultWithHeaders">resultWithHeaders</a> = <a href="#play.api.cache;CachedBuilder.handleResult.result" title="play.api.mvc.Result">result</a>.<a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result.withHeaders" title="(headers: (String, String)*)play.api.mvc.Result">withHeaders</a><span class="delimiter">(</span><a href="../../../../play/play/api/http/StandardValues.scala.html#play.api.http;HeaderNames.ETAG" title="(x: String)ArrowAssoc[String]">ETAG</a> <span title="(y: String)(String, String)">-&gt;</span> <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.etag" title="String">etag</a>, <a href="../../../../play/play/api/http/StandardValues.scala.html#play.api.http;HeaderNames.EXPIRES" title="(x: String)ArrowAssoc[String]">EXPIRES</a> <span title="(y: String)(String, String)">-&gt;</span> <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.expirationDate" title="String">expirationDate</a><span class="delimiter">)</span>

      <span class="comment">// Cache the new ETAG of the resource</span>
      <a href="#play.api.cache;CachedBuilder.cache" title="play.api.cache.CacheApi">cache</a>.<a href="Cache.scala.html#play.api.cache;CacheApi.set" title="(key: String, value: Any, expiration: scala.concurrent.duration.Duration)Unit">set</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.handleResult.etagKey" title="String">etagKey</a>, <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.etag" title="String">etag</a>, <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span>
      <span class="comment">// Cache the new Result of the resource</span>
      <a href="#play.api.cache;CachedBuilder.cache" title="play.api.cache.CacheApi">cache</a>.<a href="Cache.scala.html#play.api.cache;CacheApi.set" title="(key: String, value: Any, expiration: scala.concurrent.duration.Duration)Unit">set</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.handleResult.resultKey" title="String">resultKey</a>, <span title="play.api.cache.SerializableResult" class="keyword">new</span> <a href="SerializableResult.scala.html#play.api.cache;SerializableResult" title="play.api.cache.SerializableResult">SerializableResult</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.resultWithHeaders" title="play.api.mvc.Result">resultWithHeaders</a><span class="delimiter">)</span>, <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.duration" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span>

      <a href="#play.api.cache;CachedBuilder.handleResult.$anonfun.resultWithHeaders" title="play.api.mvc.Result">resultWithHeaders</a>
    <span class="delimiter">}</span>.<span title="(x: play.api.mvc.ResponseHeader, default: play.api.mvc.ResponseHeader =&gt; play.api.mvc.Result)play.api.mvc.Result">applyOrElse</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.handleResult.result" title="play.api.mvc.Result">result</a>.<a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;Result.header" title="=&gt; play.api.mvc.ResponseHeader">header</a>, <span class="delimiter">(</span>_: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader" title="play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">)</span> =&gt; <a href="#play.api.cache;CachedBuilder.handleResult.result" title="play.api.mvc.Result">result</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result forever
   */</span>
  <span class="keyword">def</span> <a title="(status: Int)play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.includeStatus(b040ffce2a)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;CachedBuilder.includeStatus(b040ffce2a).status">status</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.includeStatus(b040ffce2a).status" title="Int">status</a>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result for duration seconds
   *
   * @param status the status code to check
   * @param duration the number of seconds to cache the result for
   */</span>
  <span class="keyword">def</span> <a title="(status: Int, duration: Int)play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.includeStatus(eb725ae2e2)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;CachedBuilder.includeStatus(eb725ae2e2).status">status</a>: <span title="Int">Int</span>, <a title="Int" id="play.api.cache;CachedBuilder.includeStatus(eb725ae2e2).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.includeStatus(eb725ae2e2).status" title="Int">status</a>, <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.includeStatus(eb725ae2e2).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result for duration seconds
   *
   * @param status the status code to check
   * @param duration how long should we cache the result for
   */</span>
  <span class="keyword">def</span> <a title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9).status">status</a>: <span title="Int">Int</span>, <a title="scala.concurrent.duration.Duration" id="play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9).duration">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;CachedBuilder.compose" title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.CachedBuilder">compose</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration] with Serializable" id="play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="play.api.mvc.ResponseHeader" id="play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9);$anonfun.isDefinedAt.e">e</a> <span class="keyword">if</span> <a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9);$anonfun.isDefinedAt.e" title="play.api.mvc.ResponseHeader">e</a>.<a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader.status" title="=&gt; Int">status</a> <span title="(x: Int)Boolean">==</span> <a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9).status" title="Int">status</a> =&gt; <span class="delimiter">{</span>
      <a href="#play.api.cache;CachedBuilder.includeStatus(c2a4e74fe9).duration" title="scala.concurrent.duration.Duration">duration</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The returned cache will store all responses whatever they may contain
   * @param duration how long we should store responses
   */</span>
  <span class="keyword">def</span> <a title="(duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.default(a95861f016)">default</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="play.api.cache;CachedBuilder.default(a95861f016).duration">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;CachedBuilder.compose" title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.CachedBuilder">compose</a><span class="delimiter">(</span><span title="(f: play.api.mvc.ResponseHeader =&gt; scala.concurrent.duration.Duration)PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">(</span><span class="delimiter">(</span>_: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader" title="play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">)</span> =&gt; <a href="#play.api.cache;CachedBuilder.default(a95861f016).duration" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The returned cache will store all responses whatever they may contain
   * @param duration the number of seconds we should store responses
   */</span>
  <span class="keyword">def</span> <a title="(duration: Int)play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.default(4af5e2d9d3)">default</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;CachedBuilder.default(4af5e2d9d3).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <a href="#play.api.cache;CachedBuilder.default(a95861f016)" title="(duration: scala.concurrent.duration.Duration)play.api.cache.CachedBuilder">default</a><span class="delimiter">(</span><span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.default(4af5e2d9d3).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Compose the cache with new caching function
   * @param alternative a closure getting the reponseheader and returning the duration
   *        we should cache for
   */</span>
  <span class="keyword">def</span> <a title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.CachedBuilder" id="play.api.cache;CachedBuilder.compose">compose</a><span class="delimiter">(</span><a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;CachedBuilder.compose.alternative">alternative</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a> = <span title="play.api.cache.CachedBuilder" class="keyword">new</span> <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a><span class="delimiter">(</span>
    cache = <a href="#play.api.cache;CachedBuilder.cache" title="play.api.cache.CacheApi">cache</a>,
    key = <a href="#play.api.cache;CachedBuilder.key" title="play.api.mvc.RequestHeader =&gt; String">key</a>,
    caching = <a href="#play.api.cache;CachedBuilder.caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a>.<span title="(that: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">orElse</span><span class="delimiter">(</span><a href="#play.api.cache;CachedBuilder.compose.alternative" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">alternative</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="comment">/**
 * Builds an action with caching behavior. Typically created with one of the methods in the `Cached`
 * companion object. Uses both server and client caches:
 *
 *  - Adds an `Expires` header to the response, so clients can cache response content ;
 *  - Adds an `Etag` header to the response, so clients can cache response content and ask the server for freshness ;
 *  - Cache the result on the server, so the underlying action is not computed at each call.
 *
 * Unlike `CachedBuilder`, an `UnboundCachedBuilder` isn't bound to a particular
 * cache when it is created. It binds the default cache of the current application
 * when it builds an action.
 *
 * @param key Compute a key from the request header
 * @param caching A callback to get the number of seconds to cache results for
 */</span>
<span title="AnyRef" class="keyword">class</span> <a title="class UnboundCachedBuilder extends AnyRef" id="play.api.cache;UnboundCachedBuilder">UnboundCachedBuilder</a><a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder" class="delimiter">(</a><a title="play.api.mvc.RequestHeader =&gt; String" id="play.api.cache;UnboundCachedBuilder.key">key</a>: RequestHeader =&gt; String, <a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;UnboundCachedBuilder.caching">caching</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#play.api.cache.Cached" title="play.api.cache.Cached.type">Cached</a>._

  <span class="comment">/**
   * Compose the cache with an action
   */</span>
  <span class="keyword">def</span> <a title="(action: play.api.mvc.EssentialAction)(implicit app: play.api.Application)play.api.mvc.EssentialAction" id="play.api.cache;UnboundCachedBuilder.apply">apply</a><span class="delimiter">(</span><a title="play.api.mvc.EssentialAction" id="play.api.cache;UnboundCachedBuilder.apply.action">action</a>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="play.api.cache;UnboundCachedBuilder.apply.app">app</a>: <a href="../../../../play/play/api/Application.scala.html#play.api;Application" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a> = <a href="#play.api.cache;UnboundCachedBuilder.build" title="(action: play.api.mvc.EssentialAction)(implicit app: play.api.Application)play.api.mvc.EssentialAction">build</a><a href="#play.api.cache;UnboundCachedBuilder.apply.app" title="play.api.Application" class="delimiter">(</a><a href="#play.api.cache;UnboundCachedBuilder.apply.action" title="play.api.mvc.EssentialAction">action</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Compose the cache with an action
   */</span>
  <span class="keyword">def</span> <a title="(action: play.api.mvc.EssentialAction)(implicit app: play.api.Application)play.api.mvc.EssentialAction" id="play.api.cache;UnboundCachedBuilder.build">build</a><span class="delimiter">(</span><a title="play.api.mvc.EssentialAction" id="play.api.cache;UnboundCachedBuilder.build.action">action</a>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.api.Application" id="play.api.cache;UnboundCachedBuilder.build.app">app</a>: <a href="../../../../play/play/api/Application.scala.html#play.api;Application" title="play.api.Application">Application</a><span class="delimiter">)</span>: <a href="../../../../play/play/api/mvc/Action.scala.html#play.api.mvc;EssentialAction" title="play.api.mvc.EssentialAction">EssentialAction</a> = <span class="delimiter">{</span>
    <span title="play.api.cache.CachedBuilder" class="keyword">new</span> <a href="#play.api.cache;CachedBuilder" title="play.api.cache.CachedBuilder">CachedBuilder</a><span class="delimiter">(</span><a href="Cache.scala.html#play.api.cache.Cache" title="play.api.cache.Cache.type">Cache</a>.<a href="Cache.scala.html#play.api.cache.Cache.cacheApi" title="(implicit app: play.api.Application)play.api.cache.CacheApi">cacheApi</a>, <a href="#play.api.cache;UnboundCachedBuilder.key" title="play.api.mvc.RequestHeader =&gt; String">key</a>, <a href="#play.api.cache;UnboundCachedBuilder.caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a><span class="delimiter">)</span>.<a href="#play.api.cache;CachedBuilder.build" title="(action: play.api.mvc.EssentialAction)play.api.mvc.EssentialAction">build</a><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.build.action" title="play.api.mvc.EssentialAction">action</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result forever
   */</span>
  <span class="keyword">def</span> <a title="(status: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.includeStatus(ee2de1086d)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;UnboundCachedBuilder.includeStatus(ee2de1086d).status">status</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.includeStatus(ee2de1086d).status" title="Int">status</a>, <span title="scala.concurrent.duration.Duration.type">Duration</span>.<span title="=&gt; scala.concurrent.duration.FiniteDuration">Zero</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result for duration seconds
   *
   * @param status the status code to check
   * @param duration the number of seconds to cache the result for
   */</span>
  <span class="keyword">def</span> <a title="(status: Int, duration: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.includeStatus(efb99cd9e2)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;UnboundCachedBuilder.includeStatus(efb99cd9e2).status">status</a>: <span title="Int">Int</span>, <a title="Int" id="play.api.cache;UnboundCachedBuilder.includeStatus(efb99cd9e2).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd)" title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder">includeStatus</a><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.includeStatus(efb99cd9e2).status" title="Int">status</a>, <span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.includeStatus(efb99cd9e2).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Whether this cache should cache the specified response if the status code match
   * This method will cache the result for duration seconds
   *
   * @param status the status code to check
   * @param duration how long should we cache the result for
   */</span>
  <span class="keyword">def</span> <a title="(status: Int, duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd)">includeStatus</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd).status">status</a>: <span title="Int">Int</span>, <a title="scala.concurrent.duration.Duration" id="play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd).duration">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache;UnboundCachedBuilder.compose" title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.UnboundCachedBuilder">compose</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration] with Serializable" id="play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd);$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="play.api.mvc.ResponseHeader" id="play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd);$anonfun.isDefinedAt.e">e</a> <span class="keyword">if</span> <a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd);$anonfun.isDefinedAt.e" title="play.api.mvc.ResponseHeader">e</a>.<a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader.status" title="=&gt; Int">status</a> <span title="(x: Int)Boolean">==</span> <a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd).status" title="Int">status</a> =&gt; <span class="delimiter">{</span>
      <a href="#play.api.cache;UnboundCachedBuilder.includeStatus(21198b66cd).duration" title="scala.concurrent.duration.Duration">duration</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The returned cache will store all responses whatever they may contain
   * @param duration how long we should store responses
   */</span>
  <span class="keyword">def</span> <a title="(duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.default(077eae10c3)">default</a><span class="delimiter">(</span><a title="scala.concurrent.duration.Duration" id="play.api.cache;UnboundCachedBuilder.default(077eae10c3).duration">duration</a>: <span title="scala.concurrent.duration.Duration">Duration</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache;UnboundCachedBuilder.compose" title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.UnboundCachedBuilder">compose</a><span class="delimiter">(</span><span title="(f: play.api.mvc.ResponseHeader =&gt; scala.concurrent.duration.Duration)PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">(</span><span class="delimiter">(</span>_: <a href="../../../../play/play/api/mvc/Results.scala.html#play.api.mvc;ResponseHeader" title="play.api.mvc.ResponseHeader">ResponseHeader</a><span class="delimiter">)</span> =&gt; <a href="#play.api.cache;UnboundCachedBuilder.default(077eae10c3).duration" title="scala.concurrent.duration.Duration">duration</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * The returned cache will store all responses whatever they may contain
   * @param duration the number of seconds we should store responses
   */</span>
  <span class="keyword">def</span> <a title="(duration: Int)play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.default(d3d0d5be49)">default</a><span class="delimiter">(</span><a title="Int" id="play.api.cache;UnboundCachedBuilder.default(d3d0d5be49).duration">duration</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <a href="#play.api.cache;UnboundCachedBuilder.default(077eae10c3)" title="(duration: scala.concurrent.duration.Duration)play.api.cache.UnboundCachedBuilder">default</a><span class="delimiter">(</span><span title="(length: Long, unit: scala.concurrent.duration.TimeUnit)scala.concurrent.duration.FiniteDuration">Duration</span><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.default(d3d0d5be49).duration" title="=&gt; Long">duration</a>, <span title="java.util.concurrent.TimeUnit(SECONDS)">SECONDS</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Compose the cache with new caching function
   * @param alternative a closure getting the reponseheader and returning the duration
   *        we should cache for
   */</span>
  <span class="keyword">def</span> <a title="(alternative: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])play.api.cache.UnboundCachedBuilder" id="play.api.cache;UnboundCachedBuilder.compose">compose</a><span class="delimiter">(</span><a title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]" id="play.api.cache;UnboundCachedBuilder.compose.alternative">alternative</a>: <span title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">PartialFunction</span><span class="delimiter">[</span>ResponseHeader, Duration<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a> = <span title="play.api.cache.UnboundCachedBuilder" class="keyword">new</span> <a href="#play.api.cache;UnboundCachedBuilder" title="play.api.cache.UnboundCachedBuilder">UnboundCachedBuilder</a><span class="delimiter">(</span>
    key = <a href="#play.api.cache;UnboundCachedBuilder.key" title="play.api.mvc.RequestHeader =&gt; String">key</a>,
    caching = <a href="#play.api.cache;UnboundCachedBuilder.caching" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">caching</a>.<span title="(that: PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration])PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">orElse</span><span class="delimiter">(</span><a href="#play.api.cache;UnboundCachedBuilder.compose.alternative" title="PartialFunction[play.api.mvc.ResponseHeader,scala.concurrent.duration.Duration]">alternative</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
