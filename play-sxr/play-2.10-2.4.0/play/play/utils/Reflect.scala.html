<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>play/play/utils/Reflect.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2015 Typesafe Inc. &lt;http://www.typesafe.com&gt;
 */</span>
<span class="keyword">package</span> play.utils

<span class="keyword">import</span> play.api.<span class="delimiter">{</span> PlayConfig, Environment, PlayException <span class="delimiter">}</span>
<span class="keyword">import</span> play.api.inject.<span class="delimiter">{</span> BindingKey, Binding <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.ClassTag

<span class="keyword">object</span> <a title="play.utils.Reflect.type" id="play.utils.Reflect">Reflect</a> <a href="#play.utils.Reflect" title="play.utils.Reflect.type" class="delimiter">{</a>

  <span class="comment">/**
   * Lookup the given key from the given configuration, and provide bindings for the ScalaTrait to a class by that key.
   *
   * The end goal is to provide a binding for `ScalaTrait`.  The logic for finding the implementation goes like this:
   *
   * - If the value of the configured key is `provided`, this indicates the user will provide their own binding, so
   *   return nothing.
   * - If the value of the configured key is a class that exists, then use that
   * - If the value of the configured key is not a class that exists, fail
   * - Otherwise if no configuration value is found for key, then if there is a class found with name `defaultClassName`, use that
   * - Otherwise, use the class `Default`
   *
   * If a class has been located, convert that to a binding, by the following rules:
   *
   * - If it's a subclass of `ScalaTrait` bind it directly
   * - Otherwise, if it's a subclass of `JavaInterface`, bind that to `JavaInterface`, and then also return a binding
   *   of `JavaAdapter` to `ScalaTrait`
   * - Otherwise, fail
   *
   * @param environment The environment to load classes from
   * @param config The configuration
   * @param key The key to look up the classname from the configuration
   * @tparam ScalaTrait The trait to bind
   * @tparam JavaInterface The Java interface for Java versions of the implementation
   * @tparam JavaAdapter An adapter class that depends on `JavaInterface` and provides `ScalaTrait`
   * @tparam Default The default implementation of `ScalaTrait` if no user implementation has been provided
   * @return Zero or more bindings to provide `ScalaTrait`
   */</span>
  <span class="keyword">def</span> <a title="[ScalaTrait, JavaInterface, JavaAdapter &lt;: ScalaTrait, Default &lt;: ScalaTrait](environment: play.api.Environment, config: play.api.PlayConfig, key: String, defaultClassName: String)(implicit scalaTrait: play.utils.Reflect.SubClassOf[ScalaTrait], implicit javaInterface: play.utils.Reflect.SubClassOf[JavaInterface], implicit javaAdapter: scala.reflect.ClassTag[JavaAdapter], implicit default: scala.reflect.ClassTag[Default])Seq[play.api.inject.Binding[_]]" id="play.utils.Reflect.bindingsFromConfiguration">bindingsFromConfiguration</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.bindingsFromConfiguration;ScalaTrait">ScalaTrait</a>, <a title="" id="play.utils.Reflect.bindingsFromConfiguration;JavaInterface">JavaInterface</a>, <a title=" &lt;: ScalaTrait" id="play.utils.Reflect.bindingsFromConfiguration;JavaAdapter">JavaAdapter</a> &lt;: ScalaTrait, <a title=" &lt;: ScalaTrait" id="play.utils.Reflect.bindingsFromConfiguration;Default">Default</a> &lt;: ScalaTrait<span class="delimiter">]</span><span class="delimiter">(</span>
    <a title="play.api.Environment" id="play.utils.Reflect.bindingsFromConfiguration.environment">environment</a>: <a href="../api/Environment.scala.html#play.api;Environment" title="play.api.Environment">Environment</a>, <a title="play.api.PlayConfig" id="play.utils.Reflect.bindingsFromConfiguration.config">config</a>: <a href="../api/Configuration.scala.html#play.api;PlayConfig" title="play.api.PlayConfig">PlayConfig</a>, <a title="String" id="play.utils.Reflect.bindingsFromConfiguration.key">key</a>: <span title="String">String</span>, <a title="String" id="play.utils.Reflect.bindingsFromConfiguration.defaultClassName">defaultClassName</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.utils.Reflect.SubClassOf[ScalaTrait]" id="play.utils.Reflect.bindingsFromConfiguration.scalaTrait">scalaTrait</a>: <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[ScalaTrait]">SubClassOf</a><span class="delimiter">[</span>ScalaTrait<span class="delimiter">]</span>,
      <a title="play.utils.Reflect.SubClassOf[JavaInterface]" id="play.utils.Reflect.bindingsFromConfiguration.javaInterface">javaInterface</a>: <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[JavaInterface]">SubClassOf</a><span class="delimiter">[</span>JavaInterface<span class="delimiter">]</span>, <a title="scala.reflect.ClassTag[JavaAdapter]" id="play.utils.Reflect.bindingsFromConfiguration.javaAdapter">javaAdapter</a>: <span title="scala.reflect.ClassTag[JavaAdapter]">ClassTag</span><span class="delimiter">[</span>JavaAdapter<span class="delimiter">]</span>, <a title="scala.reflect.ClassTag[Default]" id="play.utils.Reflect.bindingsFromConfiguration.default">default</a>: <span title="scala.reflect.ClassTag[Default]">ClassTag</span><span class="delimiter">[</span>Default<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[play.api.inject.Binding[_]]">Seq</span><span class="delimiter">[</span>Binding<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="[T](implicit evidence$1: play.utils.Reflect.SubClassOf[T])play.api.inject.BindingKey[T]" id="play.utils.Reflect.bindingsFromConfiguration.bind">bind</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.bindingsFromConfiguration.bind;T">T</a>: SubClassOf<span class="delimiter">]</span>: <a href="../api/inject/Binding.scala.html#play.api.inject;BindingKey" title="play.api.inject.BindingKey[T]">BindingKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="../api/inject/Binding.scala.html#play.api.inject.BindingKey.apply(752afc307c)" title="(clazz: Class[T])play.api.inject.BindingKey[T]">BindingKey</a><span class="delimiter">(</span><span title="[T](implicit e: T)T">implicitly</span><a href="#play.utils.Reflect.bindingsFromConfiguration.bind.evidence$1" title="(implicit e: play.utils.Reflect.SubClassOf[T])play.utils.Reflect.SubClassOf[T]" class="delimiter">[</a><a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[T]">SubClassOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="#play.utils.Reflect;SubClassOf.runtimeClass" title="=&gt; Class[T]">runtimeClass</a><span class="delimiter">)</span>

    <a href="#play.utils.Reflect.configuredClass" title="[ScalaTrait, JavaInterface, Default &lt;: ScalaTrait](environment: play.api.Environment, config: play.api.PlayConfig, key: String, defaultClassName: String)(implicit scalaTrait: play.utils.Reflect.SubClassOf[ScalaTrait], implicit javaInterface: play.utils.Reflect.SubClassOf[JavaInterface], implicit default: scala.reflect.ClassTag[Default])Option[Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]]">configuredClass</a><span title="(environment: play.api.Environment, config: play.api.PlayConfig, key: String, defaultClassName: String)(implicit scalaTrait: play.utils.Reflect.SubClassOf[ScalaTrait], implicit javaInterface: play.utils.Reflect.SubClassOf[JavaInterface], implicit default: scala.reflect.ClassTag[Default])Option[Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]]" class="delimiter">[</span><a href="#play.utils.Reflect.bindingsFromConfiguration;ScalaTrait" title="ScalaTrait">ScalaTrait</a>, <a href="#play.utils.Reflect.bindingsFromConfiguration;JavaInterface" title="JavaInterface">JavaInterface</a>, <a href="#play.utils.Reflect.bindingsFromConfiguration;Default" title="Default">Default</a><span class="delimiter">]</span><a href="#play.utils.Reflect.bindingsFromConfiguration.scalaTrait" title="play.utils.Reflect.SubClassOf[ScalaTrait]" class="delimiter">(</a><a href="#play.utils.Reflect.bindingsFromConfiguration.environment" title="play.api.Environment">environment</a>, <a href="#play.utils.Reflect.bindingsFromConfiguration.config" title="play.api.PlayConfig">config</a>, <a href="#play.utils.Reflect.bindingsFromConfiguration.key" title="String">key</a>, <a href="#play.utils.Reflect.bindingsFromConfiguration.defaultClassName" title="String">defaultClassName</a><span class="delimiter">)</span> <span title="Seq[play.api.inject.Binding[_]]" class="keyword">match</span> <span class="delimiter">{</span>

      <span class="comment">// Directly implements the scala trait</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span>Left<span class="delimiter">(</span><a title="Class[_ &lt;: ScalaTrait]" id="play.utils.Reflect.bindingsFromConfiguration.direct">direct</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <span title="(elems: play.api.inject.Binding[ScalaTrait]*)Seq[play.api.inject.Binding[ScalaTrait]]">Seq</span><span class="delimiter">(</span><a href="#play.utils.Reflect.bindingsFromConfiguration.bind" title="[T](implicit evidence$1: play.utils.Reflect.SubClassOf[T])play.api.inject.BindingKey[T]">bind</a><a href="#play.utils.Reflect.bindingsFromConfiguration.scalaTrait" title="(implicit evidence$1: play.utils.Reflect.SubClassOf[ScalaTrait])play.api.inject.BindingKey[ScalaTrait]" class="delimiter">[</a><a href="#play.utils.Reflect.bindingsFromConfiguration;ScalaTrait" title="ScalaTrait">ScalaTrait</a><span class="delimiter">]</span>.<a href="../api/inject/Binding.scala.html#play.api.inject;BindingKey.to(8c85d40e9f)" title="(implementation: Class[_ &lt;: ScalaTrait])play.api.inject.Binding[ScalaTrait]">to</a><span class="delimiter">(</span><a href="#play.utils.Reflect.bindingsFromConfiguration.direct" title="Class[_ &lt;: ScalaTrait]">direct</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// Implements the java interface</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span>Right<span class="delimiter">(</span><a title="Class[_ &lt;: JavaInterface]" id="play.utils.Reflect.bindingsFromConfiguration.java">java</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <span title="(elems: play.api.inject.Binding[_ &gt;: JavaInterface with ScalaTrait]*)Seq[play.api.inject.Binding[_ &gt;: JavaInterface with ScalaTrait]]">Seq</span><span class="delimiter">(</span>
          <a href="#play.utils.Reflect.bindingsFromConfiguration.bind" title="[T](implicit evidence$1: play.utils.Reflect.SubClassOf[T])play.api.inject.BindingKey[T]">bind</a><a href="#play.utils.Reflect.bindingsFromConfiguration.scalaTrait" title="(implicit evidence$1: play.utils.Reflect.SubClassOf[ScalaTrait])play.api.inject.BindingKey[ScalaTrait]" class="delimiter">[</a><a href="#play.utils.Reflect.bindingsFromConfiguration;ScalaTrait" title="ScalaTrait">ScalaTrait</a><span class="delimiter">]</span>.<a href="../api/inject/Binding.scala.html#play.api.inject;BindingKey.to(4a488bace6)" title="[C &lt;: ScalaTrait](implicit evidence$3: scala.reflect.ClassTag[C])play.api.inject.Binding[ScalaTrait]">to</a><a href="#play.utils.Reflect.bindingsFromConfiguration.javaAdapter" title="(implicit evidence$3: scala.reflect.ClassTag[JavaAdapter])play.api.inject.Binding[ScalaTrait]" class="delimiter">[</a><a href="#play.utils.Reflect.bindingsFromConfiguration;JavaAdapter" title="JavaAdapter">JavaAdapter</a><span class="delimiter">]</span>,
          <a href="#play.utils.Reflect.bindingsFromConfiguration.bind" title="[T](implicit evidence$1: play.utils.Reflect.SubClassOf[T])play.api.inject.BindingKey[T]">bind</a><a href="#play.utils.Reflect.bindingsFromConfiguration.javaInterface" title="(implicit evidence$1: play.utils.Reflect.SubClassOf[JavaInterface])play.api.inject.BindingKey[JavaInterface]" class="delimiter">[</a><a href="#play.utils.Reflect.bindingsFromConfiguration;JavaInterface" title="JavaInterface">JavaInterface</a><span class="delimiter">]</span>.<a href="../api/inject/Binding.scala.html#play.api.inject;BindingKey.to(8c85d40e9f)" title="(implementation: Class[_ &lt;: JavaInterface])play.api.inject.Binding[JavaInterface]">to</a><span class="delimiter">(</span><a href="#play.utils.Reflect.bindingsFromConfiguration.java" title="Class[_ &lt;: JavaInterface]">java</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>

      <span class="keyword">case</span> <span title="None.type">None</span> =&gt; <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Lookup the given key from the given configuration, and load it either as an instance of ScalaTrait, or JavaInterface.
   *
   * If no user provided class can be found, then return Default.
   *
   * - If the value of the configured key is `provided`, this indicates the user will provide their own binding, so
   *   return None.
   * - If the value of the configured key is a class that exists, then use that
   * - If the value of the configured key is not a class that exists, fail
   * - Otherwise if no configuration value is found for key, then if there is a class found with name `defaultClassName`, use that
   * - Otherwise, use the class `Default`
   *
   * If a class has been located, then return Some, according to the following rules:
   *
   * - If it's a subclass of `ScalaTrait` return that as Left
   * - Otherwise, if it's a subclass of `JavaInterface`, return that as Right
   * - Otherwise, fail
   *
   * @param environment The environment to load classes from
   * @param config The configuration
   * @param key The key to look up the classname from the configuration
   * @tparam ScalaTrait The Scala trait to return
   * @tparam JavaInterface The Java interface for Java versions of the implementation
   * @tparam Default The default implementation of `ScalaTrait` if no user implementation has been provided
   */</span>
  <span class="keyword">def</span> <a title="[ScalaTrait, JavaInterface, Default &lt;: ScalaTrait](environment: play.api.Environment, config: play.api.PlayConfig, key: String, defaultClassName: String)(implicit scalaTrait: play.utils.Reflect.SubClassOf[ScalaTrait], implicit javaInterface: play.utils.Reflect.SubClassOf[JavaInterface], implicit default: scala.reflect.ClassTag[Default])Option[Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]]" id="play.utils.Reflect.configuredClass">configuredClass</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.configuredClass;ScalaTrait">ScalaTrait</a>, <a title="" id="play.utils.Reflect.configuredClass;JavaInterface">JavaInterface</a>, <a title=" &lt;: ScalaTrait" id="play.utils.Reflect.configuredClass;Default">Default</a> &lt;: ScalaTrait<span class="delimiter">]</span><span class="delimiter">(</span>
    <a title="play.api.Environment" id="play.utils.Reflect.configuredClass.environment">environment</a>: <a href="../api/Environment.scala.html#play.api;Environment" title="play.api.Environment">Environment</a>, <a title="play.api.PlayConfig" id="play.utils.Reflect.configuredClass.config">config</a>: <a href="../api/Configuration.scala.html#play.api;PlayConfig" title="play.api.PlayConfig">PlayConfig</a>, <a title="String" id="play.utils.Reflect.configuredClass.key">key</a>: <span title="String">String</span>, <a title="String" id="play.utils.Reflect.configuredClass.defaultClassName">defaultClassName</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="play.utils.Reflect.SubClassOf[ScalaTrait]" id="play.utils.Reflect.configuredClass.scalaTrait">scalaTrait</a>: <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[ScalaTrait]">SubClassOf</a><span class="delimiter">[</span>ScalaTrait<span class="delimiter">]</span>,
      <a title="play.utils.Reflect.SubClassOf[JavaInterface]" id="play.utils.Reflect.configuredClass.javaInterface">javaInterface</a>: <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[JavaInterface]">SubClassOf</a><span class="delimiter">[</span>JavaInterface<span class="delimiter">]</span>, <a title="scala.reflect.ClassTag[Default]" id="play.utils.Reflect.configuredClass.default">default</a>: <span title="scala.reflect.ClassTag[Default]">ClassTag</span><span class="delimiter">[</span>Default<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]]">Option</span><span class="delimiter">[</span>Either<span class="delimiter">[</span>Class<span class="delimiter">[</span>_ &lt;: ScalaTrait<span class="delimiter">]</span>, Class<span class="delimiter">[</span>_ &lt;: JavaInterface<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(className: String, notFoundFatal: Boolean)Option[Class[_]]" id="play.utils.Reflect.configuredClass.loadClass">loadClass</a><span class="delimiter">(</span><a title="String" id="play.utils.Reflect.configuredClass.loadClass.className">className</a>: <span title="String">String</span>, <a title="Boolean" id="play.utils.Reflect.configuredClass.loadClass.notFoundFatal">notFoundFatal</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Option[Class[_]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <span title="(x: Class[?0])Some[Class[?0]]">Some</span><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.environment" title="play.api.Environment">environment</a>.<a href="../api/Environment.scala.html#play.api;Environment.classLoader" title="=&gt; ClassLoader">classLoader</a>.<span title="(x$1: String)Class[_]">loadClass</span><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.loadClass.className" title="String">className</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="ClassNotFoundException">e</span>: <span title="ClassNotFoundException">ClassNotFoundException</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#play.utils.Reflect.configuredClass.loadClass.notFoundFatal" title="Boolean">notFoundFatal</a> =&gt; <span title="None.type">None</span>
        <span class="keyword">case</span> <span title="VirtualMachineError">e</span>: <span title="VirtualMachineError">VirtualMachineError</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="VirtualMachineError">e</span>
        <span class="keyword">case</span> <span title="ThreadDeath">e</span>: <span title="ThreadDeath">ThreadDeath</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="ThreadDeath">e</span>
        <span class="keyword">case</span> <span title="Throwable">e</span>: <span title="Throwable">Throwable</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="play.api.PlayException" class="keyword">new</span> <a href="../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException" title="play.api.PlayException">PlayException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Cannot load &quot;)">Cannot load $</span><a href="#play.utils.Reflect.configuredClass.key" title="String">key</a><span title="String(&quot;&quot;)" class="string">&quot;</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#play.utils.Reflect.configuredClass.key" title="String">key</a><span title="String(&quot; [&quot;)"> [$</span><a href="#play.utils.Reflect.configuredClass.loadClass.className" title="String">className</a><span title="String(&quot;] was not loaded.&quot;)" class="string">] was not loaded.&quot;</span>, <span title="Throwable">e</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Option[Class[_]]" id="play.utils.Reflect.configuredClass.maybeClass">maybeClass</a> = <a href="#play.utils.Reflect.configuredClass.config" title="play.api.PlayConfig">config</a>.<a href="../api/Configuration.scala.html#play.api;PlayConfig.getOptional" title="[A](path: String)(implicit evidence$1: play.api.ConfigLoader[A])Option[A]">getOptional</a><span title="(path: String)(implicit evidence$1: play.api.ConfigLoader[String])Option[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><a href="../api/Configuration.scala.html#play.api.ConfigLoader.stringLoader" title="=&gt; play.api.ConfigLoader[String]" class="delimiter">(</a><a href="#play.utils.Reflect.configuredClass.key" title="String">key</a><span class="delimiter">)</span> <span title="Option[Class[_]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="comment">// If provided, don't bind anything</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><span title="String(&quot;provided&quot;)" class="string">&quot;provided&quot;</span><span class="delimiter">)</span> =&gt; <span title="None.type">None</span>
      <span class="comment">// If empty, use the default</span>
      <span class="keyword">case</span> <span title="None.type">None</span> =&gt;
        <span class="comment">// If no value, load the default class name, but if it's not found, then fallback to the default class</span>
        <a href="#play.utils.Reflect.configuredClass.loadClass" title="(className: String, notFoundFatal: Boolean)Option[Class[_]]">loadClass</a><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.defaultClassName" title="String">defaultClassName</a>, notFoundFatal = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          .<span title="(alternative: =&gt; Option[Class[_]])Option[Class[_]]">orElse</span><span class="delimiter">(</span><span title="(x: Class[_$1])Some[Class[_$1]]">Some</span><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.default" title="scala.reflect.ClassTag[Default]">default</a>.<span title="=&gt; Class[_]">runtimeClass</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// If a value, load that class</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="play.utils.Reflect.configuredClass.maybeClass.className">className</a><span class="delimiter">)</span> =&gt; <a href="#play.utils.Reflect.configuredClass.loadClass" title="(className: String, notFoundFatal: Boolean)Option[Class[_]]">loadClass</a><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.maybeClass.className" title="String">className</a>, notFoundFatal = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#play.utils.Reflect.configuredClass.maybeClass" title="Option[Class[_]]">maybeClass</a>.<span title="(f: Class[_] =&gt; Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]])Option[Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]]">map</span> <a href="#play.utils.Reflect.configuredClass.$anonfun.x0$1" title="Either[Class[_ &lt;: ScalaTrait],Class[_ &lt;: JavaInterface]]" class="delimiter">{</a>

      <span class="comment">// Directly implements the scala trait</span>
      <span class="keyword">case</span> <a href="#play.utils.Reflect;SubClassOf.unapply" title="(clazz: Class[_])Option[Class[_ &lt;: ScalaTrait]]">scalaTrait</a><span class="delimiter">(</span><a title="Class[_ &lt;: ScalaTrait]" id="play.utils.Reflect.configuredClass.$anonfun.scalaClass">scalaClass</a><span class="delimiter">)</span> =&gt;
        <span title="(a: Class[_0])scala.util.Left[Class[_0],Nothing]">Left</span><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.$anonfun.scalaClass" title="Class[_ &lt;: ScalaTrait]">scalaClass</a><span class="delimiter">)</span>
      <span class="comment">// Implements the java interface</span>
      <span class="keyword">case</span> <a href="#play.utils.Reflect;SubClassOf.unapply" title="(clazz: Class[_])Option[Class[_ &lt;: JavaInterface]]">javaInterface</a><span class="delimiter">(</span><a title="Class[_ &lt;: JavaInterface]" id="play.utils.Reflect.configuredClass.$anonfun.java">java</a><span class="delimiter">)</span> =&gt;
        <span title="(b: Class[_0])scala.util.Right[Nothing,Class[_0]]">Right</span><span class="delimiter">(</span><a href="#play.utils.Reflect.configuredClass.$anonfun.java" title="Class[_ &lt;: JavaInterface]">java</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <a title="Class[_$4]" id="play.utils.Reflect.configuredClass.$anonfun.unknown">unknown</a> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a href="../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException.<init>(50cc897f6f)" title="(title: String, description: String)play.api.PlayException" class="keyword">new</a> <a href="../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException" title="play.api.PlayException">PlayException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Cannot load &quot;)">Cannot load $</span><a href="#play.utils.Reflect.configuredClass.key" title="String">key</a><span title="String(&quot;&quot;)" class="string">&quot;</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#play.utils.Reflect.configuredClass.key" title="String">key</a><span title="String(&quot; [&quot;)"> [$</span><span class="delimiter">{</span><a href="#play.utils.Reflect.configuredClass.$anonfun.unknown" title="Class[_$4]">unknown</a>.<span title="()Class[_]">getClass</span><span class="delimiter">}</span><span title="String(&quot;}] does not implement &quot;)">}] does not implement $</span><span class="delimiter">{</span><a href="#play.utils.Reflect.configuredClass.scalaTrait" title="play.utils.Reflect.SubClassOf[ScalaTrait]">scalaTrait</a>.<a href="#play.utils.Reflect;SubClassOf.runtimeClass" title="=&gt; Class[ScalaTrait]">runtimeClass</a><span class="delimiter">}</span><span title="String(&quot; or &quot;)"> or $</span><span class="delimiter">{</span><a href="#play.utils.Reflect.configuredClass.javaInterface" title="play.utils.Reflect.SubClassOf[JavaInterface]">javaInterface</a>.<a href="#play.utils.Reflect;SubClassOf.runtimeClass" title="=&gt; Class[JavaInterface]">runtimeClass</a><span class="delimiter">}</span><span title="String(&quot;.&quot;)" class="string">.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](fqcn: String, classLoader: ClassLoader)(implicit evidence$2: scala.reflect.ClassTag[T])T" id="play.utils.Reflect.createInstance(34ab46fb7d)">createInstance</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.createInstance(34ab46fb7d);T">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="play.utils.Reflect.createInstance(34ab46fb7d).fqcn">fqcn</a>: <span title="String">String</span>, <a title="ClassLoader" id="play.utils.Reflect.createInstance(34ab46fb7d).classLoader">classLoader</a>: <span title="ClassLoader">ClassLoader</span><span class="delimiter">)</span>: <a href="#play.utils.Reflect.createInstance(34ab46fb7d);T" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#play.utils.Reflect.createInstance(009de42d7e)" title="(clazz: Class[_])(implicit evidence$4: scala.reflect.ClassTag[T])T">createInstance</a><a href="#play.utils.Reflect.createInstance(34ab46fb7d).evidence$2" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#play.utils.Reflect.getClass(b81843ef7d)" title="(fqcn: String, classLoader: ClassLoader)(implicit evidence$3: scala.reflect.ClassTag[T])Class[_ &lt;: T]">getClass</a><a href="#play.utils.Reflect.createInstance(34ab46fb7d).evidence$2" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#play.utils.Reflect.createInstance(34ab46fb7d).fqcn" title="String">fqcn</a>, <a href="#play.utils.Reflect.createInstance(34ab46fb7d).classLoader" title="ClassLoader">classLoader</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="VirtualMachineError">e</span>: <span title="VirtualMachineError">VirtualMachineError</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="VirtualMachineError">e</span>
      <span class="keyword">case</span> <span title="ThreadDeath">e</span>: <span title="ThreadDeath">ThreadDeath</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="ThreadDeath">e</span>
      <span class="keyword">case</span> <span title="Throwable">e</span>: <span title="Throwable">Throwable</span> =&gt;
        <span class="keyword">val</span> <a title="String" id="play.utils.Reflect.createInstance(34ab46fb7d).name">name</a> = <a href="#play.utils.Reflect.simpleName" title="(clazz: Class[_])String">simpleName</a><span class="delimiter">(</span><span title="[T](implicit e: T)T">implicitly</span><a href="#play.utils.Reflect.createInstance(34ab46fb7d).evidence$2" title="(implicit e: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Class[_]">runtimeClass</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <span title="play.api.PlayException" class="keyword">new</span> <a href="../../../play-exceptions/play/api/PlayException.java.html#play.api;PlayException" title="play.api.PlayException">PlayException</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Cannot load &quot;)">Cannot load $</span><a href="#play.utils.Reflect.createInstance(34ab46fb7d).name" title="String">name</a><span title="String(&quot;&quot;)" class="string">&quot;</span>, <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#play.utils.Reflect.createInstance(34ab46fb7d).name" title="String">name</a><span title="String(&quot; [&quot;)"> [$</span><a href="#play.utils.Reflect.createInstance(34ab46fb7d).fqcn" title="String">fqcn</a><span title="String(&quot;] cannot be instantiated.&quot;)" class="string">] cannot be instantiated.&quot;</span>, <span title="Throwable">e</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](fqcn: String, classLoader: ClassLoader)(implicit evidence$3: scala.reflect.ClassTag[T])Class[_ &lt;: T]" id="play.utils.Reflect.getClass(b81843ef7d)">getClass</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.getClass(b81843ef7d);T">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="play.utils.Reflect.getClass(b81843ef7d).fqcn">fqcn</a>: <span title="String">String</span>, <a title="ClassLoader" id="play.utils.Reflect.getClass(b81843ef7d).classLoader">classLoader</a>: <span title="ClassLoader">ClassLoader</span><span class="delimiter">)</span>: <span title="Class[_ &lt;: T]">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[_ &lt;: T]" id="play.utils.Reflect.getClass(b81843ef7d).c">c</a> = <span title="Class.type">Class</span>.<span title="(x$1: String, x$2: Boolean, x$3: ClassLoader)Class[_]">forName</span><span class="delimiter">(</span><a href="#play.utils.Reflect.getClass(b81843ef7d).fqcn" title="String">fqcn</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#play.utils.Reflect.getClass(b81843ef7d).classLoader" title="ClassLoader">classLoader</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$6]" class="delimiter">[</span><span title="Class[_ &lt;: T]">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="Class[_]" id="play.utils.Reflect.getClass(b81843ef7d).t">t</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#play.utils.Reflect.getClass(b81843ef7d).evidence$3" title="(implicit e: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Class[_]">runtimeClass</span>
    <span title="Class[_$6]" class="keyword">if</span> <span class="delimiter">(</span><a href="#play.utils.Reflect.getClass(b81843ef7d).t" title="Class[_]">t</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#play.utils.Reflect.getClass(b81843ef7d).c" title="Class[_ &lt;: T]">c</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#play.utils.Reflect.getClass(b81843ef7d).c" title="Class[_ &lt;: T]">c</a>
    <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)ClassCastException" class="keyword">new</span> <span title="ClassCastException">ClassCastException</span><span class="delimiter">(</span><a href="#play.utils.Reflect.getClass(b81843ef7d).t" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">t</a> <span title="(other: String)String">+</span> <span title="String(&quot; is not assignable from &quot;)" class="string">&quot; is not assignable from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#play.utils.Reflect.getClass(b81843ef7d).c" title="Class[_ &lt;: T]">c</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](clazz: Class[_])(implicit evidence$4: scala.reflect.ClassTag[T])T" id="play.utils.Reflect.createInstance(009de42d7e)">createInstance</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.createInstance(009de42d7e);T">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[_]" id="play.utils.Reflect.createInstance(009de42d7e).clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#play.utils.Reflect.createInstance(009de42d7e);T" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Any" id="play.utils.Reflect.createInstance(009de42d7e).o">o</a> = <a href="#play.utils.Reflect.createInstance(009de42d7e).clazz" title="Class[_]">clazz</a>.<span title="()_$7">newInstance</span>
    <span class="keyword">val</span> <a title="Class[_]" id="play.utils.Reflect.createInstance(009de42d7e).t">t</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#play.utils.Reflect.createInstance(009de42d7e).evidence$4" title="(implicit e: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Class[_]">runtimeClass</span>
    <span title="T" class="keyword">if</span> <span class="delimiter">(</span><a href="#play.utils.Reflect.createInstance(009de42d7e).t" title="Class[_]">t</a>.<span title="(x$1: Any)Boolean">isInstance</span><span class="delimiter">(</span><a href="#play.utils.Reflect.createInstance(009de42d7e).o" title="Any">o</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#play.utils.Reflect.createInstance(009de42d7e).o" title="Any">o</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#play.utils.Reflect.createInstance(009de42d7e);T" title="T">T</a><span class="delimiter">]</span>
    <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)ClassCastException" class="keyword">new</span> <span title="ClassCastException">ClassCastException</span><span class="delimiter">(</span><a href="#play.utils.Reflect.createInstance(009de42d7e).clazz" title="Class[_]">clazz</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is not an instance of &quot;)" class="string">&quot; is not an instance of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#play.utils.Reflect.createInstance(009de42d7e).t" title="Class[_]">t</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(clazz: Class[_])String" id="play.utils.Reflect.simpleName">simpleName</a><span class="delimiter">(</span><a title="Class[_]" id="play.utils.Reflect.simpleName.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="play.utils.Reflect.simpleName.name">name</a> = <a href="#play.utils.Reflect.simpleName.clazz" title="Class[_]">clazz</a>.<span title="()String">getName</span>
    <a href="#play.utils.Reflect.simpleName.name" title="String">name</a>.<span title="(x$1: Int)String">substring</span><span class="delimiter">(</span><a href="#play.utils.Reflect.simpleName.name" title="String">name</a>.<span title="(x$1: Int)Int">lastIndexOf</span><span class="delimiter">(</span><span title="Int(46)" class="char">'.'</span><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class SubClassOf[T] extends AnyRef" id="play.utils.Reflect;SubClassOf">SubClassOf</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect;SubClassOf;T">T</a><span class="delimiter">]</span><a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[T]" class="delimiter">(</a><span class="keyword">val</span> <a title="Class[T]" id="play.utils.Reflect;SubClassOf.runtimeClass">runtimeClass</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(clazz: Class[_])Option[Class[_ &lt;: T]]" id="play.utils.Reflect;SubClassOf.unapply">unapply</a><span class="delimiter">(</span><a title="Class[_]" id="play.utils.Reflect;SubClassOf.unapply.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Class[_ &lt;: T]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="Option[Class[_ &lt;: T]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#play.utils.Reflect;SubClassOf.runtimeClass" title="=&gt; Class[T]">runtimeClass</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#play.utils.Reflect;SubClassOf.unapply.clazz" title="Class[_]">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(x: Class[_$11])Some[Class[_$11]]">Some</span><span class="delimiter">(</span><a href="#play.utils.Reflect;SubClassOf.unapply.clazz" title="Class[_]">clazz</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[_$11]" class="delimiter">[</span><span title="Class[_ &lt;: T]">Class</span><span class="delimiter">[</span>_ &lt;: T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <span title="None.type">None</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="play.utils.Reflect.SubClassOf.type" id="play.utils.Reflect.SubClassOf">SubClassOf</a> <a href="#play.utils.Reflect.SubClassOf" title="play.utils.Reflect.SubClassOf.type" class="delimiter">{</a>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](implicit evidence$5: scala.reflect.ClassTag[T])play.utils.Reflect.SubClassOf[T]" id="play.utils.Reflect.SubClassOf.provide">provide</a><span class="delimiter">[</span><a title="" id="play.utils.Reflect.SubClassOf.provide;T">T</a>: ClassTag<span class="delimiter">]</span>: <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[T]">SubClassOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      <span title="play.utils.Reflect.SubClassOf[T]" class="keyword">new</span> <a href="#play.utils.Reflect;SubClassOf" title="play.utils.Reflect.SubClassOf[T]">SubClassOf</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><span title="[T](implicit e: T)T">implicitly</span><a href="#play.utils.Reflect.SubClassOf.provide.evidence$5" title="(implicit e: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><span title="scala.reflect.ClassTag[T]">ClassTag</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="=&gt; Class[_]">runtimeClass</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

        </pre>
    </body>
</html>
