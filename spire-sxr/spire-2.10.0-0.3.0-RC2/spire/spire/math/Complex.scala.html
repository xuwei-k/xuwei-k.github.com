<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>spire/spire/math/Complex.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> spire.math

<span class="keyword">import</span> spire.algebra._

<span class="keyword">import</span> scala.<span class="delimiter">{</span>specialized =&gt; spec<span class="delimiter">}</span>
<span class="keyword">import</span> scala.math.<span class="delimiter">{</span>ScalaNumber, ScalaNumericConversions<span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.Math

<span class="keyword">object</span> <a title="spire.math.Complex.type" id="147204">Complex</a> <a href="#13642" title="spire.math.Complex.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91558">i</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91560">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="147096">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="147097">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#147096" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147096" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a>, <a href="#147096" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31747" title="=&gt; T">one</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91561">one</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91563">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="99141">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="99142">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#99141" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#99141" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31747" title="=&gt; T">one</a>, <a href="#99141" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91564">zero</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91566">T</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="99216">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="99217">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#99216" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#99216" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a>, <a href="#99216" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](n: Int)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91567">fromInt</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91569">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="99245">n</a>: <span title="Int">Int</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="99246">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="99247">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#99246" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#99246" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Ring.scala.html#31966" title="(n: Int)T">fromInt</a><span class="delimiter">(</span><a href="#99245" title="Int">n</a><span class="delimiter">)</span>, <a href="#99246" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.intToComplex : (n: Int)spire.math.Complex[Double]" id="91570">intToComplex</a><span class="delimiter">(</span><a title="Int" id="91599">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57920" title="spire.math.Complex[Double]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[Double]">Complex</a><span class="delimiter">(</span><a href="#91599" title="Int">n</a>.<span title="=&gt; Double">toDouble</span>, <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.longToComplex : (n: Long)spire.math.Complex[Double]" id="91571">longToComplex</a><span class="delimiter">(</span><a title="Long" id="91920">n</a>: <span title="Long">Long</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57920" title="spire.math.Complex[Double]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[Double]">Complex</a><span class="delimiter">(</span><a href="#91920" title="Long">n</a>.<span title="=&gt; Double">toDouble</span>, <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.floatToComplex : (n: Float)spire.math.Complex[Float]" id="91572">floatToComplex</a><span class="delimiter">(</span><a title="Float" id="92035">n</a>: <span title="Float">Float</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57918" title="spire.math.Complex[Float]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[Float]">Complex</a><span class="delimiter">(</span><a href="#92035" title="Float">n</a>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.doubleToComplex : (n: Double)spire.math.Complex[Double]" id="91573">doubleToComplex</a><span class="delimiter">(</span><a title="Double" id="92150">n</a>: <span title="Double">Double</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57920" title="spire.math.Complex[Double]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[Double]">Complex</a><span class="delimiter">(</span><a href="#92150" title="Double">n</a>, <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.bigIntToComplex : (n: BigInt)spire.math.Complex[scala.math.BigDecimal]" id="91574">bigIntToComplex</a><span class="delimiter">(</span><a title="BigInt" id="92265">n</a>: <span title="BigInt">BigInt</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57922" title="spire.math.Complex[scala.math.BigDecimal]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[scala.math.BigDecimal]">Complex</a><span class="delimiter">(</span><span title="(x: scala.math.BigInt)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><a href="#92265" title="BigInt">n</a><span class="delimiter">)</span>, <span title="(i: Int)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit spire.math.Complex.bigDecimalToComplex : (n: BigDecimal)spire.math.Complex[scala.math.BigDecimal]" id="91575">bigDecimalToComplex</a><span class="delimiter">(</span><a title="BigDecimal" id="92396">n</a>: <span title="BigDecimal">BigDecimal</span><span class="delimiter">)</span> = <a href="Fractional.scala.html#57922" title="spire.math.Complex[scala.math.BigDecimal]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[scala.math.BigDecimal]">Complex</a><span class="delimiter">(</span><a href="#92396" title="BigDecimal">n</a>, <span title="(i: Int)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](magnitude: T, angle: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91576">polar</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91578">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="147120">magnitude</a>: <a href="#91578" title="T">T</a>, <a title="T" id="147121">angle</a>: <a href="#91578" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="147122">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="147123">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="147126">real</a>: <a href="#91578" title="T">T</a> = <a href="#147122" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147120" title="T">magnitude</a>, <a href="#147123" title="spire.math.Trig[T]">t</a>.<a href="Trig.scala.html#55890" title="(a: T)T">cos</a><span class="delimiter">(</span><a href="#147121" title="T">angle</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147127">imag</a>: <a href="#91578" title="T">T</a> = <a href="#147122" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147120" title="T">magnitude</a>, <a href="#147123" title="spire.math.Trig[T]">t</a>.<a href="Trig.scala.html#55889" title="(a: T)T">sin</a><span class="delimiter">(</span><a href="#147121" title="T">angle</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#147122" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147126" title="T">real</a>, <a href="#147127" title="T">imag</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](real: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="91579">apply</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="91581">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="92523">real</a>: <a href="#91581" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="92524">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="92525">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#92524" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#92523" title="T">real</a>, <a href="#92524" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">final</span> case <span class="keyword">class</span> <a href="#147665" title="[T](real: T, imag: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" id="147707">Complex</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="147670">T</a><span class="delimiter">]</span><a href="#147707" title="Product" class="delimiter">(</a><a title="T" id="147665">real</a>: <a href="#147670" title="T">T</a>, <a title="T" id="147668">imag</a>: <a href="#147670" title="T">T</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[T]" id="147661">f</a>: <a href="Fractional.scala.html#13505" title="spire.math.Fractional[T]">Fractional</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="spire.math.Trig[T]" id="147662">t</a>: <a href="Trig.scala.html#14090" title="spire.math.Trig[T]">Trig</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <span title="scala.math.ScalaNumber">ScalaNumber</span> <span class="keyword">with</span> <span title="scala.math.ScalaNumericConversions">ScalaNumericConversions</span> <span class="keyword">with</span> <span title="Serializable">Serializable</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="()Double" id="55945">doubleValue</a>: <span title="Double">Double</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38902" title="(a: T)Double">toDouble</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Float" id="55946">floatValue</a>: <span title="Float">Float</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38901" title="(a: T)Float">toFloat</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Long" id="55947">longValue</a>: <span title="Long">Long</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38900" title="(a: T)Long">toLong</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()Int" id="55948">intValue</a>: <span title="Int">Int</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38899" title="(a: T)Int">toInt</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Short" id="55949">shortValue</a>: <span title="Short">Short</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38898" title="(a: T)Short">toShort</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Byte" id="55950">byteValue</a>: <span title="Byte">Byte</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38897" title="(a: T)Byte">toByte</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Boolean" id="55951">isWhole</a>: <span title="Boolean">Boolean</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32004" title="(a: T)Boolean">isWhole</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Int" id="55952">signum</a>: <span title="Int">Int</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Order.scala.html#31826" title="(x: T, y: T)Int">compare</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()(T, T)" id="55953">underlying</a>: <span title="(T, T)" class="delimiter">(</span>T, T<span class="delimiter">)</span> = <span title="(_1: T, _2: T)(T, T)" class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55954">complexSignum</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="147247">a</a> = <a href="#55963" title="=&gt; T">abs</a>
    <span title="spire.math.Complex[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147247" title="T">a</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91564" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">zero</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span> <span class="keyword">else</span> <a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55978" title="(b: spire.math.Complex[T])spire.math.Complex[T]">/</a> <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147247" title="T">a</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="55955">isValidInt</a>: <span title="Boolean">Boolean</span> =
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32004" title="(a: T)Boolean">isWhole</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Order.scala.html#31823" title="(x: T, y: T)Boolean">lteqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Ring.scala.html#31966" title="(n: Int)T">fromInt</a><span class="delimiter">(</span>Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Order.scala.html#31822" title="(x: T, y: T)Boolean">gteqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Ring.scala.html#31966" title="(n: Int)T">fromInt</a><span class="delimiter">(</span>Int.<span title="Int(-2147483648)">MinValue</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="55956">hashCode</a>: <span title="Int">Int</span> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#55955" title="=&gt; Boolean">isValidInt</a><span class="delimiter">)</span>
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Convertable.scala.html#38899" title="(a: T)Int">toInt</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
  <span class="keyword">else</span>
    <span title="Int(19)" class="int">19</span> <span title="(x: Int)Int">*</span> <a href="#147665" title="=&gt; T">real</a>.<span title="()Int">##</span> <span title="(x: Int)Int">+</span> <span title="Int(41)" class="int">41</span> <span title="(x: Int)Int">*</span> <a href="#147668" title="=&gt; T">imag</a>.<span title="()Int">##</span> <span title="(x: Int)Int">+</span> <span title="Int(97)" class="int">97</span>

  // not typesafe, so this is the best we can do :(
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="55957">equals</a><span class="delimiter">(</span><a title="Any" id="147285">that</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#147285" title="Any">that</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#212893" title="Boolean" id="212894">that</a>: Complex<span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="#147665" title="=&gt; T">real</a> <span title="(x$1: Any)Boolean">==</span> that.<a href="#147665" title="=&gt; _">real</a> <a href="#212896" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#147668" title="=&gt; T">imag</a> <span title="(x$1: Any)Boolean">==</span> that.<a href="#147668" title="=&gt; _">imag</a>
    <span class="keyword">case</span> that =&gt; <a href="#147707" title="(x: Any)Boolean">unifiedPrimitiveEquals</a><a href="#212896" title="(x: Boolean)Boolean" class="delimiter">(</a>that<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="55958">toString</a>: <span title="String">String</span> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;(%s+%si)&quot;</span> <span title="(args: Any*)String">format</span> <span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; spire.math.Gaussian[T]" id="55959">toGaussian</a>: <a href="Gaussian.scala.html#12755" title="spire.math.Gaussian[T]">Gaussian</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="Gaussian.scala.html#86374" title="(real: T, imag: T)(implicit f: spire.math.Integral[T])spire.math.Gaussian[T]">Gaussian</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[U](g: T =&gt; U)(implicit evidence$1: spire.math.Integral[U])spire.math.Gaussian[U]" id="147328">toGaussian</a><span class="delimiter">[</span>@spec<span class="delimiter">(</span>Int, Long<span class="delimiter">)</span> <a title="" id="55962">U</a>: Integral<span class="delimiter">]</span><span class="delimiter">(</span><a title="T =&gt; U" id="147327">g</a>: T =&gt; U<span class="delimiter">)</span>: <a href="Gaussian.scala.html#12755" title="spire.math.Gaussian[U]">Gaussian</a><span class="delimiter">[</span>U<span class="delimiter">]</span> =
    <a href="Gaussian.scala.html#86374" title="(real: U, imag: U)(implicit f: spire.math.Integral[U])spire.math.Gaussian[U]">Gaussian</a><a href="#147328" title="spire.math.Integral[U]" class="delimiter">(</a><a href="#147327" title="(v1: T)U">g</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#147327" title="(v1: T)U">g</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; T" id="55963">abs</a>: <a href="#147670" title="T">T</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32060" title="(a: T)T">sqrt</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; T" id="55964">arg</a>: <a href="#147670" title="T">T</a> = <a href="#147662" title="spire.math.Trig[T]">t</a>.<a href="Trig.scala.html#55895" title="(y: T, x: T)T">atan2</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; T" id="55965">norm</a>: <a href="#147670" title="T">T</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55966">conjugate</a> = <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31695" title="(x: T)T">negate</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; (T, T)" id="55967">asTuple</a>: <span title="(T, T)" class="delimiter">(</span>T, T<span class="delimiter">)</span> = <span title="(_1: T, _2: T)(T, T)" class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; (T, T)" id="55968">asPolarTuple</a>: <span title="(T, T)" class="delimiter">(</span>T, T<span class="delimiter">)</span> = <span title="(_1: T, _2: T)(T, T)" class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a>, <a href="#55964" title="=&gt; T">arg</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="55969">isZero</a>: <span title="Boolean">Boolean</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="55970">isImaginary</a>: <span title="Boolean">Boolean</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="55971">isReal</a>: <span title="Boolean">Boolean</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])Boolean" id="55972">eqv</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="147421">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147421" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147421" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])Boolean" id="55973">neqv</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="147424">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25525" title="(x: T, y: T)Boolean">neqv</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147424" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25525" title="(x: T, y: T)Boolean">neqv</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147424" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()spire.math.Complex[T]" id="55974">unary_-</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31695" title="(x: T)T">negate</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31695" title="(x: T)T">negate</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55975">+</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="99173">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#99173" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#99173" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55976">-</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="99103">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31696" title="(x: T, y: T)T">minus</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#99103" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31696" title="(x: T, y: T)T">minus</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#99103" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55977">*</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="92569">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span>
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31696" title="(x: T, y: T)T">minus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#92569" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#92569" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>,
    <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#92569" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#92569" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55978">/</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="86163">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="86166">abs_breal</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Signed.scala.html#32031" title="(a: T)T">abs</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="86167">abs_bimag</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Signed.scala.html#32031" title="(a: T)T">abs</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>

    <span title="spire.math.Complex[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Order.scala.html#31822" title="(x: T, y: T)Boolean">gteqv</a><span class="delimiter">(</span><a href="#86166" title="T">abs_breal</a>, <a href="#86167" title="T">abs_bimag</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#86166" title="T">abs_breal</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Exception" class="keyword">new</span> <span title="Exception">Exception</span><span class="delimiter">(</span><span title="String(&quot;/ by zero&quot;)" class="string">&quot;/ by zero&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="T" id="86179">ratio</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a>, <a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="T" id="86180">denom</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a>, <a href="#86179" title="T">ratio</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span>
        <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#86179" title="T">ratio</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#86180" title="T">denom</a><span class="delimiter">)</span>,
        <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31696" title="(x: T, y: T)T">minus</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#86179" title="T">ratio</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#86180" title="T">denom</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25524" title="(x: T, y: T)Boolean">eqv</a><span class="delimiter">(</span><a href="#86167" title="T">abs_bimag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Exception" class="keyword">new</span> <span title="Exception">Exception</span><span class="delimiter">(</span><span title="String(&quot;/ by zero&quot;)" class="string">&quot;/ by zero&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="T" id="86230">ratio</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a>, <a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="T" id="86231">denom</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a>, <a href="#86230" title="T">ratio</a><span class="delimiter">)</span>, <a href="#86163" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
      <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span>
        <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a>, <a href="#86230" title="T">ratio</a><span class="delimiter">)</span>, <a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>, <a href="#86231" title="T">denom</a><span class="delimiter">)</span>,
        <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31696" title="(x: T, y: T)T">minus</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a>, <a href="#86230" title="T">ratio</a><span class="delimiter">)</span>, <a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#86231" title="T">denom</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55979">/~</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="86159">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="spire.math.Complex[T]" id="86162">d</a> = <a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55978" title="(b: spire.math.Complex[T])spire.math.Complex[T]">/</a> <a href="#86159" title="spire.math.Complex[T]">b</a>
    <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#86162" title="spire.math.Complex[T]">d</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#86162" title="spire.math.Complex[T]">d</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55980">%</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="86273">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55976" title="(b: spire.math.Complex[T])spire.math.Complex[T]">-</a> <span class="delimiter">(</span><a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55979" title="(b: spire.math.Complex[T])spire.math.Complex[T]">/~</a> <a href="#86273" title="spire.math.Complex[T]">b</a><span class="delimiter">)</span> <a href="#55977" title="(b: spire.math.Complex[T])spire.math.Complex[T]">*</a> <a href="#86273" title="spire.math.Complex[T]">b</a>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])(spire.math.Complex[T], spire.math.Complex[T])" id="55981">/%</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="86282">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(spire.math.Complex[T], spire.math.Complex[T])" class="delimiter">(</span>Complex<span class="delimiter">[</span>T<span class="delimiter">]</span>, Complex<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="spire.math.Complex[T]" id="147431">q</a> = <a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55979" title="(b: spire.math.Complex[T])spire.math.Complex[T]">/~</a> <a href="#86282" title="spire.math.Complex[T]">b</a>
    <span title="(_1: spire.math.Complex[T], _2: spire.math.Complex[T])(spire.math.Complex[T], spire.math.Complex[T])" class="delimiter">(</span><a href="#147431" title="spire.math.Complex[T]">q</a>, <a href="#147707" title="Complex.this.type" class="keyword">this</a> <a href="#55976" title="(b: spire.math.Complex[T])spire.math.Complex[T]">-</a> <a href="#147431" title="spire.math.Complex[T]">q</a> <a href="#55977" title="(b: spire.math.Complex[T])spire.math.Complex[T]">*</a> <a href="#86282" title="spire.math.Complex[T]">b</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(b: Int)spire.math.Complex[T]" id="55982">**</a><span class="delimiter">(</span><a title="Int" id="147438">b</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#55983" title="(b: Int)spire.math.Complex[T]">pow</a><span class="delimiter">(</span><a href="#147438" title="Int">b</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: Int)spire.math.Complex[T]" id="55983">pow</a><span class="delimiter">(</span><a title="Int" id="99206">b</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91576" title="(magnitude: T, angle: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">polar</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32062" title="(a: T, b: T)T">fpow</a><span class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Ring.scala.html#31966" title="(n: Int)T">fromInt</a><span class="delimiter">(</span><a href="#99206" title="Int">b</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#55964" title="=&gt; T">arg</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Ring.scala.html#31966" title="(n: Int)T">fromInt</a><span class="delimiter">(</span><a href="#99206" title="Int">b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55984">**</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="147461">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#55985" title="(b: spire.math.Complex[T])spire.math.Complex[T]">pow</a><span class="delimiter">(</span><a href="#147461" title="spire.math.Complex[T]">b</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(b: spire.math.Complex[T])spire.math.Complex[T]" id="55985">pow</a><span class="delimiter">(</span><a title="spire.math.Complex[T]" id="99203">b</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span title="spire.math.Complex[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#55972" title="(b: spire.math.Complex[T])Boolean">eqv</a><span class="delimiter">(</span><a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91564" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">zero</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91561" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">one</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="spire.math.Complex[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#147707" title="Complex.this.type" class="keyword">this</a>.<a href="#55972" title="(b: spire.math.Complex[T])Boolean">eqv</a><span class="delimiter">(</span><a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91564" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">zero</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25525" title="(x: T, y: T)Boolean">neqv</a><span class="delimiter">(</span><a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Order.scala.html#31821" title="(x: T, y: T)Boolean">lt</a><span class="delimiter">(</span><a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Exception" class="keyword">new</span> <span title="Exception">Exception</span><span class="delimiter">(</span><span title="String(&quot;raising 0 to negative/complex power&quot;)" class="string">&quot;raising 0 to negative/complex power&quot;</span><span class="delimiter">)</span>
    <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91564" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">zero</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="spire.math.Complex[T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="Eq.scala.html#25525" title="(x: T, y: T)Boolean">neqv</a><span class="delimiter">(</span><a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#31692" title="=&gt; T">zero</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="T" id="147484">a</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32062" title="(a: T, b: T)T">fpow</a><span class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147485">bb</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#55964" title="=&gt; T">arg</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147486">c</a> = <a href="#147662" title="spire.math.Trig[T]">t</a>.<a href="Trig.scala.html#55888" title="(a: T)T">exp</a><span class="delimiter">(</span><a href="#147485" title="T">bb</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147487">len</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31751" title="(x: T, y: T)T">div</a><span class="delimiter">(</span><a href="#147484" title="T">a</a>, <a href="#147486" title="T">c</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147488">d</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#55964" title="=&gt; T">arg</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147489">e</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32061" title="(a: T)T">log</a><span class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147490">ff</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#147489" title="T">e</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="147491">phase</a> = <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Additive.scala.html#27891" title="(x: T, y: T)T">plus</a><span class="delimiter">(</span><a href="#147488" title="T">d</a>, <a href="#147490" title="T">ff</a><span class="delimiter">)</span>
    <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91576" title="(magnitude: T, angle: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">polar</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147487" title="T">len</a>, <a href="#147491" title="T">phase</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91576" title="(magnitude: T, angle: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">polar</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32062" title="(a: T, b: T)T">fpow</a><span class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Multiplicative.scala.html#31721" title="(x: T, y: T)T">times</a><span class="delimiter">(</span><a href="#55964" title="=&gt; T">arg</a>, <a href="#99203" title="spire.math.Complex[T]">b</a>.<a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // we are going with the &quot;principal value&quot; definition of Log.
  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55986">log</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#147707" title="Complex.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#147204" title="spire.math.Complex.type">Complex</a>.<a href="#91564" title="[T](implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">zero</a><a href="#147661" title="(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]" class="delimiter">[</a><a href="#147670" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span> sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;log undefined at 0&quot;)" class="string">&quot;log undefined at 0&quot;</span><span class="delimiter">)</span>
    <a href="#147661" title="spire.math.Complex[T]" class="keyword">new</a> <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">(</span><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/NRoot.scala.html#32061" title="(a: T)T">log</a><span class="delimiter">(</span><a href="#55963" title="=&gt; T">abs</a><span class="delimiter">)</span>, <a href="#55964" title="=&gt; T">arg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55987">floor</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#147707" title="(real: T, imag: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">Complex</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32002" title="(a: T)T">floor</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32002" title="(a: T)T">floor</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55988">ceil</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#147707" title="(real: T, imag: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">Complex</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32001" title="(a: T)T">ceil</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32001" title="(a: T)T">ceil</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; spire.math.Complex[T]" id="55989">round</a>: <a href="#147707" title="spire.math.Complex[T]">Complex</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#147707" title="(real: T, imag: T)(implicit f: spire.math.Fractional[T], implicit t: spire.math.Trig[T])spire.math.Complex[T]">Complex</a><a href="#147661" title="spire.math.Fractional[T]" class="delimiter">(</a><a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147665" title="=&gt; T">real</a><span class="delimiter">)</span>, <a href="#147661" title="spire.math.Fractional[T]">f</a>.<a href="../algebra/Field.scala.html#32003" title="(a: T)T">round</a><span class="delimiter">(</span><a href="#147668" title="=&gt; T">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>


<span class="keyword">object</span> <a title="spire.math.FloatComplex.type" id="13074">FloatComplex</a> <a href="#13075" title="spire.math.FloatComplex.type" class="delimiter">{</a>
  <span class="keyword">import</span> <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<span class="delimiter">{</span>encode<span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(real: Float, imag: Float)spire.math.FloatComplex" id="147713">apply</a><span class="delimiter">(</span><a title="Float" id="147783">real</a>: <span title="Float">Float</span>, <a title="Float" id="147784">imag</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a> =
    <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147783" title="Float">real</a>, <a href="#147784" title="Float">imag</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(real: Double, imag: Double)spire.math.FloatComplex" id="147714">apply</a><span class="delimiter">(</span><a title="Double" id="147787">real</a>: <span title="Double">Double</span>, <a title="Double" id="147788">imag</a>: <span title="Double">Double</span><span class="delimiter">)</span> =
    <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147787" title="Double">real</a>.<span title="=&gt; Float">toFloat</span>, <a href="#147788" title="Double">imag</a>.<span title="=&gt; Float">toFloat</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(magnitude: Float, angle: Float)spire.math.FloatComplex" id="147715">polar</a><span class="delimiter">(</span><a title="Float" id="147789">magnitude</a>: <span title="Float">Float</span>, <a title="Float" id="147790">angle</a>: <span title="Float">Float</span><span class="delimiter">)</span> =
    <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147765" title="(magnitude: Float, angle: Float)Long">polar</a><span class="delimiter">(</span><a href="#147789" title="Float">magnitude</a>, <a href="#147790" title="Float">angle</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">val</span> <a title="spire.math.FloatComplex" id="147716">i</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><span title="Long(4575657221408423936L)" class="long">4575657221408423936L</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="spire.math.FloatComplex" id="147718">one</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><span title="Long(1065353216L)" class="long">1065353216L</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="spire.math.FloatComplex" id="147720">zero</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

/**
 * Value class which encodes two floating point values in a Long.
 *
 * We get (basically) unboxed complex numbers using this hack.
 * The underlying implementation lives in the FastComplex object.
 */
<span title="Object" class="keyword">class</span> <a href="#147748" title="class FloatComplex extends AnyVal" id="147872">FloatComplex</a><a href="#147872" title="spire.math.FloatComplex" class="delimiter">(</a><span class="keyword">val</span> <a title="Long" id="147748">u</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="AnyVal">AnyVal</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()String" id="147726">toString</a>: <span title="String">String</span> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;(%s+%si)&quot;</span> <span title="(args: Any*)String">format</span> <span class="delimiter">(</span><a href="#147727" title="=&gt; Float">real</a>, <a href="#147728" title="=&gt; Float">imag</a><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Float" id="147727">real</a>: <span title="Float">Float</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Float" id="147728">imag</a>: <span title="Float">Float</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; String" id="147729">repr</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;FloatComplex(%s, %s)&quot;</span> <span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#147727" title="=&gt; Float">real</a>, <a href="#147728" title="=&gt; Float">imag</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Float" id="147730">abs</a>: <span title="Float">Float</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147768" title="(d: Long)Float">abs</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Float" id="147731">angle</a>: <span title="Float">Float</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147769" title="(d: Long)Float">angle</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; spire.math.FloatComplex" id="147732">conjugate</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147770" title="(d: Long)Long">conjugate</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="147733">isWhole</a>: <span title="Boolean">Boolean</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147771" title="(d: Long)Boolean">isWhole</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Int" id="147734">signum</a>: <span title="Int">Int</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147772" title="(d: Long)Int">signum</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; spire.math.FloatComplex" id="147735">complexSignum</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147773" title="(d: Long)Long">complexSignum</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; spire.math.FloatComplex" id="147736">negate</a> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147774" title="(a: Long)Long">negate</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147737">+</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147810">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147775" title="(a: Long, b: Long)Long">add</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147810" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147738">-</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147813">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147776" title="(a: Long, b: Long)Long">subtract</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147813" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147739">*</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147816">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147777" title="(a: Long, b: Long)Long">multiply</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147816" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147740">/</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147819">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147778" title="(a: Long, b: Long)Long">divide</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147819" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147741">/~</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147822">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147779" title="(a: Long, b: Long)Long">quot</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147822" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147742">%</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147825">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147780" title="(a: Long, b: Long)Long">mod</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147825" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)(spire.math.FloatComplex, spire.math.FloatComplex)" id="147743">/%</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147828">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147781" title="(a: Long, b: Long)(Long, Long)">quotmod</a><a href="#212909" title="(spire.math.FloatComplex, spire.math.FloatComplex)" class="delimiter">(</a><a href="#147748" title="=&gt; Long">u</a>, <a href="#147828" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span class="delimiter">(</span><a href="#212909" title="Long" id="147833">q</a>, <a href="#212909" title="Long" id="147834">m</a><span class="delimiter">)</span> =&gt; <a href="#212911" title="(x: (spire.math.FloatComplex, spire.math.FloatComplex))(spire.math.FloatComplex, spire.math.FloatComplex)" class="delimiter">(</a><span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#147833" title="Long">q</a><span class="delimiter">)</span>, <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#147834" title="Long">m</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147744">pow</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147841">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147782" title="(a: Long, b: Long)Long">pow</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147841" title="spire.math.FloatComplex">b</a>.<a href="#147748" title="=&gt; Long">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: spire.math.FloatComplex)spire.math.FloatComplex" id="147745">**</a><span class="delimiter">(</span><a title="spire.math.FloatComplex" id="147844">b</a>: <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">)</span> = <a href="#147744" title="(b: spire.math.FloatComplex)spire.math.FloatComplex">pow</a><span class="delimiter">(</span><a href="#147844" title="spire.math.FloatComplex">b</a><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: Int)spire.math.FloatComplex" id="147746">pow</a><span class="delimiter">(</span><a title="Int" id="147849">b</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span title="spire.math.FloatComplex" class="keyword">new</span> <a href="#147872" title="spire.math.FloatComplex">FloatComplex</a><span class="delimiter">(</span><a href="#15300" title="spire.math.FastComplex.type">FastComplex</a>.<a href="#147782" title="(a: Long, b: Long)Long">pow</a><span class="delimiter">(</span><a href="#147748" title="=&gt; Long">u</a>, <a href="#147752" title="(real: Float, imag: Float)Long">FastComplex</a><span class="delimiter">(</span><a href="#147849" title="Int">b</a>.<span title="=&gt; Float">toFloat</span>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(b: Int)spire.math.FloatComplex" id="147747">**</a><span class="delimiter">(</span><a title="Int" id="147864">b</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <a href="#147746" title="(b: Int)spire.math.FloatComplex">pow</a><span class="delimiter">(</span><a href="#147864" title="Int">b</a><span class="delimiter">)</span>
<span class="delimiter">}</span>


/**
 * FastComplex is an ugly, beautiful hack.
 *
 * The basic idea is to encode two 32-bit Floats into a single 64-bit Long.
 * The lower-32 bits are the &quot;real&quot; Float and the upper-32 are the &quot;imaginary&quot;
 * Float.
 *
 * Since we're overloading the meaning of Long, all the operations have to be
 * defined on the FastComplex object, meaning the syntax for using this is a
 * bit ugly. To add to the ugly beauty of the whole thing I could imagine
 * defining implicit operators on Long like +@, -@, *@, /@, etc.
 *
 * You might wonder why it's even worth doing this. The answer is that when
 * you need to allocate an array of e.g. 10-20 million complex numbers, the GC
 * overhead of using *any* object is HUGE. Since we can't build our own
 * &quot;pass-by-value&quot; types on the JVM we are stuck doing an encoding like this.
 *
 * Here are some profiling numbers for summing an array of complex numbers,
 * timed against a concrete case class implementation using Float (in ms):
 *
 *  size | encoded |  class
 *    1M |     5.1 |    5.8
 *    5M |    28.5 |   91.7
 *   10M |    67.7 |  828.1
 *   20M |   228.0 | 2687.0
 *
 * Not bad, eh?
 */
<span class="keyword">object</span> <a title="spire.math.FastComplex.type" id="15300">FastComplex</a> <a href="#15301" title="spire.math.FastComplex.type" class="delimiter">{</a>
  <span class="keyword">import</span> java.lang.<span title="Math.type">Math</span>.<span class="delimiter">{</span>atan2, cos, sin, sqrt<span class="delimiter">}</span>

  // note the superstitious use of @inline and final everywhere

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(real: Float, imag: Float)Long" id="147752">apply</a><span class="delimiter">(</span><a title="Float" id="147854">real</a>: <span title="Float">Float</span>, <a title="Float" id="147855">imag</a>: <span title="Float">Float</span><span class="delimiter">)</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147854" title="Float">real</a>, <a href="#147855" title="Float">imag</a><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(real: Double, imag: Double)Long" id="147753">apply</a><span class="delimiter">(</span><a title="Double" id="147852">real</a>: <span title="Double">Double</span>, <a title="Double" id="147853">imag</a>: <span title="Double">Double</span><span class="delimiter">)</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147852" title="Double">real</a>.<span title="=&gt; Float">toFloat</span>, <a href="#147853" title="Double">imag</a>.<span title="=&gt; Float">toFloat</span><span class="delimiter">)</span>

  // encode a float as some bits
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(n: Float)Int" id="147754">bits</a><span class="delimiter">(</span><a title="Float" id="147881">n</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <span title="Int">Int</span> = java.lang.<span title="Float.type">Float</span>.<span title="(x$1: Float)Int">floatToRawIntBits</span><span class="delimiter">(</span><a href="#147881" title="Float">n</a><span class="delimiter">)</span>

  // decode some bits into a float
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(n: Int)Float" id="147755">bits</a><span class="delimiter">(</span><a title="Int" id="147882">n</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Float">Float</span> = java.lang.<span title="Float.type">Float</span>.<span title="(x$1: Int)Float">intBitsToFloat</span><span class="delimiter">(</span><a href="#147882" title="Int">n</a><span class="delimiter">)</span>

  // get the real part of the complex number
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Float" id="147756">real</a><span class="delimiter">(</span><a title="Long" id="147798">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Float">Float</span> = <a href="#147755" title="(n: Int)Float">bits</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#147798" title="Long">d</a> <span title="(x: Int)Long">&amp;</span> <span title="Int(-1)" class="int">0xffffffff</span><span class="delimiter">)</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>

  // get the imaginary part of the complex number
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Float" id="147757">imag</a><span class="delimiter">(</span><a title="Long" id="147799">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Float">Float</span> = <a href="#147755" title="(n: Int)Float">bits</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#147799" title="Long">d</a> <span title="(x: Int)Long">&gt;&gt;</span> <span title="Int(32)" class="int">32</span><span class="delimiter">)</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>

  // define some handy constants
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Long" id="147758">i</a> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="Float(0.0)" class="float">0.0F</span>, <span title="Float(1.0)" class="float">1.0F</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Long" id="147760">one</a> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="Float(1.0)" class="float">1.0F</span>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Long" id="147762">zero</a> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="Float(0.0)" class="float">0.0F</span>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>

  // encode two floats representing a complex number
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(real: Float, imag: Float)Long" id="147764">encode</a><span class="delimiter">(</span><a title="Float" id="147785">real</a>: <span title="Float">Float</span>, <a title="Float" id="147786">imag</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><a href="#147754" title="(n: Float)Int">bits</a><span class="delimiter">(</span><a href="#147786" title="Float">imag</a><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span> <span title="(x: Int)Long">&lt;&lt;</span> <span title="Int(32)" class="int">32</span><span class="delimiter">)</span> <span title="(x: Long)Long">+</span> <a href="#147754" title="(n: Float)Int">bits</a><span class="delimiter">(</span><a href="#147785" title="Float">real</a><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>
  <span class="delimiter">}</span>

  // encode two floats representing a complex number in polar form
  @inline <span class="keyword">final</span> <span class="keyword">def</span> <a title="(magnitude: Float, angle: Float)Long" id="147765">polar</a><span class="delimiter">(</span><a title="Float" id="147791">magnitude</a>: <span title="Float">Float</span>, <a title="Float" id="147792">angle</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147791" title="Float">magnitude</a> <span title="(x: Float)Float">*</span> <span title="(x$1: Double)Double">cos</span><span class="delimiter">(</span><a href="#147792" title="=&gt; Double">angle</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>, <a href="#147791" title="Float">magnitude</a> <span title="(x: Float)Float">*</span> <span title="(x$1: Double)Double">sin</span><span class="delimiter">(</span><a href="#147792" title="=&gt; Double">angle</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // decode should be avoided in fast code because it allocates a Tuple2.
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)(Float, Float)" id="147766">decode</a><span class="delimiter">(</span><a title="Long" id="147933">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="(Float, Float)" class="delimiter">(</span>Float, Float<span class="delimiter">)</span> = <span title="(_1: Float, _2: Float)(Float, Float)" class="delimiter">(</span><a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147933" title="Long">d</a><span class="delimiter">)</span>, <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147933" title="Long">d</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // produces a string representation of the Long/(Float,Float)
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)String" id="147767">toRepr</a><span class="delimiter">(</span><a title="Long" id="147940">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="String">String</span> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;FastComplex(%s -&gt; %s)&quot;</span> <span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#147940" title="Long">d</a>, <a href="#147766" title="(d: Long)(Float, Float)">decode</a><span class="delimiter">(</span><a href="#147940" title="Long">d</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // get the magnitude/absolute value
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Float" id="147768">abs</a><span class="delimiter">(</span><a title="Long" id="147803">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Float">Float</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="147944">re</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147803" title="Long">d</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="147945">im</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147803" title="Long">d</a><span class="delimiter">)</span>
    <span title="(x$1: Double)Double">sqrt</span><span class="delimiter">(</span><a href="#147944" title="Float">re</a> <span title="(x: Float)Float">*</span> <a href="#147944" title="Float">re</a> <span title="=&gt; Double">+</span> <a href="#147945" title="Float">im</a> <span title="(x: Float)Float">*</span> <a href="#147945" title="Float">im</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
  <span class="delimiter">}</span>

  // get the angle/argument
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Float" id="147769">angle</a><span class="delimiter">(</span><a title="Long" id="147804">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Float">Float</span> = <span title="(x$1: Double, x$2: Double)Double">atan2</span><span class="delimiter">(</span><a href="#147757" title="(d: Long)Float">imag</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147804" title="Long">d</a><span class="delimiter">)</span>, <a href="#147756" title="(d: Long)Float">real</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147804" title="Long">d</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>

  // get the complex conjugate
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Long" id="147770">conjugate</a><span class="delimiter">(</span><a title="Long" id="147805">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147805" title="Long">d</a><span class="delimiter">)</span>, <span title="=&gt; Float">-</span><a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147805" title="Long">d</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // see if the complex number is a whole value
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Boolean" id="147771">isWhole</a><span class="delimiter">(</span><a title="Long" id="147806">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147806" title="Long">d</a><span class="delimiter">)</span> <span title="(x: Float)Float">%</span> <span title="Float(1.0)" class="float">1.0F</span> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0F</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147806" title="Long">d</a><span class="delimiter">)</span> <span title="(x: Float)Float">%</span> <span title="Float(1.0)" class="float">1.0F</span> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0F</span>

  // get the sign of the complex number
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Int" id="147772">signum</a><span class="delimiter">(</span><a title="Long" id="147807">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#147756" title="(d: Long)Float">real</a><span title="implicit scala.LowPriorityImplicits.floatWrapper : (x: Float)scala.runtime.RichFloat" class="delimiter">(</span><a href="#147807" title="Long">d</a><span class="delimiter">)</span> <span title="(y: Float)Int">compare</span> <span title="Float(0.0)" class="float">0.0F</span>

  // get the complex sign of the complex number
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(d: Long)Long" id="147773">complexSignum</a><span class="delimiter">(</span><a title="Long" id="147808">d</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="148008">m</a> = <a href="#147768" title="(d: Long)Float">abs</a><span class="delimiter">(</span><a href="#147808" title="Long">d</a><span class="delimiter">)</span>
    <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#148008" title="Float">m</a> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span> <a href="#147762" title="=&gt; Long">zero</a> <span class="keyword">else</span> <a href="#147778" title="(a: Long, b: Long)Long">divide</a><span class="delimiter">(</span><a href="#147808" title="Long">d</a>, <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#148008" title="Float">m</a>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // negation
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long)Long" id="147774">negate</a><span class="delimiter">(</span><a title="Long" id="147809">a</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="=&gt; Float">-</span><a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147809" title="Long">a</a><span class="delimiter">)</span>, <span title="=&gt; Float">-</span><a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147809" title="Long">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // addition
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147775">add</a><span class="delimiter">(</span><a title="Long" id="147811">a</a>: <span title="Long">Long</span>, <a title="Long" id="147812">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147811" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">+</span> <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147812" title="Long">b</a><span class="delimiter">)</span>, <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147811" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">+</span> <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147812" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // subtraction
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147776">subtract</a><span class="delimiter">(</span><a title="Long" id="147814">a</a>: <span title="Long">Long</span>, <a title="Long" id="147815">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147814" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">-</span> <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147815" title="Long">b</a><span class="delimiter">)</span>, <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147814" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">-</span> <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147815" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span>

  // multiplication
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147777">multiply</a><span class="delimiter">(</span><a title="Long" id="147817">a</a>: <span title="Long">Long</span>, <a title="Long" id="147818">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="148029">re_a</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147817" title="Long">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148030">im_a</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147817" title="Long">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148031">re_b</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147818" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148032">im_b</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147818" title="Long">b</a><span class="delimiter">)</span>
    <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><a href="#148029" title="Float">re_a</a> <span title="(x: Float)Float">*</span> <a href="#148031" title="Float">re_b</a> <span title="(x: Float)Float">-</span> <a href="#148030" title="Float">im_a</a> <span title="(x: Float)Float">*</span> <a href="#148032" title="Float">im_b</a>, <a href="#148030" title="Float">im_a</a> <span title="(x: Float)Float">*</span> <a href="#148031" title="Float">re_b</a> <span title="(x: Float)Float">+</span> <a href="#148029" title="Float">re_a</a> <span title="(x: Float)Float">*</span> <a href="#148032" title="Float">im_b</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // division
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147778">divide</a><span class="delimiter">(</span><a title="Long" id="147820">a</a>: <span title="Long">Long</span>, <a title="Long" id="147821">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="148057">re_a</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147820" title="Long">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148058">im_a</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147820" title="Long">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148059">re_b</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147821" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148060">im_b</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147821" title="Long">b</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Float" id="148061">abs_re_b</a> = math.<span title="(x: Float)Float">abs</span><span class="delimiter">(</span><a href="#148059" title="Float">re_b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148062">abs_im_b</a> = math.<span title="(x: Float)Float">abs</span><span class="delimiter">(</span><a href="#148060" title="Float">im_b</a><span class="delimiter">)</span>

    <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#148061" title="Float">abs_re_b</a> <span title="(x: Float)Boolean">&gt;=</span> <a href="#148062" title="Float">abs_im_b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#148061" title="Float">abs_re_b</a> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span> sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;/0&quot;)" class="string">&quot;/0&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Float" id="148075">ratio</a> = <a href="#148060" title="Float">im_b</a> <span title="(x: Float)Float">/</span> <a href="#148059" title="Float">re_b</a>
      <span class="keyword">val</span> <a title="Float" id="148076">denom</a> = <a href="#148059" title="Float">re_b</a> <span title="(x: Float)Float">+</span> <a href="#148060" title="Float">im_b</a> <span title="(x: Float)Float">*</span> <a href="#148075" title="Float">ratio</a>
      <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#148057" title="Float">re_a</a> <span title="(x: Float)Float">+</span> <a href="#148058" title="Float">im_a</a> <span title="(x: Float)Float">*</span> <a href="#148075" title="Float">ratio</a><span class="delimiter">)</span> <span title="(x: Float)Float">/</span> <a href="#148076" title="Float">denom</a>, <span class="delimiter">(</span><a href="#148058" title="Float">im_a</a> <span title="(x: Float)Float">-</span> <a href="#148057" title="Float">re_a</a> <span title="(x: Float)Float">*</span> <a href="#148075" title="Float">ratio</a><span class="delimiter">)</span> <span title="(x: Float)Float">/</span> <a href="#148076" title="Float">denom</a><span class="delimiter">)</span>

    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#148062" title="Float">abs_im_b</a> <span title="(x: Float)Boolean">==</span> <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span> sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="String(&quot;/0&quot;)" class="string">&quot;/0&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Float" id="148117">ratio</a> = <a href="#148059" title="Float">re_b</a> <span title="(x: Float)Float">/</span> <a href="#148060" title="Float">im_b</a>
      <span class="keyword">val</span> <a title="Float" id="148118">denom</a> = <a href="#148059" title="Float">re_b</a> <span title="(x: Float)Float">*</span> <a href="#148117" title="Float">ratio</a> <span title="(x: Float)Float">+</span> <a href="#148060" title="Float">im_b</a>
      <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#148057" title="Float">re_a</a> <span title="(x: Float)Float">*</span> <a href="#148117" title="Float">ratio</a> <span title="(x: Float)Float">+</span> <a href="#148058" title="Float">im_a</a><span class="delimiter">)</span> <span title="(x: Float)Float">/</span> <a href="#148118" title="Float">denom</a>, <span class="delimiter">(</span><a href="#148058" title="Float">im_a</a> <span title="(x: Float)Float">*</span> <a href="#148117" title="Float">ratio</a> <span title="(x: Float)Float">-</span> <a href="#148057" title="Float">re_a</a><span class="delimiter">)</span> <span title="(x: Float)Float">/</span> <a href="#148118" title="Float">denom</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147779">quot</a><span class="delimiter">(</span><a title="Long" id="147823">a</a>: <span title="Long">Long</span>, <a title="Long" id="147824">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> =
    <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="Math.type">Math</span>.<span title="(x$1: Double)Double">floor</span><span class="delimiter">(</span><a href="#147756" title="(d: Long)Float">real</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147778" title="(a: Long, b: Long)Long">divide</a><span class="delimiter">(</span><a href="#147823" title="Long">a</a>, <a href="#147824" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147780">mod</a><span class="delimiter">(</span><a title="Long" id="147826">a</a>: <span title="Long">Long</span>, <a title="Long" id="147827">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#147776" title="(a: Long, b: Long)Long">subtract</a><span class="delimiter">(</span><a href="#147826" title="Long">a</a>, <a href="#147777" title="(a: Long, b: Long)Long">multiply</a><span class="delimiter">(</span><a href="#147827" title="Long">b</a>, <a href="#147779" title="(a: Long, b: Long)Long">quot</a><span class="delimiter">(</span><a href="#147826" title="Long">a</a>, <a href="#147827" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)(Long, Long)" id="147781">quotmod</a><span class="delimiter">(</span><a title="Long" id="147829">a</a>: <span title="Long">Long</span>, <a title="Long" id="147830">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="(Long, Long)" class="delimiter">(</span>Long, Long<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="148159">q</a> = <a href="#147779" title="(a: Long, b: Long)Long">quot</a><span class="delimiter">(</span><a href="#147829" title="Long">a</a>, <a href="#147830" title="Long">b</a><span class="delimiter">)</span>
    <span title="(_1: Long, _2: Long)(Long, Long)" class="delimiter">(</span><a href="#148159" title="Long">q</a>, <a href="#147776" title="(a: Long, b: Long)Long">subtract</a><span class="delimiter">(</span><a href="#147829" title="Long">a</a>, <a href="#147777" title="(a: Long, b: Long)Long">multiply</a><span class="delimiter">(</span><a href="#147830" title="Long">b</a>, <a href="#147779" title="(a: Long, b: Long)Long">quot</a><span class="delimiter">(</span><a href="#147829" title="Long">a</a>, <a href="#147830" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // exponentiation
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Long, b: Long)Long" id="147782">pow</a><span class="delimiter">(</span><a title="Long" id="147842">a</a>: <span title="Long">Long</span>, <a title="Long" id="147843">b</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#147843" title="Long">b</a> <span title="(x: Long)Boolean">==</span> <a href="#147762" title="=&gt; Long">zero</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#147764" title="(real: Float, imag: Float)Long">encode</a><span class="delimiter">(</span><span title="Float(1.0)" class="float">1.0F</span>, <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>

  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#147842" title="Long">a</a> <span title="(x: Long)Boolean">==</span> <a href="#147762" title="=&gt; Long">zero</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span> <span title="(x: Float)Boolean">!=</span> <span title="Float(0.0)" class="float">0.0F</span> <span title="(x: Boolean)Boolean">||</span> <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span> <span title="(x: Float)Boolean">&lt;</span> <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Exception" class="keyword">new</span> <span title="Exception">Exception</span><span class="delimiter">(</span><span title="String(&quot;raising 0 to negative/complex power&quot;)" class="string">&quot;raising 0 to negative/complex power&quot;</span><span class="delimiter">)</span>
    <a href="#147762" title="=&gt; Long">zero</a>

  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span> <span title="(x: Float)Boolean">!=</span> <span title="Float(0.0)" class="float">0.0F</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="148193">im_b</a> = <a href="#147757" title="(d: Long)Float">imag</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148194">re_b</a> = <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Float" id="148195">len</a> = <span class="delimiter">(</span>math.<span title="(x: Double, y: Double)Double">pow</span><span class="delimiter">(</span><a href="#147768" title="(d: Long)Float">abs</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span>, <a href="#148194" title="=&gt; Double">re_b</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> <a href="../package.scala.html#16996" title="(n: Double)Double">exp</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#147769" title="(d: Long)Float">angle</a><span class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span> <span title="=&gt; Double">*</span> <a href="#148193" title="Float">im_b</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
    <span class="keyword">val</span> <a title="Float" id="148196">phase</a> = <span class="delimiter">(</span><a href="#147769" title="(d: Long)Float">angle</a><span class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">*</span> <a href="#148194" title="Float">re_b</a> <span title="(x: Double)Double">+</span> <a href="../package.scala.html#16993" title="(n: Double)Double">log</a><span class="delimiter">(</span><a href="#147768" title="(d: Long)Float">abs</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Float)Double">*</span> <a href="#148193" title="Float">im_b</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
    <a href="#147765" title="(magnitude: Float, angle: Float)Long">polar</a><span class="delimiter">(</span><a href="#148195" title="Float">len</a>, <a href="#148196" title="Float">phase</a><span class="delimiter">)</span>

  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Float" id="148225">len</a> = math.<span title="(x: Double, y: Double)Double">pow</span><span class="delimiter">(</span><a href="#147768" title="(d: Long)Float">abs</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span>, <a href="#147756" title="(d: Long)Float">real</a><span title="=&gt; Double" class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
    <span class="keyword">val</span> <a title="Float" id="148226">phase</a> = <span class="delimiter">(</span><a href="#147769" title="(d: Long)Float">angle</a><span class="delimiter">(</span><a href="#147842" title="Long">a</a><span class="delimiter">)</span> <span title="(x: Float)Float">*</span> <a href="#147756" title="(d: Long)Float">real</a><span class="delimiter">(</span><a href="#147843" title="Long">b</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
    <a href="#147765" title="(magnitude: Float, angle: Float)Long">polar</a><span class="delimiter">(</span><a href="#148225" title="Float">len</a>, <a href="#148226" title="Float">phase</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>