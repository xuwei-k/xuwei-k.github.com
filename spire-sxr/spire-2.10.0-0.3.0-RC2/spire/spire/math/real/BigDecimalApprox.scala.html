<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>spire/spire/math/real/BigDecimalApprox.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> spire.math.real

<span class="keyword">import</span> spire.algebra._
<span class="keyword">import</span> spire.<a href="../../package.scala.html#7310" title="spire.implicits.type">implicits</a>._
<span class="keyword">import</span> spire.math._

<span class="keyword">import</span> java.math.MathContext

<span class="keyword">trait</span> <a title="trait BigDecimalApprox[A &lt;: spire.math.real.BigDecimalApprox[A]] extends scala.math.ScalaNumber with spire.math.real.RealLike[A] with spire.math.real.SeparationBound[A]" id="16616">BigDecimalApprox</a><span class="delimiter">[</span><a title=" &lt;: spire.math.real.BigDecimalApprox[A]" id="16753">A</a> &lt;: BigDecimalApprox<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>
<span title="Unit" class="keyword">extends</span> <a href="RealLike.scala.html#16589" title="spire.math.real.RealLike[A]">RealLike</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="keyword">with</span> <a href="SeparationBound.scala.html#16682" title="spire.math.real.SeparationBound[A]">SeparationBound</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
  self: A =&gt;
  <span class="keyword">import</span> <a href="BigDecimalApproximations.scala.html#16560" title="spire.math.real.BigDecimalApproximations.type">BigDecimalApproximations</a>._

  <span class="keyword">def</span> <a title="=&gt; spire.algebra.Sign" id="58099">sign</a>: <a href="../../algebra/Sign.scala.html#8717" title="spire.algebra.Sign">Sign</a> = <a href="#16616" title="A" class="keyword">this</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186706" title="Option[Int]" id="214697">IntLit</a><span class="delimiter">(</span><a title="Int" id="187235">n</a><span class="delimiter">)</span> =&gt; <a href="../../algebra/Sign.scala.html#99631" title="implicit spire.algebra.Sign.apply : (i: Int)spire.algebra.Sign">Sign</a><a href="#214693" title="(x: spire.algebra.Sign)spire.algebra.Sign" class="delimiter">(</a><a href="#187235" title="Int">n</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186730" title="Option[BigInt]" id="214699">BigIntLit</a><span class="delimiter">(</span><a title="BigInt" id="187249">n</a><span class="delimiter">)</span> =&gt; <a href="../../algebra/Sign.scala.html#99631" title="implicit spire.algebra.Sign.apply : (i: Int)spire.algebra.Sign">Sign</a><a href="#214693" title="(x: spire.algebra.Sign)spire.algebra.Sign" class="delimiter">(</a><a href="#187249" title="BigInt">n</a>.<span title="=&gt; Int">signum</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186904" title="Option[A]" id="214701">Neg</a><span class="delimiter">(</span><a title="A" id="187263">n</a><span class="delimiter">)</span> =&gt; <a href="#214693" title="(x: spire.algebra.Sign)spire.algebra.Sign">-</a><span class="delimiter">(</span><a href="#187263" title="A">n</a>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186852" title="Option[(A, A)]" id="214703">Mul</a><span class="delimiter">(</span><a title="A" id="187277">a</a>, <a title="A" id="187278">b</a><span class="delimiter">)</span> =&gt; <a href="#187277" title="A">a</a>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <a href="#214693" title="(x: spire.algebra.Sign)spire.algebra.Sign">*</a> <a href="#187278" title="A">b</a>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a>
    <span class="keyword">case</span> <a href="Expr.scala.html#186878" title="Option[(A, A)]" id="214705">Div</a><span class="delimiter">(</span><a title="A" id="187292">a</a>, <a title="A" id="187293">b</a><span class="delimiter">)</span> =&gt; <a href="#187292" title="A">a</a>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <a href="#214693" title="(x: spire.algebra.Sign)spire.algebra.Sign">*</a> <a href="#187293" title="A">b</a>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a>
    <span class="keyword">case</span> _ =&gt;

      // The separation bound.
      <span class="keyword">val</span> <a title="scala.math.BigDecimal" id="187294">sep</a> = <span title="(unscaledVal: Long, scale: Int)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><span title="Long(1L)" class="int">1</span>, <span title="=&gt; Int">-</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a>.<a href="SeparationBound.scala.html#58085" title="=&gt; Int">decimalLowerBound</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(scale: Int)Int" id="187295">findSign</a><span class="delimiter">(</span><a title="Int" id="187306">scale</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.math.BigDecimal" id="187307">err</a> = <span title="(unscaledVal: Long, scale: Int)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><span title="Long(1L)" class="int">1</span>, <a href="#187306" title="Int">scale</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="BigDecimal" id="187308">a</a> = <a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58108" title="(err: BigDecimal)BigDecimal">+/-</a> <a href="#187307" title="scala.math.BigDecimal">err</a>
        <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#187308" title="BigDecimal">a</a>.<span title="=&gt; scala.math.BigDecimal">abs</span> <span title="(that: scala.math.BigDecimal)Boolean">&gt;</span> <a href="#187307" title="scala.math.BigDecimal">err</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#187308" title="BigDecimal">a</a>.<span title="=&gt; Int">signum</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#187307" title="scala.math.BigDecimal">err</a> <span title="(that: scala.math.BigDecimal)scala.math.BigDecimal">*</span> <span title="implicit scala.math.BigDecimal.int2bigDecimal : (i: Int)scala.math.BigDecimal" class="int">2</span> <span title="(that: scala.math.BigDecimal)Boolean">&lt;</span> <a href="#187294" title="scala.math.BigDecimal">sep</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Int(0)" class="int">0</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#187295" title="(scale: Int)Int">findSign</a><span class="delimiter">(</span><a href="#187306" title="Int">scale</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="../../algebra/Sign.scala.html#99631" title="implicit spire.algebra.Sign.apply : (i: Int)spire.algebra.Sign">Sign</a><span class="delimiter">(</span><a href="#187295" title="(scale: Int)Int">findSign</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(that: A)A" id="58100">/~</a><span class="delimiter">(</span><a title="A" id="84842">that</a>: <a href="#16753" title="A">A</a><span class="delimiter">)</span>: <a href="#16753" title="A">A</a> = <a href="Expr.scala.html#186727" title="(n: BigInt)(implicit evidence$14: spire.math.real.Coexpr[A])A">BigIntLit</a><a href="RealLike.scala.html#58059" title="=&gt; spire.math.real.Coexpr[A]" class="delimiter">(</a><span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="RealLike.scala.html#58067" title="(that: A)A">/</a> <a href="#84842" title="A">that</a><span class="delimiter">)</span>.<a href="#58102" title="=&gt; BigInt">toBigInt</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(that: A)A" id="58101">%</a><span class="delimiter">(</span><a title="A" id="84863">that</a>: <a href="#16753" title="A">A</a><span class="delimiter">)</span>: <a href="#16753" title="A">A</a> = <a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="RealLike.scala.html#58066" title="(that: A)A">-</a> <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58100" title="(that: A)A">/~</a> <a href="#84863" title="A">that</a><span class="delimiter">)</span> <a href="RealLike.scala.html#58064" title="(that: A)A">*</a> <a href="#84863" title="A">that</a>


  <span class="keyword">def</span> <a title="=&gt; BigInt" id="58102">toBigInt</a>: <span title="BigInt">BigInt</span> = <a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#10941" title="BigInt" id="214761">Zero</a> =&gt; <span title="(i: Int)scala.math.BigInt">BigInt</span><a href="#214765" title="(x: BigInt)BigInt" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11238" title="BigInt" id="214762">Negative</a> =&gt; <a href="#214765" title="(x: BigInt)BigInt">-</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="RealLike.scala.html#58068" title="()A">-</a><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a><span class="delimiter">)</span>.<a href="#58102" title="=&gt; BigInt">toBigInt</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11064" title="BigInt" id="214763">Positive</a> =&gt;
      <span class="keyword">val</span> <a title="BigDecimal" id="187351">a</a> = <a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58108" title="(err: BigDecimal)BigDecimal">+/-</a> <span title="implicit scala.math.BigDecimal.double2bigDecimal : (d: Double)scala.math.BigDecimal" class="double">0.01</span>
      <span class="keyword">val</span> <a title="scala.math.BigInt" id="187352">b</a> = <a href="#187351" title="BigDecimal">a</a>.<span title="()scala.math.BigInt">toBigInt</span>

      <span title="BigInt" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#187351" title="BigDecimal">a</a> <span title="(that: scala.math.BigDecimal)scala.math.BigDecimal">+</span> <span title="implicit scala.math.BigDecimal.double2bigDecimal : (d: Double)scala.math.BigDecimal" class="double">0.02</span><span class="delimiter">)</span> <span title="(that: scala.math.BigDecimal)Boolean">&gt;=</span> <span title="(x: scala.math.BigInt)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><a href="#187352" title="scala.math.BigInt">b</a> <span title="(that: scala.math.BigInt)scala.math.BigInt">+</span> <span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="RealLike.scala.html#58066" title="(that: A)A">-</a> <a href="Expr.scala.html#177292" title="[A](n: BigInt)(implicit evidence$3: spire.math.real.Coexpr[A])A">Expr</a><span title="(n: BigInt)(implicit evidence$3: spire.math.real.Coexpr[A])A" class="delimiter">[</span><a href="#16753" title="A">A</a><span class="delimiter">]</span><a href="RealLike.scala.html#58059" title="=&gt; spire.math.real.Coexpr[A]" class="delimiter">(</a><a href="#187352" title="scala.math.BigInt">b</a> <span title="(that: scala.math.BigInt)scala.math.BigInt">+</span> <span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11064" title="BigInt" id="214715">Positive</a> =&gt; <a href="#187352" title="scala.math.BigInt">b</a> <a href="#214719" title="(x: BigInt)BigInt">+</a> <span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt" class="int">1</span>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11238" title="BigInt" id="214716">Negative</a> =&gt; <a href="#214719" title="(x: BigInt)BigInt">b</a>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#10941" title="BigInt" id="214717">Zero</a> =&gt; <a href="#187352" title="scala.math.BigInt">b</a> <a href="#214719" title="(x: BigInt)BigInt">+</a> <span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt" class="int">1</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="BigInt" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#187351" title="BigDecimal">a</a> <span title="(that: scala.math.BigDecimal)scala.math.BigDecimal">-</span> <span title="implicit scala.math.BigDecimal.double2bigDecimal : (d: Double)scala.math.BigDecimal" class="double">0.02</span><span class="delimiter">)</span> <span title="(that: scala.math.BigDecimal)Boolean">&lt;</span> <span title="(x: scala.math.BigInt)scala.math.BigDecimal">BigDecimal</span><span class="delimiter">(</span><a href="#187352" title="scala.math.BigInt">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="RealLike.scala.html#58066" title="(that: A)A">-</a> <a href="Expr.scala.html#177292" title="[A](n: BigInt)(implicit evidence$3: spire.math.real.Coexpr[A])A">Expr</a><span title="(n: BigInt)(implicit evidence$3: spire.math.real.Coexpr[A])A" class="delimiter">[</span><a href="#16753" title="A">A</a><span class="delimiter">]</span><a href="RealLike.scala.html#58059" title="=&gt; spire.math.real.Coexpr[A]" class="delimiter">(</a><a href="#187352" title="scala.math.BigInt">b</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11064" title="BigInt" id="214738">Positive</a> =&gt; <a href="#214742" title="(x: BigInt)BigInt">b</a>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#11238" title="BigInt" id="214739">Negative</a> =&gt; <a href="#187352" title="scala.math.BigInt">b</a> <a href="#214742" title="(x: BigInt)BigInt">-</a> <span title="implicit scala.math.BigInt.int2bigInt : (i: Int)scala.math.BigInt" class="int">1</span>
          <span class="keyword">case</span> <a href="../../algebra/Sign.scala.html#10941" title="BigInt" id="214740">Zero</a> =&gt; <a href="#214742" title="(x: BigInt)BigInt">b</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#187352" title="scala.math.BigInt">b</a>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[B, C](b: B)(implicit approx: spire.math.Approximation[A,B,C])C" id="58103">approximateTo</a><span class="delimiter">[</span><a title="" id="58106">B</a>,<a title="" id="58107">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="B" id="187426">b</a>: <a href="#58106" title="B">B</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Approximation[A,B,C]" id="187427">approx</a>: <a href="../Approximation.scala.html#13739" title="spire.math.Approximation[A,B,C]">Approximation</a><span class="delimiter">[</span>A,B,C<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#58107" title="C">C</a> =
    <a href="../Approximation.scala.html#146738" title="(n: A, err: B)C">approx</a><span class="delimiter">(</span><a href="#16616" title="A" class="keyword">this</a>, <a href="#187426" title="B">b</a><span class="delimiter">)</span>

  /**
   * Returns an absolute approximation to `this` s.t.
   * `this - err &lt;= this +/- err &lt;= this + err`.
   */
  <span class="keyword">def</span> <a title="(err: BigDecimal)BigDecimal" id="58108">+/-</a><span class="delimiter">(</span><a title="BigDecimal" id="187317">err</a>: <span title="BigDecimal">BigDecimal</span><span class="delimiter">)</span>: <span title="BigDecimal">BigDecimal</span> = <a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58103" title="(b: BigDecimal)(implicit approx: spire.math.Approximation[A,BigDecimal,BigDecimal])BigDecimal">approximateTo</a> <a href="#187317" title="BigDecimal">err</a>

  <span class="keyword">def</span> <a title="(implicit mc: java.math.MathContext)BigDecimal" id="58109">toBigDecimal</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="java.math.MathContext" id="157329">mc</a>: <span title="java.math.MathContext">MathContext</span> = <span title="java.math.MathContext.type">MathContext</span>.<span title="java.math.MathContext">DECIMAL128</span><span class="delimiter">)</span>: <span title="BigDecimal">BigDecimal</span> =
    <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58103" title="(b: java.math.MathContext)(implicit approx: spire.math.Approximation[A,java.math.MathContext,BigDecimal])BigDecimal">approximateTo</a> <a href="#157329" title="java.math.MathContext">mc</a><span class="delimiter">)</span>.<span title="(mc: java.math.MathContext)scala.math.BigDecimal">round</span><span class="delimiter">(</span><a href="#157329" title="java.math.MathContext">mc</a><span class="delimiter">)</span>

  /**
   * Simulate returns the result of the `Real` if it had instead been replaced
   * by the type `A`. So, this won't provide any type
   */
  <span class="keyword">def</span> <a title="[B](implicit f: spire.math.Fractional[B])B" id="58110">simulate</a><span class="delimiter">[</span><a title="" id="58112">B</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.Fractional[B]" id="187490">f</a>: <a href="../Fractional.scala.html#13505" title="spire.math.Fractional[B]">Fractional</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#58112" title="B">B</a> = <a href="#16616" title="A" class="keyword">this</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186706" title="Option[Int]" id="214794">IntLit</a><span class="delimiter">(</span><a title="Int" id="187506">n</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Ring.scala.html#31966" title="(n: Int)B">fromInt</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187506" title="Int">n</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186730" title="Option[BigInt]" id="214796">BigIntLit</a><span class="delimiter">(</span><a title="BigInt" id="187520">n</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../Convertable.scala.html#55864" title="(n: BigInt)B">fromBigInt</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187520" title="BigInt">n</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186800" title="Option[(A, A)]" id="214798">Add</a><span class="delimiter">(</span><a title="A" id="187534">a</a>, <a title="A" id="187535">b</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Additive.scala.html#27891" title="(x: B, y: B)B">plus</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187534" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span>, <a href="#187535" title="A">b</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186826" title="Option[(A, A)]" id="214800">Sub</a><span class="delimiter">(</span><a title="A" id="187553">a</a>, <a title="A" id="187554">b</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Additive.scala.html#31696" title="(x: B, y: B)B">minus</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187553" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span>, <a href="#187554" title="A">b</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186852" title="Option[(A, A)]" id="214802">Mul</a><span class="delimiter">(</span><a title="A" id="187572">a</a>, <a title="A" id="187573">b</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Multiplicative.scala.html#31721" title="(x: B, y: B)B">times</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187572" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span>, <a href="#187573" title="A">b</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186878" title="Option[(A, A)]" id="214804">Div</a><span class="delimiter">(</span><a title="A" id="187591">a</a>, <a title="A" id="187592">b</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Multiplicative.scala.html#31751" title="(x: B, y: B)B">div</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187591" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span>, <a href="#187592" title="A">b</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186762" title="Option[(A, Int)]" id="214806">KRoot</a><span class="delimiter">(</span><a title="A" id="187610">a</a>, <a title="Int" id="187611">k</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/NRoot.scala.html#32059" title="(a: B, n: Int)B">nroot</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187610" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span>, <a href="#187611" title="Int">k</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Expr.scala.html#186904" title="Option[A]" id="214808">Neg</a><span class="delimiter">(</span><a title="A" id="187628">a</a><span class="delimiter">)</span> =&gt; <a href="#187490" title="spire.math.Fractional[B]">f</a>.<a href="../../algebra/Additive.scala.html#31695" title="(x: B)B">negate</a><a href="#214790" title="(x: B)B" class="delimiter">(</a><a href="#187628" title="A">a</a>.<a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="#187490" title="(implicit f: spire.math.Fractional[B])B" class="delimiter">[</a><a href="#58112" title="B">B</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit ac: spire.math.ApproximationContext[spire.math.Rational])spire.math.Rational" id="58113">toRational</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="spire.math.ApproximationContext[spire.math.Rational]" id="158476">ac</a>: <a href="../ApproximationContext.scala.html#12227" title="spire.math.ApproximationContext[spire.math.Rational]">ApproximationContext</a><span class="delimiter">[</span>Rational<span class="delimiter">]</span> = <a href="../ApproximationContext.scala.html#147057" title="(error: spire.math.Rational)spire.math.ApproximationContext[spire.math.Rational]">ApproximationContext</a><span class="delimiter">(</span><a href="../Rational.scala.html#84812" title="(n: Long, d: Long)spire.math.Rational">Rational</a><span class="delimiter">(</span><span title="Long(1L)" class="long">1L</span>, <span title="Long(10000000000000000L)" class="long">10000000000000000L</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="../Rational.scala.html#15737" title="spire.math.Rational">Rational</a> = <a href="#58110" title="[B](implicit f: spire.math.Fractional[B])B">simulate</a><a href="../Fractional.scala.html#57924" title="(implicit f: spire.math.Fractional[spire.math.Rational])spire.math.Rational" class="delimiter">[</a><a href="../Rational.scala.html#15737" title="spire.math.Rational">Rational</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="()Boolean" id="58114">isWhole</a>: <span title="Boolean">Boolean</span> = <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58101" title="(that: A)A">%</a> <a href="Expr.scala.html#186703" title="(n: Int)(implicit evidence$12: spire.math.real.Coexpr[A])A">IntLit</a><a href="RealLike.scala.html#58059" title="=&gt; spire.math.real.Coexpr[A]" class="delimiter">(</a><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#58099" title="=&gt; spire.algebra.Sign">sign</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../algebra/Sign.scala.html#10941" title="spire.algebra.Zero.type">Zero</a>

  <span class="keyword">def</span> <a title="()AnyRef" id="58115">underlying</a>: <span title="AnyRef">AnyRef</span> = <a href="#16616" title="A" class="keyword">this</a>   // Why not?

  <span class="keyword">def</span> <a title="()Double" id="58116">doubleValue</a>: <span title="Double">Double</span> = <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <a href="#58103" title="(b: java.math.MathContext)(implicit approx: spire.math.Approximation[A,java.math.MathContext,BigDecimal])BigDecimal">approximateTo</a> <span class="delimiter">(</span><span title="java.math.MathContext" class="keyword">new</span> <span title="java.math.MathContext">MathContext</span><span class="delimiter">(</span><span title="Int(17)" class="int">17</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Double">toDouble</span>
  <span class="keyword">def</span> <a title="()Float" id="58117">floatValue</a>: <span title="Float">Float</span> = <a href="#58116" title="()Double">doubleValue</a>.<span title="=&gt; Float">toFloat</span>
  <span class="keyword">def</span> <a title="()Int" id="58118">intValue</a>: <span title="Int">Int</span> = <a href="#58102" title="=&gt; BigInt">toBigInt</a>.<span title="=&gt; Int">toInt</span>
  <span class="keyword">def</span> <a title="()Long" id="58119">longValue</a>: <span title="Long">Long</span> = <a href="#58102" title="=&gt; BigInt">toBigInt</a>.<span title="=&gt; Long">toLong</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="58120">toString</a>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="BigDecimal" id="187794">approx</a> = <a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a>.<a href="#58109" title="(implicit mc: java.math.MathContext)BigDecimal">toBigDecimal</a><span class="delimiter">(</span><span title="java.math.MathContext" class="keyword">new</span> <span title="java.math.MathContext">MathContext</span><span class="delimiter">(</span><span title="Int(9)" class="int">9</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="187795">prefix</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#16616" title="BigDecimalApprox.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="Expr.scala.html#177301" title="[A](n: BigDecimal)(implicit evidence$6: spire.math.real.Coexpr[A])A">Expr</a><span title="(n: BigDecimal)(implicit evidence$6: spire.math.real.Coexpr[A])A" class="delimiter">[</span><a href="#16753" title="A">A</a><span class="delimiter">]</span><a href="RealLike.scala.html#58059" title="=&gt; spire.math.real.Coexpr[A]" class="delimiter">(</a><a href="#187794" title="BigDecimal">approx</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="String(&quot;~&quot;)" class="string">&quot;~&quot;</span>
    <a href="#187795" title="String">prefix</a> <span title="(x$1: Any)String">+</span> <a href="#187794" title="BigDecimal">approx</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>




        </pre>
    </body>
</html>