<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>spire/spire/math/fpf/MaybeDouble.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> spire.math.fpf

<span class="keyword">import</span> spire.algebra.<span class="delimiter">{</span> Sign, Positive, Negative, Zero <span class="delimiter">}</span>
<span class="keyword">import</span> spire.math._

<span class="keyword">import</span> scala.math.<span class="delimiter">{</span> max, abs <span class="delimiter">}</span>
<span class="keyword">import</span> java.lang.<span title="Double.type">Double</span>.<span class="delimiter">{</span> NaN, isNaN, isInfinite <span class="delimiter">}</span>


/**
 * A `MaybeDouble` will hold a `Double` approximation so long as the `Double`'s
 * sign can be computed exactly. It is not a general number type, but is meant
 * to be used in tandem with a more accurate, but slow (computationally),
 * number type. When performing comparisons then, this can be checked first to
 * save on potentially slow computation.
 *
 * For this type, if a method returns an `Option`al value, then that indicates
 * that if `None` is returned, the answer cannot be computed exactly, but if
 * `Some(x)` is returned, then that is guaranteed to be correct. For example,
 * `toLong`, `toFloat`, `sign`, `isWhole`, etc. return these types of optional,
 * only-if-correct, type values.
 *
 * Most likely you would not use this directly, but just wrap your number type
 * in a `FPFilter` which maintains a `MaybeDouble` and handles all the lazy
 * computation of the more accurate number type for you.
 */
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class MaybeDouble extends Object" id="16354">MaybeDouble</a><a href="#16354" title="spire.math.fpf.MaybeDouble" class="delimiter">(</a><span class="keyword">val</span> <a title="Double" id="186148">approx</a>: <span title="Double">Double</span>, <span class="keyword">private</span> <span class="keyword">val</span> <a title="Double" id="186149">mes</a>: <span title="Double">Double</span>, <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="186150">ind</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#16355" title="spire.math.fpf.MaybeDouble.type">MaybeDouble</a>._

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Double" id="177194">error</a>: <span title="Double">Double</span> = <a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Int)Double">*</span> <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Double)Double">*</span> <a href="#177222" title="=&gt; Double">eps</a>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="177195">invalid</a>: <span title="Boolean">Boolean</span> = <span title="(x$1: Double)Boolean">isNaN</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span title="(x$1: Double)Boolean">isInfinite</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span>

  /**
   * Sometimes a number is too large to fit in a `Double`, the result of an
   * operation cannot be computed (eg. sqrt of a negative number), other times
   * we just give up when trying to keep track of the error... In any case, the
   * `approx` is set to either `NaN` or an `Infinity`, and it will be marked
   * as invalid. In that case, this will return `false` otherwise it will
   * return `true`.
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="177196">isValid</a>: <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="#177195" title="=&gt; Boolean">invalid</a>


  <span class="keyword">def</span> <a title="=&gt; spire.math.fpf.MaybeDouble" id="177197">abs</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span>math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span>, <a href="#186149" title="=&gt; Double">mes</a>, <a href="#186150" title="=&gt; Int">ind</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()spire.math.fpf.MaybeDouble" id="177198">unary_-</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><span title="=&gt; Double">-</span><a href="#186148" title="=&gt; Double">approx</a>, <a href="#186149" title="=&gt; Double">mes</a>, <a href="#186150" title="=&gt; Int">ind</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177199">+</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184750">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> =
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">+</span> <a href="#184750" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a>, <a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">+</span> <a href="#184750" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186149" title="=&gt; Double">mes</a>, <span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#186150" title="=&gt; Int">ind</a>, <a href="#184750" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186150" title="=&gt; Int">ind</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177200">-</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184363">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> =
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">-</span> <a href="#184363" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a>, <a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">+</span> <a href="#184363" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186149" title="=&gt; Double">mes</a>, <span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#186150" title="=&gt; Int">ind</a>, <a href="#184363" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186150" title="=&gt; Int">ind</a><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177201">*</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184785">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> =
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">*</span> <a href="#184785" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a>, <a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">*</span> <a href="#184785" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186149" title="=&gt; Double">mes</a>, <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <a href="#184785" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177202">/</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184893">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> =
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">/</span> <a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a>, 
             <span class="delimiter">(</span>math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">/</span> <a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186149" title="=&gt; Double">mes</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Double)Double">/</span>
                <span class="delimiter">(</span>math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> <a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">-</span> <span class="delimiter">(</span><a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Double)Double">*</span> <a href="#177222" title="=&gt; Double">eps</a><span class="delimiter">)</span>,
             <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#186150" title="=&gt; Int">ind</a>, <a href="#184893" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
    
  <span class="keyword">def</span> <a title="(k: Int)spire.math.fpf.MaybeDouble" id="177203">pow</a><span class="delimiter">(</span><a title="Int" id="184767">k</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#184767" title="Int">k</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span>math.<span title="(x: Double, y: Double)Double">pow</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a>, <a href="#184767" title="=&gt; Double">k</a><span class="delimiter">)</span>, math.<span title="(x: Double, y: Double)Double">pow</span><span class="delimiter">(</span><a href="#186149" title="=&gt; Double">mes</a>, <a href="#184767" title="=&gt; Double">k</a><span class="delimiter">)</span>, <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <a href="#184767" title="Int">k</a><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#184767" title="Int">k</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><span title="Double(1.0)" class="double">1.0</span>, <span title="Double(1.0)" class="double">1.0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>

    // In this case, we just do a positive pow, and divide 1 by it.
    
    <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="186296">b</a> = <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a>.<a href="#177203" title="(k: Int)spire.math.fpf.MaybeDouble">pow</a><span class="delimiter">(</span><span title="=&gt; Int">-</span><a href="#184767" title="Int">k</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Double" id="186297">mes</a> = <span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <span title="(x: Double)Double">/</span> math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">+</span> <span title="Int(1)" class="int">1</span> <span title="(x: Double)Double">/</span> <a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186149" title="=&gt; Double">mes</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> <span class="delimiter">(</span>math.<span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> <a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">-</span> <span class="delimiter">(</span><a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Int)Double">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Double)Double">*</span> <a href="#177222" title="=&gt; Double">eps</a><span class="delimiter">)</span>
    <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <span title="(x: Double)Double">/</span> <a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186148" title="=&gt; Double">approx</a>, <a href="#186297" title="Double">mes</a>, <a href="#186296" title="spire.math.fpf.MaybeDouble">b</a>.<a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * FIXME: Implement arbitrary nroots w/ error bounds.
   */
  <span class="keyword">def</span> <a title="(n: Int)spire.math.fpf.MaybeDouble" id="177204">nroot</a><span class="delimiter">(</span><a title="Int" id="184916">n</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#184916" title="Int">n</a> <span title="(x: Int)Boolean">==</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="#177205" title="=&gt; spire.math.fpf.MaybeDouble">sqrt</a> <span class="keyword">else</span> <a href="#177230" title="=&gt; spire.math.fpf.MaybeDouble">Invalid</a>
   
  <span class="keyword">def</span> <a title="=&gt; spire.math.fpf.MaybeDouble" id="177205">sqrt</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Double" id="186350">x</a> = math.<span title="(x: Double)Double">sqrt</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span>

    <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#177195" title="=&gt; Boolean">invalid</a> <span title="(x: Boolean)Boolean">||</span> <a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      // If a &lt; 0, then sqrt(a) == NaN, which is OK for now.
      
      <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186350" title="Double">x</a>, math.<span title="(x: Double)Double">sqrt</span><span class="delimiter">(</span><a href="#186149" title="=&gt; Double">mes</a><span class="delimiter">)</span> <span title="(x: Int)Double">*</span> <span class="delimiter">(</span><span class="int">1</span> <span title="Int(67108864)">&lt;&lt;</span> <span class="int">26</span><span class="delimiter">)</span>, <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186350" title="Double">x</a>, <span class="delimiter">(</span><a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Double">/</span> <a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span title="(x: Double)Double">*</span> <a href="#186350" title="Double">x</a>, <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Currently, if this can't be answered exactly, then the result is made
   * invalid. This should be fixed. If the answer is exact, then it is returned
   * with a 0 error bound.
   */
  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177206">quot</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184852">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="186379">quot</a> = <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a> <a href="#177202" title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble">/</a> <a href="#184852" title="spire.math.fpf.MaybeDouble">that</a>
    <span class="keyword">val</span> <a title="Double" id="186380">ub</a> = <a href="#186379" title="spire.math.fpf.MaybeDouble">quot</a>.<a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">+</span> <a href="#186379" title="spire.math.fpf.MaybeDouble">quot</a>.<a href="#177193" title="=&gt; Double">error</a>
    <span class="keyword">val</span> <a title="Double" id="186381">lb</a> = <a href="#186379" title="spire.math.fpf.MaybeDouble">quot</a>.<a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">-</span> <a href="#186379" title="spire.math.fpf.MaybeDouble">quot</a>.<a href="#177193" title="=&gt; Double">error</a>

    <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#186381" title="Double">lb</a> <span title="(x: Double)Boolean">&gt;=</span> <a href="#177228" title="=&gt; Double">minWhole</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#186380" title="Double">ub</a> <span title="(x: Double)Boolean">&lt;=</span> <a href="#177226" title="=&gt; Double">maxWhole</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#186380" title="Double">ub</a>.<span title="=&gt; Long">toLong</span> <span title="(x: Long)Boolean">==</span> <a href="#186381" title="Double">lb</a>.<span title="=&gt; Long">toLong</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Long" id="186415">i</a> = <a href="#186379" title="spire.math.fpf.MaybeDouble">quot</a>.<a href="#186148" title="=&gt; Double">approx</a>.<span title="=&gt; Long">toLong</span>
      <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186415" title="Long">i</a>.<span title="=&gt; Double">toDouble</span>, <span title="Double(0.0)" class="double">0.0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#177230" title="=&gt; spire.math.fpf.MaybeDouble">Invalid</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * This implements the modulus operator. It will behave similar to % for
   * Double, Long, Int, etc.
   */
  <span class="keyword">def</span> <a title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble" id="177207">mod</a><span class="delimiter">(</span><a title="spire.math.fpf.MaybeDouble" id="184865">that</a>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="186416">a</a> = <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a>.<a href="#177197" title="=&gt; spire.math.fpf.MaybeDouble">abs</a>
    <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="186417">b</a> = <a href="#184865" title="spire.math.fpf.MaybeDouble">that</a>.<a href="#177197" title="=&gt; spire.math.fpf.MaybeDouble">abs</a>
    <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="186418">absrem</a> = <span class="delimiter">(</span><a href="#186416" title="spire.math.fpf.MaybeDouble">a</a> <a href="#177200" title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble">-</a> <a href="#186417" title="spire.math.fpf.MaybeDouble">b</a> <a href="#177201" title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble">*</a> <span class="delimiter">(</span><a href="#186416" title="spire.math.fpf.MaybeDouble">a</a> <a href="#177206" title="(that: spire.math.fpf.MaybeDouble)spire.math.fpf.MaybeDouble">quot</a> <a href="#186417" title="spire.math.fpf.MaybeDouble">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#177198" title="()spire.math.fpf.MaybeDouble">-</a><a href="#186418" title="spire.math.fpf.MaybeDouble">absrem</a> <span class="keyword">else</span> <a href="#186418" title="spire.math.fpf.MaybeDouble">absrem</a>
  <span class="delimiter">}</span>


  /**
   * If this `MaybeDouble`'s sign can be computed exactly, then `Some(s)` is
   * returned, where `s` is the sign of the number. Otherwise, `None` is
   * returned.
   */
  <span class="keyword">val</span> <a title="Option[spire.algebra.Sign]" id="177208">sign</a>: <span title="Option[spire.algebra.Sign]">Option</span><span class="delimiter">[</span>Sign<span class="delimiter">]</span> = <span title="Option[spire.algebra.Sign]" class="keyword">if</span> <span class="delimiter">(</span><a href="#177195" title="=&gt; Boolean">invalid</a><span class="delimiter">)</span> <span title="None.type">None</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <span title="Option[spire.algebra.Sign]" class="keyword">if</span> <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">&gt;</span> <a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>
      <span title="(x: spire.algebra.Positive.type)Some[spire.algebra.Positive.type]">Some</span><span class="delimiter">(</span><a href="../../algebra/Sign.scala.html#11064" title="spire.algebra.Positive.type">Positive</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Option[spire.algebra.Sign]" class="keyword">if</span> <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">&lt;</span> <span title="=&gt; Double">-</span><a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>
      <span title="(x: spire.algebra.Negative.type)Some[spire.algebra.Negative.type]">Some</span><span class="delimiter">(</span><a href="../../algebra/Sign.scala.html#11238" title="spire.algebra.Negative.type">Negative</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Option[spire.algebra.Sign]" class="keyword">if</span> <span class="delimiter">(</span><a href="#177193" title="=&gt; Double">error</a> <span title="(x: Double)Boolean">==</span> <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span>
      <span title="(x: spire.algebra.Zero.type)Some[spire.algebra.Zero.type]">Some</span><span class="delimiter">(</span><a href="../../algebra/Sign.scala.html#10941" title="spire.algebra.Zero.type">Zero</a><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <span title="None.type">None</span>
  <span class="delimiter">}</span>
  

  /**
   * If this `MaybeDouble`'s sign can be computed exactly, then `Some(x)` is
   * returned where `x` is the `Double` approximation. Otherwise, `None` is
   * returned.
   */
  <span class="keyword">def</span> <a title="=&gt; Option[Double]" id="177210">opt</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span> = <a href="#177208" title="=&gt; Option[spire.algebra.Sign]">sign</a> <span title="(f: spire.algebra.Sign =&gt; Double)Option[Double]">map</span> <span class="delimiter">(</span><a title="spire.algebra.Sign" id="186448">_</a> =&gt; <a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Option[Int]" id="177211">toInt</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#177212" title="=&gt; Option[Long]">toLong</a> <span title="(f: Long =&gt; Int)Option[Int]">map</span> <span class="delimiter">(</span><a href="#186454" title="Long">_</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>

  /**
   * If this can be converted, exactly, into a `Long`, then `Some(n)` will be
   * returned, where `n` is a `Long`. Otherwise, `None` will be returned.
   */
  <span class="keyword">def</span> <a title="=&gt; Option[Long]" id="177212">toLong</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <span title="Option[Long]" class="keyword">if</span> <span class="delimiter">(</span><a href="#177196" title="=&gt; Boolean">isValid</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">&lt;=</span> <a href="#177226" title="=&gt; Double">maxWhole</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">&gt;=</span> <a href="#177228" title="=&gt; Double">minWhole</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="186464">lb</a> = <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">-</span> <a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>
    <span class="keyword">val</span> <a title="Long" id="186465">ub</a> = <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">+</span> <a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>.<span title="=&gt; Long">toLong</span>
    <span title="Option[Long]" class="keyword">if</span> <span class="delimiter">(</span><a href="#186464" title="Long">lb</a> <span title="(x: Long)Boolean">==</span> <a href="#186465" title="Long">ub</a><span class="delimiter">)</span> <span title="(x: Long)Some[Long]">Some</span><span class="delimiter">(</span><a href="#186464" title="Long">lb</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="None.type">None</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="None.type">None</span>

  <span class="keyword">def</span> <a title="=&gt; Option[BigInt]" id="177213">toBigInt</a>: <span title="Option[BigInt]">Option</span><span class="delimiter">[</span>BigInt<span class="delimiter">]</span> = <a href="#177212" title="=&gt; Option[Long]">toLong</a> <span title="(f: Long =&gt; scala.math.BigInt)Option[scala.math.BigInt]">map</span> <span class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#186484" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

  /**
   * Returns `true` if this `MaybeDouble` is both valid and exact (has an
   * `error` of 0.0).
   */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="177214">isExact</a>: <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="#177195" title="=&gt; Boolean">invalid</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#177193" title="=&gt; Double">error</a> <span title="(x: Double)Boolean">==</span> <span title="Double(0.0)" class="double">0.0</span>

  /**
   * Returns `Some(f)`, where `f` is a `Float`, if `f` is known to be exact.
   * Otherwise, returns `None`.
   */
  <span class="keyword">def</span> <a title="=&gt; Option[Float]" id="177215">toFloat</a>: <span title="Option[Float]">Option</span><span class="delimiter">[</span>Float<span class="delimiter">]</span> =
    <span title="Option[Float]" class="keyword">if</span> <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Float)Boolean">&gt;=</span> <span title="Float.type">Float</span>.<span title="=&gt; Float">MinValue</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Float)Boolean">&lt;=</span> Float.<span title="Float(3.4028235E38)">MaxValue</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Float" id="186506">lb</a> = <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">-</span> <a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
      <span class="keyword">val</span> <a title="Float" id="186507">ub</a> = <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Double">+</span> <a href="#177193" title="=&gt; Double">error</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span>
      <span title="Option[Float]" class="keyword">if</span> <span class="delimiter">(</span><a href="#186506" title="Float">lb</a> <span title="(x: Float)Boolean">==</span> <a href="#186507" title="Float">ub</a><span class="delimiter">)</span> <span title="(x: Float)Some[Float]">Some</span><span class="delimiter">(</span><a href="#186506" title="Float">lb</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="None.type">None</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Option[Double]" id="177216">toDouble</a>: <span title="Option[Double]">Option</span><span class="delimiter">[</span>Double<span class="delimiter">]</span> = <span title="Option[Double]" class="keyword">if</span> <span class="delimiter">(</span><a href="#177214" title="=&gt; Boolean">isExact</a><span class="delimiter">)</span> <span title="(x: Double)Some[Double]">Some</span><span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="None.type">None</span>

  <span class="keyword">def</span> <a title="=&gt; Option[Boolean]" id="177217">isWhole</a>: <span title="Option[Boolean]">Option</span><span class="delimiter">[</span>Boolean<span class="delimiter">]</span> = <span title="Option[Boolean]" class="keyword">if</span> <span class="delimiter">(</span><a href="#177214" title="=&gt; Boolean">isExact</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#177212" title="=&gt; Option[Long]">toLong</a> <span title="(f: Long =&gt; Boolean)Option[Boolean]">map</span> <span class="delimiter">{</span> <a href="#186529" title="Long">_</a>.<span title="=&gt; Double">toDouble</span> <span title="(x: Double)Boolean">==</span> <a href="#186148" title="=&gt; Double">approx</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span title="None.type">None</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="177218">hashCode</a>: <span title="Int">Int</span> = <span class="delimiter">(</span><a href="#186148" title="=&gt; Double">approx</a>.<span title="()Int">##</span> <span title="(x: Int)Int">+</span> <a href="#186149" title="=&gt; Double">mes</a>.<span title="()Int">##</span> <span title="(x: Int)Int">*</span> <span title="Int(19)" class="int">19</span> <span title="(x: Int)Int">+</span> <a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Int">*</span> <span title="Int(23)" class="int">23</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="177219">equals</a><span class="delimiter">(</span><a title="Any" id="186554">that</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#186554" title="Any">that</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#214499" title="Boolean" id="214500">that</a>: MaybeDouble =&gt;
      <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a>.<a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Double)Boolean">==</span> that.<a href="#186148" title="=&gt; Double">approx</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a>.<a href="#186149" title="=&gt; Double">mes</a> <span title="(x: Double)Boolean">==</span> that.<a href="#186149" title="=&gt; Double">mes</a> <a href="#214502" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#16354" title="MaybeDouble.this.type" class="keyword">this</a>.<a href="#186150" title="=&gt; Int">ind</a> <span title="(x: Int)Boolean">==</span> that.<a href="#186150" title="=&gt; Int">ind</a>
    <span class="keyword">case</span> _ =&gt; <a href="#214502" title="(x: Boolean)Boolean" class="keyword">false</a>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="177220">toString</a>: <span title="String">String</span> = <span title="String(&quot;~&quot;)" class="string">&quot;~&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#186148" title="=&gt; Double">approx</a>.<span title="()String">toString</span>
<span class="delimiter">}</span>


<span title="Object" class="keyword">object</span> <a title="spire.math.fpf.MaybeDouble.type" id="16355">MaybeDouble</a> <a href="#16356" title="spire.math.fpf.MaybeDouble.type" class="delimiter">{</a>

  // The min relative error, aka 2^{-p} in [1].
  
  <span class="keyword">val</span> <a title="Double" id="177222">eps</a> = java.lang.<span title="Double.type">Double</span>.<span title="(x$1: Long)Double">longBitsToDouble</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="long">1023L</span> - <span class="int">52</span><span class="delimiter">)</span> <span title="Long(4372995238176751616L)">&lt;&lt;</span> <span class="int">52</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="Float" id="177224">feps</a> = java.lang.<span title="Float.type">Float</span>.<span title="(x$1: Int)Float">intBitsToFloat</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="int">127</span> - <span class="int">23</span><span class="delimiter">)</span> <span title="Int(872415232)">&lt;&lt;</span> <span class="int">23</span><span class="delimiter">)</span>

  // Max and min integers that Double can represent accurately.

  <span class="keyword">val</span> <a title="Double" id="177226">maxWhole</a> = java.lang.<span title="Double.type">Double</span>.<span title="(x$1: Long)Double">longBitsToDouble</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span>-<span class="long">1L</span><span class="delimiter">)</span> &gt;&gt;&gt; <span class="int">12</span><span class="delimiter">)</span> <span title="Long(4845873199050653695L)">|</span> <span class="delimiter">(</span><span class="long">1075L</span> &lt;&lt; <span class="int">52</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="Double" id="177228">minWhole</a> = <span title="=&gt; Double">-</span><a href="#177226" title="=&gt; Double">maxWhole</a>

  <span class="keyword">val</span> <a title="spire.math.fpf.MaybeDouble" id="177230">Invalid</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><span title="Double(NaN)">NaN</span>, <span title="Double(0.0)" class="int">0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(x: Float)spire.math.fpf.MaybeDouble" id="177232">apply</a><span class="delimiter">(</span><a title="Float" id="184436">x</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <a href="#177239" title="(x: Double)spire.math.fpf.MaybeDouble">exact</a><span class="delimiter">(</span><a href="#184436" title="Float">x</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Double)spire.math.fpf.MaybeDouble" id="177233">apply</a><span class="delimiter">(</span><a title="Double" id="184435">x</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <a href="#177239" title="(x: Double)spire.math.fpf.MaybeDouble">exact</a><span class="delimiter">(</span><a href="#184435" title="Double">x</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Int)spire.math.fpf.MaybeDouble" id="177234">apply</a><span class="delimiter">(</span><a title="Int" id="184434">x</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <a href="#177239" title="(x: Double)spire.math.fpf.MaybeDouble">exact</a><span class="delimiter">(</span><a href="#184434" title="=&gt; Double">x</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Long)spire.math.fpf.MaybeDouble" id="177235">apply</a><span class="delimiter">(</span><a title="Long" id="184433">x</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#184433" title="Long">x</a> <span title="(x: Double)Boolean">&gt;=</span> <a href="#177228" title="=&gt; Double">minWhole</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#184433" title="Long">x</a> <span title="(x: Double)Boolean">&lt;=</span> <a href="#177226" title="=&gt; Double">maxWhole</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#177239" title="(x: Double)spire.math.fpf.MaybeDouble">exact</a><span class="delimiter">(</span><a href="#184433" title="Long">x</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>
  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
    <a href="#177240" title="(x: Double)spire.math.fpf.MaybeDouble">approx</a><span class="delimiter">(</span><a href="#184433" title="Long">x</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(x: BigInt)spire.math.fpf.MaybeDouble" id="177236">apply</a><span class="delimiter">(</span><a title="BigInt" id="184432">x</a>: <span title="BigInt">BigInt</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Double" id="186589">y</a> = <a href="#184432" title="BigInt">x</a>.<span title="=&gt; Double">toDouble</span>
    
    <span title="spire.math.fpf.MaybeDouble" class="keyword">if</span> <span class="delimiter">(</span><a href="#186589" title="Double">y</a> <span title="(x: Double)Boolean">&gt;=</span> <a href="#177228" title="=&gt; Double">minWhole</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#186589" title="Double">y</a> <span title="(x: Double)Boolean">&lt;=</span> <a href="#177226" title="=&gt; Double">maxWhole</a><span class="delimiter">)</span> <a href="#177239" title="(x: Double)spire.math.fpf.MaybeDouble">exact</a><span class="delimiter">(</span><a href="#186589" title="Double">y</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#177240" title="(x: Double)spire.math.fpf.MaybeDouble">approx</a><span class="delimiter">(</span><a href="#186589" title="Double">y</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(x: spire.math.Rational)spire.math.fpf.MaybeDouble" id="177237">apply</a><span class="delimiter">(</span><a title="spire.math.Rational" id="184431">x</a>: <a href="../Rational.scala.html#15737" title="spire.math.Rational">Rational</a><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <a href="#177240" title="(x: Double)spire.math.fpf.MaybeDouble">approx</a><span class="delimiter">(</span><a href="#184431" title="spire.math.Rational">x</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: BigDecimal)spire.math.fpf.MaybeDouble" id="177238">apply</a><span class="delimiter">(</span><a title="BigDecimal" id="184430">x</a>: <span title="BigDecimal">BigDecimal</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <a href="#177240" title="(x: Double)spire.math.fpf.MaybeDouble">approx</a><span class="delimiter">(</span><a href="#184430" title="BigDecimal">x</a>.<span title="=&gt; Double">toDouble</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(x: Double)spire.math.fpf.MaybeDouble" id="177239">exact</a><span class="delimiter">(</span><a title="Double" id="186580">x</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#186580" title="Double">x</a>, <span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#186580" title="Double">x</a><span class="delimiter">)</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(x: Double)spire.math.fpf.MaybeDouble" id="177240">approx</a><span class="delimiter">(</span><a title="Double" id="185105">x</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a> = <span title="spire.math.fpf.MaybeDouble" class="keyword">new</span> <a href="#16354" title="spire.math.fpf.MaybeDouble">MaybeDouble</a><span class="delimiter">(</span><a href="#185105" title="Double">x</a>, <span title="(x: Double)Double">abs</span><span class="delimiter">(</span><a href="#185105" title="Double">x</a><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
<span class="delimiter">}</span>



        </pre>
    </body>
</html>