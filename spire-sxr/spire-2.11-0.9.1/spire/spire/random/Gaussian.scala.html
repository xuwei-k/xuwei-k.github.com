<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>spire/spire/random/Gaussian.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package spire.random

import java.math.MathContext

import scala.<span class="delimiter">{</span>specialized =&gt; sp<span class="delimiter">}</span>
import scala.annotation.tailrec

import spire.algebra.<span class="delimiter">{</span>Field, NRoot, Order, Trig<span class="delimiter">}</span>

trait <a title="trait Gaussian[A] extends Any" id="spire.random;Gaussian">Gaussian</a><span class="delimiter">[</span>@sp<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="spire.random;Gaussian;A">A</a><span class="delimiter">]</span> extends <span title="Any">Any</span> <span class="delimiter">{</span>
  <span class="comment">/**
   * Return an `A` that is normally distributed about `mean` with a standard
   * deviation of `stdDev`.
   */</span>
  def <a title="(mean: A, stdDev: A)spire.random.Dist[A]" id="spire.random;Gaussian.apply">apply</a><span class="delimiter">(</span><a title="A" id="spire.random;Gaussian.apply.mean">mean</a>: <a href="#spire.random;Gaussian;A" title="A">A</a>, <a title="A" id="spire.random;Gaussian.apply.stdDev">stdDev</a>: <a href="#spire.random;Gaussian;A" title="A">A</a><span class="delimiter">)</span>: <a href="Dist.scala.html#spire.random;Dist" title="spire.random.Dist[A]">Dist</a><span class="delimiter">[</span>A<span class="delimiter">]</span>
<span class="delimiter">}</span>

object <a title="spire.random.Gaussian.type" id="spire.random.Gaussian">Gaussian</a> extends <a href="#spire.random;GaussianInstances" title="spire.random.GaussianInstances">GaussianInstances</a> <span class="delimiter">{</span>
  @inline final def <a title="[A](implicit g: spire.random.Gaussian[A])spire.random.Gaussian[A]" id="spire.random.Gaussian.apply(91517d4437)">apply</a><span class="delimiter">[</span>@sp<span class="delimiter">(</span>Float,Double<span class="delimiter">)</span> <a title="" id="spire.random.Gaussian.apply(91517d4437);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span>implicit <a title="spire.random.Gaussian[A]" id="spire.random.Gaussian.apply(91517d4437).g">g</a>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[A]">Gaussian</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[A]">Gaussian</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#spire.random.Gaussian.apply(91517d4437).g" title="spire.random.Gaussian[A]">g</a>

  def <a title="[A](mean: A, stdDev: A)(implicit g: spire.random.Gaussian[A])spire.random.Dist[A]" id="spire.random.Gaussian.apply(16a3a45f5a)">apply</a><span class="delimiter">[</span>@sp <a title="" id="spire.random.Gaussian.apply(16a3a45f5a);A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="spire.random.Gaussian.apply(16a3a45f5a).mean">mean</a>: <a href="#spire.random.Gaussian.apply(16a3a45f5a);A" title="A">A</a>, <a title="A" id="spire.random.Gaussian.apply(16a3a45f5a).stdDev">stdDev</a>: <a href="#spire.random.Gaussian.apply(16a3a45f5a);A" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="spire.random.Gaussian[A]" id="spire.random.Gaussian.apply(16a3a45f5a).g">g</a>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[A]">Gaussian</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Dist.scala.html#spire.random;Dist" title="spire.random.Dist[A]">Dist</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#spire.random;Gaussian.apply" title="(mean: A, stdDev: A)spire.random.Dist[A]">g</a><span class="delimiter">(</span><a href="#spire.random.Gaussian.apply(16a3a45f5a).mean" title="A">mean</a>, <a href="#spire.random.Gaussian.apply(16a3a45f5a).stdDev" title="A">stdDev</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

trait <a title="trait GaussianInstances extends AnyRef" id="spire.random;GaussianInstances">GaussianInstances</a> <span title="Unit" class="delimiter">{</span>
  import <span title="=&gt; math.BigDecimal.type">BigDecimal</span>.defaultMathContext
  import spire.std.<a href="../std/package.scala.html#spire.std.package.float" title="spire.std.float.type">float</a>._
  import spire.std.<a href="../std/package.scala.html#spire.std.package.double" title="spire.std.double.type">double</a>._
  import spire.std.<a href="../std/package.scala.html#spire.std.package.bigDecimal" title="spire.std.bigDecimal.type">bigDecimal</a>._

  implicit val <a title="spire.random.Gaussian[Float]" id="spire.random;GaussianInstances.float">float</a>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[Float]">Gaussian</a><span class="delimiter">[</span>Float<span class="delimiter">]</span> =
    new <a title="&lt;$anon: spire.random.Gaussian[Float]&gt; extends AnyRef with spire.random.Gaussian[Float]" id="spire.random;GaussianInstances.float;$anon">Gaussian</a><span class="delimiter">[</span>Float<span class="delimiter">]</span> <span class="delimiter">{</span>
      def <a title="(mean: Float, stdDev: Float)spire.random.Dist[Float]" id="spire.random;GaussianInstances.float;$anon.apply">apply</a><span class="delimiter">(</span><a title="Float" id="spire.random;GaussianInstances.float;$anon.apply.mean">mean</a>: <span title="Float">Float</span>, <a title="Float" id="spire.random;GaussianInstances.float;$anon.apply.stdDev">stdDev</a>: <span title="Float">Float</span><span class="delimiter">)</span>: <a href="Dist.scala.html#spire.random;Dist" title="spire.random.Dist[Float]">Dist</a><span class="delimiter">[</span>Float<span class="delimiter">]</span> =
        new <a href="Dist.scala.html#spire.random;DistFromGen" title="spire.random.DistFromGen[Float]">DistFromGen</a><span class="delimiter">(</span><a title="spire.random.Generator" id="spire.random;GaussianInstances.float;$anon.apply.$anonfun.g">g</a> =&gt; <span class="delimiter">(</span><a href="Ziggurat.scala.html#spire.random.Ziggurat" title="spire.random.Ziggurat.type">Ziggurat</a>.<a href="Ziggurat.scala.html#spire.random.Ziggurat.rnor" title="(g: spire.random.Generator)Double">rnor</a><span class="delimiter">(</span><a href="#spire.random;GaussianInstances.float;$anon.apply.$anonfun.g" title="spire.random.Generator">g</a><span class="delimiter">)</span> <span title="(x: Float)Double">*</span> <a href="#spire.random;GaussianInstances.float;$anon.apply.stdDev" title="Float">stdDev</a> <span title="(x: Float)Double">+</span> <a href="#spire.random;GaussianInstances.float;$anon.apply.mean" title="Float">mean</a><span class="delimiter">)</span>.<span title="=&gt; Float">toFloat</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  implicit val <a title="spire.random.Gaussian[Double]" id="spire.random;GaussianInstances.double">double</a>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[Double]">Gaussian</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> =
    new <a title="&lt;$anon: spire.random.Gaussian[Double]&gt; extends AnyRef with spire.random.Gaussian[Double]" id="spire.random;GaussianInstances.double;$anon">Gaussian</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> <span class="delimiter">{</span>
      def <a title="(mean: Double, stdDev: Double)spire.random.Dist[Double]" id="spire.random;GaussianInstances.double;$anon.apply">apply</a><span class="delimiter">(</span><a title="Double" id="spire.random;GaussianInstances.double;$anon.apply.mean">mean</a>: <span title="Double">Double</span>, <a title="Double" id="spire.random;GaussianInstances.double;$anon.apply.stdDev">stdDev</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <a href="Dist.scala.html#spire.random;Dist" title="spire.random.Dist[Double]">Dist</a><span class="delimiter">[</span>Double<span class="delimiter">]</span> =
        new <a href="Dist.scala.html#spire.random;DistFromGen" title="spire.random.DistFromGen[Double]">DistFromGen</a><span class="delimiter">(</span><a title="spire.random.Generator" id="spire.random;GaussianInstances.double;$anon.apply.$anonfun.g">g</a> =&gt; <a href="Ziggurat.scala.html#spire.random.Ziggurat" title="spire.random.Ziggurat.type">Ziggurat</a>.<a href="Ziggurat.scala.html#spire.random.Ziggurat.rnor" title="(g: spire.random.Generator)Double">rnor</a><span class="delimiter">(</span><a href="#spire.random;GaussianInstances.double;$anon.apply.$anonfun.g" title="spire.random.Generator">g</a><span class="delimiter">)</span> <span title="(x: Double)Double">*</span> <a href="#spire.random;GaussianInstances.double;$anon.apply.stdDev" title="Double">stdDev</a> <span title="(x: Double)Double">+</span> <a href="#spire.random;GaussianInstances.double;$anon.apply.mean" title="Double">mean</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  implicit def <a title="implicit spire.random.GaussianInstances.bigDecimal : (implicit mc: java.math.MathContext)spire.random.Gaussian[BigDecimal]" id="spire.random;GaussianInstances.bigDecimal">bigDecimal</a><span class="delimiter">(</span>implicit <a title="java.math.MathContext" id="spire.random;GaussianInstances.bigDecimal$default$1">mc</a>: <span title="java.math.MathContext">MathContext</span> = <span title="=&gt; java.math.MathContext">defaultMathContext</span><span class="delimiter">)</span>: <a href="#spire.random;Gaussian" title="spire.random.Gaussian[BigDecimal]">Gaussian</a><span class="delimiter">[</span>BigDecimal<span class="delimiter">]</span> =
    new <a href="#spire.random;MarsagliaGaussian" title="spire.random.MarsagliaGaussian[BigDecimal]">MarsagliaGaussian</a><span class="delimiter">[</span>BigDecimal<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * An implementation of `Gaussian` that uses the Marsaglia algorithm.
 */</span>
final class <a title="class MarsagliaGaussian[A] extends AnyRef with spire.random.Gaussian[A]" id="spire.random;MarsagliaGaussian">MarsagliaGaussian</a><span class="delimiter">[</span>@sp<span class="delimiter">(</span>Float, Double<span class="delimiter">)</span> <a title="" id="spire.random;MarsagliaGaussian;A">A</a>: Field: NRoot: Trig: Order: Uniform<span class="delimiter">]</span> extends <a href="#spire.random;Gaussian" title="spire.random.Gaussian[A]">Gaussian</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
  import spire.syntax.<a href="../syntax/package.scala.html#spire.syntax.package.field" title="spire.syntax.field.type">field</a>._
  import spire.syntax.<a href="../syntax/package.scala.html#spire.syntax.package.nroot" title="spire.syntax.nroot.type">nroot</a>._
  import spire.syntax.<a href="../syntax/package.scala.html#spire.syntax.package.trig" title="spire.syntax.trig.type">trig</a>._
  import spire.syntax.<a href="../syntax/package.scala.html#spire.syntax.package.order" title="spire.syntax.order.type">order</a>._

  private final val <a title="spire.random.Dist[A]" id="spire.random;MarsagliaGaussian.u">u</a> = <a href="Dist.scala.html#spire.random.Dist" title="spire.random.Dist.type">Dist</a>.<a href="Dist.scala.html#spire.random.Dist.uniform" title="[A](low: A, high: A)(implicit evidence$1: spire.random.Uniform[A])spire.random.Dist[A]">uniform</a><span title="(low: A, high: A)(implicit evidence$1: spire.random.Uniform[A])spire.random.Dist[A]" class="delimiter">[</span><a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">]</span><a href="#spire.random;MarsagliaGaussian.evidence$5" title="spire.random.Uniform[A]" class="delimiter">(</a><a href="../algebra/Additive.scala.html#spire.algebra;AdditiveGroup.negate" title="(x: A)A">-</a><a href="../algebra/Field.scala.html#spire.algebra.Field.apply" title="[A](implicit f: spire.algebra.Field[A])spire.algebra.Field[A]">Field</a><a href="#spire.random;MarsagliaGaussian.evidence$1" title="(implicit f: spire.algebra.Field[A])spire.algebra.Field[A]" class="delimiter">[</a><a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">]</span>.<a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">one</a>, <a href="../algebra/Field.scala.html#spire.algebra.Field.apply" title="[A](implicit f: spire.algebra.Field[A])spire.algebra.Field[A]">Field</a><a href="#spire.random;MarsagliaGaussian.evidence$1" title="(implicit f: spire.algebra.Field[A])spire.algebra.Field[A]" class="delimiter">[</a><a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">]</span>.<a href="../algebra/Multiplicative.scala.html#spire.algebra;MultiplicativeMonoid.one" title="=&gt; A">one</a><span class="delimiter">)</span>

  def <a title="(mean: A, stdDev: A)spire.random.Dist[A]" id="spire.random;MarsagliaGaussian.apply">apply</a><span class="delimiter">(</span><a title="A" id="spire.random;MarsagliaGaussian.apply.mean">mean</a>: <a href="#spire.random;MarsagliaGaussian;A" title="A">A</a>, <a title="A" id="spire.random;MarsagliaGaussian.apply.stdDev">stdDev</a>: <a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">)</span>: <a href="Dist.scala.html#spire.random;Dist" title="spire.random.Dist[A]">Dist</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    new <a href="Dist.scala.html#spire.random;DistFromGen" title="spire.random.DistFromGen[A]">DistFromGen</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">{</span> <a title="spire.random.Generator" id="spire.random;MarsagliaGaussian.apply.$anonfun.gen">gen</a> =&gt; 
      @tailrec def <a title="()A" id="spire.random;MarsagliaGaussian.apply.$anonfun.loop">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#spire.random;MarsagliaGaussian;A" title="A">A</a> = <span class="delimiter">{</span>
        val <a title="A" id="spire.random;MarsagliaGaussian.apply.$anonfun.loop.x">x</a> = <a href="Dist.scala.html#spire.random;Dist.apply" title="(gen: spire.random.Generator)A">u</a><span class="delimiter">(</span><a href="#spire.random;MarsagliaGaussian.apply.$anonfun.gen" title="spire.random.Generator">gen</a><span class="delimiter">)</span>
        val <a title="A" id="spire.random;MarsagliaGaussian.apply.$anonfun.loop.y">y</a> = <a href="Dist.scala.html#spire.random;Dist.apply" title="(gen: spire.random.Generator)A">u</a><span class="delimiter">(</span><a href="#spire.random;MarsagliaGaussian.apply.$anonfun.gen" title="spire.random.Generator">gen</a><span class="delimiter">)</span>
        val s = <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">x</a> <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">*</a> <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop.x" title="A">x</a> <a href="../algebra/Additive.scala.html#spire.algebra;AdditiveSemigroup.plus" title="A" id="spire.random;MarsagliaGaussian.apply.$anonfun.loop.s">+</a> <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">y</a> <a href="../algebra/Multiplicative.scala.html#spire.algebra;MultiplicativeSemigroup.times" title="(x: A, y: A)A">*</a> <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop.y" title="A">y</a>
        if <span class="delimiter">(</span><a href="#spire.random;MarsagliaGaussian.evidence$4" title="spire.algebra.Order[A]">s</a> <a href="../algebra/Order.scala.html#spire.algebra;Order.gteqv" title="(x: A, y: A)Boolean">&gt;=</a> <a href="../algebra/Field.scala.html#spire.algebra.Field.apply" title="[A](implicit f: spire.algebra.Field[A])spire.algebra.Field[A]">Field</a><a href="#spire.random;MarsagliaGaussian.evidence$1" title="(implicit f: spire.algebra.Field[A])spire.algebra.Field[A]" class="delimiter">[</a><a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">]</span>.<a href="../algebra/Multiplicative.scala.html#spire.algebra;MultiplicativeMonoid.one" title="=&gt; A">one</a> <span title="(x: Boolean)Boolean">||</span> <a href="#spire.random;MarsagliaGaussian.evidence$4" title="spire.algebra.Order[A]">s</a> <a href="../algebra/Order.scala.html#spire.algebra;Order.eqv" title="(x: A, y: A)Boolean">===</a> <a href="../algebra/Field.scala.html#spire.algebra.Field.apply" title="[A](implicit f: spire.algebra.Field[A])spire.algebra.Field[A]">Field</a><a href="#spire.random;MarsagliaGaussian.evidence$1" title="(implicit f: spire.algebra.Field[A])spire.algebra.Field[A]" class="delimiter">[</a><a href="#spire.random;MarsagliaGaussian;A" title="A">A</a><span class="delimiter">]</span>.<a href="../algebra/Additive.scala.html#spire.algebra;AdditiveMonoid.zero" title="=&gt; A">zero</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop" title="()A">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          val scale = <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">stdDev</a> <a href="../algebra/Multiplicative.scala.html#spire.algebra;MultiplicativeSemigroup.times" title="A" id="spire.random;MarsagliaGaussian.apply.$anonfun.loop.scale">*</a> <span class="delimiter">(</span>-<a href="../syntax/Syntax.scala.html#spire.syntax;MultiplicativeSemigroupSyntax.literalIntMultiplicativeSemigroupOps" title="implicit spire.syntax.MultiplicativeSemigroupSyntax.literalIntMultiplicativeSemigroupOps : (lhs: Int)spire.syntax.LiteralIntMultiplicativeSemigroupOps" class="int">2</a> <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">*</a> <a href="#spire.random;MarsagliaGaussian.evidence$3" title="spire.algebra.Trig[A]">s</a>.<a href="../algebra/Trig.scala.html#spire.algebra;Trig.log" title="(a: A)A">log</a> <a href="#spire.random;MarsagliaGaussian.evidence$2" title="spire.algebra.NRoot[A]">/</a> <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop.s" title="A">s</a><span class="delimiter">)</span>.<a href="../algebra/NRoot.scala.html#spire.algebra;NRoot.sqrt" title="(a: A)A">sqrt</a>
          <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">x</a> <a href="#spire.random;MarsagliaGaussian.evidence$1" title="spire.algebra.Field[A]">*</a> <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop.scale" title="A">scale</a> <a href="../algebra/Additive.scala.html#spire.algebra;AdditiveSemigroup.plus" title="(x: A, y: A)A">+</a> <a href="#spire.random;MarsagliaGaussian.apply.mean" title="A">mean</a> <span class="comment">// Dropped: y * scale + mean</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#spire.random;MarsagliaGaussian.apply.$anonfun.loop" title="()A">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
