<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>spire/spire/math/Searching.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package spire.math

import spire.algebra.<span class="delimiter">{</span>Order, PartialOrder<span class="delimiter">}</span>
import spire.syntax.<a href="../syntax/package.scala.html#spire.syntax.package.order" title="spire.syntax.order.type">order</a>._

import scala.<span class="delimiter">{</span>specialized =&gt; spec<span class="delimiter">}</span>
import scala.annotation.tailrec

object <a title="spire.math.Searching.type" id="spire.math.Searching">Searching</a> <a href="#spire.math.Searching" title="spire.math.Searching.type" class="delimiter">{</a>
  final def <a title="[A](as: Array[A], item: A)(implicit evidence$1: spire.algebra.Order[A])Int" id="spire.math.Searching.search(003cd0969b)">search</a><span class="delimiter">[</span>@spec <a title="" id="spire.math.Searching.search(003cd0969b);A">A</a>: Order<span class="delimiter">]</span><span class="delimiter">(</span><a title="Array[A]" id="spire.math.Searching.search(003cd0969b).as">as</a>: <span title="Array[A]">Array</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A" id="spire.math.Searching.search(003cd0969b).item">item</a>: <a href="#spire.math.Searching.search(003cd0969b);A" title="A">A</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
    <a href="#spire.math.Searching.search(13ab4dc003)" title="(as: Array[A], item: A, lower: Int, upper: Int)(implicit evidence$2: spire.algebra.Order[A])Int">search</a><a href="#spire.math.Searching.search(003cd0969b).evidence$1" title="spire.algebra.Order[A]" class="delimiter">(</a><a href="#spire.math.Searching.search(003cd0969b).as" title="Array[A]">as</a>, <a href="#spire.math.Searching.search(003cd0969b).item" title="A">item</a>, <span title="Int(0)" class="int">0</span>, <a href="#spire.math.Searching.search(003cd0969b).as" title="Array[A]">as</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  final def <a title="[A](as: Array[A], item: A, lower: Int, upper: Int)(implicit evidence$2: spire.algebra.Order[A])Int" id="spire.math.Searching.search(13ab4dc003)">search</a><span class="delimiter">[</span>@spec <a title="" id="spire.math.Searching.search(13ab4dc003);A">A</a>: Order<span class="delimiter">]</span><span class="delimiter">(</span><a title="Array[A]" id="spire.math.Searching.search(13ab4dc003).as">as</a>: <span title="Array[A]">Array</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A" id="spire.math.Searching.search(13ab4dc003).item">item</a>: <a href="#spire.math.Searching.search(13ab4dc003);A" title="A">A</a>, <a title="Int" id="spire.math.Searching.search(13ab4dc003).lower">lower</a>: <span title="Int">Int</span>, <a title="Int" id="spire.math.Searching.search(13ab4dc003).upper">upper</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    var <a title="Int" id="spire.math.Searching.search(13ab4dc003).first">first</a> = <a href="#spire.math.Searching.search(13ab4dc003).lower" title="Int">lower</a>
    var <a title="Int" id="spire.math.Searching.search(13ab4dc003).last">last</a> = <a href="#spire.math.Searching.search(13ab4dc003).upper" title="Int">upper</a>
    while <span class="delimiter">(</span><a href="#spire.math.Searching.search(13ab4dc003).first" title="Int">first</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#spire.math.Searching.search(13ab4dc003).last" title="Int">last</a><span class="delimiter">)</span> <a href="#spire.math.Searching.search(13ab4dc003).while$1" title="()Unit" class="delimiter">{</a>
      val middle = <span class="delimiter">(</span><a href="#spire.math.Searching.search(13ab4dc003).first" title="Int">first</a> <span title="(x: Int)Int">+</span> <a href="#spire.math.Searching.search(13ab4dc003).last" title="Int">last</a><span class="delimiter">)</span> <a title="Int" id="spire.math.Searching.search(13ab4dc003).middle">&gt;&gt;&gt;</a> <span title="Int(1)" class="int">1</span>

      val <a title="Int" id="spire.math.Searching.search(13ab4dc003).compare">compare</a> = <a href="#spire.math.Searching.search(13ab4dc003).as" title="(i: Int)A">as</a><a href="#spire.math.Searching.search(13ab4dc003).evidence$2" title="spire.algebra.Order[A]" class="delimiter">(</a><a href="#spire.math.Searching.search(13ab4dc003).middle" title="Int">middle</a><span class="delimiter">)</span>.compare<a href="../algebra/Order.scala.html#spire.algebra;Order.compare" title="(x: A, y: A)Int" class="delimiter">(</a><a href="#spire.math.Searching.search(13ab4dc003).item" title="A">item</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#spire.math.Searching.search(13ab4dc003).compare" title="Int">compare</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#spire.math.Searching.search(13ab4dc003).first" title="Int">first</a> = <a href="#spire.math.Searching.search(13ab4dc003).middle" title="Int">middle</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
      else if <span class="delimiter">(</span><a href="#spire.math.Searching.search(13ab4dc003).compare" title="Int">compare</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#spire.math.Searching.search(13ab4dc003).last" title="Int">last</a> = <a href="#spire.math.Searching.search(13ab4dc003).middle" title="Int">middle</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
      else return <a href="#spire.math.Searching.search(13ab4dc003).middle" title="Int">middle</a>
    <span class="delimiter">}</span>
    <span title="=&gt; Int">-</span><a href="#spire.math.Searching.search(13ab4dc003).first" title="Int">first</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
  <span class="delimiter">}</span>

  final def <a title="[A](as: IndexedSeq[A], item: A)(implicit evidence$3: spire.algebra.Order[A])Int" id="spire.math.Searching.search(c1beaf1a66)">search</a><span class="delimiter">[</span>@spec <a title="" id="spire.math.Searching.search(c1beaf1a66);A">A</a>: Order<span class="delimiter">]</span><span class="delimiter">(</span><a title="IndexedSeq[A]" id="spire.math.Searching.search(c1beaf1a66).as">as</a>: <span title="IndexedSeq[A]">IndexedSeq</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A" id="spire.math.Searching.search(c1beaf1a66).item">item</a>: <a href="#spire.math.Searching.search(c1beaf1a66);A" title="A">A</a><span class="delimiter">)</span>: <span title="Int">Int</span> =
    <a href="#spire.math.Searching.search(f7c149a8bf)" title="(as: IndexedSeq[A], item: A, lower: Int, upper: Int)(implicit evidence$4: spire.algebra.Order[A])Int">search</a><a href="#spire.math.Searching.search(c1beaf1a66).evidence$3" title="spire.algebra.Order[A]" class="delimiter">(</a><a href="#spire.math.Searching.search(c1beaf1a66).as" title="IndexedSeq[A]">as</a>, <a href="#spire.math.Searching.search(c1beaf1a66).item" title="A">item</a>, <span title="Int(0)" class="int">0</span>, <a href="#spire.math.Searching.search(c1beaf1a66).as" title="IndexedSeq[A]">as</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  final def <a title="[A](as: IndexedSeq[A], item: A, lower: Int, upper: Int)(implicit evidence$4: spire.algebra.Order[A])Int" id="spire.math.Searching.search(f7c149a8bf)">search</a><span class="delimiter">[</span>@spec <a title="" id="spire.math.Searching.search(f7c149a8bf);A">A</a>: Order<span class="delimiter">]</span><span class="delimiter">(</span><a title="IndexedSeq[A]" id="spire.math.Searching.search(f7c149a8bf).as">as</a>: <span title="IndexedSeq[A]">IndexedSeq</span><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A" id="spire.math.Searching.search(f7c149a8bf).item">item</a>: <a href="#spire.math.Searching.search(f7c149a8bf);A" title="A">A</a>, <a title="Int" id="spire.math.Searching.search(f7c149a8bf).lower">lower</a>: <span title="Int">Int</span>, <a title="Int" id="spire.math.Searching.search(f7c149a8bf).upper">upper</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    var <a title="Int" id="spire.math.Searching.search(f7c149a8bf).first">first</a> = <a href="#spire.math.Searching.search(f7c149a8bf).lower" title="Int">lower</a>
    var <a title="Int" id="spire.math.Searching.search(f7c149a8bf).last">last</a> = <a href="#spire.math.Searching.search(f7c149a8bf).upper" title="Int">upper</a>
    while <span class="delimiter">(</span><a href="#spire.math.Searching.search(f7c149a8bf).first" title="Int">first</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#spire.math.Searching.search(f7c149a8bf).last" title="Int">last</a><span class="delimiter">)</span> <a href="#spire.math.Searching.search(f7c149a8bf).while$2" title="()Unit" class="delimiter">{</a>
      val middle = <span class="delimiter">(</span><a href="#spire.math.Searching.search(f7c149a8bf).first" title="Int">first</a> <span title="(x: Int)Int">+</span> <a href="#spire.math.Searching.search(f7c149a8bf).last" title="Int">last</a><span class="delimiter">)</span> <a title="Int" id="spire.math.Searching.search(f7c149a8bf).middle">&gt;&gt;&gt;</a> <span title="Int(1)" class="int">1</span>

      val <a title="Int" id="spire.math.Searching.search(f7c149a8bf).compare">compare</a> = <a href="#spire.math.Searching.search(f7c149a8bf).as" title="(idx: Int)A">as</a><a href="#spire.math.Searching.search(f7c149a8bf).evidence$4" title="spire.algebra.Order[A]" class="delimiter">(</a><a href="#spire.math.Searching.search(f7c149a8bf).middle" title="Int">middle</a><span class="delimiter">)</span>.compare<a href="../algebra/Order.scala.html#spire.algebra;Order.compare" title="(x: A, y: A)Int" class="delimiter">(</a><a href="#spire.math.Searching.search(f7c149a8bf).item" title="A">item</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#spire.math.Searching.search(f7c149a8bf).compare" title="Int">compare</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#spire.math.Searching.search(f7c149a8bf).first" title="Int">first</a> = <a href="#spire.math.Searching.search(f7c149a8bf).middle" title="Int">middle</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>
      else if <span class="delimiter">(</span><a href="#spire.math.Searching.search(f7c149a8bf).compare" title="Int">compare</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#spire.math.Searching.search(f7c149a8bf).last" title="Int">last</a> = <a href="#spire.math.Searching.search(f7c149a8bf).middle" title="Int">middle</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
      else return <a href="#spire.math.Searching.search(f7c149a8bf).middle" title="Int">middle</a>
    <span class="delimiter">}</span>
    <span title="=&gt; Int">-</span><a href="#spire.math.Searching.search(f7c149a8bf).first" title="Int">first</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Computes the minimal elements of a partially ordered set.
    * If the poset contains multiple copies of a minimal element, the function
    * will only return a single copy of it.
    * 
    * Works by constructing the set of minimal elements for the first k elements
    * of the poset, for k = 1 .. length.
    * 
    * With n is the size of the poset and w &lt;= n its width, the algorithm requires
    * O(w) space and O(w*n) time.
    */</span>
  final def <a title="[A](as: Iterable[A])(implicit ev: spire.algebra.PartialOrder[A])Seq[A]" id="spire.math.Searching.minimalElements">minimalElements</a><span class="delimiter">[</span><a title="" id="spire.math.Searching.minimalElements;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[A]" id="spire.math.Searching.minimalElements.as">as</a>: <span title="Iterable[A]">Iterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="spire.algebra.PartialOrder[A]" id="spire.math.Searching.minimalElements.ev">ev</a>: <a href="../algebra/PartialOrder.scala.html#spire.algebra;PartialOrder" title="spire.algebra.PartialOrder[A]">PartialOrder</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[A]">Seq</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import scala.collection.mutable.ArrayBuffer
    <span class="comment">// the minimal elements for the first elements of as</span>
    var <a title="scala.collection.mutable.ArrayBuffer[A]" id="spire.math.Searching.minimalElements.candidates">candidates</a> = <span title="scala.collection.mutable.ArrayBuffer.type">ArrayBuffer</span>.<span title="[A]=&gt; scala.collection.mutable.ArrayBuffer[A]">empty</span><span title="scala.collection.mutable.ArrayBuffer[A]" class="delimiter">[</span><a href="#spire.math.Searching.minimalElements;A" title="A">A</a><span class="delimiter">]</span>
    <span class="comment">// removes the j-th element of candidates by swapping the last</span>
    <span class="comment">// element with it</span>
    def <a title="(j: Int)Unit" id="spire.math.Searching.minimalElements.fastRemove">fastRemove</a><span class="delimiter">(</span><a title="Int" id="spire.math.Searching.minimalElements.fastRemove.j">j</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.fastRemove.j" title="Int">j</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <a href="#spire.math.Searching.minimalElements.candidates" title="(idx: Int, elem: A)Unit">candidates</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.fastRemove.j" title="Int">j</a><span class="delimiter">)</span> = <a href="#spire.math.Searching.minimalElements.candidates" title="(idx: Int)A">candidates</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="(n: Int)A">remove</span><span title="Unit" class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#spire.math.Searching.minimalElements.as" title="Iterable[A]">as</a>.<span title="(f: A =&gt; Any)Unit">foreach</span> <span class="delimiter">{</span> <a title="A" id="spire.math.Searching.minimalElements.$anonfun.a">a</a> =&gt;
      <span class="comment">// if we prove that a is not minimal, it should not be added to candidates</span>
      var <a title="Boolean" id="spire.math.Searching.minimalElements.$anonfun.aIsNotMinimal">aIsNotMinimal</a> = false
      <span class="comment">// compare a against each candidate, starting from the last</span>
      @tailrec def <a title="(i: Int)Unit" id="spire.math.Searching.minimalElements.$anonfun.inspect">inspect</a><span class="delimiter">(</span><a title="Int" id="spire.math.Searching.minimalElements.$anonfun.inspect.i">i</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="Double" id="spire.math.Searching.minimalElements.$anonfun.inspect.c">c</a> = <a href="#spire.math.Searching.minimalElements.ev" title="spire.algebra.PartialOrder[A]">a</a>.partialCompare<a href="../algebra/PartialOrder.scala.html#spire.algebra;PartialOrder.partialCompare" title="(x: A, y: A)Double" class="delimiter">(</a><a href="#spire.math.Searching.minimalElements.candidates" title="(idx: Int)A">candidates</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// if a &lt;= candidates(i), this candidate can be removed</span>
          if <span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.c" title="Double">c</a> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#spire.math.Searching.minimalElements.fastRemove" title="(j: Int)Unit">fastRemove</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a><span class="delimiter">)</span>
            <span class="comment">// inspect the next candidate, taking care of the state of candidates</span>
            <span class="comment">// after the removal</span>
            if <span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
              <a href="#spire.math.Searching.minimalElements.$anonfun.inspect" title="(i: Int)Unit">inspect</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a><span class="delimiter">)</span>
            else
              <a href="#spire.math.Searching.minimalElements.$anonfun.inspect" title="(i: Int)Unit">inspect</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.c" title="Double">c</a> <span title="(x: Double)Boolean">&gt;</span> <span title="Double(0.0)" class="double">0.0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// if a &gt; candidates(i), then a is not minimal</span>
            <a href="#spire.math.Searching.minimalElements.$anonfun.aIsNotMinimal" title="Boolean">aIsNotMinimal</a> = true
            <a href="#spire.math.Searching.minimalElements.$anonfun.inspect" title="(i: Int)Unit">inspect</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <span class="comment">// if a cannot be compare to candidates(i), continue inspection</span>
            <a href="#spire.math.Searching.minimalElements.$anonfun.inspect" title="(i: Int)Unit">inspect</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.$anonfun.inspect.i" title="Int">i</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#spire.math.Searching.minimalElements.$anonfun.inspect" title="(i: Int)Unit">inspect</a><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="comment">// if a is minimal, then add it to the candidates pool</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#spire.math.Searching.minimalElements.$anonfun.aIsNotMinimal" title="Boolean">aIsNotMinimal</a><span class="delimiter">)</span>
        <a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a> <span title="(elem: A)scala.collection.mutable.ArrayBuffer[A]">+=</span> <a href="#spire.math.Searching.minimalElements.$anonfun.a" title="A">a</a>
    <span class="delimiter">}</span>
    <span title="(elems: A*)Seq[A]">Seq</span><span class="delimiter">(</span><a href="#spire.math.Searching.minimalElements.candidates" title="scala.collection.mutable.ArrayBuffer[A]">candidates</a>: _*<span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
