<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>spire/spire/math/algebraic/ConstantFolder.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package spire.math.algebraic


<span class="comment">/**
 * This folds all ring ops (+, -, *) on constants to constants. This only works
 * on `IntLit`s for now, as `BigInt`s may be slow.
 *
 * TODO: It may be worth it to fold `BigIntLit`s for add/subtract, since the
 * space requirement would approximately half.
 */</span>
trait <a title="trait ConstantFolder[A &lt;: spire.math.algebraic.RealLike[A]] extends scala.math.ScalaNumber with spire.math.algebraic.RealTransform[A]" id="spire.math.algebraic;ConstantFolder">ConstantFolder</a><span class="delimiter">[</span><a title=" &lt;: spire.math.algebraic.RealLike[A]" id="spire.math.algebraic;ConstantFolder;A">A</a> &lt;: RealLike<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> extends <a href="RealTransform.scala.html#spire.math.algebraic;RealTransform" title="spire.math.algebraic.RealTransform[A]">RealTransform</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span> self: A =&gt;

  private def <a title="(n: Long)A" id="spire.math.algebraic;ConstantFolder.wrap(e2c10bca58)">wrap</a><span class="delimiter">(</span><a title="Long" id="spire.math.algebraic;ConstantFolder.wrap(e2c10bca58).n">n</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <a href="#spire.math.algebraic;ConstantFolder;A" title="A">A</a> = if <span class="delimiter">(</span><a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58).n" title="Long">n</a> <span title="(x: Int)Boolean">&gt;</span> Int.<span title="Int(2147483647)">MaxValue</span> <span title="(x: Boolean)Boolean">||</span> <a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58).n" title="Long">n</a> <span title="(x: Int)Boolean">&lt;</span> Int.<span title="Int(-2147483648)">MinValue</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="Expr.scala.html#spire.math.algebraic.BigIntLit.apply" title="(n: BigInt)(implicit evidence$14: spire.math.algebraic.Coexpr[A])A">BigIntLit</a><a href="RealLike.scala.html#spire.math.algebraic;RealLike.coexpr" title="=&gt; spire.math.algebraic.Coexpr[A]" class="delimiter">(</a><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58).n" title="Long">n</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span> else <span class="delimiter">{</span>
    <a href="Expr.scala.html#spire.math.algebraic.IntLit.apply" title="(n: Int)(implicit evidence$12: spire.math.algebraic.Coexpr[A])A">IntLit</a><a href="RealLike.scala.html#spire.math.algebraic;RealLike.coexpr" title="=&gt; spire.math.algebraic.Coexpr[A]" class="delimiter">(</a><a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58).n" title="Long">n</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="(n: BigInt)A" id="spire.math.algebraic;ConstantFolder.wrap(a3d5352a99)">wrap</a><span class="delimiter">(</span><a title="BigInt" id="spire.math.algebraic;ConstantFolder.wrap(a3d5352a99).n">n</a>: <span title="BigInt">BigInt</span><span class="delimiter">)</span>: <a href="#spire.math.algebraic;ConstantFolder;A" title="A">A</a> =
    if <span class="delimiter">(</span><a href="#spire.math.algebraic;ConstantFolder.wrap(a3d5352a99).n" title="BigInt">n</a>.<span title="=&gt; Boolean">isValidInt</span><span class="delimiter">)</span> <a href="Expr.scala.html#spire.math.algebraic.IntLit.apply" title="(n: Int)(implicit evidence$12: spire.math.algebraic.Coexpr[A])A">IntLit</a><a href="RealLike.scala.html#spire.math.algebraic;RealLike.coexpr" title="=&gt; spire.math.algebraic.Coexpr[A]" class="delimiter">(</a><a href="#spire.math.algebraic;ConstantFolder.wrap(a3d5352a99).n" title="BigInt">n</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> else <a href="Expr.scala.html#spire.math.algebraic.BigIntLit.apply" title="(n: BigInt)(implicit evidence$14: spire.math.algebraic.Coexpr[A])A">BigIntLit</a><a href="RealLike.scala.html#spire.math.algebraic;RealLike.coexpr" title="=&gt; spire.math.algebraic.Coexpr[A]" class="delimiter">(</a><a href="#spire.math.algebraic;ConstantFolder.wrap(a3d5352a99).n" title="BigInt">n</a><span class="delimiter">)</span>

  override def <a title="(num: A)A" id="spire.math.algebraic;ConstantFolder.transform">transform</a><span class="delimiter">(</span><span title="A">num</span>: <a href="#spire.math.algebraic;ConstantFolder;A" title="A">A</a><span class="delimiter">)</span>: <a href="#spire.math.algebraic;ConstantFolder;A" title="A">A</a> = super.<a href="RealTransform.scala.html#spire.math.algebraic;RealTransform.transform" title="(a: A)A">transform</a><span class="delimiter">(</span><span title="A">num</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
    case <a href="Expr.scala.html#spire.math.algebraic.Add.unapply" title="(e: A)(implicit evidence$21: spire.math.algebraic.Coexpr[A])Option[(A, A)]">Add</a><span class="delimiter">(</span><a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">a</span><span class="delimiter">)</span>, <a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">b</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58)" title="(n: Long)A">wrap</a><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; Long">a</span>: <span title="Long">Long</span><span class="delimiter">)</span> <span title="(x: Long)Long">+</span> <span class="delimiter">(</span><span title="=&gt; Long">b</span>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">)</span>
    case <a href="Expr.scala.html#spire.math.algebraic.Sub.unapply" title="(e: A)(implicit evidence$23: spire.math.algebraic.Coexpr[A])Option[(A, A)]">Sub</a><span class="delimiter">(</span><a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">a</span><span class="delimiter">)</span>, <a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">b</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58)" title="(n: Long)A">wrap</a><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; Long">a</span>: <span title="Long">Long</span><span class="delimiter">)</span> <span title="(x: Long)Long">-</span> <span class="delimiter">(</span><span title="=&gt; Long">b</span>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">)</span>
    case <a href="Expr.scala.html#spire.math.algebraic.Mul.unapply" title="(e: A)(implicit evidence$25: spire.math.algebraic.Coexpr[A])Option[(A, A)]">Mul</a><span class="delimiter">(</span><a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">a</span><span class="delimiter">)</span>, <a href="Expr.scala.html#spire.math.algebraic.IntLit.unapply" title="(e: A)(implicit evidence$13: spire.math.algebraic.Coexpr[A])Option[Int]">IntLit</a><span class="delimiter">(</span><span title="Int">b</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#spire.math.algebraic;ConstantFolder.wrap(e2c10bca58)" title="(n: Long)A">wrap</a><span class="delimiter">(</span><span class="delimiter">(</span><span title="=&gt; Long">a</span>: <span title="Long">Long</span><span class="delimiter">)</span> <span title="(x: Long)Long">*</span> <span class="delimiter">(</span><span title="=&gt; Long">b</span>: <span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">)</span>
    case <span title="A">num</span> =&gt; <span title="A">num</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
