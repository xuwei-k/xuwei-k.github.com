<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>http4s-server/org/http4s/server/middleware/URITranslation.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.http4s
package server
package middleware

object <a title="org.http4s.server.middleware.URITranslation.type" id="org.http4s.server.middleware.URITranslation">URITranslation</a> <a href="#org.http4s.server.middleware.URITranslation" title="org.http4s.server.middleware.URITranslation.type" class="delimiter">{</a>
  def <a title="(prefix: String)(service: org.http4s.server.HttpService)org.http4s.server.HttpService" id="org.http4s.server.middleware.URITranslation.translateRoot">translateRoot</a><span class="delimiter">(</span><a title="String" id="org.http4s.server.middleware.URITranslation.translateRoot.prefix">prefix</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="org.http4s.server.HttpService" id="org.http4s.server.middleware.URITranslation.translateRoot.service">service</a>: <a href="../Service.scala.html#org.http4s.server;Service" title="org.http4s.server.HttpService">HttpService</a><span class="delimiter">)</span>: <a href="../Service.scala.html#org.http4s.server;Service" title="org.http4s.server.HttpService">HttpService</a> = <span class="delimiter">{</span>

    val <a title="String" id="org.http4s.server.middleware.URITranslation.translateRoot.newPrefix">newPrefix</a> = if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.prefix" title="String">prefix</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.http4s.server.middleware.URITranslation.translateRoot.prefix" title="String">prefix</a> else <a href="#org.http4s.server.middleware.URITranslation.translateRoot.prefix" title="String">prefix</a>

    def <a title="(path: String)String" id="org.http4s.server.middleware.URITranslation.translateRoot.translate">translate</a><span class="delimiter">(</span><a title="String" id="org.http4s.server.middleware.URITranslation.translateRoot.translate.path">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#org.http4s.server.middleware.URITranslation.translateRoot.newPrefix" title="String">newPrefix</a> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.translate.path" title="String">path</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#org.http4s.server.middleware.URITranslation.translateRoot.translate.path" title="String">path</a> else <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.http4s.server.middleware.URITranslation.translateRoot.translate.path" title="String">path</a><span class="delimiter">)</span>

    def <a title="(req: org.http4s.Request)org.http4s.Request" id="org.http4s.server.middleware.URITranslation.translateRoot.transReq">transReq</a><span class="delimiter">(</span><a title="org.http4s.Request" id="org.http4s.server.middleware.URITranslation.translateRoot.transReq.req">req</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a><span class="delimiter">)</span>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a> = <span class="delimiter">{</span>
      val <a title="String =&gt; String" id="org.http4s.server.middleware.URITranslation.translateRoot.transReq.troot">troot</a> = <a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.attributes" title="=&gt; org.http4s.AttributeMap">attributes</a>.<a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s;AttributeMap.get" title="(k: org.http4s.AttributeKey[String =&gt; String])Option[String =&gt; String]">get</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRootKey" title="=&gt; org.http4s.AttributeKey[String =&gt; String]">translateRootKey</a><span class="delimiter">)</span>
                    .<span title="(f: (String =&gt; String) =&gt; (String =&gt; String))Option[String =&gt; String]">map</span><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.troot.$anonfun.x$1" title="String =&gt; String">_</a> <span title="(g: String =&gt; String)String =&gt; String">compose</span> <a href="#org.http4s.server.middleware.URITranslation.translateRoot.translate" title="(path: String)String">translate</a><span class="delimiter">)</span>
                    .<span title="(default: =&gt; String =&gt; String)String =&gt; String">getOrElse</span><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.translate" title="(path: String)String">translate</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.troot.$anonfun.x$2" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Message.withAttribute(3da1e26ec1)" title="(key: org.http4s.AttributeKey[String =&gt; String], value: String =&gt; String)req.Self">withAttribute</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRootKey" title="=&gt; org.http4s.AttributeKey[String =&gt; String]">translateRootKey</a>, <a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.troot" title="String =&gt; String">troot</a><span class="delimiter">)</span>
         .<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.withPathInfo" title="(pi: String)org.http4s.Request">withPathInfo</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.pathInfo" title="=&gt; String">pathInfo</a>.<span title="(x$1: Int)String">substring</span><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.newPrefix" title="String">newPrefix</a>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="../Service.scala.html#org.http4s.server.Service" title="org.http4s.server.Service.type">Service</a>.<a href="../Service.scala.html#org.http4s.server.Service.lift" title="(f: org.http4s.Request =&gt; scalaz.concurrent.Task[Option[org.http4s.Response]])org.http4s.server.Service[org.http4s.Request,org.http4s.Response]">lift</a> <span class="delimiter">{</span> req: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a> =&gt;
      if <span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.$anonfun.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.pathInfo" title="=&gt; String">pathInfo</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.newPrefix" title="String">newPrefix</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Service.scala.html#org.http4s.server;Service.apply" title="(a: org.http4s.Request)scalaz.concurrent.Task[Option[org.http4s.Response]]">service</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.transReq" title="(req: org.http4s.Request)org.http4s.Request">transReq</a><span class="delimiter">(</span><a href="#org.http4s.server.middleware.URITranslation.translateRoot.$anonfun.req" title="org.http4s.Request">req</a><span class="delimiter">)</span><span class="delimiter">)</span>
      else <a href="../Service.scala.html#org.http4s.server.Service" title="org.http4s.server.Service.type">Service</a>.<a href="../Service.scala.html#org.http4s.server.Service.TaskNone" title="=&gt; scalaz.concurrent.Task[None.type]">TaskNone</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  val <a title="org.http4s.AttributeKey[String =&gt; String]" id="org.http4s.server.middleware.URITranslation.translateRootKey">translateRootKey</a> = <a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s.AttributeKey" title="org.http4s.AttributeKey.type">AttributeKey</a>.<a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s.AttributeKey.http4s" title="[T](name: String)org.http4s.AttributeKey[T]">http4s</a><span title="(name: String)org.http4s.AttributeKey[String =&gt; String]" class="delimiter">[</span>String =&gt; String<span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;translateRoot&quot;)" class="string">&quot;translateRoot&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
