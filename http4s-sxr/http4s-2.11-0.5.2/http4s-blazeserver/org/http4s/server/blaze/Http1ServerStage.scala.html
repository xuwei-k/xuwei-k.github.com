<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>http4s-blazeserver/org/http4s/server/blaze/Http1ServerStage.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.http4s
package server
package blaze


import org.http4s.blaze.pipeline.<span title="org.http4s.blaze.pipeline.Command.type">Command</span>.EOF
import org.http4s.blaze.<span class="delimiter">{</span>BodylessWriter, Http1Stage<span class="delimiter">}</span>
import org.http4s.blaze.pipeline.<span class="delimiter">{</span>Command =&gt; Cmd, TailStage<span class="delimiter">}</span>
import org.http4s.blaze.util.<span title="org.http4s.blaze.util.Execution.type">Execution</span>._
import org.http4s.blaze.util.<span title="org.http4s.blaze.util.BufferTools.type">BufferTools</span>.emptyBuffer
import org.http4s.blaze.http.http_parser.<span title="org.http4s.blaze.http.http_parser.BaseExceptions.type">BaseExceptions</span>.<span class="delimiter">{</span>BadRequest, ParserException<span class="delimiter">}</span>
import org.http4s.blaze.http.http_parser.Http1ServerParser
import org.http4s.blaze.channel.SocketConnection

import java.nio.ByteBuffer
import java.nio.charset.StandardCharsets

import scala.collection.mutable.ListBuffer
import scala.concurrent.<span class="delimiter">{</span> ExecutionContext, Future <span class="delimiter">}</span>
import scala.util.<span class="delimiter">{</span>Try, Success, Failure<span class="delimiter">}</span>

import org.http4s.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status" title="org.http4s.Status.type">Status</a>.<span class="delimiter">{</span>InternalServerError<span class="delimiter">}</span>
import org.http4s.util.StringWriter
import org.http4s.util.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util.CaseInsensitiveString" title="org.http4s.util.CaseInsensitiveString.type">CaseInsensitiveString</a>._
import org.http4s.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header" title="org.http4s.Header.type">Header</a>.<span class="delimiter">{</span>Connection, `Content-Length`<span class="delimiter">}</span>

import scalaz.concurrent.<span class="delimiter">{</span>Strategy, Task<span class="delimiter">}</span>
import scalaz.<span class="delimiter">{</span>\/-, -\/<span class="delimiter">}</span>
import java.util.concurrent.ExecutorService


class <a title="class Http1ServerStage extends org.http4s.blaze.http.http_parser.Http1ServerParser with org.http4s.blaze.pipeline.TailStage[java.nio.ByteBuffer] with org.http4s.blaze.Http1Stage" id="org.http4s.server.blaze.Http1ServerStage">Http1ServerStage</a><a href="#org.http4s.server.blaze.Http1ServerStage" title="org.http4s.server.blaze.Http1ServerStage" class="delimiter">(</a><a title="org.http4s.server.HttpService" id="org.http4s.server.blaze;Http1ServerStage.service">service</a>: <a href="../../../../../http4s-server/org/http4s/server/Service.scala.html#org.http4s.server;Service" title="org.http4s.server.HttpService">HttpService</a>,
                       <a title="Option[org.http4s.blaze.channel.SocketConnection]" id="org.http4s.server.blaze;Http1ServerStage.conn">conn</a>: <span title="Option[org.http4s.blaze.channel.SocketConnection]">Option</span><span class="delimiter">[</span>SocketConnection<span class="delimiter">]</span>,
                       <a title="java.util.concurrent.ExecutorService" id="org.http4s.server.blaze.Http1ServerStage.<init>$default$3">pool</a>: <span title="java.util.concurrent.ExecutorService">ExecutorService</span> = <span title="scalaz.concurrent.Strategy.type">Strategy</span>.<span title="=&gt; java.util.concurrent.ExecutorService">DefaultExecutorService</span><span class="delimiter">)</span>
                  extends <a href="#org.http4s.server.blaze.Http1ServerStage" title="org.http4s.blaze.http.http_parser.Http1ServerParser">Http1ServerParser</a>
                  with <span title="org.http4s.blaze.pipeline.TailStage[java.nio.ByteBuffer]">TailStage</span><span class="delimiter">[</span>ByteBuffer<span class="delimiter">]</span>
                  with <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage" title="org.http4s.blaze.Http1Stage">Http1Stage</a>
<span class="delimiter">{</span>

  protected val <a title="scala.concurrent.ExecutionContextExecutorService" id="org.http4s.server.blaze;Http1ServerStage.ec">ec</a> = <span title="scala.concurrent.ExecutionContext.type">ExecutionContext</span>.<span title="(e: java.util.concurrent.ExecutorService)scala.concurrent.ExecutionContextExecutorService">fromExecutorService</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze.Http1ServerStage.<init>$default$3" title="java.util.concurrent.ExecutorService">pool</a><span class="delimiter">)</span>

  val <a title="String" id="org.http4s.server.blaze;Http1ServerStage.name">name</a> = <span title="String(&quot;Http4sServerStage&quot;)" class="string">&quot;Http4sServerStage&quot;</span>

  private val <a title="org.http4s.AttributeMap" id="org.http4s.server.blaze;Http1ServerStage.requestAttrs">requestAttrs</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.conn" title="Option[org.http4s.blaze.channel.SocketConnection]">conn</a>.<span title="(f: org.http4s.blaze.channel.SocketConnection =&gt; Option[java.net.InetAddress])Option[java.net.InetAddress]">flatMap</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.requestAttrs.$anonfun.x$1" title="org.http4s.blaze.channel.SocketConnection">_</a>.<span title="=&gt; Option[java.net.InetAddress]">remoteInetAddress</span><span class="delimiter">)</span>.<span title="(f: java.net.InetAddress =&gt; org.http4s.AttributeMap)Option[org.http4s.AttributeMap]">map</span><span class="delimiter">{</span> <a title="java.net.InetAddress" id="org.http4s.server.blaze;Http1ServerStage.requestAttrs.$anonfun.addr">addr</a> =&gt;
    <a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s.AttributeMap.apply(963dbe9908)" title="(entries: org.http4s.AttributeEntry[_]*)org.http4s.AttributeMap">AttributeMap</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s;AttributeEntry" title="(key: org.http4s.AttributeKey[java.net.InetAddress], value: java.net.InetAddress)org.http4s.AttributeEntry[java.net.InetAddress]">AttributeEntry</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s.Request" title="org.http4s.Request.type">Request</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s.Request.Keys" title="org.http4s.Request.Keys.type">Keys</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s.Request.Keys.Remote" title="=&gt; org.http4s.AttributeKey[java.net.InetAddress]">Remote</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.requestAttrs.$anonfun.addr" title="java.net.InetAddress">addr</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>.<span title="(default: =&gt; org.http4s.AttributeMap)org.http4s.AttributeMap">getOrElse</span><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s.AttributeMap" title="org.http4s.AttributeMap.type">AttributeMap</a>.<a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s.AttributeMap.empty" title="=&gt; org.http4s.AttributeMap">empty</a><span class="delimiter">)</span>

  private var <a title="String" id="org.http4s.server.blaze;Http1ServerStage.uri_=">uri</a>: <span title="String">String</span> = null
  private var <a title="String" id="org.http4s.server.blaze;Http1ServerStage.method_=">method</a>: <span title="String">String</span> = null
  private var <a title="Int" id="org.http4s.server.blaze;Http1ServerStage.minor_=">minor</a>: <span title="Int">Int</span> = -<span title="Int(-1)" class="int">1</span>
  private var <a title="Int" id="org.http4s.server.blaze;Http1ServerStage.major_=">major</a>: <span title="Int">Int</span> = -<span title="Int(-1)" class="int">1</span>
  private val <a title="scala.collection.mutable.ListBuffer[org.http4s.Header]" id="org.http4s.server.blaze;Http1ServerStage.headers">headers</a> = new <span title="scala.collection.mutable.ListBuffer[org.http4s.Header]">ListBuffer</span><span class="delimiter">[</span>Header<span class="delimiter">]</span>

  <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.trace<span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Http4sStage starting up&quot;)" class="string">Http4sStage starting up&quot;</span><span class="delimiter">)</span>

  final override protected def <a title="(buffer: java.nio.ByteBuffer)Option[java.nio.ByteBuffer]" id="org.http4s.server.blaze;Http1ServerStage.doParseContent">doParseContent</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="org.http4s.server.blaze;Http1ServerStage.doParseContent.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Option[java.nio.ByteBuffer]">Option</span><span class="delimiter">[</span>ByteBuffer<span class="delimiter">]</span> = <span title="(x: java.nio.ByteBuffer)Option[java.nio.ByteBuffer]">Option</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze.Http1ServerStage" title="(x$1: java.nio.ByteBuffer)java.nio.ByteBuffer">parseContent</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.doParseContent.buffer" title="java.nio.ByteBuffer">buffer</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">// Will act as our loop</span>
  override def <a title="()Unit" id="org.http4s.server.blaze;Http1ServerStage.stageStartup">stageStartup</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.debug<span title="(x$1: String)Unit" class="delimiter">(</span><span title="String(&quot;Starting HTTP pipeline&quot;)" class="string">&quot;Starting HTTP pipeline&quot;</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.requestLoop" title="()Unit">requestLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="()Unit" id="org.http4s.server.blaze;Http1ServerStage.requestLoop">requestLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#org.http4s.server.blaze.Http1ServerStage" title="(size: Int, timeout: scala.concurrent.duration.Duration)scala.concurrent.Future[java.nio.ByteBuffer]">channelRead</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: scala.util.Try[java.nio.ByteBuffer] =&gt; Unit)(implicit executor: scala.concurrent.ExecutionContext)Unit">onComplete</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.reqLoopCallback" title="(buff: scala.util.Try[java.nio.ByteBuffer])Unit">reqLoopCallback</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="=&gt; scala.concurrent.ExecutionContext">trampoline</span><span class="delimiter">)</span>

  private def <a title="(buff: scala.util.Try[java.nio.ByteBuffer])Unit" id="org.http4s.server.blaze;Http1ServerStage.reqLoopCallback">reqLoopCallback</a><span class="delimiter">(</span><span title="scala.util.Try[java.nio.ByteBuffer]">buff</span>: <span title="scala.util.Try[java.nio.ByteBuffer]">Try</span><span class="delimiter">[</span>ByteBuffer<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="scala.util.Try[java.nio.ByteBuffer]">buff</span> match <span class="delimiter">{</span>
    case Success<span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span><span class="delimiter">)</span> =&gt;
      <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.trace <span title="Unit" class="delimiter">{</span>
        <span title="java.nio.ByteBuffer">buff</span>.<span title="()java.nio.Buffer">mark</span><span class="delimiter">(</span><span class="delimiter">)</span>
        val <a title="StringBuilder" id="org.http4s.server.blaze;Http1ServerStage.reqLoopCallback.sb">sb</a> = new <span title="StringBuilder">StringBuilder</span>
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span><span class="delimiter">)</span> <span class="comment">/// ------- Only for tracing purposes!</span>
        while<span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span>.<span title="()Boolean">hasRemaining</span><span class="delimiter">)</span> <a href="#org.http4s.server.blaze;Http1ServerStage.reqLoopCallback.sb" title="StringBuilder">sb</a>.<span title="(x: Char)StringBuilder">append</span><a href="#org.http4s.server.blaze;Http1ServerStage.reqLoopCallback.while$1" title="()Unit" class="delimiter">(</a><span title="java.nio.ByteBuffer">buff</span>.<span title="()Byte">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Char">toChar</span><span class="delimiter">)</span>

        <span title="java.nio.ByteBuffer">buff</span>.<span title="()java.nio.Buffer">reset</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Received request\\n&quot;)">Received request\n$</span><span class="delimiter">{</span><a href="#org.http4s.server.blaze;Http1ServerStage.reqLoopCallback.sb" title="StringBuilder">sb</a>.<span title="()String">result</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>
      <span class="delimiter">}</span>

      try <span class="delimiter">{</span>
        if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze.Http1ServerStage" title="()Boolean">requestLineComplete</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze.Http1ServerStage" title="(x$1: java.nio.ByteBuffer)Boolean">parseRequestLine</a><span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#org.http4s.server.blaze;Http1ServerStage.requestLoop" title="()Unit">requestLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>
          return
        <span class="delimiter">}</span>
        if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze.Http1ServerStage" title="()Boolean">headersComplete</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze.Http1ServerStage" title="(x$1: java.nio.ByteBuffer)Boolean">parseHeaders</a><span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#org.http4s.server.blaze;Http1ServerStage.requestLoop" title="()Unit">requestLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>
          return
        <span class="delimiter">}</span>
        <span class="comment">// we have enough to start the request</span>
        <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest" title="(buffer: java.nio.ByteBuffer)Unit">runRequest</a><span class="delimiter">(</span><span title="java.nio.ByteBuffer">buff</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      catch <span class="delimiter">{</span>
        case <span title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException">t</span>: <span title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException">ParserException</span> =&gt; <a href="#org.http4s.server.blaze;Http1ServerStage.badMessage" title="(msg: String, t: org.http4s.blaze.http.http_parser.BaseExceptions.ParserException, req: org.http4s.Request)Unit">badMessage</a><span class="delimiter">(</span><span title="String(&quot;Error parsing status or headers in requestLoop()&quot;)" class="string">&quot;Error parsing status or headers in requestLoop()&quot;</span>, <span title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException">t</span>, <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="(method: org.http4s.Method, uri: org.http4s.Uri, httpVersion: org.http4s.HttpVersion, headers: org.http4s.Headers, body: org.http4s.EntityBody, attributes: org.http4s.AttributeMap)org.http4s.Request">Request</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <span title="Throwable">t</span>: <span title="Throwable">Throwable</span>       =&gt; <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.fatalError" title="(t: Throwable, msg: String)Unit">fatalError</a><span class="delimiter">(</span><span title="Throwable">t</span>, <span title="String(&quot;error in requestLoop()&quot;)" class="string">&quot;error in requestLoop()&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    case Failure<span class="delimiter">(</span><span title="org.http4s.blaze.pipeline.Command.type">Cmd</span>.<span title="org.http4s.blaze.pipeline.Command.EOF.type">EOF</span><span class="delimiter">)</span> =&gt; <a href="#org.http4s.server.blaze;Http1ServerStage.stageShutdown" title="()Unit">stageShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
    case Failure<span class="delimiter">(</span><span title="Throwable">t</span><span class="delimiter">)</span>       =&gt; <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.fatalError" title="(t: Throwable, msg: String)Unit">fatalError</a><span class="delimiter">(</span><span title="Throwable">t</span>, <span title="String(&quot;Error in requestLoop()&quot;)" class="string">&quot;Error in requestLoop()&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  final protected def <a title="(body: org.http4s.EntityBody)Option[org.http4s.Request]" id="org.http4s.server.blaze;Http1ServerStage.collectMessage">collectMessage</a><span class="delimiter">(</span><a title="org.http4s.EntityBody" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.body">body</a>: <span title="org.http4s.EntityBody">EntityBody</span><span class="delimiter">)</span>: <span title="Option[org.http4s.Request]">Option</span><span class="delimiter">[</span>Request<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="org.http4s.Headers" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.h">h</a> = <a href="../../../../../http4s-core/org/http4s/Headers.scala.html#org.http4s.Headers.apply(d220169851)" title="(headers: List[org.http4s.Header])org.http4s.Headers">Headers</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.headers" title="=&gt; scala.collection.mutable.ListBuffer[org.http4s.Header]">headers</a>.<span title="()List[org.http4s.Header]">result</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.headers" title="=&gt; scala.collection.mutable.ListBuffer[org.http4s.Header]">headers</a>.<span title="()Unit">clear</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="org.http4s.HttpVersion" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.protocol">protocol</a> = if <span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.minor_=" title="=&gt; Int">minor</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../../../http4s-core/org/http4s/HttpVersion.scala.html#org.http4s.HttpVersion" title="org.http4s.HttpVersion.type">HttpVersion</a>.<a href="../../../../../http4s-core/org/http4s/HttpVersion.scala.html#org.http4s.HttpVersion.HTTP/1.1" title="=&gt; org.http4s.HttpVersion">`HTTP/1.1`</a> else <a href="../../../../../http4s-core/org/http4s/HttpVersion.scala.html#org.http4s.HttpVersion" title="org.http4s.HttpVersion.type">HttpVersion</a>.<a href="../../../../../http4s-core/org/http4s/HttpVersion.scala.html#org.http4s.HttpVersion.HTTP/1.0" title="=&gt; org.http4s.HttpVersion">`HTTP/1.0`</a>
    <span class="delimiter">(</span>for <span class="delimiter">{</span>
      <a title="org.http4s.Method" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.method">method</a> &lt;- <a href="../../../../../http4s-core/org/http4s/Method.scala.html#org.http4s.Method" title="org.http4s.Method.type">Method</a>.<a href="../../../../../http4s-core/org/http4s/Method.scala.html#org.http4s.Method.fromString" title="(s: String)org.http4s.ParseResult[org.http4s.Method]">fromString</a><span title="(g: org.http4s.Method =&gt; scalaz.\/[org.http4s.ParseFailure,Some[org.http4s.Request]])scalaz.\/[org.http4s.ParseFailure,Some[org.http4s.Request]]" class="delimiter">(</span>this.<a href="#org.http4s.server.blaze;Http1ServerStage.method_=" title="=&gt; String">method</a><span class="delimiter">)</span>
      <a title="org.http4s.Uri" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.$anonfun.uri">uri</a> &lt;- <a href="../../../../../http4s-core/org/http4s/Uri.scala.html#org.http4s.Uri" title="org.http4s.Uri.type">Uri</a>.<a href="../../../../../http4s-core/org/http4s/Uri.scala.html#org.http4s.Uri.fromString" title="(s: String)org.http4s.ParseResult[org.http4s.Uri]">fromString</a><span title="(g: org.http4s.Uri =&gt; Some[org.http4s.Request])scalaz.\/[org.http4s.ParseFailure,Some[org.http4s.Request]]" class="delimiter">(</span>this.<a href="#org.http4s.server.blaze;Http1ServerStage.uri_=" title="=&gt; String">uri</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> yield <span class="delimiter">{</span>
      <span title="(x: org.http4s.Request)Some[org.http4s.Request]">Some</span><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="(method: org.http4s.Method, uri: org.http4s.Uri, httpVersion: org.http4s.HttpVersion, headers: org.http4s.Headers, body: org.http4s.EntityBody, attributes: org.http4s.AttributeMap)org.http4s.Request">Request</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.method" title="org.http4s.Method">method</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.$anonfun.uri" title="org.http4s.Uri">uri</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.protocol" title="org.http4s.HttpVersion">protocol</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.h" title="org.http4s.Headers">h</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.body" title="org.http4s.EntityBody">body</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.requestAttrs" title="=&gt; org.http4s.AttributeMap">requestAttrs</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="(x: org.http4s.ParseFailure =&gt; Option[org.http4s.Request])Option[org.http4s.Request]">valueOr</span> <span class="delimiter">{</span> <a title="org.http4s.ParseFailure" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.e">e</a> =&gt;
      <a href="#org.http4s.server.blaze;Http1ServerStage.badMessage" title="(msg: String, t: org.http4s.blaze.http.http_parser.BaseExceptions.ParserException, req: org.http4s.Request)Unit">badMessage</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.e" title="org.http4s.ParseFailure">e</a>.<a href="../../../../../http4s-core/org/http4s/ParseFailure.scala.html#org.http4s;ParseFailure.details" title="=&gt; String">details</a>, new <span title="org.http4s.blaze.http.http_parser.BaseExceptions.BadRequest">BadRequest</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.e" title="org.http4s.ParseFailure">e</a>.<a href="../../../../../http4s-core/org/http4s/ParseFailure.scala.html#org.http4s;ParseFailure.sanitized" title="=&gt; String">sanitized</a><span class="delimiter">)</span>, <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="(method: org.http4s.Method, uri: org.http4s.Uri, httpVersion: org.http4s.HttpVersion, headers: org.http4s.Headers, body: org.http4s.EntityBody, attributes: org.http4s.AttributeMap)org.http4s.Request">Request</a><a title="org.http4s.Request" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.qual$1" class="delimiter">(</a><span class="delimiter">)</span>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.copy$default$1" title="org.http4s.Method" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.x$10">copy</a><span class="delimiter">(</span>httpVersion = <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage.protocol" title="org.http4s.HttpVersion" id="org.http4s.server.blaze;Http1ServerStage.collectMessage.$anonfun.x$5">protocol</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(buffer: java.nio.ByteBuffer)Unit" id="org.http4s.server.blaze;Http1ServerStage.runRequest">runRequest</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="org.http4s.server.blaze;Http1ServerStage.runRequest.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.body" title="(org.http4s.EntityBody, () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])" class="delimiter">(</a><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.x$2" title="org.http4s.EntityBody" id="org.http4s.server.blaze;Http1ServerStage.runRequest.body">body</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.x$2" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]" id="org.http4s.server.blaze;Http1ServerStage.runRequest.cleanup">cleanup</a><span class="delimiter">)</span> = <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.collectBodyFromParser" title="(buffer: java.nio.ByteBuffer)(org.http4s.EntityBody, () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])">collectBodyFromParser</a><span title="(org.http4s.EntityBody, () =&gt; scala.concurrent.Future[java.nio.ByteBuffer]) @unchecked" class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.buffer" title="java.nio.ByteBuffer">buffer</a><span class="delimiter">)</span>

    <a href="#org.http4s.server.blaze;Http1ServerStage.collectMessage" title="(body: org.http4s.EntityBody)Option[org.http4s.Request]">collectMessage</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.body" title="org.http4s.EntityBody">body</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="org.http4s.Request" id="org.http4s.server.blaze;Http1ServerStage.runRequest.req">req</a><span class="delimiter">)</span> =&gt;
        <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; scalaz.concurrent.Task[Option[org.http4s.Response]])(implicit pool: java.util.concurrent.ExecutorService)scalaz.concurrent.Task[Option[org.http4s.Response]]">fork</span><span class="delimiter">(</span><a href="../../../../../http4s-server/org/http4s/server/Service.scala.html#org.http4s.server;Service.apply" title="(a: org.http4s.Request)scalaz.concurrent.Task[Option[org.http4s.Response]]">service</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze.Http1ServerStage.<init>$default$3" title="java.util.concurrent.ExecutorService">pool</a><span class="delimiter">)</span>
          .<span title="(f: scalaz.\/[Throwable,Option[org.http4s.Response]] =&gt; Unit)Unit">runAsync</span> <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
          case \/-<span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="org.http4s.Response">resp</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a>, <span title="org.http4s.Response">resp</span>, <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>

          case \/-<span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>       =&gt;
            <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a>, <a href="../../../../../http4s-core/org/http4s/ResponseBuilder.scala.html#org.http4s.ResponseBuilder" title="org.http4s.ResponseBuilder.type">ResponseBuilder</a>.<a href="../../../../../http4s-core/org/http4s/ResponseBuilder.scala.html#org.http4s.ResponseBuilder.notFound" title="(request: org.http4s.Request)scalaz.concurrent.Task[org.http4s.Response]">notFound</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a><span class="delimiter">)</span>.<span title="=&gt; org.http4s.Response">run</span>, <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>

          case -\/<span class="delimiter">(</span><a title="Throwable" id="org.http4s.server.blaze;Http1ServerStage.runRequest.$anonfun.t">t</a><span class="delimiter">)</span>    =&gt;
            <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.error<span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.$anonfun.t" title="Throwable">t</a><span class="delimiter">)</span><span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Error running route: &quot;)">Error running route: $</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            val <span title="org.http4s.Response">resp</span> = <a href="../../../../../http4s-core/org/http4s/ResponseBuilder.scala.html#org.http4s.ResponseBuilder.apply(a16c282657)" title="(status: org.http4s.Status, body: String, headers: org.http4s.Header*)(implicit w: org.http4s.EntityEncoder[String])scalaz.concurrent.Task[org.http4s.Response]">ResponseBuilder</a><a href="../../../../../http4s-core/org/http4s/EntityEncoder.scala.html#org.http4s;EntityEncoderInstances.stringEncoder" title="implicit org.http4s.EntityEncoderInstances.stringEncoder : (implicit charset: org.http4s.Charset)org.http4s.EntityEncoder[String]" class="delimiter">(</a><a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status.InternalServerError" title="=&gt; org.http4s.Status">InternalServerError</a>, <span title="String(&quot;500 Internal Service Error\n&quot;)" class="string">&quot;500 Internal Service Error\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.$anonfun.t" title="Throwable">t</a>.<span title="()String">getMessage</span><span class="delimiter">)</span>
              .<span title="=&gt; org.http4s.Response">run</span>
              .<a href="../../../../../http4s-core/org/http4s/MessageOps.scala.html#org.http4s;MessageOps.withHeaders(2420c70992)" title="(headers: org.http4s.Header*)org.http4s.Response">withHeaders</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Recurring.apply(ca1e975507)" title="(first: org.http4s.Header.Connection.HeaderT#Value, more: org.http4s.Header.Connection.HeaderT#Value*)org.http4s.Header.Connection.HeaderT">Connection</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax" title="implicit org.http4s.util.CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax : (cs: CharSequence)org.http4s.util.CaseInsensitiveStringOps" class="string">&quot;close&quot;</a>.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringOps.ci" title="=&gt; org.http4s.util.CaseInsensitiveString">ci</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.req" title="org.http4s.Request">req</a>, <span title="org.http4s.Response">resp</span>, <a href="#org.http4s.server.blaze;Http1ServerStage.runRequest.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>   <span class="comment">// will terminate the connection due to connection: close header</span>
        <span class="delimiter">}</span>

      case <span title="None.type">None</span> =&gt; <span class="comment">// NOOP, this should be handled in the collectMessage method</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  protected def <a title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit" id="org.http4s.server.blaze;Http1ServerStage.renderResponse">renderResponse</a><span class="delimiter">(</span><a title="org.http4s.Request" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.req">req</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a>, <a title="org.http4s.Response" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.resp">resp</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response" title="org.http4s.Response">Response</a>, <a title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyCleanup">bodyCleanup</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Future<span class="delimiter">[</span>ByteBuffer<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.http4s.util.StringWriter" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.rr">rr</a> = new <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;StringWriter" title="org.http4s.util.StringWriter">StringWriter</a><span class="delimiter">(</span><span title="Int(512)" class="int">512</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(98e2fb2962)" title="(r: org.http4s.HttpVersion)(implicit evidence$3: org.http4s.util.Renderer[org.http4s.HttpVersion])rr.type">&lt;&lt;</a> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.httpVersion" title="=&gt; org.http4s.HttpVersion">httpVersion</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char(' ')" class="char">' '</span> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(361630288b)" title="(int: Int)rr.type">&lt;&lt;</a> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.status" title="=&gt; org.http4s.Status">status</a>.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s;Status.code" title="=&gt; Int">code</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char(' ')" class="char">' '</span> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(8d31e5b642)" title="(s: String)rr.type">&lt;&lt;</a> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.status" title="=&gt; org.http4s.Status">status</a>.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s;Status.reason" title="=&gt; String">reason</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char('\r')" class="char">'\r'</span> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char('\n')" class="char">'\n'</span>

    val <a title="Option[org.http4s.Header.Transfer-Encoding]" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.respTransferCoding">respTransferCoding</a> = <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.encodeHeaders" title="(headers: org.http4s.Headers, rr: org.http4s.util.Writer)Option[org.http4s.Header.Transfer-Encoding]">encodeHeaders</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.headers" title="=&gt; org.http4s.Headers">headers</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a><span class="delimiter">)</span>    <span class="comment">// kind of tricky method returns Option[Transfer-Encoding]</span>
    val <a title="Option[org.http4s.Header.Connection.HeaderT]" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.respConn">respConn</a> = <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header.Connection" title="org.http4s.Header.Connection.type">Connection</a>.<a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Recurring.from" title="(headers: org.http4s.Headers)Option[org.http4s.Header.Connection.HeaderT]">from</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.headers" title="=&gt; org.http4s.Headers">headers</a><span class="delimiter">)</span>

    <span class="comment">// Need to decide which encoder and if to close on finish</span>
    val <a title="Boolean" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish">closeOnFinish</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.respConn" title="Option[org.http4s.Header.Connection.HeaderT]">respConn</a>.<span title="(f: org.http4s.Header.Connection.HeaderT =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish.$anonfun.x$3" title="org.http4s.Header.Connection.HeaderT">_</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header;Connection.hasClose" title="=&gt; Boolean">hasClose</a><span class="delimiter">)</span>.<span title="(alternative: =&gt; Option[Boolean])Option[Boolean]">orElse</span> <span class="delimiter">{</span>
        <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header" title="org.http4s.Header.type">Header</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header.Connection" title="org.http4s.Header.Connection.type">Connection</a>.<a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Recurring.from" title="(headers: org.http4s.Headers)Option[org.http4s.Header.Connection.HeaderT]">from</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.headers" title="=&gt; org.http4s.Headers">headers</a><span class="delimiter">)</span>.<span title="(f: org.http4s.Header.Connection.HeaderT =&gt; Boolean)Option[Boolean]">map</span><span class="delimiter">(</span><a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.checkCloseConnection" title="(conn: org.http4s.Header.Connection, rr: org.http4s.util.StringWriter)Boolean">checkCloseConnection</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish.$anonfun.x$4" title="org.http4s.Header.Connection.HeaderT">_</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.minor_=" title="=&gt; Int">minor</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>   <span class="comment">// Finally, if nobody specifies, http 1.0 defaults to close</span>

    <span class="comment">// choose a body encoder. Will add a Transfer-Encoding header if necessary</span>
    val <a title="Option[org.http4s.Header.Content-Length.HeaderT]" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.lengthHeader">lengthHeader</a> = <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header.Content-Length" title="org.http4s.Header.Content-Length.type">`Content-Length`</a>.<a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Singleton.from" title="(headers: org.http4s.Headers)Option[org.http4s.Header.Content-Length.HeaderT]">from</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.headers" title="=&gt; org.http4s.Headers">headers</a><span class="delimiter">)</span>

    val <a title="org.http4s.blaze.util.ProcessWriter" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyEncoder">bodyEncoder</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.status" title="=&gt; org.http4s.Status">status</a>.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s;Status.isEntityAllowed" title="=&gt; Boolean">isEntityAllowed</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.lengthHeader" title="Option[org.http4s.Header.Content-Length.HeaderT]">lengthHeader</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.respTransferCoding" title="Option[org.http4s.Header.Transfer-Encoding]">respTransferCoding</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// We don't have a body so we just get the headers</span>

        <span class="comment">// add KeepAlive to Http 1.0 responses if the header isn't already present</span>
        if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish" title="Boolean">closeOnFinish</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.server.blaze;Http1ServerStage.minor_=" title="=&gt; Int">minor</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.respConn" title="Option[org.http4s.Header.Connection.HeaderT]">respConn</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(8d31e5b642)" title="(s: String)rr.type">&lt;&lt;</a> <span title="String(&quot;Connection:keep-alive\r\n\r\n&quot;)" class="string">&quot;Connection:keep-alive\r\n\r\n&quot;</span>
        else <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char('\r')" class="char">'\r'</span> <a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;Writer.<<(d41d751f45)" title="(char: Char)rr.type">&lt;&lt;</a> <span title="Char('\n')" class="char">'\n'</span>

        val <a title="java.nio.ByteBuffer" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyEncoder.b">b</a> = <span title="java.nio.ByteBuffer.type">ByteBuffer</span>.<span title="(x$1: Array[Byte])java.nio.ByteBuffer">wrap</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a>.<a href="../../../../../http4s-core/org/http4s/util/Renderable.scala.html#org.http4s.util;StringWriter.result" title="()String">result</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.nio.charset.Charset)Array[Byte]">getBytes</span><span class="delimiter">(</span><span title="java.nio.charset.StandardCharsets.type">StandardCharsets</span>.<span title="java.nio.charset.Charset">US_ASCII</span><span class="delimiter">)</span><span class="delimiter">)</span>
        new <a href="../../../../../http4s-blazecore/org/http4s/blaze/BodylessWriter.scala.html#org.http4s.blaze;BodylessWriter" title="org.http4s.blaze.BodylessWriter">BodylessWriter</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyEncoder.b" title="java.nio.ByteBuffer">b</a>, this, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish" title="Boolean">closeOnFinish</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.ec" title="=&gt; scala.concurrent.ExecutionContextExecutorService">ec</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      else <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.getEncoder(7d809242e7)" title="(connectionHeader: Option[org.http4s.Header.Connection], bodyEncoding: Option[org.http4s.Header.Transfer-Encoding], lengthHeader: Option[org.http4s.Header.Content-Length], trailer: scalaz.concurrent.Task[org.http4s.Headers], rr: org.http4s.util.StringWriter, minor: Int, closeOnFinish: Boolean)org.http4s.blaze.util.ProcessWriter">getEncoder</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.respConn" title="Option[org.http4s.Header.Connection.HeaderT]">respConn</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.respTransferCoding" title="Option[org.http4s.Header.Transfer-Encoding]">respTransferCoding</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.lengthHeader" title="Option[org.http4s.Header.Content-Length.HeaderT]">lengthHeader</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Message.trailerHeaders" title="=&gt; scalaz.concurrent.Task[org.http4s.Headers]">trailerHeaders</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.rr" title="org.http4s.util.StringWriter">rr</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.minor_=" title="=&gt; Int">minor</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish" title="Boolean">closeOnFinish</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyEncoder" title="org.http4s.blaze.util.ProcessWriter">bodyEncoder</a>.<a href="../../../../../http4s-blazecore/org/http4s/blaze/util/ProcessWriter.scala.html#org.http4s.blaze.util;ProcessWriter.writeProcess" title="(p: scalaz.stream.Process[scalaz.concurrent.Task,scodec.bits.ByteVector])scalaz.concurrent.Task[Unit]">writeProcess</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.body" title="=&gt; org.http4s.EntityBody">body</a><span class="delimiter">)</span>.<span title="(f: scalaz.\/[Throwable,Unit] =&gt; Unit)Unit">runAsync</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.x0$2" title="Unit" class="delimiter">{</a>
      case \/-<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
        if <span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.closeOnFinish" title="Boolean">closeOnFinish</a> <span title="(x: Boolean)Boolean">||</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyEncoder" title="org.http4s.blaze.util.ProcessWriter">bodyEncoder</a>.<a href="../../../../../http4s-blazecore/org/http4s/blaze/util/ProcessWriter.scala.html#org.http4s.blaze.util;ProcessWriter.requireClose" title="()Boolean">requireClose</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#org.http4s.server.blaze;Http1ServerStage.closeConnection" title="()Unit">closeConnection</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.trace<span title="(x$1: String)Unit" class="delimiter">(</span><span title="String(&quot;Request/route requested closing connection.&quot;)" class="string">&quot;Request/route requested closing connection.&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.bodyCleanup" title="()scala.concurrent.Future[java.nio.ByteBuffer]">bodyCleanup</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(f: scala.util.Try[java.nio.ByteBuffer] =&gt; Unit)(implicit executor: scala.concurrent.ExecutionContext)Unit">onComplete</span> <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.$anonfun.x0$3" title="Unit" class="delimiter">{</a>
          case <a title="scala.util.Success[java.nio.ByteBuffer]" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.$anonfun.s">s</a>@ Success<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <span class="comment">// Serve another connection</span>
            <a href="#org.http4s.server.blaze.Http1ServerStage" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#org.http4s.server.blaze;Http1ServerStage.reqLoopCallback" title="(buff: scala.util.Try[java.nio.ByteBuffer])Unit">reqLoopCallback</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.$anonfun.s" title="scala.util.Success[java.nio.ByteBuffer]">s</a><span class="delimiter">)</span>

          case Failure<span class="delimiter">(</span><a title="Throwable" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.$anonfun.t">t</a><span class="delimiter">)</span> =&gt; <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.fatalError" title="(t: Throwable, msg: String)Unit">fatalError</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.$anonfun.t" title="Throwable">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">(</span><span title="=&gt; scala.concurrent.ExecutionContext">directec</span><span class="delimiter">)</span>


      case -\/<span class="delimiter">(</span><a title="Throwable" id="org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.t">t</a><span class="delimiter">)</span> =&gt;
        <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.error<span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse.$anonfun.t" title="Throwable">t</a><span class="delimiter">)</span><span title="(x$1: String, x$2: Throwable)Unit" class="delimiter">(</span><span title="String(&quot;Error writing body&quot;)" class="string">&quot;Error writing body&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="()Unit" id="org.http4s.server.blaze;Http1ServerStage.closeConnection">closeConnection</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.debug<span title="(x$1: String)Unit" class="delimiter">(</span><span title="String(&quot;closeConnection()&quot;)" class="string">&quot;closeConnection()&quot;</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.stageShutdown" title="()Unit">stageShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="(cmd: org.http4s.blaze.pipeline.Command.OutboundCommand)Unit">sendOutboundCommand</a><span class="delimiter">(</span><span title="org.http4s.blaze.pipeline.Command.type">Cmd</span>.<span title="org.http4s.blaze.pipeline.Command.Disconnect.type">Disconnect</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override protected def <a title="()Unit" id="org.http4s.server.blaze;Http1ServerStage.stageShutdown">stageShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.debug<span title="(x$1: String)Unit" class="delimiter">(</span><span title="String(&quot;Shutting down HttpPipeline&quot;)" class="string">&quot;Shutting down HttpPipeline&quot;</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="()Unit">shutdownParser</a><span class="delimiter">(</span><span class="delimiter">)</span>
    super.<span title="()Unit">stageShutdown</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/////////////////// Error handling /////////////////////////////////////////</span>

  protected def <a title="(msg: String, t: org.http4s.blaze.http.http_parser.BaseExceptions.ParserException, req: org.http4s.Request)Unit" id="org.http4s.server.blaze;Http1ServerStage.badMessage">badMessage</a><span class="delimiter">(</span><a title="String" id="org.http4s.server.blaze;Http1ServerStage.badMessage.msg">msg</a>: <span title="String">String</span>, <a title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException" id="org.http4s.server.blaze;Http1ServerStage.badMessage.t">t</a>: <span title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException">ParserException</span>, <a title="org.http4s.Request" id="org.http4s.server.blaze;Http1ServerStage.badMessage.req">req</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.http4s.Response" id="org.http4s.server.blaze;Http1ServerStage.badMessage.resp">resp</a> = <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response" title="(status: org.http4s.Status, httpVersion: org.http4s.HttpVersion, headers: org.http4s.Headers, body: org.http4s.EntityBody, attributes: org.http4s.AttributeMap)org.http4s.Response">Response</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status" title="org.http4s.Status.type">Status</a>.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status.BadRequest" title="=&gt; org.http4s.Status">BadRequest</a><span class="delimiter">)</span>.<a href="../../../../../http4s-core/org/http4s/MessageOps.scala.html#org.http4s;MessageOps.withHeaders(2420c70992)" title="(headers: org.http4s.Header*)org.http4s.Response">withHeaders</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Recurring.apply(ca1e975507)" title="(first: org.http4s.Header.Connection.HeaderT#Value, more: org.http4s.Header.Connection.HeaderT#Value*)org.http4s.Header.Connection.HeaderT">Connection</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax" title="implicit org.http4s.util.CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax : (cs: CharSequence)org.http4s.util.CaseInsensitiveStringOps" class="string">&quot;close&quot;</a>.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringOps.ci" title="=&gt; org.http4s.util.CaseInsensitiveString">ci</a><span class="delimiter">)</span>, <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header;Content-Length" title="(length: Int)org.http4s.Header.Content-Length">`Content-Length`</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.badMessage.req" title="org.http4s.Request">req</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.badMessage.resp" title="org.http4s.Response">resp</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="scala.concurrent.Future.type">Future</span>.<span title="(result: java.nio.ByteBuffer)scala.concurrent.Future[java.nio.ByteBuffer]">successful</span><span class="delimiter">(</span><span title="=&gt; java.nio.ByteBuffer">emptyBuffer</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.debug<span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.badMessage.t" title="org.http4s.blaze.http.http_parser.BaseExceptions.ParserException">t</a><span class="delimiter">)</span><span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Bad Request: &quot;)">Bad Request: $</span><a href="#org.http4s.server.blaze;Http1ServerStage.badMessage.msg" title="String">msg</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/////////////////// Stateful methods for the HTTP parser ///////////////////</span>
  final override protected def <a title="(name: String, value: String)Boolean" id="org.http4s.server.blaze;Http1ServerStage.headerComplete">headerComplete</a><span class="delimiter">(</span><a title="String" id="org.http4s.server.blaze;Http1ServerStage.headerComplete.name">name</a>: <span title="String">String</span>, <a title="String" id="org.http4s.server.blaze;Http1ServerStage.headerComplete.value">value</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.trace<span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Received header \'&quot;)">Received header '$</span><a href="#org.http4s.server.blaze;Http1ServerStage.headerComplete.name" title="String">name</a><span title="String(&quot;: &quot;)">: $</span><a href="#org.http4s.server.blaze;Http1ServerStage.headerComplete.value" title="String">value</a><span title="String(&quot;\'&quot;)" class="string">'&quot;</span><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;Http1ServerStage.headers" title="=&gt; scala.collection.mutable.ListBuffer[org.http4s.Header]">headers</a> <span title="(x: org.http4s.Header)Http1ServerStage.this.headers.type">+=</span> <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header.apply" title="(name: String, value: String)org.http4s.Header.Raw">Header</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;Http1ServerStage.headerComplete.name" title="String">name</a>, <a href="#org.http4s.server.blaze;Http1ServerStage.headerComplete.value" title="String">value</a><span class="delimiter">)</span>
    false
  <span class="delimiter">}</span>

  final override protected def <a title="(methodString: String, uri: String, scheme: String, majorversion: Int, minorversion: Int)Boolean" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine">submitRequestLine</a><span class="delimiter">(</span><a title="String" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine.methodString">methodString</a>: <span title="String">String</span>,
                                           <a title="String" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine.uri">uri</a>: <span title="String">String</span>,
                                           <a title="String" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine.scheme">scheme</a>: <span title="String">String</span>,
                                           <a title="Int" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine.majorversion">majorversion</a>: <span title="Int">Int</span>,
                                           <a title="Int" id="org.http4s.server.blaze;Http1ServerStage.submitRequestLine.minorversion">minorversion</a>: <span title="Int">Int</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.server.blaze.Http1ServerStage" title="=&gt; org.log4s.Logger">logger</a>.trace<span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Received request(&quot;)">Received request($</span><a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.methodString" title="String">methodString</a><span title="String(&quot; &quot;)"> $</span><a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.uri" title="String">uri</a><span title="String(&quot; &quot;)"> $</span><a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.scheme" title="String">scheme</a><span title="String(&quot;/&quot;)">/$</span><a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.majorversion" title="Int">majorversion</a><span title="String(&quot;.&quot;)">.$</span><a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.minorversion" title="Int">minorversion</a><span title="String(&quot;)&quot;)" class="string">)&quot;</span><span class="delimiter">)</span>
    this.<a href="#org.http4s.server.blaze;Http1ServerStage.uri_=" title="(x$1: String)Unit">uri</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.uri" title="String">uri</a>
    this.<a href="#org.http4s.server.blaze;Http1ServerStage.method_=" title="(x$1: String)Unit">method</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.methodString" title="String">methodString</a>
    this.<a href="#org.http4s.server.blaze;Http1ServerStage.major_=" title="(x$1: Int)Unit">major</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.majorversion" title="Int">majorversion</a>
    this.<a href="#org.http4s.server.blaze;Http1ServerStage.minor_=" title="(x$1: Int)Unit">minor</a> = <a href="#org.http4s.server.blaze;Http1ServerStage.submitRequestLine.minorversion" title="Int">minorversion</a>
    false
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
