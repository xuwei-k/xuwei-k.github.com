<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>http4s-blazeserver/org/http4s/server/blaze/WebSocketSupport.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package org.http4s.server.blaze

import java.nio.ByteBuffer
import java.nio.charset.<span title="java.nio.charset.StandardCharsets.type">StandardCharsets</span>._

import org.http4s.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header" title="org.http4s.Header.type">Header</a>._
import org.http4s._
import org.http4s.blaze.http.websocket.<span class="delimiter">{</span>WSFrameAggregator, WebSocketDecoder<span class="delimiter">}</span>
import org.http4s.websocket.WebsocketHandshake
import org.http4s.blaze.pipeline.LeafBuilder
import org.http4s.blaze.websocket.Http4sWSStage
import org.http4s.util.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util.CaseInsensitiveString" title="org.http4s.util.CaseInsensitiveString.type">CaseInsensitiveString</a>._
import scodec.bits.ByteVector

import scala.util.<span class="delimiter">{</span>Failure, Success<span class="delimiter">}</span>
import scala.concurrent.Future

import scalaz.stream.Process

trait <a title="trait WebSocketSupport extends org.http4s.server.blaze.Http1ServerStage" id="org.http4s.server.blaze;WebSocketSupport">WebSocketSupport</a> extends <a href="Http1ServerStage.scala.html#org.http4s.server.blaze;Http1ServerStage" title="org.http4s.server.blaze.Http1ServerStage">Http1ServerStage</a> <span class="delimiter">{</span>
  override protected def <a title="(req: org.http4s.Request, resp: org.http4s.Response, cleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit" id="org.http4s.server.blaze;WebSocketSupport.renderResponse">renderResponse</a><span class="delimiter">(</span><a title="org.http4s.Request" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.req">req</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request" title="org.http4s.Request">Request</a>, <a title="org.http4s.Response" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.resp">resp</a>: <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response" title="org.http4s.Response">Response</a>, <a title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.cleanup">cleanup</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Future<span class="delimiter">[</span>ByteBuffer<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="Option[org.http4s.websocket.Websocket]" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.ws">ws</a> = <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.resp" title="org.http4s.Response">resp</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Response.attributes" title="=&gt; org.http4s.AttributeMap">attributes</a>.<a href="../../../../../http4s-core/org/http4s/AttributeMap.scala.html#org.http4s;AttributeMap.get" title="(k: org.http4s.AttributeKey[org.http4s.websocket.Websocket])Option[org.http4s.websocket.Websocket]">get</a><span class="delimiter">(</span>org.http4s.server.websocket.<a href="../../../../../http4s-server/org/http4s/server/websocket/package.scala.html#org.http4s.server.websocket.package.websocketKey" title="=&gt; org.http4s.AttributeKey[org.http4s.websocket.Websocket]">websocketKey</a><span class="delimiter">)</span>
    <a href="#org.http4s.server.blaze;WebSocketSupport" title="=&gt; org.log4s.Logger">logger</a>.debug<span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Websocket key: &quot;)">Websocket key: $</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.ws" title="Option[org.http4s.websocket.Websocket]">ws</a><span title="String(&quot;\\nRequest headers: &quot;)" class="string">\nRequest headers: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.headers" title="=&gt; org.http4s.Headers">headers</a><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.ws" title="Option[org.http4s.websocket.Websocket]">ws</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <span title="scala.collection.immutable.Iterable[(String, String)]">hdrs</span> =  <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Request.headers" title="=&gt; org.http4s.Headers">headers</a>.<span title="(f: org.http4s.Header =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[org.http4s.Headers,(String, String),scala.collection.immutable.Iterable[(String, String)]])scala.collection.immutable.Iterable[(String, String)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable.Coll,(String, String),scala.collection.immutable.Iterable[(String, String)]]" class="delimiter">(</span><a title="org.http4s.Header" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.hdrs.$anonfun.h">h</a>=&gt;<span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.hdrs.$anonfun.h" title="org.http4s.Header">h</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s;Header.name" title="=&gt; org.http4s.util.CaseInsensitiveString">name</a>.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveString.toString" title="()String">toString</a>,<a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.hdrs.$anonfun.h" title="org.http4s.Header">h</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s;Header.value" title="=&gt; String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><span title="org.http4s.websocket.WebsocketHandshake.type">WebsocketHandshake</span>.<span title="(headers: Traversable[(String, String)])Boolean">isWebSocketRequest</span><span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[(String, String)]">hdrs</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="org.http4s.websocket.WebsocketHandshake.type">WebsocketHandshake</span>.<span title="(headers: Traversable[(String, String)])Either[(Int, String),Seq[(String, String)]]">serverHandshake</span><span class="delimiter">(</span><span title="scala.collection.immutable.Iterable[(String, String)]">hdrs</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case Left<span class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.code">code</a>, <a title="String" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.msg">msg</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#org.http4s.server.blaze;WebSocketSupport" title="=&gt; org.log4s.Logger">logger</a>.info<span title="Unit" class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Invalid handshake &quot;)">Invalid handshake $</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.code" title="Int">code</a><span title="String(&quot;, &quot;)">, $</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.msg" title="String">msg</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            val <a title="scalaz.stream.Process0[scodec.bits.ByteVector]" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.body">body</a> = <span title="scalaz.stream.Process.type">Process</span>.<span title="(o: scodec.bits.ByteVector)scalaz.stream.Process0[scodec.bits.ByteVector]">emit</span><span class="delimiter">(</span><span title="(bytes: Array[Byte])scodec.bits.ByteVector">ByteVector</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.msg" title="String">msg</a>.<span title="()String">toString</span>.<span title="(x$1: java.nio.charset.Charset)Array[Byte]">getBytes</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>.<a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s;Message.charset" title="=&gt; org.http4s.Charset">charset</a>.<a href="../../../../../http4s-core/org/http4s/Charset.scala.html#org.http4s;Charset.nioCharset" title="=&gt; java.nio.charset.Charset">nioCharset</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            val <a title="org.http4s.Headers" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.headers">headers</a> = <a href="../../../../../http4s-core/org/http4s/Headers.scala.html#org.http4s.Headers.apply(fa7f6a29f7)" title="(headers: org.http4s.Header*)org.http4s.Headers">Headers</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header;Content-Length" title="(length: Int)org.http4s.Header.Content-Length">`Content-Length`</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.msg" title="String">msg</a>.<span title="()Int">length</span><span class="delimiter">)</span>,
                                   <a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Recurring.apply(ca1e975507)" title="(first: org.http4s.Header.Connection.HeaderT#Value, more: org.http4s.Header.Connection.HeaderT#Value*)org.http4s.Header.Connection.HeaderT">Connection</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax" title="implicit org.http4s.util.CaseInsensitiveStringSyntax.ToCaseInsensitiveStringSyntax : (cs: CharSequence)org.http4s.util.CaseInsensitiveStringOps" class="string">&quot;close&quot;</a>.<a href="../../../../../http4s-core/org/http4s/util/CaseInsensitiveString.scala.html#org.http4s.util;CaseInsensitiveStringOps.ci" title="=&gt; org.http4s.util.CaseInsensitiveString">ci</a><span class="delimiter">)</span>,
                                   <a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header" title="org.http4s.Header.type">Header</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header;Raw" title="(name: org.http4s.util.CaseInsensitiveString, value: String)org.http4s.Header.Raw">Raw</a><span class="delimiter">(</span><a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header" title="org.http4s.Header.type">Header</a>.<a href="../../../../../http4s-core/org/http4s/Header.scala.html#org.http4s.Header.Sec-WebSocket-Version" title="org.http4s.Header.Sec-WebSocket-Version.type">`Sec-WebSocket-Version`</a>.<a href="../../../../../http4s-core/org/http4s/HeaderKey.scala.html#org.http4s.HeaderKey;Internal.name" title="=&gt; org.http4s.util.CaseInsensitiveString">name</a>, <span title="String(&quot;13&quot;)" class="string">&quot;13&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

            val <a title="org.http4s.Response" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp">rsp</a> = <a href="../../../../../http4s-core/org/http4s/Message.scala.html#org.http4s.Response.apply$default$2" title="org.http4s.HttpVersion" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp.x$5">Response</a><span class="delimiter">(</span>status = <a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status" title="org.http4s.Status.type">Status</a>.<a href="../../../../../http4s-core/org/http4s/Status.scala.html#org.http4s.Status.BadRequest" title="org.http4s.Status" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp.x$1">BadRequest</a>, body = <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.body" title="scalaz.stream.Process0[scodec.bits.ByteVector] @scala.reflect.internal.annotations.uncheckedBounds" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp.x$2">body</a>, headers = <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.headers" title="org.http4s.Headers" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp.x$3">headers</a><span class="delimiter">)</span>
            super.<a href="Http1ServerStage.scala.html#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.rsp" title="org.http4s.Response">rsp</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>

          case Right<span class="delimiter">(</span><span title="Seq[(String, String)]">hdrs</span><span class="delimiter">)</span> =&gt;  <span class="comment">// Successful handshake</span>
            val <a title="StringBuilder" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.sb">sb</a> = new <span title="StringBuilder">StringBuilder</span>
            <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.sb" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><span title="String(&quot;HTTP/1.1 101 Switching Protocols\r\n&quot;)" class="string">&quot;HTTP/1.1 101 Switching Protocols\r\n&quot;</span><span class="delimiter">)</span>
            <span title="Seq[(String, String)]">hdrs</span>.<span title="(f: ((String, String)) =&gt; StringBuilder)Unit">foreach</span> <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.x0$1" title="StringBuilder" class="delimiter">{</a> case <span class="delimiter">(</span><a title="String" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.k">k</a>, <a title="String" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.sb" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.k" title="String">k</a><span class="delimiter">)</span>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span><span class="delimiter">)</span>.<span title="(s: String)StringBuilder">append</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.v" title="String">v</a><span class="delimiter">)</span>.<span title="(x: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char('\r')" class="char">'\r'</span><span class="delimiter">)</span>.<span title="(x: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char('\n')" class="char">'\n'</span><span class="delimiter">)</span> <span class="delimiter">}</span>
            <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.sb" title="StringBuilder">sb</a>.<span title="(x: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char('\r')" class="char">'\r'</span><span class="delimiter">)</span>.<span title="(x: Char)StringBuilder">append</span><span class="delimiter">(</span><span title="Char('\n')" class="char">'\n'</span><span class="delimiter">)</span>

            <span class="comment">// write the accept headers and reform the pipeline</span>
            <a href="#org.http4s.server.blaze;WebSocketSupport" title="(data: java.nio.ByteBuffer)scala.concurrent.Future[Unit]">channelWrite</a><span class="delimiter">(</span><span title="java.nio.ByteBuffer.type">ByteBuffer</span>.<span title="(x$1: Array[Byte])java.nio.ByteBuffer">wrap</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.sb" title="StringBuilder">sb</a>.<span title="()String">result</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.nio.charset.Charset)Array[Byte]">getBytes</span><span class="delimiter">(</span><span title="java.nio.charset.Charset">US_ASCII</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: scala.util.Try[Unit] =&gt; Any)(implicit executor: scala.concurrent.ExecutionContext)Unit">onComplete</span> <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.x0$2" title="Any" class="delimiter">{</a>
              case Success<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
                <a href="#org.http4s.server.blaze;WebSocketSupport" title="=&gt; org.log4s.Logger">logger</a>.debug<span title="(x$1: String)Unit" class="delimiter">(</span><span title="String(&quot;Switching pipeline segments for websocket&quot;)" class="string">&quot;Switching pipeline segments for websocket&quot;</span><span class="delimiter">)</span>

                val <a title="org.http4s.blaze.pipeline.LeafBuilder[java.nio.ByteBuffer]" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.segment">segment</a> = <span title="(leaf: org.http4s.blaze.pipeline.TailStage[org.http4s.websocket.WebsocketBits.WebSocketFrame])org.http4s.blaze.pipeline.LeafBuilder[org.http4s.websocket.WebsocketBits.WebSocketFrame]">LeafBuilder</span><span class="delimiter">(</span>new <a href="../../../../../http4s-blazecore/org/http4s/blaze/websocket/Http4sWSStage.scala.html#org.http4s.blaze.websocket;Http4sWSStage" title="org.http4s.blaze.websocket.Http4sWSStage">Http4sWSStage</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.ws" title="Option[org.http4s.websocket.Websocket]">ws</a>.<span title="=&gt; org.http4s.websocket.Websocket">get</span><span class="delimiter">)</span><span class="delimiter">)</span>
                              .<span title="(stage: org.http4s.blaze.pipeline.MidStage[org.http4s.websocket.WebsocketBits.WebSocketFrame,org.http4s.websocket.WebsocketBits.WebSocketFrame])org.http4s.blaze.pipeline.LeafBuilder[org.http4s.websocket.WebsocketBits.WebSocketFrame]">prepend</span><span class="delimiter">(</span>new <span title="org.http4s.blaze.http.websocket.WSFrameAggregator">WSFrameAggregator</span><span class="delimiter">)</span>
                              .<span title="(stage: org.http4s.blaze.pipeline.MidStage[java.nio.ByteBuffer,org.http4s.websocket.WebsocketBits.WebSocketFrame])org.http4s.blaze.pipeline.LeafBuilder[java.nio.ByteBuffer]">prepend</span><span class="delimiter">(</span>new <span title="org.http4s.blaze.http.websocket.WebSocketDecoder">WebSocketDecoder</span><span class="delimiter">(</span>false<span class="delimiter">)</span><span class="delimiter">)</span>

                this.<span title="(leafBuilder: org.http4s.blaze.pipeline.LeafBuilder[java.nio.ByteBuffer], startup: Boolean)WebSocketSupport.this.type">replaceInline</span><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.segment" title="org.http4s.blaze.pipeline.LeafBuilder[java.nio.ByteBuffer]">segment</a><span class="delimiter">)</span>

              case Failure<span class="delimiter">(</span><a title="Throwable" id="org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.t">t</a><span class="delimiter">)</span> =&gt; <a href="../../../../../http4s-blazecore/org/http4s/blaze/Http1Stage.scala.html#org.http4s.blaze;Http1Stage.fatalError" title="(t: Throwable, msg: String)Unit">fatalError</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.$anonfun.t" title="Throwable">t</a>, <span title="String(&quot;Error writing Websocket upgrade response&quot;)" class="string">&quot;Error writing Websocket upgrade response&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span><span class="delimiter">(</span><a href="Http1ServerStage.scala.html#org.http4s.server.blaze;Http1ServerStage.ec" title="=&gt; scala.concurrent.ExecutionContextExecutorService">ec</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="delimiter">}</span> else super.<a href="Http1ServerStage.scala.html#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.resp" title="org.http4s.Response">resp</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else super.<a href="Http1ServerStage.scala.html#org.http4s.server.blaze;Http1ServerStage.renderResponse" title="(req: org.http4s.Request, resp: org.http4s.Response, bodyCleanup: () =&gt; scala.concurrent.Future[java.nio.ByteBuffer])Unit">renderResponse</a><span class="delimiter">(</span><a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.req" title="org.http4s.Request">req</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.resp" title="org.http4s.Response">resp</a>, <a href="#org.http4s.server.blaze;WebSocketSupport.renderResponse.cleanup" title="() =&gt; scala.concurrent.Future[java.nio.ByteBuffer]">cleanup</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
