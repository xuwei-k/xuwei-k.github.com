<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>http4s-core/org/http4s/util/UrlCoding.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Taken from https://github.com/scalatra/rl/blob/v0.4.10/core/src/main/scala/rl/UrlCodingUtils.scala
 * Copyright (c) 2011 Mojolly Ltd.
 */</span>
package org.http4s.util

import java.util.Locale
import util.matching.Regex
import util.matching.<span title="scala.util.matching.Regex.type">Regex</span>.Match
import java.nio.charset.Charset
import java.nio.<span class="delimiter">{</span> CharBuffer, ByteBuffer <span class="delimiter">}</span>
import collection.immutable.BitSet

private<span class="delimiter">[</span>util<span class="delimiter">]</span> trait <a title="trait UrlCodingUtils extends AnyRef" id="org.http4s.util;UrlCodingUtils">UrlCodingUtils</a> <span title="Unit" class="delimiter">{</span>

  private val <a title="scala.collection.immutable.BitSet" id="org.http4s.util;UrlCodingUtils.toSkip">toSkip</a> = <span title="(elems: Int*)scala.collection.immutable.BitSet">BitSet</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar" class="char">'a'</span> <span title="(end: Char)scala.collection.immutable.NumericRange.Inclusive[Char]">to</span> <span title="Char('z')" class="char">'z'</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[Char])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Char],Char,scala.collection.immutable.IndexedSeq[Char]])scala.collection.immutable.IndexedSeq[Char]">++</span> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar" class="char">'A'</span> <span title="(end: Char)scala.collection.immutable.NumericRange.Inclusive[Char]">to</span> <span title="Char('Z')" class="char">'Z'</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[Char])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Char],Char,scala.collection.immutable.IndexedSeq[Char]])scala.collection.immutable.IndexedSeq[Char]">++</span> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar" class="char">'0'</span> <span title="(end: Char)scala.collection.immutable.NumericRange.Inclusive[Char]">to</span> <span title="Char('9')" class="char">'9'</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[Char])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Char],Char,scala.collection.immutable.IndexedSeq[Char]])scala.collection.immutable.IndexedSeq[Char]">++</span> <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;!$&amp;'()*+,;=:/?@-._~&quot;</span>.<span title="scala.collection.immutable.Set[Char]">toSet</span><span class="delimiter">)</span>.<span title="(f: Char =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Char],Int,scala.collection.immutable.IndexedSeq[Int]])scala.collection.immutable.IndexedSeq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,Int,scala.collection.immutable.IndexedSeq[Int]]" class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.toSkip.$anonfun.x$1" title="Char">_</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
  private val <a title="Int" id="org.http4s.util;UrlCodingUtils.space">space</a> = <span title="Char(' ')" class="char">' '</span>.<span title="=&gt; Int">toInt</span>
  private val <a title="scala.util.matching.Regex" id="org.http4s.util;UrlCodingUtils.PctEncoded">PctEncoded</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;%([0-9a-fA-F][0-9a-fA-F])&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  private val <a title="scala.util.matching.Regex" id="org.http4s.util;UrlCodingUtils.LowerPctEncoded">LowerPctEncoded</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;%([0-9a-f][0-9a-f])&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  private val <a title="scala.util.matching.Regex" id="org.http4s.util;UrlCodingUtils.InvalidChars">InvalidChars</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[^\\.a-zA-Z0-9!$&amp;'()*+,;=:/?#\\[\\]@-_~]&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>

  private val HexUpperCaseChars = <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(end: Int)scala.collection.immutable.Range">until</span> <span title="Int(16)" class="int">16</span><span class="delimiter">)</span> <a title="scala.collection.immutable.IndexedSeq[Char]" id="org.http4s.util;UrlCodingUtils.HexUpperCaseChars">map</a> <span class="delimiter">{</span> <a title="Int" id="org.http4s.util;UrlCodingUtils.HexUpperCaseChars.$anonfun.i">i</a> â‡’ <span title="Character.type">Character</span>.<span title="(x$1: Char)Char">toUpperCase</span><span class="delimiter">(</span><span title="Character.type">Character</span>.<span title="(x$1: Int, x$2: Int)Char">forDigit</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.HexUpperCaseChars.$anonfun.i" title="Int">i</a>, <span title="Int(16)" class="int">16</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  private val <a title="String" id="org.http4s.util;UrlCodingUtils.UTF_8">UTF_8</a> = <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>
  private val <a title="java.nio.charset.Charset" id="org.http4s.util;UrlCodingUtils.Utf8">Utf8</a> = <span title="java.nio.charset.Charset.type">Charset</span>.<span title="(x$1: String)java.nio.charset.Charset">forName</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.UTF_8" title="=&gt; String">UTF_8</a><span class="delimiter">)</span>

  def <a title="(string: String)Boolean" id="org.http4s.util;UrlCodingUtils.isUrlEncoded">isUrlEncoded</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.isUrlEncoded.string">string</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.util;UrlCodingUtils.PctEncoded" title="=&gt; scala.util.matching.Regex">PctEncoded</a>.<span title="(source: CharSequence)Option[String]">findFirstIn</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.isUrlEncoded.string" title="String">string</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  def <a title="(string: String)Boolean" id="org.http4s.util;UrlCodingUtils.containsInvalidUriChars">containsInvalidUriChars</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.containsInvalidUriChars.string">string</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.util;UrlCodingUtils.InvalidChars" title="=&gt; scala.util.matching.Regex">InvalidChars</a>.<span title="(source: CharSequence)Option[String]">findFirstIn</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.containsInvalidUriChars.string" title="String">string</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  def <a title="(string: String)Boolean" id="org.http4s.util;UrlCodingUtils.needsUrlEncoding">needsUrlEncoding</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.needsUrlEncoding.string">string</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="=&gt; Boolean">!</span><a href="#org.http4s.util;UrlCodingUtils.isUrlEncoded" title="(string: String)Boolean">isUrlEncoded</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.needsUrlEncoding.string" title="String">string</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.util;UrlCodingUtils.containsInvalidUriChars" title="(string: String)Boolean">containsInvalidUriChars</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.needsUrlEncoding.string" title="String">string</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(string: String)String" id="org.http4s.util;UrlCodingUtils.ensureUrlEncoding">ensureUrlEncoding</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.ensureUrlEncoding.string">string</a>: <span title="String">String</span><span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.needsUrlEncoding" title="(string: String)Boolean">needsUrlEncoding</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.ensureUrlEncoding.string" title="String">string</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#org.http4s.util;UrlCodingUtils.urlEncode" title="(toEncode: String, charset: java.nio.charset.Charset, spaceIsPlus: Boolean, toSkip: scala.collection.immutable.BitSet)String">urlEncode</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.ensureUrlEncoding.string" title="String">string</a><span class="delimiter">)</span> else <a href="#org.http4s.util;UrlCodingUtils.ensureUrlEncoding.string" title="String">string</a>

  def <a title="(string: String)String" id="org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings">ensureUppercasedEncodings</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.string">string</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#org.http4s.util;UrlCodingUtils.LowerPctEncoded" title="=&gt; scala.util.matching.Regex">LowerPctEncoded</a>.<span title="(target: CharSequence, replacer: scala.util.matching.Regex.Match =&gt; String)String">replaceAllIn</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.string" title="String">string</a>, <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.$anonfun.x$2" title="util.matching.Regex.Match">_</a>: <span title="util.matching.Regex.Match">Match</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="scala.util.matching.Regex.type">Regex</span>.<a href="#org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.$anonfun.<unapply-selector>" title="(m: scala.util.matching.Regex.Match)Option[Seq[String]]">Groups</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.$anonfun.v">v</a><span class="delimiter">)</span> â‡’ <span title="String(&quot;%&quot;)" class="string">&quot;%&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings.$anonfun.v" title="String">v</a>.<span title="(x$1: java.util.Locale)String">toUpperCase</span><span class="delimiter">(</span><span title="java.util.Locale.type">Locale</span>.<span title="java.util.Locale">ENGLISH</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(toEncode: String, charset: java.nio.charset.Charset, spaceIsPlus: Boolean, toSkip: scala.collection.immutable.BitSet)String" id="org.http4s.util;UrlCodingUtils.urlEncode">urlEncode</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.urlEncode.toEncode">toEncode</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="org.http4s.util;UrlCodingUtils.urlEncode$default$2">charset</a>: <span title="java.nio.charset.Charset">Charset</span> = <a href="#org.http4s.util;UrlCodingUtils.Utf8" title="=&gt; java.nio.charset.Charset">Utf8</a>, <a title="Boolean" id="org.http4s.util;UrlCodingUtils.urlEncode$default$3">spaceIsPlus</a>: <span title="Boolean">Boolean</span> = false, <a title="scala.collection.immutable.BitSet" id="org.http4s.util;UrlCodingUtils.urlEncode$default$4">toSkip</a>: <span title="scala.collection.immutable.BitSet">BitSet</span> = <a href="#org.http4s.util;UrlCodingUtils.urlEncode$default$4" title="scala.collection.immutable.BitSet">toSkip</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="java.nio.ByteBuffer" id="org.http4s.util;UrlCodingUtils.urlEncode.in">in</a> = <a href="#org.http4s.util;UrlCodingUtils.urlEncode$default$2" title="java.nio.charset.Charset">charset</a>.<span title="(x$1: String)java.nio.ByteBuffer">encode</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.ensureUppercasedEncodings" title="(string: String)String">ensureUppercasedEncodings</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.toEncode" title="String">toEncode</a><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="java.nio.CharBuffer" id="org.http4s.util;UrlCodingUtils.urlEncode.out">out</a> = <span title="java.nio.CharBuffer.type">CharBuffer</span>.<span title="(x$1: Int)java.nio.CharBuffer">allocate</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.in" title="java.nio.ByteBuffer">in</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="implicit scala.LowPriorityImplicits.floatWrapper : (x: Float)scala.runtime.RichFloat">*</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<span title="=&gt; Float">ceil</span>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
    while <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.in" title="java.nio.ByteBuffer">in</a>.<span title="()Boolean">hasRemaining</span><span class="delimiter">)</span> <a href="#org.http4s.util;UrlCodingUtils.urlEncode.while$1" title="()Unit" class="delimiter">{</a>
      val b = <a href="#org.http4s.util;UrlCodingUtils.urlEncode.in" title="java.nio.ByteBuffer">in</a>.<span title="()Byte">get</span><span class="delimiter">(</span><span class="delimiter">)</span> <a title="Int" id="org.http4s.util;UrlCodingUtils.urlEncode.b">&amp;</a> <span title="Int(255)" class="int">0xFF</span>
      if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode$default$4" title="scala.collection.immutable.BitSet">toSkip</a>.<span title="(elem: Int)Boolean">contains</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.b" title="Int">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="(x$1: Char)java.nio.CharBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.b" title="Int">b</a>.<span title="=&gt; Int">toInt</span>.<span title="=&gt; Char">toChar</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.b" title="Int">b</a> <span title="(x: Int)Boolean">==</span> <a href="#org.http4s.util;UrlCodingUtils.space" title="=&gt; Int">space</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.util;UrlCodingUtils.urlEncode$default$3" title="Boolean">spaceIsPlus</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="(x$1: Char)java.nio.CharBuffer">put</span><span class="delimiter">(</span><span title="Char('+')" class="char">'+'</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="(x$1: Char)java.nio.CharBuffer">put</span><span class="delimiter">(</span><span title="Char('%')" class="char">'%'</span><span class="delimiter">)</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="(x$1: Char)java.nio.CharBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.HexUpperCaseChars" title="(idx: Int)Char">HexUpperCaseChars</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.b" title="Int">b</a> <span title="(x: Int)Int">&gt;&gt;</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> <span title="(x: Int)Int">&amp;</span> <span title="Int(15)" class="int">0xF</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="(x$1: Char)java.nio.CharBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.HexUpperCaseChars" title="(idx: Int)Char">HexUpperCaseChars</a><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlEncode.b" title="Int">b</a> <span title="(x: Int)Int">&amp;</span> <span title="Int(15)" class="int">0xF</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="()java.nio.Buffer">flip</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#org.http4s.util;UrlCodingUtils.urlEncode.out" title="java.nio.CharBuffer">out</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>

  def <a title="(toDecode: String, charset: java.nio.charset.Charset, plusIsSpace: Boolean, toSkip: String)String" id="org.http4s.util;UrlCodingUtils.urlDecode">urlDecode</a><span class="delimiter">(</span><a title="String" id="org.http4s.util;UrlCodingUtils.urlDecode.toDecode">toDecode</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="org.http4s.util;UrlCodingUtils.urlDecode$default$2">charset</a>: <span title="java.nio.charset.Charset">Charset</span> = <a href="#org.http4s.util;UrlCodingUtils.Utf8" title="=&gt; java.nio.charset.Charset">Utf8</a>, <a title="Boolean" id="org.http4s.util;UrlCodingUtils.urlDecode$default$3">plusIsSpace</a>: <span title="Boolean">Boolean</span> = false, <a title="String" id="org.http4s.util;UrlCodingUtils.urlDecode$default$4">toSkip</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="java.nio.CharBuffer" id="org.http4s.util;UrlCodingUtils.urlDecode.in">in</a> = <span title="java.nio.CharBuffer.type">CharBuffer</span>.<span title="(x$1: CharSequence)java.nio.CharBuffer">wrap</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.toDecode" title="String">toDecode</a><span class="delimiter">)</span>
    <span class="comment">// reserve enough space for 3-byte UTF-8 characters.  4-byte characters are represented</span>
    <span class="comment">// as surrogate pairs of characters, and will get a luxurious 6 bytes of space.</span>
    val <a title="java.nio.ByteBuffer" id="org.http4s.util;UrlCodingUtils.urlDecode.out">out</a> = <span title="java.nio.ByteBuffer.type">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
    val <a title="scala.collection.immutable.BitSet" id="org.http4s.util;UrlCodingUtils.urlDecode.skip">skip</a> = <span title="(elems: Int*)scala.collection.immutable.BitSet">BitSet</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode$default$4" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">toSkip</a>.<span title="[B &gt;: Char]=&gt; scala.collection.immutable.Set[B]">toSet</span><span title="scala.collection.immutable.Set[Char]" class="delimiter">[</span><span title="Char">Char</span><span class="delimiter">]</span>.<span title="(f: Char =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Char],Int,scala.collection.immutable.Set[Int]])scala.collection.immutable.Set[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,Int,scala.collection.immutable.Set[Int]]" class="delimiter">(</span><a title="Char" id="org.http4s.util;UrlCodingUtils.urlDecode.skip.$anonfun.c">c</a> â‡’ <a href="#org.http4s.util;UrlCodingUtils.urlDecode.skip.$anonfun.c" title="Char">c</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>.<span title="=&gt; Seq[Int]">toSeq</span>: _*<span class="delimiter">)</span>
    while <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Boolean">hasRemaining</span><span class="delimiter">)</span> <a href="#org.http4s.util;UrlCodingUtils.urlDecode.while$2" title="()Unit" class="delimiter">{</a>
      val <a title="Int" id="org.http4s.util;UrlCodingUtils.urlDecode.mark">mark</a> = <a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Int">position</span><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="Char" id="org.http4s.util;UrlCodingUtils.urlDecode.c">c</a> = <a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Char">get</span><span class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.c" title="Char">c</a> <span title="(x: Char)Boolean">==</span> <span title="Char('%')" class="char">'%'</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="Char" id="org.http4s.util;UrlCodingUtils.urlDecode.xc">xc</a> = <a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Char">get</span><span class="delimiter">(</span><span class="delimiter">)</span>
          val <a title="Char" id="org.http4s.util;UrlCodingUtils.urlDecode.yc">yc</a> = <a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="()Char">get</span><span class="delimiter">(</span><span class="delimiter">)</span>
          val <a title="Int" id="org.http4s.util;UrlCodingUtils.urlDecode.x">x</a> = <span title="Character.type">Character</span>.<span title="(x$1: Char, x$2: Int)Int">digit</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.xc" title="Char">xc</a>, <span title="Int(16)" class="int">0x10</span><span class="delimiter">)</span>
          val <a title="Int" id="org.http4s.util;UrlCodingUtils.urlDecode.y">y</a> = <span title="Character.type">Character</span>.<span title="(x$1: Char, x$2: Int)Int">digit</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.yc" title="Char">yc</a>, <span title="Int(16)" class="int">0x10</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.x" title="Int">x</a> <span title="(x: Int)Boolean">!=</span> -<span title="Int(-1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.util;UrlCodingUtils.urlDecode.y" title="Int">y</a> <span title="(x: Int)Boolean">!=</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            val oo = <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.x" title="Int">x</a> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> <a title="Int" id="org.http4s.util;UrlCodingUtils.urlDecode.oo">+</a> <a href="#org.http4s.util;UrlCodingUtils.urlDecode.y" title="Int">y</a>
            if <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.skip" title="scala.collection.immutable.BitSet">skip</a>.<span title="(elem: Int)Boolean">contains</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.oo" title="Int">oo</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.oo" title="Int">oo</a>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><span title="Char('%')" class="char">'%'</span>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
              <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.xc" title="Char">xc</a>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
              <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.yc" title="Char">yc</a>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><span title="Char('%')" class="char">'%'</span>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
            <a href="#org.http4s.util;UrlCodingUtils.urlDecode.in" title="java.nio.CharBuffer">in</a>.<span title="(x$1: Int)java.nio.Buffer">position</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.mark" title="Int">mark</a><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><span title="Char('%')" class="char">'%'</span>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.c" title="Char">c</a> <span title="(x: Char)Boolean">==</span> <span title="Char('+')" class="char">'+'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.http4s.util;UrlCodingUtils.urlDecode$default$3" title="Boolean">plusIsSpace</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><span title="Char(' ')" class="char">' '</span>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <span class="comment">// normally `out.put(c.toByte)` would be enough since the url is %-encoded,</span>
        <span class="comment">// however there are cases where a string can be partially decoded</span>
        <span class="comment">// so we have to make sure the non us-ascii chars get preserved properly.</span>
        if <span class="delimiter">(</span>this.<a href="#org.http4s.util;UrlCodingUtils.toSkip" title="=&gt; scala.collection.immutable.BitSet">toSkip</a>.<span title="(elem: Int)Boolean">contains</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.c" title="=&gt; Int">c</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: Byte)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.c" title="Char">c</a>.<span title="=&gt; Byte">toByte</span><span class="delimiter">)</span>
        else <span class="delimiter">{</span>
          <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="(x$1: java.nio.ByteBuffer)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode$default$2" title="java.nio.charset.Charset">charset</a>.<span title="(x$1: String)java.nio.ByteBuffer">encode</span><span class="delimiter">(</span><span title="String.type">String</span>.<span title="(x$1: Char)String">valueOf</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.c" title="Char">c</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a>.<span title="()java.nio.Buffer">flip</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#org.http4s.util;UrlCodingUtils.urlDecode$default$2" title="java.nio.charset.Charset">charset</a>.<span title="(x$1: java.nio.ByteBuffer)java.nio.CharBuffer">decode</span><span class="delimiter">(</span><a href="#org.http4s.util;UrlCodingUtils.urlDecode.out" title="java.nio.ByteBuffer">out</a><span class="delimiter">)</span>.<span title="()String">toString</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

object <a title="org.http4s.util.UrlCodingUtils.type" id="org.http4s.util.UrlCodingUtils">UrlCodingUtils</a> extends <a href="#org.http4s.util;UrlCodingUtils" title="org.http4s.util.UrlCodingUtils">UrlCodingUtils</a>

        </pre>
    </body>
</html>
