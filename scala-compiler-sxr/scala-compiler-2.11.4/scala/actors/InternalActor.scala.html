<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/actors/InternalActor.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2005-2013, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>
package scala.actors
import java.util.TimerTask
import scala.util.control.ControlThrowable

private<span class="delimiter">[</span>actors<span class="delimiter">]</span> object <a title="scala.actors.InternalActor.type" id="scala.actors.InternalActor.readResolve">InternalActor</a> <a href="#scala.actors.InternalActor.readResolve" title="scala.actors.InternalActor.type" class="delimiter">{</a>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> trait <a title="trait Body[a] extends AnyRef" id="scala.actors.InternalActor;Body">Body</a><span class="delimiter">[</span><a title="" id="scala.actors.InternalActor;Body;a">a</a><span class="delimiter">]</span> <span class="delimiter">{</span>
    def <a title="[b](other: =&gt; b)Unit" id="scala.actors.InternalActor;Body.andThen">andThen</a><span class="delimiter">[</span><a title="" id="scala.actors.InternalActor;Body.andThen;b">b</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; b" id="scala.actors.InternalActor;Body.andThen.other">other</a>: =&gt; b<span class="delimiter">)</span>: <a href="../Unit.scala.html#scala;Unit" title="Unit">Unit</a>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

private<span class="delimiter">[</span>actors<span class="delimiter">]</span> trait <a title="trait InternalActor extends AnyRef with scala.actors.AbstractActor with scala.actors.InternalReplyReactor with scala.actors.ActorCanReply with scala.actors.InputChannel[Any] with Serializable" id="scala.actors;InternalActor">InternalActor</a> extends <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a> with <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor" title="scala.actors.InternalReplyReactor">InternalReplyReactor</a> with <a href="ActorCanReply.scala.html#scala.actors;ActorCanReply" title="scala.actors.ActorCanReply">ActorCanReply</a> with <a href="InputChannel.scala.html#scala.actors;InputChannel" title="scala.actors.InputChannel[Any]">InputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> with <a href="../Serializable.scala.html#scala;Serializable" title="Serializable">Serializable</a> <span class="delimiter">{</span>

  <span class="comment">/* The following two fields are only used when the actor
   * suspends by blocking its underlying thread, for example,
   * when waiting in a receive or synchronous send.
   */</span>
  @volatile
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> var <a title="Boolean" id="scala.actors;InternalActor.isSuspended_=">isSuspended</a> = false

  <span class="comment">/* This field is used to communicate the received message from
   * the invocation of send to the place where the thread of
   * the receiving actor resumes inside receive/receiveWithin.
   */</span>
  @volatile
  private var <a title="Option[Any]" id="scala.actors;InternalActor.received_=">received</a>: <a href="../Option.scala.html#scala;Option" title="Option[Any]">Option</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="../Option.scala.html#scala.None" title="None.type">None</a>

  protected<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="=&gt; scala.actors.IScheduler" id="scala.actors;InternalActor.scheduler">scheduler</a>: <a href="IScheduler.scala.html#scala.actors;IScheduler" title="scala.actors.IScheduler">IScheduler</a> = <a href="Scheduler.scala.html#scala.actors.Scheduler" title="scala.actors.Scheduler.type">Scheduler</a>

  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="(msg: Any, replyTo: scala.actors.OutputChannel[Any], handler: PartialFunction[Any,Any])() =&gt; Unit" id="scala.actors;InternalActor.startSearch">startSearch</a><span class="delimiter">(</span><a title="Any" id="scala.actors;InternalActor.startSearch.msg">msg</a>: <span title="Any">Any</span>, <a title="scala.actors.OutputChannel[Any]" id="scala.actors;InternalActor.startSearch.replyTo">replyTo</a>: <a href="OutputChannel.scala.html#scala.actors;OutputChannel" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>, <a title="PartialFunction[Any,Any]" id="scala.actors;InternalActor.startSearch.handler">handler</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span><span class="delimiter">)</span> =
    if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.isSuspended_=" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
        <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.append(ce164a9111)" title="(msg: Any, session: scala.actors.OutputChannel[Any])Unit">append</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.startSearch.msg" title="Any">msg</a>, <a href="#scala.actors;InternalActor.startSearch.replyTo" title="scala.actors.OutputChannel[Any]">replyTo</a><span class="delimiter">)</span>
          <a href="#scala.actors;InternalActor.resumeActor" title="()Unit">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span> else super.<a href="Reactor.scala.html#scala.actors;Reactor.startSearch" title="(msg: Any, replyTo: scala.actors.OutputChannel[Any], handler: PartialFunction[Any,Any])() =&gt; Unit">startSearch</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.startSearch.msg" title="Any">msg</a>, <a href="#scala.actors;InternalActor.startSearch.replyTo" title="scala.actors.OutputChannel[Any]">replyTo</a>, <a href="#scala.actors;InternalActor.startSearch.handler" title="PartialFunction[Any,Any]">handler</a><span class="delimiter">)</span>

  <span class="comment">// we override this method to check `shouldExit` before suspending</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="(startMbox: scala.actors.MQueue[Any], handler: PartialFunction[Any,Any], resumeOnSameThread: Boolean)Unit" id="scala.actors;InternalActor.searchMailbox">searchMailbox</a><span class="delimiter">(</span><a title="scala.actors.MQueue[Any]" id="scala.actors;InternalActor.searchMailbox.startMbox">startMbox</a>: <a href="MQueue.scala.html#scala.actors;MQueue" title="scala.actors.MQueue[Any]">MQueue</a><span class="delimiter">[</span>Any<span class="delimiter">]</span>,
    <a title="PartialFunction[Any,Any]" id="scala.actors;InternalActor.searchMailbox.handler">handler</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>,
    <a title="Boolean" id="scala.actors;InternalActor.searchMailbox.resumeOnSameThread">resumeOnSameThread</a>: <a href="../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    var <a title="scala.actors.MQueue[Any]" id="scala.actors;InternalActor.searchMailbox.tmpMbox">tmpMbox</a> = <a href="#scala.actors;InternalActor.searchMailbox.startMbox" title="scala.actors.MQueue[Any]">startMbox</a>
    var <a title="Boolean" id="scala.actors;InternalActor.searchMailbox.done">done</a> = false
    while <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.searchMailbox.done" title="Boolean">done</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.searchMailbox.while$1" title="()Unit" class="delimiter">{</a>
      val <a title="scala.actors.MQueueElement[Any]" id="scala.actors;InternalActor.searchMailbox.qel">qel</a> = <a href="#scala.actors;InternalActor.searchMailbox.tmpMbox" title="scala.actors.MQueue[Any]">tmpMbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.extractFirst(6d20ee5371)" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>msg: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#scala.actors;OutputChannel" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: scala.actors.OutputChannel[Any]*)List[scala.actors.OutputChannel[Any]]">List</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.searchMailbox.qel.$anonfun.replyTo" title="scala.actors.OutputChannel[Any]">replyTo</a><span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.searchMailbox.handler" title="PartialFunction[Any,Any]">handler</a>.<a href="../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.searchMailbox.qel.$anonfun.msg" title="Any">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.searchMailbox.tmpMbox" title="scala.actors.MQueue[Any]">tmpMbox</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.searchMailbox.tmpMbox" title="scala.actors.MQueue[Any]">tmpMbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.foreach" title="(f: (Any, scala.actors.OutputChannel[Any]) =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="Any" id="scala.actors;InternalActor.searchMailbox.$anonfun.m">m</a>, <a title="scala.actors.OutputChannel[Any]" id="scala.actors;InternalActor.searchMailbox.$anonfun.s">s</a><span class="delimiter">)</span> =&gt; <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.append(ce164a9111)" title="(msg: Any, session: scala.actors.OutputChannel[Any])Unit">append</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.searchMailbox.$anonfun.m" title="Any">m</a>, <a href="#scala.actors;InternalActor.searchMailbox.$anonfun.s" title="scala.actors.OutputChannel[Any]">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span>null <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.actors;InternalActor.searchMailbox.qel" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#scala.actors;Reactor.sendBuffer" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MQueue.scala.html#scala.actors;MQueue.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.actors;InternalActor.searchMailbox.tmpMbox" title="scala.actors.MQueue[Any]">tmpMbox</a> = new <a href="MQueue.scala.html#scala.actors;MQueue" title="scala.actors.MQueue[Any]">MQueue</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;Temp&quot;)" class="string">&quot;Temp&quot;</span><span class="delimiter">)</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.searchMailbox.tmpMbox" title="scala.actors.MQueue[Any]">tmpMbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <span class="comment">// very important to check for `shouldExit` at this point</span>
            <span class="comment">// since linked actors might have set it after we checked</span>
            <span class="comment">// last time (e.g., at the beginning of `react`)</span>
            if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor_=" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#scala.actors;InternalActor.searchMailbox.handler" title="PartialFunction[Any,Any]">handler</a>
            <span class="comment">// see Reactor.searchMailbox</span>
            throw <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.suspendException" title="=&gt; scala.actors.SuspendActorControl">suspendException</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.resumeReceiver" title="(item: (Any, scala.actors.OutputChannel[Any]), handler: PartialFunction[Any,Any], onSameThread: Boolean)Unit">resumeReceiver</a><span class="delimiter">(</span><a href="../Tuple2.scala.html#scala;Tuple2" title="(_1: Any, _2: scala.actors.OutputChannel[Any])(Any, scala.actors.OutputChannel[Any])" class="delimiter">(</a><a href="#scala.actors;InternalActor.searchMailbox.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.msg" title="=&gt; Any">msg</a>, <a href="#scala.actors;InternalActor.searchMailbox.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.session" title="=&gt; scala.actors.OutputChannel[Any]">session</a><span class="delimiter">)</span>, <a href="#scala.actors;InternalActor.searchMailbox.handler" title="PartialFunction[Any,Any]">handler</a>, <a href="#scala.actors;InternalActor.searchMailbox.resumeOnSameThread" title="Boolean">resumeOnSameThread</a><span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.searchMailbox.done" title="Boolean">done</a> = true
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="(fun: () =&gt; Unit, handler: PartialFunction[Any,Any], msg: Any)Runnable" id="scala.actors;InternalActor.makeReaction(dd5d7a02aa)">makeReaction</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="scala.actors;InternalActor.makeReaction(dd5d7a02aa).fun">fun</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit, <a title="PartialFunction[Any,Any]" id="scala.actors;InternalActor.makeReaction(dd5d7a02aa).handler">handler</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>, <a title="Any" id="scala.actors;InternalActor.makeReaction(dd5d7a02aa).msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Runnable">Runnable</span> =
    new <a href="ActorTask.scala.html#scala.actors;ActorTask" title="scala.actors.ActorTask">ActorTask</a><span class="delimiter">(</span>this, <a href="#scala.actors;InternalActor.makeReaction(dd5d7a02aa).fun" title="() =&gt; Unit">fun</a>, <a href="#scala.actors;InternalActor.makeReaction(dd5d7a02aa).handler" title="PartialFunction[Any,Any]">handler</a>, <a href="#scala.actors;InternalActor.makeReaction(dd5d7a02aa).msg" title="Any">msg</a><span class="delimiter">)</span>

  <span class="comment">/** See the companion object's `receive` method. */</span>
  def <a title="[R](f: PartialFunction[Any,R])R" id="scala.actors;InternalActor.receive">receive</a><span class="delimiter">[</span><a title="" id="scala.actors;InternalActor.receive;R">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Any,R]" id="scala.actors;InternalActor.receive.f">f</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,R]">PartialFunction</a><span class="delimiter">[</span>Any, R<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#scala.actors;InternalActor.receive;R" title="R">R</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;receive from channel belonging to other actor&quot;)" class="string">&quot;receive from channel belonging to other actor&quot;</span><span class="delimiter">)</span>

    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// links</span>
      <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    var <a title="Boolean" id="scala.actors;InternalActor.receive.done">done</a> = false
    while <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.receive.done" title="Boolean">done</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.receive.while$2" title="()Unit" class="delimiter">{</a>
      val <a title="scala.actors.MQueueElement[Any]" id="scala.actors;InternalActor.receive.qel">qel</a> = <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.extractFirst(6d20ee5371)" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#scala.actors;OutputChannel" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#scala.actors;InternalActor.receive.qel.$anonfun.replyTo" title="scala.actors.OutputChannel[Any]">replyTo</a> <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        val <a title="Boolean" id="scala.actors;InternalActor.receive.qel.$anonfun.matches">matches</a> = <a href="#scala.actors;InternalActor.receive.f" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.receive.qel.$anonfun.m" title="Any">m</a><span class="delimiter">)</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
        <a href="#scala.actors;InternalActor.receive.qel.$anonfun.matches" title="Boolean">matches</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span>null <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.actors;InternalActor.receive.qel" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#scala.actors;Reactor.sendBuffer" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MQueue.scala.html#scala.actors;MQueue.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor_=" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#scala.actors;InternalActor.receive.f" title="PartialFunction[Any,R]">f</a>
            <a href="#scala.actors;InternalActor.isSuspended_=" title="(x$1: Boolean)Unit">isSuspended</a> = true
            <a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#scala.actors;IScheduler.managedBlock" title="(blocker: scala.concurrent.ManagedBlocker)Unit">managedBlock</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.blocker" title="InternalActor.this.blocker.type">blocker</a><span class="delimiter">)</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala;Some" title="(x: Any)Some[Any]">Some</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.receive.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.msg" title="=&gt; Any">msg</a><span class="delimiter">)</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#scala.actors;InternalActor.receive.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.session" title="=&gt; scala.actors.OutputChannel[Any]">session</a> <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <a href="#scala.actors;InternalActor.receive.done" title="Boolean">done</a> = true
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    val <a title="R" id="scala.actors;InternalActor.receive.result">result</a> = <a href="../Function1.scala.html#scala;Function1.apply" title="(v1: Any)R">f</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.received_=" title="=&gt; Option[Any]">received</a>.<a href="../Option.scala.html#scala;Option.get" title="=&gt; Any">get</a><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala.None" title="None.type">None</a>
    <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
    <a href="#scala.actors;InternalActor.receive.result" title="R">result</a>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `receiveWithin` method. */</span>
  def <a title="[R](msec: Long)(f: PartialFunction[Any,R])R" id="scala.actors;InternalActor.receiveWithin">receiveWithin</a><span class="delimiter">[</span><a title="" id="scala.actors;InternalActor.receiveWithin;R">R</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Long" id="scala.actors;InternalActor.receiveWithin.msec">msec</a>: <a href="../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,R]" id="scala.actors;InternalActor.receiveWithin.f">f</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,R]">PartialFunction</a><span class="delimiter">[</span>Any, R<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#scala.actors;InternalActor.receiveWithin;R" title="R">R</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;receive from channel belonging to other actor&quot;)" class="string">&quot;receive from channel belonging to other actor&quot;</span><span class="delimiter">)</span>

    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// links</span>
      <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// first, remove spurious TIMEOUT message from mailbox if any</span>
    <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.extractFirst(6d20ee5371)" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#scala.actors;OutputChannel" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#scala.actors;InternalActor.receiveWithin.$anonfun.m" title="Any">m</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.actors.TIMEOUT.readResolve" title="scala.actors.TIMEOUT.type">TIMEOUT</a><span class="delimiter">)</span>

    val <a title="() =&gt; Unit" id="scala.actors;InternalActor.receiveWithin.receiveTimeout">receiveTimeout</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.receiveWithin.f" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.actors.TIMEOUT.readResolve" title="scala.actors.TIMEOUT.type">TIMEOUT</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala;Some" title="(x: scala.actors.TIMEOUT.type)Some[scala.actors.TIMEOUT.type]">Some</a><span class="delimiter">(</span><a href="#scala.actors.TIMEOUT.readResolve" title="scala.actors.TIMEOUT.type">TIMEOUT</a><span class="delimiter">)</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = this <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
      <span class="delimiter">}</span> else
        sys.<a href="../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;unhandled timeout&quot;)" class="string">&quot;unhandled timeout&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    var <a title="Boolean" id="scala.actors;InternalActor.receiveWithin.done">done</a> = false
    while <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.receiveWithin.done" title="Boolean">done</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.receiveWithin.while$3" title="()Unit" class="delimiter">{</a>
      val <a title="scala.actors.MQueueElement[Any]" id="scala.actors;InternalActor.receiveWithin.qel">qel</a> = <a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a>.<a href="MQueue.scala.html#scala.actors;MQueue.extractFirst(6d20ee5371)" title="(p: (Any, scala.actors.OutputChannel[Any]) =&gt; Boolean)scala.actors.MQueueElement[Any]">extractFirst</a><span class="delimiter">(</span><span class="delimiter">(</span>m: <span title="Any">Any</span>, replyTo: <a href="OutputChannel.scala.html#scala.actors;OutputChannel" title="scala.actors.OutputChannel[Any]">OutputChannel</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#scala.actors;InternalActor.receiveWithin.qel.$anonfun.replyTo" title="scala.actors.OutputChannel[Any]">replyTo</a> <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        val <a title="Boolean" id="scala.actors;InternalActor.receiveWithin.qel.$anonfun.matches">matches</a> = <a href="#scala.actors;InternalActor.receiveWithin.f" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.receiveWithin.qel.$anonfun.m" title="Any">m</a><span class="delimiter">)</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
        <a href="#scala.actors;InternalActor.receiveWithin.qel.$anonfun.matches" title="Boolean">matches</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span>null <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.actors;InternalActor.receiveWithin.qel" title="scala.actors.MQueueElement[Any]">qel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="() =&gt; Unit" id="scala.actors;InternalActor.receiveWithin.todo">todo</a> = <a href="#scala.actors;InternalActor" title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</a> <span class="delimiter">{</span>
          <span class="comment">// in mean time new stuff might have arrived</span>
          if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="Reactor.scala.html#scala.actors;Reactor.sendBuffer" title="=&gt; scala.actors.MQueue[Any]">sendBuffer</a>.<a href="MQueue.scala.html#scala.actors;MQueue.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
          <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.receiveWithin.msec" title="Long">msec</a> <a href="../Long.scala.html#scala;Long.==(2dca8a685a)" title="(x: Long)Boolean">==</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.actors;InternalActor.receiveWithin.done" title="Boolean">done</a> = true
            <a href="#scala.actors;InternalActor.receiveWithin.receiveTimeout" title="() =&gt; Unit">receiveTimeout</a>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.receiveWithin.f" title="PartialFunction[Any,R]">f</a>.<a href="../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Any)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.actors.TIMEOUT.readResolve" title="scala.actors.TIMEOUT.type">TIMEOUT</a><span class="delimiter">)</span><span class="delimiter">)</span>
                sys.<a href="../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;unhandled timeout&quot;)" class="string">&quot;unhandled timeout&quot;</span><span class="delimiter">)</span>

              val <a title="scala.actors.InternalActor" id="scala.actors;InternalActor.receiveWithin.todo.thisActor">thisActor</a> = this
              <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout_=" title="(x$1: Option[java.util.TimerTask])Unit">onTimeout</a> = <a href="../Option.scala.html#scala;Some" title="(x: java.util.TimerTask)Some[java.util.TimerTask]">Some</a><span class="delimiter">(</span>new <a title="&lt;$anon: java.util.TimerTask&gt; extends java.util.TimerTask" id="scala.actors;InternalActor.receiveWithin.todo;$anon">TimerTask</a> <span class="delimiter">{</span>
                def <a title="()Unit" id="scala.actors;InternalActor.receiveWithin.todo;$anon.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#scala.actors;InternalActor.receiveWithin.todo.thisActor" title="scala.actors.InternalActor">thisActor</a>.<a href="Reactor.scala.html#scala.actors;Reactor.send" title="(msg: Any, replyTo: scala.actors.OutputChannel[Any])Unit">send</a><span class="delimiter">(</span><a href="#scala.actors.TIMEOUT.readResolve" title="scala.actors.TIMEOUT.type">TIMEOUT</a>, <a href="#scala.actors;InternalActor.receiveWithin.todo.thisActor" title="scala.actors.InternalActor">thisActor</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.timer" title="=&gt; java.util.Timer">timer</a>.<span title="(x$1: java.util.TimerTask, x$2: Long)Unit">schedule</span><span class="delimiter">(</span><a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#scala;Option.get" title="=&gt; java.util.TimerTask">get</a>, <a href="#scala.actors;InternalActor.receiveWithin.msec" title="Long">msec</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            <span class="comment">// It is possible that !onTimeout.isEmpty, but TIMEOUT is not yet in mailbox</span>
            <span class="comment">// See SI-4759</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor_=" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="#scala.actors;InternalActor.receiveWithin.f" title="PartialFunction[Any,R]">f</a>
            <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala.None" title="None.type">None</a>
            <a href="#scala.actors;InternalActor.isSuspended_=" title="(x$1: Boolean)Unit">isSuspended</a> = true
            <a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#scala.actors;IScheduler.managedBlock" title="(blocker: scala.concurrent.ManagedBlocker)Unit">managedBlock</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.blocker" title="InternalActor.this.blocker.type">blocker</a><span class="delimiter">)</span>
            <a href="Reactor.scala.html#scala.actors;Reactor.drainSendBuffer" title="(mbox: scala.actors.MQueue[Any])Unit">drainSendBuffer</a><span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.mailbox" title="=&gt; scala.actors.MQueue[Any]">mailbox</a><span class="delimiter">)</span>
            <span class="comment">// keep going</span>
            <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="../Function0.scala.html#scala;Function0.apply" title="()Unit">todo</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#scala;Option.get" title="=&gt; java.util.TimerTask">get</a>.<span title="()Boolean">cancel</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout_=" title="(x$1: Option[java.util.TimerTask])Unit">onTimeout</a> = <a href="../Option.scala.html#scala.None" title="None.type">None</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala;Some" title="(x: Any)Some[Any]">Some</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.receiveWithin.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.msg" title="=&gt; Any">msg</a><span class="delimiter">)</span>
        <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="#scala.actors;InternalActor.receiveWithin.qel" title="scala.actors.MQueueElement[Any]">qel</a>.<a href="MQueue.scala.html#scala.actors;MQueueElement.session" title="=&gt; scala.actors.OutputChannel[Any]">session</a> <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.OutputChannel[Any])List[scala.actors.OutputChannel[Any]]">::</a> <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>
        <a href="#scala.actors;InternalActor.receiveWithin.done" title="Boolean">done</a> = true
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    val <a title="R" id="scala.actors;InternalActor.receiveWithin.result">result</a> = <a href="../Function1.scala.html#scala;Function1.apply" title="(v1: Any)R">f</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.received_=" title="=&gt; Option[Any]">received</a>.<a href="../Option.scala.html#scala;Option.get" title="=&gt; Any">get</a><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.received_=" title="(x$1: Option[Any])Unit">received</a> = <a href="../Option.scala.html#scala.None" title="None.type">None</a>
    <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders_=" title="(x$1: List[scala.actors.OutputChannel[Any]])Unit">senders</a> = <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.senders" title="=&gt; List[scala.actors.OutputChannel[Any]]">senders</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.actors.OutputChannel[Any]]">tail</a>
    <a href="#scala.actors;InternalActor.receiveWithin.result" title="R">result</a>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `react` method. */</span>
  override def <a title="(handler: PartialFunction[Any,Unit])Nothing" id="scala.actors;InternalActor.react">react</a><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="scala.actors;InternalActor.react.handler">handler</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    super.<a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.react" title="(handler: PartialFunction[Any,Unit])Nothing">react</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.react.handler" title="PartialFunction[Any,Unit]">handler</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** See the companion object's `reactWithin` method. */</span>
  override def <a title="(msec: Long)(handler: PartialFunction[Any,Unit])Nothing" id="scala.actors;InternalActor.reactWithin">reactWithin</a><span class="delimiter">(</span><a title="Long" id="scala.actors;InternalActor.reactWithin.msec">msec</a>: <a href="../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="PartialFunction[Any,Unit]" id="scala.actors;InternalActor.reactWithin.handler">handler</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Unit]">PartialFunction</a><span class="delimiter">[</span>Any, Unit<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    super.<a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.reactWithin" title="(msec: Long)(handler: PartialFunction[Any,Unit])Nothing">reactWithin</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.reactWithin.msec" title="Long">msec</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.actors;InternalActor.reactWithin.handler" title="PartialFunction[Any,Unit]">handler</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Receives the next message from the mailbox */</span>
  def <a title="=&gt; Any" id="scala.actors;InternalActor.?">?</a> : <span title="Any">Any</span> = <a href="#scala.actors;InternalActor.receive" title="(f: PartialFunction[Any,Any])Any">receive</a> <a title="&lt;$anon: Any =&gt; Any&gt; extends scala.runtime.AbstractPartialFunction[Any,Any] with Serializable" id="scala.actors;InternalActor.?;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <a title="Any" id="scala.actors;InternalActor.?;$anonfun.isDefinedAt.x">x</a> =&gt; <a href="#scala.actors;InternalActor.?;$anonfun.isDefinedAt.x" title="Any">x</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by lock of this</span>
  <span class="comment">// never throws SuspendActorControl</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="(f: PartialFunction[Any,Any], msg: Any)Unit" id="scala.actors;InternalActor.scheduleActor">scheduleActor</a><span class="delimiter">(</span><a title="PartialFunction[Any,Any]" id="scala.actors;InternalActor.scheduleActor.f">f</a>: <a href="../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Any,Any]">PartialFunction</a><span class="delimiter">[</span>Any, Any<span class="delimiter">]</span>, <a title="Any" id="scala.actors;InternalActor.scheduleActor.msg">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> =
    if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduleActor.f" title="PartialFunction[Any,Any]">f</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
      <span class="comment">// do nothing (timeout is handled instead)</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      val <a title="scala.actors.ActorTask" id="scala.actors;InternalActor.scheduleActor.task">task</a> = new <a href="ActorTask.scala.html#scala.actors;ActorTask" title="scala.actors.ActorTask">ActorTask</a><span class="delimiter">(</span>this, null, <a href="#scala.actors;InternalActor.scheduleActor.f" title="PartialFunction[Any,Any]">f</a>, <a href="#scala.actors;InternalActor.scheduleActor.msg" title="Any">msg</a><span class="delimiter">)</span>
      <a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a> <a href="IScheduler.scala.html#scala.actors;IScheduler.executeFromActor" title="(task: Runnable)Unit">executeFromActor</a> <a href="#scala.actors;InternalActor.scheduleActor.task" title="scala.actors.ActorTask">task</a>
    <span class="delimiter">}</span>

  <span class="comment">/* Used for notifying scheduler when blocking inside receive/receiveWithin. */</span>
  private object <a title="InternalActor.this.blocker.type" id="scala.actors;InternalActor.blocker">blocker</a> extends scala.concurrent.<a href="../concurrent/ManagedBlocker.scala.html#scala.concurrent;ManagedBlocker" title="scala.concurrent.ManagedBlocker">ManagedBlocker</a> <span class="delimiter">{</span>
    def <a title="()Boolean" id="scala.actors;InternalActor.blocker.block">block</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.actors;InternalActor" title="InternalActor.this.type">InternalActor</a>.this.<a href="#scala.actors;InternalActor.suspendActor" title="()Unit">suspendActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      true
    <span class="delimiter">}</span>
    def <a title="=&gt; Boolean" id="scala.actors;InternalActor.blocker.isReleasable">isReleasable</a> =
      <a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor" title="InternalActor.this.type">InternalActor</a>.this.<a href="#scala.actors;InternalActor.isSuspended_=" title="=&gt; Boolean">isSuspended</a>
  <span class="delimiter">}</span>

  private def <a title="()Unit" id="scala.actors;InternalActor.suspendActor">suspendActor</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    while <span class="delimiter">(</span><a href="#scala.actors;InternalActor.isSuspended_=" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      try <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor" title="()Unit">wait</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case _: <span title="InterruptedException">InterruptedException</span> =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="comment">// links: check if we should exit</span>
    if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.shouldExit_=" title="=&gt; Boolean">shouldExit</a><span class="delimiter">)</span> <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private def <a title="()Unit" id="scala.actors;InternalActor.resumeActor">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.isSuspended_=" title="(x$1: Boolean)Unit">isSuspended</a> = false
    <a href="#scala.actors;InternalActor" title="()Unit">notify</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="=&gt; Boolean" id="scala.actors;InternalActor.exiting">exiting</a> = <a href="#scala.actors;InternalActor" title="(x$1: Boolean)Boolean">synchronized</a> <span class="delimiter">{</span>
    <a href="Reactor.scala.html#scala.actors;Reactor._state" title="=&gt; scala.actors.Actor.State.Value">_state</a> <span title="(x$1: Any)Boolean">==</span> <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.State" title="scala.actors.Actor.State.type">State</a>.<a href="Actor.scala.html#scala.actors.Actor.State.Terminated" title="=&gt; scala.actors.Actor.State.Value">Terminated</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by this</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="()Unit" id="scala.actors;InternalActor.dostart">dostart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Reset various flags.</span>
    <span class="comment">//</span>
    <span class="comment">// Note that we do *not* reset `trapExit`. The reason is that</span>
    <span class="comment">// users should be able to set the field in the constructor</span>
    <span class="comment">// and before `act` is called.</span>
    <a href="#scala.actors;InternalActor.exitReason_=" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="../Symbol.scala.html#scala.Symbol.apply" title="(name: String)Symbol" class="symbol">'normal</a>
    <a href="#scala.actors;InternalActor.shouldExit_=" title="(x$1: Boolean)Unit">shouldExit</a> = false

    super.<a href="Reactor.scala.html#scala.actors;Reactor.dostart" title="()Unit">dostart</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  override def <a title="()scala.actors.InternalActor" id="scala.actors;InternalActor.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#scala.actors;InternalActor" title="scala.actors.InternalActor">InternalActor</a> = <a href="#scala.actors;InternalActor" title="(x$1: scala.actors.InternalActor)scala.actors.InternalActor">synchronized</a> <span class="delimiter">{</span>
    super.<a href="Reactor.scala.html#scala.actors;Reactor.start" title="()scala.actors.Reactor[Any]">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    this
  <span class="delimiter">}</span>

  <span class="comment">/** State of this actor */</span>
  override def <a title="=&gt; scala.actors.Actor.State.Value" id="scala.actors;InternalActor.getState">getState</a>: Actor.State.<a href="../Enumeration.scala.html#scala;Enumeration;Value" title="scala.actors.Actor.State.Value">Value</a> = <a href="#scala.actors;InternalActor" title="(x$1: scala.actors.Actor.State.Value)scala.actors.Actor.State.Value">synchronized</a> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.isSuspended_=" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.onTimeout" title="=&gt; Option[java.util.TimerTask]">onTimeout</a>.<a href="../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
        <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.State" title="scala.actors.Actor.State.type">State</a>.<a href="Actor.scala.html#scala.actors.Actor.State.Blocked" title="=&gt; scala.actors.Actor.State.Value">Blocked</a>
      else
        <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.State" title="scala.actors.Actor.State.type">State</a>.<a href="Actor.scala.html#scala.actors.Actor.State.TimedBlocked" title="=&gt; scala.actors.Actor.State.Value">TimedBlocked</a>
    <span class="delimiter">}</span> else
      super.<a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.getState" title="=&gt; scala.actors.Actor.State.Value">getState</a>
  <span class="delimiter">}</span>

  <span class="comment">// guarded by this</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> var <a title="List[scala.actors.AbstractActor]" id="scala.actors;InternalActor.links_=">links</a>: <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[scala.actors.AbstractActor]">List</a><span class="delimiter">[</span>AbstractActor<span class="delimiter">]</span> = <a href="../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to actor &lt;code&gt;to&lt;/code&gt;.
   *
   * @param to the actor to link to
   * @return   the parameter actor
   */</span>
  def <a title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor" id="scala.actors;InternalActor.link(3023dd7be2)">link</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="scala.actors;InternalActor.link(3023dd7be2).to">to</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    this <a href="#scala.actors;InternalActor.linkTo" title="(to: scala.actors.AbstractActor)Unit">linkTo</a> <a href="#scala.actors;InternalActor.link(3023dd7be2).to" title="scala.actors.AbstractActor">to</a>
    <a href="#scala.actors;InternalActor.link(3023dd7be2).to" title="scala.actors.AbstractActor">to</a> <a href="AbstractActor.scala.html#scala.actors;AbstractActor.linkTo" title="(to: scala.actors.AbstractActor)Unit">linkTo</a> this
    <a href="#scala.actors;InternalActor.link(3023dd7be2).to" title="scala.actors.AbstractActor">to</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to actor &lt;code&gt;to&lt;/code&gt;.
   *
   * @param to the actor to link to
   * @return   the parameter actor
   */</span>
  def <a title="(to: scala.actors.ActorRef)scala.actors.ActorRef" id="scala.actors;InternalActor.link(3b2a61f2f3)">link</a><span class="delimiter">(</span><a title="scala.actors.ActorRef" id="scala.actors;InternalActor.link(3b2a61f2f3).to">to</a>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    this.<a href="#scala.actors;InternalActor.link(3023dd7be2)" title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor">link</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.link(3b2a61f2f3).to" title="scala.actors.ActorRef">to</a>.<a href="ActorRef.scala.html#scala.actors;ActorRef.localActor" title="=&gt; scala.actors.AbstractActor">localActor</a><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.link(3b2a61f2f3).to" title="scala.actors.ActorRef">to</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   *  Unidirectional linking. For migration purposes only
   */</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(subject: scala.actors.ActorRef)scala.actors.ActorRef" id="scala.actors;InternalActor.watch">watch</a><span class="delimiter">(</span><a title="scala.actors.ActorRef" id="scala.actors;InternalActor.watch.subject">subject</a>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.watch.subject" title="scala.actors.ActorRef">subject</a>.<a href="ActorRef.scala.html#scala.actors;ActorRef.localActor" title="=&gt; scala.actors.AbstractActor">localActor</a> <a href="AbstractActor.scala.html#scala.actors;AbstractActor.linkTo" title="(to: scala.actors.AbstractActor)Unit">linkTo</a> this
    <a href="#scala.actors;InternalActor.watch.subject" title="scala.actors.ActorRef">subject</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   *  Unidirectional linking. For migration purposes only
   */</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(subject: scala.actors.ActorRef)scala.actors.ActorRef" id="scala.actors;InternalActor.unwatch">unwatch</a><span class="delimiter">(</span><a title="scala.actors.ActorRef" id="scala.actors;InternalActor.unwatch.subject">subject</a>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a><span class="delimiter">)</span>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.unwatch.subject" title="scala.actors.ActorRef">subject</a>.<a href="ActorRef.scala.html#scala.actors;ActorRef.localActor" title="=&gt; scala.actors.AbstractActor">localActor</a> <a href="AbstractActor.scala.html#scala.actors;AbstractActor.unlinkFrom" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a> this
    <a href="#scala.actors;InternalActor.unwatch.subject" title="scala.actors.ActorRef">subject</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Links &lt;code&gt;self&lt;/code&gt; to the actor defined by &lt;code&gt;body&lt;/code&gt;.
   *
   * @param body the body of the actor to link to
   * @return     the parameter actor
   */</span>
  def <a title="(body: =&gt; Unit)scala.actors.Actor" id="scala.actors;InternalActor.link(1663ec2b44)">link</a><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.actors;InternalActor.link(1663ec2b44).body">body</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="Actor.scala.html#scala.actors;Actor" title="scala.actors.Actor">Actor</a> = <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;link called on actor different from self&quot;)" class="string">&quot;link called on actor different from self&quot;</span><span class="delimiter">)</span>
    val <a title="&lt;refinement of scala.actors.Actor&gt; extends AnyRef with scala.actors.Actor" id="scala.actors;InternalActor.link(1663ec2b44).a">a</a> = new <a title="&lt;$anon: scala.actors.Actor&gt; extends AnyRef with scala.actors.Actor" id="scala.actors;InternalActor.link(1663ec2b44).a;$anon">Actor</a> <span class="delimiter">{</span>
      def <a title="()Unit" id="scala.actors;InternalActor.link(1663ec2b44).a;$anon.act">act</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#scala.actors;InternalActor.link(1663ec2b44).body" title="=&gt; Unit">body</a>
      override final val <a title="scala.actors.IScheduler" id="scala.actors;InternalActor.link(1663ec2b44).a;$anon.scheduler">scheduler</a>: <a href="IScheduler.scala.html#scala.actors;IScheduler" title="scala.actors.IScheduler">IScheduler</a> = <a href="#scala.actors;InternalActor" title="InternalActor.this.type">InternalActor</a>.this.<a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a>
    <span class="delimiter">}</span>
    <a href="#scala.actors;InternalActor.link(3023dd7be2)" title="(to: scala.actors.AbstractActor)scala.actors.AbstractActor">link</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.link(1663ec2b44).a" title="&lt;refinement of scala.actors.Actor&gt; extends AnyRef with scala.actors.Actor">a</a><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.link(1663ec2b44).a" title="&lt;refinement of scala.actors.Actor&gt; extends AnyRef with scala.actors.Actor">a</a>.<a href="Actor.scala.html#scala.actors;Actor.start" title="()scala.actors.Actor">start</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#scala.actors;InternalActor.link(1663ec2b44).a" title="&lt;refinement of scala.actors.Actor&gt; extends AnyRef with scala.actors.Actor">a</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(to: scala.actors.AbstractActor)Unit" id="scala.actors;InternalActor.linkTo">linkTo</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="scala.actors;InternalActor.linkTo.to">to</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> = <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.links_=" title="(x$1: List[scala.actors.AbstractActor])Unit">links</a> = <a href="#scala.actors;InternalActor.linkTo.to" title="scala.actors.AbstractActor">to</a> <a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.actors.AbstractActor)List[scala.actors.AbstractActor]">::</a> <a href="#scala.actors;InternalActor.links_=" title="=&gt; List[scala.actors.AbstractActor]">links</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Unlinks &lt;code&gt;self&lt;/code&gt; from actor &lt;code&gt;from&lt;/code&gt;.
   */</span>
  def <a title="(from: scala.actors.AbstractActor)Unit" id="scala.actors;InternalActor.unlink(7610d88b74)">unlink</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="scala.actors;InternalActor.unlink(7610d88b74).from">from</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.self(014c9d39f6)" title="(sched: scala.actors.IScheduler)scala.actors.InternalActor">self</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">==</span> this, <span title="String(&quot;unlink called on actor different from self&quot;)" class="string">&quot;unlink called on actor different from self&quot;</span><span class="delimiter">)</span>
    this <a href="#scala.actors;InternalActor.unlinkFrom" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a> <a href="#scala.actors;InternalActor.unlink(7610d88b74).from" title="scala.actors.AbstractActor">from</a>
    <a href="#scala.actors;InternalActor.unlink(7610d88b74).from" title="scala.actors.AbstractActor">from</a> <a href="AbstractActor.scala.html#scala.actors;AbstractActor.unlinkFrom" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a> this
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Unlinks &lt;code&gt;self&lt;/code&gt; from actor &lt;code&gt;from&lt;/code&gt;.
   */</span>
  def <a title="(from: scala.actors.ActorRef)Unit" id="scala.actors;InternalActor.unlink(c141ac6e50)">unlink</a><span class="delimiter">(</span><a title="scala.actors.ActorRef" id="scala.actors;InternalActor.unlink(c141ac6e50).from">from</a>: <a href="ActorRef.scala.html#scala.actors;ActorRef" title="scala.actors.ActorRef">ActorRef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.unlink(7610d88b74)" title="(from: scala.actors.AbstractActor)Unit">unlink</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.unlink(c141ac6e50).from" title="scala.actors.ActorRef">from</a>.<a href="ActorRef.scala.html#scala.actors;ActorRef.localActor" title="=&gt; scala.actors.AbstractActor">localActor</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(from: scala.actors.AbstractActor)Unit" id="scala.actors;InternalActor.unlinkFrom">unlinkFrom</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="scala.actors;InternalActor.unlinkFrom.from">from</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> = <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.links_=" title="(x$1: List[scala.actors.AbstractActor])Unit">links</a> = <a href="#scala.actors;InternalActor.links_=" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: scala.actors.AbstractActor =&gt; Boolean)List[scala.actors.AbstractActor]">filterNot</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.unlinkFrom.from" title="scala.actors.AbstractActor">from</a>.<a href="#scala.actors;InternalActor.unlinkFrom.$anonfun.x$1" title="(x$1: Any)Boolean">==</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @volatile
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> var <a title="Boolean" id="scala.actors;InternalActor._trapExit_=">_trapExit</a> = false

  def <a title="=&gt; Boolean" id="scala.actors;InternalActor.trapExit">trapExit</a> = <a href="#scala.actors;InternalActor._trapExit_=" title="=&gt; Boolean">_trapExit</a>

  def <a title="(value: Boolean)Unit" id="scala.actors;InternalActor.trapExit_=">trapExit_=</a><span class="delimiter">(</span><a title="Boolean" id="scala.actors;InternalActor.trapExit_=.value">value</a>: <a href="../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> = <a href="#scala.actors;InternalActor._trapExit_=" title="(x$1: Boolean)Unit">_trapExit</a> = <a href="#scala.actors;InternalActor.trapExit_=.value" title="Boolean">value</a>

  <span class="comment">// guarded by this</span>
  private var <a title="AnyRef" id="scala.actors;InternalActor.exitReason_=">exitReason</a>: <span title="AnyRef">AnyRef</span> = <a href="../Symbol.scala.html#scala.Symbol.apply" title="(name: String)Symbol" class="symbol">'normal</a>
  <span class="comment">// guarded by this</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> var <a title="Boolean" id="scala.actors;InternalActor.shouldExit_=">shouldExit</a> = false

  <span class="comment">/**
   * &lt;p&gt;
   *   Terminates execution of &lt;code&gt;self&lt;/code&gt; with the following
   *   effect on linked actors:
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;, send message
   *   &lt;code&gt;Exit(self, reason)&lt;/code&gt; to &lt;code&gt;a&lt;/code&gt;.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   For each linked actor &lt;code&gt;a&lt;/code&gt; with
   *   &lt;code&gt;trapExit&lt;/code&gt; set to &lt;code&gt;false&lt;/code&gt; (default),
   *   call &lt;code&gt;a.exit(reason)&lt;/code&gt; if
   *   &lt;code&gt;reason != 'normal&lt;/code&gt;.
   * &lt;/p&gt;
   */</span>
  protected<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(reason: AnyRef)Nothing" id="scala.actors;InternalActor.exit(1f0b6465e5)">exit</a><span class="delimiter">(</span><a title="AnyRef" id="scala.actors;InternalActor.exit(1f0b6465e5).reason">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <a href="#scala.actors;InternalActor.exitReason_=" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#scala.actors;InternalActor.exit(1f0b6465e5).reason" title="AnyRef">reason</a>
    <span class="delimiter">}</span>
    <a href="#scala.actors;InternalActor.exit(e84ebd0650)" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Terminates with exit reason &lt;code&gt;'normal&lt;/code&gt;.
   */</span>
  protected<span class="delimiter">[</span>actors<span class="delimiter">]</span> override def <a title="()Nothing" id="scala.actors;InternalActor.exit(e84ebd0650)">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Nothing">Nothing</span> = <span class="delimiter">{</span>
    val <a title="() =&gt; Unit" id="scala.actors;InternalActor.exit(e84ebd0650).todo">todo</a> = <a href="#scala.actors;InternalActor" title="(x$1: () =&gt; Unit)() =&gt; Unit">synchronized</a> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.links_=" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.exitLinked(933bc4f052)" title="()() =&gt; Unit">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else
        <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="../Function0.scala.html#scala;Function0.apply" title="()Unit">todo</a><span class="delimiter">(</span><span class="delimiter">)</span>
    super.<a href="Reactor.scala.html#scala.actors;Reactor.exit" title="()Nothing">exit</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !links.isEmpty</span>
  <span class="comment">// guarded by this</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="()() =&gt; Unit" id="scala.actors;InternalActor.exitLinked(933bc4f052)">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <a href="Reactor.scala.html#scala.actors;Reactor._state_=" title="(x$1: scala.actors.Actor.State.Value)Unit">_state</a> = <a href="Actor.scala.html#scala.actors.Actor" title="scala.actors.Actor.type">Actor</a>.<a href="Actor.scala.html#scala.actors.Actor.State" title="scala.actors.Actor.State.type">State</a>.<a href="Actor.scala.html#scala.actors.Actor.State.Terminated" title="=&gt; scala.actors.Actor.State.Value">Terminated</a>
    <span class="comment">// reset waitingFor, otherwise getState returns Suspended</span>
    <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor_=" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="Reactor.scala.html#scala.actors.Reactor" title="scala.actors.Reactor.type">Reactor</a>.<a href="Reactor.scala.html#scala.actors.Reactor.waitingForNone" title="=&gt; PartialFunction[Any,Unit]">waitingForNone</a>
    <span class="comment">// remove this from links</span>
    val <a title="List[scala.actors.AbstractActor]" id="scala.actors;InternalActor.exitLinked(933bc4f052).mylinks">mylinks</a> = <a href="#scala.actors;InternalActor.links_=" title="=&gt; List[scala.actors.AbstractActor]">links</a>.<a href="../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: scala.actors.AbstractActor =&gt; Boolean)List[scala.actors.AbstractActor]">filterNot</a><span class="delimiter">(</span>this.<a href="#scala.actors;InternalActor.exitLinked(933bc4f052).mylinks.$anonfun.x$1" title="(x$1: Any)Boolean">==</a><span class="delimiter">)</span>
    <span class="comment">// unlink actors</span>
    <a href="#scala.actors;InternalActor.exitLinked(933bc4f052).mylinks" title="List[scala.actors.AbstractActor]">mylinks</a>.<a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: scala.actors.AbstractActor =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.unlinkFrom" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.exitLinked(933bc4f052).$anonfun.x$7" title="scala.actors.AbstractActor">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="comment">// return closure that locks linked actors</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <a href="#scala.actors;InternalActor.exitLinked(933bc4f052).mylinks" title="List[scala.actors.AbstractActor]">mylinks</a>.<a href="../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: scala.actors.AbstractActor =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span>linked: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#scala.actors;InternalActor.exitLinked(933bc4f052).$anonfun.$anonfun.linked" title="scala.actors.AbstractActor">linked</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.actors;InternalActor.exitLinked(933bc4f052).$anonfun.$anonfun.linked" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#scala.actors;AbstractActor.exiting" title="=&gt; Boolean">exiting</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.actors;InternalActor.exitLinked(933bc4f052).$anonfun.$anonfun.linked" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#scala.actors;AbstractActor.unlinkFrom" title="(from: scala.actors.AbstractActor)Unit">unlinkFrom</a><span class="delimiter">(</span>this<span class="delimiter">)</span>
            <a href="#scala.actors;InternalActor.exitLinked(933bc4f052).$anonfun.$anonfun.linked" title="scala.actors.AbstractActor">linked</a>.<a href="AbstractActor.scala.html#scala.actors;AbstractActor.exit" title="(from: scala.actors.AbstractActor, reason: AnyRef)Unit">exit</a><span class="delimiter">(</span>this, <a href="#scala.actors;InternalActor.exitReason_=" title="=&gt; AnyRef">exitReason</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !links.isEmpty</span>
  <span class="comment">// guarded by this</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(reason: AnyRef)() =&gt; Unit" id="scala.actors;InternalActor.exitLinked(eeee5a1122)">exitLinked</a><span class="delimiter">(</span><a title="AnyRef" id="scala.actors;InternalActor.exitLinked(eeee5a1122).reason">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.exitReason_=" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#scala.actors;InternalActor.exitLinked(eeee5a1122).reason" title="AnyRef">reason</a>
    <a href="#scala.actors;InternalActor.exitLinked(933bc4f052)" title="()() =&gt; Unit">exitLinked</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// Assume !this.exiting</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(from: scala.actors.AbstractActor, reason: AnyRef)Unit" id="scala.actors;InternalActor.exit(5de325275c)">exit</a><span class="delimiter">(</span><a title="scala.actors.AbstractActor" id="scala.actors;InternalActor.exit(5de325275c).from">from</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a>, <a title="AnyRef" id="scala.actors;InternalActor.exit(5de325275c).reason">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.trapExit" title="=&gt; Boolean">trapExit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      this <a href="InternalReplyReactor.scala.html#scala.actors;InternalReplyReactor.!" title="(msg: Any)Unit">!</a> <a href="#scala.actors.Exit.readResolve" title="(from: scala.actors.AbstractActor, reason: AnyRef)scala.actors.Exit">Exit</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.exit(5de325275c).from" title="scala.actors.AbstractActor">from</a>, <a href="#scala.actors;InternalActor.exit(5de325275c).reason" title="AnyRef">reason</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.exit(5de325275c).reason" title="AnyRef">reason</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../Symbol.scala.html#scala.Symbol.apply" title="(name: String)Symbol" class="symbol">'normal</a><span class="delimiter">)</span>
      <a href="#scala.actors;InternalActor.stop" title="(reason: AnyRef)Unit">stop</a><span class="delimiter">(</span><a href="#scala.actors;InternalActor.exit(5de325275c).reason" title="AnyRef">reason</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/* Requires qualified private, because &lt;code&gt;RemoteActor&lt;/code&gt; must
   * register a termination handler.
   */</span>
  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(f: =&gt; Unit)Unit" id="scala.actors;InternalActor.onTerminate">onTerminate</a><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.actors;InternalActor.onTerminate.f">f</a>: =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a>.<a href="IScheduler.scala.html#scala.actors;IScheduler.onTerminate" title="(a: scala.actors.TrackedReactor)(f: =&gt; Unit)Unit">onTerminate</a><span class="delimiter">(</span>this<span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#scala.actors;InternalActor.onTerminate.f" title="=&gt; Unit">f</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  private<span class="delimiter">[</span>actors<span class="delimiter">]</span> def <a title="(reason: AnyRef)Unit" id="scala.actors;InternalActor.stop">stop</a><span class="delimiter">(</span><a title="AnyRef" id="scala.actors;InternalActor.stop.reason">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <a href="#scala.actors;InternalActor" title="(x$1: Unit)Unit">synchronized</a> <span class="delimiter">{</span>
      <a href="#scala.actors;InternalActor.shouldExit_=" title="(x$1: Boolean)Unit">shouldExit</a> = true
      <a href="#scala.actors;InternalActor.exitReason_=" title="(x$1: AnyRef)Unit">exitReason</a> = <a href="#scala.actors;InternalActor.stop.reason" title="AnyRef">reason</a>
      <span class="comment">// resume this Actor in a way that</span>
      <span class="comment">// causes it to exit</span>
      <span class="comment">// (because shouldExit == true)</span>
      if <span class="delimiter">(</span><a href="#scala.actors;InternalActor.isSuspended_=" title="=&gt; Boolean">isSuspended</a><span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.resumeActor" title="()Unit">resumeActor</a><span class="delimiter">(</span><span class="delimiter">)</span>
      else if <span class="delimiter">(</span><a href="Reactor.scala.html#scala.actors;Reactor.waitingFor" title="=&gt; PartialFunction[Any,Any]">waitingFor</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="Reactor.scala.html#scala.actors.Reactor" title="scala.actors.Reactor.type">Reactor</a>.<a href="Reactor.scala.html#scala.actors.Reactor.waitingForNone" title="=&gt; PartialFunction[Any,Unit]">waitingForNone</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor_=" title="(x$1: PartialFunction[Any,Any])Unit">waitingFor</a> = <a href="Reactor.scala.html#scala.actors.Reactor" title="scala.actors.Reactor.type">Reactor</a>.<a href="Reactor.scala.html#scala.actors.Reactor.waitingForNone" title="=&gt; PartialFunction[Any,Unit]">waitingForNone</a>
        <span class="comment">// it doesn't matter what partial function we are passing here</span>
        val <a title="scala.actors.ActorTask" id="scala.actors;InternalActor.stop.task">task</a> = new <a href="ActorTask.scala.html#scala.actors;ActorTask" title="scala.actors.ActorTask">ActorTask</a><span class="delimiter">(</span>this, null, <a href="Reactor.scala.html#scala.actors;Reactor.waitingFor" title="=&gt; PartialFunction[Any,Any]">waitingFor</a>, null<span class="delimiter">)</span>
        <a href="#scala.actors;InternalActor.scheduler" title="=&gt; scala.actors.IScheduler">scheduler</a> <a href="IScheduler.scala.html#scala.actors;IScheduler.execute(28a7a8d3d4)" title="(task: Runnable)Unit">execute</a> <a href="#scala.actors;InternalActor.stop.task" title="scala.actors.ActorTask">task</a>
        <span class="comment">/* Here we should not throw a SuspendActorControl,
           since the current method is called from an actor that
           is in the process of exiting.

           Therefore, the contract for scheduleActor is that
           it never throws a SuspendActorControl.
         */</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 *    Used as the timeout pattern in
 *    &lt;a href=&quot;Actor.html#receiveWithin(Long)&quot; target=&quot;contentFrame&quot;&gt;
 *    &lt;code&gt;receiveWithin&lt;/code&gt;&lt;/a&gt; and
 *    &lt;a href=&quot;Actor.html#reactWithin(Long)&quot; target=&quot;contentFrame&quot;&gt;
 *    &lt;code&gt;reactWithin&lt;/code&gt;&lt;/a&gt;.
 *
 * @example {{{
 *    receiveWithin(500) {
 *      case (x, y) =&gt; ...
 *      case TIMEOUT =&gt; ...
 *    }
 * }}}
 *
 *  @author Philipp Haller
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;Use the akka.actor package instead. For migration from the scala.actors package refer to the Actors Migration Guide.&quot;</span>, <span class="string">&quot;2.11.0&quot;</span><span class="delimiter">)</span>
case object <a href="#scala.actors.TIMEOUT.productElement.x$1" title="scala.actors.TIMEOUT.type" id="scala.actors.TIMEOUT.readResolve">TIMEOUT</a>

<span class="comment">/**
 * Sent to an actor
 *  with `trapExit` set to `true` whenever one of its linked actors
 *  terminates.
 *
 *  @param from   the actor that terminated
 *  @param reason the reason that caused the actor to terminate
 */</span>
@deprecated<span class="delimiter">(</span><span class="string">&quot;Use the akka.actor package instead. For migration from the scala.actors package refer to the Actors Migration Guide.&quot;</span>, <span class="string">&quot;2.11.0&quot;</span><span class="delimiter">)</span>
case class <a title="class Exit extends AnyRef with Product with Serializable" id="scala.actors.Exit.readResolve">Exit</a><a href="../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="scala.actors.AbstractActor" id="scala.actors;Exit.from">from</a>: <a href="AbstractActor.scala.html#scala.actors;AbstractActor" title="scala.actors.AbstractActor">AbstractActor</a>, <a title="AnyRef" id="scala.actors;Exit.reason">reason</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>

<span class="comment">/**
 * Manages control flow of actor executions.
 *
 * @author Philipp Haller
 */</span>
private<span class="delimiter">[</span>actors<span class="delimiter">]</span> class <a title="class SuspendActorControl extends Throwable with scala.util.control.ControlThrowable" id="scala.actors;SuspendActorControl">SuspendActorControl</a> extends <a href="../util/control/ControlThrowable.scala.html#scala.util.control;ControlThrowable" title="scala.util.control.ControlThrowable">ControlThrowable</a>

        </pre>
    </body>
</html>
