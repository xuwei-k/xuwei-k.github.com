<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/util/continuations/ControlContext.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2010-2013, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

package scala.util.continuations

import scala.annotation.<span class="delimiter">{</span> Annotation, StaticAnnotation, TypeConstraint <span class="delimiter">}</span>

<span class="comment">/** This annotation is used to mark a parameter as part of a continuation
 * context.
 *
 * The type `A @cpsParam[B,C]` is desugared to `ControlContext[A,B,C]` at compile
 * time.
 *
 * @tparam B  The type of computation state after computation has executed, and
 *   before control is returned to the shift.
 * @tparam C  The eventual return type of this delimited compuation.
 * @see scala.util.continuations.ControlContext
 */</span>
class <a title="class cpsParam[-B, +C] extends scala.annotation.Annotation with scala.annotation.StaticAnnotation with scala.annotation.TypeConstraint" id="scala.util.continuations;cpsParam">cpsParam</a><span class="delimiter">[</span>-<a title="" id="scala.util.continuations;cpsParam;B">B</a>,+<a title="" id="scala.util.continuations;cpsParam;C">C</a><span class="delimiter">]</span> extends <a href="../../annotation/StaticAnnotation.scala.html#scala.annotation;StaticAnnotation" title="scala.annotation.StaticAnnotation">StaticAnnotation</a> with <a href="../../annotation/TypeConstraint.scala.html#scala.annotation;TypeConstraint" title="scala.annotation.TypeConstraint">TypeConstraint</a>

private class <a title="class cpsSym[B] extends scala.annotation.Annotation" id="scala.util.continuations;cpsSym">cpsSym</a><span class="delimiter">[</span><a title="" id="scala.util.continuations;cpsSym;B">B</a><span class="delimiter">]</span> extends <a href="../../annotation/Annotation.scala.html#scala.annotation;Annotation" title="scala.annotation.Annotation">Annotation</a> <span class="comment">// implementation detail</span>

private class <a title="class cpsSynth extends scala.annotation.Annotation" id="scala.util.continuations;cpsSynth">cpsSynth</a> extends <a href="../../annotation/Annotation.scala.html#scala.annotation;Annotation" title="scala.annotation.Annotation">Annotation</a> <span class="comment">// implementation detail</span>

private class <a title="class cpsPlus extends scala.annotation.Annotation with scala.annotation.StaticAnnotation with scala.annotation.TypeConstraint" id="scala.util.continuations;cpsPlus">cpsPlus</a> extends <a href="../../annotation/StaticAnnotation.scala.html#scala.annotation;StaticAnnotation" title="scala.annotation.StaticAnnotation">StaticAnnotation</a> with <a href="../../annotation/TypeConstraint.scala.html#scala.annotation;TypeConstraint" title="scala.annotation.TypeConstraint">TypeConstraint</a> <span class="comment">// implementation detail</span>
private class <a title="class cpsMinus extends scala.annotation.Annotation" id="scala.util.continuations;cpsMinus">cpsMinus</a> extends <a href="../../annotation/Annotation.scala.html#scala.annotation;Annotation" title="scala.annotation.Annotation">Annotation</a> <span class="comment">// implementation detail</span>


<span class="comment">/**
 * This class represent a portion of computation that has a 'hole' in it.  The
 * class has the ability to compute state up until a certain point where the
 * state has the `A` type.  If this context is given a function of type
 * `A =&gt; B` to move the state to the `B` type, then the entire computation can
 * be completed resulting in a value of type `C`.
 *
 * An Example: {{{
 *   val cc = new ControlContext[String, String, String](
 *      fun = { (f: String=&gt;String, err: Exception =&gt; String) =&gt;
 *        val updatedState =
 *          try f(&quot;State&quot;)
 *          catch {
 *            case e: Exception =&gt; err(e)
 *          }
 *        updatedState + &quot;-Complete!&quot;
 *      },
 *      x = null.asIntanceOf[String]
 *  }
 *  cc.foreach(_ + &quot;-Continued&quot;)  // Results in &quot;State-Continued-Complete!&quot;
 * }}}
 *
 * This class is used to transform calls to `shift` in the `continuations`
 * package.  Direct use and instantiation is possible, but usually reserved
 * for advanced cases.
 *
 *
 * A context may either be ''trivial'' or ''non-trivial''.   A ''trivial''
 * context '''just''' has a state of type `A`.  When completing the computation,
 * it's only necessary to use the function of type `A =&gt; B` directly against
 * the trivial value. A ''non-trivial'' value stores a computation '''around'''
 * the state transformation of type `A =&gt; B` and cannot be short-circuited.
 *
 * @param fun The captured computation so far.  The type
 *   `(A =&gt; B, Exception =&gt; B) =&gt; C` is a function where:
 *   - The first parameter `A=&gt;B` represents the computation defined against
 *       the current state held in the ControlContext.
 *   - The second parameter `Exception =&gt; B` represents a computation to
 *       perform if an exception is thrown from the first parameter's computation.
 *   - The return value is the result of the entire computation contained in this
 *       `ControlContext`.
 * @param x  The current state stored in this context.  Allowed to be null if
 *   the context is non-trivial.
 * @tparam A  The type of the state currently held in the context.
 * @tparam B  The type of the transformed state needed to complete this computation.
 * @tparam C  The return type of the entire computation stored in this context.
 * @note `fun` and `x` are allowed to be `null`.
 * @see scala.util.continutations.shiftR
 */</span>
final class <a title="class ControlContext[+A, -B, +C] extends AnyRef with Serializable" id="scala.util.continuations;ControlContext">ControlContext</a><span class="delimiter">[</span>+<a title="" id="scala.util.continuations;ControlContext;A">A</a>,-<a title="" id="scala.util.continuations;ControlContext;B">B</a>,+<a title="" id="scala.util.continuations;ControlContext;C">C</a><span class="delimiter">]</span><a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A,B,C]" class="delimiter">(</a>val <a title="(A =&gt; B, Exception =&gt; B) =&gt; C" id="scala.util.continuations;ControlContext.fun">fun</a>: <span class="delimiter">(</span>A =&gt; B, Exception =&gt; B<span class="delimiter">)</span> =&gt; C, val <a title="A" id="scala.util.continuations;ControlContext.x">x</a>: <a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">)</span> extends <a href="../../Serializable.scala.html#scala;Serializable" title="Serializable">Serializable</a> <span class="delimiter">{</span>

  <span class="comment">/*
    final def map[A1](f: A =&gt; A1): ControlContext[A1,B,C] = {
      new ControlContext((k:(A1 =&gt; B)) =&gt; fun((x:A) =&gt; k(f(x))), null.asInstanceOf[A1])
    }

    final def flatMap[A1,B1&lt;:B](f: (A =&gt; ControlContext[A1,B1,B])): ControlContext[A1,B1,C] = {
      new ControlContext((k:(A1 =&gt; B1)) =&gt; fun((x:A) =&gt; f(x).fun(k)))
    }
  */</span>

  <span class="comment">/**
   * Modifies the currently captured state in this `ControlContext`.
   * @tparam A1 The new type of state in this context.
   * @param f A transformation function on the current state of the `ControlContext`.
   * @return The new `ControlContext`.
   */</span>
  @noinline final def <a title="[A1](f: A =&gt; A1)scala.util.continuations.ControlContext[A1,B,C]" id="scala.util.continuations;ControlContext.map">map</a><span class="delimiter">[</span><a title="" id="scala.util.continuations;ControlContext.map;A1">A1</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; A1" id="scala.util.continuations;ControlContext.map.f">f</a>: A =&gt; A1<span class="delimiter">)</span>: <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B,C]">ControlContext</a><span class="delimiter">[</span>A1,B,C<span class="delimiter">]</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span>
      try <span class="delimiter">{</span>
        new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B,C]">ControlContext</a><span class="delimiter">[</span>A1,B,C<span class="delimiter">]</span><span class="delimiter">(</span>null, <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)A1">f</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.x" title="=&gt; A">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// TODO: only alloc if f(x) != x</span>
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case <a title="Exception" id="scala.util.continuations;ControlContext.map.ex">ex</a>: <span title="Exception">Exception</span> =&gt;
          new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B,C]">ControlContext</a><span class="delimiter">(</span><span class="delimiter">(</span>k: A1 =&gt; B, thr: Exception =&gt; B<span class="delimiter">)</span> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.map.ex" title="Exception">ex</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;C" title="C">C</a><span class="delimiter">]</span>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A1" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext.map;A1" title="A1">A1</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    else
      new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B,C]">ControlContext</a><span class="delimiter">(</span><span class="delimiter">{</span> <span class="delimiter">(</span>k: A1 =&gt; B, thr: Exception =&gt; B<span class="delimiter">)</span> =&gt;
        <a href="../../Function2.scala.html#scala;Function2.apply" title="(v1: A =&gt; B, v2: Exception =&gt; B)C">fun</a><span class="delimiter">(</span> <span class="delimiter">{</span> <span class="delimiter">(</span>x:<a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">)</span> =&gt;
          var <a title="Boolean" id="scala.util.continuations;ControlContext.map.$anonfun.$anonfun.done">done</a> = false
          try <span class="delimiter">{</span>
            val <a title="A1" id="scala.util.continuations;ControlContext.map.$anonfun.$anonfun.res">res</a> = <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)A1">f</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.map.$anonfun.$anonfun.x" title="A">x</a><span class="delimiter">)</span>
            <a href="#scala.util.continuations;ControlContext.map.$anonfun.$anonfun.done" title="Boolean">done</a> = true
            <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A1)B">k</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.map.$anonfun.$anonfun.res" title="A1">res</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a title="Exception" id="scala.util.continuations;ControlContext.map.$anonfun.$anonfun.ex">ex</a>: <span title="Exception">Exception</span> if <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.util.continuations;ControlContext.map.$anonfun.$anonfun.done" title="Boolean">done</a> =&gt;
              <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.map.$anonfun.$anonfun.ex" title="Exception">ex</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>, <a href="#scala.util.continuations;ControlContext.map.$anonfun.thr" title="Exception =&gt; B">thr</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A1" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext.map;A1" title="A1">A1</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="comment">// it would be nice if @inline would turn the trivial path into a tail call.</span>
  <span class="comment">// unfortunately it doesn't, so we do it ourselves in SelectiveCPSTransform</span>

  <span class="comment">/**
   * Maps and flattens this `ControlContext` with another `ControlContext` generated from the current state.
   * @note   The resulting comuptation is still the type `C`.
   * @tparam A1 The new type of the contained state.
   * @tparam B1 The new type of the state after the stored continuation has executed.
   * @tparam C1 The result type of the nested `ControlContext`.  Because the nested `ControlContext` is executed within
   *   the outer `ControlContext`, this type must `&gt;: B` so that the resulting nested computation can be fed through
   *   the current continuation.
   * @param f A transformation function from the current state to a nested `ControlContext`.
   * @return The transformed `ControlContext`.
   */</span>
  @noinline final def <a title="[A1, B1, C1 &lt;: B](f: A =&gt; scala.util.continuations.ControlContext[A1,B1,C1])scala.util.continuations.ControlContext[A1,B1,C]" id="scala.util.continuations;ControlContext.flatMap">flatMap</a><span class="delimiter">[</span><a title="" id="scala.util.continuations;ControlContext.flatMap;A1">A1</a>,<a title="" id="scala.util.continuations;ControlContext.flatMap;B1">B1</a>,<a title=" &lt;: B" id="scala.util.continuations;ControlContext.flatMap;C1">C1</a>&lt;:B<span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; scala.util.continuations.ControlContext[A1,B1,C1]" id="scala.util.continuations;ControlContext.flatMap.f">f</a>: <span class="delimiter">(</span>A =&gt; ControlContext<span class="delimiter">[</span>A1,B1,C1<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C]">ControlContext</a><span class="delimiter">[</span>A1,B1,C<span class="delimiter">]</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span>
      try <span class="delimiter">{</span>
        <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)scala.util.continuations.ControlContext[A1,B1,C1]">f</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.x" title="=&gt; A">x</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.util.continuations.ControlContext[A1,B1,C]" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C]">ControlContext</a><span class="delimiter">[</span>A1,B1,C<span class="delimiter">]</span><span class="delimiter">]</span>
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case <a title="Exception" id="scala.util.continuations;ControlContext.flatMap.ex">ex</a>: <span title="Exception">Exception</span> =&gt;
          new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C]">ControlContext</a><span class="delimiter">(</span><span class="delimiter">(</span>k: A1 =&gt; B1, thr: Exception =&gt; B1<span class="delimiter">)</span> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B1">thr</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMap.ex" title="Exception">ex</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;C" title="C">C</a><span class="delimiter">]</span>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A1" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext.flatMap;A1" title="A1">A1</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    else
      new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C]">ControlContext</a><span class="delimiter">(</span><span class="delimiter">{</span> <span class="delimiter">(</span>k: A1 =&gt; B1, thr: Exception =&gt; B1<span class="delimiter">)</span> =&gt;
        <a href="../../Function2.scala.html#scala;Function2.apply" title="(v1: A =&gt; B, v2: Exception =&gt; B)C">fun</a><span class="delimiter">(</span> <span class="delimiter">{</span> <span class="delimiter">(</span>x:<a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">)</span> =&gt;
          var <a title="Boolean" id="scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.done">done</a> = false
          try <span class="delimiter">{</span>
            val <a title="scala.util.continuations.ControlContext[A1,B1,C1]" id="scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.ctxR">ctxR</a> = <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)scala.util.continuations.ControlContext[A1,B1,C1]">f</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.x" title="A">x</a><span class="delimiter">)</span>
            <a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.done" title="Boolean">done</a> = true
            val <a title="C1" id="scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.res">res</a>: <a href="#scala.util.continuations;ControlContext.flatMap;C1" title="C1">C1</a> = <a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.ctxR" title="scala.util.continuations.ControlContext[A1,B1,C1]">ctxR</a>.<a href="#scala.util.continuations;ControlContext.foreachFull" title="(f: A1 =&gt; B1, g: Exception =&gt; B1)C1">foreachFull</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.k" title="A1 =&gt; B1">k</a>, <a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.thr" title="Exception =&gt; B1">thr</a><span class="delimiter">)</span> <span class="comment">// =&gt; B1</span>
            <a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.res" title="C1">res</a>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a title="Exception" id="scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.ex">ex</a>: <span title="Exception">Exception</span> if <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.done" title="Boolean">done</a> =&gt;
              <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B1">thr</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.$anonfun.ex" title="Exception">ex</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="B" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;B" title="B">B</a><span class="delimiter">]</span> <span class="comment">// =&gt; B NOTE: in general this is unsafe!</span>
          <span class="delimiter">}</span>                           <span class="comment">// However, the plugin will not generate offending code</span>
        <span class="delimiter">}</span>, <a href="#scala.util.continuations;ControlContext.flatMap.$anonfun.thr" title="Exception =&gt; B1">thr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Exception =&gt; B" class="delimiter">[</span>Exception=&gt;B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="comment">// =&gt; B</span>
      <span class="delimiter">}</span>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A1" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext.flatMap;A1" title="A1">A1</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Runs the computation against the state stored in this `ControlContext`.
   * @param f the computation that modifies the current state of the context.
   * @note This method could throw exceptions from the computations.
   */</span>
  final def <a title="(f: A =&gt; B)C" id="scala.util.continuations;ControlContext.foreach">foreach</a><span class="delimiter">(</span><a title="A =&gt; B" id="scala.util.continuations;ControlContext.foreach.f">f</a>: A =&gt; B<span class="delimiter">)</span> = <a href="#scala.util.continuations;ControlContext.foreachFull" title="(f: A =&gt; B, g: Exception =&gt; B)C">foreachFull</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.foreach.f" title="A =&gt; B">f</a>, throw <a href="#scala.util.continuations;ControlContext.foreach.$anonfun.x$1" title="Exception">_</a><span class="delimiter">)</span>

  def <a title="(f: A =&gt; B, g: Exception =&gt; B)C" id="scala.util.continuations;ControlContext.foreachFull">foreachFull</a><span class="delimiter">(</span><a title="A =&gt; B" id="scala.util.continuations;ControlContext.foreachFull.f">f</a>: A =&gt; B, <a title="Exception =&gt; B" id="scala.util.continuations;ControlContext.foreachFull.g">g</a>: Exception =&gt; B<span class="delimiter">)</span>: <a href="#scala.util.continuations;ControlContext;C" title="C">C</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span>
      <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.x" title="=&gt; A">x</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;C" title="C">C</a><span class="delimiter">]</span>
    else
      <a href="../../Function2.scala.html#scala;Function2.apply" title="(v1: A =&gt; B, v2: Exception =&gt; B)C">fun</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.foreachFull.f" title="A =&gt; B">f</a>, <a href="#scala.util.continuations;ControlContext.foreachFull.g" title="Exception =&gt; B">g</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return true if this context only stores a state value and not any deferred computation. */</span>
  final def <a title="=&gt; Boolean" id="scala.util.continuations;ControlContext.isTrivial">isTrivial</a> = <a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null
  <span class="comment">/** @return The current state value. */</span>
  final def <a title="=&gt; A" id="scala.util.continuations;ControlContext.getTrivialValue">getTrivialValue</a> = <a href="#scala.util.continuations;ControlContext.x" title="=&gt; A">x</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">]</span>

  <span class="comment">// need filter or other functions?</span>

  final def <a title="[A1 &gt;: A, B1 &lt;: B, C1 &gt;: C &lt;: B1](pf: PartialFunction[Exception,scala.util.continuations.ControlContext[A1,B1,C1]])scala.util.continuations.ControlContext[A1,B1,C1]" id="scala.util.continuations;ControlContext.flatMapCatch">flatMapCatch</a><span class="delimiter">[</span><a title=" &gt;: A" id="scala.util.continuations;ControlContext.flatMapCatch;A1">A1</a>&gt;:A,<a title=" &lt;: B" id="scala.util.continuations;ControlContext.flatMapCatch;B1">B1</a>&lt;:B,<a title=" &gt;: C &lt;: B1" id="scala.util.continuations;ControlContext.flatMapCatch;C1">C1</a>&gt;:C&lt;:B1<span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[Exception,scala.util.continuations.ControlContext[A1,B1,C1]]" id="scala.util.continuations;ControlContext.flatMapCatch.pf">pf</a>: <a href="../../PartialFunction.scala.html#scala;PartialFunction" title="PartialFunction[Exception,scala.util.continuations.ControlContext[A1,B1,C1]]">PartialFunction</a><span class="delimiter">[</span>Exception, ControlContext<span class="delimiter">[</span>A1,B1,C1<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C1]">ControlContext</a><span class="delimiter">[</span>A1,B1,C1<span class="delimiter">]</span> = <span class="delimiter">{</span> <span class="comment">// called by codegen from SelectiveCPSTransform</span>
    if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span>
      this
    else <span class="delimiter">{</span>
      val <a title="(A1 =&gt; B1, Exception =&gt; B1) =&gt; C" id="scala.util.continuations;ControlContext.flatMapCatch.fun1">fun1</a> = <span class="delimiter">(</span>ret1: A1 =&gt; B1, thr1: Exception =&gt; B1<span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        val <a title="Exception =&gt; B1" id="scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr">thr</a>: Exception =&gt; B1 = <span class="delimiter">{</span> t: <span title="Exception">Exception</span> =&gt;
          var <a title="Boolean" id="scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.captureExceptions">captureExceptions</a> = true
          try <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.pf" title="PartialFunction[Exception,scala.util.continuations.ControlContext[A1,B1,C1]]">pf</a>.<a href="../../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="(x: Exception)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.t" title="Exception">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <a title="scala.util.continuations.ControlContext[A1,B1,C1]" id="scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.cc1">cc1</a> = <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)scala.util.continuations.ControlContext[A1,B1,C1]">pf</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.t" title="Exception">t</a><span class="delimiter">)</span>
              <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> = false
              <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.cc1" title="scala.util.continuations.ControlContext[A1,B1,C1]">cc1</a>.<a href="#scala.util.continuations;ControlContext.foreachFull" title="(f: A1 =&gt; B1, g: Exception =&gt; B1)C1">foreachFull</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.ret1" title="A1 =&gt; B1">ret1</a>, <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr1" title="Exception =&gt; B1">thr1</a><span class="delimiter">)</span> <span class="comment">// Throw =&gt; B</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> = false
              <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B1">thr1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.t" title="Exception">t</a><span class="delimiter">)</span> <span class="comment">// Throw =&gt; B1</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a title="Exception" id="scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.t1">t1</a>: <span title="Exception">Exception</span> if <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B1">thr1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr.$anonfun.t1" title="Exception">t1</a><span class="delimiter">)</span> <span class="comment">// =&gt; E2</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="../../Function2.scala.html#scala;Function2.apply" title="(v1: A =&gt; B, v2: Exception =&gt; B)C">fun</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.ret1" title="A1 =&gt; B1">ret1</a>, <a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1.$anonfun.thr" title="Exception =&gt; B1">thr</a><span class="delimiter">)</span><span class="comment">// fun(ret1, thr)  // =&gt; B</span>
      <span class="delimiter">}</span>
      new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A1,B1,C]">ControlContext</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.flatMapCatch.fun1" title="(A1 =&gt; B1, Exception =&gt; B1) =&gt; C">fun1</a>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A1" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext.flatMapCatch;A1" title="A1">A1</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  final def <a title="(f: () =&gt; Unit)scala.util.continuations.ControlContext[A,B,C]" id="scala.util.continuations;ControlContext.mapFinally">mapFinally</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="scala.util.continuations;ControlContext.mapFinally.f">f</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A,B,C]">ControlContext</a><span class="delimiter">[</span>A,B,C<span class="delimiter">]</span> = <span class="delimiter">{</span> <span class="comment">// called in code generated by SelectiveCPSTransform</span>
    if <span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.fun" title="=&gt; (A =&gt; B, Exception =&gt; B) =&gt; C">fun</a> <span title="(x$1: AnyRef)Boolean">eq</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
      try <span class="delimiter">{</span>
        <a href="../../Function0.scala.html#scala;Function0.apply" title="()Unit">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
        this
      <span class="delimiter">}</span> catch <span class="delimiter">{</span>
        case <a title="Exception" id="scala.util.continuations;ControlContext.mapFinally.ex">ex</a>: <span title="Exception">Exception</span> =&gt;
          new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A,B,C]">ControlContext</a><span class="delimiter">(</span><span class="delimiter">(</span>k: A =&gt; B, thr: Exception =&gt; B<span class="delimiter">)</span> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.ex" title="Exception">ex</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="C" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;C" title="C">C</a><span class="delimiter">]</span>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      val <a title="(A =&gt; B, Exception =&gt; B) =&gt; C" id="scala.util.continuations;ControlContext.mapFinally.fun1">fun1</a> = <span class="delimiter">(</span>ret1: A =&gt; B, thr1: Exception =&gt; B<span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        val <a title="A =&gt; B" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret">ret</a>: A =&gt; B = <span class="delimiter">{</span> x: <a href="#scala.util.continuations;ControlContext;A" title="A">A</a> =&gt;
          var <a title="Boolean" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.captureExceptions">captureExceptions</a> = true
          try <span class="delimiter">{</span>
            <a href="../../Function0.scala.html#scala;Function0.apply" title="()Unit">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> = false
            <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: A)B">ret1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.x" title="A">x</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a title="Exception" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.t1">t1</a>: <span title="Exception">Exception</span> if <a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret.$anonfun.t1" title="Exception">t1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        val <a title="Exception =&gt; B" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr">thr</a>: Exception =&gt; B = <span class="delimiter">{</span> t: <span title="Exception">Exception</span> =&gt;
          var <a title="Boolean" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.captureExceptions">captureExceptions</a> = true
          try <span class="delimiter">{</span>
            <a href="../../Function0.scala.html#scala;Function0.apply" title="()Unit">f</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> = false
            <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.t" title="Exception">t</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a title="Exception" id="scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.t1">t1</a>: <span title="Exception">Exception</span> if <a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.captureExceptions" title="Boolean">captureExceptions</a> =&gt; <a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Exception)B">thr1</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr.$anonfun.t1" title="Exception">t1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="../../Function2.scala.html#scala;Function2.apply" title="(v1: A =&gt; B, v2: Exception =&gt; B)C">fun</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.ret" title="A =&gt; B">ret</a>, <a href="#scala.util.continuations;ControlContext.mapFinally.fun1.$anonfun.thr1" title="Exception =&gt; B">thr1</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      new <a href="#scala.util.continuations;ControlContext" title="scala.util.continuations.ControlContext[A,B,C]">ControlContext</a><span class="delimiter">(</span><a href="#scala.util.continuations;ControlContext.mapFinally.fun1" title="(A =&gt; B, Exception =&gt; B) =&gt; C">fun1</a>, null.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A" class="delimiter">[</span><a href="#scala.util.continuations;ControlContext;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
