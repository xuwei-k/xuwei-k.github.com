<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/reflect/internal/util/SourceFile.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>


package scala
package reflect.internal.util

import scala.reflect.io.<span class="delimiter">{</span> AbstractFile, VirtualFile <span class="delimiter">}</span>
import scala.collection.mutable.ArrayBuffer
import scala.annotation.tailrec
import java.util.regex.Pattern
import java.io.IOException
import scala.reflect.internal.<a href="../Chars.scala.html#scala.reflect.internal.Chars" title="scala.reflect.internal.Chars.type">Chars</a>._

<span class="comment">/** abstract base class of a source file used in the compiler */</span>
abstract class <a title="class SourceFile extends AnyRef" id="scala.reflect.internal.util;SourceFile">SourceFile</a> <a href="#scala.reflect.internal.util;SourceFile" title="scala.reflect.internal.util.SourceFile" class="delimiter">{</a>
  def <a title="=&gt; Array[Char]" id="scala.reflect.internal.util;SourceFile.content">content</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span>         <span class="comment">// normalized, must end in SU</span>
  def <a title="=&gt; scala.reflect.io.AbstractFile" id="scala.reflect.internal.util;SourceFile.file">file</a>   : <a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="scala.reflect.io.AbstractFile">AbstractFile</a>
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util;SourceFile.isLineBreak">isLineBreak</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.isLineBreak.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util;SourceFile.isEndOfLine">isEndOfLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.isEndOfLine.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>
  def <a title="=&gt; Boolean" id="scala.reflect.internal.util;SourceFile.isSelfContained">isSelfContained</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>
  def <a title="=&gt; Int" id="scala.reflect.internal.util;SourceFile.length">length</a> : <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>
  def <a title="(offset: Int)scala.reflect.internal.util.Position" id="scala.reflect.internal.util;SourceFile.position">position</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.position.offset">offset</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a> = <span class="delimiter">{</span>
    <a href="../../../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.position.offset" title="Int">offset</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.util;SourceFile.length" title="=&gt; Int">length</a>, <a href="../../../Predef.scala.html#scala.Predef.any2stringadd(6b32434ac5)" title="(self: scala.reflect.io.AbstractFile)any2stringadd[scala.reflect.io.AbstractFile]">file</a> <a href="../../../Predef.scala.html#scala.Predef;any2stringadd.+" title="(other: String)String">+</a> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.reflect.internal.util;SourceFile.position.offset" title="Int">offset</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &gt;= &quot;)" class="string">&quot; &gt;= &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.reflect.internal.util;SourceFile.length" title="=&gt; Int">length</a><span class="delimiter">)</span>
    <a href="Position.scala.html#scala.reflect.internal.util.Position" title="scala.reflect.internal.util.Position.type">Position</a>.<a href="Position.scala.html#scala.reflect.internal.util.Position.offset" title="(source: scala.reflect.internal.util.SourceFile, point: Int)scala.reflect.internal.util.Position">offset</a><span class="delimiter">(</span>this, <a href="#scala.reflect.internal.util;SourceFile.position.offset" title="Int">offset</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(offset: Int)Int" id="scala.reflect.internal.util;SourceFile.offsetToLine">offsetToLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.offsetToLine.offset">offset</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>
  def <a title="(index: Int)Int" id="scala.reflect.internal.util;SourceFile.lineToOffset">lineToOffset</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.lineToOffset.index">index</a> : <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>

  <span class="comment">/** Map a position to a position in the underlying source file.
   *  For regular source files, simply return the argument.
   */</span>
  def <a title="(position: scala.reflect.internal.util.Position)scala.reflect.internal.util.Position" id="scala.reflect.internal.util;SourceFile.positionInUltimateSource">positionInUltimateSource</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="scala.reflect.internal.util;SourceFile.positionInUltimateSource.position">position</a>: <a href="Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span> = <a href="#scala.reflect.internal.util;SourceFile.positionInUltimateSource.position" title="scala.reflect.internal.util.Position">position</a>
  override def <a title="()String" id="scala.reflect.internal.util;SourceFile.toString">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#scala.reflect.internal.util;SourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.name" title="=&gt; String">name</a>
  def <a title="=&gt; String" id="scala.reflect.internal.util;SourceFile.path">path</a> = <a href="#scala.reflect.internal.util;SourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.path" title="=&gt; String">path</a>

  def <a title="(index: Int)String" id="scala.reflect.internal.util;SourceFile.lineToString">lineToString</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.lineToString.index">index</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    val <a title="Int" id="scala.reflect.internal.util;SourceFile.lineToString.start">start</a> = <a href="#scala.reflect.internal.util;SourceFile.lineToOffset" title="(index: Int)Int">lineToOffset</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.lineToString.index" title="Int">index</a><span class="delimiter">)</span>
    var <a title="Int" id="scala.reflect.internal.util;SourceFile.lineToString.end">end</a> = <a href="#scala.reflect.internal.util;SourceFile.lineToString.start" title="Int">start</a>
    while <span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.lineToString.end" title="Int">end</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.util;SourceFile.length" title="=&gt; Int">length</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal.util;SourceFile.isEndOfLine" title="(idx: Int)Boolean">isEndOfLine</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.lineToString.end" title="Int">end</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;SourceFile.lineToString.end" title="Int">end</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    new <a href="../../../Predef.scala.html#scala.Predef;String" title="String">String</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.content" title="=&gt; Array[Char]">content</a>, <a href="#scala.reflect.internal.util;SourceFile.lineToString.start" title="Int">start</a>, <a href="#scala.reflect.internal.util;SourceFile.lineToString.end" title="Int">end</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <a href="#scala.reflect.internal.util;SourceFile.lineToString.start" title="Int">start</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  @tailrec
  final def <a title="(offset: Int)Int" id="scala.reflect.internal.util;SourceFile.skipWhitespace">skipWhitespace</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;SourceFile.skipWhitespace.offset">offset</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> =
    if <span class="delimiter">(</span><a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Char">content</a><a href="../../../Predef.scala.html#scala;LowPriorityImplicits.charWrapper" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar" class="delimiter">(</a><a href="#scala.reflect.internal.util;SourceFile.skipWhitespace.offset" title="Int">offset</a><span class="delimiter">)</span>.<a href="../../../runtime/RichChar.scala.html#scala.runtime;RichChar.isWhitespace" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;SourceFile.skipWhitespace" title="(offset: Int)Int">skipWhitespace</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;SourceFile.skipWhitespace.offset" title="Int">offset</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> else <a href="#scala.reflect.internal.util;SourceFile.skipWhitespace.offset" title="Int">offset</a>

  def <a title="(pos: scala.reflect.internal.util.Position)Option[String]" id="scala.reflect.internal.util;SourceFile.identifier">identifier</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="scala.reflect.internal.util;SourceFile.identifier.pos">pos</a>: <a href="Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#scala;Option" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../Option.scala.html#scala.None" title="None.type">None</a>
<span class="delimiter">}</span>

<span class="comment">/** An object representing a missing source file.
 */</span>
object <a title="scala.reflect.internal.util.NoSourceFile.type" id="scala.reflect.internal.util.NoSourceFile">NoSourceFile</a> extends <a href="#scala.reflect.internal.util;SourceFile" title="scala.reflect.internal.util.SourceFile">SourceFile</a> <span class="delimiter">{</span>
  def <a title="=&gt; Array[Char]" id="scala.reflect.internal.util.NoSourceFile.content">content</a>                   = <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: Char*)(implicit evidence$2: scala.reflect.ClassTag[Char])Array[Char]">Array</a><a href="../../ClassTag.scala.html#scala.reflect.ClassTag.Char" title="=&gt; scala.reflect.ClassTag[Char]" class="delimiter">(</a><span class="delimiter">)</span>
  def <a title="=&gt; scala.reflect.internal.util.NoFile.type" id="scala.reflect.internal.util.NoSourceFile.file">file</a>                      = <a href="#scala.reflect.internal.util.NoFile" title="scala.reflect.internal.util.NoFile.type">NoFile</a>
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util.NoSourceFile.isLineBreak">isLineBreak</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util.NoSourceFile.isLineBreak.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>     = false
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util.NoSourceFile.isEndOfLine">isEndOfLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util.NoSourceFile.isEndOfLine.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>     = false
  def <a title="=&gt; Boolean" id="scala.reflect.internal.util.NoSourceFile.isSelfContained">isSelfContained</a>           = true
  def <a title="=&gt; Int" id="scala.reflect.internal.util.NoSourceFile.length">length</a>                    = -<span title="Int(-1)" class="int">1</span>
  def <a title="(offset: Int)Int" id="scala.reflect.internal.util.NoSourceFile.offsetToLine">offsetToLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util.NoSourceFile.offsetToLine.offset">offset</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = -<span title="Int(-1)" class="int">1</span>
  def <a title="(index: Int)Int" id="scala.reflect.internal.util.NoSourceFile.lineToOffset">lineToOffset</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util.NoSourceFile.lineToOffset.index">index</a> : <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = -<span title="Int(-1)" class="int">1</span>
  override def <a title="()String" id="scala.reflect.internal.util.NoSourceFile.toString">toString</a> = <span title="String(&quot;&lt;no source file&gt;&quot;)" class="string">&quot;&lt;no source file&gt;&quot;</span>
<span class="delimiter">}</span>

object <a title="scala.reflect.internal.util.NoFile.type" id="scala.reflect.internal.util.NoFile">NoFile</a> extends <a href="../../io/VirtualFile.scala.html#scala.reflect.io;VirtualFile" title="scala.reflect.io.VirtualFile">VirtualFile</a><span class="delimiter">(</span><span title="String(&quot;&lt;no file&gt;&quot;)" class="string">&quot;&lt;no file&gt;&quot;</span>, <span title="String(&quot;&lt;no file&gt;&quot;)" class="string">&quot;&lt;no file&gt;&quot;</span><span class="delimiter">)</span>

object <a title="scala.reflect.internal.util.ScriptSourceFile.type" id="scala.reflect.internal.util.ScriptSourceFile">ScriptSourceFile</a> <a href="#scala.reflect.internal.util.ScriptSourceFile" title="scala.reflect.internal.util.ScriptSourceFile.type" class="delimiter">{</a>
  <span class="comment">/** Length of the script header from the given content, if there is one.
   *  The header begins with &quot;#!&quot; or &quot;::#!&quot; and ends with a line starting
   *  with &quot;!#&quot; or &quot;::!#&quot;.
   */</span>
  def <a title="(cs: Array[Char])Int" id="scala.reflect.internal.util.ScriptSourceFile.headerLength">headerLength</a><span class="delimiter">(</span><a title="Array[Char]" id="scala.reflect.internal.util.ScriptSourceFile.headerLength.cs">cs</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <span class="delimiter">{</span>
    val <a title="java.util.regex.Pattern" id="scala.reflect.internal.util.ScriptSourceFile.headerLength.headerPattern">headerPattern</a> = <span title="java.util.regex.Pattern.type">Pattern</span>.<span title="(x$1: String)java.util.regex.Pattern">compile</span><span class="delimiter">(</span><span title="String(&quot;((?m)^(::)?!#.*|^.*/env .*)(\\r|\\n|\\r\\n)&quot;)" class="string">&quot;&quot;&quot;((?m)^(::)?!#.*|^.*/env .*)(\r|\n|\r\n)&quot;&quot;&quot;</span><span class="delimiter">)</span>
    val <a title="List[String]" id="scala.reflect.internal.util.ScriptSourceFile.headerLength.headerStarts">headerStarts</a>  = <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;#!&quot;)" class="string">&quot;#!&quot;</span>, <span title="String(&quot;::#!&quot;)" class="string">&quot;::#!&quot;</span><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength.headerStarts" title="List[String]">headerStarts</a> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.exists" title="(p: String =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">cs</a> <a href="../../../collection/GenSeqLike.scala.html#scala.collection;GenSeqLike.startsWith(60d00521c7)" title="(that: scala.collection.GenSeq[Char])Boolean">startsWith</a> <a href="../../../Predef.scala.html#scala;LowPriorityImplicits.wrapString" title="implicit scala.LowPriorityImplicits.wrapString : (s: String)scala.collection.immutable.WrappedString">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val matcher = <a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength.headerPattern" title="java.util.regex.Pattern">headerPattern</a> <a title="java.util.regex.Matcher" id="scala.reflect.internal.util.ScriptSourceFile.headerLength.matcher">matcher</a> <a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">cs</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(3bf7c90be7)" title="=&gt; String">mkString</a>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength.matcher" title="java.util.regex.Matcher">matcher</a>.<span title="()Boolean">find</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength.matcher" title="java.util.regex.Matcher">matcher</a>.<span title="()Int">end</span>
      else throw new <span title="java.io.IOException">IOException</span><span class="delimiter">(</span><span title="String(&quot;script file does not close its header with !# or ::!#&quot;)" class="string">&quot;script file does not close its header with !# or ::!#&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    else <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>

  def <a title="(file: scala.reflect.io.AbstractFile, content: Array[Char])scala.reflect.internal.util.ScriptSourceFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685)">apply</a><span class="delimiter">(</span><a title="scala.reflect.io.AbstractFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).file">file</a>: <a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="scala.reflect.io.AbstractFile">AbstractFile</a>, <a title="Array[Char]" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).content">content</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="scala.reflect.internal.util.BatchSourceFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).underlying">underlying</a> = new <a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).file" title="scala.reflect.io.AbstractFile">file</a>, <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).content" title="Array[Char]">content</a><span class="delimiter">)</span>
    val <a title="Int" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).headerLen">headerLen</a> = <a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength" title="(cs: Array[Char])Int">headerLength</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).content" title="Array[Char]">content</a><span class="delimiter">)</span>
    val <a title="scala.reflect.internal.util.ScriptSourceFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).stripped">stripped</a> = new <a href="#scala.reflect.internal.util;ScriptSourceFile" title="scala.reflect.internal.util.ScriptSourceFile">ScriptSourceFile</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a>, <a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.drop" title="(n: Int)Array[Char]">drop</a> <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).headerLen" title="Int">headerLen</a>, <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).headerLen" title="Int">headerLen</a><span class="delimiter">)</span>

    <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(317d079685).stripped" title="scala.reflect.internal.util.ScriptSourceFile">stripped</a>
  <span class="delimiter">}</span>

  def <a title="(underlying: scala.reflect.internal.util.BatchSourceFile)scala.reflect.internal.util.ScriptSourceFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de)">apply</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.BatchSourceFile" id="scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).underlying">underlying</a>: <a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="Int" id="scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).headerLen">headerLen</a> = <a href="#scala.reflect.internal.util.ScriptSourceFile.headerLength" title="(cs: Array[Char])Int">headerLength</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a>.<a href="#scala.reflect.internal.util;BatchSourceFile.content" title="=&gt; Array[Char]">content</a><span class="delimiter">)</span>
    new <a href="#scala.reflect.internal.util;ScriptSourceFile" title="scala.reflect.internal.util.ScriptSourceFile">ScriptSourceFile</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a>, <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a>.<a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.drop" title="(n: Int)Array[Char]">drop</a> <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).headerLen" title="Int">headerLen</a>, <a href="#scala.reflect.internal.util.ScriptSourceFile.apply(7364c411de).headerLen" title="Int">headerLen</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

class <a title="class ScriptSourceFile extends scala.reflect.internal.util.BatchSourceFile" id="scala.reflect.internal.util;ScriptSourceFile">ScriptSourceFile</a><a href="#scala.reflect.internal.util;ScriptSourceFile" title="scala.reflect.internal.util.ScriptSourceFile" class="delimiter">(</a><a title="scala.reflect.internal.util.BatchSourceFile" id="scala.reflect.internal.util;ScriptSourceFile.underlying">underlying</a>: <a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a>, <a title="Array[Char]" id="scala.reflect.internal.util;ScriptSourceFile.content">content</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span>, override val <a title="Int" id="scala.reflect.internal.util;ScriptSourceFile.start">start</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> extends <a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;ScriptSourceFile.underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a>.<a href="#scala.reflect.internal.util;BatchSourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>, <a href="#scala.reflect.internal.util;ScriptSourceFile.content" title="Array[Char]">content</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  override def <a title="=&gt; Boolean" id="scala.reflect.internal.util;ScriptSourceFile.isSelfContained">isSelfContained</a> = false

  override def <a title="(pos: scala.reflect.internal.util.Position)scala.reflect.internal.util.Position" id="scala.reflect.internal.util;ScriptSourceFile.positionInUltimateSource">positionInUltimateSource</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="scala.reflect.internal.util;ScriptSourceFile.positionInUltimateSource.pos">pos</a>: <a href="Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span> =
    if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal.util;ScriptSourceFile.positionInUltimateSource.pos" title="scala.reflect.internal.util.Position">pos</a>.<a href="Position.scala.html#scala.reflect.internal.util;Position.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> super.<a href="#scala.reflect.internal.util;SourceFile.positionInUltimateSource" title="(position: scala.reflect.internal.util.Position)scala.reflect.internal.util.Position">positionInUltimateSource</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;ScriptSourceFile.positionInUltimateSource.pos" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span>
    else <a href="#scala.reflect.internal.util;ScriptSourceFile.positionInUltimateSource.pos" title="scala.reflect.internal.util.Position">pos</a> <a href="Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.withSource" title="(source: scala.reflect.internal.util.SourceFile)scala.reflect.internal.util.Position">withSource</a> <a href="#scala.reflect.internal.util;ScriptSourceFile.underlying" title="scala.reflect.internal.util.BatchSourceFile">underlying</a> <a href="Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.withShift" title="(shift: Int)scala.reflect.internal.util.Position">withShift</a> <a href="#scala.reflect.internal.util;ScriptSourceFile.start" title="=&gt; Int">start</a>
<span class="delimiter">}</span>

<span class="comment">/** a file whose contents do not change over time */</span>
class <a title="class BatchSourceFile extends scala.reflect.internal.util.SourceFile" id="scala.reflect.internal.util;BatchSourceFile">BatchSourceFile</a><a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile" class="delimiter">(</a>val <a title="scala.reflect.io.AbstractFile" id="scala.reflect.internal.util;BatchSourceFile.file">file</a> : <a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="scala.reflect.io.AbstractFile">AbstractFile</a>, <a title="Array[Char]" id="scala.reflect.internal.util;BatchSourceFile.content0">content0</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#scala.reflect.internal.util;SourceFile" title="scala.reflect.internal.util.SourceFile">SourceFile</a> <span class="delimiter">{</span>
  def this<span class="delimiter">(</span><a title="scala.reflect.io.AbstractFile" id="scala.reflect.internal.util;BatchSourceFile.<init>(3a647c51a6)._file">_file</a>: <a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="scala.reflect.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span>                 = this<span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.<init>(3a647c51a6)._file" title="scala.reflect.io.AbstractFile">_file</a>, <a href="#scala.reflect.internal.util;BatchSourceFile.<init>(3a647c51a6)._file" title="scala.reflect.io.AbstractFile">_file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.toCharArray" title="=&gt; Array[Char]">toCharArray</a><span class="delimiter">)</span>
  def this<span class="delimiter">(</span><a title="String" id="scala.reflect.internal.util;BatchSourceFile.<init>(2c047b4b45).sourceName">sourceName</a>: <span title="String">String</span>, <a title="Seq[Char]" id="scala.reflect.internal.util;BatchSourceFile.<init>(2c047b4b45).cs">cs</a>: <a href="../../../collection/Seq.scala.html#scala.collection;Seq" title="Seq[Char]">Seq</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span>   = this<span class="delimiter">(</span>new <a href="../../io/VirtualFile.scala.html#scala.reflect.io;VirtualFile" title="scala.reflect.io.VirtualFile">VirtualFile</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.<init>(2c047b4b45).sourceName" title="String">sourceName</a><span class="delimiter">)</span>, <a href="#scala.reflect.internal.util;BatchSourceFile.<init>(2c047b4b45).cs" title="Seq[Char]">cs</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toArray" title="(implicit evidence$1: scala.reflect.ClassTag[Char])Array[Char]">toArray</a><span class="delimiter">)</span>
  def this<span class="delimiter">(</span><a title="scala.reflect.io.AbstractFile" id="scala.reflect.internal.util;BatchSourceFile.<init>(a38deea1d5).file">file</a>: <a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="scala.reflect.io.AbstractFile">AbstractFile</a>, <a title="Seq[Char]" id="scala.reflect.internal.util;BatchSourceFile.<init>(a38deea1d5).cs">cs</a>: <a href="../../../collection/Seq.scala.html#scala.collection;Seq" title="Seq[Char]">Seq</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span>   = this<span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.<init>(a38deea1d5).file" title="scala.reflect.io.AbstractFile">file</a>, <a href="#scala.reflect.internal.util;BatchSourceFile.<init>(a38deea1d5).cs" title="Seq[Char]">cs</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toArray" title="(implicit evidence$1: scala.reflect.ClassTag[Char])Array[Char]">toArray</a><span class="delimiter">)</span>

  <span class="comment">// If non-whitespace tokens run all the way up to EOF,</span>
  <span class="comment">// positions go wrong because the correct end of the last</span>
  <span class="comment">// token cannot be used as an index into the char array.</span>
  <span class="comment">// The least painful way to address this was to add a</span>
  <span class="comment">// newline to the array.</span>
  val <a title="Array[Char]" id="scala.reflect.internal.util;BatchSourceFile.content">content</a> = <span class="delimiter">(</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.content0" title="Array[Char]">content0</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content0</a>.<a href="../../../Predef.scala.html#scala;LowPriorityImplicits.charWrapper" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">last</a>.<a href="../../../runtime/RichChar.scala.html#scala.runtime;RichChar.isWhitespace" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content0</a> <a href="../../../collection/mutable/ArrayOps.scala.html#scala.collection.mutable;ArrayOps.:+(0efd462562)" title="(elem: Char)(implicit evidence$2: scala.reflect.ClassTag[Char])Array[Char]">:+</a> <span title="Char('\n')" class="char">'\n'</span>
    else <a href="#scala.reflect.internal.util;BatchSourceFile.content0" title="Array[Char]">content0</a>
  <span class="delimiter">)</span>
  val <a title="Int" id="scala.reflect.internal.util;BatchSourceFile.length">length</a> = <a href="#scala.reflect.internal.util;BatchSourceFile.content" title="=&gt; Array[Char]">content</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a>
  def <a title="=&gt; Int" id="scala.reflect.internal.util;BatchSourceFile.start">start</a> = <span title="Int(0)" class="int">0</span>
  def <a title="=&gt; Boolean" id="scala.reflect.internal.util;BatchSourceFile.isSelfContained">isSelfContained</a> = true

  override def <a title="(pos: scala.reflect.internal.util.Position)Option[String]" id="scala.reflect.internal.util;BatchSourceFile.identifier">identifier</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="scala.reflect.internal.util;BatchSourceFile.identifier.pos">pos</a>: <a href="Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.identifier.pos" title="scala.reflect.internal.util.Position">pos</a>.<a href="Position.scala.html#scala.reflect.internal.util;Position.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.identifier.pos" title="scala.reflect.internal.util.Position">pos</a>.<a href="Position.scala.html#scala.reflect.internal.util;Position.source" title="=&gt; scala.reflect.internal.util.SourceFile">source</a> <span title="(x$1: Any)Boolean">==</span> this <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.identifier.pos" title="scala.reflect.internal.util.Position">pos</a>.<a href="Position.scala.html#scala.reflect.internal.util;Position.point" title="=&gt; Int">point</a> <a href="../../../Int.scala.html#scala;Int.!=(5f58a84eb3)" title="(x: Int)Boolean">!=</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="(c: Char)Boolean" id="scala.reflect.internal.util;BatchSourceFile.identifier.isOK">isOK</a><span class="delimiter">(</span><a title="Char" id="scala.reflect.internal.util;BatchSourceFile.identifier.isOK.c">c</a>: <a href="../../../Char.scala.html#scala;Char" title="Char">Char</a><span class="delimiter">)</span> = <a href="../Chars.scala.html#scala.reflect.internal;Chars.isIdentifierPart" title="(c: Char)Boolean">isIdentifierPart</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.identifier.isOK.c" title="Char">c</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../Chars.scala.html#scala.reflect.internal;Chars.isOperatorPart" title="(c: Char)Boolean">isOperatorPart</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.identifier.isOK.c" title="Char">c</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#scala;Some" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span>new <a href="../../../Predef.scala.html#scala.Predef;String" title="String">String</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content</a> <a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">drop</a> <a href="#scala.reflect.internal.util;BatchSourceFile.identifier.pos" title="scala.reflect.internal.util.Position">pos</a>.<a href="Position.scala.html#scala.reflect.internal.util;Position.point" title="=&gt; Int">point</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.takeWhile" title="(p: Char =&gt; Boolean)Array[Char]">takeWhile</a> <a href="#scala.reflect.internal.util;BatchSourceFile.identifier.isOK" title="(c: Char)Boolean">isOK</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      super.<a href="#scala.reflect.internal.util;SourceFile.identifier" title="(pos: scala.reflect.internal.util.Position)Option[String]">identifier</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.identifier.pos" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  private def <a title="(idx: Int)(p: Char =&gt; Boolean)Boolean" id="scala.reflect.internal.util;BatchSourceFile.charAtIsEOL">charAtIsEOL</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Char =&gt; Boolean" id="scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.p">p</a>: Char =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="comment">// don't identify the CR in CR LF as a line break, since LF will do.</span>
    def <a title="=&gt; Boolean" id="scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.notCRLF0">notCRLF0</a> = <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Char">content</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx" title="Int">idx</a><span class="delimiter">)</span> <a href="../../../Char.scala.html#scala;Char.!=(2232296601)" title="(x: Char)Boolean">!=</a> <span title="Char('\r')">CR</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content</a>.<a href="../../../collection/GenSeqLike.scala.html#scala.collection;GenSeqLike.isDefinedAt" title="(idx: Int)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx" title="Int">idx</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Char">content</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx" title="Int">idx</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Char.scala.html#scala;Char.!=(2232296601)" title="(x: Char)Boolean">!=</a> <span title="Char('\n')">LF</span>

    <a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx" title="Int">idx</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.length" title="=&gt; Int">length</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.notCRLF0" title="=&gt; Boolean">notCRLF0</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Function1.scala.html#scala;Function1.apply" title="(v1: Char)Boolean">p</a><span class="delimiter">(</span><a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Char">content</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL.idx" title="Int">idx</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util;BatchSourceFile.isLineBreak">isLineBreak</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.isLineBreak.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = <a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL" title="(idx: Int)(p: Char =&gt; Boolean)Boolean">charAtIsEOL</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.isLineBreak.idx" title="Int">idx</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../Chars.scala.html#scala.reflect.internal;Chars.isLineBreakChar" title="(c: Char)Boolean">isLineBreakChar</a><span class="delimiter">)</span>

  <span class="comment">/** True if the index is included by an EOL sequence. */</span>
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util;BatchSourceFile.isEndOfLine">isEndOfLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.isEndOfLine.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.charArrayOps" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">content</a> <a href="../../../collection/GenSeqLike.scala.html#scala.collection;GenSeqLike.isDefinedAt" title="(idx: Int)Boolean">isDefinedAt</a> <a href="#scala.reflect.internal.util;BatchSourceFile.isEndOfLine.idx" title="Int">idx</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../PartialFunction.scala.html#scala.PartialFunction" title="PartialFunction.type">PartialFunction</a>.<a href="../../../PartialFunction.scala.html#scala.PartialFunction.cond" title="(x: Char)(pf: PartialFunction[Char,Boolean])Boolean">cond</a><span class="delimiter">(</span><a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Char">content</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.isEndOfLine.idx" title="Int">idx</a><span class="delimiter">)</span><span class="delimiter">)</span> <a title="&lt;$anon: Char =&gt; Boolean&gt; extends scala.runtime.AbstractPartialFunction[Char,Boolean] with Serializable" id="scala.reflect.internal.util;BatchSourceFile.isEndOfLine;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
    case <span title="Char('\r')">CR</span> | <span title="Char('\n')">LF</span> =&gt; true
  <span class="delimiter">}</span>

  <span class="comment">/** True if the index is end of an EOL sequence. */</span>
  def <a title="(idx: Int)Boolean" id="scala.reflect.internal.util;BatchSourceFile.isAtEndOfLine">isAtEndOfLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.isAtEndOfLine.idx">idx</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = <a href="#scala.reflect.internal.util;BatchSourceFile.charAtIsEOL" title="(idx: Int)(p: Char =&gt; Boolean)Boolean">charAtIsEOL</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.isAtEndOfLine.idx" title="Int">idx</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;BatchSourceFile.isAtEndOfLine.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
    case <span title="Char('\r')">CR</span> | <span title="Char('\n')">LF</span> =&gt; true
    case _       =&gt; false
  <span class="delimiter">}</span>

  def <a title="(cs: Array[Char])Array[Int]" id="scala.reflect.internal.util;BatchSourceFile.calculateLineIndices">calculateLineIndices</a><span class="delimiter">(</span><a title="Array[Char]" id="scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.cs">cs</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.ArrayBuffer[Int]" id="scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.buf">buf</a> = new <a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="scala.collection.mutable.ArrayBuffer[Int]">ArrayBuffer</a><span class="delimiter">[</span>Int<span class="delimiter">]</span>
    <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.buf" title="scala.collection.mutable.ArrayBuffer[Int]">buf</a> <a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: Int)buf.type">+=</a> <span title="Int(0)" class="int">0</span>
    for <span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.$anonfun.i">i</a> &lt;- <a href="../../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; Any)Unit">until</a> <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.cs" title="Array[Char]">cs</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a><span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.isAtEndOfLine" title="(idx: Int)Boolean">isAtEndOfLine</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.$anonfun.i" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.buf" title="scala.collection.mutable.ArrayBuffer[Int]">buf</a> <a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: Int)buf.type">+=</a> <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.$anonfun.i" title="Int">i</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>
    <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.buf" title="scala.collection.mutable.ArrayBuffer[Int]">buf</a> <a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: Int)buf.type">+=</a> <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.cs" title="Array[Char]">cs</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a> <span class="comment">// sentinel, so that findLine below works smoother</span>
    <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices.buf" title="scala.collection.mutable.ArrayBuffer[Int]">buf</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toArray" title="(implicit evidence$1: scala.reflect.ClassTag[Int])Array[Int]">toArray</a>
  <span class="delimiter">}</span>
  private lazy val <a title="Array[Int]" id="scala.reflect.internal.util;BatchSourceFile.lineIndices">lineIndices</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Int]">Array</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <a href="#scala.reflect.internal.util;BatchSourceFile.calculateLineIndices" title="(cs: Array[Char])Array[Int]">calculateLineIndices</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.content" title="=&gt; Array[Char]">content</a><span class="delimiter">)</span>

  def <a title="(index: Int)Int" id="scala.reflect.internal.util;BatchSourceFile.lineToOffset">lineToOffset</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.lineToOffset.index">index</a> : <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Int">lineIndices</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.lineToOffset.index" title="Int">index</a><span class="delimiter">)</span>

  private var <a title="Int" id="scala.reflect.internal.util;BatchSourceFile.lastLine_=">lastLine</a> = <span title="Int(0)" class="int">0</span>

  <span class="comment">/** Convert offset to line in this source file.
   *  Lines are numbered from 0.
   */</span>
  def <a title="(offset: Int)Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine">offsetToLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.offset">offset</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <span class="delimiter">{</span>
    val <a title="Array[Int]" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.lines">lines</a> = <a href="#scala.reflect.internal.util;BatchSourceFile.lineIndices" title="=&gt; Array[Int]">lineIndices</a>
    def <a title="(lo: Int, hi: Int, mid: Int)Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine">findLine</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.lo">lo</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.hi">hi</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid">mid</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <span class="delimiter">(</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.lo" title="Int">lo</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.hi" title="Int">hi</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <span class="comment">// minimal sanity check - as written this easily went into infinite loopyland</span>
      else if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.offset" title="Int">offset</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Int">lines</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine" title="(lo: Int, hi: Int, mid: Int)Int">findLine</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.lo" title="Int">lo</a>, <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span>, <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.lo" title="Int">lo</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#scala;Int./(1409840560)" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
      else if <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.offset" title="Int">offset</a> <a href="../../../Int.scala.html#scala;Int.>=(5f58a84eb3)" title="(x: Int)Boolean">&gt;=</a> <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Int">lines</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine" title="(lo: Int, hi: Int, mid: Int)Int">findLine</a><span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>, <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.hi" title="Int">hi</a>, <span class="delimiter">(</span><a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.hi" title="Int">hi</a><span class="delimiter">)</span> <a href="../../../Int.scala.html#scala;Int./(1409840560)" title="(x: Int)Int">/</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
      else <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine.mid" title="Int">mid</a>
    <span class="delimiter">)</span>
    <a href="#scala.reflect.internal.util;BatchSourceFile.lastLine_=" title="(x$1: Int)Unit">lastLine</a> = <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.findLine" title="(lo: Int, hi: Int, mid: Int)Int">findLine</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#scala.reflect.internal.util;BatchSourceFile.offsetToLine.lines" title="Array[Int]">lines</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a>, <a href="#scala.reflect.internal.util;BatchSourceFile.lastLine_=" title="=&gt; Int">lastLine</a><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.util;BatchSourceFile.lastLine_=" title="=&gt; Int">lastLine</a>
  <span class="delimiter">}</span>

  override def <a title="(that: Any)Boolean" id="scala.reflect.internal.util;BatchSourceFile.equals">equals</a><span class="delimiter">(</span><span title="Any">that</span> : <span title="Any">Any</span><span class="delimiter">)</span> = <span title="Any">that</span> match <span class="delimiter">{</span>
    case <span title="scala.reflect.internal.util.BatchSourceFile">that</span> : <a href="#scala.reflect.internal.util;BatchSourceFile" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a> =&gt; <a href="#scala.reflect.internal.util;BatchSourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.path" title="=&gt; String">path</a> <span title="(x$1: Any)Boolean">==</span> <span title="scala.reflect.internal.util.BatchSourceFile">that</span>.<a href="#scala.reflect.internal.util;BatchSourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.path" title="=&gt; String">path</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal.util;BatchSourceFile.start" title="=&gt; Int">start</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="scala.reflect.internal.util.BatchSourceFile">that</span>.<a href="#scala.reflect.internal.util;BatchSourceFile.start" title="=&gt; Int">start</a>
    case _ =&gt; false
  <span class="delimiter">}</span>
  override def <a title="()Int" id="scala.reflect.internal.util;BatchSourceFile.hashCode">hashCode</a> = <a href="#scala.reflect.internal.util;BatchSourceFile.file" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.path" title="=&gt; String">path</a>.<span title="()Int">##</span> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.util;BatchSourceFile.start" title="=&gt; Int">start</a>.<span title="()Int">##</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
