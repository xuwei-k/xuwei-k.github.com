<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/reflect/internal/Positions.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala
package reflect
package internal

import util._
import scala.collection.mutable.ListBuffer

<span class="comment">/** Handling range positions
 *  atPos, the main method in this trait, will add positions to a tree,
 *  and will ensure the following properties:
 *
 *    1. All nodes between the root of the tree and nodes that already have positions
 *       will be assigned positions.
 *    2. No node which already has a position will be assigned a different range; however
 *       a RangePosition might become a TransparentPosition.
 *    3. The position of each assigned node includes the positions of each of its children.
 *    4. The positions of all solid descendants of children of an assigned node
 *       are mutually non-overlapping.
 *
 * Here, the solid descendant of a node are:
 *
 *   If the node has a TransparentPosition, the solid descendants of all its children
 *   Otherwise, the singleton consisting of the node itself.
 */</span>
trait <a title="trait Positions extends AnyRef with scala.reflect.api.Positions" id="scala.reflect.internal;Positions">Positions</a> extends api.<a href="../api/Positions.scala.html#scala.reflect.api;Positions" title="scala.reflect.api.Positions">Positions</a> <span class="delimiter">{</span> self: SymbolTable =&gt;
  type <a title="scala.reflect.internal.util.Position" id="scala.reflect.internal;Positions;Position">Position</a> = scala.reflect.internal.util.<a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="scala.reflect.internal.util.Position">Position</a>
  val <a title="reflect.internal.util.NoPosition.type" id="scala.reflect.internal;Positions.NoPosition">NoPosition</a> = scala.reflect.internal.util.<a href="util/Position.scala.html#scala.reflect.internal.util.NoPosition" title="scala.reflect.internal.util.NoPosition.type">NoPosition</a>
  implicit val <a title="scala.reflect.ClassTag[Positions.this.Position]" id="scala.reflect.internal;Positions.PositionTag">PositionTag</a> = <a href="../ClassTag.scala.html#scala.reflect.ClassTag.apply" title="[T](runtimeClass1: Class[_])scala.reflect.ClassTag[T]">ClassTag</a><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[Positions.this.Position]" class="delimiter">[</span><a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a><span class="delimiter">]</span><span class="delimiter">(</span>classOf<span title="Class[Positions.this.Position](classOf[scala.reflect.internal.util.Position])" class="delimiter">[</span>Position<span class="delimiter">]</span><span class="delimiter">)</span>

  def <a title="=&gt; Boolean" id="scala.reflect.internal;Positions.useOffsetPositions">useOffsetPositions</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true

  <span class="comment">/** A position that wraps a set of trees.
   *  The point of the wrapping position is the point of the default position.
   *  If some of the trees are ranges, returns a range position enclosing all ranges
   *  Otherwise returns default position that is either focused or not.
   */</span>
  def <a title="(default: Positions.this.Position, trees: List[Positions.this.Tree])Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(2048a45c80)">wrappingPos</a><span class="delimiter">(</span><a title="Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(2048a45c80).default">default</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.wrappingPos(2048a45c80).trees">trees</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a> = <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42)" title="(default: Positions.this.Position, trees: List[Positions.this.Tree], focus: Boolean)Positions.this.Position">wrappingPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(2048a45c80).default" title="Positions.this.Position">default</a>, <a href="#scala.reflect.internal;Positions.wrappingPos(2048a45c80).trees" title="List[Positions.this.Tree]">trees</a>, focus = true<span class="delimiter">)</span>
  def <a title="(default: Positions.this.Position, trees: List[Positions.this.Tree], focus: Boolean)Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(3853639d42)">wrappingPos</a><span class="delimiter">(</span><a title="Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(3853639d42).default">default</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.wrappingPos(3853639d42).trees">trees</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Boolean" id="scala.reflect.internal;Positions.wrappingPos(3853639d42).focus">focus</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).default" title="Positions.this.Position">default</a> else <span class="delimiter">{</span>
      val ranged = <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).trees" title="List[Positions.this.Tree]">trees</a> <a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.wrappingPos(3853639d42).ranged">filter</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).ranged.$anonfun.x$1" title="Positions.this.Tree">_</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isRange" title="=&gt; Boolean">isRange</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).ranged" title="List[Positions.this.Tree]">ranged</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).focus" title="Boolean">focus</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).default" title="Positions.this.Position">default</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a> else <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).default" title="Positions.this.Position">default</a>
      else <a href="util/Position.scala.html#scala.reflect.internal.util.Position" title="scala.reflect.internal.util.Position.type">Position</a>.<a href="util/Position.scala.html#scala.reflect.internal.util.Position.range" title="(source: scala.reflect.internal.util.SourceFile, start: Int, point: Int, end: Int)scala.reflect.internal.util.Position">range</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).default" title="Positions.this.Position">default</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.source" title="=&gt; scala.reflect.internal.util.SourceFile">source</a>, <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).ranged" title="List[Positions.this.Tree]">ranged</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Positions.this.Tree =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Positions.this.Tree],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).$anonfun.x$2" title="Positions.this.Tree">_</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.start" title="=&gt; Int">start</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.min" title="(implicit cmp: Ordering[Int])Int">min</a>, <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).default" title="Positions.this.Position">default</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.point" title="=&gt; Int">point</a>, <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).ranged" title="List[Positions.this.Tree]">ranged</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Positions.this.Tree =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Positions.this.Tree],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42).$anonfun.x$3" title="Positions.this.Tree">_</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.end" title="=&gt; Int">end</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.max" title="(implicit cmp: Ordering[Int])Int">max</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** A position that wraps the non-empty set of trees.
   *  The point of the wrapping position is the point of the first trees' position.
   *  If some of the trees are non-synthetic, returns a range position enclosing the non-synthetic trees
   *  Otherwise returns a synthetic offset position to point.
   */</span>
  def <a title="(trees: List[Positions.this.Tree])Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(d3be6c1a12)">wrappingPos</a><span class="delimiter">(</span><a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).trees">trees</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a> = <span class="delimiter">{</span>
    val <a title="Positions.this.Position" id="scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).headpos">headpos</a> = <a href="#scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).trees" title="List[Positions.this.Tree]">trees</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Positions.this.Tree">head</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).headpos" title="Positions.this.Position">headpos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).headpos" title="Positions.this.Position">headpos</a>
    else <a href="#scala.reflect.internal;Positions.wrappingPos(2048a45c80)" title="(default: Positions.this.Position, trees: List[Positions.this.Tree])Positions.this.Position">wrappingPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).headpos" title="Positions.this.Position">headpos</a>, <a href="#scala.reflect.internal;Positions.wrappingPos(d3be6c1a12).trees" title="List[Positions.this.Tree]">trees</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Ensure that given tree has no positions that overlap with
   *  any of the positions of `others`. This is done by
   *  shortening the range, assigning TransparentPositions
   *  to some of the nodes in `tree` or focusing on the position.
   */</span>
  def <a title="(tree: Positions.this.Tree, others: List[Positions.this.Tree])Unit" id="scala.reflect.internal;Positions.ensureNonOverlapping(9cbdfd399b)">ensureNonOverlapping</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.ensureNonOverlapping(9cbdfd399b).tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.ensureNonOverlapping(9cbdfd399b).others">others</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">{</span> <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c)" title="(tree: Positions.this.Tree, others: List[Positions.this.Tree], focus: Boolean)Unit">ensureNonOverlapping</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(9cbdfd399b).tree" title="Positions.this.Tree">tree</a>, <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(9cbdfd399b).others" title="List[Positions.this.Tree]">others</a>, focus = true<span class="delimiter">)</span> <span class="delimiter">}</span>
  def <a title="(tree: Positions.this.Tree, others: List[Positions.this.Tree], focus: Boolean)Unit" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c)">ensureNonOverlapping</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).others">others</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Boolean" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).focus">focus</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a><span class="delimiter">)</span> return

    def <a title="(pos: Positions.this.Position)Boolean" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping">isOverlapping</a><span class="delimiter">(</span><a title="Positions.this.Position" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a><span class="delimiter">)</span> =
      <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping.pos" title="Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isRange" title="=&gt; Boolean">isRange</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).others" title="List[Positions.this.Tree]">others</a> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.exists" title="(p: Positions.this.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping.pos" title="Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.overlaps" title="(pos: scala.reflect.internal.util.Position)Boolean">overlaps</a> <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping.$anonfun.x$4" title="Positions.this.Tree">_</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping" title="(pos: Positions.this.Position)Boolean">isOverlapping</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).children">children</a> = <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a>
      <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).children" title="List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c)" title="(tree: Positions.this.Tree, others: List[Positions.this.Tree], focus: Boolean)Unit">ensureNonOverlapping</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).$anonfun.x$5" title="Positions.this.Tree">_</a>, <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).others" title="List[Positions.this.Tree]">others</a>, <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).focus" title="Boolean">focus</a><span class="delimiter">)</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isOpaqueRange" title="=&gt; Boolean">isOpaqueRange</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="Positions.this.Position" id="scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).wpos">wpos</a> = <a href="#scala.reflect.internal;Positions.wrappingPos(3853639d42)" title="(default: Positions.this.Position, trees: List[Positions.this.Tree], focus: Boolean)Positions.this.Position">wrappingPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>, <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).children" title="List[Positions.this.Tree]">children</a>, <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).focus" title="Boolean">focus</a><span class="delimiter">)</span>
        <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a> <a href="StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: Positions.this.Position)tree.type">setPos</a> <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).isOverlapping" title="(pos: Positions.this.Position)Boolean">isOverlapping</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).wpos" title="Positions.this.Position">wpos</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.makeTransparent" title="=&gt; scala.reflect.internal.util.Position">makeTransparent</a> else <a href="#scala.reflect.internal;Positions.ensureNonOverlapping(590e7c050c).wpos" title="Positions.this.Position">wpos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(source: scala.reflect.internal.util.SourceFile, start: Int, point: Int, end: Int)Positions.this.Position" id="scala.reflect.internal;Positions.rangePos">rangePos</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.SourceFile" id="scala.reflect.internal;Positions.rangePos.source">source</a>: <a href="util/SourceFile.scala.html#scala.reflect.internal.util;SourceFile" title="scala.reflect.internal.util.SourceFile">SourceFile</a>, <a title="Int" id="scala.reflect.internal;Positions.rangePos.start">start</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal;Positions.rangePos.point">point</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal;Positions.rangePos.end">end</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a><span class="delimiter">)</span> <a href="util/Position.scala.html#scala.reflect.internal.util.Position" title="scala.reflect.internal.util.Position.type">Position</a>.<a href="util/Position.scala.html#scala.reflect.internal.util.Position.offset" title="(source: scala.reflect.internal.util.SourceFile, point: Int)scala.reflect.internal.util.Position">offset</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.rangePos.source" title="scala.reflect.internal.util.SourceFile">source</a>, <a href="#scala.reflect.internal;Positions.rangePos.point" title="Int">point</a><span class="delimiter">)</span>
    else <a href="util/Position.scala.html#scala.reflect.internal.util.Position" title="scala.reflect.internal.util.Position.type">Position</a>.<a href="util/Position.scala.html#scala.reflect.internal.util.Position.range" title="(source: scala.reflect.internal.util.SourceFile, start: Int, point: Int, end: Int)scala.reflect.internal.util.Position">range</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.rangePos.source" title="scala.reflect.internal.util.SourceFile">source</a>, <a href="#scala.reflect.internal;Positions.rangePos.start" title="Int">start</a>, <a href="#scala.reflect.internal;Positions.rangePos.point" title="Int">point</a>, <a href="#scala.reflect.internal;Positions.rangePos.end" title="Int">end</a><span class="delimiter">)</span>

  def <a title="(tree: Positions.this.Tree)Unit" id="scala.reflect.internal;Positions.validatePositions">validatePositions</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a><span class="delimiter">)</span> return

    def <a title="(prefix: String, tree: Positions.this.Tree)Unit" id="scala.reflect.internal;Positions.validatePositions.reportTree">reportTree</a><span class="delimiter">(</span><a title="String" id="scala.reflect.internal;Positions.validatePositions.reportTree.prefix">prefix</a> : <span title="String">String</span>, <a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.reportTree.tree">tree</a> : <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="Object" id="scala.reflect.internal;Positions.validatePositions.reportTree.source">source</a> = if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.source" title="=&gt; scala.reflect.internal.util.SourceFile">source</a> else <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;== &quot;)" class="string">&quot;== &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.prefix" title="String">prefix</a><span title="(x$1: Any)String">+</span><span title="String(&quot; tree [&quot;)" class="string">&quot; tree [&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span title="(x$1: Any)String">+</span><span title="String(&quot;] of type &quot;)" class="string">&quot;] of type &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a>.<a href="../../Product.scala.html#scala;Product.productPrefix" title="=&gt; String">productPrefix</a><span title="(x$1: Any)String">+</span><span title="String(&quot; at &quot;)" class="string">&quot; at &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.show" title="=&gt; String">show</a><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.source" title="Object">source</a><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.reportTree.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(msg: String)(body: =&gt; Unit)Unit" id="scala.reflect.internal;Positions.validatePositions.positionError">positionError</a><span class="delimiter">(</span><a title="String" id="scala.reflect.internal;Positions.validatePositions.positionError.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.reflect.internal;Positions.validatePositions.positionError.body">body</a> : =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;======= Position error\n&quot;)" class="string">&quot;======= Position error\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.reflect.internal;Positions.validatePositions.positionError.msg" title="String">msg</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal;Positions.validatePositions.positionError.body" title="=&gt; Unit">body</a>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;\nWhile validating #&quot;)" class="string">&quot;\nWhile validating #&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;\nChildren:&quot;)" class="string">&quot;\nChildren:&quot;</span><span class="delimiter">)</span>
      <a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.positionError.$anonfun.t">t</a> =&gt; <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.positionError.$anonfun.t" title="Positions.this.Tree">t</a>, <a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;=======&quot;)" class="string">&quot;=======&quot;</span><span class="delimiter">)</span>
      throw new <a href="#scala.reflect.internal;Positions;ValidateException" title="Positions.this.ValidateException">ValidateException</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.positionError.msg" title="String">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(tree: Positions.this.Tree, encltree: Positions.this.Tree)Unit" id="scala.reflect.internal;Positions.validatePositions.validate">validate</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.validate.tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a>, <a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.validate.encltree">encltree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>

      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.canHaveAttrs" title="=&gt; Boolean">canHaveAttrs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="Required.scala.html#scala.reflect.internal;Required.settings" title="=&gt; scala.reflect.internal.settings.MutableSettings">settings</a>.<a href="settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">Yposdebug</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="Required.scala.html#scala.reflect.internal;Required.settings" title="=&gt; scala.reflect.internal.settings.MutableSettings">settings</a>.<a href="settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">verbose</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="Required.scala.html#scala.reflect.internal;Required.settings" title="=&gt; scala.reflect.internal.settings.MutableSettings">settings</a>.<a href="settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">Yrangepos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[%10s] %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><span title="String(&quot;validate&quot;)" class="string">&quot;validate&quot;</span>, <a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span>
          <a href="#scala.reflect.internal;Positions.validatePositions.positionError" title="(msg: String)(body: =&gt; Unit)Unit">positionError</a><span class="delimiter">(</span><span title="String(&quot;Unpositioned tree #&quot;)" class="string">&quot;Unpositioned tree #&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%15s %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><span title="String(&quot;unpositioned&quot;)" class="string">&quot;unpositioned&quot;</span>, <a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%15s %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><span title="String(&quot;enclosing&quot;)" class="string">&quot;enclosing&quot;</span>, <a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.validate.$anonfun.t">t</a> =&gt; <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%15s %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><span title="String(&quot;sibling&quot;)" class="string">&quot;sibling&quot;</span>, <a href="Trees.scala.html#scala.reflect.internal;Trees.treeStatus" title="(t: Positions.this.Tree, enclosingTree: Positions.this.Tree)String">treeStatus</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.$anonfun.t" title="Positions.this.Tree">t</a>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isRange" title="=&gt; Boolean">isRange</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.isRange" title="=&gt; Boolean">isRange</a><span class="delimiter">)</span>
            <a href="#scala.reflect.internal;Positions.validatePositions.positionError" title="(msg: String)(body: =&gt; Unit)Unit">positionError</a><span class="delimiter">(</span><span title="String(&quot;Synthetic tree [&quot;)" class="string">&quot;Synthetic tree [&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span title="(x$1: Any)String">+</span><span title="String(&quot;] contains nonsynthetic tree [&quot;)" class="string">&quot;] contains nonsynthetic tree [&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span title="(x$1: Any)String">+</span><span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Enclosing&quot;)" class="string">&quot;Enclosing&quot;</span>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span>
            <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Enclosed&quot;)" class="string">&quot;Enclosed&quot;</span>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.includes" title="(pos: scala.reflect.internal.util.Position)Boolean">includes</a> <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.reflect.internal;Positions.validatePositions.positionError" title="(msg: String)(body: =&gt; Unit)Unit">positionError</a><span class="delimiter">(</span><span title="String(&quot;Enclosing tree [&quot;)" class="string">&quot;Enclosing tree [&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span title="(x$1: Any)String">+</span><span title="String(&quot;] does not include tree [&quot;)" class="string">&quot;] does not include tree [&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span title="(x$1: Any)String">+</span><span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Enclosing&quot;)" class="string">&quot;Enclosing&quot;</span>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.encltree" title="Positions.this.Tree">encltree</a><span class="delimiter">)</span>
              <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Enclosed&quot;)" class="string">&quot;Enclosed&quot;</span>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <a href="#scala.reflect.internal;Positions.findOverlapping" title="(cts: List[Positions.this.Tree])List[(Positions.this.Tree, Positions.this.Tree)]">findOverlapping</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.flatMap" title="(f: Positions.this.Tree =&gt; scala.collection.GenTraversableOnce[Positions.this.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Positions.this.Tree],Positions.this.Tree,List[Positions.this.Tree]])List[Positions.this.Tree]">flatMap</a> <a href="#scala.reflect.internal;Positions.solidDescendants" title="(tree: Positions.this.Tree)List[Positions.this.Tree]">solidDescendants</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case <a href="../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[(Positions.this.Tree, Positions.this.Tree)])Some[List[(Positions.this.Tree, Positions.this.Tree)]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; ;
            case <a title="List[(Positions.this.Tree, Positions.this.Tree)]" id="scala.reflect.internal;Positions.validatePositions.validate.xs">xs</a> =&gt; <span class="delimiter">{</span>
              <a href="#scala.reflect.internal;Positions.validatePositions.positionError" title="(msg: String)(body: =&gt; Unit)Unit">positionError</a><span class="delimiter">(</span><span title="String(&quot;Overlapping trees &quot;)" class="string">&quot;Overlapping trees &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.xs" title="List[(Positions.this.Tree, Positions.this.Tree)]">xs</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((Positions.this.Tree, Positions.this.Tree)) =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[List[(Positions.this.Tree, Positions.this.Tree)],(Int, Int),List[(Int, Int)]])List[(Int, Int)]">map</a> <a href="#scala.reflect.internal;Positions.validatePositions.validate.$anonfun.x0$1" title="(Int, Int)" class="delimiter">{</a> case <span class="delimiter">(</span><span title="Positions.this.Tree">x</span>, <span title="Positions.this.Tree">y</span><span class="delimiter">)</span> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</a><span title="Positions.this.Tree">x</span>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a>, <span title="Positions.this.Tree">y</span>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.id" title="=&gt; Int">id</a><span class="delimiter">)</span> <span class="delimiter">}</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(581ef61a02)" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Ancestor&quot;)" class="string">&quot;Ancestor&quot;</span>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>
                for<span class="delimiter">(</span><span class="delimiter">(</span><span title="Positions.this.Tree">x</span>, <span title="Positions.this.Tree">y</span><span class="delimiter">)</span> &lt;- <a href="../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.foreach" title="(f: ((Positions.this.Tree, Positions.this.Tree)) =&gt; Unit)Unit">xs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;First overlapping&quot;)" class="string">&quot;First overlapping&quot;</span>, <span title="Positions.this.Tree">x</span><span class="delimiter">)</span>
                  <a href="#scala.reflect.internal;Positions.validatePositions.reportTree" title="(prefix: String, tree: Positions.this.Tree)Unit">reportTree</a><span class="delimiter">(</span><span title="String(&quot;Second overlapping&quot;)" class="string">&quot;Second overlapping&quot;</span>, <span title="Positions.this.Tree">y</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        for <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.validatePositions.validate.$anonfun.ct">ct</a> &lt;- <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Unit)Unit">flatMap</a> <a href="#scala.reflect.internal;Positions.solidDescendants" title="(tree: Positions.this.Tree)List[Positions.this.Tree]">solidDescendants</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.validatePositions.validate" title="(tree: Positions.this.Tree, encltree: Positions.this.Tree)Unit">validate</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.validate.$anonfun.ct" title="Positions.this.Tree">ct</a>, <a href="#scala.reflect.internal;Positions.validatePositions.validate.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="SymbolTable.scala.html#scala.reflect.internal;SymbolTable.isPastTyper" title="=&gt; Boolean">isPastTyper</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal;Positions.validatePositions.validate" title="(tree: Positions.this.Tree, encltree: Positions.this.Tree)Unit">validate</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a>, <a href="#scala.reflect.internal;Positions.validatePositions.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(tree: Positions.this.Tree)List[Positions.this.Tree]" id="scala.reflect.internal;Positions.solidDescendants">solidDescendants</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.solidDescendants.tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.solidDescendants.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isTransparent" title="=&gt; Boolean">isTransparent</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.solidDescendants.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.flatMap" title="(f: Positions.this.Tree =&gt; scala.collection.GenTraversableOnce[Positions.this.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Positions.this.Tree],Positions.this.Tree,List[Positions.this.Tree]])List[Positions.this.Tree]">flatMap</a> <a href="#scala.reflect.internal;Positions.solidDescendants" title="(tree: Positions.this.Tree)List[Positions.this.Tree]">solidDescendants</a>
    else <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Positions.this.Tree*)List[Positions.this.Tree]">List</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.solidDescendants.tree" title="Positions.this.Tree">tree</a><span class="delimiter">)</span>

  <span class="comment">/** A free range from `lo` to `hi` */</span>
  private def <a title="(lo: Int, hi: Int)Positions.this.Range" id="scala.reflect.internal;Positions.free">free</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal;Positions.free.lo">lo</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal;Positions.free.hi">hi</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="#scala.reflect.internal;Positions.Range.readResolve" title="Positions.this.Range">Range</a> =
    <a href="#scala.reflect.internal;Positions.Range.readResolve" title="(pos: Positions.this.Position, tree: Positions.this.Tree)Positions.this.Range">Range</a><span class="delimiter">(</span><a href="util/Position.scala.html#scala.reflect.internal.util.Position" title="scala.reflect.internal.util.Position.type">Position</a>.<a href="util/Position.scala.html#scala.reflect.internal.util.Position.range" title="(source: scala.reflect.internal.util.SourceFile, start: Int, point: Int, end: Int)scala.reflect.internal.util.Position">range</a><span class="delimiter">(</span>null, <a href="#scala.reflect.internal;Positions.free.lo" title="Int">lo</a>, <a href="#scala.reflect.internal;Positions.free.lo" title="Int">lo</a>, <a href="#scala.reflect.internal;Positions.free.hi" title="Int">hi</a><span class="delimiter">)</span>, <a href="Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Positions.this.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>

  <span class="comment">/** The maximal free range */</span>
  private lazy val <a title="Positions.this.Range" id="scala.reflect.internal;Positions.maxFree">maxFree</a>: <a href="#scala.reflect.internal;Positions.Range.readResolve" title="Positions.this.Range">Range</a> = <a href="#scala.reflect.internal;Positions.free" title="(lo: Int, hi: Int)Positions.this.Range">free</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, Int.<span title="Int(2147483647)">MaxValue</span><span class="delimiter">)</span>

  <span class="comment">/** A singleton list of a non-empty range from `lo` to `hi`, or else the empty List */</span>
  private def <a title="(lo: Int, hi: Int)List[Positions.this.Range]" id="scala.reflect.internal;Positions.maybeFree">maybeFree</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal;Positions.maybeFree.lo">lo</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal;Positions.maybeFree.hi">hi</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.maybeFree.lo" title="Int">lo</a> <a href="../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal;Positions.maybeFree.hi" title="Int">hi</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Positions.this.Range*)List[Positions.this.Range]">List</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.free" title="(lo: Int, hi: Int)Positions.this.Range">free</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.maybeFree.lo" title="Int">lo</a>, <a href="#scala.reflect.internal;Positions.maybeFree.hi" title="Int">hi</a><span class="delimiter">)</span><span class="delimiter">)</span>
    else List<a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>

  <span class="comment">/** Insert `pos` into ranges `rs` if possible;
   *  otherwise add conflicting trees to `conflicting`.
   */</span>
  private def <a title="(rs: List[Positions.this.Range], t: Positions.this.Tree, conflicting: scala.collection.mutable.ListBuffer[Positions.this.Tree])List[Positions.this.Range]" id="scala.reflect.internal;Positions.insert">insert</a><span class="delimiter">(</span><a title="List[Positions.this.Range]" id="scala.reflect.internal;Positions.insert.rs">rs</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Range]">List</a><span class="delimiter">[</span>Range<span class="delimiter">]</span>, <a title="Positions.this.Tree" id="scala.reflect.internal;Positions.insert.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a>, <a title="scala.collection.mutable.ListBuffer[Positions.this.Tree]" id="scala.reflect.internal;Positions.insert.conflicting">conflicting</a>: <a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">ListBuffer</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Range]">List</a><span class="delimiter">[</span>Range<span class="delimiter">]</span> = <a href="#scala.reflect.internal;Positions.insert.rs" title="List[Positions.this.Range]">rs</a> match <span class="delimiter">{</span>
    case <a href="../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[Positions.this.Range])Some[List[Positions.this.Range]]">List</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
      <a href="../../Predef.scala.html#scala.Predef.assert(65d7b4917f)" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a>.<a href="../../collection/generic/TraversableForwarder.scala.html#scala.collection.generic;TraversableForwarder.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal;Positions.insert.rs" title="List[Positions.this.Range]">rs</a>
    case <a title="Positions.this.Range" id="scala.reflect.internal;Positions.insert.r">r</a> :: <a title="List[Positions.this.Range]" id="scala.reflect.internal;Positions.insert.rs1">rs1</a> =&gt;
      <a href="../../Predef.scala.html#scala.Predef.assert(65d7b4917f)" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isTransparent" title="=&gt; Boolean">isTransparent</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.isFree" title="=&gt; Boolean">isFree</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.pos" title="=&gt; Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.includes" title="(pos: scala.reflect.internal.util.Position)Boolean">includes</a> <a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
<span class="comment">//      inform(&quot;subdividing &quot;+r+&quot;/&quot;+t.pos)</span>
        <a href="#scala.reflect.internal;Positions.maybeFree" title="(lo: Int, hi: Int)List[Positions.this.Range]">maybeFree</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.end" title="=&gt; Int">end</a>, <a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.end" title="=&gt; Int">end</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[Positions.this.Range])List[Positions.this.Range]">:::</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Positions.this.Range*)List[Positions.this.Range]">List</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.Range.readResolve" title="(pos: Positions.this.Position, tree: Positions.this.Tree)Positions.this.Range">Range</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>, <a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[Positions.this.Range])List[Positions.this.Range]">:::</a> <a href="#scala.reflect.internal;Positions.maybeFree" title="(lo: Int, hi: Int)List[Positions.this.Range]">maybeFree</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.start" title="=&gt; Int">start</a>, <a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;Position.start" title="=&gt; Int">start</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[Positions.this.Range])List[Positions.this.Range]">:::</a> <a href="#scala.reflect.internal;Positions.insert.rs1" title="List[Positions.this.Range]">rs1</a>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.isFree" title="=&gt; Boolean">isFree</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.pos" title="=&gt; Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.overlaps" title="(pos: scala.reflect.internal.util.Position)Boolean">overlaps</a> <a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.insert.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a> <a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.+=(f93df146a4)" title="(x: Positions.this.Tree)conflicting.type">+=</a> <a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a>.<a href="#scala.reflect.internal;Positions;Range.tree" title="=&gt; Positions.this.Tree">tree</a>
        <a href="#scala.reflect.internal;Positions.insert.r" title="Positions.this.Range">r</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Positions.this.Range)List[Positions.this.Range]">::</a> <a href="#scala.reflect.internal;Positions.insert" title="(rs: List[Positions.this.Range], t: Positions.this.Tree, conflicting: scala.collection.mutable.ListBuffer[Positions.this.Tree])List[Positions.this.Range]">insert</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.insert.rs1" title="List[Positions.this.Range]">rs1</a>, <a href="#scala.reflect.internal;Positions.insert.t" title="Positions.this.Tree">t</a>, <a href="#scala.reflect.internal;Positions.insert.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Replace elem `t` of `ts` by `replacement` list. */</span>
  private def <a title="(ts: List[Positions.this.Tree], t: Positions.this.Tree, replacement: List[Positions.this.Tree])List[Positions.this.Tree]" id="scala.reflect.internal;Positions.replace">replace</a><span class="delimiter">(</span><a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.replace.ts">ts</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Positions.this.Tree" id="scala.reflect.internal;Positions.replace.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.replace.replacement">replacement</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.replace.ts" title="List[Positions.this.Tree]">ts</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Positions.this.Tree">head</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.reflect.internal;Positions.replace.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.replace.replacement" title="List[Positions.this.Tree]">replacement</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[Positions.this.Tree])List[Positions.this.Tree]">:::</a> <a href="#scala.reflect.internal;Positions.replace.ts" title="List[Positions.this.Tree]">ts</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[Positions.this.Tree]">tail</a>
    else <a href="#scala.reflect.internal;Positions.replace.ts" title="List[Positions.this.Tree]">ts</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Positions.this.Tree">head</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Positions.this.Tree)List[Positions.this.Tree]">::</a> <a href="#scala.reflect.internal;Positions.replace" title="(ts: List[Positions.this.Tree], t: Positions.this.Tree, replacement: List[Positions.this.Tree])List[Positions.this.Tree]">replace</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.replace.ts" title="List[Positions.this.Tree]">ts</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[Positions.this.Tree]">tail</a>, <a href="#scala.reflect.internal;Positions.replace.t" title="Positions.this.Tree">t</a>, <a href="#scala.reflect.internal;Positions.replace.replacement" title="List[Positions.this.Tree]">replacement</a><span class="delimiter">)</span>

  <span class="comment">/** Does given list of trees have mutually non-overlapping positions?
   *  pre: None of the trees is transparent
   */</span>
  def <a title="(cts: List[Positions.this.Tree])List[(Positions.this.Tree, Positions.this.Tree)]" id="scala.reflect.internal;Positions.findOverlapping">findOverlapping</a><span class="delimiter">(</span><a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.findOverlapping.cts">cts</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[(Positions.this.Tree, Positions.this.Tree)]">List</a><span class="delimiter">[</span><span class="delimiter">(</span>Tree, Tree<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    var <a title="List[Positions.this.Range]" id="scala.reflect.internal;Positions.findOverlapping.ranges">ranges</a> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Positions.this.Range*)List[Positions.this.Range]">List</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.maxFree" title="=&gt; Positions.this.Range">maxFree</a><span class="delimiter">)</span>
    for <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.findOverlapping.$anonfun.ct">ct</a> &lt;- <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Unit)Unit">cts</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.ct" title="Positions.this.Tree">ct</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isOpaqueRange" title="=&gt; Boolean">isOpaqueRange</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="scala.collection.mutable.ListBuffer[Positions.this.Tree]" id="scala.reflect.internal;Positions.findOverlapping.$anonfun.conflicting">conflicting</a> = new <a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">ListBuffer</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>
        <a href="#scala.reflect.internal;Positions.findOverlapping.ranges" title="List[Positions.this.Range]">ranges</a> = <a href="#scala.reflect.internal;Positions.insert" title="(rs: List[Positions.this.Range], t: Positions.this.Tree, conflicting: scala.collection.mutable.ListBuffer[Positions.this.Tree])List[Positions.this.Range]">insert</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.findOverlapping.ranges" title="List[Positions.this.Range]">ranges</a>, <a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.ct" title="Positions.this.Tree">ct</a>, <a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a>.<a href="../../collection/generic/TraversableForwarder.scala.html#scala.collection.generic;TraversableForwarder.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> return <a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.conflicting" title="scala.collection.mutable.ListBuffer[Positions.this.Tree]">conflicting</a>.<a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.toList" title="=&gt; List[Positions.this.Tree]">toList</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Positions.this.Tree =&gt; (Positions.this.Tree, Positions.this.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[Positions.this.Tree],(Positions.this.Tree, Positions.this.Tree),List[(Positions.this.Tree, Positions.this.Tree)]])List[(Positions.this.Tree, Positions.this.Tree)]">map</a> <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.findOverlapping.$anonfun.$anonfun.t">t</a> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: Positions.this.Tree, _2: Positions.this.Tree)(Positions.this.Tree, Positions.this.Tree)" class="delimiter">(</a><a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.$anonfun.t" title="Positions.this.Tree">t</a>, <a href="#scala.reflect.internal;Positions.findOverlapping.$anonfun.ct" title="Positions.this.Tree">ct</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    List<a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Set position of all children of a node
   *  @param  pos   A target position.
   *                Uses the point of the position as the point of all positions it assigns.
   *                Uses the start of this position as an Offset position for unpositioed trees
   *                without children.
   *  @param  trees  The children to position. All children must be positionable.
   */</span>
  private def <a title="(pos: Positions.this.Position, trees: List[Positions.this.Tree])Unit" id="scala.reflect.internal;Positions.setChildrenPos">setChildrenPos</a><span class="delimiter">(</span><a title="Positions.this.Position" id="scala.reflect.internal;Positions.setChildrenPos.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a>, <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.setChildrenPos.trees">trees</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Positions.this.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = try <span class="delimiter">{</span>
    for <span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree">tree</a> &lt;- <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Positions.this.Tree =&gt; Any)Unit">trees</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.canHaveAttrs" title="=&gt; Boolean">canHaveAttrs</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.setChildrenPos.$anonfun.children">children</a> = <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a>
        if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.children" title="List[Positions.this.Tree]">children</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a> <a href="StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: Positions.this.Position)tree.type">setPos</a> <a href="#scala.reflect.internal;Positions.setChildrenPos.pos" title="Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="#scala.reflect.internal;Positions.setChildrenPos" title="(pos: Positions.this.Position, trees: List[Positions.this.Tree])Unit">setChildrenPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.setChildrenPos.pos" title="Positions.this.Position">pos</a>, <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.children" title="List[Positions.this.Tree]">children</a><span class="delimiter">)</span>
          <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.tree" title="Positions.this.Tree">tree</a> <a href="StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: Positions.this.Position)tree.type">setPos</a> <a href="#scala.reflect.internal;Positions.wrappingPos(2048a45c80)" title="(default: Positions.this.Position, trees: List[Positions.this.Tree])Positions.this.Position">wrappingPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.setChildrenPos.pos" title="Positions.this.Position">pos</a>, <a href="#scala.reflect.internal;Positions.setChildrenPos.$anonfun.children" title="List[Positions.this.Tree]">children</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> catch <span class="delimiter">{</span>
    case <a title="Exception" id="scala.reflect.internal;Positions.setChildrenPos.ex">ex</a>: <span title="Exception">Exception</span> =&gt;
      <a href="Reporting.scala.html#scala.reflect.internal;Reporting.inform(7fc9e56e07)" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;error while set children pos &quot;)" class="string">&quot;error while set children pos &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.setChildrenPos.pos" title="Positions.this.Position">pos</a><span title="(x$1: Any)String">+</span><span title="String(&quot; of &quot;)" class="string">&quot; of &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.reflect.internal;Positions.setChildrenPos.trees" title="List[Positions.this.Tree]">trees</a><span class="delimiter">)</span>
      throw <a href="#scala.reflect.internal;Positions.setChildrenPos.ex" title="Exception">ex</a>
  <span class="delimiter">}</span>


  class <a title="class ValidateException extends Exception" id="scala.reflect.internal;Positions;ValidateException">ValidateException</a><a href="#scala.reflect.internal;Positions;ValidateException" title="Positions.this.ValidateException" class="delimiter">(</a><a title="String" id="scala.reflect.internal;Positions;ValidateException.msg">msg</a> : <span title="String">String</span><span class="delimiter">)</span> extends <a href="../../package.scala.html#scala.package;Exception" title="Exception">Exception</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;ValidateException.msg" title="String">msg</a><span class="delimiter">)</span>


  <span class="comment">/** A locator for trees with given positions.
   *  Given a position `pos`, locator.apply returns
   *  the smallest tree that encloses `pos`.
   */</span>
  class <a title="class Locator extends Positions.this.Traverser" id="scala.reflect.internal;Positions;Locator">Locator</a><a href="#scala.reflect.internal;Positions;Locator" title="Positions.this.Locator" class="delimiter">(</a><a title="Positions.this.Position" id="scala.reflect.internal;Positions;Locator.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a><span class="delimiter">)</span> extends <a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser" title="Positions.this.Traverser">Traverser</a> <span class="delimiter">{</span>
    var <a title="Positions.this.Tree" id="scala.reflect.internal;Positions;Locator.last_=">last</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a> = _
    def <a title="(root: Positions.this.Tree)Positions.this.Tree" id="scala.reflect.internal;Positions;Locator.locateIn">locateIn</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions;Locator.locateIn.root">root</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a> = <span class="delimiter">{</span>
      this.<a href="#scala.reflect.internal;Positions;Locator.last_=" title="(x$1: Positions.this.Tree)Unit">last</a> = <a href="Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Positions.this.EmptyTree.type">EmptyTree</a>
      <a href="#scala.reflect.internal;Positions;Locator.traverse" title="(t: Positions.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.locateIn.root" title="Positions.this.Tree">root</a><span class="delimiter">)</span>
      this.<a href="#scala.reflect.internal;Positions;Locator.last_=" title="=&gt; Positions.this.Tree">last</a>
    <span class="delimiter">}</span>
    protected def <a title="(t: Positions.this.Tree)Boolean" id="scala.reflect.internal;Positions;Locator.isEligible">isEligible</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions;Locator.isEligible.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> = <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions;Locator.isEligible.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isTransparent" title="=&gt; Boolean">isTransparent</a>
    override def <a title="(t: Positions.this.Tree)Unit" id="scala.reflect.internal;Positions;Locator.traverse">traverse</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions;Locator.traverse.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a> match <span class="delimiter">{</span>
        case <a title="Positions.this.TypeTree" id="scala.reflect.internal;Positions;Locator.traverse.tt">tt</a> : <a href="Trees.scala.html#scala.reflect.internal;Trees;TypeTree" title="Positions.this.TypeTree">TypeTree</a> if <a href="#scala.reflect.internal;Positions;Locator.traverse.tt" title="Positions.this.TypeTree">tt</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TypeTree.original" title="=&gt; Positions.this.Tree">original</a> <span title="(x$1: Any)Boolean">!=</span> null <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.tt" title="Positions.this.TypeTree">tt</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.includes" title="(pos: scala.reflect.internal.util.Position)Boolean">includes</a> <a href="#scala.reflect.internal;Positions;Locator.traverse.tt" title="Positions.this.TypeTree">tt</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TypeTree.original" title="=&gt; Positions.this.Tree">original</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span> =&gt;
          <a href="#scala.reflect.internal;Positions;Locator.traverse" title="(t: Positions.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.tt" title="Positions.this.TypeTree">tt</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TypeTree.original" title="=&gt; Positions.this.Tree">original</a><span class="delimiter">)</span>
        case _ =&gt;
          if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.includes" title="(pos: scala.reflect.internal.util.Position)Boolean">includes</a> <a href="#scala.reflect.internal;Positions;Locator.pos" title="Positions.this.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.isEligible" title="(t: Positions.this.Tree)Boolean">isEligible</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions;Locator.last_=" title="(x$1: Positions.this.Tree)Unit">last</a> = <a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a>
            super.<a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Positions.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <a href="#scala.reflect.internal;Positions;Locator.traverse.t" title="Positions.this.Tree">t</a> match <span class="delimiter">{</span>
            case <a title="Positions.this.MemberDef" id="scala.reflect.internal;Positions;Locator.traverse.mdef">mdef</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;MemberDef" title="Positions.this.MemberDef">MemberDef</a> =&gt;
              <a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverseTrees" title="(trees: List[Positions.this.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;Locator.traverse.mdef" title="Positions.this.MemberDef">mdef</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;MemberDef.mods" title="=&gt; Positions.this.Modifiers">mods</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Modifiers.annotations" title="=&gt; List[Positions.this.Tree]">annotations</a><span class="delimiter">)</span>
            case _ =&gt;
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  case class <a title="class Range extends AnyRef with Product with Serializable" id="scala.reflect.internal;Positions.Range.readResolve">Range</a><a href="../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Positions.this.Position" id="scala.reflect.internal;Positions;Range.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a>, <a title="Positions.this.Tree" id="scala.reflect.internal;Positions;Range.tree">tree</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="=&gt; Boolean" id="scala.reflect.internal;Positions;Range.isFree">isFree</a> = <a href="#scala.reflect.internal;Positions;Range.tree" title="=&gt; Positions.this.Tree">tree</a> <span title="(x$1: Any)Boolean">==</span> <a href="Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Positions.this.EmptyTree.type">EmptyTree</a>
  <span class="delimiter">}</span>

  class <a title="class TypedLocator extends Positions.this.Locator" id="scala.reflect.internal;Positions;TypedLocator">TypedLocator</a><a href="#scala.reflect.internal;Positions;TypedLocator" title="Positions.this.TypedLocator" class="delimiter">(</a><a title="Positions.this.Position" id="scala.reflect.internal;Positions;TypedLocator.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a><span class="delimiter">)</span> extends <a href="#scala.reflect.internal;Positions;Locator" title="Positions.this.Locator">Locator</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;TypedLocator.pos" title="Positions.this.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    override protected def <a title="(t: Positions.this.Tree)Boolean" id="scala.reflect.internal;Positions;TypedLocator.isEligible">isEligible</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions;TypedLocator.isEligible.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> = super.<a href="#scala.reflect.internal;Positions;Locator.isEligible" title="(t: Positions.this.Tree)Boolean">isEligible</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;TypedLocator.isEligible.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions;TypedLocator.isEligible.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Positions.this.Type">tpe</a> <span title="(x$1: Any)Boolean">!=</span> null
  <span class="delimiter">}</span>

  trait <a title="trait PosAssigner extends Positions.this.Traverser" id="scala.reflect.internal;Positions;PosAssigner">PosAssigner</a> extends <a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser" title="Positions.this.Traverser">Traverser</a> <span class="delimiter">{</span>
    var <a title="=&gt; Positions.this.Position" id="scala.reflect.internal;Positions;PosAssigner.pos_=">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a>
  <span class="delimiter">}</span>
  protected<span class="delimiter">[</span>this<span class="delimiter">]</span> lazy val <a title="Positions.this.PosAssigner" id="scala.reflect.internal;Positions.posAssigner">posAssigner</a>: <a href="#scala.reflect.internal;Positions;PosAssigner" title="Positions.this.PosAssigner">PosAssigner</a> = new <a href="#scala.reflect.internal;Positions;DefaultPosAssigner" title="Positions.this.DefaultPosAssigner">DefaultPosAssigner</a>

  protected class <a title="class DefaultPosAssigner extends Positions.this.Traverser with Positions.this.PosAssigner" id="scala.reflect.internal;Positions;DefaultPosAssigner">DefaultPosAssigner</a> extends <a href="#scala.reflect.internal;Positions;PosAssigner" title="Positions.this.PosAssigner">PosAssigner</a> <span class="delimiter">{</span>
    var <a title="Positions.this.Position" id="scala.reflect.internal;Positions;DefaultPosAssigner.pos_=">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a> = _
    override def <a title="(t: Positions.this.Tree)Unit" id="scala.reflect.internal;Positions;DefaultPosAssigner.traverse">traverse</a><span class="delimiter">(</span><a title="Positions.this.Tree" id="scala.reflect.internal;Positions;DefaultPosAssigner.traverse.t">t</a>: <a href="Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Positions.this.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions;DefaultPosAssigner.traverse.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.canHaveAttrs" title="=&gt; Boolean">canHaveAttrs</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      else if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;DefaultPosAssigner.traverse.t" title="Positions.this.Tree">t</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.reflect.internal;Positions;DefaultPosAssigner.traverse.t" title="Positions.this.Tree">t</a>.<a href="StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: Positions.this.Position)t.type">setPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;DefaultPosAssigner.pos_=" title="=&gt; Positions.this.Position">pos</a><span class="delimiter">)</span>
        super.<a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Positions.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions;DefaultPosAssigner.traverse.t" title="Positions.this.Tree">t</a><span class="delimiter">)</span>   <span class="comment">// TODO: bug? shouldn't the traverse be outside of the if?</span>
        <span class="comment">// @PP: it's pruning whenever it encounters a node with a</span>
        <span class="comment">// position, which I interpret to mean that (in the author's</span>
        <span class="comment">// mind at least) either the children of a positioned node will</span>
        <span class="comment">// already be positioned, or the children of a positioned node</span>
        <span class="comment">// do not merit positioning.</span>
        <span class="comment">//</span>
        <span class="comment">// Whatever the author's rationale, it does seem like a bad idea</span>
        <span class="comment">// to press on through a positioned node to find unpositioned</span>
        <span class="comment">// children beneath it and then to assign whatever happens to</span>
        <span class="comment">// be in `pos` to such nodes. There are supposed to be some</span>
        <span class="comment">// position invariants which I can't imagine surviving that.</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Position a tree.
   *  This means: Set position of a node and position all its unpositioned children.
   */</span>
  def <a title="[T &lt;: Positions.this.Tree](pos: Positions.this.Position)(tree: T)T" id="scala.reflect.internal;Positions.atPos">atPos</a><span class="delimiter">[</span><a title=" &lt;: Positions.this.Tree" id="scala.reflect.internal;Positions.atPos;T">T</a> &lt;: Tree<span class="delimiter">]</span><span class="delimiter">(</span><a title="Positions.this.Position" id="scala.reflect.internal;Positions.atPos.pos">pos</a>: <a href="util/Position.scala.html#scala.reflect.internal.util;Position" title="Positions.this.Position">Position</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="scala.reflect.internal;Positions.atPos.tree">tree</a>: <a href="#scala.reflect.internal;Positions.atPos;T" title="T">T</a><span class="delimiter">)</span>: <a href="#scala.reflect.internal;Positions.atPos;T" title="T">T</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.useOffsetPositions" title="=&gt; Boolean">useOffsetPositions</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.atPos.pos" title="Positions.this.Position">pos</a>.<a href="util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.isOpaqueRange" title="=&gt; Boolean">isOpaqueRange</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.reflect.internal;Positions.posAssigner" title="=&gt; Positions.this.PosAssigner">posAssigner</a>.<a href="#scala.reflect.internal;Positions;PosAssigner.pos_=" title="(x$1: Positions.this.Position)Unit">pos</a> = <a href="#scala.reflect.internal;Positions.atPos.pos" title="Positions.this.Position">pos</a>
      <a href="#scala.reflect.internal;Positions.posAssigner" title="=&gt; Positions.this.PosAssigner">posAssigner</a>.<a href="../api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Positions.this.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>
    <span class="delimiter">}</span>
    else <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.canHaveAttrs" title="=&gt; Boolean">canHaveAttrs</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Positions.this.Position">pos</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>.<a href="StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: Positions.this.Position)tree.type">setPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.pos" title="Positions.this.Position">pos</a><span class="delimiter">)</span>
        val <a title="List[Positions.this.Tree]" id="scala.reflect.internal;Positions.atPos.children">children</a> = <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>.<a href="Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.children" title="=&gt; List[Positions.this.Tree]">children</a>
        if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.children" title="List[Positions.this.Tree]">children</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.children" title="List[Positions.this.Tree]">children</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[Positions.this.Tree]">tail</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#scala.reflect.internal;Positions.atPos" title="(pos: Positions.this.Position)(tree: Positions.this.Tree)Positions.this.Tree">atPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.pos" title="Positions.this.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.children" title="List[Positions.this.Tree]">children</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Positions.this.Tree">head</a><span class="delimiter">)</span>
          else <a href="#scala.reflect.internal;Positions.setChildrenPos" title="(pos: Positions.this.Position, trees: List[Positions.this.Tree])Unit">setChildrenPos</a><span class="delimiter">(</span><a href="#scala.reflect.internal;Positions.atPos.pos" title="Positions.this.Position">pos</a>, <a href="#scala.reflect.internal;Positions.atPos.children" title="List[Positions.this.Tree]">children</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#scala.reflect.internal;Positions.atPos.tree" title="T">tree</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
