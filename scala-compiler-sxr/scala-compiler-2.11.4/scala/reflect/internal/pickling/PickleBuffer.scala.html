<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/reflect/internal/pickling/PickleBuffer.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

package scala
package reflect
package internal
package pickling

<span class="comment">/** Variable length byte arrays, with methods for basic pickling and unpickling.
 *
 *  @param data The initial buffer
 *  @param from The first index where defined data are found
 *  @param to   The first index where new data can be written
 */</span>
class <a title="class PickleBuffer extends AnyRef" id="scala.reflect.internal.pickling;PickleBuffer">PickleBuffer</a><a href="#scala.reflect.internal.pickling;PickleBuffer" title="scala.reflect.internal.pickling.PickleBuffer" class="delimiter">(</a><a title="Array[Byte]" id="scala.reflect.internal.pickling;PickleBuffer.data">data</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.from">from</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.to">to</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  var <a title="Array[Byte]" id="scala.reflect.internal.pickling;PickleBuffer.bytes_=">bytes</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.data" title="Array[Byte]">data</a>
  var <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.readIndex_=">readIndex</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.from" title="Int">from</a>
  var <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.writeIndex_=">writeIndex</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.to" title="Int">to</a>

  <span class="comment">/** Double bytes array */</span>
  private def <a title="()Unit" id="scala.reflect.internal.pickling;PickleBuffer.dble">dble</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="Array[Byte]" id="scala.reflect.internal.pickling;PickleBuffer.dble.bytes1">bytes1</a> = new <a href="../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.*(1409840560)" title="(x: Int)Int">*</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <a href="../../../Array.scala.html#scala.Array" title="Array.type">Array</a>.<a href="../../../Array.scala.html#scala.Array.copy" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#scala.reflect.internal.pickling;PickleBuffer.dble.bytes1" title="Array[Byte]">bytes1</a>, <span title="Int(0)" class="int">0</span>, <a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="=&gt; Int">writeIndex</a><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="(x$1: Array[Byte])Unit">bytes</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.dble.bytes1" title="Array[Byte]">bytes1</a>
  <span class="delimiter">}</span>

  def <a title="(capacity: Int)Unit" id="scala.reflect.internal.pickling;PickleBuffer.ensureCapacity">ensureCapacity</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.ensureCapacity.capacity">capacity</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> =
    while <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="=&gt; Int">writeIndex</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.ensureCapacity.capacity" title="Int">capacity</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.dble" title="()Unit">dble</a><a href="#scala.reflect.internal.pickling;PickleBuffer.ensureCapacity.while$1" title="()Unit" class="delimiter">(</a><span class="delimiter">)</span>

  <span class="comment">// -- Basic output routines --------------------------------------------</span>

  <span class="comment">/** Write a byte of data */</span>
  def <a title="(b: Int)Unit" id="scala.reflect.internal.pickling;PickleBuffer.writeByte">writeByte</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.writeByte.b">b</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="=&gt; Int">writeIndex</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.dble" title="()Unit">dble</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../../Array.scala.html#scala;Array.update" title="(i: Int, x: Byte)Unit">bytes</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="=&gt; Int">writeIndex</a><span class="delimiter">)</span> = <a href="#scala.reflect.internal.pickling;PickleBuffer.writeByte.b" title="Int">b</a>.<a href="../../../Int.scala.html#scala;Int.toByte" title="=&gt; Byte">toByte</a>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="(x$1: Int)Unit">writeIndex</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Write a natural number in big endian format, base 128.
   *  All but the last digits have bit 0x80 set.
   */</span>
  def <a title="(x: Int)Unit" id="scala.reflect.internal.pickling;PickleBuffer.writeNat">writeNat</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.writeNat.x">x</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> =
    <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat" title="(x: Long)Unit">writeLongNat</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeNat.x" title="Int">x</a>.<a href="../../../Int.scala.html#scala;Int.toLong" title="=&gt; Long">toLong</a> <a href="../../../Long.scala.html#scala;Long.&(89ec8b5973)" title="(x: Long)Long">&amp;</a> <span title="Long(4294967295L)" class="long">0x00000000FFFFFFFFL</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Like writeNat, but for longs. This is not the same as
   * writeLong, which writes in base 256. Note that the
   * binary representation of LongNat is identical to Nat
   * if the long value is in the range Int.MIN_VALUE to
   * Int.MAX_VALUE.
   */</span>
  def <a title="(x: Long)Unit" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat">writeLongNat</a><span class="delimiter">(</span><a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat.x">x</a>: <a href="../../../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(x: Long)Unit" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix">writeNatPrefix</a><span class="delimiter">(</span><a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.x">x</a>: <a href="../../../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val y = <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.>>>(cfb0bf761c)" title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.y">&gt;&gt;&gt;</a> <span title="Int(7)" class="int">7</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.y" title="Long">y</a> <a href="../../../Long.scala.html#scala;Long.!=(2dca8a685a)" title="(x: Long)Boolean">!=</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix" title="(x: Long)Unit">writeNatPrefix</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.y" title="Long">y</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.writeByte" title="(b: Int)Unit">writeByte</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.&(cfb0bf761c)" title="(x: Int)Long">&amp;</a> <span title="Int(127)" class="int">0x7f</span><span class="delimiter">)</span> <a href="../../../Long.scala.html#scala;Long.|(cfb0bf761c)" title="(x: Int)Long">|</a> <span title="Int(128)" class="int">0x80</span><span class="delimiter">)</span>.<a href="../../../Long.scala.html#scala;Long.toInt" title="=&gt; Int">toInt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    val y = <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.>>>(cfb0bf761c)" title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLongNat.y">&gt;&gt;&gt;</a> <span title="Int(7)" class="int">7</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.y" title="Long">y</a> <a href="../../../Long.scala.html#scala;Long.!=(2dca8a685a)" title="(x: Long)Boolean">!=</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.writeNatPrefix" title="(x: Long)Unit">writeNatPrefix</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.y" title="Long">y</a><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.writeByte" title="(b: Int)Unit">writeByte</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLongNat.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.&(cfb0bf761c)" title="(x: Int)Long">&amp;</a> <span title="Int(127)" class="int">0x7f</span><span class="delimiter">)</span>.<a href="../../../Long.scala.html#scala;Long.toInt" title="=&gt; Int">toInt</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Write a natural number `x` at position `pos`.
   *  If number is more than one byte, shift rest of array to make space.
   */</span>
  def <a title="(pos: Int, x: Int)Unit" id="scala.reflect.internal.pickling;PickleBuffer.patchNat">patchNat</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.pos">pos</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.x">x</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(x: Int)Unit" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix">patchNatPrefix</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.x">x</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.writeByte" title="(b: Int)Unit">writeByte</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="../../../Array.scala.html#scala.Array" title="Array.type">Array</a>.<a href="../../../Array.scala.html#scala.Array.copy" title="(src: AnyRef, srcPos: Int, dest: AnyRef, destPos: Int, length: Int)Unit">copy</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>, <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.pos" title="Int">pos</a>, <a href="#scala.reflect.internal.pickling;PickleBuffer.bytes_=" title="=&gt; Array[Byte]">bytes</a>, <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.pos" title="Int">pos</a><a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a><span title="Int(1)" class="int">1</span>, <a href="#scala.reflect.internal.pickling;PickleBuffer.writeIndex_=" title="=&gt; Int">writeIndex</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.pos" title="Int">pos</a><a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../Array.scala.html#scala;Array.update" title="(i: Int, x: Byte)Unit">bytes</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.pos" title="Int">pos</a><span class="delimiter">)</span> = <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.x" title="Int">x</a> <a href="../../../Int.scala.html#scala;Int.&(1409840560)" title="(x: Int)Int">&amp;</a> <span title="Int(127)" class="int">0x7f</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#scala;Int.|(1409840560)" title="(x: Int)Int">|</a> <span title="Int(128)" class="int">0x80</span><span class="delimiter">)</span>.<a href="../../../Int.scala.html#scala;Int.toByte" title="=&gt; Byte">toByte</a>
      val y = <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.x" title="Int">x</a> <a href="../../../Int.scala.html#scala;Int.>>>(1409840560)" title="Int" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.y">&gt;&gt;&gt;</a> <span title="Int(7)" class="int">7</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.y" title="Int">y</a> <a href="../../../Int.scala.html#scala;Int.!=(5f58a84eb3)" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix" title="(x: Int)Unit">patchNatPrefix</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix.y" title="Int">y</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="../../../Array.scala.html#scala;Array.update" title="(i: Int, x: Byte)Unit">bytes</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.pos" title="Int">pos</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.x" title="Int">x</a> <a href="../../../Int.scala.html#scala;Int.&(1409840560)" title="(x: Int)Int">&amp;</a> <span title="Int(127)" class="int">0x7f</span><span class="delimiter">)</span>.<a href="../../../Int.scala.html#scala;Int.toByte" title="=&gt; Byte">toByte</a>
    val y = <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.x" title="Int">x</a> <a href="../../../Int.scala.html#scala;Int.>>>(1409840560)" title="Int" id="scala.reflect.internal.pickling;PickleBuffer.patchNat.y">&gt;&gt;&gt;</a> <span title="Int(7)" class="int">7</span>
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.y" title="Int">y</a> <a href="../../../Int.scala.html#scala;Int.!=(5f58a84eb3)" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.patchNatPrefix" title="(x: Int)Unit">patchNatPrefix</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.patchNat.y" title="Int">y</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Write a long number `x` in signed big endian format, base 256.
   *
   *  @param x The long number to be written.
   */</span>
  def <a title="(x: Long)Unit" id="scala.reflect.internal.pickling;PickleBuffer.writeLong">writeLong</a><span class="delimiter">(</span><a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLong.x">x</a>: <a href="../../../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    val y = <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.>>(cfb0bf761c)" title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLong.y">&gt;&gt;</a> <span title="Int(8)" class="int">8</span>
    val z = <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.&(cfb0bf761c)" title="Long" id="scala.reflect.internal.pickling;PickleBuffer.writeLong.z">&amp;</a> <span title="Int(255)" class="int">0xff</span>
    if <span class="delimiter">(</span><a href="../../../Long.scala.html#scala;Long.unary_-" title="=&gt; Long">-</a><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.y" title="Long">y</a> <a href="../../../Long.scala.html#scala;Long.!=(2dca8a685a)" title="(x: Long)Boolean">!=</a> <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.z" title="Long">z</a> <a href="../../../Long.scala.html#scala;Long.>>(cfb0bf761c)" title="(x: Int)Long">&gt;&gt;</a> <span title="Int(7)" class="int">7</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong" title="(x: Long)Unit">writeLong</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.y" title="Long">y</a><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.writeByte" title="(b: Int)Unit">writeByte</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.writeLong.z" title="Long">z</a>.<a href="../../../Long.scala.html#scala;Long.toInt" title="=&gt; Int">toInt</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// -- Basic input routines --------------------------------------------</span>

  <span class="comment">/** Read a byte */</span>
  def <a title="()Int" id="scala.reflect.internal.pickling;PickleBuffer.readByte">readByte</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <span class="delimiter">{</span>
    val <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.readByte.x">x</a> = <a href="../../../Array.scala.html#scala;Array.apply" title="(i: Int)Byte">bytes</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a><span class="delimiter">)</span>.<a href="../../../Byte.scala.html#scala;Byte.toInt" title="=&gt; Int">toInt</a>; <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="(x$1: Int)Unit">readIndex</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>; <a href="#scala.reflect.internal.pickling;PickleBuffer.readByte.x" title="Int">x</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Read a natural number in big endian format, base 128.
   *  All but the last digits have bit 0x80 set.*/</span>
  def <a title="()Int" id="scala.reflect.internal.pickling;PickleBuffer.readNat">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat" title="()Long">readLongNat</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../../../Long.scala.html#scala;Long.toInt" title="=&gt; Int">toInt</a>

  def <a title="()Long" id="scala.reflect.internal.pickling;PickleBuffer.readLongNat">readLongNat</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Long.scala.html#scala;Long" title="Long">Long</a> = <span class="delimiter">{</span>
    var <a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.readLongNat.b">b</a> = <span title="Long(0L)" class="long">0L</span>
    var <a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.readLongNat.x">x</a> = <span title="Long(0L)" class="long">0L</span>
    do <span class="delimiter">{</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.b" title="Long">b</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readByte" title="()Int">readByte</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../../../Int.scala.html#scala;Int.toLong" title="=&gt; Long">toLong</a>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.x" title="Long">x</a> = <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.<<(cfb0bf761c)" title="(x: Int)Long">&lt;&lt;</a> <span title="Int(7)" class="int">7</span><span class="delimiter">)</span> <a href="../../../Long.scala.html#scala;Long.+(89ec8b5973)" title="(x: Long)Long">+</a> <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.b" title="Long">b</a> <a href="../../../Long.scala.html#scala;Long.&(cfb0bf761c)" title="(x: Int)Long">&amp;</a> <span title="Int(127)" class="int">0x7f</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> while <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.b" title="Long">b</a> <a href="../../../Long.scala.html#scala;Long.&(cfb0bf761c)" title="(x: Int)Long">&amp;</a> <span title="Int(128)" class="int">0x80</span><span class="delimiter">)</span> <a href="../../../Long.scala.html#scala;Long.!=(2dca8a685a)" title="(x: Long)Boolean">!=</a> <span title="Long(0L)" class="long">0L</span><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.readLongNat.x" title="Long">x</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Read a long number in signed big endian format, base 256. */</span>
  def <a title="(len: Int)Long" id="scala.reflect.internal.pickling;PickleBuffer.readLong">readLong</a><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.readLong.len">len</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Long.scala.html#scala;Long" title="Long">Long</a> = <span class="delimiter">{</span>
    var <a title="Long" id="scala.reflect.internal.pickling;PickleBuffer.readLong.x">x</a> = <span title="Long(0L)" class="long">0L</span>
    var <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.readLong.i">i</a> = <span title="Int(0)" class="int">0</span>
    while <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.i" title="Int">i</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.len" title="Int">len</a><span class="delimiter">)</span> <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.while$2" title="()Unit" class="delimiter">{</a>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.x" title="Long">x</a> = <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.<<(cfb0bf761c)" title="(x: Int)Long">&lt;&lt;</a> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span> <a href="../../../Long.scala.html#scala;Long.+(cfb0bf761c)" title="(x: Int)Long">+</a> <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readByte" title="()Int">readByte</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#scala;Int.&(1409840560)" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0xff</span><span class="delimiter">)</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.i" title="Int">i</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    val leading = <span title="Int(64)" class="int">64</span> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="Int" id="scala.reflect.internal.pickling;PickleBuffer.readLong.leading">-</a> <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.len" title="Int">len</a> <a href="../../../Int.scala.html#scala;Int.<<(1409840560)" title="(x: Int)Int">&lt;&lt;</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.x" title="Long">x</a> <a href="../../../Long.scala.html#scala;Long.<<(cfb0bf761c)" title="(x: Int)Long">&lt;&lt;</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.leading" title="Int">leading</a> <a href="../../../Long.scala.html#scala;Long.>>(cfb0bf761c)" title="(x: Int)Long">&gt;&gt;</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.readLong.leading" title="Int">leading</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Returns the buffer as a sequence of (Int, Array[Byte]) representing
   *  (tag, data) of the individual entries.  Saves and restores buffer state.
   */</span>

  def <a title="=&gt; IndexedSeq[(Int, Array[Byte])]" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq">toIndexedSeq</a>: <a href="../../../collection/IndexedSeq.scala.html#scala.collection;IndexedSeq" title="IndexedSeq[(Int, Array[Byte])]">IndexedSeq</a><span class="delimiter">[</span><span class="delimiter">(</span>Int, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.saved">saved</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="(x$1: Int)Unit">readIndex</a> = <span title="Int(0)" class="int">0</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span> ; <a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span>     <span class="comment">// discarding version</span>
    val <a title="Array[(Int, Array[Byte])]" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.result">result</a> = new <a href="../../../Array.scala.html#scala;Array" title="Array[(Int, Array[Byte])]">Array</a><span class="delimiter">[</span><span class="delimiter">(</span>Int, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[(Int, Array[Byte])])scala.collection.mutable.ArrayOps[(Int, Array[Byte])]">result</a>.<a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.indices" title="=&gt; scala.collection.immutable.Range">indices</a> <a href="../../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.index">index</a> =&gt;
      val <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.tag">tag</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.len">len</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="Array[Byte]" id="scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.bytes">bytes</a> = <a href="../../../Predef.scala.html#scala.Predef.byteArrayOps" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">data</a>.<a href="../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.slice" title="(from: Int, until: Int)Array[Byte]">slice</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a>, <a href="#scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.len" title="Int">len</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a><span class="delimiter">)</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="(x$1: Int)Unit">readIndex</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.len" title="Int">len</a>

      <a href="../../../Array.scala.html#scala;Array.update" title="(i: Int, x: (Int, Array[Byte]))Unit">result</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.index" title="Int">index</a><span class="delimiter">)</span> = <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: Int)ArrowAssoc[Int]">tag</a> <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Array[Byte])(Int, Array[Byte])">-&gt;</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.$anonfun.bytes" title="Array[Byte]">bytes</a>
    <span class="delimiter">}</span>

    <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="(x$1: Int)Unit">readIndex</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.toIndexedSeq.saved" title="Int">saved</a>
    <a href="../../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[(Int, Array[Byte])])scala.collection.mutable.ArrayOps[(Int, Array[Byte])]">result</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toIndexedSeq" title="=&gt; scala.collection.immutable.IndexedSeq[(Int, Array[Byte])]">toIndexedSeq</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Perform operation `op` until the condition
   *  `readIndex == end` is satisfied.
   *  Concatenate results into a list.
   */</span>
  def <a title="[T](end: Int, op: () =&gt; T)List[T]" id="scala.reflect.internal.pickling;PickleBuffer.until">until</a><span class="delimiter">[</span><a title="" id="scala.reflect.internal.pickling;PickleBuffer.until;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.until.end">end</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="() =&gt; T" id="scala.reflect.internal.pickling;PickleBuffer.until.op">op</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; T<span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[T]">List</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.until.end" title="Int">end</a><span class="delimiter">)</span> List<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span> else <a href="../../../Function0.scala.html#scala;Function0.apply" title="()T">op</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: T)List[T]">::</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.until" title="(end: Int, op: () =&gt; T)List[T]">until</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.until.end" title="Int">end</a>, <a href="#scala.reflect.internal.pickling;PickleBuffer.until.op" title="() =&gt; T">op</a><span class="delimiter">)</span>

  <span class="comment">/** Perform operation `op` the number of
   *  times specified.  Concatenate the results into a list.
   */</span>
  def <a title="[T](n: Int, op: () =&gt; T)List[T]" id="scala.reflect.internal.pickling;PickleBuffer.times">times</a><span class="delimiter">[</span><a title="" id="scala.reflect.internal.pickling;PickleBuffer.times;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.times.n">n</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="() =&gt; T" id="scala.reflect.internal.pickling;PickleBuffer.times.op">op</a>: <span class="delimiter">(</span><span class="delimiter">)</span>=&gt;T<span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[T]">List</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.times.n" title="Int">n</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> List<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span> else <a href="../../../Function0.scala.html#scala;Function0.apply" title="()T">op</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: T)List[T]">::</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.times" title="(n: Int, op: () =&gt; T)List[T]">times</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.times.n" title="Int">n</a><a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a><span title="Int(1)" class="int">1</span>, <a href="#scala.reflect.internal.pickling;PickleBuffer.times.op" title="() =&gt; T">op</a><span class="delimiter">)</span>

  <span class="comment">/** Pickle = majorVersion_Nat minorVersion_Nat nbEntries_Nat {Entry}
   *  Entry  = type_Nat length_Nat [actual entries]
   *
   *  Assumes that the ..Version_Nat are already consumed.
   *
   *  @return an array mapping entry numbers to locations in
   *  the byte array where the entries start.
   */</span>
  def <a title="=&gt; Array[Int]" id="scala.reflect.internal.pickling;PickleBuffer.createIndex">createIndex</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Int]">Array</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="Array[Int]" id="scala.reflect.internal.pickling;PickleBuffer.createIndex.index">index</a> = new <a href="../../../Array.scala.html#scala;Array" title="Array[Int]">Array</a><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// nbEntries_Nat</span>
    for <span class="delimiter">(</span><a title="Int" id="scala.reflect.internal.pickling;PickleBuffer.createIndex.$anonfun.i">i</a> &lt;- <a href="../../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; Unit)Unit">until</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.createIndex.index" title="Array[Int]">index</a>.<a href="../../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../Array.scala.html#scala;Array.update" title="(i: Int, x: Int)Unit">index</a><span class="delimiter">(</span><a href="#scala.reflect.internal.pickling;PickleBuffer.createIndex.$anonfun.i" title="Int">i</a><span class="delimiter">)</span> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readByte" title="()Int">readByte</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// skip type_Nat</span>
      <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="(x$1: Int)Unit">readIndex</a> = <a href="#scala.reflect.internal.pickling;PickleBuffer.readNat" title="()Int">readNat</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.reflect.internal.pickling;PickleBuffer.readIndex_=" title="=&gt; Int">readIndex</a> <span class="comment">// read length_Nat, jump to next entry</span>
    <span class="delimiter">}</span>
    <a href="#scala.reflect.internal.pickling;PickleBuffer.createIndex.index" title="Array[Int]">index</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
