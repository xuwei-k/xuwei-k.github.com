<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/reflect/macros/compiler/DefaultMacroCompiler.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.reflect.macros
package compiler

import scala.tools.nsc.Global

abstract class <a title="class DefaultMacroCompiler extends AnyRef with scala.reflect.macros.compiler.Resolvers with scala.reflect.macros.compiler.Validators with scala.reflect.macros.compiler.Errors" id="scala.reflect.macros.compiler;DefaultMacroCompiler">DefaultMacroCompiler</a> extends <a href="Resolvers.scala.html#scala.reflect.macros.compiler;Resolvers" title="scala.reflect.macros.compiler.Resolvers">Resolvers</a>
                                       with <a href="Validators.scala.html#scala.reflect.macros.compiler;Validators" title="scala.reflect.macros.compiler.Validators">Validators</a>
                                       with <a href="Errors.scala.html#scala.reflect.macros.compiler;Errors" title="scala.reflect.macros.compiler.Errors">Errors</a> <span class="delimiter">{</span>
  val <a title="=&gt; scala.tools.nsc.Global" id="scala.reflect.macros.compiler;DefaultMacroCompiler.global">global</a>: <a href="../../../tools/nsc/Global.scala.html#scala.tools.nsc;Global" title="scala.tools.nsc.Global">Global</a>
  import <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../../tools/nsc/Global.scala.html#scala.tools.nsc;Global.analyzer" title="=&gt; scala.tools.nsc.typechecker.Analyzer{val global: DefaultMacroCompiler.this.global.type}">analyzer</a>._
  import <a href="../../../tools/nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="DefaultMacroCompiler.this.global.treeInfo.type">treeInfo</a>._
  import <a href="../../internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="DefaultMacroCompiler.this.global.definitions.type">definitions</a>._
  val <a title="DefaultMacroCompiler.this.global.definitions.RunDefinitions" id="scala.reflect.macros.compiler;DefaultMacroCompiler.runDefinitions">runDefinitions</a> = <a href="../../../tools/nsc/Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; DefaultMacroCompiler.this.global.Run">currentRun</a>.<a href="../../../tools/nsc/Global.scala.html#scala.tools.nsc;Global;Run.runDefinitions" title="=&gt; DefaultMacroCompiler.this.global.definitions.RunDefinitions">runDefinitions</a>
  import <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.runDefinitions" title="=&gt; DefaultMacroCompiler.this.global.definitions.RunDefinitions">runDefinitions</a>.<span class="delimiter">{</span>Predef_???, _<span class="delimiter">}</span>

  val <a title="=&gt; DefaultMacroCompiler.this.global.analyzer.Typer" id="scala.reflect.macros.compiler;DefaultMacroCompiler.typer">typer</a>: global.analyzer.<a href="../../../tools/nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="DefaultMacroCompiler.this.global.analyzer.Typer">Typer</a>
  val <a title="DefaultMacroCompiler.this.global.analyzer.Context" id="scala.reflect.macros.compiler;DefaultMacroCompiler.context">context</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.typer" title="=&gt; DefaultMacroCompiler.this.global.analyzer.Typer">typer</a>.<a href="../../../tools/nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; DefaultMacroCompiler.this.global.analyzer.Context">context</a>

  val <a title="=&gt; DefaultMacroCompiler.this.global.DefDef" id="scala.reflect.macros.compiler;DefaultMacroCompiler.macroDdef">macroDdef</a>: <a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="DefaultMacroCompiler.this.global.DefDef">DefDef</a>
  lazy val <a title="DefaultMacroCompiler.this.global.Symbol" id="scala.reflect.macros.compiler;DefaultMacroCompiler.macroDef">macroDef</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.macroDdef" title="=&gt; DefaultMacroCompiler.this.global.DefDef">macroDdef</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; DefaultMacroCompiler.this.global.Symbol">symbol</a>

  case class <a title="class MacroImplRefCompiler extends AnyRef with DefaultMacroCompiler.this.Resolver with DefaultMacroCompiler.this.Validator with DefaultMacroCompiler.this.Error with Product with Serializable" id="scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplRefCompiler.readResolve">MacroImplRefCompiler</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="DefaultMacroCompiler.this.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler;MacroImplRefCompiler.untypedMacroImplRef">untypedMacroImplRef</a>: <a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="DefaultMacroCompiler.this.global.Tree">Tree</a>, <a title="Boolean" id="scala.reflect.macros.compiler;DefaultMacroCompiler;MacroImplRefCompiler.isImplBundle">isImplBundle</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> extends <a href="Resolvers.scala.html#scala.reflect.macros.compiler;Resolvers;Resolver" title="DefaultMacroCompiler.this.Resolver">Resolver</a> with <a href="Validators.scala.html#scala.reflect.macros.compiler;Validators;Validator" title="DefaultMacroCompiler.this.Validator">Validator</a> with <a href="Errors.scala.html#scala.reflect.macros.compiler;Errors;Error" title="DefaultMacroCompiler.this.Error">Error</a>
  private case class <a title="class MacroImplResolutionException extends Exception with Product with Serializable" id="scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplResolutionException.readResolve">MacroImplResolutionException</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="DefaultMacroCompiler.this.global.Position" id="scala.reflect.macros.compiler;DefaultMacroCompiler;MacroImplResolutionException.pos">pos</a>: <a href="../../internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="DefaultMacroCompiler.this.global.Position">Position</a>, <a title="String" id="scala.reflect.macros.compiler;DefaultMacroCompiler;MacroImplResolutionException.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> extends <a href="../../../package.scala.html#scala.package;Exception" title="Exception">Exception</a>
  def <a title="(pos: DefaultMacroCompiler.this.global.Position, msg: String)Nothing" id="scala.reflect.macros.compiler;DefaultMacroCompiler.abort">abort</a><span class="delimiter">(</span><a title="DefaultMacroCompiler.this.global.Position" id="scala.reflect.macros.compiler;DefaultMacroCompiler.abort.pos">pos</a>: <a href="../../internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="DefaultMacroCompiler.this.global.Position">Position</a>, <a title="String" id="scala.reflect.macros.compiler;DefaultMacroCompiler.abort.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = throw <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplResolutionException.readResolve" title="(pos: DefaultMacroCompiler.this.global.Position, msg: String)DefaultMacroCompiler.this.MacroImplResolutionException">MacroImplResolutionException</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.abort.pos" title="DefaultMacroCompiler.this.global.Position">pos</a>, <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.abort.msg" title="String">msg</a><span class="delimiter">)</span>

  <span class="comment">/** Resolves a macro impl reference provided in the right-hand side of the given macro definition.
   *
   *  Acceptable shapes of the right-hand side:
   *    1) [&lt;static object&gt;].&lt;method name&gt;[[&lt;type args&gt;]] // vanilla macro impl ref
   *    2) [&lt;macro bundle&gt;].&lt;method name&gt;[[&lt;type args&gt;]]  // shiny new macro bundle impl ref
   *
   *  Produces a tree, which represents a reference to a macro implementation if everything goes well,
   *  otherwise reports found errors and returns EmptyTree. The resulting tree should have the following format:
   *
   *    qualifier.method[targs]
   *
   *  Qualifier here might be omitted (local macro defs), be a static object (vanilla macro defs)
   *  or be a dummy instance of a macro bundle (e.g. new MyMacro(???).expand).
   */</span>
  def <a title="=&gt; DefaultMacroCompiler.this.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl">resolveMacroImpl</a>: <a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="DefaultMacroCompiler.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    def <a title="(compiler: DefaultMacroCompiler.this.MacroImplRefCompiler)scala.util.Try[DefaultMacroCompiler.this.global.Tree]" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile">tryCompile</a><span class="delimiter">(</span><a title="DefaultMacroCompiler.this.MacroImplRefCompiler" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile.compiler">compiler</a>: <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplRefCompiler.readResolve" title="DefaultMacroCompiler.this.MacroImplRefCompiler">MacroImplRefCompiler</a><span class="delimiter">)</span>: scala.util.<a href="../../../util/Try.scala.html#scala.util;Try" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">Try</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
      try <span class="delimiter">{</span> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile.compiler" title="DefaultMacroCompiler.this.MacroImplRefCompiler">compiler</a>.<a href="Validators.scala.html#scala.reflect.macros.compiler;Validators;Validator.validateMacroImplRef" title="()Unit">validateMacroImplRef</a><span class="delimiter">(</span><span class="delimiter">)</span>; scala.util.<a href="../../../util/Try.scala.html#scala.util;Success" title="(value: DefaultMacroCompiler.this.global.analyzer.global.Tree)scala.util.Success[DefaultMacroCompiler.this.global.analyzer.global.Tree]">Success</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile.compiler" title="DefaultMacroCompiler.this.MacroImplRefCompiler">compiler</a>.<a href="Resolvers.scala.html#scala.reflect.macros.compiler;Resolvers;Resolver.macroImplRef" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Tree">macroImplRef</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      catch <span class="delimiter">{</span> case <a title="DefaultMacroCompiler.this.MacroImplResolutionException" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile.ex">ex</a>: <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplResolutionException.readResolve" title="DefaultMacroCompiler.this.MacroImplResolutionException">MacroImplResolutionException</a> =&gt; scala.util.<a href="../../../util/Try.scala.html#scala.util;Failure" title="(exception: Throwable)scala.util.Failure[Nothing]">Failure</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile.ex" title="DefaultMacroCompiler.this.MacroImplResolutionException">ex</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    val <a title="DefaultMacroCompiler.this.MacroImplRefCompiler" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaImplRef">vanillaImplRef</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplRefCompiler.readResolve" title="(untypedMacroImplRef: DefaultMacroCompiler.this.global.Tree, isImplBundle: Boolean)DefaultMacroCompiler.this.MacroImplRefCompiler">MacroImplRefCompiler</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.macroDdef" title="=&gt; DefaultMacroCompiler.this.global.DefDef">macroDdef</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.rhs" title="=&gt; DefaultMacroCompiler.this.global.Tree">rhs</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.duplicate" title="=&gt; DefaultMacroCompiler.this.macroDdef.rhs.type">duplicate</a>, isImplBundle = false<span class="delimiter">)</span>
    val <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(DefaultMacroCompiler.this.global.Tree, DefaultMacroCompiler.this.global.Name, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree])" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="DefaultMacroCompiler.this.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.maybeBundleRef">maybeBundleRef</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="DefaultMacroCompiler.this.global.Name" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.methName">methName</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.targs">targs</a><span class="delimiter">)</span> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.macroDdef" title="=&gt; DefaultMacroCompiler.this.global.DefDef">macroDdef</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.rhs" title="=&gt; DefaultMacroCompiler.this.global.Tree">rhs</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.duplicate" title="=&gt; DefaultMacroCompiler.this.macroDdef.rhs.type">duplicate</a> match <span class="delimiter">{</span>
      case <a href="../../internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.Applied.unapply(a5ffa85a6b)" title="(tree: DefaultMacroCompiler.this.global.treeInfo.global.Tree)Option[(DefaultMacroCompiler.this.global.treeInfo.global.Tree, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree], List[List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]])]">Applied</a><span class="delimiter">(</span>Select<span class="delimiter">(</span><a href="../../internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.Applied.unapply(a5ffa85a6b)" title="(tree: DefaultMacroCompiler.this.global.treeInfo.global.Tree)Option[(DefaultMacroCompiler.this.global.treeInfo.global.Tree, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree], List[List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]])]">Applied</a><span class="delimiter">(</span><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.RefTree.unapply" title="(refTree: DefaultMacroCompiler.this.global.RefTree)Option[(DefaultMacroCompiler.this.global.Tree, DefaultMacroCompiler.this.global.Name)]">RefTree</a><span class="delimiter">(</span><a title="DefaultMacroCompiler.this.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.x$1.qual">qual</a>, <a title="DefaultMacroCompiler.this.global.Name" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.x$1.bundleName">bundleName</a><span class="delimiter">)</span>, _, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>, <span title="DefaultMacroCompiler.this.global.Name">methName</span><span class="delimiter">)</span>, <span title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]">targs</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> =&gt;
        <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: DefaultMacroCompiler.this.global.RefTree, _2: DefaultMacroCompiler.this.global.Name, _3: List[DefaultMacroCompiler.this.global.treeInfo.global.Tree])(DefaultMacroCompiler.this.global.RefTree, DefaultMacroCompiler.this.global.Name, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree])" class="delimiter">(</a><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.RefTree.apply" title="(qualifier: DefaultMacroCompiler.this.global.Tree, name: DefaultMacroCompiler.this.global.Name)DefaultMacroCompiler.this.global.RefTree">RefTree</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.x$1.qual" title="DefaultMacroCompiler.this.global.Tree">qual</a>, <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.x$1.bundleName" title="DefaultMacroCompiler.this.global.Name">bundleName</a>.<a href="../../internal/Names.scala.html#scala.reflect.internal;Names;Name.toTypeName" title="=&gt; DefaultMacroCompiler.this.global.TypeName">toTypeName</a><span class="delimiter">)</span>, <span title="DefaultMacroCompiler.this.global.Name">methName</span>, <span title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]">targs</span><span class="delimiter">)</span>
      case <a href="../../internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.Applied.unapply(a5ffa85a6b)" title="(tree: DefaultMacroCompiler.this.global.treeInfo.global.Tree)Option[(DefaultMacroCompiler.this.global.treeInfo.global.Tree, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree], List[List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]])]">Applied</a><span class="delimiter">(</span>Ident<span class="delimiter">(</span><span title="DefaultMacroCompiler.this.global.Name">methName</span><span class="delimiter">)</span>, <span title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]">targs</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> =&gt;
        <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: DefaultMacroCompiler.this.global.Ident, _2: DefaultMacroCompiler.this.global.Name, _3: List[DefaultMacroCompiler.this.global.treeInfo.global.Tree])(DefaultMacroCompiler.this.global.Ident, DefaultMacroCompiler.this.global.Name, List[DefaultMacroCompiler.this.global.treeInfo.global.Tree])" class="delimiter">(</a><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: DefaultMacroCompiler.this.global.Symbol)DefaultMacroCompiler.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.context" title="=&gt; DefaultMacroCompiler.this.global.analyzer.Context">context</a>.<a href="../../../tools/nsc/typechecker/Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.owner" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Symbol">owner</a>.<a href="../../internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Symbol">enclClass</a><span class="delimiter">)</span>, <span title="DefaultMacroCompiler.this.global.Name">methName</span>, <span title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]">targs</span><span class="delimiter">)</span>
      case _ =&gt;
        <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: DefaultMacroCompiler.this.global.EmptyTree.type, _2: DefaultMacroCompiler.this.global.TermName, _3: scala.collection.immutable.Nil.type)(DefaultMacroCompiler.this.global.EmptyTree.type, DefaultMacroCompiler.this.global.TermName, scala.collection.immutable.Nil.type)" class="delimiter">(</a><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="DefaultMacroCompiler.this.global.EmptyTree.type">EmptyTree</a>, <a href="../../internal/Names.scala.html#scala.reflect.internal;Names.TermName.apply" title="(s: String)DefaultMacroCompiler.this.global.TermName">TermName</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    val <a title="DefaultMacroCompiler.this.MacroImplRefCompiler" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleImplRef">bundleImplRef</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.MacroImplRefCompiler.readResolve" title="(untypedMacroImplRef: DefaultMacroCompiler.this.global.Tree, isImplBundle: Boolean)DefaultMacroCompiler.this.MacroImplRefCompiler">MacroImplRefCompiler</a><span class="delimiter">(</span>
      <a href="../../internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: DefaultMacroCompiler.this.global.Position)(tree: DefaultMacroCompiler.this.global.gen.global.Tree)DefaultMacroCompiler.this.global.gen.global.Tree">atPos</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.macroDdef" title="=&gt; DefaultMacroCompiler.this.global.DefDef">macroDdef</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.rhs" title="=&gt; DefaultMacroCompiler.this.global.Tree">rhs</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; DefaultMacroCompiler.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../tools/nsc/Global.scala.html#scala.tools.nsc;Global.gen" title="DefaultMacroCompiler.this.global.gen.type">gen</a>.<a href="../../internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkTypeApply" title="(fun: DefaultMacroCompiler.this.global.gen.global.Tree, targs: List[DefaultMacroCompiler.this.global.gen.global.Tree])DefaultMacroCompiler.this.global.gen.global.Tree">mkTypeApply</a><span class="delimiter">(</span><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Select" title="(qualifier: DefaultMacroCompiler.this.global.Tree, name: DefaultMacroCompiler.this.global.Name)DefaultMacroCompiler.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.New(57d0b484ba)" title="(tpt: DefaultMacroCompiler.this.global.Tree, argss: List[List[DefaultMacroCompiler.this.global.Tree]])DefaultMacroCompiler.this.global.Tree">New</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.maybeBundleRef" title="DefaultMacroCompiler.this.global.Tree">maybeBundleRef</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: List[DefaultMacroCompiler.this.global.Literal]*)List[List[DefaultMacroCompiler.this.global.Literal]]">List</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: DefaultMacroCompiler.this.global.Literal*)List[DefaultMacroCompiler.this.global.Literal]">List</a><span class="delimiter">(</span><a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: DefaultMacroCompiler.this.global.Constant)DefaultMacroCompiler.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)DefaultMacroCompiler.this.global.Constant">Constant</a><span class="delimiter">(</span>null<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.methName" title="DefaultMacroCompiler.this.global.Name">methName</a><span class="delimiter">)</span>, <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.targs" title="List[DefaultMacroCompiler.this.global.treeInfo.global.Tree]">targs</a><span class="delimiter">)</span><span class="delimiter">)</span>,
      isImplBundle = true
    <span class="delimiter">)</span>
    val <a title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult">vanillaResult</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile" title="(compiler: DefaultMacroCompiler.this.MacroImplRefCompiler)scala.util.Try[DefaultMacroCompiler.this.global.Tree]">tryCompile</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaImplRef" title="DefaultMacroCompiler.this.MacroImplRefCompiler">vanillaImplRef</a><span class="delimiter">)</span>
    val <a title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult">bundleResult</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.tryCompile" title="(compiler: DefaultMacroCompiler.this.MacroImplRefCompiler)scala.util.Try[DefaultMacroCompiler.this.global.Tree]">tryCompile</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleImplRef" title="DefaultMacroCompiler.this.MacroImplRefCompiler">bundleImplRef</a><span class="delimiter">)</span>

    def <a title="()Unit" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.ensureUnambiguousSuccess">ensureUnambiguousSuccess</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// we now face a hard choice of whether to report ambiguity:</span>
      <span class="comment">//   1) when there are eponymous methods in both bundle and object</span>
      <span class="comment">//   2) when both references to eponymous methods are resolved successfully</span>
      <span class="comment">// doing #1 would cause less confusion in the long run, but it would also cause more frequent source incompatibilities</span>
      <span class="comment">// e.g. it would fail to compile https://github.com/ReifyIt/basis</span>
      <span class="comment">// therefore here we go for #2</span>
      <span class="comment">// if (vanillaImplRef.looksCredible &amp;&amp; bundleImplRef.looksCredible) MacroImplAmbiguousError()</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">vanillaResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isSuccess" title="=&gt; Boolean">isSuccess</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">bundleResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isSuccess" title="=&gt; Boolean">isSuccess</a><span class="delimiter">)</span> <a href="Errors.scala.html#scala.reflect.macros.compiler;Errors.MacroImplAmbiguousError" title="()Nothing">MacroImplAmbiguousError</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="()DefaultMacroCompiler.this.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure">reportMostAppropriateFailure</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.typer" title="=&gt; DefaultMacroCompiler.this.global.analyzer.Typer">typer</a>.<a href="../../../tools/nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.silent" title="(op: DefaultMacroCompiler.this.global.analyzer.Typer =&gt; DefaultMacroCompiler.this.global.analyzer.global.Tree, reportAmbiguousErrors: Boolean, newtree: DefaultMacroCompiler.this.global.analyzer.global.Tree)DefaultMacroCompiler.this.global.analyzer.SilentResult[DefaultMacroCompiler.this.global.analyzer.global.Tree]">silent</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.$anonfun.x$2" title="DefaultMacroCompiler.this.global.analyzer.Typer">_</a>.<a href="../../../tools/nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedTypeConstructor(60ebfc8632)" title="(tree: DefaultMacroCompiler.this.global.analyzer.global.Tree)DefaultMacroCompiler.this.global.analyzer.global.Tree">typedTypeConstructor</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.maybeBundleRef" title="DefaultMacroCompiler.this.global.Tree">maybeBundleRef</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case SilentResultValue<span class="delimiter">(</span><a title="DefaultMacroCompiler.this.global.analyzer.global.Tree" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.result">result</a><span class="delimiter">)</span> if <a href="../../internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.looksLikeMacroBundleType" title="(tp: DefaultMacroCompiler.this.global.Type)Boolean">looksLikeMacroBundleType</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.result" title="DefaultMacroCompiler.this.global.analyzer.global.Tree">result</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Type">tpe</a><span class="delimiter">)</span> =&gt;
          val <a title="DefaultMacroCompiler.this.global.analyzer.global.Symbol" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.bundle">bundle</a> = <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.result" title="DefaultMacroCompiler.this.global.analyzer.global.Tree">result</a>.<a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Type">tpe</a>.<a href="../../internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Symbol">typeSymbol</a>
          if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="../../internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.isMacroBundleType" title="(tp: DefaultMacroCompiler.this.global.Type)Boolean">isMacroBundleType</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.bundle" title="DefaultMacroCompiler.this.global.analyzer.global.Symbol">bundle</a>.<a href="../../internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="Errors.scala.html#scala.reflect.macros.compiler;Errors.MacroBundleWrongShapeError" title="()Nothing">MacroBundleWrongShapeError</a><span class="delimiter">(</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure.bundle" title="DefaultMacroCompiler.this.global.analyzer.global.Symbol">bundle</a>.<a href="../../internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; DefaultMacroCompiler.this.global.analyzer.global.Symbol">owner</a>.<a href="../../internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isStaticOwner" title="=&gt; Boolean">isStaticOwner</a><span class="delimiter">)</span> <a href="Errors.scala.html#scala.reflect.macros.compiler;Errors.MacroBundleNonStaticError" title="()Nothing">MacroBundleNonStaticError</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">bundleResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.get" title="=&gt; DefaultMacroCompiler.this.global.Tree">get</a>
        case _ =&gt;
          <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">vanillaResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.get" title="=&gt; DefaultMacroCompiler.this.global.Tree">get</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    try <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">vanillaResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isSuccess" title="=&gt; Boolean">isSuccess</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">bundleResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isSuccess" title="=&gt; Boolean">isSuccess</a><span class="delimiter">)</span> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.ensureUnambiguousSuccess" title="()Unit">ensureUnambiguousSuccess</a><span class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">vanillaResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isFailure" title="=&gt; Boolean">isFailure</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">bundleResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.isFailure" title="=&gt; Boolean">isFailure</a><span class="delimiter">)</span> <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.reportMostAppropriateFailure" title="()DefaultMacroCompiler.this.global.Tree">reportMostAppropriateFailure</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.vanillaResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">vanillaResult</a>.<a href="../../../util/Try.scala.html#scala.util;Try.orElse" title="(default: =&gt; scala.util.Try[DefaultMacroCompiler.this.global.Tree])scala.util.Try[DefaultMacroCompiler.this.global.Tree]">orElse</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.bundleResult" title="scala.util.Try[DefaultMacroCompiler.this.global.Tree]">bundleResult</a><span class="delimiter">)</span>.<a href="../../../util/Try.scala.html#scala.util;Try.get" title="=&gt; DefaultMacroCompiler.this.global.Tree">get</a>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case MacroImplResolutionException<span class="delimiter">(</span><a title="DefaultMacroCompiler.this.global.Position" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.pos">pos</a>, <a title="String" id="scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.msg">msg</a><span class="delimiter">)</span> =&gt;
        <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.context" title="=&gt; DefaultMacroCompiler.this.global.analyzer.Context">context</a>.<a href="../../../tools/nsc/typechecker/Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.error" title="(pos: DefaultMacroCompiler.this.global.analyzer.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.pos" title="DefaultMacroCompiler.this.global.Position">pos</a>, <a href="#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl.msg" title="String">msg</a><span class="delimiter">)</span>
        <a href="../../internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="DefaultMacroCompiler.this.global.EmptyTree.type">EmptyTree</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
