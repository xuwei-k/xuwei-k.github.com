<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/reflect/macros/runtime/JavaReflectionRuntimes.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.reflect.macros
package runtime

import scala.reflect.runtime.ReflectionUtils
import scala.reflect.macros.blackbox.<span class="delimiter">{</span>Context =&gt; BlackboxContext<span class="delimiter">}</span>
import scala.reflect.macros.whitebox.<span class="delimiter">{</span>Context =&gt; WhiteboxContext<span class="delimiter">}</span>
import java.lang.reflect.<span class="delimiter">{</span>Constructor =&gt; jConstructor<span class="delimiter">}</span>

trait <a title="trait JavaReflectionRuntimes extends AnyRef" id="scala.reflect.macros.runtime;JavaReflectionRuntimes">JavaReflectionRuntimes</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  self: scala.tools.nsc.typechecker.Analyzer =&gt;

  trait <a title="trait JavaReflectionResolvers extends AnyRef" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers">JavaReflectionResolvers</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
    self: MacroRuntimeResolver =&gt;

    def <a title="(classLoader: ClassLoader)JavaReflectionRuntimes.this.MacroRuntime" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime">resolveJavaReflectionRuntime</a><span class="delimiter">(</span><a title="ClassLoader" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.classLoader">classLoader</a>: <span title="ClassLoader">ClassLoader</span><span class="delimiter">)</span>: <a href="../../../Function1.scala.html#scala;Function1" title="JavaReflectionRuntimes.this.MacroRuntime">MacroRuntime</a> = <span class="delimiter">{</span>
      val <a title="Class[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implClass">implClass</a> = <span title="Class.type">Class</span>.<span title="(x$1: String, x$2: Boolean, x$3: ClassLoader)Class[_]">forName</span><span class="delimiter">(</span><a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.className" title="=&gt; String">className</a>, true, <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.classLoader" title="ClassLoader">classLoader</a><span class="delimiter">)</span>
      val <a title="Option[java.lang.reflect.Method]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeths">implMeths</a> = <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implClass" title="Class[_]">implClass</a>.<a href="../../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</a>.<a href="../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.find" title="(p: java.lang.reflect.Method =&gt; Boolean)Option[java.lang.reflect.Method]">find</a><span class="delimiter">(</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeths.$anonfun.x$1" title="java.lang.reflect.Method">_</a>.<span title="()String">getName</span> <span title="(x$1: Any)Boolean">==</span> <a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.methName" title="=&gt; String">methName</a><span class="delimiter">)</span>
      <span class="comment">// relies on the fact that macro impls cannot be overloaded</span>
      <span class="comment">// so every methName can resolve to at maximum one method</span>
      val implMeth = <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeths" title="Option[java.lang.reflect.Method]">implMeths</a> <a href="../../../Option.scala.html#scala;Option.getOrElse" title="java.lang.reflect.Method" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeth">getOrElse</a> <span class="delimiter">{</span> throw new <span title="NoSuchMethodException">NoSuchMethodException</span><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.className" title="=&gt; String">className</a><span title="String(&quot;.&quot;)">.$</span><a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.methName" title="=&gt; String">methName</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="../util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;successfully loaded macro impl as (&quot;)">successfully loaded macro impl as ($</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implClass" title="Class[_]">implClass</a><span title="String(&quot;, &quot;)">, $</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeth" title="java.lang.reflect.Method">implMeth</a><span title="String(&quot;)&quot;)" class="string">)&quot;</span><span class="delimiter">)</span>
      <a title="JavaReflectionRuntimes.this.MacroArgs" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.args">args</a> =&gt; <span class="delimiter">{</span>
        val <a title="Any" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj">implObj</a> =
          if <span class="delimiter">(</span><a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.isBundle" title="=&gt; Boolean">isBundle</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            def <a title="(clazz: Class[_])Boolean" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isMacroContext">isMacroContext</a><span class="delimiter">(</span><a title="Class[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isMacroContext.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isMacroContext.clazz" title="Class[_]">clazz</a> <span title="(x$1: Any)Boolean">==</span> classOf<span title="Class[scala.reflect.macros.blackbox.Context](classOf[scala.reflect.macros.blackbox.Context])" class="delimiter">[</span>BlackboxContext<span class="delimiter">]</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isMacroContext.clazz" title="Class[_]">clazz</a> <span title="(x$1: Any)Boolean">==</span> classOf<span title="Class[scala.reflect.macros.whitebox.Context](classOf[scala.reflect.macros.whitebox.Context])" class="delimiter">[</span>WhiteboxContext<span class="delimiter">]</span>
            def <a title="(ctor: java.lang.reflect.Constructor[_])Boolean" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor">isBundleCtor</a><span class="delimiter">(</span><a title="java.lang.reflect.Constructor[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor.ctor">ctor</a>: <span title="java.lang.reflect.Constructor[_]">jConstructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor.ctor" title="java.lang.reflect.Constructor[_]">ctor</a>.<span title="()Array[Class[_]]">getParameterTypes</span> match <span class="delimiter">{</span>
              case <a href="../../../Array.scala.html#scala.Array.unapplySeq" title="(x: Array[Class[_]])Option[IndexedSeq[Class[_]]]">Array</a><span class="delimiter">(</span><a title="Class[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor.param">param</a><span class="delimiter">)</span> if <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isMacroContext" title="(clazz: Class[_])Boolean">isMacroContext</a><span class="delimiter">(</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor.param" title="Class[_]">param</a><span class="delimiter">)</span> =&gt; true
              case _ =&gt; false
            <span class="delimiter">}</span>
            val <a href="../../../Array.scala.html#scala.Array.unapplySeq" title="(x: Array[java.lang.reflect.Constructor[_]])Option[IndexedSeq[java.lang.reflect.Constructor[_]]]">Array</a><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.bundleCtor.bundleCtor" title="java.lang.reflect.Constructor[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.bundleCtor" class="delimiter">(</a><a title="java.lang.reflect.Constructor[_]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.bundleCtor.bundleCtor">bundleCtor</a><span class="delimiter">)</span> = <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implClass" title="Class[_]">implClass</a>.<a href="../../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[java.lang.reflect.Constructor[_]])scala.collection.mutable.ArrayOps[java.lang.reflect.Constructor[_]]">getConstructors</a>.<a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: java.lang.reflect.Constructor[_] =&gt; Boolean)Array[java.lang.reflect.Constructor[_]]">filter</a><a href="../../../Array.scala.html#scala;Array" title="Array[java.lang.reflect.Constructor[_]] @unchecked" class="delimiter">(</a><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.isBundleCtor" title="(ctor: java.lang.reflect.Constructor[_])Boolean">isBundleCtor</a><span class="delimiter">)</span>
            <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj.bundleCtor" title="java.lang.reflect.Constructor[_]">bundleCtor</a>.<span title="(x$1: Object*)?0">newInstance</span><span class="delimiter">(</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.args" title="JavaReflectionRuntimes.this.MacroArgs">args</a>.<a href="../../../tools/nsc/typechecker/Macros.scala.html#scala.tools.nsc.typechecker;Macros;MacroArgs.c" title="=&gt; JavaReflectionRuntimes.this.MacroContext">c</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <a href="../../runtime/ReflectionUtils.scala.html#scala.reflect.runtime.ReflectionUtils" title="scala.reflect.runtime.ReflectionUtils.type">ReflectionUtils</a>.<a href="../../runtime/ReflectionUtils.scala.html#scala.reflect.runtime.ReflectionUtils.staticSingletonInstance(e247429358)" title="(clazz: Class[_])AnyRef">staticSingletonInstance</a><span class="delimiter">(</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implClass" title="Class[_]">implClass</a><span class="delimiter">)</span>
        val <a title="List[Any]" id="scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implArgs">implArgs</a> = if <span class="delimiter">(</span><a href="MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes;MacroRuntimeResolver.isBundle" title="=&gt; Boolean">isBundle</a><span class="delimiter">)</span> <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.args" title="JavaReflectionRuntimes.this.MacroArgs">args</a>.<a href="../../../tools/nsc/typechecker/Macros.scala.html#scala.tools.nsc.typechecker;Macros;MacroArgs.others" title="=&gt; List[Any]">others</a> else <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.args" title="JavaReflectionRuntimes.this.MacroArgs">args</a>.<a href="../../../tools/nsc/typechecker/Macros.scala.html#scala.tools.nsc.typechecker;Macros;MacroArgs.c" title="=&gt; JavaReflectionRuntimes.this.MacroContext">c</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.+:" title="(elem: Any)(implicit bf: scala.collection.generic.CanBuildFrom[List[Any],Any,List[Any]])List[Any]">+:</a> <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.args" title="JavaReflectionRuntimes.this.MacroArgs">args</a>.<a href="../../../tools/nsc/typechecker/Macros.scala.html#scala.tools.nsc.typechecker;Macros;MacroArgs.others" title="=&gt; List[Any]">others</a>
        <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.implMeth" title="java.lang.reflect.Method">implMeth</a>.<span title="(x$1: Any, x$2: Object*)Object">invoke</span><span class="delimiter">(</span><a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implObj" title="Any">implObj</a>, <a href="#scala.reflect.macros.runtime;JavaReflectionRuntimes;JavaReflectionResolvers.resolveJavaReflectionRuntime.$anonfun.implArgs" title="List[Any]">implArgs</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Seq[AnyRef]" class="delimiter">[</span><a href="../../../collection/Seq.scala.html#scala.collection;Seq" title="Seq[AnyRef]">Seq</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">]</span>: _*<span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>
        </pre>
    </body>
</html>
