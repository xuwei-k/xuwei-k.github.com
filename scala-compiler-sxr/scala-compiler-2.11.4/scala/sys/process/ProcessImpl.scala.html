<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/sys/process/ProcessImpl.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2013, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

package scala
package sys
package process

import <a href="package.scala.html#scala.sys.process.processInternal" title="scala.sys.process.processInternal.type">processInternal</a>._
import java.io.<span class="delimiter">{</span> PipedInputStream, PipedOutputStream <span class="delimiter">}</span>

private<span class="delimiter">[</span>process<span class="delimiter">]</span> trait <a title="trait ProcessImpl extends AnyRef" id="scala.sys.process;ProcessImpl">ProcessImpl</a> <a href="../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  self: Process.type =&gt;

  <span class="comment">/** Runs provided code in a new Thread and returns the Thread instance. */</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> object <a title="ProcessImpl.this.Spawn.type" id="scala.sys.process;ProcessImpl.Spawn">Spawn</a> <a href="#scala.sys.process;ProcessImpl.Spawn" title="ProcessImpl.this.Spawn.type" class="delimiter">{</a>
    def <a title="(f: =&gt; Unit)Thread" id="scala.sys.process;ProcessImpl.Spawn.apply(14e381c87d)">apply</a><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.sys.process;ProcessImpl.Spawn.apply(14e381c87d).f">f</a>: =&gt; Unit<span class="delimiter">)</span>: <span title="Thread">Thread</span> = <a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b)" title="(f: =&gt; Unit, daemon: Boolean)Thread">apply</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl.Spawn.apply(14e381c87d).f" title="=&gt; Unit">f</a>, daemon = false<span class="delimiter">)</span>
    def <a title="(f: =&gt; Unit, daemon: Boolean)Thread" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b)">apply</a><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).f">f</a>: =&gt; Unit, <a title="Boolean" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).daemon">daemon</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <span title="Thread">Thread</span> = <span class="delimiter">{</span>
      val <a title="Thread" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread">thread</a> = new <a title="&lt;$anon: Thread&gt; extends Thread" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread;$anon">Thread</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> override def <a title="()Unit" id="scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread;$anon.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).f" title="=&gt; Unit">f</a> <span class="delimiter">}</span> <span class="delimiter">}</span>
      <a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread" title="Thread">thread</a>.<span title="(x$1: Boolean)Unit">setDaemon</span><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).daemon" title="Boolean">daemon</a><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread" title="Thread">thread</a>.<span title="()Unit">start</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl.Spawn.apply(9d5d2e7c0b).thread" title="Thread">thread</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> object <a title="ProcessImpl.this.Future.type" id="scala.sys.process;ProcessImpl.Future">Future</a> <a href="#scala.sys.process;ProcessImpl.Future" title="ProcessImpl.this.Future.type" class="delimiter">{</a>
    def <a title="[T](f: =&gt; T)() =&gt; T" id="scala.sys.process;ProcessImpl.Future.apply">apply</a><span class="delimiter">[</span><a title="" id="scala.sys.process;ProcessImpl.Future.apply;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="scala.sys.process;ProcessImpl.Future.apply.f">f</a>: =&gt; T<span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; T = <span class="delimiter">{</span>
      val <a title="scala.concurrent.SyncVar[Either[Throwable,T]]" id="scala.sys.process;ProcessImpl.Future.apply.result">result</a> = new <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.concurrent.SyncVar[Either[Throwable,T]]">SyncVar</a><span class="delimiter">[</span>Either<span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span><span class="delimiter">]</span>
      def <a title="()Unit" id="scala.sys.process;ProcessImpl.Future.apply.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> =
        try <a href="#scala.sys.process;ProcessImpl.Future.apply.result" title="scala.concurrent.SyncVar[Either[Throwable,T]]">result</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.set" title="(x: Either[Throwable,T])Unit">set</a> <a href="../../util/Either.scala.html#scala.util;Right" title="(b: T)scala.util.Right[Nothing,T]">Right</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl.Future.apply.f" title="=&gt; T">f</a><span class="delimiter">)</span>
        catch <span class="delimiter">{</span> case <a title="Exception" id="scala.sys.process;ProcessImpl.Future.apply.run.e">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#scala.sys.process;ProcessImpl.Future.apply.result" title="scala.concurrent.SyncVar[Either[Throwable,T]]">result</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.set" title="(x: Either[Throwable,T])Unit">set</a> <a href="../../util/Either.scala.html#scala.util;Left" title="(a: Exception)scala.util.Left[Exception,Nothing]">Left</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl.Future.apply.run.e" title="Exception">e</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      <a href="#scala.sys.process;ProcessImpl.Spawn.apply(14e381c87d)" title="(f: =&gt; Unit)Thread">Spawn</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl.Future.apply.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scala.sys.process;ProcessImpl.Future.apply.result" title="scala.concurrent.SyncVar[Either[Throwable,T]]">result</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.get(8817d77103)" title="=&gt; Either[Throwable,T]">get</a> match <span class="delimiter">{</span>
        case Right<span class="delimiter">(</span><a title="T" id="scala.sys.process;ProcessImpl.Future.apply.$anonfun.value">value</a><span class="delimiter">)</span>    =&gt; <a href="#scala.sys.process;ProcessImpl.Future.apply.$anonfun.value" title="T">value</a>
        case Left<span class="delimiter">(</span><a title="Throwable" id="scala.sys.process;ProcessImpl.Future.apply.$anonfun.exception">exception</a><span class="delimiter">)</span> =&gt; throw <a href="#scala.sys.process;ProcessImpl.Future.apply.$anonfun.exception" title="Throwable">exception</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class AndProcess extends ProcessImpl.this.SequentialProcess" id="scala.sys.process;ProcessImpl;AndProcess">AndProcess</a><a href="#scala.sys.process;ProcessImpl;AndProcess" title="ProcessImpl.this.AndProcess" class="delimiter">(</a>
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;AndProcess.a">a</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;AndProcess.b">b</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;AndProcess.io">io</a>: <a href="ProcessIO.scala.html#scala.sys.process;ProcessIO" title="scala.sys.process.ProcessIO">ProcessIO</a>
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;SequentialProcess" title="ProcessImpl.this.SequentialProcess">SequentialProcess</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;AndProcess.a" title="scala.sys.process.ProcessBuilder">a</a>, <a href="#scala.sys.process;ProcessImpl;AndProcess.b" title="scala.sys.process.ProcessBuilder">b</a>, <a href="#scala.sys.process;ProcessImpl;AndProcess.io" title="scala.sys.process.ProcessIO">io</a>, <a href="#scala.sys.process;ProcessImpl;AndProcess.$anonfun.x$1" title="Int">_</a> <a href="../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class OrProcess extends ProcessImpl.this.SequentialProcess" id="scala.sys.process;ProcessImpl;OrProcess">OrProcess</a><a href="#scala.sys.process;ProcessImpl;OrProcess" title="ProcessImpl.this.OrProcess" class="delimiter">(</a>
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;OrProcess.a">a</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;OrProcess.b">b</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;OrProcess.io">io</a>: <a href="ProcessIO.scala.html#scala.sys.process;ProcessIO" title="scala.sys.process.ProcessIO">ProcessIO</a>
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;SequentialProcess" title="ProcessImpl.this.SequentialProcess">SequentialProcess</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;OrProcess.a" title="scala.sys.process.ProcessBuilder">a</a>, <a href="#scala.sys.process;ProcessImpl;OrProcess.b" title="scala.sys.process.ProcessBuilder">b</a>, <a href="#scala.sys.process;ProcessImpl;OrProcess.io" title="scala.sys.process.ProcessIO">io</a>, <a href="#scala.sys.process;ProcessImpl;OrProcess.$anonfun.x$2" title="Int">_</a> <a href="../../Int.scala.html#scala;Int.!=(5f58a84eb3)" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class ProcessSequence extends ProcessImpl.this.SequentialProcess" id="scala.sys.process;ProcessImpl;ProcessSequence">ProcessSequence</a><a href="#scala.sys.process;ProcessImpl;ProcessSequence" title="ProcessImpl.this.ProcessSequence" class="delimiter">(</a>
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;ProcessSequence.a">a</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;ProcessSequence.b">b</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;ProcessSequence.io">io</a>: <a href="ProcessIO.scala.html#scala.sys.process;ProcessIO" title="scala.sys.process.ProcessIO">ProcessIO</a>
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;SequentialProcess" title="ProcessImpl.this.SequentialProcess">SequentialProcess</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;ProcessSequence.a" title="scala.sys.process.ProcessBuilder">a</a>, <a href="#scala.sys.process;ProcessImpl;ProcessSequence.b" title="scala.sys.process.ProcessBuilder">b</a>, <a href="#scala.sys.process;ProcessImpl;ProcessSequence.io" title="scala.sys.process.ProcessIO">io</a>, <a title="Int" id="scala.sys.process;ProcessImpl;ProcessSequence.$anonfun.x$3">_</a> =&gt; true<span class="delimiter">)</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class SequentialProcess extends ProcessImpl.this.CompoundProcess" id="scala.sys.process;ProcessImpl;SequentialProcess">SequentialProcess</a><a href="#scala.sys.process;ProcessImpl;SequentialProcess" title="ProcessImpl.this.SequentialProcess" class="delimiter">(</a>
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;SequentialProcess.a">a</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;SequentialProcess.b">b</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>,
    <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;SequentialProcess.io">io</a>: <a href="ProcessIO.scala.html#scala.sys.process;ProcessIO" title="scala.sys.process.ProcessIO">ProcessIO</a>,
    <a title="Int =&gt; Boolean" id="scala.sys.process;ProcessImpl;SequentialProcess.evaluateSecondProcess">evaluateSecondProcess</a>: Int =&gt; Boolean
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;CompoundProcess" title="ProcessImpl.this.CompoundProcess">CompoundProcess</a> <span class="delimiter">{</span>

    protected<span class="delimiter">[</span>this<span class="delimiter">]</span> override def <a title="()Option[Int]" id="scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue">runAndExitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="scala.sys.process.Process" id="scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.first">first</a> = <a href="#scala.sys.process;ProcessImpl;SequentialProcess.a" title="scala.sys.process.ProcessBuilder">a</a>.<a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder.run(540c886954)" title="(io: scala.sys.process.ProcessIO)scala.sys.process.Process">run</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.io" title="scala.sys.process.ProcessIO">io</a><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible" title="(action: =&gt; Int)(destroyImpl: =&gt; Unit)Option[Int]">runInterruptible</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.first" title="scala.sys.process.Process">first</a>.<a href="Process.scala.html#scala.sys.process;Process.exitValue" title="()Int">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.first" title="scala.sys.process.Process">first</a>.<a href="Process.scala.html#scala.sys.process;Process.destroy" title="()Unit">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Option.flatMap" title="(f: Int =&gt; Option[Int])Option[Int]">flatMap</a> <span class="delimiter">{</span> <a title="Int" id="scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.codeA">codeA</a> =&gt;
        if <span class="delimiter">(</span><a href="../../Function1.scala.html#scala;Function1.apply" title="(v1: Int)Boolean">evaluateSecondProcess</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.codeA" title="Int">codeA</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="scala.sys.process.Process" id="scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.second">second</a> = <a href="#scala.sys.process;ProcessImpl;SequentialProcess.b" title="scala.sys.process.ProcessBuilder">b</a>.<a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder.run(540c886954)" title="(io: scala.sys.process.ProcessIO)scala.sys.process.Process">run</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.io" title="scala.sys.process.ProcessIO">io</a><span class="delimiter">)</span>
          <a href="#scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible" title="(action: =&gt; Int)(destroyImpl: =&gt; Unit)Option[Int]">runInterruptible</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.second" title="scala.sys.process.Process">second</a>.<a href="Process.scala.html#scala.sys.process;Process.exitValue" title="()Int">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.second" title="scala.sys.process.Process">second</a>.<a href="Process.scala.html#scala.sys.process;Process.destroy" title="()Unit">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        else <a href="../../Option.scala.html#scala;Some" title="(x: Int)Some[Int]">Some</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SequentialProcess.runAndExitValue.$anonfun.codeA" title="Int">codeA</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> abstract class <a title="class BasicProcess extends AnyRef with scala.sys.process.Process" id="scala.sys.process;ProcessImpl;BasicProcess">BasicProcess</a> extends <a href="Process.scala.html#scala.sys.process;Process" title="scala.sys.process.Process">Process</a> <span class="delimiter">{</span>
    def <a title="()Unit" id="scala.sys.process;ProcessImpl;BasicProcess.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> abstract class <a title="class CompoundProcess extends ProcessImpl.this.BasicProcess" id="scala.sys.process;ProcessImpl;CompoundProcess">CompoundProcess</a> extends <a href="#scala.sys.process;ProcessImpl;BasicProcess" title="ProcessImpl.this.BasicProcess">BasicProcess</a> <span class="delimiter">{</span>
    def <a title="()Unit" id="scala.sys.process;ProcessImpl;CompoundProcess.destroy">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span>   = <a href="../../Function0.scala.html#scala;Function0.apply" title="()Unit">destroyer</a><span class="delimiter">(</span><span class="delimiter">)</span>
    def <a title="()Int" id="scala.sys.process;ProcessImpl;CompoundProcess.exitValue">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="../../Function0.scala.html#scala;Function0.apply" title="()Option[Int]">getExitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; Int)Int">getOrElse</a> scala.sys.<a href="../package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;No exit code: process destroyed.&quot;)" class="string">&quot;No exit code: process destroyed.&quot;</span><span class="delimiter">)</span>
    def <a title="()Unit" id="scala.sys.process;ProcessImpl;CompoundProcess.start">start</a><span class="delimiter">(</span><span class="delimiter">)</span>     = <a href="#scala.sys.process;ProcessImpl;CompoundProcess.getExitValue" title="=&gt; () =&gt; Option[Int]">getExitValue</a>

    protected lazy val <a title="(() =&gt; Option[Int], () =&gt; Unit)" id="scala.sys.process;ProcessImpl;CompoundProcess.x$4" class="delimiter">(</a><a title="() =&gt; Option[Int]" id="scala.sys.process;ProcessImpl;CompoundProcess.getExitValue">getExitValue</a>, <a title="() =&gt; Unit" id="scala.sys.process;ProcessImpl;CompoundProcess.destroyer">destroyer</a><span class="delimiter">)</span> = <a href="../../Tuple2.scala.html#scala;Tuple2" title="(() =&gt; Option[Int], () =&gt; Unit) @unchecked" class="delimiter">{</a>
      val <a title="scala.concurrent.SyncVar[Option[Int]]" id="scala.sys.process;ProcessImpl;CompoundProcess.x$4.code">code</a> = new <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.concurrent.SyncVar[Option[Int]]">SyncVar</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl;CompoundProcess.x$4.code" title="scala.concurrent.SyncVar[Option[Int]]">code</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.set" title="(x: Option[Int])Unit">set</a> <a href="../../Option.scala.html#scala.None" title="None.type">None</a>
      val <a title="Thread" id="scala.sys.process;ProcessImpl;CompoundProcess.x$4.thread">thread</a> = <a href="#scala.sys.process;ProcessImpl.Spawn.apply(14e381c87d)" title="(f: =&gt; Unit)Thread">Spawn</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;CompoundProcess.x$4.code" title="scala.concurrent.SyncVar[Option[Int]]">code</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.set" title="(x: Option[Int])Unit">set</a> <a href="#scala.sys.process;ProcessImpl;CompoundProcess.runAndExitValue" title="()Option[Int]">runAndExitValue</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: () =&gt; Option[Int], _2: () =&gt; Unit)(() =&gt; Option[Int], () =&gt; Unit)" class="delimiter">(</a>
        <a href="#scala.sys.process;ProcessImpl.Future.apply" title="(f: =&gt; Option[Int])() =&gt; Option[Int]">Future</a> <span class="delimiter">{</span> <a href="#scala.sys.process;ProcessImpl;CompoundProcess.x$4.thread" title="Thread">thread</a>.<span title="()Unit">join</span><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="#scala.sys.process;ProcessImpl;CompoundProcess.x$4.code" title="scala.concurrent.SyncVar[Option[Int]]">code</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.get(8817d77103)" title="=&gt; Option[Int]">get</a> <span class="delimiter">}</span>,
        <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scala.sys.process;ProcessImpl;CompoundProcess.x$4.thread" title="Thread">thread</a>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Start and block until the exit value is available and then return it in Some.  Return None if destroyed (use 'run')*/</span>
    protected<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="()Option[Int]" id="scala.sys.process;ProcessImpl;CompoundProcess.runAndExitValue">runAndExitValue</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Option.scala.html#scala;Option" title="Option[Int]">Option</a><span class="delimiter">[</span>Int<span class="delimiter">]</span>

    protected<span class="delimiter">[</span>this<span class="delimiter">]</span> def <a title="[T](action: =&gt; T)(destroyImpl: =&gt; Unit)Option[T]" id="scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible">runInterruptible</a><span class="delimiter">[</span><a title="" id="scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible.action">action</a>: =&gt; T<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible.destroyImpl">destroyImpl</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="../../Option.scala.html#scala;Option" title="Option[T]">Option</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
      try   <a href="../../Option.scala.html#scala;Some" title="(x: T)Some[T]">Some</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible.action" title="=&gt; T">action</a><span class="delimiter">)</span>
      catch <a href="package.scala.html#scala.sys.process.processInternal.onInterrupt" title="(handler: =&gt; None.type)scala.sys.process.processInternal.=?&gt;[Throwable,None.type]">onInterrupt</a> <a href="../../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="scala.sys.process.processInternal.=?&gt;[Throwable,None.type]" id="scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible.catchExpr1" class="delimiter">{</a> <a href="#scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible.destroyImpl" title="=&gt; Unit">destroyImpl</a>; <a href="../../Option.scala.html#scala.None" title="None.type">None</a> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class PipedProcesses extends ProcessImpl.this.CompoundProcess" id="scala.sys.process;ProcessImpl;PipedProcesses">PipedProcesses</a><a href="#scala.sys.process;ProcessImpl;PipedProcesses" title="ProcessImpl.this.PipedProcesses" class="delimiter">(</a><a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;PipedProcesses.a">a</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>, <a title="scala.sys.process.ProcessBuilder" id="scala.sys.process;ProcessImpl;PipedProcesses.b">b</a>: <a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder" title="scala.sys.process.ProcessBuilder">ProcessBuilder</a>, <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;PipedProcesses.defaultIO">defaultIO</a>: <a href="ProcessIO.scala.html#scala.sys.process;ProcessIO" title="scala.sys.process.ProcessIO">ProcessIO</a>, <a title="Boolean" id="scala.sys.process;ProcessImpl;PipedProcesses.toError">toError</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;CompoundProcess" title="ProcessImpl.this.CompoundProcess">CompoundProcess</a> <span class="delimiter">{</span>
    protected<span class="delimiter">[</span>this<span class="delimiter">]</span> override def <a title="()Option[Int]" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue">runAndExitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.InputStream]]" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSource">currentSource</a> = new <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">SyncVar</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>InputStream<span class="delimiter">]</span><span class="delimiter">]</span>
      val <a title="java.io.PipedOutputStream" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeOut">pipeOut</a>       = new <span title="java.io.PipedOutputStream">PipedOutputStream</span>
      val <a title="ProcessImpl.this.PipeSource" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.source">source</a>        = new <a href="#scala.sys.process;ProcessImpl;PipeSource" title="ProcessImpl.this.PipeSource">PipeSource</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSource" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a>, <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeOut" title="java.io.PipedOutputStream">pipeOut</a>, <a href="#scala.sys.process;ProcessImpl;PipedProcesses.a" title="scala.sys.process.ProcessBuilder">a</a>.<span title="()String">toString</span><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.source" title="ProcessImpl.this.PipeSource">source</a>.<span title="()Unit">start</span><span class="delimiter">(</span><span class="delimiter">)</span>

      val <a title="java.io.PipedInputStream" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeIn">pipeIn</a>      = new <span title="java.io.PipedInputStream">PipedInputStream</span><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeOut" title="java.io.PipedOutputStream">pipeOut</a><span class="delimiter">)</span>
      val <a title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSink">currentSink</a> = new <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">SyncVar</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>OutputStream<span class="delimiter">]</span><span class="delimiter">]</span>
      val <a title="ProcessImpl.this.PipeSink" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.sink">sink</a>        = new <a href="#scala.sys.process;ProcessImpl;PipeSink" title="ProcessImpl.this.PipeSink">PipeSink</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeIn" title="java.io.PipedInputStream">pipeIn</a>, <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSink" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a>, <a href="#scala.sys.process;ProcessImpl;PipedProcesses.b" title="scala.sys.process.ProcessBuilder">b</a>.<span title="()String">toString</span><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.sink" title="ProcessImpl.this.PipeSink">sink</a>.<span title="()Unit">start</span><span class="delimiter">(</span><span class="delimiter">)</span>

      def <a title="(fromOutput: scala.sys.process.processInternal.InputStream)Unit" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.handleOutOrError">handleOutOrError</a><span class="delimiter">(</span><a title="scala.sys.process.processInternal.InputStream" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.handleOutOrError.fromOutput">fromOutput</a>: <span title="scala.sys.process.processInternal.InputStream">InputStream</span><span class="delimiter">)</span> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSource" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.put" title="(x: Option[scala.sys.process.processInternal.InputStream])Unit">put</a> <a href="../../Option.scala.html#scala;Some" title="(x: scala.sys.process.processInternal.InputStream)Some[scala.sys.process.processInternal.InputStream]">Some</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.handleOutOrError.fromOutput" title="scala.sys.process.processInternal.InputStream">fromOutput</a><span class="delimiter">)</span>

      val <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.firstIO">firstIO</a> =
        if <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.toError" title="Boolean">toError</a><span class="delimiter">)</span>
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.defaultIO" title="scala.sys.process.ProcessIO">defaultIO</a>.<a href="ProcessIO.scala.html#scala.sys.process;ProcessIO.withError" title="(process: scala.sys.process.processInternal.InputStream =&gt; Unit)scala.sys.process.ProcessIO">withError</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.handleOutOrError" title="(fromOutput: scala.sys.process.processInternal.InputStream)Unit">handleOutOrError</a><span class="delimiter">)</span>
        else
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.defaultIO" title="scala.sys.process.ProcessIO">defaultIO</a>.<a href="ProcessIO.scala.html#scala.sys.process;ProcessIO.withOutput" title="(process: scala.sys.process.processInternal.InputStream =&gt; Unit)scala.sys.process.ProcessIO">withOutput</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.handleOutOrError" title="(fromOutput: scala.sys.process.processInternal.InputStream)Unit">handleOutOrError</a><span class="delimiter">)</span>
      val <a title="scala.sys.process.ProcessIO" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.secondIO">secondIO</a> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.defaultIO" title="scala.sys.process.ProcessIO">defaultIO</a>.<a href="ProcessIO.scala.html#scala.sys.process;ProcessIO.withInput" title="(write: scala.sys.process.processInternal.OutputStream =&gt; Unit)scala.sys.process.ProcessIO">withInput</a><span class="delimiter">(</span><a title="scala.sys.process.processInternal.OutputStream" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.secondIO.$anonfun.toInput">toInput</a> =&gt; <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSink" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.put" title="(x: Option[scala.sys.process.processInternal.OutputStream])Unit">put</a> <a href="../../Option.scala.html#scala;Some" title="(x: scala.sys.process.processInternal.OutputStream)Some[scala.sys.process.processInternal.OutputStream]">Some</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.secondIO.$anonfun.toInput" title="scala.sys.process.processInternal.OutputStream">toInput</a><span class="delimiter">)</span><span class="delimiter">)</span>

      val <a title="scala.sys.process.Process" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.second">second</a> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.b" title="scala.sys.process.ProcessBuilder">b</a>.<a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder.run(540c886954)" title="(io: scala.sys.process.ProcessIO)scala.sys.process.Process">run</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.secondIO" title="scala.sys.process.ProcessIO">secondIO</a><span class="delimiter">)</span>
      val <a title="scala.sys.process.Process" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.first">first</a> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.a" title="scala.sys.process.ProcessBuilder">a</a>.<a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder.run(540c886954)" title="(io: scala.sys.process.ProcessIO)scala.sys.process.Process">run</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.firstIO" title="scala.sys.process.ProcessIO">firstIO</a><span class="delimiter">)</span>
      try <span class="delimiter">{</span>
        <a href="#scala.sys.process;ProcessImpl;CompoundProcess.runInterruptible" title="(action: =&gt; Int)(destroyImpl: =&gt; Unit)Option[Int]">runInterruptible</a> <span class="delimiter">{</span>
          val <a title="Int" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.exit1">exit1</a> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.first" title="scala.sys.process.Process">first</a>.<a href="Process.scala.html#scala.sys.process;Process.exitValue" title="()Int">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSource" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.put" title="(x: Option[scala.sys.process.processInternal.InputStream])Unit">put</a> <a href="../../Option.scala.html#scala.None" title="None.type">None</a>
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.currentSink" title="scala.concurrent.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a> <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.put" title="(x: Option[scala.sys.process.processInternal.OutputStream])Unit">put</a> <a href="../../Option.scala.html#scala.None" title="None.type">None</a>
          val <a title="Int" id="scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.exit2">exit2</a> = <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.second" title="scala.sys.process.Process">second</a>.<a href="Process.scala.html#scala.sys.process;Process.exitValue" title="()Int">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="comment">// Since file redirection (e.g. #&gt;) is implemented as a piped process,</span>
          <span class="comment">// we ignore its exit value so cmd #&gt; file doesn't always return 0.</span>
          if <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipedProcesses.b" title="scala.sys.process.ProcessBuilder">b</a>.<a href="ProcessBuilder.scala.html#scala.sys.process;ProcessBuilder.hasExitValue" title="=&gt; Boolean">hasExitValue</a><span class="delimiter">)</span> <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.exit2" title="Int">exit2</a> else <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.exit1" title="Int">exit1</a>
        <span class="delimiter">}</span> <span class="delimiter">{</span>
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.first" title="scala.sys.process.Process">first</a>.<a href="Process.scala.html#scala.sys.process;Process.destroy" title="()Unit">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.second" title="scala.sys.process.Process">second</a>.<a href="Process.scala.html#scala.sys.process;Process.destroy" title="()Unit">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      finally <span class="delimiter">{</span>
        <a href="BasicIO.scala.html#scala.sys.process.BasicIO" title="scala.sys.process.BasicIO.type">BasicIO</a> <a href="BasicIO.scala.html#scala.sys.process.BasicIO.close" title="(c: scala.sys.process.processInternal.Closeable)Unit">close</a> <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeIn" title="java.io.PipedInputStream">pipeIn</a>
        <a href="BasicIO.scala.html#scala.sys.process.BasicIO" title="scala.sys.process.BasicIO.type">BasicIO</a> <a href="BasicIO.scala.html#scala.sys.process.BasicIO.close" title="(c: scala.sys.process.processInternal.Closeable)Unit">close</a> <a href="#scala.sys.process;ProcessImpl;PipedProcesses.runAndExitValue.pipeOut" title="java.io.PipedOutputStream">pipeOut</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> abstract class <a title="class PipeThread extends Thread" id="scala.sys.process;ProcessImpl;PipeThread">PipeThread</a><a href="#scala.sys.process;ProcessImpl;PipeThread" title="ProcessImpl.this.PipeThread" class="delimiter">(</a><a title="Boolean" id="scala.sys.process;ProcessImpl;PipeThread.isSink">isSink</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>, <a title="() =&gt; String" id="scala.sys.process;ProcessImpl;PipeThread.labelFn">labelFn</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; String<span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;PipeThread" title="Thread">Thread</a> <span class="delimiter">{</span>
    def <a title="()Unit" id="scala.sys.process;ProcessImpl;PipeThread.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a>

    private<span class="delimiter">[</span>process<span class="delimiter">]</span> def <a title="(src: scala.sys.process.processInternal.InputStream, dst: scala.sys.process.processInternal.OutputStream)Unit" id="scala.sys.process;ProcessImpl;PipeThread.runloop">runloop</a><span class="delimiter">(</span><a title="scala.sys.process.processInternal.InputStream" id="scala.sys.process;ProcessImpl;PipeThread.runloop.src">src</a>: <span title="scala.sys.process.processInternal.InputStream">InputStream</span>, <a title="scala.sys.process.processInternal.OutputStream" id="scala.sys.process;ProcessImpl;PipeThread.runloop.dst">dst</a>: <span title="scala.sys.process.processInternal.OutputStream">OutputStream</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
      try     <a href="BasicIO.scala.html#scala.sys.process.BasicIO" title="scala.sys.process.BasicIO.type">BasicIO</a>.<a href="BasicIO.scala.html#scala.sys.process.BasicIO.transferFully" title="(in: scala.sys.process.processInternal.InputStream, out: scala.sys.process.processInternal.OutputStream)Unit">transferFully</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipeThread.runloop.src" title="scala.sys.process.processInternal.InputStream">src</a>, <a href="#scala.sys.process;ProcessImpl;PipeThread.runloop.dst" title="scala.sys.process.processInternal.OutputStream">dst</a><span class="delimiter">)</span>
      catch   <a href="package.scala.html#scala.sys.process.processInternal.ioFailure" title="(handler: scala.sys.process.processInternal.IOException =&gt; Unit)scala.sys.process.processInternal.=?&gt;[Throwable,Unit]">ioFailure</a><a href="../../PartialFunction.scala.html#scala;PartialFunction.isDefinedAt" title="scala.sys.process.processInternal.=?&gt;[Throwable,Unit]" id="scala.sys.process;ProcessImpl;PipeThread.runloop.catchExpr2" class="delimiter">(</a><a href="#scala.sys.process;ProcessImpl;PipeThread.ioHandler" title="(e: scala.sys.process.processInternal.IOException)Unit">ioHandler</a><span class="delimiter">)</span>
      finally <a href="BasicIO.scala.html#scala.sys.process.BasicIO" title="scala.sys.process.BasicIO.type">BasicIO</a> <a href="BasicIO.scala.html#scala.sys.process.BasicIO.close" title="(c: scala.sys.process.processInternal.Closeable)Unit">close</a> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipeThread.isSink" title="Boolean">isSink</a><span class="delimiter">)</span> <a href="#scala.sys.process;ProcessImpl;PipeThread.runloop.dst" title="scala.sys.process.processInternal.OutputStream">dst</a> else <a href="#scala.sys.process;ProcessImpl;PipeThread.runloop.src" title="scala.sys.process.processInternal.InputStream">src</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    private def <a title="(e: scala.sys.process.processInternal.IOException)Unit" id="scala.sys.process;ProcessImpl;PipeThread.ioHandler">ioHandler</a><span class="delimiter">(</span><a title="scala.sys.process.processInternal.IOException" id="scala.sys.process;ProcessImpl;PipeThread.ioHandler.e">e</a>: <span title="scala.sys.process.processInternal.IOException">IOException</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;I/O error &quot;)" class="string">&quot;I/O error &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.sys.process;ProcessImpl;PipeThread.ioHandler.e" title="scala.sys.process.processInternal.IOException">e</a>.<span title="()String">getMessage</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; for process: &quot;)" class="string">&quot; for process: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../Function0.scala.html#scala;Function0.apply" title="()String">labelFn</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.sys.process;ProcessImpl;PipeThread.ioHandler.e" title="scala.sys.process.processInternal.IOException">e</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class PipeSource extends ProcessImpl.this.PipeThread" id="scala.sys.process;ProcessImpl;PipeSource">PipeSource</a><a href="#scala.sys.process;ProcessImpl;PipeSource" title="ProcessImpl.this.PipeSource" class="delimiter">(</a>
    <a title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.InputStream]]" id="scala.sys.process;ProcessImpl;PipeSource.currentSource">currentSource</a>: <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">SyncVar</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>InputStream<span class="delimiter">]</span><span class="delimiter">]</span>,
    <a title="java.io.PipedOutputStream" id="scala.sys.process;ProcessImpl;PipeSource.pipe">pipe</a>: <span title="java.io.PipedOutputStream">PipedOutputStream</span>,
    <a title="=&gt; String" id="scala.sys.process;ProcessImpl;PipeSource.label">label</a>: =&gt; String
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;PipeThread" title="ProcessImpl.this.PipeThread">PipeThread</a><span class="delimiter">(</span>false, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scala.sys.process;ProcessImpl;PipeSource.label" title="=&gt; String">label</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    final override def <a title="()Unit" id="scala.sys.process;ProcessImpl;PipeSource.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="#scala.sys.process;ProcessImpl;PipeSource.currentSource" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.get(8817d77103)" title="=&gt; Option[scala.sys.process.processInternal.InputStream]">get</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="scala.sys.process.processInternal.InputStream" id="scala.sys.process;ProcessImpl;PipeSource.run.source">source</a><span class="delimiter">)</span> =&gt;
        try <a href="#scala.sys.process;ProcessImpl;PipeThread.runloop" title="(src: scala.sys.process.processInternal.InputStream, dst: scala.sys.process.processInternal.OutputStream)Unit">runloop</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipeSource.run.source" title="scala.sys.process.processInternal.InputStream">source</a>, <a href="#scala.sys.process;ProcessImpl;PipeSource.pipe" title="java.io.PipedOutputStream">pipe</a><span class="delimiter">)</span>
        finally <a href="#scala.sys.process;ProcessImpl;PipeSource.currentSource" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.unset" title="()Unit">unset</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="#scala.sys.process;ProcessImpl;PipeSource.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <a href="../../Option.scala.html#scala.None" title="None.type">None</a> =&gt;
        <a href="#scala.sys.process;ProcessImpl;PipeSource.currentSource" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.InputStream]]">currentSource</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.unset" title="()Unit">unset</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="BasicIO.scala.html#scala.sys.process.BasicIO" title="scala.sys.process.BasicIO.type">BasicIO</a> <a href="BasicIO.scala.html#scala.sys.process.BasicIO.close" title="(c: scala.sys.process.processInternal.Closeable)Unit">close</a> <a href="#scala.sys.process;ProcessImpl;PipeSource.pipe" title="java.io.PipedOutputStream">pipe</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class PipeSink extends ProcessImpl.this.PipeThread" id="scala.sys.process;ProcessImpl;PipeSink">PipeSink</a><a href="#scala.sys.process;ProcessImpl;PipeSink" title="ProcessImpl.this.PipeSink" class="delimiter">(</a>
    <a title="java.io.PipedInputStream" id="scala.sys.process;ProcessImpl;PipeSink.pipe">pipe</a>: <span title="java.io.PipedInputStream">PipedInputStream</span>,
    <a title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]" id="scala.sys.process;ProcessImpl;PipeSink.currentSink">currentSink</a>: <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">SyncVar</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>OutputStream<span class="delimiter">]</span><span class="delimiter">]</span>,
    <a title="=&gt; String" id="scala.sys.process;ProcessImpl;PipeSink.label">label</a>: =&gt; String
  <span class="delimiter">)</span> extends <a href="#scala.sys.process;ProcessImpl;PipeThread" title="ProcessImpl.this.PipeThread">PipeThread</a><span class="delimiter">(</span>true, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scala.sys.process;ProcessImpl;PipeSink.label" title="=&gt; String">label</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    final override def <a title="()Unit" id="scala.sys.process;ProcessImpl;PipeSink.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="#scala.sys.process;ProcessImpl;PipeSink.currentSink" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.get(8817d77103)" title="=&gt; Option[scala.sys.process.processInternal.OutputStream]">get</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="scala.sys.process.processInternal.OutputStream" id="scala.sys.process;ProcessImpl;PipeSink.run.sink">sink</a><span class="delimiter">)</span> =&gt;
        try <a href="#scala.sys.process;ProcessImpl;PipeThread.runloop" title="(src: scala.sys.process.processInternal.InputStream, dst: scala.sys.process.processInternal.OutputStream)Unit">runloop</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;PipeSink.pipe" title="java.io.PipedInputStream">pipe</a>, <a href="#scala.sys.process;ProcessImpl;PipeSink.run.sink" title="scala.sys.process.processInternal.OutputStream">sink</a><span class="delimiter">)</span>
        finally <a href="#scala.sys.process;ProcessImpl;PipeSink.currentSink" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.unset" title="()Unit">unset</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="#scala.sys.process;ProcessImpl;PipeSink.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <a href="../../Option.scala.html#scala.None" title="None.type">None</a> =&gt;
        <a href="#scala.sys.process;ProcessImpl;PipeSink.currentSink" title="scala.sys.process.processInternal.SyncVar[Option[scala.sys.process.processInternal.OutputStream]]">currentSink</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.unset" title="()Unit">unset</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** A thin wrapper around a java.lang.Process.  `ioThreads` are the Threads created to do I/O.
  * The implementation of `exitValue` waits until these threads die before returning. */</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class DummyProcess extends AnyRef with scala.sys.process.Process" id="scala.sys.process;ProcessImpl;DummyProcess">DummyProcess</a><a href="#scala.sys.process;ProcessImpl;DummyProcess" title="ProcessImpl.this.DummyProcess" class="delimiter">(</a><a title="=&gt; Int" id="scala.sys.process;ProcessImpl;DummyProcess.action">action</a>: =&gt; Int<span class="delimiter">)</span> extends <a href="Process.scala.html#scala.sys.process;Process" title="scala.sys.process.Process">Process</a> <span class="delimiter">{</span>
    private<span class="delimiter">[</span>this<span class="delimiter">]</span> val <a title="() =&gt; Int" id="scala.sys.process;ProcessImpl;DummyProcess.exitCode">exitCode</a> = <a href="#scala.sys.process;ProcessImpl.Future.apply" title="(f: =&gt; Int)() =&gt; Int">Future</a><span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;DummyProcess.action" title="=&gt; Int">action</a><span class="delimiter">)</span>
    override def <a title="()Int" id="scala.sys.process;ProcessImpl;DummyProcess.exitValue">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="../../Function0.scala.html#scala;Function0.apply" title="()Int">exitCode</a><span class="delimiter">(</span><span class="delimiter">)</span>
    override def <a title="()Unit" id="scala.sys.process;ProcessImpl;DummyProcess.destroy">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** A thin wrapper around a java.lang.Process.  `outputThreads` are the Threads created to read from the
  * output and error streams of the process.  `inputThread` is the Thread created to write to the input stream of
  * the process.
  * The implementation of `exitValue` interrupts `inputThread` and then waits until all I/O threads die before
  * returning. */</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> class <a title="class SimpleProcess extends AnyRef with scala.sys.process.Process" id="scala.sys.process;ProcessImpl;SimpleProcess">SimpleProcess</a><a href="#scala.sys.process;ProcessImpl;SimpleProcess" title="ProcessImpl.this.SimpleProcess" class="delimiter">(</a><a title="scala.sys.process.processInternal.JProcess" id="scala.sys.process;ProcessImpl;SimpleProcess.p">p</a>: <span title="scala.sys.process.processInternal.JProcess">JProcess</span>, <a title="Thread" id="scala.sys.process;ProcessImpl;SimpleProcess.inputThread">inputThread</a>: <span title="Thread">Thread</span>, <a title="List[Thread]" id="scala.sys.process;ProcessImpl;SimpleProcess.outputThreads">outputThreads</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Thread]">List</a><span class="delimiter">[</span>Thread<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="Process.scala.html#scala.sys.process;Process" title="scala.sys.process.Process">Process</a> <span class="delimiter">{</span>
    override def <a title="()Int" id="scala.sys.process;ProcessImpl;SimpleProcess.exitValue">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      try <a href="#scala.sys.process;ProcessImpl;SimpleProcess.p" title="scala.sys.process.processInternal.JProcess">p</a>.<span title="()Int">waitFor</span><span class="delimiter">(</span><span class="delimiter">)</span>                   <span class="comment">// wait for the process to terminate</span>
      finally <a href="#scala.sys.process;ProcessImpl;SimpleProcess.inputThread" title="Thread">inputThread</a>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span>   <span class="comment">// we interrupt the input thread to notify it that it can terminate</span>
      <a href="#scala.sys.process;ProcessImpl;SimpleProcess.outputThreads" title="List[Thread]">outputThreads</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Thread =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SimpleProcess.exitValue.$anonfun.x$7" title="Thread">_</a>.<span title="()Unit">join</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>  <span class="comment">// this ensures that all output is complete before returning (waitFor does not ensure this)</span>

      <a href="#scala.sys.process;ProcessImpl;SimpleProcess.p" title="scala.sys.process.processInternal.JProcess">p</a>.<span title="()Int">exitValue</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    override def <a title="()Unit" id="scala.sys.process;ProcessImpl;SimpleProcess.destroy">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      try <span class="delimiter">{</span>
        <a href="#scala.sys.process;ProcessImpl;SimpleProcess.outputThreads" title="List[Thread]">outputThreads</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Thread =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;SimpleProcess.destroy.$anonfun.x$8" title="Thread">_</a>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// on destroy, don't bother consuming any more output</span>
        <a href="#scala.sys.process;ProcessImpl;SimpleProcess.p" title="scala.sys.process.processInternal.JProcess">p</a>.<span title="()Unit">destroy</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      finally <a href="#scala.sys.process;ProcessImpl;SimpleProcess.inputThread" title="Thread">inputThread</a>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  private<span class="delimiter">[</span>process<span class="delimiter">]</span> final class <a title="class ThreadProcess extends AnyRef with scala.sys.process.Process" id="scala.sys.process;ProcessImpl;ThreadProcess">ThreadProcess</a><a href="#scala.sys.process;ProcessImpl;ThreadProcess" title="ProcessImpl.this.ThreadProcess" class="delimiter">(</a><a title="Thread" id="scala.sys.process;ProcessImpl;ThreadProcess.thread">thread</a>: <span title="Thread">Thread</span>, <a title="scala.sys.process.processInternal.SyncVar[Boolean]" id="scala.sys.process;ProcessImpl;ThreadProcess.success">success</a>: <a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar" title="scala.sys.process.processInternal.SyncVar[Boolean]">SyncVar</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="Process.scala.html#scala.sys.process;Process" title="scala.sys.process.Process">Process</a> <span class="delimiter">{</span>
    override def <a title="()Int" id="scala.sys.process;ProcessImpl;ThreadProcess.exitValue">exitValue</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.sys.process;ProcessImpl;ThreadProcess.thread" title="Thread">thread</a>.<span title="()Unit">join</span><span class="delimiter">(</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.sys.process;ProcessImpl;ThreadProcess.success" title="scala.sys.process.processInternal.SyncVar[Boolean]">success</a>.<a href="../../concurrent/SyncVar.scala.html#scala.concurrent;SyncVar.get(8817d77103)" title="=&gt; Boolean">get</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> else <span title="Int(1)" class="int">1</span>
    <span class="delimiter">}</span>
    override def <a title="()Unit" id="scala.sys.process;ProcessImpl;ThreadProcess.destroy">destroy</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#scala.sys.process;ProcessImpl;ThreadProcess.thread" title="Thread">thread</a>.<span title="()Unit">interrupt</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
