<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/transform/patmat/PatternMatching.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 *
 * Copyright 2011-2013 LAMP/EPFL
 * @author Adriaan Moors
 */</span>

package scala.tools.nsc.transform.patmat

import scala.tools.nsc.Global
import scala.tools.nsc.ast
import scala.<a href="../../../../language.scala.html#scala.language" title="language.type">language</a>.postfixOps
import scala.tools.nsc.transform.TypingTransformers
import scala.tools.nsc.transform.Transform
import scala.reflect.internal.util.Statistics
import scala.reflect.internal.Types
import scala.reflect.internal.util.Position

<span class="comment">/** Translate pattern matching.
  *
  * Either into optimized if/then/else's, or virtualized as method calls (these methods form a zero-plus monad),
  * similar in spirit to how for-comprehensions are compiled.
  *
  * For each case, express all patterns as extractor calls, guards as 0-ary extractors, and sequence them using `flatMap`
  * (lifting the body of the case into the monad using `one`).
  *
  * Cases are combined into a pattern match using the `orElse` combinator (the implicit failure case is expressed using the monad's `zero`).
  *
  * TODO:
  *  - DCE (on irrefutable patterns)
  *  - update spec and double check it's implemented correctly (see TODO's)
  *
  * (longer-term) TODO:
  *  - user-defined unapplyProd
  *  - recover GADT typing by locally inserting implicit witnesses to type equalities derived from the current case, and considering these witnesses during subtyping (?)
  *  - recover exhaustivity/unreachability of user-defined extractors by partitioning the types they match on using an HList or similar type-level structure
  */</span>
trait <a title="trait PatternMatching extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.transform.patmat.Debugging with scala.tools.nsc.transform.patmat.Interface with scala.tools.nsc.transform.patmat.MatchTranslation with scala.tools.nsc.transform.patmat.MatchTreeMaking with scala.tools.nsc.transform.patmat.MatchCodeGen with scala.tools.nsc.transform.patmat.MatchCps with scala.tools.nsc.transform.patmat.ScalaLogic with scala.tools.nsc.transform.patmat.Solving with scala.tools.nsc.transform.patmat.MatchAnalysis with scala.tools.nsc.transform.patmat.MatchOptimization with scala.tools.nsc.transform.patmat.MatchWarnings with scala.tools.nsc.transform.patmat.ScalacPatternExpanders" id="scala.tools.nsc.transform.patmat;PatternMatching">PatternMatching</a> extends <a href="../Transform.scala.html#scala.tools.nsc.transform;Transform" title="scala.tools.nsc.transform.Transform">Transform</a>
                      with <a href="../TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a>
                      with <a href="#scala.tools.nsc.transform.patmat;Debugging" title="scala.tools.nsc.transform.patmat.Debugging">Debugging</a>
                      with <a href="#scala.tools.nsc.transform.patmat;Interface" title="scala.tools.nsc.transform.patmat.Interface">Interface</a>
                      with <a href="MatchTranslation.scala.html#scala.tools.nsc.transform.patmat;MatchTranslation" title="scala.tools.nsc.transform.patmat.MatchTranslation">MatchTranslation</a>
                      with <a href="MatchTreeMaking.scala.html#scala.tools.nsc.transform.patmat;MatchTreeMaking" title="scala.tools.nsc.transform.patmat.MatchTreeMaking">MatchTreeMaking</a>
                      with <a href="MatchCodeGen.scala.html#scala.tools.nsc.transform.patmat;MatchCodeGen" title="scala.tools.nsc.transform.patmat.MatchCodeGen">MatchCodeGen</a>
                      with <a href="MatchCps.scala.html#scala.tools.nsc.transform.patmat;MatchCps" title="scala.tools.nsc.transform.patmat.MatchCps">MatchCps</a>
                      with <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;ScalaLogic" title="scala.tools.nsc.transform.patmat.ScalaLogic">ScalaLogic</a>
                      with <a href="Solving.scala.html#scala.tools.nsc.transform.patmat;Solving" title="scala.tools.nsc.transform.patmat.Solving">Solving</a>
                      with <a href="MatchAnalysis.scala.html#scala.tools.nsc.transform.patmat;MatchAnalysis" title="scala.tools.nsc.transform.patmat.MatchAnalysis">MatchAnalysis</a>
                      with <a href="MatchOptimization.scala.html#scala.tools.nsc.transform.patmat;MatchOptimization" title="scala.tools.nsc.transform.patmat.MatchOptimization">MatchOptimization</a>
                      with <a href="MatchWarnings.scala.html#scala.tools.nsc.transform.patmat;MatchWarnings" title="scala.tools.nsc.transform.patmat.MatchWarnings">MatchWarnings</a>
                      with <a href="ScalacPatternExpanders.scala.html#scala.tools.nsc.transform.patmat;ScalacPatternExpanders" title="scala.tools.nsc.transform.patmat.ScalacPatternExpanders">ScalacPatternExpanders</a> <span class="delimiter">{</span>
  import <a href="ScalacPatternExpanders.scala.html#scala.tools.nsc.transform.patmat;ScalacPatternExpanders.global" title="=&gt; scala.tools.nsc.Global">global</a>._

  val <a title="String" id="scala.tools.nsc.transform.patmat;PatternMatching.phaseName">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;patmat&quot;)" class="string">&quot;patmat&quot;</span>

  def <a title="(unit: PatternMatching.this.global.CompilationUnit)PatternMatching.this.global.Transformer" id="scala.tools.nsc.transform.patmat;PatternMatching.newTransformer">newTransformer</a><span class="delimiter">(</span><a title="PatternMatching.this.global.CompilationUnit" id="scala.tools.nsc.transform.patmat;PatternMatching.newTransformer.unit">unit</a>: <a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="PatternMatching.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="PatternMatching.this.global.Transformer">Transformer</a> = new <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer" title="PatternMatching.this.MatchTransformer">MatchTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching.newTransformer.unit" title="PatternMatching.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  class <a title="class MatchTransformer extends PatternMatching.this.TypingTransformer" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer">MatchTransformer</a><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer" title="PatternMatching.this.MatchTransformer" class="delimiter">(</a><a title="PatternMatching.this.global.CompilationUnit" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.unit">unit</a>: <a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="PatternMatching.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="../TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer" title="PatternMatching.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.unit" title="PatternMatching.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    override def <a title="(tree: PatternMatching.this.global.Tree)PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform">transform</a><span class="delimiter">(</span><a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree">tree</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="PatternMatching.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="PatternMatching.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a> match <span class="delimiter">{</span>
      case Match<span class="delimiter">(</span><a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.sel">sel</a>, <a title="List[PatternMatching.this.global.CaseDef]" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.cases">cases</a><span class="delimiter">)</span> =&gt;
        val <a title="PatternMatching.this.global.Type" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.origTp">origTp</a> = <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; PatternMatching.this.global.Type">tpe</a>
        <span class="comment">// setType origTp intended for CPS -- TODO: is it necessary?</span>
        val <a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.translated">translated</a> = <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.translator" title="=&gt; PatternMatching.this.MatchTranslator with PatternMatching.this.CodegenCore">translator</a>.<a href="MatchTranslation.scala.html#scala.tools.nsc.transform.patmat;MatchTranslation;MatchTranslator.translateMatch" title="(match_: PatternMatching.this.global.Match)PatternMatching.this.global.Tree">translateMatch</a><span class="delimiter">(</span><a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; PatternMatching.this.global.TreeCopier">treeCopy</a>.<a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Match" title="(tree: PatternMatching.this.global.Tree, selector: PatternMatching.this.global.Tree, cases: List[PatternMatching.this.global.CaseDef])PatternMatching.this.global.Match">Match</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform" title="(tree: PatternMatching.this.global.Tree)PatternMatching.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.sel" title="PatternMatching.this.global.Tree">sel</a><span class="delimiter">)</span>, <a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[PatternMatching.this.global.Tree])List[PatternMatching.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.cases" title="List[PatternMatching.this.global.CaseDef]">cases</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[PatternMatching.this.global.CaseDef]" class="delimiter">[</span><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[PatternMatching.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
        try <span class="delimiter">{</span>
          <a href="../TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; PatternMatching.this.global.analyzer.Typer">localTyper</a>.<a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: PatternMatching.this.global.analyzer.global.Tree)PatternMatching.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.translated" title="PatternMatching.this.global.Tree">translated</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: PatternMatching.this.global.analyzer.global.Type)PatternMatching.this.global.analyzer.global.Tree">setType</a> <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.origTp" title="PatternMatching.this.global.Type">origTp</a>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <a title="scala.reflect.internal.Types#TypeError" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.x">x</a>: <span class="delimiter">(</span>Types#<a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError" title="scala.reflect.internal.Types#TypeError">TypeError</a><span class="delimiter">)</span> =&gt;
            <span class="comment">// TODO: this should never happen; error should've been reported during type checking</span>
            <a href="../../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; PatternMatching.this.global.Position">pos</a>, <span title="String(&quot;error during expansion of this match (this is a scalac bug).\nThe underlying error was: &quot;)" class="string">&quot;error during expansion of this match (this is a scalac bug).\nThe underlying error was: &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.x" title="scala.reflect.internal.Types#TypeError">x</a>.<a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError.msg" title="=&gt; String">msg</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.translated" title="PatternMatching.this.global.Tree">translated</a>
        <span class="delimiter">}</span>
      case Try<span class="delimiter">(</span><a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.block">block</a>, <a title="List[PatternMatching.this.global.CaseDef]" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.catches">catches</a>, <a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.finalizer">finalizer</a><span class="delimiter">)</span> =&gt;
        <a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; PatternMatching.this.global.TreeCopier">treeCopy</a>.<a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: PatternMatching.this.global.Tree, block: PatternMatching.this.global.Tree, catches: List[PatternMatching.this.global.CaseDef], finalizer: PatternMatching.this.global.Tree)PatternMatching.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform" title="(tree: PatternMatching.this.global.Tree)PatternMatching.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.block" title="PatternMatching.this.global.Tree">block</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.translator" title="=&gt; PatternMatching.this.MatchTranslator with PatternMatching.this.CodegenCore">translator</a>.<a href="MatchTranslation.scala.html#scala.tools.nsc.transform.patmat;MatchTranslation;MatchTranslator.translateTry" title="(caseDefs: List[PatternMatching.this.global.CaseDef], pt: PatternMatching.this.global.Type, pos: PatternMatching.this.global.Position)List[PatternMatching.this.global.CaseDef]">translateTry</a><span class="delimiter">(</span><a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[PatternMatching.this.global.Tree])List[PatternMatching.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.catches" title="List[PatternMatching.this.global.CaseDef]">catches</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[PatternMatching.this.global.CaseDef]" class="delimiter">[</span><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[PatternMatching.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; PatternMatching.this.global.Type">tpe</a>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; PatternMatching.this.global.Position">pos</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform" title="(tree: PatternMatching.this.global.Tree)PatternMatching.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.finalizer" title="PatternMatching.this.global.Tree">finalizer</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case _ =&gt; super.<a href="../TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: PatternMatching.this.global.Tree)PatternMatching.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.transform.tree" title="PatternMatching.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// TODO: only instantiate new match translator when localTyper has changed</span>
    <span class="comment">// override def atOwner[A](tree: Tree, owner: Symbol)(trans: =&gt; A): A</span>
    <span class="comment">// as this is the only time TypingTransformer changes it</span>
    def <a title="=&gt; PatternMatching.this.MatchTranslator with PatternMatching.this.CodegenCore" id="scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer.translator">translator</a>: <a href="#scala.tools.nsc.transform.patmat;PatternMatching;MatchTransformer;<refinement>" title="&lt;refinement of PatternMatching.this.MatchTranslator with PatternMatching.this.CodegenCore&gt; extends PatternMatching.this.MatchTranslator with PatternMatching.this.CodegenCore">MatchTranslator</a> with CodegenCore = <span class="delimiter">{</span>
      new <a href="#scala.tools.nsc.transform.patmat;PatternMatching;OptimizingMatchTranslator" title="PatternMatching.this.OptimizingMatchTranslator">OptimizingMatchTranslator</a><span class="delimiter">(</span><a href="../TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; PatternMatching.this.global.analyzer.Typer">localTyper</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  class <a title="class PureMatchTranslator extends AnyRef with PatternMatching.this.MatchTranslator with PatternMatching.this.PureCodegen" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator">PureMatchTranslator</a><a href="#scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator" title="PatternMatching.this.PureMatchTranslator" class="delimiter">(</a>val <a title="PatternMatching.this.global.analyzer.Typer" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.typer">typer</a>: analyzer.<a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="PatternMatching.this.global.analyzer.Typer">Typer</a>, val <a title="PatternMatching.this.global.Tree" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.matchStrategy">matchStrategy</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="PatternMatching.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="MatchTranslation.scala.html#scala.tools.nsc.transform.patmat;MatchTranslation;MatchTranslator" title="PatternMatching.this.MatchTranslator">MatchTranslator</a> with <a href="MatchCodeGen.scala.html#scala.tools.nsc.transform.patmat;MatchCodeGen;PureCodegen" title="PatternMatching.this.PureCodegen">PureCodegen</a> <span class="delimiter">{</span>
    def <a title="(prevBinder: PatternMatching.this.global.Symbol, cases: List[List[PureMatchTranslator.this.TreeMaker]], pt: PatternMatching.this.global.Type)(List[List[PureMatchTranslator.this.TreeMaker]], scala.collection.immutable.Nil.type)" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.optimizeCases">optimizeCases</a><span class="delimiter">(</span><a title="PatternMatching.this.global.Symbol" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.optimizeCases.prevBinder">prevBinder</a>: <a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="PatternMatching.this.global.Symbol">Symbol</a>, <a title="List[List[PureMatchTranslator.this.TreeMaker]]" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.optimizeCases.cases">cases</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[List[PureMatchTranslator.this.TreeMaker]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>TreeMaker<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="PatternMatching.this.global.Type" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.optimizeCases.pt">pt</a>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="PatternMatching.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[List[PureMatchTranslator.this.TreeMaker]], _2: scala.collection.immutable.Nil.type)(List[List[PureMatchTranslator.this.TreeMaker]], scala.collection.immutable.Nil.type)" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.optimizeCases.cases" title="List[List[PureMatchTranslator.this.TreeMaker]]">cases</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
    def <a title="(prevBinder: PatternMatching.this.global.Symbol, cases: List[List[PureMatchTranslator.this.TreeMaker]], pt: PatternMatching.this.global.Type, suppression: PatternMatching.this.Suppression)Unit" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.analyzeCases">analyzeCases</a><span class="delimiter">(</span><a title="PatternMatching.this.global.Symbol" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.analyzeCases.prevBinder">prevBinder</a>: <a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="PatternMatching.this.global.Symbol">Symbol</a>, <a title="List[List[PureMatchTranslator.this.TreeMaker]]" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.analyzeCases.cases">cases</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[List[PureMatchTranslator.this.TreeMaker]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>TreeMaker<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="PatternMatching.this.global.Type" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.analyzeCases.pt">pt</a>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="PatternMatching.this.global.Type">Type</a>, <a title="PatternMatching.this.Suppression" id="scala.tools.nsc.transform.patmat;PatternMatching;PureMatchTranslator.analyzeCases.suppression">suppression</a>: <a href="MatchTreeMaking.scala.html#scala.tools.nsc.transform.patmat;MatchTreeMaking;Suppression" title="PatternMatching.this.Suppression">Suppression</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
  <span class="delimiter">}</span>

  class <a title="class OptimizingMatchTranslator extends AnyRef with PatternMatching.this.MatchTranslator with PatternMatching.this.MatchOptimizer with PatternMatching.this.MatchAnalyzer with PatternMatching.this.Solver" id="scala.tools.nsc.transform.patmat;PatternMatching;OptimizingMatchTranslator">OptimizingMatchTranslator</a><a href="#scala.tools.nsc.transform.patmat;PatternMatching;OptimizingMatchTranslator" title="PatternMatching.this.OptimizingMatchTranslator" class="delimiter">(</a>val <a title="PatternMatching.this.global.analyzer.Typer" id="scala.tools.nsc.transform.patmat;PatternMatching;OptimizingMatchTranslator.typer">typer</a>: analyzer.<a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="PatternMatching.this.global.analyzer.Typer">Typer</a><span class="delimiter">)</span> extends <a href="MatchTranslation.scala.html#scala.tools.nsc.transform.patmat;MatchTranslation;MatchTranslator" title="PatternMatching.this.MatchTranslator">MatchTranslator</a>
                                                             with <a href="MatchOptimization.scala.html#scala.tools.nsc.transform.patmat;MatchOptimization;MatchOptimizer" title="PatternMatching.this.MatchOptimizer">MatchOptimizer</a>
                                                             with <a href="MatchAnalysis.scala.html#scala.tools.nsc.transform.patmat;MatchAnalysis;MatchAnalyzer" title="PatternMatching.this.MatchAnalyzer">MatchAnalyzer</a>
                                                             with <a href="Solving.scala.html#scala.tools.nsc.transform.patmat;Solving;Solver" title="PatternMatching.this.Solver">Solver</a>
<span class="delimiter">}</span>

trait <a title="trait Debugging extends AnyRef" id="scala.tools.nsc.transform.patmat;Debugging">Debugging</a> <a href="../../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  val <a title="=&gt; scala.tools.nsc.Global" id="scala.tools.nsc.transform.patmat;Debugging.global">global</a>: <a href="../../Global.scala.html#scala.tools.nsc;Global" title="scala.tools.nsc.Global">Global</a>

  <span class="comment">// TODO: the inliner fails to inline the closures to debug.patmat unless the method is nested in an object</span>
  object <a title="Debugging.this.debug.type" id="scala.tools.nsc.transform.patmat;Debugging.debug">debug</a> <a href="#scala.tools.nsc.transform.patmat;Debugging.debug" title="Debugging.this.debug.type" class="delimiter">{</a>
    val <a title="Boolean" id="scala.tools.nsc.transform.patmat;Debugging.debug.printPatmat">printPatmat</a> = <a href="#scala.tools.nsc.transform.patmat;Debugging.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.Ypatmatdebug" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Ypatmatdebug</a>.<a href="../../settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;BooleanSetting.value" title="=&gt; Boolean">value</a>
    @inline final def <a title="(s: =&gt; String)Unit" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmat">patmat</a><span class="delimiter">(</span><a title="=&gt; String" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmat.s">s</a>: =&gt; String<span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Debugging.debug.printPatmat" title="=&gt; Boolean">printPatmat</a><span class="delimiter">)</span> <a href="../../../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../../../Console.scala.html#scala.Console.err" title="=&gt; java.io.PrintStream">err</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmat.s" title="=&gt; String">s</a><span class="delimiter">)</span>
    @inline final def <a title="[T](s: =&gt; String)(result: T)T" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult">patmatResult</a><span class="delimiter">[</span><a title="" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; String" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult.s">s</a>: =&gt; String<span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult.result">result</a>: <a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult;T" title="T">T</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult;T" title="T">T</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Debugging.debug.printPatmat" title="=&gt; Boolean">printPatmat</a><span class="delimiter">)</span> <a href="../../../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../../../Console.scala.html#scala.Console.err" title="=&gt; java.io.PrintStream">err</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult.s" title="=&gt; String">s</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult.result" title="T">result</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform.patmat;Debugging.debug.patmatResult.result" title="T">result</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

trait <a title="trait Interface extends AnyRef with scala.tools.nsc.ast.TreeDSL" id="scala.tools.nsc.transform.patmat;Interface">Interface</a> extends ast.<a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  import <a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../Global.scala.html#scala.tools.nsc;Global.analyzer" title="=&gt; scala.tools.nsc.typechecker.Analyzer{val global: Interface.this.global.type}">analyzer</a>.Typer

  <span class="comment">// 2.10/2.11 compatibility</span>
  protected final def <a title="(tp: Interface.this.global.Type)Interface.this.global.Type" id="scala.tools.nsc.transform.patmat;Interface.dealiasWiden">dealiasWiden</a><span class="delimiter">(</span><a title="Interface.this.global.Type" id="scala.tools.nsc.transform.patmat;Interface.dealiasWiden.tp">tp</a>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Interface.this.global.Type">Type</a><span class="delimiter">)</span>   = <a href="#scala.tools.nsc.transform.patmat;Interface.dealiasWiden.tp" title="Interface.this.global.Type">tp</a>.<a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.dealiasWiden" title="=&gt; Interface.this.global.Type">dealiasWiden</a>
  protected final def <a title="=&gt; Interface.this.global.Literal" id="scala.tools.nsc.transform.patmat;Interface.mkTRUE">mkTRUE</a>                   = <a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE" title="Interface.this.CODE.type">CODE</a>.<a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.TRUE" title="=&gt; Interface.this.global.Literal">TRUE</a>
  protected final def <a title="=&gt; Interface.this.global.Literal" id="scala.tools.nsc.transform.patmat;Interface.mkFALSE">mkFALSE</a>                  = <a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE" title="Interface.this.CODE.type">CODE</a>.<a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.FALSE" title="=&gt; Interface.this.global.Literal">FALSE</a>
  protected final def <a title="(p: Interface.this.global.Tree)Boolean" id="scala.tools.nsc.transform.patmat;Interface.hasStableSymbol">hasStableSymbol</a><span class="delimiter">(</span><a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface.hasStableSymbol.p">p</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform.patmat;Interface.hasStableSymbol.p" title="Interface.this.global.Tree">p</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.hasSymbolField" title="=&gt; Boolean">hasSymbolField</a> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform.patmat;Interface.hasStableSymbol.p" title="Interface.this.global.Tree">p</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Interface.this.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isStable" title="=&gt; Boolean">isStable</a>

  object <a title="Interface.this.vpmName.type" id="scala.tools.nsc.transform.patmat;Interface.vpmName">vpmName</a> <a href="#scala.tools.nsc.transform.patmat;Interface.vpmName" title="Interface.this.vpmName.type" class="delimiter">{</a>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.one">one</a>       = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;one&quot;)" class="string">&quot;one&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.flatMap">flatMap</a>   = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;flatMap&quot;)" class="string">&quot;flatMap&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.get">get</a>       = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;get&quot;)" class="string">&quot;get&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.guard">guard</a>     = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;guard&quot;)" class="string">&quot;guard&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.isEmpty">isEmpty</a>   = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;isEmpty&quot;)" class="string">&quot;isEmpty&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.orElse">orElse</a>    = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;orElse&quot;)" class="string">&quot;orElse&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.outer">outer</a>     = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;&lt;outer&gt;&quot;)" class="string">&quot;&lt;outer&gt;&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.runOrElse">runOrElse</a> = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;runOrElse&quot;)" class="string">&quot;runOrElse&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.zero">zero</a>      = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;zero&quot;)" class="string">&quot;zero&quot;</span><span class="delimiter">)</span>
    val <a title="Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName._match">_match</a>    = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;__match&quot;)" class="string">&quot;__match&quot;</span><span class="delimiter">)</span> <span class="comment">// don't call the val __match, since that will trigger virtual pattern matching...</span>

    def <a title="(str: String, i: Int)Interface.this.global.TermName" id="scala.tools.nsc.transform.patmat;Interface.vpmName.counted">counted</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.transform.patmat;Interface.vpmName.counted.str">str</a>: <span title="String">String</span>, <a title="Int" id="scala.tools.nsc.transform.patmat;Interface.vpmName.counted.i">i</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = <a href="../../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Interface.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface.vpmName.counted.str" title="String">str</a> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Interface.vpmName.counted.i" title="Int">i</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment">// talking to userland</span>
<span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>

  <span class="comment">/** Interface with user-defined match monad?
   * if there's a &lt;code&gt;__match&lt;/code&gt; in scope, we use this as the match strategy, assuming it conforms to MatchStrategy as defined below:

       {{{
       type Matcher[P[_], M[+_], A] = {
         def flatMap[B](f: P[A] =&gt; M[B]): M[B]
         def orElse[B &gt;: A](alternative: =&gt; M[B]): M[B]
       }

       abstract class MatchStrategy[P[_], M[+_]] {
         // runs the matcher on the given input
         def runOrElse[T, U](in: P[T])(matcher: P[T] =&gt; M[U]): P[U]

         def zero: M[Nothing]
         def one[T](x: P[T]): M[T]
         def guard[T](cond: P[Boolean], then: =&gt; P[T]): M[T]
       }
       }}}

   * P and M are derived from one's signature (`def one[T](x: P[T]): M[T]`)


   * if no &lt;code&gt;__match&lt;/code&gt; is found, we assume the following implementation (and generate optimized code accordingly)

       {{{
       object __match extends MatchStrategy[({type Id[x] = x})#Id, Option] {
         def zero = None
         def one[T](x: T) = Some(x)
         // NOTE: guard's return type must be of the shape M[T], where M is the monad in which the pattern match should be interpreted
         def guard[T](cond: Boolean, then: =&gt; T): Option[T] = if(cond) Some(then) else None
         def runOrElse[T, U](x: T)(f: T =&gt; Option[U]): U = f(x) getOrElse (throw new MatchError(x))
       }
       }}}

   */</span>
  trait <a title="trait MatchMonadInterface extends AnyRef" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface">MatchMonadInterface</a> <a href="../../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
    val <a title="=&gt; Interface.this.global.analyzer.Typer" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.typer">typer</a>: <a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Interface.this.global.analyzer.Typer">Typer</a>
    val <a title="Interface.this.global.analyzer.global.Symbol" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.matchOwner">matchOwner</a> = <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.typer" title="=&gt; Interface.this.global.analyzer.Typer">typer</a>.<a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Interface.this.global.analyzer.Context">context</a>.<a href="../../typechecker/Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.owner" title="=&gt; Interface.this.global.analyzer.global.Symbol">owner</a>
    def <a title="(tp: Interface.this.global.Type)Interface.this.global.Type" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.pureType">pureType</a><span class="delimiter">(</span><a title="Interface.this.global.Type" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.pureType.tp">tp</a>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Interface.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Interface.this.global.Type">Type</a> = <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.pureType.tp" title="Interface.this.global.Type">tp</a>

    def <a title="(pos: Interface.this.global.Position)Unit" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportUnreachable">reportUnreachable</a><span class="delimiter">(</span><a title="Interface.this.global.Position" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportUnreachable.pos">pos</a>: <a href="../../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Interface.this.global.Position">Position</a><span class="delimiter">)</span> = <a href="../../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.warning" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportUnreachable.pos" title="Interface.this.global.Position">pos</a>, <span title="String(&quot;unreachable code&quot;)" class="string">&quot;unreachable code&quot;</span><span class="delimiter">)</span>
    def <a title="(pos: Interface.this.global.Position, counterExamples: List[String])Unit" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases">reportMissingCases</a><span class="delimiter">(</span><a title="Interface.this.global.Position" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.pos">pos</a>: <a href="../../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Interface.this.global.Position">Position</a>, <a title="List[String]" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.counterExamples">counterExamples</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="String" id="scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.ceString">ceString</a> =
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.counterExamples" title="List[String]">counterExamples</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[String]">tail</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;input: &quot;)" class="string">&quot;input: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.counterExamples" title="List[String]">counterExamples</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; String">head</a>
        else <span title="String(&quot;inputs: &quot;)" class="string">&quot;inputs: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.counterExamples" title="List[String]">counterExamples</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>

      <a href="../../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.warning" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.pos" title="Interface.this.global.Position">pos</a>, <span title="String(&quot;match may not be exhaustive.\nIt would fail on the following &quot;)" class="string">&quot;match may not be exhaustive.\nIt would fail on the following &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.reportMissingCases.ceString" title="String">ceString</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


<span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span class="comment">// substitution</span>
<span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  trait <a title="trait TypedSubstitution extends AnyRef with Interface.this.MatchMonadInterface" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution">TypedSubstitution</a> extends <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface" title="Interface.this.MatchMonadInterface">MatchMonadInterface</a> <span class="delimiter">{</span>
    object <a title="TypedSubstitution.this.Substitution.type" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution">Substitution</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution" title="TypedSubstitution.this.Substitution.type" class="delimiter">{</a>
      def <a title="(from: Interface.this.global.Symbol, to: Interface.this.global.Tree)TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(fc5a79d061)">apply</a><span class="delimiter">(</span><a title="Interface.this.global.Symbol" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(fc5a79d061).from">from</a>: <a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Interface.this.global.Symbol">Symbol</a>, <a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(fc5a79d061).to">to</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">(</span><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Interface.this.global.Symbol*)List[Interface.this.global.Symbol]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(fc5a79d061).from" title="Interface.this.global.Symbol">from</a><span class="delimiter">)</span>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Interface.this.global.Tree*)List[Interface.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(fc5a79d061).to" title="Interface.this.global.Tree">to</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// requires sameLength(from, to)</span>
      def <a title="(from: List[Interface.this.global.Symbol], to: List[Interface.this.global.Tree])TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98)">apply</a><span class="delimiter">(</span><a title="List[Interface.this.global.Symbol]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98).from">from</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="List[Interface.this.global.Tree]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98).to">to</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> =
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98).from" title="List[Interface.this.global.Symbol]">from</a> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> new <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98).from" title="List[Interface.this.global.Symbol]">from</a>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.Substitution.apply(3d78526d98).to" title="List[Interface.this.global.Tree]">to</a><span class="delimiter">)</span> else <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution" title="TypedSubstitution.this.EmptySubstitution.type">EmptySubstitution</a>
    <span class="delimiter">}</span>

    class <a title="class Substitution extends AnyRef" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution">Substitution</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution" class="delimiter">(</a>val <a title="List[Interface.this.global.Symbol]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from">from</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, val <a title="List[Interface.this.global.Tree]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.to">to</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      import <a href="../../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.global" title="=&gt; scala.tools.nsc.Global">global</a>.<span class="delimiter">{</span>Transformer, Ident, NoType<span class="delimiter">}</span>

      <span class="comment">// We must explicitly type the trees that we replace inside some other tree, since the latter may already have been typed,</span>
      <span class="comment">// and will thus not be retyped. This means we might end up with untyped subtrees inside bigger, typed trees.</span>
      def <a title="(tree: Interface.this.global.Tree)Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply">apply</a><span class="delimiter">(</span><a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.tree">tree</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
        <span class="comment">// according to -Ystatistics 10% of translateMatch's time is spent in this method...</span>
        <span class="comment">// since about half of the typedSubst's end up being no-ops, the check below shaves off 5% of the time spent in typedSubst</span>
        if <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.tree" title="Interface.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.exists" title="(p: Interface.this.global.Tree =&gt; Boolean)Boolean">exists</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.$anonfun.x0$1" title="Boolean" class="delimiter">{</a> case <a title="Interface.this.global.Ident" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.$anonfun.i">i</a>@Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: Interface.this.global.Symbol)Boolean">contains</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.$anonfun.i" title="Interface.this.global.Ident">i</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Interface.this.global.Symbol">symbol</a> case _ =&gt; false<span class="delimiter">}</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.tree" title="Interface.this.global.Tree">tree</a>
        else <span class="delimiter">(</span>new <a href="../../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="&lt;$anon: Interface.this.global.Transformer&gt; extends Interface.this.global.Transformer" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon">Transformer</a> <span class="delimiter">{</span>
          private def <a title="(to: Interface.this.global.Tree, origTp: Interface.this.global.Type)Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped">typedIfOrigTyped</a><span class="delimiter">(</span><a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.to">to</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a>, <a title="Interface.this.global.Type" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.origTp">origTp</a>: <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Interface.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a> =
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.origTp" title="Interface.this.global.Type">origTp</a> <span title="(x$1: Any)Boolean">==</span> null <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.origTp" title="Interface.this.global.Type">origTp</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="Interface.this.global.NoType.type">NoType</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.to" title="Interface.this.global.Tree">to</a>
            <span class="comment">// important: only type when actually substing and when original tree was typed</span>
            <span class="comment">// (don't need to use origTp as the expected type, though, and can't always do this anyway due to unknown type params stemming from polymorphic extractors)</span>
            else <a href="#scala.tools.nsc.transform.patmat;Interface;MatchMonadInterface.typer" title="=&gt; Interface.this.global.analyzer.Typer">typer</a>.<a href="../../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: Interface.this.global.analyzer.global.Tree)Interface.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped.to" title="Interface.this.global.Tree">to</a><span class="delimiter">)</span>

          override def <a title="(tree: Interface.this.global.Tree)Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform">transform</a><span class="delimiter">(</span><a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree">tree</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
            def <a title="(from: List[Interface.this.global.Symbol], to: List[Interface.this.global.Tree])Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst">subst</a><span class="delimiter">(</span><a title="List[Interface.this.global.Symbol]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.from">from</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="List[Interface.this.global.Tree]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.to">to</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Interface.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a> =
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.from" title="List[Interface.this.global.Symbol]">from</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a>
              else if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Interface.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.from" title="List[Interface.this.global.Symbol]">from</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Interface.this.global.Symbol">head</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.typedIfOrigTyped" title="(to: Interface.this.global.Tree, origTp: Interface.this.global.Type)Interface.this.global.Tree">typedIfOrigTyped</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.to" title="List[Interface.this.global.Tree]">to</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Interface.this.global.Tree">head</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.shallowDuplicate" title="=&gt; Interface.this.global.Tree">shallowDuplicate</a>.<a href="../../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Interface.this.global.Tree">setPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Interface.this.global.Position">pos</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Interface.this.global.Type">tpe</a><span class="delimiter">)</span>
              else <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst" title="(from: List[Interface.this.global.Symbol], to: List[Interface.this.global.Tree])Interface.this.global.Tree">subst</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.from" title="List[Interface.this.global.Symbol]">from</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[Interface.this.global.Symbol]">tail</a>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst.to" title="List[Interface.this.global.Tree]">to</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[Interface.this.global.Tree]">tail</a><span class="delimiter">)</span>

            <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a> match <span class="delimiter">{</span>
              case Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.subst" title="(from: List[Interface.this.global.Symbol], to: List[Interface.this.global.Tree])Interface.this.global.Tree">subst</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.to" title="=&gt; List[Interface.this.global.Tree]">to</a><span class="delimiter">)</span>
              case _        =&gt; super.<a href="../../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: Interface.this.global.Tree)Interface.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform.tree" title="Interface.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply;$anon.transform" title="(tree: Interface.this.global.Tree)Interface.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply.tree" title="Interface.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>


      <span class="comment">// the substitution that chains `other` before `this` substitution</span>
      <span class="comment">// forall t: Tree. this(other(t)) == (this &gt;&gt; other)(t)</span>
      def <a title="(other: TypedSubstitution.this.Substitution)TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>">&gt;&gt;</a><span class="delimiter">(</span><a title="TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.other">other</a>: <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a> = <span class="delimiter">{</span>
        val <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[Interface.this.global.Symbol], _2: List[Interface.this.global.Tree])(List[Interface.this.global.Symbol], List[Interface.this.global.Tree])" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#scala;Tuple2._1" title="List[Interface.this.global.Symbol]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.fromFiltered">fromFiltered</a>, <a href="../../../../Tuple2.scala.html#scala;Tuple2._2" title="List[Interface.this.global.Tree]" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.toFiltered">toFiltered</a><span class="delimiter">)</span> = <a href="../../../../Predef.scala.html#scala.Predef.tuple2ToZippedOps" title="(x: (List[Interface.this.global.Symbol], List[Interface.this.global.Tree]))runtime.Tuple2Zipped.Ops[List[Interface.this.global.Symbol],List[Interface.this.global.Tree]]" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.to" title="=&gt; List[Interface.this.global.Tree]">to</a><span class="delimiter">)</span>.<a href="../../../../runtime/Tuple2Zipped.scala.html#scala.runtime.Tuple2Zipped;Ops.zipped" title="(implicit w1: List[Interface.this.global.Symbol] =&gt; scala.collection.TraversableLike[Interface.this.global.Symbol,List[Interface.this.global.Symbol]], implicit w2: List[Interface.this.global.Tree] =&gt; scala.collection.IterableLike[Interface.this.global.Tree,List[Interface.this.global.Tree]])scala.runtime.Tuple2Zipped[Interface.this.global.Symbol,List[Interface.this.global.Symbol],Interface.this.global.Tree,List[Interface.this.global.Tree]]">zipped</a> <a href="../../../../runtime/Tuple2Zipped.scala.html#scala.runtime;Tuple2Zipped.filter" title="(List[Interface.this.global.Symbol], List[Interface.this.global.Tree])">filter</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="Interface.this.global.Symbol" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.x$1.$anonfun.f">f</a>, <a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.x$1.$anonfun.t">t</a><span class="delimiter">)</span> =&gt;  <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.other" title="TypedSubstitution.this.Substitution">other</a>.<a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: Interface.this.global.Symbol)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.x$1.$anonfun.f" title="Interface.this.global.Symbol">f</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        new <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.other" title="TypedSubstitution.this.Substitution">other</a>.<a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Interface.this.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[Interface.this.global.Symbol],Interface.this.global.Symbol,List[Interface.this.global.Symbol]])List[Interface.this.global.Symbol]">++</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.fromFiltered" title="List[Interface.this.global.Symbol]">fromFiltered</a>, <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.other" title="TypedSubstitution.this.Substitution">other</a>.<a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.to" title="=&gt; List[Interface.this.global.Tree]">to</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Interface.this.global.Tree =&gt; Interface.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Interface.this.global.Tree],Interface.this.global.Tree,List[Interface.this.global.Tree]])List[Interface.this.global.Tree]">map</a><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Interface.this.global.Tree,List[Interface.this.global.Tree]]" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.apply" title="(tree: Interface.this.global.Tree)Interface.this.global.Tree">apply</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Interface.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Interface.this.global.Tree],Interface.this.global.Tree,List[Interface.this.global.Tree]])List[Interface.this.global.Tree]">++</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.>>.toFiltered" title="List[Interface.this.global.Tree]">toFiltered</a><span class="delimiter">)</span> <span class="comment">// a quick benchmarking run indicates the `.map(apply)` is not too costly</span>
      <span class="delimiter">}</span>
      override def <a title="()String" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.toString">toString</a> = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.from" title="=&gt; List[Interface.this.global.Symbol]">from</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Interface.this.global.Symbol =&gt; Interface.this.global.Symbol#NameType)(implicit bf: scala.collection.generic.CanBuildFrom[List[Interface.this.global.Symbol],Interface.this.global.Symbol#NameType,List[Interface.this.global.Symbol#NameType]])List[Interface.this.global.Symbol#NameType]">map</a><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Interface.this.global.Symbol#NameType,List[Interface.this.global.Symbol#NameType]]" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.toString.$anonfun.x$2" title="Interface.this.global.Symbol">_</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; x$2.NameType">name</a><span class="delimiter">)</span> <a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Interface.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Interface.this.global.Symbol#NameType],(Interface.this.global.Symbol#NameType, Interface.this.global.Tree),List[(Interface.this.global.Symbol#NameType, Interface.this.global.Tree)]])List[(Interface.this.global.Symbol#NameType, Interface.this.global.Tree)]">zip</a> <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution.to" title="=&gt; List[Interface.this.global.Tree]">to</a><span class="delimiter">)</span> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(581ef61a02)" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;Substitution(&quot;)" class="string">&quot;Substitution(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    object <a title="TypedSubstitution.this.EmptySubstitution.type" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution">EmptySubstitution</a> extends <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">(</span><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      override def <a title="(tree: Interface.this.global.Tree)Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.apply">apply</a><span class="delimiter">(</span><a title="Interface.this.global.Tree" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.apply.tree">tree</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Interface.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.apply.tree" title="Interface.this.global.Tree">tree</a>
      override def <a title="(other: TypedSubstitution.this.Substitution)TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.>>">&gt;&gt;</a><span class="delimiter">(</span><a title="TypedSubstitution.this.Substitution" id="scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.>>.other">other</a>: <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution;Substitution" title="TypedSubstitution.this.Substitution">Substitution</a> = <a href="#scala.tools.nsc.transform.patmat;Interface;TypedSubstitution.EmptySubstitution.>>.other" title="TypedSubstitution.this.Substitution">other</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="scala.tools.nsc.transform.patmat.PatternMatchingStats.type" id="scala.tools.nsc.transform.patmat.PatternMatchingStats">PatternMatchingStats</a> <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats" title="scala.tools.nsc.transform.patmat.PatternMatchingStats.type" class="delimiter">{</a>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos">patmatNanos</a>         = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newTimer" title="(prefix: String, phases: String*)scala.reflect.internal.util.Statistics.Timer">newTimer</a>     <span class="delimiter">(</span><span title="String(&quot;time spent in patmat&quot;)" class="string">&quot;time spent in patmat&quot;</span>, <span title="String(&quot;patmat&quot;)" class="string">&quot;patmat&quot;</span><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaDPLL">patmatAnaDPLL</a>       = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a>  <span class="delimiter">(</span><span title="String(&quot;  of which DPLL&quot;)" class="string">&quot;  of which DPLL&quot;</span>, <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatNanos</a><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatCNF">patmatCNF</a>           = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a>  <span class="delimiter">(</span><span title="String(&quot;  of which in CNF conversion&quot;)" class="string">&quot;  of which in CNF conversion&quot;</span>, <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatNanos</a><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.QuantMap[Int,scala.reflect.internal.util.Statistics.Counter]" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatCNFSizes">patmatCNFSizes</a>      = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newQuantMap" title="[K, V](prefix: String, phases: String*)(initValue: =&gt; V)(implicit evidence$1: V =&gt; Ordered[V])scala.reflect.internal.util.Statistics.QuantMap[K,V]">newQuantMap</a><span title="(prefix: String, phases: String*)(initValue: =&gt; scala.reflect.internal.util.Statistics.Counter)(implicit evidence$1: scala.reflect.internal.util.Statistics.Counter =&gt; Ordered[scala.reflect.internal.util.Statistics.Counter])scala.reflect.internal.util.Statistics.QuantMap[Int,scala.reflect.internal.util.Statistics.Counter]" class="delimiter">[</span><a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a>, Statistics.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics;Counter" title="scala.reflect.internal.util.Statistics.Counter">Counter</a><span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;  CNF size counts&quot;)" class="string">&quot;  CNF size counts&quot;</span>, <span title="String(&quot;patmat&quot;)" class="string">&quot;patmat&quot;</span><span class="delimiter">)</span><a href="../../../../Predef.scala.html#scala.Predef.$conforms" title="&lt;:&lt;[scala.reflect.internal.util.Statistics.Counter,scala.reflect.internal.util.Statistics.Counter]" class="delimiter">(</a><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newCounter" title="(prefix: String, phases: String*)scala.reflect.internal.util.Statistics.Counter">newCounter</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaVarEq">patmatAnaVarEq</a>      = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a>  <span class="delimiter">(</span><span title="String(&quot;  of which variable equality&quot;)" class="string">&quot;  of which variable equality&quot;</span>, <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatNanos</a><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaExhaust">patmatAnaExhaust</a>    = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a>  <span class="delimiter">(</span><span title="String(&quot;  of which in exhaustivity&quot;)" class="string">&quot;  of which in exhaustivity&quot;</span>, <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatNanos</a><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaReach">patmatAnaReach</a>      = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a>  <span class="delimiter">(</span><span title="String(&quot;  of which in unreachability&quot;)" class="string">&quot;  of which in unreachability&quot;</span>, <a href="#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatNanos</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
