<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/transform/patmat/Solving.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 *
 * Copyright 2011-2013 LAMP/EPFL
 * @author Adriaan Moors
 */</span>

package scala.tools.nsc.transform.patmat

import scala.collection.mutable
import scala.reflect.internal.util.Statistics
import scala.<a href="../../../../language.scala.html#scala.language" title="language.type">language</a>.postfixOps
import scala.reflect.internal.util.<a href="../../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util.Collections" title="scala.reflect.internal.util.Collections.type">Collections</a>._

<span class="comment">// naive CNF translation and simple DPLL solver</span>
trait <a title="trait Solving extends AnyRef with scala.tools.nsc.transform.patmat.Logic" id="scala.tools.nsc.transform.patmat;Solving">Solving</a> extends <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic" title="scala.tools.nsc.transform.patmat.Logic">Logic</a> <span class="delimiter">{</span>
  import <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat.PatternMatchingStats" title="scala.tools.nsc.transform.patmat.PatternMatchingStats.type">PatternMatchingStats</a>._
  trait <a title="trait CNF extends AnyRef with Solving.this.PropositionalLogic" id="scala.tools.nsc.transform.patmat;Solving;CNF">CNF</a> extends <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic" title="Solving.this.PropositionalLogic">PropositionalLogic</a> <span class="delimiter">{</span>
    import scala.collection.mutable.ArrayBuffer
    type <a title="scala.collection.mutable.ArrayBuffer[CNF.this.Clause]" id="scala.tools.nsc.transform.patmat;Solving;CNF;FormulaBuilder">FormulaBuilder</a> = <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">ArrayBuffer</a><span class="delimiter">[</span>Clause<span class="delimiter">]</span>
    def <a title="=&gt; scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Set[CNF.this.Lit]]" id="scala.tools.nsc.transform.patmat;Solving;CNF.formulaBuilder">formulaBuilder</a>  = <a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.ArrayBuffer[A]">ArrayBuffer</a><span title="(elems: CNF.this.Clause*)scala.collection.mutable.ArrayBuffer[CNF.this.Clause]" class="delimiter">[</span><a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="CNF.this.Clause">Clause</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    def <a title="(init: Int)scala.collection.mutable.ArrayBuffer[CNF.this.Clause]" id="scala.tools.nsc.transform.patmat;Solving;CNF.formulaBuilderSized">formulaBuilderSized</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.transform.patmat;Solving;CNF.formulaBuilderSized.init">init</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>  = new <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">ArrayBuffer</a><span class="delimiter">[</span>Clause<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formulaBuilderSized.init" title="Int">init</a><span class="delimiter">)</span>
    def <a title="(buff: CNF.this.FormulaBuilder, f: CNF.this.Formula)Unit" id="scala.tools.nsc.transform.patmat;Solving;CNF.addFormula">addFormula</a><span class="delimiter">(</span><a title="CNF.this.FormulaBuilder" id="scala.tools.nsc.transform.patmat;Solving;CNF.addFormula.buff">buff</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.FormulaBuilder">FormulaBuilder</a>, <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.addFormula.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.addFormula.buff" title="CNF.this.FormulaBuilder">buff</a> <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.++=" title="(xs: scala.collection.TraversableOnce[CNF.this.Clause])buff.type">++=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.addFormula.f" title="CNF.this.Formula">f</a>
    def <a title="(buff: CNF.this.FormulaBuilder)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.toFormula">toFormula</a><span class="delimiter">(</span><a title="CNF.this.FormulaBuilder" id="scala.tools.nsc.transform.patmat;Solving;CNF.toFormula.buff">buff</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.FormulaBuilder">FormulaBuilder</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.toFormula.buff" title="CNF.this.FormulaBuilder">buff</a>

    <span class="comment">// CNF: a formula is a conjunction of clauses</span>
    type <a title="CNF.this.FormulaBuilder" id="scala.tools.nsc.transform.patmat;Solving;CNF;Formula">Formula</a> = <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.FormulaBuilder">FormulaBuilder</a>
    def <a title="(c: CNF.this.Clause*)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.formula">formula</a><span class="delimiter">(</span><a title="CNF.this.Clause*" id="scala.tools.nsc.transform.patmat;Solving;CNF.formula.c">c</a>: <span title="CNF.this.Clause*">Clause</span>*<span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: CNF.this.Clause*)scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">ArrayBuffer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula.c" title="CNF.this.Clause*">c</a>: _*<span class="delimiter">)</span>

    type <a title="Set[CNF.this.Lit]" id="scala.tools.nsc.transform.patmat;Solving;CNF;Clause">Clause</a>  = <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[CNF.this.Lit]">Set</a><span class="delimiter">[</span>Lit<span class="delimiter">]</span>
    <span class="comment">// a clause is a disjunction of distinct literals</span>
    def <a title="(l: CNF.this.Lit*)CNF.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;CNF.clause">clause</a><span class="delimiter">(</span><a title="CNF.this.Lit*" id="scala.tools.nsc.transform.patmat;Solving;CNF.clause.l">l</a>: <span title="CNF.this.Lit*">Lit</span>*<span class="delimiter">)</span>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="CNF.this.Clause">Clause</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause.l" title="CNF.this.Lit*">l</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="scala.collection.immutable.Set[CNF.this.Lit]">toSet</a>

    type <a title="" id="scala.tools.nsc.transform.patmat;Solving;CNF;Lit">Lit</a>
    def <a title="(sym: CNF.this.Sym, pos: Boolean)CNF.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;CNF.Lit">Lit</a><span class="delimiter">(</span><a title="CNF.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;CNF.Lit.sym">sym</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a>, <a title="Boolean" id="scala.tools.nsc.transform.patmat;Solving;CNF.Lit$default$2">pos</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true<span class="delimiter">)</span>: <a href="#scala.tools.nsc.transform.patmat;Solving;CNF;Lit" title="CNF.this.Lit">Lit</a>

    def <a title="(a: CNF.this.Formula, b: CNF.this.Formula)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.andFormula">andFormula</a><span class="delimiter">(</span><a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.andFormula.a">a</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a>, <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.andFormula.b">b</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.andFormula.a" title="CNF.this.Formula">a</a> <a href="../../../../collection/mutable/BufferLike.scala.html#scala.collection.mutable;BufferLike.++(503f88e764)" title="(xs: scala.collection.GenTraversableOnce[CNF.this.Clause])scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">++</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.andFormula.b" title="CNF.this.Formula">b</a>
    def <a title="(a: CNF.this.Formula)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.simplifyFormula">simplifyFormula</a><span class="delimiter">(</span><a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.simplifyFormula.a">a</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.simplifyFormula.a" title="CNF.this.Formula">a</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.distinct" title="=&gt; scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">distinct</a>

    private def <a title="(a: CNF.this.Clause, b: CNF.this.Clause)scala.collection.immutable.Set[CNF.this.Lit]" id="scala.tools.nsc.transform.patmat;Solving;CNF.merge">merge</a><span class="delimiter">(</span><a title="CNF.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;CNF.merge.a">a</a>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="CNF.this.Clause">Clause</a>, <a title="CNF.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;CNF.merge.b">b</a>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="CNF.this.Clause">Clause</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.merge.a" title="CNF.this.Clause">a</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.++(07e1553119)" title="(elems: scala.collection.GenTraversableOnce[CNF.this.Lit])scala.collection.immutable.Set[CNF.this.Lit]">++</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.merge.b" title="CNF.this.Clause">b</a>

    <span class="comment">// throws an AnalysisBudget.Exception when the prop results in a CNF that's too big</span>
    <span class="comment">// TODO: be smarter/more efficient about this (http://lara.epfl.ch/w/sav09:tseitin_s_encoding)</span>
    def <a title="(p: CNF.this.Prop)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable">eqFreePropToSolvable</a><span class="delimiter">(</span><a title="CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.p">p</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <span class="delimiter">{</span>
      def <a title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot">negationNormalFormNot</a><span class="delimiter">(</span><span title="CNF.this.Prop">p</span>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a>, <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget">budget</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a> =
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.<=(5f58a84eb3)" title="(x: Int)Boolean">&lt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.exceeded" title="CNF.this.AnalysisBudget.exceeded.type">exceeded</a>
        else <span title="CNF.this.Prop">p</span> match <span class="delimiter">{</span>
          case And<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span> =&gt;  <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Or" title="(a: CNF.this.Prop, b: CNF.this.Prop)CNF.this.Or">Or</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalFormNot</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalFormNot</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          case Or<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span>  =&gt; <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;And" title="(a: CNF.this.Prop, b: CNF.this.Prop)CNF.this.And">And</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalFormNot</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalFormNot</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          case Not<span class="delimiter">(</span><span title="CNF.this.Prop">p</span><span class="delimiter">)</span>    =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">p</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          case <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.True" title="CNF.this.True.type">True</a>      =&gt; <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.False" title="CNF.this.False.type">False</a>
          case <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.False" title="CNF.this.False.type">False</a>     =&gt; <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.True" title="CNF.this.True.type">True</a>
          case <a title="CNF.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.s">s</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a>    =&gt; <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Not" title="(a: CNF.this.Prop)CNF.this.Not">Not</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot.s" title="CNF.this.Sym">s</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      def <a title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm">negationNormalForm</a><span class="delimiter">(</span><a title="CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm.p">p</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a>, <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2">budget</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a> = <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.max" title="=&gt; Int">max</a><span class="delimiter">)</span>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a> =
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.<=(5f58a84eb3)" title="(x: Int)Boolean">&lt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.exceeded" title="CNF.this.AnalysisBudget.exceeded.type">exceeded</a>
        else <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm.p" title="CNF.this.Prop">p</a> match <span class="delimiter">{</span>
          case And<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span>      =&gt; <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;And" title="(a: CNF.this.Prop, b: CNF.this.Prop)CNF.this.And">And</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          case Or<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span>       =&gt;  <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Or" title="(a: CNF.this.Prop, b: CNF.this.Prop)CNF.this.Or">Or</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
          case Not<span class="delimiter">(</span><a title="CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm.negated">negated</a><span class="delimiter">)</span>   =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalFormNot" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalFormNot</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm.negated" title="CNF.this.Prop">negated</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          case <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.True" title="CNF.this.True.type">True</a>
             | <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.False" title="CNF.this.False.type">False</a>
             | <span class="delimiter">(</span>_ : <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a><span class="delimiter">)</span>      =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm.p" title="CNF.this.Prop">p</a>
        <span class="delimiter">}</span>

      val <a title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Set[CNF.this.Lit]]" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.TrueF">TrueF</a>          = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.FalseF">FalseF</a>         = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: CNF.this.Lit*)CNF.this.Clause">clause</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      def <a title="(s: CNF.this.Sym)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.lit">lit</a><span class="delimiter">(</span><a title="CNF.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.lit.s">s</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a><span class="delimiter">)</span>    = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: CNF.this.Lit*)CNF.this.Clause">clause</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.Lit" title="(sym: CNF.this.Sym, pos: Boolean)CNF.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.lit.s" title="CNF.this.Sym">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      def <a title="(s: CNF.this.Sym)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negLit">negLit</a><span class="delimiter">(</span><a title="CNF.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negLit.s">s</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: CNF.this.Lit*)CNF.this.Clause">clause</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.Lit" title="(sym: CNF.this.Sym, pos: Boolean)CNF.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negLit.s" title="CNF.this.Sym">s</a>, pos = false<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      def <a title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm">conjunctiveNormalForm</a><span class="delimiter">(</span><a title="CNF.this.Prop" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.p">p</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Prop" title="CNF.this.Prop">Prop</a>, <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm$default$2">budget</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a> = <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.max" title="=&gt; Int">max</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> = <span class="delimiter">{</span>
        def <a title="(a: CNF.this.Formula, b: CNF.this.Formula, budget: Int)CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute">distribute</a><span class="delimiter">(</span><span title="CNF.this.Formula">a</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a>, <span title="CNF.this.Formula">b</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a>, <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.budget">budget</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="CNF.this.Formula">Formula</a> =
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.<=(5f58a84eb3)" title="(x: Int)Boolean">&lt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.exceeded" title="CNF.this.AnalysisBudget.exceeded.type">exceeded</a>
          else
            <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: CNF.this.Formula, _2: CNF.this.Formula)(CNF.this.Formula, CNF.this.Formula)" class="delimiter">(</a><span title="CNF.this.Formula">a</span>, <span title="CNF.this.Formula">b</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
              <span class="comment">// true \/ _ = true</span>
              <span class="comment">// _ \/ true = true</span>
              case <span class="delimiter">(</span><a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.trueA">trueA</a>, <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.trueB">trueB</a><span class="delimiter">)</span> if <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.trueA" title="CNF.this.Formula">trueA</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.trueB" title="CNF.this.Formula">trueB</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.TrueF" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Set[CNF.this.Lit]]">TrueF</a>
              <span class="comment">// lit \/ lit</span>
              case <span class="delimiter">(</span><span title="CNF.this.Formula">a</span>, <span title="CNF.this.Formula">b</span><span class="delimiter">)</span> if <span title="CNF.this.Formula">a</span>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span title="CNF.this.Formula">b</span>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.merge" title="(a: CNF.this.Clause, b: CNF.this.Clause)scala.collection.immutable.Set[CNF.this.Lit]">merge</a><span class="delimiter">(</span><a href="../../../../collection/mutable/ResizableArray.scala.html#scala.collection.mutable;ResizableArray.apply" title="(idx: Int)CNF.this.Clause">a</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="../../../../collection/mutable/ResizableArray.scala.html#scala.collection.mutable;ResizableArray.apply" title="(idx: Int)CNF.this.Clause">b</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="comment">// (c1 /\ ... /\ cn) \/ d = ((c1 \/ d) /\ ... /\ (cn \/ d))</span>
              <span class="comment">// d \/ (c1 /\ ... /\ cn) = ((d \/ c1) /\ ... /\ (d \/ cn))</span>
              case <span class="delimiter">(</span><a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.cs">cs</a>, <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.ds">ds</a><span class="delimiter">)</span> =&gt;
                val <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(CNF.this.Formula, CNF.this.Formula)" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#scala;Tuple2._1" title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.big">big</a>, <a href="../../../../Tuple2.scala.html#scala;Tuple2._2" title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.small">small</a><span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.cs" title="CNF.this.Formula">cs</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.ds" title="CNF.this.Formula">ds</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span> <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: CNF.this.Formula, _2: CNF.this.Formula)(CNF.this.Formula, CNF.this.Formula)" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.cs" title="CNF.this.Formula">cs</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.ds" title="CNF.this.Formula">ds</a><span class="delimiter">)</span> else <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: CNF.this.Formula, _2: CNF.this.Formula)(CNF.this.Formula, CNF.this.Formula)" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.ds" title="CNF.this.Formula">ds</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.cs" title="CNF.this.Formula">cs</a><span class="delimiter">)</span>
                <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.big" title="CNF.this.Formula">big</a> <a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.flatMap" title="(f: CNF.this.Clause =&gt; scala.collection.GenTraversableOnce[CNF.this.Clause])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[CNF.this.Clause],CNF.this.Clause,CNF.this.Formula])CNF.this.Formula">flatMap</a> <span class="delimiter">(</span><a title="CNF.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.$anonfun.c">c</a> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute" title="(a: CNF.this.Formula, b: CNF.this.Formula, budget: Int)CNF.this.Formula">distribute</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formula" title="(c: CNF.this.Clause*)CNF.this.Formula">formula</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.$anonfun.c" title="CNF.this.Clause">c</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.small" title="CNF.this.Formula">small</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.budget" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.big" title="CNF.this.Formula">big</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><a href="../../../../Int.scala.html#scala;Int.*(1409840560)" title="(x: Int)Int">*</a><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute.small" title="CNF.this.Formula">small</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.<=(5f58a84eb3)" title="(x: Int)Boolean">&lt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> throw <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget" title="CNF.this.AnalysisBudget.type">AnalysisBudget</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.AnalysisBudget.exceeded" title="CNF.this.AnalysisBudget.exceeded.type">exceeded</a>

        <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.p" title="CNF.this.Prop">p</a> match <span class="delimiter">{</span>
          case <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.True" title="CNF.this.True.type">True</a>        =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.TrueF" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Set[CNF.this.Lit]]">TrueF</a>
          case <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.False" title="CNF.this.False.type">False</a>       =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.FalseF" title="CNF.this.Formula">FalseF</a>
          case <span title="CNF.this.Sym">s</span>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a>      =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.lit" title="(s: CNF.this.Sym)CNF.this.Formula">lit</a><span class="delimiter">(</span><span title="CNF.this.Sym">s</span><span class="delimiter">)</span>
          case Not<span class="delimiter">(</span><span title="CNF.this.Sym">s</span>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="CNF.this.Sym">Sym</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negLit" title="(s: CNF.this.Sym)CNF.this.Formula">negLit</a><span class="delimiter">(</span><span title="CNF.this.Sym">s</span><span class="delimiter">)</span>
          case And<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span>   =&gt;
            val <span title="CNF.this.Formula">cnfA</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula">conjunctiveNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            val <span title="CNF.this.Formula">cnfB</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula">conjunctiveNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="CNF.this.Formula">cnfA</span>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span>
            <span title="CNF.this.Formula">cnfA</span> <a href="../../../../collection/mutable/BufferLike.scala.html#scala.collection.mutable;BufferLike.++(503f88e764)" title="(xs: scala.collection.GenTraversableOnce[CNF.this.Clause])scala.collection.mutable.ArrayBuffer[CNF.this.Clause]">++</a> <span title="CNF.this.Formula">cnfB</span>
          case Or<span class="delimiter">(</span><span title="CNF.this.Prop">a</span>, <span title="CNF.this.Prop">b</span><span class="delimiter">)</span>    =&gt;
            val <span title="CNF.this.Formula">cnfA</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula">conjunctiveNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">a</span><span class="delimiter">)</span>
            val <span title="CNF.this.Formula">cnfB</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula">conjunctiveNormalForm</a><span class="delimiter">(</span><span title="CNF.this.Prop">b</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm.distribute" title="(a: CNF.this.Formula, b: CNF.this.Formula, budget: Int)CNF.this.Formula">distribute</a><span class="delimiter">(</span><span title="CNF.this.Formula">cnfA</span>, <span title="CNF.this.Formula">cnfB</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm$default$2" title="Int">budget</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span class="delimiter">(</span><span title="CNF.this.Formula">cnfA</span>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="CNF.this.Formula">cnfB</span>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.start">start</a> = if <span class="delimiter">(</span><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatCNF" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatCNF</a><span class="delimiter">)</span> else null
      val <a title="CNF.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.res">res</a>   = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.conjunctiveNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Formula">conjunctiveNormalForm</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.negationNormalForm" title="(p: CNF.this.Prop, budget: Int)CNF.this.Prop">negationNormalForm</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.p" title="CNF.this.Prop">p</a><span class="delimiter">)</span><span class="delimiter">)</span>

      if <span class="delimiter">(</span><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatCNF" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatCNF</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.start" title="scala.reflect.internal.util.Statistics.TimerSnapshot">start</a><span class="delimiter">)</span>

      if <span class="delimiter">(</span><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../../collection/mutable/SynchronizedMap.scala.html#scala.collection.mutable;SynchronizedMap.apply" title="(key: Int)scala.reflect.internal.util.Statistics.Counter">patmatCNFSizes</a><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.ev$1" title="scala.reflect.internal.util.Statistics.Counter" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.res" title="CNF.this.Formula">res</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics;Counter.value_=" title="(x$1: Int)Unit">value</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>

<span class="comment">//      debug.patmat(&quot;cnf for\n&quot;+ p +&quot;\nis:\n&quot;+cnfString(res))</span>
      <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.eqFreePropToSolvable.res" title="CNF.this.Formula">res</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// simple solver using DPLL</span>
  trait <a title="trait Solver extends AnyRef with Solving.this.CNF" id="scala.tools.nsc.transform.patmat;Solving;Solver">Solver</a> extends <a href="#scala.tools.nsc.transform.patmat;Solving;CNF" title="Solving.this.CNF">CNF</a> <span class="delimiter">{</span>
    <span class="comment">// a literal is a (possibly negated) variable</span>
    def <a title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.Lit">Lit</a><span class="delimiter">(</span><a title="Solver.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;Solver.Lit.sym">sym</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="Solver.this.Sym">Sym</a>, <a title="Boolean" id="scala.tools.nsc.transform.patmat;Solving;Solver.Lit$default$2">pos</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true<span class="delimiter">)</span> = new <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit.sym" title="Solver.this.Sym">sym</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit$default$2" title="Boolean">pos</a><span class="delimiter">)</span>
    class <a title="class Lit extends AnyRef" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit">Lit</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit" class="delimiter">(</a>val <a title="Solver.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym">sym</a>: <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="Solver.this.Sym">Sym</a>, val <a title="Boolean" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos">pos</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      override def <a title="()String" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.toString">toString</a> = if <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym.toString" title="()String">toString</a> else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym.toString" title="()String">toString</a>
      override def <a title="(o: Any)Boolean" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.equals">equals</a><span class="delimiter">(</span><span title="Any">o</span>: <span title="Any">Any</span><span class="delimiter">)</span> = <span title="Any">o</span> match <span class="delimiter">{</span>
        case <span title="Solver.this.Lit">o</span>: <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a> =&gt; <span class="delimiter">(</span><span title="Solver.this.Lit">o</span>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><span title="Solver.this.Lit">o</span>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a> <a href="../../../../Boolean.scala.html#scala;Boolean.==(763c96e1b1)" title="(x: Boolean)Boolean">==</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span>
        case _ =&gt; false
      <span class="delimiter">}</span>
      override def <a title="()Int" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.hashCode">hashCode</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a>.<a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym.hashCode" title="()Int">hashCode</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a>.<span title="()Int">hashCode</span>

      def <a title="=&gt; Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver;Lit.unary_-">unary_-</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit" title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a>, <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(f: Solver.this.Formula)String" id="scala.tools.nsc.transform.patmat;Solving;Solver.cnfString">cnfString</a><span class="delimiter">(</span><a title="Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.cnfString.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a><span class="delimiter">)</span> = <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic.alignAcrossRows" title="(xss: List[List[AnyRef]], sep: String, lineSep: String)String">alignAcrossRows</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.cnfString.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.map" title="(f: Solver.this.Clause =&gt; List[Solver.this.Lit])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Solver.this.Clause],List[Solver.this.Lit],scala.collection.mutable.ArrayBuffer[List[Solver.this.Lit]]])scala.collection.mutable.ArrayBuffer[List[Solver.this.Lit]]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.cnfString.$anonfun.x$2" title="Solver.this.Clause">_</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[Solver.this.Lit]">toList</a><span class="delimiter">)</span> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[List[Solver.this.Lit]]">toList</a>, <span title="String(&quot;\\/&quot;)" class="string">&quot;\\/&quot;</span>, <span title="String(&quot; /\\\n&quot;)" class="string">&quot; /\\\n&quot;</span><span class="delimiter">)</span>

    <span class="comment">// adapted from http://lara.epfl.ch/w/sav10:simple_sat_solver (original by Hossein Hojjat)</span>
    val <a title="scala.collection.immutable.Map[Solver.this.Sym,Boolean]" id="scala.tools.nsc.transform.patmat;Solving;Solver.EmptyModel">EmptyModel</a> = <a href="../../../../Predef.scala.html#scala.Predef.Map" title="=&gt; scala.collection.immutable.Map.type">Map</a>.<a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable.Map.empty" title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</a><span title="scala.collection.immutable.Map[Solver.this.Sym,Boolean]" class="delimiter">[</span><a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic;Sym" title="Solver.this.Sym">Sym</a>, <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">]</span>
    val <a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.NoModel">NoModel</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a> = null

    <span class="comment">// returns all solutions, if any (TODO: better infinite recursion backstop -- detect fixpoint??)</span>
    def <a title="(f: Solver.this.Formula)List[Solver.this.Model]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor">findAllModelsFor</a><span class="delimiter">(</span><a title="Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Solver.this.Model]">List</a><span class="delimiter">[</span>Model<span class="delimiter">]</span> = <span class="delimiter">{</span>

      <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug" title="Solving.this.debug.type">debug</a>.<a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug.patmat" title="(s: =&gt; String)Unit">patmat</a><span class="delimiter">(</span><span title="String(&quot;find all models for\n&quot;)" class="string">&quot;find all models for\n&quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.cnfString" title="(f: Solver.this.Formula)String">cnfString</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.f" title="Solver.this.Formula">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

      val <a title="Set[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars">vars</a>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[Solver.this.Sym]">Set</a><span class="delimiter">[</span>Sym<span class="delimiter">]</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.f" title="Solver.this.Formula">f</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.flatMap" title="(f: Solver.this.Clause =&gt; scala.collection.GenTraversableOnce[Solver.this.Sym])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Solver.this.Clause],Solver.this.Sym,scala.collection.mutable.ArrayBuffer[Solver.this.Sym]])scala.collection.mutable.ArrayBuffer[Solver.this.Sym]">flatMap</a><a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable.ArrayBuffer.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,Solver.this.Sym,scala.collection.mutable.ArrayBuffer[Solver.this.Sym]]" class="delimiter">(</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars.$anonfun.x$3" title="Solver.this.Clause">_</a> <a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.collect" title="(pf: PartialFunction[Solver.this.Lit,Solver.this.Sym])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Solver.this.Lit],Solver.this.Sym,scala.collection.immutable.Set[Solver.this.Sym]])scala.collection.immutable.Set[Solver.this.Sym]">collect</a> <a title="&lt;$anon: Solver.this.Lit =&gt; Solver.this.Sym&gt; extends scala.runtime.AbstractPartialFunction[Solver.this.Lit,Solver.this.Sym] with Serializable" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars.$anonfun;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>case <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars.$anonfun;$anonfun.isDefinedAt.l">l</a>: <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars.$anonfun;$anonfun.isDefinedAt.l" title="Solver.this.Lit">l</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a><span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="scala.collection.immutable.Set[Solver.this.Sym]">toSet</a>
      <span class="comment">// debug.patmat(&quot;vars &quot;+ vars)</span>
      <span class="comment">// the negation of a model -(S1=True/False /\ ... /\ SN=True/False) = clause(S1=False/True, ...., SN=False/True)</span>
      def <a title="(m: Solver.this.Model)Solver.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel">negateModel</a><span class="delimiter">(</span><a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.m">m</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: Solver.this.Lit*)Solver.this.Clause">clause</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.m" title="Solver.this.Model">m</a>.<a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.toSeq" title="=&gt; Seq[(Solver.this.Sym, Boolean)]">toSeq</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.map" title="(f: ((Solver.this.Sym, Boolean)) =&gt; Solver.this.Lit)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(Solver.this.Sym, Boolean)],Solver.this.Lit,Seq[Solver.this.Lit]])Seq[Solver.this.Lit]">map</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.$anonfun.x0$1" title="Solver.this.Lit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="Solver.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.$anonfun.sym">sym</a>, <a title="Boolean" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.$anonfun.pos">pos</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit" title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.$anonfun.sym" title="Solver.this.Sym">sym</a>, <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel.$anonfun.pos" title="Boolean">pos</a><span class="delimiter">)</span> <span class="delimiter">}</span> : _*<span class="delimiter">)</span>

      <span class="comment">/**
       * The DPLL procedure only returns a minimal mapping from literal to value
       * such that the CNF formula is satisfied.
       * E.g. for:
       * `(a \/ b)`
       * The DPLL procedure will find either {a = true} or {b = true}
       * as solution.
       *
       * The expansion step will amend both solutions with the unassigned variable
       * i.e., {a = true} will be expanded to {a = true, b = true} and {a = true, b = false}.
       */</span>
      def <a title="(unassigned: List[Solver.this.Sym], model: Solver.this.Model)List[Solver.this.Model]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned">expandUnassigned</a><span class="delimiter">(</span><a title="List[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.unassigned">unassigned</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Solver.this.Sym]">List</a><span class="delimiter">[</span>Sym<span class="delimiter">]</span>, <a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.model">model</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Solver.this.Model]">List</a><span class="delimiter">[</span>Model<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="comment">// the number of solutions is doubled for every unassigned variable</span>
        val expandedModels = <span title="Int(1)" class="int">1</span> <a href="../../../../Int.scala.html#scala;Int.<<(1409840560)" title="Int" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.expandedModels">&lt;&lt;</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.unassigned" title="List[Solver.this.Sym]">unassigned</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a>
        var <a title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current">current</a> = mutable.<a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.ArrayBuffer[A]">ArrayBuffer</a><span title="(elems: Solver.this.Model*)scala.collection.mutable.ArrayBuffer[Solver.this.Model]" class="delimiter">[</span><a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        var <a title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next">next</a> = mutable.<a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.ArrayBuffer[A]">ArrayBuffer</a><span title="(elems: Solver.this.Model*)scala.collection.mutable.ArrayBuffer[Solver.this.Model]" class="delimiter">[</span><a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">current</a>.<a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.sizeHint(1b78cbfc94)" title="(len: Int)Unit">sizeHint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.expandedModels" title="Int">expandedModels</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a>.<a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.sizeHint(1b78cbfc94)" title="(len: Int)Unit">sizeHint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.expandedModels" title="Int">expandedModels</a><span class="delimiter">)</span>

        <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">current</a> <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: scala.collection.immutable.Map[Solver.this.Sym,Boolean])scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">+=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.model" title="Solver.this.Model">model</a>

        <span class="comment">// we use double buffering:</span>
        <span class="comment">// read from `current` and create a two models for each model in `next`</span>
        for <span class="delimiter">{</span>
          <a title="Solver.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.s">s</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Solver.this.Sym =&gt; Unit)Unit">unassigned</a>
        <span class="delimiter">}</span> <span class="delimiter">{</span>
          for <span class="delimiter">{</span>
            <a title="scala.collection.immutable.Map[Solver.this.Sym,Boolean]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.model">model</a> &lt;- <a href="../../../../collection/mutable/ResizableArray.scala.html#scala.collection.mutable;ResizableArray.foreach" title="(f: scala.collection.immutable.Map[Solver.this.Sym,Boolean] =&gt; scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]])Unit">current</a>
          <span class="delimiter">}</span> <span class="delimiter">{</span>
            def <a title="(l: Solver.this.Lit)scala.collection.immutable.Map[Solver.this.Sym,Boolean]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force">force</a><span class="delimiter">(</span><a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force.l">l</a>: <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.model" title="scala.collection.immutable.Map[Solver.this.Sym,Boolean]">model</a> <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="(kv: (Solver.this.Sym, Boolean))scala.collection.immutable.Map[Solver.this.Sym,Boolean]">+</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force.l" title="Solver.this.Lit">l</a>.<a href="../../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: Solver.this.Sym)ArrowAssoc[Solver.this.Sym]">sym</a> <a href="../../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Boolean)(Solver.this.Sym, Boolean)">-&gt;</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force.l" title="Solver.this.Lit">l</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span>

            <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a> <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: scala.collection.immutable.Map[Solver.this.Sym,Boolean])scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">+=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force" title="(l: Solver.this.Lit)scala.collection.immutable.Map[Solver.this.Sym,Boolean]">force</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit" title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.s" title="Solver.this.Sym">s</a>, pos = true<span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a> <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: scala.collection.immutable.Map[Solver.this.Sym,Boolean])scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">+=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.$anonfun.force" title="(l: Solver.this.Lit)scala.collection.immutable.Map[Solver.this.Sym,Boolean]">force</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit" title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.s" title="Solver.this.Sym">s</a>, pos = false<span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          val <a title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.tmp">tmp</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">current</a>
          <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">current</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a>
          <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.$anonfun.tmp" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">tmp</a>

          <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.next" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">next</a>.<a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned.current" title="scala.collection.mutable.ArrayBuffer[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">current</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[scala.collection.immutable.Map[Solver.this.Sym,Boolean]]">toList</a>
      <span class="delimiter">}</span>

      def <a title="(f: Solver.this.Formula, models: List[Solver.this.Model], recursionDepthAllowed: Int)List[Solver.this.Model]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels">findAllModels</a><span class="delimiter">(</span><a title="Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a>,
                        <a title="List[Solver.this.Model]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.models">models</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Solver.this.Model]">List</a><span class="delimiter">[</span>Model<span class="delimiter">]</span>,
                        <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels$default$3">recursionDepthAllowed</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a> = <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.YpatmatExhaustdepth" title="=&gt; scala.tools.nsc.Settings#IntSetting">YpatmatExhaustdepth</a>.<a href="../../settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;IntSetting.value" title="=&gt; Int">value</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Solver.this.Model]">List</a><span class="delimiter">[</span>Model<span class="delimiter">]</span>=
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels$default$3" title="Int">recursionDepthAllowed</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="Int" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.maxDPLLdepth">maxDPLLdepth</a> = <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.YpatmatExhaustdepth" title="=&gt; scala.tools.nsc.Settings#IntSetting">YpatmatExhaustdepth</a>.<a href="../../settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;IntSetting.value" title="=&gt; Int">value</a>
          <a href="Logic.scala.html#scala.tools.nsc.transform.patmat;Logic;PropositionalLogic.reportWarning" title="(message: String)Unit">reportWarning</a><span class="delimiter">(</span><span title="String(&quot;(Exhaustivity analysis reached max recursion depth, not all missing cases are reported. &quot;)" class="string">&quot;(Exhaustivity analysis reached max recursion depth, not all missing cases are reported. &quot;</span> <span title="(x$1: Any)String">+</span>
              <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Please try with scalac -Ypatmat-exhaust-depth &quot;)">Please try with scalac -Ypatmat-exhaust-depth $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.maxDPLLdepth" title="Int">maxDPLLdepth</a> <a href="../../../../Int.scala.html#scala;Int.*(1409840560)" title="(x: Int)Int">*</a> <span title="Int(2)" class="int">2</span><span class="delimiter">}</span><span title="String(&quot; or -Ypatmat-exhaust-depth off.)&quot;)" class="string"> or -Ypatmat-exhaust-depth off.)&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.models" title="List[Solver.this.Model]">models</a>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          val <a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model">model</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor" title="(f: Solver.this.Formula)Solver.this.Model">findModelFor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.f" title="Solver.this.Formula">f</a><span class="delimiter">)</span>
          <span class="comment">// if we found a solution, conjunct the formula with the model's negation and recurse</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model" title="Solver.this.Model">model</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.NoModel" title="=&gt; Solver.this.Model">NoModel</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="List[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.unassigned">unassigned</a> = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.vars" title="Set[Solver.this.Sym]">vars</a> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[Solver.this.Sym])scala.collection.immutable.Set[Solver.this.Sym]">--</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model" title="Solver.this.Model">model</a>.<a href="../../../../collection/immutable/MapLike.scala.html#scala.collection.immutable;MapLike.keySet" title="=&gt; scala.collection.immutable.Set[Solver.this.Sym]">keySet</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[Solver.this.Sym]">toList</a>
            <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug" title="Solving.this.debug.type">debug</a>.<a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug.patmat" title="(s: =&gt; String)Unit">patmat</a><span class="delimiter">(</span><span title="String(&quot;unassigned &quot;)" class="string">&quot;unassigned &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.unassigned" title="List[Solver.this.Sym]">unassigned</a> <span title="(x$1: Any)String">+</span><span title="String(&quot; in &quot;)" class="string">&quot; in &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model" title="Solver.this.Model">model</a><span class="delimiter">)</span>

            val <a title="List[Solver.this.Model]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.forced">forced</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.expandUnassigned" title="(unassigned: List[Solver.this.Sym], model: Solver.this.Model)List[Solver.this.Model]">expandUnassigned</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.unassigned" title="List[Solver.this.Sym]">unassigned</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model" title="Solver.this.Model">model</a><span class="delimiter">)</span>
            <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug" title="Solving.this.debug.type">debug</a>.<a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug.patmat" title="(s: =&gt; String)Unit">patmat</a><span class="delimiter">(</span><span title="String(&quot;forced &quot;)" class="string">&quot;forced &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.forced" title="List[Solver.this.Model]">forced</a><span class="delimiter">)</span>
            val <a title="Solver.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.negated">negated</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.negateModel" title="(m: Solver.this.Model)Solver.this.Clause">negateModel</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.model" title="Solver.this.Model">model</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels" title="(f: Solver.this.Formula, models: List[Solver.this.Model], recursionDepthAllowed: Int)List[Solver.this.Model]">findAllModels</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: Solver.this.Clause)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Solver.this.Clause],Solver.this.Clause,Solver.this.Formula])Solver.this.Formula">:+</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.negated" title="Solver.this.Clause">negated</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.forced" title="List[Solver.this.Model]">forced</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Solver.this.Model])(implicit bf: scala.collection.generic.CanBuildFrom[List[Solver.this.Model],Solver.this.Model,List[Solver.this.Model]])List[Solver.this.Model]">++</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.models" title="List[Solver.this.Model]">models</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels$default$3" title="Int">recursionDepthAllowed</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels.models" title="List[Solver.this.Model]">models</a>
        <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.findAllModels" title="(f: Solver.this.Formula, models: List[Solver.this.Model], recursionDepthAllowed: Int)List[Solver.this.Model]">findAllModels</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findAllModelsFor.f" title="Solver.this.Formula">f</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    private def <a title="(res: Solver.this.Model, l: Solver.this.Lit)Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.withLit">withLit</a><span class="delimiter">(</span><a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.withLit.res">res</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a>, <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.withLit.l">l</a>: <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit.res" title="Solver.this.Model">res</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.NoModel" title="=&gt; Solver.this.Model">NoModel</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.NoModel" title="=&gt; Solver.this.Model">NoModel</a> else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit.res" title="Solver.this.Model">res</a> <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="(kv: (Solver.this.Sym, Boolean))scala.collection.immutable.Map[Solver.this.Sym,Boolean]">+</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit.l" title="Solver.this.Lit">l</a>.<a href="../../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: Solver.this.Sym)ArrowAssoc[Solver.this.Sym]">sym</a> <a href="../../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Boolean)(Solver.this.Sym, Boolean)">-&gt;</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit.l" title="Solver.this.Lit">l</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span>
    private def <a title="(f: Solver.this.Formula, unitLit: Solver.this.Lit)Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit">dropUnit</a><span class="delimiter">(</span><a title="Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a>, <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.unitLit">unitLit</a>: <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit" title="Solver.this.Lit">Lit</a><span class="delimiter">)</span>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a> = <span class="delimiter">{</span>
      val <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.negated">negated</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.unary_-" title="=&gt; Solver.this.Lit">-</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.unitLit" title="Solver.this.Lit">unitLit</a>
      <span class="comment">// drop entire clauses that are trivially true</span>
      <span class="comment">// (i.e., disjunctions that contain the literal we're making true in the returned model),</span>
      <span class="comment">// and simplify clauses by dropping the negation of the literal we're making true</span>
      <span class="comment">// (since False \/ X == X)</span>
      val <a title="scala.collection.mutable.ArrayBuffer[Solver.this.Clause]" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.dropped">dropped</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.formulaBuilderSized" title="(init: Int)scala.collection.mutable.ArrayBuffer[Solver.this.Clause]">formulaBuilderSized</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.f" title="Solver.this.Formula">f</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span>
      for <span class="delimiter">{</span>
        <a title="Solver.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.$anonfun.clause">clause</a> &lt;- <a href="../../../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.foreach" title="(f: Solver.this.Clause =&gt; scala.collection.mutable.ArrayBuffer[Solver.this.Clause])Unit">f</a>
        if <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.$anonfun.clause" title="Solver.this.Clause">clause</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.contains" title="(elem: Solver.this.Lit)Boolean">contains</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.unitLit" title="Solver.this.Lit">unitLit</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.dropped" title="scala.collection.mutable.ArrayBuffer[Solver.this.Clause]">dropped</a> <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: Solver.this.Clause)dropped.type">+=</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.$anonfun.clause" title="Solver.this.Clause">clause</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.-(daf7108c0f)" title="(elem: Solver.this.Lit)scala.collection.immutable.Set[Solver.this.Lit]">-</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.negated" title="Solver.this.Lit">negated</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit.dropped" title="scala.collection.mutable.ArrayBuffer[Solver.this.Clause]">dropped</a>
    <span class="delimiter">}</span>

    def <a title="(f: Solver.this.Formula)Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor">findModelFor</a><span class="delimiter">(</span><a title="Solver.this.Formula" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f">f</a>: <a href="../../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer" title="Solver.this.Formula">Formula</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a> = <span class="delimiter">{</span>
      @inline def <a title="(a: Solver.this.Model, b: =&gt; Solver.this.Model)Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse">orElse</a><span class="delimiter">(</span><a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse.a">a</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a>, <a title="=&gt; Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse.b">b</a>: =&gt; Model<span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse.a" title="Solver.this.Model">a</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.NoModel" title="=&gt; Solver.this.Model">NoModel</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse.a" title="Solver.this.Model">a</a> else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse.b" title="=&gt; Solver.this.Model">b</a>

      <a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug" title="Solving.this.debug.type">debug</a>.<a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat;Debugging.debug.patmat" title="(s: =&gt; String)Unit">patmat</a><span class="delimiter">(</span><span title="String(&quot;DPLL\n&quot;)" class="string">&quot;DPLL\n&quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.cnfString" title="(f: Solver.this.Formula)String">cnfString</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.start">start</a> = if <span class="delimiter">(</span><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaDPLL" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatAnaDPLL</a><span class="delimiter">)</span> else null

      val <a title="Solver.this.Model" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel">satisfiableWithModel</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Solver.this.Model">Model</a> =
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.EmptyModel" title="=&gt; scala.collection.immutable.Map[Solver.this.Sym,Boolean]">EmptyModel</a>
        else if<span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.exists" title="(p: Solver.this.Clause =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.x$4" title="Solver.this.Clause">_</a>.<a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.NoModel" title="=&gt; Solver.this.Model">NoModel</a>
        else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a>.<a href="../../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.find" title="(p: Solver.this.Clause =&gt; Boolean)Option[Solver.this.Clause]">find</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.x$5" title="Solver.this.Clause">_</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case Some<span class="delimiter">(</span><a title="Solver.this.Clause" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.unitClause">unitClause</a><span class="delimiter">)</span> =&gt;
            val <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.unitLit">unitLit</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.unitClause" title="Solver.this.Clause">unitClause</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Solver.this.Lit">head</a>
            <span class="comment">// debug.patmat(&quot;unit: &quot;+ unitLit)</span>
            <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit" title="(res: Solver.this.Model, l: Solver.this.Lit)Solver.this.Model">withLit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor" title="(f: Solver.this.Formula)Solver.this.Model">findModelFor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.dropUnit" title="(f: Solver.this.Formula, unitLit: Solver.this.Lit)Solver.this.Formula">dropUnit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.unitLit" title="Solver.this.Lit">unitLit</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.unitLit" title="Solver.this.Lit">unitLit</a><span class="delimiter">)</span>
          case _ =&gt;
            <span class="comment">// partition symbols according to whether they appear in positive and/or negative literals</span>
            val <a title="scala.collection.mutable.HashSet[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pos">pos</a> = new mutable.<a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[Solver.this.Sym]">HashSet</a><span class="delimiter">[</span>Sym<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
            val <a title="scala.collection.mutable.HashSet[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.neg">neg</a> = new mutable.<a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[Solver.this.Sym]">HashSet</a><span class="delimiter">[</span>Sym<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="../../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.mforeach(746c169d92)" title="(xss: Traversable[Traversable[Solver.this.Lit]])(f: Solver.this.Lit =&gt; Unit)Unit">mforeach</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.lit">lit</a> =&gt; if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.lit" title="Solver.this.Lit">lit</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.pos" title="=&gt; Boolean">pos</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pos" title="scala.collection.mutable.HashSet[Solver.this.Sym]">pos</a> <a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: Solver.this.Sym)pos.type">+=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.lit" title="Solver.this.Lit">lit</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a> else <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.neg" title="scala.collection.mutable.HashSet[Solver.this.Sym]">neg</a> <a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: Solver.this.Sym)neg.type">+=</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.$anonfun.lit" title="Solver.this.Lit">lit</a>.<a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.sym" title="=&gt; Solver.this.Sym">sym</a><span class="delimiter">)</span>

            <span class="comment">// appearing in both positive and negative</span>
            val impures = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pos" title="scala.collection.mutable.HashSet[Solver.this.Sym]">pos</a> <a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.intersect" title="scala.collection.mutable.HashSet[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.impures">intersect</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.neg" title="scala.collection.mutable.HashSet[Solver.this.Sym]">neg</a>
            <span class="comment">// appearing only in either positive/negative positions</span>
            val pures = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pos" title="scala.collection.mutable.HashSet[Solver.this.Sym]">pos</a> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.++(503f88e764)" title="(xs: scala.collection.GenTraversableOnce[Solver.this.Sym])scala.collection.mutable.HashSet[Solver.this.Sym]">++</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.neg" title="scala.collection.mutable.HashSet[Solver.this.Sym]">neg</a><span class="delimiter">)</span> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.--" title="scala.collection.mutable.HashSet[Solver.this.Sym]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pures">--</a> <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.impures" title="scala.collection.mutable.HashSet[Solver.this.Sym]">impures</a>

            if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pures" title="scala.collection.mutable.HashSet[Solver.this.Sym]">pures</a> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <a title="Solver.this.Sym" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureSym">pureSym</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pures" title="scala.collection.mutable.HashSet[Solver.this.Sym]">pures</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Solver.this.Sym">head</a>
              <span class="comment">// turn it back into a literal</span>
              <span class="comment">// (since equality on literals is in terms of equality</span>
              <span class="comment">//  of the underlying symbol and its positivity, simply construct a new Lit)</span>
              val <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureLit">pureLit</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.Lit" title="(sym: Solver.this.Sym, pos: Boolean)Solver.this.Lit">Lit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureSym" title="Solver.this.Sym">pureSym</a>, <a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: Solver.this.Sym)Boolean">pos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureSym" title="Solver.this.Sym">pureSym</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="comment">// debug.patmat(&quot;pure: &quot;+ pureLit +&quot; pures: &quot;+ pures +&quot; impures: &quot;+ impures)</span>
              val <a title="scala.collection.mutable.ArrayBuffer[Solver.this.Clause]" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.simplified">simplified</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: Solver.this.Clause =&gt; Boolean)scala.collection.mutable.ArrayBuffer[Solver.this.Clause]">filterNot</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.simplified.$anonfun.x$6" title="Solver.this.Clause">_</a>.<a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.contains" title="(elem: Solver.this.Lit)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureLit" title="Solver.this.Lit">pureLit</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.withLit" title="(res: Solver.this.Model, l: Solver.this.Lit)Solver.this.Model">withLit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor" title="(f: Solver.this.Formula)Solver.this.Model">findModelFor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.simplified" title="scala.collection.mutable.ArrayBuffer[Solver.this.Clause]">simplified</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.pureLit" title="Solver.this.Lit">pureLit</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              val <a title="Solver.this.Lit" id="scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.split">split</a> = <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a>.<a href="../../../../collection/IndexedSeqOptimized.scala.html#scala.collection;IndexedSeqOptimized.head" title="=&gt; Solver.this.Clause">head</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Solver.this.Lit">head</a>
              <span class="comment">// debug.patmat(&quot;split: &quot;+ split)</span>
              <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.orElse" title="(a: Solver.this.Model, b: =&gt; Solver.this.Model)Solver.this.Model">orElse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor" title="(f: Solver.this.Formula)Solver.this.Model">findModelFor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: Solver.this.Clause)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Solver.this.Clause],Solver.this.Clause,Solver.this.Formula])Solver.this.Formula">:+</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: Solver.this.Lit*)Solver.this.Clause">clause</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.split" title="Solver.this.Lit">split</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor" title="(f: Solver.this.Formula)Solver.this.Model">findModelFor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.f" title="Solver.this.Formula">f</a> <a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: Solver.this.Clause)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Solver.this.Clause],Solver.this.Clause,Solver.this.Formula])Solver.this.Formula">:+</a> <a href="#scala.tools.nsc.transform.patmat;Solving;CNF.clause" title="(l: Solver.this.Lit*)Solver.this.Clause">clause</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform.patmat;Solving;Solver;Lit.unary_-" title="=&gt; Solver.this.Lit">-</a><a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel.split" title="Solver.this.Lit">split</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      if <span class="delimiter">(</span><a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="PatternMatching.scala.html#scala.tools.nsc.transform.patmat.PatternMatchingStats.patmatAnaDPLL" title="=&gt; scala.reflect.internal.util.Statistics.Timer">patmatAnaDPLL</a>, <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.start" title="scala.reflect.internal.util.Statistics.TimerSnapshot">start</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform.patmat;Solving;Solver.findModelFor.satisfiableWithModel" title="Solver.this.Model">satisfiableWithModel</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
