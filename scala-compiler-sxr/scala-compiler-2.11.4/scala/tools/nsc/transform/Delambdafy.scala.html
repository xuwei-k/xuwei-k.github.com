<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/transform/Delambdafy.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.tools.nsc
package transform

import symtab._
import <a href="../symtab/package.scala.html#scala.tools.nsc.symtab.package.Flags" title="=&gt; reflect.internal.Flags.type">Flags</a>._
import scala.collection._
import scala.<a href="../../../language.scala.html#scala.language" title="language.type">language</a>.postfixOps
import scala.reflect.internal.Symbols
import scala.collection.mutable.LinkedHashMap

<span class="comment">/**
 * This transformer is responisble for turning lambdas into anonymous classes.
 * The main assumption it makes is that a lambda {args =&gt; body} has been turned into
 * {args =&gt; liftedBody()} where lifted body is a top level method that implements the body of the lambda.
 * Currently Uncurry is responsible for that transformation.
 *
 * From a lambda, Delambdafy will create
 * 1) a static forwarder at the top level of the class that contained the lambda
 * 2) a new top level class that
      a) has fields and a constructor taking the captured environment (including possbily the &quot;this&quot;
 *       reference)
 *    b) an apply method that calls the static forwarder
 *    c) if needed a bridge method for the apply method
 *  3) an instantiation of the newly created class which replaces the lambda
 *
 *  TODO the main work left to be done is to plug into specialization. Primarily that means choosing a
 * specialized FunctionN trait instead of the generic FunctionN trait as a parent and creating the
 * appropriately named applysp method
 */</span>
abstract class <a title="class Delambdafy extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with scala.tools.nsc.transform.TypeAdaptingTransformer" id="scala.tools.nsc.transform;Delambdafy">Delambdafy</a> extends <a href="Transform.scala.html#scala.tools.nsc.transform;Transform" title="scala.tools.nsc.transform.Transform">Transform</a> with <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> with ast.<a href="../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> with <a href="TypeAdaptingTransformer.scala.html#scala.tools.nsc.transform;TypeAdaptingTransformer" title="scala.tools.nsc.transform.TypeAdaptingTransformer">TypeAdaptingTransformer</a> <span class="delimiter">{</span>
  import <a href="../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="Delambdafy.this.global.definitions.type">definitions</a>._
  import <a href="../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE" title="Delambdafy.this.CODE.type">CODE</a>._

  val <a title="scala.tools.nsc.Global.&lt;refinement&gt;.type" id="scala.tools.nsc.transform;Delambdafy.analyzer">analyzer</a>: global.analyzer.type = <a href="../ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#scala.tools.nsc;Global.analyzer" title="=&gt; scala.tools.nsc.typechecker.Analyzer{val global: Delambdafy.this.global.type}">analyzer</a>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  val <a title="String" id="scala.tools.nsc.transform;Delambdafy.phaseName">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;delambdafy&quot;)" class="string">&quot;delambdafy&quot;</span>

  override def <a title="(prev: tools.nsc.Phase)Delambdafy.this.StdPhase" id="scala.tools.nsc.transform;Delambdafy.newPhase">newPhase</a><span class="delimiter">(</span><a title="tools.nsc.Phase" id="scala.tools.nsc.transform;Delambdafy.newPhase.prev">prev</a>: scala.tools.nsc.<a href="../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="tools.nsc.Phase">Phase</a><span class="delimiter">)</span>: <a href="../SubComponent.scala.html#scala.tools.nsc;SubComponent;StdPhase" title="Delambdafy.this.StdPhase">StdPhase</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.Ydelambdafy" title="=&gt; scala.tools.nsc.Settings#ChoiceSetting">Ydelambdafy</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.value" title="=&gt; String">value</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;method&quot;)" class="string">&quot;method&quot;</span><span class="delimiter">)</span> new <a href="Transform.scala.html#scala.tools.nsc.transform;Transform;Phase" title="Delambdafy.this.Phase">Phase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy.newPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span>
    else new <a href="#scala.tools.nsc.transform;Delambdafy;SkipPhase" title="Delambdafy.this.SkipPhase">SkipPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy.newPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  class <a title="class SkipPhase extends Delambdafy.this.StdPhase" id="scala.tools.nsc.transform;Delambdafy;SkipPhase">SkipPhase</a><a href="#scala.tools.nsc.transform;Delambdafy;SkipPhase" title="Delambdafy.this.SkipPhase" class="delimiter">(</a><a title="tools.nsc.Phase" id="scala.tools.nsc.transform;Delambdafy;SkipPhase.prev">prev</a>: scala.tools.nsc.<a href="../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="tools.nsc.Phase">Phase</a><span class="delimiter">)</span> extends <a href="../SubComponent.scala.html#scala.tools.nsc;SubComponent;StdPhase" title="Delambdafy.this.StdPhase">StdPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;SkipPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(unit: Delambdafy.this.global.CompilationUnit)Unit" id="scala.tools.nsc.transform;Delambdafy;SkipPhase.apply">apply</a><span class="delimiter">(</span><a title="Delambdafy.this.global.CompilationUnit" id="scala.tools.nsc.transform;Delambdafy;SkipPhase.apply.unit">unit</a>: global.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="Delambdafy.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  protected def <a title="(unit: Delambdafy.this.global.CompilationUnit)Delambdafy.this.global.Transformer" id="scala.tools.nsc.transform;Delambdafy.newTransformer">newTransformer</a><span class="delimiter">(</span><a title="Delambdafy.this.global.CompilationUnit" id="scala.tools.nsc.transform;Delambdafy.newTransformer.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="Delambdafy.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="Delambdafy.this.global.Transformer">Transformer</a> =
    new <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer" title="Delambdafy.this.DelambdafyTransformer">DelambdafyTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy.newTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  class <a title="class DelambdafyTransformer extends Delambdafy.this.TypingTransformer with Delambdafy.this.TypeAdapter" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer">DelambdafyTransformer</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer" title="Delambdafy.this.DelambdafyTransformer" class="delimiter">(</a><a title="Delambdafy.this.global.CompilationUnit" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="Delambdafy.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer" title="Delambdafy.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> with <a href="TypeAdaptingTransformer.scala.html#scala.tools.nsc.transform;TypeAdaptingTransformer;TypeAdapter" title="Delambdafy.this.TypeAdapter">TypeAdapter</a> <span class="delimiter">{</span>
    private val lambdaClassDefs = new mutable.<a href="../../../collection/mutable/LinkedHashMap.scala.html#scala.collection.mutable;LinkedHashMap" title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,List[Delambdafy.this.global.Tree]]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> <a href="../../../collection/mutable/Map.scala.html#scala.collection.mutable;Map.withDefaultValue" title="scala.collection.mutable.Map[Delambdafy.this.global.Symbol,List[Delambdafy.this.global.Tree]]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.lambdaClassDefs">withDefaultValue</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>


    val <a title="Delambdafy.this.global.analyzer.Typer" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.typer">typer</a> = <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>

    <span class="comment">// we need to know which methods refer to the 'this' reference so that we can determine</span>
    <span class="comment">// which lambdas need access to it</span>
    val <a title="scala.collection.Set[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods">thisReferringMethods</a>: <a href="../../../collection/Set.scala.html#scala.collection;Set" title="scala.collection.Set[Delambdafy.this.global.Symbol]">Set</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val <a title="Delambdafy.this.ThisReferringMethodsTraverser" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.thisReferringMethodsTraverser">thisReferringMethodsTraverser</a> = new <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser" title="Delambdafy.this.ThisReferringMethodsTraverser">ThisReferringMethodsTraverser</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.thisReferringMethodsTraverser" title="Delambdafy.this.ThisReferringMethodsTraverser">thisReferringMethodsTraverser</a> <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse" title="(tree: Delambdafy.this.global.Tree)Unit">traverse</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.body" title="=&gt; Delambdafy.this.global.Tree">body</a>
      val <a title="scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.methodReferringMap">methodReferringMap</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.thisReferringMethodsTraverser" title="Delambdafy.this.ThisReferringMethodsTraverser">thisReferringMethodsTraverser</a>.<a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.liftedMethodReferences" title="=&gt; scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]">liftedMethodReferences</a>
      val <a title="scala.collection.mutable.Set[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.referrers">referrers</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.thisReferringMethodsTraverser" title="Delambdafy.this.ThisReferringMethodsTraverser">thisReferringMethodsTraverser</a>.<a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.thisReferringMethods" title="=&gt; scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">thisReferringMethods</a>
      <span class="comment">// recursively find methods that refer to 'this' directly or indirectly via references to other methods</span>
      <span class="comment">// for each method found add it to the referrers set</span>
      def <a title="(symbol: Delambdafy.this.global.Symbol)Boolean" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis">refersToThis</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis.symbol">symbol</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.referrers" title="scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">referrers</a> <a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.contains" title="(elem: Delambdafy.this.global.Symbol)Boolean">contains</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis.symbol" title="Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span> true
        else if <span class="delimiter">(</span><a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Delambdafy.this.global.Symbol)scala.collection.Set[Delambdafy.this.global.Symbol]">methodReferringMap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis.symbol" title="Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.exists" title="(p: Delambdafy.this.global.Symbol =&gt; Boolean)Boolean">exists</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis" title="(symbol: Delambdafy.this.global.Symbol)Boolean">refersToThis</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// add it early to memoize</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis.symbol" title="Delambdafy.this.global.Symbol">symbol</a><span title="String(&quot; indirectly refers to \'this\'&quot;)" class="string"> indirectly refers to 'this'&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.referrers" title="scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">referrers</a> <a href="../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.+=(70ec98e56e)" title="(elem: Delambdafy.this.global.Symbol)referrers.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis.symbol" title="Delambdafy.this.global.Symbol">symbol</a>
          true
        <span class="delimiter">}</span> else false
      <span class="delimiter">}</span>
      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.methodReferringMap" title="scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]">methodReferringMap</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.keys" title="=&gt; Iterable[Delambdafy.this.global.Symbol]">keys</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.foreach" title="(f: Delambdafy.this.global.Symbol =&gt; Boolean)Unit">foreach</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.refersToThis" title="(symbol: Delambdafy.this.global.Symbol)Boolean">refersToThis</a>
      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods.referrers" title="scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">referrers</a>
    <span class="delimiter">}</span>

    val <a title="scala.collection.mutable.ArrayBuffer[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.accessorMethods">accessorMethods</a> = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.ArrayBuffer[A]">ArrayBuffer</a><span title="(elems: Delambdafy.this.global.Tree*)scala.collection.mutable.ArrayBuffer[Delambdafy.this.global.Tree]" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="comment">// the result of the transformFunction method. A class definition for the lambda, an expression</span>
    <span class="comment">// insantiating the lambda class, and an accessor method for the lambda class to be able to</span>
    <span class="comment">// call the implementation</span>
    case class <a title="class TransformedFunction extends AnyRef with Product with Serializable" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.TransformedFunction.readResolve">TransformedFunction</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Delambdafy.this.global.ClassDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer;TransformedFunction.lambdaClassDef">lambdaClassDef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ClassDef" title="Delambdafy.this.global.ClassDef">ClassDef</a>, <a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer;TransformedFunction.newExpr">newExpr</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a>, <a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer;TransformedFunction.accessorMethod">accessorMethod</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">)</span>

    <span class="comment">// here's the main entry point of the transform</span>
    override def <a title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform">transform</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.tree" title="Delambdafy.this.global.Tree">tree</a> match <span class="delimiter">{</span>
      <span class="comment">// the main thing we care about is lambdas</span>
      case <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.fun">fun</a> @ Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
        <span class="comment">// a lambda beccomes a new class, an instantiation expression, and an</span>
        <span class="comment">// accessor method</span>
        val TransformedFunction<a href="../../../Tuple3.scala.html#scala;Tuple3" title="(Delambdafy.this.global.ClassDef, Delambdafy.this.global.Tree, Delambdafy.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="Delambdafy.this.global.ClassDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.lambdaClassDef">lambdaClassDef</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.newExpr">newExpr</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.accessorMethod">accessorMethod</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction" title="(originalFunction: Delambdafy.this.global.Function)DelambdafyTransformer.this.TransformedFunction">transformFunction</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.TransformedFunction.readResolve" title="DelambdafyTransformer.this.TransformedFunction @unchecked" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.fun" title="Delambdafy.this.global.Function">fun</a><span class="delimiter">)</span>
        <span class="comment">// we'll add accessor methods to the current template later</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.accessorMethods" title="=&gt; scala.collection.mutable.ArrayBuffer[Delambdafy.this.global.Tree]">accessorMethods</a> <a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.+=(780e854f97)" title="(elem: Delambdafy.this.global.Tree)DelambdafyTransformer.this.accessorMethods.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.accessorMethod" title="Delambdafy.this.global.Tree">accessorMethod</a>
        val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.pkg">pkg</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.lambdaClassDef" title="Delambdafy.this.global.ClassDef">lambdaClassDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Delambdafy.this.global.Symbol">owner</a>

        <span class="comment">// we'll add the lambda class to the package later</span>
        <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: Delambdafy.this.global.Symbol, value: List[Delambdafy.this.global.Tree])Unit">lambdaClassDefs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.pkg" title="Delambdafy.this.global.Symbol">pkg</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.lambdaClassDef" title="Delambdafy.this.global.ClassDef">lambdaClassDef</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Delambdafy.this.global.Tree)List[Delambdafy.this.global.Tree]">::</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Delambdafy.this.global.Symbol)List[Delambdafy.this.global.Tree]">lambdaClassDefs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.pkg" title="Delambdafy.this.global.Symbol">pkg</a><span class="delimiter">)</span>

        super.<a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.newExpr" title="Delambdafy.this.global.Tree">newExpr</a><span class="delimiter">)</span>
      <span class="comment">// when we encounter a template (basically the thing that holds body of a class/trait)</span>
      <span class="comment">// we need to updated it to include newly created accesor methods after transforming it</span>
      case Template<span class="delimiter">(</span>_, _, _<span class="delimiter">)</span> =&gt;
        try <span class="delimiter">{</span>
          <span class="comment">// during this call accessorMethods will be populated from the Function case</span>
          val Template<a href="../../../Tuple3.scala.html#scala;Tuple3" title="(List[Delambdafy.this.global.Tree], Delambdafy.this.global.ValDef, List[Delambdafy.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.parents">parents</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.self">self</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.body">body</a><span class="delimiter">)</span> = super.<a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree">transform</a><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree @unchecked" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Template" title="(parents: List[Delambdafy.this.global.Tree], self: Delambdafy.this.global.ValDef, body: List[Delambdafy.this.global.Tree])Delambdafy.this.global.Template">Template</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.parents" title="List[Delambdafy.this.global.Tree]">parents</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.self" title="Delambdafy.this.global.ValDef">self</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.body" title="List[Delambdafy.this.global.Tree]">body</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Tree],Delambdafy.this.global.Tree,List[Delambdafy.this.global.Tree]])List[Delambdafy.this.global.Tree]">++</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.accessorMethods" title="=&gt; scala.collection.mutable.ArrayBuffer[Delambdafy.this.global.Tree]">accessorMethods</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> finally <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.accessorMethods" title="=&gt; scala.collection.mutable.ArrayBuffer[Delambdafy.this.global.Tree]">accessorMethods</a>.<a href="../../../collection/mutable/ArrayBuffer.scala.html#scala.collection.mutable;ArrayBuffer.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case _ =&gt; super.<a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transform.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// this entry point is aimed at the statements in the compilation unit.</span>
    <span class="comment">// after working on the entire compilation until we'll have a set of</span>
    <span class="comment">// new class definitions to add to the top level</span>
    override def <a title="(stats: List[Delambdafy.this.global.Tree], exprOwner: Delambdafy.this.global.Symbol)List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats">transformStats</a><span class="delimiter">(</span><a title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats.stats">stats</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Delambdafy.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats.exprOwner">exprOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Delambdafy.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
      super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformStats" title="(stats: List[Delambdafy.this.global.Tree], exprOwner: Delambdafy.this.global.Symbol)List[Delambdafy.this.global.Tree]">transformStats</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats.stats" title="List[Delambdafy.this.global.Tree]">stats</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats.exprOwner" title="Delambdafy.this.global.Symbol">exprOwner</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Tree],Delambdafy.this.global.Tree,List[Delambdafy.this.global.Tree]])List[Delambdafy.this.global.Tree]">++</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Delambdafy.this.global.Symbol)List[Delambdafy.this.global.Tree]">lambdaClassDefs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformStats.exprOwner" title="Delambdafy.this.global.Symbol">exprOwner</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    private def <a title="(sym: Delambdafy.this.global.Symbol)Option[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol">optionSymbol</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol.sym">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#scala;Option" title="Option[Delambdafy.this.global.Symbol]">Option</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Some" title="(x: Delambdafy.this.global.Symbol)Some[Delambdafy.this.global.Symbol]">Some</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol.sym" title="Delambdafy.this.global.Symbol">sym</a><span class="delimiter">)</span> else <a href="../../../Option.scala.html#scala.None" title="None.type">None</a>

    <span class="comment">// turns a lambda into a new class def, a New expression instantiating that class, and an</span>
    <span class="comment">// accessor method fo the body of the lambda</span>
    private def <a title="(originalFunction: Delambdafy.this.global.Function)DelambdafyTransformer.this.TransformedFunction" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction">transformFunction</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction">originalFunction</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.TransformedFunction.readResolve" title="DelambdafyTransformer.this.TransformedFunction">TransformedFunction</a> = <span class="delimiter">{</span>
      val <a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.functionTpe">functionTpe</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a>
      val <a title="List[Delambdafy.this.global.Type]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.targs">targs</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.functionTpe" title="Delambdafy.this.global.Type">functionTpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeArgs" title="=&gt; List[Delambdafy.this.global.Type]">typeArgs</a>
      val <a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="List[Delambdafy.this.global.Type]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.formals">formals</a> <a href="../../../collection/SeqExtractors.scala.html#scala.collection.:+.unapply" title="(List[Delambdafy.this.global.Type], Delambdafy.this.global.Type)">:+</a> <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.restpe">restpe</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.targs" title="List[Delambdafy.this.global.Type]">targs</a>
      val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass">oldClass</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; Delambdafy.this.global.Symbol">enclClass</a>

      <span class="comment">// find which variables are free in the lambda because those are captures that need to be</span>
      <span class="comment">// passed into the constructor of the anonymous function class</span>
      val <a title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captures">captures</a> = <a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser" title="Delambdafy.this.FreeVarTraverser.type">FreeVarTraverser</a>.<a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf" title="(function: Delambdafy.this.global.Function)scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">freeVarsOf</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a><span class="delimiter">)</span>

      <span class="comment">/**
       * Creates the apply method for the anonymous subclass of FunctionN
       */</span>
      def <a title="(thisProxy: Delambdafy.this.global.Symbol, fun: Delambdafy.this.global.Function)Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod">createAccessorMethod</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.thisProxy">thisProxy</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.fun">fun</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a> = <span class="delimiter">{</span>
        val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.target">target</a> = <a href="#scala.tools.nsc.transform;Delambdafy.targetMethod" title="(fun: Delambdafy.this.global.Function)Delambdafy.this.global.Symbol">targetMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.fun" title="Delambdafy.this.global.Function">fun</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.target" title="Delambdafy.this.global.Symbol">target</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setFlag" title="(mask: Long)target.type">setFlag</a> <span title="Long(8388608L)">STATIC</span>
        <span class="delimiter">}</span>
        val <a title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params">params</a> = <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol" title="(sym: Delambdafy.this.global.Symbol)Option[Delambdafy.this.global.Symbol]">optionSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala.Option.option2Iterable" title="(xo: Option[Delambdafy.this.global.ValDef])Iterable[Delambdafy.this.global.ValDef]">map</a> <span class="delimiter">{</span>proxy:<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(88055a62f0)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params.$anonfun.proxy" title="Delambdafy.this.global.Symbol">proxy</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.ValDef])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[Delambdafy.this.global.ValDef],Delambdafy.this.global.ValDef,Iterable[Delambdafy.this.global.ValDef]])Iterable[Delambdafy.this.global.ValDef]">++</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.target" title="Delambdafy.this.global.Symbol">target</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.paramss" title="=&gt; List[List[Delambdafy.this.global.Symbol]]">paramss</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[Delambdafy.this.global.Symbol] =&gt; scala.collection.GenTraversableOnce[Delambdafy.this.global.Symbol])List[Delambdafy.this.global.Symbol]">flatten</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Delambdafy.this.global.Symbol =&gt; Delambdafy.this.global.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Symbol],Delambdafy.this.global.ValDef,List[Delambdafy.this.global.ValDef]])List[Delambdafy.this.global.ValDef]">map</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef" title="Delambdafy.this.global.ValDef.type">ValDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(88055a62f0)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.ValDef">apply</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[Delambdafy.this.global.ValDef]">toList</a>

        val <a title="Delambdafy.this.global.MethodSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym">methSym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newMethod" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.freshTermName" title="(prefix: String)Delambdafy.this.global.TermName">freshTermName</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.accessor" title="=&gt; Delambdafy.this.global.nme.NameType">accessor</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.target" title="Delambdafy.this.global.Symbol">target</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, FINAL | BRIDGE | SYNTHETIC | PROTECTED <span title="Long(77594657L)">|</span> STATIC<span class="delimiter">)</span>

        val paramSyms = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.TermSymbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms">map</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms.$anonfun.param">param</a> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newSyntheticValueParam" title="(argtype: Delambdafy.this.global.Type, name: Delambdafy.this.global.TermName)Delambdafy.this.global.TermSymbol">newSyntheticValueParam</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms.$anonfun.param" title="Delambdafy.this.global.ValDef">param</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms.$anonfun.param" title="Delambdafy.this.global.ValDef">param</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.name" title="=&gt; Delambdafy.this.global.TermName">name</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Delambdafy.this.global.TermSymbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol),List[(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)]])List[(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)]">zip</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms" title="List[Delambdafy.this.global.TermSymbol]">paramSyms</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ((Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)) =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.x0$1" title="Unit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.valdef">valdef</a>, <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.sym">sym</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.valdef" title="Delambdafy.this.global.ValDef">valdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol_=" title="(x$1: Delambdafy.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.sym" title="Delambdafy.this.global.TermSymbol">sym</a> <span class="delimiter">}</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Delambdafy.this.global.ValDef =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.$anonfun.x$5" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner_=" title="(owner: Delambdafy.this.global.Symbol)Unit">owner</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a><span class="delimiter">)</span>

        val <a title="Delambdafy.this.global.MethodType" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methodType">methodType</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[Delambdafy.this.global.Symbol], resultType: Delambdafy.this.global.Type)Delambdafy.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms" title="List[Delambdafy.this.global.TermSymbol]">paramSyms</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.restpe" title="Delambdafy.this.global.Type">restpe</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)methSym.type">setInfo</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methodType" title="Delambdafy.this.global.MethodType">methodType</a>

        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Delambdafy.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Delambdafy.this.global.MethodSymbol)Delambdafy.this.global.MethodSymbol">enter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>

        val body = <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: Delambdafy.this.global.analyzer.global.Tree)Delambdafy.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span>
          val <a title="Delambdafy.this.global.Select" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body.newTarget">newTarget</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Delambdafy.this.global.Tree, sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Select">Select</a><span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedRef(23ce0e46ac)" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.RefTree">mkAttributedRef</a><span class="delimiter">(</span><a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)Delambdafy.this.global.TermSymbol">paramSyms</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.target" title="Delambdafy.this.global.Symbol">target</a><span class="delimiter">)</span>
          val newParams = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.paramSyms" title="List[Delambdafy.this.global.TermSymbol]">paramSyms</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.drop" title="(n: Int)List[Delambdafy.this.global.TermSymbol]">drop</a> <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> else <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.Ident]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body.newParams">map</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Ident">Ident</a>
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Delambdafy.this.global.Tree, args: List[Delambdafy.this.global.Tree])Delambdafy.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body.newTarget" title="Delambdafy.this.global.Select">newTarget</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body.newParams" title="List[Delambdafy.this.global.Ident]">newParams</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="Delambdafy.this.global.analyzer.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>
        val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methDef">methDef</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.DefDef.apply(7526f3aad6)" title="(sym: Delambdafy.this.global.Symbol, vparamss: List[List[Delambdafy.this.global.ValDef]], rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: List[Delambdafy.this.global.ValDef]*)List[List[Delambdafy.this.global.ValDef]]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a><span class="delimiter">)</span>

        <span class="comment">// Have to repack the type to avoid mismatches when existentials</span>
        <span class="comment">// appear in the result - see SI-4869.</span>
        <span class="comment">// TODO probably don't need packedType</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methDef" title="Delambdafy.this.global.DefDef">methDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.tpt" title="=&gt; Delambdafy.this.global.Tree">tpt</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Delambdafy.this.global.Type)methDef.tpt.type">setType</a> <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.packedType" title="(tree: Delambdafy.this.global.analyzer.global.Tree, owner: Delambdafy.this.global.analyzer.global.Symbol)Delambdafy.this.global.analyzer.global.Type">packedType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod.methDef" title="Delambdafy.this.global.DefDef">methDef</a>
      <span class="delimiter">}</span>

      <span class="comment">/**
       * Creates the apply method for the anonymous subclass of FunctionN
       */</span>
      def <a title="(newClass: Delambdafy.this.global.Symbol, fun: Delambdafy.this.global.Function, accessor: Delambdafy.this.global.DefDef, thisProxy: Delambdafy.this.global.Symbol)Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod">createApplyMethod</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.newClass">newClass</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun">fun</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a>, <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.accessor">accessor</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.thisProxy">thisProxy</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a> = <span class="delimiter">{</span>
        val <a title="Delambdafy.this.global.MethodSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym">methSym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newMethod" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.apply" title="=&gt; Delambdafy.this.global.nme.NameType">apply</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, FINAL <span title="Long(2097184L)">|</span> SYNTHETIC<span class="delimiter">)</span>
        val params = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function.vparams" title="=&gt; List[Delambdafy.this.global.ValDef]">vparams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params.$anonfun.x$6" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.duplicate" title="=&gt; x$6.type">duplicate</a><span class="delimiter">)</span>

        val <a title="List[Delambdafy.this.global.TermSymbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms">paramSyms</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.map2" title="(xs1: List[Delambdafy.this.global.Type], xs2: List[Delambdafy.this.global.ValDef])(f: (Delambdafy.this.global.Type, Delambdafy.this.global.ValDef) =&gt; Delambdafy.this.global.TermSymbol)List[Delambdafy.this.global.TermSymbol]">map2</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.formals" title="List[Delambdafy.this.global.Type]">formals</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="delimiter">(</span><a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms.$anonfun.tp">tp</a>, <a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms.$anonfun.vparam">vparam</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newSyntheticValueParam" title="(argtype: Delambdafy.this.global.Type, name: Delambdafy.this.global.TermName)Delambdafy.this.global.TermSymbol">newSyntheticValueParam</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms.$anonfun.tp" title="Delambdafy.this.global.Type">tp</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms.$anonfun.vparam" title="Delambdafy.this.global.ValDef">vparam</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.name" title="=&gt; Delambdafy.this.global.TermName">name</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Delambdafy.this.global.TermSymbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol),List[(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)]])List[(Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)]">zip</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms" title="List[Delambdafy.this.global.TermSymbol]">paramSyms</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ((Delambdafy.this.global.ValDef, Delambdafy.this.global.TermSymbol)) =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.x0$2" title="Unit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.valdef">valdef</a>, <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.sym">sym</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.valdef" title="Delambdafy.this.global.ValDef">valdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol_=" title="(x$1: Delambdafy.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.sym" title="Delambdafy.this.global.TermSymbol">sym</a> <span class="delimiter">}</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Delambdafy.this.global.ValDef =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.x$7" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner_=" title="(owner: Delambdafy.this.global.Symbol)Unit">owner</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a><span class="delimiter">)</span>

        val <a title="Delambdafy.this.global.MethodType" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methodType">methodType</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[Delambdafy.this.global.Symbol], resultType: Delambdafy.this.global.Type)Delambdafy.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.paramSyms" title="List[Delambdafy.this.global.TermSymbol]">paramSyms</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.restpe" title="Delambdafy.this.global.Type">restpe</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)methSym.type">setInfo</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methodType" title="Delambdafy.this.global.MethodType">methodType</a>

        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Delambdafy.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Delambdafy.this.global.MethodSymbol)Delambdafy.this.global.MethodSymbol">enter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>

        val Apply<a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.oldParams.oldParams" title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.oldParams" class="delimiter">(</a>_, <a title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.oldParams.oldParams">oldParams</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function.body" title="=&gt; Delambdafy.this.global.Tree">body</a>

        val body = <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a> <a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="Delambdafy.this.global.analyzer.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body">typed</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Delambdafy.this.global.Tree, args: List[Delambdafy.this.global.Tree])Delambdafy.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Delambdafy.this.global.Tree, sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Select">Select</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.accessor" title="Delambdafy.this.global.DefDef">accessor</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol" title="(sym: Delambdafy.this.global.Symbol)Option[Delambdafy.this.global.Symbol]">optionSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Option.map" title="(f: Delambdafy.this.global.Symbol =&gt; Delambdafy.this.global.Select)Option[Delambdafy.this.global.Select]">map</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body.$anonfun.tp">tp</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Delambdafy.this.global.Tree, sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Select">Select</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body.$anonfun.tp" title="Delambdafy.this.global.Symbol">tp</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.toList" title="=&gt; List[Delambdafy.this.global.Select]">toList</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Select],Delambdafy.this.global.Tree,List[Delambdafy.this.global.Tree]])List[Delambdafy.this.global.Tree]">++</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.oldParams" title="List[Delambdafy.this.global.Tree]">oldParams</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.substituteSymbols" title="(from: List[Delambdafy.this.global.analyzer.global.Symbol], to: List[Delambdafy.this.global.analyzer.global.Symbol])Delambdafy.this.global.analyzer.global.Tree">substituteSymbols</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function.vparams" title="=&gt; List[Delambdafy.this.global.ValDef]">vparams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Delambdafy.this.global.ValDef =&gt; Delambdafy.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],Delambdafy.this.global.Symbol,List[Delambdafy.this.global.analyzer.global.Symbol]])List[Delambdafy.this.global.analyzer.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.x$8" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Delambdafy.this.global.ValDef =&gt; Delambdafy.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],Delambdafy.this.global.Symbol,List[Delambdafy.this.global.analyzer.global.Symbol]])List[Delambdafy.this.global.analyzer.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.$anonfun.x$9" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.changeOwner" title="(pairs: (Delambdafy.this.global.analyzer.global.Symbol, Delambdafy.this.global.analyzer.global.Symbol)*)Delambdafy.this.global.analyzer.global.Tree">changeOwner</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.fun" title="Delambdafy.this.global.Function">fun</a>.<a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: Delambdafy.this.global.Symbol)ArrowAssoc[Delambdafy.this.global.Symbol]">symbol</a> <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Delambdafy.this.global.MethodSymbol)(Delambdafy.this.global.Symbol, Delambdafy.this.global.MethodSymbol)">-&gt;</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a><span class="delimiter">)</span>

        val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methDef">methDef</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.DefDef.apply(7526f3aad6)" title="(sym: Delambdafy.this.global.Symbol, vparamss: List[List[Delambdafy.this.global.ValDef]], rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: List[Delambdafy.this.global.ValDef]*)List[List[Delambdafy.this.global.ValDef]]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.params" title="List[Delambdafy.this.global.ValDef]">params</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a><span class="delimiter">)</span>

        <span class="comment">// Have to repack the type to avoid mismatches when existentials</span>
        <span class="comment">// appear in the result - see SI-4869.</span>
        <span class="comment">// TODO probably don't need packedType</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methDef" title="Delambdafy.this.global.DefDef">methDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.tpt" title="=&gt; Delambdafy.this.global.Tree">tpt</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Delambdafy.this.global.Type)methDef.tpt.type">setType</a> <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.packedType" title="(tree: Delambdafy.this.global.analyzer.global.Tree, owner: Delambdafy.this.global.analyzer.global.Symbol)Delambdafy.this.global.analyzer.global.Type">packedType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.body" title="Delambdafy.this.global.analyzer.global.Tree">body</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methSym" title="Delambdafy.this.global.MethodSymbol">methSym</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod.methDef" title="Delambdafy.this.global.DefDef">methDef</a>
      <span class="delimiter">}</span>

      <span class="comment">/**
       * Creates the constructor on the newly created class. It will handle
       * initialization of members that represent the captured environment
       */</span>
      def <a title="(newClass: Delambdafy.this.global.Symbol, members: List[Delambdafy.this.global.ValDef])Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor">createConstructor</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass">newClass</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.members">members</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Delambdafy.this.global.ValDef]">List</a><span class="delimiter">[</span>ValDef<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a> = <span class="delimiter">{</span>
        val <a title="Delambdafy.this.global.MethodSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.constrSym">constrSym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newConstructor" title="(pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.MethodSymbol">newConstructor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>

        val <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(List[Delambdafy.this.global.TermSymbol], List[Delambdafy.this.global.ValDef], List[Delambdafy.this.global.Assign])" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="List[Delambdafy.this.global.TermSymbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.paramSymbols">paramSymbols</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.params">params</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="List[Delambdafy.this.global.Assign]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.assigns">assigns</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.members" title="List[Delambdafy.this.global.ValDef]">members</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Delambdafy.this.global.ValDef =&gt; (Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign))(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],(Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign),List[(Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign)]])List[(Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign)]">map</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.member">member</a> =&gt;
          val <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramSymbol">paramSymbol</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newVariable" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.member" title="Delambdafy.this.global.ValDef">member</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; Delambdafy.this.global.Symbol#NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.toTermName" title="=&gt; Delambdafy.this.global.TermName">toTermName</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramSymbol" title="Delambdafy.this.global.TermSymbol">paramSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)paramSymbol.type">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.member" title="Delambdafy.this.global.ValDef">member</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a><span class="delimiter">)</span>
          val <a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramVal">paramVal</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(88055a62f0)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramSymbol" title="Delambdafy.this.global.TermSymbol">paramSymbol</a><span class="delimiter">)</span>
          val <a title="Delambdafy.this.global.Ident" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramIdent">paramIdent</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramSymbol" title="Delambdafy.this.global.TermSymbol">paramSymbol</a><span class="delimiter">)</span>
          val <a title="Delambdafy.this.global.Assign" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.assign">assign</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Assign" title="(lhs: Delambdafy.this.global.Tree, rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Delambdafy.this.global.Tree, sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Select">Select</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.member" title="Delambdafy.this.global.ValDef">member</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramIdent" title="Delambdafy.this.global.Ident">paramIdent</a><span class="delimiter">)</span>

          <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: Delambdafy.this.global.TermSymbol, _2: Delambdafy.this.global.ValDef, _3: Delambdafy.this.global.Assign)(Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign)" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramSymbol" title="Delambdafy.this.global.TermSymbol">paramSymbol</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.paramVal" title="Delambdafy.this.global.ValDef">paramVal</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.x$10.$anonfun.assign" title="Delambdafy.this.global.Assign">assign</a><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.unzip3" title="(implicit asTriple: ((Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign)) =&gt; (Delambdafy.this.global.TermSymbol, Delambdafy.this.global.ValDef, Delambdafy.this.global.Assign))(List[Delambdafy.this.global.TermSymbol], List[Delambdafy.this.global.ValDef], List[Delambdafy.this.global.Assign])">unzip3</a>

        val <a title="Delambdafy.this.global.MethodType" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.constrType">constrType</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[Delambdafy.this.global.Symbol], resultType: Delambdafy.this.global.Type)Delambdafy.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.paramSymbols" title="List[Delambdafy.this.global.TermSymbol]">paramSymbols</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.thisType" title="=&gt; Delambdafy.this.global.Type">thisType</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.constrSym" title="Delambdafy.this.global.MethodSymbol">constrSym</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfoAndEnter" title="(info: Delambdafy.this.global.Type)constrSym.type">setInfoAndEnter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.constrType" title="Delambdafy.this.global.MethodType">constrType</a>

        val body =
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="(stats: List[Delambdafy.this.global.Tree], expr: Delambdafy.this.global.Tree)Delambdafy.this.global.Block">Block</a><span class="delimiter">(</span>
            <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Delambdafy.this.global.Apply*)List[Delambdafy.this.global.Apply]">List</a><span class="delimiter">(</span>
              <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Delambdafy.this.global.Tree, args: List[Delambdafy.this.global.Tree])Delambdafy.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Select" title="(qualifier: Delambdafy.this.global.Tree, name: Delambdafy.this.global.Name)Delambdafy.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Super" title="(qual: Delambdafy.this.global.Tree, mix: Delambdafy.this.global.TypeName)Delambdafy.this.global.Super">Super</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.tpnme" title="Delambdafy.this.global.tpnme.type">tpnme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;CommonNames.EMPTY" title="=&gt; Delambdafy.this.global.tpnme.NameType">EMPTY</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.Super">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.CONSTRUCTOR" title="=&gt; Delambdafy.this.global.nme.NameType">CONSTRUCTOR</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.Select">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.Apply">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>
            <span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.TermTree with Serializable])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Apply],Delambdafy.this.global.TermTree with Serializable,List[Delambdafy.this.global.TermTree with Serializable]])List[Delambdafy.this.global.TermTree with Serializable]">++</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.assigns" title="List[Delambdafy.this.global.Assign]">assigns</a>,
            <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: Delambdafy.this.global.Constant)Delambdafy.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)Delambdafy.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a>
          <span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="Delambdafy.this.global.Block" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.body">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>

        <span class="delimiter">(</span><a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a> <a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: Delambdafy.this.global.analyzer.global.Tree)Delambdafy.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.DefDef.apply(7526f3aad6)" title="(sym: Delambdafy.this.global.Symbol, vparamss: List[List[Delambdafy.this.global.ValDef]], rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.constrSym" title="Delambdafy.this.global.MethodSymbol">constrSym</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: List[Delambdafy.this.global.ValDef]*)List[List[Delambdafy.this.global.ValDef]]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.params" title="List[Delambdafy.this.global.ValDef]">params</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.body" title="Delambdafy.this.global.Block">body</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.analyzer.global.Tree">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Delambdafy.this.global.DefDef" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">]</span>
      <span class="delimiter">}</span>

      val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.pkg">pkg</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Delambdafy.this.global.Symbol">owner</a>

      <span class="comment">// Parent for anonymous class def</span>
      val <a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.abstractFunctionErasedType">abstractFunctionErasedType</a> = <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;VarArityClass.apply" title="(i: Int)Delambdafy.this.global.Symbol">AbstractFunctionClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.formals" title="List[Delambdafy.this.global.Type]">formals</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a>

      <span class="comment">// anonymous subclass of FunctionN with an apply method</span>
      def <a title="=&gt; (Delambdafy.this.global.ClassDef, Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol; type NameType &lt;: Delambdafy.this.global.TermName}; type NameType &lt;: Delambdafy.this.global.TermName}, Delambdafy.this.global.DefDef)" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass">makeAnonymousClass</a> = <span class="delimiter">{</span>
        val <a title="List[Delambdafy.this.global.Type]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.parents">parents</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.addSerializable" title="(ps: Delambdafy.this.global.Type*)List[Delambdafy.this.global.Type]">addSerializable</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.abstractFunctionErasedType" title="Delambdafy.this.global.Type">abstractFunctionErasedType</a><span class="delimiter">)</span>
        val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.funOwner">funOwner</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Delambdafy.this.global.Symbol">owner</a>

        <span class="comment">// TODO harmonize the naming of delamdafy anon-fun classes with those spun up by Uncurry</span>
        <span class="comment">//      - make `anonClass.isAnonymousClass` true.</span>
        <span class="comment">//      - use `newAnonymousClassSymbol` or push the required variations into a similar factory method</span>
        <span class="comment">//      - reinstate the assertion in `Erasure.resolveAnonymousBridgeClash`</span>
        val suffix = <a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../Predef.scala.html#scala.Predef.any2stringadd(6b32434ac5)" title="(self: Delambdafy.this.global.nme.NameType)any2stringadd[Delambdafy.this.global.nme.NameType]">DELAMBDAFY_LAMBDA_CLASS_NAME</a> <a href="../../../Predef.scala.html#scala.Predef;any2stringadd.+" title="(other: String)String">+</a> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <a title="String" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.suffix">+</a> <span class="delimiter">(</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.funOwner" title="Delambdafy.this.global.Symbol">funOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isPrimaryConstructor" title="=&gt; Boolean">isPrimaryConstructor</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
          else <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.funOwner" title="Delambdafy.this.global.Symbol">funOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; funOwner.NameType">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
        <span class="delimiter">)</span>
        val <a title="String" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.oldClassPart">oldClassPart</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; oldClass.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.decode" title="=&gt; String">decode</a>
        <span class="comment">// make sure the class name doesn't contain $anon, otherwsie isAnonymousClass/Function may be true</span>
        val <a title="Delambdafy.this.global.TypeName" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.name">name</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.freshTypeName" title="(prefix: String)Delambdafy.this.global.TypeName">freshTypeName</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.oldClassPart" title="String">oldClassPart</a><span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.suffix" title="String">suffix</a><span title="String(&quot;&quot;)" class="string">&quot;</span>.<span title="(x$1: CharSequence, x$2: CharSequence)String">replace</span><span class="delimiter">(</span><span title="String(&quot;$anon&quot;)" class="string">&quot;$anon&quot;</span>, <span title="String(&quot;$nestedInAnon&quot;)" class="string">&quot;$nestedInAnon&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

        val lambdaClass = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.pkg" title="Delambdafy.this.global.Symbol">pkg</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newClassSymbol" title="(name: Delambdafy.this.global.TypeName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.ClassSymbol">newClassSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.name" title="Delambdafy.this.global.TypeName">name</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, FINAL <span title="Long(2097184L)">|</span> SYNTHETIC<span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.addAnnotation(6ca9099fc5)" title="Delambdafy.this.global.ClassSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass">addAnnotation</a> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.SerialVersionUIDAnnotation" title="=&gt; Delambdafy.this.global.AnnotationInfo">SerialVersionUIDAnnotation</a>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)lambdaClass.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;ClassInfoType" title="(parents: List[Delambdafy.this.global.Type], decls: Delambdafy.this.global.Scope, typeSymbol: Delambdafy.this.global.Symbol)Delambdafy.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.parents" title="List[Delambdafy.this.global.Type]">parents</a>, <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes.newScope" title="=&gt; Delambdafy.this.global.Scope">newScope</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;ClassSymbol.isAnonymousClass" title="=&gt; Boolean">isAnonymousClass</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isAnonymousFunction" title="=&gt; Boolean">isAnonymousFunction</a>, <span title="String(&quot;anonymous class name: &quot;)" class="string">&quot;anonymous class name: &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;ClassSymbol.name" title="=&gt; Delambdafy.this.global.TypeName">name</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isDelambdafyFunction" title="=&gt; Boolean">isDelambdafyFunction</a>, <span title="String(&quot;not lambda class name: &quot;)" class="string">&quot;not lambda class name: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;ClassSymbol.name" title="=&gt; Delambdafy.this.global.TypeName">name</a><span class="delimiter">)</span>

        val <a title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.captureProxies2">captureProxies2</a> = new <a href="../../../collection/mutable/LinkedHashMap.scala.html#scala.collection.mutable;LinkedHashMap" title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">LinkedHashMap</a><span class="delimiter">[</span>Symbol, TermSymbol<span class="delimiter">]</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captures" title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">captures</a> <a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.foreach" title="(f: Delambdafy.this.global.Symbol =&gt; scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol])Unit">foreach</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.capture">capture</a> =&gt;
          val <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.sym">sym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newVariable" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.freshTermName" title="(prefix: String)Delambdafy.this.global.TermName">freshTermName</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.capture" title="Delambdafy.this.global.Symbol">capture</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; capture.NameType">name</a>.<span title="()String">toString</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.capture" title="Delambdafy.this.global.Symbol">capture</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.sym" title="Delambdafy.this.global.TermSymbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)sym.type">setInfo</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.capture" title="Delambdafy.this.global.Symbol">capture</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.captureProxies2" title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">captureProxies2</a> <a href="../../../collection/mutable/LinkedHashMap.scala.html#scala.collection.mutable;LinkedHashMap.+=(58194dd58f)" title="(kv: (Delambdafy.this.global.Symbol, Delambdafy.this.global.TermSymbol))captureProxies2.type">+=</a> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Delambdafy.this.global.Symbol, _2: Delambdafy.this.global.TermSymbol)(Delambdafy.this.global.Symbol, Delambdafy.this.global.TermSymbol)" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.capture" title="Delambdafy.this.global.Symbol">capture</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.sym" title="Delambdafy.this.global.TermSymbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="comment">// the Optional proxy that will hold a reference to the 'this'</span>
        <span class="comment">// object used by the lambda, if any. NoSymbol if there is no this proxy</span>
        val <a title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy">thisProxy</a> = <span class="delimiter">{</span>
          val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy.target">target</a> = <a href="#scala.tools.nsc.transform;Delambdafy.targetMethod" title="(fun: Delambdafy.this.global.Function)Delambdafy.this.global.Symbol">targetMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.thisReferringMethods" title="=&gt; scala.collection.Set[Delambdafy.this.global.Symbol]">thisReferringMethods</a> <a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.contains" title="(elem: Delambdafy.this.global.Symbol)Boolean">contains</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy.target" title="Delambdafy.this.global.Symbol">target</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy.sym">sym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newVariable" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.FAKE_LOCAL_THIS" title="=&gt; Delambdafy.this.global.nme.NameType">FAKE_LOCAL_THIS</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy.sym" title="Delambdafy.this.global.TermSymbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info_=" title="(info: Delambdafy.this.global.Type)Unit">info</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a>
            <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy.sym" title="Delambdafy.this.global.TermSymbol">sym</a>
          <span class="delimiter">}</span> else <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Delambdafy.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>

        val <a title="Delambdafy.this.DeCapturifyTransformer" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturify">decapturify</a> = new <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer" title="Delambdafy.this.DeCapturifyTransformer">DeCapturifyTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.captureProxies2" title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">captureProxies2</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span>

        val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.accessorMethod">accessorMethod</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createAccessorMethod" title="(thisProxy: Delambdafy.this.global.Symbol, fun: Delambdafy.this.global.Function)Delambdafy.this.global.DefDef">createAccessorMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a><span class="delimiter">)</span>

        val <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturedFunction">decapturedFunction</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturify" title="Delambdafy.this.DeCapturifyTransformer">decapturify</a>.<a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.transform" title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Delambdafy.this.global.Function" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a><span class="delimiter">]</span>

        val members = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol" title="(sym: Delambdafy.this.global.Symbol)Option[Delambdafy.this.global.Symbol]">optionSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.toList" title="=&gt; List[Delambdafy.this.global.Symbol]">toList</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Symbol],Delambdafy.this.global.Symbol,List[Delambdafy.this.global.Symbol]])List[Delambdafy.this.global.Symbol]">++</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.captureProxies2" title="scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">captureProxies2</a> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.map" title="(f: ((Delambdafy.this.global.Symbol, Delambdafy.this.global.TermSymbol)) =&gt; Delambdafy.this.global.TermSymbol)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.LinkedHashMap[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol],Delambdafy.this.global.TermSymbol,scala.collection.mutable.Iterable[Delambdafy.this.global.TermSymbol]])scala.collection.mutable.Iterable[Delambdafy.this.global.TermSymbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members.$anonfun.x$11" title="(Delambdafy.this.global.Symbol, Delambdafy.this.global.TermSymbol)">_</a>.<a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="=&gt; Delambdafy.this.global.TermSymbol">_2</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members">map</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members.$anonfun.member">member</a> =&gt;
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Delambdafy.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Symbol">enter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members.$anonfun.member" title="Delambdafy.this.global.Symbol">member</a>
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: Delambdafy.this.global.Symbol, rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members.$anonfun.member" title="Delambdafy.this.global.Symbol">member</a>, <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkZero" title="(tp: Delambdafy.this.global.gen.global.Type)Delambdafy.this.global.gen.global.Tree">mkZero</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members.$anonfun.member" title="Delambdafy.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.ValDef">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturedFunction" title="Delambdafy.this.global.Function">decapturedFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>
        <span class="delimiter">}</span>

        <span class="comment">// constructor</span>
        val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.constr">constr</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createConstructor" title="(newClass: Delambdafy.this.global.Symbol, members: List[Delambdafy.this.global.ValDef])Delambdafy.this.global.DefDef">createConstructor</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members" title="List[Delambdafy.this.global.ValDef]">members</a><span class="delimiter">)</span>

        <span class="comment">// apply method with same arguments and return type as original lambda.</span>
        val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.applyMethodDef">applyMethodDef</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.createApplyMethod" title="(newClass: Delambdafy.this.global.Symbol, fun: Delambdafy.this.global.Function, accessor: Delambdafy.this.global.DefDef, thisProxy: Delambdafy.this.global.Symbol)Delambdafy.this.global.DefDef">createApplyMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturedFunction" title="Delambdafy.this.global.Function">decapturedFunction</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.accessorMethod" title="Delambdafy.this.global.DefDef">accessorMethod</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span>

        val <a title="Option[Delambdafy.this.global.DefDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.bridgeMethod">bridgeMethod</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod" title="(newClass: Delambdafy.this.global.Symbol, originalFunction: Delambdafy.this.global.Function, applyMethod: Delambdafy.this.global.DefDef)Option[Delambdafy.this.global.DefDef]">createBridgeMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.applyMethodDef" title="Delambdafy.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span>

        def <a title="(sym: Delambdafy.this.global.Symbol)String" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef">fulldef</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym" title="Delambdafy.this.global.Symbol">sym</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Delambdafy.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.toString" title="()String">toString</a>
          else <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym" title="Delambdafy.this.global.Symbol">sym</a><span title="String(&quot;: &quot;)">: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a><span class="delimiter">}</span><span title="String(&quot; in &quot;)"> in $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.fulldef.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Delambdafy.this.global.Symbol">owner</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>

        <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.bridgeMethod" title="Option[Delambdafy.this.global.DefDef]">bridgeMethod</a> <a href="../../../Option.scala.html#scala;Option.foreach" title="(f: Delambdafy.this.global.DefDef =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.bm">bm</a> =&gt;
          <span class="comment">// TODO SI-6260 maybe just create the apply method with the signature (Object =&gt; Object) in all cases</span>
          <span class="comment">//      rather than the method+bridge pair.</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.bm" title="Delambdafy.this.global.DefDef">bm</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.=:=" title="(that: Delambdafy.this.global.Type)Boolean">=:=</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.applyMethodDef" title="Delambdafy.this.global.DefDef">applyMethodDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.erasure" title="Delambdafy.this.global.erasure.type">erasure</a>.<a href="Erasure.scala.html#scala.tools.nsc.transform;Erasure.resolveAnonymousBridgeClash" title="(sym: Delambdafy.this.global.erasure.global.Symbol, bridge: Delambdafy.this.global.erasure.global.Symbol)Unit">resolveAnonymousBridgeClash</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.applyMethodDef" title="Delambdafy.this.global.DefDef">applyMethodDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.$anonfun.bm" title="Delambdafy.this.global.DefDef">bm</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>

        val body = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.members" title="List[Delambdafy.this.global.ValDef]">members</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.ValOrDefDef with Serializable])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.ValDef],Delambdafy.this.global.ValOrDefDef with Serializable,List[Delambdafy.this.global.ValOrDefDef with Serializable]])List[Delambdafy.this.global.ValOrDefDef with Serializable]">++</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Delambdafy.this.global.DefDef*)List[Delambdafy.this.global.DefDef]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.constr" title="Delambdafy.this.global.DefDef">constr</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.applyMethodDef" title="Delambdafy.this.global.DefDef">applyMethodDef</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="List[Delambdafy.this.global.ValOrDefDef with Serializable]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.body">++</a> <a href="../../../Option.scala.html#scala.Option.option2Iterable" title="(xo: Option[Delambdafy.this.global.DefDef])Iterable[Delambdafy.this.global.DefDef]">bridgeMethod</a>

        <span class="comment">// TODO if member fields are private this complains that they're not accessible</span>
        <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: Delambdafy.this.global.ClassDef, _2: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol; type NameType &lt;: Delambdafy.this.global.TermName}; type NameType &lt;: Delambdafy.this.global.TermName}, _3: Delambdafy.this.global.DefDef)(Delambdafy.this.global.ClassDef, Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol; type NameType &lt;: Delambdafy.this.global.TermName}; type NameType &lt;: Delambdafy.this.global.TermName}, Delambdafy.this.global.DefDef)" class="delimiter">(</a><a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: Delambdafy.this.global.analyzer.global.Position)(tree: Delambdafy.this.global.analyzer.global.Tree)Delambdafy.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.decapturedFunction" title="Delambdafy.this.global.Function">decapturedFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ClassDef.apply(58635d4279)" title="(sym: Delambdafy.this.global.Symbol, body: List[Delambdafy.this.global.Tree])Delambdafy.this.global.ClassDef">ClassDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.lambdaClass" title="Delambdafy.this.global.ClassSymbol">lambdaClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.body" title="List[Delambdafy.this.global.ValOrDefDef with Serializable]">body</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Delambdafy.this.global.ClassDef" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ClassDef" title="Delambdafy.this.global.ClassDef">ClassDef</a><span class="delimiter">]</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass.accessorMethod" title="Delambdafy.this.global.DefDef">accessorMethod</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      val <a href="../../../Tuple3.scala.html#scala;Tuple3" title="(Delambdafy.this.global.ClassDef, Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol; type NameType &lt;: Delambdafy.this.global.TermName}; type NameType &lt;: Delambdafy.this.global.TermName}, Delambdafy.this.global.DefDef)" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="Delambdafy.this.global.ClassDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.anonymousClassDef">anonymousClassDef</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.thisProxy">thisProxy</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.accessorMethod">accessorMethod</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.makeAnonymousClass" title="=&gt; (Delambdafy.this.global.ClassDef, Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol{def name: Delambdafy.this.global.TermName; def rawname: Delambdafy.this.global.TermName; type TypeOfClonedSymbol &gt;: Delambdafy.this.global.TermSymbol with Delambdafy.this.global.NoSymbol &lt;: Delambdafy.this.global.Symbol; type NameType &lt;: Delambdafy.this.global.TermName}; type NameType &lt;: Delambdafy.this.global.TermName}, Delambdafy.this.global.DefDef)">makeAnonymousClass</a>

      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.pkg" title="Delambdafy.this.global.Symbol">pkg</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Delambdafy.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Symbol">enter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.anonymousClassDef" title="Delambdafy.this.global.ClassDef">anonymousClassDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>

      val thisArg = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.optionSymbol" title="(sym: Delambdafy.this.global.Symbol)Option[Delambdafy.this.global.Symbol]">optionSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.thisProxy" title="&lt;refinement of Delambdafy.this.global.Symbol&gt; extends Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Option.map" title="Option[Delambdafy.this.global.gen.global.This]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.thisArg">map</a> <span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.thisArg.$anonfun.x$13">_</a> =&gt; <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.gen.global.This">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a><span class="delimiter">)</span>
      val captureArgs = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captures" title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">captures</a> <a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Ident]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captureArgs">map</a> <span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captureArgs.$anonfun.capture">capture</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captureArgs.$anonfun.capture" title="Delambdafy.this.global.Symbol">capture</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Delambdafy.this.global.Ident">setPos</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a><span class="delimiter">)</span>

      val <a title="Delambdafy.this.global.Typed" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.newStat">newStat</a> =
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Typed" title="(expr: Delambdafy.this.global.Tree, tpt: Delambdafy.this.global.Tree)Delambdafy.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.New(4de1e94e7d)" title="(sym: Delambdafy.this.global.Symbol, args: Delambdafy.this.global.Tree*)Delambdafy.this.global.Tree">New</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.anonymousClassDef" title="Delambdafy.this.global.ClassDef">anonymousClassDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>, <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.thisArg" title="Option[Delambdafy.this.global.gen.global.This]">thisArg</a>.<a href="../../../Option.scala.html#scala;Option.toList" title="=&gt; List[Delambdafy.this.global.gen.global.This]">toList</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[Delambdafy.this.global.gen.global.SymTree with Serializable])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.gen.global.This],Delambdafy.this.global.gen.global.SymTree with Serializable,List[Delambdafy.this.global.gen.global.SymTree with Serializable]])List[Delambdafy.this.global.gen.global.SymTree with Serializable]">++</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.captureArgs" title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Ident]">captureArgs</a><span class="delimiter">)</span>: _*<span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: Delambdafy.this.global.Type)Delambdafy.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.abstractFunctionErasedType" title="Delambdafy.this.global.Type">abstractFunctionErasedType</a><span class="delimiter">)</span><span class="delimiter">)</span>

      val <a title="Delambdafy.this.global.analyzer.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.typedNewStat">typedNewStat</a> = <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: Delambdafy.this.global.analyzer.global.Position)(tree: Delambdafy.this.global.analyzer.global.Tree)Delambdafy.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.newStat" title="Delambdafy.this.global.Typed">newStat</a><span class="delimiter">)</span>

      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.TransformedFunction.readResolve" title="(lambdaClassDef: Delambdafy.this.global.ClassDef, newExpr: Delambdafy.this.global.Tree, accessorMethod: Delambdafy.this.global.Tree)DelambdafyTransformer.this.TransformedFunction">TransformedFunction</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.anonymousClassDef" title="Delambdafy.this.global.ClassDef">anonymousClassDef</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.typedNewStat" title="Delambdafy.this.global.analyzer.global.Tree">typedNewStat</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.transformFunction.accessorMethod" title="Delambdafy.this.global.DefDef">accessorMethod</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Creates a bridge method if needed. The bridge method forwards from apply(x1: Object, x2: Object...xn: Object): Object to
     * apply(x1: T1, x2: T2...xn: Tn): T0 using type adaptation on each input and output. The only time a bridge isn't needed
     * is when the original lambda is already erased to type Object, Object, Object... =&gt; Object
     */</span>
    def <a title="(newClass: Delambdafy.this.global.Symbol, originalFunction: Delambdafy.this.global.Function, applyMethod: Delambdafy.this.global.DefDef)Option[Delambdafy.this.global.DefDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod">createBridgeMethod</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.newClass">newClass</a>:<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.originalFunction">originalFunction</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a>, <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.applyMethod">applyMethod</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#scala;Option" title="Option[Delambdafy.this.global.DefDef]">Option</a><span class="delimiter">[</span>DefDef<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val <a title="Delambdafy.this.global.MethodSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeMethSym">bridgeMethSym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newMethod" title="(name: Delambdafy.this.global.TermName, pos: Delambdafy.this.global.Position, newFlags: Long)Delambdafy.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Delambdafy.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.apply" title="=&gt; Delambdafy.this.global.nme.NameType">apply</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.applyMethod" title="Delambdafy.this.global.DefDef">applyMethod</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Delambdafy.this.global.Position">pos</a>, FINAL | SYNTHETIC <span title="Long(69206048L)">|</span> BRIDGE<span class="delimiter">)</span>
      val <a title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.originalParams">originalParams</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.applyMethod" title="Delambdafy.this.global.DefDef">applyMethod</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)List[Delambdafy.this.global.ValDef]">vparamss</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      val bridgeParams = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.originalParams" title="List[Delambdafy.this.global.ValDef]">originalParams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams">map</a> <span class="delimiter">{</span> <a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams.$anonfun.originalParam">originalParam</a> =&gt;
        val <a title="Delambdafy.this.global.TermSymbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams.$anonfun.bridgeSym">bridgeSym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeMethSym" title="Delambdafy.this.global.MethodSymbol">bridgeMethSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newSyntheticValueParam" title="(argtype: Delambdafy.this.global.Type, name: Delambdafy.this.global.TermName)Delambdafy.this.global.TermSymbol">newSyntheticValueParam</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ObjectTpe" title="=&gt; Delambdafy.this.global.Type">ObjectTpe</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams.$anonfun.originalParam" title="Delambdafy.this.global.ValDef">originalParam</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.name" title="=&gt; Delambdafy.this.global.TermName">name</a><span class="delimiter">)</span>
        <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(88055a62f0)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams.$anonfun.bridgeSym" title="Delambdafy.this.global.TermSymbol">bridgeSym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      val bridgeSyms = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams" title="List[Delambdafy.this.global.ValDef]">bridgeParams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeSyms">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeSyms.$anonfun.x$14" title="Delambdafy.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>

      val <a title="Delambdafy.this.global.MethodType" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.methodType">methodType</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[Delambdafy.this.global.Symbol], resultType: Delambdafy.this.global.Type)Delambdafy.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeSyms" title="List[Delambdafy.this.global.Symbol]">bridgeSyms</a>, <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ObjectTpe" title="=&gt; Delambdafy.this.global.Type">ObjectTpe</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeMethSym" title="Delambdafy.this.global.MethodSymbol">bridgeMethSym</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Delambdafy.this.global.Type)bridgeMethSym.type">setInfo</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.methodType" title="Delambdafy.this.global.MethodType">methodType</a>

      def <a title="(tree: Delambdafy.this.global.Tree, expectedTpe: Delambdafy.this.global.Type)(Boolean, Delambdafy.this.global.Tree)" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt">adapt</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a>, <a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.expectedTpe">expectedTpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Delambdafy.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a>Boolean, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.=:=" title="(that: Delambdafy.this.global.Type)Boolean">=:=</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.expectedTpe" title="Delambdafy.this.global.Type">expectedTpe</a><span class="delimiter">)</span> <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Boolean, _2: Delambdafy.this.global.Tree)(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a>false, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
        else <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Boolean, _2: Delambdafy.this.global.Tree)(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a>true, <a href="TypeAdaptingTransformer.scala.html#scala.tools.nsc.transform;TypeAdaptingTransformer;TypeAdapter.adaptToType" title="(tree: Delambdafy.this.global.Tree, pt: Delambdafy.this.global.Type)Delambdafy.this.global.Tree">adaptToType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.tree" title="Delambdafy.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt.expectedTpe" title="Delambdafy.this.global.Type">expectedTpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="(tree: Delambdafy.this.global.Tree, pt: Delambdafy.this.global.Type)(Boolean, Delambdafy.this.global.Tree)" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase">adaptAndPostErase</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a>, <a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Delambdafy.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a>Boolean, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="Boolean" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.needsAdapt">needsAdapt</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.adaptedTree">adaptedTree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt" title="(tree: Delambdafy.this.global.Tree, expectedTpe: Delambdafy.this.global.Type)(Boolean, Delambdafy.this.global.Tree)">adapt</a><a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.tree" title="Delambdafy.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.pt" title="Delambdafy.this.global.Type">pt</a><span class="delimiter">)</span>
        val <a title="Delambdafy.this.global.postErasure.global.Transformer" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.trans">trans</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.postErasure" title="Delambdafy.this.global.postErasure.type">postErasure</a>.<a href="PostErasure.scala.html#scala.tools.nsc.transform;PostErasure.newTransformer" title="(unit: Delambdafy.this.global.postErasure.global.CompilationUnit)Delambdafy.this.global.postErasure.global.Transformer">newTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
        val <a title="Delambdafy.this.global.postErasure.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.postErasedTree">postErasedTree</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.trans" title="Delambdafy.this.global.postErasure.global.Transformer">trans</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.atOwner" title="(owner: Delambdafy.this.global.postErasure.global.Symbol)(trans: =&gt; Delambdafy.this.global.postErasure.global.Tree)Delambdafy.this.global.postErasure.global.Tree">atOwner</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="=&gt; Delambdafy.this.global.Symbol">currentOwner</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.trans" title="Delambdafy.this.global.postErasure.global.Transformer">trans</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: Delambdafy.this.global.postErasure.global.Tree)Delambdafy.this.global.postErasure.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.adaptedTree" title="Delambdafy.this.global.Tree">adaptedTree</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// SI-8017 elimnates ErasedValueTypes</span>
        <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Boolean, _2: Delambdafy.this.global.postErasure.global.Tree)(Boolean, Delambdafy.this.global.postErasure.global.Tree)" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.needsAdapt" title="Boolean">needsAdapt</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase.postErasedTree" title="Delambdafy.this.global.postErasure.global.Tree">postErasedTree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.enteringPhase" title="(ph: scala.reflect.internal.Phase)(op: =&gt; Option[Delambdafy.this.global.DefDef])Option[Delambdafy.this.global.DefDef]">enteringPhase</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Delambdafy.this.global.Run">currentRun</a>.<a href="../Global.scala.html#scala.tools.nsc;Global;Run.posterasurePhase" title="=&gt; scala.tools.nsc.Phase">posterasurePhase</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// e.g, in:</span>
        <span class="comment">//   class C(val a: Int) extends AnyVal; (x: Int) =&gt; new C(x)</span>
        <span class="comment">//</span>
        <span class="comment">// This type is:</span>
        <span class="comment">//    (x: Int)ErasedValueType(class C, Int)</span>
        val <a title="Delambdafy.this.global.MethodType" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe">liftedBodyDefTpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="Delambdafy.this.global.MethodType">MethodType</a> = <span class="delimiter">{</span>
          val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol">liftedBodySymbol</a> = <span class="delimiter">{</span>
            val Apply<a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol.method.method" title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol.method" class="delimiter">(</a><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol.method.method">method</a>, _<span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.originalFunction" title="Delambdafy.this.global.Function">originalFunction</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function.body" title="=&gt; Delambdafy.this.global.Tree">body</a>
            <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol.method" title="Delambdafy.this.global.Tree">method</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
          <span class="delimiter">}</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe.liftedBodySymbol" title="Delambdafy.this.global.Symbol">liftedBodySymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Delambdafy.this.global.MethodType" class="delimiter">[</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="Delambdafy.this.global.MethodType">MethodType</a><span class="delimiter">]</span>
        <span class="delimiter">}</span>
        val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(List[Boolean], List[Delambdafy.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="List[Boolean]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.paramNeedsAdaptation">paramNeedsAdaptation</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="List[Delambdafy.this.global.Tree]" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptedParams">adaptedParams</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeSyms" title="List[Delambdafy.this.global.Symbol]">bridgeSyms</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Delambdafy.this.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[Delambdafy.this.global.Symbol],(Delambdafy.this.global.Symbol, Delambdafy.this.global.Symbol),List[(Delambdafy.this.global.Symbol, Delambdafy.this.global.Symbol)]])List[(Delambdafy.this.global.Symbol, Delambdafy.this.global.Symbol)]">zip</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe" title="Delambdafy.this.global.MethodType">liftedBodyDefTpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType.params" title="=&gt; List[Delambdafy.this.global.Symbol]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((Delambdafy.this.global.Symbol, Delambdafy.this.global.Symbol)) =&gt; (Boolean, Delambdafy.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[(Delambdafy.this.global.Symbol, Delambdafy.this.global.Symbol)],(Boolean, Delambdafy.this.global.Tree),List[(Boolean, Delambdafy.this.global.Tree)]])List[(Boolean, Delambdafy.this.global.Tree)]">map</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.x0$3" title="(Boolean, Delambdafy.this.global.Tree)" class="delimiter">{</a>case <span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.bridgeSym">bridgeSym</a>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.param">param</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adapt" title="(tree: Delambdafy.this.global.Tree, expectedTpe: Delambdafy.this.global.Type)(Boolean, Delambdafy.this.global.Tree)">adapt</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Delambdafy.this.global.Symbol)Delambdafy.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.bridgeSym" title="Delambdafy.this.global.Symbol">bridgeSym</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Delambdafy.this.global.Type)Delambdafy.this.global.Ident">setType</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.bridgeSym" title="Delambdafy.this.global.Symbol">bridgeSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.x$16.$anonfun.param" title="Delambdafy.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Delambdafy.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.unzip" title="(implicit asPair: ((Boolean, Delambdafy.this.global.Tree)) =&gt; (Boolean, Delambdafy.this.global.Tree))(List[Boolean], List[Delambdafy.this.global.Tree])">unzip</a>
        <span class="comment">// SI-8017 Before, this code used `applyMethod.symbol.info.resultType`.</span>
        <span class="comment">//         But that symbol doesn't have a type history that goes back before `delambdafy`,</span>
        <span class="comment">//         so we just see a plain `Int`, rather than `ErasedValueType(C, Int)`.</span>
        <span class="comment">//         This triggered primitive boxing, rather than value class boxing.</span>
        val <a title="Delambdafy.this.global.Type" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.resTp">resTp</a> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.liftedBodyDefTpe" title="Delambdafy.this.global.MethodType">liftedBodyDefTpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.finalResultType" title="=&gt; Delambdafy.this.global.Type">finalResultType</a>
        val body = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Delambdafy.this.global.Tree, args: List[Delambdafy.this.global.Tree])Delambdafy.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedSelect" title="(qual: Delambdafy.this.global.gen.global.Tree, sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.RefTree">mkAttributedSelect</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.applyMethod" title="Delambdafy.this.global.DefDef">applyMethod</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptedParams" title="List[Delambdafy.this.global.Tree]">adaptedParams</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="Delambdafy.this.global.Apply" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.body">setType</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.resTp" title="Delambdafy.this.global.Type">resTp</a>
        val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="Boolean" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.needsReturnAdaptation">needsReturnAdaptation</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptedBody">adaptedBody</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptAndPostErase" title="(tree: Delambdafy.this.global.Tree, pt: Delambdafy.this.global.Type)(Boolean, Delambdafy.this.global.Tree)">adaptAndPostErase</a><a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Boolean, Delambdafy.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.body" title="Delambdafy.this.global.Apply">body</a>, <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ObjectTpe" title="=&gt; Delambdafy.this.global.Type">ObjectTpe</a><span class="delimiter">)</span>

        val needsBridge = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.paramNeedsAdaptation" title="List[Boolean]">paramNeedsAdaptation</a> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: Boolean)Boolean">contains</a> true<span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="Boolean" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.needsBridge">||</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.needsReturnAdaptation" title="Boolean">needsReturnAdaptation</a>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.needsBridge" title="Boolean">needsBridge</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="Delambdafy.this.global.DefDef" id="scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.methDef">methDef</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.DefDef.apply(7526f3aad6)" title="(sym: Delambdafy.this.global.Symbol, vparamss: List[List[Delambdafy.this.global.ValDef]], rhs: Delambdafy.this.global.Tree)Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeMethSym" title="Delambdafy.this.global.MethodSymbol">bridgeMethSym</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: List[Delambdafy.this.global.ValDef]*)List[List[Delambdafy.this.global.ValDef]]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeParams" title="List[Delambdafy.this.global.ValDef]">bridgeParams</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.adaptedBody" title="Delambdafy.this.global.Tree">adaptedBody</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.newClass" title="Delambdafy.this.global.Symbol">newClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Delambdafy.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Delambdafy.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Delambdafy.this.global.MethodSymbol)Delambdafy.this.global.MethodSymbol">enter</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.bridgeMethSym" title="Delambdafy.this.global.MethodSymbol">bridgeMethSym</a>
          <a href="../../../Option.scala.html#scala;Some" title="(x: Delambdafy.this.global.DefDef)Some[Delambdafy.this.global.DefDef]">Some</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; Delambdafy.this.global.analyzer.Typer">localTyper</a> <a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: Delambdafy.this.global.analyzer.global.Tree)Delambdafy.this.global.analyzer.global.Tree">typed</a> <a href="#scala.tools.nsc.transform;Delambdafy;DelambdafyTransformer.createBridgeMethod.methDef" title="Delambdafy.this.global.DefDef">methDef</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Delambdafy.this.global.DefDef" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Delambdafy.this.global.DefDef">DefDef</a><span class="delimiter">]</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <a href="../../../Option.scala.html#scala.None" title="None.type">None</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span class="comment">// DelambdafyTransformer</span>

  <span class="comment">// A traverser that finds symbols used but not defined in the given Tree</span>
  <span class="comment">// TODO freeVarTraverser in LambdaLift does a very similar task. With some</span>
  <span class="comment">// analysis this could probably be unified with it</span>
  class <a title="class FreeVarTraverser extends Delambdafy.this.global.Traverser" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser">FreeVarTraverser</a> extends <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser" title="Delambdafy.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.freeVars">freeVars</a> = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.LinkedHashSet[A]">LinkedHashSet</a><span title="(elems: Delambdafy.this.global.Symbol*)scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.declared">declared</a> = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.LinkedHashSet[A]">LinkedHashSet</a><span title="(elems: Delambdafy.this.global.Symbol*)scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    override def <a title="(tree: Delambdafy.this.global.Tree)Unit" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse">traverse</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case Function<span class="delimiter">(</span><a title="List[Delambdafy.this.global.ValDef]" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.args">args</a>, _<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.args" title="List[Delambdafy.this.global.ValDef]">args</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Delambdafy.this.global.ValDef =&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol])Unit">foreach</a> <span class="delimiter">{</span><a title="Delambdafy.this.global.ValDef" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.$anonfun.arg">arg</a> =&gt; <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.declared" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">declared</a> <a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.+=(1ef7fe1102)" title="(elem: Delambdafy.this.global.Symbol)FreeVarTraverser.this.declared.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.$anonfun.arg" title="Delambdafy.this.global.ValDef">arg</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">}</span>
        case ValDef<span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.declared" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">declared</a> <a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.+=(1ef7fe1102)" title="(elem: Delambdafy.this.global.Symbol)FreeVarTraverser.this.declared.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
        case _: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Bind" title="Delambdafy.this.global.Bind">Bind</a> =&gt;
          <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.declared" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">declared</a> <a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.+=(1ef7fe1102)" title="(elem: Delambdafy.this.global.Symbol)FreeVarTraverser.this.declared.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
        case Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          val <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym">sym</a> = <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
          if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Delambdafy.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isLocalToBlock" title="=&gt; Boolean">isLocalToBlock</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isTerm" title="=&gt; Boolean">isTerm</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isMethod" title="=&gt; Boolean">isMethod</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.declared" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">declared</a>.<a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.contains" title="(elem: Delambdafy.this.global.Symbol)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.freeVars" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">freeVars</a> <a href="../../../collection/mutable/LinkedHashSet.scala.html#scala.collection.mutable;LinkedHashSet.+=(1ef7fe1102)" title="(elem: Delambdafy.this.global.Symbol)FreeVarTraverser.this.freeVars.type">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.sym" title="Delambdafy.this.global.Symbol">sym</a>
        case _ =&gt;
      <span class="delimiter">}</span>
      super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Delambdafy.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  object <a title="Delambdafy.this.FreeVarTraverser.type" id="scala.tools.nsc.transform;Delambdafy.FreeVarTraverser">FreeVarTraverser</a> <a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser" title="Delambdafy.this.FreeVarTraverser.type" class="delimiter">{</a>
    def <a title="(function: Delambdafy.this.global.Function)scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf">freeVarsOf</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf.function">function</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="Delambdafy.this.FreeVarTraverser" id="scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf.freeVarsTraverser">freeVarsTraverser</a> = new <a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser" title="Delambdafy.this.FreeVarTraverser">FreeVarTraverser</a>
      <a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf.freeVarsTraverser" title="Delambdafy.this.FreeVarTraverser">freeVarsTraverser</a>.<a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.traverse" title="(tree: Delambdafy.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf.function" title="Delambdafy.this.global.Function">function</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform;Delambdafy.FreeVarTraverser.freeVarsOf.freeVarsTraverser" title="Delambdafy.this.FreeVarTraverser">freeVarsTraverser</a>.<a href="#scala.tools.nsc.transform;Delambdafy;FreeVarTraverser.freeVars" title="=&gt; scala.collection.mutable.LinkedHashSet[Delambdafy.this.global.Symbol]">freeVars</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// A transformer that converts specified captured symbols into other symbols</span>
  <span class="comment">// TODO this transform could look more like ThisSubstituter and TreeSymSubstituter. It's not clear that it needs that level of sophistication since the types</span>
  <span class="comment">// at this point are always very simple flattened/erased types, but it would probably be more robust if it tried to take more complicated types into account</span>
  class <a title="class DeCapturifyTransformer extends Delambdafy.this.TypingTransformer" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer">DeCapturifyTransformer</a><a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer" title="Delambdafy.this.DeCapturifyTransformer" class="delimiter">(</a><a title="scala.collection.Map[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.captureProxies">captureProxies</a>: <a href="../../../collection/Map.scala.html#scala.collection;Map" title="scala.collection.Map[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">Map</a><span class="delimiter">[</span>Symbol, TermSymbol<span class="delimiter">]</span>, <a title="Delambdafy.this.global.CompilationUnit" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="Delambdafy.this.global.CompilationUnit">CompilationUnit</a>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.oldClass">oldClass</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.newClass">newClass</a>:<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a title="Delambdafy.this.global.Position" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Delambdafy.this.global.Position">Position</a>, <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.thisProxy">thisProxy</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">)</span> extends <a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer" title="Delambdafy.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.unit" title="Delambdafy.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    override def <a title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.transform">transform</a><span class="delimiter">(</span><span title="Delambdafy.this.global.Tree">tree</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span title="Delambdafy.this.global.Tree">tree</span> match <span class="delimiter">{</span>
      case <span title="Delambdafy.this.global.This">tree</span>@This<span class="delimiter">(</span><a title="Delambdafy.this.global.TypeName" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.transform.encl">encl</a><span class="delimiter">)</span> if <span title="Delambdafy.this.global.This">tree</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.oldClass" title="Delambdafy.this.global.Symbol">oldClass</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a> =&gt;
        <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a> <a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedSelect" title="(qual: Delambdafy.this.global.gen.global.Tree, sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.RefTree">mkAttributedSelect</a> <span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a> <a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a> <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.newClass" title="Delambdafy.this.global.Symbol">newClass</a>, <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.thisProxy" title="Delambdafy.this.global.Symbol">thisProxy</a><span class="delimiter">)</span>
      case Ident<span class="delimiter">(</span><a title="Delambdafy.this.global.Name" id="scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.transform.name">name</a><span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.captureProxies" title="scala.collection.Map[Delambdafy.this.global.Symbol,Delambdafy.this.global.TermSymbol]">captureProxies</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: Delambdafy.this.global.Symbol)Boolean">contains</a> <span title="Delambdafy.this.global.Tree">tree</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
        <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a> <a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedSelect" title="(qual: Delambdafy.this.global.gen.global.Tree, sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.RefTree">mkAttributedSelect</a> <span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Delambdafy.this.global.gen.type">gen</a> <a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedThis" title="(sym: Delambdafy.this.global.gen.global.Symbol)Delambdafy.this.global.gen.global.This">mkAttributedThis</a> <a href="#scala.tools.nsc.transform;Delambdafy;DeCapturifyTransformer.newClass" title="Delambdafy.this.global.Symbol">newClass</a>, <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Delambdafy.this.global.Symbol)Delambdafy.this.global.TermSymbol">captureProxies</a><span class="delimiter">(</span><span title="Delambdafy.this.global.Tree">tree</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case _ =&gt; super.<a href="TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: Delambdafy.this.global.Tree)Delambdafy.this.global.Tree">transform</a><span class="delimiter">(</span><span title="Delambdafy.this.global.Tree">tree</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Get the symbol of the target lifted lambad body method from a function. I.e. if
   * the function is {args =&gt; anonfun(args)} then this method returns anonfun's symbol
   */</span>
  private def <a title="(fun: Delambdafy.this.global.Function)Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy.targetMethod">targetMethod</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy.targetMethod.fun">fun</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Delambdafy.this.global.Function">Function</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a> = <a href="#scala.tools.nsc.transform;Delambdafy.targetMethod.fun" title="Delambdafy.this.global.Function">fun</a> match <span class="delimiter">{</span>
    case Function<span class="delimiter">(</span>_, Apply<span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy.targetMethod.target">target</a>, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
      <a href="#scala.tools.nsc.transform;Delambdafy.targetMethod.target" title="Delambdafy.this.global.Tree">target</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
    case _ =&gt;
      <span class="comment">// any other shape of Function is unexpected at this point</span>
      <a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.abort" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;could not understand function with tree &quot;)">could not understand function with tree $</span><a href="#scala.tools.nsc.transform;Delambdafy.targetMethod.fun" title="Delambdafy.this.global.Function">fun</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// finds all methods that reference 'this'</span>
  class <a title="class ThisReferringMethodsTraverser extends Delambdafy.this.global.Traverser" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser">ThisReferringMethodsTraverser</a><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser" title="Delambdafy.this.ThisReferringMethodsTraverser" class="delimiter">(</a><span class="delimiter">)</span> extends <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser" title="Delambdafy.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    private var <a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=">currentMethod</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Delambdafy.this.global.NoSymbol">NoSymbol</a>
    <span class="comment">// the set of methods that refer to this</span>
    val <a title="scala.collection.mutable.Set[Delambdafy.this.global.Symbol]" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.thisReferringMethods">thisReferringMethods</a> = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.Set[A]">Set</a><span title="(elems: Delambdafy.this.global.Symbol*)scala.collection.mutable.Set[Delambdafy.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="comment">// the set of lifted lambda body methods that each method refers to</span>
    val <a title="scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.liftedMethodReferences">liftedMethodReferences</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (Delambdafy.this.global.Symbol, scala.collection.Set[Delambdafy.this.global.Symbol])*)scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Delambdafy.this.global.Symbol">Symbol</a>, <a href="../../../collection/Set.scala.html#scala.collection;Set" title="scala.collection.Set[Delambdafy.this.global.Symbol]">Set</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="../../../collection/mutable/Map.scala.html#scala.collection.mutable;Map.withDefault" title="(d: Delambdafy.this.global.Symbol =&gt; scala.collection.Set[Delambdafy.this.global.Symbol])scala.collection.mutable.Map[Delambdafy.this.global.Symbol,scala.collection.Set[Delambdafy.this.global.Symbol]]">withDefault</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Symbol" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.liftedMethodReferences.$anonfun.x$18">_</a> =&gt; mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: Delambdafy.this.global.Symbol*)scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    override def <a title="(tree: Delambdafy.this.global.Tree)Unit" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse">traverse</a><span class="delimiter">(</span><a title="Delambdafy.this.global.Tree" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Delambdafy.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a> match <span class="delimiter">{</span>
      case DefDef<span class="delimiter">(</span>_, _, _, _, _, _<span class="delimiter">)</span> =&gt;
        <span class="comment">// we don't expect defs within defs. At this phase trees should be very flat</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../Global.scala.html#scala.tools.nsc;Global.devWarning(1729dbc42f)" title="(msg: =&gt; String)Unit">devWarning</a><span class="delimiter">(</span><span title="String(&quot;Found a def within a def at a phase where defs are expected to be flattened out.&quot;)" class="string">&quot;Found a def within a def at a phase where defs are expected to be flattened out.&quot;</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="(x$1: Delambdafy.this.global.Symbol)Unit">currentMethod</a> = <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a>
        super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Delambdafy.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="(x$1: Delambdafy.this.global.Symbol)Unit">currentMethod</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Delambdafy.this.global.NoSymbol">NoSymbol</a>
      case <a title="Delambdafy.this.global.Function" id="scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.fun">fun</a>@Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
        <span class="comment">// we don't drill into functions because at the beginning of this phase they will always refer to 'this'.</span>
        <span class="comment">// They'll be of the form {(args...) =&gt; this.anonfun(args...)}</span>
        <span class="comment">// but we do need to make note of the lifted body method in case it refers to 'this'</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: Delambdafy.this.global.Symbol, value: scala.collection.Set[Delambdafy.this.global.Symbol])Unit">liftedMethodReferences</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a><span class="delimiter">)</span> <a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.+(daf7108c0f)" title="(elem: Delambdafy.this.global.Symbol)scala.collection.Set[Delambdafy.this.global.Symbol]">+=</a> <a href="#scala.tools.nsc.transform;Delambdafy.targetMethod" title="(fun: Delambdafy.this.global.Function)Delambdafy.this.global.Symbol">targetMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.fun" title="Delambdafy.this.global.Function">fun</a><span class="delimiter">)</span>
      case This<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Delambdafy.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; Delambdafy.this.global.Symbol">enclClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a><span title="String(&quot; directly refers to \'this\'&quot;)" class="string"> directly refers to 'this'&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.thisReferringMethods" title="=&gt; scala.collection.mutable.Set[Delambdafy.this.global.Symbol]">thisReferringMethods</a> <a href="../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.add" title="(elem: Delambdafy.this.global.Symbol)Boolean">add</a> <a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.currentMethod_=" title="=&gt; Delambdafy.this.global.Symbol">currentMethod</a>
        <span class="delimiter">}</span>
      case _ =&gt;
        super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: Delambdafy.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;Delambdafy;ThisReferringMethodsTraverser.traverse.tree" title="Delambdafy.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
