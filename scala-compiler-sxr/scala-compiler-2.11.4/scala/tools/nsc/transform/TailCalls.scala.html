<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/transform/TailCalls.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author Iulian Dragos
 */</span>

package scala
package tools.nsc
package transform

import symtab.Flags
import <a href="../symtab/package.scala.html#scala.tools.nsc.symtab.package.Flags" title="=&gt; reflect.internal.Flags.type">Flags</a>.SYNTHETIC

<span class="comment">/** Perform tail recursive call elimination.
 *
 *  @author Iulian Dragos
 *  @version 1.0
 */</span>
abstract class <a title="class TailCalls extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform" id="scala.tools.nsc.transform;TailCalls">TailCalls</a> extends <a href="Transform.scala.html#scala.tools.nsc.transform;Transform" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="delimiter">{</span>
  import <a href="../SubComponent.scala.html#scala.tools.nsc;SubComponent.global" title="=&gt; scala.tools.nsc.Global">global</a>._                     <span class="comment">// the global environment</span>
  import <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="TailCalls.this.global.definitions.type">definitions</a>._                <span class="comment">// standard classes and methods</span>
  import <a href="../Global.scala.html#scala.tools.nsc;Global.typer" title="TailCalls.this.global.typer.type">typer</a>.typedPos               <span class="comment">// methods to type trees</span>

  val <a title="String" id="scala.tools.nsc.transform;TailCalls.phaseName">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;tailcalls&quot;)" class="string">&quot;tailcalls&quot;</span>

  def <a title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer" id="scala.tools.nsc.transform;TailCalls.newTransformer">newTransformer</a><span class="delimiter">(</span><a title="TailCalls.this.global.CompilationUnit" id="scala.tools.nsc.transform;TailCalls.newTransformer.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="TailCalls.this.global.Transformer">Transformer</a> =
    new <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination" title="TailCalls.this.TailCallElimination">TailCallElimination</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls.newTransformer.unit" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="comment">/** Create a new phase which applies transformer */</span>
  override def <a title="(prev: tools.nsc.Phase)TailCalls.this.StdPhase" id="scala.tools.nsc.transform;TailCalls.newPhase">newPhase</a><span class="delimiter">(</span><a title="tools.nsc.Phase" id="scala.tools.nsc.transform;TailCalls.newPhase.prev">prev</a>: scala.tools.nsc.<a href="../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="tools.nsc.Phase">Phase</a><span class="delimiter">)</span>: <a href="../SubComponent.scala.html#scala.tools.nsc;SubComponent;StdPhase" title="TailCalls.this.StdPhase">StdPhase</a> = new <a href="#scala.tools.nsc.transform;TailCalls;Phase" title="TailCalls.this.Phase">Phase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls.newPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span>

  <span class="comment">/** The phase defined by this transform */</span>
  class <a title="class Phase extends TailCalls.this.StdPhase" id="scala.tools.nsc.transform;TailCalls;Phase">Phase</a><a href="#scala.tools.nsc.transform;TailCalls;Phase" title="TailCalls.this.Phase" class="delimiter">(</a><a title="tools.nsc.Phase" id="scala.tools.nsc.transform;TailCalls;Phase.prev">prev</a>: scala.tools.nsc.<a href="../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="tools.nsc.Phase">Phase</a><span class="delimiter">)</span> extends <a href="../SubComponent.scala.html#scala.tools.nsc;SubComponent;StdPhase" title="TailCalls.this.StdPhase">StdPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;Phase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(unit: TailCalls.this.global.CompilationUnit)Unit" id="scala.tools.nsc.transform;TailCalls;Phase.apply">apply</a><span class="delimiter">(</span><a title="TailCalls.this.global.CompilationUnit" id="scala.tools.nsc.transform;TailCalls;Phase.apply.unit">unit</a>: global.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.debuginfo" title="=&gt; scala.tools.nsc.Settings#ChoiceSetting">debuginfo</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.value" title="=&gt; String">value</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;notailcalls&quot;)" class="string">&quot;notailcalls&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.transform;TailCalls.newTransformer" title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer">newTransformer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;Phase.apply.unit" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>.<a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer.transformUnit" title="(unit: TailCalls.this.global.CompilationUnit)Unit">transformUnit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;Phase.apply.unit" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  import <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="TailCalls.this.global.treeInfo.type">treeInfo</a>.hasSynthCaseSymbol

  <span class="comment">/**
   * A Tail Call Transformer
   *
   * @author     Erik Stenman, Iulian Dragos
   * @version    1.1
   *
   * What it does:
   * &lt;p&gt;
   *   Finds method calls in tail-position and replaces them with jumps.
   *   A call is in a tail-position if it is the last instruction to be
   *   executed in the body of a method.  This is done by recursing over
   *   the trees that may contain calls in tail-position (trees that can't
   *   contain such calls are not transformed). However, they are not that
   *   many.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Self-recursive calls in tail-position are replaced by jumps to a
   *   label at the beginning of the method. As the JVM provides no way to
   *   jump from a method to another one, non-recursive calls in
   *   tail-position are not optimized.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   A method call is self-recursive if it calls the current method and
   *   the method is final (otherwise, it could
   *   be a call to an overridden method in a subclass). Furthermore, If
   *   the method has type parameters, the call must contain these
   *   parameters as type arguments. Recursive calls on a different instance
   *   are optimized. Since 'this' is not a local variable, a dummy local val
   *   is added and used as a label parameter. The backend knows to load
   *   the corresponding argument in the 'this' (local at index 0). This dummy local
   *   is never used and should be cleand up by dead code elimination (when enabled).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   This phase has been moved before pattern matching to catch more
   *   of the common cases of tail recursive functions. This means that
   *   more cases should be taken into account (like nested function, and
   *   pattern cases).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   If a method contains self-recursive calls, a label is added to at
   *   the beginning of its body and the calls are replaced by jumps to
   *   that label.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Assumes: `Uncurry` has been run already, and no multiple
   *            parameter lists exit.
   * &lt;/p&gt;
   */</span>
  class <a title="class TailCallElimination extends TailCalls.this.global.Transformer" id="scala.tools.nsc.transform;TailCalls;TailCallElimination">TailCallElimination</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination" title="TailCalls.this.TailCallElimination" class="delimiter">(</a><a title="TailCalls.this.global.CompilationUnit" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="TailCalls.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
    private def <a title="=&gt; String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.defaultReason">defaultReason</a> = <span title="String(&quot;it contains a recursive call not in tail position&quot;)" class="string">&quot;it contains a recursive call not in tail position&quot;</span>
    private val failPositions = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="TailCalls.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newMap" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[TailCallElimination.this.TailContext,TailCalls.this.global.Position]" class="delimiter">[</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a>, <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="TailCalls.this.global.Position">Position</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#scala.collection.mutable;Map.withDefault" title="scala.collection.mutable.Map[TailCallElimination.this.TailContext,TailCalls.this.global.Position]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.failPositions">withDefault</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.failPositions.$anonfun.x$1" title="TailCallElimination.this.TailContext">_</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.methodPos" title="=&gt; TailCalls.this.global.Position">methodPos</a><span class="delimiter">)</span>
    private val failReasons   = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="TailCalls.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newMap" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[TailCallElimination.this.TailContext,String]" class="delimiter">[</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a>, <span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#scala.collection.mutable;Map.withDefaultValue" title="scala.collection.mutable.Map[TailCallElimination.this.TailContext,String]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.failReasons">withDefaultValue</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.defaultReason" title="=&gt; String">defaultReason</a>
    private def <a title="(ctx: TailCallElimination.this.TailContext)Unit" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure">tailrecFailure</a><span class="delimiter">(</span><a title="TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.ctx">ctx</a>: <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.method">method</a>      = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.ctx" title="TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>
      val <a title="String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.failReason">failReason</a>  = <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: TailCallElimination.this.TailContext)String">failReasons</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.ctx" title="TailCallElimination.this.TailContext">ctx</a><span class="delimiter">)</span>
      val <a title="TailCalls.this.global.Position" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.failPos">failPos</a>     = <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: TailCallElimination.this.TailContext)TailCalls.this.global.Position">failPositions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.ctx" title="TailCallElimination.this.TailContext">ctx</a><span class="delimiter">)</span>

      <a href="../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.failPos" title="TailCalls.this.global.Position">failPos</a>, <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;could not optimize @tailrec annotated &quot;)">could not optimize @tailrec annotated $</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.method" title="TailCalls.this.global.Symbol">method</a><span title="String(&quot;: &quot;)">: $</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure.failReason" title="String">failReason</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Has the label been accessed? Then its symbol is in this set. */</span>
    private val <a title="scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.accessed">accessed</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="TailCalls.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newSet" title="[K]()scala.collection.mutable.HashSet[K]">newSet</a><span title="()scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="TailCalls.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="comment">// `accessed` was stored as boolean in the current context -- this is no longer tenable</span>
    <span class="comment">// with jumps to labels in tailpositions now considered in tailposition,</span>
    <span class="comment">// a downstream context may access the label, and the upstream one will be none the wiser</span>
    <span class="comment">// this is necessary because tail-calls may occur in places where syntactically they seem impossible</span>
    <span class="comment">// (since we now consider jumps to labels that are in tailposition, such as matchEnd(x) {x})</span>

    sealed trait <a title="trait TailContext extends AnyRef" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext">TailContext</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
      def <a title="=&gt; TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method">method</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="TailCalls.this.global.Symbol">Symbol</a>          <span class="comment">// current method</span>
      def <a title="=&gt; List[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tparams">tparams</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>   <span class="comment">// type parameters</span>
      def <a title="=&gt; TailCalls.this.global.Position" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.methodPos">methodPos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="TailCalls.this.global.Position">Position</a>     <span class="comment">// default position for failure reporting</span>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tailPos">tailPos</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>        <span class="comment">// context is in tail position</span>
      def <a title="=&gt; TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label">label</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="TailCalls.this.global.Symbol">Symbol</a>           <span class="comment">// new label, tail call target</span>
      def <a title="=&gt; Set[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tailLabels">tailLabels</a>: <a href="../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[TailCalls.this.global.Symbol]">Set</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>

      def <a title="=&gt; TailCalls.this.global.Type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.enclosingType">enclosingType</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeOfThis" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isEligible">isEligible</a>    = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isEffectivelyFinalOrNotOverridden" title="=&gt; Boolean">isEffectivelyFinalOrNotOverridden</a>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory">isMandatory</a>   = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.hasAnnotation" title="(cls: TailCalls.this.global.Symbol)Boolean">hasAnnotation</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.TailrecClass" title="=&gt; TailCalls.this.global.ClassSymbol">TailrecClass</a><span class="delimiter">)</span>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isTransformed">isTransformed</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isEligible" title="=&gt; Boolean">isEligible</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: TailCalls.this.global.Symbol)Boolean">accessed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a><span class="delimiter">)</span>

      def <a title="(pos: TailCalls.this.global.Position)TailCalls.this.global.TermSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis">newThis</a><span class="delimiter">(</span><a title="TailCalls.this.global.Position" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="TailCalls.this.global.Position">Position</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        def <a title="=&gt; String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis.msg">msg</a> = <a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Creating new `this` during tailcalls\n  method: %s\n  current class: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span>
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.ownerChain" title="=&gt; List[TailCalls.this.global.Symbol]">ownerChain</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span><span class="delimiter">)</span>,
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentClass" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.ownerChain" title="=&gt; List[TailCalls.this.global.Symbol]">ownerChain</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span><span class="delimiter">)</span>
        <span class="delimiter">)</span>
        <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.logResult" title="(msg: =&gt; String)(result: TailCalls.this.global.TermSymbol)TailCalls.this.global.TermSymbol">logResult</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis.msg" title="=&gt; String">msg</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValue" title="(name: TailCalls.this.global.TermName, pos: TailCalls.this.global.Position, newFlags: Long)TailCalls.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="TailCalls.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.THIS" title="=&gt; TailCalls.this.global.nme.NameType">THIS</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis.pos" title="TailCalls.this.global.Position">pos</a>, <span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: TailCalls.this.global.Type)TailCalls.this.global.TermSymbol">setInfo</a> <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentClass" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeOfThis" title="=&gt; TailCalls.this.global.Type">typeOfThis</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      override def <a title="()String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.toString">toString</a> = <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; TailCalls.this.global.Symbol#NameType">name</a><span class="delimiter">}</span><span title="String(&quot; tparams=&quot;)"> tparams=$</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tparams" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a><span title="String(&quot; tailPos=&quot;)"> tailPos=$</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tailPos" title="=&gt; Boolean">tailPos</a><span title="String(&quot; label=&quot;)"> label=$</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a><span title="String(&quot; label info=&quot;)"> label info=$</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; TailCalls.this.global.Type">info</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>

    <span class="delimiter">}</span>

    object <a title="TailCallElimination.this.EmptyTailContext.type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext">EmptyTailContext</a> extends <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a> <span class="delimiter">{</span>
      def <a title="=&gt; TailCalls.this.global.NoSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.method">method</a>     = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; TailCalls.this.global.NoSymbol">NoSymbol</a>
      def <a title="=&gt; scala.collection.immutable.Nil.type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.tparams">tparams</a>    = <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      def <a title="=&gt; reflect.internal.util.NoPosition.type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.methodPos">methodPos</a>  = <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.tailPos">tailPos</a>    = false
      def <a title="=&gt; TailCalls.this.global.NoSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.label">label</a>      = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; TailCalls.this.global.NoSymbol">NoSymbol</a>
      def <a title="=&gt; scala.collection.immutable.Set[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext.tailLabels">tailLabels</a> = <a href="../../../Predef.scala.html#scala.Predef.Set" title="=&gt; scala.collection.immutable.Set.type">Set</a>.<a href="../../../collection/generic/ImmutableSetFactory.scala.html#scala.collection.generic;ImmutableSetFactory.empty" title="[A]=&gt; scala.collection.immutable.Set[A]">empty</a><span title="scala.collection.immutable.Set[TailCalls.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="TailCalls.this.global.Symbol">Symbol</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>

    class <a title="class DefDefTailContext extends AnyRef with TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext">DefDefTailContext</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext" title="TailCallElimination.this.DefDefTailContext" class="delimiter">(</a><a title="TailCalls.this.global.DefDef" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.dd">dd</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="TailCalls.this.global.DefDef">DefDef</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a> <span class="delimiter">{</span>
      def <a title="=&gt; TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method">method</a>    = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.dd" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>
      def <a title="=&gt; List[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tparams">tparams</a>   = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.dd" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.tparams" title="=&gt; List[TailCalls.this.global.TypeDef]">tparams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: TailCalls.this.global.TypeDef =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.TypeDef],TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol]])List[TailCalls.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tparams.$anonfun.x$2" title="TailCalls.this.global.TypeDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span>
      def <a title="=&gt; TailCalls.this.global.Position" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.methodPos">methodPos</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.dd" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailPos">tailPos</a>   = true

      lazy val <a title="TailCalls.this.global.MethodSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.label">label</a>      = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel" title="()TailCalls.this.global.MethodSymbol">mkLabel</a><span class="delimiter">(</span><span class="delimiter">)</span>
      lazy val <a title="scala.collection.immutable.Set[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailLabels">tailLabels</a> = <span class="delimiter">{</span>
        <span class="comment">// labels are local to a method, so only traverse the rhs of a defdef</span>
        val <a title="TailCalls.this.TailPosLabelsTraverser" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailLabels.collector">collector</a> = new <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser" title="TailCalls.this.TailPosLabelsTraverser">TailPosLabelsTraverser</a>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailLabels.collector" title="TailCalls.this.TailPosLabelsTraverser">collector</a> <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.dd" title="TailCalls.this.global.DefDef">dd</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.rhs" title="=&gt; TailCalls.this.global.Tree">rhs</a>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailLabels.collector" title="TailCalls.this.TailPosLabelsTraverser">collector</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.tailLabels" title="=&gt; scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]">tailLabels</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="scala.collection.immutable.Set[TailCalls.this.global.Symbol]">toSet</a>
      <span class="delimiter">}</span>

      private def <a title="()TailCalls.this.global.MethodSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel">mkLabel</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a title="TailCalls.this.global.MethodSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.label">label</a>     = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newLabel" title="(name: TailCalls.this.global.TermName, pos: TailCalls.this.global.Position)TailCalls.this.global.MethodSymbol">newLabel</a><span class="delimiter">(</span><a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)TailCalls.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; TailCalls.this.global.Symbol#NameType">name</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span>
        val <a title="TailCalls.this.global.TermSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.thisParam">thisParam</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.thisParam.qual$1">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newSyntheticValueParam$default$2" title="TailCalls.this.global.TermName" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.thisParam.x$14">newSyntheticValueParam</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentClass" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeOfThis" title="TailCalls.this.global.Type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.thisParam.x$13">typeOfThis</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.label" title="TailCalls.this.global.MethodSymbol">label</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: TailCalls.this.global.Type)label.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[TailCalls.this.global.Symbol], resultType: TailCalls.this.global.Type)TailCalls.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.thisParam" title="TailCalls.this.global.TermSymbol">thisParam</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">::</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.params" title="=&gt; List[TailCalls.this.global.Symbol]">params</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe_*" title="=&gt; TailCalls.this.global.Type">tpe_*</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.finalResultType" title="=&gt; TailCalls.this.global.Type">finalResultType</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isEligible" title="=&gt; Boolean">isEligible</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.label" title="TailCalls.this.global.MethodSymbol">label</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.substInfo" title="(syms0: List[TailCalls.this.global.Symbol], syms1: List[TailCalls.this.global.Symbol])label.type">substInfo</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeParams" title="=&gt; List[TailCalls.this.global.Symbol]">typeParams</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tparams" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a><span class="delimiter">)</span>

        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.mkLabel.label" title="TailCalls.this.global.MethodSymbol">label</a>
      <span class="delimiter">}</span>
      private def <a title="(t: TailCalls.this.global.Tree)Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall">isRecursiveCall</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.t">t</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a title="TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.receiver">receiver</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.t" title="TailCalls.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>

        <span class="delimiter">(</span>    <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.receiver" title="TailCalls.this.global.Symbol">receiver</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span>
          <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.receiver" title="TailCalls.this.global.Symbol">receiver</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isMethod" title="=&gt; Boolean">isMethod</a>
          <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; TailCalls.this.global.Symbol#NameType">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.receiver" title="TailCalls.this.global.Symbol">receiver</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; receiver.NameType">name</a><span class="delimiter">)</span>
          <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; TailCalls.this.global.Symbol">enclClass</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isSubClass" title="(that: TailCalls.this.global.Symbol)Boolean">isSubClass</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall.receiver" title="TailCalls.this.global.Symbol">receiver</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.enclClass" title="=&gt; TailCalls.this.global.Symbol">enclClass</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
      <span class="delimiter">}</span>
      def <a title="(t: TailCalls.this.global.Tree)Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.containsRecursiveCall">containsRecursiveCall</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.containsRecursiveCall.t">t</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.containsRecursiveCall.t" title="TailCalls.this.global.Tree">t</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.exists" title="(p: TailCalls.this.global.Tree =&gt; Boolean)Boolean">exists</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.isRecursiveCall" title="(t: TailCalls.this.global.Tree)Boolean">isRecursiveCall</a>
    <span class="delimiter">}</span>
    class <a title="class ClonedTailContext extends AnyRef with TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext">ClonedTailContext</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext" title="TailCallElimination.this.ClonedTailContext" class="delimiter">(</a><a title="TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that">that</a>: <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a>, override val <a title="Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.tailPos">tailPos</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a> <span class="delimiter">{</span>
      def <a title="=&gt; TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.method">method</a>     = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that" title="TailCallElimination.this.TailContext">that</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a>
      def <a title="=&gt; List[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.tparams">tparams</a>    = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that" title="TailCallElimination.this.TailContext">that</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tparams" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>
      def <a title="=&gt; TailCalls.this.global.Position" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.methodPos">methodPos</a>  = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that" title="TailCallElimination.this.TailContext">that</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.methodPos" title="=&gt; TailCalls.this.global.Position">methodPos</a>
      def <a title="=&gt; Set[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.tailLabels">tailLabels</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that" title="TailCallElimination.this.TailContext">that</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tailLabels" title="=&gt; Set[TailCalls.this.global.Symbol]">tailLabels</a>
      def <a title="=&gt; TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.label">label</a>      = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext.that" title="TailCallElimination.this.TailContext">that</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a>
    <span class="delimiter">}</span>

    private var <a title="TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=">ctx</a>: <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.EmptyTailContext" title="TailCallElimination.this.EmptyTailContext.type">EmptyTailContext</a>
    private def <a title="()TailCallElimination.this.ClonedTailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailContext">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span>  = new <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext" title="TailCallElimination.this.ClonedTailContext">ClonedTailContext</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>, tailPos = false<span class="delimiter">)</span>
    private def <a title="()TailCallElimination.this.ClonedTailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailContext">yesTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;ClonedTailContext" title="TailCallElimination.this.ClonedTailContext">ClonedTailContext</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>, tailPos = true<span class="delimiter">)</span>


    override def <a title="(unit: TailCalls.this.global.CompilationUnit)Unit" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transformUnit">transformUnit</a><span class="delimiter">(</span><a title="TailCalls.this.global.CompilationUnit" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transformUnit.unit">unit</a>: <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
      try <span class="delimiter">{</span>
        super.<a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer.transformUnit" title="(unit: TailCalls.this.global.CompilationUnit)Unit">transformUnit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transformUnit.unit" title="TailCalls.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> finally <span class="delimiter">{</span>
        <span class="comment">// OPT clear these after each compilation unit</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.failPositions" title="=&gt; scala.collection.mutable.Map[TailCallElimination.this.TailContext,TailCalls.this.global.Position]">failPositions</a>.<a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.failReasons" title="=&gt; scala.collection.mutable.Map[TailCallElimination.this.TailContext,String]">failReasons</a>.<a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.accessed" title="=&gt; scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]">accessed</a>.<a href="../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Rewrite this tree to contain no tail recursive calls */</span>
    def <a title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.TailContext)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5)">transform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).nctx">nctx</a>: <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext" title="TailCallElimination.this.TailContext">TailContext</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      val <a title="TailCallElimination.this.TailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).saved">saved</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>
      <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="(x$1: TailCallElimination.this.TailContext)Unit">ctx</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).nctx" title="TailCallElimination.this.TailContext">nctx</a>
      try <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
      finally this.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="(x$1: TailCallElimination.this.TailContext)Unit">ctx</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5).saved" title="TailCallElimination.this.TailContext">saved</a>
    <span class="delimiter">}</span>

    def <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailTransform">yesTailTransform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailTransform.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5)" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.TailContext)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailTransform.tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailContext" title="()TailCallElimination.this.ClonedTailContext">yesTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    def <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform">noTailTransform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5)" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.TailContext)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform.tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailContext" title="()TailCallElimination.this.ClonedTailContext">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    def <a title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms">noTailTransforms</a><span class="delimiter">(</span><a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.trees">trees</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="TailCallElimination.this.ClonedTailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.nctx">nctx</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailContext" title="()TailCallElimination.this.ClonedTailContext">noTailContext</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.trees" title="List[TailCalls.this.global.Tree]">trees</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.Tree],TailCalls.this.global.Tree,List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Tree]">map</a> <span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.$anonfun.t">t</a> =&gt; <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5)" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.TailContext)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.$anonfun.t" title="TailCalls.this.global.Tree">t</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms.nctx" title="TailCallElimination.this.ClonedTailContext">nctx</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    override def <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)">transform</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="comment">/* A possibly polymorphic apply to be considered for tail call transformation. */</span>
      def <a title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply">rewriteApply</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.target">target</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun">fun</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a>, <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.targs">targs</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.args">args</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver">receiver</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a> match <span class="delimiter">{</span>
          case Select<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver.qual">qual</a>, _<span class="delimiter">)</span>  =&gt; <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver.qual" title="TailCalls.this.global.Tree">qual</a>
          case _                =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a>
        <span class="delimiter">}</span>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiverIsSame">receiverIsSame</a>    = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.enclosingType" title="=&gt; TailCalls.this.global.Type">enclosingType</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.widen" title="=&gt; TailCalls.this.global.Type">widen</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.=:=" title="(that: TailCalls.this.global.Type)Boolean">=:=</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver" title="TailCalls.this.global.Tree">receiver</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.widen" title="=&gt; TailCalls.this.global.Type">widen</a>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiverIsSuper">receiverIsSuper</a>   = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.enclosingType" title="=&gt; TailCalls.this.global.Type">enclosingType</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.widen" title="=&gt; TailCalls.this.global.Type">widen</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.<:<" title="(that: TailCalls.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver" title="TailCalls.this.global.Tree">receiver</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.widen" title="=&gt; TailCalls.this.global.Type">widen</a>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.isRecursiveCall">isRecursiveCall</a>   = <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tailPos" title="=&gt; Boolean">tailPos</a>
        def <a title="=&gt; List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.transformArgs">transformArgs</a>     = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.args" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.matchesTypeArgs">matchesTypeArgs</a>   = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.tparams" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.sameElements" title="(that: scala.collection.GenIterable[TailCalls.this.global.Symbol])Boolean">sameElements</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.targs" title="List[TailCalls.this.global.Tree]">targs</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.Tree],TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol]])List[TailCalls.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.matchesTypeArgs.$anonfun.x$4" title="TailCalls.this.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; TailCalls.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">/* Records failure reason in Context for reporting.
         * Position is unchanged (by default, the method definition.)
         */</span>
        def <a title="(reason: String)TailCalls.this.global.Apply" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail">fail</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail.reason">reason</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Cannot rewrite recursive call at: &quot;)" class="string">&quot;Cannot rewrite recursive call at: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; because: &quot;)" class="string">&quot; because: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail.reason" title="String">reason</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a><span class="delimiter">)</span> <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: TailCallElimination.this.TailContext, value: String)Unit">failReasons</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail.reason" title="String">reason</a>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Apply" title="(tree: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.target" title="TailCalls.this.global.Tree">target</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.transformArgs" title="=&gt; List[TailCalls.this.global.Tree]">transformArgs</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="comment">/* Position of failure is that of the tree being considered. */</span>
        def <a title="(reason: String)TailCalls.this.global.Apply" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere">failHere</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere.reason">reason</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a><span class="delimiter">)</span> <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: TailCallElimination.this.TailContext, value: TailCalls.this.global.Position)Unit">failPositions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail" title="(reason: String)TailCalls.this.global.Apply">fail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere.reason" title="String">reason</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        def <a title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall">rewriteTailCall</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.recv">recv</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Rewriting tail recursive call:  &quot;)" class="string">&quot;Rewriting tail recursive call:  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.lineContent" title="=&gt; String">lineContent</a>.<span title="()String">trim</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.accessed" title="=&gt; scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]">accessed</a> <a href="../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: TailCalls.this.global.Symbol)TailCallElimination.this.accessed.type">+=</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a>
          <a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: TailCalls.this.global.analyzer.global.Position)(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fun" title="TailCalls.this.global.Tree">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args">args</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.mapWithIndex" title="(xs: List[TailCalls.this.global.Tree])(f: (TailCalls.this.global.Tree, Int) =&gt; TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">mapWithIndex</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.transformArgs" title="=&gt; List[TailCalls.this.global.Tree]">transformArgs</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args.$anonfun.arg">arg</a>, <a title="Int" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args.$anonfun.i">i</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack" title="(tree: TailCalls.this.global.Tree, tpe: TailCalls.this.global.Type)TailCalls.this.global.Tree">mkAttributedCastHack</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args.$anonfun.arg" title="TailCalls.this.global.Tree">arg</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; TailCalls.this.global.Type">info</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)TailCalls.this.global.Symbol">params</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args.$anonfun.i" title="Int">i</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.label" title="=&gt; TailCalls.this.global.Symbol">label</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.recv" title="TailCalls.this.global.Tree">recv</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">::</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall.args" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isEligible" title="=&gt; Boolean">isEligible</a><span class="delimiter">)</span>            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.fail" title="(reason: String)TailCalls.this.global.Apply">fail</a><span class="delimiter">(</span><span title="String(&quot;it is neither private nor final so can be overridden&quot;)" class="string">&quot;it is neither private nor final so can be overridden&quot;</span><span class="delimiter">)</span>
        else if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.isRecursiveCall" title="=&gt; Boolean">isRecursiveCall</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiverIsSuper" title="=&gt; Boolean">receiverIsSuper</a><span class="delimiter">)</span> <span class="comment">// OPT expensive check, avoid unless we will actually report the error</span>
                                        <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="String(&quot;it contains a recursive call targeting a supertype&quot;)" class="string">&quot;it contains a recursive call targeting a supertype&quot;</span><span class="delimiter">)</span>
          else                          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.defaultReason" title="=&gt; String">defaultReason</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        else if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.matchesTypeArgs" title="=&gt; Boolean">matchesTypeArgs</a><span class="delimiter">)</span>      <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="String(&quot;it is called recursively with different type arguments&quot;)" class="string">&quot;it is called recursively with different type arguments&quot;</span><span class="delimiter">)</span>
        else if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver" title="TailCalls.this.global.Tree">receiver</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall" title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree">rewriteTailCall</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentClass" title="=&gt; TailCalls.this.global.Symbol">currentClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
        else if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiverIsSame" title="=&gt; Boolean">receiverIsSame</a><span class="delimiter">)</span>       <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.failHere" title="(reason: String)TailCalls.this.global.Apply">failHere</a><span class="delimiter">(</span><span title="String(&quot;it changes type of \'this\' on a polymorphic recursive call&quot;)" class="string">&quot;it changes type of 'this' on a polymorphic recursive call&quot;</span><span class="delimiter">)</span>
        else                            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.rewriteTailCall" title="(recv: TailCalls.this.global.Tree)TailCalls.this.global.Tree">rewriteTailCall</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply.receiver" title="TailCalls.this.global.Tree">receiver</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      
      def <a title="(tree: TailCalls.this.global.DefDef)Boolean" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible">isEligible</a><span class="delimiter">(</span><a title="TailCalls.this.global.DefDef" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="TailCalls.this.global.DefDef">DefDef</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        val <a title="TailCalls.this.global.Symbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible.sym">sym</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible.tree" title="TailCalls.this.global.DefDef">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>
        <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible.sym" title="TailCalls.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#scala.reflect.internal;HasFlags.hasAccessorFlag" title="=&gt; Boolean">hasAccessorFlag</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible.sym" title="TailCalls.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isConstructor" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case ValDef<span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> =&gt;
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#scala.reflect.internal;HasFlags.isLazy" title="=&gt; Boolean">isLazy</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.hasAnnotation" title="(cls: TailCalls.this.global.Symbol)Boolean">hasAnnotation</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.TailrecClass" title="=&gt; TailCalls.this.global.ClassSymbol">TailrecClass</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>, <span title="String(&quot;lazy vals are not tailcall transformed&quot;)" class="string">&quot;lazy vals are not tailcall transformed&quot;</span><span class="delimiter">)</span>

          super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>

        case <a title="TailCalls.this.global.DefDef" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).dd">dd</a> @ DefDef<span class="delimiter">(</span>_, <span title="TailCalls.this.global.TermName">name</span>, _, <a title="List[List[TailCalls.this.global.ValDef]]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).vparamss0">vparamss0</a>, _, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rhs0">rhs0</a><span class="delimiter">)</span> if <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).isEligible" title="(tree: TailCalls.this.global.DefDef)Boolean">isEligible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).dd" title="TailCalls.this.global.DefDef">dd</a><span class="delimiter">)</span> =&gt;
          val <a title="TailCallElimination.this.DefDefTailContext" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx">newCtx</a> = new <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext" title="TailCallElimination.this.DefDefTailContext">DefDefTailContext</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).dd" title="TailCalls.this.global.DefDef">dd</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.containsRecursiveCall" title="(t: TailCalls.this.global.Tree)Boolean">containsRecursiveCall</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rhs0" title="TailCalls.this.global.Tree">rhs0</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>, <span title="String(&quot;@tailrec annotated method contains no recursive calls&quot;)" class="string">&quot;@tailrec annotated method contains no recursive calls&quot;</span><span class="delimiter">)</span>

          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Considering &quot;)">Considering $</span><span title="TailCalls.this.global.TermName">name</span><span title="String(&quot; for tailcalls, with labels in tailpos: &quot;)"> for tailcalls, with labels in tailpos: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.tailLabels" title="=&gt; scala.collection.immutable.Set[TailCalls.this.global.Symbol]">tailLabels</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          val <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newRHS">newRHS</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(56c1442fa5)" title="(tree: TailCalls.this.global.Tree, nctx: TailCallElimination.this.TailContext)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rhs0" title="TailCalls.this.global.Tree">rhs0</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a><span class="delimiter">)</span>

          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.deriveDefDef" title="(ddef: TailCalls.this.global.Tree)(applyToRhs: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Tree)TailCalls.this.global.DefDef">deriveDefDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.rhs">rhs</a> =&gt;
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isTransformed" title="=&gt; Boolean">isTransformed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">/* We have rewritten the tree, but there may be nested recursive calls remaining.
               * If @tailrec is given we need to fail those now.
               */</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                for <span class="delimiter">(</span><a title="TailCalls.this.global.Apply" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.$anonfun.t">t</a> @ Apply<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.$anonfun.fn">fn</a>, _<span class="delimiter">)</span> &lt;- <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.withFilter" title="(p: TailCalls.this.global.Tree =&gt; Boolean)scala.collection.generic.FilterMonadic[TailCalls.this.global.Tree,List[TailCalls.this.global.Tree]]">newRHS</a> ; if <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.$anonfun.fn" title="TailCalls.this.global.Tree">fn</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <a href="../../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.foreach" title="(f: TailCalls.this.global.Tree =&gt; Unit)Unit">==</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.method" title="=&gt; TailCalls.this.global.Symbol">method</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: TailCallElimination.this.TailContext, value: TailCalls.this.global.Position)Unit">failPositions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.$anonfun.t" title="TailCalls.this.global.Apply">t</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a>
                  <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure" title="(ctx: TailCallElimination.this.TailContext)Unit">tailrecFailure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
              val <a title="TailCalls.this.global.TermSymbol" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.newThis">newThis</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.newThis" title="(pos: TailCalls.this.global.Position)TailCalls.this.global.TermSymbol">newThis</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span>
              val vpSyms  = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).vparamss0" title="List[List[TailCalls.this.global.ValDef]]">vparamss0</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[TailCalls.this.global.ValDef] =&gt; scala.collection.GenTraversableOnce[TailCalls.this.global.ValDef])List[TailCalls.this.global.ValDef]">flatten</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.vpSyms">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.vpSyms.$anonfun.x$8" title="TailCalls.this.global.ValDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span>

              <a href="../typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: TailCalls.this.global.analyzer.global.Position)(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; TailCalls.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="(stats: List[TailCalls.this.global.Tree], expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a><span class="delimiter">(</span>
                <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: TailCalls.this.global.ValDef*)List[TailCalls.this.global.ValDef]">List</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: TailCalls.this.global.Symbol, rhs: TailCalls.this.global.Tree)TailCalls.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.newThis" title="TailCalls.this.global.TermSymbol">newThis</a>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentClass" title="=&gt; TailCalls.this.global.Symbol">currentClass</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.LabelDef.apply(f96b919e6a)" title="(sym: TailCalls.this.global.Symbol, params: List[TailCalls.this.global.Symbol], rhs: TailCalls.this.global.Tree)TailCalls.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.label" title="=&gt; TailCalls.this.global.MethodSymbol">label</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.newThis" title="TailCalls.this.global.TermSymbol">newThis</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">::</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).$anonfun.vpSyms" title="List[TailCalls.this.global.Symbol]">vpSyms</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack" title="(tree: TailCalls.this.global.Tree, tpe: TailCalls.this.global.Type)TailCalls.this.global.Tree">mkAttributedCastHack</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newRHS" title="TailCalls.this.global.Tree">newRHS</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.label" title="=&gt; TailCalls.this.global.MethodSymbol">label</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.resultType(9b9cdebb0f)" title="=&gt; TailCalls.this.global.Type">resultType</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            else <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a>.<a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;TailContext.isMandatory" title="=&gt; Boolean">isMandatory</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination;DefDefTailContext.containsRecursiveCall" title="(t: TailCalls.this.global.Tree)Boolean">containsRecursiveCall</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newRHS" title="TailCalls.this.global.Tree">newRHS</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.tailrecFailure" title="(ctx: TailCallElimination.this.TailContext)Unit">tailrecFailure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newCtx" title="TailCallElimination.this.DefDefTailContext">newCtx</a><span class="delimiter">)</span>

              <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).newRHS" title="TailCalls.this.global.Tree">newRHS</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

        <span class="comment">// a translated match</span>
        case Block<span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span>, <span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span> if <span title="List[TailCalls.this.global.Tree]">stats</span> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.forall" title="(p: TailCalls.this.global.Tree =&gt; Boolean)Boolean">forall</a> <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: TailCalls.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a> =&gt;
          <span class="comment">// the assumption is once we encounter a case, the remainder of the block will consist of cases</span>
          <span class="comment">// the prologue may be empty, usually it is the valdef that stores the scrut</span>
          val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[TailCalls.this.global.Tree], _2: List[TailCalls.this.global.Tree])(List[TailCalls.this.global.Tree], List[TailCalls.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).prologue">prologue</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).x$10.cases">cases</a><span class="delimiter">)</span> = <span title="List[TailCalls.this.global.Tree]">stats</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.span" title="(List[TailCalls.this.global.Tree], List[TailCalls.this.global.Tree])">span</a> <span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).x$10.$anonfun.s">s</a> =&gt; <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).x$10.$anonfun.s" title="TailCalls.this.global.Tree">s</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;LabelDef" title="TailCalls.this.global.LabelDef">LabelDef</a><span class="delimiter">]</span><span class="delimiter">)</span>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: TailCalls.this.global.Tree, stats: List[TailCalls.this.global.Tree], expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).prologue" title="List[TailCalls.this.global.Tree]">prologue</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[TailCalls.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[TailCalls.this.global.Tree],TailCalls.this.global.Tree,List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Tree]">++</a> <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">cases</span><span class="delimiter">)</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        <span class="comment">// a translated casedef</span>
        case LabelDef<span class="delimiter">(</span>_, _, <span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span> if <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: TailCalls.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.deriveLabelDef" title="(ldef: TailCalls.this.global.Tree)(applyToRhs: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Tree)TailCalls.this.global.LabelDef">deriveLabelDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">)</span>

        case Block<span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span>, <span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: TailCalls.this.global.Tree, stats: List[TailCalls.this.global.Tree], expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span><span class="delimiter">)</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        case CaseDef<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).pat">pat</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).guard">guard</a>, <span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// CaseDefs are already translated and guards were moved into the body.</span>
          <span class="comment">// If this was not the case, guards would have to be transformed here as well.</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.assert(65d7b4917f)" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).guard" title="TailCalls.this.global.Tree">guard</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.deriveCaseDef" title="(cdef: TailCalls.this.global.Tree)(applyToBody: TailCalls.this.global.Tree =&gt; TailCalls.this.global.Tree)TailCalls.this.global.CaseDef">deriveCaseDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).cond">cond</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).thenp">thenp</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).elsep">elsep</a><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: TailCalls.this.global.Tree, cond: TailCalls.this.global.Tree, thenp: TailCalls.this.global.Tree, elsep: TailCalls.this.global.Tree)TailCalls.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).cond" title="TailCalls.this.global.Tree">cond</a><span class="delimiter">)</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).thenp" title="TailCalls.this.global.Tree">thenp</a><span class="delimiter">)</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96)" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).elsep" title="TailCalls.this.global.Tree">elsep</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        case Match<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).selector">selector</a>, <span title="List[TailCalls.this.global.CaseDef]">cases</span><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Match" title="(tree: TailCalls.this.global.Tree, selector: TailCalls.this.global.Tree, cases: List[TailCalls.this.global.CaseDef])TailCalls.this.global.Match">Match</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).selector" title="TailCalls.this.global.Tree">selector</a><span class="delimiter">)</span>,
            <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.CaseDef]">cases</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]" class="delimiter">[</span><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>
          <span class="delimiter">)</span>

        case Try<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">block</span>, <span title="List[TailCalls.this.global.CaseDef]">catches</span>, <span title="TailCalls.this.global.EmptyTree.type">finalizer</span> @ <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// SI-1672 Catches are in tail position when there is no finalizer</span>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: TailCalls.this.global.Tree, block: TailCalls.this.global.Tree, catches: List[TailCalls.this.global.CaseDef], finalizer: TailCalls.this.global.Tree)TailCalls.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">block</span><span class="delimiter">)</span>,
            <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.CaseDef]">catches</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]" class="delimiter">[</span><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>,
            <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a>
          <span class="delimiter">)</span>

        case Try<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">block</span>, <span title="List[TailCalls.this.global.CaseDef]">catches</span>, <span title="TailCalls.this.global.Tree">finalizer</span><span class="delimiter">)</span> =&gt;
           <span class="comment">// no calls inside a try are in tail position if there is a finalizer, but keep recursing for nested functions</span>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: TailCalls.this.global.Tree, block: TailCalls.this.global.Tree, catches: List[TailCalls.this.global.CaseDef], finalizer: TailCalls.this.global.Tree)TailCalls.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">block</span><span class="delimiter">)</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransforms" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">noTailTransforms</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.CaseDef]">catches</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]" class="delimiter">[</span><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>,
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">finalizer</span><span class="delimiter">)</span>
          <span class="delimiter">)</span>

        case Apply<span class="delimiter">(</span><a title="TailCalls.this.global.TypeApply" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tapply">tapply</a> @ TypeApply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).targs">targs</a><span class="delimiter">)</span>, <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).vargs">vargs</a><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply" title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteApply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tapply" title="TailCalls.this.global.TypeApply">tapply</a>, <span title="TailCalls.this.global.Tree">fun</span>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).targs" title="List[TailCalls.this.global.Tree]">targs</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).vargs" title="List[TailCalls.this.global.Tree]">vargs</a><span class="delimiter">)</span>

        case Apply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="List[TailCalls.this.global.Tree]">args</span><span class="delimiter">)</span> if <span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;ValueClassDefinitions.Boolean_or" title="=&gt; TailCalls.this.global.TermSymbol">Boolean_or</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;ValueClassDefinitions.Boolean_and" title="=&gt; TailCalls.this.global.TermSymbol">Boolean_and</a> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Apply" title="(tree: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span><span class="delimiter">)</span>, <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTrees" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">args</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">// this is to detect tailcalls in translated matches</span>
        <span class="comment">// it's a one-argument call to a label that is in a tailposition and that looks like label(x) {x}</span>
        <span class="comment">// thus, the argument to the call is in tailposition</span>
        case Apply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="scala.collection.immutable.::[TailCalls.this.global.Tree]">args</span> @ <span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).arg">arg</a> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span><span class="delimiter">)</span> if <span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isLabel" title="=&gt; Boolean">isLabel</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.ctx_=" title="=&gt; TailCallElimination.this.TailContext">ctx</a>.<a href="../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: TailCalls.this.global.Symbol)Boolean">tailLabels</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;in tailpos label: &quot;)">in tailpos label: $</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).arg" title="TailCalls.this.global.Tree">arg</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          val <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).res">res</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.yesTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">yesTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).arg" title="TailCalls.this.global.Tree">arg</a><span class="delimiter">)</span>
          <span class="comment">// we tail-called -- TODO: shield from false-positives where we rewrite but don't tail-call</span>
          <span class="comment">// must leave the jump to the original tailpos-label (fun)!</span>
          <span class="comment">// there might be *a* tailcall *in* res, but it doesn't mean res *always* tailcalls</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).res" title="TailCalls.this.global.Tree">res</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).arg" title="TailCalls.this.global.Tree">arg</a><span class="delimiter">)</span>
            <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Apply" title="(tree: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>, <span title="TailCalls.this.global.Tree">fun</span>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).res" title="TailCalls.this.global.Tree">res</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">::</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
          else
            <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply" title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteApply</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="TailCalls.this.global.Tree">fun</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <span title="scala.collection.immutable.::[TailCalls.this.global.Tree]">args</span><span class="delimiter">)</span>

        case Apply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="List[TailCalls.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).rewriteApply" title="(target: TailCalls.this.global.Tree, fun: TailCalls.this.global.Tree, targs: List[TailCalls.this.global.Tree], args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteApply</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="TailCalls.this.global.Tree">fun</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <span title="List[TailCalls.this.global.Tree]">args</span><span class="delimiter">)</span>
        case Alternative<span class="delimiter">(</span>_<span class="delimiter">)</span> | Star<span class="delimiter">(</span>_<span class="delimiter">)</span> | Bind<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          sys.<a href="../../../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;We should\'ve never gotten inside a pattern&quot;)" class="string">&quot;We should've never gotten inside a pattern&quot;</span><span class="delimiter">)</span>
        case Select<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).qual">qual</a>, <span title="TailCalls.this.global.Name">name</span><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Select" title="(tree: TailCalls.this.global.Tree, qualifier: TailCalls.this.global.Tree, selector: TailCalls.this.global.Name)TailCalls.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.noTailTransform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">noTailTransform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).qual" title="TailCalls.this.global.Tree">qual</a><span class="delimiter">)</span>, <span title="TailCalls.this.global.Name">name</span><span class="delimiter">)</span>
        case <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a> | Super<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | This<span class="delimiter">(</span>_<span class="delimiter">)</span> | Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> | Literal<span class="delimiter">(</span>_<span class="delimiter">)</span> | Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a>
        case _ =&gt;
          super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.transform(fe3d2def96).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">// Workaround for SI-6900. Uncurry installs an InfoTransformer and a tree Transformer.</span>
    <span class="comment">// These leave us with conflicting view on method signatures; the parameter symbols in</span>
    <span class="comment">// the MethodType can be clones of the ones originally found on the parameter ValDef, and</span>
    <span class="comment">// consequently appearing in the typechecked RHS of the method.</span>
    private def <a title="(tree: TailCalls.this.global.Tree, tpe: TailCalls.this.global.Type)TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack">mkAttributedCastHack</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCalls.this.global.Type" id="scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="TailCalls.this.global.Type">Type</a><span class="delimiter">)</span> =
      <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="TailCalls.this.global.gen.type">gen</a>.<a href="../Global.scala.html#scala.tools.nsc;Global.gen.mkAttributedCast" title="(tree: TailCalls.this.global.Tree, pt: TailCalls.this.global.Type)TailCalls.this.global.Tree">mkAttributedCast</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack.tree" title="TailCalls.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.transform;TailCalls;TailCallElimination.mkAttributedCastHack.tpe" title="TailCalls.this.global.Type">tpe</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">// collect the LabelDefs (generated by the pattern matcher) in a DefDef that are in tail position</span>
  <span class="comment">// the labels all look like: matchEnd(x) {x}</span>
  <span class="comment">// then, in a forward jump `matchEnd(expr)`, `expr` is considered in tail position (and the matchEnd jump is replaced by the jump generated by expr)</span>
  class <a title="class TailPosLabelsTraverser extends TailCalls.this.global.Traverser" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser">TailPosLabelsTraverser</a> extends <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser" title="TailCalls.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.tailLabels">tailLabels</a> = new scala.collection.mutable.<a href="../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]">HashSet</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    private var <a title="Boolean" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.maybeTail_=">maybeTail</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true <span class="comment">// since we start in the rhs of a DefDef</span>

    def <a title="(tree: TailCalls.this.global.Tree, maybeTailNew: Boolean)Unit" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f)">traverse</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a>, <a title="Boolean" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).maybeTailNew">maybeTailNew</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
      val <a title="Boolean" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).saved">saved</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.maybeTail_=" title="=&gt; Boolean">maybeTail</a>
      <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.maybeTail_=" title="(x$1: Boolean)Unit">maybeTail</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).maybeTailNew" title="Boolean">maybeTailNew</a>
      try <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
      finally <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.maybeTail_=" title="(x$1: Boolean)Unit">maybeTail</a> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f).saved" title="Boolean">saved</a>
    <span class="delimiter">}</span>

    def <a title="(tree: TailCalls.this.global.Tree)Unit" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail">traverseNoTail</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(33544df10f)" title="(tree: TailCalls.this.global.Tree, maybeTailNew: Boolean)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail.tree" title="TailCalls.this.global.Tree">tree</a>, maybeTailNew = false<span class="delimiter">)</span>
    def <a title="(trees: List[TailCalls.this.global.Tree])Unit" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail">traverseTreesNoTail</a><span class="delimiter">(</span><a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail.trees">trees</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[TailCalls.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail.trees" title="List[TailCalls.this.global.Tree]">trees</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: TailCalls.this.global.Tree =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail" title="(tree: TailCalls.this.global.Tree)Unit">traverseNoTail</a>

    override def <a title="(tree: TailCalls.this.global.Tree)Unit" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)">traverse</a><span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="TailCalls.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).tree" title="TailCalls.this.global.Tree">tree</a> match <span class="delimiter">{</span>
      <span class="comment">// we're looking for label(x){x} in tail position, since that means `a` is in tail position in a call `label(a)`</span>
      case LabelDef<span class="delimiter">(</span>_, <a href="../../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[TailCalls.this.global.Ident])Some[List[TailCalls.this.global.Ident]]">List</a><span class="delimiter">(</span><span title="TailCalls.this.global.Ident">arg</span><span class="delimiter">)</span>, <span title="TailCalls.this.global.Ident">body</span>@Ident<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> if <span title="TailCalls.this.global.Ident">arg</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <span title="TailCalls.this.global.Ident">body</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> =&gt;
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.maybeTail_=" title="=&gt; Boolean">maybeTail</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.tailLabels" title="=&gt; scala.collection.mutable.HashSet[TailCalls.this.global.Symbol]">tailLabels</a> <a href="../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: TailCalls.this.global.Symbol)TailPosLabelsTraverser.this.tailLabels.type">+=</a> <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).tree" title="TailCalls.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a>

      <span class="comment">// jumps to matchEnd are transparent; need this case for nested matches</span>
      <span class="comment">// (and the translated match case below does things in reverse for this case's sake)</span>
      case Apply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <span title="TailCalls.this.global.Tree">arg</span> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> if <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: TailCalls.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: TailCalls.this.global.Symbol)Boolean">tailLabels</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">arg</span><span class="delimiter">)</span>

      case Apply<span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>, <a title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).args">args</a><span class="delimiter">)</span> if <span class="delimiter">(</span><span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;ValueClassDefinitions.Boolean_or" title="=&gt; TailCalls.this.global.TermSymbol">Boolean_or</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span title="TailCalls.this.global.Tree">fun</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; TailCalls.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;ValueClassDefinitions.Boolean_and" title="=&gt; TailCalls.this.global.TermSymbol">Boolean_and</a><span class="delimiter">)</span> =&gt;
        <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverseTrees" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).args" title="List[TailCalls.this.global.Tree]">args</a><span class="delimiter">)</span>

      <span class="comment">// a translated casedef</span>
      case LabelDef<span class="delimiter">(</span>_, _, <span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span> if <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: TailCalls.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span>

      <span class="comment">// a translated match</span>
      case Block<span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span>, <span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span> if <span title="List[TailCalls.this.global.Tree]">stats</span> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.forall" title="(p: TailCalls.this.global.Tree =&gt; Boolean)Boolean">forall</a> <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: TailCalls.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a> =&gt;
        <span class="comment">// the assumption is once we encounter a case, the remainder of the block will consist of cases</span>
        <span class="comment">// the prologue may be empty, usually it is the valdef that stores the scrut</span>
        val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[TailCalls.this.global.Tree], _2: List[TailCalls.this.global.Tree])(List[TailCalls.this.global.Tree], List[TailCalls.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).prologue">prologue</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="List[TailCalls.this.global.Tree]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).x$12.cases">cases</a><span class="delimiter">)</span> = <span title="List[TailCalls.this.global.Tree]">stats</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.span" title="(List[TailCalls.this.global.Tree], List[TailCalls.this.global.Tree])">span</a> <span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).x$12.$anonfun.s">s</a> =&gt; <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).x$12.$anonfun.s" title="TailCalls.this.global.Tree">s</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;LabelDef" title="TailCalls.this.global.LabelDef">LabelDef</a><span class="delimiter">]</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span>
        <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverseTrees" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">cases</span>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[TailCalls.this.global.Tree]">reverse</a><span class="delimiter">)</span>  <span class="comment">// reverse so that we enter the matchEnd LabelDef before we see jumps to it</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTreesNoTail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).prologue" title="List[TailCalls.this.global.Tree]">prologue</a><span class="delimiter">)</span> <span class="comment">// selector (may be absent)</span>

      case CaseDef<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).pat">pat</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).guard">guard</a>, <span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">body</span><span class="delimiter">)</span>

      case Match<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).selector">selector</a>, <span title="List[TailCalls.this.global.CaseDef]">cases</span><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail" title="(tree: TailCalls.this.global.Tree)Unit">traverseNoTail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).selector" title="TailCalls.this.global.Tree">selector</a><span class="delimiter">)</span>
        <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverseTrees" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.CaseDef]">cases</span><span class="delimiter">)</span>

      case <a title="TailCalls.this.global.DefDef" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).dd">dd</a> @ DefDef<span class="delimiter">(</span>_, _, _, _, _, _<span class="delimiter">)</span> =&gt; <span class="comment">// we are run per-method</span>

      case Block<span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span>, <span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTreesNoTail</a><span class="delimiter">(</span><span title="List[TailCalls.this.global.Tree]">stats</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><span title="TailCalls.this.global.Tree">expr</span><span class="delimiter">)</span>

      case If<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).cond">cond</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).thenp">thenp</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).elsep">elsep</a><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).thenp" title="TailCalls.this.global.Tree">thenp</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081)" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).elsep" title="TailCalls.this.global.Tree">elsep</a><span class="delimiter">)</span>

      case Try<span class="delimiter">(</span><a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).block">block</a>, <a title="List[TailCalls.this.global.CaseDef]" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).catches">catches</a>, <a title="TailCalls.this.global.Tree" id="scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).finalizer">finalizer</a><span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail" title="(tree: TailCalls.this.global.Tree)Unit">traverseNoTail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).block" title="TailCalls.this.global.Tree">block</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseTreesNoTail" title="(trees: List[TailCalls.this.global.Tree])Unit">traverseTreesNoTail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).catches" title="List[TailCalls.this.global.CaseDef]">catches</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverseNoTail" title="(tree: TailCalls.this.global.Tree)Unit">traverseNoTail</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).finalizer" title="TailCalls.this.global.Tree">finalizer</a><span class="delimiter">)</span>

      case Apply<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="TailCalls.this.global.EmptyTree.type">EmptyTree</a> | Super<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | This<span class="delimiter">(</span>_<span class="delimiter">)</span> | Select<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> | Literal<span class="delimiter">(</span>_<span class="delimiter">)</span> | Function<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
      case _ =&gt; super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Traverser.traverse" title="(tree: TailCalls.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.transform;TailCalls;TailPosLabelsTraverser.traverse(bb2d0bd081).tree" title="TailCalls.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
