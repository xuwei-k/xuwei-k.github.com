<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/typechecker/Tags.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.tools.nsc
package typechecker

trait <a title="trait Tags extends AnyRef" id="scala.tools.nsc.typechecker;Tags">Tags</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  self: Analyzer =&gt;

  import <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="Tags.this.global.definitions.type">definitions</a>._

  trait <a title="trait Tag extends AnyRef" id="scala.tools.nsc.typechecker;Tags;Tag">Tag</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
    self: Typer =&gt;

    private val <a title="Tags.this.global.definitions.RunDefinitions" id="scala.tools.nsc.typechecker;Tags;Tag.runDefinitions">runDefinitions</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Tags.this.global.Run">currentRun</a>.<a href="../Global.scala.html#scala.tools.nsc;Global;Run.runDefinitions" title="=&gt; Tags.this.global.definitions.RunDefinitions">runDefinitions</a>
    import <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.runDefinitions" title="=&gt; Tags.this.global.definitions.RunDefinitions">runDefinitions</a>._

    private def <a title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag">resolveTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag.taggedTp">taggedTp</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag.allowMaterialization">allowMaterialization</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> = <a href="../Global.scala.html#scala.tools.nsc;Global.enteringTyper" title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree">enteringTyper</a> <span class="delimiter">{</span>
      def <a title="(tree: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag.wrapper">wrapper</a> <span class="delimiter">(</span><a title="=&gt; Tags.this.global.Tree" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTag.wrapper.tree">tree</a>: =&gt; Tree<span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Tags.this.global.Tree">Tree</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.allowMaterialization" title="Boolean">allowMaterialization</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Tags.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.withMacrosEnabled" title="[T](op: =&gt; T)T">withMacrosEnabled</a><span title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Tags.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.wrapper.tree" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> else <span class="delimiter">(</span><a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Tags.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.withMacrosDisabled" title="[T](op: =&gt; T)T">withMacrosDisabled</a><span title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Tags.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.wrapper.tree" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.wrapper" title="(tree: =&gt; Tags.this.global.Tree)Tags.this.global.Tree">wrapper</a><span class="delimiter">(</span><a href="Implicits.scala.html#scala.tools.nsc.typechecker;Implicits.inferImplicit(b1197b7e07)" title="(tree: Tags.this.global.Tree, pt: Tags.this.global.Type, reportAmbiguous: Boolean, isView: Boolean, context: Tags.this.Context, saveAmbiguousDivergent: Boolean, pos: Tags.this.global.Position)Tags.this.SearchResult">inferImplicit</a><span class="delimiter">(</span>
        <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Tags.this.global.EmptyTree.type">EmptyTree</a>,
        <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.taggedTp" title="Tags.this.global.Type">taggedTp</a>,
        reportAmbiguous = true,
        isView = false,
        <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Tags.this.Context">context</a>,
        saveAmbiguousDivergent = true,
        <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag.pos" title="Tags.this.global.Position">pos</a>
      <span class="delimiter">)</span>.<a href="Implicits.scala.html#scala.tools.nsc.typechecker;Implicits;SearchResult.tree" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Finds in scope or materializes a ClassTag.
     *  Should be used instead of ClassManifest every time compiler needs to persist an erasure.
     *
     *  Once upon a time, we had an `ErasureTag` which was to `ClassTag` the same that `WeakTypeTag` is for `TypeTag`.
     *  However we found out that we don't really need this concept, so it got removed.
     *
     *  @param   pos                    Position for error reporting. Please, provide meaningful value.
     *  @param   tp                     Type we're looking a ClassTag for, e.g. resolveClassTag(pos, IntTpe) will look for ClassTag[Int].
     *  @param   allowMaterialization   If true (default) then the resolver is allowed to launch materialization macros when there's no class tag in scope.
     *                                  If false then materialization macros are prohibited from running.
     *
     *  @returns Tree that represents an `scala.reflect.ClassTag` for `tp` if everything is okay.
     *           EmptyTree if the result contains unresolved (i.e. not spliced) type parameters and abstract type members.
     *           EmptyTree if `allowMaterialization` is false, and there is no class tag in scope.
     */</span>
    def <a title="(pos: Tags.this.global.Position, tp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree" id="scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag">resolveClassTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.tp">tp</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag$default$3">allowMaterialization</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true<span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Tags.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      val <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.taggedTp">taggedTp</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: Tags.this.global.Type, args: List[Tags.this.global.Type])Tags.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ClassTagClass" title="=&gt; Tags.this.global.ClassSymbol">ClassTagClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TypeSymbol.typeConstructor" title="=&gt; Tags.this.global.Type">typeConstructor</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.tp" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag" title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree">resolveTag</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.pos" title="Tags.this.global.Position">pos</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag.taggedTp" title="Tags.this.global.Type">taggedTp</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveClassTag$default$3" title="Boolean">allowMaterialization</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Finds in scope or materializes an WeakTypeTag (if `concrete` is false) or a TypeTag (if `concrete` is true).
     *
     *  @param   pos                    Position for error reporting. Please, provide meaningful value.
     *  @param   pre                    Prefix that represents a universe this type tag will be bound to.
     *                                  If `pre` is set to `NoType`, then any type tag in scope will do, regardless of its affiliation.
     *                                  If `pre` is set to `NoType`, and tag resolution involves materialization, then `mkRuntimeUniverseRef` will be used.
     *  @param   tp                     Type we're looking a TypeTag for, e.g. resolveTypeTag(pos, mkRuntimeUniverseRef, IntTpe, false) will look for scala.reflect.runtime.universe.TypeTag[Int].
     *  @param   concrete               If true then the result must not contain unresolved (i.e. not spliced) type parameters and abstract type members.
     *                                  If false then the function will always succeed (abstract types will be reified as free types).
     *  @param   allowMaterialization   If true (default) then the resolver is allowed to launch materialization macros when there's no type tag in scope.
     *                                  If false then materialization macros are prohibited from running.
     *
     *  @returns Tree that represents a `scala.reflect.TypeTag` for `tp` if everything is okay.
     *           EmptyTree if `concrete` is true and the result contains unresolved (i.e. not spliced) type parameters and abstract type members.
     *           EmptyTree if `allowMaterialization` is false, and there is no array tag in scope.
     */</span>
    def <a title="(pos: Tags.this.global.Position, pre: Tags.this.global.Type, tp: Tags.this.global.Type, concrete: Boolean, allowMaterialization: Boolean)Tags.this.global.Tree" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag">resolveTypeTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pre">pre</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Tags.this.global.Type">Type</a>, <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tp">tp</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.concrete">concrete</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag$default$5">allowMaterialization</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = true<span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Tags.this.global.Tree">Tree</a> =
      <span class="comment">// if someone requests a type tag, but scala-reflect.jar isn't on the library classpath, then bail</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pre" title="Tags.this.global.Type">pre</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="Tags.this.global.NoType.type">NoType</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ApiUniverseClass" title="=&gt; Tags.this.global.Symbol">ApiUniverseClass</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Tags.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Tags.this.global.EmptyTree.type">EmptyTree</a>
      else <span class="delimiter">{</span>
        val <a title="Tags.this.global.Symbol" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tagSym">tagSym</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.concrete" title="Boolean">concrete</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.TypeTagClass" title="=&gt; Tags.this.global.Symbol">TypeTagClass</a> else <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.WeakTypeTagClass" title="=&gt; Tags.this.global.Symbol">WeakTypeTagClass</a>
        val <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tagTp">tagTp</a> =  if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pre" title="Tags.this.global.Type">pre</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="Tags.this.global.NoType.type">NoType</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.TypeRef.apply(2232bf1c73)" title="(pre: Tags.this.global.Type, sym: Tags.this.global.Symbol, args: List[Tags.this.global.Type])Tags.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ApiUniverseClass" title="=&gt; Tags.this.global.Symbol">ApiUniverseClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;SymbolContextApiImpl.toTypeConstructor" title="=&gt; Tags.this.global.Type">toTypeConstructor</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tagSym" title="Tags.this.global.Symbol">tagSym</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tp" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.singleType" title="(pre: Tags.this.global.Type, sym: Tags.this.global.Symbol)Tags.this.global.Type">singleType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pre" title="Tags.this.global.Type">pre</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pre" title="Tags.this.global.Type">pre</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: Tags.this.global.Name)Tags.this.global.Symbol">member</a> <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tagSym" title="Tags.this.global.Symbol">tagSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; tagSym.NameType">name</a><span class="delimiter">)</span>
        val <a title="Tags.this.global.Type" id="scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.taggedTp">taggedTp</a> = <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: Tags.this.global.Type, args: List[Tags.this.global.Type])Tags.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tagTp" title="Tags.this.global.Type">tagTp</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.tp" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTag" title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree">resolveTag</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.pos" title="Tags.this.global.Position">pos</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag.taggedTp" title="Tags.this.global.Type">taggedTp</a>, <a href="#scala.tools.nsc.typechecker;Tags;Tag.resolveTypeTag$default$5" title="Boolean">allowMaterialization</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="AnyRef" class="delimiter">}</span>

        </pre>
    </body>
</html>
