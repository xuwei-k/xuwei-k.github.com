<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/typechecker/Macros.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.tools.nsc
package typechecker

import java.lang.<span title="Math.type">Math</span>.min
import symtab.<a href="../symtab/package.scala.html#scala.tools.nsc.symtab.package.Flags" title="=&gt; reflect.internal.Flags.type">Flags</a>._
import scala.tools.nsc.util._
import scala.reflect.runtime.ReflectionUtils
import scala.collection.mutable.ListBuffer
import scala.reflect.ClassTag
import scala.reflect.internal.util.Statistics
import scala.reflect.macros.util._
import scala.util.control.ControlThrowable
import scala.reflect.macros.runtime.<span class="delimiter">{</span>AbortMacroException, MacroRuntimes<span class="delimiter">}</span>
import scala.reflect.runtime.<span class="delimiter">{</span>universe =&gt; ru<span class="delimiter">}</span>
import scala.reflect.macros.compiler.DefaultMacroCompiler
import scala.tools.reflect.FastTrack
import scala.runtime.ScalaRunTime
import <a href="#scala.tools.nsc.typechecker.Fingerprint" title="scala.tools.nsc.typechecker.Fingerprint.type">Fingerprint</a>._

<span class="comment">/**
 *  Code to deal with macros, namely with:
 *    * Compilation of macro definitions
 *    * Expansion of macro applications
 *
 *  Say we have in a class C:
 *
 *    def foo[T](xs: List[T]): T = macro fooBar
 *
 *  Then fooBar needs to point to a static method of the following form:
 *
 *    def fooBar[T: c.WeakTypeTag] // type tag annotation is optional
 *           (c: scala.reflect.macros.blackbox.Context)
 *           (xs: c.Expr[List[T]])
 *           : c.Expr[T] = {
 *      ...
 *    }
 *
 *  Then, if foo is called in qual.foo[Int](elems), where qual: D,
 *  the macro application is expanded to a reflective invocation of fooBar with parameters:
 *
 *    (simpleMacroContext{ type PrefixType = D; val prefix = qual })
 *    (Expr(elems))
 *    (TypeTag(Int))
 */</span>
trait <a title="trait Macros extends AnyRef with scala.reflect.macros.runtime.MacroRuntimes with scala.reflect.macros.util.Traces with scala.reflect.macros.util.Helpers" id="scala.tools.nsc.typechecker;Macros">Macros</a> extends <a href="../../../reflect/macros/runtime/MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes" title="scala.reflect.macros.runtime.MacroRuntimes">MacroRuntimes</a> with <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces" title="scala.reflect.macros.util.Traces">Traces</a> with <a href="../../../reflect/macros/util/Helpers.scala.html#scala.reflect.macros.util;Helpers" title="scala.reflect.macros.util.Helpers">Helpers</a> <span class="delimiter">{</span>
  self: Analyzer =&gt;

  import <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="Macros.this.global.definitions.type">definitions</a>._
  import <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="Macros.this.global.treeInfo.type">treeInfo</a>.<span class="delimiter">{</span>isRepeatedParamType =&gt; _, _<span class="delimiter">}</span>
  import <a href="#scala.tools.nsc.typechecker.MacrosStats" title="scala.tools.nsc.typechecker.MacrosStats.type">MacrosStats</a>._

  lazy val <a title="scala.tools.reflect.FastTrack[Macros.this.type]" id="scala.tools.nsc.typechecker;Macros.fastTrack">fastTrack</a> = new <a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack" title="scala.tools.reflect.FastTrack[Macros.this.type]">FastTrack</a><span class="delimiter">[</span>self.type<span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a><span class="delimiter">)</span>

  def <a title="=&gt; scala.tools.nsc.Settings" id="scala.tools.nsc.typechecker;Macros.globalSettings">globalSettings</a> = <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>

  protected def <a title="()ClassLoader" id="scala.tools.nsc.typechecker;Macros.findMacroClassLoader">findMacroClassLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="ClassLoader">ClassLoader</span> = <span class="delimiter">{</span>
    val <a title="List[java.net.URL]" id="scala.tools.nsc.typechecker;Macros.findMacroClassLoader.classpath">classpath</a> = <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#scala.tools.nsc;Global.classPath" title="=&gt; Macros.this.global.PlatformClassPath">classPath</a>.<a href="../util/ClassPath.scala.html#scala.tools.nsc.util;ClassPath.asURLs" title="=&gt; List[java.net.URL]">asURLs</a>
    <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;macro classloader: initializing from -cp: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.findMacroClassLoader.classpath" title="List[java.net.URL]">classpath</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../util/package.scala.html#scala.tools.nsc.util.package.ScalaClassLoader" title="=&gt; reflect.internal.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="../../../reflect/internal/util/ScalaClassLoader.scala.html#scala.reflect.internal.util.ScalaClassLoader.fromURLs" title="(urls: Seq[java.net.URL], parent: ClassLoader)tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.findMacroClassLoader.classpath" title="List[java.net.URL]">classpath</a>, <a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** `MacroImplBinding` and its companion module are responsible for
   *  serialization/deserialization of macro def -&gt; impl bindings.
   *
   *  The first officially released version of macros persisted these bindings across compilation runs
   *  using a neat trick. The right-hand side of a macro definition (which contains a reference to a macro impl)
   *  was typechecked and then put verbatim into an annotation on the macro definition.
   *
   *  This solution is very simple, but unfortunately it's also lacking. If we use it, then
   *  signatures of macro defs become transitively dependent on scala-reflect.jar
   *  (because they refer to macro impls, and macro impls refer to *box.Context defined in scala-reflect.jar).
   *  More details can be found in comments to https://issues.scala-lang.org/browse/SI-5940.
   *
   *  Therefore we have to avoid putting macro impls into binding pickles and come up with our own serialization format.
   *  Situation is further complicated by the fact that it's not enough to just pickle macro impl's class name and method name,
   *  because macro expansion needs some knowledge about the shape of macro impl's signature (which we can't pickle).
   *  Hence we precompute necessary stuff (e.g. the layout of type parameters) when compiling macro defs.
   */</span>

  <span class="comment">/** Represents all the information that a macro definition needs to know about its implementation.
   *  Includes a path to load the implementation via Java reflection,
   *  and various accounting information necessary when composing an argument list for the reflective invocation.
   */</span>
  case class <a title="class MacroImplBinding extends AnyRef with Product with Serializable" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding">MacroImplBinding</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a>
      <span class="comment">// Is this macro impl a bundle (a trait extending *box.Macro) or a vanilla def?</span>
      val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.isBundle">isBundle</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>,
      <span class="comment">// Is this macro impl blackbox (i.e. having blackbox.Context in its signature)?</span>
      val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.isBlackbox">isBlackbox</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>,
      <span class="comment">// Java class name of the class that contains the macro implementation</span>
      <span class="comment">// is used to load the corresponding object with Java reflection</span>
      <a title="String" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.className">className</a>: <span title="String">String</span>,
      <span class="comment">// method name of the macro implementation</span>
      <span class="comment">// `className` and `methName` are all we need to reflectively invoke a macro implementation</span>
      <span class="comment">// because macro implementations cannot be overloaded</span>
      <a title="String" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.methName">methName</a>: <span title="String">String</span>,
      <span class="comment">// flattens the macro impl's parameter lists having symbols replaced with their fingerprints</span>
      <span class="comment">// currently fingerprints are calculated solely from types of the symbols:</span>
      <span class="comment">//   * c.Expr[T] =&gt; LiftedTyped</span>
      <span class="comment">//   * c.Tree =&gt; LiftedUntyped</span>
      <span class="comment">//   * c.WeakTypeTag[T] =&gt; Tagged(index of the type parameter corresponding to that type tag)</span>
      <span class="comment">//   * everything else (e.g. *box.Context) =&gt; Other</span>
      <span class="comment">// f.ex. for: def impl[T: WeakTypeTag, U, V: WeakTypeTag](c: blackbox.Context)(x: c.Expr[T], y: c.Tree): (U, V) = ???</span>
      <span class="comment">// `signature` will be equal to List(List(Other), List(LiftedTyped, LiftedUntyped), List(Tagged(0), Tagged(2)))</span>
      <a title="List[List[scala.tools.nsc.typechecker.Fingerprint]]" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.signature">signature</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[List[scala.tools.nsc.typechecker.Fingerprint]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span><span class="delimiter">]</span>,
      <span class="comment">// type arguments part of a macro impl ref (the right-hand side of a macro definition)</span>
      <span class="comment">// these trees don't refer to a macro impl, so we can pickle them as is</span>
      <a title="List[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.targs">targs</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Macros.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// Was this binding derived from a `def ... = macro ???` definition?</span>
    def <a title="=&gt; Boolean" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.is_???">is_???</a> = <span class="delimiter">{</span>
      val <a title="Macros.this.global.TermSymbol" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.is_???.Predef_???">Predef_???</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Macros.this.global.Run">currentRun</a>.<a href="../Global.scala.html#scala.tools.nsc;Global;Run.runDefinitions" title="=&gt; Macros.this.global.definitions.RunDefinitions">runDefinitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.Predef_???" title="=&gt; Macros.this.global.TermSymbol">Predef_???</a>
      <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.className" title="=&gt; String">className</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.is_???.Predef_???" title="Macros.this.global.TermSymbol">Predef_???</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.javaClassName" title="=&gt; String">javaClassName</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.methName" title="=&gt; String">methName</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.is_???.Predef_???" title="Macros.this.global.TermSymbol">Predef_???</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TermSymbol.name" title="=&gt; Macros.this.global.TermName">name</a>.<a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.encoded" title="=&gt; String">encoded</a>
    <span class="delimiter">}</span>
    def <a title="=&gt; Boolean" id="scala.tools.nsc.typechecker;Macros;MacroImplBinding.isWhitebox">isWhitebox</a> = <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.isBlackbox" title="=&gt; Boolean">isBlackbox</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Macro def -&gt; macro impl bindings are serialized into a `macroImpl` annotation
   *  with synthetic content that carries the payload described in `MacroImplBinding`.
   *
   *  For example, for a pair of macro definition and macro implementation:
   *    def impl(c: scala.reflect.macros.blackbox.Context): c.Expr[Unit] = ???
   *    def foo: Unit = macro impl
   *
   *  We will have the following annotation added on the macro definition `foo`:
   *
   *    @scala.reflect.macros.internal.macroImpl(
   *      `macro`(
   *        &quot;macroEngine&quot; = &lt;current macro engine&gt;,
   *        &quot;isBundle&quot; = false,
   *        &quot;isBlackbox&quot; = true,
   *        &quot;signature&quot; = List(Other),
   *        &quot;methodName&quot; = &quot;impl&quot;,
   *        &quot;className&quot; = &quot;Macros$&quot;))
   */</span>
  def <a title="=&gt; String" id="scala.tools.nsc.typechecker;Macros.macroEngine">macroEngine</a> = <span title="String(&quot;v7.0 (implemented in Scala 2.11.0-M8)&quot;)" class="string">&quot;v7.0 (implemented in Scala 2.11.0-M8)&quot;</span>
  object <a title="Macros.this.MacroImplBinding.type" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.readResolve">MacroImplBinding</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.readResolve" title="Macros.this.MacroImplBinding.type" class="delimiter">{</a>
    def <a title="(obj: Any)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom">pickleAtom</a><span class="delimiter">(</span><a title="Any" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.obj">obj</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> =
      <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.obj" title="Any">obj</a> match <span class="delimiter">{</span>
        case <a title="List[_]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.list">list</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[_]">List</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Macros.this.global.Tree, args: List[Macros.this.global.Tree])Macros.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Macros.this.global.Symbol)Macros.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ListModule" title="=&gt; Macros.this.global.ModuleSymbol">ListModule</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.list" title="List[_]">list</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: _ =&gt; Macros.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[_],Macros.this.global.Tree,List[Macros.this.global.Tree]])List[Macros.this.global.Tree]">map</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom" title="(obj: Any)Macros.this.global.Tree">pickleAtom</a><span class="delimiter">)</span>
        case <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.s">s</a>: <span title="String">String</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: Macros.this.global.Constant)Macros.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)Macros.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.s" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a title="Double" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.d">d</a>: <a href="../../../Double.scala.html#scala;Double" title="Double">Double</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: Macros.this.global.Constant)Macros.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)Macros.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.d" title="Double">d</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.b">b</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: Macros.this.global.Constant)Macros.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)Macros.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.b" title="Boolean">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.f">f</a>: <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: Macros.this.global.Constant)Macros.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)Macros.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom.f" title="scala.tools.nsc.typechecker.Fingerprint">f</a>.<a href="#scala.tools.nsc.typechecker;Fingerprint.value" title="=&gt; Int">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    def <a title="(tree: Macros.this.global.Tree)Any" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom">unpickleAtom</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <span title="Any">Any</span> =
      <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.tree" title="Macros.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case Apply<span class="delimiter">(</span><a title="Macros.this.global.Ident" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.list">list</a> @ Ident<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="List[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.args">args</a><span class="delimiter">)</span> if <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.list" title="Macros.this.global.Ident">list</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ListModule" title="=&gt; Macros.this.global.ModuleSymbol">ListModule</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.args" title="List[Macros.this.global.Tree]">args</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.Tree =&gt; Any)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Tree],Any,Any])Any">map</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom" title="(tree: Macros.this.global.Tree)Any">unpickleAtom</a>
        case Literal<span class="delimiter">(</span>Constant<span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.s">s</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.s" title="String">s</a>
        case Literal<span class="delimiter">(</span>Constant<span class="delimiter">(</span><a title="Double" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.d">d</a>: <a href="../../../Double.scala.html#scala;Double" title="Double">Double</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.d" title="Double">d</a>
        case Literal<span class="delimiter">(</span>Constant<span class="delimiter">(</span><a title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.b">b</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.b" title="Boolean">b</a>
        case Literal<span class="delimiter">(</span>Constant<span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.i">i</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker.Fingerprint.apply" title="(value: Int)scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom.i" title="Int">i</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    def <a title="(macroImplRef: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle">pickle</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.macroImplRef">macroImplRef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      val <a title="Macros.this.global.definitions.RunDefinitions" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.runDefinitions">runDefinitions</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Macros.this.global.Run">currentRun</a>.<a href="../Global.scala.html#scala.tools.nsc;Global;Run.runDefinitions" title="=&gt; Macros.this.global.definitions.RunDefinitions">runDefinitions</a>
      import <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.runDefinitions" title="Macros.this.global.definitions.RunDefinitions">runDefinitions</a>._
      val <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.MacroImplReference.unapply" title="(tree: Macros.this.global.treeInfo.global.Tree)Option[(Boolean, Boolean, Macros.this.global.treeInfo.global.Symbol, Macros.this.global.treeInfo.global.Symbol, List[Macros.this.global.treeInfo.global.Tree])]">MacroImplReference</a><a href="../../../Tuple5.scala.html#scala;Tuple5" title="(Boolean, Boolean, Macros.this.global.treeInfo.global.Symbol, Macros.this.global.treeInfo.global.Symbol, List[Macros.this.global.treeInfo.global.Tree])" class="delimiter">(</a><a href="../../../Tuple5.scala.html#scala;Tuple5._1" title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.isBundle">isBundle</a>, <a href="../../../Tuple5.scala.html#scala;Tuple5._2" title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.isBlackbox">isBlackbox</a>, <a href="../../../Tuple5.scala.html#scala;Tuple5._3" title="Macros.this.global.treeInfo.global.Symbol" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.owner">owner</a>, <a href="../../../Tuple5.scala.html#scala;Tuple5._4" title="Macros.this.global.treeInfo.global.Symbol" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.macroImpl">macroImpl</a>, <a href="../../../Tuple5.scala.html#scala;Tuple5._5" title="List[Macros.this.global.treeInfo.global.Tree]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.targs">targs</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a>

      <span class="comment">// todo. refactor when fixing SI-5498</span>
      def <a title="=&gt; String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className">className</a>: <span title="String">String</span> = <span class="delimiter">{</span>
        def <a title="(sym: Macros.this.global.Symbol)String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop">loop</a><span class="delimiter">(</span><span title="Macros.this.global.Symbol">sym</span>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = <span title="Macros.this.global.Symbol">sym</span> match <span class="delimiter">{</span>
          case <span title="Macros.this.global.Symbol">sym</span> if <span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTopLevel" title="=&gt; Boolean">isTopLevel</a> =&gt;
            val <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop.suffix">suffix</a> = if <span class="delimiter">(</span><span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isModuleClass" title="=&gt; Boolean">isModuleClass</a><span class="delimiter">)</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span> else <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
            <span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.fullName(3bf7c90be7)" title="=&gt; String">fullName</a> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop.suffix" title="String">suffix</a>
          case <span title="Macros.this.global.Symbol">sym</span> =&gt;
            val <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop.separator">separator</a> = if <span class="delimiter">(</span><span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isModuleClass" title="=&gt; Boolean">isModuleClass</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> else <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
            <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop" title="(sym: Macros.this.global.Symbol)String">loop</a><span class="delimiter">(</span><span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop.separator" title="String">separator</a> <span title="(x$1: Any)String">+</span> <span title="Macros.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.javaSimpleName" title="=&gt; Macros.this.global.Name">javaSimpleName</a>.<span title="()String">toString</span>
        <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className.loop" title="(sym: Macros.this.global.Symbol)String">loop</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.owner" title="Macros.this.global.treeInfo.global.Symbol">owner</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="=&gt; List[List[scala.tools.nsc.typechecker.Fingerprint]]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature">signature</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[List[scala.tools.nsc.typechecker.Fingerprint]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        def <a title="(tpe: Macros.this.global.Type)scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint">fingerprint</a><span class="delimiter">(</span><a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint.tpe" title="Macros.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.dealiasWiden" title="=&gt; Macros.this.global.Type">dealiasWiden</a> match <span class="delimiter">{</span>
          case TypeRef<span class="delimiter">(</span>_, <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.RepeatedParamClass" title="=&gt; Macros.this.global.ClassSymbol">RepeatedParamClass</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint.underlying">underlying</a> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint" title="(tpe: Macros.this.global.Type)scala.tools.nsc.typechecker.Fingerprint">fingerprint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint.underlying" title="Macros.this.global.Type">underlying</a><span class="delimiter">)</span>
          case <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.ExprClassOf.unapply" title="(tp: Macros.this.global.Type)Option[Macros.this.global.Type]">ExprClassOf</a><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedTyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedTyped</a>
          case <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.TreeType.unapply" title="(tpe: Macros.this.global.Type)Boolean">TreeType</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedUntyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedUntyped</a>
          case _ =&gt; <a href="#scala.tools.nsc.typechecker.Fingerprint.Other" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">Other</a>
        <span class="delimiter">}</span>

        val <a title="List[List[Macros.this.global.Symbol]]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.transformed">transformed</a> = <a href="../../../reflect/macros/util/Helpers.scala.html#scala.reflect.macros.util;Helpers.transformTypeTagEvidenceParams" title="(macroImplRef: Macros.this.global.Tree, transform: (Macros.this.global.Symbol, Macros.this.global.Symbol) =&gt; Macros.this.global.Symbol)List[List[Macros.this.global.Symbol]]">transformTypeTagEvidenceParams</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a>, <span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.transformed.$anonfun.param">param</a>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.transformed.$anonfun.tparam">tparam</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.transformed.$anonfun.tparam" title="Macros.this.global.Symbol">tparam</a><span class="delimiter">)</span>
        <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.mmap" title="(xss: List[List[Macros.this.global.Symbol]])(f: Macros.this.global.Symbol =&gt; scala.tools.nsc.typechecker.Fingerprint)List[List[scala.tools.nsc.typechecker.Fingerprint]]">mmap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.transformed" title="List[List[Macros.this.global.Symbol]]">transformed</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.$anonfun.p">p</a> =&gt; if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.$anonfun.p" title="Macros.this.global.Symbol">p</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isTerm" title="=&gt; Boolean">isTerm</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.fingerprint" title="(tpe: Macros.this.global.Type)scala.tools.nsc.typechecker.Fingerprint">fingerprint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.$anonfun.p" title="Macros.this.global.Symbol">p</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Macros.this.global.Type">info</a><span class="delimiter">)</span> else <a href="#scala.tools.nsc.typechecker.Fingerprint.Tagged" title="(tparamPos: Int)scala.tools.nsc.typechecker.Fingerprint">Tagged</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature.$anonfun.p" title="Macros.this.global.Symbol">p</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.paramPos" title="=&gt; Int">paramPos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      val <a title="List[(String, Any)]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.payload">payload</a> = <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="[A](xs: A*)List[A]">List</a><span title="(xs: (String, Any)*)List[(String, Any)]" class="delimiter">[</span><a href="../../../Tuple2.scala.html#scala;Tuple2" title="(String, Any)" class="delimiter">(</a>String, Any<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span>
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;macroEngine&quot;</a> <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: String)(String, String)">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.macroEngine" title="=&gt; String">macroEngine</a>,
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;isBundle&quot;</a>    <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Boolean)(String, Boolean)">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.isBundle" title="Boolean">isBundle</a>,
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;isBlackbox&quot;</a>  <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: Boolean)(String, Boolean)">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.isBlackbox" title="Boolean">isBlackbox</a>,
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;className&quot;</a>   <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: String)(String, String)">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.className" title="=&gt; String">className</a>,
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;methodName&quot;</a>  <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: String)(String, String)">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.macroImpl" title="Macros.this.global.treeInfo.global.Symbol">macroImpl</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; macroImpl.NameType">name</a>.<span title="()String">toString</span>,
        <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: String)ArrowAssoc[String]" class="string">&quot;signature&quot;</a>   <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: List[List[scala.tools.nsc.typechecker.Fingerprint]])(String, List[List[scala.tools.nsc.typechecker.Fingerprint]])">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.signature" title="=&gt; List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a>
      <span class="delimiter">)</span>

      <span class="comment">// the shape of the nucleus is chosen arbitrarily. it doesn't carry any payload.</span>
      <span class="comment">// it's only necessary as a stub `fun` for an Apply node that carries metadata in its `args`</span>
      <span class="comment">// so don't try to find a program element named &quot;macro&quot; that corresponds to the nucleus</span>
      <span class="comment">// I just named it &quot;macro&quot;, because it's macro-related, but I could as well name it &quot;foobar&quot;</span>
      val <a title="Macros.this.global.Ident" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.nucleus">nucleus</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: Macros.this.global.Name)Macros.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)Macros.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;macro&quot;)" class="string">&quot;macro&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      val <a title="Macros.this.global.Apply" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped">wrapped</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Macros.this.global.Tree, args: List[Macros.this.global.Tree])Macros.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.nucleus" title="Macros.this.global.Ident">nucleus</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.payload" title="List[(String, Any)]">payload</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((String, Any)) =&gt; Macros.this.global.Assign)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, Any)],Macros.this.global.Assign,List[Macros.this.global.Assign]])List[Macros.this.global.Assign]">map</a> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped.$anonfun.x0$1" title="Macros.this.global.Assign" class="delimiter">{</a> case <span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped.$anonfun.k">k</a>, <a title="Any" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Assign" title="(lhs: Macros.this.global.Tree, rhs: Macros.this.global.Tree)Macros.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom" title="(obj: Any)Macros.this.global.Tree">pickleAtom</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped.$anonfun.k" title="String">k</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickleAtom" title="(obj: Any)Macros.this.global.Tree">pickleAtom</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped.$anonfun.v" title="Any">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
      val <a title="Macros.this.global.gen.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.pickle">pickle</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="Macros.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkTypeApply" title="(fun: Macros.this.global.gen.global.Tree, targs: List[Macros.this.global.gen.global.Tree])Macros.this.global.gen.global.Tree">mkTypeApply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.wrapped" title="Macros.this.global.Apply">wrapped</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.targs" title="List[Macros.this.global.treeInfo.global.Tree]">targs</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.treeInfo.global.Tree =&gt; Macros.this.global.treeInfo.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.treeInfo.global.Tree],Macros.this.global.treeInfo.global.Tree,List[Macros.this.global.gen.global.Tree]])List[Macros.this.global.gen.global.Tree]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.pickle.$anonfun.x$2" title="Macros.this.global.treeInfo.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.duplicate" title="=&gt; x$2.type">duplicate</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// assign NoType to all freshly created AST nodes</span>
      <span class="comment">// otherwise pickler will choke on tree.tpe being null</span>
      <span class="comment">// there's another gotcha</span>
      <span class="comment">// if you don't assign a ConstantType to a constant</span>
      <span class="comment">// then pickling will crash</span>
      new <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="&lt;$anon: Macros.this.global.Transformer&gt; extends Macros.this.global.Transformer" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon">Transformer</a> <span class="delimiter">{</span>
        override def <a title="(tree: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform">transform</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a> match <span class="delimiter">{</span>
            case Literal<span class="delimiter">(</span><a title="Macros.this.global.Constant" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.const">const</a> @ Constant<span class="delimiter">(</span><a title="Any" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.x">x</a><span class="delimiter">)</span><span class="delimiter">)</span> if <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a> <span title="(x$1: Any)Boolean">==</span> null =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Macros.this.global.Type)tree.type">setType</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.ConstantType.apply(682e31eef0)" title="(value: Macros.this.global.Constant)Macros.this.global.UniqueConstantType">ConstantType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.const" title="Macros.this.global.Constant">const</a><span class="delimiter">)</span>
            case _ if <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a> <span title="(x$1: Any)Boolean">==</span> null =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Macros.this.global.Type)tree.type">setType</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="Macros.this.global.NoType.type">NoType</a>
            case _ =&gt; ;
          <span class="delimiter">}</span>
          super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform.tree" title="Macros.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>.<a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle;$anon.transform" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle.pickle" title="Macros.this.global.gen.global.Tree">pickle</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(pickle: Macros.this.global.Tree)Macros.this.MacroImplBinding" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle">unpickle</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickle">pickle</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding" title="Macros.this.MacroImplBinding">MacroImplBinding</a> = <span class="delimiter">{</span>
      val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Macros.this.global.Tree, List[Macros.this.global.Tree])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.wrapped">wrapped</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="List[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.targs">targs</a><span class="delimiter">)</span> =
        <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickle" title="Macros.this.global.Tree">pickle</a> match <span class="delimiter">{</span>
          case TypeApply<span class="delimiter">(</span><span title="Macros.this.global.Tree">wrapped</span>, <span title="List[Macros.this.global.Tree]">targs</span><span class="delimiter">)</span> =&gt; <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Macros.this.global.Tree, _2: List[Macros.this.global.Tree])(Macros.this.global.Tree, List[Macros.this.global.Tree])" class="delimiter">(</a><span title="Macros.this.global.Tree">wrapped</span>, <span title="List[Macros.this.global.Tree]">targs</span><span class="delimiter">)</span>
          case <span title="Macros.this.global.Tree">wrapped</span> =&gt; <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Macros.this.global.Tree, _2: scala.collection.immutable.Nil.type)(Macros.this.global.Tree, scala.collection.immutable.Nil.type)" class="delimiter">(</a><span title="Macros.this.global.Tree">wrapped</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      val Apply<a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickledPayload.pickledPayload" title="List[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickledPayload" class="delimiter">(</a>_, <a title="List[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickledPayload.pickledPayload">pickledPayload</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.wrapped" title="Macros.this.global.Tree">wrapped</a>
      val <a title="scala.collection.immutable.Map[Any,Any]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload">payload</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.pickledPayload" title="List[Macros.this.global.Tree]">pickledPayload</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.Tree =&gt; (Any, Any))(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Tree],(Any, Any),List[(Any, Any)]])List[(Any, Any)]">map</a><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload.$anonfun.x0$2" title="(Any, Any)" class="delimiter">{</a> case Assign<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload.$anonfun.k">k</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload.$anonfun.v">v</a><span class="delimiter">)</span> =&gt; <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Any, _2: Any)(Any, Any)" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom" title="(tree: Macros.this.global.Tree)Any">unpickleAtom</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload.$anonfun.k" title="Macros.this.global.Tree">k</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickleAtom" title="(tree: Macros.this.global.Tree)Any">unpickleAtom</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload.$anonfun.v" title="Macros.this.global.Tree">v</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toMap" title="(implicit ev: &lt;:&lt;[(Any, Any),(Any, Any)])scala.collection.immutable.Map[Any,Any]">toMap</a>

      <span class="comment">// TODO: refactor error handling: fail always throws a TypeError,</span>
      <span class="comment">// and uses global state (analyzer.lastTreeToTyper) to determine the position for the error</span>
      def <a title="(msg: String)Nothing" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.fail">fail</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.fail.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors.MacroCantExpandIncompatibleMacrosError" title="(internalMessage: String)Nothing">MacroCantExpandIncompatibleMacrosError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.fail.msg" title="String">msg</a><span class="delimiter">)</span>
      def <a title="[T](field: String, clazz: Class[T])T" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle">unpickle</a><span class="delimiter">[</span><a title="" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.field">field</a>: <span title="String">String</span>, <a title="Class[T]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.clazz">clazz</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle;T" title="T">T</a> = <span class="delimiter">{</span>
        def <a title="(msg: String)Nothing" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField">failField</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.fail" title="(msg: String)Nothing">fail</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.field" title="String">field</a><span title="String(&quot; &quot;)"> $</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField.msg" title="String">msg</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload" title="scala.collection.immutable.Map[Any,Any]">payload</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: Any)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.field" title="String">field</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField" title="(msg: String)Nothing">failField</a><span class="delimiter">(</span><span title="String(&quot;is supposed to be there&quot;)" class="string">&quot;is supposed to be there&quot;</span><span class="delimiter">)</span>
        val <a title="Any" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.raw">raw</a>: <span title="Any">Any</span> = <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Any)Any">payload</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.field" title="String">field</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.raw" title="Any">raw</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField" title="(msg: String)Nothing">failField</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;is not supposed to be null&quot;)" class="string">is not supposed to be null&quot;</span><span class="delimiter">)</span>
        val <a title="Class[_]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.expected">expected</a> = <a href="../../../runtime/ScalaRunTime.scala.html#scala.runtime.ScalaRunTime" title="scala.runtime.ScalaRunTime.type">ScalaRunTime</a>.<a href="../../../runtime/ScalaRunTime.scala.html#scala.runtime.ScalaRunTime.box" title="(clazz: Class[T])Class[_]">box</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.clazz" title="Class[T]">clazz</a><span class="delimiter">)</span>
        val <a title="Class[_]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.actual">actual</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.raw" title="Any">raw</a>.<span title="()Class[_]">getClass</span>
        if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.expected" title="Class[_]">expected</a>.<span title="(x$1: Class[_])Boolean">isAssignableFrom</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.actual" title="Class[_]">actual</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.failField" title="(msg: String)Nothing">failField</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;has wrong type: expected &quot;)">has wrong type: expected $</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.expected" title="Class[_]">expected</a><span title="String(&quot;, actual &quot;)">, actual $</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.actual" title="Class[_]">actual</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle.raw" title="Any">raw</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle;T" title="T">T</a><span class="delimiter">]</span>
      <span class="delimiter">}</span>

      if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.payload" title="scala.collection.immutable.Map[Any,Any]">payload</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: Any)Boolean">contains</a><span class="delimiter">(</span><span title="String(&quot;macroEngine&quot;)" class="string">&quot;macroEngine&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors.MacroCantExpand210xMacrosError" title="(internalMessage: String)Nothing">MacroCantExpand210xMacrosError</a><span class="delimiter">(</span><span title="String(&quot;macroEngine field not found&quot;)" class="string">&quot;macroEngine field not found&quot;</span><span class="delimiter">)</span>
      val <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.macroEngine">macroEngine</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[String])String">unpickle</a><span class="delimiter">(</span><span title="String(&quot;macroEngine&quot;)" class="string">&quot;macroEngine&quot;</span>, classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a>.<a href="#scala.tools.nsc.typechecker;Macros.macroEngine" title="=&gt; String">macroEngine</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.macroEngine" title="String">macroEngine</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors.MacroCantExpandIncompatibleMacrosError" title="(internalMessage: String)Nothing">MacroCantExpandIncompatibleMacrosError</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;expected = &quot;)">expected = $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a>.<a href="#scala.tools.nsc.typechecker;Macros.macroEngine" title="=&gt; String">macroEngine</a><span class="delimiter">}</span><span title="String(&quot;, actual = &quot;)">, actual = $</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.macroEngine" title="String">macroEngine</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

      val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.isBundle">isBundle</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[Boolean])Boolean">unpickle</a><span class="delimiter">(</span><span title="String(&quot;isBundle&quot;)" class="string">&quot;isBundle&quot;</span>, classOf<span title="Class[Boolean](classOf[scala.Boolean])" class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>
      val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.isBlackbox">isBlackbox</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[Boolean])Boolean">unpickle</a><span class="delimiter">(</span><span title="String(&quot;isBlackbox&quot;)" class="string">&quot;isBlackbox&quot;</span>, classOf<span title="Class[Boolean](classOf[scala.Boolean])" class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>
      val <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.className">className</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[String])String">unpickle</a><span class="delimiter">(</span><span title="String(&quot;className&quot;)" class="string">&quot;className&quot;</span>, classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>
      val <a title="String" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.methodName">methodName</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[String])String">unpickle</a><span class="delimiter">(</span><span title="String(&quot;methodName&quot;)" class="string">&quot;methodName&quot;</span>, classOf<span title="Class[String](classOf[java.lang.String])" class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>
      val <a title="List[List[scala.tools.nsc.typechecker.Fingerprint]]" id="scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.signature">signature</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.unpickle" title="(field: String, clazz: Class[List[List[scala.tools.nsc.typechecker.Fingerprint]]])List[List[scala.tools.nsc.typechecker.Fingerprint]]">unpickle</a><span class="delimiter">(</span><span title="String(&quot;signature&quot;)" class="string">&quot;signature&quot;</span>, classOf<span title="Class[List[List[scala.tools.nsc.typechecker.Fingerprint]]](classOf[scala.collection.immutable.List])" class="delimiter">[</span>List<span class="delimiter">[</span>List<span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding" title="(isBundle: Boolean, isBlackbox: Boolean, className: String, methName: String, signature: List[List[scala.tools.nsc.typechecker.Fingerprint]], targs: List[Macros.this.global.Tree])Macros.this.MacroImplBinding">MacroImplBinding</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.isBundle" title="Boolean">isBundle</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.isBlackbox" title="Boolean">isBlackbox</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.className" title="String">className</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.methodName" title="String">methodName</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.signature" title="List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a>, <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle.targs" title="List[Macros.this.global.Tree]">targs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(macroDef: Macros.this.global.Symbol, macroImplRef: Macros.this.global.Tree)Unit" id="scala.tools.nsc.typechecker;Macros.bindMacroImpl">bindMacroImpl</a><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.bindMacroImpl.macroDef">macroDef</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.bindMacroImpl.macroImplRef">macroImplRef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.bindMacroImpl.pickle">pickle</a> = <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.readResolve" title="Macros.this.MacroImplBinding.type">MacroImplBinding</a>.<a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.pickle" title="(macroImplRef: Macros.this.global.Tree)Macros.this.global.Tree">pickle</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.bindMacroImpl.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.typechecker;Macros.bindMacroImpl.macroDef" title="Macros.this.global.Symbol">macroDef</a> <a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.withAnnotation" title="(annot: Macros.this.global.AnnotationInfo)Macros.this.global.Symbol">withAnnotation</a> <a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos.AnnotationInfo.apply" title="(atp: Macros.this.global.Type, args: List[Macros.this.global.Tree], assocs: List[(Macros.this.global.Name, Macros.this.global.ClassfileAnnotArg)])Macros.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.MacroImplAnnotation" title="=&gt; Macros.this.global.ClassSymbol">MacroImplAnnotation</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Macros.this.global.Type">tpe</a>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: Macros.this.global.Tree*)List[Macros.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.bindMacroImpl.pickle" title="Macros.this.global.Tree">pickle</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(macroDef: Macros.this.global.Symbol)Option[Macros.this.MacroImplBinding]" id="scala.tools.nsc.typechecker;Macros.loadMacroImplBinding">loadMacroImplBinding</a><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.loadMacroImplBinding.macroDef">macroDef</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#scala;Option" title="Option[Macros.this.MacroImplBinding]">Option</a><span class="delimiter">[</span>MacroImplBinding<span class="delimiter">]</span> =
    <a href="#scala.tools.nsc.typechecker;Macros.loadMacroImplBinding.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.getAnnotation" title="(cls: Macros.this.global.Symbol)Option[Macros.this.global.AnnotationInfo]">getAnnotation</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.MacroImplAnnotation" title="=&gt; Macros.this.global.ClassSymbol">MacroImplAnnotation</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Option.collect" title="(pf: PartialFunction[Macros.this.global.AnnotationInfo,Macros.this.MacroImplBinding])Option[Macros.this.MacroImplBinding]">collect</a> <a title="&lt;$anon: Macros.this.global.AnnotationInfo =&gt; Macros.this.MacroImplBinding&gt; extends scala.runtime.AbstractPartialFunction[Macros.this.global.AnnotationInfo,Macros.this.MacroImplBinding] with Serializable" id="scala.tools.nsc.typechecker;Macros.loadMacroImplBinding;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a>
      case <a href="../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos.AnnotationInfo.unapply" title="(info: Macros.this.global.AnnotationInfo)Option[(Macros.this.global.Type, List[Macros.this.global.Tree], List[(Macros.this.global.Name, Macros.this.global.ClassfileAnnotArg)])]">AnnotationInfo</a><span class="delimiter">(</span>_, <a href="../../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[Macros.this.global.Tree])Some[List[Macros.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.loadMacroImplBinding;$anonfun.isDefinedAt.pickle">pickle</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.readResolve" title="Macros.this.MacroImplBinding.type">MacroImplBinding</a>.<a href="#scala.tools.nsc.typechecker;Macros.MacroImplBinding.unpickle" title="(pickle: Macros.this.global.Tree)Macros.this.MacroImplBinding">unpickle</a><span title="Boolean(true)" class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.loadMacroImplBinding;$anonfun.isDefinedAt.pickle" title="Macros.this.global.Tree">pickle</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  def <a title="(expandee: Macros.this.global.Tree)Boolean" id="scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463)">isBlackbox</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463).expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(3130669c4e)" title="(macroDef: Macros.this.global.Symbol)Boolean">isBlackbox</a><span class="delimiter">(</span><a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.dissectApplied" title="(tree: Macros.this.global.treeInfo.global.Tree)Macros.this.global.treeInfo.Applied">dissectApplied</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463).expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo;Applied.core" title="=&gt; Macros.this.global.treeInfo.global.Tree">core</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.treeInfo.global.Symbol">symbol</a><span class="delimiter">)</span>
  def <a title="(macroDef: Macros.this.global.Symbol)Boolean" id="scala.tools.nsc.typechecker;Macros.isBlackbox(3130669c4e)">isBlackbox</a><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.isBlackbox(3130669c4e).macroDef">macroDef</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <a href="AnalyzerPlugins.scala.html#scala.tools.nsc.typechecker;AnalyzerPlugins.pluginsIsBlackbox" title="(macroDef: Macros.this.global.Symbol)Boolean">pluginsIsBlackbox</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(3130669c4e).macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span>

  <span class="comment">/** Default implementation of `isBlackbox`.
   *  Can be overridden by analyzer plugins (see AnalyzerPlugins.pluginsIsBlackbox for more details)
   */</span>
  def <a title="(macroDef: Macros.this.global.Symbol)Boolean" id="scala.tools.nsc.typechecker;Macros.standardIsBlackbox">standardIsBlackbox</a><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.standardIsBlackbox.macroDef">macroDef</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    val <a title="Option[Boolean]" id="scala.tools.nsc.typechecker;Macros.standardIsBlackbox.fastTrackBoxity">fastTrackBoxity</a> = <a href="#scala.tools.nsc.typechecker;Macros.fastTrack" title="=&gt; scala.tools.reflect.FastTrack[Macros.this.type]">fastTrack</a>.<a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack.get" title="(symbol: Macros.this.fastTrack.macros.global.Symbol)Option[Macros.this.fastTrack.FastTrackEntry]">get</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.map" title="(f: Macros.this.fastTrack.FastTrackEntry =&gt; Boolean)Option[Boolean]">map</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.fastTrackBoxity.$anonfun.x$4" title="Macros.this.fastTrack.FastTrackEntry">_</a>.<a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack;FastTrackEntry.isBlackbox" title="=&gt; Boolean">isBlackbox</a><span class="delimiter">)</span>
    val <a title="Option[Boolean]" id="scala.tools.nsc.typechecker;Macros.standardIsBlackbox.bindingBoxity">bindingBoxity</a> = <a href="#scala.tools.nsc.typechecker;Macros.loadMacroImplBinding" title="(macroDef: Macros.this.global.Symbol)Option[Macros.this.MacroImplBinding]">loadMacroImplBinding</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.map" title="(f: Macros.this.MacroImplBinding =&gt; Boolean)Option[Boolean]">map</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.bindingBoxity.$anonfun.x$5" title="Macros.this.MacroImplBinding">_</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.isBlackbox" title="=&gt; Boolean">isBlackbox</a><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.fastTrackBoxity" title="Option[Boolean]">fastTrackBoxity</a> <a href="../../../Option.scala.html#scala;Option.orElse" title="(alternative: =&gt; Option[Boolean])Option[Boolean]">orElse</a> <a href="#scala.tools.nsc.typechecker;Macros.standardIsBlackbox.bindingBoxity" title="Option[Boolean]">bindingBoxity</a> <a href="../../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; Boolean)Boolean">getOrElse</a> false
  <span class="delimiter">}</span>

  def <a title="(macroDdef: Macros.this.global.DefDef, macroImplRef: Macros.this.global.Tree)Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef">computeMacroDefTypeFromMacroImplRef</a><span class="delimiter">(</span><a title="Macros.this.global.DefDef" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroDdef">macroDdef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Macros.this.global.DefDef">DefDef</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImplRef">macroImplRef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a> match <span class="delimiter">{</span>
      case <a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.MacroImplReference.unapply" title="(tree: Macros.this.global.treeInfo.global.Tree)Option[(Boolean, Boolean, Macros.this.global.treeInfo.global.Symbol, Macros.this.global.treeInfo.global.Symbol, List[Macros.this.global.treeInfo.global.Tree])]">MacroImplReference</a><span class="delimiter">(</span>_, _, _, <a title="Macros.this.global.treeInfo.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImpl">macroImpl</a>, <a title="List[Macros.this.global.treeInfo.global.Tree]" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.targs">targs</a><span class="delimiter">)</span> =&gt;
        <span class="comment">// Step I. Transform c.Expr[T] to T and everything else to Any</span>
        var <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.runtimeType">runtimeType</a> = <a href="../../../reflect/macros/util/Helpers.scala.html#scala.reflect.macros.util;Helpers.decreaseMetalevel" title="(tp: Macros.this.global.Type)Macros.this.global.Type">decreaseMetalevel</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImpl" title="Macros.this.global.treeInfo.global.Symbol">macroImpl</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Macros.this.global.treeInfo.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.finalResultType" title="=&gt; Macros.this.global.treeInfo.global.Type">finalResultType</a><span class="delimiter">)</span>

        <span class="comment">// Step II. Transform type parameters of a macro implementation into type arguments in a macro definition's body</span>
        <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.runtimeType" title="Macros.this.global.Type">runtimeType</a> = <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.runtimeType" title="Macros.this.global.Type">runtimeType</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeApiImpl.substituteTypes" title="(from: List[Macros.this.global.Symbol], to: List[Macros.this.global.Type])Macros.this.global.Type">substituteTypes</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImpl" title="Macros.this.global.treeInfo.global.Symbol">macroImpl</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeParams" title="=&gt; List[Macros.this.global.treeInfo.global.Symbol]">typeParams</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.targs" title="List[Macros.this.global.treeInfo.global.Tree]">targs</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.treeInfo.global.Tree =&gt; Macros.this.global.treeInfo.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.treeInfo.global.Tree],Macros.this.global.treeInfo.global.Type,List[Macros.this.global.Type]])List[Macros.this.global.Type]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.$anonfun.x$6" title="Macros.this.global.treeInfo.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.treeInfo.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="comment">// Step III. Transform c.prefix.value.XXX to this.XXX and implParam.value.YYY to defParam.YYY</span>
        def <a title="(tpe: Macros.this.global.Type)Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma">unsigma</a><span class="delimiter">(</span><a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a> =
          <a href="../../../reflect/macros/util/Helpers.scala.html#scala.reflect.macros.util;Helpers.transformTypeTagEvidenceParams" title="(macroImplRef: Macros.this.global.Tree, transform: (Macros.this.global.Symbol, Macros.this.global.Symbol) =&gt; Macros.this.global.Symbol)List[List[Macros.this.global.Symbol]]">transformTypeTagEvidenceParams</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a>, <span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.$anonfun.param">param</a>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.$anonfun.tparam">tparam</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Macros.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case <span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implCtxParam">implCtxParam</a> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> :: <a title="List[List[Macros.this.global.Symbol]]" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implParamss">implParamss</a> =&gt;
              val <a title="scala.collection.immutable.Map[Macros.this.global.Symbol,Macros.this.global.ValDef]" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef">implToDef</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.flatMap2" title="(xs1: List[List[Macros.this.global.Symbol]], xs2: List[List[Macros.this.global.ValDef]])(f: (List[Macros.this.global.Symbol], List[Macros.this.global.ValDef]) =&gt; List[(Macros.this.global.Symbol, Macros.this.global.ValDef)])List[(Macros.this.global.Symbol, Macros.this.global.ValDef)]">flatMap2</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implParamss" title="List[List[Macros.this.global.Symbol]]">implParamss</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.vparamss" title="=&gt; List[List[Macros.this.global.ValDef]]">vparamss</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.map2" title="(xs1: List[Macros.this.global.Symbol], xs2: List[Macros.this.global.ValDef])(f: (Macros.this.global.Symbol, Macros.this.global.ValDef) =&gt; (Macros.this.global.Symbol, Macros.this.global.ValDef))List[(Macros.this.global.Symbol, Macros.this.global.ValDef)]">map2</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef.$anonfun.x$7" title="List[Macros.this.global.Symbol]">_</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef.$anonfun.x$8" title="List[Macros.this.global.ValDef]">_</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Macros.this.global.Symbol, _2: Macros.this.global.ValDef)(Macros.this.global.Symbol, Macros.this.global.ValDef)" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef.$anonfun.$anonfun.x$9" title="Macros.this.global.Symbol">_</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef.$anonfun.$anonfun.x$10" title="Macros.this.global.ValDef">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toMap" title="(implicit ev: &lt;:&lt;[(Macros.this.global.Symbol, Macros.this.global.ValDef),(Macros.this.global.Symbol, Macros.this.global.ValDef)])scala.collection.immutable.Map[Macros.this.global.Symbol,Macros.this.global.ValDef]">toMap</a>
              object <a title="UnsigmaTypeMap.type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.UnsigmaTypeMap">UnsigmaTypeMap</a> extends <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap" title="Macros.this.global.TypeMap">TypeMap</a> <span class="delimiter">{</span>
                def <a title="(tp: Macros.this.global.Type)Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply">apply</a><span class="delimiter">(</span><a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.tp">tp</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a> = <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.tp" title="Macros.this.global.Type">tp</a> match <span class="delimiter">{</span>
                  case TypeRef<span class="delimiter">(</span><a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre">pre</a>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.sym">sym</a>, <a title="List[Macros.this.global.Type]" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.args">args</a><span class="delimiter">)</span> =&gt;
                    val <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1">pre1</a> = <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre" title="Macros.this.global.Type">pre</a> match <span class="delimiter">{</span>
                      case SingleType<span class="delimiter">(</span>SingleType<span class="delimiter">(</span>SingleType<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoPrefix" title="Macros.this.global.NoPrefix.type">NoPrefix</a>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.c">c</a><span class="delimiter">)</span>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.prefix">prefix</a><span class="delimiter">)</span>, <span title="Macros.this.global.Symbol">value</span><span class="delimiter">)</span> if <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.c" title="Macros.this.global.Symbol">c</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implCtxParam" title="Macros.this.global.Symbol">implCtxParam</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.prefix" title="Macros.this.global.Symbol">prefix</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.MacroContextPrefix" title="=&gt; Macros.this.global.Symbol">MacroContextPrefix</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span title="Macros.this.global.Symbol">value</span> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ExprValue" title="=&gt; Macros.this.global.Symbol">ExprValue</a> =&gt;
                        <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.ThisType.apply(a489b0ed7a)" title="(sym: Macros.this.global.Symbol)Macros.this.global.Type">ThisType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a><span class="delimiter">)</span>
                      case SingleType<span class="delimiter">(</span>SingleType<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoPrefix" title="Macros.this.global.NoPrefix.type">NoPrefix</a>, <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.implParam">implParam</a><span class="delimiter">)</span>, <span title="Macros.this.global.Symbol">value</span><span class="delimiter">)</span> if <span title="Macros.this.global.Symbol">value</span> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ExprValue" title="=&gt; Macros.this.global.Symbol">ExprValue</a> =&gt;
                        <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.implToDef" title="scala.collection.immutable.Map[Macros.this.global.Symbol,Macros.this.global.ValDef]">implToDef</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.get" title="(key: Macros.this.global.Symbol)Option[Macros.this.global.ValDef]">get</a> <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.implParam" title="Macros.this.global.Symbol">implParam</a> <a href="../../../Option.scala.html#scala;Option.map" title="(f: Macros.this.global.ValDef =&gt; Macros.this.global.Type)Option[Macros.this.global.Type]">map</a> <span class="delimiter">(</span><a title="Macros.this.global.ValDef" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.$anonfun.defParam">defParam</a> =&gt; <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.SingleType.apply(383b209a7d)" title="(pre: Macros.this.global.Type, sym: Macros.this.global.Symbol)Macros.this.global.Type">SingleType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoPrefix" title="Macros.this.global.NoPrefix.type">NoPrefix</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1.$anonfun.defParam" title="Macros.this.global.ValDef">defParam</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; Macros.this.global.Type)Macros.this.global.Type">getOrElse</a> <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre" title="Macros.this.global.Type">pre</a>
                      case _ =&gt;
                        <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre" title="Macros.this.global.Type">pre</a>
                    <span class="delimiter">}</span>
                    val args1 = <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.args" title="List[Macros.this.global.Type]">args</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Macros.this.global.Type]" id="scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.args1">map</a> <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Macros.this.global.Type)Macros.this.global.Type">mapOver</a>
                    <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.TypeRef.apply(2232bf1c73)" title="(pre: Macros.this.global.Type, sym: Macros.this.global.Symbol, args: List[Macros.this.global.Type])Macros.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.pre1" title="Macros.this.global.Type">pre1</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.sym" title="Macros.this.global.Symbol">sym</a>, <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.args1" title="List[Macros.this.global.Type]">args1</a><span class="delimiter">)</span>
                  case _ =&gt;
                    <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Macros.this.global.Type)Macros.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply.tp" title="Macros.this.global.Type">tp</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>

              <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma;UnsigmaTypeMap.apply" title="(tp: Macros.this.global.Type)Macros.this.global.Type">UnsigmaTypeMap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.tpe" title="Macros.this.global.Type">tpe</a><span class="delimiter">)</span>
            case _ =&gt;
              <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma.tpe" title="Macros.this.global.Type">tpe</a>
          <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.unsigma" title="(tpe: Macros.this.global.Type)Macros.this.global.Type">unsigma</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.computeMacroDefTypeFromMacroImplRef.runtimeType" title="Macros.this.global.Type">runtimeType</a><span class="delimiter">)</span>
      case _ =&gt;
        <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.ErrorType" title="Macros.this.global.ErrorType.type">ErrorType</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Verifies that the body of a macro def typechecks to a reference to a static public non-overloaded method or a top-level macro bundle,
   *  and that that method is signature-wise compatible with the given macro definition.
   *
   *  @return Macro impl reference for the given macro definition if everything is okay.
   *          EmptyTree if an error occurs.
   */</span>
  def <a title="(typer: Macros.this.Typer, macroDdef: Macros.this.global.DefDef)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.typedMacroBody">typedMacroBody</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.typedMacroBody.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.DefDef" id="scala.tools.nsc.typechecker;Macros.typedMacroBody.macroDdef">macroDdef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Macros.this.global.DefDef">DefDef</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <a href="AnalyzerPlugins.scala.html#scala.tools.nsc.typechecker;AnalyzerPlugins.pluginsTypedMacroBody" title="(typer: Macros.this.Typer, ddef: Macros.this.global.DefDef)Macros.this.global.Tree">pluginsTypedMacroBody</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.typedMacroBody.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.typedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a><span class="delimiter">)</span>

  <span class="comment">/** Default implementation of `typedMacroBody`.
   *  Can be overridden by analyzer plugins (see AnalyzerPlugins.pluginsTypedMacroBody for more details)
   */</span>
  def <a title="(typer: Macros.this.Typer, macroDdef: Macros.this.global.DefDef)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody">standardTypedMacroBody</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.DefDef" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef">macroDdef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Macros.this.global.DefDef">DefDef</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    val <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef">macroDef</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>
    <a href="../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/HasFlags.scala.html#scala.reflect.internal;HasFlags.isMacro" title="=&gt; Boolean">isMacro</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a><span class="delimiter">)</span>

    <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;typechecking macro def %s at %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.fastTrack" title="=&gt; scala.tools.reflect.FastTrack[Macros.this.type]">fastTrack</a> <a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack.contains" title="(symbol: Macros.this.fastTrack.macros.global.Symbol)Boolean">contains</a> <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><span title="String(&quot;typecheck terminated unexpectedly: macro is fast track&quot;)" class="string">&quot;typecheck terminated unexpectedly: macro is fast track&quot;</span><span class="delimiter">)</span>
      <a href="../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.tpt" title="=&gt; Macros.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a>, <span title="String(&quot;fast track macros must provide result type&quot;)" class="string">&quot;fast track macros must provide result type&quot;</span><span class="delimiter">)</span>
      <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Macros.this.global.EmptyTree.type">EmptyTree</a>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      def <a title="()Macros.this.global.EmptyTree.type" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.fail">fail</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setFlag" title="(mask: Long)macroDef.type">setFlag</a> <span title="Long(4294967296L)">IS_ERROR</span>; <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Macros.this.global.Type)macroDdef.type">setType</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.ErrorType" title="Macros.this.global.ErrorType.type">ErrorType</a>; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Macros.this.global.EmptyTree.type">EmptyTree</a> <span class="delimiter">}</span>
      def <a title="(macroImplRef: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.success">success</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.success.macroImplRef">macroImplRef</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#scala.tools.nsc.typechecker;Macros.bindMacroImpl" title="(macroDef: Macros.this.global.Symbol, macroImplRef: Macros.this.global.Tree)Unit">bindMacroImpl</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDef" title="Macros.this.global.Symbol">macroDef</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.success.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a><span class="delimiter">)</span>; <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.success.macroImplRef" title="Macros.this.global.Tree">macroImplRef</a> <span class="delimiter">}</span>

      if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.checkFeature$default$3" title="() =&gt; String @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.x$26">checkFeature</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="Macros.this.global.Position" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.x$23">pos</a>, <a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Macros.this.global.Run">currentRun</a>.<a href="../Global.scala.html#scala.tools.nsc;Global;Run.runDefinitions" title="=&gt; Macros.this.global.definitions.RunDefinitions">runDefinitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass;RunDefinitions.MacrosFeature" title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.x$24">MacrosFeature</a>, immediate = true<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><span title="String(&quot;typecheck terminated unexpectedly: language.experimental.macros feature is not enabled&quot;)" class="string">&quot;typecheck terminated unexpectedly: language.experimental.macros feature is not enabled&quot;</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.fail" title="()Macros.this.global.EmptyTree.type">fail</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        val <a title="macroDdef.type" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef1">macroDdef1</a>: macroDdef.type = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef" title="Macros.this.global.DefDef">macroDdef</a>
        val <a title="typer.type" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.typer1">typer1</a>: typer.type = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.typer" title="Macros.this.Typer">typer</a>
        val <a title="&lt;refinement of scala.reflect.macros.compiler.DefaultMacroCompiler&gt; extends scala.reflect.macros.compiler.DefaultMacroCompiler" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler">macroCompiler</a> = new <a title="&lt;$anon: scala.reflect.macros.compiler.DefaultMacroCompiler&gt; extends scala.reflect.macros.compiler.DefaultMacroCompiler" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler;$anon" class="delimiter">{</a>
          val <a title="Macros.this.global.type" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler;$anon.global">global</a>: self.global.type = <a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a>.<a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>
          val <a title="Macros.this.global.analyzer.Typer" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler;$anon.typer">typer</a>: self.global.analyzer.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.global.analyzer.Typer">Typer</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.typer1" title="typer.type">typer1</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Macros.this.global.analyzer.Typer" class="delimiter">[</span>self.global.analyzer.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.global.analyzer.Typer">Typer</a><span class="delimiter">]</span>
          val <a title="Macros.this.global.DefDef" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler;$anon.macroDdef">macroDdef</a>: self.global.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="Macros.this.global.DefDef">DefDef</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroDdef1" title="macroDdef.type">macroDdef1</a>
        <span class="delimiter">}</span> with <a href="../../../reflect/macros/compiler/DefaultMacroCompiler.scala.html#scala.reflect.macros.compiler;DefaultMacroCompiler" title="scala.reflect.macros.compiler.DefaultMacroCompiler">DefaultMacroCompiler</a>
        val <a title="macroCompiler.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroImplRef">macroImplRef</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroCompiler" title="&lt;refinement of scala.reflect.macros.compiler.DefaultMacroCompiler&gt; extends scala.reflect.macros.compiler.DefaultMacroCompiler">macroCompiler</a>.<a href="../../../reflect/macros/compiler/DefaultMacroCompiler.scala.html#scala.reflect.macros.compiler;DefaultMacroCompiler.resolveMacroImpl" title="=&gt; macroCompiler.global.Tree">resolveMacroImpl</a>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroImplRef" title="macroCompiler.global.Tree">macroImplRef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.fail" title="()Macros.this.global.EmptyTree.type">fail</a><span class="delimiter">(</span><span class="delimiter">)</span> else <a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.success" title="(macroImplRef: Macros.this.global.Tree)Macros.this.global.Tree">success</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardTypedMacroBody.macroImplRef" title="macroCompiler.global.Tree">macroImplRef</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="(typer: Macros.this.Typer, prefixTree: Macros.this.global.Tree, expandeeTree: Macros.this.global.Tree)Macros.this.MacroContext" id="scala.tools.nsc.typechecker;Macros.macroContext">macroContext</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroContext.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroContext.prefixTree">prefixTree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroContext.expandeeTree">expandeeTree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;<refinement>" title="Macros.this.MacroContext">MacroContext</a> = <span class="delimiter">{</span>
    new <a title="&lt;$anon: Macros.this.UnaffiliatedMacroContext&gt; extends Macros.this.UnaffiliatedMacroContext" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon" class="delimiter">{</a>
      val <a title="Macros.this.global.type" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon.universe">universe</a>: self.global.type = <a href="#scala.tools.nsc.typechecker;Macros" title="Macros.this.type">self</a>.<a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>
      val <a title="universe.analyzer.Typer" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon.callsiteTyper">callsiteTyper</a>: universe.analyzer.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="universe.analyzer.Typer">Typer</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroContext.typer" title="Macros.this.Typer">typer</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Macros.this.global.analyzer.Typer" class="delimiter">[</span>global.analyzer.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.global.analyzer.Typer">Typer</a><span class="delimiter">]</span>
      val expandee = <a href="#scala.tools.nsc.typechecker;Macros.macroContext;$anon.universe" title="Macros.this.global.type">universe</a>.<a href="../Global.scala.html#scala.tools.nsc;Global.analyzer" title="=&gt; scala.tools.nsc.typechecker.Analyzer{val global: universe.type}">analyzer</a>.<a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.macroExpanderAttachment" title="(tree: universe.analyzer.global.Tree)universe.analyzer.MacroExpanderAttachment">macroExpanderAttachment</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroContext.expandeeTree" title="Macros.this.global.Tree">expandeeTree</a><span class="delimiter">)</span>.<a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroExpanderAttachment.original" title="=&gt; universe.analyzer.global.Tree">original</a> <a title="universe.analyzer.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon.expandee">orElse</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.duplicateAndKeepPositions" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">duplicateAndKeepPositions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroContext.expandeeTree" title="Macros.this.global.Tree">expandeeTree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> with <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;UnaffiliatedMacroContext" title="Macros.this.UnaffiliatedMacroContext">UnaffiliatedMacroContext</a> <span class="delimiter">{</span>
      val <a title="this.Expr[Nothing]" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon.prefix">prefix</a> = <a href="../../../reflect/macros/contexts/Aliases.scala.html#scala.reflect.macros.contexts;Aliases.Expr(f8e6a524a5)" title="[T](tree: this.Tree)(implicit evidence$1: this.WeakTypeTag[T])this.Expr[T]">Expr</a><span title="(tree: this.Tree)(implicit evidence$1: this.WeakTypeTag[Nothing])this.Expr[Nothing]" class="delimiter">[</span><span title="Nothing">Nothing</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroContext.prefixTree" title="Macros.this.global.Tree">prefixTree</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/macros/contexts/Aliases.scala.html#scala.reflect.macros.contexts;Aliases.TypeTag(605311a812)" title="=&gt; this.universe.TypeTag.type">TypeTag</a>.<a href="../../../reflect/api/TypeTags.scala.html#scala.reflect.api;TypeTags.TypeTag.Nothing" title="=&gt; this.universe.TypeTag[Nothing]">Nothing</a><span class="delimiter">)</span>
      override def <a title="()String" id="scala.tools.nsc.typechecker;Macros.macroContext;$anon.toString">toString</a> = <a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;MacroContext(%s@%s +%d)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroContext;$anon.expandee" title="=&gt; universe.analyzer.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; universe.analyzer.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; universe.analyzer.global.Symbol#NameType">name</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroContext;$anon.expandee" title="=&gt; universe.analyzer.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; universe.analyzer.global.Position">pos</a>, <a href="../../../reflect/macros/contexts/Enclosures.scala.html#scala.reflect.macros.contexts;Enclosures.enclosingMacros" title="=&gt; List[scala.reflect.macros.contexts.Context]">enclosingMacros</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span> <span class="comment">/* exclude myself */</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Calculate the arguments to pass to a macro implementation when expanding the provided tree.
   */</span>
  case class <a title="class MacroArgs extends AnyRef with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.MacroArgs.readResolve">MacroArgs</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.MacroContext" id="scala.tools.nsc.typechecker;Macros;MacroArgs.c">c</a>: <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;<refinement>" title="Macros.this.MacroContext">MacroContext</a>, <a title="=&gt; List[Any]" id="scala.tools.nsc.typechecker;Macros;MacroArgs.others">others</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">)</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroArgs" id="scala.tools.nsc.typechecker;Macros.macroArgs">macroArgs</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroArgs.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroArgs.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros.MacroArgs.readResolve" title="Macros.this.MacroArgs">MacroArgs</a> = <a href="AnalyzerPlugins.scala.html#scala.tools.nsc.typechecker;AnalyzerPlugins.pluginsMacroArgs" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroArgs">pluginsMacroArgs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroArgs.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>

  <span class="comment">/** Default implementation of `macroArgs`.
   *  Can be overridden by analyzer plugins (see AnalyzerPlugins.pluginsMacroArgs for more details)
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroArgs" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs">standardMacroArgs</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros.MacroArgs.readResolve" title="Macros.this.MacroArgs">MacroArgs</a> = <span class="delimiter">{</span>
    val <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef">macroDef</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>
    val <a title="List[List[Macros.this.global.Symbol]]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss">paramss</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.paramss" title="=&gt; List[List[Macros.this.global.Symbol]]">paramss</a>
    val <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="Macros.this.global.treeInfo.type">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.Applied.unapply(a5ffa85a6b)" title="(tree: Macros.this.global.treeInfo.global.Tree)Option[(Macros.this.global.treeInfo.global.Tree, List[Macros.this.global.treeInfo.global.Tree], List[List[Macros.this.global.treeInfo.global.Tree]])]">Applied</a><a href="../../../Tuple3.scala.html#scala;Tuple3" title="(Macros.this.global.treeInfo.global.Tree, List[Macros.this.global.treeInfo.global.Tree], List[List[Macros.this.global.treeInfo.global.Tree]])" class="delimiter">(</a><a href="../../../Tuple3.scala.html#scala;Tuple3._1" title="Macros.this.global.treeInfo.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.core">core</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._2" title="List[Macros.this.global.treeInfo.global.Tree]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.targs">targs</a>, <a href="../../../Tuple3.scala.html#scala;Tuple3._3" title="List[List[Macros.this.global.treeInfo.global.Tree]]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss">argss</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a>
    val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix">prefix</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.core" title="Macros.this.global.treeInfo.global.Tree">core</a> match <span class="delimiter">{</span> case Select<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix.qual">qual</a>, _<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix.qual" title="Macros.this.global.Tree">qual</a>; case _ =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Macros.this.global.EmptyTree.type">EmptyTree</a> <span class="delimiter">}</span>
    val <a title="Macros.this.MacroContext" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.context">context</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.attachments" title="=&gt; scala.reflect.macros.Attachments{type Pos = Macros.this.global.Position}">attachments</a>.<a href="../../../reflect/macros/Attachments.scala.html#scala.reflect.macros;Attachments.get" title="[T](implicit evidence$2: scala.reflect.ClassTag[T])Option[T]">get</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(implicit evidence$2: scala.reflect.ClassTag[Macros.this.MacroRuntimeAttachment])Option[Macros.this.MacroRuntimeAttachment]" class="delimiter">[</a><a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment" title="Macros.this.MacroRuntimeAttachment">MacroRuntimeAttachment</a><span class="delimiter">]</span>.<a href="../../../Option.scala.html#scala;Option.flatMap" title="(f: Macros.this.MacroRuntimeAttachment =&gt; Option[Macros.this.MacroContext])Option[Macros.this.MacroContext]">flatMap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.context.$anonfun.x$12" title="Macros.this.MacroRuntimeAttachment">_</a>.<a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment.macroContext" title="=&gt; Option[Macros.this.MacroContext]">macroContext</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; Macros.this.MacroContext)Macros.this.MacroContext">getOrElse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroContext" title="(typer: Macros.this.Typer, prefixTree: Macros.this.global.Tree, expandeeTree: Macros.this.global.Tree)Macros.this.MacroContext">macroContext</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix" title="Macros.this.global.Tree">prefix</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../reflect/internal/util/StripMarginInterpolator.scala.html#scala.reflect.internal.util;StripMarginInterpolator.sm" title="(args: Any*)String">sm</a>&quot;&quot;&quot;<span title="String(&quot;\n      |context: &quot;)">
      |context: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.context" title="Macros.this.MacroContext">context</a><span title="String(&quot;\n      |prefix: &quot;)">
      |prefix: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix" title="Macros.this.global.Tree">prefix</a><span title="String(&quot;\n      |targs: &quot;)">
      |targs: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.targs" title="List[Macros.this.global.treeInfo.global.Tree]">targs</a><span title="String(&quot;\n      |argss: &quot;)">
      |argss: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a><span title="String(&quot;\n      |paramss: &quot;)">
      |paramss: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a><span title="String(&quot;\n    &quot;)" class="string">
    &quot;&quot;&quot;</span>.<span title="()String">trim</span><span class="delimiter">)</span>

    import <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.typer" title="Macros.this.Typer">typer</a>.<a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen" title="typer.TyperErrorGen.type">TyperErrorGen</a>._
    val isNullaryArgsEmptyParams = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a>.<a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="Boolean" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.isNullaryArgsEmptyParams">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a> <span title="(x$1: Any)Boolean">==</span> <a href="../package.scala.html#scala.tools.nsc.package.ListOfNil" title="=&gt; List[List[Nothing]]">ListOfNil</a>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooManyArgumentListsError(8d2923250c)" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooManyArgumentListsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.isNullaryArgsEmptyParams" title="Boolean">isNullaryArgsEmptyParams</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooFewArgumentListsError" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooFewArgumentListsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>

    val <a title="List[Any]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs">macroImplArgs</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Any]">List</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.fastTrack" title="=&gt; scala.tools.reflect.FastTrack[Macros.this.type]">fastTrack</a> <a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack.contains" title="(symbol: Macros.this.fastTrack.macros.global.Symbol)Boolean">contains</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// Take a dry run of the fast track implementation</span>
        if <span class="delimiter">(</span><a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack.apply" title="(symbol: Macros.this.fastTrack.macros.global.Symbol)Macros.this.fastTrack.FastTrackEntry">fastTrack</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span> <a href="../../reflect/FastTrack.scala.html#scala.tools.reflect;FastTrack;FastTrackEntry.validate" title="(tree: Macros.this.fastTrack.macros.global.Tree)Boolean">validate</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[Macros.this.global.treeInfo.global.Tree] =&gt; scala.collection.GenTraversableOnce[Any])List[Any]">flatten</a>
        else <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooFewArgumentListsError" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooFewArgumentListsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      else <span class="delimiter">{</span>
        def <a title="(binding: Macros.this.MacroImplBinding)List[Equals]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs">calculateMacroArgs</a><span class="delimiter">(</span><a title="Macros.this.MacroImplBinding" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding">binding</a>: <a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding" title="Macros.this.MacroImplBinding">MacroImplBinding</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          val <a title="List[List[scala.tools.nsc.typechecker.Fingerprint]]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.signature">signature</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.isBundle" title="=&gt; Boolean">isBundle</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.signature" title="=&gt; List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a> else <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.signature" title="=&gt; List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a>.<a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[List[scala.tools.nsc.typechecker.Fingerprint]]">tail</a>
          <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;binding: &quot;)">binding: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

          <span class="comment">// STEP I: prepare value arguments of the macro expansion</span>
          <span class="comment">// wrap argss in c.Expr if necessary (i.e. if corresponding macro impl param is of type c.Expr[T])</span>
          <span class="comment">// expand varargs (nb! varargs can apply to any parameter section, not necessarily to the last one)</span>
          val <a title="List[List[Equals]]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees">trees</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.map3" title="(xs1: List[List[Macros.this.global.treeInfo.global.Tree]], xs2: List[List[Macros.this.global.Symbol]], xs3: List[List[scala.tools.nsc.typechecker.Fingerprint]])(f: (List[Macros.this.global.treeInfo.global.Tree], List[Macros.this.global.Symbol], List[scala.tools.nsc.typechecker.Fingerprint]) =&gt; List[Equals])List[List[Equals]]">map3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.signature" title="List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="List[Macros.this.global.treeInfo.global.Tree]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.args">args</a>, <a title="List[Macros.this.global.Symbol]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams">defParams</a>, <a title="List[scala.tools.nsc.typechecker.Fingerprint]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.implParams">implParams</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.isVarargs">isVarargs</a> = <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.isVarArgsList" title="(params: Seq[Macros.this.global.Symbol])Boolean">isVarArgsList</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams" title="List[Macros.this.global.Symbol]">defParams</a><span class="delimiter">)</span>
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.isVarargs" title="Boolean">isVarargs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams" title="List[Macros.this.global.Symbol]">defParams</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.args" title="List[Macros.this.global.treeInfo.global.Tree]">args</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooFewArgumentsError" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooFewArgumentsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams" title="List[Macros.this.global.Symbol]">defParams</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.args" title="List[Macros.this.global.treeInfo.global.Tree]">args</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooManyArgumentsError" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooManyArgumentsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams" title="List[Macros.this.global.Symbol]">defParams</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.args" title="List[Macros.this.global.treeInfo.global.Tree]">args</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroTooFewArgumentsError" title="(expandee: Macros.this.global.Tree)Nothing">MacroTooFewArgumentsError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            val <a title="List[Equals]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs">wrappedArgs</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.mapWithIndex" title="(xs: List[Macros.this.global.treeInfo.global.Tree])(f: (Macros.this.global.treeInfo.global.Tree, Int) =&gt; Equals)List[Equals]">mapWithIndex</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.args" title="List[Macros.this.global.treeInfo.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Macros.this.global.treeInfo.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.arg">arg</a>, <a title="Int" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.j">j</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
              val <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.fingerprint">fingerprint</a> = <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)scala.tools.nsc.typechecker.Fingerprint">implParams</a><span class="delimiter">(</span><span title="(x$1: Int, x$2: Int)Int">min</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.j" title="Int">j</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.implParams" title="List[scala.tools.nsc.typechecker.Fingerprint]">implParams</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
              val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.duplicatedArg">duplicatedArg</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.duplicateAndKeepPositions" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">duplicateAndKeepPositions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.arg" title="Macros.this.global.treeInfo.global.Tree">arg</a><span class="delimiter">)</span>
              <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.fingerprint" title="scala.tools.nsc.typechecker.Fingerprint">fingerprint</a> match <span class="delimiter">{</span>
                case <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedTyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedTyped</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.context" title="Macros.this.MacroContext">context</a>.<a href="../../../reflect/macros/contexts/Aliases.scala.html#scala.reflect.macros.contexts;Aliases.Expr(f8e6a524a5)" title="[T](tree: context.Tree)(implicit evidence$1: context.WeakTypeTag[T])context.Expr[T]">Expr</a><span title="(tree: context.Tree)(implicit evidence$1: context.WeakTypeTag[Nothing])context.Expr[Nothing]" class="delimiter">[</span><span title="Nothing">Nothing</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.duplicatedArg" title="Macros.this.global.Tree">duplicatedArg</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/api/TypeTags.scala.html#scala.reflect.api;TypeTags.TypeTag" title="Macros.this.global.TypeTag.type">TypeTag</a>.<a href="../../../reflect/api/TypeTags.scala.html#scala.reflect.api;TypeTags.TypeTag.Nothing" title="=&gt; Macros.this.global.TypeTag[Nothing]">Nothing</a><span class="delimiter">)</span> <span class="comment">// TODO: SI-5752</span>
                case <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedUntyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedUntyped</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.duplicatedArg" title="Macros.this.global.Tree">duplicatedArg</a>
                case _ =&gt; <a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.abort" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;unexpected fingerprint &quot;)">unexpected fingerprint $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.fingerprint" title="scala.tools.nsc.typechecker.Fingerprint">fingerprint</a><span title="String(&quot; in &quot;)"> in $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a><span title="String(&quot; with paramss being &quot;)"> with paramss being $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.paramss" title="List[List[Macros.this.global.Symbol]]">paramss</a><span title="String(&quot; &quot;)" class="string"> &quot;</span> <span title="(x$1: Any)String">+</span>
                                <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;corresponding to arg &quot;)">corresponding to arg $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs.$anonfun.arg" title="Macros.this.global.treeInfo.global.Tree">arg</a><span title="String(&quot; in &quot;)"> in $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.argss" title="List[List[Macros.this.global.treeInfo.global.Tree]]">argss</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>

            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.isVarargs" title="Boolean">isVarargs</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[Equals], _2: List[Equals])(List[Equals], List[Equals])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="List[Equals]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.normal">normal</a>, <a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="List[Equals]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.varargs">varargs</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs" title="List[Equals]">wrappedArgs</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.splitAt" title="(List[Equals], List[Equals])">splitAt</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.defParams" title="List[Macros.this.global.Symbol]">defParams</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
              <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.normal" title="List[Equals]">normal</a> <a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: Equals)(implicit bf: scala.collection.generic.CanBuildFrom[List[Equals],Equals,List[Equals]])List[Equals]">:+</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.varargs" title="List[Equals]">varargs</a> <span class="comment">// pack all varargs into a single Seq argument (varargs Scala style)</span>
            <span class="delimiter">}</span> else <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees.$anonfun.wrappedArgs" title="List[Equals]">wrappedArgs</a>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;trees: &quot;)">trees: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees" title="List[List[Equals]]">trees</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

          <span class="comment">// STEP II: prepare type arguments of the macro expansion</span>
          <span class="comment">// if paramss have typetag context bounds, add an arglist to argss if necessary and instantiate the corresponding evidences</span>
          <span class="comment">// consider the following example:</span>
          <span class="comment">//</span>
          <span class="comment">//   class D[T] {</span>
          <span class="comment">//     class C[U] {</span>
          <span class="comment">//       def foo[V] = macro Impls.foo[T, U, V]</span>
          <span class="comment">//     }</span>
          <span class="comment">//   }</span>
          <span class="comment">//</span>
          <span class="comment">//   val outer1 = new D[Int]</span>
          <span class="comment">//   val outer2 = new outer1.C[String]</span>
          <span class="comment">//   outer2.foo[Boolean]</span>
          <span class="comment">//</span>
          <span class="comment">// then T and U need to be inferred from the lexical scope of the call using `asSeenFrom`</span>
          <span class="comment">// whereas V won't be resolved by asSeenFrom and need to be loaded directly from `expandee` which needs to contain a TypeApply node</span>
          <span class="comment">// also, macro implementation reference may contain a regular type as a type argument, then we pass it verbatim</span>
          val tags = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.signature" title="List[List[scala.tools.nsc.typechecker.Fingerprint]]">signature</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[scala.tools.nsc.typechecker.Fingerprint] =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.typechecker.Fingerprint])List[scala.tools.nsc.typechecker.Fingerprint]">flatten</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.collect" title="(pf: PartialFunction[scala.tools.nsc.typechecker.Fingerprint,Int])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.typechecker.Fingerprint],Int,List[Int]])List[Int]">collect</a> <a title="&lt;$anon: scala.tools.nsc.typechecker.Fingerprint =&gt; Int&gt; extends scala.runtime.AbstractPartialFunction[scala.tools.nsc.typechecker.Fingerprint,Int] with Serializable" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags;$anonfun.isDefinedAt.f">f</a> if <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags;$anonfun.isDefinedAt.f" title="scala.tools.nsc.typechecker.Fingerprint">f</a>.<a href="#scala.tools.nsc.typechecker;Fingerprint.isTag" title="=&gt; Boolean">isTag</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags;$anonfun.isDefinedAt.f" title="scala.tools.nsc.typechecker.Fingerprint">f</a>.<a href="#scala.tools.nsc.typechecker;Fingerprint.paramPos" title="=&gt; Int">paramPos</a> <span class="delimiter">}</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[context.WeakTypeTag[Nothing]]" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags">map</a> <span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.paramPos">paramPos</a> =&gt; <span class="delimiter">{</span>
            val <a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ">targ</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.binding" title="Macros.this.MacroImplBinding">binding</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)Macros.this.global.Tree">targs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.paramPos" title="Int">paramPos</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; Macros.this.global.Symbol">typeSymbol</a>
            val <a title="Macros.this.global.treeInfo.global.Type" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.tpe">tpe</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ" title="Macros.this.global.Symbol">targ</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTypeParameterOrSkolem" title="=&gt; Boolean">isTypeParameterOrSkolem</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ" title="Macros.this.global.Symbol">targ</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="comment">// doesn't work when macro def is compiled separately from its usages</span>
                <span class="comment">// then targ is not a skolem and isn't equal to any of macroDef.typeParams</span>
                <span class="comment">// val argPos = targ.deSkolemize.paramPos</span>
                val <a title="Int" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.tpe.argPos">argPos</a> = <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeParams" title="=&gt; List[Macros.this.global.Symbol]">typeParams</a>.<a href="../../../collection/GenSeqLike.scala.html#scala.collection;GenSeqLike.indexWhere(654a5f82d5)" title="(p: Macros.this.global.Symbol =&gt; Boolean)Int">indexWhere</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.tpe.argPos.$anonfun.x$14" title="Macros.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; x$14.NameType">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ" title="Macros.this.global.Symbol">targ</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; targ.NameType">name</a><span class="delimiter">)</span>
                <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)Macros.this.global.treeInfo.global.Tree">targs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.tpe.argPos" title="Int">argPos</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.treeInfo.global.Type">tpe</a>
              <span class="delimiter">}</span> else
                <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ" title="Macros.this.global.Symbol">targ</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Macros.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.asSeenFrom" title="(pre: Macros.this.global.Type, clazz: Macros.this.global.Symbol)Macros.this.global.Type">asSeenFrom</a><span class="delimiter">(</span>
                  if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix" title="Macros.this.global.Tree">prefix</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Macros.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Macros.this.global.Type">tpe</a> else <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.prefix" title="Macros.this.global.Tree">prefix</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a>,
                  <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Macros.this.global.Symbol">owner</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else
              <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.targ" title="Macros.this.global.Symbol">targ</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; Macros.this.global.Type">tpe</a>
            <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.context" title="Macros.this.MacroContext">context</a>.<a href="../../../reflect/macros/contexts/Aliases.scala.html#scala.reflect.macros.contexts;Aliases.WeakTypeTag(e83939bc56)" title="(tpe: context.Type)context.WeakTypeTag[Nothing]">WeakTypeTag</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags.$anonfun.tpe" title="Macros.this.global.treeInfo.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;tags: &quot;)">tags: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags" title="List[context.WeakTypeTag[Nothing]]">tags</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

          <span class="comment">// if present, tags always come in a separate parameter/argument list</span>
          <span class="comment">// that's because macro impls can't have implicit parameters other than c.WeakTypeTag[T]</span>
          <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.trees" title="List[List[Equals]]">trees</a> <a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: List[Equals])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[Equals]],List[Equals],List[List[Equals]]])List[List[Equals]]">:+</a> <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs.tags" title="List[context.WeakTypeTag[Nothing]]">tags</a><span class="delimiter">)</span>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[Equals] =&gt; scala.collection.GenTraversableOnce[Equals])List[Equals]">flatten</a>
        <span class="delimiter">}</span>

        val <a title="Macros.this.MacroImplBinding" id="scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.binding">binding</a> = <a href="#scala.tools.nsc.typechecker;Macros.loadMacroImplBinding" title="(macroDef: Macros.this.global.Symbol)Option[Macros.this.MacroImplBinding]">loadMacroImplBinding</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroDef" title="Macros.this.global.Symbol">macroDef</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.get" title="=&gt; Macros.this.MacroImplBinding">get</a>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.binding" title="Macros.this.MacroImplBinding">binding</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroImplBinding.is_???" title="=&gt; Boolean">is_???</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
        else <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.calculateMacroArgs" title="(binding: Macros.this.MacroImplBinding)List[Equals]">calculateMacroArgs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs.binding" title="Macros.this.MacroImplBinding">binding</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;macroImplArgs: &quot;)">macroImplArgs: $</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs" title="List[Any]">macroImplArgs</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.typechecker;Macros.MacroArgs.readResolve" title="(c: Macros.this.MacroContext, others: List[Any])Macros.this.MacroArgs">MacroArgs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.context" title="Macros.this.MacroContext">context</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroArgs.macroImplArgs" title="List[Any]">macroImplArgs</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Keeps track of macros in-flight.
   *  See more informations in comments to `openMacros` in `scala.reflect.macros.whitebox.Context`.
   */</span>
  var <a title="List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]" id="scala.tools.nsc.typechecker;Macros._openMacros_=">_openMacros</a> = List<span class="delimiter">[</span>MacroContext<span class="delimiter">]</span><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>
  def <a title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]" id="scala.tools.nsc.typechecker;Macros.openMacros">openMacros</a> = <a href="#scala.tools.nsc.typechecker;Macros._openMacros_=" title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">_openMacros</a>
  def <a title="(c: Macros.this.MacroContext)Unit" id="scala.tools.nsc.typechecker;Macros.pushMacroContext">pushMacroContext</a><span class="delimiter">(</span><a title="Macros.this.MacroContext" id="scala.tools.nsc.typechecker;Macros.pushMacroContext.c">c</a>: <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;<refinement>" title="Macros.this.MacroContext">MacroContext</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros._openMacros_=" title="(x$1: List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}])Unit">_openMacros</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type})List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">::=</a> <a href="#scala.tools.nsc.typechecker;Macros.pushMacroContext.c" title="Macros.this.MacroContext">c</a>
  def <a title="()Unit" id="scala.tools.nsc.typechecker;Macros.popMacroContext">popMacroContext</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros._openMacros_=" title="(x$1: List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}])Unit">_openMacros</a> = <a href="#scala.tools.nsc.typechecker;Macros._openMacros_=" title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">_openMacros</a>.<a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">tail</a>
  def <a title="=&gt; scala.reflect.internal.util.Position" id="scala.tools.nsc.typechecker;Macros.enclosingMacroPosition">enclosingMacroPosition</a> = <a href="#scala.tools.nsc.typechecker;Macros.openMacros" title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">openMacros</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type} =&gt; scala.reflect.internal.util.Position)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}],scala.reflect.internal.util.Position,List[scala.reflect.internal.util.Position]])List[scala.reflect.internal.util.Position]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.enclosingMacroPosition.$anonfun.x$15" title="&lt;refinement of scala.reflect.macros.contexts.Context&gt; extends scala.reflect.macros.contexts.Context">_</a>.<a href="../../../reflect/macros/contexts/Enclosures.scala.html#scala.reflect.macros.contexts;Enclosures.macroApplication" title="=&gt; x$15.universe.Tree">macroApplication</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span> <a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.find" title="(p: scala.reflect.internal.util.Position =&gt; Boolean)Option[scala.reflect.internal.util.Position]">find</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.enclosingMacroPosition.$anonfun.x$16" title="scala.reflect.internal.util.Position">_</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; scala.reflect.internal.util.Position)scala.reflect.internal.util.Position">getOrElse</a> <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a>

  <span class="comment">/** Performs macro expansion:
   *
   *  ========= Expandable trees =========
   *
   *  A term of one of the following shapes:
   *
   *    Ident(&lt;term macro&gt;)
   *    Select(&lt;any qualifier&gt;, &lt;term macro&gt;)
   *    TypeApply(&lt;any of the above&gt;, &lt;targs&gt;)
   *    Apply(...Apply(&lt;any of the above&gt;, &lt;args1&gt;)...&lt;argsN&gt;)
   *
   *  ========= Macro expansion =========
   *
   *  First of all `macroExpandXXX`:
   *    1) If necessary desugars the `expandee` to fit into the default expansion scheme
   *       that is understood by `macroExpandWithRuntime` / `macroExpandWithoutRuntime`
   *
   *  Then `macroExpandWithRuntime`:
   *    2) Checks whether the expansion needs to be delayed
   *    3) Loads macro implementation using `macroMirror`
   *    4) Synthesizes invocation arguments for the macro implementation
   *    5) Checks that the result is a tree or an expr bound to this universe
   *
   *  Finally `macroExpandXXX`:
   *    6) Validates the expansion against the white list of supported tree shapes
   *    7) Typechecks the result as required by the circumstances of the macro application
   *
   *  If -Ymacro-debug-lite is enabled, you will get basic notifications about macro expansion
   *  along with macro expansions logged in the form that can be copy/pasted verbatim into REPL.
   *
   *  If -Ymacro-debug-verbose is enabled, you will get detailed log of how exactly this function
   *  performs class loading and method resolution in order to load the macro implementation.
   *  The log will also include other non-trivial steps of macro expansion.
   *
   *  @return
   *    the expansion result                    if the expansion has been successful,
   *    the fallback tree                       if the expansion has been unsuccessful, but there is a fallback,
   *    the expandee unchanged                  if the expansion has been delayed,
   *    the expandee fully expanded             if the expansion has been delayed before and has been expanded now,
   *    the expandee with an error marker set   if the expansion has been cancelled due malformed arguments or implementation
   *    the expandee with an error marker set   if there has been an error
   */</span>
  abstract class <a title="class MacroExpander extends AnyRef" id="scala.tools.nsc.typechecker;Macros;MacroExpander">MacroExpander</a><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander" title="Macros.this.MacroExpander" class="delimiter">(</a>val <a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros;MacroExpander.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSuccess">onSuccess</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSuccess.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>
    def <a title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onFallback">onFallback</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onFallback.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>
    def <a title="(expandee: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSuppressed">onSuppressed</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSuppressed.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onSuppressed.expandee" title="Macros.this.global.Tree">expandee</a>
    def <a title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onDelayed">onDelayed</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onDelayed.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onDelayed.expanded" title="Macros.this.global.Tree">expanded</a>
    def <a title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSkipped">onSkipped</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onSkipped.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onSkipped.expanded" title="Macros.this.global.Tree">expanded</a>
    def <a title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onFailure">onFailure</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.onFailure.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span> <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.typer" title="=&gt; Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.infer" title="=&gt; Macros.this.Inferencer">infer</a>.<a href="Infer.scala.html#scala.tools.nsc.typechecker;Infer;Inferencer.setError" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">setError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a> <span class="delimiter">}</span>

    def <a title="(desugared: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.apply">apply</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.apply.desugared">desugared</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.isMacroExpansionSuppressed" title="(tree: Macros.this.global.Tree)Boolean">isMacroExpansionSuppressed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.apply.desugared" title="Macros.this.global.Tree">desugared</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onSuppressed" title="(expandee: Macros.this.global.Tree)Macros.this.global.Tree">onSuppressed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
      else <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand" title="(desugared: Macros.this.global.Tree)Macros.this.global.Tree">expand</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.apply.desugared" title="Macros.this.global.Tree">desugared</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    protected def <a title="(desugared: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand">expand</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.desugared">desugared</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      def <a title="(tree: Macros.this.global.Tree)String" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed">showDetailed</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="../../../reflect/api/Printers.scala.html#scala.reflect.api;Printers.showRaw$default$4" title="Macros.this.global.BooleanFlag" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed.x$33">showRaw</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed.tree" title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed.x$27">tree</a>, printIds = true, printTypes = true<span class="delimiter">)</span>
      def <a title="()String" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.summary">summary</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;expander = &quot;)">expander = $</span>this<a href="#scala.tools.nsc.typechecker;Macros;MacroExpander" title="String(&quot;, expandee = &quot;)">, expandee = $</a><span class="delimiter">{</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed" title="(tree: Macros.this.global.Tree)String">showDetailed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;, desugared = &quot;)">, desugared = $</span><span class="delimiter">{</span>if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.desugared" title="Macros.this.global.Tree">desugared</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> else <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.showDetailed" title="(tree: Macros.this.global.Tree)String">showDetailed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.desugared" title="Macros.this.global.Tree">desugared</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>
      if <span class="delimiter">(</span><a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroDebugVerbose" title="=&gt; Boolean">macroDebugVerbose</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;macroExpand: &quot;)">macroExpand: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.summary" title="()String">summary</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.linkExpandeeAndDesugared" title="(expandee: Macros.this.global.Tree, desugared: Macros.this.global.Tree)Unit">linkExpandeeAndDesugared</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.desugared" title="Macros.this.global.Tree">desugared</a><span class="delimiter">)</span>

      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.start">start</a> = if <span class="delimiter">(</span><a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker.MacrosStats.macroExpandNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">macroExpandNanos</a><span class="delimiter">)</span> else null
      if <span class="delimiter">(</span><a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.incCounter(456ea4fa07)" title="(c: scala.reflect.internal.util.Statistics.Counter)Unit">incCounter</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker.MacrosStats.macroExpandCount" title="=&gt; scala.reflect.internal.util.Statistics.Counter">macroExpandCount</a><span class="delimiter">)</span>
      try <span class="delimiter">{</span>
        <a href="../Global.scala.html#scala.tools.nsc;Global.withInfoLevel" title="(infolevel: Macros.this.global.nodePrinters.InfoLevel.Value)(op: =&gt; Macros.this.global.Tree)Macros.this.global.Tree">withInfoLevel</a><span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.nodePrinters" title="Macros.this.global.nodePrinters.type">nodePrinters</a>.<a href="../ast/NodePrinters.scala.html#scala.tools.nsc.ast;NodePrinters.InfoLevel" title="Macros.this.global.nodePrinters.InfoLevel.type">InfoLevel</a>.<a href="../ast/NodePrinters.scala.html#scala.tools.nsc.ast;NodePrinters.InfoLevel.Quiet" title="=&gt; Macros.this.global.nodePrinters.InfoLevel.Value">Quiet</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// verbose printing might cause recursive macro expansions</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isErroneous" title="=&gt; Boolean">isErroneous</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.exists" title="(p: Macros.this.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.$anonfun.x$17" title="Macros.this.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.isErroneous" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="String" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.reason">reason</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isErroneous" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span> <span title="String(&quot;not found or incompatible macro implementation&quot;)" class="string">&quot;not found or incompatible macro implementation&quot;</span> else <span title="String(&quot;erroneous arguments&quot;)" class="string">&quot;erroneous arguments&quot;</span>
            <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;cancelled macro expansion because of &quot;)">cancelled macro expansion because of $</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.reason" title="String">reason</a><span title="String(&quot;: &quot;)">: $</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onFailure" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onFailure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.typer" title="=&gt; Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.infer" title="=&gt; Macros.this.Inferencer">infer</a>.<a href="Infer.scala.html#scala.tools.nsc.typechecker;Infer;Inferencer.setError" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">setError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else try <span class="delimiter">{</span>
            val <span title="Macros.this.MacroStatus">expanded</span> = <span class="delimiter">{</span>
              val <a title="Macros.this.MacroRuntime" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded.runtime">runtime</a> = <a href="../../../reflect/macros/runtime/MacroRuntimes.scala.html#scala.reflect.macros.runtime;MacroRuntimes.macroRuntime" title="(expandee: Macros.this.global.Tree)Macros.this.MacroRuntime">macroRuntime</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded.runtime" title="Macros.this.MacroRuntime">runtime</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, runtime: Macros.this.MacroRuntime)Macros.this.MacroStatus">macroExpandWithRuntime</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.typer" title="=&gt; Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded.runtime" title="Macros.this.MacroRuntime">runtime</a><span class="delimiter">)</span>
              else <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroStatus">macroExpandWithoutRuntime</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.typer" title="=&gt; Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span title="Macros.this.MacroStatus">expanded</span> match <span class="delimiter">{</span>
              case Success<span class="delimiter">(</span><span title="Macros.this.global.Tree">expanded</span><span class="delimiter">)</span> =&gt;
                <span class="comment">// also see http://groups.google.com/group/scala-internals/browse_thread/thread/492560d941b315cc</span>
                val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded1">expanded1</a> = try <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onSuccess" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onSuccess</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.duplicateAndKeepPositions" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">duplicateAndKeepPositions</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">expanded</span><span class="delimiter">)</span><span class="delimiter">)</span> finally <a href="#scala.tools.nsc.typechecker;Macros.popMacroContext" title="()Unit">popMacroContext</a><span class="delimiter">(</span><span class="delimiter">)</span>
                if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.hasMacroExpansionAttachment" title="(any: Any)Boolean">hasMacroExpansionAttachment</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded1" title="Macros.this.global.Tree">expanded1</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.linkExpandeeAndExpanded" title="(expandee: Macros.this.global.Tree, expanded: Any)Unit">linkExpandeeAndExpanded</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded1" title="Macros.this.global.Tree">expanded1</a><span class="delimiter">)</span>
                if <span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.Ymacroexpand" title="=&gt; scala.tools.nsc.Settings#ChoiceSetting">Ymacroexpand</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.value" title="=&gt; String">value</a> <span title="(x$1: Any)Boolean">==</span> <a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.MacroExpand" title="scala.tools.nsc.Settings#MacroExpand.type">MacroExpand</a>.<a href="../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.MacroExpand.Discard" title="=&gt; String">Discard</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.suppressMacroExpansion" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">suppressMacroExpansion</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
                  <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: Macros.this.global.Type)MacroExpander.this.expandee.type">setType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded1" title="Macros.this.global.Tree">expanded1</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                else <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.expanded1" title="Macros.this.global.Tree">expanded1</a>
              case Fallback<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.fallback">fallback</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onFallback" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onFallback</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.fallback" title="Macros.this.global.Tree">fallback</a><span class="delimiter">)</span>
              case Delayed<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.delayed">delayed</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onDelayed" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onDelayed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.delayed" title="Macros.this.global.Tree">delayed</a><span class="delimiter">)</span>
              case Skipped<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.skipped">skipped</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onSkipped" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onSkipped</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.skipped" title="Macros.this.global.Tree">skipped</a><span class="delimiter">)</span>
              case Failure<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroExpander.expand.failure">failure</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onFailure" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onFailure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.failure" title="Macros.this.global.Tree">failure</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
            case <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.typer" title="=&gt; Macros.this.Typer">typer</a>.<a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen" title="MacroExpander.this.typer.TyperErrorGen.type">TyperErrorGen</a>.<a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroExpansionException" title="MacroExpander.this.typer.TyperErrorGen.MacroExpansionException.type">MacroExpansionException</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.onFailure" title="(expanded: Macros.this.global.Tree)Macros.this.global.Tree">onFailure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expandee" title="=&gt; Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> finally <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.canEnable" title="=&gt; Boolean">canEnable</a><span class="delimiter">)</span> <a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker.MacrosStats.macroExpandNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">macroExpandNanos</a>, <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.expand.start" title="scala.reflect.internal.util.Statistics.TimerSnapshot">start</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Expands a term macro used in apply role as `M(2)(3)` in `val x = M(2)(3)`.
   *  @param outerPt Expected type that comes from enclosing context (something that's traditionally called `pt`).
   *  @param innerPt Expected type that comes from the signature of a macro def, possibly wildcarded to help type inference.
   */</span>
  class <a title="class DefMacroExpander extends Macros.this.MacroExpander" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander">DefMacroExpander</a><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander" title="Macros.this.DefMacroExpander" class="delimiter">(</a><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="scala.tools.nsc.Mode" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode">mode</a>: <a href="../../../reflect/internal/Mode.scala.html#scala.reflect.internal;Mode" title="scala.tools.nsc.Mode">Mode</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt">outerPt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>
  extends <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander" title="Macros.this.MacroExpander">MacroExpander</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    lazy val <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt">innerPt</a> = <span class="delimiter">{</span>
      val <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.tp">tp</a> = if <span class="delimiter">(</span><a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.isNullaryInvocation" title="(tree: Macros.this.global.treeInfo.global.Tree)Boolean">isNullaryInvocation</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.finalResultType" title="=&gt; Macros.this.global.Type">finalResultType</a> else <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463)" title="(expandee: Macros.this.global.Tree)Boolean">isBlackbox</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.tp" title="Macros.this.global.Type">tp</a>
      else <span class="delimiter">{</span>
        <span class="comment">// approximation is necessary for whitebox macros to guide type inference</span>
        <span class="comment">// read more in the comments for onDelayed below</span>
        val undetparams = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.tp" title="Macros.this.global.Type">tp</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.collect" title="List[Macros.this.global.Symbol]" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams">collect</a> <a title="&lt;$anon: Macros.this.global.Type =&gt; Macros.this.global.Symbol&gt; extends scala.runtime.AbstractPartialFunction[Macros.this.global.Type,Macros.this.global.Symbol] with Serializable" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams;$anonfun.isDefinedAt.tp">tp</a> if <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams;$anonfun.isDefinedAt.tp" title="Macros.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; Macros.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTypeParameter" title="=&gt; Boolean">isTypeParameter</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams;$anonfun.isDefinedAt.tp" title="Macros.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; Macros.this.global.Symbol">typeSymbol</a> <span class="delimiter">}</span>
        <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.deriveTypeWithWildcards" title="(syms: List[Macros.this.global.Symbol])(tpe: Macros.this.global.Type)Macros.this.global.Type">deriveTypeWithWildcards</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.undetparams" title="List[Macros.this.global.Symbol]">undetparams</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt.tp" title="Macros.this.global.Type">tp</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    override def <a title="(expanded0: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess">onSuccess</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded0">expanded0</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// prematurely annotate the tree with a macro expansion attachment</span>
      <span class="comment">// so that adapt called indirectly by typer.typed knows that it needs to apply the existential fixup</span>
      <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments.linkExpandeeAndExpanded" title="(expandee: Macros.this.global.Tree, expanded: Any)Unit">linkExpandeeAndExpanded</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded0" title="Macros.this.global.Tree">expanded0</a><span class="delimiter">)</span>

      def <a title="(label: String, tree: Macros.this.global.Tree, pt: Macros.this.global.Type)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck">typecheck</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.label">label</a>: <span title="String">String</span>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.isErrorTyped" title="=&gt; Boolean">isErrorTyped</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.tree" title="Macros.this.global.Tree">tree</a>
        else <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroDebugVerbose" title="=&gt; Boolean">macroDebugVerbose</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.label" title="String">label</a><span title="String(&quot; (against pt = &quot;)"> (against pt = $</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.pt" title="Macros.this.global.Type">pt</a><span title="String(&quot;): &quot;)">): $</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.tree" title="Macros.this.global.Tree">tree</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <span class="comment">// `macroExpandApply` is called from `adapt`, where implicit conversions are disabled</span>
          <span class="comment">// therefore we need to re-enable the conversions back temporarily</span>
          val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.result">result</a> = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.withImplicitsEnabled" title="(op: =&gt; Macros.this.global.Tree)Macros.this.global.Tree">withImplicitsEnabled</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.tree" title="Macros.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.pt" title="Macros.this.global.Type">pt</a><span class="delimiter">)</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.result" title="Macros.this.global.Tree">result</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.isErrorTyped" title="=&gt; Boolean">isErrorTyped</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroDebugVerbose" title="=&gt; Boolean">macroDebugVerbose</a><span class="delimiter">)</span> <a href="../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.label" title="String">label</a><span title="String(&quot; has failed: &quot;)"> has failed: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.reporter" title="=&gt; Macros.this.ContextReporter">reporter</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;ContextReporter.errors" title="=&gt; scala.collection.immutable.Seq[Macros.this.AbsTypeError]">errors</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck.result" title="Macros.this.global.Tree">result</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463)" title="(expandee: Macros.this.global.Tree)Boolean">isBlackbox</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <span title="Macros.this.global.Typed">expanded1</span> = <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: Macros.this.global.Position)(tree: Macros.this.global.Typed)Macros.this.global.Typed">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.enclosingMacroPosition" title="=&gt; scala.reflect.internal.util.Position">enclosingMacroPosition</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.makeTransparent" title="=&gt; scala.reflect.internal.util.Position">makeTransparent</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Typed" title="(expr: Macros.this.global.Tree, tpt: Macros.this.global.Tree)Macros.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded0" title="Macros.this.global.Tree">expanded0</a>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: Macros.this.global.Type)Macros.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt" title="=&gt; Macros.this.global.Type">innerPt</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck" title="(label: String, tree: Macros.this.global.Tree, pt: Macros.this.global.Type)Macros.this.global.Tree">typecheck</a><span class="delimiter">(</span><span title="String(&quot;blackbox typecheck&quot;)" class="string">&quot;blackbox typecheck&quot;</span>, <span title="Macros.this.global.Typed">expanded1</span>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type">outerPt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <span class="comment">// whitebox expansions need to be typechecked against WildcardType first in order to avoid SI-6992 and SI-8048</span>
        <span class="comment">// then we typecheck against innerPt, not against outerPt in order to prevent SI-8209</span>
        val <span title="Macros.this.global.Tree">expanded1</span> = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck" title="(label: String, tree: Macros.this.global.Tree, pt: Macros.this.global.Type)Macros.this.global.Tree">typecheck</a><span class="delimiter">(</span><span title="String(&quot;whitebox typecheck #0&quot;)" class="string">&quot;whitebox typecheck #0&quot;</span>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded0" title="Macros.this.global.Tree">expanded0</a>, <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.WildcardType" title="Macros.this.global.WildcardType.type">WildcardType</a><span class="delimiter">)</span>
        val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded2">expanded2</a> = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck" title="(label: String, tree: Macros.this.global.Tree, pt: Macros.this.global.Type)Macros.this.global.Tree">typecheck</a><span class="delimiter">(</span><span title="String(&quot;whitebox typecheck #1&quot;)" class="string">&quot;whitebox typecheck #1&quot;</span>, <span title="Macros.this.global.Tree">expanded1</span>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.innerPt" title="=&gt; Macros.this.global.Type">innerPt</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.typecheck" title="(label: String, tree: Macros.this.global.Tree, pt: Macros.this.global.Type)Macros.this.global.Tree">typecheck</a><span class="delimiter">(</span><span title="String(&quot;whitebox typecheck #2&quot;)" class="string">&quot;whitebox typecheck #2&quot;</span>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onSuccess.expanded2" title="Macros.this.global.Tree">expanded2</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type">outerPt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    override def <a title="(delayed: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed">onDelayed</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed">delayed</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// =========== THE SITUATION ===========</span>
      <span class="comment">//</span>
      <span class="comment">// If we've been delayed (i.e. bailed out of the expansion because of undetermined type params present in the expandee),</span>
      <span class="comment">// then there are two possible situations we're in:</span>
      <span class="comment">// 1) We're in POLYmode, when the typer tests the waters wrt type inference</span>
      <span class="comment">// (e.g. as in typedArgToPoly in doTypedApply).</span>
      <span class="comment">// 2) We're out of POLYmode, which means that the typer is out of tricks to infer our type</span>
      <span class="comment">// (e.g. if we're an argument to a function call, then this means that no previous argument lists</span>
      <span class="comment">// can determine our type variables for us).</span>
      <span class="comment">//</span>
      <span class="comment">// Situation #1 is okay for us, since there's no pressure. In POLYmode we're just verifying that</span>
      <span class="comment">// there's nothing outrageously wrong with our undetermined type params (from what I understand!).</span>
      <span class="comment">//</span>
      <span class="comment">// Situation #2 requires measures to be taken. If we're in it, then noone's going to help us infer</span>
      <span class="comment">// the undetermined type params. Therefore we need to do something ourselves or otherwise this</span>
      <span class="comment">// expandee will forever remaing not expanded (see SI-5692). A traditional way out of this conundrum</span>
      <span class="comment">// is to call `instantiate` and let the inferencer try to find the way out. It works for simple cases,</span>
      <span class="comment">// but sometimes, if the inferencer lacks information, it will be forced to approximate.</span>
      <span class="comment">//</span>
      <span class="comment">// =========== THE PROBLEM ===========</span>
      <span class="comment">//</span>
      <span class="comment">// Consider the following example (thanks, Miles!):</span>
      <span class="comment">//</span>
      <span class="comment">// Iso represents an isomorphism between two datatypes:</span>
      <span class="comment">// 1) An arbitrary one (e.g. a random case class)</span>
      <span class="comment">// 2) A uniform representation for all datatypes (e.g. an HList)</span>
      <span class="comment">//</span>
      <span class="comment">//   trait Iso[T, U] {</span>
      <span class="comment">//   def to(t : T) : U</span>
      <span class="comment">//   def from(u : U) : T</span>
      <span class="comment">//   }</span>
      <span class="comment">//   implicit def materializeIso[T, U]: Iso[T, U] = macro ???</span>
      <span class="comment">//</span>
      <span class="comment">//   case class Foo(i: Int, s: String, b: Boolean)</span>
      <span class="comment">//   def foo[C, L](c: C)(implicit iso: Iso[C, L]): L = iso.to(c)</span>
      <span class="comment">//   foo(Foo(23, &quot;foo&quot;, true))</span>
      <span class="comment">//</span>
      <span class="comment">// In the snippet above, even though we know that there's a fundep going from T to U</span>
      <span class="comment">// (in a sense that a datatype's uniform representation is unambiguously determined by the datatype,</span>
      <span class="comment">// e.g. for Foo it will be Int :: String :: Boolean :: HNil), there's no way to convey this information</span>
      <span class="comment">// to the typechecker. Therefore the typechecker will infer Nothing for L, which is hardly what we want.</span>
      <span class="comment">//</span>
      <span class="comment">// =========== THE SOLUTION (ENABLED ONLY FOR WHITEBOX MACROS) ===========</span>
      <span class="comment">//</span>
      <span class="comment">// To give materializers a chance to say their word before vanilla inference kicks in,</span>
      <span class="comment">// we infer as much as possible (e.g. in the example above even though L is hopeless, C still can be inferred to Foo)</span>
      <span class="comment">// and then trigger macro expansion with the undetermined type parameters still there.</span>
      <span class="comment">// Thanks to that the materializer can take a look at what's going on and react accordingly.</span>
      val shouldInstantiate = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.undetparams" title="=&gt; List[Macros.this.global.Symbol]">undetparams</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="Boolean" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.shouldInstantiate">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode" title="scala.tools.nsc.Mode">mode</a>.<a href="../../../reflect/internal/Mode.scala.html#scala.reflect.internal;Mode.inPolyMode" title="=&gt; Boolean">inPolyMode</a>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.shouldInstantiate" title="Boolean">shouldInstantiate</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.isBlackbox(9fb43a9463)" title="(expandee: Macros.this.global.Tree)Boolean">isBlackbox</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.instantiatePossiblyExpectingUnit" title="(tree: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">instantiatePossiblyExpectingUnit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed" title="Macros.this.global.Tree">delayed</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type">outerPt</a><span class="delimiter">)</span>
        else <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.typechecker;Macros.forced" title="=&gt; scala.reflect.internal.util.WeakHashSet[Macros.this.global.Tree]">forced</a> <a href="../../../reflect/internal/util/WeakHashSet.scala.html#scala.reflect.internal.util;WeakHashSet.+=(d63284bc7a)" title="(elem: Macros.this.global.Tree)Macros.this.forced.type">+=</a> <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed" title="Macros.this.global.Tree">delayed</a>
          <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.infer" title="=&gt; Macros.this.Inferencer">infer</a>.<a href="Infer.scala.html#scala.tools.nsc.typechecker;Infer;Inferencer.inferExprInstance$default$4" title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.x$39">inferExprInstance</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed" title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.x$34">delayed</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.extractUndetparams" title="()List[Macros.this.global.Symbol]">extractUndetparams</a><a title="List[Macros.this.global.Symbol] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.x$35" class="delimiter">(</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.x$36">outerPt</a>, keepNothings = false<span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpand" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">macroExpand</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed" title="Macros.this.global.Tree">delayed</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type">outerPt</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> else <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onDelayed.delayed" title="Macros.this.global.Tree">delayed</a>
    <span class="delimiter">}</span>
    override def <a title="(fallback: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onFallback">onFallback</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;DefMacroExpander.onFallback.fallback">fallback</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.onFallback.fallback" title="Macros.this.global.Tree">fallback</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander.outerPt" title="Macros.this.global.Type">outerPt</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Expands a term macro used in apply role as `M(2)(3)` in `val x = M(2)(3)`.
   *  @see DefMacroExpander
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpand">macroExpand</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroExpand.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpand.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="scala.tools.nsc.Mode" id="scala.tools.nsc.typechecker;Macros.macroExpand.mode">mode</a>: <a href="../../../reflect/internal/Mode.scala.html#scala.reflect.internal;Mode" title="scala.tools.nsc.Mode">Mode</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.macroExpand.pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <a href="AnalyzerPlugins.scala.html#scala.tools.nsc.typechecker;AnalyzerPlugins.pluginsMacroExpand" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">pluginsMacroExpand</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpand.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpand.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpand.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpand.pt" title="Macros.this.global.Type">pt</a><span class="delimiter">)</span>

  <span class="comment">/** Default implementation of `macroExpand`.
   *  Can be overridden by analyzer plugins (see AnalyzerPlugins.pluginsMacroExpand for more details)
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand">standardMacroExpand</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="scala.tools.nsc.Mode" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand.mode">mode</a>: <a href="../../../reflect/internal/Mode.scala.html#scala.reflect.internal;Mode" title="scala.tools.nsc.Mode">Mode</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand.pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Macros.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    val <a title="Macros.this.DefMacroExpander" id="scala.tools.nsc.typechecker;Macros.standardMacroExpand.expander">expander</a> = new <a href="#scala.tools.nsc.typechecker;Macros;DefMacroExpander" title="Macros.this.DefMacroExpander">DefMacroExpander</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroExpand.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroExpand.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroExpand.mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Macros.standardMacroExpand.pt" title="Macros.this.global.Type">pt</a><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.typechecker;Macros;MacroExpander.apply" title="(desugared: Macros.this.global.Tree)Macros.this.global.Tree">expander</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.standardMacroExpand.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  sealed abstract class <a title="class MacroStatus extends AnyRef" id="scala.tools.nsc.typechecker;Macros;MacroStatus">MacroStatus</a><a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus" class="delimiter">(</a>val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;MacroStatus.result">result</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>
  case class <a title="class Success extends Macros.this.MacroStatus with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.Success.readResolve">Success</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;Success.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;Success.expanded" title="Macros.this.global.Tree">expanded</a><span class="delimiter">)</span>
  case class <a title="class Fallback extends Macros.this.MacroStatus with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.Fallback.readResolve">Fallback</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;Fallback.fallback">fallback</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;Fallback.fallback" title="Macros.this.global.Tree">fallback</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../Global.scala.html#scala.tools.nsc;Global.currentRun" title="=&gt; Macros.this.global.Run">currentRun</a>.<a href="../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting;RunReporting.reporting" title="=&gt; Macros.this.global.PerRunReporting">reporting</a>.<a href="../Reporting.scala.html#scala.tools.nsc;Reporting;PerRunReporting.seenMacroExpansionsFallingBack_=" title="(x$1: Boolean)Unit">seenMacroExpansionsFallingBack</a> = true <span class="delimiter">}</span>
  case class <a title="class Delayed extends Macros.this.MacroStatus with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.Delayed.readResolve">Delayed</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;Delayed.delayed">delayed</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;Delayed.delayed" title="Macros.this.global.Tree">delayed</a><span class="delimiter">)</span>
  case class <a title="class Skipped extends Macros.this.MacroStatus with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.Skipped.readResolve">Skipped</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;Skipped.skipped">skipped</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;Skipped.skipped" title="Macros.this.global.Tree">skipped</a><span class="delimiter">)</span>
  case class <a title="class Failure extends Macros.this.MacroStatus with Product with Serializable" id="scala.tools.nsc.typechecker;Macros.Failure.readResolve">Failure</a><a href="../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros;Failure.failure">failure</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros;Failure.failure" title="Macros.this.global.Tree">failure</a><span class="delimiter">)</span>
  def <a title="(expanded: Macros.this.global.Tree)Macros.this.Delayed" id="scala.tools.nsc.typechecker;Macros.Delay">Delay</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.Delay.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.Delayed.readResolve" title="(delayed: Macros.this.global.Tree)Macros.this.Delayed">Delayed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.Delay.expanded" title="Macros.this.global.Tree">expanded</a><span class="delimiter">)</span>
  def <a title="(expanded: Macros.this.global.Tree)Macros.this.Skipped" id="scala.tools.nsc.typechecker;Macros.Skip">Skip</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.Skip.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.Skipped.readResolve" title="(skipped: Macros.this.global.Tree)Macros.this.Skipped">Skipped</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.Skip.expanded" title="Macros.this.global.Tree">expanded</a><span class="delimiter">)</span>

  <span class="comment">/** Expands a macro when a runtime (i.e. the macro implementation) can be successfully loaded
   *  Meant for internal use within the macro infrastructure, don't use it elsewhere.
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, runtime: Macros.this.MacroRuntime)Macros.this.MacroStatus" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime">macroExpandWithRuntime</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, <a title="Macros.this.MacroRuntime" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.runtime">runtime</a>: <a href="../../../Function1.scala.html#scala;Function1" title="Macros.this.MacroRuntime">MacroRuntime</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a> = <span class="delimiter">{</span>
    val <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.wasDelayed">wasDelayed</a>  = <a href="#scala.tools.nsc.typechecker;Macros.isDelayed" title="(expandee: Macros.this.global.Tree)Boolean">isDelayed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
    val <a title="scala.collection.mutable.Set[Int]" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.undetparams">undetparams</a> = <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams" title="(expandee: Macros.this.global.Tree)scala.collection.mutable.Set[Int]">calculateUndetparams</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
    val nowDelayed  = <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.macrosEnabled" title="=&gt; Boolean">macrosEnabled</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="Boolean" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.nowDelayed">||</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.undetparams" title="scala.collection.mutable.Set[Int]">undetparams</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>

    <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Boolean, _2: Boolean)(Boolean, Boolean)" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.wasDelayed" title="Boolean">wasDelayed</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.nowDelayed" title="Boolean">nowDelayed</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span class="delimiter">(</span>true, true<span class="delimiter">)</span> =&gt;
        <a href="#scala.tools.nsc.typechecker;Macros.Delay" title="(expanded: Macros.this.global.Tree)Macros.this.Delayed">Delay</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
      case <span class="delimiter">(</span>true, false<span class="delimiter">)</span> =&gt;
        val <span title="Macros.this.global.Tree">expanded</span> = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.global.Tree">macroExpandAll</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="Macros.this.global.Tree">expanded</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.exists" title="(p: Macros.this.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.$anonfun.x$18" title="Macros.this.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.isErroneous" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.Failure.readResolve" title="(failure: Macros.this.global.Tree)Macros.this.Failure">Failure</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
        else <a href="#scala.tools.nsc.typechecker;Macros.Skip" title="(expanded: Macros.this.global.Tree)Macros.this.Skipped">Skip</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">expanded</span><span class="delimiter">)</span>
      case <span class="delimiter">(</span>false, true<span class="delimiter">)</span> =&gt;
        <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogLite" title="(msg: =&gt; Any)Unit">macroLogLite</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;macro expansion is delayed: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a> <a href="../../../collection/convert/Wrappers.scala.html#scala.collection.convert;Wrappers;JMapWrapperLike.+=(841881fccd)" title="(kv: (Macros.this.global.Tree, scala.collection.mutable.Set[Int]))Macros.this.delayed.type">+=</a> <a href="../../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: Macros.this.global.Tree)ArrowAssoc[Macros.this.global.Tree]">expandee</a> <a href="../../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: scala.collection.mutable.Set[Int])(Macros.this.global.Tree, scala.collection.mutable.Set[Int])">-&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.undetparams" title="scala.collection.mutable.Set[Int]">undetparams</a>
        <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.updateAttachment" title="(attachment: Macros.this.MacroRuntimeAttachment)(implicit evidence$1: scala.reflect.ClassTag[Macros.this.MacroRuntimeAttachment])expandee.type">updateAttachment</a> <a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment" title="(delayed: Boolean, typerContext: Macros.this.Context, macroContext: Option[Macros.this.MacroContext])Macros.this.MacroRuntimeAttachment">MacroRuntimeAttachment</a><span class="delimiter">(</span>delayed = true, typerContext = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>, macroContext = <a href="../../../Option.scala.html#scala;Some" title="(x: Macros.this.MacroContext)Some[Macros.this.MacroContext]">Some</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroArgs" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroArgs">macroArgs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>.<a href="#scala.tools.nsc.typechecker;Macros;MacroArgs.c" title="=&gt; Macros.this.MacroContext">c</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Macros.Delay" title="(expanded: Macros.this.global.Tree)Macros.this.Delayed">Delay</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
      case <span class="delimiter">(</span>false, false<span class="delimiter">)</span> =&gt;
        import <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>.<a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen" title="typer.TyperErrorGen.type">TyperErrorGen</a>._
        <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogLite" title="(msg: =&gt; Any)Unit">macroLogLite</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;performing macro expansion %s at %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="Macros.this.MacroArgs" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.args">args</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroArgs" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroArgs">macroArgs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.typer" title="Macros.this.Typer">typer</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
        try <span class="delimiter">{</span>
          val <a title="Int" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.numErrors">numErrors</a>    = <a href="../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter.ERROR" title="=&gt; scala.tools.nsc.reporters.Reporter#Severity">ERROR</a>.<a href="../reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter;Severity.count" title="=&gt; Int">count</a>
          def <a title="=&gt; Boolean" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.hasNewErrors">hasNewErrors</a> = <a href="../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter.ERROR" title="=&gt; scala.tools.nsc.reporters.Reporter#Severity">ERROR</a>.<a href="../reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter;Severity.count" title="=&gt; Int">count</a> <a href="../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.numErrors" title="Int">numErrors</a>
          val <span title="Any">expanded</span> = <span class="delimiter">{</span> <a href="#scala.tools.nsc.typechecker;Macros.pushMacroContext" title="(c: Macros.this.MacroContext)Unit">pushMacroContext</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.args" title="Macros.this.MacroArgs">args</a>.<a href="#scala.tools.nsc.typechecker;Macros;MacroArgs.c" title="=&gt; Macros.this.MacroContext">c</a><span class="delimiter">)</span>; <a href="../../../Function1.scala.html#scala;Function1.apply" title="(v1: Macros.this.MacroArgs)Any">runtime</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.args" title="Macros.this.MacroArgs">args</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.hasNewErrors" title="=&gt; Boolean">hasNewErrors</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroGeneratedTypeError" title="(expandee: Macros.this.global.Tree, err: Macros.this.global.TypeError)Nothing">MacroGeneratedTypeError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
          def <a title="(expanded: Macros.this.global.Tree)Macros.this.Success" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree">validateResultingTree</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded">expanded</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><span title="String(&quot;original:&quot;)" class="string">&quot;original:&quot;</span><span class="delimiter">)</span>
            <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogLite" title="(msg: =&gt; Any)Unit">macroLogLite</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/api/Printers.scala.html#scala.reflect.api;Printers.showRaw(6f64b10ccf)" title="(any: Any, printTypes: Macros.this.global.BooleanFlag, printIds: Macros.this.global.BooleanFlag, printOwners: Macros.this.global.BooleanFlag, printKinds: Macros.this.global.BooleanFlag, printMirrors: Macros.this.global.BooleanFlag, printPositions: Macros.this.global.BooleanFlag)String">showRaw</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a><span class="delimiter">)</span><span class="delimiter">)</span>
            val freeSyms = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.freeTerms" title="=&gt; List[Macros.this.global.FreeTermSymbol]">freeTerms</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="List[Macros.this.global.FreeSymbol{def name: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; def rawname: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{def name: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def rawname: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}}]" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.freeSyms">++</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.freeTypes" title="=&gt; List[Macros.this.global.FreeTypeSymbol]">freeTypes</a>
            <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.freeSyms" title="List[Macros.this.global.FreeSymbol{def name: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; def rawname: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{def name: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def rawname: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}}]">freeSyms</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Macros.this.global.FreeSymbol{def name: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; def rawname: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{def name: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def rawname: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol{type TypeOfClonedSymbol &gt;: Macros.this.global.TermSymbol with Macros.this.global.TypeSkolem &lt;: Macros.this.global.Symbol; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}; type NameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def newName(str: String): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def subName(from: Int,to: Int): Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; def companionName: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TypeName with Macros.this.global.TermName &lt;: Macros.this.global.Name}; def next: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name{def next: Macros.this.global.Name; type ThisNameType &gt;: Macros.this.global.TermName with Macros.this.global.TypeName &lt;: Macros.this.global.Name}}} =&gt; Nothing)Unit">foreach</a> <span class="delimiter">(</span><a title="&lt;refinement of Macros.this.global.FreeSymbol&gt; extends Macros.this.global.FreeSymbol" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.$anonfun.sym">sym</a> =&gt; <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroFreeSymbolError" title="(expandee: Macros.this.global.Tree, sym: Macros.this.global.FreeSymbol)Nothing">MacroFreeSymbolError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.$anonfun.sym" title="&lt;refinement of Macros.this.global.FreeSymbol&gt; extends Macros.this.global.FreeSymbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="comment">// Macros might have spliced arguments with range positions into non-compliant</span>
            <span class="comment">// locations, notably, under a tree without a range position. Or, they might</span>
            <span class="comment">// splice a tree that `resetAttrs` has assigned NoPosition.</span>
            <span class="comment">//</span>
            <span class="comment">// Here, we just convert all positions in the tree to offset positions, and</span>
            <span class="comment">// convert NoPositions to something sensible.</span>
            <span class="comment">//</span>
            <span class="comment">// Given that the IDE now sees the expandee (by using -Ymacro-expand:discard),</span>
            <span class="comment">// this loss of position fidelity shouldn't cause any real problems.</span>
            <span class="comment">//</span>
            <span class="comment">// Alternatively, we could pursue a way to exclude macro expansions from position</span>
            <span class="comment">// invariant checking, or find a way not to touch expansions that happen to validate.</span>
            <span class="comment">//</span>
            <span class="comment">// This would be useful for cases like:</span>
            <span class="comment">//</span>
            <span class="comment">//    macro1 { macro2 { &quot;foo&quot; } }</span>
            <span class="comment">//</span>
            <span class="comment">// to allow `macro1` to see the range position of the &quot;foo&quot;.</span>
            val <a title="scala.reflect.internal.util.Position" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expandedPos">expandedPos</a> = <a href="#scala.tools.nsc.typechecker;Macros.enclosingMacroPosition" title="=&gt; scala.reflect.internal.util.Position">enclosingMacroPosition</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a>
            def <a title="(pos: Macros.this.global.Position)scala.reflect.internal.util.Position" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.fixPosition">fixPosition</a><span class="delimiter">(</span><a title="Macros.this.global.Position" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.fixPosition.pos">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="Macros.this.global.Position">Position</a><span class="delimiter">)</span> =
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.fixPosition.pos" title="Macros.this.global.Position">pos</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.NoPosition" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expandedPos" title="scala.reflect.internal.util.Position">expandedPos</a> else <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.fixPosition.pos" title="Macros.this.global.Position">pos</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a>
            <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.foreach" title="(f: Macros.this.global.Tree =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.$anonfun.t">t</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.$anonfun.t" title="Macros.this.global.Tree">t</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos_=" title="(pos: Macros.this.global.Position)Unit">pos</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.fixPosition" title="(pos: Macros.this.global.Position)scala.reflect.internal.util.Position">fixPosition</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.$anonfun.t" title="Macros.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>

            val <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.result">result</a> = <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: Macros.this.global.Position)(tree: Macros.this.global.Tree)Macros.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.enclosingMacroPosition" title="=&gt; scala.reflect.internal.util.Position">enclosingMacroPosition</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.expanded" title="Macros.this.global.Tree">expanded</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Macros.Success.readResolve" title="(expanded: Macros.this.global.Tree)Macros.this.Success">Success</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree.result" title="Macros.this.global.Tree">result</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span title="Any">expanded</span> match <span class="delimiter">{</span>
            case <span title="Macros.this.global.Expr[_]">expanded</span>: <a href="../../../reflect/api/Exprs.scala.html#scala.reflect.api;Exprs;Expr" title="Macros.this.global.Expr[_]">Expr</a><span class="delimiter">[</span>_<span class="delimiter">]</span> if <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTermMacro" title="=&gt; Boolean">isTermMacro</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree" title="(expanded: Macros.this.global.Tree)Macros.this.Success">validateResultingTree</a><span class="delimiter">(</span><span title="Macros.this.global.Expr[_]">expanded</span>.<a href="../../../reflect/api/Exprs.scala.html#scala.reflect.api;Exprs;Expr.tree" title="=&gt; Macros.this.global.Tree">tree</a><span class="delimiter">)</span>
            case <span title="Macros.this.global.Tree">expanded</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> if <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTermMacro" title="=&gt; Boolean">isTermMacro</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.validateResultingTree" title="(expanded: Macros.this.global.Tree)Macros.this.Success">validateResultingTree</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">expanded</span><span class="delimiter">)</span>
            case _ =&gt; <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroExpansionHasInvalidTypeError" title="(expandee: Macros.this.global.Tree, expanded: Any)Nothing">MacroExpansionHasInvalidTypeError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <span title="Any">expanded</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> catch <span class="delimiter">{</span>
          case <span title="Throwable">ex</span>: <span title="Throwable">Throwable</span> =&gt;
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.openMacros" title="=&gt; List[scala.reflect.macros.contexts.Context{val universe: Macros.this.global.type}]">openMacros</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.popMacroContext" title="()Unit">popMacroContext</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// weirdly we started popping on an empty stack when refactoring fatalWarnings logic</span>
            val <a title="Throwable" id="scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.realex">realex</a> = <a href="../../../reflect/runtime/ReflectionUtils.scala.html#scala.reflect.runtime.ReflectionUtils" title="scala.reflect.runtime.ReflectionUtils.type">ReflectionUtils</a>.<a href="../../../reflect/runtime/ReflectionUtils.scala.html#scala.reflect.runtime.ReflectionUtils.unwrapThrowable" title="(x: Throwable)Throwable">unwrapThrowable</a><span class="delimiter">(</span><span title="Throwable">ex</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.realex" title="Throwable">realex</a> match <span class="delimiter">{</span>
              case <span title="scala.reflect.macros.runtime.AbortMacroException">ex</span>: <a href="../../../reflect/macros/runtime/AbortMacroException.scala.html#scala.reflect.macros.runtime;AbortMacroException" title="scala.reflect.macros.runtime.AbortMacroException">AbortMacroException</a> =&gt; <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroGeneratedAbort" title="(expandee: Macros.this.global.Tree, ex: scala.reflect.macros.runtime.AbortMacroException)Nothing">MacroGeneratedAbort</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <span title="scala.reflect.macros.runtime.AbortMacroException">ex</span><span class="delimiter">)</span>
              case <span title="scala.util.control.ControlThrowable">ex</span>: <a href="../../../util/control/ControlThrowable.scala.html#scala.util.control;ControlThrowable" title="scala.util.control.ControlThrowable">ControlThrowable</a> =&gt; throw <span title="scala.util.control.ControlThrowable">ex</span>
              case <span title="Macros.this.global.TypeError">ex</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError" title="Macros.this.global.TypeError">TypeError</a> =&gt; <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroGeneratedTypeError" title="(expandee: Macros.this.global.Tree, err: Macros.this.global.TypeError)Nothing">MacroGeneratedTypeError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <span title="Macros.this.global.TypeError">ex</span><span class="delimiter">)</span>
              case _ =&gt; <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroGeneratedException" title="(expandee: Macros.this.global.Tree, ex: Throwable)Nothing">MacroGeneratedException</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.realex" title="Throwable">realex</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span> finally <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithRuntime.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.removeAttachment" title="[T](implicit evidence$2: scala.reflect.ClassTag[T])expandee.type">removeAttachment</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(implicit evidence$2: scala.reflect.ClassTag[Macros.this.MacroRuntimeAttachment])expandee.type" class="delimiter">[</a><a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment" title="Macros.this.MacroRuntimeAttachment">MacroRuntimeAttachment</a><span class="delimiter">]</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Expands a macro when a runtime (i.e. the macro implementation) cannot be loaded
   *  Meant for internal use within the macro infrastructure, don't use it elsewhere.
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.MacroStatus" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime">macroExpandWithoutRuntime</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.typechecker;Macros;MacroStatus" title="Macros.this.MacroStatus">MacroStatus</a> = <span class="delimiter">{</span>
    import <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.typer" title="Macros.this.Typer">typer</a>.<a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen" title="typer.TyperErrorGen.type">TyperErrorGen</a>._
    val fallbackSym = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.expandee" title="Macros.this.global.Tree">expandee</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.nextOverriddenSymbol" title="=&gt; Macros.this.global.Symbol">nextOverriddenSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.orElse" title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.fallbackSym">orElse</a> <a href="ContextErrors.scala.html#scala.tools.nsc.typechecker;ContextErrors;TyperContextErrors.TyperErrorGen.MacroImplementationNotFoundError" title="(expandee: Macros.this.global.Tree)Nothing">MacroImplementationNotFoundError</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
    <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogLite" title="(msg: =&gt; Any)Unit">macroLogLite</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;falling back to: &quot;)">falling back to: $</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.fallbackSym" title="Macros.this.global.Symbol">fallbackSym</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

    def <a title="(tree: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree">mkFallbackTree</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.tree" title="Macros.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case Select<span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.qual">qual</a>, <a title="Macros.this.global.Name" id="scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.name">name</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Select" title="(qualifier: Macros.this.global.Tree, name: Macros.this.global.Name)Macros.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.qual" title="Macros.this.global.Tree">qual</a>, <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.name" title="Macros.this.global.Name">name</a><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Macros.this.global.Select">setPos</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setSymbol" title="(sym: Macros.this.global.Symbol)Macros.this.global.Select">setSymbol</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.fallbackSym" title="Macros.this.global.Symbol">fallbackSym</a>
        case Apply<span class="delimiter">(</span><span title="Macros.this.global.Tree">fn</span>, <span title="List[Macros.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: Macros.this.global.Tree, args: List[Macros.this.global.Tree])Macros.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">mkFallbackTree</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">fn</span><span class="delimiter">)</span>, <span title="List[Macros.this.global.Tree]">args</span><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Macros.this.global.Apply">setPos</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a>
        case TypeApply<span class="delimiter">(</span><span title="Macros.this.global.Tree">fn</span>, <span title="List[Macros.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeApply" title="(fun: Macros.this.global.Tree, args: List[Macros.this.global.Tree])Macros.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">mkFallbackTree</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">fn</span><span class="delimiter">)</span>, <span title="List[Macros.this.global.Tree]">args</span><span class="delimiter">)</span> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)Macros.this.global.TypeApply">setPos</a> <a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree.tree" title="Macros.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Macros.this.global.Position">pos</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#scala.tools.nsc.typechecker;Macros.Fallback.readResolve" title="(fallback: Macros.this.global.Tree)Macros.this.Fallback">Fallback</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.mkFallbackTree" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">mkFallbackTree</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandWithoutRuntime.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Without any restrictions on macro expansion, macro applications will expand at will,
   *  and when type inference is involved, expansions will end up using yet uninferred type params.
   *
   *  For some macros this might be ok (thanks to TreeTypeSubstituter that replaces
   *  the occurrences of undetparams with their inferred values), but in general case this won't work.
   *  E.g. for reification simple substitution is not enough - we actually need to re-reify inferred types.
   *
   *  Luckily, there exists a very simple way to fix the problem: delay macro expansion until everything is inferred.
   *  Here are the exact rules. Macro application gets delayed if any of its subtrees contain:
   *    1) type vars (tpe.isInstanceOf[TypeVar]) // [Eugene] this check is disabled right now, because TypeVars seem to be created from undetparams anyways
   *    2) undetparams (sym.isTypeParameter &amp;&amp; !sym.isSkolem)
   */</span>
  var <a title="Boolean" id="scala.tools.nsc.typechecker;Macros.hasPendingMacroExpansions_=">hasPendingMacroExpansions</a> = false
  private val <a title="scala.reflect.internal.util.WeakHashSet[Macros.this.global.Tree]" id="scala.tools.nsc.typechecker;Macros.forced">forced</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="Macros.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newWeakSet" title="[K &lt;: AnyRef]()scala.reflect.internal.util.WeakHashSet[K]">newWeakSet</a><span title="()scala.reflect.internal.util.WeakHashSet[Macros.this.global.Tree]" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">]</span>
  private val <a title="scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]" id="scala.tools.nsc.typechecker;Macros.delayed">delayed</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="Macros.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newWeakMap" title="[K, V]()scala.collection.mutable.WeakHashMap[K,V]">newWeakMap</a><span title="()scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a>, scala.collection.mutable.<a href="../../../collection/mutable/Set.scala.html#scala.collection.mutable;Set" title="scala.collection.mutable.Set[Int]">Set</a><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  private def <a title="(expandee: Macros.this.global.Tree)Boolean" id="scala.tools.nsc.typechecker;Macros.isDelayed">isDelayed</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.isDelayed.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: Macros.this.global.Tree)Boolean">contains</a> <a href="#scala.tools.nsc.typechecker;Macros.isDelayed.expandee" title="Macros.this.global.Tree">expandee</a>
  private def <a title="(expandee: Macros.this.global.Tree)scala.collection.mutable.Set[Int]" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams">calculateUndetparams</a><span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: scala.collection.mutable.<a href="../../../collection/mutable/Set.scala.html#scala.collection.mutable;Set" title="scala.collection.mutable.Set[Int]">Set</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> =
    if <span class="delimiter">(</span><a href="../../../reflect/internal/util/WeakHashSet.scala.html#scala.reflect.internal.util;WeakHashSet.apply" title="(x: Macros.this.global.Tree)Boolean">forced</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span><span class="delimiter">)</span> scala.collection.mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.Set[A]">Set</a><span title="(elems: Int*)scala.collection.mutable.Set[Int]" class="delimiter">[</span><a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    else <a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.getOrElse" title="(key: Macros.this.global.Tree, default: =&gt; scala.collection.mutable.Set[Int])scala.collection.mutable.Set[Int]">getOrElse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.expandee" title="Macros.this.global.Tree">expandee</a>, <span class="delimiter">{</span>
      val <a title="scala.collection.mutable.Set[Macros.this.global.Symbol]" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.calculated">calculated</a> = scala.collection.mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.Set[A]">Set</a><span title="(elems: Macros.this.global.Symbol*)scala.collection.mutable.Set[Macros.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.expandee" title="Macros.this.global.Tree">expandee</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.foreach" title="(f: Macros.this.global.Tree =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.sub">sub</a> =&gt; <span class="delimiter">{</span>
        def <a title="(sym: Macros.this.global.Symbol)Any" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse">traverse</a><span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse.sym">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Macros.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse.sym" title="Macros.this.global.Symbol">sym</a> <span title="(x$1: Any)Boolean">!=</span> null <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.undetparams" title="=&gt; scala.collection.mutable.HashSet[Int]">undetparams</a> <a href="../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.contains" title="(elem: Int)Boolean">contains</a> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse.sym" title="Macros.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.id" title="=&gt; Int">id</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.calculated" title="scala.collection.mutable.Set[Macros.this.global.Symbol]">calculated</a> <a href="../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.+=(70ec98e56e)" title="(elem: Macros.this.global.Symbol)calculated.type">+=</a> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse.sym" title="Macros.this.global.Symbol">sym</a>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.sub" title="Macros.this.global.Tree">sub</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse" title="(sym: Macros.this.global.Symbol)Any">traverse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.sub" title="Macros.this.global.Tree">sub</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Macros.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.sub" title="Macros.this.global.Tree">sub</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.sub" title="Macros.this.global.Tree">sub</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Macros.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.foreach" title="(f: Macros.this.global.Type =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.$anonfun.sub">sub</a> =&gt; <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.traverse" title="(sym: Macros.this.global.Symbol)Any">traverse</a><span title="Unit" class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.$anonfun.sub" title="Macros.this.global.Type">sub</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; Macros.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;calculateUndetparams: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.calculated" title="scala.collection.mutable.Set[Macros.this.global.Symbol]">calculated</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.calculated" title="scala.collection.mutable.Set[Macros.this.global.Symbol]">calculated</a> <a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="(f: Macros.this.global.Symbol =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Set[Macros.this.global.Symbol],Int,scala.collection.mutable.Set[Int]])scala.collection.mutable.Set[Int]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams.$anonfun.x$19" title="Macros.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.id" title="=&gt; Int">id</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  private val <a title="scala.collection.mutable.HashSet[Int]" id="scala.tools.nsc.typechecker;Macros.undetparams">undetparams</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="Macros.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newSet" title="[K]()scala.collection.mutable.HashSet[K]">newSet</a><span title="()scala.collection.mutable.HashSet[Int]" class="delimiter">[</span><a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  def <a title="(newUndets: List[Macros.this.global.Symbol])Unit" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded">notifyUndetparamsAdded</a><span class="delimiter">(</span><a title="List[Macros.this.global.Symbol]" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.newUndets">newUndets</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Macros.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <a href="#scala.tools.nsc.typechecker;Macros.undetparams" title="=&gt; scala.collection.mutable.HashSet[Int]">undetparams</a> <a href="../../../collection/generic/Growable.scala.html#scala.collection.generic;Growable.++=" title="(xs: scala.collection.TraversableOnce[Int])Macros.this.undetparams.type">++=</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.newUndets" title="List[Macros.this.global.Symbol]">newUndets</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.Symbol =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Symbol],Int,scala.collection.TraversableOnce[Int]])scala.collection.TraversableOnce[Int]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.$anonfun.x$20" title="Macros.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.id" title="=&gt; Int">id</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroDebugVerbose" title="=&gt; Boolean">macroDebugVerbose</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.newUndets" title="List[Macros.this.global.Symbol]">newUndets</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Macros.this.global.Symbol =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.$anonfun.sym">sym</a> =&gt; <a href="../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;undetParam added: %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsAdded.$anonfun.sym" title="Macros.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  def <a title="(undetNoMore: List[Macros.this.global.Symbol], inferreds: List[Macros.this.global.Type])Unit" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred">notifyUndetparamsInferred</a><span class="delimiter">(</span><a title="List[Macros.this.global.Symbol]" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.undetNoMore">undetNoMore</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Macros.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="List[Macros.this.global.Type]" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.inferreds">inferreds</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Macros.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <a href="#scala.tools.nsc.typechecker;Macros.undetparams" title="=&gt; scala.collection.mutable.HashSet[Int]">undetparams</a> <a href="../../../collection/generic/Shrinkable.scala.html#scala.collection.generic;Shrinkable.--=" title="(xs: scala.collection.TraversableOnce[Int])Macros.this.undetparams.type">--=</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.undetNoMore" title="List[Macros.this.global.Symbol]">undetNoMore</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.Symbol =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Symbol],Int,scala.collection.TraversableOnce[Int]])scala.collection.TraversableOnce[Int]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.x$21" title="Macros.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.id" title="=&gt; Int">id</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroDebugVerbose" title="=&gt; Boolean">macroDebugVerbose</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.undetNoMore" title="List[Macros.this.global.Symbol]">undetNoMore</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Macros.this.global.Type])(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Symbol],(Macros.this.global.Symbol, Macros.this.global.Type),List[(Macros.this.global.Symbol, Macros.this.global.Type)]])List[(Macros.this.global.Symbol, Macros.this.global.Type)]">zip</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.inferreds" title="List[Macros.this.global.Type]">inferreds</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ((Macros.this.global.Symbol, Macros.this.global.Type)) =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.x0$3" title="Unit" class="delimiter">{</a> case <span class="delimiter">(</span><a title="Macros.this.global.Symbol" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.sym">sym</a>, <a title="Macros.this.global.Type" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.tpe">tpe</a><span class="delimiter">)</span> =&gt; <a href="../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;undetParam inferred: %s as %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.sym" title="Macros.this.global.Symbol">sym</a>, <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.tpe" title="Macros.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[(Macros.this.global.Tree, scala.collection.mutable.Set[Int])]">toList</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ((Macros.this.global.Tree, scala.collection.mutable.Set[Int])) =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.x0$4" title="Unit" class="delimiter">{</a>
        case <span class="delimiter">(</span><a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.expandee">expandee</a>, <a title="scala.collection.mutable.Set[Int]" id="scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.undetparams">undetparams</a><span class="delimiter">)</span> if <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.undetparams" title="scala.collection.mutable.Set[Int]">undetparams</a>.<a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a> =&gt;
          <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.undetparams" title="scala.collection.mutable.Set[Int]">undetparams</a> <a href="../../../collection/generic/Shrinkable.scala.html#scala.collection.generic;Shrinkable.--=" title="(xs: scala.collection.TraversableOnce[Int])undetparams.type">--=</a> <a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.undetNoMore" title="List[Macros.this.global.Symbol]">undetNoMore</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Macros.this.global.Symbol =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Macros.this.global.Symbol],Int,scala.collection.TraversableOnce[Int]])scala.collection.TraversableOnce[Int]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.$anonfun.x$22" title="Macros.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.id" title="=&gt; Int">id</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.undetparams" title="scala.collection.mutable.Set[Int]">undetparams</a>.<a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.typechecker;Macros.hasPendingMacroExpansions_=" title="(x$1: Boolean)Unit">hasPendingMacroExpansions</a> = true
            <a href="../../../reflect/macros/util/Traces.scala.html#scala.reflect.macros.util;Traces.macroLogVerbose" title="(msg: =&gt; Any)Unit">macroLogVerbose</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;macro expansion is pending: &quot;)">macro expansion is pending: $</span><a href="#scala.tools.nsc.typechecker;Macros.notifyUndetparamsInferred.$anonfun.expandee" title="Macros.this.global.Tree">expandee</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        case _ =&gt;
          <span class="comment">// do nothing</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Performs macro expansion on all subtrees of a given tree.
   *  Innermost macros are expanded first, outermost macros are expanded last.
   *  See the documentation for `macroExpand` for more information.
   */</span>
  def <a title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandAll">macroExpandAll</a><span class="delimiter">(</span><a title="Macros.this.Typer" id="scala.tools.nsc.typechecker;Macros.macroExpandAll.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Macros.this.Typer">Typer</a>, <a title="Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandAll.expandee">expandee</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a> =
    new <a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="&lt;$anon: Macros.this.global.Transformer&gt; extends Macros.this.global.Transformer" id="scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon">Transformer</a> <span class="delimiter">{</span>
      override def <a title="(tree: Macros.this.global.Tree)Macros.this.global.Tree" id="scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform">transform</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">tree</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Macros.this.global.Tree">Tree</a><span class="delimiter">)</span> = super.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">transform</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">tree</span> match <span class="delimiter">{</span>
        <span class="comment">// todo. expansion should work from the inside out</span>
        case <span title="Macros.this.global.Tree">tree</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a> <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: Macros.this.global.Tree)Boolean">contains</a> <span title="Macros.this.global.Tree">tree</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Macros.calculateUndetparams" title="(expandee: Macros.this.global.Tree)scala.collection.mutable.Set[Int]">calculateUndetparams</a><span class="delimiter">(</span><span title="Macros.this.global.Tree">tree</span><span class="delimiter">)</span>.<a href="../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span title="Macros.this.global.Tree">tree</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.isErroneous" title="=&gt; Boolean">isErroneous</a> =&gt;
          val <a title="Macros.this.Context" id="scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform.context">context</a> = <span title="Macros.this.global.Tree">tree</span>.<a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.attachments" title="=&gt; scala.reflect.macros.Attachments{type Pos = Macros.this.global.Position}">attachments</a>.<a href="../../../reflect/macros/Attachments.scala.html#scala.reflect.macros;Attachments.get" title="[T](implicit evidence$2: scala.reflect.ClassTag[T])Option[T]">get</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(implicit evidence$2: scala.reflect.ClassTag[Macros.this.MacroRuntimeAttachment])Option[Macros.this.MacroRuntimeAttachment]" class="delimiter">[</a><a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment" title="Macros.this.MacroRuntimeAttachment">MacroRuntimeAttachment</a><span class="delimiter">]</span>.<a href="../../../Option.scala.html#scala;Option.get" title="=&gt; Macros.this.MacroRuntimeAttachment">get</a>.<a href="StdAttachments.scala.html#scala.tools.nsc.typechecker;StdAttachments;MacroRuntimeAttachment.typerContext" title="=&gt; Macros.this.Context">typerContext</a>
          <a href="#scala.tools.nsc.typechecker;Macros.delayed" title="=&gt; scala.collection.mutable.WeakHashMap[Macros.this.global.Tree,scala.collection.mutable.Set[Int]]">delayed</a> <a href="../../../collection/convert/Wrappers.scala.html#scala.collection.convert;Wrappers;JMapWrapperLike.-=(8de46ad5ef)" title="(key: Macros.this.global.Tree)Macros.this.delayed.type">-=</a> <span title="Macros.this.global.Tree">tree</span>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform.context" title="Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.implicitsEnabled_=" title="(value: Boolean)Unit">implicitsEnabled</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.implicitsEnabled" title="=&gt; Boolean">implicitsEnabled</a>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform.context" title="Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.enrichmentEnabled_=" title="(value: Boolean)Unit">enrichmentEnabled</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.enrichmentEnabled" title="=&gt; Boolean">enrichmentEnabled</a>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform.context" title="Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.macrosEnabled_=" title="(value: Boolean)Unit">macrosEnabled</a> = <a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll.typer" title="Macros.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Macros.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.macrosEnabled" title="=&gt; Boolean">macrosEnabled</a>
          <a href="#scala.tools.nsc.typechecker;Macros.macroExpand" title="(typer: Macros.this.Typer, expandee: Macros.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Macros.this.global.Type)Macros.this.global.Tree">macroExpand</a><span class="delimiter">(</span><a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers.newTyper" title="(context: Macros.this.Context)Macros.this.Typer">newTyper</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform.context" title="Macros.this.Context">context</a><span class="delimiter">)</span>, <span title="Macros.this.global.Tree">tree</span>, <a href="../package.scala.html#scala.tools.nsc.package.EXPRmode" title="=&gt; scala.reflect.internal.Mode">EXPRmode</a>, <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.WildcardType" title="Macros.this.global.WildcardType.type">WildcardType</a><span class="delimiter">)</span>
        case _ =&gt;
          <span title="Macros.this.global.Tree">tree</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll;$anon.transform" title="(tree: Macros.this.global.Tree)Macros.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Macros.macroExpandAll.expandee" title="Macros.this.global.Tree">expandee</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

object <a title="scala.tools.nsc.typechecker.MacrosStats.type" id="scala.tools.nsc.typechecker.MacrosStats">MacrosStats</a> <a href="#scala.tools.nsc.typechecker.MacrosStats" title="scala.tools.nsc.typechecker.MacrosStats.type" class="delimiter">{</a>
  import scala.reflect.internal.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal.TypesStats" title="scala.reflect.internal.TypesStats.type">TypesStats</a>.typerNanos
  val <a title="scala.reflect.internal.util.Statistics.Counter" id="scala.tools.nsc.typechecker.MacrosStats.macroExpandCount">macroExpandCount</a>    = <a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newCounter" title="(prefix: String, phases: String*)scala.reflect.internal.util.Statistics.Counter">newCounter</a> <span class="delimiter">(</span><span title="String(&quot;#macro expansions&quot;)" class="string">&quot;#macro expansions&quot;</span>, <span title="String(&quot;typer&quot;)" class="string">&quot;typer&quot;</span><span class="delimiter">)</span>
  val <a title="scala.reflect.internal.util.Statistics.Timer" id="scala.tools.nsc.typechecker.MacrosStats.macroExpandNanos">macroExpandNanos</a>    = <a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.newSubTimer" title="(prefix: String, timer: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.Timer">newSubTimer</a><span class="delimiter">(</span><span title="String(&quot;time spent in macroExpand&quot;)" class="string">&quot;time spent in macroExpand&quot;</span>, <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal.TypesStats.typerNanos" title="=&gt; scala.reflect.internal.util.Statistics.Timer">typerNanos</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

class <a href="#scala.tools.nsc.typechecker;Fingerprint.value" title="class Fingerprint extends AnyVal" id="scala.tools.nsc.typechecker;Fingerprint.equals">Fingerprint</a> private<span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span><span class="delimiter">(</span>val <a title="Int" id="scala.tools.nsc.typechecker;Fingerprint.value">value</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> extends <a href="../../../AnyVal.scala.html#scala;AnyVal" title="AnyVal">AnyVal</a> <span class="delimiter">{</span>
  def <a title="=&gt; Int" id="scala.tools.nsc.typechecker;Fingerprint.paramPos">paramPos</a> = <span class="delimiter">{</span> <a href="../../../Predef.scala.html#scala.Predef.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Fingerprint.isTag" title="=&gt; Boolean">isTag</a>, this<span class="delimiter">)</span>; <a href="#scala.tools.nsc.typechecker;Fingerprint.value" title="=&gt; Int">value</a> <span class="delimiter">}</span>
  def <a title="=&gt; Boolean" id="scala.tools.nsc.typechecker;Fingerprint.isTag">isTag</a> = <a href="#scala.tools.nsc.typechecker;Fingerprint.value" title="=&gt; Int">value</a> <a href="../../../Int.scala.html#scala;Int.>=(5f58a84eb3)" title="(x: Int)Boolean">&gt;=</a> <span title="Int(0)" class="int">0</span>
  override def <a title="()String" id="scala.tools.nsc.typechecker;Fingerprint.toString">toString</a> = this match <span class="delimiter">{</span>
    case <a href="#scala.tools.nsc.typechecker.Fingerprint.Other" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">Other</a> =&gt; <span title="String(&quot;Other&quot;)" class="string">&quot;Other&quot;</span>
    case <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedTyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedTyped</a> =&gt; <span title="String(&quot;Expr&quot;)" class="string">&quot;Expr&quot;</span>
    case <a href="#scala.tools.nsc.typechecker.Fingerprint.LiftedUntyped" title="=&gt; scala.tools.nsc.typechecker.Fingerprint">LiftedUntyped</a> =&gt; <span title="String(&quot;Tree&quot;)" class="string">&quot;Tree&quot;</span>
    case _ =&gt; <a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Tag(&quot;)">Tag($</span><a href="#scala.tools.nsc.typechecker;Fingerprint.value" title="=&gt; Int">value</a><span title="String(&quot;)&quot;)" class="string">)&quot;</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="scala.tools.nsc.typechecker.Fingerprint.type" id="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a> <a href="#scala.tools.nsc.typechecker.Fingerprint" title="scala.tools.nsc.typechecker.Fingerprint.type" class="delimiter">{</a>
  def <a title="(value: Int)scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker.Fingerprint.apply">apply</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.typechecker.Fingerprint.apply.value">value</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker.Fingerprint.apply.value" title="Int">value</a><span class="delimiter">)</span>
  def <a title="(tparamPos: Int)scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker.Fingerprint.Tagged">Tagged</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.typechecker.Fingerprint.Tagged.tparamPos">tparamPos</a>: <a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker.Fingerprint.Tagged.tparamPos" title="Int">tparamPos</a><span class="delimiter">)</span>
  val <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker.Fingerprint.Other">Other</a> = new <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span>-<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
  val <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker.Fingerprint.LiftedTyped">LiftedTyped</a> = new <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span>-<span title="Int(-2)" class="int">2</span><span class="delimiter">)</span>
  val <a title="scala.tools.nsc.typechecker.Fingerprint" id="scala.tools.nsc.typechecker.Fingerprint.LiftedUntyped">LiftedUntyped</a> = new <a href="#scala.tools.nsc.typechecker;Fingerprint.equals" title="scala.tools.nsc.typechecker.Fingerprint">Fingerprint</a><span class="delimiter">(</span>-<span title="Int(-3)" class="int">3</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
