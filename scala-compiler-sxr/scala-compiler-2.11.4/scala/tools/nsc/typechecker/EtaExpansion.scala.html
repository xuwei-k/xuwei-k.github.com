<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/typechecker/EtaExpansion.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

package scala.tools.nsc
package typechecker

import scala.collection.mutable.ListBuffer
import symtab.<a href="../symtab/package.scala.html#scala.tools.nsc.symtab.package.Flags" title="=&gt; reflect.internal.Flags.type">Flags</a>._

<span class="comment">/** This trait ...
 *
 *  @author  Martin Odersky
 *  @version 1.0
 */</span>
trait <a title="trait EtaExpansion extends AnyRef" id="scala.tools.nsc.typechecker;EtaExpansion">EtaExpansion</a> <a href="../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a> self: Analyzer =&gt;

  import <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>._

  object <a title="EtaExpansion.this.etaExpansion.type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion">etaExpansion</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion" title="EtaExpansion.this.etaExpansion.type" class="delimiter">{</a>
    private def <a title="(vparam: EtaExpansion.this.global.ValDef, arg: EtaExpansion.this.global.Tree)Boolean" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch">isMatch</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.ValDef" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.vparam">vparam</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="EtaExpansion.this.global.ValDef">ValDef</a>, <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.arg">arg</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.arg" title="EtaExpansion.this.global.Tree">arg</a> match <span class="delimiter">{</span>
      case Ident<span class="delimiter">(</span><a title="EtaExpansion.this.global.Name" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.name">name</a><span class="delimiter">)</span>  =&gt; <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.vparam" title="EtaExpansion.this.global.ValDef">vparam</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.name" title="=&gt; EtaExpansion.this.global.TermName">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch.name" title="EtaExpansion.this.global.Name">name</a>
      case _            =&gt; false
    <span class="delimiter">}</span>

    def <a title="(tree: EtaExpansion.this.global.Tree)Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply">unapply</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#scala;Option" title="Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>List<span class="delimiter">[</span>ValDef<span class="delimiter">]</span>, Tree, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.tree" title="EtaExpansion.this.global.Tree">tree</a> match <span class="delimiter">{</span>
      case Function<span class="delimiter">(</span><a title="List[EtaExpansion.this.global.ValDef]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.vparams">vparams</a>, Apply<span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.fn">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.args">args</a><span class="delimiter">)</span><span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.vparams" title="List[EtaExpansion.this.global.ValDef]">vparams</a> <a href="../../../collection/LinearSeqLike.scala.html#scala.collection;LinearSeqLike.corresponds" title="(that: scala.collection.GenSeq[EtaExpansion.this.global.Tree])(p: (EtaExpansion.this.global.ValDef, EtaExpansion.this.global.Tree) =&gt; Boolean)Boolean">corresponds</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.args" title="List[EtaExpansion.this.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.isMatch" title="(vparam: EtaExpansion.this.global.ValDef, arg: EtaExpansion.this.global.Tree)Boolean">isMatch</a><span class="delimiter">)</span> =&gt;
        <a href="../../../Option.scala.html#scala;Some" title="(x: (List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree]))Some[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]">Some</a><span class="delimiter">(</span><a href="../../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[EtaExpansion.this.global.ValDef], _2: EtaExpansion.this.global.Tree, _3: List[EtaExpansion.this.global.Tree])(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.vparams" title="List[EtaExpansion.this.global.ValDef]">vparams</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.fn" title="EtaExpansion.this.global.Tree">fn</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpansion.unapply.args" title="List[EtaExpansion.this.global.Tree]">args</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case _ =&gt;
        <a href="../../../Option.scala.html#scala.None" title="None.type">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** &lt;p&gt;
   *    Expand partial function applications of type `type`.
   *  &lt;/p&gt;&lt;pre&gt;
   *  p.f(es_1)...(es_n)
   *     ==&gt;  {
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$f   = p.f   // if p is not stable
   *            ...
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$e_i = e_i    // if e_i is not stable
   *            ...
   *            (ps_1 =&gt; ... =&gt; ps_m =&gt; eta$f([es_1])...([es_m])(ps_1)...(ps_m))
   *          }&lt;/pre&gt;
   *  &lt;p&gt;
   *    tree is already attributed
   *  &lt;/p&gt;
   */</span>
  def <a title="(unit: EtaExpansion.this.global.CompilationUnit, tree: EtaExpansion.this.global.Tree, typer: EtaExpansion.this.Typer)EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand">etaExpand</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.CompilationUnit" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.unit">unit</a> : <a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="EtaExpansion.this.global.CompilationUnit">CompilationUnit</a>, <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a>, <a title="EtaExpansion.this.Typer" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.typer">typer</a>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="EtaExpansion.this.Typer">Typer</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    val <a title="EtaExpansion.this.global.Type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tpe">tpe</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; EtaExpansion.this.global.Type">tpe</a>
    var <a title="Int" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.cnt">cnt</a> = <span title="Int(0)" class="int">0</span> <span class="comment">// for NoPosition</span>
    def <a title="()EtaExpansion.this.global.TermName" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.freshName">freshName</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.cnt" title="Int">cnt</a> <a href="../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.unit" title="EtaExpansion.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.freshTermName" title="(prefix: String)EtaExpansion.this.global.TermName">freshTermName</a><span class="delimiter">(</span><span title="String(&quot;eta$&quot;)" class="string">&quot;eta$&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.cnt" title="Int">cnt</a> <a href="../../../Int.scala.html#scala;Int.-(1409840560)" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;$&quot;)" class="string">&quot;$&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    val <a title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.defs">defs</a> = new <a href="../../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">ListBuffer</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>

    <span class="comment">/* Append to `defs` value definitions for all non-stable
     * subexpressions of the function application `tree`.
     */</span>
    def <a title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix">liftoutPrefix</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      def <a title="(tree: EtaExpansion.this.global.Tree, byName: Boolean)EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout">liftout</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.byName">byName</a>: <a href="../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a> =
        if <span class="delimiter">(</span><a href="../ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="EtaExpansion.this.global.treeInfo.type">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.isExprSafeToInline" title="(tree: EtaExpansion.this.global.treeInfo.global.Tree)Boolean">isExprSafeToInline</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a>
        else <span class="delimiter">{</span>
          val <a title="EtaExpansion.this.global.Name" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.vname">vname</a>: <a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name" title="EtaExpansion.this.global.Name">Name</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.freshName" title="()EtaExpansion.this.global.TermName">freshName</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="comment">// Problem with ticket #2351 here</span>
          <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.defs" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.+=(f93df146a4)" title="(x: EtaExpansion.this.global.Tree)defs.type">+=</a> <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.ValDef)EtaExpansion.this.global.ValDef">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; EtaExpansion.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.rhs">rhs</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.byName" title="Boolean">byName</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.rhs.res">res</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.typer" title="EtaExpansion.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="(vparams: List[EtaExpansion.this.global.ValDef], body: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Function">Function</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
              new <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ChangeOwnerTraverser" title="EtaExpansion.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.typer" title="EtaExpansion.this.Typer">typer</a>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; EtaExpansion.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.owner" title="=&gt; EtaExpansion.this.global.Symbol">owner</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.rhs.res" title="EtaExpansion.this.global.Tree">res</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; EtaExpansion.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ChangeOwnerTraverser.traverse" title="(tree: EtaExpansion.this.global.Tree)Unit">traverse</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a> <span class="comment">// SI-6274</span>
              <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.rhs.res" title="EtaExpansion.this.global.Tree">res</a>
            <span class="delimiter">}</span> else <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a>
            <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="(mods: EtaExpansion.this.global.Modifiers, name: EtaExpansion.this.global.TermName, tpt: EtaExpansion.this.global.Tree, rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.Modifiers(0bd5630316)" title="(flags: EtaExpansion.this.global.FlagSet)EtaExpansion.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span><span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.vname" title="EtaExpansion.this.global.Name">vname</a>.<a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.toTermName" title="=&gt; EtaExpansion.this.global.TermName">toTermName</a>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeTree" title="()EtaExpansion.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.rhs" title="EtaExpansion.this.global.Tree">rhs</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.focus" title="=&gt; scala.reflect.internal.util.Position">focus</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.byName" title="Boolean">byName</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: EtaExpansion.this.global.Name)EtaExpansion.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.vname" title="EtaExpansion.this.global.Name">vname</a><span class="delimiter">)</span>, List<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: EtaExpansion.this.global.Name)EtaExpansion.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout.vname" title="EtaExpansion.this.global.Name">vname</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      val <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1">tree1</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        <span class="comment">// a partial application using named arguments has the following form:</span>
        <span class="comment">// { val qual$1 = qual</span>
        <span class="comment">//   val x$1 = arg1</span>
        <span class="comment">//   [...]</span>
        <span class="comment">//   val x$n = argn</span>
        <span class="comment">//   qual$1.fun(x$1, ..)..(.., x$n) }</span>
        <span class="comment">// Eta-expansion has to be performed on `fun`</span>
        case Block<span class="delimiter">(</span><a title="List[EtaExpansion.this.global.Tree]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.stats">stats</a>, <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.fun">fun</a><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.defs" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.++=" title="(xs: scala.collection.TraversableOnce[EtaExpansion.this.global.Tree])defs.type">++=</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.stats" title="List[EtaExpansion.this.global.Tree]">stats</a>
          <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.fun" title="EtaExpansion.this.global.Tree">fun</a><span class="delimiter">)</span>
        case Apply<span class="delimiter">(</span><span title="EtaExpansion.this.global.Tree">fn</span>, <span title="List[EtaExpansion.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt;
          val <a title="Int =&gt; Option[Boolean]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.byName">byName</a>: Int =&gt; Option<span class="delimiter">[</span>Boolean<span class="delimiter">]</span> = <span title="EtaExpansion.this.global.Tree">fn</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; EtaExpansion.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.params" title="=&gt; List[EtaExpansion.this.global.Symbol]">params</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: EtaExpansion.this.global.Symbol =&gt; Boolean)(implicit bf: scala.collection.generic.CanBuildFrom[List[EtaExpansion.this.global.Symbol],Boolean,List[Boolean]])List[Boolean]">map</a><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Boolean,List[Boolean]]" class="delimiter">(</a><a title="EtaExpansion.this.global.Symbol" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.byName.$anonfun.p">p</a> =&gt; <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="EtaExpansion.this.global.definitions.type">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.isByNameParamType" title="(tp: EtaExpansion.this.global.Type)Boolean">isByNameParamType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.byName.$anonfun.p" title="EtaExpansion.this.global.Symbol">p</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; EtaExpansion.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../PartialFunction.scala.html#scala;PartialFunction.lift" title="=&gt; Int =&gt; Option[Boolean]">lift</a>
          val <a title="List[EtaExpansion.this.global.Tree]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs">newArgs</a> = <a href="../../../reflect/internal/util/Collections.scala.html#scala.reflect.internal.util;Collections.mapWithIndex" title="(xs: List[EtaExpansion.this.global.Tree])(f: (EtaExpansion.this.global.Tree, Int) =&gt; EtaExpansion.this.global.Tree)List[EtaExpansion.this.global.Tree]">mapWithIndex</a><span class="delimiter">(</span><span title="List[EtaExpansion.this.global.Tree]">args</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs.$anonfun.arg">arg</a>, <a title="Int" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs.$anonfun.i">i</a><span class="delimiter">)</span> =&gt;
            <span class="comment">// with repeated params, there might be more or fewer args than params</span>
            <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout" title="(tree: EtaExpansion.this.global.Tree, byName: Boolean)EtaExpansion.this.global.Tree">liftout</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs.$anonfun.arg" title="EtaExpansion.this.global.Tree">arg</a>, <a href="../../../Function1.scala.html#scala;Function1.apply" title="(v1: Int)Option[Boolean]">byName</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs.$anonfun.i" title="Int">i</a><span class="delimiter">)</span>.<a href="../../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; Boolean)Boolean">getOrElse</a><span class="delimiter">(</span>false<span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.treeCopy" title="=&gt; EtaExpansion.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Apply" title="(tree: EtaExpansion.this.global.Tree, fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><span title="EtaExpansion.this.global.Tree">fn</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.newArgs" title="List[EtaExpansion.this.global.Tree]">newArgs</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()EtaExpansion.this.global.Apply">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case TypeApply<span class="delimiter">(</span><span title="EtaExpansion.this.global.Tree">fn</span>, <span title="List[EtaExpansion.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt;
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.treeCopy" title="=&gt; EtaExpansion.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.TypeApply" title="(tree: EtaExpansion.this.global.Tree, fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><span title="EtaExpansion.this.global.Tree">fn</span><span class="delimiter">)</span>, <span title="List[EtaExpansion.this.global.Tree]">args</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()EtaExpansion.this.global.TypeApply">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case Select<span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.qual">qual</a>, <span title="EtaExpansion.this.global.Name">name</span><span class="delimiter">)</span> =&gt;
          val <span title="EtaExpansion.this.global.Symbol#NameType">name</span> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; EtaExpansion.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; EtaExpansion.this.global.Symbol#NameType">name</a> <span class="comment">// account for renamed imports, SI-7233</span>
          <a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.treeCopy" title="=&gt; EtaExpansion.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Select" title="(tree: EtaExpansion.this.global.Tree, qualifier: EtaExpansion.this.global.Tree, selector: EtaExpansion.this.global.Name)EtaExpansion.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.liftout" title="(tree: EtaExpansion.this.global.Tree, byName: Boolean)EtaExpansion.this.global.Tree">liftout</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1.qual" title="EtaExpansion.this.global.Tree">qual</a>, byName = false<span class="delimiter">)</span>, <span title="EtaExpansion.this.global.Symbol#NameType">name</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()EtaExpansion.this.global.Select">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setSymbol" title="(sym: EtaExpansion.this.global.Symbol)EtaExpansion.this.global.Select">setSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; EtaExpansion.this.global.NoSymbol">NoSymbol</a>
        case Ident<span class="delimiter">(</span><span title="EtaExpansion.this.global.Name">name</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1" title="EtaExpansion.this.global.Tree">tree1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1" title="EtaExpansion.this.global.Tree">tree1</a> <a href="../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: EtaExpansion.this.global.Position)tree1.type">setPos</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1" title="EtaExpansion.this.global.Tree">tree1</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.makeTransparent" title="=&gt; scala.reflect.internal.util.Position">makeTransparent</a>
      <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix.tree1" title="EtaExpansion.this.global.Tree">tree1</a>
    <span class="delimiter">}</span>

    <span class="comment">/* Eta-expand lifted tree. */</span>
    def <a title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand">expand</a><span class="delimiter">(</span><a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a>, <a title="EtaExpansion.this.global.Type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="EtaExpansion.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="EtaExpansion.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tpe" title="EtaExpansion.this.global.Type">tpe</a> match <span class="delimiter">{</span>
      case <a title="EtaExpansion.this.global.MethodType" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.mt">mt</a> @ MethodType<span class="delimiter">(</span><a title="List[EtaExpansion.this.global.Symbol]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.paramSyms">paramSyms</a>, <a title="EtaExpansion.this.global.Type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.restpe">restpe</a><span class="delimiter">)</span> if <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.mt" title="EtaExpansion.this.global.MethodType">mt</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType.isImplicit" title="=&gt; Boolean">isImplicit</a> =&gt;
        val <a title="List[(EtaExpansion.this.global.ValDef, Boolean)]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params">params</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[(EtaExpansion.this.global.ValDef, Boolean)]">List</a><span class="delimiter">[</span><span class="delimiter">(</span>ValDef, Boolean<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.paramSyms" title="List[EtaExpansion.this.global.Symbol]">paramSyms</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: EtaExpansion.this.global.Symbol =&gt; (EtaExpansion.this.global.ValDef, Boolean))(implicit bf: scala.collection.generic.CanBuildFrom[List[EtaExpansion.this.global.Symbol],(EtaExpansion.this.global.ValDef, Boolean),List[(EtaExpansion.this.global.ValDef, Boolean)]])List[(EtaExpansion.this.global.ValDef, Boolean)]">map</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(EtaExpansion.this.global.ValDef, Boolean),List[(EtaExpansion.this.global.ValDef, Boolean)]]" class="delimiter">{</a>
          <a title="EtaExpansion.this.global.Symbol" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.sym">sym</a> =&gt;
            val <a title="EtaExpansion.this.global.Type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.origTpe">origTpe</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.sym" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; EtaExpansion.this.global.Type">tpe</a>
            val <a title="Boolean" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.isRepeated">isRepeated</a> = <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="EtaExpansion.this.global.definitions.type">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.isRepeatedParamType" title="(tp: EtaExpansion.this.global.Type)Boolean">isRepeatedParamType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.origTpe" title="EtaExpansion.this.global.Type">origTpe</a><span class="delimiter">)</span>
            <span class="comment">// SI-4176 Don't leak A* in eta-expanded function types. See t4176b.scala</span>
            val <a title="EtaExpansion.this.global.Type" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.droppedStarTpe">droppedStarTpe</a> = if <span class="delimiter">(</span><a href="../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">etaExpandKeepsStar</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.origTpe" title="EtaExpansion.this.global.Type">origTpe</a> else <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps.dropIllegalStarTypes.apply" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.Type">dropIllegalStarTypes</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.origTpe" title="EtaExpansion.this.global.Type">origTpe</a><span class="delimiter">)</span>
            val <a title="EtaExpansion.this.global.ValDef" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.valDef">valDef</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="(mods: EtaExpansion.this.global.Modifiers, name: EtaExpansion.this.global.TermName, tpt: EtaExpansion.this.global.Tree, rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.Modifiers(0bd5630316)" title="(flags: EtaExpansion.this.global.FlagSet)EtaExpansion.this.global.Modifiers">Modifiers</a><span class="delimiter">(</span>SYNTHETIC <span title="Long(2105344L)">|</span> PARAM<span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.sym" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; sym.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.toTermName" title="=&gt; EtaExpansion.this.global.TermName">toTermName</a>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.droppedStarTpe" title="EtaExpansion.this.global.Type">droppedStarTpe</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="EtaExpansion.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
            <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: EtaExpansion.this.global.ValDef, _2: Boolean)(EtaExpansion.this.global.ValDef, Boolean)" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.valDef" title="EtaExpansion.this.global.ValDef">valDef</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params.$anonfun.isRepeated" title="Boolean">isRepeated</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.Function)EtaExpansion.this.global.Function">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; EtaExpansion.this.global.Position">pos</a>.<a href="../../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;InternalPositionImpl.makeTransparent" title="=&gt; scala.reflect.internal.util.Position">makeTransparent</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="List[EtaExpansion.this.global.gen.global.Tree]" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args">args</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params" title="List[(EtaExpansion.this.global.ValDef, Boolean)]">params</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((EtaExpansion.this.global.ValDef, Boolean)) =&gt; EtaExpansion.this.global.gen.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[(EtaExpansion.this.global.ValDef, Boolean)],EtaExpansion.this.global.gen.global.Tree,List[EtaExpansion.this.global.gen.global.Tree]])List[EtaExpansion.this.global.gen.global.Tree]">map</a> <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args.$anonfun.x0$1" title="EtaExpansion.this.global.gen.global.Tree" class="delimiter">{</a>
            case <span class="delimiter">(</span><a title="EtaExpansion.this.global.ValDef" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args.$anonfun.valDef">valDef</a>, <a title="Boolean" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args.$anonfun.isRepeated">isRepeated</a><span class="delimiter">)</span> =&gt; <a href="../Global.scala.html#scala.tools.nsc;Global.gen" title="EtaExpansion.this.global.gen.type">gen</a>.<a href="../ast/TreeGen.scala.html#scala.tools.nsc.ast;TreeGen.paramToArg(5f486da508)" title="(arg: EtaExpansion.this.global.gen.global.Ident, isRepeatedParam: Boolean)EtaExpansion.this.global.gen.global.Tree">paramToArg</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: EtaExpansion.this.global.Name)EtaExpansion.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args.$anonfun.valDef" title="EtaExpansion.this.global.ValDef">valDef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.name" title="=&gt; EtaExpansion.this.global.TermName">name</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args.$anonfun.isRepeated" title="Boolean">isRepeated</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="(vparams: List[EtaExpansion.this.global.ValDef], body: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Function">Function</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.params" title="List[(EtaExpansion.this.global.ValDef, Boolean)]">params</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((EtaExpansion.this.global.ValDef, Boolean)) =&gt; EtaExpansion.this.global.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[(EtaExpansion.this.global.ValDef, Boolean)],EtaExpansion.this.global.ValDef,List[EtaExpansion.this.global.ValDef]])List[EtaExpansion.this.global.ValDef]">map</a><a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,EtaExpansion.this.global.ValDef,List[EtaExpansion.this.global.ValDef]]" class="delimiter">(</a><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.$anonfun.x$1" title="(EtaExpansion.this.global.ValDef, Boolean)">_</a>.<a href="../../../Tuple2.scala.html#scala;Tuple2._1" title="=&gt; EtaExpansion.this.global.ValDef">_1</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand" title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: EtaExpansion.this.global.Tree, args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tree" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.args" title="List[EtaExpansion.this.global.gen.global.Tree]">args</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.restpe" title="EtaExpansion.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      case _ =&gt;
        <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand.tree" title="EtaExpansion.this.global.Tree">tree</a>
    <span class="delimiter">}</span>

    val <a title="EtaExpansion.this.global.Tree" id="scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree1">tree1</a> = <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.liftoutPrefix" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree" title="EtaExpansion.this.global.Tree">tree</a><span class="delimiter">)</span>
    <a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: EtaExpansion.this.global.Position)(tree: EtaExpansion.this.global.Block)EtaExpansion.this.global.Block">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; EtaExpansion.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="(stats: List[EtaExpansion.this.global.Tree], expr: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.defs" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.toList" title="=&gt; List[EtaExpansion.this.global.Tree]">toList</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.expand" title="(tree: EtaExpansion.this.global.Tree, tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tree1" title="EtaExpansion.this.global.Tree">tree1</a>, <a href="#scala.tools.nsc.typechecker;EtaExpansion.etaExpand.tpe" title="EtaExpansion.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
