<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/typechecker/Duplicators.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

package scala.tools.nsc
package typechecker

import scala.tools.nsc.symtab.Flags
import scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>

<span class="comment">/** Duplicate trees and re-type check them, taking care to replace
 *  and create fresh symbols for new local definitions.
 *
 *  @author  Iulian Dragos
 *  @version 1.0
 */</span>
abstract class <a title="class Duplicators extends AnyRef with scala.tools.nsc.typechecker.Analyzer" id="scala.tools.nsc.typechecker;Duplicators">Duplicators</a> extends <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> <span class="delimiter">{</span>
  import <a href="Analyzer.scala.html#scala.tools.nsc.typechecker;Analyzer.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="Duplicators.this.global.definitions.type">definitions</a>._

  <span class="comment">/** Retype the given tree in the given context. Use this method when retyping
   *  a method in a different class. The typer will replace references to the this of
   *  the old class with the new class, and map symbols through the given 'env'. The
   *  environment is a map from type skolems to concrete types (see SpecializedTypes).
   */</span>
  def <a title="(context: Duplicators.this.Context, tree: Duplicators.this.global.Tree, oldThis: Duplicators.this.global.Symbol, newThis: Duplicators.this.global.Symbol, env: scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type])Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators.retyped">retyped</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="scala.tools.nsc.typechecker;Duplicators.retyped.context">context</a>: <a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context" title="Duplicators.this.Context">Context</a>, <a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators.retyped.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators.retyped.oldThis">oldThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators.retyped.newThis">newThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]" id="scala.tools.nsc.typechecker;Duplicators.retyped.env">env</a>: scala.collection.<a href="../../../collection/Map.scala.html#scala.collection;Map" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">Map</a><span class="delimiter">[</span>Symbol, Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.retyped.oldThis" title="Duplicators.this.global.Symbol">oldThis</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.typechecker;Duplicators.retyped.newThis" title="Duplicators.this.global.Symbol">newThis</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="(x$1: Duplicators.this.global.Symbol)Unit">oldClassOwner</a> = <a href="#scala.tools.nsc.typechecker;Duplicators.retyped.oldThis" title="Duplicators.this.global.Symbol">oldThis</a>
      <a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="(x$1: Duplicators.this.global.Symbol)Unit">newClassOwner</a> = <a href="#scala.tools.nsc.typechecker;Duplicators.retyped.newThis" title="Duplicators.this.global.Symbol">newThis</a>
    <span class="delimiter">}</span> else <a href="#scala.tools.nsc.typechecker;Duplicators.resetClassOwners" title="()Unit">resetClassOwners</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#scala.tools.nsc.typechecker;Duplicators.envSubstitution_=" title="(x$1: Duplicators.this.global.SubstTypeMap)Unit">envSubstitution</a> = new <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap" title="Duplicators.this.SubstSkolemsTypeMap">SubstSkolemsTypeMap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.retyped.env" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.keysIterator" title="=&gt; Iterator[Duplicators.this.global.Symbol]">keysIterator</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[Duplicators.this.global.Symbol]">toList</a>, <a href="#scala.tools.nsc.typechecker;Duplicators.retyped.env" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.valuesIterator" title="=&gt; Iterator[Duplicators.this.global.Type]">valuesIterator</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[Duplicators.this.global.Type]">toList</a><span class="delimiter">)</span>
    <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;retyped with env: &quot;)" class="string">&quot;retyped with env: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators.retyped.env" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a><span class="delimiter">)</span>

    <a href="#scala.tools.nsc.typechecker;Duplicators.newBodyDuplicator" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.retyped.context" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.retyped.tree" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  protected def <a title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator" id="scala.tools.nsc.typechecker;Duplicators.newBodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="scala.tools.nsc.typechecker;Duplicators.newBodyDuplicator.context">context</a>: <a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator" title="Duplicators.this.BodyDuplicator">BodyDuplicator</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newBodyDuplicator.context" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>

  <span class="comment">/** Return the special typer for duplicate method bodies. */</span>
  override def <a title="(context: Duplicators.this.Context)Duplicators.this.Typer" id="scala.tools.nsc.typechecker;Duplicators.newTyper">newTyper</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="scala.tools.nsc.typechecker;Duplicators.newTyper.context">context</a>: <a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span>: <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Duplicators.this.Typer">Typer</a> =
    <a href="#scala.tools.nsc.typechecker;Duplicators.newBodyDuplicator" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newTyper.context" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>

  private def <a title="()Unit" id="scala.tools.nsc.typechecker;Duplicators.resetClassOwners">resetClassOwners</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="(x$1: Duplicators.this.global.Symbol)Unit">oldClassOwner</a> = null
    <a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="(x$1: Duplicators.this.global.Symbol)Unit">newClassOwner</a> = null
  <span class="delimiter">}</span>

  private var <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=">oldClassOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a> = _
  private var <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators.newClassOwner_=">newClassOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a> = _
  private var <a title="Duplicators.this.global.SubstTypeMap" id="scala.tools.nsc.typechecker;Duplicators.envSubstitution_=">envSubstitution</a>: <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;SubstTypeMap" title="Duplicators.this.global.SubstTypeMap">SubstTypeMap</a> = _

  private class <a title="class SubstSkolemsTypeMap extends Duplicators.this.global.SubstTypeMap" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap">SubstSkolemsTypeMap</a><a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap" title="Duplicators.this.SubstSkolemsTypeMap" class="delimiter">(</a><a title="List[Duplicators.this.global.Symbol]" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.from">from</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Duplicators.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="List[Duplicators.this.global.Type]" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.to">to</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Duplicators.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;SubstTypeMap" title="Duplicators.this.global.SubstTypeMap">SubstTypeMap</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.from" title="List[Duplicators.this.global.Symbol]">from</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.to" title="List[Duplicators.this.global.Type]">to</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    protected override def <a title="(sym1: Duplicators.this.global.Symbol, sym2: Duplicators.this.global.Symbol)Boolean" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches">matches</a><span class="delimiter">(</span><a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym1">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym2">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym2" title="Duplicators.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTypeSkolem" title="=&gt; Boolean">isTypeSkolem</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym2" title="Duplicators.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.deSkolemize" title="=&gt; Duplicators.this.global.Symbol">deSkolemize</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym1" title="Duplicators.this.global.Symbol">sym1</a>
      else <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym1" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.typechecker;Duplicators;SubstSkolemsTypeMap.matches.sym2" title="Duplicators.this.global.Symbol">sym2</a>
  <span class="delimiter">}</span>

  private val <a title="scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]" id="scala.tools.nsc.typechecker;Duplicators.invalidSyms">invalidSyms</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#scala.collection.mutable;Map" title="scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">Map</a><span class="delimiter">[</span>Symbol, Tree<span class="delimiter">]</span> = <a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches" title="Duplicators.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.perRunCaches.newMap" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** A typer that creates new symbols for all definitions in the given tree
   *  and updates references to them while re-typechecking. All types in the
   *  tree, except for TypeTrees, are erased prior to type checking. TypeTrees
   *  are fixed by substituting invalid symbols for the new ones.
   */</span>
  class <a title="class BodyDuplicator extends Duplicators.this.Typer" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator">BodyDuplicator</a><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator" title="Duplicators.this.BodyDuplicator" class="delimiter">(</a><a title="Duplicators.this.Context" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator._context">_context</a>: <a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span> extends <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer" title="Duplicators.this.Typer">Typer</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator._context" title="Duplicators.this.Context">_context</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    class <a title="class FixInvalidSyms extends Duplicators.this.global.TypeMap" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms">FixInvalidSyms</a> extends <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap" title="Duplicators.this.global.TypeMap">TypeMap</a> <span class="delimiter">{</span>

      def <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.apply">apply</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.apply.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede)" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.apply.tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      override def <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede)">mapOver</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a> match <span class="delimiter">{</span>
        case TypeRef<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoPrefix" title="Duplicators.this.global.NoPrefix.type">NoPrefix</a>, <span title="Duplicators.this.global.Symbol">sym</span>, <span title="List[Duplicators.this.global.Type]">args</span><span class="delimiter">)</span> if <span title="Duplicators.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isTypeParameterOrSkolem" title="=&gt; Boolean">isTypeParameterOrSkolem</a> =&gt;
          val sym1 = <span class="delimiter">(</span>
            <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.scope" title="=&gt; Duplicators.this.global.Scope">scope</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.lookup" title="(name: Duplicators.this.global.Name)Duplicators.this.global.Symbol">lookup</a> <span title="Duplicators.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; sym.NameType">name</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.orElse" title="(alt: =&gt; Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">orElse</a> <span class="delimiter">{</span>
              <span class="comment">// try harder (look in outer scopes)</span>
              <span class="comment">// with virtpatmat, this can happen when the sym is referenced in the scope of a LabelDef but</span>
              <span class="comment">// is defined in the scope of an outer DefDef (e.g., in AbstractPartialFunction's andThen)</span>
              <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator" title="Duplicators.this.BodyDuplicator">BodyDuplicator</a>.super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.silent" title="(op: Duplicators.this.Typer =&gt; Duplicators.this.global.Tree, reportAmbiguousErrors: Boolean, newtree: Duplicators.this.global.Tree)Duplicators.this.SilentResult[Duplicators.this.global.Tree]">silent</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).sym1.$anonfun.x$1" title="Duplicators.this.Typer">_</a> <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedType(60ebfc8632)" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedType</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: Duplicators.this.global.Name)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;SilentResult.fold" title="(none: =&gt; Duplicators.this.global.Symbol)(f: Duplicators.this.global.Tree =&gt; Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">fold</a><span class="delimiter">(</span><a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).sym1.$anonfun.x$2" title="Duplicators.this.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.filter" title="Duplicators.this.global.Symbol">filter</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).sym1.$anonfun.x$3" title="Duplicators.this.global.Symbol">_</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span>
          <span class="delimiter">)</span>
          if <span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym1</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;fixing &quot;)">fixing $</span><span title="Duplicators.this.global.Symbol">sym</span><span title="String(&quot; -&gt; &quot;)"> -&gt; $</span><span title="Duplicators.this.global.Symbol">sym1</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.typeRef" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol, args: List[Duplicators.this.global.Type])Duplicators.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoPrefix" title="Duplicators.this.global.NoPrefix.type">NoPrefix</a>, <span title="Duplicators.this.global.Symbol">sym1</span>, <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOverArgs" title="(args: List[Duplicators.this.global.Type], tparams: List[Duplicators.this.global.Symbol])List[Duplicators.this.global.Type]">mapOverArgs</a><span class="delimiter">(</span><span title="List[Duplicators.this.global.Type]">args</span>, <span title="Duplicators.this.global.Symbol">sym1</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeParams" title="=&gt; List[Duplicators.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          else super.<a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        case TypeRef<span class="delimiter">(</span><span title="Duplicators.this.global.Type">pre</span>, <span title="Duplicators.this.global.Symbol">sym</span>, <span title="List[Duplicators.this.global.Type]">args</span><span class="delimiter">)</span> =&gt;
          val <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).newsym">newsym</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).newsym" title="Duplicators.this.global.Symbol">newsym</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol">sym</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).newsym" title="Duplicators.this.global.Symbol">newsym</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.typeRef" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol, args: List[Duplicators.this.global.Type])Duplicators.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede)" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><span title="Duplicators.this.global.Type">pre</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).newsym" title="Duplicators.this.global.Symbol">newsym</a>, <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOverArgs" title="(args: List[Duplicators.this.global.Type], tparams: List[Duplicators.this.global.Symbol])List[Duplicators.this.global.Type]">mapOverArgs</a><span class="delimiter">(</span><span title="List[Duplicators.this.global.Type]">args</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).newsym" title="Duplicators.this.global.Symbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.typeParams" title="=&gt; List[Duplicators.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else
            super.<a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        case SingleType<span class="delimiter">(</span><span title="Duplicators.this.global.Type">pre</span>, <span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span> =&gt;
          val <span title="Duplicators.this.global.Symbol">sym1</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym1</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol">sym</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol">sym1</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.singleType" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">singleType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede)" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><span title="Duplicators.this.global.Type">pre</span><span class="delimiter">)</span>, <span title="Duplicators.this.global.Symbol">sym1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else
            super.<a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        case ThisType<span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span> =&gt;
          val <span title="Duplicators.this.global.Symbol">sym1</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span>
          if <span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym1</span> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Duplicators.this.global.Symbol">sym</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol">sym</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol">sym1</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.ThisType.apply(a489b0ed7a)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">ThisType</a><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">sym1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else
            super.<a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>


        case _ =&gt;
          super.<a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;TypeMap.mapOver(ad9e013c92)" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms.mapOver(6a5c36aede).tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Fix the given type by replacing invalid symbols with the new ones. */</span>
    def <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType">fixType</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">{</span>
      val <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe1">tpe1</a> = <a href="../../../reflect/internal/tpe/TypeMaps.scala.html#scala.reflect.internal.tpe;TypeMaps;SubstMap.apply" title="(tp0: Duplicators.this.global.Type)Duplicators.this.global.Type">envSubstitution</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      val <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe2">tpe2</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">(</span>new <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator;FixInvalidSyms" title="BodyDuplicator.this.FixInvalidSyms">FixInvalidSyms</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe1" title="Duplicators.this.global.Type">tpe1</a><span class="delimiter">)</span>
      val <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe3">tpe3</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe2" title="Duplicators.this.global.Type">tpe2</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.asSeenFrom" title="(pre: Duplicators.this.global.Type, clazz: Duplicators.this.global.Symbol)Duplicators.this.global.Type">asSeenFrom</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.thisType" title="=&gt; Duplicators.this.global.Type">thisType</a>, <a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe2" title="Duplicators.this.global.Type">tpe2</a>
      <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType.tpe3" title="Duplicators.this.global.Type">tpe3</a>
    <span class="delimiter">}</span>

    <span class="comment">/** Return the new symbol corresponding to `sym`. */</span>
    private def <a title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym">updateSym</a><span class="delimiter">(</span><a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym.sym">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.invalidSyms" title="=&gt; scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">invalidSyms</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.isDefinedAt" title="(key: Duplicators.this.global.Symbol)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym.sym" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">invalidSyms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym.sym" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>
      else
        <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym.sym" title="Duplicators.this.global.Symbol">sym</a>

    private def <a title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate">invalidate</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate$default$2">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;attempting to invalidate symbol = &quot;)">attempting to invalidate symbol = $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isDef" title="=&gt; Boolean">isDef</a> <a href="../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Duplicators.this.global.Function">Function</a><span class="delimiter">]</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;invalid &quot;)" class="string">&quot;invalid &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>

        <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a> match <span class="delimiter">{</span>
          case <a title="Duplicators.this.global.LabelDef" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef">ldef</a> @ LabelDef<span class="delimiter">(</span><span title="Duplicators.this.global.TermName">name</span>, <a title="List[Duplicators.this.global.Ident]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.params">params</a>, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;LabelDef &quot;)" class="string">&quot;LabelDef &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.TermName">name</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; sym.info: &quot;)" class="string">&quot; sym.info: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>
            <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>
          <span class="comment">//          breakIf(true, this, ldef, context)</span>
            val <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.cloneSymbol(d28285cb23)" title="(newOwner: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a><span class="delimiter">(</span><a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a><span class="delimiter">)</span>
            <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol_=" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;newsym: &quot;)" class="string">&quot;newsym: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; info: &quot;)" class="string">&quot; info: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>

          case <a title="Duplicators.this.global.ValDef" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef">vdef</a> @ ValDef<span class="delimiter">(</span><a title="Duplicators.this.global.Modifiers" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.mods">mods</a>, <span title="Duplicators.this.global.TermName">name</span>, _, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> if <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.mods" title="Duplicators.this.global.Modifiers">mods</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Modifiers.hasFlag" title="(flag: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(2147483648L)">LAZY</span><span class="delimiter">)</span> =&gt;
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;ValDef &quot;)" class="string">&quot;ValDef &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.TermName">name</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; sym.info: &quot;)" class="string">&quot; sym.info: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>
            <a href="../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>
            val newowner = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate$default$2" title="Duplicators.this.global.Symbol">owner</a> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.orElse" title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.newowner">orElse</a> <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.context" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#scala.tools.nsc.typechecker;Contexts;Context.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a>
            val <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.cloneSymbol(d28285cb23)" title="(newOwner: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.newowner" title="Duplicators.this.global.Symbol">newowner</a><span class="delimiter">)</span>
            <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol_=" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>
            <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;newsym: &quot;)" class="string">&quot;newsym: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; info: &quot;)" class="string">&quot; info: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, owner: &quot;)" class="string">&quot;, owner: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isClass" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span>
            if <span class="delimiter">(</span><span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#scala.reflect.api;Symbols;SymbolApi.isClass" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.decls" title="=&gt; Duplicators.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#scala.reflect.internal;Scopes;Scope.enter" title="(sym: Duplicators.this.global.Symbol#TypeOfClonedSymbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">enter</a> <span title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</span>

          case DefDef<span class="delimiter">(</span>_, <span title="Duplicators.this.global.TermName">name</span>, <a title="List[Duplicators.this.global.TypeDef]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tparams">tparams</a>, <a title="List[List[Duplicators.this.global.ValDef]]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vparamss">vparamss</a>, _, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// invalidate parameters</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tparams" title="List[Duplicators.this.global.TypeDef]">tparams</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[Duplicators.this.global.MemberDef with Serializable{def name: Duplicators.this.global.Name{def newName(str: String): Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def subName(from: Int,to: Int): Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def companionName: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TypeName with Duplicators.this.global.TermName &lt;: Duplicators.this.global.Name}; def next: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}}}])List[Duplicators.this.global.MemberDef with Serializable{def name: Duplicators.this.global.Name{def newName(str: String): Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def subName(from: Int,to: Int): Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def companionName: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TypeName with Duplicators.this.global.TermName &lt;: Duplicators.this.global.Name}; def next: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name{def next: Duplicators.this.global.Name; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}}}]">:::</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vparamss" title="List[List[Duplicators.this.global.ValDef]]">vparamss</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[Duplicators.this.global.ValDef] =&gt; scala.collection.GenTraversableOnce[Duplicators.this.global.ValDef])List[Duplicators.this.global.ValDef]">flatten</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>

          case Function<span class="delimiter">(</span><a title="List[Duplicators.this.global.ValDef]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vparams">vparams</a>, _<span class="delimiter">)</span> =&gt;
            <span class="comment">// invalidate parameters</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.vparams" title="List[Duplicators.this.global.ValDef]">vparams</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>

          case _ =&gt;
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate.tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    private def <a title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll">invalidateAll</a><span class="delimiter">(</span><a title="List[Duplicators.this.global.Tree]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll.stats">stats</a>: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Duplicators.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll$default$2">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="Duplicators.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll.stats" title="List[Duplicators.this.global.Tree]">stats</a>.<a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Duplicators.this.global.Tree =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll.$anonfun.x$5" title="Duplicators.this.global.Tree">_</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll$default$2" title="Duplicators.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Optionally cast this tree into some other type, if required.
     *  Unless overridden, just returns the tree.
     */</span>
    def <a title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType">castType</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType.tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType.pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType.tree" title="Duplicators.this.global.Tree">tree</a>

    <span class="comment">/** Special typer method for re-type checking trees. It expects a typed tree.
     *  Returns a typed tree that has fresh symbols for all definitions in the original tree.
     *
     *  Each definition tree is visited and its symbol added to the invalidSyms map (except LabelDefs),
     *  then cleared (forcing the namer to create fresh symbols).
     *  All invalid symbols found in trees are cleared (except for LabelDefs), forcing the
     *  typechecker to look for fresh ones in the context.
     *
     *  Type trees are typed by substituting old symbols for new ones (@see fixType).
     *
     *  LabelDefs are not typable from trees alone, unless they have the type ()Unit. Therefore,
     *  their symbols are recreated ad-hoc and their types are fixed inline, instead of letting the
     *  namer/typer handle them, or Idents that refer to them.
     */</span>
    override def <a title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109)">typed</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a>, <a title="scala.tools.nsc.Mode" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode">mode</a>: <a href="../../../reflect/internal/Mode.scala.html#scala.reflect.internal;Mode" title="scala.tools.nsc.Mode">Mode</a>, <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt">pt</a>: <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;typing &quot;)" class="string">&quot;typing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Duplicators.this.global.Type">tpe</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
      val <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).origtreesym">origtreesym</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.hasSymbolField" title="=&gt; Boolean">hasSymbolField</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
          <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isLabel" title="=&gt; Boolean">isLabel</a>  <span class="comment">// labels cannot be retyped by the type checker as LabelDef has no ValDef/return type trees</span>
          <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Duplicators.invalidSyms" title="=&gt; scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">invalidSyms</a>.<a href="../../../collection/MapLike.scala.html#scala.collection;MapLike.isDefinedAt" title="(key: Duplicators.this.global.Symbol)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;removed symbol &quot;)" class="string">&quot;removed symbol &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case <a title="Duplicators.this.global.TypeTree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ttree">ttree</a> @ TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// log(&quot;fixing tpe: &quot; + tree.tpe + &quot; with sym: &quot; + tree.tpe.typeSymbol)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ttree" title="Duplicators.this.global.TypeTree">ttree</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.modifyType" title="(f: Duplicators.this.global.Type =&gt; Duplicators.this.global.Type)Duplicators.this.global.Tree">modifyType</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a>

        case Block<span class="delimiter">(</span><span title="List[Duplicators.this.global.Tree]">stats</span>, <a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).res">res</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;invalidating block&quot;)" class="string">&quot;invalidating block&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><span title="List[Duplicators.this.global.Tree]">stats</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).res" title="Duplicators.this.global.Tree">res</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()tree.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case ClassDef<span class="delimiter">(</span>_, _, _, <a title="Duplicators.this.global.Template" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tmpl">tmpl</a> @ Template<span class="delimiter">(</span><a title="List[Duplicators.this.global.Tree]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).parents">parents</a>, _, <span title="List[Duplicators.this.global.Tree]">stats</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// log(&quot;invalidating classdef &quot; + tree)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tmpl" title="Duplicators.this.global.Template">tmpl</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol_=" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newLocalDummy" title="(pos: Duplicators.this.global.Position)Duplicators.this.global.TermSymbol">newLocalDummy</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Duplicators.this.global.Position">pos</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidateAll" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><span title="List[Duplicators.this.global.Tree]">stats</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()tree.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case <a title="Duplicators.this.global.DefDef" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ddef">ddef</a> @ DefDef<span class="delimiter">(</span>_, _, _, _, <span title="Duplicators.this.global.Tree">tpt</span>, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ddef" title="Duplicators.this.global.DefDef">ddef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef.tpt" title="=&gt; Duplicators.this.global.Tree">tpt</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.modifyType" title="(f: Duplicators.this.global.Type =&gt; Duplicators.this.global.Type)Duplicators.this.global.Tree">modifyType</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ddef" title="Duplicators.this.global.DefDef">ddef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()ddef.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case <a title="Duplicators.this.global.Function" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).fun">fun</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="Duplicators.this.global.Function">Function</a> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Clearing the type and retyping Function: &quot;)" class="string">&quot;Clearing the type and retyping Function: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).fun" title="Duplicators.this.global.Function">fun</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).fun" title="Duplicators.this.global.Function">fun</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()fun.type">clearType</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case <a title="Duplicators.this.global.ValDef" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).vdef">vdef</a> @ ValDef<span class="delimiter">(</span><a title="Duplicators.this.global.Modifiers" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mods">mods</a>, <span title="Duplicators.this.global.TermName">name</span>, <span title="Duplicators.this.global.Tree">tpt</span>, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// log(&quot;vdef fixing tpe: &quot; + tree.tpe + &quot; with sym: &quot; + tree.tpe.typeSymbol + &quot; and &quot; + invalidSyms)</span>
          <span class="comment">//if (mods.hasFlag(Flags.LAZY)) vdef.symbol.resetFlag(Flags.MUTABLE) // Martin to Iulian: lazy vars can now appear because they are no longer boxed; Please check that deleting this statement is OK.</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef.tpt" title="=&gt; Duplicators.this.global.Tree">tpt</a> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.modifyType" title="(f: Duplicators.this.global.Type =&gt; Duplicators.this.global.Type)Duplicators.this.global.Tree">modifyType</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).vdef" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()vdef.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case <a title="Duplicators.this.global.LabelDef" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ldef">ldef</a> @ LabelDef<span class="delimiter">(</span><span title="Duplicators.this.global.TermName">name</span>, <a title="List[Duplicators.this.global.Ident]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params">params</a>, <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// log(&quot;label def: &quot; + ldef)</span>
          <span class="comment">// in case the rhs contains any definitions -- TODO: is this necessary?</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()ldef.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>

          <span class="comment">// is this LabelDef generated by tailcalls?</span>
          val isTailLabel = <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;LabelDef.params" title="=&gt; List[Duplicators.this.global.Ident]">params</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#scala;Int.>=(5f58a84eb3)" title="(x: Int)Boolean">&gt;=</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="Boolean" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).isTailLabel">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).ldef" title="Duplicators.this.global.LabelDef">ldef</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;LabelDef.params" title="=&gt; List[Duplicators.this.global.Ident]">params</a>.<a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; Duplicators.this.global.Ident">head</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident.name" title="=&gt; Duplicators.this.global.Name">name</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="Duplicators.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.THIS" title="=&gt; Duplicators.this.global.nme.NameType">THIS</a><span class="delimiter">)</span>

          <span class="comment">// the typer does not create the symbols for a LabelDef's params, so unless they were created before we need</span>
          <span class="comment">// to do it manually here -- but for the tailcalls-generated labels, ValDefs are created before the LabelDef,</span>
          <span class="comment">// so we just need to change the tree to point to the updated symbols</span>
          def <a title="(p: Duplicators.this.global.Tree)Duplicators.this.global.Ident" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam">newParam</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.p">p</a>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="Duplicators.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="Duplicators.this.global.Ident">Ident</a> =
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).isTailLabel" title="Boolean">isTailLabel</a><span class="delimiter">)</span>
              <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.p" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
            else <span class="delimiter">{</span>
              val <a title="Duplicators.this.global.Symbol#TypeOfClonedSymbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.newsym">newsym</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.p" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.cloneSymbol(4a4a4b92d2)" title="=&gt; Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a> <span class="comment">//(context.owner) // TODO owner?</span>
              <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.newsym" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam.p" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          val params1 = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params" title="List[Duplicators.this.global.Ident]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Duplicators.this.global.Ident]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params1">map</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newParam" title="(p: Duplicators.this.global.Tree)Duplicators.this.global.Ident">newParam</a>
          val rhs1 = <span class="delimiter">(</span>new <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeSubstituter" title="Duplicators.this.global.TreeSubstituter">TreeSubstituter</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params" title="List[Duplicators.this.global.Ident]">params</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Duplicators.this.global.Ident =&gt; Duplicators.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Duplicators.this.global.Ident],Duplicators.this.global.Symbol,List[Duplicators.this.global.Symbol]])List[Duplicators.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).rhs1.$anonfun.x$6" title="Duplicators.this.global.Ident">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params1" title="List[Duplicators.this.global.Ident]">params1</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeSubstituter.transform" title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).rhs1">transform</a> <span title="Duplicators.this.global.Tree">rhs</span><span class="delimiter">)</span> <span class="comment">// TODO: duplicate?</span>

          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees.treeCopy" title="=&gt; Duplicators.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.LabelDef" title="(tree: Duplicators.this.global.Tree, name: Duplicators.this.global.Name, params: List[Duplicators.this.global.Ident], rhs: Duplicators.this.global.Tree)Duplicators.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>, <span title="Duplicators.this.global.TermName">name</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).params1" title="List[Duplicators.this.global.Ident]">params1</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).rhs1" title="Duplicators.this.global.Tree">rhs1</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()rhs1.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case Bind<span class="delimiter">(</span><span title="Duplicators.this.global.Name">name</span>, _<span class="delimiter">)</span> =&gt;
          <span class="comment">// log(&quot;bind: &quot; + tree)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.invalidate" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()tree.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> if <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isLabel" title="=&gt; Boolean">isLabel</a> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Ident to labeldef &quot;)" class="string">&quot;Ident to labeldef &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; switched to &quot;)" class="string">&quot; switched to &quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()tree.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case Ident<span class="delimiter">(</span>_<span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).origtreesym" title="Duplicators.this.global.Symbol">origtreesym</a> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).origtreesym" title="Duplicators.this.global.Symbol">origtreesym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#scala.reflect.internal;HasFlags.isLazy" title="=&gt; Boolean">isLazy</a> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Ident to a lazy val &quot;)" class="string">&quot;Ident to a lazy val &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; updated to &quot;)" class="string">&quot; updated to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).origtreesym" title="Duplicators.this.global.Symbol">origtreesym</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).origtreesym" title="Duplicators.this.global.Symbol">origtreesym</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.clearType" title="()tree.type">clearType</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case Select<span class="delimiter">(</span><a title="Duplicators.this.global.This" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).th">th</a> @ This<span class="delimiter">(</span>_<span class="delimiter">)</span>, <a title="Duplicators.this.global.Name" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).sel">sel</a><span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).th" title="Duplicators.this.global.This">th</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// We use the symbol name instead of the tree name because the symbol</span>
          <span class="comment">// may have been name mangled, rendering the tree name obsolete.</span>
          <span class="comment">// ...but you can't just do a Select on a name because if the symbol is</span>
          <span class="comment">// overloaded, you will crash in the backend.</span>
          val <a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).memberByName">memberByName</a>  = <a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.thisType" title="=&gt; Duplicators.this.global.Type">thisType</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: Duplicators.this.global.Name)Duplicators.this.global.Symbol">member</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; Duplicators.this.global.Symbol#NameType">name</a><span class="delimiter">)</span>
          def <a title="=&gt; Duplicators.this.global.Select" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).nameSelection">nameSelection</a> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Select" title="(qualifier: Duplicators.this.global.Tree, name: Duplicators.this.global.Name)Duplicators.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; Duplicators.this.global.Symbol#NameType">name</a><span class="delimiter">)</span>
          val <a title="Duplicators.this.global.Select" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree">newTree</a> = <span class="delimiter">(</span>
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).memberByName" title="Duplicators.this.global.Symbol">memberByName</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.isOverloaded" title="=&gt; Boolean">isOverloaded</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="comment">// Find the types of the overload alternatives as seen in the new class,</span>
              <span class="comment">// and filter the list down to those which match the old type (after</span>
              <span class="comment">// fixing the old type so it is seen as if from the new class.)</span>
              val <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.typeInNewClass">typeInNewClass</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.memberType" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">memberType</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
              val <a title="List[Duplicators.this.global.Symbol]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.alts">alts</a>           = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).memberByName" title="Duplicators.this.global.Symbol">memberByName</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.alternatives" title="=&gt; List[Duplicators.this.global.Symbol]">alternatives</a>
              val memberTypes    = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.alts" title="List[Duplicators.this.global.Symbol]">alts</a> <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[Duplicators.this.global.Type]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberTypes">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.info" title="=&gt; Duplicators.this.global.Type">info</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.memberType" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">memberType</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberTypes.$anonfun.x$7" title="Duplicators.this.global.Symbol">_</a><span class="delimiter">)</span>
              val <a title="String" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberString">memberString</a>   = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).memberByName" title="Duplicators.this.global.Symbol">memberByName</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.defString" title="=&gt; String">defString</a>
              <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.alts" title="List[Duplicators.this.global.Symbol]">alts</a> <a href="../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[Duplicators.this.global.Type])(implicit bf: scala.collection.generic.CanBuildFrom[List[Duplicators.this.global.Symbol],(Duplicators.this.global.Symbol, Duplicators.this.global.Type),List[(Duplicators.this.global.Symbol, Duplicators.this.global.Type)]])List[(Duplicators.this.global.Symbol, Duplicators.this.global.Type)]">zip</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberTypes" title="List[Duplicators.this.global.Type]">memberTypes</a> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: ((Duplicators.this.global.Symbol, Duplicators.this.global.Type)) =&gt; Boolean)List[(Duplicators.this.global.Symbol, Duplicators.this.global.Type)]">filter</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.$anonfun.x$8" title="(Duplicators.this.global.Symbol, Duplicators.this.global.Type)">_</a>.<a href="../../../Tuple2.scala.html#scala;Tuple2._2" title="=&gt; Duplicators.this.global.Type">_2</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.=:=" title="(that: Duplicators.this.global.Type)Boolean">=:=</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.typeInNewClass" title="Duplicators.this.global.Type">typeInNewClass</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
                case <span class="delimiter">(</span><span class="delimiter">(</span><span title="Duplicators.this.global.Symbol">alt</span>, <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.tpe">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> =&gt;
                  <a href="../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Arrested overloaded type in Duplicators, narrowing to &quot;)">Arrested overloaded type in Duplicators, narrowing to $</span><span class="delimiter">{</span><span title="Duplicators.this.global.Symbol">alt</span>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.defStringSeenAs" title="(info: Duplicators.this.global.Type)String">defStringSeenAs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.tpe" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;\\n  Overload was: &quot;)">\n  Overload was: $</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberString" title="String">memberString</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
                  <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Duplicators.this.global.Tree, sym: Duplicators.this.global.Symbol)Duplicators.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>, <span title="Duplicators.this.global.Symbol">alt</span><span class="delimiter">)</span>
                case <a title="List[(Duplicators.this.global.Symbol, Duplicators.this.global.Type)]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.xs">xs</a> =&gt;
                  <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.alts" title="List[Duplicators.this.global.Symbol]">alts</a> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: Duplicators.this.global.Symbol =&gt; Boolean)List[Duplicators.this.global.Symbol]">filter</a> <span class="delimiter">(</span><a title="Duplicators.this.global.Symbol" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.$anonfun.alt">alt</a> =&gt; <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.$anonfun.alt" title="Duplicators.this.global.Symbol">alt</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.paramss" title="=&gt; List[List[Duplicators.this.global.Symbol]]">paramss</a> <a href="../../../collection/LinearSeqLike.scala.html#scala.collection;LinearSeqLike.corresponds" title="(that: scala.collection.GenSeq[List[Duplicators.this.global.Symbol]])(p: (List[Duplicators.this.global.Symbol], List[Duplicators.this.global.Symbol]) =&gt; Boolean)Boolean">corresponds</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.paramss" title="=&gt; List[List[Duplicators.this.global.Symbol]]">paramss</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.$anonfun.$anonfun.x$9" title="List[Duplicators.this.global.Symbol]">_</a>.<a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.$anonfun.$anonfun.x$10" title="List[Duplicators.this.global.Symbol]">_</a>.<a href="../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
                    case <span title="Duplicators.this.global.Symbol">alt</span> :: <a href="../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> =&gt;
                      <a href="../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Resorted to parameter list arity to disambiguate to &quot;)">Resorted to parameter list arity to disambiguate to $</span><span title="Duplicators.this.global.Symbol">alt</span><span title="String(&quot;\\n  Overload was: &quot;)">\n  Overload was: $</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberString" title="String">memberString</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
                      <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: Duplicators.this.global.Tree, sym: Duplicators.this.global.Symbol)Duplicators.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>, <span title="Duplicators.this.global.Symbol">alt</span><span class="delimiter">)</span>
                    case _ =&gt;
                      <a href="../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Could not disambiguate &quot;)">Could not disambiguate $</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree.memberTypes" title="List[Duplicators.this.global.Type]">memberTypes</a><span title="String(&quot;. Attempting name-based selection, but we may crash later.&quot;)" class="string">. Attempting name-based selection, but we may crash later.&quot;</span><span class="delimiter">)</span>
                      <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).nameSelection" title="=&gt; Duplicators.this.global.Select">nameSelection</a>
                  <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
            else <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).nameSelection" title="=&gt; Duplicators.this.global.Select">nameSelection</a>
          <span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: Duplicators.this.global.Position)(tree: Duplicators.this.global.Select)Duplicators.this.global.Select">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Duplicators.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).newTree" title="Duplicators.this.global.Select">newTree</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case This<span class="delimiter">(</span>_<span class="delimiter">)</span> if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> null<span class="delimiter">)</span> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.typechecker;Duplicators.oldClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span> =&gt;
<span class="comment">//          val tree1 = Typed(This(newClassOwner), TypeTree(fixType(tree.tpe.widen)))</span>
          <span class="comment">// log(&quot;selection on this: &quot; + tree)</span>
          val <span title="Duplicators.this.global.Tree">tree1</span> = <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.This(3731e4786e)" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators.newClassOwner_=" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>
          <span class="comment">// log(&quot;tree1: &quot; + tree1)</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;mapped &quot;)" class="string">&quot;mapped &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Duplicators.this.global.Tree">tree1</span><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(a2f5905ec8)" title="(pos: Duplicators.this.global.Position, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Duplicators.this.global.Position">pos</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">tree1</span><span class="delimiter">)</span>

        case This<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;selection on this, plain: &quot;)" class="string">&quot;selection on this, plain: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.updateSym" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          val <span title="Duplicators.this.global.Tree">ntree</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType" title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">castType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          val <span title="Duplicators.this.global.Tree">tree1</span> = super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">ntree</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          <span class="comment">// log(&quot;plain this typed to: &quot; + tree1)</span>
          <span title="Duplicators.this.global.Tree">tree1</span>
<span class="comment">/* no longer needed, because Super now contains a This(...)
        case Super(qual, mix) if (oldClassOwner ne null) &amp;&amp; (tree.symbol == oldClassOwner) =&gt;
          val tree1 = Super(qual, mix)
          log(&quot;changed &quot; + tree + &quot; to &quot; + tree1)
          super.typed(atPos(tree.pos)(tree1))
*/</span>
        case Match<span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrut">scrut</a>, <a title="List[Duplicators.this.global.CaseDef]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases">cases</a><span class="delimiter">)</span> =&gt;
          val <a title="Duplicators.this.global.Tree" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrut1">scrut1</a>   = <a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedByValueExpr" title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typedByValueExpr</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrut" title="Duplicators.this.global.Tree">scrut</a><span class="delimiter">)</span>
          val <a title="Duplicators.this.global.Type" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrutTpe">scrutTpe</a> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrut1" title="Duplicators.this.global.Tree">scrut1</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Duplicators.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.widen" title="=&gt; Duplicators.this.global.Type">widen</a>
          val <a title="List[Duplicators.this.global.CaseDef]" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases1">cases1</a> = <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrutTpe" title="Duplicators.this.global.Type">scrutTpe</a>.<a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.isFinalType" title="=&gt; Boolean">isFinalType</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases" title="List[Duplicators.this.global.CaseDef]">cases</a> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: Duplicators.this.global.CaseDef =&gt; Boolean)List[Duplicators.this.global.CaseDef]">filter</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases1.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
              case CaseDef<span class="delimiter">(</span>Bind<span class="delimiter">(</span>_, <a title="Duplicators.this.global.Typed" id="scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases1.$anonfun.pat">pat</a> @ Typed<span class="delimiter">(</span>_, <span title="Duplicators.this.global.Tree">tpt</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Duplicators.this.global.EmptyTree.type">EmptyTree</a>, <span title="Duplicators.this.global.Tree">body</span><span class="delimiter">)</span> =&gt;
                <span class="comment">// the typed pattern is not incompatible with the scrutinee type</span>
                <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrutTpe" title="Duplicators.this.global.Type">scrutTpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.matchesPattern" title="(that: Duplicators.this.global.Type)Boolean">matchesPattern</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">tpt</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
              case CaseDef<span class="delimiter">(</span>Typed<span class="delimiter">(</span>_, <span title="Duplicators.this.global.Tree">tpt</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Duplicators.this.global.EmptyTree.type">EmptyTree</a>, <span title="Duplicators.this.global.Tree">body</span><span class="delimiter">)</span> =&gt;
                <span class="comment">// the typed pattern is not incompatible with the scrutinee type</span>
                <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrutTpe" title="Duplicators.this.global.Type">scrutTpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.matchesPattern" title="(that: Duplicators.this.global.Type)Boolean">matchesPattern</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.fixType" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">tpt</span>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
              case _ =&gt; true
            <span class="delimiter">}</span>
            <span class="comment">// Without this, AnyRef specializations crash on patterns like</span>
            <span class="comment">//   case _: Boolean =&gt; ...</span>
            <span class="comment">// Not at all sure this is safe.</span>
            else if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrutTpe" title="Duplicators.this.global.Type">scrutTpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.<:<" title="(that: Duplicators.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.AnyRefTpe" title="=&gt; Duplicators.this.global.Type">AnyRefTpe</a><span class="delimiter">)</span>
              <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases" title="List[Duplicators.this.global.CaseDef]">cases</a> <a href="../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: Duplicators.this.global.CaseDef =&gt; Boolean)List[Duplicators.this.global.CaseDef]">filterNot</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases1.$anonfun.x$11" title="Duplicators.this.global.CaseDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;CaseDef.pat" title="=&gt; Duplicators.this.global.Tree">pat</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; Duplicators.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.<:<" title="(that: Duplicators.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.AnyValTpe" title="=&gt; Duplicators.this.global.Type">AnyValTpe</a><span class="delimiter">)</span>
            else
              <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases" title="List[Duplicators.this.global.CaseDef]">cases</a>
          <span class="delimiter">}</span>

          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: Duplicators.this.global.Position)(tree: Duplicators.this.global.Match)Duplicators.this.global.Match">atPos</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; Duplicators.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Match" title="(selector: Duplicators.this.global.Tree, cases: List[Duplicators.this.global.CaseDef])Duplicators.this.global.Match">Match</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).scrut" title="Duplicators.this.global.Tree">scrut</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).cases1" title="List[Duplicators.this.global.CaseDef]">cases1</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        case <a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="Duplicators.this.global.EmptyTree.type">EmptyTree</a> =&gt;
          <span class="comment">// no need to do anything, in particular, don't set the type to null, EmptyTree.tpe_= asserts</span>
          <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>

        case _ =&gt;
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Duplicators default case: &quot;)" class="string">&quot;Duplicators default case: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.summaryString" title="=&gt; String">summaryString</a><span class="delimiter">)</span>
          <a href="../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot; ---&gt; &quot;)" class="string">&quot; ---&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.hasSymbolField" title="=&gt; Boolean">hasSymbolField</a> <a href="../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.safeOwner" title="=&gt; Duplicators.this.global.Symbol">safeOwner</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.AnyClass" title="=&gt; Duplicators.this.global.ClassSymbol">AnyClass</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol_=" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a> <span class="comment">// maybe we can find a more specific member in a subclass of Any (see AnyVal members, like ==)</span>

          val <span title="Duplicators.this.global.Tree">ntree</span> = <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.castType" title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">castType</a><span class="delimiter">(</span><a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).tree" title="Duplicators.this.global.Tree">tree</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          super.<a href="Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(301a5271e9)" title="(tree: Duplicators.this.global.Tree, mode: scala.tools.nsc.Mode, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><span title="Duplicators.this.global.Tree">ntree</span>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).mode" title="scala.tools.nsc.Mode">mode</a>, <a href="#scala.tools.nsc.typechecker;Duplicators;BodyDuplicator.typed(7a39b38109).pt" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>
