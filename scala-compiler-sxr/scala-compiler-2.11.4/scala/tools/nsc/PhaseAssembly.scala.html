<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/PhaseAssembly.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2007-2013 LAMP/EPFL
 * @author Anders Bach Nielsen
 * @version 1.0
 */</span>

package scala.tools.nsc

import scala.collection.mutable
import scala.<a href="../../language.scala.html#scala.language" title="language.type">language</a>.postfixOps

<span class="comment">/** Converts an unordered morass of components into an order that
 *  satisfies their mutual constraints.
 *  @see SIP 00002. You have read SIP 00002?
 */</span>
trait <a title="trait PhaseAssembly extends AnyRef" id="scala.tools.nsc;PhaseAssembly">PhaseAssembly</a> <a href="../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  self: Global =&gt;

  <span class="comment">/**
   * Aux datastructure for solving the constraint system
   * The depency graph container with helper methods for node and edge creation
   */</span>
  private class <a title="class DependencyGraph extends AnyRef" id="scala.tools.nsc;PhaseAssembly;DependencyGraph">DependencyGraph</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph" title="PhaseAssembly.this.DependencyGraph" class="delimiter">{</a>

    <span class="comment">/** Simple edge with to and from refs */</span>
    case class <a title="class Edge extends AnyRef with Product with Serializable" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.Edge.readResolve">Edge</a><a href="../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a>var <a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm">frm</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a>, var <a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to">to</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a>, var <a title="Boolean" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard">hard</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Simple node with name and object ref for the phase object,
     * also sets of in and out going dependencies
     */</span>
    case class <a title="class Node extends AnyRef with Product with Serializable" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve">Node</a><a href="../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.name">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename">phasename</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.name" title="=&gt; String">name</a>
      var <a title="Option[List[scala.tools.nsc.SubComponent]]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=">phaseobj</a>: <a href="../../Option.scala.html#scala;Option" title="Option[List[scala.tools.nsc.SubComponent]]">Option</a><span class="delimiter">[</span>List<span class="delimiter">[</span>SubComponent<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="../../Option.scala.html#scala.None" title="None.type">None</a>
      val <a title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.after">after</a> = new mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">HashSet</a><span class="delimiter">[</span>Edge<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      var <a title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=">before</a> = new mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">HashSet</a><span class="delimiter">[</span>Edge<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      var <a title="Boolean" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.visited_=">visited</a> = false
      var <a title="Int" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=">level</a> = <span title="Int(0)" class="int">0</span>

      def <a title="()String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames">allPhaseNames</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a> match <span class="delimiter">{</span>
        case <a href="../../Option.scala.html#scala.None" title="None.type">None</a> =&gt; <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a>
        case Some<span class="delimiter">(</span><a title="List[scala.tools.nsc.SubComponent]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames.lst">lst</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames.lst" title="List[scala.tools.nsc.SubComponent]">lst</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: scala.tools.nsc.SubComponent =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.SubComponent],String,List[String]])List[String]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames.$anonfun.x$1" title="scala.tools.nsc.SubComponent">_</a>.<a href="SubComponent.scala.html#scala.tools.nsc;SubComponent.phaseName" title="=&gt; String">phaseName</a><span class="delimiter">)</span>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.reduceLeft" title="(f: (String, String) =&gt; String)String">reduceLeft</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames.$anonfun.x$2" title="String">_</a><span title="(x$1: Any)String">+</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames.$anonfun.x$3" title="String">_</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    val <a title="scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes">nodes</a> = new mutable.<a href="../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap" title="scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">HashMap</a><span class="delimiter">[</span>String,Node<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.edges">edges</a> = new mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">HashSet</a><span class="delimiter">[</span>Edge<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="comment">/** Given a phase object, get the node for this phase object. If the
     *  node object does not exist, then create it.
     */</span>
    def <a title="(phs: scala.tools.nsc.SubComponent)DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba)">getNodeByPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.SubComponent" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).phs">phs</a>: <a href="SubComponent.scala.html#scala.tools.nsc;SubComponent" title="scala.tools.nsc.SubComponent">SubComponent</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a> = <span class="delimiter">{</span>
      val <a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).node">node</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)" title="(name: String)DependencyGraph.this.Node">getNodeByPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).phs" title="scala.tools.nsc.SubComponent">phs</a>.<a href="SubComponent.scala.html#scala.tools.nsc;SubComponent.phaseName" title="=&gt; String">phaseName</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a> match <span class="delimiter">{</span>
        case <a href="../../Option.scala.html#scala.None" title="None.type">None</a> =&gt;
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="(x$1: Option[List[scala.tools.nsc.SubComponent]])Unit">phaseobj</a> = <a href="../../Option.scala.html#scala;Some" title="(x: List[scala.tools.nsc.SubComponent])Some[List[scala.tools.nsc.SubComponent]]">Some</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="[A](xs: A*)List[A]">List</a><span title="(xs: scala.tools.nsc.SubComponent*)List[scala.tools.nsc.SubComponent]" class="delimiter">[</span><a href="SubComponent.scala.html#scala.tools.nsc;SubComponent" title="scala.tools.nsc.SubComponent">SubComponent</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).phs" title="scala.tools.nsc.SubComponent">phs</a><span class="delimiter">)</span><span class="delimiter">)</span>
        case _ =&gt;
      <span class="delimiter">}</span>
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba).node" title="DependencyGraph.this.Node">node</a>
    <span class="delimiter">}</span>

    <span class="comment">/* Given the name of a phase object, get the node for that name. If the
     * node object does not exits, then create it.
     */</span>
    def <a title="(name: String)DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)">getNodeByPhase</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8).name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a> =
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes" title="=&gt; scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">nodes</a>.<a href="../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.getOrElseUpdate" title="(key: String, op: =&gt; DependencyGraph.this.Node)DependencyGraph.this.Node">getOrElseUpdate</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8).name" title="String">name</a>, new <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8).name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/* Connect the frm and to nodes with an edge and make it soft.
     * Also add the edge object to the set of edges, and to the dependency
     * list of the nodes
     */</span>
    def <a title="(frm: DependencyGraph.this.Node, to: DependencyGraph.this.Node)Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes">softConnectNodes</a><span class="delimiter">(</span><a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.frm">frm</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a>, <a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.to">to</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.e">e</a> = new <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Edge.readResolve" title="DependencyGraph.this.Edge">Edge</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.frm" title="DependencyGraph.this.Node">frm</a>, <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.to" title="DependencyGraph.this.Node">to</a>, false<span class="delimiter">)</span>
      this.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)DependencyGraph.this.edges.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.e" title="DependencyGraph.this.Edge">e</a>

      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.frm" title="DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.after" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">after</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)frm.after.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.e" title="DependencyGraph.this.Edge">e</a>
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.to" title="DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes.e" title="DependencyGraph.this.Edge">e</a>
    <span class="delimiter">}</span>

    <span class="comment">/* Connect the frm and to nodes with an edge and make it hard.
     * Also add the edge object to the set of edges, and to the dependency
     * list of the nodes
     */</span>
    def <a title="(frm: DependencyGraph.this.Node, to: DependencyGraph.this.Node)Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes">hardConnectNodes</a><span class="delimiter">(</span><a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.frm">frm</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a>, <a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.to">to</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.e">e</a> = new <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Edge.readResolve" title="DependencyGraph.this.Edge">Edge</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.frm" title="DependencyGraph.this.Node">frm</a>, <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.to" title="DependencyGraph.this.Node">to</a>, true<span class="delimiter">)</span>
      this.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)DependencyGraph.this.edges.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.e" title="DependencyGraph.this.Edge">e</a>

      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.frm" title="DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.after" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">after</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)frm.after.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.e" title="DependencyGraph.this.Edge">e</a>
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.to" title="DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">+=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes.e" title="DependencyGraph.this.Edge">e</a>
    <span class="delimiter">}</span>

    <span class="comment">/* Given the entire graph, collect the phase objects at each level, where the phase
     * names are sorted alphabetical at each level, into the compiler phase list
     */</span>
    def <a title="()List[scala.tools.nsc.SubComponent]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList">compilerPhaseList</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[scala.tools.nsc.SubComponent]">List</a><span class="delimiter">[</span>SubComponent<span class="delimiter">]</span> =
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes" title="=&gt; scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">nodes</a>.<a href="../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap.values" title="=&gt; Iterable[DependencyGraph.this.Node]">values</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[DependencyGraph.this.Node]">toList</a> <a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Node =&gt; Boolean)List[DependencyGraph.this.Node]">filter</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList.$anonfun.x$4" title="DependencyGraph.this.Node">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <a href="../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.sortBy" title="(f: DependencyGraph.this.Node =&gt; (Int, String))(implicit ord: scala.math.Ordering[(Int, String)])List[DependencyGraph.this.Node]">sortBy</a> <span class="delimiter">(</span><a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList.$anonfun.x">x</a> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: Int, _2: String)(Int, String)" class="delimiter">(</a><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList.$anonfun.x" title="DependencyGraph.this.Node">x</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a>, <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList.$anonfun.x" title="DependencyGraph.this.Node">x</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.flatMap" title="(f: DependencyGraph.this.Node =&gt; scala.collection.GenTraversableOnce[List[scala.tools.nsc.SubComponent]])(implicit bf: scala.collection.generic.CanBuildFrom[List[DependencyGraph.this.Node],List[scala.tools.nsc.SubComponent],List[List[scala.tools.nsc.SubComponent]]])List[List[scala.tools.nsc.SubComponent]]">flatMap</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList.$anonfun.x$5" title="DependencyGraph.this.Node">_</a>.<a href="../../Option.scala.html#scala.Option.option2Iterable" title="(xo: Option[List[scala.tools.nsc.SubComponent]])Iterable[List[scala.tools.nsc.SubComponent]]">phaseobj</a><span class="delimiter">)</span> <a href="../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[scala.tools.nsc.SubComponent] =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.SubComponent])List[scala.tools.nsc.SubComponent]">flatten</a>

    <span class="comment">/* Test if there are cycles in the graph, assign levels to the nodes
     * and collapse hard links into nodes
     */</span>
    def <a title="(node: DependencyGraph.this.Node, lvl: Int)Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels">collapseHardLinksAndLevels</a><span class="delimiter">(</span><a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node">node</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.Node.readResolve" title="DependencyGraph.this.Node">Node</a>, <a title="Int" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.lvl">lvl</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.visited_=" title="=&gt; Boolean">visited</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.dump" title="(title: String)Unit">dump</a><span class="delimiter">(</span><span title="String(&quot;phase-cycle&quot;)" class="string">&quot;phase-cycle&quot;</span><span class="delimiter">)</span>
        throw new <a href="package.scala.html#scala.tools.nsc.package;FatalError" title="scala.reflect.internal.FatalError">FatalError</a><span class="delimiter">(</span><a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Cycle in phase dependencies detected at &quot;)">Cycle in phase dependencies detected at $</span><span class="delimiter">{</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">}</span><span title="String(&quot;, created phase-cycle.dot&quot;)" class="string">, created phase-cycle.dot&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <a href="../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.lvl" title="Int">lvl</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="(x$1: Int)Unit">level</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.lvl" title="Int">lvl</a>

      var hls = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="List[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.hls">++</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.hls.$anonfun.x$6" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span>
      while <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.hls" title="List[DependencyGraph.this.Edge]">hls</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.while$1" title="()Unit" class="delimiter">{</a>
        for <span class="delimiter">(</span><a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.hl">hl</a> &lt;- <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">hls</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="(x$1: Option[List[scala.tools.nsc.SubComponent]])Unit">phaseobj</a> = <a href="../../Option.scala.html#scala;Some" title="(x: List[scala.tools.nsc.SubComponent])Some[List[scala.tools.nsc.SubComponent]]">Some</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; List[scala.tools.nsc.SubComponent]">get</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[scala.tools.nsc.SubComponent])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.SubComponent],scala.tools.nsc.SubComponent,List[scala.tools.nsc.SubComponent]])List[scala.tools.nsc.SubComponent]">++</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.hl" title="DependencyGraph.this.Edge">hl</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; List[scala.tools.nsc.SubComponent]">get</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="(x$1: scala.collection.mutable.HashSet[DependencyGraph.this.Edge])Unit">before</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.hl" title="DependencyGraph.this.Edge">hl</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes" title="=&gt; scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">nodes</a> <a href="../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap.-=(e1f1766304)" title="(key: String)DependencyGraph.this.nodes.type">-=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.hl" title="DependencyGraph.this.Edge">hl</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.-=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)DependencyGraph.this.edges.type">-=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.hl" title="DependencyGraph.this.Edge">hl</a>
          for <span class="delimiter">(</span><a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.$anonfun.edge">edge</a> &lt;- <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">before</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="(x$1: DependencyGraph.this.Node)Unit">to</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>
        <span class="delimiter">}</span>
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.hls" title="List[DependencyGraph.this.Edge]">hls</a> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[DependencyGraph.this.Edge])(implicit bf: scala.collection.generic.CanBuildFrom[List[Nothing],DependencyGraph.this.Edge,List[DependencyGraph.this.Edge]])List[DependencyGraph.this.Edge]">++</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.x$7" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.visited_=" title="(x$1: Boolean)Unit">visited</a> = true

      for <span class="delimiter">(</span><a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.edge">edge</a> &lt;- <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">before</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels" title="(node: DependencyGraph.this.Node, lvl: Int)Unit">collapseHardLinksAndLevels</a><span class="delimiter">(</span> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>, <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.lvl" title="Int">lvl</a> <a href="../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.visited_=" title="(x$1: Boolean)Unit">visited</a> = false
    <span class="delimiter">}</span>

    <span class="comment">/* Find all edges in the given graph that are hard links. For each hard link we
     * need to check that its the only dependency. If not, then we will promote the
     * other dependencies down
     */</span>
    def <a title="()Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks">validateAndEnforceHardlinks</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      var <a title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.hardlinks">hardlinks</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.hardlinks.$anonfun.x$8" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span>
      for <span class="delimiter">(</span><span title="DependencyGraph.this.Edge">hl</span> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">hardlinks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.after" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">after</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.size" title="=&gt; Int">size</a> <a href="../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.dump" title="(title: String)Unit">dump</a><span class="delimiter">(</span><span title="String(&quot;phase-order&quot;)" class="string">&quot;phase-order&quot;</span><span class="delimiter">)</span>
          throw new <a href="package.scala.html#scala.tools.nsc.package;FatalError" title="scala.reflect.internal.FatalError">FatalError</a><span class="delimiter">(</span><a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Phase &quot;)">Phase $</span><span class="delimiter">{</span><span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">}</span><span title="String(&quot; can\'t follow &quot;)"> can't follow $</span><span class="delimiter">{</span><span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">}</span><span title="String(&quot;, created phase-order.dot&quot;)" class="string">, created phase-order.dot&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      var <a title="Boolean" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.rerun">rerun</a> = true
      while <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.rerun" title="Boolean">rerun</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.while$2" title="()Unit" class="delimiter">{</a>
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.rerun" title="Boolean">rerun</a> = false
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.hardlinks" title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">hardlinks</a> = <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.x$9" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span>
        for <span class="delimiter">(</span><span title="DependencyGraph.this.Edge">hl</span> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">hardlinks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          val sanity = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="List[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity">++</a> <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity.$anonfun.x$10" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity" title="List[DependencyGraph.this.Edge]">sanity</a>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            throw new <a href="package.scala.html#scala.tools.nsc.package;FatalError" title="scala.reflect.internal.FatalError">FatalError</a><span class="delimiter">(</span><span title="String(&quot;There is no runs right after dependency, where there should be one! This is not supposed to happen!&quot;)" class="string">&quot;There is no runs right after dependency, where there should be one! This is not supposed to happen!&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity" title="List[DependencyGraph.this.Edge]">sanity</a>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.dump" title="(title: String)Unit">dump</a><span class="delimiter">(</span><span title="String(&quot;phase-order&quot;)" class="string">&quot;phase-order&quot;</span><span class="delimiter">)</span>
            val following = <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity" title="List[DependencyGraph.this.Edge]">sanity</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: DependencyGraph.this.Edge =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[DependencyGraph.this.Edge],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.following.$anonfun.x$11" title="DependencyGraph.this.Edge">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.sorted" title="(implicit ord: scala.math.Ordering[String])List[String]">sorted</a> <a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.following">mkString</a> <span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
            throw new <a href="package.scala.html#scala.tools.nsc.package;FatalError" title="scala.reflect.internal.FatalError">FatalError</a><span class="delimiter">(</span><a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Multiple phases want to run right after &quot;)">Multiple phases want to run right after $</span><span class="delimiter">{</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity" title="List[DependencyGraph.this.Edge]">sanity</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; DependencyGraph.this.Edge">head</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">}</span><span title="String(&quot;; followers: &quot;)">; followers: $</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.following" title="String">following</a><span title="String(&quot;; created phase-order.dot&quot;)" class="string">; created phase-order.dot&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>

            val <a title="scala.collection.mutable.HashSet[DependencyGraph.this.Edge]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.promote">promote</a> = <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: DependencyGraph.this.Edge =&gt; Boolean)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">filter</a><span class="delimiter">(</span><a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.promote.$anonfun.e">e</a> =&gt; <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.promote.$anonfun.e" title="DependencyGraph.this.Edge">e</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.$anonfun.sanity" title="List[DependencyGraph.this.Edge]">sanity</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: DependencyGraph.this.Edge =&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge])Unit">foreach</a> <span class="delimiter">(</span><span title="DependencyGraph.this.Edge">edge</span> =&gt; <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">+=</a> <span title="DependencyGraph.this.Edge">edge</span><span class="delimiter">)</span>
            for <span class="delimiter">(</span><span title="DependencyGraph.this.Edge">edge</span> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge])Unit">promote</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks.rerun" title="Boolean">rerun</a> = true
              <a href="../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.informProgress" title="(msg: String)Unit">informProgress</a><span class="delimiter">(</span>
                <span title="String(&quot;promote the dependency of &quot;)" class="string">&quot;promote the dependency of &quot;</span> <span title="(x$1: Any)String">+</span> <span title="DependencyGraph.this.Edge">edge</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span>  <span title="(x$1: Any)String">+</span> <span title="DependencyGraph.this.Edge">edge</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; DependencyGraph.this.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a><span class="delimiter">)</span>
              <span title="DependencyGraph.this.Edge">edge</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="(x$1: DependencyGraph.this.Node)Unit">to</a> = <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>
              <span title="DependencyGraph.this.Edge">hl</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.before_=" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">before</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">+=</a> <span title="DependencyGraph.this.Edge">edge</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Remove all nodes in the given graph, that have no phase object
     *  Make sure to clean up all edges when removing the node object
     *  `Inform` with warnings, if an external phase has a
     *  dependency on something that is dropped.
     */</span>
    def <a title="()Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes">removeDanglingNodes</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      for <span class="delimiter">(</span><a title="DependencyGraph.this.Node" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.node">node</a> &lt;- <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes" title="=&gt; scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">nodes</a>.<a href="../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap.values" title="=&gt; Iterable[DependencyGraph.this.Node]">values</a> <a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.foreach" title="(f: DependencyGraph.this.Node =&gt; Unit)Unit">filter</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.x$12" title="DependencyGraph.this.Node">_</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a>.<a href="../../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val msg = <span title="String(&quot;dropping dependency on node with no phase object: &quot;)" class="string">&quot;dropping dependency on node with no phase object: &quot;</span><a title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.msg">+</a><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a>
        <a href="../../reflect/internal/SymbolTable.scala.html#scala.reflect.internal;SymbolTable.informProgress" title="(msg: String)Unit">informProgress</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.msg" title="String">msg</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.nodes" title="=&gt; scala.collection.mutable.HashMap[String,DependencyGraph.this.Node]">nodes</a> <a href="../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap.-=(e1f1766304)" title="(key: String)DependencyGraph.this.nodes.type">-=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.node" title="DependencyGraph.this.Node">node</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a>

        for <span class="delimiter">(</span><a title="DependencyGraph.this.Edge" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.edge">edge</a> &lt;- <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.node" title="DependencyGraph.this.Node">node</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: DependencyGraph.this.Edge =&gt; Unit)Unit">before</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.edges" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">edges</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.-=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)DependencyGraph.this.edges.type">-=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>
          <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.after" title="=&gt; scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">after</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.-=(53f2a8289f)" title="(elem: DependencyGraph.this.Edge)scala.collection.mutable.HashSet[DependencyGraph.this.Edge]">-=</a> <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.edge" title="DependencyGraph.this.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; DependencyGraph.this.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a> <a href="../../Option.scala.html#scala;Option.exists" title="(p: List[scala.tools.nsc.SubComponent] =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="List[scala.tools.nsc.SubComponent]" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.$anonfun.lsc">lsc</a> =&gt; <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.$anonfun.$anonfun.lsc" title="List[scala.tools.nsc.SubComponent]">lsc</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; scala.tools.nsc.SubComponent">head</a>.<a href="SubComponent.scala.html#scala.tools.nsc;SubComponent.internal" title="=&gt; Boolean">internal</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.warning(7fc9e56e07)" title="(msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes.$anonfun.msg" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(title: String)Unit" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.dump">dump</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc;PhaseAssembly;DependencyGraph.dump$default$1">title</a>: <span title="String">String</span> = <span title="String(&quot;phase-assembly&quot;)" class="string">&quot;phase-assembly&quot;</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile" title="(graph: PhaseAssembly.this.DependencyGraph, filename: String)Unit">graphToDotFile</a><span class="delimiter">(</span>this, <a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.dump$default$1" title="String">title</a><span title="String(&quot;.dot&quot;)" class="string">.dot&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  <span class="comment">/** Called by Global#computePhaseDescriptors to compute phase order. */</span>
  def <a title="()List[scala.tools.nsc.SubComponent]" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly">computePhaseAssembly</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[scala.tools.nsc.SubComponent]">List</a><span class="delimiter">[</span>SubComponent<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="comment">// Add all phases in the set to the graph</span>
    val <a title="PhaseAssembly.this.DependencyGraph" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph">graph</a> = <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph" title="(phsSet: scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent])PhaseAssembly.this.DependencyGraph">phasesSetToDepGraph</a><span class="delimiter">(</span><a href="Global.scala.html#scala.tools.nsc;Global.phasesSet" title="=&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">phasesSet</a><span class="delimiter">)</span>

    val <a title="Option[String]" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dot">dot</a> = if <span class="delimiter">(</span><a href="Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.genPhaseGraph" title="=&gt; scala.tools.nsc.Settings#StringSetting">genPhaseGraph</a>.<a href="../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.isSetByUser" title="=&gt; Boolean">isSetByUser</a><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Some" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><a href="Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.genPhaseGraph" title="=&gt; scala.tools.nsc.Settings#StringSetting">genPhaseGraph</a>.<a href="../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.value" title="=&gt; String">value</a><span class="delimiter">)</span> else <a href="../../Option.scala.html#scala.None" title="None.type">None</a>

    <span class="comment">// Output the phase dependency graph at this stage</span>
    def <a title="(stage: Int)Unit" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump">dump</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump.stage">stage</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dot" title="Option[String]">dot</a> <a href="../../Option.scala.html#scala;Option.foreach" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump.$anonfun.n">n</a> =&gt; <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile" title="(graph: PhaseAssembly.this.DependencyGraph, filename: String)Unit">graphToDotFile</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>, <a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump.$anonfun.n" title="String">n</a><span title="String(&quot;-&quot;)">-$</span><a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump.stage" title="Int">stage</a><span title="String(&quot;.dot&quot;)" class="string">.dot&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump" title="(stage: Int)Unit">dump</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

    <span class="comment">// Remove nodes without phaseobj</span>
    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.removeDanglingNodes" title="()Unit">removeDanglingNodes</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump" title="(stage: Int)Unit">dump</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>

    <span class="comment">// Validate and Enforce hardlinks / runsRightAfter and promote nodes down the tree</span>
    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.validateAndEnforceHardlinks" title="()Unit">validateAndEnforceHardlinks</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump" title="(stage: Int)Unit">dump</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>

    <span class="comment">// test for cycles, assign levels and collapse hard links into nodes</span>
    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.collapseHardLinksAndLevels" title="(node: graph.Node, lvl: Int)Unit">collapseHardLinksAndLevels</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)" title="(name: String)graph.Node">getNodeByPhase</a><span class="delimiter">(</span><span title="String(&quot;parser&quot;)" class="string">&quot;parser&quot;</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.dump" title="(stage: Int)Unit">dump</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>

    <span class="comment">// assemble the compiler</span>
    <a href="#scala.tools.nsc;PhaseAssembly.computePhaseAssembly.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.compilerPhaseList" title="()List[scala.tools.nsc.SubComponent]">compilerPhaseList</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Given the phases set, will build a dependency graph from the phases set
   *  Using the aux. method of the DependencyGraph to create nodes and egdes.
   */</span>
  private def <a title="(phsSet: scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent])PhaseAssembly.this.DependencyGraph" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph">phasesSetToDepGraph</a><span class="delimiter">(</span><a title="scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.phsSet">phsSet</a>: mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">HashSet</a><span class="delimiter">[</span>SubComponent<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph" title="PhaseAssembly.this.DependencyGraph">DependencyGraph</a> = <span class="delimiter">{</span>
    val <a title="PhaseAssembly.this.DependencyGraph" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph">graph</a> = new <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph" title="PhaseAssembly.this.DependencyGraph">DependencyGraph</a><span class="delimiter">(</span><span class="delimiter">)</span>

    for <span class="delimiter">(</span><a title="scala.tools.nsc.SubComponent" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phs">phs</a> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: scala.tools.nsc.SubComponent =&gt; Unit)Unit">phsSet</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      val <a title="graph.Node" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode">fromnode</a> = <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(dc224353ba)" title="(phs: scala.tools.nsc.SubComponent)graph.Node">getNodeByPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phs" title="scala.tools.nsc.SubComponent">phs</a><span class="delimiter">)</span>

      <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phs" title="scala.tools.nsc.SubComponent">phs</a>.<a href="SubComponent.scala.html#scala.tools.nsc;SubComponent.runsRightAfter" title="=&gt; Option[String]">runsRightAfter</a> match <span class="delimiter">{</span>
        case <a href="../../Option.scala.html#scala.None" title="None.type">None</a> =&gt;
          for <span class="delimiter">(</span><span title="String">phsname</span> &lt;- <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phs" title="scala.tools.nsc.SubComponent">phs</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: String =&gt; Unit)Unit">runsAfter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><span title="String">phsname</span> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;terminal&quot;)" class="string">&quot;terminal&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <span title="graph.Node">tonode</span> = <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)" title="(name: String)graph.Node">getNodeByPhase</a><span class="delimiter">(</span><span title="String">phsname</span><span class="delimiter">)</span>
              <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes" title="(frm: graph.Node, to: graph.Node)Unit">softConnectNodes</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a>, <span title="graph.Node">tonode</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.globalError(7fc9e56e07)" title="(msg: String)Unit">globalError</a><span class="delimiter">(</span><span title="String(&quot;[phase assembly, after dependency on terminal phase not allowed: &quot;)" class="string">&quot;[phase assembly, after dependency on terminal phase not allowed: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span><span title="(x$1: Any)String">+</span> <span title="String">phsname</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          for <span class="delimiter">(</span><span title="String">phsname</span> &lt;- <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phs" title="scala.tools.nsc.SubComponent">phs</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: String =&gt; Unit)Unit">runsBefore</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><span title="String">phsname</span> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;parser&quot;)" class="string">&quot;parser&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              val <span title="graph.Node">tonode</span> = <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)" title="(name: String)graph.Node">getNodeByPhase</a><span class="delimiter">(</span><span title="String">phsname</span><span class="delimiter">)</span>
              <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.softConnectNodes" title="(frm: graph.Node, to: graph.Node)Unit">softConnectNodes</a><span class="delimiter">(</span><span title="graph.Node">tonode</span>, <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.globalError(7fc9e56e07)" title="(msg: String)Unit">globalError</a><span class="delimiter">(</span><span title="String(&quot;[phase assembly, before dependency on parser phase not allowed: &quot;)" class="string">&quot;[phase assembly, before dependency on parser phase not allowed: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="String">phsname</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        case Some<span class="delimiter">(</span><a title="String" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phsname">phsname</a><span class="delimiter">)</span> =&gt;
          if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phsname" title="String">phsname</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;terminal&quot;)" class="string">&quot;terminal&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="graph.Node" id="scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.tonode">tonode</a> = <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.getNodeByPhase(42d7dfd2c8)" title="(name: String)graph.Node">getNodeByPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phsname" title="String">phsname</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph.hardConnectNodes" title="(frm: graph.Node, to: graph.Node)Unit">hardConnectNodes</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a>, <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.tonode" title="graph.Node">tonode</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.globalError(7fc9e56e07)" title="(msg: String)Unit">globalError</a><span class="delimiter">(</span><span title="String(&quot;[phase assembly, right after dependency on terminal phase not allowed: &quot;)" class="string">&quot;[phase assembly, right after dependency on terminal phase not allowed: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.fromnode" title="graph.Node">fromnode</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phasename" title="=&gt; String">phasename</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.$anonfun.phsname" title="String">phsname</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#scala.tools.nsc;PhaseAssembly.phasesSetToDepGraph.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>
  <span class="delimiter">}</span>

  <span class="comment">/* This is a helper method, that given a dependency graph will generate a graphviz dot
   * file showing its structure.
   * Plug-in supplied phases are marked as green nodes and hard links are marked as blue edges.
   */</span>
  private def <a title="(graph: PhaseAssembly.this.DependencyGraph, filename: String)Unit" id="scala.tools.nsc;PhaseAssembly.graphToDotFile">graphToDotFile</a><span class="delimiter">(</span><a title="PhaseAssembly.this.DependencyGraph" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.graph">graph</a>: <a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph" title="PhaseAssembly.this.DependencyGraph">DependencyGraph</a>, <a title="String" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.filename">filename</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="StringBuilder" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf">sbuf</a> = new <a href="../../package.scala.html#scala.package;StringBuilder" title="StringBuilder">StringBuilder</a>
    val <a title="scala.collection.mutable.HashSet[graph.Node]" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.extnodes">extnodes</a> = new mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[graph.Node]">HashSet</a><span class="delimiter">[</span>graph.Node<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="scala.collection.mutable.HashSet[graph.Node]" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.fatnodes">fatnodes</a> = new mutable.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[graph.Node]">HashSet</a><span class="delimiter">[</span>graph.Node<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;digraph G {\n&quot;)" class="string">&quot;digraph G {\n&quot;</span><span class="delimiter">)</span>
    for <span class="delimiter">(</span><a title="graph.Edge" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge">edge</a> &lt;- <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.graph" title="PhaseAssembly.this.DependencyGraph">graph</a>.<a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: graph.Edge =&gt; StringBuilder)Unit">edges</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames" title="()String">allPhaseNames</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\&quot;-&gt;\&quot;&quot;)" class="string">&quot;\&quot;-&gt;\&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; graph.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames" title="()String">allPhaseNames</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; graph.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; List[scala.tools.nsc.SubComponent]">get</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; scala.tools.nsc.SubComponent">head</a>.<a href="SubComponent.scala.html#scala.tools.nsc;SubComponent.internal" title="=&gt; Boolean">internal</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.extnodes" title="scala.collection.mutable.HashSet[graph.Node]">extnodes</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: graph.Node)extnodes.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a> <a href="../../Option.scala.html#scala;Option.foreach" title="(f: List[scala.tools.nsc.SubComponent] =&gt; Any)Unit">foreach</a> <span class="delimiter">(</span><span title="List[scala.tools.nsc.SubComponent]">phobjs</span> =&gt; if <span class="delimiter">(</span><span title="List[scala.tools.nsc.SubComponent]">phobjs</span>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.tools.nsc.SubComponent]">tail</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.fatnodes" title="scala.collection.mutable.HashSet[graph.Node]">fatnodes</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: graph.Node)fatnodes.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.frm" title="=&gt; graph.Node">frm</a> <span class="delimiter">)</span>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; graph.Node">to</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.phaseobj_=" title="=&gt; Option[List[scala.tools.nsc.SubComponent]]">phaseobj</a> <a href="../../Option.scala.html#scala;Option.foreach" title="(f: List[scala.tools.nsc.SubComponent] =&gt; Any)Unit">foreach</a> <span class="delimiter">(</span><span title="List[scala.tools.nsc.SubComponent]">phobjs</span> =&gt; if <span class="delimiter">(</span><span title="List[scala.tools.nsc.SubComponent]">phobjs</span>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[scala.tools.nsc.SubComponent]">tail</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.fatnodes" title="scala.collection.mutable.HashSet[graph.Node]">fatnodes</a> <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: graph.Node)fatnodes.type">+=</a> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.to" title="=&gt; graph.Node">to</a> <span class="delimiter">)</span>
      val <a title="String" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.color">color</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.edge" title="graph.Edge">edge</a>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Edge.hard" title="=&gt; Boolean">hard</a><span class="delimiter">)</span> <span title="String(&quot;#0000ff&quot;)" class="string">&quot;#0000ff&quot;</span> else <span title="String(&quot;#000000&quot;)" class="string">&quot;#000000&quot;</span>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><a href="../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;&quot;&quot;<span title="String(&quot; [color=\&quot;&quot;)"> [color=&quot;$</span><a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.color" title="String">color</a><span title="String(&quot;\&quot;]\\n&quot;)" class="string">&quot;]\n&quot;&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    for <span class="delimiter">(</span><span title="graph.Node">node</span> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: graph.Node =&gt; StringBuilder)Unit">extnodes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <span title="graph.Node">node</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames" title="()String">allPhaseNames</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <span title="graph.Node">node</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\&quot; [color=\&quot;#00ff00\&quot;]\n&quot;)" class="string">&quot;\&quot; [color=\&quot;#00ff00\&quot;]\n&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    for <span class="delimiter">(</span><span title="graph.Node">node</span> &lt;- <a href="../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.foreach" title="(f: graph.Node =&gt; StringBuilder)Unit">fatnodes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <span title="graph.Node">node</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.allPhaseNames" title="()String">allPhaseNames</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <span title="graph.Node">node</span>.<a href="#scala.tools.nsc;PhaseAssembly;DependencyGraph;Node.level_=" title="=&gt; Int">level</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\&quot; [color=\&quot;#0000ff\&quot;]\n&quot;)" class="string">&quot;\&quot; [color=\&quot;#0000ff\&quot;]\n&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;}\n&quot;)" class="string">&quot;}\n&quot;</span><span class="delimiter">)</span>
    import reflect.io._
    for <span class="delimiter">(</span><a title="scala.reflect.io.AbstractFile" id="scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.d">d</a> &lt;- <a href="Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings.outputDirs" title="=&gt; scala.tools.nsc.Settings#OutputDirs">outputDirs</a>.<a href="../../Option.scala.html#scala;Option;WithFilter.foreach" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">getSingleOutput</a> if <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.d" title="scala.reflect.io.AbstractFile">d</a>.<a href="../../reflect/io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.isVirtual" title="=&gt; Boolean">isVirtual</a><span class="delimiter">)</span> <a href="../../reflect/io/Path.scala.html#scala.reflect.io.Path.apply(2128a15a87)" title="(jfile: java.io.File)scala.reflect.io.Path">Path</a><span class="delimiter">(</span><a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.$anonfun.d" title="scala.tools.nsc.io.AbstractFile">d</a>.<a href="../../reflect/io/AbstractFile.scala.html#scala.reflect.io;AbstractFile.file" title="=&gt; java.io.File">file</a><span class="delimiter">)</span> <a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path./(5a8decf66e)" title="(child: scala.reflect.io.File)scala.reflect.io.File">/</a> <a href="../../reflect/io/File.scala.html#scala.reflect.io.File.apply" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">File</a><a href="../../io/Codec.scala.html#scala.io;LowPriorityCodecImplicits.fallbackSystemCodec" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../reflect/io/Path.scala.html#scala.reflect.io.Path.string2path" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">filename</a><span class="delimiter">)</span> <a href="../../reflect/io/File.scala.html#scala.reflect.io;File.writeAll" title="(strings: String*)Unit">writeAll</a> <a href="#scala.tools.nsc;PhaseAssembly.graphToDotFile.sbuf" title="StringBuilder">sbuf</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
