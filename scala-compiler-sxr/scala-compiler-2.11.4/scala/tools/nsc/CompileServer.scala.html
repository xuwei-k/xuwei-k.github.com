<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/CompileServer.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

package scala.tools.nsc

import java.io.PrintStream
import scala.tools.nsc.reporters.<span class="delimiter">{</span>Reporter, ConsoleReporter<span class="delimiter">}</span>
import scala.reflect.internal.util.<span class="delimiter">{</span>FakePos, Position<span class="delimiter">}</span>
import scala.tools.util.SocketServer
import settings.FscSettings

<span class="comment">/**
 *  The server part of the fsc offline compiler.  It awaits compilation
 *  commands and executes them.  It caches a compiler instance so
 *  that it can respond more quickly.
 *
 *  @author Martin Odersky
 *  @version 1.0
 */</span>
class <a title="class StandardCompileServer extends scala.tools.util.SocketServer" id="scala.tools.nsc;StandardCompileServer">StandardCompileServer</a> extends <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer" title="scala.tools.util.SocketServer">SocketServer</a> <span class="delimiter">{</span>
  lazy val <a title="scala.tools.nsc.CompileSocket" id="scala.tools.nsc;StandardCompileServer.compileSocket">compileSocket</a>: <a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket" title="scala.tools.nsc.CompileSocket">CompileSocket</a> = <a href="CompileSocket.scala.html#scala.tools.nsc.CompileSocket" title="scala.tools.nsc.CompileSocket.type">CompileSocket</a>

  private var <a title="scala.tools.nsc.Global" id="scala.tools.nsc;StandardCompileServer.compiler_=">compiler</a>: <a href="Global.scala.html#scala.tools.nsc;Global" title="scala.tools.nsc.Global">Global</a> = null
  private def <a title="()Unit" id="scala.tools.nsc;StandardCompileServer.clearCompiler">clearCompiler</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="(x$1: scala.tools.nsc.Global)Unit">compiler</a> = null

  var <a title="scala.tools.nsc.reporters.ConsoleReporter" id="scala.tools.nsc;StandardCompileServer.reporter_=">reporter</a>: <a href="reporters/ConsoleReporter.scala.html#scala.tools.nsc.reporters;ConsoleReporter" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _
  var <a title="Boolean" id="scala.tools.nsc;StandardCompileServer.shutdown_=">shutdown</a> = false
  var <a title="Boolean" id="scala.tools.nsc;StandardCompileServer.verbose_=">verbose</a> = false

  val <a title="Double" id="scala.tools.nsc;StandardCompileServer.MaxCharge">MaxCharge</a> = <span title="Double(0.8)" class="double">0.8</span>

  private val <a title="Runtime" id="scala.tools.nsc;StandardCompileServer.runtime">runtime</a> = <span title="Runtime.type">Runtime</span>.<span title="()Runtime">getRuntime</span><span class="delimiter">(</span><span class="delimiter">)</span>
  import <a href="#scala.tools.nsc;StandardCompileServer.runtime" title="=&gt; Runtime">runtime</a>.<span class="delimiter">{</span> totalMemory, freeMemory, maxMemory <span class="delimiter">}</span>

  <span class="comment">/** Create a new compiler instance */</span>
  def <a title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global" id="scala.tools.nsc;StandardCompileServer.newGlobal">newGlobal</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="scala.tools.nsc;StandardCompileServer.newGlobal.settings">settings</a>: <a href="Settings.scala.html#scala.tools.nsc;Settings" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="scala.tools.nsc;StandardCompileServer.newGlobal.reporter">reporter</a>: <a href="reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span> =
    new <a href="Global.scala.html#scala.tools.nsc;Global" title="&lt;$anon: scala.tools.nsc.Global&gt; extends scala.tools.nsc.Global" id="scala.tools.nsc;StandardCompileServer.newGlobal;$anon">Global</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.newGlobal.settings" title="scala.tools.nsc.Settings">settings</a>, <a href="#scala.tools.nsc;StandardCompileServer.newGlobal.reporter" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      override def <a title="(pos: this.Position, msg: String)Unit" id="scala.tools.nsc;StandardCompileServer.newGlobal;$anon.inform(7afd10209b)">inform</a><span class="delimiter">(</span><a title="this.Position" id="scala.tools.nsc;StandardCompileServer.newGlobal;$anon.inform(7afd10209b).pos">pos</a>: <a href="../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;Position" title="this.Position">Position</a>, <a title="String" id="scala.tools.nsc;StandardCompileServer.newGlobal;$anon.inform(7afd10209b).msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.out" title="=&gt; java.io.PrintWriter">out</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.newGlobal;$anon.inform(7afd10209b).msg" title="String">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  override def <a title="()Unit" id="scala.tools.nsc;StandardCompileServer.timeout">timeout</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;StandardCompileServer.compileSocket" title="=&gt; scala.tools.nsc.CompileSocket">compileSocket</a>.<a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket.portFile" title="(port: Int)scala.reflect.io.File">portFile</a><span class="delimiter">(</span><a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a><span class="delimiter">)</span>.<a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path.exists" title="=&gt; Boolean">exists</a><span class="delimiter">)</span>
      <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.fatal" title="(msg: String)Nothing">fatal</a><span class="delimiter">(</span><span title="String(&quot;port file no longer exists; skipping cleanup&quot;)" class="string">&quot;port file no longer exists; skipping cleanup&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Unit" id="scala.tools.nsc;StandardCompileServer.printMemoryStats">printMemoryStats</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    def <a title="(bytes: Long)String" id="scala.tools.nsc;StandardCompileServer.printMemoryStats.mb">mb</a><span class="delimiter">(</span><a title="Long" id="scala.tools.nsc;StandardCompileServer.printMemoryStats.mb.bytes">bytes</a>: <a href="../../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span> = <a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%dMB&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.printMemoryStats.mb.bytes" title="Long">bytes</a> <a href="../../Long.scala.html#scala;Long./(cfb0bf761c)" title="(x: Int)Long">/</a> <span title="Int(1000000)" class="int">1000000</span><span class="delimiter">)</span>
    <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.augmentString" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;New session: total memory = %s, max memory = %s, free memory = %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#scala.collection.immutable;StringLike.format" title="(args: Any*)String">format</a><span class="delimiter">(</span>
      <a href="#scala.tools.nsc;StandardCompileServer.printMemoryStats.mb" title="(bytes: Long)String">mb</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">totalMemory</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc;StandardCompileServer.printMemoryStats.mb" title="(bytes: Long)String">mb</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">maxMemory</a><span class="delimiter">)</span>, <a href="#scala.tools.nsc;StandardCompileServer.printMemoryStats.mb" title="(bytes: Long)String">mb</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">freeMemory</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Boolean" id="scala.tools.nsc;StandardCompileServer.isMemoryFullEnough">isMemoryFullEnough</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#scala.tools.nsc;StandardCompileServer.runtime" title="=&gt; Runtime">runtime</a>.<span title="()Unit">gc</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">totalMemory</a> <a href="../../Long.scala.html#scala;Long.-(89ec8b5973)" title="(x: Long)Long">-</a> <a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">freeMemory</a><span class="delimiter">)</span>.<a href="../../Long.scala.html#scala;Long.toDouble" title="=&gt; Double">toDouble</a> <a href="../../Double.scala.html#scala;Double./(116fb58ef6)" title="(x: Double)Double">/</a> <a href="#scala.tools.nsc;StandardCompileServer.runtime" title="()Long">maxMemory</a>.<a href="../../Long.scala.html#scala;Long.toDouble" title="=&gt; Double">toDouble</a> <a href="../../Double.scala.html#scala;Double.>(f1f7b5263c)" title="(x: Double)Boolean">&gt;</a> <a href="#scala.tools.nsc;StandardCompileServer.MaxCharge" title="=&gt; Double">MaxCharge</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Problematically, Settings are only considered equal if every setting
   *  is exactly equal.  In fsc this immediately breaks down because the randomly
   *  chosen temporary outdirs differ between client and server.  Among other
   *  things.  Long term we could use a meaningful equality; short term I'm just
   *  ignoring options which I can see causing a new compiler instance every time
   *  and which do not interestingly influence compilation products.
   */</span>
  def <a title="(s1: scala.tools.nsc.Settings, s2: scala.tools.nsc.Settings)Set[scala.tools.nsc.Settings#Setting]" id="scala.tools.nsc;StandardCompileServer.unequalSettings">unequalSettings</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="scala.tools.nsc;StandardCompileServer.unequalSettings.s1">s1</a>: <a href="Settings.scala.html#scala.tools.nsc;Settings" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.Settings" id="scala.tools.nsc;StandardCompileServer.unequalSettings.s2">s2</a>: <a href="Settings.scala.html#scala.tools.nsc;Settings" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[scala.tools.nsc.Settings#Setting]">Set</a><span class="delimiter">[</span>Settings#Setting<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.immutable.Set[String]" id="scala.tools.nsc;StandardCompileServer.unequalSettings.ignoreSettings">ignoreSettings</a> = <a href="../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: String*)scala.collection.immutable.Set[String]">Set</a><span class="delimiter">(</span><span title="String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>, <span title="String(&quot;-encoding&quot;)" class="string">&quot;-encoding&quot;</span>, <span title="String(&quot;-currentDir&quot;)" class="string">&quot;-currentDir&quot;</span><span class="delimiter">)</span>
    def <a title="(s: scala.tools.nsc.Settings)Set[scala.tools.nsc.Settings#Setting]" id="scala.tools.nsc;StandardCompileServer.unequalSettings.trim">trim</a> <span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="scala.tools.nsc;StandardCompileServer.unequalSettings.trim.s">s</a>: <a href="Settings.scala.html#scala.tools.nsc;Settings" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[scala.tools.nsc.Settings#Setting]">Set</a><span class="delimiter">[</span>Settings#Setting<span class="delimiter">]</span> = <span class="delimiter">(</span>
      <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.trim.s" title="scala.tools.nsc.Settings">s</a>.<a href="settings/AbsSettings.scala.html#scala.tools.nsc.settings;AbsSettings.userSetSettings" title="=&gt; scala.collection.Set[s.Setting]">userSetSettings</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="[B &gt;: s.Setting]=&gt; scala.collection.immutable.Set[B]">toSet</a><span title="scala.collection.immutable.Set[scala.tools.nsc.Settings#Setting]" class="delimiter">[</span>Settings#<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;Setting" title="scala.tools.nsc.Settings#Setting">Setting</a><span class="delimiter">]</span> <a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: scala.tools.nsc.Settings#Setting =&gt; Boolean)scala.collection.immutable.Set[scala.tools.nsc.Settings#Setting]">filterNot</a> <span class="delimiter">(</span><a title="scala.tools.nsc.Settings#Setting" id="scala.tools.nsc;StandardCompileServer.unequalSettings.trim.$anonfun.ss">ss</a> =&gt; <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.ignoreSettings" title="scala.collection.immutable.Set[String]">ignoreSettings</a> <a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.exists" title="(p: String =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.trim.$anonfun.ss" title="scala.tools.nsc.Settings#Setting">ss</a> <a href="settings/AbsSettings.scala.html#scala.tools.nsc.settings;AbsSettings;AbsSetting.respondsTo" title="(label: String)Boolean">respondsTo</a> <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.trim.$anonfun.$anonfun.x$1" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    val <a title="Set[scala.tools.nsc.Settings#Setting]" id="scala.tools.nsc;StandardCompileServer.unequalSettings.ss1">ss1</a> = <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.trim" title="(s: scala.tools.nsc.Settings)Set[scala.tools.nsc.Settings#Setting]">trim</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.s1" title="scala.tools.nsc.Settings">s1</a><span class="delimiter">)</span>
    val <a title="Set[scala.tools.nsc.Settings#Setting]" id="scala.tools.nsc;StandardCompileServer.unequalSettings.ss2">ss2</a> = <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.trim" title="(s: scala.tools.nsc.Settings)Set[scala.tools.nsc.Settings#Setting]">trim</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.s2" title="scala.tools.nsc.Settings">s2</a><span class="delimiter">)</span>

    <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.ss1" title="Set[scala.tools.nsc.Settings#Setting]">ss1</a> <a href="../../collection/SetLike.scala.html#scala.collection;SetLike.union" title="(that: scala.collection.GenSet[scala.tools.nsc.Settings#Setting])scala.collection.immutable.Set[scala.tools.nsc.Settings#Setting]">union</a> <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.ss2" title="Set[scala.tools.nsc.Settings#Setting]">ss2</a><span class="delimiter">)</span> <a href="../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[scala.tools.nsc.Settings#Setting])scala.collection.immutable.Set[scala.tools.nsc.Settings#Setting]">--</a> <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.ss1" title="Set[scala.tools.nsc.Settings#Setting]">ss1</a> <a href="../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.intersect" title="(that: scala.collection.GenSet[scala.tools.nsc.Settings#Setting])scala.collection.immutable.Set[scala.tools.nsc.Settings#Setting]">intersect</a> <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings.ss2" title="Set[scala.tools.nsc.Settings#Setting]">ss2</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="()Unit" id="scala.tools.nsc;StandardCompileServer.session">session</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val password        = <a href="#scala.tools.nsc;StandardCompileServer.compileSocket" title="=&gt; scala.tools.nsc.CompileSocket">compileSocket</a> <a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket.getPassword" title="String" id="scala.tools.nsc;StandardCompileServer.session.password">getPassword</a> <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a>
    val <a title="String" id="scala.tools.nsc;StandardCompileServer.session.guessedPassword">guessedPassword</a> = <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.in" title="=&gt; java.io.BufferedReader">in</a>.<span title="()String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span>
    val <a title="String" id="scala.tools.nsc;StandardCompileServer.session.input">input</a>           = <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.in" title="=&gt; java.io.BufferedReader">in</a>.<span title="()String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span>

    def <a title="(msg: String)Unit" id="scala.tools.nsc;StandardCompileServer.session.fscError">fscError</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc;StandardCompileServer.session.fscError.msg">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.out" title="=&gt; java.io.PrintWriter">out</a> <span title="(x$1: String)Unit">println</span> <span class="delimiter">(</span>
      <a href="../../reflect/internal/util/Position.scala.html#scala.reflect.internal.util;FakePos" title="(msg: String)scala.reflect.internal.util.FakePos">FakePos</a><a href="../../Predef.scala.html#scala.Predef.any2stringadd(6b32434ac5)" title="(self: scala.reflect.internal.util.FakePos)any2stringadd[scala.reflect.internal.util.FakePos]" class="delimiter">(</a><span title="String(&quot;fsc&quot;)" class="string">&quot;fsc&quot;</span><span class="delimiter">)</span> <a href="../../Predef.scala.html#scala.Predef;any2stringadd.+" title="(other: String)String">+</a> <a href="#scala.tools.nsc;StandardCompileServer.session.fscError.msg" title="String">msg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n  fsc -help  gives more information&quot;)" class="string">&quot;\n  fsc -help  gives more information&quot;</span>
    <span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.input" title="String">input</a> <span title="(x$1: Any)Boolean">==</span> null <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc;StandardCompileServer.session.password" title="String">password</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#scala.tools.nsc;StandardCompileServer.session.guessedPassword" title="String">guessedPassword</a><span class="delimiter">)</span>
      return

    val <a title="List[String]" id="scala.tools.nsc;StandardCompileServer.session.args">args</a>        = <a href="#scala.tools.nsc;StandardCompileServer.session.input" title="String">input</a>.<span title="(x$1: String, x$2: Int)Array[String]">split</span><a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;\00&quot;)" class="string">&quot;\u0000&quot;</span>, -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>
    val <a title="scala.tools.nsc.settings.FscSettings" id="scala.tools.nsc;StandardCompileServer.session.newSettings">newSettings</a> = new <a href="settings/FscSettings.scala.html#scala.tools.nsc.settings;FscSettings" title="scala.tools.nsc.settings.FscSettings">FscSettings</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.fscError" title="(msg: String)Unit">fscError</a><span class="delimiter">)</span>
    val <a title="scala.tools.nsc.OfflineCompilerCommand" id="scala.tools.nsc;StandardCompileServer.session.command">command</a>     = new <a href="OfflineCompilerCommand.scala.html#scala.tools.nsc;OfflineCompilerCommand" title="scala.tools.nsc.OfflineCompilerCommand">OfflineCompilerCommand</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.args" title="List[String]">args</a>, <a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a><span class="delimiter">)</span>
    this.<a href="#scala.tools.nsc;StandardCompileServer.verbose_=" title="(x$1: Boolean)Unit">verbose</a>    = <a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>.<a href="settings/StandardScalaSettings.scala.html#scala.tools.nsc.settings;StandardScalaSettings.verbose" title="=&gt; newSettings.BooleanSetting">verbose</a>.<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;BooleanSetting.value" title="=&gt; Boolean">value</a>

    <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Settings after normalizing paths: &quot;)" class="string">&quot;Settings after normalizing paths: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.files" title="=&gt; List[String]">files</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Input files after normalizing paths: &quot;)" class="string">&quot;Input files after normalizing paths: &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.files" title="=&gt; List[String]">files</a> <a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="(sep: String)String">mkString</a> <span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc;StandardCompileServer.printMemoryStats" title="()Unit">printMemoryStats</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="comment">// Update the idle timeout if given</span>
    if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>.<a href="settings/FscSettings.scala.html#scala.tools.nsc.settings;FscSettings.idleMins" title="=&gt; newSettings.IntSetting">idleMins</a>.<a href="../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings;MutableSettings;SettingValue.isDefault" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="Int" id="scala.tools.nsc;StandardCompileServer.session.mins">mins</a> = <a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>.<a href="settings/FscSettings.scala.html#scala.tools.nsc.settings;FscSettings.idleMins" title="=&gt; newSettings.IntSetting">idleMins</a>.<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;IntSetting.value" title="=&gt; Int">value</a>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.mins" title="Int">mins</a> <a href="../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.echo" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Disabling idle timeout on compile server.&quot;)" class="string">&quot;Disabling idle timeout on compile server.&quot;</span><span class="delimiter">)</span>
      else <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.echo" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Setting idle timeout to &quot;)" class="string">&quot;Setting idle timeout to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;StandardCompileServer.session.mins" title="Int">mins</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; minutes.&quot;)" class="string">&quot; minutes.&quot;</span><span class="delimiter">)</span>

      this.<a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.idleMinutes_=" title="(x$1: Int)Unit">idleMinutes</a> = <a href="#scala.tools.nsc;StandardCompileServer.session.mins" title="Int">mins</a>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>.<a href="settings/FscSettings.scala.html#scala.tools.nsc.settings;FscSettings.shutdown" title="=&gt; newSettings.BooleanSetting">shutdown</a>.<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;BooleanSetting.value" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc;StandardCompileServer.shutdown_=" title="(x$1: Boolean)Unit">shutdown</a> = true
      return <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.out" title="=&gt; java.io.PrintWriter">out</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;[Compile server exited]&quot;)" class="string">&quot;[Compile server exited]&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>.<a href="settings/FscSettings.scala.html#scala.tools.nsc.settings;FscSettings.reset" title="=&gt; newSettings.BooleanSetting">reset</a>.<a href="settings/MutableSettings.scala.html#scala.tools.nsc.settings;MutableSettings;BooleanSetting.value" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#scala.tools.nsc;StandardCompileServer.clearCompiler" title="()Unit">clearCompiler</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.out" title="=&gt; java.io.PrintWriter">out</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;[Compile server was reset]&quot;)" class="string">&quot;[Compile server was reset]&quot;</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.files" title="=&gt; List[String]">files</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
        return
    <span class="delimiter">}</span>

    <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = new <a href="reporters/ConsoleReporter.scala.html#scala.tools.nsc.reporters;ConsoleReporter" title="&lt;$anon: scala.tools.nsc.reporters.ConsoleReporter&gt; extends scala.tools.nsc.reporters.ConsoleReporter" id="scala.tools.nsc;StandardCompileServer.session;$anon">ConsoleReporter</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>, <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.in" title="=&gt; java.io.BufferedReader">in</a>, <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.out" title="=&gt; java.io.PrintWriter">out</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// disable prompts, so that compile server cannot block</span>
      override def <a title="()Unit" id="scala.tools.nsc;StandardCompileServer.session;$anon.displayPrompt">displayPrompt</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    def <a title="=&gt; Boolean" id="scala.tools.nsc;StandardCompileServer.session.isCompilerReusable">isCompilerReusable</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="=&gt; scala.tools.nsc.Global">compiler</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;[Creating new instance for compile server.]&quot;)" class="string">&quot;[Creating new instance for compile server.]&quot;</span><span class="delimiter">)</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;[Compiler version: &quot;)" class="string">&quot;[Compiler version: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="Properties.scala.html#scala.tools.nsc.Properties" title="scala.tools.nsc.Properties.type">Properties</a>.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.versionString" title="=&gt; String">versionString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.]&quot;)" class="string">&quot;.]&quot;</span><span class="delimiter">)</span>
        return false
      <span class="delimiter">}</span>
      val <a title="Set[scala.tools.nsc.Settings#Setting]" id="scala.tools.nsc;StandardCompileServer.session.isCompilerReusable.unequal">unequal</a> = <a href="#scala.tools.nsc;StandardCompileServer.unequalSettings" title="(s1: scala.tools.nsc.Settings, s2: scala.tools.nsc.Settings)Set[scala.tools.nsc.Settings#Setting]">unequalSettings</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>, <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="=&gt; scala.tools.nsc.Global">compiler</a>.<a href="Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.isCompilerReusable.unequal" title="Set[scala.tools.nsc.Settings#Setting]">unequal</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;[Replacing compiler with new instance because settings are unequal.]&quot;)" class="string">&quot;[Replacing compiler with new instance because settings are unequal.]&quot;</span><span class="delimiter">)</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;[Asymmetric settings: &quot;)" class="string">&quot;[Asymmetric settings: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;StandardCompileServer.session.isCompilerReusable.unequal" title="Set[scala.tools.nsc.Settings#Setting]">unequal</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(f5d728d244)" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#scala.tools.nsc;StandardCompileServer.session.isCompilerReusable.unequal" title="Set[scala.tools.nsc.Settings#Setting]">unequal</a>.<a href="../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a>
    <span class="delimiter">}</span>

    if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.shouldStopWithInfo" title="=&gt; Boolean">shouldStopWithInfo</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter.echo(7fc9e56e07)" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.getInfoMessage" title="(global: scala.tools.nsc.Global)String">getInfoMessage</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.newGlobal" title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global">newGlobal</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>, <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.files" title="=&gt; List[String]">files</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#scala.tools.nsc.reporters;Reporter.echo(7fc9e56e07)" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="OfflineCompilerCommand.scala.html#scala.tools.nsc;OfflineCompilerCommand.usageMsg" title="=&gt; String">usageMsg</a><span class="delimiter">)</span>
    else <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.isCompilerReusable" title="=&gt; Boolean">isCompilerReusable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;[Reusing existing Global instance.]&quot;)" class="string">&quot;[Reusing existing Global instance.]&quot;</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="=&gt; scala.tools.nsc.Global">compiler</a>.<a href="Global.scala.html#scala.tools.nsc;Global.currentSettings_=" title="(x$1: scala.tools.nsc.Settings)Unit">currentSettings</a> = <a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>
        <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="=&gt; scala.tools.nsc.Global">compiler</a>.<a href="Global.scala.html#scala.tools.nsc;Global.reporter_=" title="(x$1: scala.tools.nsc.reporters.Reporter)Unit">reporter</a> = <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>
      <span class="delimiter">}</span>
      else <span class="delimiter">{</span>
        <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="(x$1: scala.tools.nsc.Global)Unit">compiler</a> = <a href="#scala.tools.nsc;StandardCompileServer.newGlobal" title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global">newGlobal</a><span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.session.newSettings" title="scala.tools.nsc.settings.FscSettings">newSettings</a>, <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      val <a title="scala.tools.nsc.Global" id="scala.tools.nsc;StandardCompileServer.session.c">c</a> = <a href="#scala.tools.nsc;StandardCompileServer.compiler_=" title="=&gt; scala.tools.nsc.Global">compiler</a>
      try new <a href="#scala.tools.nsc;StandardCompileServer.session.c" title="scala.tools.nsc.Global">c</a>.<a href="Global.scala.html#scala.tools.nsc;Global;Run" title="c.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="Global.scala.html#scala.tools.nsc;Global;Run.compile" title="(filenames: List[String])Unit">compile</a> <a href="#scala.tools.nsc;StandardCompileServer.session.command" title="scala.tools.nsc.OfflineCompilerCommand">command</a>.<a href="CompilerCommand.scala.html#scala.tools.nsc;CompilerCommand.files" title="=&gt; List[String]">files</a>
      catch <span class="delimiter">{</span>
        case <span title="scala.reflect.internal.FatalError">ex</span> @ FatalError<span class="delimiter">(</span><a title="String" id="scala.tools.nsc;StandardCompileServer.session.msg">msg</a><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span>null, <span title="String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc;StandardCompileServer.session.msg" title="String">msg</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc;StandardCompileServer.clearCompiler" title="()Unit">clearCompiler</a><span class="delimiter">(</span><span class="delimiter">)</span>
        case <span title="Throwable">ex</span>: <span title="Throwable">Throwable</span> =&gt;
          <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.warn" title="(msg: String)Unit">warn</a><span class="delimiter">(</span><span title="String(&quot;Compile server encountered fatal condition: &quot;)" class="string">&quot;Compile server encountered fatal condition: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Throwable">ex</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.error" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span>null, <span title="String(&quot;Compile server encountered fatal condition: &quot;)" class="string">&quot;Compile server encountered fatal condition: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Throwable">ex</span>.<span title="()String">getMessage</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc;StandardCompileServer.shutdown_=" title="(x$1: Boolean)Unit">shutdown</a> = true
          throw <span title="Throwable">ex</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#scala.tools.nsc;StandardCompileServer.reporter_=" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/ConsoleReporter.scala.html#scala.tools.nsc.reporters;ConsoleReporter.printSummary" title="()Unit">printSummary</a><span class="delimiter">(</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.isMemoryFullEnough" title="()Boolean">isMemoryFullEnough</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.info" title="(msg: String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Nulling out compiler due to memory utilization.&quot;)" class="string">&quot;Nulling out compiler due to memory utilization.&quot;</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc;StandardCompileServer.clearCompiler" title="()Unit">clearCompiler</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


object <a title="scala.tools.nsc.CompileServer.type" id="scala.tools.nsc.CompileServer">CompileServer</a> extends <a href="#scala.tools.nsc;StandardCompileServer" title="scala.tools.nsc.StandardCompileServer">StandardCompileServer</a> <span class="delimiter">{</span>
  <span class="comment">/** A directory holding redirected output */</span>
  private lazy val <a title="scala.reflect.io.Directory" id="scala.tools.nsc.CompileServer.redirectDir">redirectDir</a> = <span class="delimiter">(</span><a href="#scala.tools.nsc;StandardCompileServer.compileSocket" title="=&gt; scala.tools.nsc.CompileSocket">compileSocket</a>.<a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket.tmpDir" title="=&gt; scala.reflect.io.Directory">tmpDir</a> <a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path./(4a8983e5f7)" title="scala.reflect.io.Path" id="scala.tools.nsc.CompileServer.redirectDir.qual$1">/</a> <a href="../../reflect/io/Path.scala.html#scala.reflect.io.Path.string2path" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;output-redirects&quot;</a><span class="delimiter">)</span>.<a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path.createDirectory$default$1" title="Boolean" id="scala.tools.nsc.CompileServer.redirectDir.x$3">createDirectory</a><span class="delimiter">(</span><span class="delimiter">)</span>

  private def <a title="(filename: String)java.io.PrintStream" id="scala.tools.nsc.CompileServer.createRedirect">createRedirect</a><span class="delimiter">(</span><a title="String" id="scala.tools.nsc.CompileServer.createRedirect.filename">filename</a>: <span title="String">String</span><span class="delimiter">)</span> =
    new <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.nsc.CompileServer.redirectDir" title="=&gt; scala.reflect.io.Directory">redirectDir</a> <a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path./(4a8983e5f7)" title="scala.reflect.io.Path" id="scala.tools.nsc.CompileServer.createRedirect.qual$3.qual$2">/</a> <a href="../../reflect/io/Path.scala.html#scala.reflect.io.Path.string2path" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">filename</a><span class="delimiter">)</span>.<a href="../../reflect/io/Path.scala.html#scala.reflect.io;Path.createFile$default$1" title="Boolean" id="scala.tools.nsc.CompileServer.createRedirect.qual$3.x$4">createFile</a><a title="scala.reflect.io.File" id="scala.tools.nsc.CompileServer.createRedirect.qual$3" class="delimiter">(</a><span class="delimiter">)</span>.<a href="../../reflect/io/File.scala.html#scala.reflect.io;File.bufferedOutput$default$1" title="Boolean" id="scala.tools.nsc.CompileServer.createRedirect.x$5">bufferedOutput</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(args: Array[String])Unit" id="scala.tools.nsc.CompileServer.main">main</a><span class="delimiter">(</span><a title="Array[String]" id="scala.tools.nsc.CompileServer.main.args">args</a>: <a href="../../Array.scala.html#scala;Array" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#scala.tools.nsc.CompileServer.execute" title="(startupCallback: () =&gt; Unit, args: Array[String])Unit">execute</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.CompileServer.main.args" title="Array[String]">args</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Used for internal testing. The callback is called upon
   * server start, notifying the caller that the server is
   * ready to run. WARNING: the callback runs in the
   * server's thread, blocking the server from doing any work
   * until the callback is finished. Callbacks should be kept
   * simple and clients should not try to interact with the
   * server while the callback is processing.
   */</span>
  def <a title="(startupCallback: () =&gt; Unit, args: Array[String])Unit" id="scala.tools.nsc.CompileServer.execute">execute</a><span class="delimiter">(</span><a title="() =&gt; Unit" id="scala.tools.nsc.CompileServer.execute.startupCallback">startupCallback</a> : <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit, <a title="Array[String]" id="scala.tools.nsc.CompileServer.execute.args">args</a>: <a href="../../Array.scala.html#scala;Array" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val debug = <a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a> <a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.contains" title="Boolean" id="scala.tools.nsc.CompileServer.execute.debug">contains</a> <span title="String(&quot;-v&quot;)" class="string">&quot;-v&quot;</span>

    if <span class="delimiter">(</span><a href="#scala.tools.nsc.CompileServer.execute.debug" title="Boolean">debug</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.echo" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Starting CompileServer on port &quot;)" class="string">&quot;Starting CompileServer on port &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a><span class="delimiter">)</span>
      <a href="../util/SocketServer.scala.html#scala.tools.util;CompileOutputCommon.echo" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Redirect dir is &quot;)" class="string">&quot;Redirect dir is &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.CompileServer.redirectDir" title="=&gt; scala.reflect.io.Directory">redirectDir</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../Console.scala.html#scala.Console.withErr(d95f47233b)" title="(err: java.io.PrintStream)(thunk: =&gt; Boolean)Boolean">withErr</a><span class="delimiter">(</span><a href="#scala.tools.nsc.CompileServer.createRedirect" title="(filename: String)java.io.PrintStream">createRedirect</a><span class="delimiter">(</span><span title="String(&quot;scala-compile-server-err.log&quot;)" class="string">&quot;scala-compile-server-err.log&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
      <a href="../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../Console.scala.html#scala.Console.withOut(92e8f450a3)" title="(out: java.io.PrintStream)(thunk: =&gt; Boolean)Boolean">withOut</a><span class="delimiter">(</span><a href="#scala.tools.nsc.CompileServer.createRedirect" title="(filename: String)java.io.PrintStream">createRedirect</a><span class="delimiter">(</span><span title="String(&quot;scala-compile-server-out.log&quot;)" class="string">&quot;scala-compile-server-out.log&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../Console.scala.html#scala.Console.err" title="=&gt; java.io.PrintStream">err</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;...starting server on socket &quot;)" class="string">&quot;...starting server on socket &quot;</span><span title="(x$1: Any)String">+</span><a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a><span title="(x$1: Any)String">+</span><span title="String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span>
        <a href="../../Console.scala.html#scala.Console" title="Console.type">Console</a>.<a href="../../Console.scala.html#scala.Console.err" title="=&gt; java.io.PrintStream">err</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc;StandardCompileServer.compileSocket" title="=&gt; scala.tools.nsc.CompileSocket">compileSocket</a> <a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket.setPort" title="(port: Int)Unit">setPort</a> <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a>
        <a href="../../Function0.scala.html#scala;Function0.apply" title="()Unit">startupCallback</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <a href="#scala.tools.nsc;StandardCompileServer.compileSocket" title="=&gt; scala.tools.nsc.CompileSocket">compileSocket</a> <a href="CompileSocket.scala.html#scala.tools.nsc;CompileSocket.deletePort" title="(port: Int)Boolean">deletePort</a> <a href="../util/SocketServer.scala.html#scala.tools.util;SocketServer.port" title="=&gt; Int">port</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
