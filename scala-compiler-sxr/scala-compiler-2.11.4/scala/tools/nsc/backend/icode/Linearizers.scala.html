<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/backend/icode/Linearizers.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */</span>


package scala
package tools.nsc
package backend
package icode

import scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
import mutable.ListBuffer

trait <a title="trait Linearizers extends AnyRef" id="scala.tools.nsc.backend.icode;Linearizers">Linearizers</a> <a href="../../../../Unit.scala.html#scala;Unit" title="Unit" class="delimiter">{</a>
  self: ICodes =&gt;

  import <a href="ICodes.scala.html#scala.tools.nsc.backend.icode;ICodes.global" title="=&gt; scala.tools.nsc.Global">global</a>.debuglog
  import <a href="Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes" title="Linearizers.this.opcodes.type">opcodes</a>._

  abstract class <a title="class Linearizer extends AnyRef" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer">Linearizer</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;Linearizer" title="Linearizers.this.Linearizer" class="delimiter">{</a>
    def <a title="(c: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer.linearize">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer.linearize.c">c</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
    def <a title="(c: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer.linearizeAt">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer.linearizeAt.c">c</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;Linearizer.linearizeAt.start">start</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A simple linearizer which predicts all branches to
   * take the 'success' branch and tries to schedule those
   * blocks immediately after the test. This is in sync with
   * how 'while' statements are translated (if the test is
   * 'true', the loop continues).
   */</span>
  class <a title="class NormalLinearizer extends Linearizers.this.Linearizer with scala.tools.nsc.backend.WorklistAlgorithm" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer">NormalLinearizer</a> extends <a href="#scala.tools.nsc.backend.icode;Linearizers;Linearizer" title="Linearizers.this.Linearizer">Linearizer</a> with <a href="../WorklistAlgorithm.scala.html#scala.tools.nsc.backend;WorklistAlgorithm" title="scala.tools.nsc.backend.WorklistAlgorithm">WorklistAlgorithm</a> <span class="delimiter">{</span>
    type <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer;Elem">Elem</a> = <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a>
    val <a title="NormalLinearizer.this.WList" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist">worklist</a>: <a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack" title="NormalLinearizer.this.WList">WList</a> = new mutable.<a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack" title="scala.collection.mutable.Stack[NormalLinearizer.this.Elem]">Stack</a><span class="delimiter">(</span><span class="delimiter">)</span>
    var <a title="List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

    def <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c)">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).b">b</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

      <a href="../WorklistAlgorithm.scala.html#scala.tools.nsc.backend;WorklistAlgorithm.run" title="(initWorklist: =&gt; Unit)Unit">run</a> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a> <a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.pushAll" title="(xs: scala.collection.TraversableOnce[NormalLinearizer.this.Elem])NormalLinearizer.this.worklist.type">pushAll</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.exh" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: Linearizers.this.ExceptionHandler =&gt; Linearizers.this.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[Linearizers.this.ExceptionHandler],Linearizers.this.BasicBlock,scala.collection.TraversableOnce[NormalLinearizer.this.Elem]])scala.collection.TraversableOnce[NormalLinearizer.this.Elem]">map</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).$anonfun.x$1" title="Linearizers.this.ExceptionHandler">_</a>.<a href="ExceptionHandlers.scala.html#scala.tools.nsc.backend.icode;ExceptionHandlers;ExceptionHandler.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.push(f6a7fcff38)" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a><span title="Unit" class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(5a3cdab44c).b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    def <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearizeAt">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearizeAt.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearizeAt.start">start</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(13ce88cec3)" title="(startBlock: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">linearize</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearizeAt.start" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/** Linearize another subtree and append it to the existing blocks. */</span>
    def <a title="(startBlock: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(13ce88cec3)">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(13ce88cec3).startBlock">startBlock</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="comment">//blocks = startBlock :: Nil;</span>
      <a href="../WorklistAlgorithm.scala.html#scala.tools.nsc.backend;WorklistAlgorithm.run" title="(initWorklist: =&gt; Unit)Unit">run</a><span class="delimiter">(</span> <span class="delimiter">{</span> <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.push(f6a7fcff38)" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a><span title="Unit" class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.linearize(13ce88cec3).startBlock" title="Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>; <span class="delimiter">}</span> <span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    def <a title="(b: Linearizers.this.BasicBlock)Unit" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement">processElement</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.lastInstruction" title="=&gt; Linearizers.this.Instruction">lastInstruction</a> match <span class="delimiter">{</span>
          case JUMP<span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.whereto">whereto</a><span class="delimiter">)</span> =&gt;
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.whereto" title="Linearizers.this.BasicBlock">whereto</a><span class="delimiter">)</span>
          case CJUMP<span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">success</span>, <span title="Linearizers.this.BasicBlock">failure</span>, _, _<span class="delimiter">)</span> =&gt;
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">success</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">failure</span><span class="delimiter">)</span>
          case CZJUMP<span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">success</span>, <span title="Linearizers.this.BasicBlock">failure</span>, _, _<span class="delimiter">)</span> =&gt;
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">success</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><span title="Linearizers.this.BasicBlock">failure</span><span class="delimiter">)</span>
          case SWITCH<span class="delimiter">(</span>_, <a title="List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.labels">labels</a><span class="delimiter">)</span> =&gt;
            <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(367d5625db)" title="(bs: List[Linearizers.this.BasicBlock])Unit">add</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.labels" title="List[Linearizers.this.BasicBlock]">labels</a><span class="delimiter">)</span>
          case RETURN<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          case THROW<span class="delimiter">(</span><a title="Linearizers.this.global.Symbol" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.processElement.clasz">clasz</a><span class="delimiter">)</span> =&gt;   <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    def <a title="=&gt; NormalLinearizer.this.Elem" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.dequeue">dequeue</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="NormalLinearizer.this.Elem">Elem</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.pop" title="()NormalLinearizer.this.Elem">pop</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="comment">/**
     * Prepend b to the list, if not already scheduled.
     * TODO: use better test than linear search
     */</span>
    def <a title="(b: Linearizers.this.BasicBlock)Unit" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428).b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: Linearizers.this.BasicBlock)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428).b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      else <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428).b" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.worklist" title="=&gt; NormalLinearizer.this.WList">worklist</a> <a href="../../../../collection/mutable/Stack.scala.html#scala.collection.mutable;Stack.push(f6a7fcff38)" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428).b" title="Linearizers.this.BasicBlock">b</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(bs: List[Linearizers.this.BasicBlock])Unit" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(367d5625db)">add</a><span class="delimiter">(</span><a title="List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(367d5625db).bs">bs</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(367d5625db).bs" title="List[Linearizers.this.BasicBlock]">bs</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;NormalLinearizer.add(0b92ace428)" title="(b: Linearizers.this.BasicBlock)Unit">add</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Linearize code using a depth first traversal.
   */</span>
  class <a title="class DepthFirstLinerizer extends Linearizers.this.Linearizer" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer">DepthFirstLinerizer</a> extends <a href="#scala.tools.nsc.backend.icode;Linearizers;Linearizer" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    var <a title="List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

    def <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.exh" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Linearizers.this.ExceptionHandler =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize.$anonfun.b">b</a> =&gt; <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearize.$anonfun.b" title="Linearizers.this.ExceptionHandler">b</a>.<a href="ExceptionHandlers.scala.html#scala.tools.nsc.backend.icode;ExceptionHandlers;ExceptionHandler.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    def <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearizeAt">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearizeAt.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearizeAt.start">start</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.linearizeAt.start" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    def <a title="(b: Linearizers.this.BasicBlock)Unit" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs">dfs</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs.b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.add" title="(b: Linearizers.this.BasicBlock)Boolean">add</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs.b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.successors" title="=&gt; List[Linearizers.this.BasicBlock]">successors</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.dfs" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a>

    <span class="comment">/**
     * Prepend b to the list, if not already scheduled.
     * TODO: use better test than linear search
     * @return Returns true if the block was added.
     */</span>
    def <a title="(b: Linearizers.this.BasicBlock)Boolean" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.add">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.add.b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> =
      <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: Linearizers.this.BasicBlock)Boolean">contains</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.add.b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.add.b" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;DepthFirstLinerizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
        true
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Linearize code in reverse post order. In fact, it does
   * a post order traversal, prepending visited nodes to the list.
   * This way, it is constructed already in reverse post order.
   */</span>
  class <a title="class ReversePostOrderLinearizer extends Linearizers.this.Linearizer" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer">ReversePostOrderLinearizer</a> extends <a href="#scala.tools.nsc.backend.icode;Linearizers;Linearizer" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    var <a title="List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
    val <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.visited">visited</a> = new mutable.<a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">HashSet</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
    val <a title="scala.collection.mutable.BitSet" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.added">added</a> = new mutable.<a href="../../../../collection/mutable/BitSet.scala.html#scala.collection.mutable;BitSet" title="scala.collection.mutable.BitSet">BitSet</a>

    def <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.visited" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a>.<a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.added" title="=&gt; scala.collection.mutable.BitSet">added</a>.<a href="../../../../collection/mutable/BitSet.scala.html#scala.collection.mutable;BitSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.exh" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Linearizers.this.ExceptionHandler =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.$anonfun.b">b</a> =&gt; <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.$anonfun.b" title="Linearizers.this.ExceptionHandler">b</a>.<a href="ExceptionHandlers.scala.html#scala.tools.nsc.backend.icode;ExceptionHandlers;ExceptionHandler.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>

      <span class="comment">// if the start block has predecessors, it won't be the first one</span>
      <span class="comment">// in the linearization, so we need to enforce it here</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.predecessors" title="=&gt; List[Linearizers.this.BasicBlock]">predecessors</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
      else
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filterNot" title="(p: Linearizers.this.BasicBlock =&gt; Boolean)List[Linearizers.this.BasicBlock]">filterNot</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.$anonfun.x$4" title="Linearizers.this.BasicBlock">_</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearizeAt">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearizeAt.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearizeAt.start">start</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.visited" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a>.<a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.added" title="=&gt; scala.collection.mutable.BitSet">added</a>.<a href="../../../../collection/mutable/BitSet.scala.html#scala.collection.mutable;BitSet.clear" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.linearizeAt.start" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
    <span class="delimiter">}</span>

    def <a title="(b: Linearizers.this.BasicBlock)Unit" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo">rpo</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> =
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: Linearizers.this.BasicBlock)Boolean">visited</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.visited" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a> <a href="../../../../collection/mutable/HashSet.scala.html#scala.collection.mutable;HashSet.+=(53f2a8289f)" title="(elem: Linearizers.this.BasicBlock)ReversePostOrderLinearizer.this.visited.type">+=</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b" title="Linearizers.this.BasicBlock">b</a>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.successors" title="=&gt; List[Linearizers.this.BasicBlock]">successors</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.rpo.b" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="comment">/**
     * Prepend b to the list, if not already scheduled.
     * @return Returns true if the block was added.
     */</span>
    def <a title="(b: Linearizers.this.BasicBlock)Unit" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add.b">b</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Linearizer adding block &quot;)" class="string">&quot;Linearizer adding block &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.label" title="=&gt; Int">label</a><span class="delimiter">)</span>

      if <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.apply" title="(elem: Int)Boolean">added</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.label" title="=&gt; Int">label</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.added" title="=&gt; scala.collection.mutable.BitSet">added</a> <a href="../../../../collection/mutable/BitSet.scala.html#scala.collection.mutable;BitSet.+=(0d9da624a1)" title="(elem: Int)ReversePostOrderLinearizer.this.added.type">+=</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add.b" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.label" title="=&gt; Int">label</a>
        <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.add.b" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#scala.tools.nsc.backend.icode;Linearizers;ReversePostOrderLinearizer.blocks_=" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** A 'dump' of the blocks in this method, which does not
   *  require any well-formedness of the basic blocks (like
   *  the last instruction being a jump).
   */</span>
  class <a title="class DumpLinearizer extends Linearizers.this.Linearizer" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer">DumpLinearizer</a> extends <a href="#scala.tools.nsc.backend.icode;Linearizers;Linearizer" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    def <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearize">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearize.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="#scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearize.m" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.blocks" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
    def <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearizeAt">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearizeAt.m">m</a>: <a href="Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="scala.tools.nsc.backend.icode;Linearizers;DumpLinearizer.linearizeAt.start">start</a>: <a href="BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = sys.<a href="../../../../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;not implemented&quot;)" class="string">&quot;not implemented&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
