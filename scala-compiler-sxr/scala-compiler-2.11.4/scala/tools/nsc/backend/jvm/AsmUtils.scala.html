<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/backend/jvm/AsmUtils.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2014 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

package scala.tools.nsc.backend.jvm

import scala.tools.asm.tree.<span class="delimiter">{</span>ClassNode, MethodNode<span class="delimiter">}</span>
import java.io.PrintWriter
import scala.tools.asm.util.<span class="delimiter">{</span>TraceClassVisitor, TraceMethodVisitor, Textifier<span class="delimiter">}</span>
import scala.tools.asm.ClassReader

object <a title="scala.tools.nsc.backend.jvm.AsmUtils.type" id="scala.tools.nsc.backend.jvm.AsmUtils">AsmUtils</a> <a href="#scala.tools.nsc.backend.jvm.AsmUtils" title="scala.tools.nsc.backend.jvm.AsmUtils.type" class="delimiter">{</a>

  <span class="comment">/**
   * Print the bytecode of methods generated by GenBCode to the standard output. Only methods
   * whose name contains `traceMethodPattern` are traced.
   */</span>
  final val <a title="Boolean(false)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethodEnabled">traceMethodEnabled</a> = false
  final val <a title="String(&quot;&quot;)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethodPattern">traceMethodPattern</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * Print the bytecode of classes generated by GenBCode to the standard output.
   */</span>
  final val <a title="Boolean(false)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClassEnabled">traceClassEnabled</a> = false
  final val <a title="String(&quot;&quot;)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClassPattern">traceClassPattern</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/**
   * Print the bytedcode of classes as they are serialized by the ASM library. The serialization
   * performed by `asm.ClassWriter` can change the code generated by GenBCode. For example, it
   * introduces stack map frames, it computes the maximal stack sizes, and it replaces dead
   * code by NOPs (see also https://github.com/scala/scala/pull/3726#issuecomment-42861780).
   */</span>
  final val <a title="Boolean(false)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceSerializedClassEnabled">traceSerializedClassEnabled</a> = false
  final val <a title="String(&quot;&quot;)" id="scala.tools.nsc.backend.jvm.AsmUtils.traceSerializedClassPattern">traceSerializedClassPattern</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  def <a title="(mnode: scala.tools.asm.tree.MethodNode)Unit" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethod">traceMethod</a><span class="delimiter">(</span><a title="scala.tools.asm.tree.MethodNode" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.mnode">mnode</a>: <span title="scala.tools.asm.tree.MethodNode">MethodNode</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <a href="../../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Bytecode for method &quot;)">Bytecode for method $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.mnode" title="scala.tools.asm.tree.MethodNode">mnode</a>.<span title="String">name</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    val <a title="scala.tools.asm.util.Textifier" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.p">p</a> = new <span title="scala.tools.asm.util.Textifier">Textifier</span>
    val <a title="scala.tools.asm.util.TraceMethodVisitor" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.tracer">tracer</a> = new <span title="scala.tools.asm.util.TraceMethodVisitor">TraceMethodVisitor</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.p" title="scala.tools.asm.util.Textifier">p</a><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.mnode" title="scala.tools.asm.tree.MethodNode">mnode</a>.<span title="(x$1: scala.tools.asm.MethodVisitor)Unit">accept</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.tracer" title="scala.tools.asm.util.TraceMethodVisitor">tracer</a><span class="delimiter">)</span>
    val <a title="java.io.PrintWriter" id="scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.w">w</a> = new <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="java.io.PrintStream">out</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.p" title="scala.tools.asm.util.Textifier">p</a>.<span title="(x$1: java.io.PrintWriter)Unit">print</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.w" title="java.io.PrintWriter">w</a><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceMethod.w" title="java.io.PrintWriter">w</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(cnode: scala.tools.asm.tree.ClassNode)Unit" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49)">traceClass</a><span class="delimiter">(</span><a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).cnode">cnode</a>: <span title="scala.tools.asm.tree.ClassNode">ClassNode</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <a href="../../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Bytecode for class &quot;)">Bytecode for class $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).cnode" title="scala.tools.asm.tree.ClassNode">cnode</a>.<span title="String">name</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
    val <a title="java.io.PrintWriter" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).w">w</a> = new <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><span title="System.type">System</span>.<span title="java.io.PrintStream">out</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).cnode" title="scala.tools.asm.tree.ClassNode">cnode</a>.<span title="(x$1: scala.tools.asm.ClassVisitor)Unit">accept</span><span class="delimiter">(</span>new <span title="scala.tools.asm.util.TraceClassVisitor">TraceClassVisitor</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).w" title="java.io.PrintWriter">w</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49).w" title="java.io.PrintWriter">w</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(bytes: Array[Byte])Unit" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9)">traceClass</a><span class="delimiter">(</span><a title="Array[Byte]" id="scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9).bytes">bytes</a>: <a href="../../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(2b4c5cca49)" title="(cnode: scala.tools.asm.tree.ClassNode)Unit">traceClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.readClass" title="(bytes: Array[Byte])scala.tools.asm.tree.ClassNode">readClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9).bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span><span class="delimiter">)</span>

  def <a title="(bytes: Array[Byte])scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm.AsmUtils.readClass">readClass</a><span class="delimiter">(</span><a title="Array[Byte]" id="scala.tools.nsc.backend.jvm.AsmUtils.readClass.bytes">bytes</a>: <a href="../../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.tools.asm.tree.ClassNode">ClassNode</span> = <span class="delimiter">{</span>
    val <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm.AsmUtils.readClass.node">node</a> = new <span title="scala.tools.asm.tree.ClassNode">ClassNode</span><span class="delimiter">(</span><span class="delimiter">)</span>
    new <span title="scala.tools.asm.ClassReader">ClassReader</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.readClass.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span>.<span title="(x$1: scala.tools.asm.ClassVisitor, x$2: Int)Unit">accept</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.AsmUtils.readClass.node" title="scala.tools.asm.tree.ClassNode">node</a>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <a href="#scala.tools.nsc.backend.jvm.AsmUtils.readClass.node" title="scala.tools.asm.tree.ClassNode">node</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
