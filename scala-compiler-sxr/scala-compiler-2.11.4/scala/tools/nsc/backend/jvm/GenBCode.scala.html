<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/backend/jvm/GenBCode.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2012 LAMP/EPFL
 * @author  Martin Odersky
 */</span>


package scala
package tools.nsc
package backend
package jvm

import scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
import scala.annotation.switch
import scala.reflect.internal.util.Statistics

import scala.tools.asm
import scala.tools.asm.tree.ClassNode

<span class="comment">/*
 *  Prepare in-memory representations of classfiles using the ASM Tree API, and serialize them to disk.
 *
 *  Three pipelines are at work, each taking work items from a queue dedicated to that pipeline:
 *
 *  (There's another pipeline so to speak, the one that populates queue-1 by traversing a CompilationUnit until ClassDefs are found,
 *   but the &quot;interesting&quot; pipelines are the ones described below)
 *
 *    (1) In the first queue, an item consists of a ClassDef along with its arrival position.
 *        This position is needed at the time classfiles are serialized to disk,
 *        so as to emit classfiles in the same order CleanUp handed them over.
 *        As a result, two runs of the compiler on the same files produce jars that are identical on a byte basis.
 *        See `ant test.stability`
 *
 *    (2) The second queue contains items where a ClassDef has been lowered into:
 *          (a) an optional mirror class,
 *          (b) a plain class, and
 *          (c) an optional bean class.
 *
 *    (3) The third queue contains items ready for serialization.
 *        It's a priority queue that follows the original arrival order,
 *        so as to emit identical jars on repeated compilation of the same sources.
 *
 *  Plain, mirror, and bean classes are built respectively by PlainClassBuilder, JMirrorBuilder, and JBeanInfoBuilder.
 *
 *  @author  Miguel Garcia, http://lamp.epfl.ch/~magarcia/ScalaCompilerCornerReloaded/
 *  @version 1.0
 *
 */</span>
abstract class <a title="class GenBCode extends scala.tools.nsc.backend.jvm.BCodeSyncAndTry" id="scala.tools.nsc.backend.jvm;GenBCode">GenBCode</a> extends <a href="BCodeSyncAndTry.scala.html#scala.tools.nsc.backend.jvm;BCodeSyncAndTry" title="scala.tools.nsc.backend.jvm.BCodeSyncAndTry">BCodeSyncAndTry</a> <span class="delimiter">{</span>
  import <a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;BytecodeWriters.global" title="=&gt; scala.tools.nsc.Global">global</a>._

  import <a href="BCodeIdiomatic.scala.html#scala.tools.nsc.backend.jvm;BCodeIdiomatic.bTypes" title="=&gt; scala.tools.nsc.backend.jvm.BTypesFromSymbols[GenBCode.this.global.type]">bTypes</a>._
  import <a href="BTypesFromSymbols.scala.html#scala.tools.nsc.backend.jvm;BTypesFromSymbols.coreBTypes" title="=&gt; scala.tools.nsc.backend.jvm.CoreBTypesProxy[GenBCode.this.bTypes.type]">coreBTypes</a>._

  val <a title="String" id="scala.tools.nsc.backend.jvm;GenBCode.phaseName">phaseName</a> = <span title="String(&quot;jvm&quot;)" class="string">&quot;jvm&quot;</span>

  override def <a title="(prev: scala.tools.nsc.Phase)GenBCode.this.BCodePhase" id="scala.tools.nsc.backend.jvm;GenBCode.newPhase">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="scala.tools.nsc.backend.jvm;GenBCode.newPhase.prev">prev</a>: <a href="../../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase" title="GenBCode.this.BCodePhase">BCodePhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode.newPhase.prev" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span>

  final class <a title="class PlainClassBuilder extends GenBCode.this.SyncAndTryBuilder" id="scala.tools.nsc.backend.jvm;GenBCode;PlainClassBuilder">PlainClassBuilder</a><a href="#scala.tools.nsc.backend.jvm;GenBCode;PlainClassBuilder" title="GenBCode.this.PlainClassBuilder" class="delimiter">(</a><a title="GenBCode.this.global.CompilationUnit" id="scala.tools.nsc.backend.jvm;GenBCode;PlainClassBuilder.cunit">cunit</a>: <a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="GenBCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="BCodeSyncAndTry.scala.html#scala.tools.nsc.backend.jvm;BCodeSyncAndTry;SyncAndTryBuilder" title="GenBCode.this.SyncAndTryBuilder">SyncAndTryBuilder</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;PlainClassBuilder.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span>

  class <a title="class BCodePhase extends GenBCode.this.StdPhase" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase">BCodePhase</a><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase" title="GenBCode.this.BCodePhase" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.prev">prev</a>: <a href="../../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> extends <a href="../../SubComponent.scala.html#scala.tools.nsc;SubComponent;StdPhase" title="GenBCode.this.StdPhase">StdPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.prev" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    override def <a title="=&gt; String" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.name">name</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode.phaseName" title="=&gt; String">phaseName</a>
    override def <a title="=&gt; String" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.description">description</a> = <span title="String(&quot;Generate bytecode from ASTs using the ASM library&quot;)" class="string">&quot;Generate bytecode from ASTs using the ASM library&quot;</span>
    override def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.erasedTypes">erasedTypes</a> = true

    private var <a title="GenBCode.this.BytecodeWriter" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.bytecodeWriter_=">bytecodeWriter</a>  : <a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;BytecodeWriters;BytecodeWriter" title="GenBCode.this.BytecodeWriter">BytecodeWriter</a>   = null
    private var <a title="GenBCode.this.JMirrorBuilder" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.mirrorCodeGen_=">mirrorCodeGen</a>   : <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JMirrorBuilder" title="GenBCode.this.JMirrorBuilder">JMirrorBuilder</a>   = null
    private var <a title="GenBCode.this.JBeanInfoBuilder" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.beanInfoCodeGen_=">beanInfoCodeGen</a> : <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JBeanInfoBuilder" title="GenBCode.this.JBeanInfoBuilder">JBeanInfoBuilder</a> = null

    <span class="comment">/* ---------------- q1 ---------------- */</span>

    case class <a title="class Item1 extends AnyRef with Product with Serializable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item1.readResolve">Item1</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.arrivalPos">arrivalPos</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a>, <a title="GenBCode.this.global.ClassDef" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.cd">cd</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ClassDef" title="GenBCode.this.global.ClassDef">ClassDef</a>, <a title="GenBCode.this.global.CompilationUnit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.cunit">cunit</a>: <a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="GenBCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.isPoison">isPoison</a> = <span class="delimiter">{</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.arrivalPos" title="=&gt; Int">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> Int.<span title="Int(2147483647)">MaxValue</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    private val <a title="BCodePhase.this.Item1" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison1">poison1</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item1.readResolve" title="(arrivalPos: Int, cd: GenBCode.this.global.ClassDef, cunit: GenBCode.this.global.CompilationUnit)BCodePhase.this.Item1">Item1</a><span class="delimiter">(</span>Int.<span title="Int(2147483647)">MaxValue</span>, null, null<span class="delimiter">)</span>
    private val <a title="java.util.LinkedList[BCodePhase.this.Item1]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1">q1</a> = new java.util.<span title="java.util.LinkedList[BCodePhase.this.Item1]">LinkedList</span><span class="delimiter">[</span>Item1<span class="delimiter">]</span>

    <span class="comment">/* ---------------- q2 ---------------- */</span>

    case class <a title="class Item2 extends AnyRef with Product with Serializable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item2.readResolve">Item2</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.arrivalPos">arrivalPos</a>:   <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a>,
                     <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.mirror">mirror</a>:       asm.tree.<span title="scala.tools.asm.tree.ClassNode">ClassNode</span>,
                     <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.plain">plain</a>:        asm.tree.<span title="scala.tools.asm.tree.ClassNode">ClassNode</span>,
                     <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.bean">bean</a>:         asm.tree.<span title="scala.tools.asm.tree.ClassNode">ClassNode</span>,
                     <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.outFolder">outFolder</a>:    scala.tools.nsc.io.<a href="../../../../reflect/io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.isPoison">isPoison</a> = <span class="delimiter">{</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.arrivalPos" title="=&gt; Int">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> Int.<span title="Int(2147483647)">MaxValue</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    private val <a title="BCodePhase.this.Item2" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison2">poison2</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item2.readResolve" title="(arrivalPos: Int, mirror: scala.tools.asm.tree.ClassNode, plain: scala.tools.asm.tree.ClassNode, bean: scala.tools.asm.tree.ClassNode, outFolder: tools.nsc.io.AbstractFile)BCodePhase.this.Item2">Item2</a><span class="delimiter">(</span>Int.<span title="Int(2147483647)">MaxValue</span>, null, null, null, null<span class="delimiter">)</span>
    private val <a title="java.util.LinkedList[BCodePhase.this.Item2]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2">q2</a> = new _root_.java.util.<span title="java.util.LinkedList[BCodePhase.this.Item2]">LinkedList</span><span class="delimiter">[</span>Item2<span class="delimiter">]</span>

    <span class="comment">/* ---------------- q3 ---------------- */</span>

    <span class="comment">/*
     *  An item of queue-3 (the last queue before serializing to disk) contains three of these
     *  (one for each of mirror, plain, and bean classes).
     *
     *  @param jclassName  internal name of the class
     *  @param jclassBytes bytecode emitted for the class SubItem3 represents
     */</span>
    case class <a title="class SubItem3 extends AnyRef with Product with Serializable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve">SubItem3</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a>
      <a title="String" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;SubItem3.jclassName">jclassName</a>:  <span title="String">String</span>,
      <a title="Array[Byte]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;SubItem3.jclassBytes">jclassBytes</a>: <a href="../../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
    <span class="delimiter">)</span>

    case class <a title="class Item3 extends AnyRef with Product with Serializable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item3.readResolve">Item3</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos">arrivalPos</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a>,
                     <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.mirror">mirror</a>:     <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="BCodePhase.this.SubItem3">SubItem3</a>,
                     <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.plain">plain</a>:      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="BCodePhase.this.SubItem3">SubItem3</a>,
                     <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.bean">bean</a>:       <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="BCodePhase.this.SubItem3">SubItem3</a>,
                     <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.outFolder">outFolder</a>:  scala.tools.nsc.io.<a href="../../../../reflect/io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.isPoison">isPoison</a>  = <span class="delimiter">{</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos" title="=&gt; Int">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> Int.<span title="Int(2147483647)">MaxValue</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    private val <a title="&lt;refinement of java.util.Comparator[BCodePhase.this.Item3]&gt; extends Object with java.util.Comparator[BCodePhase.this.Item3]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator">i3comparator</a> = new <a title="&lt;$anon: java.util.Comparator[BCodePhase.this.Item3]&gt; extends Object with java.util.Comparator[BCodePhase.this.Item3]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon">java</a>.util.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon" title="java.util.Comparator[BCodePhase.this.Item3]">Comparator</a><span class="delimiter">[</span>Item3<span class="delimiter">]</span> <span class="delimiter">{</span>
      override def <a title="(a: BCodePhase.this.Item3, b: BCodePhase.this.Item3)Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare">compare</a><span class="delimiter">(</span><a title="BCodePhase.this.Item3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.a">a</a>: <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item3.readResolve" title="BCodePhase.this.Item3">Item3</a>, <a title="BCodePhase.this.Item3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.b">b</a>: <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item3.readResolve" title="BCodePhase.this.Item3">Item3</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.a" title="BCodePhase.this.Item3">a</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos" title="=&gt; Int">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.b" title="BCodePhase.this.Item3">b</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos" title="=&gt; Int">arrivalPos</a><span class="delimiter">)</span> -<span title="Int(-1)" class="int">1</span>
        else if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.a" title="BCodePhase.this.Item3">a</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos" title="=&gt; Int">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator;$anon.compare.b" title="BCodePhase.this.Item3">b</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.arrivalPos" title="=&gt; Int">arrivalPos</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span>
        else <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    private val <a title="BCodePhase.this.Item3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison3">poison3</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item3.readResolve" title="(arrivalPos: Int, mirror: BCodePhase.this.SubItem3, plain: BCodePhase.this.SubItem3, bean: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)BCodePhase.this.Item3">Item3</a><span class="delimiter">(</span>Int.<span title="Int(2147483647)">MaxValue</span>, null, null, null, null<span class="delimiter">)</span>
    private val <a title="java.util.PriorityQueue[BCodePhase.this.Item3]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3">q3</a> = new java.util.<span title="java.util.PriorityQueue[BCodePhase.this.Item3]">PriorityQueue</span><span class="delimiter">[</span>Item3<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(1000)" class="int">1000</span>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.i3comparator" title="=&gt; java.util.Comparator[BCodePhase.this.Item3]">i3comparator</a><span class="delimiter">)</span>

    <span class="comment">/*
     *  Pipeline that takes ClassDefs from queue-1, lowers them into an intermediate form, placing them on queue-2
     */</span>
    class <a title="class Worker1 extends AnyRef" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1">Worker1</a><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1" title="BCodePhase.this.Worker1" class="delimiter">(</a><a title="Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.needsOutFolder">needsOutFolder</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      val <a title="scala.collection.mutable.Map[String,GenBCode.this.global.Symbol]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.caseInsensitively">caseInsensitively</a> = mutable.<a href="../../../../collection/mutable/Map.scala.html#scala.collection.mutable.Map" title="scala.collection.mutable.Map.type">Map</a>.<a href="../../../../collection/mutable/Map.scala.html#scala.collection.mutable.Map.empty" title="[A, B]=&gt; scala.collection.mutable.Map[A,B]">empty</a><span title="scala.collection.mutable.Map[String,GenBCode.this.global.Symbol]" class="delimiter">[</span><span title="String">String</span>, <a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="GenBCode.this.global.Symbol">Symbol</a><span class="delimiter">]</span>

      def <a title="()Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        while <span class="delimiter">(</span>true<span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.while$1" title="()Unit" class="delimiter">{</a>
          val <a title="BCodePhase.this.Item1" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.item">item</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1" title="=&gt; java.util.LinkedList[BCodePhase.this.Item1]">q1</a>.<span title="()BCodePhase.this.Item1">poll</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.item" title="BCodePhase.this.Item1">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.isPoison" title="=&gt; Boolean">isPoison</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2" title="=&gt; java.util.LinkedList[BCodePhase.this.Item2]">q2</a> <span title="(x$1: BCodePhase.this.Item2)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison2" title="=&gt; BCodePhase.this.Item2">poison2</a>
            return
          <span class="delimiter">}</span>
          else <span class="delimiter">{</span>
            try   <span class="delimiter">{</span> <a href="../../Global.scala.html#scala.tools.nsc;Global;GlobalPhase.withCurrentUnit" title="(unit: GenBCode.this.global.CompilationUnit)(task: =&gt; Unit)Unit">withCurrentUnit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.item" title="BCodePhase.this.Item1">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.cunit" title="=&gt; GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit" title="(item: BCodePhase.this.Item1)Unit">visit</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.item" title="BCodePhase.this.Item1">item</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
            catch <span class="delimiter">{</span>
              case <a title="Throwable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.ex">ex</a>: <span title="Throwable">Throwable</span> =&gt;
                <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.ex" title="Throwable">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <a href="../../Reporting.scala.html#scala.tools.nsc;Reporting.error" title="(msg: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Error while emitting &quot;)">Error while emitting $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.item" title="BCodePhase.this.Item1">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item1.cunit" title="=&gt; GenBCode.this.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.source" title="=&gt; scala.reflect.internal.util.SourceFile">source</a><span class="delimiter">}</span><span title="String(&quot;\\n&quot;)">\n$</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run.ex" title="Throwable">ex</a>.<span title="()String">getMessage</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">/*
       *  Checks for duplicate internal names case-insensitively,
       *  builds ASM ClassNodes for mirror, plain, and bean classes;
       *  enqueues them in queue-2.
       *
       */</span>
      def <a title="(item: BCodePhase.this.Item1)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit">visit</a><span class="delimiter">(</span><a title="BCodePhase.this.Item1" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.item">item</a>: <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item1.readResolve" title="BCodePhase.this.Item1">Item1</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val Item1<a href="../../../../Tuple3.scala.html#scala;Tuple3" title="(Int, GenBCode.this.global.ClassDef, GenBCode.this.global.CompilationUnit)" class="delimiter">(</a><a href="../../../../Tuple3.scala.html#scala;Tuple3._1" title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.arrivalPos">arrivalPos</a>, <a href="../../../../Tuple3.scala.html#scala;Tuple3._2" title="GenBCode.this.global.ClassDef" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cd">cd</a>, <a href="../../../../Tuple3.scala.html#scala;Tuple3._3" title="GenBCode.this.global.CompilationUnit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cunit">cunit</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.item" title="BCodePhase.this.Item1">item</a>
        val <a title="GenBCode.this.global.Symbol" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol">claszSymbol</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cd" title="GenBCode.this.global.ClassDef">cd</a>.<a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; GenBCode.this.global.Symbol">symbol</a>

        <span class="comment">// GenASM checks this before classfiles are emitted, https://github.com/scala/scala/commit/e4d1d930693ac75d8eb64c2c3c69f2fc22bec739</span>
        val <a title="String" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.lowercaseJavaClassName">lowercaseJavaClassName</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.javaClassName" title="=&gt; String">javaClassName</a>.<span title="()String">toLowerCase</span>
        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.caseInsensitively" title="=&gt; scala.collection.mutable.Map[String,GenBCode.this.global.Symbol]">caseInsensitively</a>.<a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.get" title="(key: String)Option[GenBCode.this.global.Symbol]">get</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.lowercaseJavaClassName" title="String">lowercaseJavaClassName</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case <a href="../../../../Option.scala.html#scala.None" title="None.type">None</a> =&gt;
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.caseInsensitively" title="=&gt; scala.collection.mutable.Map[String,GenBCode.this.global.Symbol]">caseInsensitively</a>.<a href="../../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.put" title="(key: String, value: GenBCode.this.global.Symbol)Option[GenBCode.this.global.Symbol]">put</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.lowercaseJavaClassName" title="String">lowercaseJavaClassName</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a><span class="delimiter">)</span>
          case Some<span class="delimiter">(</span><a title="GenBCode.this.global.Symbol" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.dupClassSym">dupClassSym</a><span class="delimiter">)</span> =&gt;
            <a href="../../Global.scala.html#scala.tools.nsc;Global.reporter" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporter.warning" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">warning</a><span class="delimiter">(</span>
              <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>.<a href="../../../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; GenBCode.this.global.Position">pos</a>,
              <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Class &quot;)">Class $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.javaClassName" title="=&gt; String">javaClassName</a><span class="delimiter">}</span><span title="String(&quot; differs only in case from &quot;)"> differs only in case from $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.dupClassSym" title="GenBCode.this.global.Symbol">dupClassSym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.javaClassName" title="=&gt; String">javaClassName</a><span class="delimiter">}</span><span title="String(&quot;. &quot;)" class="string">. &quot;</span> <span title="(x$1: Any)String">+</span>
              <span title="String(&quot;Such classes will overwrite one another on case-insensitive filesystems.&quot;)" class="string">&quot;Such classes will overwrite one another on case-insensitive filesystems.&quot;</span>
            <span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="comment">// -------------- mirror class, if needed --------------</span>
        val <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.mirrorC">mirrorC</a> =
          if <span class="delimiter">(</span><a href="BTypesFromSymbols.scala.html#scala.tools.nsc.backend.jvm;BTypesFromSymbols.isTopLevelModuleClass" title="(sym: GenBCode.this.bTypes.global.Symbol)Boolean">isTopLevelModuleClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.companionClass" title="=&gt; GenBCode.this.global.Symbol">companionClass</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols.NoSymbol" title="=&gt; GenBCode.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.mirrorCodeGen_=" title="=&gt; GenBCode.this.JMirrorBuilder">mirrorCodeGen</a>.<a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JMirrorBuilder.genMirrorClass" title="(moduleClass: GenBCode.this.global.Symbol, cunit: GenBCode.this.global.CompilationUnit)scala.tools.asm.tree.ClassNode">genMirrorClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="../../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;No mirror class for module with linked class: &quot;)">No mirror class for module with linked class: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.fullName(3bf7c90be7)" title="=&gt; String">fullName</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
              null
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else null

        <span class="comment">// -------------- &quot;plain&quot; class --------------</span>
        val <a title="GenBCode.this.PlainClassBuilder" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.pcb">pcb</a> = new <a href="#scala.tools.nsc.backend.jvm;GenBCode;PlainClassBuilder" title="GenBCode.this.PlainClassBuilder">PlainClassBuilder</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.pcb" title="GenBCode.this.PlainClassBuilder">pcb</a>.<a href="BCodeSkelBuilder.scala.html#scala.tools.nsc.backend.jvm;BCodeSkelBuilder;PlainSkelBuilder.genPlainClass" title="(cd: GenBCode.this.global.ClassDef)Unit">genPlainClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cd" title="GenBCode.this.global.ClassDef">cd</a><span class="delimiter">)</span>
        val <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.outF">outF</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.needsOutFolder" title="Boolean">needsOutFolder</a><span class="delimiter">)</span> <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers.getOutFolder" title="(csym: GenBCode.this.global.Symbol, cName: String, cunit: GenBCode.this.global.CompilationUnit)tools.nsc.io.AbstractFile">getOutFolder</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.pcb" title="GenBCode.this.PlainClassBuilder">pcb</a>.<a href="BCodeSkelBuilder.scala.html#scala.tools.nsc.backend.jvm;BCodeSkelBuilder;PlainSkelBuilder.thisName" title="=&gt; String">thisName</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span> else null;
        val <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.plainC">plainC</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.pcb" title="GenBCode.this.PlainClassBuilder">pcb</a>.<a href="BCodeSkelBuilder.scala.html#scala.tools.nsc.backend.jvm;BCodeSkelBuilder;PlainSkelBuilder.cnode" title="=&gt; scala.tools.asm.tree.ClassNode">cnode</a>

        <span class="comment">// -------------- bean info class, if needed --------------</span>
        val <a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.beanC">beanC</a> =
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a> <a href="../../../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.hasAnnotation" title="(cls: GenBCode.this.global.Symbol)Boolean">hasAnnotation</a> <a href="CoreBTypes.scala.html#scala.tools.nsc.backend.jvm;CoreBTypesProxy.BeanInfoAttr" title="=&gt; GenBCode.this.bTypes.coreBTypes.bTypes.global.Symbol">BeanInfoAttr</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.beanInfoCodeGen_=" title="=&gt; GenBCode.this.JBeanInfoBuilder">beanInfoCodeGen</a>.<a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JBeanInfoBuilder.genBeanInfoClass" title="(cls: GenBCode.this.global.Symbol, cunit: GenBCode.this.global.CompilationUnit, fieldSymbols: List[GenBCode.this.global.Symbol], methodSymbols: List[GenBCode.this.global.Symbol])scala.tools.asm.tree.ClassNode">genBeanInfoClass</a><span class="delimiter">(</span>
              <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a>,
              <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers.fieldSymbols" title="(cls: GenBCode.this.global.Symbol)List[GenBCode.this.global.Symbol]">fieldSymbols</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.claszSymbol" title="GenBCode.this.global.Symbol">claszSymbol</a><span class="delimiter">)</span>,
              <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers.methodSymbols" title="(cd: GenBCode.this.global.ClassDef)List[GenBCode.this.global.Symbol]">methodSymbols</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.cd" title="GenBCode.this.global.ClassDef">cd</a><span class="delimiter">)</span>
            <span class="delimiter">)</span>
          <span class="delimiter">}</span> else null

          <span class="comment">// ----------- hand over to pipeline-2</span>

        val <a title="BCodePhase.this.Item2" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.item2">item2</a> =
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item2.readResolve" title="(arrivalPos: Int, mirror: scala.tools.asm.tree.ClassNode, plain: scala.tools.asm.tree.ClassNode, bean: scala.tools.asm.tree.ClassNode, outFolder: tools.nsc.io.AbstractFile)BCodePhase.this.Item2">Item2</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.arrivalPos" title="Int">arrivalPos</a>,
                <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.mirrorC" title="scala.tools.asm.tree.ClassNode">mirrorC</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.plainC" title="scala.tools.asm.tree.ClassNode">plainC</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.beanC" title="scala.tools.asm.tree.ClassNode">beanC</a>,
                <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.outF" title="tools.nsc.io.AbstractFile">outF</a><span class="delimiter">)</span>

        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2" title="=&gt; java.util.LinkedList[BCodePhase.this.Item2]">q2</a> <span title="(x$1: BCodePhase.this.Item2)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.visit.item2" title="BCodePhase.this.Item2">item2</a> <span class="comment">// at the very end of this method so that no Worker2 thread starts mutating before we're done.</span>

      <span class="delimiter">}</span> <span class="comment">// end of method visit(Item1)</span>

    <span class="delimiter">}</span> <span class="comment">// end of class BCodePhase.Worker1</span>

    <span class="comment">/*
     *  Pipeline that takes ClassNodes from queue-2. The unit of work depends on the optimization level:
     *
     *    (a) no optimization involves:
     *          - converting the plain ClassNode to byte array and placing it on queue-3
     */</span>
    class <a title="class Worker2 extends AnyRef" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2">Worker2</a> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2" title="BCodePhase.this.Worker2" class="delimiter">{</a>
      def <a title="(classNode: scala.tools.asm.tree.ClassNode)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations">localOptimizations</a><span class="delimiter">(</span><a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations.classNode">classNode</a>: <span title="scala.tools.asm.tree.ClassNode">ClassNode</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>
        def <a title="()Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations.dce">dce</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.timed" title="(timer: scala.reflect.internal.util.Statistics.Timer)(body: =&gt; Boolean)Boolean">timed</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeDceTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeDceTimer</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#scala.tools.nsc.settings;ScalaSettings.YoptUnreachableCode" title="=&gt; Boolean">YoptUnreachableCode</a><span class="delimiter">)</span> opt.<a href="opt/LocalOpt.scala.html#scala.tools.nsc.backend.jvm.opt.LocalOpt" title="scala.tools.nsc.backend.jvm.opt.LocalOpt.type">LocalOpt</a>.<a href="opt/LocalOpt.scala.html#scala.tools.nsc.backend.jvm.opt.LocalOpt.removeUnreachableCode(4a4affe58e)" title="(clazz: scala.tools.asm.tree.ClassNode)Boolean">removeUnreachableCode</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations.classNode" title="scala.tools.asm.tree.ClassNode">classNode</a><span class="delimiter">)</span>
          else false
        <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations.dce" title="()Boolean">dce</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      def <a title="()Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        while <span class="delimiter">(</span>true<span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.while$2" title="()Unit" class="delimiter">{</a>
          val <a title="BCodePhase.this.Item2" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.item">item</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2" title="=&gt; java.util.LinkedList[BCodePhase.this.Item2]">q2</a>.<span title="()BCodePhase.this.Item2">poll</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.item" title="BCodePhase.this.Item2">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.isPoison" title="=&gt; Boolean">isPoison</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3" title="=&gt; java.util.PriorityQueue[BCodePhase.this.Item3]">q3</a> <span title="(x$1: BCodePhase.this.Item3)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison3" title="=&gt; BCodePhase.this.Item3">poison3</a>
            return
          <span class="delimiter">}</span>
          else <span class="delimiter">{</span>
            try <span class="delimiter">{</span>
              <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.localOptimizations" title="(classNode: scala.tools.asm.tree.ClassNode)Unit">localOptimizations</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.item" title="BCodePhase.this.Item2">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.plain" title="=&gt; scala.tools.asm.tree.ClassNode">plain</a><span class="delimiter">)</span>
              <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3" title="(item: BCodePhase.this.Item2)Unit">addToQ3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.item" title="BCodePhase.this.Item2">item</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> catch <span class="delimiter">{</span>
              case <a title="Throwable" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.ex">ex</a>: <span title="Throwable">Throwable</span> =&gt;
                <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.ex" title="Throwable">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <a href="../../Reporting.scala.html#scala.tools.nsc;Reporting.error" title="(msg: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Error while emitting &quot;)">Error while emitting $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.item" title="BCodePhase.this.Item2">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item2.plain" title="=&gt; scala.tools.asm.tree.ClassNode">plain</a>.<span title="String">name</span><span class="delimiter">}</span><span title="String(&quot;\\n&quot;)">\n$</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run.ex" title="Throwable">ex</a>.<span title="()String">getMessage</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      private def <a title="(item: BCodePhase.this.Item2)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3">addToQ3</a><span class="delimiter">(</span><a title="BCodePhase.this.Item2" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.item">item</a>: <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item2.readResolve" title="BCodePhase.this.Item2">Item2</a><span class="delimiter">)</span> <span class="delimiter">{</span>

        def <a title="(cn: scala.tools.asm.tree.ClassNode)Array[Byte]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray">getByteArray</a><span class="delimiter">(</span><a title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray.cn">cn</a>: asm.tree.<span title="scala.tools.asm.tree.ClassNode">ClassNode</span><span class="delimiter">)</span>: <a href="../../../../Array.scala.html#scala;Array" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
          val <a title="GenBCode.this.CClassWriter" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray.cw">cw</a> = new <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;CClassWriter" title="GenBCode.this.CClassWriter">CClassWriter</a><span class="delimiter">(</span><a href="BCodeIdiomatic.scala.html#scala.tools.nsc.backend.jvm;BCodeIdiomatic.extraProc" title="=&gt; Int">extraProc</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray.cn" title="scala.tools.asm.tree.ClassNode">cn</a>.<span title="(x$1: scala.tools.asm.ClassVisitor)Unit">accept</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray.cw" title="GenBCode.this.CClassWriter">cw</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray.cw" title="GenBCode.this.CClassWriter">cw</a>.<span title="()Array[Byte]">toByteArray</span>
        <span class="delimiter">}</span>

        val Item2<a href="../../../../Tuple5.scala.html#scala;Tuple5" title="(Int, scala.tools.asm.tree.ClassNode, scala.tools.asm.tree.ClassNode, scala.tools.asm.tree.ClassNode, tools.nsc.io.AbstractFile)" class="delimiter">(</a><a href="../../../../Tuple5.scala.html#scala;Tuple5._1" title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.arrivalPos">arrivalPos</a>, <a href="../../../../Tuple5.scala.html#scala;Tuple5._2" title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirror">mirror</a>, <a href="../../../../Tuple5.scala.html#scala;Tuple5._3" title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plain">plain</a>, <a href="../../../../Tuple5.scala.html#scala;Tuple5._4" title="scala.tools.asm.tree.ClassNode" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.bean">bean</a>, <a href="../../../../Tuple5.scala.html#scala;Tuple5._5" title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.outFolder">outFolder</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.item" title="BCodePhase.this.Item2">item</a>

        val <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirrorC">mirrorC</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirror" title="scala.tools.asm.tree.ClassNode">mirror</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> null else <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="(jclassName: String, jclassBytes: Array[Byte])BCodePhase.this.SubItem3">SubItem3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirror" title="scala.tools.asm.tree.ClassNode">mirror</a>.<span title="String">name</span>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray" title="(cn: scala.tools.asm.tree.ClassNode)Array[Byte]">getByteArray</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirror" title="scala.tools.asm.tree.ClassNode">mirror</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plainC">plainC</a>  = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="(jclassName: String, jclassBytes: Array[Byte])BCodePhase.this.SubItem3">SubItem3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plain" title="scala.tools.asm.tree.ClassNode">plain</a>.<span title="String">name</span>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray" title="(cn: scala.tools.asm.tree.ClassNode)Array[Byte]">getByteArray</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plain" title="scala.tools.asm.tree.ClassNode">plain</a><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.beanC">beanC</a>   = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.bean" title="scala.tools.asm.tree.ClassNode">bean</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span>   null else <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="(jclassName: String, jclassBytes: Array[Byte])BCodePhase.this.SubItem3">SubItem3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.bean" title="scala.tools.asm.tree.ClassNode">bean</a>.<span title="String">name</span>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.getByteArray" title="(cn: scala.tools.asm.tree.ClassNode)Array[Byte]">getByteArray</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.bean" title="scala.tools.asm.tree.ClassNode">bean</a><span class="delimiter">)</span><span class="delimiter">)</span>

        if <span class="delimiter">(</span>AsmUtils.<span title="Boolean(false)">traceSerializedClassEnabled</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plain" title="scala.tools.asm.tree.ClassNode">plain</a>.<span title="String">name</span>.<span title="(x$1: CharSequence)Boolean">contains</span><span class="delimiter">(</span>AsmUtils.<span title="String(&quot;&quot;)">traceSerializedClassPattern</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirrorC" title="BCodePhase.this.SubItem3">mirrorC</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils" title="scala.tools.nsc.backend.jvm.AsmUtils.type">AsmUtils</a>.<a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9)" title="(bytes: Array[Byte])Unit">traceClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirrorC" title="BCodePhase.this.SubItem3">mirrorC</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;SubItem3.jclassBytes" title="=&gt; Array[Byte]">jclassBytes</a><span class="delimiter">)</span>
          <a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils" title="scala.tools.nsc.backend.jvm.AsmUtils.type">AsmUtils</a>.<a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9)" title="(bytes: Array[Byte])Unit">traceClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plainC" title="BCodePhase.this.SubItem3">plainC</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;SubItem3.jclassBytes" title="=&gt; Array[Byte]">jclassBytes</a><span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.beanC" title="BCodePhase.this.SubItem3">beanC</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils" title="scala.tools.nsc.backend.jvm.AsmUtils.type">AsmUtils</a>.<a href="AsmUtils.scala.html#scala.tools.nsc.backend.jvm.AsmUtils.traceClass(cc4133f7b9)" title="(bytes: Array[Byte])Unit">traceClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.beanC" title="BCodePhase.this.SubItem3">beanC</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;SubItem3.jclassBytes" title="=&gt; Array[Byte]">jclassBytes</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3" title="=&gt; java.util.PriorityQueue[BCodePhase.this.Item3]">q3</a> <span title="(x$1: BCodePhase.this.Item3)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item3.readResolve" title="(arrivalPos: Int, mirror: BCodePhase.this.SubItem3, plain: BCodePhase.this.SubItem3, bean: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)BCodePhase.this.Item3">Item3</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.arrivalPos" title="Int">arrivalPos</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.mirrorC" title="BCodePhase.this.SubItem3">mirrorC</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.plainC" title="BCodePhase.this.SubItem3">plainC</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.beanC" title="BCodePhase.this.SubItem3">beanC</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.addToQ3.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a><span class="delimiter">)</span>

      <span class="delimiter">}</span>

    <span class="delimiter">}</span> <span class="comment">// end of class BCodePhase.Worker2</span>

    var <a title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.arrivalPos_=">arrivalPos</a> = <span title="Int(0)" class="int">0</span>

    <span class="comment">/*
     *  A run of the BCodePhase phase comprises:
     *
     *    (a) set-up steps (most notably supporting maps in `BCodeTypes`,
     *        but also &quot;the&quot; writer where class files in byte-array form go)
     *
     *    (b) building of ASM ClassNodes, their optimization and serialization.
     *
     *    (c) tear down (closing the classfile-writer and clearing maps)
     *
     */</span>
    override def <a title="()Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.bcodeStart">bcodeStart</a> = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeTimer</a><span class="delimiter">)</span>

      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.initStart">initStart</a> = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeInitTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeInitTimer</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.arrivalPos_=" title="(x$1: Int)Unit">arrivalPos</a> = <span title="Int(0)" class="int">0</span> <span class="comment">// just in case</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.scalaPrimitives" title="GenBCode.this.global.scalaPrimitives.type">scalaPrimitives</a>.<a href="../ScalaPrimitives.scala.html#scala.tools.nsc.backend;ScalaPrimitives.init" title="()Unit">init</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="BCodeIdiomatic.scala.html#scala.tools.nsc.backend.jvm;BCodeIdiomatic.bTypes" title="=&gt; scala.tools.nsc.backend.jvm.BTypesFromSymbols[GenBCode.this.global.type]">bTypes</a>.<a href="BTypesFromSymbols.scala.html#scala.tools.nsc.backend.jvm;BTypesFromSymbols.intializeCoreBTypes" title="()Unit">intializeCoreBTypes</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeInitTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeInitTimer</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.initStart" title="scala.reflect.internal.util.Statistics.TimerSnapshot">initStart</a><span class="delimiter">)</span>

      <span class="comment">// initBytecodeWriter invokes fullName, thus we have to run it before the typer-dependent thread is activated.</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.bytecodeWriter_=" title="(x$1: GenBCode.this.BytecodeWriter)Unit">bytecodeWriter</a>  = <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers.initBytecodeWriter" title="(entryPoints: List[GenBCode.this.global.Symbol])GenBCode.this.BytecodeWriter">initBytecodeWriter</a><span class="delimiter">(</span><a href="../../Global.scala.html#scala.tools.nsc;Global.cleanup" title="GenBCode.this.global.cleanup.type">cleanup</a>.<a href="../../transform/CleanUp.scala.html#scala.tools.nsc.transform;CleanUp.getEntryPoints" title="=&gt; List[GenBCode.this.global.cleanup.global.Symbol]">getEntryPoints</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.mirrorCodeGen_=" title="(x$1: GenBCode.this.JMirrorBuilder)Unit">mirrorCodeGen</a>   = new <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JMirrorBuilder" title="GenBCode.this.JMirrorBuilder">JMirrorBuilder</a>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.beanInfoCodeGen_=" title="(x$1: GenBCode.this.JBeanInfoBuilder)Unit">beanInfoCodeGen</a> = new <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers;JBeanInfoBuilder" title="GenBCode.this.JBeanInfoBuilder">JBeanInfoBuilder</a>

      val <a title="Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.needsOutfileForSymbol">needsOutfileForSymbol</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.bytecodeWriter_=" title="=&gt; GenBCode.this.BytecodeWriter">bytecodeWriter</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;BytecodeWriters;ClassBytecodeWriter" title="GenBCode.this.ClassBytecodeWriter">ClassBytecodeWriter</a><span class="delimiter">]</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk" title="(needsOutFolder: Boolean)Unit">buildAndSendToDisk</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.needsOutfileForSymbol" title="Boolean">needsOutfileForSymbol</a><span class="delimiter">)</span>

      <span class="comment">// closing output files.</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.bytecodeWriter_=" title="=&gt; GenBCode.this.BytecodeWriter">bytecodeWriter</a>.<a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;BytecodeWriters;BytecodeWriter.close" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeTimer</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.run.bcodeStart" title="scala.reflect.internal.util.Statistics.TimerSnapshot">bcodeStart</a><span class="delimiter">)</span>

      <span class="comment">/* TODO Bytecode can be verified (now that all classfiles have been written to disk)
       *
       * (1) asm.util.CheckAdapter.verify()
       *       public static void verify(ClassReader cr, ClassLoader loader, boolean dump, PrintWriter pw)
       *     passing a custom ClassLoader to verify inter-dependent classes.
       *     Alternatively,
       *       - an offline-bytecode verifier could be used (e.g. Maxine brings one as separate tool).
       *       - -Xverify:all
       *
       * (2) if requested, check-java-signatures, over and beyond the syntactic checks in `getGenericSignature()`
       *
       */</span>
    <span class="delimiter">}</span>

    <span class="comment">/*
     *  Sequentially:
     *    (a) place all ClassDefs in queue-1
     *    (b) dequeue one at a time from queue-1, convert it to ASM ClassNode, place in queue-2
     *    (c) dequeue one at a time from queue-2, convert it to byte-array,    place in queue-3
     *    (d) serialize to disk by draining queue-3.
     */</span>
    private def <a title="(needsOutFolder: Boolean)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk">buildAndSendToDisk</a><span class="delimiter">(</span><a title="Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.needsOutFolder">needsOutFolder</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span> <span class="delimiter">{</span>

      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.feedPipeline1" title="()Unit">feedPipeline1</a><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.genStart">genStart</a> = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeGenStat" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeGenStat</a><span class="delimiter">)</span>
      <span class="delimiter">(</span>new <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1" title="BCodePhase.this.Worker1">Worker1</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.needsOutFolder" title="Boolean">needsOutFolder</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker1.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeGenStat" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeGenStat</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.genStart" title="scala.reflect.internal.util.Statistics.TimerSnapshot">genStart</a><span class="delimiter">)</span>

      <span class="delimiter">(</span>new <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2" title="BCodePhase.this.Worker2">Worker2</a><span class="delimiter">)</span>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Worker2.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>

      val <a title="scala.reflect.internal.util.Statistics.TimerSnapshot" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.writeStart">writeStart</a> = <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.startTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer)scala.reflect.internal.util.Statistics.TimerSnapshot">startTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeWriteTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeWriteTimer</a><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3" title="()Unit">drainQ3</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics" title="scala.reflect.internal.util.Statistics.type">Statistics</a>.<a href="../../../../reflect/internal/util/Statistics.scala.html#scala.reflect.internal.util.Statistics.stopTimer" title="(tm: scala.reflect.internal.util.Statistics.Timer, start: scala.reflect.internal.util.Statistics.TimerSnapshot)Unit">stopTimer</a><span class="delimiter">(</span><a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats" title="scala.tools.nsc.backend.jvm.BackendStats.type">BackendStats</a>.<a href="BackendStats.scala.html#scala.tools.nsc.backend.jvm.BackendStats.bcodeWriteTimer" title="=&gt; scala.reflect.internal.util.Statistics.Timer">bcodeWriteTimer</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.buildAndSendToDisk.writeStart" title="scala.reflect.internal.util.Statistics.TimerSnapshot">writeStart</a><span class="delimiter">)</span>

    <span class="delimiter">}</span>

    <span class="comment">/* Feed pipeline-1: place all ClassDefs on q1, recording their arrival position. */</span>
    private def <a title="()Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.feedPipeline1">feedPipeline1</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      super.<a href="../../Global.scala.html#scala.tools.nsc;Global;GlobalPhase.run" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1" title="=&gt; java.util.LinkedList[BCodePhase.this.Item1]">q1</a> <span title="(x$1: BCodePhase.this.Item1)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.poison1" title="=&gt; BCodePhase.this.Item1">poison1</a>
    <span class="delimiter">}</span>

    <span class="comment">/* Pipeline that writes classfile representations to disk. */</span>
    private def <a title="()Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3">drainQ3</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      def <a title="(cfr: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk">sendToDisk</a><span class="delimiter">(</span><a title="BCodePhase.this.SubItem3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.cfr">cfr</a>: <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.SubItem3.readResolve" title="BCodePhase.this.SubItem3">SubItem3</a>, <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.outFolder">outFolder</a>: scala.tools.nsc.io.<a href="../../../../reflect/io/AbstractFile.scala.html#scala.reflect.io;AbstractFile" title="tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.cfr" title="BCodePhase.this.SubItem3">cfr</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span><span class="delimiter">{</span>
          val SubItem3<a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(String, Array[Byte])" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#scala;Tuple2._1" title="String" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassName">jclassName</a>, <a href="../../../../Tuple2.scala.html#scala;Tuple2._2" title="Array[Byte]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassBytes">jclassBytes</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.cfr" title="BCodePhase.this.SubItem3">cfr</a>
          try <span class="delimiter">{</span>
            val <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.outFile">outFile</a> =
              if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> null
              else <a href="BCodeHelpers.scala.html#scala.tools.nsc.backend.jvm;BCodeHelpers.getFileForClassfile" title="(base: tools.nsc.io.AbstractFile, clsName: String, suffix: String)tools.nsc.io.AbstractFile">getFileForClassfile</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassName" title="String">jclassName</a>, <span title="String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.bytecodeWriter_=" title="=&gt; GenBCode.this.BytecodeWriter">bytecodeWriter</a>.<a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;BytecodeWriters;BytecodeWriter.writeClass" title="(label: String, jclassName: String, jclassBytes: Array[Byte], outfile: tools.nsc.io.AbstractFile)Unit">writeClass</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassName" title="String">jclassName</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassName" title="String">jclassName</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassBytes" title="Array[Byte]">jclassBytes</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.outFile" title="tools.nsc.io.AbstractFile">outFile</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          catch <span class="delimiter">{</span>
            case <a title="scala.tools.nsc.backend.jvm.FileConflictException" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.e">e</a>: <a href="BytecodeWriters.scala.html#scala.tools.nsc.backend.jvm;FileConflictException" title="scala.tools.nsc.backend.jvm.FileConflictException">FileConflictException</a> =&gt;
              <a href="../../Reporting.scala.html#scala.tools.nsc;Reporting.error" title="(msg: String)Unit">error</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;error writing &quot;)">error writing $</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.jclassName" title="String">jclassName</a><span title="String(&quot;: &quot;)">: $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk.e" title="scala.tools.nsc.backend.jvm.FileConflictException">e</a>.<span title="()String">getMessage</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      var <a title="Boolean" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.moreComing">moreComing</a> = true
      <span class="comment">// `expected` denotes the arrivalPos whose Item3 should be serialized next</span>
      var <a title="Int" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.expected">expected</a> = <span title="Int(0)" class="int">0</span>

      while <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.moreComing" title="Boolean">moreComing</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.while$3" title="()Unit" class="delimiter">{</a>
        val <a title="BCodePhase.this.Item3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.incoming">incoming</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3" title="=&gt; java.util.PriorityQueue[BCodePhase.this.Item3]">q3</a>.<span title="()BCodePhase.this.Item3">poll</span>
        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.moreComing" title="Boolean">moreComing</a>   = <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.incoming" title="BCodePhase.this.Item3">incoming</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.isPoison" title="=&gt; Boolean">isPoison</a>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.moreComing" title="Boolean">moreComing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          val <a title="BCodePhase.this.Item3" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.item">item</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.incoming" title="BCodePhase.this.Item3">incoming</a>
          val <a title="tools.nsc.io.AbstractFile" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.outFolder">outFolder</a> = <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.item" title="BCodePhase.this.Item3">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.outFolder" title="=&gt; tools.nsc.io.AbstractFile">outFolder</a>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk" title="(cfr: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)Unit">sendToDisk</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.item" title="BCodePhase.this.Item3">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.mirror" title="=&gt; BCodePhase.this.SubItem3">mirror</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk" title="(cfr: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)Unit">sendToDisk</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.item" title="BCodePhase.this.Item3">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.plain" title="=&gt; BCodePhase.this.SubItem3">plain</a>,  <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.sendToDisk" title="(cfr: BCodePhase.this.SubItem3, outFolder: tools.nsc.io.AbstractFile)Unit">sendToDisk</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.item" title="BCodePhase.this.Item3">item</a>.<a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase;Item3.bean" title="=&gt; BCodePhase.this.SubItem3">bean</a>,   <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.outFolder" title="tools.nsc.io.AbstractFile">outFolder</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.drainQ3.expected" title="Int">expected</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// we're done</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1" title="=&gt; java.util.LinkedList[BCodePhase.this.Item1]">q1</a>.<span title="()Boolean">isEmpty</span>, <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Some ClassDefs remained in the first queue: &quot;)">Some ClassDefs remained in the first queue: $</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1" title="=&gt; java.util.LinkedList[BCodePhase.this.Item1]">q1</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2" title="=&gt; java.util.LinkedList[BCodePhase.this.Item2]">q2</a>.<span title="()Boolean">isEmpty</span>, <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Some classfiles remained in the second queue: &quot;)">Some classfiles remained in the second queue: $</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q2" title="=&gt; java.util.LinkedList[BCodePhase.this.Item2]">q2</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3" title="=&gt; java.util.PriorityQueue[BCodePhase.this.Item3]">q3</a>.<span title="()Boolean">isEmpty</span>, <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Some classfiles weren\'t written to disk: &quot;)">Some classfiles weren't written to disk: $</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q3" title="=&gt; java.util.PriorityQueue[BCodePhase.this.Item3]">q3</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>

    <span class="delimiter">}</span>

    override def <a title="(cunit: GenBCode.this.global.CompilationUnit)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply">apply</a><span class="delimiter">(</span><a title="GenBCode.this.global.CompilationUnit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.cunit">cunit</a>: <a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="GenBCode.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#scala;Unit" title="Unit">Unit</a> = <span class="delimiter">{</span>

      def <a title="(tree: GenBCode.this.global.Tree)Unit" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen">gen</a><span class="delimiter">(</span><a title="GenBCode.this.global.Tree" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.tree">tree</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="GenBCode.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.tree" title="GenBCode.this.global.Tree">tree</a> match <span class="delimiter">{</span>
          case <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="GenBCode.this.global.EmptyTree.type">EmptyTree</a>            =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          case PackageDef<span class="delimiter">(</span>_, <a title="List[GenBCode.this.global.Tree]" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.stats">stats</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.stats" title="List[GenBCode.this.global.Tree]">stats</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: GenBCode.this.global.Tree =&gt; Unit)Unit">foreach</a> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen" title="(tree: GenBCode.this.global.Tree)Unit">gen</a>
          case <a title="GenBCode.this.global.ClassDef" id="scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.cd">cd</a>: <a href="../../../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ClassDef" title="GenBCode.this.global.ClassDef">ClassDef</a>         =&gt;
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.q1" title="=&gt; java.util.LinkedList[BCodePhase.this.Item1]">q1</a> <span title="(x$1: BCodePhase.this.Item1)Boolean">add</span> <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.Item1.readResolve" title="(arrivalPos: Int, cd: GenBCode.this.global.ClassDef, cunit: GenBCode.this.global.CompilationUnit)BCodePhase.this.Item1">Item1</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.arrivalPos_=" title="=&gt; Int">arrivalPos</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen.cd" title="GenBCode.this.global.ClassDef">cd</a>, <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.arrivalPos_=" title="(x$1: Int)Unit">arrivalPos</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.gen" title="(tree: GenBCode.this.global.Tree)Unit">gen</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm;GenBCode;BCodePhase.apply.cunit" title="GenBCode.this.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.body" title="=&gt; GenBCode.this.global.Tree">body</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span> <span class="comment">// end of class BCodePhase</span>

<span class="delimiter">}</span> <span class="comment">// end of class GenBCode</span>

object <a title="scala.tools.nsc.backend.jvm.GenBCode.type" id="scala.tools.nsc.backend.jvm.GenBCode">GenBCode</a> <a href="#scala.tools.nsc.backend.jvm.GenBCode" title="scala.tools.nsc.backend.jvm.GenBCode.type" class="delimiter">{</a>
  def <a title="(args: Int*)Int" id="scala.tools.nsc.backend.jvm.GenBCode.mkFlags">mkFlags</a><span class="delimiter">(</span><a title="Int*" id="scala.tools.nsc.backend.jvm.GenBCode.mkFlags.args">args</a>: <span title="Int*">Int</span>*<span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.jvm.GenBCode.mkFlags.args" title="Int*">args</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.foldLeft" title="(z: Int)(op: (Int, Int) =&gt; Int)Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.jvm.GenBCode.mkFlags.$anonfun.x$4" title="Int">_</a> <a href="../../../../Int.scala.html#scala;Int.|(1409840560)" title="(x: Int)Int">|</a> <a href="#scala.tools.nsc.backend.jvm.GenBCode.mkFlags.$anonfun.x$5" title="Int">_</a><span class="delimiter">)</span>

  final val PublicStatic      = asm.Opcodes.ACC_PUBLIC <a title="Int(9)" id="scala.tools.nsc.backend.jvm.GenBCode.PublicStatic">|</a> asm.Opcodes.ACC_STATIC
  final val PublicStaticFinal = asm.Opcodes.ACC_PUBLIC | asm.Opcodes.ACC_STATIC <a title="Int(25)" id="scala.tools.nsc.backend.jvm.GenBCode.PublicStaticFinal">|</a> asm.Opcodes.ACC_FINAL
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
