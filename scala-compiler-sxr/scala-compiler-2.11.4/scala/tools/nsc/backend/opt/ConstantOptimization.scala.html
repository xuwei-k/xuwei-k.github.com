<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/nsc/backend/opt/ConstantOptimization.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  James Iry
 */</span>

package scala
package tools.nsc
package backend.opt

import scala.tools.nsc.backend.icode.analysis.LubException
import scala.annotation.tailrec

<span class="comment">/**
 * ConstantOptimization uses abstract interpretation to approximate for
 * each instruction what constants a variable or stack slot might hold
 * or cannot hold. From this it will eliminate unreachable conditionals
 * where only one branch is reachable, e.g. to eliminate unnecessary
 * null checks.
 *
 * With some more work it could be extended to
 * - cache stable values (final fields, modules) in locals
 * - replace the copy propagation in ClosureElilmination
 * - fold constants
 * - eliminate unnecessary stores and loads
 * - propagate knowledge gathered from conditionals for further optimization
 */</span>
abstract class <a title="class ConstantOptimization extends scala.tools.nsc.SubComponent" id="scala.tools.nsc.backend.opt;ConstantOptimization">ConstantOptimization</a> extends <a href="../../SubComponent.scala.html#scala.tools.nsc;SubComponent" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="delimiter">{</span>
  import <a href="../../SubComponent.scala.html#scala.tools.nsc;SubComponent.global" title="=&gt; scala.tools.nsc.Global">global</a>._
  import <a href="../../Global.scala.html#scala.tools.nsc;Global.icodes" title="ConstantOptimization.this.global.icodes.type">icodes</a>._
  import <a href="../../Global.scala.html#scala.tools.nsc;Global.icodes" title="ConstantOptimization.this.global.icodes.type">icodes</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes" title="ConstantOptimization.this.global.icodes.opcodes.type">opcodes</a>._

  val <a title="String" id="scala.tools.nsc.backend.opt;ConstantOptimization.phaseName">phaseName</a> = <span title="String(&quot;constopt&quot;)" class="string">&quot;constopt&quot;</span>

  <span class="comment">/** Create a new phase */</span>
  override def <a title="(p: scala.tools.nsc.Phase)ConstantOptimization.this.ConstantOptimizationPhase" id="scala.tools.nsc.backend.opt;ConstantOptimization.newPhase">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="scala.tools.nsc.backend.opt;ConstantOptimization.newPhase.p">p</a>: <a href="../../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase" title="ConstantOptimization.this.ConstantOptimizationPhase">ConstantOptimizationPhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization.newPhase.p" title="scala.tools.nsc.Phase">p</a><span class="delimiter">)</span>

  override val <a title="Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization.enabled">enabled</a>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">YconstOptimization</a>

  <span class="comment">/**
   * The constant optimization phase.
   */</span>
  class <a title="class ConstantOptimizationPhase extends ConstantOptimization.this.global.icodes.ICodePhase" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase">ConstantOptimizationPhase</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase" title="ConstantOptimization.this.ConstantOptimizationPhase" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.prev">prev</a>: <a href="../../../../reflect/internal/Phase.scala.html#scala.reflect.internal;Phase" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> extends <a href="../icode/ICodes.scala.html#scala.tools.nsc.backend.icode;ICodes;ICodePhase" title="ConstantOptimization.this.global.icodes.ICodePhase">ICodePhase</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.prev" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    def <a title="=&gt; String" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.name">name</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization.phaseName" title="=&gt; String">phaseName</a>

    override def <a title="(c: ConstantOptimization.this.global.icodes.IClass)Unit" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.apply(ed006416ab)">apply</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.IClass" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.apply(ed006416ab).c">c</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IClass" title="ConstantOptimization.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Global.scala.html#scala.tools.nsc;Global.settings" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../../reflect/internal/settings/MutableSettings.scala.html#scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean" title="implicit scala.reflect.internal.settings.MutableSettings.reflectSettingToBoolean : (s: scala.reflect.internal.settings.MutableSettings#BooleanSetting)Boolean">YconstOptimization</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="ConstantOptimization.this.ConstantOptimizer" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.apply(ed006416ab).analyzer">analyzer</a> = new <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer" title="ConstantOptimization.this.ConstantOptimizer">ConstantOptimizer</a>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.apply(ed006416ab).analyzer" title="ConstantOptimization.this.ConstantOptimizer">analyzer</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass" title="(cls: ConstantOptimization.this.global.icodes.IClass)Unit">optimizeClass</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizationPhase.apply(ed006416ab).c" title="ConstantOptimization.this.global.icodes.IClass">c</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  class <a title="class ConstantOptimizer extends AnyRef" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer">ConstantOptimizer</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer" title="ConstantOptimization.this.ConstantOptimizer" class="delimiter">{</a>
    def <a title="(cls: ConstantOptimization.this.global.icodes.IClass)Unit" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass">optimizeClass</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.IClass" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.cls">cls</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IClass" title="ConstantOptimization.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Analyzing &quot;)">Analyzing $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.cls" title="ConstantOptimization.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IClass.methods" title="=&gt; List[ConstantOptimization.this.global.icodes.IMethod]">methods</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">}</span><span title="String(&quot; methods in &quot;)"> methods in $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.cls" title="ConstantOptimization.this.global.icodes.IClass">cls</a><span title="String(&quot;.&quot;)" class="string">.&quot;</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.cls" title="ConstantOptimization.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IClass.methods" title="=&gt; List[ConstantOptimization.this.global.icodes.IMethod]">methods</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ConstantOptimization.this.global.icodes.IMethod =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="ConstantOptimization.this.global.icodes.IMethod" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.$anonfun.m">m</a> =&gt;
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod" title="(m: ConstantOptimization.this.global.icodes.IMethod)Unit">optimizeMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeClass.$anonfun.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(m: ConstantOptimization.this.global.icodes.IMethod)Unit" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod">optimizeMethod</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.IMethod" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.m">m</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="ConstantOptimization.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.hasCode" title="=&gt; Boolean">hasCode</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;Analyzing &quot;)">Analyzing $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.symbol" title="=&gt; ConstantOptimization.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        val <a title="Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.replacementInstructions">replacementInstructions</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod" title="(m: ConstantOptimization.this.global.icodes.IMethod)Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]">interpretMethod</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
        for <span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.block">block</a> &lt;- <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: ConstantOptimization.this.global.icodes.BasicBlock =&gt; AnyVal)Unit">blocks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.replacementInstructions" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]">replacementInstructions</a> <a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: ConstantOptimization.this.global.icodes.BasicBlock)Boolean">contains</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <a title="List[ConstantOptimization.this.global.icodes.Instruction]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.instructions">instructions</a> = <a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: ConstantOptimization.this.global.icodes.BasicBlock)List[ConstantOptimization.this.global.icodes.Instruction]">replacementInstructions</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.replaceInstruction(5884c16d3b)" title="(oldInstr: ConstantOptimization.this.global.icodes.Instruction, is: List[ConstantOptimization.this.global.icodes.Instruction])Boolean">replaceInstruction</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.lastInstruction" title="=&gt; ConstantOptimization.this.global.icodes.Instruction">lastInstruction</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.optimizeMethod.$anonfun.instructions" title="List[ConstantOptimization.this.global.icodes.Instruction]">instructions</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * A single possible (or impossible) datum that can be held in Contents
     */</span>
    private sealed abstract class <a title="class Datum extends AnyRef" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum">Datum</a>
    <span class="comment">/**
     * A constant datum
     */</span>
    private case class <a title="class Const extends ConstantOptimizer.this.Datum with Product with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve">Const</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="ConstantOptimization.this.global.Constant" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c">c</a>: <a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum" title="ConstantOptimizer.this.Datum">Datum</a> <span class="delimiter">{</span>
      def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.isIntAssignable">isIntAssignable</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.tag" title="=&gt; Int">tag</a> <a href="../../../../Int.scala.html#scala;Int.>=(5f58a84eb3)" title="(x: Int)Boolean">&gt;=</a> <span title="Int(2)">BooleanTag</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.tag" title="=&gt; Int">tag</a> <a href="../../../../Int.scala.html#scala;Int.<=(5f58a84eb3)" title="(x: Int)Boolean">&lt;=</a> <span title="Int(6)">IntTag</span>
      def <a title="=&gt; Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.toInt">toInt</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.tag" title="=&gt; Int">tag</a> match <span class="delimiter">{</span>
        case <span title="Int(2)">BooleanTag</span> =&gt; if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.booleanValue" title="=&gt; Boolean">booleanValue</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> else <span title="Int(0)" class="int">0</span>
        case _ =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.intValue" title="=&gt; Int">intValue</a>
      <span class="delimiter">}</span>

      <span class="comment">/**
       * True if this constant would compare to other as true under primitive eq
       */</span>
      override def <a title="(other: Any)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals">equals</a><span class="delimiter">(</span><a title="Any" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.other">other</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.other" title="Any">other</a> match <span class="delimiter">{</span>
        case <a title="ConstantOptimizer.this.Const" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.oc">oc</a> @ Const<span class="delimiter">(</span><a title="ConstantOptimization.this.global.Constant" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.o">o</a><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.oc" title="ConstantOptimizer.this.Const">oc</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span>if <span class="delimiter">(</span>this.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.isIntAssignable" title="=&gt; Boolean">isIntAssignable</a> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.oc" title="ConstantOptimizer.this.Const">oc</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.isIntAssignable" title="=&gt; Boolean">isIntAssignable</a><span class="delimiter">)</span> this.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.toInt" title="=&gt; Int">toInt</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.oc" title="ConstantOptimizer.this.Const">oc</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.toInt" title="=&gt; Int">toInt</a> else <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.value" title="=&gt; Any">value</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.equals.o" title="ConstantOptimization.this.global.Constant">o</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.value" title="=&gt; Any">value</a><span class="delimiter">)</span>
        case _ =&gt; false
      <span class="delimiter">}</span>

      <span class="comment">/**
       * Hash code consistent with equals
       */</span>
      override def <a title="()Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.hashCode">hashCode</a> = if <span class="delimiter">(</span>this.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.isIntAssignable" title="=&gt; Boolean">isIntAssignable</a><span class="delimiter">)</span> this.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.toInt" title="=&gt; Int">toInt</a> else <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Const.c" title="=&gt; ConstantOptimization.this.global.Constant">c</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.hashCode" title="()Int">hashCode</a>

    <span class="delimiter">}</span>
    <span class="comment">/**
     * A datum that has been Boxed via a BOX instruction
     */</span>
    private case class <a title="class Boxed extends ConstantOptimizer.this.Datum with Product with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Boxed.readResolve">Boxed</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="ConstantOptimizer.this.Datum" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Boxed.c">c</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum" title="ConstantOptimizer.this.Datum">Datum</a><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum" title="ConstantOptimizer.this.Datum">Datum</a>

    <span class="comment">/**
     * The knowledge we have about the abstract state of one location in terms
     * of what constants it might or cannot hold. Forms a lower
     * lattice where lower elements in the lattice indicate less knowledge.
     *
     * With the following partial ordering (where '&gt;' indicates more precise knowledge)
     *
     * Possible(xs) &gt; Possible(xs + y)
     * Possible(xs) &gt; Impossible(ys)
     * Impossible(xs + y) &gt; Impossible(xs)
     *
     * and the following merges, which indicate merging knowledge from two paths through
     * the code,
     *
     * // left must be 1 or 2, right must be 2 or 3 then we must have a 1, 2 or 3
     * Possible(xs) merge Possible(ys) =&gt; Possible(xs union ys)
     *
     * // Left says can't be 2 or 3, right says can't be 3 or 4
     * // then it's not 3 (it could be 2 from the right or 4 from the left)
     * Impossible(xs) merge Impossible(ys) =&gt; Impossible(xs intersect ys)
     *
     * // Left says it can't be 2 or 3, right says it must be 3 or 4, then
     * // it can't be 2 (left rules out 4 and right says 3 is possible)
     * Impossible(xs) merge Possible(ys) =&gt; Impossible(xs -- ys)
     *
     * Intuitively, Possible(empty) says that a location can't hold anything,
     * it's uninitialized. However, Possible(empty) never appears in the code.
     *
     * Conversely, Impossible(empty) says nothing is impossible, it could be
     * anything. Impossible(empty) is given a synonym UNKNOWN and is used
     * for, e.g., the result of an arbitrary method call.
     */</span>
    private sealed abstract class <a title="class Contents extends AnyRef" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents">Contents</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents" class="delimiter">{</a>
      <span class="comment">/**
       * Join this Contents with another coming from another path. Join enforces
       * the lattice structure. It is symmetrical and never moves upward in the
       * lattice
       */</span>
      final def <a title="(other: ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge">merge</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> = if <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> this else <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimizer.this.Contents, _2: ConstantOptimizer.this.Contents)(ConstantOptimizer.this.Contents, ConstantOptimizer.this.Contents)" class="delimiter">(</a>this, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span class="delimiter">(</span>Possible<span class="delimiter">(</span><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.possible1">possible1</a><span class="delimiter">)</span>, Possible<span class="delimiter">(</span><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.possible2">possible2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve" title="(possible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Possible">Possible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.possible1" title="Set[ConstantOptimizer.this.Datum]">possible1</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.union" title="(that: scala.collection.GenSet[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">union</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.possible2" title="Set[ConstantOptimizer.this.Datum]">possible2</a><span class="delimiter">)</span>
        case <span class="delimiter">(</span>Impossible<span class="delimiter">(</span><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.impossible1">impossible1</a><span class="delimiter">)</span>, Impossible<span class="delimiter">(</span><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.impossible2">impossible2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="(impossible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.impossible1" title="Set[ConstantOptimizer.this.Datum]">impossible1</a> <a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.intersect" title="(that: scala.collection.GenSet[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">intersect</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge.impossible2" title="Set[ConstantOptimizer.this.Datum]">impossible2</a><span class="delimiter">)</span>
        case <span class="delimiter">(</span>Impossible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">impossible</span><span class="delimiter">)</span>, Possible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">possible</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="(impossible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">impossible</span> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">--</a> <span title="Set[ConstantOptimizer.this.Datum]">possible</span><span class="delimiter">)</span>
        case <span class="delimiter">(</span>Possible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">possible</span><span class="delimiter">)</span>, Impossible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">impossible</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="(impossible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">impossible</span> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">--</a> <span title="Set[ConstantOptimizer.this.Datum]">possible</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="comment">// TODO we could have more fine-grained knowledge, e.g. know that 0 &lt; x &lt; 3. But for now equality/inequality is a good start.</span>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightEqual">mightEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightNotEqual">mightNotEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightNotEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a>
    <span class="delimiter">}</span>
    private def <a title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Impossible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SingleImpossible">SingleImpossible</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Datum" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SingleImpossible.x">x</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum" title="ConstantOptimizer.this.Datum">Datum</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: ConstantOptimizer.this.Datum*)scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">Set</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SingleImpossible.x" title="ConstantOptimizer.this.Datum">x</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * The location is known to have one of a set of values.
     */</span>
    private case class <a title="class Possible extends ConstantOptimizer.this.Contents with Product with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve">Possible</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible">possible</a>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[ConstantOptimizer.this.Datum]">Set</a><span class="delimiter">[</span>Datum<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> <span class="delimiter">{</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible" title="=&gt; Set[ConstantOptimizer.this.Datum]">possible</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>, <span title="String(&quot;Contradiction: had an empty possible set indicating an uninitialized location&quot;)" class="string">&quot;Contradiction: had an empty possible set indicating an uninitialized location&quot;</span><span class="delimiter">)</span>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightEqual">mightEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightEqual.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightEqual.other" title="ConstantOptimizer.this.Contents">other</a> match <span class="delimiter">{</span>
        <span class="comment">// two Possibles might be equal if they have any possible members in common</span>
        case Possible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">possible2</span><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible" title="=&gt; Set[ConstantOptimizer.this.Datum]">possible</a> <a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.intersect" title="(that: scala.collection.GenSet[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">intersect</a> <span title="Set[ConstantOptimizer.this.Datum]">possible2</span><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>
        <span class="comment">// a possible can be equal to an impossible if the impossible doesn't rule</span>
        <span class="comment">// out all the possibilities</span>
        case Impossible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">possible2</span><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible" title="=&gt; Set[ConstantOptimizer.this.Datum]">possible</a> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">--</a> <span title="Set[ConstantOptimizer.this.Datum]">possible2</span><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual">mightNotEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.other" title="ConstantOptimizer.this.Contents">other</a> match <span class="delimiter">{</span>
        <span class="comment">// two Possibles might not be equal if either has possible members that the other doesn't</span>
        case Possible<span class="delimiter">(</span><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.possible2">possible2</a><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible" title="=&gt; Set[ConstantOptimizer.this.Datum]">possible</a> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">--</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.possible2" title="Set[ConstantOptimizer.this.Datum]">possible2</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.mightNotEqual.possible2" title="Set[ConstantOptimizer.this.Datum]">possible2</a> <a href="../../../../collection/generic/Subtractable.scala.html#scala.collection.generic;Subtractable.--" title="(xs: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Datum])scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">--</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Possible.possible" title="=&gt; Set[ConstantOptimizer.this.Datum]">possible</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>
        case Impossible<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; true
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    private def <a title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible">SinglePossible</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Datum" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible.x">x</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Datum" title="ConstantOptimizer.this.Datum">Datum</a><span class="delimiter">)</span> = new <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve" title="ConstantOptimizer.this.Possible">Possible</a><span class="delimiter">(</span><a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: ConstantOptimizer.this.Datum*)scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">Set</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible.x" title="ConstantOptimizer.this.Datum">x</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * The location is known to not have any of a set of values value (e.g null).
     */</span>
    private case class <a title="class Impossible extends ConstantOptimizer.this.Contents with Product with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve">Impossible</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Set[ConstantOptimizer.this.Datum]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.impossible">impossible</a>: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[ConstantOptimizer.this.Datum]">Set</a><span class="delimiter">[</span>Datum<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> <span class="delimiter">{</span>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightEqual">mightEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightEqual.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightEqual.other" title="ConstantOptimizer.this.Contents">other</a> match <span class="delimiter">{</span>
        case Possible<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightEqual.other" title="ConstantOptimizer.this.Contents">other</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightEqual</a> this
        case _ =&gt; true
      <span class="delimiter">}</span><span class="delimiter">)</span>
      def <a title="(other: ConstantOptimizer.this.Contents)Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightNotEqual">mightNotEqual</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightNotEqual.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightNotEqual.other" title="ConstantOptimizer.this.Contents">other</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightNotEqual.other" title="ConstantOptimizer.this.Contents">other</a> match <span class="delimiter">{</span>
        case Possible<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Impossible.mightNotEqual.other" title="ConstantOptimizer.this.Contents">other</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightNotEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightNotEqual</a> this
        case _ =&gt; true
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Our entire knowledge about the contents of all variables and the stack. It forms
     * a lattice primarily driven by the lattice structure of Contents.
     *
     * In addition to the rules of contents, State has the following properties:
     * - The merge of two sets of locals holds the merges of locals found in the intersection
     * of the two sets of locals. Locals not found in a
     * locals map are thus possibly uninitialized and attempting to load them results
     * in an error.
     * - The stack heights of two states must match otherwise it's an error to merge them
     *
     * State is immutable in order to aid in structure sharing of local maps and stacks
     */</span>
    private case class <a title="class State extends AnyRef with Product with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve">State</a><a href="../../../../Product.scala.html#scala;Product" title="Product" class="delimiter">(</a><a title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals">locals</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">[</span>Local, Contents<span class="delimiter">]</span>, <a title="List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack">stack</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimizer.this.Contents]">List</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="(olocals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents])Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals">mergeLocals</a><span class="delimiter">(</span><a title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.olocals">olocals</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">[</span>Local, Contents<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">[</span>Local, Contents<span class="delimiter">]</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.olocals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">olocals</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a> else <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">(</span><span class="delimiter">(</span>for <span class="delimiter">{</span>
        <a title="ConstantOptimization.this.global.icodes.Local" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.$anonfun.key">key</a> &lt;- <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a>.<a href="../../../../collection/immutable/MapLike.scala.html#scala.collection.immutable;MapLike.keySet" title="=&gt; scala.collection.immutable.Set[ConstantOptimization.this.global.icodes.Local]">keySet</a> <a href="../../../../collection/GenSetLike.scala.html#scala.collection;GenSetLike.intersect" title="(that: scala.collection.GenSet[ConstantOptimization.this.global.icodes.Local])scala.collection.immutable.Set[ConstantOptimization.this.global.icodes.Local]">intersect</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.olocals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">olocals</a>.<a href="../../../../collection/immutable/MapLike.scala.html#scala.collection.immutable;MapLike.keySet" title="=&gt; scala.collection.immutable.Set[ConstantOptimization.this.global.icodes.Local]">keySet</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.map" title="(f: ConstantOptimization.this.global.icodes.Local =&gt; (ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[ConstantOptimization.this.global.icodes.Local],(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents),Seq[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]])Seq[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">toSeq</a>
      <span class="delimiter">}</span> yield <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.Local, _2: ConstantOptimizer.this.Contents)(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.$anonfun.key" title="ConstantOptimization.this.global.icodes.Local">key</a>, <a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.Contents">locals</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.$anonfun.key" title="ConstantOptimization.this.global.icodes.Local">key</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge" title="(other: ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">merge</a> <a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.Contents">olocals</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals.$anonfun.key" title="ConstantOptimization.this.global.icodes.Local">key</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>

      def <a title="(other: ConstantOptimizer.this.State)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge">merge</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.other">other</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = if <span class="delimiter">(</span>this <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.other" title="ConstantOptimizer.this.State">other</a><span class="delimiter">)</span> this else <span class="delimiter">{</span>
        @tailrec def <a title="(l: List[ConstantOptimizer.this.Contents], r: List[ConstantOptimizer.this.Contents], out: List[ConstantOptimizer.this.Contents])List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks">mergeStacks</a><span class="delimiter">(</span><span title="List[ConstantOptimizer.this.Contents]">l</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimizer.this.Contents]">List</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span>, <span title="List[ConstantOptimizer.this.Contents]">r</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimizer.this.Contents]">List</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span>, <a title="List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.out">out</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimizer.this.Contents]">List</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimizer.this.Contents]">List</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span> = <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[ConstantOptimizer.this.Contents], _2: List[ConstantOptimizer.this.Contents])(List[ConstantOptimizer.this.Contents], List[ConstantOptimizer.this.Contents])" class="delimiter">(</a><span title="List[ConstantOptimizer.this.Contents]">l</span>, <span title="List[ConstantOptimizer.this.Contents]">r</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case <span class="delimiter">(</span><a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.out" title="List[ConstantOptimizer.this.Contents]">out</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[ConstantOptimizer.this.Contents]">reverse</a>
          case <span class="delimiter">(</span><span title="List[ConstantOptimizer.this.Contents]">l</span>, <span title="List[ConstantOptimizer.this.Contents]">r</span><span class="delimiter">)</span> if <span title="List[ConstantOptimizer.this.Contents]">l</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="List[ConstantOptimizer.this.Contents]">r</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.out" title="List[ConstantOptimizer.this.Contents]">out</a>.<a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[ConstantOptimizer.this.Contents]">reverse</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[ConstantOptimizer.this.Contents])(implicit bf: scala.collection.generic.CanBuildFrom[List[ConstantOptimizer.this.Contents],ConstantOptimizer.this.Contents,List[ConstantOptimizer.this.Contents]])List[ConstantOptimizer.this.Contents]">++</a> <span title="List[ConstantOptimizer.this.Contents]">l</span>
          case <span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.lhead">lhead</a> :: <a title="List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.ltail">ltail</a>, <a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.rhead">rhead</a> :: <a title="List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.rtail">rtail</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks" title="(l: List[ConstantOptimizer.this.Contents], r: List[ConstantOptimizer.this.Contents], out: List[ConstantOptimizer.this.Contents])List[ConstantOptimizer.this.Contents]">mergeStacks</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.ltail" title="List[ConstantOptimizer.this.Contents]">ltail</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.rtail" title="List[ConstantOptimizer.this.Contents]">rtail</a>, <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.lhead" title="ConstantOptimizer.this.Contents">lhead</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge" title="(other: ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">merge</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.rhead" title="ConstantOptimizer.this.Contents">rhead</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimizer.this.Contents)List[ConstantOptimizer.this.Contents]">::</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks.out" title="List[ConstantOptimizer.this.Contents]">out</a><span class="delimiter">)</span>
          case _ =&gt; sys.<a href="../../../../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;Mismatched stack heights&quot;)" class="string">&quot;Mismatched stack heights&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        val <a title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.newLocals">newLocals</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals" title="(olocals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents])Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">mergeLocals</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.other" title="ConstantOptimizer.this.State">other</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a><span class="delimiter">)</span>

        val <a title="List[ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.newStack">newStack</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.other" title="ConstantOptimizer.this.State">other</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a> else <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.mergeStacks" title="(l: List[ConstantOptimizer.this.Contents], r: List[ConstantOptimizer.this.Contents], out: List[ConstantOptimizer.this.Contents])List[ConstantOptimizer.this.Contents]">mergeStacks</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.other" title="ConstantOptimizer.this.State">other</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="(locals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents], stack: List[ConstantOptimizer.this.Contents])ConstantOptimizer.this.State">State</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.newLocals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">newLocals</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge.newStack" title="List[ConstantOptimizer.this.Contents]">newStack</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">/**
       * Peek at the top of the stack without modifying it. Error if the stack is empty
       */</span>
      def <a title="(n: Int)ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek">peek</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek.n">n</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> = <a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)ConstantOptimizer.this.Contents">stack</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek.n" title="Int">n</a><span class="delimiter">)</span>
      <span class="comment">/**
       * Push contents onto a stack
       */</span>
      def <a title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push">push</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push.contents">contents</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = this <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push.x$17">copy</a> <span class="delimiter">(</span>stack = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push.contents" title="ConstantOptimizer.this.Contents">contents</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="List[ConstantOptimizer.this.Contents] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push.x$16">::</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a><span class="delimiter">)</span>
      <span class="comment">/**
       * Drop n elements from the stack
       */</span>
      def <a title="(number: Int)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop">drop</a><span class="delimiter">(</span><a title="Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop.number">number</a>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = this <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop.x$19">copy</a> <span class="delimiter">(</span>stack = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.drop" title="List[ConstantOptimizer.this.Contents] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop.x$18">drop</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop.number" title="Int">number</a><span class="delimiter">)</span>
      <span class="comment">/**
       * Store the top of the stack into the specified local. An error if the stack
       * is empty
       */</span>
      def <a title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store">store</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.Local" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.variable">variable</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;Local" title="ConstantOptimization.this.global.icodes.Local">Local</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = <span class="delimiter">{</span>
        val <a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.contents">contents</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; ConstantOptimizer.this.Contents">head</a>
        val newVariables = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a> <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.newVariables">+</a> <span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.Local, _2: ConstantOptimizer.this.Contents)(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.variable" title="ConstantOptimization.this.global.icodes.Local">variable</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.contents" title="ConstantOptimizer.this.Contents">contents</a><span class="delimiter">)</span><span class="delimiter">)</span>
        new <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store.newVariables" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">newVariables</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a>.<a href="../../../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.tail" title="=&gt; List[ConstantOptimizer.this.Contents]">tail</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="comment">/**
       * Load the specified local onto the top of the stack. An error the the local is uninitialized.
       */</span>
      def <a title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load">load</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.Local" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load.variable">variable</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;Local" title="ConstantOptimization.this.global.icodes.Local">Local</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = <span class="delimiter">{</span>
        val <a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load.contents">contents</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a>.<a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.getOrElse" title="(key: ConstantOptimization.this.global.icodes.Local, default: =&gt; ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">getOrElse</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load.variable" title="ConstantOptimization.this.global.icodes.Local">variable</a>, sys.<a href="../../../../sys/package.scala.html#scala.sys.package.error" title="(message: String)Nothing">error</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;&quot;)">$</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load.variable" title="ConstantOptimization.this.global.icodes.Local">variable</a><span title="String(&quot; is not initialized&quot;)" class="string"> is not initialized&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load.contents" title="ConstantOptimizer.this.Contents">contents</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="comment">/**
       * A copy of this State with an empty stack
       */</span>
      def <a title="=&gt; ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.cleanStack">cleanStack</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.stack" title="=&gt; List[ConstantOptimizer.this.Contents]">stack</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> this else this <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents] @scala.reflect.internal.annotations.uncheckedBounds" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.cleanStack.x$21">copy</a> <span class="delimiter">(</span>stack = <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.cleanStack.x$20">Nil</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// some precomputed constants</span>
    private val <a title="ConstantOptimizer.this.Const" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NULL">NULL</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span>null: <span title="Any">Any</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Impossible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN">UNKNOWN</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="(impossible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#scala.Predef.Set" title="=&gt; scala.collection.immutable.Set.type">Set</a>.<a href="../../../../collection/generic/ImmutableSetFactory.scala.html#scala.collection.generic;ImmutableSetFactory.empty" title="scala.collection.immutable.Set[ConstantOptimizer.this.Datum]">empty</a><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Impossible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NOT_NULL">NOT_NULL</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SingleImpossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Impossible">SingleImpossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NULL" title="=&gt; ConstantOptimizer.this.Const">NULL</a><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_UNIT">CONST_UNIT</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_FALSE">CONST_FALSE</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span>false<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_BYTE">CONST_ZERO_BYTE</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Byte(0)" class="int">0</span>: <a href="../../../../Byte.scala.html#scala;Byte" title="Byte">Byte</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_SHORT">CONST_ZERO_SHORT</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Short(0)" class="int">0</span>: <a href="../../../../Short.scala.html#scala;Short" title="Short">Short</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_CHAR">CONST_ZERO_CHAR</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Char('\00')" class="int">0</span>: <a href="../../../../Char.scala.html#scala;Char" title="Char">Char</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_INT">CONST_ZERO_INT</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_LONG">CONST_ZERO_LONG</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span>: <a href="../../../../Long.scala.html#scala;Long" title="Long">Long</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_FLOAT">CONST_ZERO_FLOAT</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Float(0.0)" class="float">0.0f</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_DOUBLE">CONST_ZERO_DOUBLE</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Double(0.0)" class="double">0.0d</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    private val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_NULL">CONST_NULL</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NULL" title="=&gt; ConstantOptimizer.this.Const">NULL</a><span class="delimiter">)</span>

    <span class="comment">/**
     * Given a TypeKind, figure out what '0' for it means in order to interpret CZJUMP
     */</span>
    private def <a title="(k: ConstantOptimization.this.global.icodes.TypeKind)ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.getZeroOf">getZeroOf</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.TypeKind" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.getZeroOf.k">k</a>: <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds;TypeKind" title="ConstantOptimization.this.global.icodes.TypeKind">TypeKind</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.getZeroOf.k" title="ConstantOptimization.this.global.icodes.TypeKind">k</a> match <span class="delimiter">{</span>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.UNIT" title="ConstantOptimization.this.global.icodes.UNIT.type">UNIT</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_UNIT" title="=&gt; ConstantOptimizer.this.Possible">CONST_UNIT</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.BOOL" title="ConstantOptimization.this.global.icodes.BOOL.type">BOOL</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_FALSE" title="=&gt; ConstantOptimizer.this.Possible">CONST_FALSE</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.BYTE" title="ConstantOptimization.this.global.icodes.BYTE.type">BYTE</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_BYTE" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_BYTE</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.SHORT" title="ConstantOptimization.this.global.icodes.SHORT.type">SHORT</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_SHORT" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_SHORT</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.CHAR" title="ConstantOptimization.this.global.icodes.CHAR.type">CHAR</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_CHAR" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_CHAR</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.INT" title="ConstantOptimization.this.global.icodes.INT.type">INT</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_INT" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_INT</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.LONG" title="ConstantOptimization.this.global.icodes.LONG.type">LONG</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_LONG" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_LONG</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.FLOAT" title="ConstantOptimization.this.global.icodes.FLOAT.type">FLOAT</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_FLOAT" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_FLOAT</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.DOUBLE" title="ConstantOptimization.this.global.icodes.DOUBLE.type">DOUBLE</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_ZERO_DOUBLE" title="=&gt; ConstantOptimizer.this.Possible">CONST_ZERO_DOUBLE</a>
      case REFERENCE<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_NULL" title="=&gt; ConstantOptimizer.this.Possible">CONST_NULL</a>
      case ARRAY<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_NULL" title="=&gt; ConstantOptimizer.this.Possible">CONST_NULL</a>
      case BOXED<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.CONST_NULL" title="=&gt; ConstantOptimizer.this.Possible">CONST_NULL</a>
      case <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.ConcatClass" title="ConstantOptimization.this.global.icodes.ConcatClass.type">ConcatClass</a> =&gt; <a href="../../../../reflect/internal/Reporting.scala.html#scala.reflect.internal;Reporting.abort" title="(msg: String)Nothing">abort</a><span class="delimiter">(</span><span title="String(&quot;no zero of ConcatClass&quot;)" class="string">&quot;no zero of ConcatClass&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// normal locals can't be null, so we use null to mean the magic 'this' local</span>
    private val <a title="ConstantOptimization.this.global.icodes.Local" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.THIS_LOCAL">THIS_LOCAL</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;Local" title="ConstantOptimization.this.global.icodes.Local">Local</a> = null

    <span class="comment">/**
     * interpret a single instruction to find its impact on the abstract state
     */</span>
    private def <a title="(in: ConstantOptimizer.this.State, inst: ConstantOptimization.this.global.icodes.Instruction)ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst">interpretInst</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in">in</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a>, <a title="ConstantOptimization.this.global.icodes.Instruction" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.inst">inst</a>: <a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction" title="ConstantOptimization.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = <span class="delimiter">{</span>
      <span class="comment">// pop the consumed number of values off the `in` state's stack, producing a new state</span>
      def <a title="=&gt; ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed">dropConsumed</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop" title="(number: Int)ConstantOptimizer.this.State">drop</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction.consumed" title="=&gt; Int">consumed</a>

      <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> match <span class="delimiter">{</span>
        case THIS<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load" title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State">load</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.THIS_LOCAL" title="=&gt; ConstantOptimization.this.global.icodes.Local">THIS_LOCAL</a>

        case CONSTANT<span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.global.Constant" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.k">k</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// treat NaN as UNKNOWN because NaN must never equal NaN</span>
          val <a title="&lt;refinement of Product with ConstantOptimizer.this.Contents&gt; extends Product with Serializable with ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.const">const</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.k" title="ConstantOptimization.this.global.icodes.global.Constant">k</a>.<a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant.isNaN" title="=&gt; Boolean">isNaN</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a>
          else <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.k" title="ConstantOptimization.this.global.icodes.global.Constant">k</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.const" title="&lt;refinement of Product with ConstantOptimizer.this.Contents&gt; extends Product with Serializable with ConstantOptimizer.this.Contents">const</a>

        case LOAD_ARRAY_ITEM<span class="delimiter">(</span>_<span class="delimiter">)</span> | LOAD_FIELD<span class="delimiter">(</span>_, _<span class="delimiter">)</span> | CALL_PRIMITIVE<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a>

        case LOAD_LOCAL<span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.Local">local</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// TODO if a local is known to hold a constant then we can replace this instruction with a push of that constant</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.load" title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State">load</a> <span title="ConstantOptimization.this.global.icodes.Local">local</span>

        case STORE_LOCAL<span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.Local">local</span><span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store" title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State">store</a> <span title="ConstantOptimization.this.global.icodes.Local">local</span>

        case STORE_THIS<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <span class="comment">// if a local is already known to have a constant and we're replacing with the same constant then we can</span>
          <span class="comment">// replace this with a drop</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.store" title="(variable: ConstantOptimization.this.global.icodes.Local)ConstantOptimizer.this.State">store</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.THIS_LOCAL" title="=&gt; ConstantOptimization.this.global.icodes.Local">THIS_LOCAL</a>

        case CALL_METHOD<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <span class="comment">// TODO we could special case implementations of equals that are known, e.g. String#equals</span>
          <span class="comment">// We could turn Possible(string constants).equals(Possible(string constants) into an eq check</span>
          <span class="comment">// We could turn nonConstantString.equals(constantString) into constantString.equals(nonConstantString)</span>
          <span class="comment">//  and eliminate the null check that likely precedes this call</span>
          val <a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.initial">initial</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a>
          <span class="delimiter">(</span><a href="../../../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../../../runtime/RichInt.scala.html#scala.runtime;RichInt.until(7457d0ec05)" title="(end: Int)scala.collection.immutable.Range">until</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction.produced" title="=&gt; Int">produced</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.foldLeft" title="(z: ConstantOptimizer.this.State)(op: (ConstantOptimizer.this.State, Int) =&gt; ConstantOptimizer.this.State)ConstantOptimizer.this.State">foldLeft</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.initial" title="ConstantOptimizer.this.State">initial</a><span class="delimiter">)</span> <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="ConstantOptimizer.this.State" class="delimiter">{</a> case <span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.$anonfun.know">know</a>, _<span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.$anonfun.know" title="ConstantOptimizer.this.State">know</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a> <span class="delimiter">}</span>

        case BOX<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          val value = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          <span class="comment">// we simulate boxing by, um, boxing the possible/impossible contents</span>
          <span class="comment">// so if we have Possible(1,2) originally then we'll end up with</span>
          <span class="comment">// a Possible(Boxed(1), Boxed(2))</span>
          <span class="comment">// Similarly, if we know the input is not a 0 then we'll know the</span>
          <span class="comment">// output is not a Boxed(0)</span>
          val <span title="&lt;refinement of Product with ConstantOptimizer.this.Contents&gt; extends Product with Serializable with ConstantOptimizer.this.Contents">newValue</span> = <span title="ConstantOptimizer.this.Contents">value</span> match <span class="delimiter">{</span>
            case Possible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">values</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve" title="(possible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Possible">Possible</a><span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">values</span> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="(f: ConstantOptimizer.this.Datum =&gt; ConstantOptimizer.this.Boxed)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[ConstantOptimizer.this.Datum],ConstantOptimizer.this.Boxed,Set[ConstantOptimizer.this.Datum]])Set[ConstantOptimizer.this.Datum]">map</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Boxed.readResolve" title="ConstantOptimizer.this.Boxed.type">Boxed</a><span class="delimiter">)</span>
            case Impossible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">values</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Impossible.readResolve" title="(impossible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Impossible">Impossible</a><span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">values</span> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="(f: ConstantOptimizer.this.Datum =&gt; ConstantOptimizer.this.Boxed)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[ConstantOptimizer.this.Datum],ConstantOptimizer.this.Boxed,Set[ConstantOptimizer.this.Datum]])Set[ConstantOptimizer.this.Datum]">map</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Boxed.readResolve" title="ConstantOptimizer.this.Boxed.type">Boxed</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <span title="&lt;refinement of Product with ConstantOptimizer.this.Contents&gt; extends Product with Serializable with ConstantOptimizer.this.Contents">newValue</span>

        case UNBOX<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          val value = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          val <span title="ConstantOptimizer.this.Contents">newValue</span> = <span title="ConstantOptimizer.this.Contents">value</span> match <span class="delimiter">{</span>
            <span class="comment">// if we have a Possible, then all the possibilities</span>
            <span class="comment">// should themselves be Boxes. In that</span>
            <span class="comment">// case we can merge them to figure out what the UNBOX will produce</span>
            case Possible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span><span class="delimiter">)</span> =&gt;
              <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a>, <span title="String(&quot;Empty possible set indicating an uninitialized location&quot;)" class="string">&quot;Empty possible set indicating an uninitialized location&quot;</span><span class="delimiter">)</span>
              val sanitized: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[ConstantOptimizer.this.Contents]">Set</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span> = <span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="Set[ConstantOptimizer.this.Contents]">map</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.sanitized.$anonfun.x0$2" title="&lt;refinement of Product with ConstantOptimizer.this.Contents&gt; extends Product with Serializable with ConstantOptimizer.this.Contents" class="delimiter">{</a>
                case Boxed<span class="delimiter">(</span><span title="ConstantOptimizer.this.Datum">content</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SinglePossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Possible">SinglePossible</a><span class="delimiter">(</span><span title="ConstantOptimizer.this.Datum">content</span><span class="delimiter">)</span>
                case _ =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a>
              <span class="delimiter">}</span><span class="delimiter">)</span>
              <span title="Set[ConstantOptimizer.this.Contents]">sanitized</span> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.reduce" title="(op: (ConstantOptimizer.this.Contents, ConstantOptimizer.this.Contents) =&gt; ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">reduce</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.$anonfun.x$3" title="ConstantOptimizer.this.Contents">_</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge" title="(other: ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">merge</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.$anonfun.x$4" title="ConstantOptimizer.this.Contents">_</a><span class="delimiter">)</span>
            <span class="comment">// if we have an impossible then the thing that's impossible</span>
            <span class="comment">// should be a box. We'll unbox that to see what we get</span>
            case <a title="ConstantOptimizer.this.Impossible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.unknown">unknown</a>@Impossible<span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span><span class="delimiter">)</span> =&gt;
              if <span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span>.<a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.unknown" title="ConstantOptimizer.this.Impossible">unknown</a>
              <span class="delimiter">}</span> else <span class="delimiter">{</span>
                val sanitized: <a href="../../../../collection/immutable/Set.scala.html#scala.collection.immutable;Set" title="Set[ConstantOptimizer.this.Contents]">Set</a><span class="delimiter">[</span>Contents<span class="delimiter">]</span> = <span class="delimiter">(</span><span title="Set[ConstantOptimizer.this.Datum]">inners</span> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="Set[ConstantOptimizer.this.Contents]">map</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.sanitized.$anonfun.x0$3" title="ConstantOptimizer.this.Impossible" class="delimiter">{</a>
                  case Boxed<span class="delimiter">(</span><span title="ConstantOptimizer.this.Datum">content</span><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.SingleImpossible" title="(x: ConstantOptimizer.this.Datum)ConstantOptimizer.this.Impossible">SingleImpossible</a><span class="delimiter">(</span><span title="ConstantOptimizer.this.Datum">content</span><span class="delimiter">)</span>
                  case _ =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a>
                <span class="delimiter">}</span><span class="delimiter">)</span>
                <span title="Set[ConstantOptimizer.this.Contents]">sanitized</span> <a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.reduce" title="(op: (ConstantOptimizer.this.Contents, ConstantOptimizer.this.Contents) =&gt; ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">reduce</a> <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.$anonfun.x$5" title="ConstantOptimizer.this.Contents">_</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.merge" title="(other: ConstantOptimizer.this.Contents)ConstantOptimizer.this.Contents">merge</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.newValue.$anonfun.x$6" title="ConstantOptimizer.this.Contents">_</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <span title="ConstantOptimizer.this.Contents">newValue</span>

        case LOAD_MODULE<span class="delimiter">(</span>_<span class="delimiter">)</span> | NEW<span class="delimiter">(</span>_<span class="delimiter">)</span> | LOAD_EXCEPTION<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NOT_NULL" title="=&gt; ConstantOptimizer.this.Impossible">NOT_NULL</a>

        case CREATE_ARRAY<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NOT_NULL" title="=&gt; ConstantOptimizer.this.Impossible">NOT_NULL</a>

        case IS_INSTANCE<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <span class="comment">// TODO IS_INSTANCE is going to be followed by a C(Z)JUMP</span>
          <span class="comment">// and if IS_INSTANCE/C(Z)JUMP the branch for &quot;true&quot; can</span>
          <span class="comment">// know that whatever was checked was not a null</span>
          <span class="comment">// see the TODO on CJUMP for more information about propagating null</span>
          <span class="comment">// information</span>
          <span class="comment">// TODO if the top of stack is guaranteed null then we can eliminate this IS_INSTANCE check and</span>
          <span class="comment">// replace with a constant false, but how often is a knowable null checked for instanceof?</span>
          <span class="comment">// TODO we could track type information and statically know to eliminate IS_INSTANCE</span>
          <span class="comment">// which might be a nice win under specialization</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a> <span class="comment">// it's actually a Possible(true, false) but since the following instruction</span>
        <span class="comment">// will be a conditional jump comparing to true or false there</span>
        <span class="comment">// nothing to be gained by being more precise</span>

        case CHECK_CAST<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <span class="comment">// TODO we could track type information and statically know to eliminate CHECK_CAST</span>
          <span class="comment">// but that's probably not a huge win</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a>

        case DUP<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          val value = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.push" title="(contents: ConstantOptimizer.this.Contents)ConstantOptimizer.this.State">push</a> <span title="ConstantOptimizer.this.Contents">value</span>

        case DROP<span class="delimiter">(</span>_<span class="delimiter">)</span> | MONITOR_ENTER<span class="delimiter">(</span><span class="delimiter">)</span> | MONITOR_EXIT<span class="delimiter">(</span><span class="delimiter">)</span> | STORE_ARRAY_ITEM<span class="delimiter">(</span>_<span class="delimiter">)</span> | STORE_FIELD<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.dropConsumed" title="=&gt; ConstantOptimizer.this.State">dropConsumed</a>

        case SCOPE_ENTER<span class="delimiter">(</span>_<span class="delimiter">)</span> | SCOPE_EXIT<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.in" title="ConstantOptimizer.this.State">in</a>

        case JUMP<span class="delimiter">(</span>_<span class="delimiter">)</span> | CJUMP<span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> | CZJUMP<span class="delimiter">(</span>_, _, _, _<span class="delimiter">)</span> | RETURN<span class="delimiter">(</span>_<span class="delimiter">)</span> | THROW<span class="delimiter">(</span>_<span class="delimiter">)</span> | SWITCH<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt;
          <a href="../icode/ICodes.scala.html#scala.tools.nsc.backend.icode;ICodes.dumpClassesAndAbort" title="(msg: String)Nothing">dumpClassesAndAbort</a><span class="delimiter">(</span><span title="String(&quot;Unexpected block ending instruction: &quot;)" class="string">&quot;Unexpected block ending instruction: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="comment">/**
     * interpret the last instruction of a block which will be jump, a conditional branch, a throw, or a return.
     * It will result in a map from target blocks to the input state computed for that block. It
     * also computes a replacement list of instructions
     */</span>
    private def <a title="(in: ConstantOptimizer.this.State, inst: ConstantOptimization.this.global.icodes.Instruction)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast">interpretLast</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in">in</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a>, <a title="ConstantOptimization.this.global.icodes.Instruction" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst">inst</a>: <a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction" title="ConstantOptimization.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a>Map<span class="delimiter">[</span>BasicBlock, State<span class="delimiter">]</span>, List<span class="delimiter">[</span>Instruction<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      def <a title="(in1: ConstantOptimizer.this.Contents, tagSet: List[Int])Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch">canSwitch</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch.in1">in1</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a>, <a title="List[Int]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch.tagSet">tagSet</a>: <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[Int]">List</a><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch.in1" title="ConstantOptimizer.this.Contents">in1</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightEqual</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve" title="(possible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Possible">Possible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch.tagSet" title="List[Int]">tagSet</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="scala.collection.immutable.Set[Int]">toSet</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="(f: Int =&gt; ConstantOptimizer.this.Const)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Int],ConstantOptimizer.this.Const,Set[ConstantOptimizer.this.Datum]])Set[ConstantOptimizer.this.Datum]">map</a> <span class="delimiter">{</span> tag: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch.$anonfun.tag" title="Int">tag</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="comment">/* common code for interpreting CJUMP and CZJUMP */</span>
      def <a title="(kind: ConstantOptimization.this.global.icodes.TypeKind, val1: ConstantOptimizer.this.Contents, val2: ConstantOptimizer.this.Contents, success: ConstantOptimization.this.global.icodes.BasicBlock, failure: ConstantOptimization.this.global.icodes.BasicBlock, cond: ConstantOptimization.this.global.icodes.TestOp)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional">interpretConditional</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.TypeKind" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.kind">kind</a>: <a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds;TypeKind" title="ConstantOptimization.this.global.icodes.TypeKind">TypeKind</a>, <a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val1">val1</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a>, <a title="ConstantOptimizer.this.Contents" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val2">val2</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents" title="ConstantOptimizer.this.Contents">Contents</a>, <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.success">success</a>: <a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.failure">failure</a>: <a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="ConstantOptimization.this.global.icodes.TestOp" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.cond">cond</a>: <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives;TestOp" title="ConstantOptimization.this.global.icodes.TestOp">TestOp</a><span class="delimiter">)</span>: <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a>Map<span class="delimiter">[</span>BasicBlock, State<span class="delimiter">]</span>, List<span class="delimiter">[</span>Instruction<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="comment">// TODO use reaching analysis to update the state in the two branches</span>
        <span class="comment">// e.g. if the comparison was checking null equality on local x</span>
        <span class="comment">// then the in the success branch we know x is null and</span>
        <span class="comment">// on the failure branch we know it is not</span>
        <span class="comment">// in fact, with copy propagation we could propagate that knowledge</span>
        <span class="comment">// back through a chain of locations</span>
        <span class="comment">//</span>
        <span class="comment">// TODO if we do all that we need to be careful in the</span>
        <span class="comment">// case that success and failure are the same target block</span>
        <span class="comment">// because we're using a Map and don't want one possible state to clobber the other</span>
        <span class="comment">// alternative mayb we should just replace the conditional with a jump if both targets are the same</span>

        def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightEqual">mightEqual</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val1" title="ConstantOptimizer.this.Contents">val1</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightEqual</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val2" title="ConstantOptimizer.this.Contents">val2</a>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightNotEqual">mightNotEqual</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val1" title="ConstantOptimizer.this.Contents">val1</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightNotEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightNotEqual</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.val2" title="ConstantOptimizer.this.Contents">val2</a>
        def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.guaranteedEqual">guaranteedEqual</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightEqual" title="=&gt; Boolean">mightEqual</a> <a href="../../../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightNotEqual" title="=&gt; Boolean">mightNotEqual</a>

        def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.succPossible">succPossible</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.cond" title="ConstantOptimization.this.global.icodes.TestOp">cond</a> match <span class="delimiter">{</span>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.EQ" title="ConstantOptimization.this.global.icodes.EQ.type">EQ</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightEqual" title="=&gt; Boolean">mightEqual</a>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.NE" title="ConstantOptimization.this.global.icodes.NE.type">NE</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightNotEqual" title="=&gt; Boolean">mightNotEqual</a>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.LT" title="ConstantOptimization.this.global.icodes.LT.type">LT</a> | <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.GT" title="ConstantOptimization.this.global.icodes.GT.type">GT</a> =&gt; <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.guaranteedEqual" title="=&gt; Boolean">guaranteedEqual</a> <span class="comment">// if the two are guaranteed to be equal then they can't be LT/GT</span>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.LE" title="ConstantOptimization.this.global.icodes.LE.type">LE</a> | <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.GE" title="ConstantOptimization.this.global.icodes.GE.type">GE</a> =&gt; true
        <span class="delimiter">}</span>

        def <a title="=&gt; Boolean" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.failPossible">failPossible</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.cond" title="ConstantOptimization.this.global.icodes.TestOp">cond</a> match <span class="delimiter">{</span>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.EQ" title="ConstantOptimization.this.global.icodes.EQ.type">EQ</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightNotEqual" title="=&gt; Boolean">mightNotEqual</a>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.NE" title="ConstantOptimization.this.global.icodes.NE.type">NE</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.mightEqual" title="=&gt; Boolean">mightEqual</a>
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.LT" title="ConstantOptimization.this.global.icodes.LT.type">LT</a> | <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.GT" title="ConstantOptimization.this.global.icodes.GT.type">GT</a> =&gt; true
          case <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.LE" title="ConstantOptimization.this.global.icodes.LE.type">LE</a> | <a href="../icode/Primitives.scala.html#scala.tools.nsc.backend.icode;Primitives.GE" title="ConstantOptimization.this.global.icodes.GE.type">GE</a> =&gt; <a href="../../../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.guaranteedEqual" title="=&gt; Boolean">guaranteedEqual</a> <span class="comment">// if the two are guaranteed to be equal then they must be LE/GE</span>
        <span class="delimiter">}</span>

        val out = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop" title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.out">drop</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction.consumed" title="=&gt; Int">consumed</a>

        var <a title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result">result</a> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]">Map</a><span title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.succPossible" title="=&gt; Boolean">succPossible</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a> <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="(kv: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State))scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">+=</a> <span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.success" title="ConstantOptimization.this.global.icodes.BasicBlock">success</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.out" title="ConstantOptimizer.this.State">out</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.failPossible" title="=&gt; Boolean">failPossible</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a> <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="(kv: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State))scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">+=</a> <span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.failure" title="ConstantOptimization.this.global.icodes.BasicBlock">failure</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.out" title="ConstantOptimizer.this.State">out</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        val <a title="List[ConstantOptimization.this.global.icodes.Instruction]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.replacements">replacements</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.List" title="scala.collection.immutable.List.type">List</a>.<a href="../../../../collection/generic/GenTraversableFactory.scala.html#scala.collection.generic;GenTraversableFactory.fill(7c98e57083)" title="(n: Int)(elem: =&gt; ConstantOptimization.this.global.icodes.opcodes.DROP)List[ConstantOptimization.this.global.icodes.opcodes.DROP]">fill</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction.consumed" title="=&gt; Int">consumed</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes;DROP" title="(typ: ConstantOptimization.this.global.icodes.TypeKind)ConstantOptimization.this.global.icodes.opcodes.DROP">DROP</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.kind" title="ConstantOptimization.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: ConstantOptimization.this.global.icodes.Instruction with Product with Serializable)(implicit bf: scala.collection.generic.CanBuildFrom[List[ConstantOptimization.this.global.icodes.opcodes.DROP],ConstantOptimization.this.global.icodes.Instruction with Product with Serializable,List[ConstantOptimization.this.global.icodes.Instruction with Product with Serializable]])List[ConstantOptimization.this.global.icodes.Instruction with Product with Serializable]">:+</a> <a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes;JUMP" title="(whereto: ConstantOptimization.this.global.icodes.BasicBlock)ConstantOptimization.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a>.<a href="../../../../collection/immutable/MapLike.scala.html#scala.collection.immutable;MapLike.keySet" title="=&gt; scala.collection.immutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">keySet</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">head</a><span class="delimiter">)</span>
        else <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.Instruction)List[ConstantOptimization.this.global.icodes.Instruction]">::</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

        <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _2: List[ConstantOptimization.this.global.icodes.Instruction])(scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional.replacements" title="List[ConstantOptimization.this.global.icodes.Instruction]">replacements</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> match <span class="delimiter">{</span>
        case JUMP<span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.whereto">whereto</a><span class="delimiter">)</span> =&gt;
          <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _2: List[ConstantOptimization.this.global.icodes.Instruction])(scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">Map</a><span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.whereto" title="ConstantOptimization.this.global.icodes.BasicBlock">whereto</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.Instruction)List[ConstantOptimization.this.global.icodes.Instruction]">::</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>

        case CJUMP<span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.BasicBlock">success</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">failure</span>, <span title="ConstantOptimization.this.global.icodes.TestOp">cond</span>, <span title="ConstantOptimization.this.global.icodes.TypeKind">kind</span><span class="delimiter">)</span> =&gt;
          val in1 = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          val in2 = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(1)" class="int">1</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional" title="(kind: ConstantOptimization.this.global.icodes.TypeKind, val1: ConstantOptimizer.this.Contents, val2: ConstantOptimizer.this.Contents, success: ConstantOptimization.this.global.icodes.BasicBlock, failure: ConstantOptimization.this.global.icodes.BasicBlock, cond: ConstantOptimization.this.global.icodes.TestOp)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])">interpretConditional</a><span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.TypeKind">kind</span>, <span title="ConstantOptimizer.this.Contents">in1</span>, <span title="ConstantOptimizer.this.Contents">in2</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">success</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">failure</span>, <span title="ConstantOptimization.this.global.icodes.TestOp">cond</span><span class="delimiter">)</span>

        case CZJUMP<span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.BasicBlock">success</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">failure</span>, <span title="ConstantOptimization.this.global.icodes.TestOp">cond</span>, <span title="ConstantOptimization.this.global.icodes.TypeKind">kind</span><span class="delimiter">)</span> =&gt;
          val in1 = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          val <span title="ConstantOptimizer.this.Contents">in2</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.getZeroOf" title="(k: ConstantOptimization.this.global.icodes.TypeKind)ConstantOptimizer.this.Contents">getZeroOf</a><span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.TypeKind">kind</span><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.interpretConditional" title="(kind: ConstantOptimization.this.global.icodes.TypeKind, val1: ConstantOptimizer.this.Contents, val2: ConstantOptimizer.this.Contents, success: ConstantOptimization.this.global.icodes.BasicBlock, failure: ConstantOptimization.this.global.icodes.BasicBlock, cond: ConstantOptimization.this.global.icodes.TestOp)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])">interpretConditional</a><span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.TypeKind">kind</span>, <span title="ConstantOptimizer.this.Contents">in1</span>, <span title="ConstantOptimizer.this.Contents">in2</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">success</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">failure</span>, <span title="ConstantOptimization.this.global.icodes.TestOp">cond</span><span class="delimiter">)</span>

        case SWITCH<span class="delimiter">(</span><a title="List[List[Int]]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.tags">tags</a>, <a title="List[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels">labels</a><span class="delimiter">)</span> =&gt;
          val in1 = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.peek" title="ConstantOptimizer.this.Contents">peek</a> <span title="Int(0)" class="int">0</span>
          val reachableNormalLabels = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.tags" title="List[List[Int]]">tags</a> <a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[ConstantOptimization.this.global.icodes.BasicBlock])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[Int]],(List[Int], ConstantOptimization.this.global.icodes.BasicBlock),List[(List[Int], ConstantOptimization.this.global.icodes.BasicBlock)]])List[(List[Int], ConstantOptimization.this.global.icodes.BasicBlock)]">zip</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.collect" title="List[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels">collect</a> <a title="&lt;$anon: ((List[Int], ConstantOptimization.this.global.icodes.BasicBlock)) =&gt; ConstantOptimization.this.global.icodes.BasicBlock&gt; extends scala.runtime.AbstractPartialFunction[(List[Int], ConstantOptimization.this.global.icodes.BasicBlock),ConstantOptimization.this.global.icodes.BasicBlock] with Serializable" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case <span class="delimiter">(</span><a title="List[Int]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels;$anonfun.isDefinedAt.tagSet">tagSet</a>, <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels;$anonfun.isDefinedAt.label">label</a><span class="delimiter">)</span> if <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.canSwitch" title="(in1: ConstantOptimizer.this.Contents, tagSet: List[Int])Boolean">canSwitch</a><span class="delimiter">(</span><span title="ConstantOptimizer.this.Contents">in1</span>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels;$anonfun.isDefinedAt.tagSet" title="List[Int]">tagSet</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels;$anonfun.isDefinedAt.label" title="ConstantOptimization.this.global.icodes.BasicBlock">label</a> <span class="delimiter">}</span>
          val <a title="List[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels">reachableLabels</a> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.tags" title="List[List[Int]]">tags</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span>, <a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;When SWITCH node has empty array of tags it should have just one (default) label: &quot;)">When SWITCH node has empty array of tags it should have just one (default) label: $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a>
          <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.lengthCompare" title="(len: Int)Int">lengthCompare</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.tags" title="List[List[Int]]">tags</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#scala;Int.>(5f58a84eb3)" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// if we've got an extra label then it's the default</span>
            val <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels.defaultLabel">defaultLabel</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.labels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">labels</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.last" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">last</a>
            <span class="comment">// see if the default is reachable by seeing if the input might be out of the set</span>
            <span class="comment">// of all tags</span>
            val <a title="ConstantOptimizer.this.Possible" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels.allTags">allTags</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Possible.readResolve" title="(possible: Set[ConstantOptimizer.this.Datum])ConstantOptimizer.this.Possible">Possible</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.tags" title="List[List[Int]]">tags</a>.<a href="../../../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[Int] =&gt; scala.collection.GenTraversableOnce[Int])List[Int]">flatten</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSet" title="scala.collection.immutable.Set[Int]">toSet</a> <a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.map" title="(f: Int =&gt; ConstantOptimizer.this.Const)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Int],ConstantOptimizer.this.Const,Set[ConstantOptimizer.this.Datum]])Set[ConstantOptimizer.this.Datum]">map</a> <span class="delimiter">{</span> tag: <a href="../../../../Int.scala.html#scala;Int" title="Int">Int</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.Const.readResolve" title="(c: ConstantOptimization.this.global.Constant)ConstantOptimizer.this.Const">Const</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)ConstantOptimization.this.global.Constant">Constant</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels.allTags.$anonfun.tag" title="Int">tag</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
            if <span class="delimiter">(</span><span title="ConstantOptimizer.this.Contents">in1</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;Contents.mightNotEqual" title="(other: ConstantOptimizer.this.Contents)Boolean">mightNotEqual</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels.allTags" title="ConstantOptimizer.this.Possible">allTags</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableNormalLabels</a> <a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: ConstantOptimization.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[ConstantOptimization.this.global.icodes.BasicBlock],ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.BasicBlock]])List[ConstantOptimization.this.global.icodes.BasicBlock]">:+</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels.defaultLabel" title="ConstantOptimization.this.global.icodes.BasicBlock">defaultLabel</a>
            <span class="delimiter">}</span> else <span class="delimiter">{</span>
              <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableNormalLabels</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableNormalLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableNormalLabels</a>
          <span class="delimiter">}</span>
          <span class="comment">// TODO similar to the comment in interpretConditional, we should update our the State going into each</span>
          <span class="comment">// branch based on which tag is being matched. Also, just like interpretConditional, if target blocks</span>
          <span class="comment">// are the same we need to merge State rather than clobber</span>

          <span class="comment">// alternative, maybe we should simplify the SWITCH to not have same target labels</span>
          val newState = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.in" title="ConstantOptimizer.this.State">in</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.drop" title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.newState">drop</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a>.<a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes;Instruction.consumed" title="=&gt; Int">consumed</a>
          val <a title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.result">result</a> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">Map</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableLabels</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ConstantOptimization.this.global.icodes.BasicBlock =&gt; (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State))(implicit bf: scala.collection.generic.CanBuildFrom[List[ConstantOptimization.this.global.icodes.BasicBlock],(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State),List[(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)]])List[(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)]">map</a> <span class="delimiter">{</span> <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.result.$anonfun.label">label</a> =&gt; <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.result.$anonfun.label" title="ConstantOptimization.this.global.icodes.BasicBlock">label</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.newState" title="ConstantOptimizer.this.State">newState</a><span class="delimiter">)</span> <span class="delimiter">}</span>: _*<span class="delimiter">)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableLabels</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _2: List[ConstantOptimization.this.global.icodes.Instruction with Product with Serializable])(scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction with Product with Serializable])" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a>, <a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes;DROP" title="(typ: ConstantOptimization.this.global.icodes.TypeKind)ConstantOptimization.this.global.icodes.opcodes.DROP">DROP</a><span class="delimiter">(</span><a href="../icode/TypeKinds.scala.html#scala.tools.nsc.backend.icode;TypeKinds.INT" title="ConstantOptimization.this.global.icodes.INT.type">INT</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.Instruction with Product with Serializable)List[ConstantOptimization.this.global.icodes.Instruction with Product with Serializable]">::</a> <a href="../icode/Opcodes.scala.html#scala.tools.nsc.backend.icode;Opcodes.opcodes;JUMP" title="(whereto: ConstantOptimization.this.global.icodes.BasicBlock)ConstantOptimization.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.reachableLabels" title="List[ConstantOptimization.this.global.icodes.BasicBlock]">reachableLabels</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">head</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.opcodes.JUMP)List[ConstantOptimization.this.global.icodes.opcodes.JUMP]">::</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
          else <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _2: List[ConstantOptimization.this.global.icodes.Instruction])(scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.result" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">result</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.Instruction)List[ConstantOptimization.this.global.icodes.Instruction]">::</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>

        <span class="comment">// these instructions don't have target blocks</span>
        <span class="comment">// (exceptions are assumed to be reachable from all instructions)</span>
        case RETURN<span class="delimiter">(</span>_<span class="delimiter">)</span> | THROW<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,Nothing], _2: List[ConstantOptimization.this.global.icodes.Instruction])(scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,Nothing], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="../../../../Predef.scala.html#scala.Predef.Map" title="=&gt; scala.collection.immutable.Map.type">Map</a>.<a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable.Map.empty" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,Nothing]">empty</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: ConstantOptimization.this.global.icodes.Instruction)List[ConstantOptimization.this.global.icodes.Instruction]">::</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>

        case _ =&gt;
          <a href="../icode/ICodes.scala.html#scala.tools.nsc.backend.icode;ICodes.dumpClassesAndAbort" title="(msg: String)Nothing">dumpClassesAndAbort</a><span class="delimiter">(</span><span title="String(&quot;Unexpected non-block ending instruction: &quot;)" class="string">&quot;Unexpected non-block ending instruction: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Analyze a single block to find how it transforms an input state into a states for its successor blocks
     * Also computes a list of instructions to be used to replace its last instruction
     */</span>
    private def <a title="(in: ConstantOptimizer.this.State, block: ConstantOptimization.this.global.icodes.BasicBlock)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock">interpretBlock</a><span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.in">in</a>: <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a>, <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.block">block</a>: <a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Tuple3.scala.html#scala;Tuple3" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a>Map<span class="delimiter">[</span>BasicBlock, State<span class="delimiter">]</span>, Map<span class="delimiter">[</span>BasicBlock, State<span class="delimiter">]</span>, List<span class="delimiter">[</span>Instruction<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;interpreting block &quot;)">interpreting block $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="comment">// number of instructions excluding the last one</span>
      val normalCount = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.size" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#scala;Int.-(1409840560)" title="Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalCount">-</a> <span title="Int(1)" class="int">1</span>

      val <a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionState">exceptionState</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.in" title="ConstantOptimizer.this.State">in</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.cleanStack" title="=&gt; ConstantOptimizer.this.State">cleanStack</a>
      var <a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState">normalExitState</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.in" title="ConstantOptimizer.this.State">in</a>
      var <a title="Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.idx">idx</a> = <span title="Int(0)" class="int">0</span>
      while <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.idx" title="Int">idx</a> <a href="../../../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalCount" title="Int">normalCount</a><span class="delimiter">)</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.while$1" title="()Unit" class="delimiter">{</a>
        val <a title="ConstantOptimization.this.global.icodes.Instruction" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.inst">inst</a> = <a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.apply" title="(n: Int)ConstantOptimization.this.global.icodes.Instruction">block</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.idx" title="Int">idx</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState" title="ConstantOptimizer.this.State">normalExitState</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretInst" title="(in: ConstantOptimizer.this.State, inst: ConstantOptimization.this.global.icodes.Instruction)ConstantOptimizer.this.State">interpretInst</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState" title="ConstantOptimizer.this.State">normalExitState</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.inst" title="ConstantOptimization.this.global.icodes.Instruction">inst</a><span class="delimiter">)</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState" title="ConstantOptimizer.this.State">normalExitState</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionState" title="ConstantOptimizer.this.State">exceptionState</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionState" title="ConstantOptimizer.this.State">exceptionState</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="(locals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents], stack: List[ConstantOptimizer.this.Contents])ConstantOptimizer.this.State">copy</a><span class="delimiter">(</span>locals = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionState" title="ConstantOptimizer.this.State">exceptionState</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.mergeLocals" title="(olocals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents])Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">mergeLocals</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState" title="ConstantOptimizer.this.State">normalExitState</a>.<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.locals" title="=&gt; Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">locals</a><span class="delimiter">)</span>
        <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.idx" title="Int">idx</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>

      val pairs = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.exceptionSuccessors" title="=&gt; List[ConstantOptimization.this.global.icodes.BasicBlock]">exceptionSuccessors</a> <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.pairs">map</a> <span class="delimiter">{</span> <a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.pairs.$anonfun.b">b</a> =&gt; <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.pairs.$anonfun.b" title="ConstantOptimization.this.global.icodes.BasicBlock">b</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionState" title="ConstantOptimizer.this.State">exceptionState</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      val <a title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionMap">exceptionMap</a> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">Map</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.pairs" title="List[(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)]">pairs</a>: _*<span class="delimiter">)</span>

      val <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#scala;Tuple2._1" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitMap">normalExitMap</a>, <a href="../../../../Tuple2.scala.html#scala;Tuple2._2" title="List[ConstantOptimization.this.global.icodes.Instruction]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.newInstructions">newInstructions</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretLast" title="(in: ConstantOptimizer.this.State, inst: ConstantOptimization.this.global.icodes.Instruction)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])">interpretLast</a><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction]) @unchecked" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitState" title="ConstantOptimizer.this.State">normalExitState</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock.lastInstruction" title="=&gt; ConstantOptimization.this.global.icodes.Instruction">lastInstruction</a><span class="delimiter">)</span>

      <a href="../../../../Tuple3.scala.html#scala;Tuple3" title="(_1: Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _2: scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], _3: List[ConstantOptimization.this.global.icodes.Instruction])(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.normalExitMap" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">normalExitMap</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.exceptionMap" title="scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">exceptionMap</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock.newInstructions" title="List[ConstantOptimization.this.global.icodes.Instruction]">newInstructions</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">/**
     * Analyze a single method to find replacement instructions
     */</span>
    private def <a title="(m: ConstantOptimization.this.global.icodes.IMethod)Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod">interpretMethod</a><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.IMethod" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m">m</a>: <a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod" title="ConstantOptimization.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]">Map</a><span class="delimiter">[</span>BasicBlock, List<span class="delimiter">[</span>Instruction<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      import scala.collection.mutable.<span class="delimiter">{</span> Set =&gt; MSet, Map =&gt; MMap <span class="delimiter">}</span>

      <a href="../../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;interpreting method &quot;)">interpreting method $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      var <a title="Int" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.iterations">iterations</a> = <span title="Int(0)" class="int">0</span>

      <span class="comment">// initially we know that 'this' is not null and the params are initialized to some unknown value</span>
      val <a title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initThis">initThis</a>: <a href="../../../../collection/Iterator.scala.html#scala.collection;Iterator" title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">Iterator</a><span class="delimiter">[</span><span class="delimiter">(</span>Local, Contents<span class="delimiter">)</span><span class="delimiter">]</span> = if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.isStatic" title="=&gt; Boolean">isStatic</a><span class="delimiter">)</span> <a href="../../../../package.scala.html#scala.package.Iterator" title="=&gt; collection.Iterator.type">Iterator</a>.<a href="../../../../collection/Iterator.scala.html#scala.collection.Iterator.empty" title="=&gt; Iterator[Nothing]">empty</a> else <a href="../../../../package.scala.html#scala.package.Iterator" title="=&gt; collection.Iterator.type">Iterator</a>.<a href="../../../../collection/Iterator.scala.html#scala.collection.Iterator.single" title="(elem: (ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Impossible))Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Impossible)]">single</a><span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.Local, _2: ConstantOptimizer.this.Impossible)(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Impossible)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.THIS_LOCAL" title="=&gt; ConstantOptimization.this.global.icodes.Local">THIS_LOCAL</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.NOT_NULL" title="=&gt; ConstantOptimizer.this.Impossible">NOT_NULL</a><span class="delimiter">)</span><span class="delimiter">)</span>
      val initOtherLocals: <a href="../../../../collection/Iterator.scala.html#scala.collection;Iterator" title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">Iterator</a><span class="delimiter">[</span><span class="delimiter">(</span>Local, Contents<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.params" title="=&gt; List[ConstantOptimization.this.global.icodes.Local]">params</a>.<a href="../../../../collection/LinearSeqLike.scala.html#scala.collection;LinearSeqLike.iterator" title="=&gt; Iterator[ConstantOptimization.this.global.icodes.Local]">iterator</a> <a href="../../../../collection/Iterator.scala.html#scala.collection;Iterator.map" title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initOtherLocals">map</a> <span class="delimiter">{</span> <a title="ConstantOptimization.this.global.icodes.Local" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initOtherLocals.$anonfun.param">param</a> =&gt; <a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.Local, _2: ConstantOptimizer.this.Impossible)(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Impossible)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initOtherLocals.$anonfun.param" title="ConstantOptimization.this.global.icodes.Local">param</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.UNKNOWN" title="=&gt; ConstantOptimizer.this.Impossible">UNKNOWN</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      val <a title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initialLocals">initialLocals</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">[</span>Local, Contents<span class="delimiter">]</span> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)*)scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">Map</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initThis" title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">initThis</a> <a href="../../../../collection/Iterator.scala.html#scala.collection;Iterator.++" title="(that: =&gt; scala.collection.GenTraversableOnce[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)])Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">++</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initOtherLocals" title="Iterator[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">initOtherLocals</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toSeq" title="=&gt; Seq[(ConstantOptimization.this.global.icodes.Local, ConstantOptimizer.this.Contents)]">toSeq</a>: _*<span class="delimiter">)</span>
      val <a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initialState">initialState</a> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="(locals: Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents], stack: List[ConstantOptimizer.this.Contents])ConstantOptimizer.this.State">State</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initialLocals" title="Map[ConstantOptimization.this.global.icodes.Local,ConstantOptimizer.this.Contents]">initialLocals</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>

      <span class="comment">// worklist of basic blocks to process, initially the start block</span>
      val <a title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist">worklist</a> = <a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="(elems: ConstantOptimization.this.global.icodes.BasicBlock*)scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">MSet</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span>
      <span class="comment">// worklist of exception basic blocks. They're kept in a separate set so they can be</span>
      <span class="comment">// processed after normal flow basic blocks. That's because exception basic blocks</span>
      <span class="comment">// are more likely to have multiple predecessors and queueing them for later</span>
      <span class="comment">// increases the chances that they'll only need to be interpreted once</span>
      val <a title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionlist">exceptionlist</a> = <a href="../../../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.Set[A]">MSet</a><span title="(elems: ConstantOptimization.this.global.icodes.BasicBlock*)scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="comment">// our current best guess at what the input state is for each block</span>
      <span class="comment">// initially we only know about the start block</span>
      val <a title="scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.inputState">inputState</a> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">MMap</a><span title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)*)scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.State.readResolve" title="ConstantOptimizer.this.State">State</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(_1: ConstantOptimization.this.global.icodes.BasicBlock, _2: ConstantOptimizer.this.State)(ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)" class="delimiter">(</a><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.startBlock" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">startBlock</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.initialState" title="ConstantOptimizer.this.State">initialState</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="comment">// update the inputState map based on new information from interpreting a block</span>
      <span class="comment">// When the input state of a block changes, add it back to the work list to be</span>
      <span class="comment">// reinterpreted</span>
      def <a title="(outputStates: Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], worklist: scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock])Unit" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates">updateInputStates</a><span class="delimiter">(</span><a title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.outputStates">outputStates</a>: <a href="../../../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">Map</a><span class="delimiter">[</span>BasicBlock, State<span class="delimiter">]</span>, <a title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.worklist">worklist</a>: <a href="../../../../collection/mutable/Set.scala.html#scala.collection.mutable;Set" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">MSet</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        for <span class="delimiter">(</span><span class="delimiter">(</span><a title="ConstantOptimization.this.global.icodes.BasicBlock" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.block">block</a>, <a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.newState">newState</a><span class="delimiter">)</span> &lt;- <a href="../../../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.foreach" title="(f: ((ConstantOptimization.this.global.icodes.BasicBlock, ConstantOptimizer.this.State)) =&gt; Unit)Unit">outputStates</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          val oldState = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.inputState" title="scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">inputState</a> <a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.get" title="Option[ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.oldState">get</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>
          val updatedState = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.oldState" title="Option[ConstantOptimizer.this.State]">oldState</a> <a href="../../../../Option.scala.html#scala;Option.map" title="(f: ConstantOptimizer.this.State =&gt; ConstantOptimizer.this.State)Option[ConstantOptimizer.this.State]">map</a> <span class="delimiter">(</span><a title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.updatedState.$anonfun.x">x</a> =&gt; <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.updatedState.$anonfun.x" title="ConstantOptimizer.this.State">x</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer;State.merge" title="(other: ConstantOptimizer.this.State)ConstantOptimizer.this.State">merge</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.newState" title="ConstantOptimizer.this.State">newState</a><span class="delimiter">)</span> <a href="../../../../Option.scala.html#scala;Option.getOrElse" title="ConstantOptimizer.this.State" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.updatedState">getOrElse</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.newState" title="ConstantOptimizer.this.State">newState</a>
          if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.oldState" title="Option[ConstantOptimizer.this.State]">oldState</a> <span title="(x$1: Any)Boolean">!=</span> <a href="../../../../Option.scala.html#scala;Some" title="(x: ConstantOptimizer.this.State)Some[ConstantOptimizer.this.State]">Some</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.updatedState" title="ConstantOptimizer.this.State">updatedState</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.add" title="(elem: ConstantOptimization.this.global.icodes.BasicBlock)Boolean">add</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a>
            <a href="../../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: ConstantOptimization.this.global.icodes.BasicBlock, value: ConstantOptimizer.this.State)Unit">inputState</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.block" title="ConstantOptimization.this.global.icodes.BasicBlock">block</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates.$anonfun.updatedState" title="ConstantOptimizer.this.State">updatedState</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="comment">// the instructions to be used as the last instructions on each block</span>
      val <a title="scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.replacements">replacements</a> = <a href="../../../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">MMap</a><span title="(elems: (ConstantOptimization.this.global.icodes.BasicBlock, List[ConstantOptimization.this.global.icodes.Instruction])*)scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#scala.tools.nsc.backend.icode;BasicBlocks;BasicBlock" title="ConstantOptimization.this.global.icodes.BasicBlock">BasicBlock</a>, <a href="../../../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[ConstantOptimization.this.global.icodes.Instruction]">List</a><span class="delimiter">[</span>Instruction<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

      while <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionlist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">exceptionlist</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a>.<a href="../../../../collection/SetLike.scala.html#scala.collection;SetLike.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// once the worklist is empty, start processing exception blocks</span>
          val <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionlist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">exceptionlist</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">head</a>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionlist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">exceptionlist</a> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.remove" title="(elem: ConstantOptimization.this.global.icodes.BasicBlock)Boolean">remove</a> <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.add" title="(elem: ConstantOptimization.this.global.icodes.BasicBlock)Boolean">add</a> <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.iterations" title="Int">iterations</a> <a href="../../../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
          val <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a>.<a href="../../../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; ConstantOptimization.this.global.icodes.BasicBlock">head</a>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a> <a href="../../../../collection/mutable/SetLike.scala.html#scala.collection.mutable;SetLike.remove" title="(elem: ConstantOptimization.this.global.icodes.BasicBlock)Boolean">remove</a> <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span>
          val <a href="../../../../Tuple3.scala.html#scala;Tuple3" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])" class="delimiter">(</a><a href="../../../../Tuple3.scala.html#scala;Tuple3._1" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.normalExitMap">normalExitMap</a>, <a href="../../../../Tuple3.scala.html#scala;Tuple3._2" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionMap">exceptionMap</a>, <a href="../../../../Tuple3.scala.html#scala;Tuple3._3" title="List[ConstantOptimization.this.global.icodes.Instruction]" id="scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.newInstructions">newInstructions</a><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretBlock" title="(in: ConstantOptimizer.this.State, block: ConstantOptimization.this.global.icodes.BasicBlock)(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction])">interpretBlock</a><a href="../../../../Tuple3.scala.html#scala;Tuple3" title="(Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], List[ConstantOptimization.this.global.icodes.Instruction]) @unchecked" class="delimiter">(</a><a href="../../../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: ConstantOptimization.this.global.icodes.BasicBlock)ConstantOptimizer.this.State">inputState</a><span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span><span class="delimiter">)</span>, <span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span><span class="delimiter">)</span>

          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates" title="(outputStates: Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], worklist: scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock])Unit">updateInputStates</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.normalExitMap" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">normalExitMap</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.worklist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">worklist</a><span class="delimiter">)</span>
          <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.updateInputStates" title="(outputStates: Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State], worklist: scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock])Unit">updateInputStates</a><span class="delimiter">(</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionMap" title="Map[ConstantOptimization.this.global.icodes.BasicBlock,ConstantOptimizer.this.State]">exceptionMap</a>, <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.exceptionlist" title="scala.collection.mutable.Set[ConstantOptimization.this.global.icodes.BasicBlock]">exceptionlist</a><span class="delimiter">)</span>
          <a href="../../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.update" title="(key: ConstantOptimization.this.global.icodes.BasicBlock, value: List[ConstantOptimization.this.global.icodes.Instruction])Unit">replacements</a><span class="delimiter">(</span><span title="ConstantOptimization.this.global.icodes.BasicBlock">block</span><span class="delimiter">)</span> = <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.newInstructions" title="List[ConstantOptimization.this.global.icodes.Instruction]">newInstructions</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="../../Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#scala;StringContext.s" title="(args: Any*)String">s</a>&quot;<span title="String(&quot;method &quot;)">method $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a><span title="String(&quot; with &quot;)"> with $</span><span class="delimiter">{</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.m" title="ConstantOptimization.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#scala.tools.nsc.backend.icode;Members;IMethod.blocks" title="=&gt; List[ConstantOptimization.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/SeqLike.scala.html#scala.collection;SeqLike.size" title="=&gt; Int">size</a><span class="delimiter">}</span><span title="String(&quot; reached fixpoint in &quot;)"> reached fixpoint in $</span><a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.iterations" title="Int">iterations</a><span title="String(&quot; iterations&quot;)" class="string"> iterations&quot;</span><span class="delimiter">)</span>
      <a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer.interpretMethod.replacements" title="scala.collection.mutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]">replacements</a>.<a href="../../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toMap" title="(implicit ev: &lt;:&lt;[(ConstantOptimization.this.global.icodes.BasicBlock, List[ConstantOptimization.this.global.icodes.Instruction]),(ConstantOptimization.this.global.icodes.BasicBlock, List[ConstantOptimization.this.global.icodes.Instruction])])scala.collection.immutable.Map[ConstantOptimization.this.global.icodes.BasicBlock,List[ConstantOptimization.this.global.icodes.Instruction]]">toMap</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<a href="#scala.tools.nsc.backend.opt;ConstantOptimization;ConstantOptimizer" title="AnyRef" class="delimiter">}</a>

        </pre>
    </body>
</html>
