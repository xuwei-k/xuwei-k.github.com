<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/ant/ScalaTool.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala Ant Tasks                      **
**    / __/ __// _ | / /  / _ |    (c) 2005-2013, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

package scala.tools.ant

import java.io.<span class="delimiter">{</span>File, InputStream, FileWriter<span class="delimiter">}</span>
import org.apache.tools.ant.BuildException
import org.apache.tools.ant.types.<span class="delimiter">{</span>Path, Reference<span class="delimiter">}</span>

<span class="comment">/** An Ant task that generates a shell or batch script to execute a
 *  Scala program.
 *
 *  This task can take the following parameters as attributes:
 *  - `file` (mandatory),
 *  - `class` (mandatory),
 *  - `platforms`,
 *  - `classpath`,
 *  - `properties`,
 *  - `javaflags`,
 *  - `toolflags`.
 *
 * @author  Gilles Dubochet
 * @version 1.1
 */</span>
class <a title="class ScalaTool extends scala.tools.ant.ScalaMatchingTask" id="scala.tools.ant;ScalaTool">ScalaTool</a> extends <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaMatchingTask" title="scala.tools.ant.ScalaMatchingTask">ScalaMatchingTask</a> <span class="delimiter">{</span>

  private def <a title="=&gt; org.apache.tools.ant.types.Path" id="scala.tools.ant;ScalaTool.emptyPath">emptyPath</a> = new <span title="org.apache.tools.ant.types.Path">Path</span><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool" title="()org.apache.tools.ant.Project">getProject</a><span class="delimiter">)</span>

<span class="comment">/*============================================================================*\
**                             Ant user-properties                            **
\*============================================================================*/</span>

  abstract class <a title="class PermissibleValue extends AnyRef" id="scala.tools.ant;ScalaTool;PermissibleValue">PermissibleValue</a> <a href="#scala.tools.ant;ScalaTool;PermissibleValue" title="ScalaTool.this.PermissibleValue" class="delimiter">{</a>
    val <a title="=&gt; List[String]" id="scala.tools.ant;ScalaTool;PermissibleValue.values">values</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span>
    def <a title="(value: String)Boolean" id="scala.tools.ant;ScalaTool;PermissibleValue.isPermissible">isPermissible</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool;PermissibleValue.isPermissible.value">value</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> =
      <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool;PermissibleValue.isPermissible.value" title="String">value</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.ant;ScalaTool;PermissibleValue.values" title="=&gt; List[String]">values</a>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.exists" title="(p: String =&gt; Boolean)Boolean">exists</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool;PermissibleValue.isPermissible.$anonfun.x$1" title="String">_</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool;PermissibleValue.isPermissible.value" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Defines valid values for the platforms property. */</span>
  object <a title="ScalaTool.this.Platforms.type" id="scala.tools.ant;ScalaTool.Platforms">Platforms</a> extends <a href="#scala.tools.ant;ScalaTool;PermissibleValue" title="ScalaTool.this.PermissibleValue">PermissibleValue</a> <span class="delimiter">{</span>
    val <a title="List[String]" id="scala.tools.ant;ScalaTool.Platforms.values">values</a> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;unix&quot;)" class="string">&quot;unix&quot;</span>, <span title="String(&quot;windows&quot;)" class="string">&quot;windows&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The path to the exec script file. `&quot;.bat&quot;` will be appended for the
    * Windows BAT file, if generated. */</span>
  private var <a title="Option[java.io.File]" id="scala.tools.ant;ScalaTool.file_=">file</a>: <a href="../../Option.scala.html#scala;Option" title="Option[java.io.File]">Option</a><span class="delimiter">[</span>File<span class="delimiter">]</span> = <a href="../../Option.scala.html#scala.None" title="None.type">None</a>

  <span class="comment">/** The main class to run. */</span>
  private var <a title="Option[String]" id="scala.tools.ant;ScalaTool.mainClass_=">mainClass</a>: <a href="../../Option.scala.html#scala;Option" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../Option.scala.html#scala.None" title="None.type">None</a>

  <span class="comment">/** Supported platforms for the script. Either `&quot;unix&quot;` or `&quot;windows&quot;`.
    * Defaults to both. */</span>
  private var <a title="List[String]" id="scala.tools.ant;ScalaTool.platforms_=">platforms</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;unix&quot;)" class="string">&quot;unix&quot;</span>, <span title="String(&quot;windows&quot;)" class="string">&quot;windows&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** An (optional) path to all JARs that this script depend on. Paths must be
    * relative to the scala home directory. If not set, all JAR archives and
    * folders in `&quot;lib/&quot;` are automatically added. */</span>
  private var <a title="List[String]" id="scala.tools.ant;ScalaTool.classpath_=">classpath</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

  <span class="comment">/** An (optional) path to JARs that this script depends on relative to the
    * ant project's `basedir`. */</span>
  private var <a title="org.apache.tools.ant.types.Path" id="scala.tools.ant;ScalaTool.classpathPath_=">classpathPath</a>: <span title="org.apache.tools.ant.types.Path">Path</span> = <a href="#scala.tools.ant;ScalaTool.emptyPath" title="=&gt; org.apache.tools.ant.types.Path">emptyPath</a>

  <span class="comment">/** Comma-separated Java system properties to pass to the JRE. Properties
    * are formatted as `name=value`. Properties `scala.home`, `scala.tool.name`
    * and `scala.tool.version` are always set. */</span>
  private var <a title="List[(String, String)]" id="scala.tools.ant;ScalaTool.properties_=">properties</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[(String, String)]">List</a><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>

  <span class="comment">/** Additional flags passed to the JRE (`&quot;java [javaFlags] class&quot;`). */</span>
  private var <a title="String" id="scala.tools.ant;ScalaTool.javaFlags_=">javaFlags</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/** Additional flags passed to the tool (`&quot;java class [toolFlags]&quot;`).
    * Can only be set when a main class is defined. */</span>
  private var <a title="String" id="scala.tools.ant;ScalaTool.toolFlags_=">toolFlags</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

<span class="comment">/*============================================================================*\
**                             Properties setters                             **
\*============================================================================*/</span>

  <span class="comment">/** Sets the file attribute. */</span>
  def <a title="(input: java.io.File)Unit" id="scala.tools.ant;ScalaTool.setFile">setFile</a><span class="delimiter">(</span><a title="java.io.File" id="scala.tools.ant;ScalaTool.setFile.input">input</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> =
    <a href="#scala.tools.ant;ScalaTool.file_=" title="(x$1: Option[java.io.File])Unit">file</a> = <a href="../../Option.scala.html#scala;Some" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setFile.input" title="java.io.File">input</a><span class="delimiter">)</span>

  <span class="comment">/** Sets the main class attribute. */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setClass">setClass</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setClass.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#scala.tools.ant;ScalaTool.mainClass_=" title="(x$1: Option[String])Unit">mainClass</a> = <a href="../../Option.scala.html#scala;Some" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setClass.input" title="String">input</a><span class="delimiter">)</span>

  <span class="comment">/** Sets the platforms attribute. */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setPlatforms">setPlatforms</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setPlatforms.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#scala.tools.ant;ScalaTool.platforms_=" title="(x$1: List[String])Unit">platforms</a> = <a href="#scala.tools.ant;ScalaTool.setPlatforms.input" title="String">input</a>.<span title="(x$1: String)Array[String]">split</span><a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.flatMap" title="(f: String =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">flatMap</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">{</a> s: <span title="String">String</span> =&gt;
      val <a title="String" id="scala.tools.ant;ScalaTool.setPlatforms.$anonfun.st">st</a> = <a href="#scala.tools.ant;ScalaTool.setPlatforms.$anonfun.s" title="String">s</a>.<span title="()String">trim</span>
      if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.Platforms" title="ScalaTool.this.Platforms.type">Platforms</a>.<a href="#scala.tools.ant;ScalaTool;PermissibleValue.isPermissible" title="(value: String)Boolean">isPermissible</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setPlatforms.$anonfun.st" title="String">st</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">(</span>if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setPlatforms.input" title="String">input</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setPlatforms.$anonfun.st" title="String">st</a><span class="delimiter">)</span> else <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
      else <span class="delimiter">{</span>
        <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaTask.buildError" title="(message: String)Nothing">buildError</a><span class="delimiter">(</span><span title="String(&quot;Platform &quot;)" class="string">&quot;Platform &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.setPlatforms.$anonfun.st" title="String">st</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; does not exist.&quot;)" class="string">&quot; does not exist.&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Sets the classpath with which to run the tool.
   *
   *  Note that this mechanism of setting the classpath is generally preferred
   *  for general purpose scripts, as this does not assume all elements are
   *  relative to the Ant `basedir`.  Additionally, the platform specific
   *  demarcation of any script variables (e.g. `${SCALA_HOME}` or
   * `%SCALA_HOME%`) can be specified in a platform independent way (e.g.
   * `@SCALA_HOME@`) and automatically translated for you.
   */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setClassPath">setClassPath</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setClassPath.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#scala.tools.ant;ScalaTool.classpath_=" title="(x$1: List[String])Unit">classpath</a> = <a href="#scala.tools.ant;ScalaTool.classpath_=" title="=&gt; List[String]">classpath</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[String])List[String]">:::</a> <a href="#scala.tools.ant;ScalaTool.setClassPath.input" title="String">input</a>.<span title="(x$1: String)Array[String]">split</span><a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * A special method that allows ant classpath path definitions to be nested
   * within this ant task.
   */</span>
  def <a title="=&gt; org.apache.tools.ant.types.Path" id="scala.tools.ant;ScalaTool.createClassPath">createClassPath</a>: <span title="org.apache.tools.ant.types.Path">Path</span> = <a href="#scala.tools.ant;ScalaTool.classpathPath_=" title="=&gt; org.apache.tools.ant.types.Path">classpathPath</a>.<span title="()org.apache.tools.ant.types.Path">createPath</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Adds an Ant Path reference to the tool's classpath.
   * Note that all entries in the path must exist either relative to the project
   * basedir or with an absolute path to a file in the filesystem.  As a result,
   * this is not a mechanism for setting the classpath for more general use scripts.
   */</span>
  def <a title="(input: org.apache.tools.ant.types.Reference)Unit" id="scala.tools.ant;ScalaTool.setClassPathRef">setClassPathRef</a><span class="delimiter">(</span><a title="org.apache.tools.ant.types.Reference" id="scala.tools.ant;ScalaTool.setClassPathRef.input">input</a>: <span title="org.apache.tools.ant.types.Reference">Reference</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="org.apache.tools.ant.types.Path" id="scala.tools.ant;ScalaTool.setClassPathRef.tmpPath">tmpPath</a> = <a href="#scala.tools.ant;ScalaTool.emptyPath" title="=&gt; org.apache.tools.ant.types.Path">emptyPath</a>
    <a href="#scala.tools.ant;ScalaTool.setClassPathRef.tmpPath" title="org.apache.tools.ant.types.Path">tmpPath</a>.<span title="(x$1: org.apache.tools.ant.types.Reference)Unit">setRefid</span><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setClassPathRef.input" title="org.apache.tools.ant.types.Reference">input</a><span class="delimiter">)</span>
    <a href="#scala.tools.ant;ScalaTool.classpath_=" title="(x$1: List[String])Unit">classpath</a> = <a href="#scala.tools.ant;ScalaTool.classpath_=" title="=&gt; List[String]">classpath</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[String])List[String]">:::</a> <a href="#scala.tools.ant;ScalaTool.setClassPathRef.tmpPath" title="org.apache.tools.ant.types.Path">tmpPath</a>.<a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">list</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Sets JVM properties that will be set whilst running the tool. */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setProperties">setProperties</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setProperties.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#scala.tools.ant;ScalaTool.properties_=" title="(x$1: List[(String, String)])Unit">properties</a> = <a href="#scala.tools.ant;ScalaTool.setProperties.input" title="String">input</a>.<span title="(x$1: String)Array[String]">split</span><a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.flatMap" title="(f: String =&gt; scala.collection.GenTraversableOnce[(String, String)])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, String),List[(String, String)]])List[(String, String)]">flatMap</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, String),List[(String, String)]]" class="delimiter">{</a> s: <span title="String">String</span> =&gt;
      val <a title="String" id="scala.tools.ant;ScalaTool.setProperties.$anonfun.st">st</a> = <a href="#scala.tools.ant;ScalaTool.setProperties.$anonfun.s" title="String">s</a>.<span title="()String">trim</span>
      val <a title="Array[String]" id="scala.tools.ant;ScalaTool.setProperties.$anonfun.stArray">stArray</a> = <a href="#scala.tools.ant;ScalaTool.setProperties.$anonfun.st" title="String">st</a>.<span title="(x$1: String, x$2: Int)Array[String]">split</span><span class="delimiter">(</span><span title="String(&quot;=&quot;)" class="string">&quot;=&quot;</span>, <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setProperties.$anonfun.stArray" title="Array[String]">stArray</a>.<a href="../../Array.scala.html#scala;Array.length" title="=&gt; Int">length</a> <a href="../../Int.scala.html#scala;Int.==(5f58a84eb3)" title="(x: Int)Boolean">==</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.setProperties.input" title="String">input</a> <span title="(x$1: Any)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: (String, String)*)List[(String, String)]">List</a><span class="delimiter">(</span><a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><a href="../../Array.scala.html#scala;Array.apply" title="(i: Int)String">stArray</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="../../Array.scala.html#scala;Array.apply" title="(i: Int)String">stArray</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
      <span class="delimiter">}</span>
      else
        <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaTask.buildError" title="(message: String)Nothing">buildError</a><span class="delimiter">(</span><span title="String(&quot;Property &quot;)" class="string">&quot;Property &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.setProperties.$anonfun.st" title="String">st</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is not formatted properly.&quot;)" class="string">&quot; is not formatted properly.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Sets flags to be passed to the Java interpreter. */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setJavaflags">setJavaflags</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setJavaflags.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#scala.tools.ant;ScalaTool.javaFlags_=" title="(x$1: String)Unit">javaFlags</a> = <a href="#scala.tools.ant;ScalaTool.setJavaflags.input" title="String">input</a>.<span title="()String">trim</span>

  <span class="comment">/** Sets flags to be passed to the tool. */</span>
  def <a title="(input: String)Unit" id="scala.tools.ant;ScalaTool.setToolflags">setToolflags</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.setToolflags.input">input</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <a href="#scala.tools.ant;ScalaTool.toolFlags_=" title="(x$1: String)Unit">toolFlags</a> = <a href="#scala.tools.ant;ScalaTool.setToolflags.input" title="String">input</a>.<span title="()String">trim</span>

<span class="comment">/*============================================================================*\
**                             Properties getters                             **
\*============================================================================*/</span>

    <span class="comment">/** Gets the value of the classpath attribute in a Scala-friendly form.
      * @return The class path as a list of files. */</span>
    private def <a title="=&gt; String" id="scala.tools.ant;ScalaTool.getUnixclasspath">getUnixclasspath</a>: <span title="String">String</span> =
      <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup" title="(text: String, pre: String, post: String)String">transposeVariableMarkup</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.classpath_=" title="=&gt; List[String]">classpath</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(581ef61a02)" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>.<span title="(x$1: Char, x$2: Char)String">replace</span><span class="delimiter">(</span><span title="Char('\\')" class="char">'\\'</span>, <span title="Char('/')" class="char">'/'</span><span class="delimiter">)</span>, <span title="String(&quot;${&quot;)" class="string">&quot;${&quot;</span>, <span title="String(&quot;}&quot;)" class="string">&quot;}&quot;</span><span class="delimiter">)</span>

    <span class="comment">/** Gets the value of the classpath attribute in a Scala-friendly form.
      * @return The class path as a list of files. */</span>
    private def <a title="=&gt; String" id="scala.tools.ant;ScalaTool.getWinclasspath">getWinclasspath</a>: <span title="String">String</span> =
      <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup" title="(text: String, pre: String, post: String)String">transposeVariableMarkup</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.classpath_=" title="=&gt; List[String]">classpath</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(581ef61a02)" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;;&quot;)" class="string">&quot;;&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>.<span title="(x$1: Char, x$2: Char)String">replace</span><span class="delimiter">(</span><span title="Char('/')" class="char">'/'</span>, <span title="Char('\\')" class="char">'\\'</span><span class="delimiter">)</span>, <span title="String(&quot;%&quot;)" class="string">&quot;%&quot;</span>, <span title="String(&quot;%&quot;)" class="string">&quot;%&quot;</span><span class="delimiter">)</span>

    private def <a title="=&gt; String" id="scala.tools.ant;ScalaTool.getProperties">getProperties</a>: <span title="String">String</span> =
      <a href="#scala.tools.ant;ScalaTool.properties_=" title="=&gt; List[(String, String)]">properties</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: ((String, String)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, String)],String,List[String]])List[String]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a href="#scala.tools.ant;ScalaTool.getProperties.$anonfun.x0$1" title="String" class="delimiter">{</a>
        case <span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.getProperties.$anonfun.name">name</a>,<a title="String" id="scala.tools.ant;ScalaTool.getProperties.$anonfun.value">value</a><span class="delimiter">)</span> =&gt; <span title="String(&quot;-D&quot;)" class="string">&quot;-D&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.getProperties.$anonfun.name" title="String">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;=\&quot;&quot;)" class="string">&quot;=\&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.getProperties.$anonfun.value" title="String">value</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\&quot;&quot;)" class="string">&quot;\&quot;&quot;</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.mkString(581ef61a02)" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

<span class="comment">/*============================================================================*\
**                       Compilation and support methods                      **
\*============================================================================*/</span>

    <span class="comment">// XXX encoding and generalize</span>
    private def <a title="(clazz: Class[_], resource: String)Stream[Char]" id="scala.tools.ant;ScalaTool.getResourceAsCharStream">getResourceAsCharStream</a><span class="delimiter">(</span><a title="Class[_]" id="scala.tools.ant;ScalaTool.getResourceAsCharStream.clazz">clazz</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="String" id="scala.tools.ant;ScalaTool.getResourceAsCharStream.resource">resource</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable;Stream" title="Stream[Char]">Stream</a><span class="delimiter">[</span>Char<span class="delimiter">]</span> = <span class="delimiter">{</span>
      val stream = <a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.clazz" title="Class[_]">clazz</a>.<span title="()ClassLoader">getClassLoader</span><span class="delimiter">(</span><span class="delimiter">)</span> <a title="java.io.InputStream" id="scala.tools.ant;ScalaTool.getResourceAsCharStream.stream">getResourceAsStream</a> <a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.resource" title="String">resource</a>
      if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.stream" title="java.io.InputStream">stream</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="../../package.scala.html#scala.package.Stream" title="=&gt; collection.immutable.Stream.type">Stream</a>.<a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable.Stream.empty" title="scala.collection.immutable.Stream[Nothing]">empty</a>
      else <a href="../../package.scala.html#scala.package.Stream" title="=&gt; collection.immutable.Stream.type">Stream</a> <a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable.Stream.continually" title="(elem: =&gt; Int)scala.collection.immutable.Stream[Int]">continually</a> <a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.stream" title="java.io.InputStream">stream</a>.<span title="()Int">read</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable;Stream.takeWhile" title="(p: Int =&gt; Boolean)scala.collection.immutable.Stream[Int]">takeWhile</a> <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.$anonfun.x$4" title="Int">_</a> <a href="../../Int.scala.html#scala;Int.!=(5f58a84eb3)" title="(x: Int)Boolean">!=</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable;Stream.map" title="(f: Int =&gt; Char)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[Int],Char,Stream[Char]])Stream[Char]">map</a> <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream.$anonfun.x$5" title="Int">_</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Char" class="delimiter">[</span><a href="../../Char.scala.html#scala;Char" title="Char">Char</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// Converts a variable like @SCALA_HOME@ to ${SCALA_HOME} when pre = &quot;${&quot; and post = &quot;}&quot;</span>
    private def <a title="(text: String, pre: String, post: String)String" id="scala.tools.ant;ScalaTool.transposeVariableMarkup">transposeVariableMarkup</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.text">text</a>: <span title="String">String</span>, <a title="String" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.pre">pre</a>: <span title="String">String</span>, <a title="String" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.post">post</a>: <span title="String">String</span><span class="delimiter">)</span> : <span title="String">String</span> = <span class="delimiter">{</span>
      val <a title="scala.io.Source" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.chars">chars</a> = scala.io.<a href="../../io/Source.scala.html#scala.io.Source" title="scala.io.Source.type">Source</a>.<a href="../../io/Source.scala.html#scala.io.Source.fromString" title="(s: String)scala.io.Source">fromString</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.text" title="String">text</a><span class="delimiter">)</span>
      val <a title="StringBuilder" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.builder">builder</a> = new <a href="../../package.scala.html#scala.package;StringBuilder" title="StringBuilder">StringBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>

      while <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.chars" title="scala.io.Source">chars</a>.<a href="../../io/Source.scala.html#scala.io;Source.hasNext" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.while$2" title="()Unit" class="delimiter">{</a>
        val <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.chars" title="scala.io.Source">chars</a>.<a href="../../io/Source.scala.html#scala.io;Source.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="Char">char</span> <a href="../../Char.scala.html#scala;Char.==(2232296601)" title="(x: Char)Boolean">==</a> <span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          var <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.chars" title="scala.io.Source">chars</a>.<a href="../../io/Source.scala.html#scala.io;Source.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
          val <a title="StringBuilder" id="scala.tools.ant;ScalaTool.transposeVariableMarkup.token">token</a> = new <a href="../../package.scala.html#scala.package;StringBuilder" title="StringBuilder">StringBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>
          while <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.chars" title="scala.io.Source">chars</a>.<a href="../../io/Source.scala.html#scala.io;Source.hasNext" title="=&gt; Boolean">hasNext</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span title="Char">char</span> <a href="../../Char.scala.html#scala;Char.!=(2232296601)" title="(x: Char)Boolean">!=</a> <span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span> <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.while$1" title="()Unit" class="delimiter">{</a>
            <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char">char</span><span class="delimiter">)</span>
            <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.chars" title="scala.io.Source">chars</a>.<a href="../../io/Source.scala.html#scala.io;Source.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span>
          else
            <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.pre" title="String">pre</a> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.post" title="String">post</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char">char</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#scala.tools.ant;ScalaTool.transposeVariableMarkup.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a>
    <span class="delimiter">}</span>

    private def <a title="(resource: String, tokens: Map[String,String])String" id="scala.tools.ant;ScalaTool.readAndPatchResource">readAndPatchResource</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant;ScalaTool.readAndPatchResource.resource">resource</a>: <span title="String">String</span>, <a title="Map[String,String]" id="scala.tools.ant;ScalaTool.readAndPatchResource.tokens">tokens</a>: <a href="../../collection/immutable/Map.scala.html#scala.collection.immutable;Map" title="Map[String,String]">Map</a><span class="delimiter">[</span>String, String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      val <a title="Iterator[Char]" id="scala.tools.ant;ScalaTool.readAndPatchResource.chars">chars</a> = <a href="#scala.tools.ant;ScalaTool.getResourceAsCharStream" title="(clazz: Class[_], resource: String)Stream[Char]">getResourceAsCharStream</a><span class="delimiter">(</span>this.<span title="()Class[_]">getClass</span>, <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.resource" title="String">resource</a><span class="delimiter">)</span>.<a href="../../collection/immutable/Stream.scala.html#scala.collection.immutable;Stream.iterator" title="=&gt; Iterator[Char]">iterator</a>
      val <a title="StringBuilder" id="scala.tools.ant;ScalaTool.readAndPatchResource.builder">builder</a> = new <a href="../../package.scala.html#scala.package;StringBuilder" title="StringBuilder">StringBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>

      while <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.chars" title="Iterator[Char]">chars</a>.<a href="../../collection/Iterator.scala.html#scala.collection;Iterator.hasNext" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.while$4" title="()Unit" class="delimiter">{</a>
        val <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.chars" title="Iterator[Char]">chars</a>.<a href="../../collection/Iterator.scala.html#scala.collection;Iterator.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="Char">char</span> <a href="../../Char.scala.html#scala;Char.==(2232296601)" title="(x: Char)Boolean">==</a> <span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          var <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.chars" title="Iterator[Char]">chars</a>.<a href="../../collection/Iterator.scala.html#scala.collection;Iterator.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
          val <a title="StringBuilder" id="scala.tools.ant;ScalaTool.readAndPatchResource.token">token</a> = new <a href="../../package.scala.html#scala.package;StringBuilder" title="StringBuilder">StringBuilder</a><span class="delimiter">(</span><span class="delimiter">)</span>
          while <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.chars" title="Iterator[Char]">chars</a>.<a href="../../collection/Iterator.scala.html#scala.collection;Iterator.hasNext" title="=&gt; Boolean">hasNext</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span title="Char">char</span> <a href="../../Char.scala.html#scala;Char.!=(2232296601)" title="(x: Char)Boolean">!=</a> <span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span> <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.while$3" title="()Unit" class="delimiter">{</a>
            <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char">char</span><span class="delimiter">)</span>
            <span title="Char">char</span> = <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.chars" title="Iterator[Char]">chars</a>.<a href="../../collection/Iterator.scala.html#scala.collection;Iterator.next" title="()Char">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.tokens" title="Map[String,String]">tokens</a>.<a href="../../collection/MapLike.scala.html#scala.collection;MapLike.contains" title="(key: String)Boolean">contains</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><a href="../../collection/MapLike.scala.html#scala.collection;MapLike.apply" title="(key: String)String">tokens</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a><span class="delimiter">)</span><span class="delimiter">)</span>
          else if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.readAndPatchResource.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a> <span title="(x$1: Any)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char('@')" class="char">'@'</span><span class="delimiter">)</span>
          else
            <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(85e140e908)" title="(s: String)StringBuilder">append</a><span class="delimiter">(</span><span title="String(&quot;@&quot;)" class="string">&quot;@&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.token" title="StringBuilder">token</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;@&quot;)" class="string">&quot;@&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> else <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.append(5aefef7300)" title="(x: Char)StringBuilder">append</a><span class="delimiter">(</span><span title="Char">char</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#scala.tools.ant;ScalaTool.readAndPatchResource.builder" title="StringBuilder">builder</a>.<a href="../../collection/mutable/StringBuilder.scala.html#scala.collection.mutable;StringBuilder.toString" title="()String">toString</a>
    <span class="delimiter">}</span>

    private def <a title="(file: java.io.File, content: String)Unit" id="scala.tools.ant;ScalaTool.writeFile">writeFile</a><span class="delimiter">(</span><a title="java.io.File" id="scala.tools.ant;ScalaTool.writeFile.file">file</a>: <span title="java.io.File">File</span>, <a title="String" id="scala.tools.ant;ScalaTool.writeFile.content">content</a>: <span title="String">String</span><span class="delimiter">)</span> =
      if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.writeFile.file" title="java.io.File">file</a>.<span title="()Boolean">exists</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.ant;ScalaTool.writeFile.file" title="java.io.File">file</a>.<span title="()Boolean">canWrite</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaTask.buildError" title="(message: String)Nothing">buildError</a><span class="delimiter">(</span><span title="String(&quot;File &quot;)" class="string">&quot;File &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.ant;ScalaTool.writeFile.file" title="java.io.File">file</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is not writable&quot;)" class="string">&quot; is not writable&quot;</span><span class="delimiter">)</span>
      else <span class="delimiter">{</span>
        val <a title="java.io.FileWriter" id="scala.tools.ant;ScalaTool.writeFile.writer">writer</a> = new <span title="java.io.FileWriter">FileWriter</span><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.writeFile.file" title="java.io.File">file</a>, false<span class="delimiter">)</span>
        <a href="#scala.tools.ant;ScalaTool.writeFile.writer" title="java.io.FileWriter">writer</a> <span title="(x$1: String)Unit">write</span> <a href="#scala.tools.ant;ScalaTool.writeFile.content" title="String">content</a>
        <a href="#scala.tools.ant;ScalaTool.writeFile.writer" title="java.io.FileWriter">writer</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

<span class="comment">/*============================================================================*\
**                           The big execute method                           **
\*============================================================================*/</span>

  <span class="comment">/** Performs the tool creation. */</span>
  override def <a title="()Unit" id="scala.tools.ant;ScalaTool.execute">execute</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="comment">// Tests if all mandatory attributes are set and valid.</span>
    if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.file_=" title="=&gt; Option[java.io.File]">file</a>.<a href="../../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaTask.buildError" title="(message: String)Nothing">buildError</a><span class="delimiter">(</span><span title="String(&quot;Attribute \'file\' is not set.&quot;)" class="string">&quot;Attribute 'file' is not set.&quot;</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.mainClass_=" title="=&gt; Option[String]">mainClass</a>.<a href="../../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="ScalaMatchingTask.scala.html#scala.tools.ant;ScalaTask.buildError" title="(message: String)Nothing">buildError</a><span class="delimiter">(</span><span title="String(&quot;Main class must be set.&quot;)" class="string">&quot;Main class must be set.&quot;</span><span class="delimiter">)</span>
    val <a title="String" id="scala.tools.ant;ScalaTool.execute.resourceRoot">resourceRoot</a> = <span title="String(&quot;scala/tools/ant/templates/&quot;)" class="string">&quot;scala/tools/ant/templates/&quot;</span>
    val <a title="scala.collection.immutable.Map[String,String]" id="scala.tools.ant;ScalaTool.execute.patches">patches</a> = <a href="../../collection/generic/GenMapFactory.scala.html#scala.collection.generic;GenMapFactory.apply" title="(elems: (String, String)*)scala.collection.immutable.Map[String,String]">Map</a> <span class="delimiter">(</span>
      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;class&quot;)" class="string">&quot;class&quot;</span>, <a href="#scala.tools.ant;ScalaTool.mainClass_=" title="=&gt; Option[String]">mainClass</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; String">get</a><span class="delimiter">)</span>,
      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;properties&quot;)" class="string">&quot;properties&quot;</span>, <a href="#scala.tools.ant;ScalaTool.getProperties" title="=&gt; String">getProperties</a><span class="delimiter">)</span>,
      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;javaflags&quot;)" class="string">&quot;javaflags&quot;</span>, <a href="#scala.tools.ant;ScalaTool.javaFlags_=" title="=&gt; String">javaFlags</a><span class="delimiter">)</span>,
      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;toolflags&quot;)" class="string">&quot;toolflags&quot;</span>, <a href="#scala.tools.ant;ScalaTool.toolFlags_=" title="=&gt; String">toolFlags</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="comment">// Consolidate Paths into classpath</span>
    <a href="#scala.tools.ant;ScalaTool.classpath_=" title="(x$1: List[String])Unit">classpath</a> = <a href="#scala.tools.ant;ScalaTool.classpath_=" title="=&gt; List[String]">classpath</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[String])List[String]">:::</a> <a href="#scala.tools.ant;ScalaTool.classpathPath_=" title="=&gt; org.apache.tools.ant.types.Path">classpathPath</a>.<a href="../../Predef.scala.html#scala.Predef.refArrayOps" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">list</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>
    <span class="comment">// Generate the scripts</span>
    if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.platforms_=" title="=&gt; List[String]">platforms</a> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: String)Boolean">contains</a> <span title="String(&quot;unix&quot;)" class="string">&quot;unix&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val unixPatches = <a href="#scala.tools.ant;ScalaTool.execute.patches" title="scala.collection.immutable.Map[String,String]">patches</a> <a href="../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="scala.collection.immutable.Map[String,String]" id="scala.tools.ant;ScalaTool.execute.unixPatches">+</a> <span class="delimiter">(</span><a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;classpath&quot;)" class="string">&quot;classpath&quot;</span>, <a href="#scala.tools.ant;ScalaTool.getUnixclasspath" title="=&gt; String">getUnixclasspath</a><span class="delimiter">)</span><span class="delimiter">)</span>
      val unixTemplateResource = <a href="#scala.tools.ant;ScalaTool.execute.resourceRoot" title="String">resourceRoot</a> <a title="String" id="scala.tools.ant;ScalaTool.execute.unixTemplateResource">+</a> <span title="String(&quot;tool-unix.tmpl&quot;)" class="string">&quot;tool-unix.tmpl&quot;</span>
      val <a title="String" id="scala.tools.ant;ScalaTool.execute.unixTemplate">unixTemplate</a> = <a href="#scala.tools.ant;ScalaTool.readAndPatchResource" title="(resource: String, tokens: Map[String,String])String">readAndPatchResource</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.execute.unixTemplateResource" title="String">unixTemplateResource</a>, <a href="#scala.tools.ant;ScalaTool.execute.unixPatches" title="scala.collection.immutable.Map[String,String]">unixPatches</a><span class="delimiter">)</span>
      <a href="#scala.tools.ant;ScalaTool.writeFile" title="(file: java.io.File, content: String)Unit">writeFile</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.file_=" title="=&gt; Option[java.io.File]">file</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; java.io.File">get</a>, <a href="#scala.tools.ant;ScalaTool.execute.unixTemplate" title="String">unixTemplate</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    if <span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.platforms_=" title="=&gt; List[String]">platforms</a> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.contains" title="(elem: String)Boolean">contains</a> <span title="String(&quot;windows&quot;)" class="string">&quot;windows&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val winPatches = <a href="#scala.tools.ant;ScalaTool.execute.patches" title="scala.collection.immutable.Map[String,String]">patches</a> <a href="../../collection/immutable/Map.scala.html#scala.collection.immutable;Map.+(f81ff2b7d7)" title="scala.collection.immutable.Map[String,String]" id="scala.tools.ant;ScalaTool.execute.winPatches">+</a> <span class="delimiter">(</span><a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><span title="String(&quot;classpath&quot;)" class="string">&quot;classpath&quot;</span>, <a href="#scala.tools.ant;ScalaTool.getWinclasspath" title="=&gt; String">getWinclasspath</a><span class="delimiter">)</span><span class="delimiter">)</span>
      val winTemplateResource = <a href="#scala.tools.ant;ScalaTool.execute.resourceRoot" title="String">resourceRoot</a> <a title="String" id="scala.tools.ant;ScalaTool.execute.winTemplateResource">+</a> <span title="String(&quot;tool-windows.tmpl&quot;)" class="string">&quot;tool-windows.tmpl&quot;</span>
      val <a title="String" id="scala.tools.ant;ScalaTool.execute.winTemplate">winTemplate</a> = <a href="#scala.tools.ant;ScalaTool.readAndPatchResource" title="(resource: String, tokens: Map[String,String])String">readAndPatchResource</a><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.execute.winTemplateResource" title="String">winTemplateResource</a>, <a href="#scala.tools.ant;ScalaTool.execute.winPatches" title="scala.collection.immutable.Map[String,String]">winPatches</a><span class="delimiter">)</span>
      <a href="#scala.tools.ant;ScalaTool.writeFile" title="(file: java.io.File, content: String)Unit">writeFile</a><span class="delimiter">(</span>new <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#scala.tools.ant;ScalaTool.file_=" title="=&gt; Option[java.io.File]">file</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; java.io.File">get</a>.<span title="()String">getAbsolutePath</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.bat&quot;)" class="string">&quot;.bat&quot;</span><span class="delimiter">)</span>, <a href="#scala.tools.ant;ScalaTool.execute.winTemplate" title="String">winTemplate</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
