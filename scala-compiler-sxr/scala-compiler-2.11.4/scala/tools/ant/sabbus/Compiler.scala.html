<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/ant/sabbus/Compiler.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala Ant Tasks                      **
**    / __/ __// _ | / /  / _ |    (c) 2005-2013, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>


package scala.tools.ant.sabbus

import java.io.File
import java.net.URL
import java.lang.reflect.InvocationTargetException
import scala.tools.nsc.util.ScalaClassLoader

class <a title="class Compiler extends AnyRef" id="scala.tools.ant.sabbus;Compiler">Compiler</a><a href="#scala.tools.ant.sabbus;Compiler" title="scala.tools.ant.sabbus.Compiler" class="delimiter">(</a><a title="Array[java.net.URL]" id="scala.tools.ant.sabbus;Compiler.classpath">classpath</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[java.net.URL]">Array</a><span class="delimiter">[</span>URL<span class="delimiter">]</span>, val <a title="scala.tools.ant.sabbus.Settings" id="scala.tools.ant.sabbus;Compiler.settings">settings</a>: <a href="Settings.scala.html#scala.tools.ant.sabbus;Settings" title="scala.tools.ant.sabbus.Settings">Settings</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
  val <a title="String" id="scala.tools.ant.sabbus;Compiler.foreignCompilerName">foreignCompilerName</a>: <span title="String">String</span> = <span title="String(&quot;scala.tools.ant.sabbus.ForeignCompiler&quot;)" class="string">&quot;scala.tools.ant.sabbus.ForeignCompiler&quot;</span>
  private lazy val classLoader = <a href="../../nsc/util/package.scala.html#scala.tools.nsc.util.package.ScalaClassLoader" title="=&gt; reflect.internal.util.ScalaClassLoader.type">ScalaClassLoader</a> <a title="tools.nsc.util.ScalaClassLoader.URLClassLoader" id="scala.tools.ant.sabbus;Compiler.classLoader">fromURLs</a> <a href="../../../Predef.scala.html#scala;LowPriorityImplicits.wrapRefArray" title="(xs: Array[java.net.URL])scala.collection.mutable.WrappedArray[java.net.URL]">classpath</a>
  private lazy val foreignCompiler: <span title="AnyRef">AnyRef</span> = <a href="#scala.tools.ant.sabbus;Compiler.classLoader" title="=&gt; tools.nsc.util.ScalaClassLoader.URLClassLoader">classLoader</a> <a title="AnyRef" id="scala.tools.ant.sabbus;Compiler.foreignCompiler">create</a> <a href="#scala.tools.ant.sabbus;Compiler.foreignCompilerName" title="=&gt; String">foreignCompilerName</a>

  private def <a title="=&gt; Array[String]" id="scala.tools.ant.sabbus;Compiler.settingsArray">settingsArray</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#scala.tools.ant.sabbus;Compiler.settings" title="=&gt; scala.tools.ant.sabbus.Settings">settings</a>.<a href="Settings.scala.html#scala.tools.ant.sabbus;Settings.toArgs" title="=&gt; List[String]">toArgs</a>.<a href="../../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toArray" title="(implicit evidence$1: scala.reflect.ClassTag[String])Array[String]">toArray</a>
  <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke" title="(method: String, types: Array[Class[_]], args: Array[AnyRef])Object">foreignInvoke</a><span class="delimiter">(</span><span title="String(&quot;args_$eq&quot;)" class="string">&quot;args_$eq&quot;</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: Class[_]*)(implicit evidence$2: scala.reflect.ClassTag[Class[_]])Array[Class[_]]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(runtimeClass1: Class[_])scala.reflect.ClassTag[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Array[String]](classOf[[Ljava.lang.String;])" class="delimiter">[</span>Array<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: AnyRef*)(implicit evidence$2: scala.reflect.ClassTag[AnyRef])Array[AnyRef]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.AnyRef" title="=&gt; scala.reflect.ClassTag[AnyRef]" class="delimiter">(</a><a href="#scala.tools.ant.sabbus;Compiler.settingsArray" title="=&gt; Array[String]">settingsArray</a><span class="delimiter">)</span><span class="delimiter">)</span>

  private def <a title="(method: String, types: Array[Class[_]], args: Array[AnyRef])Object" id="scala.tools.ant.sabbus;Compiler.foreignInvoke">foreignInvoke</a><span class="delimiter">(</span><a title="String" id="scala.tools.ant.sabbus;Compiler.foreignInvoke.method">method</a>: <span title="String">String</span>, <a title="Array[Class[_]]" id="scala.tools.ant.sabbus;Compiler.foreignInvoke.types">types</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[Class[_]]">Array</a><span class="delimiter">[</span>Class<span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Array[AnyRef]" id="scala.tools.ant.sabbus;Compiler.foreignInvoke.args">args</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[AnyRef]">Array</a><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span><span class="delimiter">)</span> =
    try <a href="#scala.tools.ant.sabbus;Compiler.foreignCompiler" title="=&gt; AnyRef">foreignCompiler</a>.<span title="()Class[_]">getClass</span>.<span title="(x$1: String, x$2: Class[_]*)java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke.method" title="String">method</a>, <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke.types" title="Array[Class[_]]">types</a>: _*<span class="delimiter">)</span>.<span title="(x$1: Any, x$2: Object*)Object">invoke</span><span class="delimiter">(</span><a href="#scala.tools.ant.sabbus;Compiler.foreignCompiler" title="=&gt; AnyRef">foreignCompiler</a>, <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke.args" title="Array[AnyRef]">args</a>: _*<span class="delimiter">)</span>
    catch <span class="delimiter">{</span>
      case <a title="java.lang.reflect.InvocationTargetException" id="scala.tools.ant.sabbus;Compiler.foreignInvoke.e">e</a>: <span title="java.lang.reflect.InvocationTargetException">InvocationTargetException</span> =&gt; throw <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke.e" title="java.lang.reflect.InvocationTargetException">e</a>.<span title="()Throwable">getCause</span>
    <span class="delimiter">}</span>

  def <a title="(files: Array[java.io.File])(Int, Int)" id="scala.tools.ant.sabbus;Compiler.compile">compile</a><span class="delimiter">(</span><a title="Array[java.io.File]" id="scala.tools.ant.sabbus;Compiler.compile.files">files</a>: <a href="../../../Array.scala.html#scala;Array" title="Array[java.io.File]">Array</a><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(Int, Int)" class="delimiter">(</a>Int, Int<span class="delimiter">)</span> = <span class="comment">//(errors, warnings)</span>
    try <span class="delimiter">{</span>
      <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke" title="(method: String, types: Array[Class[_]], args: Array[AnyRef])Object">foreignInvoke</a><span class="delimiter">(</span><span title="String(&quot;args_$eq&quot;)" class="string">&quot;args_$eq&quot;</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: Class[_]*)(implicit evidence$2: scala.reflect.ClassTag[Class[_]])Array[Class[_]]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(runtimeClass1: Class[_])scala.reflect.ClassTag[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Array[String]](classOf[[Ljava.lang.String;])" class="delimiter">[</span>Array<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: AnyRef*)(implicit evidence$2: scala.reflect.ClassTag[AnyRef])Array[AnyRef]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.AnyRef" title="=&gt; scala.reflect.ClassTag[AnyRef]" class="delimiter">(</a><a href="#scala.tools.ant.sabbus;Compiler.settingsArray" title="=&gt; Array[String]">settingsArray</a><span class="delimiter">)</span><span class="delimiter">)</span>
      val <a title="Int" id="scala.tools.ant.sabbus;Compiler.compile.result">result</a> =
        <a href="#scala.tools.ant.sabbus;Compiler.foreignInvoke" title="(method: String, types: Array[Class[_]], args: Array[AnyRef])Object">foreignInvoke</a><span class="delimiter">(</span><span title="String(&quot;compile&quot;)" class="string">&quot;compile&quot;</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: Class[_]*)(implicit evidence$2: scala.reflect.ClassTag[Class[_]])Array[Class[_]]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.apply" title="(runtimeClass1: Class[_])scala.reflect.ClassTag[Class[_]]" class="delimiter">(</a>classOf<span title="Class[Array[java.io.File]](classOf[[Ljava.io.File;])" class="delimiter">[</span>Array<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>, <a href="../../../Array.scala.html#scala.Array.apply(f425c59989)" title="(xs: AnyRef*)(implicit evidence$2: scala.reflect.ClassTag[AnyRef])Array[AnyRef]">Array</a><a href="../../../reflect/ClassTag.scala.html#scala.reflect.ClassTag.AnyRef" title="=&gt; scala.reflect.ClassTag[AnyRef]" class="delimiter">(</a><a href="#scala.tools.ant.sabbus;Compiler.compile.files" title="Array[java.io.File]">files</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><a href="../../../Int.scala.html#scala;Int" title="Int">Int</a><span class="delimiter">]</span>
      <a href="../../../Tuple2.scala.html#scala;Tuple2" title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</a><a href="#scala.tools.ant.sabbus;Compiler.compile.result" title="Int">result</a> <a href="../../../Int.scala.html#scala;Int.>>(1409840560)" title="(x: Int)Int">&gt;&gt;</a> <span title="Int(16)" class="int">16</span>, <a href="#scala.tools.ant.sabbus;Compiler.compile.result" title="Int">result</a> <a href="../../../Int.scala.html#scala;Int.&(1409840560)" title="(x: Int)Int">&amp;</a> <span title="Int(255)" class="int">0x00FF</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    catch <span class="delimiter">{</span>
      case <a title="Exception" id="scala.tools.ant.sabbus;Compiler.compile.ex">ex</a>: <span title="Exception">Exception</span> =&gt; throw <a href="CompilationFailure.scala.html#scala.tools.ant.sabbus;CompilationFailure" title="(message: String, cause: Exception)scala.tools.ant.sabbus.CompilationFailure">CompilationFailure</a><span class="delimiter">(</span><a href="#scala.tools.ant.sabbus;Compiler.compile.ex" title="Exception">ex</a>.<span title="()String">getMessage</span>, <a href="#scala.tools.ant.sabbus;Compiler.compile.ex" title="Exception">ex</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
