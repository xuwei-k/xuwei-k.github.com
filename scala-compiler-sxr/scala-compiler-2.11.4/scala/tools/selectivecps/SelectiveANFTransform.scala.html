<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/selectivecps/SelectiveANFTransform.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">// $Id$</span>

package scala.tools.selectivecps

import scala.tools.nsc.transform._
import scala.tools.nsc.symtab._
import scala.tools.nsc.plugins._

<span class="comment">/**
 * In methods marked @cps, explicitly name results of calls to other @cps methods
 */</span>
abstract class <a title="class SelectiveANFTransform extends scala.tools.nsc.plugins.PluginComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.selectivecps.CPSUtils" id="scala.tools.selectivecps;SelectiveANFTransform">SelectiveANFTransform</a> extends <a href="../nsc/plugins/PluginComponent.scala.html#scala.tools.nsc.plugins;PluginComponent" title="scala.tools.nsc.plugins.PluginComponent">PluginComponent</a> with <a href="../nsc/transform/Transform.scala.html#scala.tools.nsc.transform;Transform" title="scala.tools.nsc.transform.Transform">Transform</a> with
  <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> with <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils" title="scala.tools.selectivecps.CPSUtils">CPSUtils</a> <span class="delimiter">{</span>
  <span class="comment">// inherits abstract value `global` and class `Phase` from Transform</span>

  import <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.global" title="=&gt; scala.tools.nsc.Global">global</a>._                  <span class="comment">// the global environment</span>
  import <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="SelectiveANFTransform.this.global.definitions.type">definitions</a>._             <span class="comment">// standard classes and methods</span>
  import <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.typer" title="SelectiveANFTransform.this.global.typer.type">typer</a>.atOwner             <span class="comment">// methods to type trees</span>

  override def <a title="=&gt; String" id="scala.tools.selectivecps;SelectiveANFTransform.description">description</a> = <span title="String(&quot;ANF pre-transform for @cps&quot;)" class="string">&quot;ANF pre-transform for @cps&quot;</span>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  val <a title="String" id="scala.tools.selectivecps;SelectiveANFTransform.phaseName">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;selectiveanf&quot;)" class="string">&quot;selectiveanf&quot;</span>

  protected def <a title="(unit: SelectiveANFTransform.this.global.CompilationUnit)SelectiveANFTransform.this.global.Transformer" id="scala.tools.selectivecps;SelectiveANFTransform.newTransformer">newTransformer</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.CompilationUnit" id="scala.tools.selectivecps;SelectiveANFTransform.newTransformer.unit">unit</a>: <a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="SelectiveANFTransform.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="SelectiveANFTransform.this.global.Transformer">Transformer</a> =
    new <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer" title="SelectiveANFTransform.this.ANFTransformer">ANFTransformer</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform.newTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  class <a title="class ANFTransformer extends SelectiveANFTransform.this.TypingTransformer" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer">ANFTransformer</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer" title="SelectiveANFTransform.this.ANFTransformer" class="delimiter">(</a><a title="SelectiveANFTransform.this.global.CompilationUnit" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit">unit</a>: <a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="SelectiveANFTransform.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer" title="SelectiveANFTransform.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    implicit val <a title="SelectiveANFTransform.this.global.CompilationUnit" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer._unit">_unit</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a> <span class="comment">// allow code in CPSUtils.scala to report errors</span>
    var <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.cpsAllowed_=">cpsAllowed</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = false <span class="comment">// detect cps code in places we do not handle (yet)</span>

    object <a title="ANFTransformer.this.RemoveTailReturnsTransformer.type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer">RemoveTailReturnsTransformer</a> extends <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="SelectiveANFTransform.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
      override def <a title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform">transform</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case Block<span class="delimiter">(</span><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <span title="SelectiveANFTransform.this.global.Return">r</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span>

        case Block<span class="delimiter">(</span><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">cond</span>, <span title="SelectiveANFTransform.this.global.Return">r1</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Return">r2</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: SelectiveANFTransform.this.global.Tree, cond: SelectiveANFTransform.this.global.Tree, thenp: SelectiveANFTransform.this.global.Tree, elsep: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">cond</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">cond</span>, <span title="SelectiveANFTransform.this.global.Return">r1</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: SelectiveANFTransform.this.global.Tree, cond: SelectiveANFTransform.this.global.Tree, thenp: SelectiveANFTransform.this.global.Tree, elsep: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">cond</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">cond</span>, <span title="SelectiveANFTransform.this.global.Tree">thenExpr</span>, <span title="SelectiveANFTransform.this.global.Return">r2</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: SelectiveANFTransform.this.global.Tree, cond: SelectiveANFTransform.this.global.Tree, thenp: SelectiveANFTransform.this.global.Tree, elsep: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">cond</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">cond</span>, <span title="SelectiveANFTransform.this.global.Tree">thenExpr</span>, <span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: SelectiveANFTransform.this.global.Tree, cond: SelectiveANFTransform.this.global.Tree, thenp: SelectiveANFTransform.this.global.Tree, elsep: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">cond</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">thenExpr</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">elseExpr</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case Try<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.block">block</a>, <a title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.catches">catches</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.finalizer">finalizer</a><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: SelectiveANFTransform.this.global.Tree, block: SelectiveANFTransform.this.global.Tree, catches: List[SelectiveANFTransform.this.global.CaseDef], finalizer: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>,
                       <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.block" title="SelectiveANFTransform.this.global.Tree">block</a><span class="delimiter">)</span>,
                       <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.catches" title="List[SelectiveANFTransform.this.global.CaseDef]">catches</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveANFTransform.this.global.CaseDef =&gt; SelectiveANFTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.CaseDef],SelectiveANFTransform.this.global.Tree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">map</a> <span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.CaseDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.$anonfun.t">t</a> =&gt; <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.$anonfun.t" title="SelectiveANFTransform.this.global.CaseDef">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[SelectiveANFTransform.this.global.CaseDef]" class="delimiter">[</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">]</span>,
                       <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.finalizer" title="SelectiveANFTransform.this.global.Tree">finalizer</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case CaseDef<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">pat</span>, <span title="SelectiveANFTransform.this.global.Tree">guard</span>, <span title="SelectiveANFTransform.this.global.Return">r</span> @ Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.CaseDef" title="(tree: SelectiveANFTransform.this.global.Tree, pat: SelectiveANFTransform.this.global.Tree, guard: SelectiveANFTransform.this.global.Tree, body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">pat</span>, <span title="SelectiveANFTransform.this.global.Tree">guard</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span>

        case CaseDef<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">pat</span>, <span title="SelectiveANFTransform.this.global.Tree">guard</span>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.body">body</a><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.CaseDef" title="(tree: SelectiveANFTransform.this.global.Tree, pat: SelectiveANFTransform.this.global.Tree, guard: SelectiveANFTransform.this.global.Tree, body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">pat</span>, <span title="SelectiveANFTransform.this.global.Tree">guard</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case Return<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;return expressions in CPS code must be in tail position&quot;)" class="string">&quot;return expressions in CPS code must be in tail position&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>

        case _ =&gt;
          super.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    def <a title="(body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns">removeTailReturns</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns.body">body</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="comment">// support body with single return expression</span>
      <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns.body" title="SelectiveANFTransform.this.global.Tree">body</a> match <span class="delimiter">{</span>
        case Return<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns.expr">expr</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>
        case _ =&gt; <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer" title="ANFTransformer.this.RemoveTailReturnsTransformer.type">RemoveTailReturnsTransformer</a>.<a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.RemoveTailReturnsTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns.body" title="SelectiveANFTransform.this.global.Tree">body</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    override def <a title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform">transform</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsEnabled" title="=&gt; Boolean">cpsEnabled</a><span class="delimiter">)</span> return <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>

      <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a> match <span class="delimiter">{</span>

        <span class="comment">// Maybe we should further generalize the transform and move it over</span>
        <span class="comment">// to the regular Transformer facility. But then, actual and required cps</span>
        <span class="comment">// state would need more complicated (stateful!) tracking.</span>

        <span class="comment">// Making the default case use transExpr(tree, None, None) instead of</span>
        <span class="comment">// calling super.transform() would be a start, but at the moment,</span>
        <span class="comment">// this would cause infinite recursion. But we could remove the</span>
        <span class="comment">// ValDef case here.</span>

        case <a title="SelectiveANFTransform.this.global.DefDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.dd">dd</a> @ DefDef<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Modifiers">mods</span>, <span title="SelectiveANFTransform.this.global.TermName">name</span>, <a title="List[SelectiveANFTransform.this.global.TypeDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tparams">tparams</a>, <a title="List[List[SelectiveANFTransform.this.global.ValDef]]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vparamss">vparamss</a>, <span title="SelectiveANFTransform.this.global.Tree">tpt</span>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs0">rhs0</a><span class="delimiter">)</span> =&gt;
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;transforming &quot;)" class="string">&quot;transforming &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.dd" title="SelectiveANFTransform.this.global.DefDef">dd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>

          <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.atOwner(c4f4c4069a)" title="(owner: SelectiveANFTransform.this.global.Symbol)(trans: =&gt; SelectiveANFTransform.this.global.DefDef)SelectiveANFTransform.this.global.DefDef">atOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.dd" title="SelectiveANFTransform.this.global.DefDef">dd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <span title="SelectiveANFTransform.this.global.Tree">rhs</span> =
              if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsParamTypes" title="(tpe: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">cpsParamTypes</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.removeTailReturns" title="(body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">removeTailReturns</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs0" title="SelectiveANFTransform.this.global.Tree">rhs0</a><span class="delimiter">)</span>
              else <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs0" title="SelectiveANFTransform.this.global.Tree">rhs0</a>
            val <span title="SelectiveANFTransform.this.global.Tree">rhs1</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">rhs</span>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getExternalAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getExternalAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span>

            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;result &quot;)" class="string">&quot;result &quot;</span><span title="(x$1: Any)String">+</span><span title="SelectiveANFTransform.this.global.Tree">rhs1</span><span class="delimiter">)</span>
            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;result is of type &quot;)" class="string">&quot;result is of type &quot;</span><span title="(x$1: Any)String">+</span><span title="SelectiveANFTransform.this.global.Tree">rhs1</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.DefDef" title="(tree: SelectiveANFTransform.this.global.Tree, mods: SelectiveANFTransform.this.global.Modifiers, name: SelectiveANFTransform.this.global.Name, tparams: List[SelectiveANFTransform.this.global.TypeDef], vparamss: List[List[SelectiveANFTransform.this.global.ValDef]], tpt: SelectiveANFTransform.this.global.Tree, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.dd" title="SelectiveANFTransform.this.global.DefDef">dd</a>, <span title="SelectiveANFTransform.this.global.Modifiers">mods</span>, <span title="SelectiveANFTransform.this.global.TermName">name</span>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformTypeDefs" title="(trees: List[SelectiveANFTransform.this.global.TypeDef])List[SelectiveANFTransform.this.global.TypeDef]">transformTypeDefs</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tparams" title="List[SelectiveANFTransform.this.global.TypeDef]">tparams</a><span class="delimiter">)</span>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformValDefss" title="(treess: List[List[SelectiveANFTransform.this.global.ValDef]])List[List[SelectiveANFTransform.this.global.ValDef]]">transformValDefss</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vparamss" title="List[List[SelectiveANFTransform.this.global.ValDef]]">vparamss</a><span class="delimiter">)</span>,
                        <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">rhs1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        case <a title="SelectiveANFTransform.this.global.Function" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ff">ff</a> @ Function<span class="delimiter">(</span><a title="List[SelectiveANFTransform.this.global.ValDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vparams">vparams</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body">body</a><span class="delimiter">)</span> =&gt;
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;transforming anon function &quot;)" class="string">&quot;transforming anon function &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ff" title="SelectiveANFTransform.this.global.Function">ff</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>

          <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.atOwner(c4f4c4069a)" title="(owner: SelectiveANFTransform.this.global.Symbol)(trans: =&gt; SelectiveANFTransform.this.global.Function)SelectiveANFTransform.this.global.Function">atOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ff" title="SelectiveANFTransform.this.global.Function">ff</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>

            <span class="comment">//val body1 = transExpr(body, None, getExternalAnswerTypeAnn(body.tpe))</span>

            <span class="comment">// need to special case partial functions: if expected type is @cps</span>
            <span class="comment">// but all cases are pure, then we would transform</span>
            <span class="comment">// { x =&gt; x match { case A =&gt; ... }} to</span>
            <span class="comment">// { x =&gt; shiftUnit(x match { case A =&gt; ... })}</span>
            <span class="comment">// which Uncurry cannot handle (see function6.scala)</span>
            <span class="comment">// thus, we push down the shiftUnit to each of the case bodies</span>

            val <a title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext">ext</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getExternalAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
            val <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.pureBody">pureBody</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a>
            implicit val <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.isParentImpure">isParentImpure</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a>

            def <a title="(tree: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Tree, cases: List[SelectiveANFTransform.this.global.CaseDef])SelectiveANFTransform.this.global.Match" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch">transformPureMatch</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.selector">selector</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.cases">cases</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.CaseDef]">List</a><span class="delimiter">[</span>CaseDef<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
              val caseVals = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.cases" title="List[SelectiveANFTransform.this.global.CaseDef]">cases</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals">map</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.x0$1" title="SelectiveANFTransform.this.global.CaseDef" class="delimiter">{</a> case <a title="SelectiveANFTransform.this.global.CaseDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.cd">cd</a> @ CaseDef<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.pat">pat</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.guard">guard</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.body">body</a><span class="delimiter">)</span> =&gt;
                <span class="comment">// if (!hasPlusMarker(body.tpe)) body modifyType (_ withAnnotation newPlusMarker()) // TODO: to avoid warning</span>
                val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.bodyVal">bodyVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.isParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a><span class="delimiter">)</span> <span class="comment">// ??? triggers &quot;cps-transformed unexpectedly&quot; warning in transTailValue</span>
                <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.CaseDef" title="(tree: SelectiveANFTransform.this.global.Tree, pat: SelectiveANFTransform.this.global.Tree, guard: SelectiveANFTransform.this.global.Tree, body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.cd" title="SelectiveANFTransform.this.global.CaseDef">cd</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.pat" title="SelectiveANFTransform.this.global.Tree">pat</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.guard" title="SelectiveANFTransform.this.global.Tree">guard</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals.$anonfun.bodyVal" title="SelectiveANFTransform.this.global.Tree">bodyVal</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
              <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Match" title="(tree: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Tree, cases: List[SelectiveANFTransform.this.global.CaseDef])SelectiveANFTransform.this.global.Match">Match</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.selector" title="SelectiveANFTransform.this.global.Tree">selector</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch.caseVals" title="List[SelectiveANFTransform.this.global.CaseDef]">caseVals</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            def <a title="(body: SelectiveANFTransform.this.global.Block, selDef: SelectiveANFTransform.this.global.ValDef, cases: List[SelectiveANFTransform.this.global.Tree], matchEnd: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch">transformPureVirtMatch</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Block" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.body">body</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="SelectiveANFTransform.this.global.Block">Block</a>, <a title="SelectiveANFTransform.this.global.ValDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.selDef">selDef</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="SelectiveANFTransform.this.global.ValDef">ValDef</a>, <a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.cases">cases</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.matchEnd">matchEnd</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
              val stats = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.selDef" title="SelectiveANFTransform.this.global.ValDef">selDef</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.stats">::</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.cases" title="List[SelectiveANFTransform.this.global.Tree]">cases</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveANFTransform.this.global.Tree =&gt; SelectiveANFTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.Tree],SelectiveANFTransform.this.global.Tree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">map</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.isParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.stats.$anonfun.x$1" title="SelectiveANFTransform.this.global.Tree">_</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.body" title="SelectiveANFTransform.this.global.Block">body</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.stats" title="List[SelectiveANFTransform.this.global.Tree]">stats</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.isParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch.matchEnd" title="SelectiveANFTransform.this.global.Tree">matchEnd</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1">body1</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a> match <span class="delimiter">{</span>
              case Match<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">selector</span>, <span title="List[SelectiveANFTransform.this.global.CaseDef]">cases</span><span class="delimiter">)</span> if <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.pureBody" title="Boolean">pureBody</a> =&gt;
                <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch" title="(tree: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Tree, cases: List[SelectiveANFTransform.this.global.CaseDef])SelectiveANFTransform.this.global.Match">transformPureMatch</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <span title="SelectiveANFTransform.this.global.Tree">selector</span>, <span title="List[SelectiveANFTransform.this.global.CaseDef]">cases</span><span class="delimiter">)</span>

              <span class="comment">// virtpatmat switch</span>
              case Block<span class="delimiter">(</span><a href="../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[SelectiveANFTransform.this.global.Tree])Some[List[SelectiveANFTransform.this.global.Tree]]">List</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.ValDef">selDef</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Match">mat</span>@Match<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">selector</span>, <span title="List[SelectiveANFTransform.this.global.CaseDef]">cases</span><span class="delimiter">)</span><span class="delimiter">)</span> if <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.pureBody" title="Boolean">pureBody</a> =&gt;
                <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.Tree*)List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.ValDef">selDef</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureMatch" title="(tree: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Tree, cases: List[SelectiveANFTransform.this.global.CaseDef])SelectiveANFTransform.this.global.Match">transformPureMatch</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Match">mat</span>, <span title="SelectiveANFTransform.this.global.Tree">selector</span>, <span title="List[SelectiveANFTransform.this.global.CaseDef]">cases</span><span class="delimiter">)</span><span class="delimiter">)</span>

              <span class="comment">// virtpatmat</span>
              case <a title="SelectiveANFTransform.this.global.Block" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1.b">b</a>@Block<span class="delimiter">(</span><span title="scala.collection.immutable.::[SelectiveANFTransform.this.global.Tree]">matchStats</span>@<span class="delimiter">(</span><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.ValDef">selDef</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">)</span> :: <span title="List[SelectiveANFTransform.this.global.Tree]">cases</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">matchEnd</span><span class="delimiter">)</span> if <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.pureBody" title="Boolean">pureBody</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><span title="scala.collection.immutable.::[SelectiveANFTransform.this.global.Tree]">matchStats</span> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.forall" title="(p: SelectiveANFTransform.this.global.Tree =&gt; Boolean)Boolean">forall</a> <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="SelectiveANFTransform.this.global.treeInfo.type">treeInfo</a>.<a href="../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: SelectiveANFTransform.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">)</span> =&gt;
                <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch" title="(body: SelectiveANFTransform.this.global.Block, selDef: SelectiveANFTransform.this.global.ValDef, cases: List[SelectiveANFTransform.this.global.Tree], matchEnd: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">transformPureVirtMatch</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1.b" title="SelectiveANFTransform.this.global.Block">b</a>, <span title="SelectiveANFTransform.this.global.ValDef">selDef</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">cases</span>, <span title="SelectiveANFTransform.this.global.Tree">matchEnd</span><span class="delimiter">)</span>

              <span class="comment">// virtpatmat that stores the scrut separately -- TODO: can we eliminate this case??</span>
              case Block<span class="delimiter">(</span><a href="../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[SelectiveANFTransform.this.global.Tree])Some[List[SelectiveANFTransform.this.global.Tree]]">List</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.ValDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1.selDef0">selDef0</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Block">mat</span>@Block<span class="delimiter">(</span><span title="scala.collection.immutable.::[SelectiveANFTransform.this.global.Tree]">matchStats</span>@<span class="delimiter">(</span><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.ValDef">selDef</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ValDef" title="SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">)</span> :: <span title="List[SelectiveANFTransform.this.global.Tree]">cases</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">matchEnd</span><span class="delimiter">)</span><span class="delimiter">)</span> if <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.pureBody" title="Boolean">pureBody</a>  <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><span title="scala.collection.immutable.::[SelectiveANFTransform.this.global.Tree]">matchStats</span> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.forall" title="(p: SelectiveANFTransform.this.global.Tree =&gt; Boolean)Boolean">forall</a> <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="SelectiveANFTransform.this.global.treeInfo.type">treeInfo</a>.<a href="../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: SelectiveANFTransform.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">)</span>=&gt;
                <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.Tree*)List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1.selDef0" title="SelectiveANFTransform.this.global.ValDef">selDef0</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.transformPureVirtMatch" title="(body: SelectiveANFTransform.this.global.Block, selDef: SelectiveANFTransform.this.global.ValDef, cases: List[SelectiveANFTransform.this.global.Tree], matchEnd: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">transformPureVirtMatch</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Block">mat</span>, <span title="SelectiveANFTransform.this.global.ValDef">selDef</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">cases</span>, <span title="SelectiveANFTransform.this.global.Tree">matchEnd</span><span class="delimiter">)</span><span class="delimiter">)</span>

              case _ =&gt;
                <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.isParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ext" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">ext</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;anf result &quot;)" class="string">&quot;anf result &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1" title="SelectiveANFTransform.this.global.Tree">body1</a><span title="(x$1: Any)String">+</span><span title="String(&quot;\nresult is of type &quot;)" class="string">&quot;\nresult is of type &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1" title="SelectiveANFTransform.this.global.Tree">body1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Function" title="(tree: SelectiveANFTransform.this.global.Tree, vparams: List[SelectiveANFTransform.this.global.ValDef], body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Function">Function</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.ff" title="SelectiveANFTransform.this.global.Function">ff</a>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformValDefs" title="(trees: List[SelectiveANFTransform.this.global.ValDef])List[SelectiveANFTransform.this.global.ValDef]">transformValDefs</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vparams" title="List[SelectiveANFTransform.this.global.ValDef]">vparams</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.body1" title="SelectiveANFTransform.this.global.Tree">body1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        case <a title="SelectiveANFTransform.this.global.ValDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vd">vd</a> @ ValDef<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Modifiers">mods</span>, <span title="SelectiveANFTransform.this.global.TermName">name</span>, <span title="SelectiveANFTransform.this.global.Tree">tpt</span>, <span title="SelectiveANFTransform.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt; <span class="comment">// object-level valdefs</span>
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;transforming valdef &quot;)" class="string">&quot;transforming valdef &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vd" title="SelectiveANFTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>

          if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getExternalAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.isEmpty" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>

            <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.atOwner(c4f4c4069a)" title="(owner: SelectiveANFTransform.this.global.Symbol)(trans: =&gt; SelectiveANFTransform.this.global.ValDef)SelectiveANFTransform.this.global.ValDef">atOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vd" title="SelectiveANFTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>

              val <span title="SelectiveANFTransform.this.global.Tree">rhs1</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer" title="ANFTransformer.this.type">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4" title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs1.x$43" class="delimiter">(</a><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs1.x$40">rhs</a>, <a href="../../Option.scala.html#scala.None" title="None.type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs1.x$41">None</a>, <a href="../../Option.scala.html#scala.None" title="None.type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.rhs1.x$42">None</a><span class="delimiter">)</span>

              <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.ValDef" title="(tree: SelectiveANFTransform.this.global.Tree, mods: SelectiveANFTransform.this.global.Modifiers, name: SelectiveANFTransform.this.global.Name, tpt: SelectiveANFTransform.this.global.Tree, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.vd" title="SelectiveANFTransform.this.global.ValDef">vd</a>, <span title="SelectiveANFTransform.this.global.Modifiers">mods</span>, <span title="SelectiveANFTransform.this.global.TermName">name</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">tpt</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">rhs1</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;cps annotations not allowed on by-value parameters or value definitions&quot;)" class="string">&quot;cps annotations not allowed on by-value parameters or value definitions&quot;</span><span class="delimiter">)</span>
            super.<a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        case TypeTree<span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// circumvent cpsAllowed here</span>
          super.<a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>

        case Apply<span class="delimiter">(</span>_,_<span class="delimiter">)</span> =&gt;
          <span class="comment">// this allows reset { ... } in object constructors</span>
          <span class="comment">// it's kind of a hack to put it here (see note above)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer" title="ANFTransformer.this.type">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4" title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.x$47" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.x$44">tree</a>, <a href="../../Option.scala.html#scala.None" title="None.type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.x$45">None</a>, <a href="../../Option.scala.html#scala.None" title="None.type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.x$46">None</a><span class="delimiter">)</span>

        case _ =&gt;
          if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Boolean">hasAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.cpsAllowed_=" title="=&gt; Boolean">cpsAllowed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/HasFlags.scala.html#scala.reflect.internal;HasFlags.isLazy" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span>
                <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;implementation restriction: cps annotations not allowed on lazy value definitions&quot;)" class="string">&quot;implementation restriction: cps annotations not allowed on lazy value definitions&quot;</span><span class="delimiter">)</span>
              else
                <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;cps code not allowed here / &quot;)" class="string">&quot;cps code not allowed here / &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<span title="()Class[_]">getClass</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; / &quot;)" class="string">&quot; / &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.cpsAllowed_=" title="(x$1: Boolean)Unit">cpsAllowed</a> = false
          super.<a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>


    def <a title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr">transExpr</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.cpsR">cpsR</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a> = false<span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)">transTailValue</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <span title="SelectiveANFTransform.this.global.Tree">b</span><span class="delimiter">)</span> =&gt; <span title="SelectiveANFTransform.this.global.Tree">b</span>
        case <span class="delimiter">(</span><a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr.a">a</a>, <span title="SelectiveANFTransform.this.global.Tree">b</span><span class="delimiter">)</span> =&gt;
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr$default$4.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr.a" title="List[SelectiveANFTransform.this.global.Tree]">a</a>,<span title="SelectiveANFTransform.this.global.Tree">b</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>


    def <a title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree], cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList">transArgList</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.fun">fun</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.args">args</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a>List<span class="delimiter">[</span>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, CPSInfo<span class="delimiter">)</span> = <span class="delimiter">{</span>
      val <a title="List[SelectiveANFTransform.this.global.Type]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.formals">formals</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.fun" title="SelectiveANFTransform.this.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.paramTypes" title="=&gt; List[SelectiveANFTransform.this.global.Type]">paramTypes</a>
      val overshoot = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.args" title="List[SelectiveANFTransform.this.global.Tree]">args</a>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a> <a href="../../Int.scala.html#scala;Int.-(1409840560)" title="Int" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.overshoot">-</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.formals" title="List[SelectiveANFTransform.this.global.Type]">formals</a>.<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.length" title="=&gt; Int">length</a>

      var <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.spc">spc</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>

      val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree])" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[List[SelectiveANFTransform.this.global.Tree]]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.stm">stm</a>,<a href="../../Tuple2.scala.html#scala;Tuple2._2" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.expr">expr</a><span class="delimiter">)</span> = <span class="delimiter">(</span>for <span class="delimiter">(</span><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.a">a</a>,<a title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.tp">tp</a><span class="delimiter">)</span> &lt;- <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.args" title="List[SelectiveANFTransform.this.global.Tree]">args</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.zip" title="(that: scala.collection.GenIterable[SelectiveANFTransform.this.global.Type])(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.Tree],(SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.global.Type),List[(SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.global.Type)]])List[(SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.global.Type)]">zip</a><a href="../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.map" title="(f: ((SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.global.Type)) =&gt; (List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[(SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.global.Type)],(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree),List[(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)]])List[(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)]" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.formals" title="List[SelectiveANFTransform.this.global.Type]">formals</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[SelectiveANFTransform.this.global.Type])List[SelectiveANFTransform.this.global.Type]">:::</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List" title="scala.collection.immutable.List.type">List</a>.<a href="../../collection/generic/GenTraversableFactory.scala.html#scala.collection.generic;GenTraversableFactory.fill(7c98e57083)" title="(n: Int)(elem: =&gt; SelectiveANFTransform.this.global.NoType.type)List[SelectiveANFTransform.this.global.NoType.type]">fill</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.overshoot" title="Int">overshoot</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="SelectiveANFTransform.this.global.NoType.type">NoType</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> yield <span class="delimiter">{</span>
        <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.tp" title="SelectiveANFTransform.this.global.Type">tp</a> match <span class="delimiter">{</span>
          case TypeRef<span class="delimiter">(</span>_, <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ByNameParamClass" title="=&gt; SelectiveANFTransform.this.global.ClassSymbol">ByNameParamClass</a>, <a href="../../collection/generic/SeqFactory.scala.html#scala.collection.generic;SeqFactory.unapplySeq" title="(x: List[SelectiveANFTransform.this.global.Type])Some[List[SelectiveANFTransform.this.global.Type]]">List</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.elemtp">elemtp</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <span class="comment">// note that we're not passing just isAnyParentImpure</span>
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveANFTransform.this.global.Tree)(scala.collection.immutable.Nil.type, SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.a" title="SelectiveANFTransform.this.global.Tree">a</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.elemtp" title="SelectiveANFTransform.this.global.Type">elemtp</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.elemtp" title="SelectiveANFTransform.this.global.Type">elemtp</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span><span class="delimiter">)</span>
          case _ =&gt;
            val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valStm">valStm</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valExpr">valExpr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valSpc">valSpc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.a" title="SelectiveANFTransform.this.global.Tree">a</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a><span class="delimiter">)</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valSpc" title="SelectiveANFTransform.this.CPSInfo">valSpc</a>
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valStm" title="List[SelectiveANFTransform.this.global.Tree]">valStm</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.x$6.$anonfun.valExpr" title="SelectiveANFTransform.this.global.Tree">valExpr</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>.<a href="../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.unzip" title="(implicit asPair: ((List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)) =&gt; (List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree))(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree])">unzip</a>

      <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[List[SelectiveANFTransform.this.global.Tree]], _2: List[SelectiveANFTransform.this.global.Tree], _3: SelectiveANFTransform.this.CPSInfo)(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.stm" title="List[List[SelectiveANFTransform.this.global.Tree]]">stm</a>,<a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.expr" title="List[SelectiveANFTransform.this.global.Tree]">expr</a>,<a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>


    <span class="comment">// precondition: cpsR.isDefined &quot;implies&quot; isAnyParentImpure</span>
    def <a title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue">transValue</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsR">cpsR</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree, CPSInfo<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="comment">// return value: (stms, expr, spc), where spc is CPSInfo after stms but *before* expr</span>
      implicit val <a title="SelectiveANFTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.pos">pos</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>
      <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a> match <span class="delimiter">{</span>
        case Block<span class="delimiter">(</span><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$7.cpsA2">cpsA2</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$7.cpsR2">cpsR2</a><span class="delimiter">)</span> = <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: SelectiveANFTransform.this.CPSInfo, _2: SelectiveANFTransform.this.CPSInfo)(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer._unit" title="=&gt; SelectiveANFTransform.this.global.CompilationUnit" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// tbd</span>
          <span class="comment">//          val (cpsA2, cpsR2) = (None, getAnswerTypeAnn(tree.tpe))</span>

          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.a">a</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.b">b</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock" title="(stms: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)">transBlock</a><span class="delimiter">(</span><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span>, <span title="SelectiveANFTransform.this.CPSInfo">cpsA2</span>, <span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span><span class="delimiter">)</span><a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree) @unchecked" class="delimiter">(</a><span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span>
          val <a title="SelectiveANFTransform.this.global.Block" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree1">tree1</a>  = <span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveANFTransform.this.global.Tree, stats: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.a" title="List[SelectiveANFTransform.this.global.Tree]">a</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.b" title="SelectiveANFTransform.this.global.Tree">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// no updateSynthFlag here!!!</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveANFTransform.this.global.Block, _3: SelectiveANFTransform.this.CPSInfo)(scala.collection.immutable.Nil.type, SelectiveANFTransform.this.global.Block, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree1" title="SelectiveANFTransform.this.global.Block">tree1</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>

        case If<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cond">cond</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.thenp">thenp</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elsep">elsep</a><span class="delimiter">)</span> =&gt;
          <span class="comment">/* possible situations:
          cps before (cpsA)
          cps in condition (spc)  &lt;-- synth flag set if *only* here!
          cps in (one or both) branches */</span>
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.condStats">condStats</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.condVal">condVal</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$9.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cond" title="SelectiveANFTransform.this.global.Tree">cond</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$10.cpsA2">cpsA2</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$10.cpsR2">cpsR2</a><span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasSynthMarker" title="(tpe: SelectiveANFTransform.this.global.Type)Boolean">hasSynthMarker</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: SelectiveANFTransform.this.CPSInfo, _2: SelectiveANFTransform.this.CPSInfo)(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="SelectiveANFTransform.this.CPSInfo">spc</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer._unit" title="=&gt; SelectiveANFTransform.this.global.CompilationUnit" class="delimiter">(</a><span title="SelectiveANFTransform.this.CPSInfo">spc</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> else
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: None.type, _2: Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)])(None.type, Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)])" class="delimiter">(</a><a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// if no cps in condition, branches must conform to tree.tpe directly</span>
          val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.thenVal">thenVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.thenp" title="SelectiveANFTransform.this.global.Tree">thenp</a>, <span title="SelectiveANFTransform.this.CPSInfo">cpsA2</span>, <span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span>
          val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elseVal">elseVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elsep" title="SelectiveANFTransform.this.global.Tree">elsep</a>, <span title="SelectiveANFTransform.this.CPSInfo">cpsA2</span>, <span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span>

          <span class="comment">// check that then and else parts agree (not necessary any more, but left as sanity check)</span>
          if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elsep" title="SelectiveANFTransform.this.global.Tree">elsep</a> <span title="(x$1: Any)Boolean">==</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="SelectiveANFTransform.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
              <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;always need else part in cps code&quot;)" class="string">&quot;always need else part in cps code&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Boolean">hasAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.thenVal" title="SelectiveANFTransform.this.global.Tree">thenVal</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.!=(763c96e1b1)" title="(x: Boolean)Boolean">!=</a> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Boolean">hasAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elseVal" title="SelectiveANFTransform.this.global.Tree">elseVal</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;then and else parts must both be cps code or neither of them&quot;)" class="string">&quot;then and else parts must both be cps code or neither of them&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.condStats" title="List[SelectiveANFTransform.this.global.Tree]">condStats</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.If" title="(tree: SelectiveANFTransform.this.global.Tree, cond: SelectiveANFTransform.this.global.Tree, thenp: SelectiveANFTransform.this.global.Tree, elsep: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.If">If</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.condVal" title="SelectiveANFTransform.this.global.Tree">condVal</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.thenVal" title="SelectiveANFTransform.this.global.Tree">thenVal</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.elseVal" title="SelectiveANFTransform.this.global.Tree">elseVal</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Match<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selector">selector</a>, <a title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cases">cases</a><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selStats">selStats</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selVal">selVal</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$11.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selector" title="SelectiveANFTransform.this.global.Tree">selector</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$12.cpsA2">cpsA2</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$12.cpsR2">cpsR2</a><span class="delimiter">)</span> =
            if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasSynthMarker" title="(tpe: SelectiveANFTransform.this.global.Type)Boolean">hasSynthMarker</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: SelectiveANFTransform.this.CPSInfo, _2: SelectiveANFTransform.this.CPSInfo)(SelectiveANFTransform.this.CPSInfo, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="SelectiveANFTransform.this.CPSInfo">spc</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer._unit" title="=&gt; SelectiveANFTransform.this.global.CompilationUnit" class="delimiter">(</a><span title="SelectiveANFTransform.this.CPSInfo">spc</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            else <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: None.type, _2: Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)])(None.type, Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)])" class="delimiter">(</a><a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>

          val caseVals = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cases" title="List[SelectiveANFTransform.this.global.CaseDef]">cases</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals">map</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.x0$2" title="SelectiveANFTransform.this.global.CaseDef" class="delimiter">{</a> case <a title="SelectiveANFTransform.this.global.CaseDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.cd">cd</a> @ CaseDef<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.pat">pat</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.guard">guard</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.body">body</a><span class="delimiter">)</span> =&gt;
            val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.bodyVal">bodyVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <span title="SelectiveANFTransform.this.CPSInfo">cpsA2</span>, <span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="SelectiveANFTransform.this.CPSInfo">cpsR2</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span>
            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.CaseDef" title="(tree: SelectiveANFTransform.this.global.Tree, pat: SelectiveANFTransform.this.global.Tree, guard: SelectiveANFTransform.this.global.Tree, body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.cd" title="SelectiveANFTransform.this.global.CaseDef">cd</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.pat" title="SelectiveANFTransform.this.global.Tree">pat</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.guard" title="SelectiveANFTransform.this.global.Tree">guard</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals.$anonfun.bodyVal" title="SelectiveANFTransform.this.global.Tree">bodyVal</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selStats" title="List[SelectiveANFTransform.this.global.Tree]">selStats</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Match" title="(tree: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Tree, cases: List[SelectiveANFTransform.this.global.CaseDef])SelectiveANFTransform.this.global.Match">Match</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.selVal" title="SelectiveANFTransform.this.global.Tree">selVal</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.caseVals" title="List[SelectiveANFTransform.this.global.CaseDef]">caseVals</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        <span class="comment">// this is utterly broken: LabelDefs need to be considered together when transforming them to DefDefs:</span>
        <span class="comment">// suppose a Block {L1; ... ; LN}</span>
        <span class="comment">// this should become {D1def ; ... ; DNdef ; D1()}</span>
        <span class="comment">// where D$idef = def L$i(..) = {L$i.body; L${i+1}(..)}</span>

        case <a title="SelectiveANFTransform.this.global.LabelDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.ldef">ldef</a> @ LabelDef<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.TermName">name</span>, <a title="List[SelectiveANFTransform.this.global.Ident]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.params">params</a>, <span title="SelectiveANFTransform.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// println(&quot;trans LABELDEF &quot;+(name, params, tree.tpe, hasAnswerTypeAnn(tree.tpe)))</span>
          <span class="comment">// TODO why does the labeldef's type have a cpsMinus annotation, whereas the rhs does not? (BYVALmode missing/too much somewhere?)</span>
          if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Boolean">hasAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="comment">// currentOwner.newMethod(name, tree.pos, Flags.SYNTHETIC) setInfo ldef.symbol.info</span>
            val sym    = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.ldef" title="SelectiveANFTransform.this.global.LabelDef">ldef</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a> <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.resetFlag" title="SelectiveANFTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.sym">resetFlag</a> Flags.<span title="Long(131072L)">LABEL</span>
            val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.rhs1">rhs1</a>   = <span title="SelectiveANFTransform.this.global.Tree">rhs</span> <span class="comment">//new TreeSymSubstituter(List(ldef.symbol), List(sym)).transform(rhs)</span>
            val rhsVal = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.rhs1" title="SelectiveANFTransform.this.global.Tree">rhs1</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.changeOwner" title="SelectiveANFTransform.this.global.Tree">changeOwner</a> <span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: SelectiveANFTransform.this.global.Symbol)ArrowAssoc[SelectiveANFTransform.this.global.Symbol]">currentOwner</a> <a href="../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: SelectiveANFTransform.this.global.Symbol)(SelectiveANFTransform.this.global.Symbol, SelectiveANFTransform.this.global.Symbol)">-&gt;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a><span class="delimiter">)</span>

            val <a title="SelectiveANFTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.stm1">stm1</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveANFTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveANFTransform.this.global.analyzer.global.Tree)SelectiveANFTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.DefDef.apply(ebb67886c8)" title="(sym: SelectiveANFTransform.this.global.Symbol, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.DefDef">DefDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a>, <span title="SelectiveANFTransform.this.global.Tree">rhsVal</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="comment">// since virtpatmat does not rely on fall-through, don't call the labels it emits</span>
            <span class="comment">// transBlock will take care of calling the first label</span>
            <span class="comment">// calling each labeldef is wrong, since some labels may be jumped over</span>
            <span class="comment">// we can get away with this for now since the only other labels we emit are for tailcalls/while loops,</span>
            <span class="comment">// which do not have consecutive labeldefs (and thus fall-through is irrelevant)</span>
            if <span class="delimiter">(</span><a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="SelectiveANFTransform.this.global.treeInfo.type">treeInfo</a>.<a href="../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: SelectiveANFTransform.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.ldef" title="SelectiveANFTransform.this.global.LabelDef">ldef</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.analyzer.global.Tree], _2: SelectiveANFTransform.this.global.analyzer.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.analyzer.global.Tree], SelectiveANFTransform.this.global.analyzer.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.analyzer.global.Tree*)List[SelectiveANFTransform.this.global.analyzer.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.stm1" title="SelectiveANFTransform.this.global.analyzer.global.Tree">stm1</a><span class="delimiter">)</span>, <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveANFTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveANFTransform.this.global.analyzer.global.Tree)SelectiveANFTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">{</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Literal" title="(value: SelectiveANFTransform.this.global.Constant)SelectiveANFTransform.this.global.Literal">Literal</a><span class="delimiter">(</span><a href="../../reflect/internal/Constants.scala.html#scala.reflect.internal;Constants;Constant" title="(value: Any)SelectiveANFTransform.this.global.Constant">Constant</a><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
            else <span class="delimiter">{</span>
              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.assert(0f40bc559c)" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.params" title="List[SelectiveANFTransform.this.global.Ident]">params</a>.<a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.isEmpty" title="=&gt; Boolean">isEmpty</a>, <span title="String(&quot;problem in ANF transforming label with non-empty params &quot;)" class="string">&quot;problem in ANF transforming label with non-empty params &quot;</span><span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.ldef" title="SelectiveANFTransform.this.global.LabelDef">ldef</a><span class="delimiter">)</span>
              <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.analyzer.global.Tree], _2: SelectiveANFTransform.this.global.analyzer.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.analyzer.global.Tree], SelectiveANFTransform.this.global.analyzer.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.analyzer.global.Tree*)List[SelectiveANFTransform.this.global.analyzer.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.stm1" title="SelectiveANFTransform.this.global.analyzer.global.Tree">stm1</a><span class="delimiter">)</span>, <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveANFTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveANFTransform.this.global.analyzer.global.Tree)SelectiveANFTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">{</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: SelectiveANFTransform.this.global.Symbol)SelectiveANFTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a><span class="delimiter">)</span>, List<a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> else <span class="delimiter">{</span>
            val <span title="SelectiveANFTransform.this.global.Tree">rhsVal</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">rhs</span>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a><span class="delimiter">)</span>
            <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(scala.collection.immutable.Nil.type, SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.LabelDef" title="(tree: SelectiveANFTransform.this.global.Tree, name: SelectiveANFTransform.this.global.Name, params: List[SelectiveANFTransform.this.global.Ident], rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.TermName">name</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.params" title="List[SelectiveANFTransform.this.global.Ident]">params</a>, <span title="SelectiveANFTransform.this.global.Tree">rhsVal</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>


        case Try<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.block">block</a>, <a title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catches">catches</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.finalizer">finalizer</a><span class="delimiter">)</span> =&gt;
          val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.blockVal">blockVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.block" title="SelectiveANFTransform.this.global.Tree">block</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a><span class="delimiter">)</span>

          val <a title="List[SelectiveANFTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals">catchVals</a> = for <span class="delimiter">{</span>
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="SelectiveANFTransform.this.global.CaseDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.cd">cd</a> @ CaseDef<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.pat">pat</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.guard">guard</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.body">body</a><span class="delimiter">)</span> &lt;- <a href="../../collection/generic/FilterMonadic.scala.html#scala.collection.generic;FilterMonadic.map" title="(f: SelectiveANFTransform.this.global.CaseDef =&gt; (SelectiveANFTransform.this.global.CaseDef, SelectiveANFTransform.this.global.Tree))(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.CaseDef],(SelectiveANFTransform.this.global.CaseDef, SelectiveANFTransform.this.global.Tree),List[(SelectiveANFTransform.this.global.CaseDef, SelectiveANFTransform.this.global.Tree)]])List[(SelectiveANFTransform.this.global.CaseDef, SelectiveANFTransform.this.global.Tree)]">catches</a>
            <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.bodyVal">bodyVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.body" title="SelectiveANFTransform.this.global.Tree">body</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> yield <span class="delimiter">{</span>
            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.CaseDef" title="(tree: SelectiveANFTransform.this.global.Tree, pat: SelectiveANFTransform.this.global.Tree, guard: SelectiveANFTransform.this.global.Tree, body: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.cd" title="SelectiveANFTransform.this.global.CaseDef">cd</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.pat" title="SelectiveANFTransform.this.global.Tree">pat</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.guard" title="SelectiveANFTransform.this.global.Tree">guard</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals.$anonfun.bodyVal" title="SelectiveANFTransform.this.global.Tree">bodyVal</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.finallyVal">finallyVal</a> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transExpr" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)SelectiveANFTransform.this.global.Tree">transExpr</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.finalizer" title="SelectiveANFTransform.this.global.Tree">finalizer</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a><span class="delimiter">)</span> <span class="comment">// for now, no cps in finally</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(scala.collection.immutable.Nil.type, SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: SelectiveANFTransform.this.global.Tree, block: SelectiveANFTransform.this.global.Tree, catches: List[SelectiveANFTransform.this.global.CaseDef], finalizer: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.blockVal" title="SelectiveANFTransform.this.global.Tree">blockVal</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.catchVals" title="List[SelectiveANFTransform.this.global.CaseDef]">catchVals</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.finallyVal" title="SelectiveANFTransform.this.global.Tree">finallyVal</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>

        case Assign<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.lhs">lhs</a>, <span title="SelectiveANFTransform.this.global.Tree">rhs</span><span class="delimiter">)</span> =&gt;
          <span class="comment">// allow cps code in rhs only</span>
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$15.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$15.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$15.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">rhs</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Assign" title="(tree: SelectiveANFTransform.this.global.Tree, lhs: SelectiveANFTransform.this.global.Tree, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.lhs" title="SelectiveANFTransform.this.global.Tree">lhs</a><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Return<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr0</span><span class="delimiter">)</span> =&gt;
          if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean">isAnyParentImpure</a><span class="delimiter">)</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;return expression not allowed, since method calls CPS method&quot;)" class="string">&quot;return expression not allowed, since method calls CPS method&quot;</span><span class="delimiter">)</span>
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$16.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$16.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$16.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">expr0</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Return" title="(tree: SelectiveANFTransform.this.global.Tree, expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Return">Return</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Throw<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr0</span><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$17.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$17.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$17.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">expr0</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Throw" title="(tree: SelectiveANFTransform.this.global.Tree, expr: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Throw">Throw</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">expr</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Typed<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">expr0</span>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt">tpt</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// TODO: should x: A @cps[B,C] have a special meaning?</span>
          <span class="comment">// type casts used in different ways (see match2.scala, #3199)</span>
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$18.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$18.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$18.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">expr0</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          val <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt1">tpt1</a> = if <span class="delimiter">(</span><a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="SelectiveANFTransform.this.global.treeInfo.type">treeInfo</a>.<a href="../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.isWildcardStarArg" title="(tree: SelectiveANFTransform.this.global.treeInfo.global.Tree)Boolean">isWildcardStarArg</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt" title="SelectiveANFTransform.this.global.Tree">tpt</a> else
            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.TypeTree" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt" title="SelectiveANFTransform.this.global.Tree">tpt</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.TypeTree">setType</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt" title="SelectiveANFTransform.this.global.Tree">tpt</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="comment">//        (stms, updateSynthFlag(treeCopy.Typed(tree, expr, tpt1)), spc)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Typed, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Typed, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Typed" title="(tree: SelectiveANFTransform.this.global.Tree, expr: SelectiveANFTransform.this.global.Tree, tpt: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">expr</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tpt1" title="SelectiveANFTransform.this.global.Tree">tpt1</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Typed">setType</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case TypeApply<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">fun</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$19.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$19.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$19.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">fun</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.TypeApply" title="(tree: SelectiveANFTransform.this.global.Tree, fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">expr</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">args</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Select<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.qual">qual</a>, <span title="SelectiveANFTransform.this.global.Name">name</span><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$20.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$20.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.x$20.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.qual" title="SelectiveANFTransform.this.global.Tree">qual</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><span title="List[SelectiveANFTransform.this.global.Tree]">stms</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Select" title="(tree: SelectiveANFTransform.this.global.Tree, qualifier: SelectiveANFTransform.this.global.Tree, selector: SelectiveANFTransform.this.global.Name)SelectiveANFTransform.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <span title="SelectiveANFTransform.this.global.Tree">expr</span>, <span title="SelectiveANFTransform.this.global.Name">name</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="SelectiveANFTransform.this.CPSInfo">spc</span><span class="delimiter">)</span>

        case Apply<span class="delimiter">(</span><span title="SelectiveANFTransform.this.global.Tree">fun</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">args</span><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funStm">funStm</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funExpr">funExpr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funSpc">funSpc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">fun</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[List[SelectiveANFTransform.this.global.Tree]]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argStm">argStm</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argExpr">argExpr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argSpc">argSpc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transArgList" title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree], cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[List[SelectiveANFTransform.this.global.Tree]], List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)">transArgList</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><span title="SelectiveANFTransform.this.global.Tree">fun</span>, <span title="List[SelectiveANFTransform.this.global.Tree]">args</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funSpc" title="SelectiveANFTransform.this.CPSInfo">funSpc</a><span class="delimiter">)</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funStm" title="List[SelectiveANFTransform.this.global.Tree]">funStm</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[SelectiveANFTransform.this.global.Tree])List[SelectiveANFTransform.this.global.Tree]">:::</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argStm" title="List[List[SelectiveANFTransform.this.global.Tree]]">argStm</a>.<a href="../../collection/generic/GenericTraversableTemplate.scala.html#scala.collection.generic;GenericTraversableTemplate.flatten" title="(implicit asTraversable: List[SelectiveANFTransform.this.global.Tree] =&gt; scala.collection.GenTraversableOnce[SelectiveANFTransform.this.global.Tree])List[SelectiveANFTransform.this.global.Tree]">flatten</a><span class="delimiter">)</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.updateSynthFlag" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">updateSynthFlag</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Apply" title="(tree: SelectiveANFTransform.this.global.Tree, fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.funExpr" title="SelectiveANFTransform.this.global.Tree">funExpr</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argExpr" title="List[SelectiveANFTransform.this.global.Tree]">argExpr</a><span class="delimiter">)</span><span class="delimiter">)</span>,
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.argSpc" title="SelectiveANFTransform.this.CPSInfo">argSpc</a><span class="delimiter">)</span>

        case _ =&gt;
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.cpsAllowed_=" title="(x$1: Boolean)Unit">cpsAllowed</a> = true
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(scala.collection.immutable.Nil.type, SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transform" title="(tree: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">// precondition: cpsR.isDefined &quot;implies&quot; isAnyParentImpure</span>
    def <a title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue">transTailValue</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR">cpsR</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>

      val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a><span class="delimiter">)</span>

      val <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.bot">bot</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span>

      val <a title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.plainTpe">plainTpe</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

      if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.bot" title="SelectiveANFTransform.this.CPSInfo">bot</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>

        if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isEmpty" title="=&gt; Boolean">isEmpty</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.NothingClass" title="SelectiveANFTransform.this.global.definitions.NothingClass.type">NothingClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// must convert!</span>
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;cps type conversion (has: &quot;)" class="string">&quot;cps type conversion (has: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a>  <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;cps type conversion (expected: &quot;)" class="string">&quot;cps type conversion (expected: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>.<a href="../../Option.scala.html#scala;Option.get" title="=&gt; (SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)">get</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;): &quot;)" class="string">&quot;): &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a><span class="delimiter">)</span>

          if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasPlusMarker" title="(tpe: SelectiveANFTransform.this.global.Type)Boolean">hasPlusMarker</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.warning" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;expression &quot;)" class="string">&quot;expression &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is cps-transformed unexpectedly&quot;)" class="string">&quot; is cps-transformed unexpectedly&quot;</span><span class="delimiter">)</span>

          try <span class="delimiter">{</span>
            val Some<a href="../../Tuple2.scala.html#scala;Tuple2" title="(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)" class="delimiter">(</a><span class="delimiter">(</span><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.a">a</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.b">b</a><span class="delimiter">)</span><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>
            <span class="comment">/* Since shiftUnit is bounded [A,B,C&gt;:B] this may not typecheck
             * if C is overly specific.  So if !(B &lt;:&lt; C), call shiftUnit0
             * instead, which takes only two type arguments.
             */</span>
            val conforms = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.a" title="SelectiveANFTransform.this.global.Type">a</a> <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.<:<" title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.conforms">&lt;:&lt;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.b" title="SelectiveANFTransform.this.global.Type">b</a>
            val <a title="SelectiveANFTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.call">call</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveANFTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveANFTransform.this.global.analyzer.global.Position)(tree: SelectiveANFTransform.this.global.analyzer.global.Tree)SelectiveANFTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span>
              <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeApply" title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                  <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.gen" title="SelectiveANFTransform.this.global.gen.type">gen</a>.<a href="../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedRef(23ce0e46ac)" title="(sym: SelectiveANFTransform.this.global.gen.global.Symbol)SelectiveANFTransform.this.global.gen.global.RefTree">mkAttributedRef</a><span class="delimiter">(</span> if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.conforms" title="Boolean">conforms</a><span class="delimiter">)</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShiftUnit" title="=&gt; SelectiveANFTransform.this.global.Symbol">MethShiftUnit</a> else <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShiftUnit0" title="=&gt; SelectiveANFTransform.this.global.Symbol">MethShiftUnit0</a> <span class="delimiter">)</span>,
                  <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.TypeTree*)List[SelectiveANFTransform.this.global.TypeTree]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.plainTpe" title="SelectiveANFTransform.this.global.Type">plainTpe</a><span class="delimiter">)</span>, <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.a" title="SelectiveANFTransform.this.global.Type">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[SelectiveANFTransform.this.global.TypeTree])(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.TypeTree],SelectiveANFTransform.this.global.TypeTree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">++</a> <span class="delimiter">(</span> if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.conforms" title="Boolean">conforms</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.TypeTree*)List[SelectiveANFTransform.this.global.TypeTree]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.TypeTree(559e7d9959)" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.b" title="SelectiveANFTransform.this.global.Type">b</a><span class="delimiter">)</span><span class="delimiter">)</span> else <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> <span class="delimiter">)</span>
                <span class="delimiter">)</span>,
                <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.Tree*)List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
              <span class="delimiter">)</span>
            <span class="delimiter">)</span>
            <span class="comment">// This is today's sick/meaningless heuristic for spotting breakdown so</span>
            <span class="comment">// we don't proceed until stack traces start draping themselves over everything.</span>
            <span class="comment">// If there are wildcard types in the tree and B == Nothing, something went wrong.</span>
            <span class="comment">// (I thought WildcardTypes would be enough, but nope.  'reset0 { 0 }' has them.)</span>
            <span class="comment">//</span>
            <span class="comment">// Code as simple as    reset((_: String).length)</span>
            <span class="comment">// will crash meaninglessly without this check.  See SI-3718.</span>
            <span class="comment">//</span>
            <span class="comment">// TODO - obviously this should be done earlier, differently, or with</span>
            <span class="comment">// a more skilled hand.  Most likely, all three.</span>
            if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.b" title="SelectiveANFTransform.this.global.Type">b</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.NothingClass" title="SelectiveANFTransform.this.global.definitions.NothingClass.type">NothingClass</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.call" title="SelectiveANFTransform.this.global.analyzer.global.Tree">call</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.analyzer.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.exists" title="(p: SelectiveANFTransform.this.global.analyzer.global.Type =&gt; Boolean)Boolean">exists</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.$anonfun.x$26" title="SelectiveANFTransform.this.global.analyzer.global.Type">_</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.WildcardType" title="SelectiveANFTransform.this.global.WildcardType.type">WildcardType</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;cannot cps-transform malformed (possibly in shift/reset placement) expression&quot;)" class="string">&quot;cannot cps-transform malformed (possibly in shift/reset placement) expression&quot;</span><span class="delimiter">)</span>
            else
              return <span class="delimiter">(</span><a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.analyzer.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.analyzer.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.call" title="SelectiveANFTransform.this.global.analyzer.global.Tree">call</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          catch <span class="delimiter">{</span>
            case <a title="SelectiveANFTransform.this.global.TypeError" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.ex">ex</a>:<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError" title="SelectiveANFTransform.this.global.TypeError">TypeError</a> =&gt;
              <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.ex" title="SelectiveANFTransform.this.global.TypeError">ex</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;cannot cps-transform expression &quot;)" class="string">&quot;cannot cps-transform expression &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.ex" title="SelectiveANFTransform.this.global.TypeError">ex</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError.msg" title="=&gt; String">msg</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

      <span class="delimiter">}</span> else if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.bot" title="SelectiveANFTransform.this.CPSInfo">bot</a>.<a href="../../Option.scala.html#scala;Option.isDefined" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// error!</span>
        <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;cps type error: &quot;)" class="string">&quot;cps type error: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
        <span class="comment">//println(&quot;cps type error: &quot; + expr + &quot;/&quot; + expr.tpe + &quot;/&quot; + getAnswerTypeAnn(expr.tpe))</span>

        <span class="comment">//println(cpsR + &quot;/&quot; + spc + &quot;/&quot; + bot)</span>

        <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;found cps expression in non-cps position&quot;)" class="string">&quot;found cps expression in non-cps position&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <span class="delimiter">{</span>
        <span class="comment">// all is well</span>

        if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasPlusMarker" title="(tpe: SelectiveANFTransform.this.global.Type)Boolean">hasPlusMarker</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.warning" title="(pos: SelectiveANFTransform.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, <span title="String(&quot;expression &quot;)" class="string">&quot;expression &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; of type &quot;)" class="string">&quot; of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is not expected to have a cps type&quot;)" class="string">&quot; is not expected to have a cps type&quot;</span><span class="delimiter">)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.modifyType" title="(f: SelectiveANFTransform.this.global.Type =&gt; SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Tree">modifyType</a> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Type">removeAllCPSAnnotations</a>
        <span class="delimiter">}</span>

        <span class="comment">// TODO: sanity check that types agree</span>
      <span class="delimiter">}</span>

      <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue">transInlineValue</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree, CPSInfo<span class="delimiter">)</span> = <span class="delimiter">{</span>

      val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr">expr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.spc">spc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a><span class="delimiter">)</span> <span class="comment">// never required to be cps</span>

      <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case <a title="Some[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.spcVal">spcVal</a> @ Some<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt;

          val <a title="SelectiveANFTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.valueTpe">valueTpe</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

          val sym: <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="SelectiveANFTransform.this.global.Symbol">Symbol</a> = <span class="delimiter">(</span>
            <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="=&gt; SelectiveANFTransform.this.global.Symbol">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValue" title="(name: SelectiveANFTransform.this.global.TermName, pos: SelectiveANFTransform.this.global.Position, newFlags: Long)SelectiveANFTransform.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)SelectiveANFTransform.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.fresh" title="=&gt; scala.reflect.internal.util.FreshNameCreator">fresh</a>.<a href="../../reflect/internal/util/FreshNameCreator.scala.html#scala.reflect.internal.util;FreshNameCreator.newName" title="(prefix: String)String">newName</a><span class="delimiter">(</span><span title="String(&quot;tmp&quot;)" class="string">&quot;tmp&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a>, Flags.<span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span>
              <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.TermSymbol">setInfo</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.valueTpe" title="SelectiveANFTransform.this.global.Type">valueTpe</a>
              <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setAnnotations(dc1f38d484)" title="SelectiveANFTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.sym">setAnnotations</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.AnnotationInfo*)List[SelectiveANFTransform.this.global.AnnotationInfo]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos.AnnotationInfo.apply" title="(atp: SelectiveANFTransform.this.global.Type, args: List[SelectiveANFTransform.this.global.Tree], assocs: List[(SelectiveANFTransform.this.global.Name, SelectiveANFTransform.this.global.ClassfileAnnotArg)])SelectiveANFTransform.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MarkerCPSSym" title="=&gt; SelectiveANFTransform.this.global.ClassSymbol">MarkerCPSSym</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TypeSymbol.tpe_*" title="=&gt; SelectiveANFTransform.this.global.Type">tpe_*</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.changeOwner" title="(pairs: (SelectiveANFTransform.this.global.Symbol, SelectiveANFTransform.this.global.Symbol)*)SelectiveANFTransform.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: SelectiveANFTransform.this.global.Symbol)ArrowAssoc[SelectiveANFTransform.this.global.Symbol]">currentOwner</a> <a href="../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: SelectiveANFTransform.this.global.Symbol)(SelectiveANFTransform.this.global.Symbol, SelectiveANFTransform.this.global.Symbol)">-&gt;</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a><span class="delimiter">)</span>

          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Ident, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Ident, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[SelectiveANFTransform.this.global.Tree])List[SelectiveANFTransform.this.global.Tree]">:::</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.ValDef*)List[SelectiveANFTransform.this.global.ValDef]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: SelectiveANFTransform.this.global.Symbol, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a><span class="delimiter">)</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.ValDef">setType</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.NoType" title="SelectiveANFTransform.this.global.NoType.type">NoType</a><span class="delimiter">)</span><span class="delimiter">)</span>,
             <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: SelectiveANFTransform.this.global.Symbol)SelectiveANFTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.sym" title="SelectiveANFTransform.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveANFTransform.this.global.Type)SelectiveANFTransform.this.global.Ident">setType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.valueTpe" title="SelectiveANFTransform.this.global.Type">valueTpe</a><span class="delimiter">)</span> <a href="../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.setPos" title="(newpos: scala.reflect.internal.util.Position)SelectiveANFTransform.this.global.Ident">setPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.spcVal" title="Some[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">spcVal</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.tree" title="SelectiveANFTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case _ =&gt;
          <a href="../../Tuple3.scala.html#scala;Tuple3" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree, _3: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>



    def <a title="(stm: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm">transInlineStm</a><span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stm">stm</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>:  <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, CPSInfo<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stm" title="SelectiveANFTransform.this.global.Tree">stm</a> match <span class="delimiter">{</span>

        <span class="comment">// TODO: what about DefDefs?</span>
        <span class="comment">// TODO: relation to top-level val def?</span>
        <span class="comment">// TODO: what about lazy vals?</span>

        case <a title="SelectiveANFTransform.this.global.ValDef" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree">tree</a> @ ValDef<span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Modifiers" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.mods">mods</a>, <a title="SelectiveANFTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.name">name</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tpt">tpt</a>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.rhs">rhs</a><span class="delimiter">)</span> =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stms">stms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.anfRhs">anfRhs</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.spc">spc</a><span class="delimiter">)</span> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.atOwner(c4f4c4069a)" title="(owner: SelectiveANFTransform.this.global.Symbol)(trans: =&gt; (List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo))(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">atOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree" title="SelectiveANFTransform.this.global.ValDef">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo) @unchecked" class="delimiter">{</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.rhs" title="SelectiveANFTransform.this.global.Tree">rhs</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, <a href="../../Option.scala.html#scala.None" title="None.type">None</a><span class="delimiter">)</span> <span class="delimiter">}</span>

          val <a title="SelectiveANFTransform.this.global.ChangeOwnerTraverser" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tv">tv</a> = new <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ChangeOwnerTraverser" title="SelectiveANFTransform.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree" title="SelectiveANFTransform.this.global.ValDef">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="=&gt; SelectiveANFTransform.this.global.Symbol">currentOwner</a><span class="delimiter">)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.foreach" title="(f: SelectiveANFTransform.this.global.Tree =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tv" title="SelectiveANFTransform.this.global.ChangeOwnerTraverser">tv</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;ChangeOwnerTraverser.traverse" title="(tree: SelectiveANFTransform.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.$anonfun.x$30" title="SelectiveANFTransform.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="comment">// TODO: symbol might already have annotation. Should check conformance</span>
          <span class="comment">// TODO: better yet: do without annotations on symbols</span>

          val <a title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.spcVal">spcVal</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.anfRhs" title="SelectiveANFTransform.this.global.Tree">anfRhs</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
          <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.spcVal" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">spcVal</a> <a href="../../Option.scala.html#scala;Option.foreach" title="(f: ((SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)) =&gt; SelectiveANFTransform.this.global.Symbol)Unit">foreach</a> <span class="delimiter">(</span><a title="(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.$anonfun.x$31">_</a> =&gt; <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree" title="SelectiveANFTransform.this.global.ValDef">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a> <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setAnnotations(dc1f38d484)" title="(annots: List[SelectiveANFTransform.this.global.AnnotationInfo])SelectiveANFTransform.this.global.Symbol">setAnnotations</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.AnnotationInfo*)List[SelectiveANFTransform.this.global.AnnotationInfo]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos.AnnotationInfo.apply" title="(atp: SelectiveANFTransform.this.global.Type, args: List[SelectiveANFTransform.this.global.Tree], assocs: List[(SelectiveANFTransform.this.global.Name, SelectiveANFTransform.this.global.ClassfileAnnotArg)])SelectiveANFTransform.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MarkerCPSSym" title="=&gt; SelectiveANFTransform.this.global.ClassSymbol">MarkerCPSSym</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TypeSymbol.tpe_*" title="=&gt; SelectiveANFTransform.this.global.Type">tpe_*</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[SelectiveANFTransform.this.global.Tree])List[SelectiveANFTransform.this.global.Tree]">:::</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.ValDef*)List[SelectiveANFTransform.this.global.ValDef]">List</a><span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveANFTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.ValDef" title="(tree: SelectiveANFTransform.this.global.Tree, mods: SelectiveANFTransform.this.global.Modifiers, name: SelectiveANFTransform.this.global.Name, tpt: SelectiveANFTransform.this.global.Tree, rhs: SelectiveANFTransform.this.global.Tree)SelectiveANFTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree" title="SelectiveANFTransform.this.global.ValDef">tree</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.mods" title="SelectiveANFTransform.this.global.Modifiers">mods</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.name" title="SelectiveANFTransform.this.global.TermName">name</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tpt" title="SelectiveANFTransform.this.global.Tree">tpt</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.anfRhs" title="SelectiveANFTransform.this.global.Tree">anfRhs</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.spc" title="SelectiveANFTransform.this.CPSInfo">spc</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.spcVal" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">spcVal</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.tree" title="SelectiveANFTransform.this.global.ValDef">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case _ =&gt;
          val <a href="../../Tuple3.scala.html#scala;Tuple3" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple3.scala.html#scala;Tuple3._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headStms">headStms</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headExpr">headExpr</a>, <a href="../../Tuple3.scala.html#scala;Tuple3._3" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headSpc">headSpc</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree, SelectiveANFTransform.this.CPSInfo)">transInlineValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stm" title="SelectiveANFTransform.this.global.Tree">stm</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a><span class="delimiter">)</span>
          val <a title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.valSpc">valSpc</a> = <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getAnswerTypeAnn" title="(tp: SelectiveANFTransform.this.global.Type)Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">getAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headExpr" title="SelectiveANFTransform.this.global.Tree">headExpr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveANFTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
          <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.CPSInfo)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headStms" title="List[SelectiveANFTransform.this.global.Tree]">headStms</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.:::" title="(prefix: List[SelectiveANFTransform.this.global.Tree])List[SelectiveANFTransform.this.global.Tree]">:::</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveANFTransform.this.global.Tree*)List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headExpr" title="SelectiveANFTransform.this.global.Tree">headExpr</a><span class="delimiter">)</span>, <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.linearize(46a5c0bedc)" title="(a: SelectiveANFTransform.this.CPSInfo, b: SelectiveANFTransform.this.CPSInfo)(implicit unit: SelectiveANFTransform.this.global.CompilationUnit, implicit pos: SelectiveANFTransform.this.global.Position)SelectiveANFTransform.this.CPSInfo">linearize</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.headSpc" title="SelectiveANFTransform.this.CPSInfo">headSpc</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.valSpc" title="Option[(SelectiveANFTransform.this.global.Type, SelectiveANFTransform.this.global.Type)]">valSpc</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.unit" title="SelectiveANFTransform.this.global.CompilationUnit">unit</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm.stm" title="SelectiveANFTransform.this.global.Tree">stm</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveANFTransform.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="comment">// precondition: cpsR.isDefined &quot;implies&quot; isAnyParentImpure</span>
    def <a title="(stms: List[SelectiveANFTransform.this.global.Tree], expr: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock">transBlock</a><span class="delimiter">(</span><a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.stms">stms</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.expr">expr</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveANFTransform.this.global.Tree">Tree</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.cpsA">cpsA</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.cpsR">cpsR</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="Boolean" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.isAnyParentImpure">isAnyParentImpure</a>: <a href="../../Boolean.scala.html#scala;Boolean" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>
      def <a title="(currStats: List[SelectiveANFTransform.this.global.Tree], currAns: SelectiveANFTransform.this.CPSInfo, accum: List[SelectiveANFTransform.this.global.Tree])(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec">rec</a><span class="delimiter">(</span><a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.currStats">currStats</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.currAns">currAns</a>: <a href="../../Option.scala.html#scala;Option" title="SelectiveANFTransform.this.CPSInfo">CPSInfo</a>, <a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.accum">accum</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveANFTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree<span class="delimiter">)</span> =
        <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.currStats" title="List[SelectiveANFTransform.this.global.Tree]">currStats</a> match <span class="delimiter">{</span>
          case <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> =&gt;
            val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.anfStats">anfStats</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.anfExpr">anfExpr</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transTailValue" title="(tree: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo, cpsR: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)">transTailValue</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.expr" title="SelectiveANFTransform.this.global.Tree">expr</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.currAns" title="SelectiveANFTransform.this.CPSInfo">currAns</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.cpsR" title="SelectiveANFTransform.this.CPSInfo">cpsR</a><span class="delimiter">)</span>
            <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.accum" title="List[SelectiveANFTransform.this.global.Tree]">accum</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[SelectiveANFTransform.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.Tree],SelectiveANFTransform.this.global.Tree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">++</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.anfExpr" title="SelectiveANFTransform.this.global.Tree">anfExpr</a><span class="delimiter">)</span>

          case <a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.stat">stat</a> :: <a title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.rest">rest</a> =&gt;
            val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.stats">stats</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.CPSInfo" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.nextAns">nextAns</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transInlineStm" title="(stm: SelectiveANFTransform.this.global.Tree, cpsA: SelectiveANFTransform.this.CPSInfo)(implicit isAnyParentImpure: Boolean)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.CPSInfo)">transInlineStm</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.isAnyParentImpure" title="Boolean" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.stat" title="SelectiveANFTransform.this.global.Tree">stat</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.currAns" title="SelectiveANFTransform.this.CPSInfo">currAns</a><span class="delimiter">)</span>
            <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec" title="(currStats: List[SelectiveANFTransform.this.global.Tree], currAns: SelectiveANFTransform.this.CPSInfo, accum: List[SelectiveANFTransform.this.global.Tree])(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)">rec</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.rest" title="List[SelectiveANFTransform.this.global.Tree]">rest</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.nextAns" title="SelectiveANFTransform.this.CPSInfo">nextAns</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.accum" title="List[SelectiveANFTransform.this.global.Tree]">accum</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="(that: scala.collection.GenTraversableOnce[SelectiveANFTransform.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.Tree],SelectiveANFTransform.this.global.Tree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">++</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec.stats" title="List[SelectiveANFTransform.this.global.Tree]">stats</a><span class="delimiter">)</span>
         <span class="delimiter">}</span>

      val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats">anfStats</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfExpr">anfExpr</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rec" title="(currStats: List[SelectiveANFTransform.this.global.Tree], currAns: SelectiveANFTransform.this.CPSInfo, accum: List[SelectiveANFTransform.this.global.Tree])(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)">rec</a><a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.stms" title="List[SelectiveANFTransform.this.global.Tree]">stms</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.cpsA" title="SelectiveANFTransform.this.CPSInfo">cpsA</a>, List<a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// println(&quot;\nanf-block:\n&quot;+ ((stms :+ expr) mkString (&quot;{&quot;, &quot;\n&quot;, &quot;}&quot;)) +&quot;\nBECAME\n&quot;+ ((anfStats :+ anfExpr) mkString (&quot;{&quot;, &quot;\n&quot;, &quot;}&quot;)))</span>
      <span class="comment">// println(&quot;synth case? &quot;+ (anfStats map (t =&gt; (t, t.isDef, treeInfo.hasSynthCaseSymbol(t)))))</span>
      <span class="comment">// SUPER UGLY HACK: handle virtpatmat-style matches, whose labels have already been turned into DefDefs</span>
      if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a> <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.forall" title="(p: SelectiveANFTransform.this.global.Tree =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.$anonfun.t">t</a> =&gt; <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.$anonfun.t" title="SelectiveANFTransform.this.global.Tree">t</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.isDef" title="=&gt; Boolean">isDef</a> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees.treeInfo" title="SelectiveANFTransform.this.global.treeInfo.type">treeInfo</a>.<a href="../../reflect/internal/TreeInfo.scala.html#scala.reflect.internal;TreeInfo.hasSynthCaseSymbol" title="(t: SelectiveANFTransform.this.global.treeInfo.global.Tree)Boolean">hasSynthCaseSymbol</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.$anonfun.t" title="SelectiveANFTransform.this.global.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: List[SelectiveANFTransform.this.global.Tree])(List[SelectiveANFTransform.this.global.Tree], List[SelectiveANFTransform.this.global.Tree])" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.prologue">prologue</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rest">rest</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a> <a href="../../collection/SeqLike.scala.html#scala.collection;SeqLike.:+" title="(elem: SelectiveANFTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveANFTransform.this.global.Tree],SelectiveANFTransform.this.global.Tree,List[SelectiveANFTransform.this.global.Tree]])List[SelectiveANFTransform.this.global.Tree]">:+</a> <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfExpr" title="SelectiveANFTransform.this.global.Tree">anfExpr</a><span class="delimiter">)</span> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.span" title="(List[SelectiveANFTransform.this.global.Tree], List[SelectiveANFTransform.this.global.Tree])">span</a> <span class="delimiter">(</span><a title="SelectiveANFTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.x$38.$anonfun.s">s</a> =&gt; <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.x$38.$anonfun.s" title="SelectiveANFTransform.this.global.Tree">s</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="SelectiveANFTransform.this.global.DefDef">DefDef</a><span class="delimiter">]</span><span class="delimiter">)</span> <span class="comment">// find first case</span>
        <span class="comment">// println(&quot;rest: &quot;+ rest)</span>
        <span class="comment">// val (defs, calls) = rest partition (_.isInstanceOf[DefDef])</span>
        if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rest" title="List[SelectiveANFTransform.this.global.Tree]">rest</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// the filter drops the ()'s emitted when transValue encountered a LabelDef</span>
          val stats = <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.prologue" title="List[SelectiveANFTransform.this.global.Tree]">prologue</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.++" title="List[SelectiveANFTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.stats">++</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rest" title="List[SelectiveANFTransform.this.global.Tree]">rest</a> <a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.filter" title="(p: SelectiveANFTransform.this.global.Tree =&gt; Boolean)List[SelectiveANFTransform.this.global.Tree]">filter</a> <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.stats.$anonfun.x$39" title="SelectiveANFTransform.this.global.Tree">_</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;DefDef" title="SelectiveANFTransform.this.global.DefDef">DefDef</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.reverse" title="=&gt; List[SelectiveANFTransform.this.global.Tree]">reverse</a> <span class="comment">// ++ calls</span>
          <span class="comment">// println(&quot;REVERSED &quot;+ (stats mkString (&quot;{&quot;, &quot;\n&quot;, &quot;}&quot;)))</span>
          <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.analyzer.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.analyzer.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.stats" title="List[SelectiveANFTransform.this.global.Tree]">stats</a>, <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveANFTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveANFTransform.this.global.analyzer.global.Tree)SelectiveANFTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">{</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveANFTransform.this.global.Tree, args: List[SelectiveANFTransform.this.global.Tree])SelectiveANFTransform.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: SelectiveANFTransform.this.global.Symbol)SelectiveANFTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.rest" title="List[SelectiveANFTransform.this.global.Tree]">rest</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; SelectiveANFTransform.this.global.Tree">head</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveANFTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>, List<a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span> <span class="comment">// call first label to kick-start the match</span>
        <span class="delimiter">}</span> else <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfExpr" title="SelectiveANFTransform.this.global.Tree">anfExpr</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> else <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveANFTransform.this.global.Tree], _2: SelectiveANFTransform.this.global.Tree)(List[SelectiveANFTransform.this.global.Tree], SelectiveANFTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfStats" title="List[SelectiveANFTransform.this.global.Tree]">anfStats</a>, <a href="#scala.tools.selectivecps;SelectiveANFTransform;ANFTransformer.transBlock.anfExpr" title="SelectiveANFTransform.this.global.Tree">anfExpr</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
