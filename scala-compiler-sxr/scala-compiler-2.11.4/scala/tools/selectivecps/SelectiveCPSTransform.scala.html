<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/selectivecps/SelectiveCPSTransform.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">// $Id$</span>

package scala.tools.selectivecps

import scala.tools.nsc.transform._
import scala.tools.nsc.plugins._
import scala.tools.nsc.ast._

<span class="comment">/**
 * In methods marked @cps, CPS-transform assignments introduced by ANF-transform phase.
 */</span>
abstract class <a title="class SelectiveCPSTransform extends scala.tools.nsc.plugins.PluginComponent with scala.tools.nsc.transform.InfoTransform with scala.tools.nsc.transform.TypingTransformers with scala.tools.selectivecps.CPSUtils with scala.tools.nsc.ast.TreeDSL" id="scala.tools.selectivecps;SelectiveCPSTransform">SelectiveCPSTransform</a> extends <a href="../nsc/plugins/PluginComponent.scala.html#scala.tools.nsc.plugins;PluginComponent" title="scala.tools.nsc.plugins.PluginComponent">PluginComponent</a> with
  <a href="../nsc/transform/InfoTransform.scala.html#scala.tools.nsc.transform;InfoTransform" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> with <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> with <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils" title="scala.tools.selectivecps.CPSUtils">CPSUtils</a> with <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  <span class="comment">// inherits abstract value `global` and class `Phase` from Transform</span>

  import <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.global" title="=&gt; scala.tools.nsc.Global">global</a>._                  <span class="comment">// the global environment</span>
  import <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions.definitions" title="SelectiveCPSTransform.this.global.definitions.type">definitions</a>._             <span class="comment">// standard classes and methods</span>
  import <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.typer" title="SelectiveCPSTransform.this.global.typer.type">typer</a>.atOwner             <span class="comment">// methods to type trees</span>

  override def <a title="=&gt; String" id="scala.tools.selectivecps;SelectiveCPSTransform.description">description</a> = <span title="String(&quot;@cps-driven transform of selectiveanf assignments&quot;)" class="string">&quot;@cps-driven transform of selectiveanf assignments&quot;</span>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  val <a title="String" id="scala.tools.selectivecps;SelectiveCPSTransform.phaseName">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;selectivecps&quot;)" class="string">&quot;selectivecps&quot;</span>

  protected def <a title="(unit: SelectiveCPSTransform.this.global.CompilationUnit)SelectiveCPSTransform.this.global.Transformer" id="scala.tools.selectivecps;SelectiveCPSTransform.newTransformer">newTransformer</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.CompilationUnit" id="scala.tools.selectivecps;SelectiveCPSTransform.newTransformer.unit">unit</a>: <a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="SelectiveCPSTransform.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../nsc/ast/Trees.scala.html#scala.tools.nsc.ast;Trees;Transformer" title="SelectiveCPSTransform.this.global.Transformer">Transformer</a> =
    new <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer" title="SelectiveCPSTransform.this.CPSTransformer">CPSTransformer</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.newTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="comment">/** This class does not change linearization */</span>
  override def <a title="=&gt; Boolean" id="scala.tools.selectivecps;SelectiveCPSTransform.changesBaseClasses">changesBaseClasses</a> = false

  <span class="comment">/** - return symbol's transformed type,
   */</span>
  def <a title="(sym: SelectiveCPSTransform.this.global.Symbol, tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformInfo">transformInfo</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.sym">sym</a>: <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="SelectiveCPSTransform.this.global.Symbol">Symbol</a>, <a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.tp">tp</a>: <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="SelectiveCPSTransform.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="SelectiveCPSTransform.this.global.Type">Type</a> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsEnabled" title="=&gt; Boolean">cpsEnabled</a><span class="delimiter">)</span> return <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.tp" title="SelectiveCPSTransform.this.global.Type">tp</a>

    val <a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.newtp">newtp</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.tp" title="SelectiveCPSTransform.this.global.Type">tp</a><span class="delimiter">)</span>

    if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.newtp" title="SelectiveCPSTransform.this.global.Type">newtp</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.tp" title="SelectiveCPSTransform.this.global.Type">tp</a><span class="delimiter">)</span>
      <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;transformInfo changed type for &quot;)" class="string">&quot;transformInfo changed type for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.sym" title="SelectiveCPSTransform.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.newtp" title="SelectiveCPSTransform.this.global.Type">newtp</a><span class="delimiter">)</span>;

    if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.sym" title="SelectiveCPSTransform.this.global.Symbol">sym</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethReifyR" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethReifyR</a><span class="delimiter">)</span>
      <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;transformInfo (not)changed type for &quot;)" class="string">&quot;transformInfo (not)changed type for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.sym" title="SelectiveCPSTransform.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.newtp" title="SelectiveCPSTransform.this.global.Type">newtp</a><span class="delimiter">)</span>;

    <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformInfo.newtp" title="SelectiveCPSTransform.this.global.Type">newtp</a>
  <span class="delimiter">}</span>

  def <a title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType">transformCPSType</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.tp">tp</a>: <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="SelectiveCPSTransform.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type" title="SelectiveCPSTransform.this.global.Type">Type</a> = <span class="delimiter">{</span>  <span class="comment">// TODO: use a TypeMap? need to handle more cases?</span>
    <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.tp" title="SelectiveCPSTransform.this.global.Type">tp</a> match <span class="delimiter">{</span>
      case PolyType<span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Symbol]">params</span>,<span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span> =&gt; <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;PolyType" title="(typeParams: List[SelectiveCPSTransform.this.global.Symbol], resultType: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.PolyType">PolyType</a><span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Symbol]">params</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case NullaryMethodType<span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span> =&gt; <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;NullaryMethodType" title="(resultType: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.NullaryMethodType">NullaryMethodType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case MethodType<span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Symbol]">params</span>,<span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span> =&gt; <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;MethodType" title="(params: List[SelectiveCPSTransform.this.global.Symbol], resultType: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.MethodType">MethodType</a><span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Symbol]">params</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Type">res</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case TypeRef<span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.pre">pre</a>, <a title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.sym">sym</a>, <a title="List[SelectiveCPSTransform.this.global.Type]" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.args">args</a><span class="delimiter">)</span> =&gt; <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.TypeRef.apply(2232bf1c73)" title="(pre: SelectiveCPSTransform.this.global.Type, sym: SelectiveCPSTransform.this.global.Symbol, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.pre" title="SelectiveCPSTransform.this.global.Type">pre</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.sym" title="SelectiveCPSTransform.this.global.Symbol">sym</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.args" title="List[SelectiveCPSTransform.this.global.Type]">args</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Type =&gt; SelectiveCPSTransform.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Type],SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]])List[SelectiveCPSTransform.this.global.Type]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]]" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.$anonfun.x$1" title="SelectiveCPSTransform.this.global.Type">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case _ =&gt;
        <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.getExternalAnswerTypeAnn" title="(tp: SelectiveCPSTransform.this.global.Type)Option[(SelectiveCPSTransform.this.global.Type, SelectiveCPSTransform.this.global.Type)]">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.tp" title="SelectiveCPSTransform.this.global.Type">tp</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
          case Some<span class="delimiter">(</span><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Type">res</span>, <a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.outer">outer</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: SelectiveCPSTransform.this.global.Type, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.Context" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">Context</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TypeSymbol.tpeHK" title="=&gt; SelectiveCPSTransform.this.global.Type">tpeHK</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Type*)List[SelectiveCPSTransform.this.global.Type]">List</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.tp" title="SelectiveCPSTransform.this.global.Type">tp</a><span class="delimiter">)</span>, <span title="SelectiveCPSTransform.this.global.Type">res</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.outer" title="SelectiveCPSTransform.this.global.Type">outer</a><span class="delimiter">)</span><span class="delimiter">)</span>
          case _ =&gt;
            <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.removeAllCPSAnnotations" title="(tpe: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">removeAllCPSAnnotations</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType.tp" title="SelectiveCPSTransform.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  class <a title="class CPSTransformer extends SelectiveCPSTransform.this.TypingTransformer" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer">CPSTransformer</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer" title="SelectiveCPSTransform.this.CPSTransformer" class="delimiter">(</a><a title="SelectiveCPSTransform.this.global.CompilationUnit" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit">unit</a>: <a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit" title="SelectiveCPSTransform.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> extends <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer" title="SelectiveCPSTransform.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    private val <a title="SelectiveCPSTransform.this.global.patmat.global.Transformer" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.patmatTransformer">patmatTransformer</a> = <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.patmat" title="SelectiveCPSTransform.this.global.patmat.type">patmat</a>.<a href="../nsc/transform/patmat/PatternMatching.scala.html#scala.tools.nsc.transform.patmat;PatternMatching.newTransformer" title="(unit: SelectiveCPSTransform.this.global.patmat.global.CompilationUnit)SelectiveCPSTransform.this.global.patmat.global.Transformer">newTransformer</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

    override def <a title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform">transform</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsEnabled" title="=&gt; Boolean">cpsEnabled</a><span class="delimiter">)</span> return <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>
      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.postTransform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">postTransform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">mainTransform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.postTransform">postTransform</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.postTransform.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.postTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)tree.type">setType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.postTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>


    def <a title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform">mainTransform</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree">tree</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a> match <span class="delimiter">{</span>

        <span class="comment">// TODO: can we generalize this?</span>

        case Apply<span class="delimiter">(</span>TypeApply<span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span><span class="delimiter">)</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShift" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethShift</a><span class="delimiter">)</span> =&gt;
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;found shift: &quot;)" class="string">&quot;found shift: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: SelectiveCPSTransform.this.global.Position)(tree: SelectiveCPSTransform.this.global.Apply)SelectiveCPSTransform.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span> = <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.gen" title="SelectiveCPSTransform.this.global.gen.type">gen</a>.<a href="../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedRef(23ce0e46ac)" title="(sym: SelectiveCPSTransform.this.global.gen.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">mkAttributedRef</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShiftR" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethShiftR</a><span class="delimiter">)</span> <span class="comment">// TODO: correct?</span>
            <span class="comment">//gen.mkAttributedSelect(gen.mkAttributedSelect(gen.mkAttributedSelect(gen.mkAttributedIdent(ScalaPackage),</span>
            <span class="comment">//ScalaPackage.tpe.member(&quot;util&quot;)), ScalaPackage.tpe.member(&quot;util&quot;).tpe.member(&quot;continuations&quot;)), MethShiftR)</span>
            <span class="comment">//gen.mkAttributedRef(ModCPS.tpe,  MethShiftR) // TODO: correct?</span>
            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;funR.tpe: &quot;)" class="string">&quot;funR.tpe: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeApply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TypeApply">setType</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: SelectiveCPSTransform.this.global.Type, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Tree =&gt; SelectiveCPSTransform.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Tree],SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]])List[SelectiveCPSTransform.this.global.Type]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]]" class="delimiter">(</a><span class="delimiter">(</span>t:<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.$anonfun.t" title="SelectiveCPSTransform.this.global.Tree">t</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Tree =&gt; SelectiveCPSTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Tree],SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]])List[SelectiveCPSTransform.this.global.Tree]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]]" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.$anonfun.x$2" title="SelectiveCPSTransform.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Apply">setType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        case Apply<span class="delimiter">(</span>TypeApply<span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span><span class="delimiter">)</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShiftUnit" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethShiftUnit</a><span class="delimiter">)</span> =&gt;
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;found shiftUnit: &quot;)" class="string">&quot;found shiftUnit: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: SelectiveCPSTransform.this.global.Position)(tree: SelectiveCPSTransform.this.global.Apply)SelectiveCPSTransform.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span> = <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.gen" title="SelectiveCPSTransform.this.global.gen.type">gen</a>.<a href="../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedRef(23ce0e46ac)" title="(sym: SelectiveCPSTransform.this.global.gen.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">mkAttributedRef</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethShiftUnitR" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethShiftUnitR</a><span class="delimiter">)</span> <span class="comment">// TODO: correct?</span>
            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;funR.tpe: &quot;)" class="string">&quot;funR.tpe: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeApply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Tree*)List[SelectiveCPSTransform.this.global.Tree]">List</a><span class="delimiter">(</span><a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TypeApply">setType</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: SelectiveCPSTransform.this.global.Type, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a>,
                    <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Type*)List[SelectiveCPSTransform.this.global.Type]">List</a><span class="delimiter">(</span><a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>, <a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Tree =&gt; SelectiveCPSTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Tree],SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]])List[SelectiveCPSTransform.this.global.Tree]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]]" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.$anonfun.x$3" title="SelectiveCPSTransform.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Apply">setType</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: SelectiveCPSTransform.this.global.Type, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.Context" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">Context</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;TypeSymbol.tpeHK" title="=&gt; SelectiveCPSTransform.this.global.Type">tpeHK</a>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Type*)List[SelectiveCPSTransform.this.global.Type]">List</a><span class="delimiter">(</span><a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>,<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>,<a href="../../collection/LinearSeqOptimized.scala.html#scala.collection;LinearSeqOptimized.apply" title="(n: Int)SelectiveCPSTransform.this.global.Tree">targs</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        case Apply<span class="delimiter">(</span>TypeApply<span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span><span class="delimiter">)</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span><span class="delimiter">)</span>
        if <span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">fun</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethReify" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethReify</a><span class="delimiter">)</span> =&gt;
          <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.log" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;found reify: &quot;)" class="string">&quot;found reify: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="../../reflect/internal/Positions.scala.html#scala.reflect.internal;Positions.atPos" title="(pos: SelectiveCPSTransform.this.global.Position)(tree: SelectiveCPSTransform.this.global.Apply)SelectiveCPSTransform.this.global.Apply">atPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            val <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span> = <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.gen" title="SelectiveCPSTransform.this.global.gen.type">gen</a>.<a href="../../reflect/internal/TreeGen.scala.html#scala.reflect.internal;TreeGen.mkAttributedRef(23ce0e46ac)" title="(sym: SelectiveCPSTransform.this.global.gen.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">mkAttributedRef</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MethReifyR" title="=&gt; SelectiveCPSTransform.this.global.Symbol">MethReifyR</a><span class="delimiter">)</span> <span class="comment">// TODO: correct?</span>
            <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;funR.tpe: &quot;)" class="string">&quot;funR.tpe: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a><span class="delimiter">)</span>
            <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.Apply">Apply</a><span class="delimiter">(</span>
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TypeApply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TypeApply">setType</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(c7fb433f73)" title="(tycon: SelectiveCPSTransform.this.global.Type, args: List[SelectiveCPSTransform.this.global.Type])SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.gen.global.RefTree">funR</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.gen.global.Type">tpe</a>, <span title="List[SelectiveCPSTransform.this.global.Tree]">targs</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Tree =&gt; SelectiveCPSTransform.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Tree],SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]])List[SelectiveCPSTransform.this.global.Type]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Type,List[SelectiveCPSTransform.this.global.Type]]" class="delimiter">(</a><span class="delimiter">(</span>t:<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.$anonfun.t" title="SelectiveCPSTransform.this.global.Tree">t</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <span title="List[SelectiveCPSTransform.this.global.Tree]">args</span>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: SelectiveCPSTransform.this.global.Tree =&gt; SelectiveCPSTransform.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[SelectiveCPSTransform.this.global.Tree],SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]])List[SelectiveCPSTransform.this.global.Tree]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SelectiveCPSTransform.this.global.Tree,List[SelectiveCPSTransform.this.global.Tree]]" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.$anonfun.x$4" title="SelectiveCPSTransform.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.setType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Apply">setType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

      case Try<span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block">block</a>, <a title="List[SelectiveCPSTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches">catches</a>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.finalizer">finalizer</a><span class="delimiter">)</span> =&gt;
        <span class="comment">// currently duplicates the catch block into a partial function.</span>
        <span class="comment">// this is kinda risky, but we don't expect there will be lots</span>
        <span class="comment">// of try/catches inside catch blocks (exp. blowup unlikely).</span>

        <span class="comment">// CAVEAT: finalizers are surprisingly tricky!</span>
        <span class="comment">// the problem is that they cannot easily be removed</span>
        <span class="comment">// from the regular control path and hence will</span>
        <span class="comment">// also be invoked after creating the Context object.</span>

        <span class="comment">/*
        object Test {
          def foo1 = {
            throw new Exception(&quot;in sub&quot;)
            shift((k:Int=&gt;Int) =&gt; k(1))
            10
          }
          def foo2 = {
            shift((k:Int=&gt;Int) =&gt; k(2))
            20
          }
          def foo3 = {
            shift((k:Int=&gt;Int) =&gt; k(3))
            throw new Exception(&quot;in sub&quot;)
            30
          }
          def foo4 = {
            shift((k:Int=&gt;Int) =&gt; 4)
            throw new Exception(&quot;in sub&quot;)
            40
          }
          def bar(x: Int) = try {
            if (x == 1)
              foo1
            else if (x == 2)
              foo2
            else if (x == 3)
              foo3
            else //if (x == 4)
              foo4
          } catch {
            case _ =&gt;
              println(&quot;exception&quot;)
              0
          } finally {
            println(&quot;done&quot;)
          }
        }

        reset(Test.bar(1)) // should print: exception,done,0
        reset(Test.bar(2)) // should print: done,20 &lt;-- but prints: done,done,20
        reset(Test.bar(3)) // should print: exception,done,0 &lt;-- but prints: done,exception,done,0
        reset(Test.bar(4)) // should print: 4 &lt;-- but prints: done,4
        */</span>

        val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block1">block1</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block" title="SelectiveCPSTransform.this.global.Tree">block</a><span class="delimiter">)</span>
        val <a title="List[SelectiveCPSTransform.this.global.CaseDef]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches1">catches1</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transformCaseDefs" title="(trees: List[SelectiveCPSTransform.this.global.CaseDef])List[SelectiveCPSTransform.this.global.CaseDef]">transformCaseDefs</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches" title="List[SelectiveCPSTransform.this.global.CaseDef]">catches</a><span class="delimiter">)</span>
        val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.finalizer1">finalizer1</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.finalizer" title="SelectiveCPSTransform.this.global.Tree">finalizer</a><span class="delimiter">)</span>

        if <span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.hasAnswerTypeAnn" title="(tp: SelectiveCPSTransform.this.global.Type)Boolean">hasAnswerTypeAnn</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">//vprintln(&quot;CPS Transform: &quot; + tree + &quot;/&quot; + tree.tpe + &quot;/&quot; + block1.tpe)</span>

          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveCPSTransform.this.global.Tree]">stms</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.x$5.expr1">expr1</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block1" title="SelectiveCPSTransform.this.global.Tree">block1</a> match <span class="delimiter">{</span>
            case Block<span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Tree]">stms</span>, <span title="SelectiveCPSTransform.this.global.Tree">expr</span><span class="delimiter">)</span> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveCPSTransform.this.global.Tree], _2: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><span title="List[SelectiveCPSTransform.this.global.Tree]">stms</span>, <span title="SelectiveCPSTransform.this.global.Tree">expr</span><span class="delimiter">)</span>
            case <span title="SelectiveCPSTransform.this.global.Tree">expr</span> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveCPSTransform.this.global.Tree)(scala.collection.immutable.Nil.type, SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <span title="SelectiveCPSTransform.this.global.Tree">expr</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          val <a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.targettp">targettp</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform.transformCPSType" title="(tp: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.Type">transformCPSType</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

          val <a title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.pos">pos</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches" title="List[SelectiveCPSTransform.this.global.CaseDef]">catches</a>.<a href="../../collection/IterableLike.scala.html#scala.collection;IterableLike.head" title="=&gt; SelectiveCPSTransform.this.global.CaseDef">head</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a>
          val <a title="SelectiveCPSTransform.this.global.TermSymbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym">funSym</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym.qual$1">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValueParameter$default$3" title="Long" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym.x$13">newValueParameter</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.catches" title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym.x$11">catches</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.pos" title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym.x$12">pos</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types.appliedType(e35fed9e9d)" title="(tyconSym: SelectiveCPSTransform.this.global.Symbol, args: SelectiveCPSTransform.this.global.Type*)SelectiveCPSTransform.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.PartialFunctionClass" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">PartialFunctionClass</a>, <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ThrowableTpe" title="=&gt; SelectiveCPSTransform.this.global.Type">ThrowableTpe</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.targettp" title="SelectiveCPSTransform.this.global.Type">targettp</a><span class="delimiter">)</span><span class="delimiter">)</span>
          val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funDef">funDef</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.pos" title="SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: SelectiveCPSTransform.this.global.Symbol, rhs: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym" title="SelectiveCPSTransform.this.global.TermSymbol">funSym</a>, <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Match" title="(selector: SelectiveCPSTransform.this.global.Tree, cases: List[SelectiveCPSTransform.this.global.CaseDef])SelectiveCPSTransform.this.global.Match">Match</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="SelectiveCPSTransform.this.global.EmptyTree.type">EmptyTree</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches1" title="List[SelectiveCPSTransform.this.global.CaseDef]">catches1</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.expr2">expr2</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.pos" title="SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: SelectiveCPSTransform.this.global.Tree, sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Select">Select</a><span class="delimiter">(</span><span title="SelectiveCPSTransform.this.global.Tree">expr1</span>, <span title="SelectiveCPSTransform.this.global.Tree">expr1</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: SelectiveCPSTransform.this.global.Name)SelectiveCPSTransform.this.global.Symbol">member</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.flatMapCatch" title="=&gt; SelectiveCPSTransform.this.global.TermName">flatMapCatch</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Ident*)List[SelectiveCPSTransform.this.global.Ident]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym" title="SelectiveCPSTransform.this.global.TermSymbol">funSym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          val <a title="SelectiveCPSTransform.this.global.TermSymbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym">exSym</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym.qual$2">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValueParameter$default$3" title="Long" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym.x$16">newValueParameter</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.ex" title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym.x$14">ex</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.pos" title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym.x$15">pos</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ThrowableTpe" title="=&gt; SelectiveCPSTransform.this.global.Type">ThrowableTpe</a><span class="delimiter">)</span>

          import <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE" title="SelectiveCPSTransform.this.CODE.type">CODE</a>._
          <span class="comment">// generate a case that is supported directly by the back-end</span>
          val <a title="SelectiveCPSTransform.this.global.CaseDef" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catchIfDefined">catchIfDefined</a> = <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;CaseDef" title="(pat: SelectiveCPSTransform.this.global.Tree, guard: SelectiveCPSTransform.this.global.Tree, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.CaseDef">CaseDef</a><span class="delimiter">(</span>
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Bind(deb2955bab)" title="(sym: SelectiveCPSTransform.this.global.Symbol, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym" title="SelectiveCPSTransform.this.global.TermSymbol">exSym</a>, <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Ident" title="(name: SelectiveCPSTransform.this.global.Name)SelectiveCPSTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="SelectiveCPSTransform.this.global.nme.type">nme</a>.<a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;CommonNames.WILDCARD" title="=&gt; SelectiveCPSTransform.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.EmptyTree" title="SelectiveCPSTransform.this.global.EmptyTree.type">EmptyTree</a>,
                <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.IF" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.CODE.IfStart">IF</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.REF(aa0d4af395)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">REF</a><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.mkTreeMethods" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.CODE.TreeMethods" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym" title="SelectiveCPSTransform.this.global.TermSymbol">funSym</a><span class="delimiter">)</span> <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE;SelectStart.apply" title="(args: SelectiveCPSTransform.this.global.Tree*)SelectiveCPSTransform.this.global.Apply">DOT</a> <a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="SelectiveCPSTransform.this.global.nme.type">nme</a>.<a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.isDefinedAt" title="=&gt; SelectiveCPSTransform.this.global.nme.NameType">isDefinedAt</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.REF(aa0d4af395)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">REF</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym" title="SelectiveCPSTransform.this.global.TermSymbol">exSym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE;IfStart.THEN" title="(x: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.CODE.IfStart">THEN</a> <span class="delimiter">(</span><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.REF(aa0d4af395)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">REF</a><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.mkTreeMethods" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.CODE.TreeMethods" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funSym" title="SelectiveCPSTransform.this.global.TermSymbol">funSym</a><span class="delimiter">)</span> <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE;TreeMethods.APPLY(b3c78b063d)" title="(params: SelectiveCPSTransform.this.global.Tree*)SelectiveCPSTransform.this.global.Apply">APPLY</a> <span class="delimiter">(</span><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.REF(aa0d4af395)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">REF</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym" title="SelectiveCPSTransform.this.global.TermSymbol">exSym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE;IfStart.ELSE" title="(elsep: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.If">ELSE</a> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Throw" title="(expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Throw">Throw</a><span class="delimiter">(</span><a href="../nsc/ast/TreeDSL.scala.html#scala.tools.nsc.ast;TreeDSL.CODE.REF(aa0d4af395)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.gen.global.RefTree">REF</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.exSym" title="SelectiveCPSTransform.this.global.TermSymbol">exSym</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>

          val <a title="List[SelectiveCPSTransform.this.global.analyzer.global.CaseDef]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catch2">catch2</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedCases" title="(cases: List[SelectiveCPSTransform.this.global.analyzer.global.CaseDef], pattp: SelectiveCPSTransform.this.global.analyzer.global.Type, pt: SelectiveCPSTransform.this.global.analyzer.global.Type)List[SelectiveCPSTransform.this.global.analyzer.global.CaseDef]">typedCases</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.CaseDef*)List[SelectiveCPSTransform.this.global.CaseDef]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catchIfDefined" title="SelectiveCPSTransform.this.global.CaseDef">catchIfDefined</a><span class="delimiter">)</span>, <a href="../../reflect/internal/Definitions.scala.html#scala.reflect.internal;Definitions;DefinitionsClass.ThrowableTpe" title="=&gt; SelectiveCPSTransform.this.global.Type">ThrowableTpe</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.targettp" title="SelectiveCPSTransform.this.global.Type">targettp</a><span class="delimiter">)</span>
          <span class="comment">//typedCases(tree, catches, ThrowableTpe, pt)</span>

          <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.patmatTransformer" title="=&gt; SelectiveCPSTransform.this.global.patmat.global.Transformer">patmatTransformer</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.transform" title="(tree: SelectiveCPSTransform.this.global.patmat.global.Tree)SelectiveCPSTransform.this.global.patmat.global.Tree">transform</a><span class="delimiter">(</span><a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="(stats: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.analyzer.global.Tree*)List[SelectiveCPSTransform.this.global.analyzer.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.funDef" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">funDef</a><span class="delimiter">)</span>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveCPSTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: SelectiveCPSTransform.this.global.Tree, block: SelectiveCPSTransform.this.global.Tree, catches: List[SelectiveCPSTransform.this.global.CaseDef], finalizer: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>, <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveCPSTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveCPSTransform.this.global.Tree, stats: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block1" title="SelectiveCPSTransform.this.global.Tree">block1</a>, <span title="List[SelectiveCPSTransform.this.global.Tree]">stms</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.expr2" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">expr2</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catch2" title="List[SelectiveCPSTransform.this.global.analyzer.global.CaseDef]">catch2</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.finalizer1" title="SelectiveCPSTransform.this.global.Tree">finalizer1</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>


<span class="comment">/*
          disabled for now - see notes above

          val expr3 = if (!finalizer.isEmpty) {
            val pos = finalizer.pos
            val finalizer2 = duplicateTree(finalizer1)
            val fun = Function(List(), finalizer2)
            val expr3 = localTyper.typedPos(pos) { Apply(Select(expr2, expr2.tpe.member(&quot;mapFinally&quot;)), List(fun)) }

            val chown = new ChangeOwnerTraverser(currentOwner, fun.symbol)
            chown.traverse(finalizer2)

            expr3
          } else
            expr2
*/</span>
        <span class="delimiter">}</span> else <span class="delimiter">{</span>
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveCPSTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Try" title="(tree: SelectiveCPSTransform.this.global.Tree, block: SelectiveCPSTransform.this.global.Tree, catches: List[SelectiveCPSTransform.this.global.CaseDef], finalizer: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Try">Try</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.block1" title="SelectiveCPSTransform.this.global.Tree">block1</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.catches1" title="List[SelectiveCPSTransform.this.global.CaseDef]">catches1</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.finalizer1" title="SelectiveCPSTransform.this.global.Tree">finalizer1</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      case Block<span class="delimiter">(</span><span title="List[SelectiveCPSTransform.this.global.Tree]">stms</span>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.expr">expr</a><span class="delimiter">)</span> =&gt;

          val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.stms1">stms1</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.x$6.expr1">expr1</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)">transBlock</a><a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree) @unchecked" class="delimiter">(</a><span title="List[SelectiveCPSTransform.this.global.Tree]">stms</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
          <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.treeCopy" title="=&gt; SelectiveCPSTransform.this.global.TreeCopier">treeCopy</a>.<a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;TreeCopierOps.Block" title="(tree: SelectiveCPSTransform.this.global.Tree, stats: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.stms1" title="List[SelectiveCPSTransform.this.global.Tree]">stms1</a>, <span title="SelectiveCPSTransform.this.global.Tree">expr1</span><span class="delimiter">)</span>

        case _ =&gt;
          super.<a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.mainTransform.tree" title="SelectiveCPSTransform.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>



    def <a title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock">transBlock</a><span class="delimiter">(</span><a title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stms">stms</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveCPSTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.expr">expr</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span>, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>

      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stms" title="List[SelectiveCPSTransform.this.global.Tree]">stms</a> match <span class="delimiter">{</span>
        case <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a> =&gt;
          <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveCPSTransform.this.global.Tree)(scala.collection.immutable.Nil.type, SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stm">stm</a>::<a title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rest">rest</a> =&gt;

          <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stm" title="SelectiveCPSTransform.this.global.Tree">stm</a> match <span class="delimiter">{</span>
            case <a title="SelectiveCPSTransform.this.global.ValDef" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd">vd</a> @ ValDef<span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Modifiers" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mods">mods</a>, <a title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.name">name</a>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.tpt">tpt</a>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs">rhs</a><span class="delimiter">)</span>
            if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/AnnotationInfos.scala.html#scala.reflect.internal;AnnotationInfos;Annotatable.hasAnnotation" title="(cls: SelectiveCPSTransform.this.global.Symbol)Boolean">hasAnnotation</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.MarkerCPSSym" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">MarkerCPSSym</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;

              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;found marked ValDef &quot;)" class="string">&quot;found marked ValDef &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.name" title="SelectiveCPSTransform.this.global.TermName">name</a><span title="(x$1: Any)String">+</span><span title="String(&quot; of type &quot;)" class="string">&quot; of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

              val <a title="SelectiveCPSTransform.this.global.Type" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.tpe">tpe</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>
              val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1">rhs1</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.atOwner(c4f4c4069a)" title="(owner: SelectiveCPSTransform.this.global.Symbol)(trans: =&gt; SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">atOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs" title="SelectiveCPSTransform.this.global.Tree">rhs</a><span class="delimiter">)</span> <span class="delimiter">}</span>
              <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.changeOwner" title="(pairs: (SelectiveCPSTransform.this.global.Symbol, SelectiveCPSTransform.this.global.Symbol)*)SelectiveCPSTransform.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: SelectiveCPSTransform.this.global.Symbol)ArrowAssoc[SelectiveCPSTransform.this.global.Symbol]">symbol</a> <a href="../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: SelectiveCPSTransform.this.global.Symbol)(SelectiveCPSTransform.this.global.Symbol, SelectiveCPSTransform.this.global.Symbol)">-&gt;</a> <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="=&gt; SelectiveCPSTransform.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <span class="comment">// TODO: don't traverse twice</span>

              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;valdef symbol &quot;)" class="string">&quot;valdef symbol &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; has type &quot;)" class="string">&quot; has type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.tpe" title="SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;right hand side &quot;)" class="string">&quot;right hand side &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; has type &quot;)" class="string">&quot; has type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;currentOwner: &quot;)" class="string">&quot;currentOwner: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="=&gt; SelectiveCPSTransform.this.global.Symbol">currentOwner</a><span class="delimiter">)</span>
              <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;currentMethod: &quot;)" class="string">&quot;currentMethod: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentMethod" title="=&gt; SelectiveCPSTransform.this.global.Symbol">currentMethod</a><span class="delimiter">)</span>

              val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyStms">bodyStms</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr">bodyExpr</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)">transBlock</a><a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rest" title="List[SelectiveCPSTransform.this.global.Tree]">rest</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
              <span class="comment">// FIXME: result will later be traversed again by TreeSymSubstituter and</span>
              <span class="comment">// ChangeOwnerTraverser =&gt; exp. running time.</span>
              <span class="comment">// Should be changed to fuse traversals into one.</span>

              val <a title="Boolean" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.specialCaseTrivial">specialCaseTrivial</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a> match <span class="delimiter">{</span>
                case Apply<span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.specialCaseTrivial.fun">fun</a>, <a title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.specialCaseTrivial.args">args</a><span class="delimiter">)</span> =&gt;
                  <span class="comment">// for now, look for explicit tail calls only.</span>
                  <span class="comment">// are there other cases that could profit from specializing on</span>
                  <span class="comment">// trivial contexts as well?</span>
                  <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.Context" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">Context</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.&&" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentMethod" title="=&gt; SelectiveCPSTransform.this.global.Symbol">currentMethod</a> <span title="(x$1: Any)Boolean">==</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.specialCaseTrivial.fun" title="SelectiveCPSTransform.this.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>
                case _ =&gt; false
              <span class="delimiter">}</span>

              def <a title="(ctxValSym: SelectiveCPSTransform.this.global.Symbol, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial">applyTrivial</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.ctxValSym">ctxValSym</a>: <a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol" title="SelectiveCPSTransform.this.global.Symbol">Symbol</a>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body">body</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>

                val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body1">body1</a> = <span class="delimiter">(</span>new <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeSymSubstituter" title="SelectiveCPSTransform.this.global.TreeSymSubstituter">TreeSymSubstituter</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Symbol*)List[SelectiveCPSTransform.this.global.Symbol]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Symbol*)List[SelectiveCPSTransform.this.global.Symbol]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.ctxValSym" title="SelectiveCPSTransform.this.global.Symbol">ctxValSym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body" title="SelectiveCPSTransform.this.global.Tree">body</a><span class="delimiter">)</span>

                val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body2">body2</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a> <span class="delimiter">}</span>

                <span class="comment">// in theory it would be nicer to look for an @cps annotation instead</span>
                <span class="comment">// of testing for Context</span>
                if <span class="delimiter">(</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body2" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">body2</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Type">tpe</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="../../Boolean.scala.html#scala;Boolean.||" title="(x: Boolean)Boolean">||</a> <a href="../../Boolean.scala.html#scala;Boolean.unary_!" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body2" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">body2</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">typeSymbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.Context" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">Context</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <span class="comment">//println(body2 + &quot;/&quot; + body2.tpe)</span>
                  <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveCPSTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs" title="SelectiveCPSTransform.this.global.Tree">rhs</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a>, <span title="String(&quot;cannot compute type for CPS-transformed function result&quot;)" class="string">&quot;cannot compute type for CPS-transformed function result&quot;</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial.body2" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">body2</a>
              <span class="delimiter">}</span>

              def <a title="(ctxR: SelectiveCPSTransform.this.global.Tree, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun">applyCombinatorFun</a><span class="delimiter">(</span><a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.ctxR">ctxR</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body">body</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
                val <a title="SelectiveCPSTransform.this.global.TermSymbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg">arg</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg.qual$3">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValueParameter$default$3" title="Long" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg.x$19">newValueParameter</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.name" title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg.x$17">name</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.ctxR" title="SelectiveCPSTransform.this.global.Tree">ctxR</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg.x$18">pos</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.tpe" title="SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
                val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1">body1</a> = <span class="delimiter">(</span>new <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeSymSubstituter" title="SelectiveCPSTransform.this.global.TreeSymSubstituter">TreeSymSubstituter</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.Symbol*)List[SelectiveCPSTransform.this.global.Symbol]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.TermSymbol*)List[SelectiveCPSTransform.this.global.TermSymbol]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg" title="SelectiveCPSTransform.this.global.TermSymbol">arg</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body" title="SelectiveCPSTransform.this.global.Tree">body</a><span class="delimiter">)</span>
                val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun">fun</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Function" title="(vparams: List[SelectiveCPSTransform.this.global.ValDef], body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Function">Function</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.ValDef*)List[SelectiveCPSTransform.this.global.ValDef]">List</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(88055a62f0)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg" title="SelectiveCPSTransform.this.global.TermSymbol">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span class="comment">// types body as well</span>
                <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg" title="SelectiveCPSTransform.this.global.TermSymbol">arg</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner_=" title="(owner: SelectiveCPSTransform.this.global.Symbol)Unit">owner</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">symbol</a>
                <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;TreeContextApiImpl.changeOwner" title="(pairs: (SelectiveCPSTransform.this.global.Symbol, SelectiveCPSTransform.this.global.Symbol)*)SelectiveCPSTransform.this.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="../../Predef.scala.html#scala.Predef.ArrowAssoc(fefc64a42a)" title="(self: SelectiveCPSTransform.this.global.Symbol)ArrowAssoc[SelectiveCPSTransform.this.global.Symbol]">currentOwner</a> <a href="../../Predef.scala.html#scala.Predef;ArrowAssoc.->" title="(y: SelectiveCPSTransform.this.global.analyzer.global.Symbol)(SelectiveCPSTransform.this.global.Symbol, SelectiveCPSTransform.this.global.analyzer.global.Symbol)">-&gt;</a> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">symbol</a><span class="delimiter">)</span>

                <span class="comment">// see note about multiple traversals above</span>

                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fun.symbol: &quot;)" class="string">&quot;fun.symbol: &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">symbol</a><span class="delimiter">)</span>
                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fun.symbol.owner: &quot;)" class="string">&quot;fun.symbol.owner: &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.symbol" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">symbol</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Symbol">owner</a><span class="delimiter">)</span>
                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;arg.owner: &quot;)" class="string">&quot;arg.owner: &quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.arg" title="SelectiveCPSTransform.this.global.TermSymbol">arg</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.owner" title="=&gt; SelectiveCPSTransform.this.global.Symbol">owner</a><span class="delimiter">)</span>

                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fun.tpe:&quot;)" class="string">&quot;fun.tpe:&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Type">tpe</a><span class="delimiter">)</span>
                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;return type of fun:&quot;)" class="string">&quot;return type of fun:&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>

                var <a title="SelectiveCPSTransform.this.global.nme.NameType" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.methodName">methodName</a> = <a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="SelectiveCPSTransform.this.global.nme.type">nme</a>.<a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.map" title="=&gt; SelectiveCPSTransform.this.global.nme.NameType">map</a>

                if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
                  if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.body1" title="SelectiveCPSTransform.this.global.Tree">body1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.typeSymbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)Boolean">==</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.Context" title="=&gt; SelectiveCPSTransform.this.global.ClassSymbol">Context</a><span class="delimiter">)</span>
                    <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.methodName" title="SelectiveCPSTransform.this.global.nme.NameType">methodName</a> = <a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames.nme" title="SelectiveCPSTransform.this.global.nme.type">nme</a>.<a href="../../reflect/internal/StdNames.scala.html#scala.reflect.internal;StdNames;TermNames.flatMap" title="=&gt; SelectiveCPSTransform.this.global.nme.NameType">flatMap</a>
                <span class="delimiter">}</span>
                else
                  <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveCPSTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs" title="SelectiveCPSTransform.this.global.Tree">rhs</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a>, <span title="String(&quot;cannot compute type for CPS-transformed function result&quot;)" class="string">&quot;cannot compute type for CPS-transformed function result&quot;</span><span class="delimiter">)</span>

                <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;will use method:&quot;)" class="string">&quot;will use method:&quot;</span><span title="(x$1: Any)String">+</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.methodName" title="SelectiveCPSTransform.this.global.nme.NameType">methodName</a><span class="delimiter">)</span>

                <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Apply" title="(fun: SelectiveCPSTransform.this.global.Tree, args: List[SelectiveCPSTransform.this.global.Tree])SelectiveCPSTransform.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: SelectiveCPSTransform.this.global.Tree, sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.ctxR" title="SelectiveCPSTransform.this.global.Tree">ctxR</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.ctxR" title="SelectiveCPSTransform.this.global.Tree">ctxR</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: SelectiveCPSTransform.this.global.Name)SelectiveCPSTransform.this.global.Symbol">member</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.methodName" title="SelectiveCPSTransform.this.global.nme.NameType">methodName</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.analyzer.global.Tree*)List[SelectiveCPSTransform.this.global.analyzer.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun.fun" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">fun</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>

              <span class="comment">// TODO use gen.mkBlock after 2.11.0-M6. Why wait? It allows us to still build in development</span>
              <span class="comment">// mode with `ant -DskipLocker=1`</span>
              def <a title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock">mkBlock</a><span class="delimiter">(</span><a title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.stms">stms</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[SelectiveCPSTransform.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.expr">expr</a>: <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree" title="SelectiveCPSTransform.this.global.Tree">Tree</a><span class="delimiter">)</span> = if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.stms" title="List[SelectiveCPSTransform.this.global.Tree]">stms</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.nonEmpty" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Block" title="(stats: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Block">Block</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.stms" title="List[SelectiveCPSTransform.this.global.Tree]">stms</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a><span class="delimiter">)</span> else <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a>

              try <span class="delimiter">{</span>
                if <span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.specialCaseTrivial" title="Boolean">specialCaseTrivial</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="../nsc/Global.scala.html#scala.tools.nsc;Global.debuglog" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;will optimize possible tail call: &quot;)" class="string">&quot;will optimize possible tail call: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a><span class="delimiter">)</span>

                  <span class="comment">// FIXME: flatMap impl has become more complicated due to</span>
                  <span class="comment">// exceptions. do we need to put a try/catch in the then part??</span>

                  <span class="comment">// val ctx = &lt;rhs&gt;</span>
                  <span class="comment">// if (ctx.isTrivial)</span>
                  <span class="comment">//   val &lt;lhs&gt; = ctx.getTrivialValue; ...    &lt;--- TODO: try/catch ??? don't bother for the moment...</span>
                  <span class="comment">// else</span>
                  <span class="comment">//   ctx.flatMap { &lt;lhs&gt; =&gt; ... }</span>
                  val <a title="SelectiveCPSTransform.this.global.TermSymbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym">ctxSym</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym.qual$4">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValue$default$2" title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym.x$22">newValue</a><span class="delimiter">(</span><a href="../../reflect/internal/Names.scala.html#scala.reflect.internal;Names.newTermName(16764ff47f)" title="(s: String)SelectiveCPSTransform.this.global.TermName">newTermName</a><a title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym.x$20" class="delimiter">(</a><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; SelectiveCPSTransform.this.global.Symbol#NameType">name</a> <span title="(x$1: Any)String">+</span> <a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.shiftSuffix" title="=&gt; SelectiveCPSTransform.this.global.TermName">shiftSuffix</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
                  val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxDef">ctxDef</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: SelectiveCPSTransform.this.global.Symbol, rhs: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym" title="SelectiveCPSTransform.this.global.TermSymbol">ctxSym</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  def <a title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxRef">ctxRef</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Ident(e8c336bf3b)" title="(sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym" title="SelectiveCPSTransform.this.global.TermSymbol">ctxSym</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  val <a title="SelectiveCPSTransform.this.global.TermSymbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym">argSym</a> = <a href="../../reflect/api/Trees.scala.html#scala.reflect.api;Trees;Transformer.currentOwner" title="SelectiveCPSTransform.this.global.Symbol" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym.qual$5">currentOwner</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.newValue$default$2" title="SelectiveCPSTransform.this.global.Position" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym.x$25">newValue</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.name" title="=&gt; SelectiveCPSTransform.this.global.Symbol#NameType">name</a>.<a href="../../reflect/internal/Names.scala.html#scala.reflect.internal;Names;Name.toTermName" title="SelectiveCPSTransform.this.global.TermName" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym.x$23">toTermName</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.setInfo" title="(info: SelectiveCPSTransform.this.global.Type)SelectiveCPSTransform.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.tpe" title="SelectiveCPSTransform.this.global.Type">tpe</a><span class="delimiter">)</span>
                  val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argDef">argDef</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typed(60ebfc8632)" title="(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.ValDef.apply(9493665b33)" title="(sym: SelectiveCPSTransform.this.global.Symbol, rhs: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym" title="SelectiveCPSTransform.this.global.TermSymbol">argSym</a>, <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: SelectiveCPSTransform.this.global.Tree, sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxRef" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Tree">ctxRef</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxRef" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Tree">ctxRef</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.tpe" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: SelectiveCPSTransform.this.global.analyzer.global.Name)SelectiveCPSTransform.this.global.analyzer.global.Symbol">member</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.getTrivialValue" title="=&gt; SelectiveCPSTransform.this.global.TermName">getTrivialValue</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                  val <a title="SelectiveCPSTransform.this.global.analyzer.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.switchExpr">switchExpr</a> = <a href="../nsc/transform/TypingTransformers.scala.html#scala.tools.nsc.transform;TypingTransformers;TypingTransformer.localTyper" title="=&gt; SelectiveCPSTransform.this.global.analyzer.Typer">localTyper</a>.<a href="../nsc/typechecker/Typers.scala.html#scala.tools.nsc.typechecker;Typers;Typer.typedPos(b526320510)" title="(pos: SelectiveCPSTransform.this.global.analyzer.global.Position)(tree: SelectiveCPSTransform.this.global.analyzer.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.vd" title="SelectiveCPSTransform.this.global.ValDef">vd</a>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;SymTree.symbol" title="=&gt; SelectiveCPSTransform.this.global.Symbol">symbol</a>.<a href="../../reflect/internal/StdAttachments.scala.html#scala.reflect.internal;StdAttachments;Attachable.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                    val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.switchExpr.body2">body2</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">mkBlock</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyStms" title="List[SelectiveCPSTransform.this.global.Tree]">bodyStms</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a><span class="delimiter">)</span>.<a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;Tree.duplicate" title="=&gt; SelectiveCPSTransform.this.global.Tree">duplicate</a> <span class="comment">// dup before typing!</span>
                    <a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees;If" title="(cond: SelectiveCPSTransform.this.global.Tree, thenp: SelectiveCPSTransform.this.global.Tree, elsep: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.If">If</a><span class="delimiter">(</span><a href="../../reflect/internal/Trees.scala.html#scala.reflect.internal;Trees.Select(dd97d6dc80)" title="(qualifier: SelectiveCPSTransform.this.global.Tree, sym: SelectiveCPSTransform.this.global.Symbol)SelectiveCPSTransform.this.global.Select">Select</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxRef" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Tree">ctxRef</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxSym" title="SelectiveCPSTransform.this.global.TermSymbol">ctxSym</a>.<a href="../../reflect/internal/Symbols.scala.html#scala.reflect.internal;Symbols;Symbol.tpe" title="=&gt; SelectiveCPSTransform.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;Type.member" title="(name: SelectiveCPSTransform.this.global.Name)SelectiveCPSTransform.this.global.Symbol">member</a><span class="delimiter">(</span><a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames" title="SelectiveCPSTransform.this.cpsNames.type">cpsNames</a>.<a href="CPSUtils.scala.html#scala.tools.selectivecps;CPSUtils.cpsNames.isTrivial" title="=&gt; SelectiveCPSTransform.this.global.TermName">isTrivial</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyTrivial" title="(ctxValSym: SelectiveCPSTransform.this.global.Symbol, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">applyTrivial</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argSym" title="SelectiveCPSTransform.this.global.TermSymbol">argSym</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">mkBlock</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.argDef" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">argDef</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: SelectiveCPSTransform.this.global.Tree)List[SelectiveCPSTransform.this.global.Tree]">::</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyStms" title="List[SelectiveCPSTransform.this.global.Tree]">bodyStms</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a><span class="delimiter">)</span><span class="delimiter">)</span>,
                      <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun" title="(ctxR: SelectiveCPSTransform.this.global.Tree, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">applyCombinatorFun</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxRef" title="=&gt; SelectiveCPSTransform.this.global.analyzer.global.Tree">ctxRef</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.switchExpr.body2" title="SelectiveCPSTransform.this.global.Tree">body2</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                  <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveCPSTransform.this.global.analyzer.global.Tree], _2: SelectiveCPSTransform.this.global.analyzer.global.Tree)(List[SelectiveCPSTransform.this.global.analyzer.global.Tree], SelectiveCPSTransform.this.global.analyzer.global.Tree)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.apply" title="(xs: SelectiveCPSTransform.this.global.analyzer.global.Tree*)List[SelectiveCPSTransform.this.global.analyzer.global.Tree]">List</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ctxDef" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">ctxDef</a><span class="delimiter">)</span>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.switchExpr" title="SelectiveCPSTransform.this.global.analyzer.global.Tree">switchExpr</a><span class="delimiter">)</span>
                <span class="delimiter">}</span> else <span class="delimiter">{</span>
                  <span class="comment">// ctx.flatMap { &lt;lhs&gt; =&gt; ... }</span>
                  <span class="comment">//     or</span>
                  <span class="comment">// ctx.map { &lt;lhs&gt; =&gt; ... }</span>
                  <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: scala.collection.immutable.Nil.type, _2: SelectiveCPSTransform.this.global.analyzer.global.Tree)(scala.collection.immutable.Nil.type, SelectiveCPSTransform.this.global.analyzer.global.Tree)" class="delimiter">(</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.applyCombinatorFun" title="(ctxR: SelectiveCPSTransform.this.global.Tree, body: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.analyzer.global.Tree">applyCombinatorFun</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rhs1" title="SelectiveCPSTransform.this.global.Tree">rhs1</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.mkBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">mkBlock</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyStms" title="List[SelectiveCPSTransform.this.global.Tree]">bodyStms</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span> catch <span class="delimiter">{</span>
                case <a title="SelectiveCPSTransform.this.global.TypeError" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ex">ex</a>:<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError" title="SelectiveCPSTransform.this.global.TypeError">TypeError</a> =&gt;
                  <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.unit" title="SelectiveCPSTransform.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#scala.tools.nsc;CompilationUnits;CompilationUnit.error" title="(pos: SelectiveCPSTransform.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ex" title="SelectiveCPSTransform.this.global.TypeError">ex</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError.pos" title="=&gt; SelectiveCPSTransform.this.global.Position">pos</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.ex" title="SelectiveCPSTransform.this.global.TypeError">ex</a>.<a href="../../reflect/internal/Types.scala.html#scala.reflect.internal;Types;TypeError.msg" title="=&gt; String">msg</a><span class="delimiter">)</span>
                  <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveCPSTransform.this.global.Tree], _2: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyStms" title="List[SelectiveCPSTransform.this.global.Tree]">bodyStms</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.bodyExpr" title="SelectiveCPSTransform.this.global.Tree">bodyExpr</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>

            case _ =&gt;
                val <a title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stm1">stm1</a> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transform" title="(tree: SelectiveCPSTransform.this.global.Tree)SelectiveCPSTransform.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stm" title="SelectiveCPSTransform.this.global.Tree">stm</a><span class="delimiter">)</span>
                val <a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="../../Tuple2.scala.html#scala;Tuple2._1" title="List[SelectiveCPSTransform.this.global.Tree]" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.a">a</a>, <a href="../../Tuple2.scala.html#scala;Tuple2._2" title="SelectiveCPSTransform.this.global.Tree" id="scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.b">b</a><span class="delimiter">)</span> = <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock" title="(stms: List[SelectiveCPSTransform.this.global.Tree], expr: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)">transBlock</a><a href="../../Tuple2.scala.html#scala;Tuple2" title="(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.rest" title="List[SelectiveCPSTransform.this.global.Tree]">rest</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.expr" title="SelectiveCPSTransform.this.global.Tree">expr</a><span class="delimiter">)</span>
                <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: List[SelectiveCPSTransform.this.global.Tree], _2: SelectiveCPSTransform.this.global.Tree)(List[SelectiveCPSTransform.this.global.Tree], SelectiveCPSTransform.this.global.Tree)" class="delimiter">(</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.stm1" title="SelectiveCPSTransform.this.global.Tree">stm1</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.::" title="(x: SelectiveCPSTransform.this.global.Tree)List[SelectiveCPSTransform.this.global.Tree]">::</a><a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.a" title="List[SelectiveCPSTransform.this.global.Tree]">a</a>, <a href="#scala.tools.selectivecps;SelectiveCPSTransform;CPSTransformer.transBlock.b" title="SelectiveCPSTransform.this.global.Tree">b</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>


  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
