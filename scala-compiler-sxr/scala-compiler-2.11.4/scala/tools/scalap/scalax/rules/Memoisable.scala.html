<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/scalap/scalax/rules/Memoisable.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">// -----------------------------------------------------------------------------</span>
<span class="comment">//</span>
<span class="comment">//  Scalax - The Scala Community Library</span>
<span class="comment">//  Copyright (c) 2005-8 The Scalax Project. All rights reserved.</span>
<span class="comment">//</span>
<span class="comment">//  The primary distribution site is http://scalax.scalaforge.org/</span>
<span class="comment">//</span>
<span class="comment">//  This software is released under the terms of the Revised BSD License.</span>
<span class="comment">//  There is NO WARRANTY.  See the file LICENSE for the full text.</span>
<span class="comment">//</span>
<span class="comment">// -----------------------------------------------------------------------------</span>

package scala.tools.scalap
package scalax
package rules

import scala.collection.mutable

trait <a title="trait MemoisableRules extends AnyRef with scala.tools.scalap.scalax.rules.Rules" id="scala.tools.scalap.scalax.rules;MemoisableRules">MemoisableRules</a> extends <a href="Rules.scala.html#scala.tools.scalap.scalax.rules;Rules" title="scala.tools.scalap.scalax.rules.Rules">Rules</a> <span class="delimiter">{</span>
  def <a title="[In &lt;: scala.tools.scalap.scalax.rules.Memoisable, Out, A, X](key: AnyRef)(toRule: =&gt; In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo">memo</a><span class="delimiter">[</span><a title=" &lt;: scala.tools.scalap.scalax.rules.Memoisable" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo;In">In</a> &lt;: Memoisable, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo;Out">Out</a>, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo;A">A</a>, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo;X">X</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="AnyRef" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo.key">key</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo.toRule">toRule</a>: =&gt; In =&gt; Result<span class="delimiter">[</span>Out, A, X<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    lazy val <a title="In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo.rule">rule</a> = <a href="#scala.tools.scalap.scalax.rules;MemoisableRules.memo.toRule" title="=&gt; In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]">toRule</a>
    <a href="Rules.scala.html#scala.tools.scalap.scalax.rules;Rules.from" title="[In]=&gt; MemoisableRules.this.FromRule[In]">from</a><a href="Rules.scala.html#scala.tools.scalap.scalax.rules;Rules;FromRule.apply" title="(f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]" class="delimiter">[</a><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.memo;In" title="In">In</a><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="In" id="scala.tools.scalap.scalax.rules;MemoisableRules.memo.$anonfun.in">in</a> =&gt; <a href="#scala.tools.scalap.scalax.rules;MemoisableRules.memo.$anonfun.in" title="In">in</a>.<a href="#scala.tools.scalap.scalax.rules;Memoisable.memo" title="(key: AnyRef, a: =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Result[Out,A,X]">memo</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.memo.key" title="AnyRef">key</a>, <a href="../../../../Function1.scala.html#scala;Function1.apply" title="(v1: In)scala.tools.scalap.scalax.rules.Result[Out,A,X]">rule</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.memo.$anonfun.in" title="In">in</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  override def <a title="[In, Out, A, X](name: String, f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Rule[In,Out,A,X] with scala.tools.scalap.scalax.rules.Name" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName">ruleWithName</a><span class="delimiter">[</span><a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName;In">In</a>, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName;Out">Out</a>, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName;A">A</a>, <a title="" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName;X">X</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.name">name</a>: <span title="String">String</span>, <a title="In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.f">f</a>: In =&gt; rules.Result<span class="delimiter">[</span>Out, A, X<span class="delimiter">]</span><span class="delimiter">)</span> = super.<a href="Rules.scala.html#scala.tools.scalap.scalax.rules;Rules.ruleWithName" title="(_name: String, f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Rule[In,Out,A,X] with scala.tools.scalap.scalax.rules.Name">ruleWithName</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.name" title="String">name</a>, <span class="delimiter">(</span>in: <a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName;In" title="In">In</a><span class="delimiter">)</span> =&gt; <a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.$anonfun.in" title="In">in</a> match <span class="delimiter">{</span>
      case <a title="scala.tools.scalap.scalax.rules.Memoisable" id="scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.$anonfun.s">s</a>: <a href="#scala.tools.scalap.scalax.rules;Memoisable" title="scala.tools.scalap.scalax.rules.Memoisable">Memoisable</a> =&gt; <a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.$anonfun.s" title="scala.tools.scalap.scalax.rules.Memoisable">s</a>.<a href="#scala.tools.scalap.scalax.rules;Memoisable.memo" title="(key: AnyRef, a: =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X])scala.tools.scalap.scalax.rules.Result[Out,A,X]">memo</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.name" title="String">name</a>, <a href="../../../../Function1.scala.html#scala;Function1.apply" title="(v1: In)scala.tools.scalap.scalax.rules.Result[Out,A,X]">f</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.$anonfun.in" title="In">in</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case _ =&gt; <a href="../../../../Function1.scala.html#scala;Function1.apply" title="(v1: In)scala.tools.scalap.scalax.rules.Result[Out,A,X]">f</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;MemoisableRules.ruleWithName.$anonfun.in" title="In">in</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

trait <a title="trait Memoisable extends AnyRef" id="scala.tools.scalap.scalax.rules;Memoisable">Memoisable</a> <span class="delimiter">{</span>
  def <a title="[A](key: AnyRef, a: =&gt; A)A" id="scala.tools.scalap.scalax.rules;Memoisable.memo">memo</a><span class="delimiter">[</span><a title="" id="scala.tools.scalap.scalax.rules;Memoisable.memo;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="AnyRef" id="scala.tools.scalap.scalax.rules;Memoisable.memo.key">key</a>: <span title="AnyRef">AnyRef</span>, <a title="=&gt; A" id="scala.tools.scalap.scalax.rules;Memoisable.memo.a">a</a>: =&gt; A<span class="delimiter">)</span>: <a href="#scala.tools.scalap.scalax.rules;Memoisable.memo;A" title="A">A</a>
<span class="delimiter">}</span>


object <a title="scala.tools.scalap.scalax.rules.DefaultMemoisable.type" id="scala.tools.scalap.scalax.rules.DefaultMemoisable">DefaultMemoisable</a> <a href="#scala.tools.scalap.scalax.rules.DefaultMemoisable" title="scala.tools.scalap.scalax.rules.DefaultMemoisable.type" class="delimiter">{</a>
  var <a title="Boolean" id="scala.tools.scalap.scalax.rules.DefaultMemoisable.debug_=">debug</a> = false
<span class="delimiter">}</span>

trait <a title="trait DefaultMemoisable extends AnyRef with scala.tools.scalap.scalax.rules.Memoisable" id="scala.tools.scalap.scalax.rules;DefaultMemoisable">DefaultMemoisable</a> extends <a href="#scala.tools.scalap.scalax.rules;Memoisable" title="scala.tools.scalap.scalax.rules.Memoisable">Memoisable</a> <span class="delimiter">{</span>
  protected val <a title="scala.collection.mutable.HashMap[AnyRef,Any]" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.map">map</a> = new mutable.<a href="../../../../collection/mutable/HashMap.scala.html#scala.collection.mutable;HashMap" title="scala.collection.mutable.HashMap[AnyRef,Any]">HashMap</a><span class="delimiter">[</span>AnyRef, Any<span class="delimiter">]</span>

  def <a title="[A](key: AnyRef, a: =&gt; A)A" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.memo">memo</a><span class="delimiter">[</span><a title="" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.memo;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="AnyRef" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.memo.key">key</a>: <span title="AnyRef">AnyRef</span>, <a title="=&gt; A" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.memo.a">a</a>: =&gt; A<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.map" title="=&gt; scala.collection.mutable.HashMap[AnyRef,Any]">map</a>.<a href="../../../../collection/mutable/MapLike.scala.html#scala.collection.mutable;MapLike.getOrElseUpdate" title="(key: AnyRef, op: =&gt; Any)Any">getOrElseUpdate</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.memo.key" title="AnyRef">key</a>, <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute" title="(key: AnyRef, a: =&gt; A)Any">compute</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.memo.key" title="AnyRef">key</a>, <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.memo.a" title="=&gt; A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="A" class="delimiter">[</span><a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.memo;A" title="A">A</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  protected def <a title="[A](key: AnyRef, a: =&gt; A)Any" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute">compute</a><span class="delimiter">[</span><a title="" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="AnyRef" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.key">key</a>: <span title="AnyRef">AnyRef</span>, <a title="=&gt; A" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.a">a</a>: =&gt; A<span class="delimiter">)</span>: <span title="Any">Any</span> = <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.a" title="=&gt; A">a</a> match <span class="delimiter">{</span>
    case <a title="scala.tools.scalap.scalax.rules.Success[_,_]" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.success">success</a>: <a href="Result.scala.html#scala.tools.scalap.scalax.rules;Success" title="scala.tools.scalap.scalax.rules.Success[_,_]">Success</a><span class="delimiter">[</span>_, _<span class="delimiter">]</span> =&gt; <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess" title="(key: AnyRef, result: scala.tools.scalap.scalax.rules.Success[_,_])Unit">onSuccess</a><span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.key" title="AnyRef">key</a>, <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.success" title="scala.tools.scalap.scalax.rules.Success[_,_]">success</a><span class="delimiter">)</span>; <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.success" title="scala.tools.scalap.scalax.rules.Success[_,_]">success</a>
    case <a title="A" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.other">other</a> =&gt;
      if<span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules.DefaultMemoisable" title="scala.tools.scalap.scalax.rules.DefaultMemoisable.type">DefaultMemoisable</a>.<a href="#scala.tools.scalap.scalax.rules.DefaultMemoisable.debug_=" title="=&gt; Boolean">debug</a><span class="delimiter">)</span> <a href="../../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#scala.Predef.any2stringadd(6b32434ac5)" title="(self: AnyRef)any2stringadd[AnyRef]">key</a> <a href="../../../../Predef.scala.html#scala.Predef;any2stringadd.+" title="(other: String)String">+</a> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.other" title="A">other</a><span class="delimiter">)</span>
      <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.compute.other" title="A">other</a>
  <span class="delimiter">}</span>

  protected def <a title="[S, T](key: AnyRef, result: scala.tools.scalap.scalax.rules.Success[S,T])Unit" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess">onSuccess</a><span class="delimiter">[</span><a title="" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess;S">S</a>, <a title="" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="AnyRef" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.key">key</a>: <span title="AnyRef">AnyRef</span>,  <a title="scala.tools.scalap.scalax.rules.Success[S,T]" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.result">result</a>: <a href="Result.scala.html#scala.tools.scalap.scalax.rules;Success" title="scala.tools.scalap.scalax.rules.Success[S,T]">Success</a><span class="delimiter">[</span>S, T<span class="delimiter">]</span><span class="delimiter">)</span>  <span class="delimiter">{</span>
    val Success<a href="../../../../Tuple2.scala.html#scala;Tuple2" title="(S, T)" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#scala;Tuple2._1" title="S" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.out">out</a>, <a href="../../../../Tuple2.scala.html#scala;Tuple2._2" title="T" id="scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.t">t</a><span class="delimiter">)</span> = <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.result" title="scala.tools.scalap.scalax.rules.Success[S,T]">result</a>
    if<span class="delimiter">(</span><a href="#scala.tools.scalap.scalax.rules.DefaultMemoisable" title="scala.tools.scalap.scalax.rules.DefaultMemoisable.type">DefaultMemoisable</a>.<a href="#scala.tools.scalap.scalax.rules.DefaultMemoisable.debug_=" title="=&gt; Boolean">debug</a><span class="delimiter">)</span> <a href="../../../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#scala.Predef.any2stringadd(6b32434ac5)" title="(self: AnyRef)any2stringadd[AnyRef]">key</a> <a href="../../../../Predef.scala.html#scala.Predef;any2stringadd.+" title="(other: String)String">+</a> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.t" title="T">t</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; (&quot;)" class="string">&quot; (&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#scala.tools.scalap.scalax.rules;DefaultMemoisable.onSuccess.out" title="S">out</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>




        </pre>
    </body>
</html>
